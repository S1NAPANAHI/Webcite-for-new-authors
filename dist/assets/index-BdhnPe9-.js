const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PriceManager-CjbmDZri-BZm8dron.js","assets/react-CFYy8Idz.js"])))=>i.map(i=>d[i]);
var GP=e=>{throw TypeError(e)};var C_=(e,t,r)=>t.has(e)||GP("Cannot "+r);var F=(e,t,r)=>(C_(e,t,"read from private field"),r?r.call(e):t.get(e)),ze=(e,t,r)=>t.has(e)?GP("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ke=(e,t,r,n)=>(C_(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),tt=(e,t,r)=>(C_(e,t,"access private method"),r);var cy=(e,t,r,n)=>({set _(s){ke(e,t,s,r)},get _(){return F(e,t,n)}});import{r as g,a as Zn,g as HJ,c as fi,z as U$,R as ee,N as B$}from"./react-CFYy8Idz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var q$={exports:{}},$0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZJ=g,GJ=Symbol.for("react.element"),YJ=Symbol.for("react.fragment"),JJ=Object.prototype.hasOwnProperty,XJ=ZJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QJ={key:!0,ref:!0,__self:!0,__source:!0};function V$(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)JJ.call(t,n)&&!QJ.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:GJ,type:e,key:i,ref:o,props:s,_owner:XJ.current}}$0.Fragment=YJ;$0.jsx=V$;$0.jsxs=V$;q$.exports=$0;var y=q$.exports,Vk={},YP=Zn;Vk.createRoot=YP.createRoot,Vk.hydrateRoot=YP.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var JP="popstate";function eX(e={}){function t(n,s){let{pathname:i,search:o,hash:a}=n.location;return Wk("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:om(s)}return rX(t,r,null,e)}function Gt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tX(){return Math.random().toString(36).substring(2,10)}function XP(e,t){return{usr:e.state,key:e.key,idx:t}}function Wk(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Gh(t):t,state:r,key:t&&t.key||n||tX()}}function om({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gh(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function rX(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let b=u(),x=b==null?null:b-c;c=b,l&&l({action:a,location:m.location,delta:x})}function f(b,x){a="PUSH";let w=Wk(m.location,b,x);c=u()+1;let _=XP(w,c),j=m.createHref(w);try{o.pushState(_,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(j)}i&&l&&l({action:a,location:m.location,delta:1})}function p(b,x){a="REPLACE";let w=Wk(m.location,b,x);c=u();let _=XP(w,c),j=m.createHref(w);o.replaceState(_,"",j),i&&l&&l({action:a,location:m.location,delta:0})}function v(b){return nX(b)}let m={get action(){return a},get location(){return e(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(JP,h),l=b,()=>{s.removeEventListener(JP,h),l=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let x=v(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(b){return o.go(b)}};return m}function nX(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Gt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:om(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function W$(e,t,r="/"){return sX(e,t,r,!1)}function sX(e,t,r,n){let s=typeof t=="string"?Gh(t):t,i=ka(s.pathname||"/",r);if(i==null)return null;let o=K$(e);iX(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=gX(i);a=pX(o[l],c,n)}return a}function K$(e,t=[],r=[],n="",s=!1){let i=(o,a,l=s,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;Gt(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=ba([n,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(Gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),K$(o.children,t,f,h,l)),!(o.path==null&&!o.index)&&t.push({path:h,score:hX(h,o.index),routesMeta:f})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of H$(o.path))i(o,a,!0,c)}),t}function H$(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=H$(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function iX(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:fX(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var oX=/^:[\w-]+$/,aX=3,lX=2,cX=1,uX=10,dX=-2,QP=e=>e==="*";function hX(e,t){let r=e.split("/"),n=r.length;return r.some(QP)&&(n+=dX),t&&(n+=lX),r.filter(s=>!QP(s)).reduce((s,i)=>s+(oX.test(i)?aX:i===""?cX:uX),n)}function fX(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function pX(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=Kv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=Kv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ba([i,h.pathname]),pathnameBase:xX(ba([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=ba([i,h.pathnameBase]))}return o}function Kv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=mX(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:h},f)=>{if(u==="*"){let v=a[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function mX(e,t=!1,r=!0){pi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function gX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return pi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ka(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function yX(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Gh(e):e;return{pathname:r?r.startsWith("/")?r:vX(r,t):t,search:wX(n),hash:_X(s)}}function vX(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function T_(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bX(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function _E(e){let t=bX(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function jE(e,t,r,n=!1){let s;typeof e=="string"?s=Gh(e):(s={...e},Gt(!s.pathname||!s.pathname.includes("?"),T_("?","pathname","search",s)),Gt(!s.pathname||!s.pathname.includes("#"),T_("#","pathname","hash",s)),Gt(!s.search||!s.search.includes("#"),T_("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?t[h]:"/"}let l=yX(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var ba=e=>e.join("/").replace(/\/\/+/g,"/"),xX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_X=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Z$=["POST","PUT","PATCH","DELETE"];new Set(Z$);var kX=["GET",...Z$];new Set(kX);var Yh=g.createContext(null);Yh.displayName="DataRouter";var F0=g.createContext(null);F0.displayName="DataRouterState";g.createContext(!1);var G$=g.createContext({isTransitioning:!1});G$.displayName="ViewTransition";var NX=g.createContext(new Map);NX.displayName="Fetchers";var SX=g.createContext(null);SX.displayName="Await";var no=g.createContext(null);no.displayName="Navigation";var ng=g.createContext(null);ng.displayName="Location";var bi=g.createContext({outlet:null,matches:[],isDataRoute:!1});bi.displayName="Route";var kE=g.createContext(null);kE.displayName="RouteError";function EX(e,{relative:t}={}){Gt(Jh(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=g.useContext(no),{hash:s,pathname:i,search:o}=sg(e,{relative:t}),a=i;return r!=="/"&&(a=i==="/"?r:ba([r,i])),n.createHref({pathname:a,search:o,hash:s})}function Jh(){return g.useContext(ng)!=null}function xi(){return Gt(Jh(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(ng).location}var Y$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function J$(e){g.useContext(no).static||g.useLayoutEffect(e)}function z0(){let{isDataRoute:e}=g.useContext(bi);return e?BX():CX()}function CX(){Gt(Jh(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Yh),{basename:t,navigator:r}=g.useContext(no),{matches:n}=g.useContext(bi),{pathname:s}=xi(),i=JSON.stringify(_E(n)),o=g.useRef(!1);return J$(()=>{o.current=!0}),g.useCallback((l,c={})=>{if(pi(o.current,Y$),!o.current)return;if(typeof l=="number"){r.go(l);return}let u=jE(l,JSON.parse(i),s,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:ba([t,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[t,r,i,s,e])}var TX=g.createContext(null);function AX(e){let t=g.useContext(bi).outlet;return t&&g.createElement(TX.Provider,{value:e},t)}function Tu(){let{matches:e}=g.useContext(bi),t=e[e.length-1];return t?t.params:{}}function sg(e,{relative:t}={}){let{matches:r}=g.useContext(bi),{pathname:n}=xi(),s=JSON.stringify(_E(r));return g.useMemo(()=>jE(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function OX(e,t){return X$(e,t)}function X$(e,t,r,n,s){var w;Gt(Jh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(no),{matches:o}=g.useContext(bi),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";Q$(c,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=xi(),p;if(t){let _=typeof t=="string"?Gh(t):t;Gt(u==="/"||((w=_.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=f;let v=p.pathname||"/",m=v;if(u!=="/"){let _=u.replace(/^\//,"").split("/");m="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=W$(e,{pathname:m});pi(h||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),pi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=LX(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:ba([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:ba([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,r,n,s);return t&&x?g.createElement(ng.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function PX(){let e=UX(),t=jX(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:s},r):null,o)}var RX=g.createElement(PX,null),IX=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(bi.Provider,{value:this.props.routeContext},g.createElement(kE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DX({routeContext:e,match:t,children:r}){let n=g.useContext(Yh);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(bi.Provider,{value:e},r)}function LX(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let c=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Gt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,l=-1;if(r)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:f}=r,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,u,h)=>{let f,p=!1,v=null,m=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,v=u.route.errorElement||RX,a&&(l<0&&h===0?(Q$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,m=null):l===h&&(p=!0,m=u.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,h+1)),x=()=>{let w;return f?w=v:p?w=m:u.route.Component?w=g.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=c,g.createElement(DX,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?g.createElement(IX,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):x()},null)}function NE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MX(e){let t=g.useContext(Yh);return Gt(t,NE(e)),t}function $X(e){let t=g.useContext(F0);return Gt(t,NE(e)),t}function FX(e){let t=g.useContext(bi);return Gt(t,NE(e)),t}function SE(e){let t=FX(e),r=t.matches[t.matches.length-1];return Gt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function zX(){return SE("useRouteId")}function UX(){var n;let e=g.useContext(kE),t=$X("useRouteError"),r=SE("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function BX(){let{router:e}=MX("useNavigate"),t=SE("useNavigate"),r=g.useRef(!1);return J$(()=>{r.current=!0}),g.useCallback(async(s,i={})=>{pi(r.current,Y$),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var eR={};function Q$(e,t,r){!t&&!eR[e]&&(eR[e]=!0,pi(!1,r))}g.memo(qX);function qX({routes:e,future:t,state:r,unstable_onError:n}){return X$(e,void 0,r,n,t)}function eF({to:e,replace:t,state:r,relative:n}){Gt(Jh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=g.useContext(no);pi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=g.useContext(bi),{pathname:o}=xi(),a=z0(),l=jE(e,_E(i),o,n==="path"),c=JSON.stringify(l);return g.useEffect(()=>{a(JSON.parse(c),{replace:t,state:r,relative:n})},[a,c,n,t,r]),null}function EE(e){return AX(e.context)}function Ae(e){Gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VX({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Gt(!Jh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=g.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=Gh(r));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:f="default"}=r,p=g.useMemo(()=>{let v=ka(l,o);return v==null?null:{location:{pathname:v,search:c,hash:u,state:h,key:f},navigationType:n}},[o,l,c,u,h,f,n]);return pi(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:g.createElement(no.Provider,{value:a},g.createElement(ng.Provider,{children:t,value:p}))}function tF({children:e,location:t}){return OX(Kk(e),t)}function Kk(e,t=[]){let r=[];return g.Children.forEach(e,(n,s)=>{if(!g.isValidElement(n))return;let i=[...t,s];if(n.type===g.Fragment){r.push.apply(r,Kk(n.props.children,i));return}Gt(n.type===Ae,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Kk(n.props.children,i)),r.push(o)}),r}var xv="get",wv="application/x-www-form-urlencoded";function U0(e){return e!=null&&typeof e.tagName=="string"}function WX(e){return U0(e)&&e.tagName.toLowerCase()==="button"}function KX(e){return U0(e)&&e.tagName.toLowerCase()==="form"}function HX(e){return U0(e)&&e.tagName.toLowerCase()==="input"}function ZX(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function GX(e,t){return e.button===0&&(!t||t==="_self")&&!ZX(e)}function Hk(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function YX(e,t){let r=Hk(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var uy=null;function JX(){if(uy===null)try{new FormData(document.createElement("form"),0),uy=!1}catch{uy=!0}return uy}var XX=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function A_(e){return e!=null&&!XX.has(e)?(pi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wv}"`),null):e}function QX(e,t){let r,n,s,i,o;if(KX(e)){let a=e.getAttribute("action");n=a?ka(a,t):null,r=e.getAttribute("method")||xv,s=A_(e.getAttribute("enctype"))||wv,i=new FormData(e)}else if(WX(e)||HX(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?ka(l,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||xv,s=A_(e.getAttribute("formenctype"))||A_(a.getAttribute("enctype"))||wv,i=new FormData(a,e),!JX()){let{name:c,type:u,value:h}=e;if(u==="image"){let f=c?`${c}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else c&&i.append(c,h)}}else{if(U0(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=xv,n=null,s=wv,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function CE(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function eQ(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&ka(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function tQ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rQ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function nQ(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await tQ(i,r);return o.links?o.links():[]}return[]}));return aQ(n.flat(1).filter(rQ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function tR(e,t,r,n,s,i){let o=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,a=(l,c)=>{var u;return r[c].pathname!==l.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?t.filter((l,c)=>{var h;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function sQ(e,t,{includeHydrateFallback:r}={}){return iQ(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function iQ(e){return[...new Set(e)]}function oQ(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function aQ(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(oQ(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function rF(){let e=g.useContext(Yh);return CE(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function lQ(){let e=g.useContext(F0);return CE(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var TE=g.createContext(void 0);TE.displayName="FrameworkContext";function nF(){let e=g.useContext(TE);return CE(e,"You must render this element inside a <HydratedRouter> element"),e}function cQ(e,t){let r=g.useContext(TE),[n,s]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=t,f=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=x=>{x.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(m,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[e]),g.useEffect(()=>{if(n){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[n]);let p=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:Bf(a,p),onBlur:Bf(l,v),onMouseEnter:Bf(c,p),onMouseLeave:Bf(u,v),onTouchStart:Bf(h,p)}]:[!1,f,{}]}function Bf(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function uQ({page:e,...t}){let{router:r}=rF(),n=g.useMemo(()=>W$(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?g.createElement(hQ,{page:e,matches:n,...t}):null}function dQ(e){let{manifest:t,routeModules:r}=nF(),[n,s]=g.useState([]);return g.useEffect(()=>{let i=!1;return nQ(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function hQ({page:e,matches:t,...r}){let n=xi(),{manifest:s,routeModules:i}=nF(),{basename:o}=rF(),{loaderData:a,matches:l}=lQ(),c=g.useMemo(()=>tR(e,t,l,s,n,"data"),[e,t,l,s,n]),u=g.useMemo(()=>tR(e,t,l,s,n,"assets"),[e,t,l,s,n]),h=g.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let v=new Set,m=!1;if(t.forEach(x=>{var _;let w=s.routes[x.route.id];!w||!w.hasLoader||(!c.some(j=>j.route.id===x.route.id)&&x.route.id in a&&((_=i[x.route.id])!=null&&_.shouldRevalidate)||w.hasClientLoader?m=!0:v.add(x.route.id))}),v.size===0)return[];let b=eQ(e,o,"data");return m&&v.size>0&&b.searchParams.set("_routes",t.filter(x=>v.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[o,a,n,s,c,t,e,i]),f=g.useMemo(()=>sQ(u,s),[u,s]),p=dQ(u);return g.createElement(g.Fragment,null,h.map(v=>g.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),f.map(v=>g.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),p.map(({key:v,link:m})=>g.createElement("link",{key:v,nonce:r.nonce,...m})))}function fQ(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var sF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sF&&(window.__reactRouterVersion="7.8.2")}catch{}function pQ({basename:e,children:t,window:r}){let n=g.useRef();n.current==null&&(n.current=eX({window:r,v5Compat:!0}));let s=n.current,[i,o]=g.useState({action:s.action,location:s.location}),a=g.useCallback(l=>{g.startTransition(()=>o(l))},[o]);return g.useLayoutEffect(()=>s.listen(a),[s,a]),g.createElement(VX,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var iF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sn=g.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h,...f},p){let{basename:v}=g.useContext(no),m=typeof c=="string"&&iF.test(c),b,x=!1;if(typeof c=="string"&&m&&(b=c,sF))try{let T=new URL(window.location.href),P=c.startsWith("//")?new URL(T.protocol+c):new URL(c),O=ka(P.pathname,v);P.origin===T.origin&&O!=null?c=O+P.search+P.hash:x=!0}catch{pi(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=EX(c,{relative:s}),[_,j,k]=cQ(n,f),N=yQ(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function S(T){t&&t(T),T.defaultPrevented||N(T)}let E=g.createElement("a",{...f,...k,href:b||w,onClick:x||i?t:S,ref:fQ(p,j),target:l,"data-discover":!m&&r==="render"?"true":void 0});return _&&!m?g.createElement(g.Fragment,null,E,g.createElement(uQ,{page:w})):E});sn.displayName="Link";var Ud=g.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let h=sg(o,{relative:c.relative}),f=xi(),p=g.useContext(F0),{navigator:v,basename:m}=g.useContext(no),b=p!=null&&jQ(h)&&a===!0,x=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=f.pathname,_=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(w=w.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&m&&(_=ka(_,m)||_);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let k=w===x||!s&&w.startsWith(x)&&w.charAt(j)==="/",N=_!=null&&(_===x||!s&&_.startsWith(x)&&_.charAt(x.length)==="/"),S={isActive:k,isPending:N,isTransitioning:b},E=k?t:void 0,T;typeof n=="function"?T=n(S):T=[n,k?"active":null,N?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(S):i;return g.createElement(sn,{...c,"aria-current":E,className:T,ref:u,style:P,to:o,viewTransition:a},typeof l=="function"?l(S):l)});Ud.displayName="NavLink";var mQ=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=xv,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...f},p)=>{let v=wQ(),m=_Q(a,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&iF.test(a),w=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let j=_.nativeEvent.submitter,k=(j==null?void 0:j.getAttribute("formmethod"))||o;v(j||_.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:h})};return g.createElement("form",{ref:p,method:b,action:m,onSubmit:n?l:w,...f,"data-discover":!x&&e==="render"?"true":void 0})});mQ.displayName="Form";function gQ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oF(e){let t=g.useContext(Yh);return Gt(t,gQ(e)),t}function yQ(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=z0(),l=xi(),c=sg(e,{relative:i});return g.useCallback(u=>{if(GX(u,t)){u.preventDefault();let h=r!==void 0?r:om(l)===om(c);a(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,r,n,t,e,s,i,o])}function vQ(e){pi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(Hk(e)),r=g.useRef(!1),n=xi(),s=g.useMemo(()=>YX(n.search,r.current?null:t.current),[n.search]),i=z0(),o=g.useCallback((a,l)=>{const c=Hk(typeof a=="function"?a(new URLSearchParams(s)):a);r.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var bQ=0,xQ=()=>`__${String(++bQ)}__`;function wQ(){let{router:e}=oF("useSubmit"),{basename:t}=g.useContext(no),r=zX();return g.useCallback(async(n,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=QX(n,t);if(s.navigate===!1){let u=s.fetcherKey||xQ();await e.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function _Q(e,{relative:t}={}){let{basename:r}=g.useContext(no),n=g.useContext(bi);Gt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...sg(e||".",{relative:t})},o=xi();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let u=a.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:ba([r,i.pathname])),om(i)}function jQ(e,{relative:t}={}){let r=g.useContext(G$);Gt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=oF("useViewTransitionState"),s=sg(e,{relative:t});if(!r.isTransitioning)return!1;let i=ka(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=ka(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Kv(s.pathname,o)!=null||Kv(s.pathname,i)!=null}const kQ="modulepreload",NQ=function(e){return"/"+e},rR={},Xh=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=NQ(l),l in rR)return;rR[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":kQ,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},SQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xh(async()=>{const{default:n}=await Promise.resolve().then(()=>Qh);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class AE extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class EQ extends AE{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class nR extends AE{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class sR extends AE{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Zk;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Zk||(Zk={}));var CQ=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class TQ{constructor(t,{headers:r={},customFetch:n,region:s=Zk.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=SQ(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return CQ(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(m=>{throw new EQ(m)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new nR(h);if(!h.ok)throw new sR(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield h.json():p==="application/octet-stream"?v=yield h.blob():p==="text/event-stream"?v=h:p==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof sR||s instanceof nR?s.context:void 0}}})}}var hs={},OE={},B0={},ig={},q0={},V0={},AQ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},xh=AQ();const OQ=xh.fetch,aF=xh.fetch.bind(xh),lF=xh.Headers,PQ=xh.Request,RQ=xh.Response,Qh=Object.freeze(Object.defineProperty({__proto__:null,Headers:lF,Request:PQ,Response:RQ,default:aF,fetch:OQ},Symbol.toStringTag,{value:"Module"})),IQ=HJ(Qh);var W0={};Object.defineProperty(W0,"__esModule",{value:!0});let DQ=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};W0.default=DQ;var cF=fi&&fi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(V0,"__esModule",{value:!0});const LQ=cF(IQ),MQ=cF(W0);let $Q=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=LQ.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,c;let u=null,h=null,f=null,p=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=w:h=JSON.parse(w))}const b=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),x=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(h=[],u=null,p=200,v="OK")}catch{i.status===404&&b===""?(p=204,v="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,p=200,v="OK"),u&&this.shouldThrowOnError)throw new MQ.default(u)}return{error:u,data:h,count:f,status:p,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};V0.default=$Q;var FQ=fi&&fi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(q0,"__esModule",{value:!0});const zQ=FQ(V0);let UQ=class extends zQ.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};q0.default=UQ;var BQ=fi&&fi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ig,"__esModule",{value:!0});const qQ=BQ(q0);let VQ=class extends qQ.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};ig.default=VQ;var WQ=fi&&fi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(B0,"__esModule",{value:!0});const qf=WQ(ig);let KQ=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new qf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new qf.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new qf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new qf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new qf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};B0.default=KQ;var uF=fi&&fi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(OE,"__esModule",{value:!0});const HQ=uF(B0),ZQ=uF(ig);let GQ=class dF{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new HQ.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new dF(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new ZQ.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};OE.default=GQ;var ef=fi&&fi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hs,"__esModule",{value:!0});hs.PostgrestError=hs.PostgrestBuilder=hs.PostgrestTransformBuilder=hs.PostgrestFilterBuilder=hs.PostgrestQueryBuilder=hs.PostgrestClient=void 0;const hF=ef(OE);hs.PostgrestClient=hF.default;const fF=ef(B0);hs.PostgrestQueryBuilder=fF.default;const pF=ef(ig);hs.PostgrestFilterBuilder=pF.default;const mF=ef(q0);hs.PostgrestTransformBuilder=mF.default;const gF=ef(V0);hs.PostgrestBuilder=gF.default;const yF=ef(W0);hs.PostgrestError=yF.default;var YQ=hs.default={PostgrestClient:hF.default,PostgrestQueryBuilder:fF.default,PostgrestFilterBuilder:pF.default,PostgrestTransformBuilder:mF.default,PostgrestBuilder:gF.default,PostgrestError:yF.default};const{PostgrestClient:JQ,PostgrestQueryBuilder:ZKe,PostgrestFilterBuilder:GKe,PostgrestTransformBuilder:YKe,PostgrestBuilder:JKe,PostgrestError:XKe}=YQ;class XQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const QQ="2.15.1",e1=`realtime-js/${QQ}`,t1="1.0.0",Gk=1e4,r1=1e3,n1=100;var Pp;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Pp||(Pp={}));var Ur;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ur||(Ur={}));var $i;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})($i||($i={}));var Yk;(function(e){e.websocket="websocket"})(Yk||(Yk={}));var Ic;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ic||(Ic={}));class s1{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+s));o=o+s;const l=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class vF{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ct;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ct||(Ct={}));const iR=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=i1(o,e,t,s),i),{})},i1=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?bF(i,o):Jk(o)},bF=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return c1(t,r)}switch(e){case Ct.bool:return o1(t);case Ct.float4:case Ct.float8:case Ct.int2:case Ct.int4:case Ct.int8:case Ct.numeric:case Ct.oid:return a1(t);case Ct.json:case Ct.jsonb:return l1(t);case Ct.timestamp:return u1(t);case Ct.abstime:case Ct.date:case Ct.daterange:case Ct.int4range:case Ct.int8range:case Ct.money:case Ct.reltime:case Ct.text:case Ct.time:case Ct.timestamptz:case Ct.timetz:case Ct.tsrange:case Ct.tstzrange:return Jk(t);default:return Jk(t)}},Jk=e=>e,o1=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},a1=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},l1=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},c1=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>bF(t,a))}return e},u1=e=>typeof e=="string"?e.replace(" ","T"):e,xF=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class O_{constructor(t,r,n={},s=Gk){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var oR;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(oR||(oR={}));class Rp{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rp.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Rp.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Rp.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),v=u.filter(b=>p.indexOf(b.presence_ref)<0),m=h.filter(b=>f.indexOf(b.presence_ref)<0);v.length>0&&(a[c]=v),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var aR;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(aR||(aR={}));var Ip;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ip||(Ip={}));var na;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(na||(na={}));class PE{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ur.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new O_(this,$i.join,this.params,this.timeout),this.rejoinTimer=new vF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ur.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ur.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ur.errored,this.rejoinTimer.scheduleTimeout())}),this._on($i.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Rp(this),this.broadcastEndpointURL=xF(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ur.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Ip.PRESENCE]&&this.bindings[Ip.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(na.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(na.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t==null||t(na.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,m=(p=v==null?void 0:v.length)!==null&&p!==void 0?p:0,b=[];for(let x=0;x<m;x++){const w=v[x],{filter:{event:_,schema:j,table:k,filter:N}}=w,S=f&&f[x];if(S&&S.event===_&&S.schema===j&&S.table===k&&S.filter===N)b.push(Object.assign(Object.assign({},w),{id:S.id}));else{this.unsubscribe(),this.state=Ur.errored,t==null||t(na.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(na.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ur.errored,t==null||t(na.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(na.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ur.joined&&t===Ip.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ur.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($i.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new O_(this,$i.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ur.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new O_(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>n1){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=$i;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,m,b;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(m=p.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,m,b,x,w,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const j=p.id,k=(v=p.filter)===null||v===void 0?void 0:v.event;return j&&((m=r.ids)===null||m===void 0?void 0:m.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(w=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return j==="*"||j===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:m,table:b,commit_timestamp:x,type:w,errors:_}=v;f=Object.assign(Object.assign({},{schema:m,table:b,commit_timestamp:x,eventType:w,new:{},old:{},errors:_}),this._getPayloadRecords(v))}p.callback(f,n)})}_isClosed(){return this.state===Ur.closed}_isJoined(){return this.state===Ur.joined}_isJoining(){return this.state===Ur.joining}_isLeaving(){return this.state===Ur.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&PE.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on($i.close,{},t)}_onError(t){this._on($i.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ur.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=iR(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=iR(t.columns,t.old_record)),r}}const lR=()=>{},dy={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},d1=[1e3,2e3,5e3,1e4],h1=1e4,f1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class p1{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gk,this.transport=null,this.heartbeatIntervalMs=dy.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lR,this.ref=0,this.reconnectTimer=null,this.logger=lR,this.conn=null,this.sendBuffer=[],this.serializer=new s1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Xh(async()=>{const{default:a}=await Promise.resolve().then(()=>Qh);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Yk.websocket}`,this.httpEndpoint=xF(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=XQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t1}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Pp.connecting:return Ic.Connecting;case Pp.open:return Ic.Open;case Pp.closing:return Ic.Closing;default:return Ic.Closed}}isConnected(){return this.connectionState()===Ic.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new PE(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(r1,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},dy.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger($i.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([f1],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:e1};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push($i.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new vF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},dy.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Gk,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:dy.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t==null?void 0:t.reconnectAfterMs)!==null&&a!==void 0?a:u=>d1[u-1]||h1,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(u,h)=>h(JSON.stringify(u)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class RE extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function qr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class m1 extends RE{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xk extends RE{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var g1=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const wF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xh(async()=>{const{default:n}=await Promise.resolve().then(()=>Qh);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},y1=()=>g1(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xh(()=>Promise.resolve().then(()=>Qh),void 0)).Response:Response}),Qk=e=>{if(Array.isArray(e))return e.map(r=>Qk(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Qk(n)}),t},v1=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Au=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const P_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),b1=(e,t,r)=>Au(void 0,void 0,void 0,function*(){const n=yield y1();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new m1(P_(s),i,o))}).catch(s=>{t(new Xk(P_(s),s))}):t(new Xk(P_(e),e))}),x1=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(v1(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function og(e,t,r,n,s,i){return Au(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,x1(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>b1(l,a,n))})})}function Hv(e,t,r,n){return Au(this,void 0,void 0,function*(){return og(e,"GET",t,r,n)})}function vo(e,t,r,n,s){return Au(this,void 0,void 0,function*(){return og(e,"POST",t,n,s,r)})}function eN(e,t,r,n,s){return Au(this,void 0,void 0,function*(){return og(e,"PUT",t,n,s,r)})}function w1(e,t,r,n){return Au(this,void 0,void 0,function*(){return og(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function _F(e,t,r,n,s){return Au(this,void 0,void 0,function*(){return og(e,"DELETE",t,n,s,r)})}var Fn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const _1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class j1{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=wF(s)}uploadOrUpdate(t,r,n,s){return Fn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},cR),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(t=="PUT"?eN:vo)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(qr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Fn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:cR.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield eN(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(qr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return Fn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield vo(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new RE("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(qr(n))return{data:null,error:n};throw n}})}update(t,r,n){return Fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Fn(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(qr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Fn(this,void 0,void 0,function*(){try{return{data:{path:(yield vo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(qr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Fn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield vo(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(qr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Fn(this,void 0,void 0,function*(){try{const s=yield vo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(qr(s))return{data:null,error:s};throw s}})}download(t,r){return Fn(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield Hv(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(qr(a))return{data:null,error:a};throw a}})}info(t){return Fn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Hv(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Qk(n),error:null}}catch(n){if(qr(n))return{data:null,error:n};throw n}})}exists(t){return Fn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield w1(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(qr(n)&&n instanceof Xk){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return Fn(this,void 0,void 0,function*(){try{return{data:yield _F(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(qr(r))return{data:null,error:r};throw r}})}list(t,r,n){return Fn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},_1),r),{prefix:t||""});return{data:yield vo(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(qr(s))return{data:null,error:s};throw s}})}listV2(t,r){return Fn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield vo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(qr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const k1="2.11.0",N1={"X-Client-Info":`storage-js/${k1}`};var Yu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class S1{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},N1),r),this.fetch=wF(n)}listBuckets(){return Yu(this,void 0,void 0,function*(){try{return{data:yield Hv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(qr(t))return{data:null,error:t};throw t}})}getBucket(t){return Yu(this,void 0,void 0,function*(){try{return{data:yield Hv(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(qr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Yu(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(qr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Yu(this,void 0,void 0,function*(){try{return{data:yield eN(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(qr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Yu(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(qr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Yu(this,void 0,void 0,function*(){try{return{data:yield _F(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(qr(r))return{data:null,error:r};throw r}})}}class E1 extends S1{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new j1(this.url,this.headers,t,this.fetch)}}const C1="2.56.0";let fp="";typeof Deno<"u"?fp="deno":typeof document<"u"?fp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fp="react-native":fp="node";const T1={"X-Client-Info":`supabase-js-${fp}/${C1}`},A1={headers:T1},O1={schema:"public"},P1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},R1={};var I1=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const D1=e=>{let t;return e?t=e:typeof fetch>"u"?t=aF:t=fetch,(...r)=>t(...r)},L1=()=>typeof Headers>"u"?lF:Headers,M1=(e,t,r)=>{const n=D1(r),s=L1();return(i,o)=>I1(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var $1=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function F1(e){return e.endsWith("/")?e:e+"/"}function z1(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>$1(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const jF="2.71.1",pd=30*1e3,tN=3,R_=tN*pd,U1="http://localhost:9999",B1="supabase.auth.token",q1={"X-Client-Info":`gotrue-js/${jF}`},rN="X-Supabase-Api-Version",kF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},V1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,W1=10*60*1e3;class IE extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class K1 extends IE{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function H1(e){return Xe(e)&&e.name==="AuthApiError"}class NF extends IE{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Gl extends IE{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class ol extends Gl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Z1(e){return Xe(e)&&e.name==="AuthSessionMissingError"}class hy extends Gl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fy extends Gl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class py extends Gl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function G1(e){return Xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class uR extends Gl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nN extends Gl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function I_(e){return Xe(e)&&e.name==="AuthRetryableFetchError"}class dR extends Gl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class sN extends Gl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hR=` 	
\r=`.split(""),Y1=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<hR.length;t+=1)e[hR[t].charCodeAt(0)]=-2;for(let t=0;t<Zv.length;t+=1)e[Zv[t].charCodeAt(0)]=t;return e})();function fR(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Zv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Zv[n]),t.queuedBits-=6}}function SF(e,t,r){const n=Y1[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function pR(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Q1(o,n,r)};for(let o=0;o<e.length;o+=1)SF(e.charCodeAt(o),s,i);return t.join("")}function J1(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function X1(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}J1(n,t)}}function Q1(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function eee(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)SF(e.charCodeAt(s),r,n);return new Uint8Array(t)}function tee(e){const t=[];return X1(e,r=>t.push(r)),new Uint8Array(t)}function ree(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>fR(s,r,n)),fR(null,r,n),t.join("")}function nee(e){return Math.round(Date.now()/1e3)+e}function see(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ai=()=>typeof window<"u"&&typeof document<"u",bc={tested:!1,writable:!1},EF=()=>{if(!Ai())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bc.tested)return bc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bc.tested=!0,bc.writable=!0}catch{bc.tested=!0,bc.writable=!1}return bc.writable};function iee(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const CF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xh(async()=>{const{default:n}=await Promise.resolve().then(()=>Qh);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},oee=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",md=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},xc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ja=async(e,t)=>{await e.removeItem(t)};class K0{constructor(){this.promise=new K0.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}K0.promiseConstructor=Promise;function D_(e){const t=e.split(".");if(t.length!==3)throw new sN("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!V1.test(t[n]))throw new sN("JWT not in base64url format");return{header:JSON.parse(pR(t[0])),payload:JSON.parse(pR(t[1])),signature:eee(t[2]),raw:{header:t[0],payload:t[1]}}}async function aee(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function lee(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function cee(e){return("0"+e.toString(16)).substr(-2)}function uee(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,cee).join("")}async function dee(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function hee(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await dee(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ju(e,t,r=!1){const n=uee();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await md(e,`${t}-code-verifier`,s);const i=await hee(n);return[i,n===i?"plain":"s256"]}const fee=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pee(e){const t=e.headers.get(rN);if(!t||!t.match(fee))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function mee(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function gee(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yee=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xu(e){if(!yee.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function L_(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mR(e){return JSON.parse(JSON.stringify(e))}var vee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Ec=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bee=[502,503,504];async function gR(e){var t;if(!oee(e))throw new nN(Ec(e),0);if(bee.includes(e.status))throw new nN(Ec(e),e.status);let r;try{r=await e.json()}catch(i){throw new NF(Ec(i),i)}let n;const s=pee(e);if(s&&s.getTime()>=kF["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new dR(Ec(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ol}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new dR(Ec(r),e.status,r.weak_password.reasons);throw new K1(Ec(r),e.status||500,n)}const xee=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function rt(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[rN]||(i[rN]=kF["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await wee(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function wee(e,t,r,n,s,i){const o=xee(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new nN(Ec(l),0)}if(a.ok||await gR(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await gR(l)}}function ea(e){var t;let r=null;Nee(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=nee(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function yR(e){const t=ea(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function gl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function _ee(e){return{data:e,error:null}}function jee(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=vee(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function kee(e){return e}function Nee(e){return e.access_token&&e.refresh_token&&e.expires_in}const M_=["global","local","others"];var See=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Eee{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=CF(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=M_[0]){if(M_.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${M_.join(", ")}`);try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:gl})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=See(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:jee,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Xe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:gl})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:kee});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Xe(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Xu(t);try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:gl})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Xu(t);try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:gl})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Xu(t);try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:gl})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Xu(t.userId);try{const{data:r,error:n}=await rt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Xu(t.userId),Xu(t.id);try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}}function vR(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Cee(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qu={debug:!!(globalThis&&EF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class TF extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Tee extends TF{}async function Aee(e,t,r){Qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Qu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Tee(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Qu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Cee();const Oee={url:U1,storageKey:B1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:q1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bR(e,t,r){return await r()}const ed={};class am{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=am.nextInstanceID,am.nextInstanceID+=1,this.instanceID>0&&Ai()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Oee),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Eee({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=CF(s.fetch),this.lock=s.lock||bR,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ai()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Aee:this.lock=bR,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:EF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vR(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=vR(this.memoryStorage)),Ai()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=ed[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ed[this.storageKey]=Object.assign(Object.assign({},ed[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ed[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ed[this.storageKey]=Object.assign(Object.assign({},ed[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jF}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=iee(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ai()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),G1(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Xe(r)?{error:r}:{error:new NF("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:ea}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Xe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Ju(this.storage,this.storageKey)),i=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:ea})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ea})}else throw new fy("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Xe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:yR})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:yR})}else throw new fy("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new hy}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Xe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,a,l,c,u,h,f,p;let v,m;if("message"in t)v=t.message,m=t.signature;else{const{chain:b,wallet:x,statement:w,options:_}=t;let j;if(Ai())if(typeof x=="object")j=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const k=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),m=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=N}}try{const{data:b,error:x}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:ree(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ea});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new hy}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(Xe(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await xc(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ea});if(await Ja(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new hy}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Xe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ea}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new hy}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(Xe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ju(this.storage,this.storageKey));const{error:h}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new fy("You must provide either an email or phone number.")}catch(a){if(Xe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ea});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Xe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ju(this.storage,this.storageKey)),await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:_ee})}catch(i){if(Xe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new ol;const{error:s}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Xe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await rt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await rt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new fy("You must provide either an email or phone number and a type")}catch(r){if(Xe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await xc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<R_:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await xc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=L_()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:gl}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ol}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:gl})})}catch(r){if(Xe(r))return Z1(r)&&(await this._removeSession(),await Ja(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new ol;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Ju(this.storage,this.storageKey));const{data:c,error:u}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:gl});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ol;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=D_(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Xe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new ol;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Xe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ai())throw new py("No browser detected.");if(t.error||t.error_description||t.error_code)throw new py(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new uR("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new py("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new uR("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new py("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=pd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=f-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:m,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(Xe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await xc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(H1(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Ja(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=see(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ju(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Xe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Ai()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Xe(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await lee(async s=>(s>0&&await aee(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ea})),(s,i)=>{const o=200*Math.pow(2,s);return i&&I_(i)&&Date.now()+o-n<pd})}catch(n){if(this._debug(r,"error",n),Xe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ai()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await xc(this.storage,this.storageKey);if(s&&this.userStorage){let o=await xc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await md(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:L_()}else if(s&&!s.user&&!s.user){const o=await xc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Ja(this.storage,this.storageKey+"-user"),await md(this.storage,this.storageKey,s)):s.user=L_()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<R_;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${R_}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),I_(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new ol;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new K0;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new ol;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Xe(i)){const o={session:null,error:i};return I_(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await md(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=mR(s);await md(this.storage,this.storageKey,i)}else{const s=mR(r);await md(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Ja(this.storage,this.storageKey),await Ja(this.storage,this.storageKey+"-code-verifier"),await Ja(this.storage,this.storageKey+"-user"),this.userStorage&&await Ja(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ai()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),pd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/pd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${pd}ms, refresh threshold is ${tN} ticks`),s<=tN&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof TF)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ai()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ju(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await rt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=D_(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+W1>s)return n;const{data:i,error:o}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=D_(n);r!=null&&r.allowExpired||mee(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=gee(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,tee(`${a}.${l}`)))throw new sN("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}}am.nextInstanceID=0;const Pee=am;class Ree extends Pee{constructor(t){super(t)}}var Iee=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class Dee{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=F1(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:O1,realtime:R1,auth:Object.assign(Object.assign({},P1),{storageKey:c}),global:A1},h=z1(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=M1(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new JQ(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new E1(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new TQ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Iee(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ree({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new p1(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const AF=(e,t,r)=>new Dee(e,t,r);function Lee(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Lee()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $_={};var Mee={};const xR=typeof window<"u",OF="https://opukvvmumyegtkukqint.supabase.co",PF="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",OF);console.log("DEBUG: supabaseAnonKey (raw):",PF);(($_==null?void 0:$_.VITE_DEBUG)==="true"||Mee.VITE_DEBUG==="true")&&(console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set"));let Ms;try{Ms=AF(OF,PF,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:xR?window.localStorage:void 0}});const e=typeof process<"u"&&!1}catch(e){throw console.error("Error initializing Supabase client:",e),e}const RF=g.createContext(void 0),$ee=({children:e,supabaseClient:t})=>{const[r,n]=g.useState(null),[s,i]=g.useState(null),[o,a]=g.useState(null),[l,c]=g.useState(!1),[u,h]=g.useState(!1),[f,p]=g.useState(!0);return g.useEffect(()=>{const{data:v}=t.auth.onAuthStateChange(async(m,b)=>{i(b),n((b==null?void 0:b.user)||null),p(!1)});return t.auth.getSession().then(({data:{session:m}})=>{i(m),n((m==null?void 0:m.user)||null),p(!1)}),()=>{v.subscription.unsubscribe()}},[t]),g.useEffect(()=>{const v=async b=>{try{const{data:x,error:w}=await t.from("profiles").select("*").eq("id",b).single();if(w){if(w.code==="PGRST116"){console.log("Profile not found, creating new profile for user:",b),await m(b);return}throw w}a(x),c((x==null?void 0:x.role)==="admin"||(x==null?void 0:x.role)==="super_admin")}catch(x){console.error("Error fetching user profile:",x),a(null),c(!1)}},m=async b=>{var x,w,_;try{const{data:{user:j},error:k}=await t.auth.getUser();if(k||!j){console.error("Error getting user info for profile creation:",k);return}const{data:N,error:S}=await t.from("profiles").insert({id:b,username:((x=j.email)==null?void 0:x.split("@")[0])||null,display_name:((w=j.user_metadata)==null?void 0:w.full_name)||((_=j.email)==null?void 0:_.split("@")[0])||"User",email:j.email,role:"user",subscription_status:"inactive",beta_reader_status:"none"}).select().single();S?(console.error("Error creating user profile:",S),a(null),c(!1)):(console.log("Successfully created user profile:",N),a(N),c((N==null?void 0:N.role)==="admin"||(N==null?void 0:N.role)==="super_admin"))}catch(j){console.error("Error in createUserProfile:",j),a(null),c(!1)}};r!=null&&r.id?(v(r.id),h(!0)):(a(null),c(!1),h(!1))},[r,t]),y.jsx(RF.Provider,{value:{user:r,session:s,userProfile:o,isAdmin:l,isAuthenticated:u,isLoading:f},children:e})},IF=()=>{const e=g.useContext(RF);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},DF={items:[],total:0,itemCount:0},Fee=(e,t)=>{switch(t.type){case"ADD_ITEM":if(e.items.find(n=>n.id===t.payload.id)){const n=e.items.map(o=>o.id===t.payload.id?{...o,quantity:o.quantity+t.payload.quantity}:o),s=n.reduce((o,a)=>o+a.price*a.quantity,0),i=n.reduce((o,a)=>o+a.quantity,0);return{...e,items:n,total:s,itemCount:i}}else{const n=[...e.items,t.payload],s=n.reduce((o,a)=>o+a.price*a.quantity,0),i=n.reduce((o,a)=>o+a.quantity,0);return{...e,items:n,total:s,itemCount:i}}case"REMOVE_ITEM":{const r=e.items.filter(i=>i.id!==t.payload),n=r.reduce((i,o)=>i+o.price*o.quantity,0),s=r.reduce((i,o)=>i+o.quantity,0);return{...e,items:r,total:n,itemCount:s}}case"UPDATE_QUANTITY":{const r=e.items.map(i=>i.id===t.payload.id?{...i,quantity:t.payload.quantity}:i),n=r.reduce((i,o)=>i+o.price*o.quantity,0),s=r.reduce((i,o)=>i+o.quantity,0);return{...e,items:r,total:n,itemCount:s}}case"CLEAR_CART":return DF;case"LOAD_CART":{const r=t.payload.reduce((s,i)=>s+i.price*i.quantity,0),n=t.payload.reduce((s,i)=>s+i.quantity,0);return{...e,items:t.payload,total:r,itemCount:n}}default:return e}},zee=g.createContext(void 0),Uee=({children:e})=>{const[t,r]=g.useReducer(Fee,DF),n=c=>{r({type:"ADD_ITEM",payload:{...c,quantity:1}})},s=c=>{r({type:"REMOVE_ITEM",payload:c})},l={state:t,addItem:n,removeItem:s,updateQuantity:(c,u)=>{u<=0?s(c):r({type:"UPDATE_QUANTITY",payload:{id:c,quantity:u}})},clearCart:()=>{r({type:"CLEAR_CART"})},isInCart:c=>t.items.some(u=>u.id===c)};return y.jsx(zee.Provider,{value:l,children:e})},Bee=async e=>{const{data:t,error:r}=await Ms.from("subscriptions").select("*").eq("user_id",e).single();return r?(console.error("Error fetching subscription:",r),null):t},qee=async e=>{const t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),r=Ms.from("wiki_pages").select(`
      id, created_at, created_by, title, slug, excerpt, is_published, category_id, folder_id, updated_at, view_count,
      content, seo_title, seo_description, seo_keywords,
      category(*),
      user(*)
    `).eq(t?"id":"slug",e),{data:n,error:s}=await r.single();if(s)return console.error("Error fetching wiki page:",s),null;if(n){n.user&&typeof n.user=="object"&&"error"in n.user&&(n.user=null),n.category&&typeof n.category=="object"&&"error"in n.category&&(n.category=null);const{data:i,error:o}=await Ms.from("wiki_content_blocks").select("id, type, content, position").eq("page_id",n.id).order("position");if(o)throw console.error("Error fetching wiki content:",o),new Error("Failed to fetch wiki content");const a=(i==null?void 0:i.map(c=>({id:c.id,type:c.type,content:c.content,title:""})))||[];return await Ms.rpc("increment_wiki_page_views",{page_id:n.id}),{...n,sections:a,content:n.content||"",seo_title:n.seo_title||"",seo_description:n.seo_description||"",seo_keywords:n.seo_keywords||[],category:n.category,user:n.user}}return null},Vee=async e=>{const t={books_read:0,reading_hours:0,achievements:0,currently_reading:"None"},{data:r,error:n}=await Ms.from("user_stats").upsert({user_id:e,...t},{onConflict:"user_id"}).select("*").single();if(n)throw console.error("Error initializing user stats:",n),n;return r},Wee=async e=>{try{const{data:t,error:r}=await Ms.from("user_stats").select("*").eq("user_id",e).maybeSingle();if(!t&&(!r||r.code==="PGRST116"))return Vee(e);if(r)throw r;return t}catch(t){throw console.error("Error fetching user stats:",t),t}};var wR;(function(e){e.UNAUTHORIZED="UNAUTHORIZED",e.FORBIDDEN="FORBIDDEN",e.INVALID_TOKEN="INVALID_TOKEN",e.INSUFFICIENT_PERMISSIONS="INSUFFICIENT_PERMISSIONS",e.VALIDATION_ERROR="VALIDATION_ERROR",e.INVALID_INPUT="INVALID_INPUT",e.MISSING_REQUIRED_FIELD="MISSING_REQUIRED_FIELD",e.BUSINESS_RULE_VIOLATION="BUSINESS_RULE_VIOLATION",e.SUBSCRIPTION_LIMIT_EXCEEDED="SUBSCRIPTION_LIMIT_EXCEEDED",e.CONTENT_ACCESS_DENIED="CONTENT_ACCESS_DENIED",e.PRICING_ERROR="PRICING_ERROR",e.RESOURCE_NOT_FOUND="RESOURCE_NOT_FOUND",e.DUPLICATE_RESOURCE="DUPLICATE_RESOURCE",e.DATA_INTEGRITY_ERROR="DATA_INTEGRITY_ERROR",e.PAYMENT_PROCESSING_ERROR="PAYMENT_PROCESSING_ERROR",e.EMAIL_SERVICE_ERROR="EMAIL_SERVICE_ERROR",e.STORAGE_SERVICE_ERROR="STORAGE_SERVICE_ERROR",e.DATABASE_ERROR="DATABASE_ERROR",e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED"})(wR||(wR={}));function se(e,t,r){function n(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in o.prototype)u in a||Object.defineProperty(a,u,{value:o.prototype[u].bind(a)});a._zod.constr=o,a._zod.def=l}const s=(r==null?void 0:r.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:e});function o(a){var l;const c=r!=null&&r.Parent?new i:this;n(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var l,c;return r!=null&&r.Parent&&a instanceof r.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class Bd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class LF extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const MF={};function Fl(e){return MF}function Kee(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,s])=>t.indexOf(+n)===-1).map(([n,s])=>s)}function iN(e,t){return typeof t=="bigint"?t.toString():t}function DE(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function LE(e){return e==null}function ME(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Hee(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let s=(n.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(n)){const l=n.match(/\d?e-(\d?)/);l!=null&&l[1]&&(s=Number.parseInt(l[1]))}const i=r>s?r:s,o=Number.parseInt(e.toFixed(i).replace(".","")),a=Number.parseInt(t.toFixed(i).replace(".",""));return o%a/10**i}const _R=Symbol("evaluating");function Ot(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==_R)return n===void 0&&(n=_R,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Zee(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function Yl(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function tf(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function jR(e){return JSON.stringify(e)}const $F="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Gv(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Gee=DE(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function wh(e){if(Gv(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Gv(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function FF(e){return wh(e)?{...e}:e}const Yee=new Set(["string","number","symbol"]);function H0(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Jl(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function $e(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Jee(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Xee={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Qee(e,t){const r=e._zod.def,n=tf(e._zod.def,{get shape(){const s={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(s[i]=r.shape[i])}return Yl(this,"shape",s),s},checks:[]});return Jl(e,n)}function ete(e,t){const r=e._zod.def,n=tf(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete s[i]}return Yl(this,"shape",s),s},checks:[]});return Jl(e,n)}function tte(e,t){if(!wh(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=tf(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t};return Yl(this,"shape",i),i},checks:[]});return Jl(e,s)}function rte(e,t){if(!wh(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return Yl(this,"shape",n),n},checks:e._zod.def.checks};return Jl(e,r)}function nte(e,t){const r=tf(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return Yl(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Jl(e,r)}function ste(e,t,r){const n=tf(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)i[o]=e?new e({type:"optional",innerType:s[o]}):s[o];return Yl(this,"shape",i),i},checks:[]});return Jl(t,n)}function ite(e,t,r){const n=tf(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:s[o]}))}else for(const o in s)i[o]=new e({type:"nonoptional",innerType:s[o]});return Yl(this,"shape",i),i},checks:[]});return Jl(t,n)}function Td(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function Ad(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function my(e){return typeof e=="string"?e:e==null?void 0:e.message}function zl(e,t,r){var s,i,o,a,l,c;const n={...e,path:e.path??[]};if(!e.message){const u=my((o=(i=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??my((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??my((l=r.customError)==null?void 0:l.call(r,e))??my((c=r.localeError)==null?void 0:c.call(r,e))??"Invalid input";n.message=u}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function $E(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function lm(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const zF=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,iN,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},UF=se("$ZodError",zF),BF=se("$ZodError",zF,{Parent:Error});function ote(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function ate(e,t){const r=t||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(e),n}const FE=e=>(t,r,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new Bd;if(o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>zl(l,i,Fl())));throw $F(a,s==null?void 0:s.callee),a}return o.value},zE=e=>async(t,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>zl(l,i,Fl())));throw $F(a,s==null?void 0:s.callee),a}return o.value},Z0=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new Bd;return i.issues.length?{success:!1,error:new(e??UF)(i.issues.map(o=>zl(o,s,Fl())))}:{success:!0,data:i.value}},lte=Z0(BF),G0=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>zl(o,s,Fl())))}:{success:!0,data:i.value}},cte=G0(BF),ute=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return FE(e)(t,r,s)},dte=e=>(t,r,n)=>FE(e)(t,r,n),hte=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return zE(e)(t,r,s)},fte=e=>async(t,r,n)=>zE(e)(t,r,n),pte=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Z0(e)(t,r,s)},mte=e=>(t,r,n)=>Z0(e)(t,r,n),gte=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return G0(e)(t,r,s)},yte=e=>async(t,r,n)=>G0(e)(t,r,n),vte=/^[cC][^\s-]{8,}$/,bte=/^[0-9a-z]+$/,xte=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,wte=/^[0-9a-vA-V]{20}$/,_te=/^[A-Za-z0-9]{27}$/,jte=/^[a-zA-Z0-9_-]{21}$/,kte=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Nte=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,kR=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Ste=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Ete="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Cte(){return new RegExp(Ete,"u")}const Tte=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ate=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Ote=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Pte=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Rte=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,qF=/^[A-Za-z0-9_-]*$/,Ite=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Dte=/^\+(?:[0-9]){6,14}[0-9]$/,VF="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Lte=new RegExp(`^${VF}$`);function WF(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Mte(e){return new RegExp(`^${WF(e)}$`)}function $te(e){const t=WF({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${VF}T(?:${n})$`)}const Fte=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},zte=/^\d+$/,Ute=/^-?\d+(?:\.\d+)?/i,Bte=/true|false/i,qte=/^[^A-Z]*$/,Vte=/^[^a-z]*$/,xs=se("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),KF={number:"number",bigint:"bigint",object:"date"},HF=se("$ZodCheckLessThan",(e,t)=>{xs.init(e,t);const r=KF[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,i=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ZF=se("$ZodCheckGreaterThan",(e,t)=>{xs.init(e,t);const r=KF[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,i=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Wte=se("$ZodCheckMultipleOf",(e,t)=>{xs.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Hee(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Kte=se("$ZodCheckNumberFormat",(e,t)=>{var o;xs.init(e,t),t.format=t.format||"float64";const r=(o=t.format)==null?void 0:o.includes("int"),n=r?"int":"number",[s,i]=Xee[t.format];e._zod.onattach.push(a=>{const l=a._zod.bag;l.format=t.format,l.minimum=s,l.maximum=i,r&&(l.pattern=zte)}),e._zod.check=a=>{const l=a.value;if(r){if(!Number.isInteger(l)){a.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?a.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):a.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}l<s&&a.issues.push({origin:"number",input:l,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),l>i&&a.issues.push({origin:"number",input:l,code:"too_big",maximum:i,inst:e})}}),Hte=se("$ZodCheckMaxLength",(e,t)=>{var r;xs.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!LE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const o=$E(s);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Zte=se("$ZodCheckMinLength",(e,t)=>{var r;xs.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!LE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const o=$E(s);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Gte=se("$ZodCheckLengthEquals",(e,t)=>{var r;xs.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!LE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,i=s.length;if(i===t.length)return;const o=$E(s),a=i>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Y0=se("$ZodCheckStringFormat",(e,t)=>{var r,n;xs.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Yte=se("$ZodCheckRegex",(e,t)=>{Y0.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Jte=se("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=qte),Y0.init(e,t)}),Xte=se("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Vte),Y0.init(e,t)}),Qte=se("$ZodCheckIncludes",(e,t)=>{xs.init(e,t);const r=H0(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),ere=se("$ZodCheckStartsWith",(e,t)=>{xs.init(e,t);const r=new RegExp(`^${H0(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),tre=se("$ZodCheckEndsWith",(e,t)=>{xs.init(e,t);const r=new RegExp(`.*${H0(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),rre=se("$ZodCheckOverwrite",(e,t)=>{xs.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class nre{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(o=>o),s=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,r=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...r,s.join(`
`))}}const sre={major:4,minor:1,patch:3},sr=se("$ZodType",(e,t)=>{var s;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=sre;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const i of n)for(const o of i._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const i=(a,l,c)=>{let u=Td(a),h;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(u)continue;const p=a.issues.length,v=f._zod.check(a);if(v instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Bd;if(h||v instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await v,a.issues.length!==p&&(u||(u=Td(a,p)))});else{if(a.issues.length===p)continue;u||(u=Td(a,p))}}return h?h.then(()=>a):a},o=(a,l,c)=>{if(Td(a))return a.aborted=!0,a;const u=i(l,n,c);if(u instanceof Promise){if(c.async===!1)throw new Bd;return u.then(h=>e._zod.parse(h,c))}return e._zod.parse(u,c)};e._zod.run=(a,l)=>{if(l.skipChecks)return e._zod.parse(a,l);if(l.direction==="backward"){const u=e._zod.parse({value:a.value,issues:[]},{...l,skipChecks:!0});return u instanceof Promise?u.then(h=>o(h,a,l)):o(u,a,l)}const c=e._zod.parse(a,l);if(c instanceof Promise){if(l.async===!1)throw new Bd;return c.then(u=>i(u,n,l))}return i(c,n,l)}}e["~standard"]={validate:i=>{var o;try{const a=lte(e,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return cte(e,i).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),UE=se("$ZodString",(e,t)=>{var r;sr.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??Fte(e._zod.bag),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Yt=se("$ZodStringFormat",(e,t)=>{Y0.init(e,t),UE.init(e,t)}),ire=se("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Nte),Yt.init(e,t)}),ore=se("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=kR(n))}else t.pattern??(t.pattern=kR());Yt.init(e,t)}),are=se("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Ste),Yt.init(e,t)}),lre=se("$ZodURL",(e,t)=>{Yt.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Ite.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),cre=se("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Cte()),Yt.init(e,t)}),ure=se("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=jte),Yt.init(e,t)}),dre=se("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=vte),Yt.init(e,t)}),hre=se("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=bte),Yt.init(e,t)}),fre=se("$ZodULID",(e,t)=>{t.pattern??(t.pattern=xte),Yt.init(e,t)}),pre=se("$ZodXID",(e,t)=>{t.pattern??(t.pattern=wte),Yt.init(e,t)}),mre=se("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=_te),Yt.init(e,t)}),gre=se("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=$te(t)),Yt.init(e,t)}),yre=se("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Lte),Yt.init(e,t)}),vre=se("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Mte(t)),Yt.init(e,t)}),bre=se("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=kte),Yt.init(e,t)}),xre=se("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Tte),Yt.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),wre=se("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ate),Yt.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),_re=se("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ote),Yt.init(e,t)}),jre=se("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Pte),Yt.init(e,t),e._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function GF(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const kre=se("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Rte),Yt.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{GF(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function Nre(e){if(!qF.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return GF(r)}const Sre=se("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=qF),Yt.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{Nre(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Ere=se("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Dte),Yt.init(e,t)});function Cre(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const Tre=se("$ZodJWT",(e,t)=>{Yt.init(e,t),e._zod.check=r=>{Cre(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),YF=se("$ZodNumber",(e,t)=>{sr.init(e,t),e._zod.pattern=e._zod.bag.pattern??Ute,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...i?{received:i}:{}}),r}}),Are=se("$ZodNumber",(e,t)=>{Kte.init(e,t),YF.init(e,t)}),Ore=se("$ZodBoolean",(e,t)=>{sr.init(e,t),e._zod.pattern=Bte,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),Pre=se("$ZodAny",(e,t)=>{sr.init(e,t),e._zod.parse=r=>r}),Rre=se("$ZodUnknown",(e,t)=>{sr.init(e,t),e._zod.parse=r=>r}),Ire=se("$ZodNever",(e,t)=>{sr.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function NR(e,t,r){e.issues.length&&t.issues.push(...Ad(r,e.issues)),t.value[r]=e.value}const Dre=se("$ZodArray",(e,t)=>{sr.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=t.element._zod.run({value:a,issues:[]},n);l instanceof Promise?i.push(l.then(c=>NR(c,r,o))):NR(l,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function Yv(e,t,r,n){e.issues.length&&t.issues.push(...Ad(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function JF(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape[n]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const r=Jee(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function XF(e,t,r,n,s,i){const o=[],a=s.keySet,l=s.catchall._zod,c=l.def.type;for(const u of Object.keys(t)){if(a.has(u))continue;if(c==="never"){o.push(u);continue}const h=l.run({value:t[u],issues:[]},n);h instanceof Promise?e.push(h.then(f=>Yv(f,r,u,t))):Yv(h,r,u,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const Lre=se("$ZodObject",(e,t)=>{sr.init(e,t);const r=DE(()=>JF(t));Ot(e._zod,"propValues",()=>{const o=t.shape,a={};for(const l in o){const c=o[l]._zod;if(c.values){a[l]??(a[l]=new Set);for(const u of c.values)a[l].add(u)}}return a});const n=Gv,s=t.catchall;let i;e._zod.parse=(o,a)=>{i??(i=r.value);const l=o.value;if(!n(l))return o.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),o;o.value={};const c=[],u=i.shape;for(const h of i.keys){const p=u[h]._zod.run({value:l[h],issues:[]},a);p instanceof Promise?c.push(p.then(v=>Yv(v,o,h,l))):Yv(p,o,h,l)}return s?XF(c,l,o,a,r.value,e):c.length?Promise.all(c).then(()=>o):o}}),Mre=se("$ZodObjectJIT",(e,t)=>{Lre.init(e,t);const r=e._zod.parse,n=DE(()=>JF(t)),s=f=>{const p=new nre(["shape","payload","ctx"]),v=n.value,m=_=>{const j=jR(_);return`shape[${j}]._zod.run({ value: input[${j}], issues: [] }, ctx)`};p.write("const input = payload.value;");const b=Object.create(null);let x=0;for(const _ of v.keys)b[_]=`key_${x++}`;p.write("const newResult = {}");for(const _ of v.keys){const j=b[_],k=jR(_);p.write(`const ${j} = ${m(_)};`),p.write(`
        if (${j}.issues.length) {
          payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${k}, ...iss.path] : [${k}]
          })));
        }
        
        if (${j}.value === undefined) {
          if (${k} in input) {
            newResult[${k}] = undefined;
          }
        } else {
          newResult[${k}] = ${j}.value;
        }
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const w=p.compile();return(_,j)=>w(f,_,j)};let i;const o=Gv,a=!MF.jitless,c=a&&Gee.value,u=t.catchall;let h;e._zod.parse=(f,p)=>{h??(h=n.value);const v=f.value;return o(v)?a&&c&&(p==null?void 0:p.async)===!1&&p.jitless!==!0?(i||(i=s(t.shape)),f=i(f,p),u?XF([],v,f,p,h,e):f):r(f,p):(f.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),f)}});function SR(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const s=e.filter(i=>!Td(i));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>zl(o,n,Fl())))}),t)}const $re=se("$ZodUnion",(e,t)=>{sr.init(e,t),Ot(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Ot(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Ot(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),Ot(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>ME(i.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const l of t.options){const c=l._zod.run({value:s.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>SR(l,s,e,i)):SR(a,s,e,i)}}),Fre=se("$ZodIntersection",(e,t)=>{sr.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,i=t.left._zod.run({value:s,issues:[]},n),o=t.right._zod.run({value:s,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([l,c])=>ER(r,l,c)):ER(r,i,o)}});function oN(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(wh(e)&&wh(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),s={...e,...t};for(const i of n){const o=oN(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],i=t[n],o=oN(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function ER(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Td(e))return e;const n=oN(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const zre=se("$ZodRecord",(e,t)=>{sr.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!wh(s))return r.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),r;const i=[];if(t.keyType._zod.values){const o=t.keyType._zod.values;r.value={};for(const l of o)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=t.valueType._zod.run({value:s[l],issues:[]},n);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&r.issues.push(...Ad(l,u.issues)),r.value[l]=u.value})):(c.issues.length&&r.issues.push(...Ad(l,c.issues)),r.value[l]=c.value)}let a;for(const l in s)o.has(l)||(a=a??[],a.push(l));a&&a.length>0&&r.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:a})}else{r.value={};for(const o of Reflect.ownKeys(s)){if(o==="__proto__")continue;const a=t.keyType._zod.run({value:o,issues:[]},n);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(c=>zl(c,n,Fl())),input:o,path:[o],inst:e}),r.value[a.value]=a.value;continue}const l=t.valueType._zod.run({value:s[o],issues:[]},n);l instanceof Promise?i.push(l.then(c=>{c.issues.length&&r.issues.push(...Ad(o,c.issues)),r.value[a.value]=c.value})):(l.issues.length&&r.issues.push(...Ad(o,l.issues)),r.value[a.value]=l.value)}}return i.length?Promise.all(i).then(()=>r):r}}),Ure=se("$ZodEnum",(e,t)=>{sr.init(e,t);const r=Kee(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>Yee.has(typeof s)).map(s=>typeof s=="string"?H0(s):s.toString()).join("|")})$`),e._zod.parse=(s,i)=>{const o=s.value;return n.has(o)||s.issues.push({code:"invalid_value",values:r,input:o,inst:e}),s}}),Bre=se("$ZodTransform",(e,t)=>{sr.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new LF(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(r.value=o,r));if(s instanceof Promise)throw new Bd;return r.value=s,r}});function CR(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const qre=se("$ZodOptional",(e,t)=>{sr.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Ot(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Ot(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${ME(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>CR(i,r.value)):CR(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),Vre=se("$ZodNullable",(e,t)=>{sr.init(e,t),Ot(e._zod,"optin",()=>t.innerType._zod.optin),Ot(e._zod,"optout",()=>t.innerType._zod.optout),Ot(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${ME(r.source)}|null)$`):void 0}),Ot(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),Wre=se("$ZodDefault",(e,t)=>{sr.init(e,t),e._zod.optin="optional",Ot(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>TR(i,t)):TR(s,t)}});function TR(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Kre=se("$ZodPrefault",(e,t)=>{sr.init(e,t),e._zod.optin="optional",Ot(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Hre=se("$ZodNonOptional",(e,t)=>{sr.init(e,t),Ot(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>AR(i,e)):AR(s,e)}});function AR(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Zre=se("$ZodCatch",(e,t)=>{sr.init(e,t),Ot(e._zod,"optin",()=>t.innerType._zod.optin),Ot(e._zod,"optout",()=>t.innerType._zod.optout),Ot(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>zl(o,n,Fl()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(i=>zl(i,n,Fl()))},input:r.value}),r.issues=[]),r)}}),Gre=se("$ZodPipe",(e,t)=>{sr.init(e,t),Ot(e._zod,"values",()=>t.in._zod.values),Ot(e._zod,"optin",()=>t.in._zod.optin),Ot(e._zod,"optout",()=>t.out._zod.optout),Ot(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=t.out._zod.run(r,n);return i instanceof Promise?i.then(o=>gy(o,t.in,n)):gy(i,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(i=>gy(i,t.out,n)):gy(s,t.out,n)}});function gy(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Yre=se("$ZodReadonly",(e,t)=>{sr.init(e,t),Ot(e._zod,"propValues",()=>t.innerType._zod.propValues),Ot(e._zod,"values",()=>t.innerType._zod.values),Ot(e._zod,"optin",()=>t.innerType._zod.optin),Ot(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(OR):OR(s)}});function OR(e){return e.value=Object.freeze(e.value),e}const Jre=se("$ZodCustom",(e,t)=>{xs.init(e,t),sr.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(i=>PR(i,r,n,e));PR(s,r,n,e)}});function PR(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(lm(s))}}class Xre{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Qre(){return new Xre}const yy=Qre();function ene(e,t){return new e({type:"string",...$e(t)})}function tne(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...$e(t)})}function RR(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...$e(t)})}function rne(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...$e(t)})}function nne(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...$e(t)})}function sne(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...$e(t)})}function ine(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...$e(t)})}function one(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...$e(t)})}function ane(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...$e(t)})}function lne(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...$e(t)})}function cne(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...$e(t)})}function une(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...$e(t)})}function dne(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...$e(t)})}function hne(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...$e(t)})}function fne(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...$e(t)})}function pne(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...$e(t)})}function mne(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...$e(t)})}function gne(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...$e(t)})}function yne(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...$e(t)})}function vne(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...$e(t)})}function bne(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...$e(t)})}function xne(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...$e(t)})}function wne(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...$e(t)})}function _ne(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...$e(t)})}function jne(e,t){return new e({type:"string",format:"date",check:"string_format",...$e(t)})}function kne(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...$e(t)})}function Nne(e,t){return new e({type:"string",format:"duration",check:"string_format",...$e(t)})}function Sne(e,t){return new e({type:"number",checks:[],...$e(t)})}function Ene(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...$e(t)})}function Cne(e,t){return new e({type:"boolean",...$e(t)})}function Tne(e){return new e({type:"any"})}function Ane(e){return new e({type:"unknown"})}function One(e,t){return new e({type:"never",...$e(t)})}function IR(e,t){return new HF({check:"less_than",...$e(t),value:e,inclusive:!1})}function F_(e,t){return new HF({check:"less_than",...$e(t),value:e,inclusive:!0})}function DR(e,t){return new ZF({check:"greater_than",...$e(t),value:e,inclusive:!1})}function z_(e,t){return new ZF({check:"greater_than",...$e(t),value:e,inclusive:!0})}function LR(e,t){return new Wte({check:"multiple_of",...$e(t),value:e})}function QF(e,t){return new Hte({check:"max_length",...$e(t),maximum:e})}function Jv(e,t){return new Zte({check:"min_length",...$e(t),minimum:e})}function ez(e,t){return new Gte({check:"length_equals",...$e(t),length:e})}function Pne(e,t){return new Yte({check:"string_format",format:"regex",...$e(t),pattern:e})}function Rne(e){return new Jte({check:"string_format",format:"lowercase",...$e(e)})}function Ine(e){return new Xte({check:"string_format",format:"uppercase",...$e(e)})}function Dne(e,t){return new Qte({check:"string_format",format:"includes",...$e(t),includes:e})}function Lne(e,t){return new ere({check:"string_format",format:"starts_with",...$e(t),prefix:e})}function Mne(e,t){return new tre({check:"string_format",format:"ends_with",...$e(t),suffix:e})}function ag(e){return new rre({check:"overwrite",tx:e})}function $ne(e){return ag(t=>t.normalize(e))}function Fne(){return ag(e=>e.trim())}function zne(){return ag(e=>e.toLowerCase())}function Une(){return ag(e=>e.toUpperCase())}function Bne(e,t,r){return new e({type:"array",element:t,...$e(r)})}function qne(e,t,r){return new e({type:"custom",check:"custom",fn:t,...$e(r)})}function Vne(e){const t=Wne(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(lm(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(lm(s))}},e(r.value,r)));return t}function Wne(e,t){const r=new xs({check:"custom",...$e(t)});return r._zod.check=e,r}const Kne=se("ZodISODateTime",(e,t)=>{gre.init(e,t),ir.init(e,t)});function Hne(e){return _ne(Kne,e)}const Zne=se("ZodISODate",(e,t)=>{yre.init(e,t),ir.init(e,t)});function Gne(e){return jne(Zne,e)}const Yne=se("ZodISOTime",(e,t)=>{vre.init(e,t),ir.init(e,t)});function Jne(e){return kne(Yne,e)}const Xne=se("ZodISODuration",(e,t)=>{bre.init(e,t),ir.init(e,t)});function Qne(e){return Nne(Xne,e)}const ese=(e,t)=>{UF.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>ate(e,r)},flatten:{value:r=>ote(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,iN,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,iN,2)}},isEmpty:{get(){return e.issues.length===0}}})},wi=se("ZodError",ese,{Parent:Error}),tse=FE(wi),rse=zE(wi),nse=Z0(wi),sse=G0(wi),ise=ute(wi),ose=dte(wi),ase=hte(wi),lse=fte(wi),cse=pte(wi),use=mte(wi),dse=gte(wi),hse=yte(wi),pr=se("ZodType",(e,t)=>(sr.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>Jl(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>tse(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>nse(e,r,n),e.parseAsync=async(r,n)=>rse(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>sse(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>ise(e,r,n),e.decode=(r,n)=>ose(e,r,n),e.encodeAsync=async(r,n)=>ase(e,r,n),e.decodeAsync=async(r,n)=>lse(e,r,n),e.safeEncode=(r,n)=>cse(e,r,n),e.safeDecode=(r,n)=>use(e,r,n),e.safeEncodeAsync=async(r,n)=>dse(e,r,n),e.safeDecodeAsync=async(r,n)=>hse(e,r,n),e.refine=(r,n)=>e.check(sie(r,n)),e.superRefine=r=>e.check(iie(r)),e.overwrite=r=>e.check(ag(r)),e.optional=()=>zR(e),e.nullable=()=>UR(e),e.nullish=()=>zR(UR(e)),e.nonoptional=r=>Jse(e,r),e.array=()=>VE(e),e.or=r=>zse([e,r]),e.and=r=>Bse(e,r),e.transform=r=>BR(e,Wse(r)),e.default=r=>Zse(e,r),e.prefault=r=>Yse(e,r),e.catch=r=>Qse(e,r),e.pipe=r=>BR(e,r),e.readonly=()=>rie(e),e.describe=r=>{const n=e.clone();return yy.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=yy.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return yy.get(e);const n=e.clone();return yy.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),tz=se("_ZodString",(e,t)=>{UE.init(e,t),pr.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Pne(...n)),e.includes=(...n)=>e.check(Dne(...n)),e.startsWith=(...n)=>e.check(Lne(...n)),e.endsWith=(...n)=>e.check(Mne(...n)),e.min=(...n)=>e.check(Jv(...n)),e.max=(...n)=>e.check(QF(...n)),e.length=(...n)=>e.check(ez(...n)),e.nonempty=(...n)=>e.check(Jv(1,...n)),e.lowercase=n=>e.check(Rne(n)),e.uppercase=n=>e.check(Ine(n)),e.trim=()=>e.check(Fne()),e.normalize=(...n)=>e.check($ne(...n)),e.toLowerCase=()=>e.check(zne()),e.toUpperCase=()=>e.check(Une())}),fse=se("ZodString",(e,t)=>{UE.init(e,t),tz.init(e,t),e.email=r=>e.check(tne(pse,r)),e.url=r=>e.check(one(mse,r)),e.jwt=r=>e.check(wne(Ase,r)),e.emoji=r=>e.check(ane(gse,r)),e.guid=r=>e.check(RR(MR,r)),e.uuid=r=>e.check(rne(vy,r)),e.uuidv4=r=>e.check(nne(vy,r)),e.uuidv6=r=>e.check(sne(vy,r)),e.uuidv7=r=>e.check(ine(vy,r)),e.nanoid=r=>e.check(lne(yse,r)),e.guid=r=>e.check(RR(MR,r)),e.cuid=r=>e.check(cne(vse,r)),e.cuid2=r=>e.check(une(bse,r)),e.ulid=r=>e.check(dne(xse,r)),e.base64=r=>e.check(vne(Ese,r)),e.base64url=r=>e.check(bne(Cse,r)),e.xid=r=>e.check(hne(wse,r)),e.ksuid=r=>e.check(fne(_se,r)),e.ipv4=r=>e.check(pne(jse,r)),e.ipv6=r=>e.check(mne(kse,r)),e.cidrv4=r=>e.check(gne(Nse,r)),e.cidrv6=r=>e.check(yne(Sse,r)),e.e164=r=>e.check(xne(Tse,r)),e.datetime=r=>e.check(Hne(r)),e.date=r=>e.check(Gne(r)),e.time=r=>e.check(Jne(r)),e.duration=r=>e.check(Qne(r))});function he(e){return ene(fse,e)}const ir=se("ZodStringFormat",(e,t)=>{Yt.init(e,t),tz.init(e,t)}),pse=se("ZodEmail",(e,t)=>{are.init(e,t),ir.init(e,t)}),MR=se("ZodGUID",(e,t)=>{ire.init(e,t),ir.init(e,t)}),vy=se("ZodUUID",(e,t)=>{ore.init(e,t),ir.init(e,t)}),mse=se("ZodURL",(e,t)=>{lre.init(e,t),ir.init(e,t)}),gse=se("ZodEmoji",(e,t)=>{cre.init(e,t),ir.init(e,t)}),yse=se("ZodNanoID",(e,t)=>{ure.init(e,t),ir.init(e,t)}),vse=se("ZodCUID",(e,t)=>{dre.init(e,t),ir.init(e,t)}),bse=se("ZodCUID2",(e,t)=>{hre.init(e,t),ir.init(e,t)}),xse=se("ZodULID",(e,t)=>{fre.init(e,t),ir.init(e,t)}),wse=se("ZodXID",(e,t)=>{pre.init(e,t),ir.init(e,t)}),_se=se("ZodKSUID",(e,t)=>{mre.init(e,t),ir.init(e,t)}),jse=se("ZodIPv4",(e,t)=>{xre.init(e,t),ir.init(e,t)}),kse=se("ZodIPv6",(e,t)=>{wre.init(e,t),ir.init(e,t)}),Nse=se("ZodCIDRv4",(e,t)=>{_re.init(e,t),ir.init(e,t)}),Sse=se("ZodCIDRv6",(e,t)=>{jre.init(e,t),ir.init(e,t)}),Ese=se("ZodBase64",(e,t)=>{kre.init(e,t),ir.init(e,t)}),Cse=se("ZodBase64URL",(e,t)=>{Sre.init(e,t),ir.init(e,t)}),Tse=se("ZodE164",(e,t)=>{Ere.init(e,t),ir.init(e,t)}),Ase=se("ZodJWT",(e,t)=>{Tre.init(e,t),ir.init(e,t)}),rz=se("ZodNumber",(e,t)=>{YF.init(e,t),pr.init(e,t),e.gt=(n,s)=>e.check(DR(n,s)),e.gte=(n,s)=>e.check(z_(n,s)),e.min=(n,s)=>e.check(z_(n,s)),e.lt=(n,s)=>e.check(IR(n,s)),e.lte=(n,s)=>e.check(F_(n,s)),e.max=(n,s)=>e.check(F_(n,s)),e.int=n=>e.check($R(n)),e.safe=n=>e.check($R(n)),e.positive=n=>e.check(DR(0,n)),e.nonnegative=n=>e.check(z_(0,n)),e.negative=n=>e.check(IR(0,n)),e.nonpositive=n=>e.check(F_(0,n)),e.multipleOf=(n,s)=>e.check(LR(n,s)),e.step=(n,s)=>e.check(LR(n,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function xa(e){return Sne(rz,e)}const Ose=se("ZodNumberFormat",(e,t)=>{Are.init(e,t),rz.init(e,t)});function $R(e){return Ene(Ose,e)}const Pse=se("ZodBoolean",(e,t)=>{Ore.init(e,t),pr.init(e,t)});function BE(e){return Cne(Pse,e)}const Rse=se("ZodAny",(e,t)=>{Pre.init(e,t),pr.init(e,t)});function qE(){return Tne(Rse)}const Ise=se("ZodUnknown",(e,t)=>{Rre.init(e,t),pr.init(e,t)});function FR(){return Ane(Ise)}const Dse=se("ZodNever",(e,t)=>{Ire.init(e,t),pr.init(e,t)});function Lse(e){return One(Dse,e)}const Mse=se("ZodArray",(e,t)=>{Dre.init(e,t),pr.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Jv(r,n)),e.nonempty=r=>e.check(Jv(1,r)),e.max=(r,n)=>e.check(QF(r,n)),e.length=(r,n)=>e.check(ez(r,n)),e.unwrap=()=>e.element});function VE(e,t){return Bne(Mse,e,t)}const $se=se("ZodObject",(e,t)=>{Mre.init(e,t),pr.init(e,t),Ot(e,"shape",()=>t.shape),e.keyof=()=>Pt(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:FR()}),e.loose=()=>e.clone({...e._zod.def,catchall:FR()}),e.strict=()=>e.clone({...e._zod.def,catchall:Lse()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>tte(e,r),e.safeExtend=r=>rte(e,r),e.merge=r=>nte(e,r),e.pick=r=>Qee(e,r),e.omit=r=>ete(e,r),e.partial=(...r)=>ste(nz,e,r[0]),e.required=(...r)=>ite(sz,e,r[0])});function rs(e,t){const r={type:"object",get shape(){return Yl(this,"shape",e?Zee(e):{}),this.shape},...$e(t)};return new $se(r)}const Fse=se("ZodUnion",(e,t)=>{$re.init(e,t),pr.init(e,t),e.options=t.options});function zse(e,t){return new Fse({type:"union",options:e,...$e(t)})}const Use=se("ZodIntersection",(e,t)=>{Fre.init(e,t),pr.init(e,t)});function Bse(e,t){return new Use({type:"intersection",left:e,right:t})}const qse=se("ZodRecord",(e,t)=>{zre.init(e,t),pr.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function rf(e,t,r){return new qse({type:"record",keyType:e,valueType:t,...$e(r)})}const aN=se("ZodEnum",(e,t)=>{Ure.init(e,t),pr.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new aN({...t,checks:[],...$e(s),entries:i})},e.exclude=(n,s)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new aN({...t,checks:[],...$e(s),entries:i})}});function Pt(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new aN({type:"enum",entries:r,...$e(t)})}const Vse=se("ZodTransform",(e,t)=>{Bre.init(e,t),pr.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new LF(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(lm(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),r.issues.push(lm(o))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(i=>(r.value=i,r)):(r.value=s,r)}});function Wse(e){return new Vse({type:"transform",transform:e})}const nz=se("ZodOptional",(e,t)=>{qre.init(e,t),pr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function zR(e){return new nz({type:"optional",innerType:e})}const Kse=se("ZodNullable",(e,t)=>{Vre.init(e,t),pr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function UR(e){return new Kse({type:"nullable",innerType:e})}const Hse=se("ZodDefault",(e,t)=>{Wre.init(e,t),pr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Zse(e,t){return new Hse({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():FF(t)}})}const Gse=se("ZodPrefault",(e,t)=>{Kre.init(e,t),pr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Yse(e,t){return new Gse({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():FF(t)}})}const sz=se("ZodNonOptional",(e,t)=>{Hre.init(e,t),pr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Jse(e,t){return new sz({type:"nonoptional",innerType:e,...$e(t)})}const Xse=se("ZodCatch",(e,t)=>{Zre.init(e,t),pr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Qse(e,t){return new Xse({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const eie=se("ZodPipe",(e,t)=>{Gre.init(e,t),pr.init(e,t),e.in=t.in,e.out=t.out});function BR(e,t){return new eie({type:"pipe",in:e,out:t})}const tie=se("ZodReadonly",(e,t)=>{Yre.init(e,t),pr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function rie(e){return new tie({type:"readonly",innerType:e})}const nie=se("ZodCustom",(e,t)=>{Jre.init(e,t),pr.init(e,t)});function sie(e,t={}){return qne(nie,e,t)}function iie(e){return Vne(e)}const iz=rs({id:he().uuid().optional(),name:he().min(1,"Product name is required").max(255,"Product name must be less than 255 characters").trim(),description:he().max(2e3,"Description must be less than 2000 characters").optional().nullable(),product_type:Pt(["single_issue","bundle","chapter_pass","arc_pass"]).default("single_issue"),active:BE().default(!0),work_id:he().uuid().optional().nullable(),content_grants:rf(he(),qE()).optional().nullable(),created_at:he().datetime().optional(),updated_at:he().datetime().optional()}),oie=rs({id:he().uuid().optional(),product_id:he().uuid(),currency:he().length(3,"Currency must be a 3-letter ISO code").toUpperCase(),unit_amount:xa().min(0,"Price cannot be negative").max(999999,"Price cannot exceed $9,999.99"),interval:Pt(["one_time","month","year"]).optional().nullable(),nickname:he().max(100,"Nickname must be less than 100 characters").optional().nullable(),trial_days:xa().min(0,"Trial days cannot be negative").max(365,"Trial period cannot exceed 365 days").optional().nullable(),active:BE().default(!0),created_at:he().datetime().optional(),updated_at:he().datetime().optional()});iz.omit({id:!0,created_at:!0,updated_at:!0}).extend({prices:VE(oie.omit({id:!0,product_id:!0,created_at:!0,updated_at:!0})).min(1,"At least one price is required")});iz.partial().omit({id:!0,created_at:!0});rs({active:Pt(["true","false"]).optional(),product_type:Pt(["single_issue","bundle","chapter_pass","arc_pass"]).optional(),limit:he().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:he().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),search:he().max(100).optional(),sort_by:Pt(["created_at","name","price","updated_at"]).default("created_at"),sort_order:Pt(["asc","desc"]).default("desc")});const aie=rs({id:he().uuid(),username:he().min(3,"Username must be at least 3 characters").max(30,"Username must be less than 30 characters").regex(/^[a-zA-Z0-9_-]+$/,"Username can only contain letters, numbers, underscores, and hyphens").optional().nullable(),display_name:he().min(1,"Display name is required").max(100,"Display name must be less than 100 characters").trim().optional().nullable(),avatar_url:he().url("Invalid avatar URL").optional().nullable(),website:he().url("Invalid website URL").optional().nullable(),role:Pt(["admin","support","accountant","user","super_admin"]).default("user"),beta_reader_status:Pt(["not_applied","pending","approved","rejected"]).default("not_applied"),created_at:he().datetime().optional(),updated_at:he().datetime().optional()});rs({user_id:he().uuid(),books_read:xa().min(0,"Books read cannot be negative").default(0),reading_hours:xa().min(0,"Reading hours cannot be negative").default(0),achievements:xa().min(0,"Achievements cannot be negative").default(0),currently_reading:he().max(255).default("")});rs({id:he().uuid().optional(),user_id:he().uuid().optional().nullable(),email:he().email("Invalid email address"),full_name:he().min(2,"Full name must be at least 2 characters").max(100,"Full name must be less than 100 characters").trim(),time_zone:he().min(1,"Time zone is required").max(50,"Time zone must be less than 50 characters"),country:he().max(100,"Country must be less than 100 characters").optional().nullable(),devices:VE(he()).optional().nullable(),hours_per_week:he().min(1,"Hours per week is required"),communication:he().min(10,"Communication preference must be at least 10 characters").max(500,"Communication preference must be less than 500 characters"),portal_use:he().min(10,"Portal use description must be at least 10 characters").max(500,"Portal use description must be less than 500 characters"),beta_commitment:he().min(20,"Beta commitment must be at least 20 characters").max(1e3,"Beta commitment must be less than 1000 characters"),interest_statement:he().min(50,"Interest statement must be at least 50 characters").max(2e3,"Interest statement must be less than 2000 characters"),feedback_philosophy:he().min(50,"Feedback philosophy must be at least 50 characters").max(2e3,"Feedback philosophy must be less than 2000 characters"),recent_reads:he().max(1e3,"Recent reads must be less than 1000 characters").optional().nullable(),prior_beta:he().max(1e3,"Prior beta experience must be less than 1000 characters").optional().nullable(),goodreads:he().url("Invalid Goodreads URL").optional().nullable(),demographics:he().max(500,"Demographics must be less than 500 characters").optional().nullable(),access_needs:he().max(500,"Access needs must be less than 500 characters").optional().nullable(),status:Pt(["pending","approved","denied"]).default("pending"),created_at:he().datetime().optional()});aie.partial().omit({id:!0,created_at:!0,role:!0});rs({user_id:he().uuid(),role:Pt(["admin","support","accountant","user","super_admin"]),granted_by:he().uuid()});rs({role:Pt(["admin","support","accountant","user","super_admin"]).optional(),beta_reader_status:Pt(["not_applied","pending","approved","rejected"]).optional(),limit:he().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:he().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),search:he().max(100).optional(),sort_by:Pt(["created_at","username","display_name","role"]).default("created_at"),sort_order:Pt(["asc","desc"]).default("desc")});rs({priceId:he().min(1,"Price ID is required"),successUrl:he().url("Invalid success URL"),cancelUrl:he().url("Invalid cancel URL"),customerEmail:he().email("Invalid customer email").optional(),productSlug:he().min(1,"Product slug is required").optional(),userId:he().uuid().optional(),quantity:xa().min(1,"Quantity must be at least 1").max(10,"Quantity cannot exceed 10").default(1),metadata:rf(he(),he()).optional()});const oz=rs({id:he().uuid().optional(),user_id:he().uuid(),plan_id:he().min(1,"Plan ID is required"),status:Pt(["incomplete","incomplete_expired","trialing","active","past_due","canceled","unpaid","paused"]).default("active"),current_period_start:he().datetime().optional().nullable(),current_period_end:he().datetime().optional().nullable(),trial_start:he().datetime().optional().nullable(),trial_end:he().datetime().optional().nullable(),cancel_at_period_end:BE().default(!1),metadata:rf(he(),qE()).optional().nullable(),created_at:he().datetime().optional(),updated_at:he().datetime().optional()});rs({amount:xa().min(50,"Amount must be at least $0.50"),currency:he().length(3,"Currency must be a 3-letter ISO code"),paymentMethodId:he().optional(),customerId:he().optional(),metadata:rf(he(),he()).optional()});rs({paymentIntentId:he().min(1,"Payment intent ID is required"),amount:xa().min(1,"Refund amount must be positive").optional(),reason:Pt(["duplicate","fraudulent","requested_by_customer","expired_uncaptured_charge"]).default("requested_by_customer"),metadata:rf(he(),he()).optional()});rs({id:he().uuid().optional(),user_id:he().uuid().optional().nullable(),product_id:he().uuid(),price_id:he().uuid(),status:Pt(["pending","completed","failed","refunded","canceled"]).default("pending"),amount_cents:xa().min(0,"Amount cannot be negative"),currency:he().length(3,"Currency must be a 3-letter ISO code"),customer_email:he().email("Invalid customer email").optional().nullable(),provider:Pt(["stripe","paypal"]).default("stripe"),provider_session_id:he().optional().nullable(),provider_payment_intent_id:he().optional().nullable(),metadata:rf(he(),qE()).optional().nullable(),created_at:he().datetime().optional(),updated_at:he().datetime().optional()});oz.omit({id:!0,created_at:!0,updated_at:!0});oz.partial().omit({id:!0,user_id:!0,created_at:!0});rs({status:Pt(["pending","completed","failed","refunded","canceled"]).optional(),provider:Pt(["stripe","paypal"]).optional(),user_id:he().uuid().optional(),start_date:he().datetime().optional(),end_date:he().datetime().optional(),limit:he().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:he().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),sort_by:Pt(["created_at","amount_cents","status"]).default("created_at"),sort_order:Pt(["asc","desc"]).default("desc")});rs({status:Pt(["incomplete","incomplete_expired","trialing","active","past_due","canceled","unpaid","paused"]).optional(),user_id:he().uuid().optional(),plan_id:he().optional(),limit:he().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:he().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),sort_by:Pt(["created_at","current_period_end","status"]).default("created_at"),sort_order:Pt(["asc","desc"]).default("desc")});var nf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cu=typeof window>"u"||"Deno"in globalThis;function Vn(){}function lie(e,t){return typeof e=="function"?e(t):e}function lN(e){return typeof e=="number"&&e>=0&&e!==1/0}function az(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Il(e,t){return typeof e=="function"?e(t):e}function ti(e,t){return typeof e=="function"?e(t):e}function qR(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o){if(n){if(t.queryHash!==WE(o,t.options))return!1}else if(!cm(t.queryKey,o))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function VR(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(uu(t.options.mutationKey)!==uu(i))return!1}else if(!cm(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function WE(e,t){return((t==null?void 0:t.queryKeyHashFn)||uu)(e)}function uu(e){return JSON.stringify(e,(t,r)=>cN(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function cm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>cm(e[r],t[r])):!1}function lz(e,t){if(e===t)return e;const r=WR(e)&&WR(t);if(r||cN(e)&&cN(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),o=i.length,a=r?[]:{},l=new Set(n);let c=0;for(let u=0;u<o;u++){const h=r?u:i[u];(!r&&l.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(a[h]=void 0,c++):(a[h]=lz(e[h],t[h]),a[h]===e[h]&&e[h]!==void 0&&c++)}return s===o&&c===s?e:a}return t}function Xv(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function WR(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function cN(e){if(!KR(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!KR(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function KR(e){return Object.prototype.toString.call(e)==="[object Object]"}function cie(e){return new Promise(t=>{setTimeout(t,e)})}function uN(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?lz(e,t):t}function uie(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function die(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var KE=Symbol();function cz(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===KE?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function uz(e,t){return typeof e=="function"?e(...t):!!e}var Wc,wl,ah,O$,hie=(O$=class extends nf{constructor(){super();ze(this,Wc);ze(this,wl);ze(this,ah);ke(this,ah,t=>{if(!cu&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){F(this,wl)||this.setEventListener(F(this,ah))}onUnsubscribe(){var t;this.hasListeners()||((t=F(this,wl))==null||t.call(this),ke(this,wl,void 0))}setEventListener(t){var r;ke(this,ah,t),(r=F(this,wl))==null||r.call(this),ke(this,wl,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){F(this,Wc)!==t&&(ke(this,Wc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof F(this,Wc)=="boolean"?F(this,Wc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Wc=new WeakMap,wl=new WeakMap,ah=new WeakMap,O$),HE=new hie,lh,_l,ch,P$,fie=(P$=class extends nf{constructor(){super();ze(this,lh,!0);ze(this,_l);ze(this,ch);ke(this,ch,t=>{if(!cu&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){F(this,_l)||this.setEventListener(F(this,ch))}onUnsubscribe(){var t;this.hasListeners()||((t=F(this,_l))==null||t.call(this),ke(this,_l,void 0))}setEventListener(t){var r;ke(this,ch,t),(r=F(this,_l))==null||r.call(this),ke(this,_l,t(this.setOnline.bind(this)))}setOnline(t){F(this,lh)!==t&&(ke(this,lh,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return F(this,lh)}},lh=new WeakMap,_l=new WeakMap,ch=new WeakMap,P$),Qv=new fie;function dN(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function pie(e){return Math.min(1e3*2**e,3e4)}function dz(e){return(e??"online")==="online"?Qv.isOnline():!0}var hz=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function fz(e){let t=!1,r=0,n;const s=dN(),i=()=>s.status!=="pending",o=m=>{var b;i()||(f(new hz(m)),(b=e.abort)==null||b.call(e))},a=()=>{t=!0},l=()=>{t=!1},c=()=>HE.isFocused()&&(e.networkMode==="always"||Qv.isOnline())&&e.canRun(),u=()=>dz(e.networkMode)&&e.canRun(),h=m=>{i()||(n==null||n(),s.resolve(m))},f=m=>{i()||(n==null||n(),s.reject(m))},p=()=>new Promise(m=>{var b;n=x=>{(i()||c())&&m(x)},(b=e.onPause)==null||b.call(e)}).then(()=>{var m;n=void 0,i()||(m=e.onContinue)==null||m.call(e)}),v=()=>{if(i())return;let m;const b=r===0?e.initialPromise:void 0;try{m=b??e.fn()}catch(x){m=Promise.reject(x)}Promise.resolve(m).then(h).catch(x=>{var N;if(i())return;const w=e.retry??(cu?0:3),_=e.retryDelay??pie,j=typeof _=="function"?_(r,x):_,k=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,x);if(t||!k){f(x);return}r++,(N=e.onFail)==null||N.call(e,r,x),cie(j).then(()=>c()?void 0:p()).then(()=>{t?f(x):v()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?v():p().then(v),s)}}var mie=e=>setTimeout(e,0);function gie(){let e=[],t=0,r=a=>{a()},n=a=>{a()},s=mie;const i=a=>{t?e.push(a):s(()=>{r(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var Kr=gie(),Kc,R$,pz=(R$=class{constructor(){ze(this,Kc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),lN(this.gcTime)&&ke(this,Kc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(cu?1/0:5*60*1e3))}clearGcTimeout(){F(this,Kc)&&(clearTimeout(F(this,Kc)),ke(this,Kc,void 0))}},Kc=new WeakMap,R$),uh,dh,ei,Hc,tn,Qm,Zc,Li,ta,I$,yie=(I$=class extends pz{constructor(t){super();ze(this,Li);ze(this,uh);ze(this,dh);ze(this,ei);ze(this,Hc);ze(this,tn);ze(this,Qm);ze(this,Zc);ke(this,Zc,!1),ke(this,Qm,t.defaultOptions),this.setOptions(t.options),this.observers=[],ke(this,Hc,t.client),ke(this,ei,F(this,Hc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ke(this,uh,vie(this.options)),this.state=t.state??F(this,uh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=F(this,tn))==null?void 0:t.promise}setOptions(t){this.options={...F(this,Qm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&F(this,ei).remove(this)}setData(t,r){const n=uN(this.state.data,t,this.options);return tt(this,Li,ta).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){tt(this,Li,ta).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=F(this,tn))==null?void 0:n.promise;return(s=F(this,tn))==null||s.cancel(t),r?r.then(Vn).catch(Vn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(F(this,uh))}isActive(){return this.observers.some(t=>ti(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===KE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Il(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!az(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=F(this,tn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=F(this,tn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),F(this,ei).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(F(this,tn)&&(F(this,Zc)?F(this,tn).cancel({revert:!0}):F(this,tn).cancelRetry()),this.scheduleGc()),F(this,ei).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||tt(this,Li,ta).call(this,{type:"invalidate"})}async fetch(t,r){var l,c,u,h,f,p,v,m,b,x,w,_;if(this.state.fetchStatus!=="idle"&&((l=F(this,tn))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(F(this,tn))return F(this,tn).continueRetry(),F(this,tn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(k=>k.options.queryFn);j&&this.setOptions(j.options)}const n=new AbortController,s=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(ke(this,Zc,!0),n.signal)})},i=()=>{const j=cz(this.options,r),N=(()=>{const S={client:F(this,Hc),queryKey:this.queryKey,meta:this.meta};return s(S),S})();return ke(this,Zc,!1),this.options.persister?this.options.persister(j,N,this):j(N)},a=(()=>{const j={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:F(this,Hc),state:this.state,fetchFn:i};return s(j),j})();(c=this.options.behavior)==null||c.onFetch(a,this),ke(this,dh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&tt(this,Li,ta).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),ke(this,tn,fz({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onFail:(j,k)=>{tt(this,Li,ta).call(this,{type:"failed",failureCount:j,error:k})},onPause:()=>{tt(this,Li,ta).call(this,{type:"pause"})},onContinue:()=>{tt(this,Li,ta).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const j=await F(this,tn).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(p=(f=F(this,ei).config).onSuccess)==null||p.call(f,j,this),(m=(v=F(this,ei).config).onSettled)==null||m.call(v,j,this.state.error,this),j}catch(j){if(j instanceof hz){if(j.silent)return F(this,tn).promise;if(j.revert){if(this.setState({...F(this,dh),fetchStatus:"idle"}),this.state.data===void 0)throw j;return this.state.data}}throw tt(this,Li,ta).call(this,{type:"error",error:j}),(x=(b=F(this,ei).config).onError)==null||x.call(b,j,this),(_=(w=F(this,ei).config).onSettled)==null||_.call(w,this.state.data,j,this),j}finally{this.scheduleGc()}}},uh=new WeakMap,dh=new WeakMap,ei=new WeakMap,Hc=new WeakMap,tn=new WeakMap,Qm=new WeakMap,Zc=new WeakMap,Li=new WeakSet,ta=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...mz(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ke(this,dh,t.manual?s:void 0),s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Kr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),F(this,ei).notify({query:this,type:"updated",action:t})})},I$);function mz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:dz(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function vie(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var wo,D$,bie=(D$=class extends nf{constructor(t={}){super();ze(this,wo);this.config=t,ke(this,wo,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??WE(s,r);let o=this.get(i);return o||(o=new yie({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){F(this,wo).has(t.queryHash)||(F(this,wo).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=F(this,wo).get(t.queryHash);r&&(t.destroy(),r===t&&F(this,wo).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Kr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return F(this,wo).get(t)}getAll(){return[...F(this,wo).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>qR(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>qR(t,n)):r}notify(t){Kr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Kr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Kr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},wo=new WeakMap,D$),_o,Un,Gc,jo,al,L$,xie=(L$=class extends pz{constructor(t){super();ze(this,jo);ze(this,_o);ze(this,Un);ze(this,Gc);this.mutationId=t.mutationId,ke(this,Un,t.mutationCache),ke(this,_o,[]),this.state=t.state||gz(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){F(this,_o).includes(t)||(F(this,_o).push(t),this.clearGcTimeout(),F(this,Un).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ke(this,_o,F(this,_o).filter(r=>r!==t)),this.scheduleGc(),F(this,Un).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){F(this,_o).length||(this.state.status==="pending"?this.scheduleGc():F(this,Un).remove(this))}continue(){var t;return((t=F(this,Gc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,a,l,c,u,h,f,p,v,m,b,x,w,_,j,k,N,S,E;const r=()=>{tt(this,jo,al).call(this,{type:"continue"})};ke(this,Gc,fz({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(T,P)=>{tt(this,jo,al).call(this,{type:"failed",failureCount:T,error:P})},onPause:()=>{tt(this,jo,al).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>F(this,Un).canRun(this)}));const n=this.state.status==="pending",s=!F(this,Gc).canStart();try{if(n)r();else{tt(this,jo,al).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(i=F(this,Un).config).onMutate)==null?void 0:o.call(i,t,this));const P=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));P!==this.state.context&&tt(this,jo,al).call(this,{type:"pending",context:P,variables:t,isPaused:s})}const T=await F(this,Gc).start();return await((u=(c=F(this,Un).config).onSuccess)==null?void 0:u.call(c,T,t,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,T,t,this.state.context)),await((v=(p=F(this,Un).config).onSettled)==null?void 0:v.call(p,T,null,this.state.variables,this.state.context,this)),await((b=(m=this.options).onSettled)==null?void 0:b.call(m,T,null,t,this.state.context)),tt(this,jo,al).call(this,{type:"success",data:T}),T}catch(T){try{throw await((w=(x=F(this,Un).config).onError)==null?void 0:w.call(x,T,t,this.state.context,this)),await((j=(_=this.options).onError)==null?void 0:j.call(_,T,t,this.state.context)),await((N=(k=F(this,Un).config).onSettled)==null?void 0:N.call(k,void 0,T,this.state.variables,this.state.context,this)),await((E=(S=this.options).onSettled)==null?void 0:E.call(S,void 0,T,t,this.state.context)),T}finally{tt(this,jo,al).call(this,{type:"error",error:T})}}finally{F(this,Un).runNext(this)}}},_o=new WeakMap,Un=new WeakMap,Gc=new WeakMap,jo=new WeakSet,al=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Kr.batch(()=>{F(this,_o).forEach(n=>{n.onMutationUpdate(t)}),F(this,Un).notify({mutation:this,type:"updated",action:t})})},L$);function gz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var aa,Mi,eg,M$,wie=(M$=class extends nf{constructor(t={}){super();ze(this,aa);ze(this,Mi);ze(this,eg);this.config=t,ke(this,aa,new Set),ke(this,Mi,new Map),ke(this,eg,0)}build(t,r,n){const s=new xie({mutationCache:this,mutationId:++cy(this,eg)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){F(this,aa).add(t);const r=by(t);if(typeof r=="string"){const n=F(this,Mi).get(r);n?n.push(t):F(this,Mi).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(F(this,aa).delete(t)){const r=by(t);if(typeof r=="string"){const n=F(this,Mi).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&F(this,Mi).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=by(t);if(typeof r=="string"){const n=F(this,Mi).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=by(t);if(typeof r=="string"){const s=(n=F(this,Mi).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Kr.batch(()=>{F(this,aa).forEach(t=>{this.notify({type:"removed",mutation:t})}),F(this,aa).clear(),F(this,Mi).clear()})}getAll(){return Array.from(F(this,aa))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>VR(r,n))}findAll(t={}){return this.getAll().filter(r=>VR(t,r))}notify(t){Kr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Kr.batch(()=>Promise.all(t.map(r=>r.continue().catch(Vn))))}},aa=new WeakMap,Mi=new WeakMap,eg=new WeakMap,M$);function by(e){var t;return(t=e.options.scope)==null?void 0:t.id}function HR(e){return{onFetch:(t,r)=>{var u,h,f,p,v;const n=t.options,s=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const b=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},x=cz(t.options,t.fetchOptions),w=async(_,j,k)=>{if(m)return Promise.reject();if(j==null&&_.pages.length)return Promise.resolve(_);const S=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};return b(O),O})(),E=await x(S),{maxPages:T}=t.options,P=k?die:uie;return{pages:P(_.pages,E,T),pageParams:P(_.pageParams,j,T)}};if(s&&i.length){const _=s==="backward",j=_?_ie:ZR,k={pages:i,pageParams:o},N=j(n,k);a=await w(k,N,_)}else{const _=e??i.length;do{const j=l===0?o[0]??n.initialPageParam:ZR(n,a);if(l>0&&j==null)break;a=await w(a,j),l++}while(l<_)}return a};t.options.persister?t.fetchFn=()=>{var m,b;return(b=(m=t.options).persister)==null?void 0:b.call(m,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function ZR(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function _ie(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var ur,jl,kl,hh,fh,Nl,ph,mh,$$,jie=($$=class{constructor(e={}){ze(this,ur);ze(this,jl);ze(this,kl);ze(this,hh);ze(this,fh);ze(this,Nl);ze(this,ph);ze(this,mh);ke(this,ur,e.queryCache||new bie),ke(this,jl,e.mutationCache||new wie),ke(this,kl,e.defaultOptions||{}),ke(this,hh,new Map),ke(this,fh,new Map),ke(this,Nl,0)}mount(){cy(this,Nl)._++,F(this,Nl)===1&&(ke(this,ph,HE.subscribe(async e=>{e&&(await this.resumePausedMutations(),F(this,ur).onFocus())})),ke(this,mh,Qv.subscribe(async e=>{e&&(await this.resumePausedMutations(),F(this,ur).onOnline())})))}unmount(){var e,t;cy(this,Nl)._--,F(this,Nl)===0&&((e=F(this,ph))==null||e.call(this),ke(this,ph,void 0),(t=F(this,mh))==null||t.call(this),ke(this,mh,void 0))}isFetching(e){return F(this,ur).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return F(this,jl).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=F(this,ur).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=F(this,ur).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Il(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return F(this,ur).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=F(this,ur).get(n.queryHash),i=s==null?void 0:s.state.data,o=lie(t,i);if(o!==void 0)return F(this,ur).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Kr.batch(()=>F(this,ur).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=F(this,ur).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=F(this,ur);Kr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=F(this,ur);return Kr.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Kr.batch(()=>F(this,ur).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Vn).catch(Vn)}invalidateQueries(e,t={}){return Kr.batch(()=>(F(this,ur).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Kr.batch(()=>F(this,ur).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Vn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Vn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=F(this,ur).build(this,t);return r.isStaleByTime(Il(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Vn).catch(Vn)}fetchInfiniteQuery(e){return e.behavior=HR(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Vn).catch(Vn)}ensureInfiniteQueryData(e){return e.behavior=HR(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Qv.isOnline()?F(this,jl).resumePausedMutations():Promise.resolve()}getQueryCache(){return F(this,ur)}getMutationCache(){return F(this,jl)}getDefaultOptions(){return F(this,kl)}setDefaultOptions(e){ke(this,kl,e)}setQueryDefaults(e,t){F(this,hh).set(uu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...F(this,hh).values()],r={};return t.forEach(n=>{cm(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){F(this,fh).set(uu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...F(this,fh).values()],r={};return t.forEach(n=>{cm(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...F(this,kl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=WE(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===KE&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...F(this,kl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){F(this,ur).clear(),F(this,jl).clear()}},ur=new WeakMap,jl=new WeakMap,kl=new WeakMap,hh=new WeakMap,fh=new WeakMap,Nl=new WeakMap,ph=new WeakMap,mh=new WeakMap,$$),ls,st,tg,Bn,Yc,gh,la,Sl,rg,yh,vh,Jc,Xc,El,bh,yt,pp,hN,fN,pN,mN,gN,yN,vN,yz,F$,kie=(F$=class extends nf{constructor(t,r){super();ze(this,yt);ze(this,ls);ze(this,st);ze(this,tg);ze(this,Bn);ze(this,Yc);ze(this,gh);ze(this,la);ze(this,Sl);ze(this,rg);ze(this,yh);ze(this,vh);ze(this,Jc);ze(this,Xc);ze(this,El);ze(this,bh,new Set);this.options=r,ke(this,ls,t),ke(this,Sl,null),ke(this,la,dN()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(F(this,st).addObserver(this),GR(F(this,st),this.options)?tt(this,yt,pp).call(this):this.updateResult(),tt(this,yt,mN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return bN(F(this,st),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return bN(F(this,st),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,tt(this,yt,gN).call(this),tt(this,yt,yN).call(this),F(this,st).removeObserver(this)}setOptions(t){const r=this.options,n=F(this,st);if(this.options=F(this,ls).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ti(this.options.enabled,F(this,st))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");tt(this,yt,vN).call(this),F(this,st).setOptions(this.options),r._defaulted&&!Xv(this.options,r)&&F(this,ls).getQueryCache().notify({type:"observerOptionsUpdated",query:F(this,st),observer:this});const s=this.hasListeners();s&&YR(F(this,st),n,this.options,r)&&tt(this,yt,pp).call(this),this.updateResult(),s&&(F(this,st)!==n||ti(this.options.enabled,F(this,st))!==ti(r.enabled,F(this,st))||Il(this.options.staleTime,F(this,st))!==Il(r.staleTime,F(this,st)))&&tt(this,yt,hN).call(this);const i=tt(this,yt,fN).call(this);s&&(F(this,st)!==n||ti(this.options.enabled,F(this,st))!==ti(r.enabled,F(this,st))||i!==F(this,El))&&tt(this,yt,pN).call(this,i)}getOptimisticResult(t){const r=F(this,ls).getQueryCache().build(F(this,ls),t),n=this.createResult(r,t);return Sie(this,n)&&(ke(this,Bn,n),ke(this,gh,this.options),ke(this,Yc,F(this,st).state)),n}getCurrentResult(){return F(this,Bn)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),s==="promise"&&!this.options.experimental_prefetchInRender&&F(this,la).status==="pending"&&F(this,la).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,s))})}trackProp(t){F(this,bh).add(t)}getCurrentQuery(){return F(this,st)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=F(this,ls).defaultQueryOptions(t),n=F(this,ls).getQueryCache().build(F(this,ls),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return tt(this,yt,pp).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),F(this,Bn)))}createResult(t,r){var T;const n=F(this,st),s=this.options,i=F(this,Bn),o=F(this,Yc),a=F(this,gh),c=t!==n?t.state:F(this,tg),{state:u}=t;let h={...u},f=!1,p;if(r._optimisticResults){const P=this.hasListeners(),O=!P&&GR(t,r),R=P&&YR(t,n,r,s);(O||R)&&(h={...h,...mz(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:m,status:b}=h;p=h.data;let x=!1;if(r.placeholderData!==void 0&&p===void 0&&b==="pending"){let P;i!=null&&i.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(P=i.data,x=!0):P=typeof r.placeholderData=="function"?r.placeholderData((T=F(this,vh))==null?void 0:T.state.data,F(this,vh)):r.placeholderData,P!==void 0&&(b="success",p=uN(i==null?void 0:i.data,P,r),f=!0)}if(r.select&&p!==void 0&&!x)if(i&&p===(o==null?void 0:o.data)&&r.select===F(this,rg))p=F(this,yh);else try{ke(this,rg,r.select),p=r.select(p),p=uN(i==null?void 0:i.data,p,r),ke(this,yh,p),ke(this,Sl,null)}catch(P){ke(this,Sl,P)}F(this,Sl)&&(v=F(this,Sl),p=F(this,yh),m=Date.now(),b="error");const w=h.fetchStatus==="fetching",_=b==="pending",j=b==="error",k=_&&w,N=p!==void 0,E={status:b,fetchStatus:h.fetchStatus,isPending:_,isSuccess:b==="success",isError:j,isInitialLoading:k,isLoading:k,data:p,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:m,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!_,isLoadingError:j&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&N,isStale:ZE(t,r),refetch:this.refetch,promise:F(this,la),isEnabled:ti(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=I=>{E.status==="error"?I.reject(E.error):E.data!==void 0&&I.resolve(E.data)},O=()=>{const I=ke(this,la,E.promise=dN());P(I)},R=F(this,la);switch(R.status){case"pending":t.queryHash===n.queryHash&&P(R);break;case"fulfilled":(E.status==="error"||E.data!==R.value)&&O();break;case"rejected":(E.status!=="error"||E.error!==R.reason)&&O();break}}return E}updateResult(){const t=F(this,Bn),r=this.createResult(F(this,st),this.options);if(ke(this,Yc,F(this,st).state),ke(this,gh,this.options),F(this,Yc).data!==void 0&&ke(this,vh,F(this,st)),Xv(r,t))return;ke(this,Bn,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!F(this,bh).size)return!0;const o=new Set(i??F(this,bh));return this.options.throwOnError&&o.add("error"),Object.keys(F(this,Bn)).some(a=>{const l=a;return F(this,Bn)[l]!==t[l]&&o.has(l)})};tt(this,yt,yz).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&tt(this,yt,mN).call(this)}},ls=new WeakMap,st=new WeakMap,tg=new WeakMap,Bn=new WeakMap,Yc=new WeakMap,gh=new WeakMap,la=new WeakMap,Sl=new WeakMap,rg=new WeakMap,yh=new WeakMap,vh=new WeakMap,Jc=new WeakMap,Xc=new WeakMap,El=new WeakMap,bh=new WeakMap,yt=new WeakSet,pp=function(t){tt(this,yt,vN).call(this);let r=F(this,st).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Vn)),r},hN=function(){tt(this,yt,gN).call(this);const t=Il(this.options.staleTime,F(this,st));if(cu||F(this,Bn).isStale||!lN(t))return;const n=az(F(this,Bn).dataUpdatedAt,t)+1;ke(this,Jc,setTimeout(()=>{F(this,Bn).isStale||this.updateResult()},n))},fN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(F(this,st)):this.options.refetchInterval)??!1},pN=function(t){tt(this,yt,yN).call(this),ke(this,El,t),!(cu||ti(this.options.enabled,F(this,st))===!1||!lN(F(this,El))||F(this,El)===0)&&ke(this,Xc,setInterval(()=>{(this.options.refetchIntervalInBackground||HE.isFocused())&&tt(this,yt,pp).call(this)},F(this,El)))},mN=function(){tt(this,yt,hN).call(this),tt(this,yt,pN).call(this,tt(this,yt,fN).call(this))},gN=function(){F(this,Jc)&&(clearTimeout(F(this,Jc)),ke(this,Jc,void 0))},yN=function(){F(this,Xc)&&(clearInterval(F(this,Xc)),ke(this,Xc,void 0))},vN=function(){const t=F(this,ls).getQueryCache().build(F(this,ls),this.options);if(t===F(this,st))return;const r=F(this,st);ke(this,st,t),ke(this,tg,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},yz=function(t){Kr.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(F(this,Bn))}),F(this,ls).getQueryCache().notify({query:F(this,st),type:"observerResultsUpdated"})})},F$);function Nie(e,t){return ti(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function GR(e,t){return Nie(e,t)||e.state.data!==void 0&&bN(e,t,t.refetchOnMount)}function bN(e,t,r){if(ti(t.enabled,e)!==!1&&Il(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&ZE(e,t)}return!1}function YR(e,t,r,n){return(e!==t||ti(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ZE(e,r)}function ZE(e,t){return ti(t.enabled,e)!==!1&&e.isStaleByTime(Il(t.staleTime,e))}function Sie(e,t){return!Xv(e.getCurrentResult(),t)}var Cl,Tl,cs,ca,ja,_v,xN,z$,Eie=(z$=class extends nf{constructor(r,n){super();ze(this,ja);ze(this,Cl);ze(this,Tl);ze(this,cs);ze(this,ca);ke(this,Cl,r),this.setOptions(n),this.bindMethods(),tt(this,ja,_v).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=F(this,Cl).defaultMutationOptions(r),Xv(this.options,n)||F(this,Cl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:F(this,cs),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&uu(n.mutationKey)!==uu(this.options.mutationKey)?this.reset():((s=F(this,cs))==null?void 0:s.state.status)==="pending"&&F(this,cs).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=F(this,cs))==null||r.removeObserver(this)}onMutationUpdate(r){tt(this,ja,_v).call(this),tt(this,ja,xN).call(this,r)}getCurrentResult(){return F(this,Tl)}reset(){var r;(r=F(this,cs))==null||r.removeObserver(this),ke(this,cs,void 0),tt(this,ja,_v).call(this),tt(this,ja,xN).call(this)}mutate(r,n){var s;return ke(this,ca,n),(s=F(this,cs))==null||s.removeObserver(this),ke(this,cs,F(this,Cl).getMutationCache().build(F(this,Cl),this.options)),F(this,cs).addObserver(this),F(this,cs).execute(r)}},Cl=new WeakMap,Tl=new WeakMap,cs=new WeakMap,ca=new WeakMap,ja=new WeakSet,_v=function(){var n;const r=((n=F(this,cs))==null?void 0:n.state)??gz();ke(this,Tl,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},xN=function(r){Kr.batch(()=>{var n,s,i,o,a,l,c,u;if(F(this,ca)&&this.hasListeners()){const h=F(this,Tl).variables,f=F(this,Tl).context;(r==null?void 0:r.type)==="success"?((s=(n=F(this,ca)).onSuccess)==null||s.call(n,r.data,h,f),(o=(i=F(this,ca)).onSettled)==null||o.call(i,r.data,null,h,f)):(r==null?void 0:r.type)==="error"&&((l=(a=F(this,ca)).onError)==null||l.call(a,r.error,h,f),(u=(c=F(this,ca)).onSettled)==null||u.call(c,void 0,r.error,h,f))}this.listeners.forEach(h=>{h(F(this,Tl))})})},z$),vz=g.createContext(void 0),so=e=>{const t=g.useContext(vz);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Cie=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),y.jsx(vz.Provider,{value:e,children:t})),bz=g.createContext(!1),Tie=()=>g.useContext(bz);bz.Provider;function Aie(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Oie=g.createContext(Aie()),Pie=()=>g.useContext(Oie),Rie=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Iie=e=>{g.useEffect(()=>{e.clearReset()},[e])},Die=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||uz(r,[e.error,n])),Lie=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Mie=(e,t)=>e.isLoading&&e.isFetching&&!t,$ie=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,JR=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Fie(e,t,r){var h,f,p,v,m;const n=Tie(),s=Pie(),i=so(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",Lie(o),Rie(o,s),Iie(s);const a=!i.getQueryCache().get(o.queryHash),[l]=g.useState(()=>new t(i,o)),c=l.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(b=>{const x=u?l.subscribe(Kr.batchCalls(b)):Vn;return l.updateResult(),x},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),g.useEffect(()=>{l.setOptions(o)},[o,l]),$ie(o,c))throw JR(o,l,s);if(Die({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((v=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,o,c),o.experimental_prefetchInRender&&!cu&&Mie(c,n)){const b=a?JR(o,l,s):(m=i.getQueryCache().get(o.queryHash))==null?void 0:m.promise;b==null||b.catch(Vn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function Rt(e,t){return Fie(e,kie)}function kt(e,t){const r=so(),[n]=g.useState(()=>new Eie(r,e));g.useEffect(()=>{n.setOptions(e)},[n,e]);const s=g.useSyncExternalStore(g.useCallback(o=>n.subscribe(Kr.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=g.useCallback((o,a)=>{n.mutate(o,a).catch(Vn)},[n]);if(s.error&&uz(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var xz={},zie=Object.defineProperty,Uie=(e,t,r)=>t in e?zie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,de=(e,t,r)=>Uie(e,typeof t!="symbol"?t+"":t,r),Or=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function io(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bie(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var wz={exports:{}},Vf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XR;function qie(){if(XR)return Vf;XR=1;var e=ee,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},f=null,p=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)n.call(l,u)&&!i.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:t,type:a,key:f,ref:p,props:h,_owner:s.current}}return Vf.Fragment=r,Vf.jsx=o,Vf.jsxs=o,Vf}wz.exports=qie();var d=wz.exports;function QR(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _z(...e){return t=>{let r=!1;const n=e.map(s=>{const i=QR(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():QR(e[s],null)}}}}function Dn(...e){return g.useCallback(_z(...e),e)}function um(e){const t=Wie(e),r=g.forwardRef((n,s)=>{const{children:i,...o}=n,a=g.Children.toArray(i),l=a.find(Hie);if(l){const c=l.props.children,u=a.map(h=>h===l?g.Children.count(c)>1?g.Children.only(null):g.isValidElement(c)?c.props.children:null:h);return d.jsx(t,{...o,ref:s,children:g.isValidElement(c)?g.cloneElement(c,void 0,u):null})}return d.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var Vie=um("Slot");function Wie(e){const t=g.forwardRef((r,n)=>{const{children:s,...i}=r;if(g.isValidElement(s)){const o=Gie(s),a=Zie(i,s.props);return s.type!==g.Fragment&&(a.ref=n?_z(n,o):o),g.cloneElement(s,a)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var jz=Symbol("radix.slottable");function Kie(e){const t=({children:r})=>d.jsx(d.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=jz,t}function Hie(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===jz}function Zie(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...o)=>{const a=i(...o);return s(...o),a}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Gie(e){var t,r;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function kz(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=kz(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ot(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=kz(e))&&(n&&(n+=" "),n+=t);return n}const eI=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,tI=ot,J0=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return tI(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(c=>{const u=r==null?void 0:r[c],h=i==null?void 0:i[c];if(u===null)return null;const f=eI(u)||eI(h);return s[c][f]}),a=r&&Object.entries(r).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(v=>{let[m,b]=v;return Array.isArray(b)?b.includes({...i,...a}[m]):{...i,...a}[m]===b})?[...c,h,f]:c},[]);return tI(e,o,l,r==null?void 0:r.class,r==null?void 0:r.className)},GE="-",Yie=e=>{const t=Xie(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:s=>{const i=s.split(GE);return i[0]===""&&i.length!==1&&i.shift(),Nz(i,t)||Jie(s)},getConflictingClassGroupIds:(s,i)=>{const o=r[s]||[];return i&&n[s]?[...o,...n[s]]:o}}},Nz=(e,t)=>{var r;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),i=s?Nz(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(GE);return(r=t.validators.find(({validator:a})=>a(o)))==null?void 0:r.classGroupId},rI=/^\[(.+)\]$/,Jie=e=>{if(rI.test(e)){const t=rI.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Xie=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return eoe(Object.entries(e.classGroups),r).forEach(([s,i])=>{wN(i,n,s,t)}),n},wN=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:nI(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(Qie(s)){wN(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{wN(o,nI(t,i),r,n)})})},nI=(e,t)=>{let r=e;return t.split(GE).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Qie=e=>e.isThemeGetter,eoe=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[t+o,a])):i);return[r,s]}):e,toe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},Sz="!",roe=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,o=a=>{const l=[];let c=0,u=0,h;for(let b=0;b<a.length;b++){let x=a[b];if(c===0){if(x===s&&(n||a.slice(b,b+i)===t)){l.push(a.slice(u,b)),u=b+i;continue}if(x==="/"){h=b;continue}}x==="["?c++:x==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(Sz),v=p?f.substring(1):f,m=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:m}};return r?a=>r({className:a,parseClassName:o}):o},noe=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},soe=e=>({cache:toe(e.cacheSize),parseClassName:roe(e),...Yie(e)}),ioe=/\s+/,ooe=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split(ioe);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=r(c);let v=!!p,m=n(v?f.substring(0,p):f);if(!m){if(!v){a=c+(a.length>0?" "+a:a);continue}if(m=n(f),!m){a=c+(a.length>0?" "+a:a);continue}v=!1}const b=noe(u).join(":"),x=h?b+Sz:b,w=x+m;if(i.includes(w))continue;i.push(w);const _=s(m,v);for(let j=0;j<_.length;++j){const k=_[j];i.push(x+k)}a=c+(a.length>0?" "+a:a)}return a};function aoe(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Ez(t))&&(n&&(n+=" "),n+=r);return n}const Ez=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Ez(e[n]))&&(r&&(r+=" "),r+=t);return r};function loe(e,...t){let r,n,s,i=o;function o(l){const c=t.reduce((u,h)=>h(u),e());return r=soe(c),n=r.cache.get,s=r.cache.set,i=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=ooe(l,r);return s(l,u),u}return function(){return i(aoe.apply(null,arguments))}}const Mt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Cz=/^\[(?:([a-z-]+):)?(.+)\]$/i,coe=/^\d+\/\d+$/,uoe=new Set(["px","full","screen"]),doe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hoe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,foe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,poe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,moe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Go=e=>qd(e)||uoe.has(e)||coe.test(e),Xa=e=>sf(e,"length",joe),qd=e=>!!e&&!Number.isNaN(Number(e)),U_=e=>sf(e,"number",qd),Wf=e=>!!e&&Number.isInteger(Number(e)),goe=e=>e.endsWith("%")&&qd(e.slice(0,-1)),et=e=>Cz.test(e),Qa=e=>doe.test(e),yoe=new Set(["length","size","percentage"]),voe=e=>sf(e,yoe,Tz),boe=e=>sf(e,"position",Tz),xoe=new Set(["image","url"]),woe=e=>sf(e,xoe,Noe),_oe=e=>sf(e,"",koe),Kf=()=>!0,sf=(e,t,r)=>{const n=Cz.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},joe=e=>hoe.test(e)&&!foe.test(e),Tz=()=>!1,koe=e=>poe.test(e),Noe=e=>moe.test(e),Soe=()=>{const e=Mt("colors"),t=Mt("spacing"),r=Mt("blur"),n=Mt("brightness"),s=Mt("borderColor"),i=Mt("borderRadius"),o=Mt("borderSpacing"),a=Mt("borderWidth"),l=Mt("contrast"),c=Mt("grayscale"),u=Mt("hueRotate"),h=Mt("invert"),f=Mt("gap"),p=Mt("gradientColorStops"),v=Mt("gradientColorStopPositions"),m=Mt("inset"),b=Mt("margin"),x=Mt("opacity"),w=Mt("padding"),_=Mt("saturate"),j=Mt("scale"),k=Mt("sepia"),N=Mt("skew"),S=Mt("space"),E=Mt("translate"),T=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",et,t],R=()=>[et,t],I=()=>["",Go,Xa],M=()=>["auto",qd,et],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",et],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[qd,et];return{cacheSize:500,separator:":",theme:{colors:[Kf],spacing:[Go,Xa],blur:["none","",Qa,et],brightness:G(),borderColor:[e],borderRadius:["none","","full",Qa,et],borderSpacing:R(),borderWidth:I(),contrast:G(),grayscale:L(),hueRotate:G(),invert:L(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[goe,Xa],inset:O(),margin:O(),opacity:G(),padding:R(),saturate:G(),scale:G(),sepia:L(),skew:G(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",et]}],container:["container"],columns:[{columns:[Qa]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),et]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wf,et]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",et]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Wf,et]}],"grid-cols":[{"grid-cols":[Kf]}],"col-start-end":[{col:["auto",{span:["full",Wf,et]},et]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Kf]}],"row-start-end":[{row:["auto",{span:[Wf,et]},et]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",et]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",et]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...Y()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Y(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Y(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",et,t]}],"min-w":[{"min-w":[et,t,"min","max","fit"]}],"max-w":[{"max-w":[et,t,"none","full","min","max","fit","prose",{screen:[Qa]},Qa]}],h:[{h:[et,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[et,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[et,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[et,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Qa,Xa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",U_]}],"font-family":[{font:[Kf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",et]}],"line-clamp":[{"line-clamp":["none",qd,U_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Go,et]}],"list-image":[{"list-image":["none",et]}],"list-style-type":[{list:["none","disc","decimal",et]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Go,Xa]}],"underline-offset":[{"underline-offset":["auto",Go,et]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),boe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",voe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},woe]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[Go,et]}],"outline-w":[{outline:[Go,Xa]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Go,Xa]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Qa,_oe]}],"shadow-color":[{shadow:[Kf]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Qa,et]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",et]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",et]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",et]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Wf,et]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",et]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",et]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",et]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Go,Xa,U_]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Az=loe(Soe);function Ye(...e){return Az(ot(e))}const Eoe=J0("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ke=g.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const o=n?Vie:"button";return d.jsx(o,{className:Ye(Eoe({variant:t,size:r,className:e})),ref:i,...s})});Ke.displayName="Button";function Coe(e,t){const r=g.createContext(t),n=i=>{const{children:o,...a}=i,l=g.useMemo(()=>a,Object.values(a));return d.jsx(r.Provider,{value:l,children:o})};n.displayName=e+"Provider";function s(i){const o=g.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function Ou(e,t=[]){let r=[];function n(i,o){const a=g.createContext(o),l=r.length;r=[...r,o];const c=h=>{var f;const{scope:p,children:v,...m}=h,b=((f=p==null?void 0:p[e])==null?void 0:f[l])||a,x=g.useMemo(()=>m,Object.values(m));return d.jsx(b.Provider,{value:x,children:v})};c.displayName=i+"Provider";function u(h,f){var p;const v=((p=f==null?void 0:f[e])==null?void 0:p[l])||a,m=g.useContext(v);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=r.map(o=>g.createContext(o));return function(o){const a=(o==null?void 0:o[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return s.scopeName=e,[n,Toe(s,...t)]}function Toe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const i=n.reduce((o,{useScope:a,scopeName:l})=>{const c=a(s)[`__scope${l}`];return{...o,...c}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function br(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}var _h=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},Aoe=B$[" useId ".trim().toString()]||(()=>{}),Ooe=0;function Dp(e){const[t,r]=g.useState(Aoe());return _h(()=>{r(n=>n??String(Ooe++))},[e]),t?`radix-${t}`:""}var Poe=B$[" useInsertionEffect ".trim().toString()]||_h;function lg({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,o]=Roe({defaultProp:t,onChange:r}),a=e!==void 0,l=a?e:s;{const u=g.useRef(e!==void 0);g.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}const c=g.useCallback(u=>{var h;if(a){const f=Ioe(u)?u(e):u;f!==e&&((h=o.current)==null||h.call(o,f))}else i(u)},[a,e,i,o]);return[l,c]}function Roe({defaultProp:e,onChange:t}){const[r,n]=g.useState(e),s=g.useRef(r),i=g.useRef(t);return Poe(()=>{i.current=t},[t]),g.useEffect(()=>{var o;s.current!==r&&((o=i.current)==null||o.call(i,r),s.current=r)},[r,s]),[r,n,i]}function Ioe(e){return typeof e=="function"}var Doe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_r=Doe.reduce((e,t)=>{const r=um(`Primitive.${t}`),n=g.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(l,{...a,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Loe(e,t){e&&Zn.flushSync(()=>e.dispatchEvent(t))}function jh(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function Moe(e,t=globalThis==null?void 0:globalThis.document){const r=jh(e);g.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var $oe="DismissableLayer",_N="dismissableLayer.update",Foe="dismissableLayer.pointerDownOutside",zoe="dismissableLayer.focusOutside",sI,Oz=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Pz=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=e,c=g.useContext(Oz),[u,h]=g.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=g.useState({}),v=Dn(t,S=>h(S)),m=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=m.indexOf(b),w=u?m.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,j=w>=x,k=qoe(S=>{const E=S.target,T=[...c.branches].some(P=>P.contains(E));!j||T||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},f),N=Voe(S=>{const E=S.target;[...c.branches].some(T=>T.contains(E))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},f);return Moe(S=>{w===c.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},f),g.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(sI=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),iI(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=sI)}},[u,f,r,c]),g.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),iI())},[u,c]),g.useEffect(()=>{const S=()=>p({});return document.addEventListener(_N,S),()=>document.removeEventListener(_N,S)},[]),d.jsx(_r.div,{...l,ref:v,style:{pointerEvents:_?j?"auto":"none":void 0,...e.style},onFocusCapture:br(e.onFocusCapture,N.onFocusCapture),onBlurCapture:br(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:br(e.onPointerDownCapture,k.onPointerDownCapture)})});Pz.displayName=$oe;var Uoe="DismissableLayerBranch",Boe=g.forwardRef((e,t)=>{const r=g.useContext(Oz),n=g.useRef(null),s=Dn(t,n);return g.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),d.jsx(_r.div,{...e,ref:s})});Boe.displayName=Uoe;function qoe(e,t=globalThis==null?void 0:globalThis.document){const r=jh(e),n=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){Rz(Foe,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Voe(e,t=globalThis==null?void 0:globalThis.document){const r=jh(e),n=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!n.current&&Rz(zoe,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function iI(){const e=new CustomEvent(_N);document.dispatchEvent(e)}function Rz(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Loe(s,i):s.dispatchEvent(i)}var B_="focusScope.autoFocusOnMount",q_="focusScope.autoFocusOnUnmount",oI={bubbles:!1,cancelable:!0},Woe="FocusScope",Iz=g.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[a,l]=g.useState(null),c=jh(s),u=jh(i),h=g.useRef(null),f=Dn(t,m=>l(m)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(n){let m=function(_){if(p.paused||!a)return;const j=_.target;a.contains(j)?h.current=j:ll(h.current,{select:!0})},b=function(_){if(p.paused||!a)return;const j=_.relatedTarget;j!==null&&(a.contains(j)||ll(h.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const j of _)j.removedNodes.length>0&&ll(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),w.disconnect()}}},[n,a,p.paused]),g.useEffect(()=>{if(a){lI.add(p);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(B_,oI);a.addEventListener(B_,c),a.dispatchEvent(b),b.defaultPrevented||(Koe(Joe(Dz(a)),{select:!0}),document.activeElement===m&&ll(a))}return()=>{a.removeEventListener(B_,c),setTimeout(()=>{const b=new CustomEvent(q_,oI);a.addEventListener(q_,u),a.dispatchEvent(b),b.defaultPrevented||ll(m??document.body,{select:!0}),a.removeEventListener(q_,u),lI.remove(p)},0)}}},[a,c,u,p]);const v=g.useCallback(m=>{if(!r&&!n||p.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(b&&x){const w=m.currentTarget,[_,j]=Hoe(w);_&&j?!m.shiftKey&&x===j?(m.preventDefault(),r&&ll(_,{select:!0})):m.shiftKey&&x===_&&(m.preventDefault(),r&&ll(j,{select:!0})):x===w&&m.preventDefault()}},[r,n,p.paused]);return d.jsx(_r.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});Iz.displayName=Woe;function Koe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ll(n,{select:t}),document.activeElement!==r)return}function Hoe(e){const t=Dz(e),r=aI(t,e),n=aI(t.reverse(),e);return[r,n]}function Dz(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function aI(e,t){for(const r of e)if(!Zoe(r,{upTo:t}))return r}function Zoe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Goe(e){return e instanceof HTMLInputElement&&"select"in e}function ll(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Goe(e)&&t&&e.select()}}var lI=Yoe();function Yoe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=cI(e,t),e.unshift(t)},remove(t){var r;e=cI(e,t),(r=e[0])==null||r.resume()}}}function cI(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Joe(e){return e.filter(t=>t.tagName!=="A")}var Xoe="Portal",Lz=g.forwardRef((e,t)=>{var r;const{container:n,...s}=e,[i,o]=g.useState(!1);_h(()=>o(!0),[]);const a=n||i&&((r=globalThis==null?void 0:globalThis.document)==null?void 0:r.body);return a?U$.createPortal(d.jsx(_r.div,{...s,ref:t}),a):null});Lz.displayName=Xoe;function Qoe(e,t){return g.useReducer((r,n)=>t[r][n]??r,e)}var of=e=>{const{present:t,children:r}=e,n=eae(t),s=typeof r=="function"?r({present:n.isPresent}):g.Children.only(r),i=Dn(n.ref,tae(s));return typeof r=="function"||n.isPresent?g.cloneElement(s,{ref:i}):null};of.displayName="Presence";function eae(e){const[t,r]=g.useState(),n=g.useRef(null),s=g.useRef(e),i=g.useRef("none"),o=e?"mounted":"unmounted",[a,l]=Qoe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=xy(n.current);i.current=a==="mounted"?c:"none"},[a]),_h(()=>{const c=n.current,u=s.current;if(u!==e){const h=i.current,f=xy(c);e?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),_h(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,h=p=>{const v=xy(n.current).includes(CSS.escape(p.animationName));if(p.target===t&&v&&(l("ANIMATION_END"),!s.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},f=p=>{p.target===t&&(i.current=xy(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function xy(e){return(e==null?void 0:e.animationName)||"none"}function tae(e){var t,r;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var V_=0;function rae(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??uI()),document.body.insertAdjacentElement("beforeend",e[1]??uI()),V_++,()=>{V_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),V_--}},[])}function uI(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Cn=function(){return Cn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Cn.apply(this,arguments)};function YE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Mz(e,t,r){for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Lp="right-scroll-bar-position",Mp="width-before-scroll-bar",nae="with-scroll-bars-hidden",sae="--removed-body-scroll-bar-size";function W_(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function iae(e,t){var r=g.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var oae=typeof window<"u"?g.useLayoutEffect:g.useEffect,dI=new WeakMap;function $z(e,t){var r=iae(null,function(n){return e.forEach(function(s){return W_(s,n)})});return oae(function(){var n=dI.get(r);if(n){var s=new Set(n),i=new Set(e),o=r.current;s.forEach(function(a){i.has(a)||W_(a,null)}),i.forEach(function(a){s.has(a)||W_(a,o)})}dI.set(r,e)},[e]),r}function aae(e){return e}function lae(e,t){t===void 0&&(t=aae);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(a){return i(a)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(i),o=r}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),r}}}};return s}function Fz(e){e===void 0&&(e={});var t=lae(null);return t.options=Cn({async:!0,ssr:!1},e),t}var zz=function(e){var t=e.sideCar,r=YE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return g.createElement(n,Cn({},r))};zz.isSideCarExport=!0;function Uz(e,t){return e.useMedium(t),zz}var Bz=Fz(),K_=function(){},X0=g.forwardRef(function(e,t){var r=g.useRef(null),n=g.useState({onScrollCapture:K_,onWheelCapture:K_,onTouchMoveCapture:K_}),s=n[0],i=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noRelative,v=e.noIsolation,m=e.inert,b=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,_=e.gapMode,j=YE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,N=$z([r,t]),S=Cn(Cn({},j),s);return g.createElement(g.Fragment,null,u&&g.createElement(k,{sideCar:Bz,removeScrollBar:c,shards:h,noRelative:p,noIsolation:v,inert:m,setCallbacks:i,allowPinchZoom:!!b,lockRef:r,gapMode:_}),o?g.cloneElement(g.Children.only(a),Cn(Cn({},S),{ref:N})):g.createElement(w,Cn({},S,{className:l,ref:N}),a))});X0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};X0.classNames={fullWidth:Mp,zeroRight:Lp};var cae=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function uae(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=cae();return t&&e.setAttribute("nonce",t),e}function dae(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function hae(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var fae=function(){var e=0,t=null;return{add:function(r){e==0&&(t=uae())&&(dae(t,r),hae(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},pae=function(){var e=fae();return function(t,r){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},JE=function(){var e=pae(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},mae={left:0,top:0,right:0,gap:0},H_=function(e){return parseInt(e||"",10)||0},gae=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[H_(r),H_(n),H_(s)]},yae=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return mae;var t=gae(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},vae=JE(),Vd="data-scroll-locked",bae=function(e,t,r,n){var s=e.left,i=e.top,o=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(nae,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Vd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Lp,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Mp,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Lp," .").concat(Lp,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Mp," .").concat(Mp,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Vd,`] {
    `).concat(sae,": ").concat(a,`px;
  }
`)},hI=function(){var e=parseInt(document.body.getAttribute(Vd)||"0",10);return isFinite(e)?e:0},xae=function(){g.useEffect(function(){return document.body.setAttribute(Vd,(hI()+1).toString()),function(){var e=hI()-1;e<=0?document.body.removeAttribute(Vd):document.body.setAttribute(Vd,e.toString())}},[])},qz=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;xae();var i=g.useMemo(function(){return yae(s)},[s]);return g.createElement(vae,{styles:bae(i,!t,s,r?"":"!important")})},jN=!1;if(typeof window<"u")try{var wy=Object.defineProperty({},"passive",{get:function(){return jN=!0,!0}});window.addEventListener("test",wy,wy),window.removeEventListener("test",wy,wy)}catch{jN=!1}var td=jN?{passive:!1}:!1,wae=function(e){return e.tagName==="TEXTAREA"},Vz=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!wae(e)&&r[t]==="visible")},_ae=function(e){return Vz(e,"overflowY")},jae=function(e){return Vz(e,"overflowX")},fI=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Wz(e,n);if(s){var i=Kz(e,n),o=i[1],a=i[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},kae=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Nae=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Wz=function(e,t){return e==="v"?_ae(t):jae(t)},Kz=function(e,t){return e==="v"?kae(t):Nae(t)},Sae=function(e,t){return e==="h"&&t==="rtl"?-1:1},Eae=function(e,t,r,n,s){var i=Sae(e,window.getComputedStyle(t).direction),o=i*n,a=r.target,l=t.contains(a),c=!1,u=o>0,h=0,f=0;do{if(!a)break;var p=Kz(e,a),v=p[0],m=p[1],b=p[2],x=m-b-i*v;(v||x)&&Wz(e,a)&&(h+=x,f+=v);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(c=!0),c},_y=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},pI=function(e){return[e.deltaX,e.deltaY]},mI=function(e){return e&&"current"in e?e.current:e},Cae=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Tae=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Aae=0,rd=[];function Oae(e){var t=g.useRef([]),r=g.useRef([0,0]),n=g.useRef(),s=g.useState(Aae++)[0],i=g.useState(JE)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=Mz([e.lockRef.current],(e.shards||[]).map(mI)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=g.useCallback(function(m,b){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var x=_y(m),w=r.current,_="deltaX"in m?m.deltaX:w[0]-x[0],j="deltaY"in m?m.deltaY:w[1]-x[1],k,N=m.target,S=Math.abs(_)>Math.abs(j)?"h":"v";if("touches"in m&&S==="h"&&N.type==="range")return!1;var E=fI(S,N);if(!E)return!0;if(E?k=S:(k=S==="v"?"h":"v",E=fI(S,N)),!E)return!1;if(!n.current&&"changedTouches"in m&&(_||j)&&(n.current=k),!k)return!0;var T=n.current||k;return Eae(T,b,m,T==="h"?_:j)},[]),l=g.useCallback(function(m){var b=m;if(!(!rd.length||rd[rd.length-1]!==i)){var x="deltaY"in b?pI(b):_y(b),w=t.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&Cae(k.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(mI).filter(Boolean).filter(function(k){return k.contains(b.target)}),j=_.length>0?a(b,_[0]):!o.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),c=g.useCallback(function(m,b,x,w){var _={name:m,delta:b,target:x,should:w,shadowParent:Pae(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(j){return j!==_})},1)},[]),u=g.useCallback(function(m){r.current=_y(m),n.current=void 0},[]),h=g.useCallback(function(m){c(m.type,pI(m),m.target,a(m,e.lockRef.current))},[]),f=g.useCallback(function(m){c(m.type,_y(m),m.target,a(m,e.lockRef.current))},[]);g.useEffect(function(){return rd.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,td),document.addEventListener("touchmove",l,td),document.addEventListener("touchstart",u,td),function(){rd=rd.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,td),document.removeEventListener("touchmove",l,td),document.removeEventListener("touchstart",u,td)}},[]);var p=e.removeScrollBar,v=e.inert;return g.createElement(g.Fragment,null,v?g.createElement(i,{styles:Tae(s)}):null,p?g.createElement(qz,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Pae(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Rae=Uz(Bz,Oae);var Hz=g.forwardRef(function(e,t){return g.createElement(X0,Cn({},e,{ref:t,sideCar:Rae}))});Hz.classNames=X0.classNames;var Iae=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},nd=new WeakMap,jy=new WeakMap,ky={},Z_=0,Zz=function(e){return e&&(e.host||Zz(e.parentNode))},Dae=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Zz(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Lae=function(e,t,r,n){var s=Dae(t,Array.isArray(e)?e:[e]);ky[r]||(ky[r]=new WeakMap);var i=ky[r],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(n),v=p!==null&&p!=="false",m=(nd.get(f)||0)+1,b=(i.get(f)||0)+1;nd.set(f,m),i.set(f,b),o.push(f),m===1&&v&&jy.set(f,!0),b===1&&f.setAttribute(r,"true"),v||f.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return u(t),a.clear(),Z_++,function(){o.forEach(function(h){var f=nd.get(h)-1,p=i.get(h)-1;nd.set(h,f),i.set(h,p),f||(jy.has(h)||h.removeAttribute(n),jy.delete(h)),p||h.removeAttribute(r)}),Z_--,Z_||(nd=new WeakMap,nd=new WeakMap,jy=new WeakMap,ky={})}},Gz=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=Iae(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),Lae(n,s,r,"aria-hidden")):function(){return null}},Q0="Dialog",[Yz,Jz]=Ou(Q0),[Mae,oo]=Yz(Q0),Xz=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,a=g.useRef(null),l=g.useRef(null),[c,u]=lg({prop:n,defaultProp:s??!1,onChange:i,caller:Q0});return d.jsx(Mae,{scope:t,triggerRef:a,contentRef:l,contentId:Dp(),titleId:Dp(),descriptionId:Dp(),open:c,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};Xz.displayName=Q0;var Qz="DialogTrigger",e8=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=oo(Qz,r),i=Dn(t,s.triggerRef);return d.jsx(_r.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":eC(s.open),...n,ref:i,onClick:br(e.onClick,s.onOpenToggle)})});e8.displayName=Qz;var XE="DialogPortal",[$ae,t8]=Yz(XE,{forceMount:void 0}),r8=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=oo(XE,t);return d.jsx($ae,{scope:t,forceMount:r,children:g.Children.map(n,o=>d.jsx(of,{present:r||i.open,children:d.jsx(Lz,{asChild:!0,container:s,children:o})}))})};r8.displayName=XE;var eb="DialogOverlay",n8=g.forwardRef((e,t)=>{const r=t8(eb,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=oo(eb,e.__scopeDialog);return i.modal?d.jsx(of,{present:n||i.open,children:d.jsx(zae,{...s,ref:t})}):null});n8.displayName=eb;var Fae=um("DialogOverlay.RemoveScroll"),zae=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=oo(eb,r);return d.jsx(Hz,{as:Fae,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx(_r.div,{"data-state":eC(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),du="DialogContent",s8=g.forwardRef((e,t)=>{const r=t8(du,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=oo(du,e.__scopeDialog);return d.jsx(of,{present:n||i.open,children:i.modal?d.jsx(Uae,{...s,ref:t}):d.jsx(Bae,{...s,ref:t})})});s8.displayName=du;var Uae=g.forwardRef((e,t)=>{const r=oo(du,e.__scopeDialog),n=g.useRef(null),s=Dn(t,r.contentRef,n);return g.useEffect(()=>{const i=n.current;if(i)return Gz(i)},[]),d.jsx(i8,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:br(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:br(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:br(e.onFocusOutside,i=>i.preventDefault())})}),Bae=g.forwardRef((e,t)=>{const r=oo(du,e.__scopeDialog),n=g.useRef(!1),s=g.useRef(!1);return d.jsx(i8,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var o,a;(o=e.onInteractOutside)==null||o.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;(a=r.triggerRef.current)!=null&&a.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),i8=g.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,a=oo(du,r),l=g.useRef(null),c=Dn(t,l);return rae(),d.jsxs(d.Fragment,{children:[d.jsx(Iz,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(Pz,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":eC(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(Vae,{titleId:a.titleId}),d.jsx(Kae,{contentRef:l,descriptionId:a.descriptionId})]})]})}),QE="DialogTitle",o8=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=oo(QE,r);return d.jsx(_r.h2,{id:s.titleId,...n,ref:t})});o8.displayName=QE;var a8="DialogDescription",l8=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=oo(a8,r);return d.jsx(_r.p,{id:s.descriptionId,...n,ref:t})});l8.displayName=a8;var c8="DialogClose",u8=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=oo(c8,r);return d.jsx(_r.button,{type:"button",...n,ref:t,onClick:br(e.onClick,()=>s.onOpenChange(!1))})});u8.displayName=c8;function eC(e){return e?"open":"closed"}var d8="DialogTitleWarning",[qae,h8]=Coe(d8,{contentName:du,titleName:QE,docsSlug:"dialog"}),Vae=({titleId:e})=>{const t=h8(d8),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Wae="DialogDescriptionWarning",Kae=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${h8(Wae).contentName}}.`;return g.useEffect(()=>{var n;const s=(n=e.current)==null?void 0:n.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},f8=Xz,p8=e8,m8=r8,tC=n8,rC=s8,nC=o8,sC=l8,iC=u8,g8="AlertDialog",[Hae,eHe]=Ou(g8,[Jz]),Ua=Jz(),y8=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ua(t);return d.jsx(f8,{...n,...r,modal:!0})};y8.displayName=g8;var Zae="AlertDialogTrigger",Gae=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Ua(r);return d.jsx(p8,{...s,...n,ref:t})});Gae.displayName=Zae;var Yae="AlertDialogPortal",v8=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ua(t);return d.jsx(m8,{...n,...r})};v8.displayName=Yae;var Jae="AlertDialogOverlay",b8=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Ua(r);return d.jsx(tC,{...s,...n,ref:t})});b8.displayName=Jae;var Wd="AlertDialogContent",[Xae,Qae]=Hae(Wd),ele=Kie("AlertDialogContent"),x8=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,i=Ua(r),o=g.useRef(null),a=Dn(t,o),l=g.useRef(null);return d.jsx(qae,{contentName:Wd,titleName:w8,docsSlug:"alert-dialog",children:d.jsx(Xae,{scope:r,cancelRef:l,children:d.jsxs(rC,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:br(s.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[d.jsx(ele,{children:n}),d.jsx(rle,{contentRef:o})]})})})});x8.displayName=Wd;var w8="AlertDialogTitle",_8=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Ua(r);return d.jsx(nC,{...s,...n,ref:t})});_8.displayName=w8;var j8="AlertDialogDescription",k8=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Ua(r);return d.jsx(sC,{...s,...n,ref:t})});k8.displayName=j8;var tle="AlertDialogAction",N8=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Ua(r);return d.jsx(iC,{...s,...n,ref:t})});N8.displayName=tle;var S8="AlertDialogCancel",E8=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=Qae(S8,r),i=Ua(r),o=Dn(t,s);return d.jsx(iC,{...i,...n,ref:o})});E8.displayName=S8;var rle=({contentRef:e})=>{const t=`\`${Wd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Wd}\` by passing a \`${j8}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Wd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},nle=y8,sle=v8,C8=b8,T8=x8,A8=N8,O8=E8,P8=_8,R8=k8;const ile=nle,ole=sle,I8=g.forwardRef(({className:e,...t},r)=>d.jsx(C8,{className:Ye("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));I8.displayName=C8.displayName;const D8=g.forwardRef(({className:e,...t},r)=>d.jsxs(ole,{children:[d.jsx(I8,{}),d.jsx(T8,{ref:r,className:Ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));D8.displayName=T8.displayName;const L8=({className:e,...t})=>d.jsx("div",{className:Ye("flex flex-col space-y-2 text-center sm:text-left",e),...t});L8.displayName="AlertDialogHeader";const M8=({className:e,...t})=>d.jsx("div",{className:Ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});M8.displayName="AlertDialogFooter";const $8=g.forwardRef(({className:e,...t},r)=>d.jsx(P8,{ref:r,className:Ye("text-lg font-semibold",e),...t}));$8.displayName=P8.displayName;const F8=g.forwardRef(({className:e,...t},r)=>d.jsx(R8,{ref:r,className:Ye("text-sm text-muted-foreground",e),...t}));F8.displayName=R8.displayName;const z8=g.forwardRef(({className:e,...t},r)=>d.jsx(A8,{ref:r,className:Ye("inline-flex h-10 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground ring-offset-background transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));z8.displayName=A8.displayName;const U8=g.forwardRef(({className:e,...t},r)=>d.jsx(O8,{ref:r,className:Ye("inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500","sm:mt-0",e),...t}));U8.displayName=O8.displayName;function ale({open:e,onOpenChange:t,onConfirm:r,title:n,description:s,confirmText:i="Confirm",cancelText:o="Cancel"}){return d.jsx(ile,{open:e,onOpenChange:t,children:d.jsxs(D8,{children:[d.jsxs(L8,{children:[d.jsx($8,{children:n}),d.jsx(F8,{children:s})]}),d.jsxs(M8,{children:[d.jsx(U8,{children:o}),d.jsx(z8,{asChild:!0,children:d.jsx(Ke,{variant:"destructive",onClick:r,children:i})})]})]})})}const lle=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>af).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class oC extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class cle extends oC{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class gI extends oC{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class yI extends oC{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var kN;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(kN||(kN={}));var ule=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class dle{constructor(t,{headers:r={},customFetch:n,region:s=kN.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=lle(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return ule(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(m=>{throw new cle(m)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new gI(h);if(!h.ok)throw new yI(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield h.json():p==="application/octet-stream"?v=yield h.blob():p==="text/event-stream"?v=h:p==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof yI||s instanceof gI?s.context:void 0}}})}}var fs={},aC={},ex={},cg={},tx={},rx={},hle=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},kh=hle();const fle=kh.fetch,B8=kh.fetch.bind(kh),q8=kh.Headers,ple=kh.Request,mle=kh.Response,af=Object.freeze(Object.defineProperty({__proto__:null,Headers:q8,Request:ple,Response:mle,default:B8,fetch:fle},Symbol.toStringTag,{value:"Module"})),gle=Bie(af);var nx={};Object.defineProperty(nx,"__esModule",{value:!0});let yle=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};nx.default=yle;var V8=Or&&Or.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rx,"__esModule",{value:!0});const vle=V8(gle),ble=V8(nx);let xle=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=vle.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,o,a,l;let c=null,u=null,h=null,f=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text")?u=b:u=JSON.parse(b))}const v=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&m&&m.length>1&&(h=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await s.text();try{c=JSON.parse(v),Array.isArray(c)&&s.status===404&&(u=[],c=null,f=200,p="OK")}catch{s.status===404&&v===""?(f=204,p="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows")&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new ble.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(n=n.catch(s=>{var i,o,a;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(a=s==null?void 0:s.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};rx.default=xle;var wle=Or&&Or.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tx,"__esModule",{value:!0});const _le=wle(rx);let jle=class extends _le.default{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};tx.default=jle;var kle=Or&&Or.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cg,"__esModule",{value:!0});const Nle=kle(tx);let Sle=class extends Nle.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};cg.default=Sle;var Ele=Or&&Or.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ex,"__esModule",{value:!0});const Hf=Ele(cg);let Cle=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new Hf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Hf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Hf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Hf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Hf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};ex.default=Cle;var W8=Or&&Or.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(aC,"__esModule",{value:!0});const Tle=W8(ex),Ale=W8(cg);let Ole=class K8{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new Tle.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new K8(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new Ale.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};aC.default=Ole;var lf=Or&&Or.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fs,"__esModule",{value:!0});fs.PostgrestError=fs.PostgrestBuilder=fs.PostgrestTransformBuilder=fs.PostgrestFilterBuilder=fs.PostgrestQueryBuilder=fs.PostgrestClient=void 0;const H8=lf(aC);fs.PostgrestClient=H8.default;const Z8=lf(ex);fs.PostgrestQueryBuilder=Z8.default;const G8=lf(cg);fs.PostgrestFilterBuilder=G8.default;const Y8=lf(tx);fs.PostgrestTransformBuilder=Y8.default;const J8=lf(rx);fs.PostgrestBuilder=J8.default;const X8=lf(nx);fs.PostgrestError=X8.default;var Ple=fs.default={PostgrestClient:H8.default,PostgrestQueryBuilder:Z8.default,PostgrestFilterBuilder:G8.default,PostgrestTransformBuilder:Y8.default,PostgrestBuilder:J8.default,PostgrestError:X8.default};const{PostgrestClient:Rle,PostgrestQueryBuilder:tHe,PostgrestFilterBuilder:rHe,PostgrestTransformBuilder:nHe,PostgrestBuilder:sHe,PostgrestError:iHe}=Ple;class Ile{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Dle="2.15.1",Lle=`realtime-js/${Dle}`,Mle="1.0.0",NN=1e4,$le=1e3,Fle=100;var $p;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($p||($p={}));var Br;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Br||(Br={}));var Fi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Fi||(Fi={}));var SN;(function(e){e.websocket="websocket"})(SN||(SN={}));var Dc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Dc||(Dc={}));class zle{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+s));o=o+s;const l=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Q8{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Tt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Tt||(Tt={}));const vI=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=Ule(o,e,t,s),i),{})},Ule=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?eU(i,o):EN(o)},eU=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Wle(t,r)}switch(e){case Tt.bool:return Ble(t);case Tt.float4:case Tt.float8:case Tt.int2:case Tt.int4:case Tt.int8:case Tt.numeric:case Tt.oid:return qle(t);case Tt.json:case Tt.jsonb:return Vle(t);case Tt.timestamp:return Kle(t);case Tt.abstime:case Tt.date:case Tt.daterange:case Tt.int4range:case Tt.int8range:case Tt.money:case Tt.reltime:case Tt.text:case Tt.time:case Tt.timestamptz:case Tt.timetz:case Tt.tsrange:case Tt.tstzrange:return EN(t);default:return EN(t)}},EN=e=>e,Ble=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},qle=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Vle=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Wle=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const i=e.slice(1,r);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(o=>eU(t,o))}return e},Kle=e=>typeof e=="string"?e.replace(" ","T"):e,tU=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class G_{constructor(t,r,n={},s=NN){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var bI;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(bI||(bI={}));class Fp{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fp.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Fp.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Fp.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),v=u.filter(b=>p.indexOf(b.presence_ref)<0),m=h.filter(b=>f.indexOf(b.presence_ref)<0);v.length>0&&(a[c]=v),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xI;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(xI||(xI={}));var zp;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zp||(zp={}));var sa;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(sa||(sa={}));class lC{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Br.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new G_(this,Fi.join,this.params,this.timeout),this.rejoinTimer=new Q8(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Br.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Br.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Br.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Br.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Br.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fi.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Fp(this),this.broadcastEndpointURL=tU(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Br.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[zp.PRESENCE]&&this.bindings[zp.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(sa.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(sa.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t==null||t(sa.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,m=(p=v==null?void 0:v.length)!==null&&p!==void 0?p:0,b=[];for(let x=0;x<m;x++){const w=v[x],{filter:{event:_,schema:j,table:k,filter:N}}=w,S=f&&f[x];if(S&&S.event===_&&S.schema===j&&S.table===k&&S.filter===N)b.push(Object.assign(Object.assign({},w),{id:S.id}));else{this.unsubscribe(),this.state=Br.errored,t==null||t(sa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(sa.SUBSCRIBED);return}}).receive("error",f=>{this.state=Br.errored,t==null||t(sa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(sa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Br.joined&&t===zp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Br.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new G_(this,Fi.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Br.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new G_(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Fle){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Fi;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,v,m;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(v=f.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,v,m,b,x,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,j=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((v=r.ids)===null||v===void 0?void 0:v.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((m=r.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const _=(x=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:v,table:m,commit_timestamp:b,type:x,errors:w}=p;h=Object.assign(Object.assign({},{schema:v,table:m,commit_timestamp:b,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(p))}f.callback(h,n)})}_isClosed(){return this.state===Br.closed}_isJoined(){return this.state===Br.joined}_isJoining(){return this.state===Br.joining}_isLeaving(){return this.state===Br.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&lC.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Fi.close,{},t)}_onError(t){this._on(Fi.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Br.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=vI(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=vI(t.columns,t.old_record)),r}}const wI=()=>{},Ny={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Hle=[1e3,2e3,5e3,1e4],Zle=1e4,Gle=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Yle{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=NN,this.transport=null,this.heartbeatIntervalMs=Ny.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wI,this.ref=0,this.reconnectTimer=null,this.logger=wI,this.conn=null,this.sendBuffer=[],this.serializer=new zle,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Promise.resolve().then(()=>af).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${SN.websocket}`,this.httpEndpoint=tU(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ile.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Mle}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case $p.connecting:return Dc.Connecting;case $p.open:return Dc.Open;case $p.closing:return Dc.Closing;default:return Dc.Closed}}isConnected(){return this.connectionState()===Dc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new lC(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close($le,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ny.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Fi.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Gle],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Lle};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Fi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Q8(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ny.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:NN,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Ny.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t==null?void 0:t.reconnectAfterMs)!==null&&a!==void 0?a:u=>Hle[u-1]||Zle,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(u,h)=>h(JSON.stringify(u)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class cC extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Vr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Jle extends cC{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class CN extends cC{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Xle=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const rU=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>af).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Qle=()=>Xle(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>af)).Response:Response}),TN=e=>{if(Array.isArray(e))return e.map(r=>TN(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=TN(n)}),t},ece=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Pu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const Y_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tce=(e,t,r)=>Pu(void 0,void 0,void 0,function*(){const n=yield Qle();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new Jle(Y_(s),i,o))}).catch(s=>{t(new CN(Y_(s),s))}):t(new CN(Y_(e),e))}),rce=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(ece(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function ug(e,t,r,n,s,i){return Pu(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,rce(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>tce(l,a,n))})})}function tb(e,t,r,n){return Pu(this,void 0,void 0,function*(){return ug(e,"GET",t,r,n)})}function bo(e,t,r,n,s){return Pu(this,void 0,void 0,function*(){return ug(e,"POST",t,n,s,r)})}function AN(e,t,r,n,s){return Pu(this,void 0,void 0,function*(){return ug(e,"PUT",t,n,s,r)})}function nce(e,t,r,n){return Pu(this,void 0,void 0,function*(){return ug(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function nU(e,t,r,n,s){return Pu(this,void 0,void 0,function*(){return ug(e,"DELETE",t,n,s,r)})}var zn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const sce={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_I={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ice{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=rU(s)}uploadOrUpdate(t,r,n,s){return zn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},_I),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(t=="PUT"?AN:bo)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return zn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return zn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:_I.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield AN(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(Vr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return zn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield bo(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new cC("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}update(t,r,n){return zn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return zn(this,void 0,void 0,function*(){try{return{data:yield bo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Vr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return zn(this,void 0,void 0,function*(){try{return{data:{path:(yield bo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Vr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return zn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield bo(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Vr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return zn(this,void 0,void 0,function*(){try{const s=yield bo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Vr(s))return{data:null,error:s};throw s}})}download(t,r){return zn(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield tb(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Vr(o))return{data:null,error:o};throw o}})}info(t){return zn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield tb(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:TN(n),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}exists(t){return zn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield nce(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Vr(n)&&n instanceof CN){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});a!==""&&s.push(a);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${l}`)}}}remove(t){return zn(this,void 0,void 0,function*(){try{return{data:yield nU(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}list(t,r,n){return zn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},sce),r),{prefix:t||""});return{data:yield bo(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Vr(s))return{data:null,error:s};throw s}})}listV2(t,r){return zn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield bo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const oce="2.11.0",ace={"X-Client-Info":`storage-js/${oce}`};var sd=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class lce{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},ace),r),this.fetch=rU(n)}listBuckets(){return sd(this,void 0,void 0,function*(){try{return{data:yield tb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Vr(t))return{data:null,error:t};throw t}})}getBucket(t){return sd(this,void 0,void 0,function*(){try{return{data:yield tb(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return sd(this,void 0,void 0,function*(){try{return{data:yield bo(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return sd(this,void 0,void 0,function*(){try{return{data:yield AN(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return sd(this,void 0,void 0,function*(){try{return{data:yield bo(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return sd(this,void 0,void 0,function*(){try{return{data:yield nU(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}}class cce extends lce{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new ice(this.url,this.headers,t,this.fetch)}}const uce="2.56.0";let mp="";typeof Deno<"u"?mp="deno":typeof document<"u"?mp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mp="react-native":mp="node";const dce={"X-Client-Info":`supabase-js-${mp}/${uce}`},hce={headers:dce},fce={schema:"public"},pce={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mce={};var gce=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const yce=e=>{let t;return e?t=e:typeof fetch>"u"?t=B8:t=fetch,(...r)=>t(...r)},vce=()=>typeof Headers>"u"?q8:Headers,bce=(e,t,r)=>{const n=yce(r),s=vce();return(i,o)=>gce(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var xce=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};function wce(e){return e.endsWith("/")?e:e+"/"}function _ce(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>xce(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const sU="2.71.1",gd=30*1e3,ON=3,J_=ON*gd,jce="http://localhost:9999",kce="supabase.auth.token",Nce={"X-Client-Info":`gotrue-js/${sU}`},PN="X-Supabase-Api-Version",iU={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Sce=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ece=10*60*1e3;class uC extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Cce extends uC{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Tce(e){return Qe(e)&&e.name==="AuthApiError"}class oU extends uC{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Xl extends uC{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class cl extends Xl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ace(e){return Qe(e)&&e.name==="AuthSessionMissingError"}class Sy extends Xl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ey extends Xl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Cy extends Xl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Oce(e){return Qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class jI extends Xl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class RN extends Xl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function X_(e){return Qe(e)&&e.name==="AuthRetryableFetchError"}class kI extends Xl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class IN extends Xl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const rb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),NI=` 	
\r=`.split(""),Pce=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<NI.length;t+=1)e[NI[t].charCodeAt(0)]=-2;for(let t=0;t<rb.length;t+=1)e[rb[t].charCodeAt(0)]=t;return e})();function SI(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(rb[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(rb[n]),t.queuedBits-=6}}function aU(e,t,r){const n=Pce[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function EI(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Dce(o,n,r)};for(let o=0;o<e.length;o+=1)aU(e.charCodeAt(o),s,i);return t.join("")}function Rce(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Ice(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Rce(n,t)}}function Dce(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Lce(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)aU(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Mce(e){const t=[];return Ice(e,r=>t.push(r)),new Uint8Array(t)}function $ce(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>SI(s,r,n)),SI(null,r,n),t.join("")}function Fce(e){return Math.round(Date.now()/1e3)+e}function zce(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Oi=()=>typeof window<"u"&&typeof document<"u",wc={tested:!1,writable:!1},lU=()=>{if(!Oi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wc.tested)return wc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),wc.tested=!0,wc.writable=!0}catch{wc.tested=!0,wc.writable=!1}return wc.writable};function Uce(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,s)=>{t[s]=n})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const cU=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>af).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Bce=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",yd=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},_c=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},el=async(e,t)=>{await e.removeItem(t)};class sx{constructor(){this.promise=new sx.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}sx.promiseConstructor=Promise;function Q_(e){const t=e.split(".");if(t.length!==3)throw new IN("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Sce.test(t[r]))throw new IN("JWT not in base64url format");return{header:JSON.parse(EI(t[0])),payload:JSON.parse(EI(t[1])),signature:Lce(t[2]),raw:{header:t[0],payload:t[1]}}}async function qce(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Vce(e,t){return new Promise((r,n)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await e(s);if(!t(s,null,i)){r(i);return}}catch(i){if(!t(s,i)){n(i);return}}})()})}function Wce(e){return("0"+e.toString(16)).substr(-2)}function Kce(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let n="";for(let s=0;s<56;s++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Wce).join("")}async function Hce(e){const t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(s=>String.fromCharCode(s)).join("")}async function Zce(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await Hce(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function id(e,t,r=!1){const n=Kce();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await yd(e,`${t}-code-verifier`,s);const i=await Zce(n);return[i,n===i?"plain":"s256"]}const Gce=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Yce(e){const t=e.headers.get(PN);if(!t||!t.match(Gce))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Jce(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Xce(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Qce=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function od(e){if(!Qce.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ej(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function CI(e){return JSON.parse(JSON.stringify(e))}var eue=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Cc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tue=[502,503,504];async function TI(e){var t;if(!Bce(e))throw new RN(Cc(e),0);if(tue.includes(e.status))throw new RN(Cc(e),e.status);let r;try{r=await e.json()}catch(i){throw new oU(Cc(i),i)}let n;const s=Yce(e);if(s&&s.getTime()>=iU["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new kI(Cc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new cl}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new kI(Cc(r),e.status,r.weak_password.reasons);throw new Cce(Cc(r),e.status||500,n)}const rue=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function nt(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[PN]||(i[PN]=iU["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await nue(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function nue(e,t,r,n,s,i){const o=rue(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new RN(Cc(l),0)}if(a.ok||await TI(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await TI(l)}}function ra(e){var t;let r=null;aue(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Fce(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function AI(e){const t=ra(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function yl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function sue(e){return{data:e,error:null}}function iue(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=eue(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function oue(e){return e}function aue(e){return e.access_token&&e.refresh_token&&e.expires_in}const tj=["global","local","others"];var lue=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class cue{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=cU(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=tj[0]){if(tj.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tj.join(", ")}`);try{return await nt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:yl})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=lue(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:iue,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Qe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await nt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:yl})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:oue});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Qe(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){od(t);try{return await nt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:yl})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){od(t);try{return await nt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:yl})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){od(t);try{return await nt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:yl})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){od(t.userId);try{const{data:r,error:n}=await nt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){od(t.userId),od(t.id);try{return{data:await nt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}}function OI(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function uue(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ad={debug:!!(globalThis&&lU()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uU extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class due extends uU{}async function hue(e,t,r){ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ad.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new due(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ad.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}uue();const fue={url:jce,storageKey:kce,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Nce,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function PI(e,t,r){return await r()}const ld={};class dm{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dm.nextInstanceID,dm.nextInstanceID+=1,this.instanceID>0&&Oi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},fue),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new cue({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=cU(s.fetch),this.lock=s.lock||PI,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Oi()&&!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks?this.lock=hue:this.lock=PI,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:lU()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=OI(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=OI(this.memoryStorage)),Oi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=ld[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ld[this.storageKey]=Object.assign(Object.assign({},ld[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ld[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ld[this.storageKey]=Object.assign(Object.assign({},ld[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sU}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Uce(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Oi()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Oce(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Qe(r)?{error:r}:{error:new oU("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:ra}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Qe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await id(this.storage,this.storageKey)),i=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:ra})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ra})}else throw new Ey("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:AI})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:AI})}else throw new Ey("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Sy}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Qe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,a,l,c,u,h,f,p;let v,m;if("message"in t)v=t.message,m=t.signature;else{const{chain:b,wallet:x,statement:w,options:_}=t;let j;if(Oi())if(typeof x=="object")j=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const k=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),m=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=N}}try{const{data:b,error:x}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:$ce(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ra});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Sy}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(Qe(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await _c(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ra});if(await el(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Sy}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Qe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ra}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Sy}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(Qe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await id(this.storage,this.storageKey));const{error:h}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Ey("You must provide either an email or phone number.")}catch(a){if(Qe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ra});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Qe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await id(this.storage,this.storageKey)),await nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:sue})}catch(i){if(Qe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new cl;const{error:s}=await nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Qe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await nt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await nt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Ey("You must provide either an email or phone number and a type")}catch(r){if(Qe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await _c(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<J_:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await _c(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ej()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(a,l,c)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,l,c))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:yl}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new cl}:await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:yl})})}catch(r){if(Qe(r))return Ace(r)&&(await this._removeSession(),await el(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new cl;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await id(this.storage,this.storageKey));const{data:c,error:u}=await nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:yl});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new cl;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Q_(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Qe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new cl;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Qe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Oi())throw new Cy("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Cy(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new jI("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cy("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new jI("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new Cy("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=gd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=f-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:m,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(Qe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await _c(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(Tce(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await el(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=zce(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await id(this.storage,this.storageKey,!0));try{return await nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Qe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await nt(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Oi()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Qe(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await nt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Vce(async s=>(s>0&&await qce(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ra})),(s,i)=>{const o=200*Math.pow(2,s);return i&&X_(i)&&Date.now()+o-n<gd})}catch(n){if(this._debug(r,"error",n),Qe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Oi()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await _c(this.storage,this.storageKey);if(s&&this.userStorage){let o=await _c(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await yd(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ej()}else if(s&&!s.user&&!s.user){const o=await _c(this.storage,this.storageKey+"-user");o&&o!=null&&o.user?(s.user=o.user,await el(this.storage,this.storageKey+"-user"),await yd(this.storage,this.storageKey,s)):s.user=ej()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<J_;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${J_}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),X_(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&o!=null&&o.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new cl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new sx;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new cl;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Qe(i)){const o={session:null,error:i};return X_(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await yd(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=CI(s);await yd(this.storage,this.storageKey,i)}else{const s=CI(r);await yd(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await el(this.storage,this.storageKey),await el(this.storage,this.storageKey+"-code-verifier"),await el(this.storage,this.storageKey+"-user"),this.userStorage&&await el(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Oi()&&window!=null&&window.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),gd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/gd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${gd}ms, refresh threshold is ${ON} ticks`),s<=ON&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof uU)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Oi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await id(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await nt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await nt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await nt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await nt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Q_(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+Ece>s)return n;const{data:i,error:o}=await nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};n=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Q_(n);r!=null&&r.allowExpired||Jce(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const u=Xce(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Mce(`${a}.${l}`)))throw new IN("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}}dm.nextInstanceID=0;const pue=dm;class mue extends pue{constructor(t){super(t)}}var gue=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class yue{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=wce(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:fce,realtime:mce,auth:Object.assign(Object.assign({},pce),{storageKey:c}),global:hce},h=_ce(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=bce(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Rle(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new cce(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new dle(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return gue(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mue({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Yle(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dU=(e,t,r)=>new yue(e,t,r);function vue(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}vue()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bue="",xue="";console.error("Missing Supabase environment variables. Please check your .env file.");const es=dU(bue,xue,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),wue=({folder:e,onUpload:t,onError:r,onStart:n,children:s,accept:i="image/png, image/jpeg, image/jpg, image/gif, image/webp",maxSizeMB:o=5})=>{const[a,l]=g.useState(!1),[c,u]=g.useState(!1),h=g.useRef(null),f=w=>{w.preventDefault(),w.stopPropagation(),a||l(!0)},p=w=>{w.preventDefault(),w.stopPropagation(),l(!1)},v=w=>{if(w.preventDefault(),w.stopPropagation(),l(!1),w.dataTransfer.files&&w.dataTransfer.files.length>0){const _=w.dataTransfer.files[0];x(_)}},m=()=>{var w;(w=h.current)==null||w.click()},b=w=>{if(w.target.files&&w.target.files.length>0){const _=w.target.files[0];x(_)}},x=async w=>{if(!w.type.match("image.*")){r("Only image files are allowed");return}if(w.size>o*1024*1024){r(`File size must be less than ${o}MB`);return}try{n==null||n(),u(!0);const _=w.name.split(".").pop(),j=`${Math.random().toString(36).substring(2)}.${_}`,k=`${e}/${j}`,{error:N}=await es.storage.from("timeline").upload(k,w,{cacheControl:"3600",upsert:!1});if(N)throw N;const{data:{publicUrl:S}}=es.storage.from("timeline").getPublicUrl(k);t(S)}catch(_){console.error("Error uploading file:",_),r(_ instanceof Error?_.message:"Failed to upload image")}finally{u(!1)}};return g.useEffect(()=>()=>{h.current&&(h.current.value="")},[]),d.jsxs("div",{onClick:m,onDragOver:f,onDragLeave:p,onDrop:v,className:`relative ${c?"opacity-50 pointer-events-none":""} ${a?"ring-2 ring-primary ring-offset-2":""}`,children:[d.jsx("input",{type:"file",ref:h,onChange:b,className:"hidden",accept:i}),s]})},Nh={},RI=typeof window<"u",DN=(Nh==null?void 0:Nh.VITE_SUPABASE_URL)||"https://opukvvmumyegtkukqint.supabase.co",hU=(Nh==null?void 0:Nh.VITE_SUPABASE_ANON_KEY)||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",DN);console.log("DEBUG: supabaseAnonKey (raw):",hU);((Nh==null?void 0:Nh.VITE_DEBUG)==="true"||xz.VITE_DEBUG==="true")&&(console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set"));let fe;var II;try{fe=dU(DN,hU,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:RI?window.localStorage:void 0}}),typeof process<"u"&&((II=xz)==null?void 0:II.NODE_ENV)==="development"&&RI&&console.log("Supabase client initialized with URL:",DN)}catch(e){throw console.error("Error initializing Supabase client:",e),e}const _ue=()=>{const[e,t]=g.useState("login"),[r,n]=g.useState(null),[s,i]=g.useState(!1),[o,a]=g.useState(""),[l,c]=g.useState(""),[u,h]=g.useState(""),[f,p]=g.useState(""),[v,m]=g.useState(""),[b,x]=g.useState(""),[w,_]=g.useState(null),j=(E,T="info")=>{n({text:E,type:T});const P=setTimeout(()=>n(null),6e3);return()=>clearTimeout(P)},k=async E=>{if(E.preventDefault(),!o||!l){j("Please enter both email and password","error");return}i(!0);try{const{error:T}=await fe.auth.signInWithPassword({email:o,password:l});if(T)throw T}catch(T){const P=T instanceof Error?T.message:"Failed to sign in";j(P,"error")}finally{i(!1)}},N=async E=>{if(E.preventDefault(),f!==b){j("Passwords do not match","error");return}i(!0);try{const{error:T}=await fe.auth.signUp({email:u,password:f,options:{data:{display_name:v}}});if(T)throw T;j("Account created! Please check your email to confirm your account.","success"),t("login")}catch(T){const P=T instanceof Error?T.message:"Failed to create account";j(P,"error")}finally{i(!1)}},S=E=>{if(!E){_(null);return}let T=0;E.length>=8&&T++,/[A-Z]/.test(E)&&T++,/[a-z]/.test(E)&&T++,/[0-9]/.test(E)&&T++,/[^A-Za-z0-9]/.test(E)&&T++,E.length>=12&&T++;const P=[{text:"Weak",className:"weak"},{text:"Fair",className:"fair"},{text:"Good",className:"good"},{text:"Strong",className:"strong"},{text:"Very Strong",className:"very-strong"}],O=Math.min(T,P.length-1);_(P[O])};return d.jsx("div",{className:"auth-page",children:d.jsxs("div",{className:"auth-container",children:[d.jsxs("div",{className:"auth-header",children:[d.jsx("h1",{children:e==="login"?"Welcome Back":"Create Account"}),d.jsx("p",{children:e==="login"?"Sign in to access your account":"Join our community today"})]}),r&&d.jsx("div",{className:`message ${r.type}`,children:r.text}),d.jsxs("div",{className:"tabs",children:[d.jsx("button",{className:`tab ${e==="login"?"active":""}`,onClick:()=>t("login"),type:"button",children:"Sign In"}),d.jsx("button",{className:`tab ${e==="signup"?"active":""}`,onClick:()=>t("signup"),type:"button",children:"Create Account"})]}),e==="login"?d.jsxs("form",{className:"auth-form",onSubmit:k,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"loginEmail",children:"Email"}),d.jsx("input",{type:"email",id:"loginEmail",value:o,onChange:E=>a(E.target.value),placeholder:"Enter your email",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"loginPassword",children:"Password"}),d.jsx("input",{type:"password",id:"loginPassword",value:l,onChange:E=>c(E.target.value),placeholder:"Enter your password",required:!0,disabled:s})]}),d.jsx("button",{type:"submit",className:"btn primary",disabled:s,children:s?"Signing in...":"Sign In"}),d.jsx("div",{className:"form-footer",children:d.jsx(sn,{to:"/forgot-password",children:"Forgot password?"})})]}):d.jsxs("form",{className:"auth-form",onSubmit:N,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupDisplayName",children:"Display Name"}),d.jsx("input",{type:"text",id:"signupDisplayName",value:v,onChange:E=>m(E.target.value),placeholder:"Enter your name",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupEmail",children:"Email"}),d.jsx("input",{type:"email",id:"signupEmail",value:u,onChange:E=>h(E.target.value),placeholder:"your.email@example.com",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupPassword",children:"Password"}),d.jsx("input",{type:"password",id:"signupPassword",value:f,onChange:E=>{p(E.target.value),S(E.target.value)},placeholder:"Create a strong password",required:!0,disabled:s}),w&&d.jsxs("div",{className:`password-strength ${w.className}`,children:["Password strength: ",w.text]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),d.jsx("input",{type:"password",id:"confirmPassword",value:b,onChange:E=>x(E.target.value),placeholder:"Re-enter your password",required:!0,disabled:s})]}),d.jsx("button",{type:"submit",className:"btn primary",disabled:s,children:s?"Creating account...":"Create Account"})]}),d.jsx("div",{className:"auth-divider",children:d.jsx("span",{children:"or continue with"})}),d.jsxs("div",{className:"social-logins",children:[d.jsx("button",{type:"button",className:"btn social google",onClick:()=>j("Google login is not yet implemented","info"),disabled:s,children:"Google"}),d.jsx("button",{type:"button",className:"btn social github",onClick:()=>j("GitHub login is not yet implemented","info"),disabled:s,children:"GitHub"})]}),d.jsx("div",{className:"auth-footer",children:e==="login"?d.jsxs(d.Fragment,{children:["Don't have an account?"," ",d.jsx("button",{type:"button",className:"text-link",onClick:()=>t("signup"),children:"Sign up"})]}):d.jsxs(d.Fragment,{children:["Already have an account?"," ",d.jsx("button",{type:"button",className:"text-link",onClick:()=>t("login"),children:"Sign in"})]})})]})})},jue=g.createContext(void 0),ix=()=>{const e=g.useContext(jue);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kue=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fU=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nue={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sue=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>g.createElement("svg",{ref:l,...Nue,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:fU("lucide",s),...a},[...o.map(([c,u])=>g.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(e,t)=>{const r=g.forwardRef(({className:n,...s},i)=>g.createElement(Sue,{ref:i,iconNode:t,className:fU(`lucide-${kue(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=Se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Se("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eue=Se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Se("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cue=Se("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Se("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tue=Se("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=Se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aue=Se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=Se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Se("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oue=Se("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=Se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pue=Se("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rue=Se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=Se("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iue=Se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Due=Se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=Se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lue=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=Se("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mue=Se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=Se("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=Se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ue=Se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fue=Se("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=Se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zue=Se("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uue=Se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bue=Se("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const que=Se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=Se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vue=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=Se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=Se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=Se("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wue=Se("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=Se("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kue=Se("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=Se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hue=Se("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zue=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=Se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=Se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gue=Se("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yue=Se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=Se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jue=Se("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xue=Se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Que=Se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ede=Se("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=Se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),tde=[{name:"Dashboard",href:"/account/admin",icon:Uue},{name:"Products",href:"/account/admin/products",icon:jU},{name:"Orders",href:"/account/admin/orders",icon:pC},{name:"Inventory",href:"/account/admin/inventory",icon:Tue},{name:"Analytics",href:"/account/admin/analytics",icon:Eue},{name:"Posts",href:"/account/admin/posts",icon:Lue},{name:"Works",href:"/account/admin/works",icon:hu},{name:"Timeline",href:"/account/admin/timeline/events",icon:mU},{name:"Users",href:"/account/admin/users",icon:Eh},{name:"Beta Applications",href:"/account/admin/beta-applications",icon:Eh},{name:"Webhooks",href:"/account/admin/webhooks",icon:ede},{name:"Media",href:"/account/admin/media",icon:Xue},{name:"Settings",href:"/account/admin/settings",icon:Zue}],rde=()=>{var e,t;const[r,n]=g.useState(!1),[s,i]=g.useState(!1),o=xi(),{user:a,userProfile:l}=ix();g.useEffect(()=>{i(!1)},[o]);const c=()=>{n(!r)},u=async()=>{await fe.auth.signOut()};return d.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200 flex",children:[d.jsx("button",{onClick:c,className:Ye("fixed top-4 left-0 z-50 p-2 rounded-r-lg bg-white dark:bg-gray-800 shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300",r?"translate-x-0":"translate-x-64","lg:hidden"),"aria-label":r?"Expand sidebar":"Collapse sidebar",children:r?d.jsx(dC,{size:20}):d.jsx(Aue,{size:20})}),d.jsx("aside",{className:Ye("fixed top-0 left-0 z-40 h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out",r?"w-0 opacity-0":"w-64 opacity-100",s?"translate-x-0":"-translate-x-full lg:translate-x-0","lg:opacity-100"),children:d.jsxs("div",{className:"h-full flex flex-col",children:[d.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:d.jsx("h2",{className:"text-xl font-bold",children:"Admin"})}),d.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:d.jsx("ul",{className:"space-y-1",children:tde.map(h=>d.jsx("li",{children:d.jsxs(Ud,{to:h.href,end:h.href==="/account/admin",className:({isActive:f})=>Ye("flex items-center p-3 rounded-lg transition-colors",f?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700",r?"justify-center":"space-x-3"),children:[d.jsx(h.icon,{size:20,className:"flex-shrink-0"}),!r&&d.jsx("span",{children:h.name})]})},h.name))})}),d.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:d.jsxs("div",{className:Ye("flex items-center",r?"justify-center":"justify-between"),children:[!r&&d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:((e=l==null?void 0:l.display_name)==null?void 0:e.charAt(0))||((t=a==null?void 0:a.email)==null?void 0:t.charAt(0).toUpperCase())}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium truncate max-w-[140px]",children:(l==null?void 0:l.display_name)||"Admin User"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[140px]",children:a==null?void 0:a.email})]})]}),d.jsx("button",{onClick:u,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:"Sign out",children:d.jsx(Vue,{size:18})})]})})]})}),d.jsx("div",{className:Ye("transition-all duration-300 min-h-screen",r?"lg:ml-0":"lg:ml-64","ml-0 w-full"),children:d.jsx("div",{className:"w-full max-w-[2000px] mx-auto px-4 py-6",children:d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 md:p-6",children:d.jsx(EE,{})})})})]})},nde=({children:e})=>{var t,r;const[n,s]=g.useState(!0),[i,o]=g.useState({isAuthenticated:!1,isAdmin:!1}),a=xi();return g.useEffect(()=>{(async()=>{console.log("⏳ [AdminProtectedRoute] Checking session and admin status...");const{data:{session:l},error:c}=await fe.auth.getSession();if(c||!l){console.log("🔒 [AdminProtectedRoute] No authenticated session found."),o({isAuthenticated:!1,isAdmin:!1}),s(!1);return}console.log("✅ [AdminProtectedRoute] Session found. User:",l.user.email);const{data:u,error:h}=await fe.rpc("is_admin");h&&console.error("❌ [AdminProtectedRoute] Error calling is_admin RPC:",h);const f={isAuthenticated:!0,isAdmin:u===!0,user:l.user};console.log("✅ [AdminProtectedRoute] Final auth state:",f),o(f),s(!1)})()},[]),n?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto"}),d.jsx("p",{className:"mt-4",children:"Verifying Admin Privileges..."})]})}):i.isAuthenticated?i.isAdmin?d.jsx(d.Fragment,{children:e}):(console.log("❌ [AdminProtectedRoute] Access Denied. User is not an admin."),d.jsx("div",{className:"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8 text-white",children:d.jsx("div",{className:"max-w-4xl mx-auto",children:d.jsxs("div",{className:"bg-gray-800 shadow-lg rounded-lg overflow-hidden",children:[d.jsxs("div",{className:"bg-red-600 p-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Access Denied"}),d.jsx("p",{className:"text-red-100",children:"You do not have the necessary permissions to view this page."})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsx("p",{children:"The page you are trying to access is restricted to administrators only."}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-medium text-gray-300 mb-2",children:"Your Account Details"}),d.jsxs("dl",{className:"bg-gray-700/50 rounded-lg p-4 space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"User ID"}),d.jsx("dd",{className:"font-mono",children:((t=i.user)==null?void 0:t.id)||"N/A"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"Email"}),d.jsx("dd",{children:((r=i.user)==null?void 0:r.email)||"N/A"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"Admin Status"}),d.jsx("dd",{className:"font-semibold text-red-400",children:"Not an Admin"})]})]})]}),d.jsx("p",{children:"If you believe this is an error, please contact support."}),d.jsx("div",{className:"pt-4",children:d.jsx("a",{href:"/",className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Go to Homepage"})})]})]})})})):(console.log("🛑 [AdminProtectedRoute] Not authenticated, redirecting to login."),d.jsx(eF,{to:"/login",state:{from:a},replace:!0}))},sde="_zoroHeader_6lzsp_2",ide="_logo_6lzsp_16",ode="_navbar_6lzsp_23",ade="_navMenu_6lzsp_27",lde="_navLink_6lzsp_39",cde="_dropdownMenu_6lzsp_53",ude="_dropdownMenuItem_6lzsp_73",dde="_dropdown_6lzsp_53",hde="_headerControls_6lzsp_96",fde="_searchForm_6lzsp_121",pde="_themeToggle_6lzsp_165",mde="_icon_6lzsp_186",gde="_iconSun_6lzsp_197",yde="_iconMoon_6lzsp_203",kn={zoroHeader:sde,logo:ide,navbar:ode,navMenu:ade,navLink:lde,dropdownMenu:cde,dropdownMenuItem:ude,dropdown:dde,headerControls:hde,searchForm:fde,themeToggle:pde,icon:mde,iconSun:gde,iconMoon:yde},MI="zoro-theme",vde=()=>{const[e,t]=g.useState(()=>{if(typeof window<"u"){const n=localStorage.getItem(MI),s=window.matchMedia("(prefers-color-scheme: dark)").matches;return n??(s?"dark":"light")}return"dark"});g.useEffect(()=>{const n=window.document.documentElement;n.setAttribute("data-theme",e),localStorage.setItem(MI,e),e==="dark"?(n.classList.add("dark"),n.classList.remove("light")):(n.classList.add("light"),n.classList.remove("dark"))},[e]);const r=()=>{t(n=>n==="dark"?"light":"dark")};return d.jsxs("button",{id:"theme-toggle",className:kn.themeToggle,"aria-label":"Toggle dark mode","aria-pressed":e==="dark"?"true":"false",title:e==="dark"?"Switch to light mode":"Switch to dark mode",onClick:r,children:[d.jsxs("svg",{className:`${kn.icon} ${kn.iconSun}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:[d.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),d.jsxs("g",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[d.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"5"}),d.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),d.jsx("line",{x1:"2",y1:"12",x2:"5",y2:"12"}),d.jsx("line",{x1:"19",y1:"12",x2:"22",y2:"12"}),d.jsx("line",{x1:"4.2",y1:"4.2",x2:"6.3",y2:"6.3"}),d.jsx("line",{x1:"17.7",y1:"17.7",x2:"19.8",y2:"19.8"}),d.jsx("line",{x1:"4.2",y1:"19.8",x2:"6.3",y2:"17.7"}),d.jsx("line",{x1:"17.7",y1:"6.3",x2:"19.8",y2:"4.2"})]})]}),d.jsx("svg",{className:`${kn.icon} ${kn.iconMoon}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:d.jsx("path",{d:`M21 14.5a9 9 0 1 1-8.5-12
                 a8 8 0 0 0 8.5 12z`,fill:"currentColor"})})]})},bde=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState(!1),[s,i]=g.useState("none");g.useEffect(()=>{(async()=>{var c,u;const{data:{session:h}}=await Ms.auth.getSession();n(!!h),(u=(c=h==null?void 0:h.user)==null?void 0:c.user_metadata)!=null&&u.betaApplicationStatus&&i(h.user.user_metadata.betaApplicationStatus)})();const{data:l}=Ms.auth.onAuthStateChange((c,u)=>{var h,f;n(!!u),(f=(h=u==null?void 0:u.user)==null?void 0:h.user_metadata)!=null&&f.betaApplicationStatus&&i(u.user.user_metadata.betaApplicationStatus)});return()=>{l.subscription.unsubscribe()}},[]);const o=async()=>{await Ms.auth.signOut()},a=[{name:"Home",path:"/"},{name:"Explore",path:"#",children:[{name:"Library",path:"/library"},{name:"Wiki",path:"/wiki"},{name:"Timelines",path:"/timelines"},{name:"Characters",path:"/characters"},{name:"Blog",path:"/blog"}]},{name:"Beta Program",path:"/beta/application"}];if(r){const l=[];l.push({name:"Store",path:"/store"}),l.push({name:"Subscriptions",path:"/subscriptions"}),s==="accepted"&&l.push({name:"Beta Portal",path:"/beta/portal"}),l.push({name:"My Account",path:"/account"}),a.push({name:"Account",path:"#",children:l}),a.push({name:"Logout",path:"#",onClick:o})}else a.push({name:"Login",path:"/login"});return d.jsxs("header",{className:kn.zoroHeader,children:[d.jsx("div",{className:kn.logo,children:d.jsx(Ud,{to:"/",children:d.jsx("h1",{children:"Zoroasterverse"})})}),d.jsxs("div",{className:kn.headerControls,children:[d.jsxs("form",{className:kn.searchForm,children:[d.jsx("input",{type:"text",placeholder:"Search..."}),d.jsx("button",{type:"submit",children:d.jsx(Ru,{})})]}),d.jsx(vde,{})]}),d.jsx("nav",{className:kn.navbar,children:d.jsx("ul",{className:kn.navMenu,children:a.map(l=>d.jsxs("li",{className:l.children?kn.dropdown:"",children:[l.onClick?d.jsx("button",{onClick:l.onClick,className:kn.navLink,children:l.name}):d.jsxs(Ud,{to:l.path,className:kn.navLink,children:[l.name," ",l.children?"▾":""]}),l.children&&d.jsx("ul",{className:kn.dropdownMenu,children:l.children.map(c=>d.jsx("li",{children:d.jsx(Ud,{to:c.path,className:kn.dropdownMenuItem,children:c.name})},c.name))})]},l.name))})})]})},xde="_zoroFooter_8qpog_1",wde="_footerContent_8qpog_8",_de="_footerColumns_8qpog_13",jde="_column_8qpog_20",kde="_socialIcons_8qpog_50",Nde="_footerQuote_8qpog_59",tl={zoroFooter:xde,footerContent:wde,footerColumns:_de,column:jde,socialIcons:kde,footerQuote:Nde},Sde=()=>d.jsx("footer",{className:tl.zoroFooter,children:d.jsxs("div",{className:tl.footerContent,children:[d.jsxs("div",{className:tl.footerColumns,children:[d.jsxs("div",{className:tl.column,children:[d.jsx("h4",{children:"Zoroasterverse"}),d.jsx("p",{children:"“Truth is the architect of happiness.”"}),d.jsxs("p",{children:["© ",new Date().getFullYear()," Zoroasterverse. All rights reserved."]})]}),d.jsxs("div",{className:tl.column,children:[d.jsx("h4",{children:"Explore"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx("a",{href:"/about",children:"About"})}),d.jsx("li",{children:d.jsx("a",{href:"/books",children:"Books"})}),d.jsx("li",{children:d.jsx("a",{href:"/collaborate",children:"Artist Collaboration"})}),d.jsx("li",{children:d.jsx("a",{href:"/contact",children:"Contact"})})]})]}),d.jsxs("div",{className:tl.column,children:[d.jsx("h4",{children:"Connect"}),d.jsxs("ul",{className:tl.socialIcons,children:[d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(Jue,{})})}),d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(zue,{})})}),d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(_U,{})})})]})]})]}),d.jsx("div",{className:tl.footerQuote,children:d.jsx("em",{children:"“Let your conscience be the altar where right intention dwells.”"})})]})}),Ede=()=>d.jsxs("div",{className:"min-h-screen flex flex-col",children:[d.jsx(bde,{}),d.jsx("main",{className:"flex-1",children:d.jsx(EE,{})}),d.jsx(Sde,{})]}),Cde="_parchmentCard_1fsok_12",Tde="_zrSection_1fsok_256",Ade="_zrH2_1fsok_263",ds={parchmentCard:Cde,zrSection:Tde,zrH2:Ade},Ode=async()=>{const{data:e,error:t}=await fe.from("homepage_content").select("*");if(t)throw new Error(t.message);return e},Pde=async()=>{const{data:e,error:t}=await fe.from("posts").select("id, title, slug, content, created_at").eq("status","published").order("created_at",{ascending:!1}).limit(3);if(t)throw new Error(t.message);return e},Rde=async()=>{const{data:e,error:t}=await fe.from("release_items").select("*").order("created_at",{ascending:!1});if(t)throw new Error(t.message);return e},Ide=({posts:e})=>d.jsxs("section",{className:ds.zrSection,children:[d.jsx("h2",{className:ds.zrH2,children:"Latest News & Updates"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map(t=>{const r=t.content.length>100?t.content.substring(0,100)+"...":t.content;return d.jsxs("div",{className:ds.parchmentCard,children:[d.jsx("h3",{children:t.title}),d.jsx("p",{className:"mt-2",dangerouslySetInnerHTML:{__html:r}}),d.jsx(sn,{to:`/blog/${t.slug}`,className:"mt-4 inline-block",children:"Read More"})]},t.id)})})]}),Dde=({releases:e})=>d.jsxs("section",{className:ds.zrSection,children:[d.jsx("h2",{className:ds.zrH2,children:"Latest Releases"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map(t=>d.jsxs("div",{className:ds.parchmentCard,children:[d.jsx("h3",{children:t.title}),d.jsxs("p",{className:"mt-2",children:["Type: ",t.type]}),d.jsx("a",{href:t.link||"#",className:"mt-4 inline-block",children:"View Details / Purchase"})]},t.id))})]}),Lde=()=>{var e,t,r,n;const{data:s,isLoading:i,isError:o}=Rt({queryKey:["homepageContent"],queryFn:Ode}),{data:a,isLoading:l,isError:c}=Rt({queryKey:["latestPosts"],queryFn:Pde}),{data:u,isLoading:h,isError:f}=Rt({queryKey:["releaseItems"],queryFn:Rde}),[p,v]=g.useState(3),[m,b]=g.useState(null);g.useEffect(()=>{(async()=>{const{data:{user:j}}=await fe.auth.getUser();if(!j){v(0);return}const k=new Date().toISOString().slice(0,10),{data:N,error:S}=await fe.from("daily_spins").select("*").eq("user_id",j.id).eq("spin_date",k).single();if(S&&S.code!=="PGRST116"){console.error("Error fetching daily spins:",S),v(0);return}if(N)v(3-N.spin_count),b(N.spin_date);else{v(3),b(k);const{error:E}=await fe.from("daily_spins").insert({user_id:j.id,spin_date:k,spin_count:0});E&&console.error("Error inserting new daily spin entry:",E)}})()},[]);const x=i||l||h,w=o||c||f;if(x)return d.jsx("div",{className:"text-center py-8",children:"Loading homepage content..."});if(w)return d.jsx("div",{className:"text-center py-8 text-red-400",children:"Error loading homepage content."});const _=new Map(s==null?void 0:s.map(j=>[j.section,j]));return d.jsxs("div",{children:[d.jsxs("section",{className:ds.zrSection,children:[d.jsx("h2",{className:ds.zrH2,children:"Our Progress"}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[d.jsxs("div",{className:ds.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((e=_.get("statistics_words_written"))==null?void 0:e.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Words Written"})]}),d.jsxs("div",{className:ds.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((t=_.get("statistics_beta_readers"))==null?void 0:t.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Beta Readers"})]}),d.jsxs("div",{className:ds.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((r=_.get("statistics_average_rating"))==null?void 0:r.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Average Rating"})]}),d.jsxs("div",{className:ds.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((n=_.get("statistics_books_published"))==null?void 0:n.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Books Published"})]})]})]}),d.jsx(Ide,{posts:a||[]}),d.jsx(Dde,{releases:u||[]}),d.jsxs("section",{className:ds.zrSection,children:[d.jsx("h2",{className:ds.zrH2,children:"Artist Collaboration"}),d.jsxs("div",{className:"relative rounded-lg shadow-lg overflow-hidden w-full",children:[d.jsx("img",{src:"/images/invite_to_Colab_card.png",alt:"Artist Collaboration Invitation",className:"w-full h-full object-contain"}),d.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-8",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-shadow-md",children:"Join Our Creative Team!"}),d.jsx("p",{className:"text-white mb-6 text-shadow-sm",children:"We're looking for talented artists to help shape the visual identity of the Zangar/Spandam Series. Explore revenue-share opportunities and bring your vision to life."}),d.jsx(sn,{to:"/artist-collaboration",className:"inline-block bg-primary hover:bg-primary-dark text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:"Apply Now"})]})]})]})]})};function Mde(e){const t=e+"CollectionProvider",[r,n]=Ou(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:b,children:x}=m,w=ee.useRef(null),_=ee.useRef(new Map).current;return d.jsx(s,{scope:b,itemMap:_,collectionRef:w,children:x})};o.displayName=t;const a=e+"CollectionSlot",l=um(a),c=ee.forwardRef((m,b)=>{const{scope:x,children:w}=m,_=i(a,x),j=Dn(b,_.collectionRef);return d.jsx(l,{ref:j,children:w})});c.displayName=a;const u=e+"CollectionItemSlot",h="data-radix-collection-item",f=um(u),p=ee.forwardRef((m,b)=>{const{scope:x,children:w,..._}=m,j=ee.useRef(null),k=Dn(b,j),N=i(u,x);return ee.useEffect(()=>(N.itemMap.set(j,{ref:j,..._}),()=>void N.itemMap.delete(j))),d.jsx(f,{[h]:"",ref:k,children:w})});p.displayName=u;function v(m){const b=i(e+"CollectionConsumer",m);return ee.useCallback(()=>{const x=b.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((_,j)=>w.indexOf(_.ref.current)-w.indexOf(j.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},v,n]}var $de=g.createContext(void 0);function SU(e){const t=g.useContext($de);return e||t||"ltr"}var sj="rovingFocusGroup.onEntryFocus",Fde={bubbles:!1,cancelable:!0},hg="RovingFocusGroup",[LN,EU,zde]=Mde(hg),[Ude,CU]=Ou(hg,[zde]),[Bde,qde]=Ude(hg),TU=g.forwardRef((e,t)=>d.jsx(LN.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(LN.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(Vde,{...e,ref:t})})}));TU.displayName=hg;var Vde=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=e,f=g.useRef(null),p=Dn(t,f),v=SU(i),[m,b]=lg({prop:o,defaultProp:a??null,onChange:l,caller:hg}),[x,w]=g.useState(!1),_=jh(c),j=EU(r),k=g.useRef(!1),[N,S]=g.useState(0);return g.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(sj,_),()=>E.removeEventListener(sj,_)},[_]),d.jsx(Bde,{scope:r,orientation:n,dir:v,loop:s,currentTabStopId:m,onItemFocus:g.useCallback(E=>b(E),[b]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>S(E=>E+1),[]),onFocusableItemRemove:g.useCallback(()=>S(E=>E-1),[]),children:d.jsx(_r.div,{tabIndex:x||N===0?-1:0,"data-orientation":n,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:br(e.onMouseDown,()=>{k.current=!0}),onFocus:br(e.onFocus,E=>{const T=!k.current;if(E.target===E.currentTarget&&T&&!x){const P=new CustomEvent(sj,Fde);if(E.currentTarget.dispatchEvent(P),!P.defaultPrevented){const O=j().filter(z=>z.focusable),R=O.find(z=>z.active),I=O.find(z=>z.id===m),M=[R,I,...O].filter(Boolean).map(z=>z.ref.current);PU(M,u)}}k.current=!1}),onBlur:br(e.onBlur,()=>w(!1))})})}),AU="RovingFocusGroupItem",OU=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...a}=e,l=Dp(),c=i||l,u=qde(AU,r),h=u.currentTabStopId===c,f=EU(r),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:m}=u;return g.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),d.jsx(LN.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:d.jsx(_r.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:br(e.onMouseDown,b=>{n?u.onItemFocus(c):b.preventDefault()}),onFocus:br(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:br(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=Hde(b,u.orientation,u.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=f().filter(_=>_.focusable).map(_=>_.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const _=w.indexOf(b.currentTarget);w=u.loop?Zde(w,_+1):w.slice(_+1)}setTimeout(()=>PU(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:m!=null}):o})})});OU.displayName=AU;var Wde={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Kde(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Hde(e,t,r){const n=Kde(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Wde[n]}function PU(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function Zde(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Gde=TU,Yde=OU,ax="Tabs",[Jde,oHe]=Ou(ax,[CU]),RU=CU(),[Xde,mC]=Jde(ax),IU=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=SU(a),[h,f]=lg({prop:n,onChange:s,defaultProp:i??"",caller:ax});return d.jsx(Xde,{scope:r,baseId:Dp(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:l,children:d.jsx(_r.div,{dir:u,"data-orientation":o,...c,ref:t})})});IU.displayName=ax;var DU="TabsList",LU=g.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=mC(DU,r),o=RU(r);return d.jsx(Gde,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:d.jsx(_r.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});LU.displayName=DU;var MU="TabsTrigger",$U=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,o=mC(MU,r),a=RU(r),l=UU(o.baseId,n),c=BU(o.baseId,n),u=n===o.value;return d.jsx(Yde,{asChild:!0,...a,focusable:!s,active:u,children:d.jsx(_r.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:t,onMouseDown:br(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:br(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:br(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!s&&h&&o.onValueChange(n)})})})});$U.displayName=MU;var FU="TabsContent",zU=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=e,a=mC(FU,r),l=UU(a.baseId,n),c=BU(a.baseId,n),u=n===a.value,h=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),d.jsx(of,{present:s||u,children:({present:f})=>d.jsx(_r.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});zU.displayName=FU;function UU(e,t){return`${e}-trigger-${t}`}function BU(e,t){return`${e}-content-${t}`}var Qde=IU,qU=LU,VU=$U,WU=zU;const ehe=Qde,KU=g.forwardRef(({className:e,...t},r)=>d.jsx(qU,{ref:r,className:Ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));KU.displayName=qU.displayName;const gp=g.forwardRef(({className:e,...t},r)=>d.jsx(VU,{ref:r,className:Ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));gp.displayName=VU.displayName;const yp=g.forwardRef(({className:e,...t},r)=>d.jsx(WU,{ref:r,className:Ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));yp.displayName=WU.displayName;var fg=e=>e.type==="checkbox",Lc=e=>e instanceof Date,Wn=e=>e==null;const HU=e=>typeof e=="object";var xr=e=>!Wn(e)&&!Array.isArray(e)&&HU(e)&&!Lc(e),ZU=e=>xr(e)&&e.target?fg(e.target)?e.target.checked:e.target.value:e,the=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,GU=(e,t)=>e.has(the(t)),rhe=e=>{const t=e.constructor&&e.constructor.prototype;return xr(t)&&t.hasOwnProperty("isPrototypeOf")},gC=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $t(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(gC&&(e instanceof Blob||n))&&(r||xr(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!rhe(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=$t(e[s]));else return e;return t}var lx=e=>/^\w*$/.test(e),Bt=e=>e===void 0,cx=e=>Array.isArray(e)?e.filter(Boolean):[],yC=e=>cx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ye=(e,t,r)=>{if(!t||!xr(e))return r;const n=(lx(t)?[t]:yC(t)).reduce((s,i)=>Wn(s)?s:s[i],e);return Bt(n)||n===e?Bt(e[t])?r:e[t]:n},Ts=e=>typeof e=="boolean",mt=(e,t,r)=>{let n=-1;const s=lx(t)?[t]:yC(t),i=s.length,o=i-1;for(;++n<i;){const a=s[n];let l=r;if(n!==o){const c=e[a];l=xr(c)||Array.isArray(c)?c:isNaN(+s[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=l,e=e[a]}};const ib={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ai={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Yo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},YU=ee.createContext(null);YU.displayName="HookFormContext";const ux=()=>ee.useContext(YU);var JU=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==ai.all&&(t._proxyFormState[o]=!n||ai.all),r&&(r[o]=!0),e[o]}});return s};const dx=typeof window<"u"?ee.useLayoutEffect:ee.useEffect;function nhe(e){const t=ux(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[o,a]=ee.useState(r._formState),l=ee.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return dx(()=>r._subscribe({name:s,formState:l.current,exact:i,callback:c=>{!n&&a({...r._formState,...c})}}),[s,n,i]),ee.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),ee.useMemo(()=>JU(o,r,l.current,!1),[o,r])}var ko=e=>typeof e=="string",XU=(e,t,r,n,s)=>ko(e)?(n&&t.watch.add(e),ye(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),ye(r,i))):(n&&(t.watchAll=!0),r),MN=e=>Wn(e)||!HU(e);function da(e,t,r=new WeakSet){if(MN(e)||MN(t))return e===t;if(Lc(e)&&Lc(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=t[i];if(Lc(o)&&Lc(a)||xr(o)&&xr(a)||Array.isArray(o)&&Array.isArray(a)?!da(o,a,r):o!==a)return!1}}return!0}function she(e){const t=ux(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:o,compute:a}=e||{},l=ee.useRef(s),c=ee.useRef(a),u=ee.useRef(void 0);c.current=a;const h=ee.useMemo(()=>r._getWatch(n,l.current),[r,n]),[f,p]=ee.useState(c.current?c.current(h):h);return dx(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:v=>{if(!i){const m=XU(n,r._names,v.values||r._formValues,!1,l.current);if(c.current){const b=c.current(m);da(b,u.current)||(p(b),u.current=b)}else p(m)}}}),[r,i,n,o]),ee.useEffect(()=>r._removeUnmounted()),f}function ihe(e){const t=ux(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:o}=e,a=GU(s._names.array,r),l=ee.useMemo(()=>ye(s._formValues,r,ye(s._defaultValues,r,o)),[s,r,o]),c=she({control:s,name:r,defaultValue:l,exact:!0}),u=nhe({control:s,name:r,exact:!0}),h=ee.useRef(e),f=ee.useRef(s.register(r,{...e.rules,value:c,...Ts(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const p=ee.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ye(u.errors,r)},isDirty:{enumerable:!0,get:()=>!!ye(u.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ye(u.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ye(u.validatingFields,r)},error:{enumerable:!0,get:()=>ye(u.errors,r)}}),[u,r]),v=ee.useCallback(w=>f.current.onChange({target:{value:ZU(w),name:r},type:ib.CHANGE}),[r]),m=ee.useCallback(()=>f.current.onBlur({target:{value:ye(s._formValues,r),name:r},type:ib.BLUR}),[r,s._formValues]),b=ee.useCallback(w=>{const _=ye(s._fields,r);_&&w&&(_._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:j=>w.setCustomValidity(j),reportValidity:()=>w.reportValidity()})},[s._fields,r]),x=ee.useMemo(()=>({name:r,value:c,...Ts(n)||u.disabled?{disabled:u.disabled||n}:{},onChange:v,onBlur:m,ref:b}),[r,n,u.disabled,v,m,b,c]);return ee.useEffect(()=>{const w=s._options.shouldUnregister||i;s.register(r,{...h.current.rules,...Ts(h.current.disabled)?{disabled:h.current.disabled}:{}});const _=(j,k)=>{const N=ye(s._fields,j);N&&N._f&&(N._f.mount=k)};if(_(r,!0),w){const j=$t(ye(s._options.defaultValues,r));mt(s._defaultValues,r,j),Bt(ye(s._formValues,r))&&mt(s._formValues,r,j)}return!a&&s.register(r),()=>{(a?w&&!s._state.action:w)?s.unregister(r):_(r,!1)}},[r,s,a,i]),ee.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),ee.useMemo(()=>({field:x,formState:u,fieldState:p}),[x,u,p])}const Kd=e=>e.render(ihe(e));var vC=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},ms=e=>Array.isArray(e)?e:[e],$I=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(r=>r!==t)}}),unsubscribe:()=>{e=[]}}},qn=e=>xr(e)&&!Object.keys(e).length,bC=e=>e.type==="file",Vi=e=>typeof e=="function",ob=e=>{if(!gC)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},QU=e=>e.type==="select-multiple",xC=e=>e.type==="radio",ohe=e=>xC(e)||fg(e),ij=e=>ob(e)&&e.isConnected;function ahe(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Bt(e)?n++:e[t[n++]];return e}function lhe(e){for(const t in e)if(e.hasOwnProperty(t)&&!Bt(e[t]))return!1;return!0}function gr(e,t){const r=Array.isArray(t)?t:lx(t)?[t]:yC(t),n=r.length===1?e:ahe(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(xr(n)&&qn(n)||Array.isArray(n)&&lhe(n))&&gr(e,r.slice(0,-1)),e}var eB=e=>{for(const t in e)if(Vi(e[t]))return!0;return!1};function ab(e,t={}){const r=Array.isArray(e);if(xr(e)||r)for(const n in e)Array.isArray(e[n])||xr(e[n])&&!eB(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ab(e[n],t[n])):Wn(e[n])||(t[n]=!0);return t}function tB(e,t,r){const n=Array.isArray(e);if(xr(e)||n)for(const s in e)Array.isArray(e[s])||xr(e[s])&&!eB(e[s])?Bt(t)||MN(r[s])?r[s]=Array.isArray(e[s])?ab(e[s],[]):{...ab(e[s])}:tB(e[s],Wn(t)?{}:t[s],r[s]):r[s]=!da(e[s],t[s]);return r}var Zf=(e,t)=>tB(e,t,ab(t));const FI={value:!1,isValid:!1},zI={value:!0,isValid:!0};var rB=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Bt(e[0].attributes.value)?Bt(e[0].value)||e[0].value===""?zI:{value:e[0].value,isValid:!0}:zI:FI}return FI},nB=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Bt(e)?e:t?e===""?NaN:e&&+e:r&&ko(e)?new Date(e):n?n(e):e;const UI={isValid:!1,value:null};var sB=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,UI):UI;function BI(e){const t=e.ref;return bC(t)?t.files:xC(t)?sB(e.refs).value:QU(t)?[...t.selectedOptions].map(({value:r})=>r):fg(t)?rB(e.refs).value:nB(Bt(t.value)?e.ref.value:t.value,e)}var che=(e,t,r,n)=>{const s={};for(const i of e){const o=ye(t,i);o&&mt(s,i,o._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},lb=e=>e instanceof RegExp,Gf=e=>Bt(e)?e:lb(e)?e.source:xr(e)?lb(e.value)?e.value.source:e.value:e,Od=e=>({isOnSubmit:!e||e===ai.onSubmit,isOnBlur:e===ai.onBlur,isOnChange:e===ai.onChange,isOnAll:e===ai.all,isOnTouch:e===ai.onTouched});const qI="AsyncFunction";var uhe=e=>!!e&&!!e.validate&&!!(Vi(e.validate)&&e.validate.constructor.name===qI||xr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===qI)),dhe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),$N=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Hd=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=ye(e,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n||o.ref&&t(o.ref,o.name)&&!n)return!0;if(Hd(a,t))break}else if(xr(a)&&Hd(a,t))break}}};function VI(e,t,r){const n=ye(e,r);if(n||lx(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=ye(t,i),a=ye(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:r}}var hhe=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return qn(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||ai.all))},fhe=(e,t,r)=>!e||!t||e===t||ms(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),phe=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,mhe=(e,t)=>!cx(ye(e,t)).length&&gr(e,t),iB=(e,t,r)=>{const n=ms(ye(e,r));return mt(n,"root",t[r]),mt(e,r,n),e},kv=e=>ko(e);function WI(e,t,r="validate"){if(kv(e)||Array.isArray(e)&&e.every(kv)||Ts(e)&&!e)return{type:r,message:kv(e)?e:"",ref:t}}var cd=e=>xr(e)&&!lb(e)?e:{value:e,message:""},FN=async(e,t,r,n,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:h,max:f,pattern:p,validate:v,name:m,valueAsNumber:b,mount:x}=e._f,w=ye(r,m);if(!x||t.has(m))return{};const _=a?a[0]:o,j=R=>{s&&_.reportValidity&&(_.setCustomValidity(Ts(R)?"":R||""),_.reportValidity())},k={},N=xC(o),S=fg(o),E=N||S,T=(b||bC(o))&&Bt(o.value)&&Bt(w)||ob(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,P=vC.bind(null,m,n,k),O=(R,I,M,z=Yo.maxLength,W=Yo.minLength)=>{const q=R?I:M;k[m]={type:R?z:W,message:q,ref:o,...P(R?z:W,q)}};if(i?!Array.isArray(w)||!w.length:l&&(!E&&(T||Wn(w))||Ts(w)&&!w||S&&!rB(a).isValid||N&&!sB(a).isValid)){const{value:R,message:I}=kv(l)?{value:!!l,message:l}:cd(l);if(R&&(k[m]={type:Yo.required,message:I,ref:_,...P(Yo.required,I)},!n))return j(I),k}if(!T&&(!Wn(h)||!Wn(f))){let R,I;const M=cd(f),z=cd(h);if(!Wn(w)&&!isNaN(w)){const W=o.valueAsNumber||w&&+w;Wn(M.value)||(R=W>M.value),Wn(z.value)||(I=W<z.value)}else{const W=o.valueAsDate||new Date(w),q=K=>new Date(new Date().toDateString()+" "+K),Y=o.type=="time",L=o.type=="week";ko(M.value)&&w&&(R=Y?q(w)>q(M.value):L?w>M.value:W>new Date(M.value)),ko(z.value)&&w&&(I=Y?q(w)<q(z.value):L?w<z.value:W<new Date(z.value))}if((R||I)&&(O(!!R,M.message,z.message,Yo.max,Yo.min),!n))return j(k[m].message),k}if((c||u)&&!T&&(ko(w)||i&&Array.isArray(w))){const R=cd(c),I=cd(u),M=!Wn(R.value)&&w.length>+R.value,z=!Wn(I.value)&&w.length<+I.value;if((M||z)&&(O(M,R.message,I.message),!n))return j(k[m].message),k}if(p&&!T&&ko(w)){const{value:R,message:I}=cd(p);if(lb(R)&&!w.match(R)&&(k[m]={type:Yo.pattern,message:I,ref:o,...P(Yo.pattern,I)},!n))return j(I),k}if(v){if(Vi(v)){const R=await v(w,r),I=WI(R,_);if(I&&(k[m]={...I,...P(Yo.validate,I.message)},!n))return j(I.message),k}else if(xr(v)){let R={};for(const I in v){if(!qn(R)&&!n)break;const M=WI(await v[I](w,r),_,I);M&&(R={...M,...P(I,M.message)},j(M.message),n&&(k[m]=R))}if(!qn(R)&&(k[m]={ref:_,...R},!n))return k}}return j(!0),k};const ghe={mode:ai.onSubmit,reValidateMode:ai.onChange,shouldFocusError:!0};function yhe(e={}){let t={...ghe,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Vi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=xr(t.defaultValues)||xr(t.values)?$t(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:$t(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:$I(),state:$I()},p=t.criteriaMode===ai.all,v=D=>V=>{clearTimeout(c),c=setTimeout(D,V)},m=async D=>{if(!t.disabled&&(u.isValid||h.isValid||D)){const V=t.resolver?qn((await S()).errors):await T(n,!0);V!==r.isValid&&f.state.next({isValid:V})}},b=(D,V)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((D||Array.from(a.mount)).forEach(Q=>{Q&&(V?mt(r.validatingFields,Q,V):gr(r.validatingFields,Q))}),f.state.next({validatingFields:r.validatingFields,isValidating:!qn(r.validatingFields)}))},x=(D,V=[],Q,ve,pe=!0,ue=!0)=>{if(ve&&Q&&!t.disabled){if(o.action=!0,ue&&Array.isArray(ye(n,D))){const _e=Q(ye(n,D),ve.argA,ve.argB);pe&&mt(n,D,_e)}if(ue&&Array.isArray(ye(r.errors,D))){const _e=Q(ye(r.errors,D),ve.argA,ve.argB);pe&&mt(r.errors,D,_e),mhe(r.errors,D)}if((u.touchedFields||h.touchedFields)&&ue&&Array.isArray(ye(r.touchedFields,D))){const _e=Q(ye(r.touchedFields,D),ve.argA,ve.argB);pe&&mt(r.touchedFields,D,_e)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=Zf(s,i)),f.state.next({name:D,isDirty:O(D,V),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else mt(i,D,V)},w=(D,V)=>{mt(r.errors,D,V),f.state.next({errors:r.errors})},_=D=>{r.errors=D,f.state.next({errors:r.errors,isValid:!1})},j=(D,V,Q,ve)=>{const pe=ye(n,D);if(pe){const ue=ye(i,D,Bt(Q)?ye(s,D):Q);Bt(ue)||ve&&ve.defaultChecked||V?mt(i,D,V?ue:BI(pe._f)):M(D,ue),o.mount&&m()}},k=(D,V,Q,ve,pe)=>{let ue=!1,_e=!1;const Ze={name:D};if(!t.disabled){if(!Q||ve){(u.isDirty||h.isDirty)&&(_e=r.isDirty,r.isDirty=Ze.isDirty=O(),ue=_e!==Ze.isDirty);const Ue=da(ye(s,D),V);_e=!!ye(r.dirtyFields,D),Ue?gr(r.dirtyFields,D):mt(r.dirtyFields,D,!0),Ze.dirtyFields=r.dirtyFields,ue=ue||(u.dirtyFields||h.dirtyFields)&&_e!==!Ue}if(Q){const Ue=ye(r.touchedFields,D);Ue||(mt(r.touchedFields,D,Q),Ze.touchedFields=r.touchedFields,ue=ue||(u.touchedFields||h.touchedFields)&&Ue!==Q)}ue&&pe&&f.state.next(Ze)}return ue?Ze:{}},N=(D,V,Q,ve)=>{const pe=ye(r.errors,D),ue=(u.isValid||h.isValid)&&Ts(V)&&r.isValid!==V;if(t.delayError&&Q?(l=v(()=>w(D,Q)),l(t.delayError)):(clearTimeout(c),l=null,Q?mt(r.errors,D,Q):gr(r.errors,D)),(Q?!da(pe,Q):pe)||!qn(ve)||ue){const _e={...ve,...ue&&Ts(V)?{isValid:V}:{},errors:r.errors,name:D};r={...r,..._e},f.state.next(_e)}},S=async D=>{b(D,!0);const V=await t.resolver(i,t.context,che(D||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(D),V},E=async D=>{const{errors:V}=await S(D);if(D)for(const Q of D){const ve=ye(V,Q);ve?mt(r.errors,Q,ve):gr(r.errors,Q)}else r.errors=V;return V},T=async(D,V,Q={valid:!0})=>{for(const ve in D){const pe=D[ve];if(pe){const{_f:ue,..._e}=pe;if(ue){const Ze=a.array.has(ue.name),Ue=pe._f&&uhe(pe._f);Ue&&u.validatingFields&&b([ve],!0);const at=await FN(pe,a.disabled,i,p,t.shouldUseNativeValidation&&!V,Ze);if(Ue&&u.validatingFields&&b([ve]),at[ue.name]&&(Q.valid=!1,V))break;!V&&(ye(at,ue.name)?Ze?iB(r.errors,at,ue.name):mt(r.errors,ue.name,at[ue.name]):gr(r.errors,ue.name))}!qn(_e)&&await T(_e,V,Q)}}return Q.valid},P=()=>{for(const D of a.unMount){const V=ye(n,D);V&&(V._f.refs?V._f.refs.every(Q=>!ij(Q)):!ij(V._f.ref))&&me(D)}a.unMount=new Set},O=(D,V)=>!t.disabled&&(D&&V&&mt(i,D,V),!da(K(),s)),R=(D,V,Q)=>XU(D,a,{...o.mount?i:Bt(V)?s:ko(D)?{[D]:V}:V},Q,V),I=D=>cx(ye(o.mount?i:s,D,t.shouldUnregister?ye(s,D,[]):[])),M=(D,V,Q={})=>{const ve=ye(n,D);let pe=V;if(ve){const ue=ve._f;ue&&(!ue.disabled&&mt(i,D,nB(V,ue)),pe=ob(ue.ref)&&Wn(V)?"":V,QU(ue.ref)?[...ue.ref.options].forEach(_e=>_e.selected=pe.includes(_e.value)):ue.refs?fg(ue.ref)?ue.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(pe)?_e.checked=!!pe.find(Ze=>Ze===_e.value):_e.checked=pe===_e.value||!!pe)}):ue.refs.forEach(_e=>_e.checked=_e.value===pe):bC(ue.ref)?ue.ref.value="":(ue.ref.value=pe,ue.ref.type||f.state.next({name:D,values:$t(i)})))}(Q.shouldDirty||Q.shouldTouch)&&k(D,pe,Q.shouldTouch,Q.shouldDirty,!0),Q.shouldValidate&&L(D)},z=(D,V,Q)=>{for(const ve in V){if(!V.hasOwnProperty(ve))return;const pe=V[ve],ue=D+"."+ve,_e=ye(n,ue);(a.array.has(D)||xr(pe)||_e&&!_e._f)&&!Lc(pe)?z(ue,pe,Q):M(ue,pe,Q)}},W=(D,V,Q={})=>{const ve=ye(n,D),pe=a.array.has(D),ue=$t(V);mt(i,D,ue),pe?(f.array.next({name:D,values:$t(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&Q.shouldDirty&&f.state.next({name:D,dirtyFields:Zf(s,i),isDirty:O(D,ue)})):ve&&!ve._f&&!Wn(ue)?z(D,ue,Q):M(D,ue,Q),$N(D,a)&&f.state.next({...r,name:D}),f.state.next({name:o.mount?D:void 0,values:$t(i)})},q=async D=>{o.mount=!0;const V=D.target;let Q=V.name,ve=!0;const pe=ye(n,Q),ue=Ue=>{ve=Number.isNaN(Ue)||Lc(Ue)&&isNaN(Ue.getTime())||da(Ue,ye(i,Q,Ue))},_e=Od(t.mode),Ze=Od(t.reValidateMode);if(pe){let Ue,at;const Mr=V.type?BI(pe._f):ZU(D),ut=D.type===ib.BLUR||D.type===ib.FOCUS_OUT,ns=!dhe(pe._f)&&!t.resolver&&!ye(r.errors,Q)&&!pe._f.deps||phe(ut,ye(r.touchedFields,Q),r.isSubmitted,Ze,_e),Vs=$N(Q,a,ut);mt(i,Q,Mr),ut?(!V||!V.readOnly)&&(pe._f.onBlur&&pe._f.onBlur(D),l&&l(0)):pe._f.onChange&&pe._f.onChange(D);const Si=k(Q,Mr,ut),ss=!qn(Si)||Vs;if(!ut&&f.state.next({name:Q,type:D.type,values:$t(i)}),ns)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?ut&&m():ut||m()),ss&&f.state.next({name:Q,...Vs?{}:Si});if(!ut&&Vs&&f.state.next({...r}),t.resolver){const{errors:js}=await S([Q]);if(ue(Mr),ve){const Ei=VI(r.errors,n,Q),$r=VI(js,n,Ei.name||Q);Ue=$r.error,Q=$r.name,at=qn(js)}}else b([Q],!0),Ue=(await FN(pe,a.disabled,i,p,t.shouldUseNativeValidation))[Q],b([Q]),ue(Mr),ve&&(Ue?at=!1:(u.isValid||h.isValid)&&(at=await T(n,!0)));ve&&(pe._f.deps&&L(pe._f.deps),N(Q,at,Ue,Si))}},Y=(D,V)=>{if(ye(r.errors,V)&&D.focus)return D.focus(),1},L=async(D,V={})=>{let Q,ve;const pe=ms(D);if(t.resolver){const ue=await E(Bt(D)?D:pe);Q=qn(ue),ve=D?!pe.some(_e=>ye(ue,_e)):Q}else D?(ve=(await Promise.all(pe.map(async ue=>{const _e=ye(n,ue);return await T(_e&&_e._f?{[ue]:_e}:_e)}))).every(Boolean),!(!ve&&!r.isValid)&&m()):ve=Q=await T(n);return f.state.next({...!ko(D)||(u.isValid||h.isValid)&&Q!==r.isValid?{}:{name:D},...t.resolver||!D?{isValid:Q}:{},errors:r.errors}),V.shouldFocus&&!ve&&Hd(n,Y,D?pe:a.mount),ve},K=D=>{const V={...o.mount?i:s};return Bt(D)?V:ko(D)?ye(V,D):D.map(Q=>ye(V,Q))},G=(D,V)=>({invalid:!!ye((V||r).errors,D),isDirty:!!ye((V||r).dirtyFields,D),error:ye((V||r).errors,D),isValidating:!!ye(r.validatingFields,D),isTouched:!!ye((V||r).touchedFields,D)}),re=D=>{D&&ms(D).forEach(V=>gr(r.errors,V)),f.state.next({errors:D?r.errors:{}})},H=(D,V,Q)=>{const ve=(ye(n,D,{_f:{}})._f||{}).ref,pe=ye(r.errors,D)||{},{ref:ue,message:_e,type:Ze,...Ue}=pe;mt(r.errors,D,{...Ue,...V,ref:ve}),f.state.next({name:D,errors:r.errors,isValid:!1}),Q&&Q.shouldFocus&&ve&&ve.focus&&ve.focus()},ne=(D,V)=>Vi(D)?f.state.subscribe({next:Q=>"values"in Q&&D(R(void 0,V),Q)}):R(D,V,!0),J=D=>f.state.subscribe({next:V=>{fhe(D.name,V.name,D.exact)&&hhe(V,D.formState||u,ct,D.reRenderRoot)&&D.callback({values:{...i},...r,...V,defaultValues:s})}}).unsubscribe,Ie=D=>(o.mount=!0,h={...h,...D.formState},J({...D,formState:h})),me=(D,V={})=>{for(const Q of D?ms(D):a.mount)a.mount.delete(Q),a.array.delete(Q),V.keepValue||(gr(n,Q),gr(i,Q)),!V.keepError&&gr(r.errors,Q),!V.keepDirty&&gr(r.dirtyFields,Q),!V.keepTouched&&gr(r.touchedFields,Q),!V.keepIsValidating&&gr(r.validatingFields,Q),!t.shouldUnregister&&!V.keepDefaultValue&&gr(s,Q);f.state.next({values:$t(i)}),f.state.next({...r,...V.keepDirty?{isDirty:O()}:{}}),!V.keepIsValid&&m()},ge=({disabled:D,name:V})=>{(Ts(D)&&o.mount||D||a.disabled.has(V))&&(D?a.disabled.add(V):a.disabled.delete(V))},U=(D,V={})=>{let Q=ye(n,D);const ve=Ts(V.disabled)||Ts(t.disabled);return mt(n,D,{...Q||{},_f:{...Q&&Q._f?Q._f:{ref:{name:D}},name:D,mount:!0,...V}}),a.mount.add(D),Q?ge({disabled:Ts(V.disabled)?V.disabled:t.disabled,name:D}):j(D,!0,V.value),{...ve?{disabled:V.disabled||t.disabled}:{},...t.progressive?{required:!!V.required,min:Gf(V.min),max:Gf(V.max),minLength:Gf(V.minLength),maxLength:Gf(V.maxLength),pattern:Gf(V.pattern)}:{},name:D,onChange:q,onBlur:q,ref:pe=>{if(pe){U(D,V),Q=ye(n,D);const ue=Bt(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,_e=ohe(ue),Ze=Q._f.refs||[];if(_e?Ze.find(Ue=>Ue===ue):ue===Q._f.ref)return;mt(n,D,{_f:{...Q._f,..._e?{refs:[...Ze.filter(ij),ue,...Array.isArray(ye(s,D))?[{}]:[]],ref:{type:ue.type,name:D}}:{ref:ue}}}),j(D,!1,void 0,ue)}else Q=ye(n,D,{}),Q._f&&(Q._f.mount=!1),(t.shouldUnregister||V.shouldUnregister)&&!(GU(a.array,D)&&o.action)&&a.unMount.add(D)}}},Z=()=>t.shouldFocusError&&Hd(n,Y,a.mount),le=D=>{Ts(D)&&(f.state.next({disabled:D}),Hd(n,(V,Q)=>{const ve=ye(n,Q);ve&&(V.disabled=ve._f.disabled||D,Array.isArray(ve._f.refs)&&ve._f.refs.forEach(pe=>{pe.disabled=ve._f.disabled||D}))},0,!1))},B=(D,V)=>async Q=>{let ve;Q&&(Q.preventDefault&&Q.preventDefault(),Q.persist&&Q.persist());let pe=$t(i);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:ue,values:_e}=await S();r.errors=ue,pe=$t(_e)}else await T(n);if(a.disabled.size)for(const ue of a.disabled)gr(pe,ue);if(gr(r.errors,"root"),qn(r.errors)){f.state.next({errors:{}});try{await D(pe,Q)}catch(ue){ve=ue}}else V&&await V({...r.errors},Q),Z(),setTimeout(Z);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:qn(r.errors)&&!ve,submitCount:r.submitCount+1,errors:r.errors}),ve)throw ve},we=(D,V={})=>{ye(n,D)&&(Bt(V.defaultValue)?W(D,$t(ye(s,D))):(W(D,V.defaultValue),mt(s,D,$t(V.defaultValue))),V.keepTouched||gr(r.touchedFields,D),V.keepDirty||(gr(r.dirtyFields,D),r.isDirty=V.defaultValue?O(D,$t(ye(s,D))):O()),V.keepError||(gr(r.errors,D),u.isValid&&m()),f.state.next({...r}))},Ee=(D,V={})=>{const Q=D?$t(D):s,ve=$t(Q),pe=qn(D),ue=pe?s:ve;if(V.keepDefaultValues||(s=Q),!V.keepValues){if(V.keepDirtyValues){const _e=new Set([...a.mount,...Object.keys(Zf(s,i))]);for(const Ze of Array.from(_e))ye(r.dirtyFields,Ze)?mt(ue,Ze,ye(i,Ze)):W(Ze,ye(ue,Ze))}else{if(gC&&Bt(D))for(const _e of a.mount){const Ze=ye(n,_e);if(Ze&&Ze._f){const Ue=Array.isArray(Ze._f.refs)?Ze._f.refs[0]:Ze._f.ref;if(ob(Ue)){const at=Ue.closest("form");if(at){at.reset();break}}}}if(V.keepFieldsRef)for(const _e of a.mount)W(_e,ye(ue,_e));else n={}}i=t.shouldUnregister?V.keepDefaultValues?$t(s):{}:$t(ue),f.array.next({values:{...ue}}),f.state.next({values:{...ue}})}a={mount:V.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!V.keepIsValid||!!V.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:V.keepSubmitCount?r.submitCount:0,isDirty:pe?!1:V.keepDirty?r.isDirty:!!(V.keepDefaultValues&&!da(D,s)),isSubmitted:V.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:pe?{}:V.keepDirtyValues?V.keepDefaultValues&&i?Zf(s,i):r.dirtyFields:V.keepDefaultValues&&D?Zf(s,D):V.keepDirty?r.dirtyFields:{},touchedFields:V.keepTouched?r.touchedFields:{},errors:V.keepErrors?r.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},He=(D,V)=>Ee(Vi(D)?D(i):D,V),Je=(D,V={})=>{const Q=ye(n,D),ve=Q&&Q._f;if(ve){const pe=ve.refs?ve.refs[0]:ve.ref;pe.focus&&(pe.focus(),V.shouldSelect&&Vi(pe.select)&&pe.select())}},ct=D=>{r={...r,...D}},Et={control:{register:U,unregister:me,getFieldState:G,handleSubmit:B,setError:H,_subscribe:J,_runSchema:S,_focusError:Z,_getWatch:R,_getDirty:O,_setValid:m,_setFieldArray:x,_setDisabledField:ge,_setErrors:_,_getFieldArray:I,_reset:Ee,_resetDefaultValues:()=>Vi(t.defaultValues)&&t.defaultValues().then(D=>{He(D,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:le,_subjects:f,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(D){o=D},get _defaultValues(){return s},get _names(){return a},set _names(D){a=D},get _formState(){return r},get _options(){return t},set _options(D){t={...t,...D}}},subscribe:Ie,trigger:L,register:U,handleSubmit:B,watch:ne,setValue:W,getValues:K,reset:He,resetField:we,clearErrors:re,unregister:me,setError:H,setFocus:Je,getFieldState:G};return{...Et,formControl:Et}}var rl=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},oj=(e,t,r={})=>r.shouldFocus||Bt(r.shouldFocus)?r.focusName||`${e}.${Bt(r.focusIndex)?t:r.focusIndex}.`:"",aj=(e,t)=>[...e,...ms(t)],lj=e=>Array.isArray(e)?e.map(()=>{}):void 0;function cj(e,t,r){return[...e.slice(0,t),...ms(r),...e.slice(t)]}var uj=(e,t,r)=>Array.isArray(e)?(Bt(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],dj=(e,t)=>[...ms(t),...ms(e)];function vhe(e,t){let r=0;const n=[...e];for(const s of t)n.splice(s-r,1),r++;return cx(n).length?n:[]}var hj=(e,t)=>Bt(t)?[]:vhe(e,ms(t).sort((r,n)=>r-n)),fj=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},KI=(e,t,r)=>(e[t]=r,e);function bhe(e){const t=ux(),{control:r=t.control,name:n,keyName:s="id",shouldUnregister:i,rules:o}=e,[a,l]=ee.useState(r._getFieldArray(n)),c=ee.useRef(r._getFieldArray(n).map(rl)),u=ee.useRef(a),h=ee.useRef(!1);u.current=a,r._names.array.add(n),ee.useMemo(()=>o&&r.register(n,o),[r,o,n]),dx(()=>r._subjects.array.subscribe({next:({values:k,name:N})=>{if(N===n||!N){const S=ye(k,n);Array.isArray(S)&&(l(S),c.current=S.map(rl))}}}).unsubscribe,[r,n]);const f=ee.useCallback(k=>{h.current=!0,r._setFieldArray(n,k)},[r,n]),p=(k,N)=>{const S=ms($t(k)),E=aj(r._getFieldArray(n),S);r._names.focus=oj(n,E.length-1,N),c.current=aj(c.current,S.map(rl)),f(E),l(E),r._setFieldArray(n,E,aj,{argA:lj(k)})},v=(k,N)=>{const S=ms($t(k)),E=dj(r._getFieldArray(n),S);r._names.focus=oj(n,0,N),c.current=dj(c.current,S.map(rl)),f(E),l(E),r._setFieldArray(n,E,dj,{argA:lj(k)})},m=k=>{const N=hj(r._getFieldArray(n),k);c.current=hj(c.current,k),f(N),l(N),!Array.isArray(ye(r._fields,n))&&mt(r._fields,n,void 0),r._setFieldArray(n,N,hj,{argA:k})},b=(k,N,S)=>{const E=ms($t(N)),T=cj(r._getFieldArray(n),k,E);r._names.focus=oj(n,k,S),c.current=cj(c.current,k,E.map(rl)),f(T),l(T),r._setFieldArray(n,T,cj,{argA:k,argB:lj(N)})},x=(k,N)=>{const S=r._getFieldArray(n);fj(S,k,N),fj(c.current,k,N),f(S),l(S),r._setFieldArray(n,S,fj,{argA:k,argB:N},!1)},w=(k,N)=>{const S=r._getFieldArray(n);uj(S,k,N),uj(c.current,k,N),f(S),l(S),r._setFieldArray(n,S,uj,{argA:k,argB:N},!1)},_=(k,N)=>{const S=$t(N),E=KI(r._getFieldArray(n),k,S);c.current=[...E].map((T,P)=>!T||P===k?rl():c.current[P]),f(E),l([...E]),r._setFieldArray(n,E,KI,{argA:k,argB:S},!0,!1)},j=k=>{const N=ms($t(k));c.current=N.map(rl),f([...N]),l([...N]),r._setFieldArray(n,[...N],S=>S,{},!0,!1)};return ee.useEffect(()=>{if(r._state.action=!1,$N(n,r._names)&&r._subjects.state.next({...r._formState}),h.current&&(!Od(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Od(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(k=>{const N=ye(k.errors,n),S=ye(r._formState.errors,n);(S?!N&&S.type||N&&(S.type!==N.type||S.message!==N.message):N&&N.type)&&(N?mt(r._formState.errors,n,N):gr(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const k=ye(r._fields,n);k&&k._f&&!(Od(r._options.reValidateMode).isOnSubmit&&Od(r._options.mode).isOnSubmit)&&FN(k,r._names.disabled,r._formValues,r._options.criteriaMode===ai.all,r._options.shouldUseNativeValidation,!0).then(N=>!qn(N)&&r._subjects.state.next({errors:iB(r._formState.errors,N,n)}))}r._subjects.state.next({name:n,values:$t(r._formValues)}),r._names.focus&&Hd(r._fields,(k,N)=>{if(r._names.focus&&N.startsWith(r._names.focus)&&k.focus)return k.focus(),1}),r._names.focus="",r._setValid(),h.current=!1},[a,n,r]),ee.useEffect(()=>(!ye(r._formValues,n)&&r._setFieldArray(n),()=>{const k=(N,S)=>{const E=ye(r._fields,N);E&&E._f&&(E._f.mount=S)};r._options.shouldUnregister||i?r.unregister(n):k(n,!1)}),[n,r,s,i]),{swap:ee.useCallback(x,[f,n,r]),move:ee.useCallback(w,[f,n,r]),prepend:ee.useCallback(v,[f,n,r]),append:ee.useCallback(p,[f,n,r]),remove:ee.useCallback(m,[f,n,r]),insert:ee.useCallback(b,[f,n,r]),update:ee.useCallback(_,[f,n,r]),replace:ee.useCallback(j,[f,n,r]),fields:ee.useMemo(()=>a.map((k,N)=>({...k,[s]:c.current[N]||rl()})),[a,s])}}function wC(e={}){const t=ee.useRef(void 0),r=ee.useRef(void 0),[n,s]=ee.useState({isDirty:!1,isValidating:!1,isLoading:Vi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Vi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Vi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...a}=yhe(e);t.current={...a,formState:n}}const i=t.current.control;return i._options=e,dx(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),ee.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),ee.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),ee.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),ee.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),ee.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),ee.useEffect(()=>{e.values&&!da(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),ee.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=JU(n,i),t.current}const HI=(e,t,r)=>{if(e&&"reportValidity"in e){const n=ye(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},zN=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?HI(n.ref,r,e):n&&n.refs&&n.refs.forEach(s=>HI(s,r,e))}},ZI=(e,t)=>{t.shouldUseNativeValidation&&zN(e,t);const r={};for(const n in e){const s=ye(t.fields,n),i=Object.assign(e[n]||{},{ref:s&&s.ref});if(xhe(t.names||Object.keys(e),n)){const o=Object.assign({},ye(r,n));mt(o,"root",i),mt(r,n,o)}else mt(r,n,i)}return r},xhe=(e,t)=>{const r=GI(t);return e.some(n=>GI(n).match(`^${r}\\.\\d+`))};function GI(e){return e.replace(/\]|\[/g,"")}function ae(e,t,r){function n(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in o.prototype)u in a||Object.defineProperty(a,u,{value:o.prototype[u].bind(a)});a._zod.constr=o,a._zod.def=l}const s=(r==null?void 0:r.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:e});function o(a){var l;const c=r!=null&&r.Parent?new i:this;n(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var l,c;return r!=null&&r.Parent&&a instanceof r.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class Zd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class oB extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const aB={};function pu(e){return aB}function whe(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,n])=>t.indexOf(+r)===-1).map(([r,n])=>n)}function UN(e,t){return typeof t=="bigint"?t.toString():t}function _C(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function jC(e){return e==null}function kC(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function _he(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let s=(n.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(n)){const l=n.match(/\d?e-(\d?)/);l!=null&&l[1]&&(s=Number.parseInt(l[1]))}const i=r>s?r:s,o=Number.parseInt(e.toFixed(i).replace(".","")),a=Number.parseInt(t.toFixed(i).replace(".",""));return o%a/10**i}const YI=Symbol("evaluating");function It(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==YI)return n===void 0&&(n=YI,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function jhe(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function ec(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function cf(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function JI(e){return JSON.stringify(e)}const lB="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function cb(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const khe=_C(()=>{var e;if(typeof navigator<"u"&&(e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function fm(e){if(cb(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(cb(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function cB(e){return fm(e)?{...e}:e}const Nhe=new Set(["string","number","symbol"]);function hx(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function tc(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function Fe(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function She(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Ehe={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Che(e,t){const r=e._zod.def,n=cf(e._zod.def,{get shape(){const s={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(s[i]=r.shape[i])}return ec(this,"shape",s),s},checks:[]});return tc(e,n)}function The(e,t){const r=e._zod.def,n=cf(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete s[i]}return ec(this,"shape",s),s},checks:[]});return tc(e,n)}function Ahe(e,t){if(!fm(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const n=cf(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return ec(this,"shape",s),s},checks:[]});return tc(e,n)}function Ohe(e,t){if(!fm(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return ec(this,"shape",n),n},checks:e._zod.def.checks};return tc(e,r)}function Phe(e,t){const r=cf(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return ec(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return tc(e,r)}function Rhe(e,t,r){const n=cf(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)i[o]=e?new e({type:"optional",innerType:s[o]}):s[o];return ec(this,"shape",i),i},checks:[]});return tc(t,n)}function Ihe(e,t,r){const n=cf(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:s[o]}))}else for(const o in s)i[o]=new e({type:"nonoptional",innerType:s[o]});return ec(this,"shape",i),i},checks:[]});return tc(t,n)}function Pd(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function uB(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Ty(e){return typeof e=="string"?e:e==null?void 0:e.message}function mu(e,t,r){var n,s,i,o,a,l;const c={...e,path:e.path??[]};if(!e.message){const u=Ty((i=(s=(n=e.inst)==null?void 0:n._zod.def)==null?void 0:s.error)==null?void 0:i.call(s,e))??Ty((o=t==null?void 0:t.error)==null?void 0:o.call(t,e))??Ty((a=r.customError)==null?void 0:a.call(r,e))??Ty((l=r.localeError)==null?void 0:l.call(r,e))??"Invalid input";c.message=u}return delete c.inst,delete c.continue,t!=null&&t.reportInput||delete c.input,c}function NC(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function pm(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const dB=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,UN,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},SC=ae("$ZodError",dB),fx=ae("$ZodError",dB,{Parent:Error});function Dhe(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function Lhe(e,t){const r=t||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(e),n}const px=e=>(t,r,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new Zd;if(o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>mu(l,i,pu())));throw lB(a,s==null?void 0:s.callee),a}return o.value},Mhe=px(fx),mx=e=>async(t,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>mu(l,i,pu())));throw lB(a,s==null?void 0:s.callee),a}return o.value},$he=mx(fx),gx=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new Zd;return i.issues.length?{success:!1,error:new(e??SC)(i.issues.map(o=>mu(o,s,pu())))}:{success:!0,data:i.value}},Fhe=gx(fx),yx=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>mu(o,s,pu())))}:{success:!0,data:i.value}},zhe=yx(fx),Uhe=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return px(e)(t,r,s)},Bhe=e=>(t,r,n)=>px(e)(t,r,n),qhe=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return mx(e)(t,r,s)},Vhe=e=>async(t,r,n)=>mx(e)(t,r,n),Whe=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return gx(e)(t,r,s)},Khe=e=>(t,r,n)=>gx(e)(t,r,n),Hhe=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return yx(e)(t,r,s)},Zhe=e=>async(t,r,n)=>yx(e)(t,r,n),Ghe=/^[cC][^\s-]{8,}$/,Yhe=/^[0-9a-z]+$/,Jhe=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Xhe=/^[0-9a-vA-V]{20}$/,Qhe=/^[A-Za-z0-9]{27}$/,efe=/^[a-zA-Z0-9_-]{21}$/,tfe=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,rfe=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,XI=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,nfe=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,sfe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function ife(){return new RegExp(sfe,"u")}const ofe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,afe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,lfe=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cfe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ufe=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,hB=/^[A-Za-z0-9_-]*$/,dfe=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,hfe=/^\+(?:[0-9]){6,14}[0-9]$/,fB="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ffe=new RegExp(`^${fB}$`);function pB(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function pfe(e){return new RegExp(`^${pB(e)}$`)}function mfe(e){const t=pB({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${fB}T(?:${n})$`)}const gfe=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},yfe=/^\d+$/,vfe=/^-?\d+(?:\.\d+)?/i,bfe=/true|false/i,xfe=/^[^A-Z]*$/,wfe=/^[^a-z]*$/,ws=ae("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),mB={number:"number",bigint:"bigint",object:"date"},gB=ae("$ZodCheckLessThan",(e,t)=>{ws.init(e,t);const r=mB[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,i=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),yB=ae("$ZodCheckGreaterThan",(e,t)=>{ws.init(e,t);const r=mB[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,i=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),_fe=ae("$ZodCheckMultipleOf",(e,t)=>{ws.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):_he(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),jfe=ae("$ZodCheckNumberFormat",(e,t)=>{var r;ws.init(e,t),t.format=t.format||"float64";const n=(r=t.format)==null?void 0:r.includes("int"),s=n?"int":"number",[i,o]=Ehe[t.format];e._zod.onattach.push(a=>{const l=a._zod.bag;l.format=t.format,l.minimum=i,l.maximum=o,n&&(l.pattern=yfe)}),e._zod.check=a=>{const l=a.value;if(n){if(!Number.isInteger(l)){a.issues.push({expected:s,format:t.format,code:"invalid_type",continue:!1,input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?a.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):a.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}l<i&&a.issues.push({origin:"number",input:l,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),l>o&&a.issues.push({origin:"number",input:l,code:"too_big",maximum:o,inst:e})}}),kfe=ae("$ZodCheckMaxLength",(e,t)=>{var r;ws.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!jC(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const i=NC(s);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Nfe=ae("$ZodCheckMinLength",(e,t)=>{var r;ws.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!jC(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const i=NC(s);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Sfe=ae("$ZodCheckLengthEquals",(e,t)=>{var r;ws.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!jC(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,i=s.length;if(i===t.length)return;const o=NC(s),a=i>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),vx=ae("$ZodCheckStringFormat",(e,t)=>{var r,n;ws.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Efe=ae("$ZodCheckRegex",(e,t)=>{vx.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Cfe=ae("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=xfe),vx.init(e,t)}),Tfe=ae("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=wfe),vx.init(e,t)}),Afe=ae("$ZodCheckIncludes",(e,t)=>{ws.init(e,t);const r=hx(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),Ofe=ae("$ZodCheckStartsWith",(e,t)=>{ws.init(e,t);const r=new RegExp(`^${hx(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Pfe=ae("$ZodCheckEndsWith",(e,t)=>{ws.init(e,t);const r=new RegExp(`.*${hx(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Rfe=ae("$ZodCheckOverwrite",(e,t)=>{ws.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Ife{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),n=Math.min(...r.map(i=>i.length-i.trimStart().length)),s=r.map(i=>i.slice(n)).map(i=>" ".repeat(this.indent*2)+i);for(const i of s)this.content.push(i)}compile(){const t=Function,r=this==null?void 0:this.args,n=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...r,n.join(`
`))}}const Dfe={major:4,minor:1,patch:3},jr=ae("$ZodType",(e,t)=>{var r,n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Dfe;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const i of s)for(const o of i._zod.onattach)o(e);if(s.length===0)(n=e._zod).deferred??(n.deferred=[]),(r=e._zod.deferred)==null||r.push(()=>{e._zod.run=e._zod.parse});else{const i=(a,l,c)=>{let u=Pd(a),h;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(u)continue;const p=a.issues.length,v=f._zod.check(a);if(v instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Zd;if(h||v instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await v,a.issues.length!==p&&(u||(u=Pd(a,p)))});else{if(a.issues.length===p)continue;u||(u=Pd(a,p))}}return h?h.then(()=>a):a},o=(a,l,c)=>{if(Pd(a))return a.aborted=!0,a;const u=i(l,s,c);if(u instanceof Promise){if(c.async===!1)throw new Zd;return u.then(h=>e._zod.parse(h,c))}return e._zod.parse(u,c)};e._zod.run=(a,l)=>{if(l.skipChecks)return e._zod.parse(a,l);if(l.direction==="backward"){const u=e._zod.parse({value:a.value,issues:[]},{...l,skipChecks:!0});return u instanceof Promise?u.then(h=>o(h,a,l)):o(u,a,l)}const c=e._zod.parse(a,l);if(c instanceof Promise){if(l.async===!1)throw new Zd;return c.then(u=>i(u,s,l))}return i(c,s,l)}}e["~standard"]={validate:i=>{var o;try{const a=Fhe(e,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return zhe(e,i).then(a=>{var l;return a.success?{value:a.data}:{issues:(l=a.error)==null?void 0:l.issues}})}},vendor:"zod",version:1}}),EC=ae("$ZodString",(e,t)=>{var r;jr.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??gfe(e._zod.bag),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Jt=ae("$ZodStringFormat",(e,t)=>{vx.init(e,t),EC.init(e,t)}),Lfe=ae("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=rfe),Jt.init(e,t)}),Mfe=ae("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=XI(r))}else t.pattern??(t.pattern=XI());Jt.init(e,t)}),$fe=ae("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=nfe),Jt.init(e,t)}),Ffe=ae("$ZodURL",(e,t)=>{Jt.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:dfe.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),zfe=ae("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=ife()),Jt.init(e,t)}),Ufe=ae("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=efe),Jt.init(e,t)}),Bfe=ae("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Ghe),Jt.init(e,t)}),qfe=ae("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Yhe),Jt.init(e,t)}),Vfe=ae("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Jhe),Jt.init(e,t)}),Wfe=ae("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Xhe),Jt.init(e,t)}),Kfe=ae("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Qhe),Jt.init(e,t)}),Hfe=ae("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=mfe(t)),Jt.init(e,t)}),Zfe=ae("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=ffe),Jt.init(e,t)}),Gfe=ae("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=pfe(t)),Jt.init(e,t)}),Yfe=ae("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=tfe),Jt.init(e,t)}),Jfe=ae("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=ofe),Jt.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Xfe=ae("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=afe),Jt.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Qfe=ae("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=lfe),Jt.init(e,t)}),epe=ae("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=cfe),Jt.init(e,t),e._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function vB(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const tpe=ae("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=ufe),Jt.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{vB(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function rpe(e){if(!hB.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return vB(r)}const npe=ae("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=hB),Jt.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{rpe(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),spe=ae("$ZodE164",(e,t)=>{t.pattern??(t.pattern=hfe),Jt.init(e,t)});function ipe(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const ope=ae("$ZodJWT",(e,t)=>{Jt.init(e,t),e._zod.check=r=>{ipe(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),bB=ae("$ZodNumber",(e,t)=>{jr.init(e,t),e._zod.pattern=e._zod.bag.pattern??vfe,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...i?{received:i}:{}}),r}}),ape=ae("$ZodNumber",(e,t)=>{jfe.init(e,t),bB.init(e,t)}),lpe=ae("$ZodBoolean",(e,t)=>{jr.init(e,t),e._zod.pattern=bfe,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),cpe=ae("$ZodUnknown",(e,t)=>{jr.init(e,t),e._zod.parse=r=>r}),upe=ae("$ZodNever",(e,t)=>{jr.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function QI(e,t,r){e.issues.length&&t.issues.push(...uB(r,e.issues)),t.value[r]=e.value}const dpe=ae("$ZodArray",(e,t)=>{jr.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=t.element._zod.run({value:a,issues:[]},n);l instanceof Promise?i.push(l.then(c=>QI(c,r,o))):QI(l,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function ub(e,t,r,n){e.issues.length&&t.issues.push(...uB(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function xB(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape[n]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const r=She(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function wB(e,t,r,n,s,i){const o=[],a=s.keySet,l=s.catchall._zod,c=l.def.type;for(const u of Object.keys(t)){if(a.has(u))continue;if(c==="never"){o.push(u);continue}const h=l.run({value:t[u],issues:[]},n);h instanceof Promise?e.push(h.then(f=>ub(f,r,u,t))):ub(h,r,u,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const hpe=ae("$ZodObject",(e,t)=>{jr.init(e,t);const r=_C(()=>xB(t));It(e._zod,"propValues",()=>{const o=t.shape,a={};for(const l in o){const c=o[l]._zod;if(c.values){a[l]??(a[l]=new Set);for(const u of c.values)a[l].add(u)}}return a});const n=cb,s=t.catchall;let i;e._zod.parse=(o,a)=>{i??(i=r.value);const l=o.value;if(!n(l))return o.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),o;o.value={};const c=[],u=i.shape;for(const h of i.keys){const f=u[h]._zod.run({value:l[h],issues:[]},a);f instanceof Promise?c.push(f.then(p=>ub(p,o,h,l))):ub(f,o,h,l)}return s?wB(c,l,o,a,r.value,e):c.length?Promise.all(c).then(()=>o):o}}),fpe=ae("$ZodObjectJIT",(e,t)=>{hpe.init(e,t);const r=e._zod.parse,n=_C(()=>xB(t)),s=h=>{const f=new Ife(["shape","payload","ctx"]),p=n.value,v=w=>{const _=JI(w);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};f.write("const input = payload.value;");const m=Object.create(null);let b=0;for(const w of p.keys)m[w]=`key_${b++}`;f.write("const newResult = {}");for(const w of p.keys){const _=m[w],j=JI(w);f.write(`const ${_} = ${v(w)};`),f.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${j}, ...iss.path] : [${j}]
          })));
        }
        
        if (${_}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${_}.value;
        }
      `)}f.write("payload.value = newResult;"),f.write("return payload;");const x=f.compile();return(w,_)=>x(h,w,_)};let i;const o=cb,a=!aB.jitless,l=a&&khe.value,c=t.catchall;let u;e._zod.parse=(h,f)=>{u??(u=n.value);const p=h.value;return o(p)?a&&l&&(f==null?void 0:f.async)===!1&&f.jitless!==!0?(i||(i=s(t.shape)),h=i(h,f),c?wB([],p,h,f,u,e):h):r(h,f):(h.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),h)}});function e4(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const s=e.filter(i=>!Pd(i));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>mu(o,n,pu())))}),t)}const ppe=ae("$ZodUnion",(e,t)=>{jr.init(e,t),It(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),It(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),It(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),It(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>kC(i.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const l of t.options){const c=l._zod.run({value:s.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>e4(l,s,e,i)):e4(a,s,e,i)}}),mpe=ae("$ZodIntersection",(e,t)=>{jr.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,i=t.left._zod.run({value:s,issues:[]},n),o=t.right._zod.run({value:s,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([a,l])=>t4(r,a,l)):t4(r,i,o)}});function BN(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(fm(e)&&fm(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),s={...e,...t};for(const i of n){const o=BN(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],i=t[n],o=BN(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function t4(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Pd(e))return e;const n=BN(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const gpe=ae("$ZodEnum",(e,t)=>{jr.init(e,t);const r=whe(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>Nhe.has(typeof s)).map(s=>typeof s=="string"?hx(s):s.toString()).join("|")})$`),e._zod.parse=(s,i)=>{const o=s.value;return n.has(o)||s.issues.push({code:"invalid_value",values:r,input:o,inst:e}),s}}),ype=ae("$ZodTransform",(e,t)=>{jr.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new oB(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(r.value=i,r));if(s instanceof Promise)throw new Zd;return r.value=s,r}});function r4(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const vpe=ae("$ZodOptional",(e,t)=>{jr.init(e,t),e._zod.optin="optional",e._zod.optout="optional",It(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),It(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${kC(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>r4(i,r.value)):r4(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),bpe=ae("$ZodNullable",(e,t)=>{jr.init(e,t),It(e._zod,"optin",()=>t.innerType._zod.optin),It(e._zod,"optout",()=>t.innerType._zod.optout),It(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${kC(r.source)}|null)$`):void 0}),It(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),xpe=ae("$ZodDefault",(e,t)=>{jr.init(e,t),e._zod.optin="optional",It(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>n4(i,t)):n4(s,t)}});function n4(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const wpe=ae("$ZodPrefault",(e,t)=>{jr.init(e,t),e._zod.optin="optional",It(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),_pe=ae("$ZodNonOptional",(e,t)=>{jr.init(e,t),It(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>s4(i,e)):s4(s,e)}});function s4(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const jpe=ae("$ZodCatch",(e,t)=>{jr.init(e,t),It(e._zod,"optin",()=>t.innerType._zod.optin),It(e._zod,"optout",()=>t.innerType._zod.optout),It(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>mu(o,n,pu()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(i=>mu(i,n,pu()))},input:r.value}),r.issues=[]),r)}}),kpe=ae("$ZodPipe",(e,t)=>{jr.init(e,t),It(e._zod,"values",()=>t.in._zod.values),It(e._zod,"optin",()=>t.in._zod.optin),It(e._zod,"optout",()=>t.out._zod.optout),It(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=t.out._zod.run(r,n);return i instanceof Promise?i.then(o=>Ay(o,t.in,n)):Ay(i,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(i=>Ay(i,t.out,n)):Ay(s,t.out,n)}});function Ay(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Npe=ae("$ZodReadonly",(e,t)=>{jr.init(e,t),It(e._zod,"propValues",()=>t.innerType._zod.propValues),It(e._zod,"values",()=>t.innerType._zod.values),It(e._zod,"optin",()=>t.innerType._zod.optin),It(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i4):i4(s)}});function i4(e){return e.value=Object.freeze(e.value),e}const Spe=ae("$ZodCustom",(e,t)=>{ws.init(e,t),jr.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(i=>o4(i,r,n,e));o4(s,r,n,e)}});function o4(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(pm(s))}}class Epe{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Cpe(){return new Epe}const Oy=Cpe();function Tpe(e,t){return new e({type:"string",...Fe(t)})}function Ape(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Fe(t)})}function a4(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Fe(t)})}function Ope(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Fe(t)})}function Ppe(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Fe(t)})}function Rpe(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Fe(t)})}function Ipe(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Fe(t)})}function Dpe(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Fe(t)})}function Lpe(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Fe(t)})}function Mpe(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Fe(t)})}function $pe(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Fe(t)})}function Fpe(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Fe(t)})}function zpe(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Fe(t)})}function Upe(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Fe(t)})}function Bpe(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Fe(t)})}function qpe(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Fe(t)})}function Vpe(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Fe(t)})}function Wpe(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Fe(t)})}function Kpe(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Fe(t)})}function Hpe(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Fe(t)})}function Zpe(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Fe(t)})}function Gpe(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Fe(t)})}function Ype(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Fe(t)})}function Jpe(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Fe(t)})}function Xpe(e,t){return new e({type:"string",format:"date",check:"string_format",...Fe(t)})}function Qpe(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Fe(t)})}function eme(e,t){return new e({type:"string",format:"duration",check:"string_format",...Fe(t)})}function tme(e,t){return new e({type:"number",checks:[],...Fe(t)})}function rme(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Fe(t)})}function nme(e,t){return new e({type:"boolean",...Fe(t)})}function sme(e){return new e({type:"unknown"})}function ime(e,t){return new e({type:"never",...Fe(t)})}function l4(e,t){return new gB({check:"less_than",...Fe(t),value:e,inclusive:!1})}function pj(e,t){return new gB({check:"less_than",...Fe(t),value:e,inclusive:!0})}function c4(e,t){return new yB({check:"greater_than",...Fe(t),value:e,inclusive:!1})}function mj(e,t){return new yB({check:"greater_than",...Fe(t),value:e,inclusive:!0})}function u4(e,t){return new _fe({check:"multiple_of",...Fe(t),value:e})}function _B(e,t){return new kfe({check:"max_length",...Fe(t),maximum:e})}function db(e,t){return new Nfe({check:"min_length",...Fe(t),minimum:e})}function jB(e,t){return new Sfe({check:"length_equals",...Fe(t),length:e})}function ome(e,t){return new Efe({check:"string_format",format:"regex",...Fe(t),pattern:e})}function ame(e){return new Cfe({check:"string_format",format:"lowercase",...Fe(e)})}function lme(e){return new Tfe({check:"string_format",format:"uppercase",...Fe(e)})}function cme(e,t){return new Afe({check:"string_format",format:"includes",...Fe(t),includes:e})}function ume(e,t){return new Ofe({check:"string_format",format:"starts_with",...Fe(t),prefix:e})}function dme(e,t){return new Pfe({check:"string_format",format:"ends_with",...Fe(t),suffix:e})}function pg(e){return new Rfe({check:"overwrite",tx:e})}function hme(e){return pg(t=>t.normalize(e))}function fme(){return pg(e=>e.trim())}function pme(){return pg(e=>e.toLowerCase())}function mme(){return pg(e=>e.toUpperCase())}function gme(e,t,r){return new e({type:"array",element:t,...Fe(r)})}function yme(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Fe(r)})}function vme(e){const t=bme(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(pm(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(pm(s))}},e(r.value,r)));return t}function bme(e,t){const r=new ws({check:"custom",...Fe(t)});return r._zod.check=e,r}function d4(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}function xme(e,t){for(var r={};e.length;){var n=e[0],s=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var a=n.unionErrors[0].errors[0];r[o]={message:a.message,type:a.code}}else r[o]={message:i,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var l=r[o].types,c=l&&l[n.code];r[o]=vC(o,t,r,s,c?[].concat(c,n.message):n.message)}e.shift()}return r}function wme(e,t){for(var r={};e.length;){var n=e[0],s=n.code,i=n.message,o=n.path.join(".");if(!r[o])if(n.code==="invalid_union"&&n.errors.length>0){var a=n.errors[0][0];r[o]={message:a.message,type:a.code}}else r[o]={message:i,type:s};if(n.code==="invalid_union"&&n.errors.forEach(function(u){return u.forEach(function(h){return e.push(h)})}),t){var l=r[o].types,c=l&&l[n.code];r[o]=vC(o,t,r,s,c?[].concat(c,n.message):n.message)}e.shift()}return r}function CC(e,t,r){if(r===void 0&&(r={}),function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def}(e))return function(n,s,i){try{return Promise.resolve(d4(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(o){return i.shouldUseNativeValidation&&zN({},i),{errors:{},values:r.raw?Object.assign({},n):o}})},function(o){if(function(a){return Array.isArray(a==null?void 0:a.issues)}(o))return{values:{},errors:ZI(xme(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}};if(function(n){return"_zod"in n&&typeof n._zod=="object"}(e))return function(n,s,i){try{return Promise.resolve(d4(function(){return Promise.resolve((r.mode==="sync"?Mhe:$he)(e,n,t)).then(function(o){return i.shouldUseNativeValidation&&zN({},i),{errors:{},values:r.raw?Object.assign({},n):o}})},function(o){if(function(a){return a instanceof SC}(o))return{values:{},errors:ZI(wme(o.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}};throw new Error("Invalid input: not a Zod schema")}const _me=ae("ZodISODateTime",(e,t)=>{Hfe.init(e,t),or.init(e,t)});function jme(e){return Jpe(_me,e)}const kme=ae("ZodISODate",(e,t)=>{Zfe.init(e,t),or.init(e,t)});function Nme(e){return Xpe(kme,e)}const Sme=ae("ZodISOTime",(e,t)=>{Gfe.init(e,t),or.init(e,t)});function Eme(e){return Qpe(Sme,e)}const Cme=ae("ZodISODuration",(e,t)=>{Yfe.init(e,t),or.init(e,t)});function Tme(e){return eme(Cme,e)}const Ame=(e,t)=>{SC.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Lhe(e,r)},flatten:{value:r=>Dhe(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,UN,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,UN,2)}},isEmpty:{get(){return e.issues.length===0}}})},_i=ae("ZodError",Ame,{Parent:Error}),Ome=px(_i),Pme=mx(_i),Rme=gx(_i),Ime=yx(_i),Dme=Uhe(_i),Lme=Bhe(_i),Mme=qhe(_i),$me=Vhe(_i),Fme=Whe(_i),zme=Khe(_i),Ume=Hhe(_i),Bme=Zhe(_i),Lr=ae("ZodType",(e,t)=>(jr.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>tc(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>Ome(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>Rme(e,r,n),e.parseAsync=async(r,n)=>Pme(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>Ime(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>Dme(e,r,n),e.decode=(r,n)=>Lme(e,r,n),e.encodeAsync=async(r,n)=>Mme(e,r,n),e.decodeAsync=async(r,n)=>$me(e,r,n),e.safeEncode=(r,n)=>Fme(e,r,n),e.safeDecode=(r,n)=>zme(e,r,n),e.safeEncodeAsync=async(r,n)=>Ume(e,r,n),e.safeDecodeAsync=async(r,n)=>Bme(e,r,n),e.refine=(r,n)=>e.check(Pge(r,n)),e.superRefine=r=>e.check(Rge(r)),e.overwrite=r=>e.check(pg(r)),e.optional=()=>m4(e),e.nullable=()=>g4(e),e.nullish=()=>m4(g4(e)),e.nonoptional=r=>Nge(e,r),e.array=()=>bx(e),e.or=r=>mge([e,r]),e.and=r=>yge(e,r),e.transform=r=>y4(e,bge(r)),e.default=r=>_ge(e,r),e.prefault=r=>kge(e,r),e.catch=r=>Ege(e,r),e.pipe=r=>y4(e,r),e.readonly=()=>Age(e),e.describe=r=>{const n=e.clone();return Oy.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=Oy.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Oy.get(e);const n=e.clone();return Oy.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),kB=ae("_ZodString",(e,t)=>{EC.init(e,t),Lr.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(ome(...n)),e.includes=(...n)=>e.check(cme(...n)),e.startsWith=(...n)=>e.check(ume(...n)),e.endsWith=(...n)=>e.check(dme(...n)),e.min=(...n)=>e.check(db(...n)),e.max=(...n)=>e.check(_B(...n)),e.length=(...n)=>e.check(jB(...n)),e.nonempty=(...n)=>e.check(db(1,...n)),e.lowercase=n=>e.check(ame(n)),e.uppercase=n=>e.check(lme(n)),e.trim=()=>e.check(fme()),e.normalize=(...n)=>e.check(hme(...n)),e.toLowerCase=()=>e.check(pme()),e.toUpperCase=()=>e.check(mme())}),qme=ae("ZodString",(e,t)=>{EC.init(e,t),kB.init(e,t),e.email=r=>e.check(Ape(Vme,r)),e.url=r=>e.check(Dpe(Wme,r)),e.jwt=r=>e.check(Ype(oge,r)),e.emoji=r=>e.check(Lpe(Kme,r)),e.guid=r=>e.check(a4(h4,r)),e.uuid=r=>e.check(Ope(Py,r)),e.uuidv4=r=>e.check(Ppe(Py,r)),e.uuidv6=r=>e.check(Rpe(Py,r)),e.uuidv7=r=>e.check(Ipe(Py,r)),e.nanoid=r=>e.check(Mpe(Hme,r)),e.guid=r=>e.check(a4(h4,r)),e.cuid=r=>e.check($pe(Zme,r)),e.cuid2=r=>e.check(Fpe(Gme,r)),e.ulid=r=>e.check(zpe(Yme,r)),e.base64=r=>e.check(Hpe(nge,r)),e.base64url=r=>e.check(Zpe(sge,r)),e.xid=r=>e.check(Upe(Jme,r)),e.ksuid=r=>e.check(Bpe(Xme,r)),e.ipv4=r=>e.check(qpe(Qme,r)),e.ipv6=r=>e.check(Vpe(ege,r)),e.cidrv4=r=>e.check(Wpe(tge,r)),e.cidrv6=r=>e.check(Kpe(rge,r)),e.e164=r=>e.check(Gpe(ige,r)),e.datetime=r=>e.check(jme(r)),e.date=r=>e.check(Nme(r)),e.time=r=>e.check(Eme(r)),e.duration=r=>e.check(Tme(r))});function jt(e){return Tpe(qme,e)}const or=ae("ZodStringFormat",(e,t)=>{Jt.init(e,t),kB.init(e,t)}),Vme=ae("ZodEmail",(e,t)=>{$fe.init(e,t),or.init(e,t)}),h4=ae("ZodGUID",(e,t)=>{Lfe.init(e,t),or.init(e,t)}),Py=ae("ZodUUID",(e,t)=>{Mfe.init(e,t),or.init(e,t)}),Wme=ae("ZodURL",(e,t)=>{Ffe.init(e,t),or.init(e,t)}),Kme=ae("ZodEmoji",(e,t)=>{zfe.init(e,t),or.init(e,t)}),Hme=ae("ZodNanoID",(e,t)=>{Ufe.init(e,t),or.init(e,t)}),Zme=ae("ZodCUID",(e,t)=>{Bfe.init(e,t),or.init(e,t)}),Gme=ae("ZodCUID2",(e,t)=>{qfe.init(e,t),or.init(e,t)}),Yme=ae("ZodULID",(e,t)=>{Vfe.init(e,t),or.init(e,t)}),Jme=ae("ZodXID",(e,t)=>{Wfe.init(e,t),or.init(e,t)}),Xme=ae("ZodKSUID",(e,t)=>{Kfe.init(e,t),or.init(e,t)}),Qme=ae("ZodIPv4",(e,t)=>{Jfe.init(e,t),or.init(e,t)}),ege=ae("ZodIPv6",(e,t)=>{Xfe.init(e,t),or.init(e,t)}),tge=ae("ZodCIDRv4",(e,t)=>{Qfe.init(e,t),or.init(e,t)}),rge=ae("ZodCIDRv6",(e,t)=>{epe.init(e,t),or.init(e,t)}),nge=ae("ZodBase64",(e,t)=>{tpe.init(e,t),or.init(e,t)}),sge=ae("ZodBase64URL",(e,t)=>{npe.init(e,t),or.init(e,t)}),ige=ae("ZodE164",(e,t)=>{spe.init(e,t),or.init(e,t)}),oge=ae("ZodJWT",(e,t)=>{ope.init(e,t),or.init(e,t)}),NB=ae("ZodNumber",(e,t)=>{bB.init(e,t),Lr.init(e,t),e.gt=(n,s)=>e.check(c4(n,s)),e.gte=(n,s)=>e.check(mj(n,s)),e.min=(n,s)=>e.check(mj(n,s)),e.lt=(n,s)=>e.check(l4(n,s)),e.lte=(n,s)=>e.check(pj(n,s)),e.max=(n,s)=>e.check(pj(n,s)),e.int=n=>e.check(f4(n)),e.safe=n=>e.check(f4(n)),e.positive=n=>e.check(c4(0,n)),e.nonnegative=n=>e.check(mj(0,n)),e.negative=n=>e.check(l4(0,n)),e.nonpositive=n=>e.check(pj(0,n)),e.multipleOf=(n,s)=>e.check(u4(n,s)),e.step=(n,s)=>e.check(u4(n,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function SB(e){return tme(NB,e)}const age=ae("ZodNumberFormat",(e,t)=>{ape.init(e,t),NB.init(e,t)});function f4(e){return rme(age,e)}const lge=ae("ZodBoolean",(e,t)=>{lpe.init(e,t),Lr.init(e,t)});function TC(e){return nme(lge,e)}const cge=ae("ZodUnknown",(e,t)=>{cpe.init(e,t),Lr.init(e,t)});function p4(){return sme(cge)}const uge=ae("ZodNever",(e,t)=>{upe.init(e,t),Lr.init(e,t)});function dge(e){return ime(uge,e)}const hge=ae("ZodArray",(e,t)=>{dpe.init(e,t),Lr.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(db(r,n)),e.nonempty=r=>e.check(db(1,r)),e.max=(r,n)=>e.check(_B(r,n)),e.length=(r,n)=>e.check(jB(r,n)),e.unwrap=()=>e.element});function bx(e,t){return gme(hge,e,t)}const fge=ae("ZodObject",(e,t)=>{fpe.init(e,t),Lr.init(e,t),It(e,"shape",()=>t.shape),e.keyof=()=>hb(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:p4()}),e.loose=()=>e.clone({...e._zod.def,catchall:p4()}),e.strict=()=>e.clone({...e._zod.def,catchall:dge()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>Ahe(e,r),e.safeExtend=r=>Ohe(e,r),e.merge=r=>Phe(e,r),e.pick=r=>Che(e,r),e.omit=r=>The(e,r),e.partial=(...r)=>Rhe(EB,e,r[0]),e.required=(...r)=>Ihe(CB,e,r[0])});function Ch(e,t){const r={type:"object",get shape(){return ec(this,"shape",e?jhe(e):{}),this.shape},...Fe(t)};return new fge(r)}const pge=ae("ZodUnion",(e,t)=>{ppe.init(e,t),Lr.init(e,t),e.options=t.options});function mge(e,t){return new pge({type:"union",options:e,...Fe(t)})}const gge=ae("ZodIntersection",(e,t)=>{mpe.init(e,t),Lr.init(e,t)});function yge(e,t){return new gge({type:"intersection",left:e,right:t})}const qN=ae("ZodEnum",(e,t)=>{gpe.init(e,t),Lr.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new qN({...t,checks:[],...Fe(s),entries:i})},e.exclude=(n,s)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new qN({...t,checks:[],...Fe(s),entries:i})}});function hb(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new qN({type:"enum",entries:r,...Fe(t)})}const vge=ae("ZodTransform",(e,t)=>{ype.init(e,t),Lr.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new oB(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(pm(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),r.issues.push(pm(o))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(i=>(r.value=i,r)):(r.value=s,r)}});function bge(e){return new vge({type:"transform",transform:e})}const EB=ae("ZodOptional",(e,t)=>{vpe.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function m4(e){return new EB({type:"optional",innerType:e})}const xge=ae("ZodNullable",(e,t)=>{bpe.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function g4(e){return new xge({type:"nullable",innerType:e})}const wge=ae("ZodDefault",(e,t)=>{xpe.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function _ge(e,t){return new wge({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():cB(t)}})}const jge=ae("ZodPrefault",(e,t)=>{wpe.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function kge(e,t){return new jge({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():cB(t)}})}const CB=ae("ZodNonOptional",(e,t)=>{_pe.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Nge(e,t){return new CB({type:"nonoptional",innerType:e,...Fe(t)})}const Sge=ae("ZodCatch",(e,t)=>{jpe.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Ege(e,t){return new Sge({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Cge=ae("ZodPipe",(e,t)=>{kpe.init(e,t),Lr.init(e,t),e.in=t.in,e.out=t.out});function y4(e,t){return new Cge({type:"pipe",in:e,out:t})}const Tge=ae("ZodReadonly",(e,t)=>{Npe.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Age(e){return new Tge({type:"readonly",innerType:e})}const Oge=ae("ZodCustom",(e,t)=>{Spe.init(e,t),Lr.init(e,t)});function Pge(e,t={}){return yme(Oge,e,t)}function Rge(e){return vme(e)}const Tn=g.forwardRef(({className:e,type:t,...r},n)=>d.jsx("input",{type:t,className:Ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));Tn.displayName="Input";var Ige="Label",TB=g.forwardRef((e,t)=>d.jsx(_r.label,{...e,ref:t,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));TB.displayName=Ige;var AB=TB;const Dge=J0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ht=g.forwardRef(({className:e,...t},r)=>d.jsx(AB,{ref:r,className:Ye(Dge(),e),...t}));ht.displayName=AB.displayName;const Wi=g.forwardRef(({className:e,...t},r)=>d.jsx("textarea",{className:Ye("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Wi.displayName="Textarea";function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},St.apply(null,arguments)}function v4(e,[t,r]){return Math.min(r,Math.max(t,e))}function Kn(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function AC(e,t=[]){let r=[];function n(i,o){const a=g.createContext(o),l=r.length;r=[...r,o];function c(h){const{scope:f,children:p,...v}=h,m=(f==null?void 0:f[e][l])||a,b=g.useMemo(()=>v,Object.values(v));return g.createElement(m.Provider,{value:b},p)}function u(h,f){const p=(f==null?void 0:f[e][l])||a,v=g.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=r.map(o=>g.createContext(o));return function(o){const a=(o==null?void 0:o[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return s.scopeName=e,[n,Lge(s,...t)]}function Lge(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const i=n.reduce((o,{useScope:a,scopeName:l})=>{const c=a(s)[`__scope${l}`];return{...o,...c}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function Mge(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function OB(...e){return t=>e.forEach(r=>Mge(r,t))}function bs(...e){return g.useCallback(OB(...e),e)}const mm=g.forwardRef((e,t)=>{const{children:r,...n}=e,s=g.Children.toArray(r),i=s.find(Fge);if(i){const o=i.props.children,a=s.map(l=>l===i?g.Children.count(o)>1?g.Children.only(null):g.isValidElement(o)?o.props.children:null:l);return g.createElement(VN,St({},n,{ref:t}),g.isValidElement(o)?g.cloneElement(o,void 0,a):null)}return g.createElement(VN,St({},n,{ref:t}),r)});mm.displayName="Slot";const VN=g.forwardRef((e,t)=>{const{children:r,...n}=e;return g.isValidElement(r)?g.cloneElement(r,{...zge(n,r.props),ref:t?OB(t,r.ref):r.ref}):g.Children.count(r)>1?g.Children.only(null):null});VN.displayName="SlotClone";const $ge=({children:e})=>g.createElement(g.Fragment,null,e);function Fge(e){return g.isValidElement(e)&&e.type===$ge}function zge(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...o)=>{i(...o),s(...o)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Uge(e){const t=e+"CollectionProvider",[r,n]=AC(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:m}=p,b=ee.useRef(null),x=ee.useRef(new Map).current;return ee.createElement(s,{scope:v,itemMap:x,collectionRef:b},m)},a=e+"CollectionSlot",l=ee.forwardRef((p,v)=>{const{scope:m,children:b}=p,x=i(a,m),w=bs(v,x.collectionRef);return ee.createElement(mm,{ref:w},b)}),c=e+"CollectionItemSlot",u="data-radix-collection-item",h=ee.forwardRef((p,v)=>{const{scope:m,children:b,...x}=p,w=ee.useRef(null),_=bs(v,w),j=i(c,m);return ee.useEffect(()=>(j.itemMap.set(w,{ref:w,...x}),()=>void j.itemMap.delete(w))),ee.createElement(mm,{[u]:"",ref:_},b)});function f(p){const v=i(e+"CollectionConsumer",p);return ee.useCallback(()=>{const m=v.collectionRef.current;if(!m)return[];const b=Array.from(m.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((x,w)=>b.indexOf(x.ref.current)-b.indexOf(w.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},f,n]}const Bge=g.createContext(void 0);function qge(e){const t=g.useContext(Bge);return e||t||"ltr"}const Vge=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ln=Vge.reduce((e,t)=>{const r=g.forwardRef((n,s)=>{const{asChild:i,...o}=n,a=i?mm:t;return g.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),g.createElement(a,St({},o,{ref:s}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Wge(e,t){e&&Zn.flushSync(()=>e.dispatchEvent(t))}function Na(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function Kge(e,t=globalThis==null?void 0:globalThis.document){const r=Na(e);g.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[r,t])}const WN="dismissableLayer.update",Hge="dismissableLayer.pointerDownOutside",Zge="dismissableLayer.focusOutside";let b4;const Gge=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yge=g.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=g.useContext(Gge),[h,f]=g.useState(null),p=(r=h==null?void 0:h.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,v]=g.useState({}),m=bs(t,E=>f(E)),b=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(x),_=h?b.indexOf(h):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,k=_>=w,N=Jge(E=>{const T=E.target,P=[...u.branches].some(O=>O.contains(T));!k||P||(i==null||i(E),a==null||a(E),E.defaultPrevented||l==null||l())},p),S=Xge(E=>{const T=E.target;[...u.branches].some(P=>P.contains(T))||(o==null||o(E),a==null||a(E),E.defaultPrevented||l==null||l())},p);return Kge(E=>{_===u.layers.size-1&&(s==null||s(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),g.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(b4=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),x4(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=b4)}},[h,p,n,u]),g.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),x4())},[h,u]),g.useEffect(()=>{const E=()=>v({});return document.addEventListener(WN,E),()=>document.removeEventListener(WN,E)},[]),g.createElement(Ln.div,St({},c,{ref:m,style:{pointerEvents:j?k?"auto":"none":void 0,...e.style},onFocusCapture:Kn(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Kn(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Kn(e.onPointerDownCapture,N.onPointerDownCapture)}))});function Jge(e,t=globalThis==null?void 0:globalThis.document){const r=Na(e),n=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){PB(Hge,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Xge(e,t=globalThis==null?void 0:globalThis.document){const r=Na(e),n=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!n.current&&PB(Zge,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function x4(){const e=new CustomEvent(WN);document.dispatchEvent(e)}function PB(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Wge(s,i):s.dispatchEvent(i)}let gj=0;function Qge(){g.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:w4()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:w4()),gj++,()=>{gj===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),gj--}},[])}function w4(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const yj="focusScope.autoFocusOnMount",vj="focusScope.autoFocusOnUnmount",_4={bubbles:!1,cancelable:!0},eye=g.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[a,l]=g.useState(null),c=Na(s),u=Na(i),h=g.useRef(null),f=bs(t,m=>l(m)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(n){let m=function(_){if(p.paused||!a)return;const j=_.target;a.contains(j)?h.current=j:ul(h.current,{select:!0})},b=function(_){if(p.paused||!a)return;const j=_.relatedTarget;j!==null&&(a.contains(j)||ul(h.current,{select:!0}))},x=function(_){const j=document.activeElement;for(const k of _)k.removedNodes.length>0&&(a!=null&&a.contains(j)||ul(a))};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),w.disconnect()}}},[n,a,p.paused]),g.useEffect(()=>{if(a){k4.add(p);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(yj,_4);a.addEventListener(yj,c),a.dispatchEvent(b),b.defaultPrevented||(tye(oye(RB(a)),{select:!0}),document.activeElement===m&&ul(a))}return()=>{a.removeEventListener(yj,c),setTimeout(()=>{const b=new CustomEvent(vj,_4);a.addEventListener(vj,u),a.dispatchEvent(b),b.defaultPrevented||ul(m??document.body,{select:!0}),a.removeEventListener(vj,u),k4.remove(p)},0)}}},[a,c,u,p]);const v=g.useCallback(m=>{if(!r&&!n||p.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(b&&x){const w=m.currentTarget,[_,j]=rye(w);_&&j?!m.shiftKey&&x===j?(m.preventDefault(),r&&ul(_,{select:!0})):m.shiftKey&&x===_&&(m.preventDefault(),r&&ul(j,{select:!0})):x===w&&m.preventDefault()}},[r,n,p.paused]);return g.createElement(Ln.div,St({tabIndex:-1},o,{ref:f,onKeyDown:v}))});function tye(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ul(n,{select:t}),document.activeElement!==r)return}function rye(e){const t=RB(e),r=j4(t,e),n=j4(t.reverse(),e);return[r,n]}function RB(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function j4(e,t){for(const r of e)if(!nye(r,{upTo:t}))return r}function nye(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function sye(e){return e instanceof HTMLInputElement&&"select"in e}function ul(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&sye(e)&&t&&e.select()}}const k4=iye();function iye(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=N4(e,t),e.unshift(t)},remove(t){var r;e=N4(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function N4(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function oye(e){return e.filter(t=>t.tagName!=="A")}const Sa=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},aye=g.useId||(()=>{});let lye=0;function IB(e){const[t,r]=g.useState(aye());return Sa(()=>{r(n=>n??String(lye++))},[e]),t?`radix-${t}`:""}const cye=["top","right","bottom","left"],Ul=Math.min,Os=Math.max,fb=Math.round,Ry=Math.floor,Co=e=>({x:e,y:e}),uye={left:"right",right:"left",bottom:"top",top:"bottom"},dye={start:"end",end:"start"};function KN(e,t,r){return Os(e,Ul(t,r))}function Ea(e,t){return typeof e=="function"?e(t):e}function Ca(e){return e.split("-")[0]}function uf(e){return e.split("-")[1]}function OC(e){return e==="x"?"y":"x"}function PC(e){return e==="y"?"height":"width"}const hye=new Set(["top","bottom"]);function No(e){return hye.has(Ca(e))?"y":"x"}function RC(e){return OC(No(e))}function fye(e,t,r){r===void 0&&(r=!1);const n=uf(e),s=RC(e),i=PC(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=pb(o)),[o,pb(o)]}function pye(e){const t=pb(e);return[HN(e),t,HN(t)]}function HN(e){return e.replace(/start|end/g,t=>dye[t])}const S4=["left","right"],E4=["right","left"],mye=["top","bottom"],gye=["bottom","top"];function yye(e,t,r){switch(e){case"top":case"bottom":return r?t?E4:S4:t?S4:E4;case"left":case"right":return t?mye:gye;default:return[]}}function vye(e,t,r,n){const s=uf(e);let i=yye(Ca(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(HN)))),i}function pb(e){return e.replace(/left|right|bottom|top/g,t=>uye[t])}function bye(e){return{top:0,right:0,bottom:0,left:0,...e}}function DB(e){return typeof e!="number"?bye(e):{top:e,right:e,bottom:e,left:e}}function mb(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function C4(e,t,r){let{reference:n,floating:s}=e;const i=No(t),o=RC(t),a=PC(o),l=Ca(t),c=i==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:n.y-s.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(uf(t)){case"start":p[o]-=f*(r&&c?-1:1);break;case"end":p[o]+=f*(r&&c?-1:1);break}return p}const xye=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=C4(c,n,l),f=n,p={},v=0;for(let m=0;m<a.length;m++){const{name:b,fn:x}=a[m],{x:w,y:_,data:j,reset:k}=await x({x:u,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});u=w??u,h=_??h,p={...p,[b]:{...p[b],...j}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:u,y:h}=C4(c,f,l)),m=-1)}return{x:u,y:h,placement:f,strategy:s,middlewareData:p}};async function gm(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Ea(t,e),v=DB(p),m=a[f?h==="floating"?"reference":"floating":h],b=mb(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(m)))==null||r?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=mb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(b.top-j.top+v.top)/_.y,bottom:(j.bottom-b.bottom+v.bottom)/_.y,left:(b.left-j.left+v.left)/_.x,right:(j.right-b.right+v.right)/_.x}}const wye=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Ea(e,t)||{};if(c==null)return{};const h=DB(u),f={x:r,y:n},p=RC(s),v=PC(p),m=await o.getDimensions(c),b=p==="y",x=b?"top":"left",w=b?"bottom":"right",_=b?"clientHeight":"clientWidth",j=i.reference[v]+i.reference[p]-f[p]-i.floating[v],k=f[p]-i.reference[p],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=N?N[_]:0;(!S||!await(o.isElement==null?void 0:o.isElement(N)))&&(S=a.floating[_]||i.floating[v]);const E=j/2-k/2,T=S/2-m[v]/2-1,P=Ul(h[x],T),O=Ul(h[w],T),R=P,I=S-m[v]-O,M=S/2-m[v]/2+E,z=KN(R,M,I),W=!l.arrow&&uf(s)!=null&&M!==z&&i.reference[v]/2-(M<R?P:O)-m[v]/2<0,q=W?M<R?M-R:M-I:0;return{[p]:f[p]+q,data:{[p]:z,centerOffset:M-z-q,...W&&{alignmentOffset:q}},reset:W}}}),_ye=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:m=!0,...b}=Ea(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=Ca(s),w=No(a),_=Ca(a)===a,j=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(_||!m?[pb(a)]:pye(a)),N=v!=="none";!f&&N&&k.push(...vye(a,m,v,j));const S=[a,...k],E=await gm(t,b),T=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&T.push(E[x]),h){const M=fye(s,o,j);T.push(E[M[0]],E[M[1]])}if(P=[...P,{placement:s,overflows:T}],!T.every(M=>M<=0)){var O,R;const M=(((O=i.flip)==null?void 0:O.index)||0)+1,z=S[M];if(z&&(!(h==="alignment"&&w!==No(z))||P.every(q=>No(q.placement)===w?q.overflows[0]>0:!0)))return{data:{index:M,overflows:P},reset:{placement:z}};let W=(R=P.filter(q=>q.overflows[0]<=0).sort((q,Y)=>q.overflows[1]-Y.overflows[1])[0])==null?void 0:R.placement;if(!W)switch(p){case"bestFit":{var I;const q=(I=P.filter(Y=>{if(N){const L=No(Y.placement);return L===w||L==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(L=>L>0).reduce((L,K)=>L+K,0)]).sort((Y,L)=>Y[1]-L[1])[0])==null?void 0:I[0];q&&(W=q);break}case"initialPlacement":W=a;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function T4(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function A4(e){return cye.some(t=>e[t]>=0)}const jye=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Ea(e,t);switch(n){case"referenceHidden":{const i=await gm(t,{...s,elementContext:"reference"}),o=T4(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:A4(o)}}}case"escaped":{const i=await gm(t,{...s,altBoundary:!0}),o=T4(i,r.floating);return{data:{escapedOffsets:o,escaped:A4(o)}}}default:return{}}}}},LB=new Set(["left","top"]);async function kye(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Ca(r),a=uf(r),l=No(r)==="y",c=LB.has(o)?-1:1,u=i&&l?-1:1,h=Ea(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(p=a==="end"?v*-1:v),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const Nye=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:a}=t,l=await kye(t,e);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},Sye=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x,y:w}=b;return{x,y:w}}},...l}=Ea(e,t),c={x:r,y:n},u=await gm(t,l),h=No(Ca(s)),f=OC(h);let p=c[f],v=c[h];if(i){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=p+u[b],_=p-u[x];p=KN(w,p,_)}if(o){const b=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=v+u[b],_=v-u[x];v=KN(w,v,_)}const m=a.fn({...t,[f]:p,[h]:v});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[f]:i,[h]:o}}}}}},Eye=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ea(e,t),u={x:r,y:n},h=No(s),f=OC(h);let p=u[f],v=u[h];const m=Ea(a,t),b=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const _=f==="y"?"height":"width",j=i.reference[f]-i.floating[_]+b.mainAxis,k=i.reference[f]+i.reference[_]-b.mainAxis;p<j?p=j:p>k&&(p=k)}if(c){var x,w;const _=f==="y"?"width":"height",j=LB.has(Ca(s)),k=i.reference[h]-i.floating[_]+(j&&((x=o.offset)==null?void 0:x[h])||0)+(j?0:b.crossAxis),N=i.reference[h]+i.reference[_]+(j?0:((w=o.offset)==null?void 0:w[h])||0)-(j?b.crossAxis:0);v<k?v=k:v>N&&(v=N)}return{[f]:p,[h]:v}}}},Cye=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:o,elements:a}=t,{apply:l=()=>{},...c}=Ea(e,t),u=await gm(t,c),h=Ca(s),f=uf(s),p=No(s)==="y",{width:v,height:m}=i.floating;let b,x;h==="top"||h==="bottom"?(b=h,x=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=h,b=f==="end"?"top":"bottom");const w=m-u.top-u.bottom,_=v-u.left-u.right,j=Ul(m-u[b],w),k=Ul(v-u[x],_),N=!t.middlewareData.shift;let S=j,E=k;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(E=_),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=w),N&&!f){const P=Os(u.left,0),O=Os(u.right,0),R=Os(u.top,0),I=Os(u.bottom,0);p?E=v-2*(P!==0||O!==0?P+O:Os(u.left,u.right)):S=m-2*(R!==0||I!==0?R+I:Os(u.top,u.bottom))}await l({...t,availableWidth:E,availableHeight:S});const T=await o.getDimensions(a.floating);return v!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function xx(){return typeof window<"u"}function df(e){return MB(e)?(e.nodeName||"").toLowerCase():"#document"}function $s(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Vo(e){var t;return(t=(MB(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function MB(e){return xx()?e instanceof Node||e instanceof $s(e).Node:!1}function Xi(e){return xx()?e instanceof Element||e instanceof $s(e).Element:!1}function Lo(e){return xx()?e instanceof HTMLElement||e instanceof $s(e).HTMLElement:!1}function O4(e){return!xx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $s(e).ShadowRoot}const Tye=new Set(["inline","contents"]);function mg(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Qi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Tye.has(s)}const Aye=new Set(["table","td","th"]);function Oye(e){return Aye.has(df(e))}const Pye=[":popover-open",":modal"];function wx(e){return Pye.some(t=>{try{return e.matches(t)}catch{return!1}})}const Rye=["transform","translate","scale","rotate","perspective"],Iye=["transform","translate","scale","rotate","perspective","filter"],Dye=["paint","layout","strict","content"];function IC(e){const t=DC(),r=Xi(e)?Qi(e):e;return Rye.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Iye.some(n=>(r.willChange||"").includes(n))||Dye.some(n=>(r.contain||"").includes(n))}function Lye(e){let t=Bl(e);for(;Lo(t)&&!Th(t);){if(IC(t))return t;if(wx(t))return null;t=Bl(t)}return null}function DC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Mye=new Set(["html","body","#document"]);function Th(e){return Mye.has(df(e))}function Qi(e){return $s(e).getComputedStyle(e)}function _x(e){return Xi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Bl(e){if(df(e)==="html")return e;const t=e.assignedSlot||e.parentNode||O4(e)&&e.host||Vo(e);return O4(t)?t.host:t}function $B(e){const t=Bl(e);return Th(t)?e.ownerDocument?e.ownerDocument.body:e.body:Lo(t)&&mg(t)?t:$B(t)}function ym(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=$B(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=$s(s);if(i){const a=ZN(o);return t.concat(o,o.visualViewport||[],mg(s)?s:[],a&&r?ym(a):[])}return t.concat(s,ym(s,[],r))}function ZN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function FB(e){const t=Qi(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Lo(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,a=fb(r)!==i||fb(n)!==o;return a&&(r=i,n=o),{width:r,height:n,$:a}}function LC(e){return Xi(e)?e:e.contextElement}function Gd(e){const t=LC(e);if(!Lo(t))return Co(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=FB(t);let o=(i?fb(r.width):r.width)/n,a=(i?fb(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const $ye=Co(0);function zB(e){const t=$s(e);return!DC()||!t.visualViewport?$ye:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Fye(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==$s(e)?!1:t}function gu(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=LC(e);let o=Co(1);t&&(n?Xi(n)&&(o=Gd(n)):o=Gd(e));const a=Fye(i,r,n)?zB(i):Co(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const f=$s(i),p=n&&Xi(n)?$s(n):n;let v=f,m=ZN(v);for(;m&&n&&p!==v;){const b=Gd(m),x=m.getBoundingClientRect(),w=Qi(m),_=x.left+(m.clientLeft+parseFloat(w.paddingLeft))*b.x,j=x.top+(m.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,h*=b.y,l+=_,c+=j,v=$s(m),m=ZN(v)}}return mb({width:u,height:h,x:l,y:c})}function jx(e,t){const r=_x(e).scrollLeft;return t?t.left+r:gu(Vo(e)).left+r}function UB(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-jx(e,r),s=r.top+t.scrollTop;return{x:n,y:s}}function zye(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=Vo(n),a=t?wx(t.floating):!1;if(n===o||a&&i)return r;let l={scrollLeft:0,scrollTop:0},c=Co(1);const u=Co(0),h=Lo(n);if((h||!h&&!i)&&((df(n)!=="body"||mg(o))&&(l=_x(n)),Lo(n))){const p=gu(n);c=Gd(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const f=o&&!h&&!i?UB(o,l):Co(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:r.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Uye(e){return Array.from(e.getClientRects())}function Bye(e){const t=Vo(e),r=_x(e),n=e.ownerDocument.body,s=Os(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Os(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+jx(e);const a=-r.scrollTop;return Qi(n).direction==="rtl"&&(o+=Os(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}const P4=25;function qye(e,t){const r=$s(e),n=Vo(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=DC();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=jx(n);if(c<=0){const u=n.ownerDocument,h=u.body,f=getComputedStyle(h),p=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,v=Math.abs(n.clientWidth-h.clientWidth-p);v<=P4&&(i-=v)}else c<=P4&&(i+=c);return{width:i,height:o,x:a,y:l}}const Vye=new Set(["absolute","fixed"]);function Wye(e,t){const r=gu(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=Lo(e)?Gd(e):Co(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,l=s*i.x,c=n*i.y;return{width:o,height:a,x:l,y:c}}function R4(e,t,r){let n;if(t==="viewport")n=qye(e,r);else if(t==="document")n=Bye(Vo(e));else if(Xi(t))n=Wye(t,r);else{const s=zB(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return mb(n)}function BB(e,t){const r=Bl(e);return r===t||!Xi(r)||Th(r)?!1:Qi(r).position==="fixed"||BB(r,t)}function Kye(e,t){const r=t.get(e);if(r)return r;let n=ym(e,[],!1).filter(a=>Xi(a)&&df(a)!=="body"),s=null;const i=Qi(e).position==="fixed";let o=i?Bl(e):e;for(;Xi(o)&&!Th(o);){const a=Qi(o),l=IC(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&s&&Vye.has(s.position)||mg(o)&&!l&&BB(e,o))?n=n.filter(c=>c!==o):s=a,o=Bl(o)}return t.set(e,n),n}function Hye(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?wx(t)?[]:Kye(t,this._c):[].concat(r),n],o=i[0],a=i.reduce((l,c)=>{const u=R4(t,c,s);return l.top=Os(u.top,l.top),l.right=Ul(u.right,l.right),l.bottom=Ul(u.bottom,l.bottom),l.left=Os(u.left,l.left),l},R4(t,o,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Zye(e){const{width:t,height:r}=FB(e);return{width:t,height:r}}function Gye(e,t,r){const n=Lo(t),s=Vo(t),i=r==="fixed",o=gu(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=Co(0);function c(){l.x=jx(s)}if(n||!n&&!i)if((df(t)!=="body"||mg(s))&&(a=_x(t)),n){const p=gu(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else s&&c();i&&!n&&s&&c();const u=s&&!n&&!i?UB(s,a):Co(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function bj(e){return Qi(e).position==="static"}function I4(e,t){if(!Lo(e)||Qi(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Vo(e)===r&&(r=r.ownerDocument.body),r}function qB(e,t){const r=$s(e);if(wx(e))return r;if(!Lo(e)){let s=Bl(e);for(;s&&!Th(s);){if(Xi(s)&&!bj(s))return s;s=Bl(s)}return r}let n=I4(e,t);for(;n&&Oye(n)&&bj(n);)n=I4(n,t);return n&&Th(n)&&bj(n)&&!IC(n)?r:n||Lye(e)||r}const Yye=async function(e){const t=this.getOffsetParent||qB,r=this.getDimensions,n=await r(e.floating);return{reference:Gye(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Jye(e){return Qi(e).direction==="rtl"}const Xye={convertOffsetParentRelativeRectToViewportRelativeRect:zye,getDocumentElement:Vo,getClippingRect:Hye,getOffsetParent:qB,getElementRects:Yye,getClientRects:Uye,getDimensions:Zye,getScale:Gd,isElement:Xi,isRTL:Jye};function VB(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Qye(e,t){let r=null,n;const s=Vo(e);function i(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=c;if(a||t(),!f||!p)return;const v=Ry(h),m=Ry(s.clientWidth-(u+f)),b=Ry(s.clientHeight-(h+p)),x=Ry(u),w={rootMargin:-v+"px "+-m+"px "+-b+"px "+-x+"px",threshold:Os(0,Ul(1,l))||1};let _=!0;function j(k){const N=k[0].intersectionRatio;if(N!==l){if(!_)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!VB(c,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function eve(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=LC(e),u=s||i?[...c?ym(c):[],...ym(t)]:[];u.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const h=c&&a?Qye(c,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(x=>{let[w]=x;w&&w.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let v,m=l?gu(e):null;l&&b();function b(){const x=gu(e);m&&!VB(m,x)&&r(),m=x,v=requestAnimationFrame(b)}return r(),()=>{var x;u.forEach(w=>{s&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),h==null||h(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(v)}}const tve=Nye,rve=Sye,nve=_ye,sve=Cye,ive=jye,D4=wye,ove=Eye,ave=(e,t,r)=>{const n=new Map,s={platform:Xye,...r},i={...s.platform,_c:n};return xye(e,t,{...s,platform:i})};var lve=typeof document<"u",cve=function(){},Nv=lve?g.useLayoutEffect:cve;function gb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!gb(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!gb(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function WB(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function L4(e,t){const r=WB(e);return Math.round(t*r)/r}function xj(e){const t=g.useRef(e);return Nv(()=>{t.current=e}),t}function uve(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,h]=g.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=g.useState(n);gb(f,n)||p(n);const[v,m]=g.useState(null),[b,x]=g.useState(null),w=g.useCallback(Y=>{Y!==N.current&&(N.current=Y,m(Y))},[]),_=g.useCallback(Y=>{Y!==S.current&&(S.current=Y,x(Y))},[]),j=i||v,k=o||b,N=g.useRef(null),S=g.useRef(null),E=g.useRef(u),T=l!=null,P=xj(l),O=xj(s),R=xj(c),I=g.useCallback(()=>{if(!N.current||!S.current)return;const Y={placement:t,strategy:r,middleware:f};O.current&&(Y.platform=O.current),ave(N.current,S.current,Y).then(L=>{const K={...L,isPositioned:R.current!==!1};M.current&&!gb(E.current,K)&&(E.current=K,Zn.flushSync(()=>{h(K)}))})},[f,t,r,O,R]);Nv(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(Y=>({...Y,isPositioned:!1})))},[c]);const M=g.useRef(!1);Nv(()=>(M.current=!0,()=>{M.current=!1}),[]),Nv(()=>{if(j&&(N.current=j),k&&(S.current=k),j&&k){if(P.current)return P.current(j,k,I);I()}},[j,k,I,P,T]);const z=g.useMemo(()=>({reference:N,floating:S,setReference:w,setFloating:_}),[w,_]),W=g.useMemo(()=>({reference:j,floating:k}),[j,k]),q=g.useMemo(()=>{const Y={position:r,left:0,top:0};if(!W.floating)return Y;const L=L4(W.floating,u.x),K=L4(W.floating,u.y);return a?{...Y,transform:"translate("+L+"px, "+K+"px)",...WB(W.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:L,top:K}},[r,a,W.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:I,refs:z,elements:W,floatingStyles:q}),[u,I,z,W,q])}const dve=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?D4({element:n.current,padding:s}).fn(r):{}:n?D4({element:n,padding:s}).fn(r):{}}}},hve=(e,t)=>({...tve(e),options:[e,t]}),fve=(e,t)=>({...rve(e),options:[e,t]}),pve=(e,t)=>({...ove(e),options:[e,t]}),mve=(e,t)=>({...nve(e),options:[e,t]}),gve=(e,t)=>({...sve(e),options:[e,t]}),yve=(e,t)=>({...ive(e),options:[e,t]}),vve=(e,t)=>({...dve(e),options:[e,t]});function bve(e){const[t,r]=g.useState(void 0);return Sa(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;r({width:o,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}const KB="Popper",[HB,ZB]=AC(KB),[xve,GB]=HB(KB),wve=e=>{const{__scopePopper:t,children:r}=e,[n,s]=g.useState(null);return g.createElement(xve,{scope:t,anchor:n,onAnchorChange:s},r)},_ve="PopperAnchor",jve=g.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=GB(_ve,r),o=g.useRef(null),a=bs(t,o);return g.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:g.createElement(Ln.div,St({},s,{ref:a}))}),YB="PopperContent",[kve,aHe]=HB(YB),Nve=g.forwardRef((e,t)=>{var r,n,s,i,o,a,l,c;const{__scopePopper:u,side:h="bottom",sideOffset:f=0,align:p="center",alignOffset:v=0,arrowPadding:m=0,collisionBoundary:b=[],collisionPadding:x=0,sticky:w="partial",hideWhenDetached:_=!1,avoidCollisions:j=!0,onPlaced:k,...N}=e,S=GB(YB,u),[E,T]=g.useState(null),P=bs(t,Ee=>T(Ee)),[O,R]=g.useState(null),I=bve(O),M=(r=I==null?void 0:I.width)!==null&&r!==void 0?r:0,z=(n=I==null?void 0:I.height)!==null&&n!==void 0?n:0,W=h+(p!=="center"?"-"+p:""),q=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},Y=Array.isArray(b)?b:[b],L=Y.length>0,K={padding:q,boundary:Y.filter(Sve),altBoundary:L},{refs:G,floatingStyles:re,placement:H,isPositioned:ne,middlewareData:J}=uve({strategy:"fixed",placement:W,whileElementsMounted:eve,elements:{reference:S.anchor},middleware:[hve({mainAxis:f+z,alignmentAxis:v}),j&&fve({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?pve():void 0,...K}),j&&mve({...K}),gve({...K,apply:({elements:Ee,rects:He,availableWidth:Je,availableHeight:ct})=>{const{width:Et,height:D}=He.reference,V=Ee.floating.style;V.setProperty("--radix-popper-available-width",`${Je}px`),V.setProperty("--radix-popper-available-height",`${ct}px`),V.setProperty("--radix-popper-anchor-width",`${Et}px`),V.setProperty("--radix-popper-anchor-height",`${D}px`)}}),O&&vve({element:O,padding:m}),Eve({arrowWidth:M,arrowHeight:z}),_&&yve({strategy:"referenceHidden"})]}),[Ie,me]=JB(H),ge=Na(k);Sa(()=>{ne&&(ge==null||ge())},[ne,ge]);const U=(s=J.arrow)===null||s===void 0?void 0:s.x,Z=(i=J.arrow)===null||i===void 0?void 0:i.y,le=((o=J.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[B,we]=g.useState();return Sa(()=>{E&&we(window.getComputedStyle(E).zIndex)},[E]),g.createElement("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:ne?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B,"--radix-popper-transform-origin":[(a=J.transformOrigin)===null||a===void 0?void 0:a.x,(l=J.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:e.dir},g.createElement(kve,{scope:u,placedSide:Ie,onArrowChange:R,arrowX:U,arrowY:Z,shouldHideArrow:le},g.createElement(Ln.div,St({"data-side":Ie,"data-align":me},N,{ref:P,style:{...N.style,animation:ne?void 0:"none",opacity:(c=J.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function Sve(e){return e!==null}const Eve=e=>({name:"transformOrigin",options:e,fn(t){var r,n,s,i,o;const{placement:a,rects:l,middlewareData:c}=t,u=((r=c.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,h=u?0:e.arrowWidth,f=u?0:e.arrowHeight,[p,v]=JB(a),m={start:"0%",center:"50%",end:"100%"}[v],b=((n=(s=c.arrow)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0)+h/2,x=((i=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+f/2;let w="",_="";return p==="bottom"?(w=u?m:`${b}px`,_=`${-f}px`):p==="top"?(w=u?m:`${b}px`,_=`${l.floating.height+f}px`):p==="right"?(w=`${-f}px`,_=u?m:`${x}px`):p==="left"&&(w=`${l.floating.width+f}px`,_=u?m:`${x}px`),{data:{x:w,y:_}}}});function JB(e){const[t,r="center"]=e.split("-");return[t,r]}const Cve=wve,Tve=jve,Ave=Nve,Ove=g.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...s}=e;return n?U$.createPortal(g.createElement(Ln.div,St({},s,{ref:t})),n):null});function M4({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=Pve({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:n,a=Na(r),l=g.useCallback(c=>{if(i){const u=typeof c=="function"?c(e):c;u!==e&&a(u)}else s(c)},[i,e,s,a]);return[o,l]}function Pve({defaultProp:e,onChange:t}){const r=g.useState(e),[n]=r,s=g.useRef(n),i=Na(t);return g.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}function Rve(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const Ive=g.forwardRef((e,t)=>g.createElement(Ln.span,St({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var XB=Fz(),wj=function(){},kx=g.forwardRef(function(e,t){var r=g.useRef(null),n=g.useState({onScrollCapture:wj,onWheelCapture:wj,onTouchMoveCapture:wj}),s=n[0],i=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noIsolation,v=e.inert,m=e.allowPinchZoom,b=e.as,x=b===void 0?"div":b,w=YE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),_=f,j=$z([r,t]),k=Cn(Cn({},w),s);return g.createElement(g.Fragment,null,u&&g.createElement(_,{sideCar:XB,removeScrollBar:c,shards:h,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!m,lockRef:r}),o?g.cloneElement(g.Children.only(a),Cn(Cn({},k),{ref:j})):g.createElement(x,Cn({},k,{className:l,ref:j}),a))});kx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kx.classNames={fullWidth:Mp,zeroRight:Lp};var GN=!1;if(typeof window<"u")try{var Iy=Object.defineProperty({},"passive",{get:function(){return GN=!0,!0}});window.addEventListener("test",Iy,Iy),window.removeEventListener("test",Iy,Iy)}catch{GN=!1}var ud=GN?{passive:!1}:!1,Dve=function(e){return e.tagName==="TEXTAREA"},QB=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Dve(e)&&r[t]==="visible")},Lve=function(e){return QB(e,"overflowY")},Mve=function(e){return QB(e,"overflowX")},$4=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=eq(e,r);if(n){var s=tq(e,r),i=s[1],o=s[2];if(i>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},$ve=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Fve=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},eq=function(e,t){return e==="v"?Lve(t):Mve(t)},tq=function(e,t){return e==="v"?$ve(t):Fve(t)},zve=function(e,t){return e==="h"&&t==="rtl"?-1:1},Uve=function(e,t,r,n,s){var i=zve(e,window.getComputedStyle(t).direction),o=i*n,a=r.target,l=t.contains(a),c=!1,u=o>0,h=0,f=0;do{var p=tq(e,a),v=p[0],m=p[1],b=p[2],x=m-b-i*v;(v||x)&&eq(e,a)&&(h+=x,f+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&h===0||!u&&f===0)&&(c=!0),c},Dy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},F4=function(e){return[e.deltaX,e.deltaY]},z4=function(e){return e&&"current"in e?e.current:e},Bve=function(e,t){return e[0]===t[0]&&e[1]===t[1]},qve=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Vve=0,dd=[];function Wve(e){var t=g.useRef([]),r=g.useRef([0,0]),n=g.useRef(),s=g.useState(Vve++)[0],i=g.useState(function(){return JE()})[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=Mz([e.lockRef.current],(e.shards||[]).map(z4)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=g.useCallback(function(m,b){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var x=Dy(m),w=r.current,_="deltaX"in m?m.deltaX:w[0]-x[0],j="deltaY"in m?m.deltaY:w[1]-x[1],k,N=m.target,S=Math.abs(_)>Math.abs(j)?"h":"v";if("touches"in m&&S==="h"&&N.type==="range")return!1;var E=$4(S,N);if(!E)return!0;if(E?k=S:(k=S==="v"?"h":"v",E=$4(S,N)),!E)return!1;if(!n.current&&"changedTouches"in m&&(_||j)&&(n.current=k),!k)return!0;var T=n.current||k;return Uve(T,b,m,T==="h"?_:j)},[]),l=g.useCallback(function(m){var b=m;if(!(!dd.length||dd[dd.length-1]!==i)){var x="deltaY"in b?F4(b):Dy(b),w=t.current.filter(function(k){return k.name===b.type&&k.target===b.target&&Bve(k.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(z4).filter(Boolean).filter(function(k){return k.contains(b.target)}),j=_.length>0?a(b,_[0]):!o.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),c=g.useCallback(function(m,b,x,w){var _={name:m,delta:b,target:x,should:w};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(j){return j!==_})},1)},[]),u=g.useCallback(function(m){r.current=Dy(m),n.current=void 0},[]),h=g.useCallback(function(m){c(m.type,F4(m),m.target,a(m,e.lockRef.current))},[]),f=g.useCallback(function(m){c(m.type,Dy(m),m.target,a(m,e.lockRef.current))},[]);g.useEffect(function(){return dd.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,ud),document.addEventListener("touchmove",l,ud),document.addEventListener("touchstart",u,ud),function(){dd=dd.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,ud),document.removeEventListener("touchmove",l,ud),document.removeEventListener("touchstart",u,ud)}},[]);var p=e.removeScrollBar,v=e.inert;return g.createElement(g.Fragment,null,v?g.createElement(i,{styles:qve(s)}):null,p?g.createElement(qz,{gapMode:"margin"}):null)}const Kve=Uz(XB,Wve);var rq=g.forwardRef(function(e,t){return g.createElement(kx,Cn({},e,{ref:t,sideCar:Kve}))});rq.classNames=kx.classNames;const Hve=[" ","Enter","ArrowUp","ArrowDown"],Zve=[" ","Enter"],Nx="Select",[Sx,MC,Gve]=Uge(Nx),[hf,lHe]=AC(Nx,[Gve,ZB]),$C=ZB(),[Yve,Iu]=hf(Nx),[Jve,Xve]=hf(Nx),Qve=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:f,required:p}=e,v=$C(t),[m,b]=g.useState(null),[x,w]=g.useState(null),[_,j]=g.useState(!1),k=qge(c),[N=!1,S]=M4({prop:n,defaultProp:s,onChange:i}),[E,T]=M4({prop:o,defaultProp:a,onChange:l}),P=g.useRef(null),O=m?!!m.closest("form"):!0,[R,I]=g.useState(new Set),M=Array.from(R).map(z=>z.props.value).join(";");return g.createElement(Cve,v,g.createElement(Yve,{required:p,scope:t,trigger:m,onTriggerChange:b,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:IB(),value:E,onValueChange:T,open:N,onOpenChange:S,dir:k,triggerPointerDownPosRef:P,disabled:f},g.createElement(Sx.Provider,{scope:t},g.createElement(Jve,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(z=>{I(W=>new Set(W).add(z))},[]),onNativeOptionRemove:g.useCallback(z=>{I(W=>{const q=new Set(W);return q.delete(z),q})},[])},r)),O?g.createElement(iq,{key:M,"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:E,onChange:z=>T(z.target.value),disabled:f},E===void 0?g.createElement("option",{value:""}):null,Array.from(R)):null))},ebe="SelectTrigger",tbe=g.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=$C(r),o=Iu(ebe,r),a=o.disabled||n,l=bs(t,o.onTriggerChange),c=MC(r),[u,h,f]=oq(v=>{const m=c().filter(w=>!w.disabled),b=m.find(w=>w.value===o.value),x=aq(m,v,b);x!==void 0&&o.onValueChange(x.value)}),p=()=>{a||(o.onOpenChange(!0),f())};return g.createElement(Tve,St({asChild:!0},i),g.createElement(Ln.button,St({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},s,{ref:l,onClick:Kn(s.onClick,v=>{v.currentTarget.focus()}),onPointerDown:Kn(s.onPointerDown,v=>{const m=v.target;m.hasPointerCapture(v.pointerId)&&m.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&(p(),o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)},v.preventDefault())}),onKeyDown:Kn(s.onKeyDown,v=>{const m=u.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(m&&v.key===" ")&&Hve.includes(v.key)&&(p(),v.preventDefault())})})))}),rbe="SelectValue",nbe=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o,...a}=e,l=Iu(rbe,r),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,h=bs(t,l.onValueNodeChange);return Sa(()=>{c(u)},[c,u]),g.createElement(Ln.span,St({},a,{ref:h,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:i)}),sbe=g.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return g.createElement(Ln.span,St({"aria-hidden":!0},s,{ref:t}),n||"▼")}),ibe=e=>g.createElement(Ove,St({asChild:!0},e)),Ah="SelectContent",obe=g.forwardRef((e,t)=>{const r=Iu(Ah,e.__scopeSelect),[n,s]=g.useState();if(Sa(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?Zn.createPortal(g.createElement(nq,{scope:e.__scopeSelect},g.createElement(Sx.Slot,{scope:e.__scopeSelect},g.createElement("div",null,e.children))),i):null}return g.createElement(abe,St({},e,{ref:t}))}),ia=10,[nq,Ex]=hf(Ah),abe=g.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:b,...x}=e,w=Iu(Ah,r),[_,j]=g.useState(null),[k,N]=g.useState(null),S=bs(t,me=>j(me)),[E,T]=g.useState(null),[P,O]=g.useState(null),R=MC(r),[I,M]=g.useState(!1),z=g.useRef(!1);g.useEffect(()=>{if(_)return Gz(_)},[_]),Qge();const W=g.useCallback(me=>{const[ge,...U]=R().map(B=>B.ref.current),[Z]=U.slice(-1),le=document.activeElement;for(const B of me)if(B===le||(B==null||B.scrollIntoView({block:"nearest"}),B===ge&&k&&(k.scrollTop=0),B===Z&&k&&(k.scrollTop=k.scrollHeight),B==null||B.focus(),document.activeElement!==le))return},[R,k]),q=g.useCallback(()=>W([E,_]),[W,E,_]);g.useEffect(()=>{I&&q()},[I,q]);const{onOpenChange:Y,triggerPointerDownPosRef:L}=w;g.useEffect(()=>{if(_){let me={x:0,y:0};const ge=Z=>{var le,B,we,Ee;me={x:Math.abs(Math.round(Z.pageX)-((le=(B=L.current)===null||B===void 0?void 0:B.x)!==null&&le!==void 0?le:0)),y:Math.abs(Math.round(Z.pageY)-((we=(Ee=L.current)===null||Ee===void 0?void 0:Ee.y)!==null&&we!==void 0?we:0))}},U=Z=>{me.x<=10&&me.y<=10?Z.preventDefault():_.contains(Z.target)||Y(!1),document.removeEventListener("pointermove",ge),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",U,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",U,{capture:!0})}}},[_,Y,L]),g.useEffect(()=>{const me=()=>Y(!1);return window.addEventListener("blur",me),window.addEventListener("resize",me),()=>{window.removeEventListener("blur",me),window.removeEventListener("resize",me)}},[Y]);const[K,G]=oq(me=>{const ge=R().filter(le=>!le.disabled),U=ge.find(le=>le.ref.current===document.activeElement),Z=aq(ge,me,U);Z&&setTimeout(()=>Z.ref.current.focus())}),re=g.useCallback((me,ge,U)=>{const Z=!z.current&&!U;(w.value!==void 0&&w.value===ge||Z)&&(T(me),Z&&(z.current=!0))},[w.value]),H=g.useCallback(()=>_==null?void 0:_.focus(),[_]),ne=g.useCallback((me,ge,U)=>{const Z=!z.current&&!U;(w.value!==void 0&&w.value===ge||Z)&&O(me)},[w.value]),J=n==="popper"?U4:lbe,Ie=J===U4?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:b}:{};return g.createElement(nq,{scope:r,content:_,viewport:k,onViewportChange:N,itemRefCallback:re,selectedItem:E,onItemLeave:H,itemTextRefCallback:ne,focusSelectedItem:q,selectedItemText:P,position:n,isPositioned:I,searchRef:K},g.createElement(rq,{as:mm,allowPinchZoom:!0},g.createElement(eye,{asChild:!0,trapped:w.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:Kn(s,me=>{var ge;(ge=w.trigger)===null||ge===void 0||ge.focus({preventScroll:!0}),me.preventDefault()})},g.createElement(Yge,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>w.onOpenChange(!1)},g.createElement(J,St({role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:me=>me.preventDefault()},x,Ie,{onPlaced:()=>M(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Kn(x.onKeyDown,me=>{const ge=me.ctrlKey||me.altKey||me.metaKey;if(me.key==="Tab"&&me.preventDefault(),!ge&&me.key.length===1&&G(me.key),["ArrowUp","ArrowDown","Home","End"].includes(me.key)){let U=R().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(me.key)&&(U=U.slice().reverse()),["ArrowUp","ArrowDown"].includes(me.key)){const Z=me.target,le=U.indexOf(Z);U=U.slice(le+1)}setTimeout(()=>W(U)),me.preventDefault()}})}))))))}),lbe=g.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=Iu(Ah,r),o=Ex(Ah,r),[a,l]=g.useState(null),[c,u]=g.useState(null),h=bs(t,S=>u(S)),f=MC(r),p=g.useRef(!1),v=g.useRef(!0),{viewport:m,selectedItem:b,selectedItemText:x,focusSelectedItem:w}=o,_=g.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&m&&b&&x){const S=i.trigger.getBoundingClientRect(),E=c.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(i.dir!=="rtl"){const Z=P.left-E.left,le=T.left-Z,B=S.left-le,we=S.width+B,Ee=Math.max(we,E.width),He=window.innerWidth-ia,Je=v4(le,[ia,He-Ee]);a.style.minWidth=we+"px",a.style.left=Je+"px"}else{const Z=E.right-P.right,le=window.innerWidth-T.right-Z,B=window.innerWidth-S.right-le,we=S.width+B,Ee=Math.max(we,E.width),He=window.innerWidth-ia,Je=v4(le,[ia,He-Ee]);a.style.minWidth=we+"px",a.style.right=Je+"px"}const O=f(),R=window.innerHeight-ia*2,I=m.scrollHeight,M=window.getComputedStyle(c),z=parseInt(M.borderTopWidth,10),W=parseInt(M.paddingTop,10),q=parseInt(M.borderBottomWidth,10),Y=parseInt(M.paddingBottom,10),L=z+W+I+Y+q,K=Math.min(b.offsetHeight*5,L),G=window.getComputedStyle(m),re=parseInt(G.paddingTop,10),H=parseInt(G.paddingBottom,10),ne=S.top+S.height/2-ia,J=R-ne,Ie=b.offsetHeight/2,me=b.offsetTop+Ie,ge=z+W+me,U=L-ge;if(ge<=ne){const Z=b===O[O.length-1].ref.current;a.style.bottom="0px";const le=c.clientHeight-m.offsetTop-m.offsetHeight,B=Math.max(J,Ie+(Z?H:0)+le+q),we=ge+B;a.style.height=we+"px"}else{const Z=b===O[0].ref.current;a.style.top="0px";const le=Math.max(ne,z+m.offsetTop+(Z?re:0)+Ie)+U;a.style.height=le+"px",m.scrollTop=ge-ne+m.offsetTop}a.style.margin=`${ia}px 0`,a.style.minHeight=K+"px",a.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,c,m,b,x,i.dir,n]);Sa(()=>_(),[_]);const[j,k]=g.useState();Sa(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const N=g.useCallback(S=>{S&&v.current===!0&&(_(),w==null||w(),v.current=!1)},[_,w]);return g.createElement(cbe,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:N},g.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},g.createElement(Ln.div,St({},s,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),U4=g.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=ia,...i}=e,o=$C(r);return g.createElement(Ave,St({},o,i,{ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[cbe,ube]=hf(Ah,{}),B4="SelectViewport",dbe=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Ex(B4,r),i=ube(B4,r),o=bs(t,s.onViewportChange),a=g.useRef(0);return g.createElement(g.Fragment,null,g.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),g.createElement(Sx.Slot,{scope:r},g.createElement(Ln.div,St({"data-radix-select-viewport":"",role:"presentation"},n,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:Kn(n.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const p=window.innerHeight-ia*2,v=parseFloat(u.style.minHeight),m=parseFloat(u.style.height),b=Math.max(v,m);if(b<p){const x=b+f,w=Math.min(p,x),_=x-w;u.style.height=w+"px",u.style.bottom==="0px"&&(c.scrollTop=_>0?_:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),hbe="SelectGroup",[cHe,fbe]=hf(hbe),pbe="SelectLabel",mbe=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=fbe(pbe,r);return g.createElement(Ln.div,St({id:s.id},n,{ref:t}))}),YN="SelectItem",[gbe,sq]=hf(YN),ybe=g.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=e,a=Iu(YN,r),l=Ex(YN,r),c=a.value===n,[u,h]=g.useState(i??""),[f,p]=g.useState(!1),v=bs(t,x=>{var w;return(w=l.itemRefCallback)===null||w===void 0?void 0:w.call(l,x,n,s)}),m=IB(),b=()=>{s||(a.onValueChange(n),a.onOpenChange(!1))};return g.createElement(gbe,{scope:r,value:n,disabled:s,textId:m,isSelected:c,onItemTextChange:g.useCallback(x=>{h(w=>{var _;return w||((_=x==null?void 0:x.textContent)!==null&&_!==void 0?_:"").trim()})},[])},g.createElement(Sx.ItemSlot,{scope:r,value:n,disabled:s,textValue:u},g.createElement(Ln.div,St({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},o,{ref:v,onFocus:Kn(o.onFocus,()=>p(!0)),onBlur:Kn(o.onBlur,()=>p(!1)),onPointerUp:Kn(o.onPointerUp,b),onPointerMove:Kn(o.onPointerMove,x=>{if(s){var w;(w=l.onItemLeave)===null||w===void 0||w.call(l)}else x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Kn(o.onPointerLeave,x=>{if(x.currentTarget===document.activeElement){var w;(w=l.onItemLeave)===null||w===void 0||w.call(l)}}),onKeyDown:Kn(o.onKeyDown,x=>{var w;((w=l.searchRef)===null||w===void 0?void 0:w.current)!==""&&x.key===" "||(Zve.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})}))))}),Ly="SelectItemText",vbe=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,o=Iu(Ly,r),a=Ex(Ly,r),l=sq(Ly,r),c=Xve(Ly,r),[u,h]=g.useState(null),f=bs(t,x=>h(x),l.onItemTextChange,x=>{var w;return(w=a.itemTextRefCallback)===null||w===void 0?void 0:w.call(a,x,l.value,l.disabled)}),p=u==null?void 0:u.textContent,v=g.useMemo(()=>g.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},p),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:b}=c;return Sa(()=>(m(v),()=>b(v)),[m,b,v]),g.createElement(g.Fragment,null,g.createElement(Ln.span,St({id:l.textId},i,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Zn.createPortal(i.children,o.valueNode):null)}),bbe="SelectItemIndicator",xbe=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return sq(bbe,r).isSelected?g.createElement(Ln.span,St({"aria-hidden":!0},n,{ref:t})):null}),wbe=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return g.createElement(Ln.div,St({"aria-hidden":!0},n,{ref:t}))}),iq=g.forwardRef((e,t)=>{const{value:r,...n}=e,s=g.useRef(null),i=bs(t,s),o=Rve(r);return g.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==r&&c){const u=new Event("change",{bubbles:!0});c.call(a,r),a.dispatchEvent(u)}},[o,r]),g.createElement(Ive,{asChild:!0},g.createElement("select",St({},n,{ref:i,defaultValue:r})))});iq.displayName="BubbleSelect";function oq(e){const t=Na(e),r=g.useRef(""),n=g.useRef(0),s=g.useCallback(o=>{const a=r.current+o;t(a),function l(c){r.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(a)},[t]),i=g.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function aq(e,t,r){const n=t.length>1&&Array.from(t).every(a=>a===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let i=_be(e,Math.max(s,0));n.length===1&&(i=i.filter(a=>a!==r));const o=i.find(a=>a.textValue.toLowerCase().startsWith(n.toLowerCase()));return o!==r?o:void 0}function _be(e,t){return e.map((r,n)=>e[(t+n)%e.length])}const jbe=Qve,lq=tbe,kbe=nbe,Nbe=sbe,Sbe=ibe,cq=obe,Ebe=dbe,uq=mbe,dq=ybe,Cbe=vbe,Tbe=xbe,hq=wbe;function Gr(...e){return Az(ot(e))}const My=jbe,$y=kbe,vp=g.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(lq,{ref:n,className:Gr("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,d.jsx(Nbe,{asChild:!0,children:d.jsx(gU,{className:"h-4 w-4 opacity-50"})})]}));vp.displayName=lq.displayName;const bp=g.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>d.jsx(Sbe,{children:d.jsx(cq,{ref:s,className:Gr("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:duration-75",r==="popper"&&"data-[state=open]:slide-in-from-top-[60%] data-[state=closed]:slide-out-to-top-[60%] data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:d.jsx(Ebe,{className:Gr("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));bp.displayName=cq.displayName;const Abe=g.forwardRef(({className:e,...t},r)=>d.jsx(uq,{ref:r,className:Gr("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Abe.displayName=uq.displayName;const go=g.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(dq,{ref:n,className:Gr("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(Tbe,{children:d.jsx(gU,{className:"h-4 w-4"})})}),d.jsx(Cbe,{children:t})]}));go.displayName=dq.displayName;const Obe=g.forwardRef(({className:e,...t},r)=>d.jsx(hq,{ref:r,className:Gr("-mx-1 my-1 h-px bg-muted",e),...t}));Obe.displayName=hq.displayName;function fq(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function pq(e){const[t,r]=g.useState(void 0);return _h(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;r({width:o,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Cx="Switch",[Pbe,uHe]=Ou(Cx),[Rbe,Ibe]=Pbe(Cx),mq=g.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...h}=e,[f,p]=g.useState(null),v=Dn(t,_=>p(_)),m=g.useRef(!1),b=f?u||!!f.closest("form"):!0,[x,w]=lg({prop:s,defaultProp:i??!1,onChange:c,caller:Cx});return d.jsxs(Rbe,{scope:r,checked:x,disabled:a,children:[d.jsx(_r.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":bq(x),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:v,onClick:br(e.onClick,_=>{w(j=>!j),b&&(m.current=_.isPropagationStopped(),m.current||_.stopPropagation())})}),b&&d.jsx(vq,{control:f,bubbles:!m.current,name:n,value:l,checked:x,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});mq.displayName=Cx;var gq="SwitchThumb",yq=g.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=Ibe(gq,r);return d.jsx(_r.span,{"data-state":bq(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});yq.displayName=gq;var Dbe="SwitchBubbleInput",vq=g.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},i)=>{const o=g.useRef(null),a=Dn(o,i),l=fq(r),c=pq(t);return g.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&f){const p=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(p)}},[l,r,n]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});vq.displayName=Dbe;function bq(e){return e?"checked":"unchecked"}var xq=mq,Lbe=yq;const vm=g.forwardRef(({className:e,...t},r)=>d.jsx(xq,{className:Ye("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:d.jsx(Lbe,{className:Ye("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));vm.displayName=xq.displayName;const Mbe=J0("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:h-4 [&>svg]:w-4",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-emerald-500/50 text-emerald-600 dark:text-emerald-400 [&>svg]:text-emerald-600 dark:[&>svg]:text-emerald-400"}},defaultVariants:{variant:"default"}}),FC=g.forwardRef(({className:e,variant:t,...r},n)=>d.jsx("div",{ref:n,role:"alert",className:Gr(Mbe({variant:t}),e),...r}));FC.displayName="Alert";const zC=g.forwardRef(({className:e,...t},r)=>d.jsx("h5",{ref:r,className:Gr("mb-1 font-medium leading-none tracking-tight",e),...t}));zC.displayName="AlertTitle";const yb=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Gr("text-sm [&_p]:leading-relaxed",e),...t}));yb.displayName="AlertDescription";const $be=g.forwardRef(({className:e,variant:t="default",children:r,icon:n,...s},i)=>{const o={default:xU,destructive:hC,success:Oue}[t]||zi;return d.jsxs(FC,{ref:i,variant:t,className:Gr("flex items-start gap-3",e),...s,children:[n||d.jsx(o,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),d.jsx("div",{children:g.Children.map(r,a=>g.isValidElement(a)&&(a.type===zC||a.type===yb)?a:d.jsx(yb,{children:a}))})]})});$be.displayName="AlertWithIcon";const Fbe=Ch({name:jt().min(1,"Name is required").max(100,"Name is too long"),description:jt().max(500,"Description is too long").optional(),product_type:hb(["single_issue","bundle","chapter_pass","arc_pass"]),active:TC(),work_id:jt().nullable().optional(),content_grants:bx(Ch({type:hb(["work","chapter"]),id:jt().min(1,"Content ID is required")}))}),zbe=({product:e,onSave:t,onCancel:r,isSubmitting:n=!1})=>{var s,i;const[o,a]=g.useState([]),[l,c]=g.useState(!0),[u,h]=g.useState(null),{control:f,register:p,handleSubmit:v,reset:m,watch:b,setValue:x,formState:{errors:w}}=wC({resolver:CC(Fbe),defaultValues:{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",product_type:(e==null?void 0:e.product_type)||"single_issue",active:(e==null?void 0:e.active)??!0,work_id:(e==null?void 0:e.work_id)||null,content_grants:Array.isArray(e==null?void 0:e.content_grants)?e.content_grants:[]}}),_=b("product_type");g.useEffect(()=>{(async()=>{c(!0),h(null);try{const E=await fetch("/api/content/works");if(!E.ok)throw new Error(`Failed to fetch works: ${E.statusText}`);const T=await E.json();a(T.works||[])}catch(E){console.error("Error fetching works:",E),h("Failed to load content. Please try again later.")}finally{c(!1)}})()},[]);const j=E=>{const T={...E,work_id:E.work_id||null};t(T)},k=()=>{const E=b("content_grants")||[];x("content_grants",[...E,{type:"work",id:""}],{shouldValidate:!0})},N=E=>{const T=(b("content_grants")||[]).filter((P,O)=>O!==E);x("content_grants",T,{shouldValidate:!0})},S=(E,T,P)=>{const O=[...b("content_grants")||[]];O[E]={...O[E],[T]:P},x("content_grants",O,{shouldValidate:!0})};return l?d.jsxs("div",{className:"flex items-center justify-center p-8",children:[d.jsx(Sh,{className:"h-6 w-6 animate-spin text-primary mr-2"}),d.jsx("span",{children:"Loading form..."})]}):d.jsxs("form",{onSubmit:v(j),className:"space-y-6",children:[u&&d.jsxs(FC,{variant:"destructive",children:[d.jsx(zi,{className:"h-4 w-4"}),d.jsx(zC,{children:"Error"}),d.jsx(yb,{children:u})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ht,{htmlFor:"name",children:"Product Name *"}),d.jsx(Tn,{id:"name",placeholder:"e.g., Issue #1, Premium Bundle",...p("name"),className:w.name?"border-destructive":""}),w.name&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.name.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ht,{htmlFor:"description",children:"Description"}),d.jsx(Wi,{id:"description",placeholder:"A brief description of the product...",rows:3,...p("description"),className:w.description?"border-destructive":""}),w.description&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.description.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ht,{htmlFor:"product_type",children:"Product Type *"}),d.jsx(Kd,{name:"product_type",control:f,render:({field:E})=>d.jsxs(My,{onValueChange:E.onChange,value:E.value,children:[d.jsx(vp,{className:"w-full",children:d.jsx($y,{placeholder:"Select a product type"})}),d.jsxs(bp,{children:[d.jsx(go,{value:"single_issue",children:"Single Issue"}),d.jsx(go,{value:"bundle",children:"Bundle"}),d.jsx(go,{value:"chapter_pass",children:"Chapter Pass"}),d.jsx(go,{value:"arc_pass",children:"Arc Pass"})]})]})}),w.product_type&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.product_type.message})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Kd,{name:"active",control:f,render:({field:E})=>d.jsx(vm,{id:"active",checked:E.value,onCheckedChange:E.onChange})}),d.jsx(ht,{htmlFor:"active",children:"Active"})]}),_==="single_issue"&&d.jsxs("div",{className:"space-y-2",children:[d.jsx(ht,{htmlFor:"work_id",children:"Associated Work (Issue/Book)"}),d.jsx(Kd,{name:"work_id",control:f,render:({field:E})=>d.jsxs(My,{onValueChange:E.onChange,value:E.value||"",children:[d.jsx(vp,{children:d.jsx($y,{placeholder:"Select an associated work"})}),d.jsxs(bp,{children:[d.jsx(go,{value:"",children:"None"}),o.map(T=>d.jsxs(go,{value:T.id,children:[T.title," (",T.type,")"]},T.id))]})]})}),w.work_id&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.work_id.message})]}),(_==="bundle"||_==="chapter_pass"||_==="arc_pass")&&d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(ht,{children:"Content Grants"}),d.jsxs(Ke,{type:"button",variant:"outline",size:"sm",onClick:k,className:"text-sm",children:[d.jsx(Yi,{className:"h-3.5 w-3.5 mr-1.5"}),"Add Grant"]})]}),d.jsxs("div",{className:"space-y-3",children:[(s=b("content_grants"))==null?void 0:s.map((E,T)=>d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-1",children:[d.jsx("div",{className:"space-y-1",children:d.jsxs(My,{value:E.type,onValueChange:P=>S(T,"type",P),children:[d.jsx(vp,{children:d.jsx($y,{})}),d.jsxs(bp,{children:[d.jsx(go,{value:"work",children:"Work"}),d.jsx(go,{value:"chapter",children:"Chapter"})]})]})}),d.jsx("div",{className:"space-y-1",children:d.jsxs(My,{value:E.id,onValueChange:P=>S(T,"id",P),children:[d.jsx(vp,{children:d.jsx($y,{placeholder:`Select ${E.type}...`})}),d.jsxs(bp,{children:[o.filter(P=>E.type==="work"||P.type===E.type).map(P=>d.jsxs(go,{value:P.id,children:[P.title," (",P.type,")"]},P.id)),o.length===0&&d.jsxs("div",{className:"p-2 text-sm text-muted-foreground",children:["No ",E.type,"s found"]})]})]})})]}),d.jsxs(Ke,{type:"button",variant:"ghost",size:"icon",className:"h-10 w-10 text-destructive hover:bg-destructive/10",onClick:()=>N(T),children:[d.jsx(Ji,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Remove"})]})]},T)),((i=b("content_grants"))==null?void 0:i.length)===0&&d.jsx("div",{className:"rounded-md border border-dashed p-4 text-center",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:'No content grants added yet. Click "Add Grant" to get started.'})})]}),w.content_grants&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.content_grants.message||"Please check the content grants"})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[d.jsx(Ke,{type:"button",variant:"outline",onClick:r,disabled:n,children:"Cancel"}),d.jsx(Ke,{type:"submit",disabled:n,children:n?d.jsxs(d.Fragment,{children:[d.jsx(Sh,{className:"mr-2 h-4 w-4 animate-spin"}),e?"Updating...":"Creating..."]}):d.jsx(d.Fragment,{children:e?"Update Product":"Create Product"})})]})]})},UC=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{className:"w-full overflow-auto",children:d.jsx("table",{ref:r,className:Ye("w-full caption-bottom text-sm",e),...t})}));UC.displayName="Table";const BC=g.forwardRef(({className:e,...t},r)=>d.jsx("thead",{ref:r,className:Ye("[&_tr]:border-b",e),...t}));BC.displayName="TableHeader";const qC=g.forwardRef(({className:e,...t},r)=>d.jsx("tbody",{ref:r,className:Ye("[&_tr:last-child]:border-0",e),...t}));qC.displayName="TableBody";const Ube=g.forwardRef(({className:e,...t},r)=>d.jsx("tfoot",{ref:r,className:Ye("bg-primary font-medium text-primary-foreground",e),...t}));Ube.displayName="TableFooter";const Up=g.forwardRef(({className:e,...t},r)=>d.jsx("tr",{ref:r,className:Ye("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Up.displayName="TableRow";const ni=g.forwardRef(({className:e,...t},r)=>d.jsx("th",{ref:r,className:Ye("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ni.displayName="TableHead";const Ps=g.forwardRef(({className:e,...t},r)=>d.jsx("td",{ref:r,className:Ye("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ps.displayName="TableCell";const Bbe=g.forwardRef(({className:e,...t},r)=>d.jsx("caption",{ref:r,className:Ye("mt-4 text-sm text-muted-foreground",e),...t}));Bbe.displayName="TableCaption";const wq=f8,qbe=p8,Vbe=m8,_q=g.forwardRef(({className:e,...t},r)=>d.jsx(tC,{ref:r,className:Ye("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));_q.displayName=tC.displayName;const VC=g.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(Vbe,{children:[d.jsx(_q,{}),d.jsxs(rC,{ref:n,className:Ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,d.jsxs(iC,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(Ji,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));VC.displayName=rC.displayName;const WC=({className:e,...t})=>d.jsx("div",{className:Ye("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});WC.displayName="DialogHeader";const jq=({className:e,...t})=>d.jsx("div",{className:Ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});jq.displayName="DialogFooter";const KC=g.forwardRef(({className:e,...t},r)=>d.jsx(nC,{ref:r,className:Ye("text-lg font-semibold leading-none tracking-tight",e),...t}));KC.displayName=nC.displayName;const Wbe=g.forwardRef(({className:e,...t},r)=>d.jsx(sC,{ref:r,className:Ye("text-sm text-muted-foreground",e),...t}));Wbe.displayName=sC.displayName;function Kbe(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let JN=1;class Hbe{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...s}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:JN++,o=this.toasts.find(l=>l.id===i),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:n}),{...l,...t,id:i,dismissible:a,title:n}):l):this.addToast({title:n,...s,dismissible:a,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const a=s.then(async c=>{if(o=["resolve",c],ee.isValidElement(c))i=!1,this.create({id:n,type:"default",message:c});else if(Gbe(c)&&!c.ok){i=!1;const u=typeof r.error=="function"?await r.error(`HTTP error! status: ${c.status}`):r.error,h=typeof r.description=="function"?await r.description(`HTTP error! status: ${c.status}`):r.description,f=typeof u=="object"&&!ee.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}else if(c instanceof Error){i=!1;const u=typeof r.error=="function"?await r.error(c):r.error,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!ee.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}else if(r.success!==void 0){i=!1;const u=typeof r.success=="function"?await r.success(c):r.success,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!ee.isValidElement(u)?u:{message:u};this.create({id:n,type:"success",description:h,...f})}}).catch(async c=>{if(o=["reject",c],r.error!==void 0){i=!1;const u=typeof r.error=="function"?await r.error(c):r.error,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!ee.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,r)=>{const n=(r==null?void 0:r.id)||JN++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Qs=new Hbe,Zbe=(e,t)=>{const r=(t==null?void 0:t.id)||JN++;return Qs.addToast({title:e,...t,id:r}),r},Gbe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Ybe=Zbe,Jbe=()=>Qs.toasts,Xbe=()=>Qs.getActiveToasts(),We=Object.assign(Ybe,{success:Qs.success,info:Qs.info,warning:Qs.warning,error:Qs.error,custom:Qs.custom,message:Qs.message,promise:Qs.promise,dismiss:Qs.dismiss,loading:Qs.loading},{getHistory:Jbe,getToasts:Xbe});Kbe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Qbe=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!1),[s,i]=g.useState(!0),[o,a]=g.useState(!1),[l,c]=g.useState(null),u=async()=>{i(!0);try{const m=await fetch("/api/products");if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const b=await m.json();t(b.products),We.success("Products loaded successfully")}catch(m){console.error("Error fetching products:",m),We.error("Failed to load products")}finally{i(!1)}};g.useEffect(()=>{u()},[]);const h=async m=>{a(!0);try{let b;if(l?b=await fetch(`/api/products/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,active:m.active??!0})}):b=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,active:m.active??!0})}),!b.ok){const w=await b.json();throw new Error(w.message||"Failed to save product")}const x=await b.json();We.success(l?"Product updated successfully":"Product created successfully"),n(!1),c(null),await u()}catch(b){console.error("Error saving product:",b),We.error((b instanceof Error?b.message:String(b))||"Failed to save product")}finally{a(!1)}},f=async m=>{if(window.confirm("Are you sure you want to archive this product?"))try{const b=await fetch(`/api/products/${m}`,{method:"DELETE"});if(!b.ok){const x=await b.json();throw new Error(x.message||"Failed to delete product")}We.success("Product archived successfully"),await u()}catch(b){console.error("Error deleting product:",b),We.error((b instanceof Error?b.message:String(b))||"Failed to archive product")}},p=m=>{c(m),n(!0)},v=()=>{n(!1),c(null)};return s?d.jsxs("div",{className:"flex items-center justify-center p-8",children:[d.jsx(Sh,{className:"h-8 w-8 animate-spin text-primary"}),d.jsx("span",{className:"ml-2",children:"Loading products..."})]}):d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Products"}),d.jsxs("p",{className:"text-muted-foreground",children:[e.length," product",e.length!==1?"s":""," in your store"]})]}),d.jsxs(wq,{open:r,onOpenChange:v,children:[d.jsx(qbe,{asChild:!0,children:d.jsxs(Ke,{onClick:()=>n(!0),children:[d.jsx(Yi,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),d.jsxs(VC,{className:"sm:max-w-[700px]",children:[d.jsx(WC,{children:d.jsx(KC,{children:l?"Edit Product":"Create New Product"})}),d.jsx(zbe,{product:l,onSave:h,onCancel:v,isSubmitting:o})]})]})]}),d.jsx("div",{className:"rounded-md border",children:d.jsxs(UC,{children:[d.jsx(BC,{children:d.jsxs(Up,{children:[d.jsx(ni,{className:"w-[300px]",children:"Name"}),d.jsx(ni,{children:"Type"}),d.jsx(ni,{children:"Status"}),d.jsx(ni,{children:"Created"}),d.jsx(ni,{className:"text-right",children:"Actions"})]})}),d.jsx(qC,{children:e.length===0?d.jsx(Up,{children:d.jsx(Ps,{colSpan:5,className:"h-24 text-center",children:"No products found."})}):e.map(m=>{var b;return d.jsxs(Up,{children:[d.jsxs(Ps,{className:"font-medium",children:[d.jsx("div",{className:"font-medium",children:m.name}),d.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2",children:m.description||"No description"})]}),d.jsx(Ps,{children:d.jsx("span",{className:"inline-flex items-center rounded-full bg-secondary px-2.5 py-0.5 text-xs font-medium text-secondary-foreground capitalize",children:(b=m.product_type)==null?void 0:b.replace("_"," ")})}),d.jsx(Ps,{children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`h-2.5 w-2.5 rounded-full mr-2 ${m.active?"bg-green-500":"bg-gray-300"}`}),m.active?"Active":"Inactive"]})}),d.jsx(Ps,{children:new Date(m.created_at).toLocaleDateString()}),d.jsx(Ps,{className:"text-right",children:d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsxs(Ke,{variant:"outline",size:"sm",onClick:()=>p(m),children:[d.jsx(kU,{className:"h-4 w-4 mr-1"}),"Edit"]}),d.jsxs(Ke,{variant:"outline",size:"sm",onClick:()=>f(m.id),className:"text-destructive hover:bg-destructive/10 hover:text-destructive",children:[d.jsx(Ql,{className:"h-4 w-4 mr-1"}),"Archive"]})]})})]},m.id)})})]})})]})};function _j({className:e,...t}){return d.jsx("div",{className:`animate-pulse bg-gray-200 dark:bg-gray-700 rounded-md ${e||""}`,...t})}const xp=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Ye("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));xp.displayName="Card";const wp=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Ye("flex flex-col space-y-1.5 p-6",e),...t}));wp.displayName="CardHeader";const _p=g.forwardRef(({className:e,...t},r)=>d.jsx("h3",{ref:r,className:Ye("text-2xl font-semibold leading-none tracking-tight",e),...t}));_p.displayName="CardTitle";const e0e=g.forwardRef(({className:e,...t},r)=>d.jsx("p",{ref:r,className:Ye("text-sm text-muted-foreground",e),...t}));e0e.displayName="CardDescription";const jp=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Ye("p-6 pt-0",e),...t}));jp.displayName="CardContent";const t0e=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Ye("flex items-center p-6 pt-0",e),...t}));t0e.displayName="CardFooter";const r0e=ee.lazy(()=>Xh(()=>import("./PriceManager-CjbmDZri-BZm8dron.js"),__vite__mapDeps([0,1]))),n0e=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(_j,{className:"h-9 w-32"}),d.jsx(_j,{className:"h-9 w-24"})]}),d.jsx("div",{className:"space-y-2",children:[...Array(5)].map((e,t)=>d.jsx(_j,{className:"h-12 w-full"},t))})]}),s0e=()=>d.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Store Management"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage your store's products, pricing, and customer purchases"})]}),d.jsxs(ehe,{defaultValue:"products",className:"w-full space-y-6",children:[d.jsxs(KU,{className:"grid w-full md:w-[400px] grid-cols-2",children:[d.jsx(gp,{value:"products",children:"Products"}),d.jsx(gp,{value:"prices",children:"Pricing"}),d.jsx(gp,{value:"purchases",children:"Purchases"}),d.jsx(gp,{value:"analytics",children:"Analytics"})]}),d.jsx(yp,{value:"products",className:"space-y-4",children:d.jsxs(xp,{children:[d.jsx(wp,{children:d.jsx(_p,{children:"Product Catalog"})}),d.jsx(jp,{children:d.jsx(Qbe,{})})]})}),d.jsx(yp,{value:"prices",className:"space-y-4",children:d.jsxs(xp,{children:[d.jsx(wp,{children:d.jsx(_p,{children:"Pricing & Plans"})}),d.jsx(jp,{children:d.jsx(g.Suspense,{fallback:d.jsx(n0e,{}),children:d.jsx(r0e,{})})})]})}),d.jsx(yp,{value:"purchases",className:"space-y-4",children:d.jsxs(xp,{children:[d.jsx(wp,{children:d.jsx(_p,{children:"Purchase History"})}),d.jsx(jp,{children:d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-muted-foreground",children:[d.jsx("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}),d.jsx("path",{d:"M3 6h18"}),d.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]})}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"Purchase History"}),d.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"View and manage customer purchases, refunds, and order history."})]})})]})}),d.jsx(yp,{value:"analytics",className:"space-y-4",children:d.jsxs(xp,{children:[d.jsx(wp,{children:d.jsx(_p,{children:"Store Analytics"})}),d.jsx(jp,{children:d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-muted-foreground",children:[d.jsx("path",{d:"M3 3v18h18"}),d.jsx("path",{d:"m19 9-5 5-4-4-3 3"})]})}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sales Analytics"}),d.jsx("p",{className:"text-sm text-muted-foreground max-w-md mb-4",children:"View detailed analytics and reports about your store's performance."}),d.jsx(Ke,{disabled:!0,children:"Coming Soon"})]})})]})})]})]}),i0e=async()=>{const{data:e,error:t}=await fe.from("works").select("*").order("order_in_parent",{ascending:!0});if(t)throw new Error(t.message);return e},o0e=async e=>{if(!e)return[];const{data:t,error:r}=await fe.from("purchases").select(`
      id,
      user_id,
      product_id,
      purchased_at,
      status,
      products (
        name,
        description,
        product_type,
        work_id
      )
    `).eq("user_id",e);if(r)throw new Error(r.message);return t.map(n=>{var s,i,o,a;return{id:n.id,user_id:n.user_id,product_id:n.product_id,purchased_at:n.purchased_at,status:n.status,product_title:((s=n.products)==null?void 0:s.name)||"Unknown Product",product_description:(i=n.products)==null?void 0:i.description,product_type:((o=n.products)==null?void 0:o.product_type)||"single_issue",work_id:(a=n.products)==null?void 0:a.work_id}})},a0e=async(e,t)=>{if(!e||!t)return null;const{data:r,error:n}=await fe.from("user_ratings").select("rating").eq("user_id",e).eq("work_id",t).single();if(n&&n.code!=="PGRST116")throw new Error(n.message);return r?r.rating:null},l0e=async(e,t,r)=>{const{data:n,error:s}=await fe.from("user_ratings").upsert({user_id:e,work_id:t,rating:r},{onConflict:"user_id,work_id"}).select();if(s)throw new Error(s.message);return n[0]},c0e=({work:e,userLibraryItem:t,queryClient:r})=>{var n,s;const{user:i}=ix(),[o,a]=g.useState(null),[l,c]=g.useState(!1),[u,h]=g.useState(!1),{data:f}=Rt({queryKey:["userRating",i==null?void 0:i.id,e.id],queryFn:()=>a0e((i==null?void 0:i.id)||"",e.id),enabled:!!(i!=null&&i.id)});g.useEffect(()=>{f!==void 0&&a(f)},[f]);const p=kt({mutationFn:({userId:x,workId:w,rating:_})=>l0e(x,w,_),onSuccess:()=>{r.invalidateQueries({queryKey:["userRating",i==null?void 0:i.id,e.id]}),r.invalidateQueries({queryKey:["allWorks"]})},onError:x=>{alert(`Error submitting rating: ${x.message}`)}}),v=x=>{if(!i){alert("Please log in to submit a rating.");return}i.id&&p.mutate({userId:i.id,workId:e.id,rating:x})},m=e.word_count&&e.target_word_count?Math.min(100,Math.round(e.word_count/e.target_word_count*100)):e.progress_percentage||0,b="S. Azar";return d.jsxs("article",{className:"book-card","data-book-id":e.id,"aria-label":`Book card: ${e.title} by ${b}`,children:[d.jsxs("div",{className:"book-main",children:[d.jsx("div",{className:"cover",role:"img","aria-label":`Book cover: ${e.title} by ${b}`,style:{background:e.cover_image_url?`url(${e.cover_image_url}) center center / cover`:"var(--teal)"},children:!e.cover_image_url&&d.jsxs("div",{className:"cover-content",children:[d.jsx("div",{className:"cover-title",children:e.title}),d.jsx("div",{className:"cover-author",children:b})]})}),d.jsxs("div",{className:"details",children:[d.jsxs("div",{className:"book-header",children:[d.jsx("h3",{className:"book-title",children:e.title}),d.jsx("div",{className:"author",children:b})]}),(e.release_date||e.estimated_release)&&d.jsx("div",{className:"release-info text-sm text-muted mt-1",children:e.release_date?d.jsxs("span",{children:["Released: ",new Date(e.release_date).toLocaleDateString()]}):d.jsxs("span",{children:["Estimated Release: ",e.estimated_release]})}),(e.status==="planning"||e.status==="writing"||e.status==="editing")&&d.jsxs("div",{className:"progress","aria-label":"Author writing progress",children:[d.jsxs("div",{className:"progress-head",children:[d.jsxs("span",{children:[m,"% written"]}),d.jsxs("span",{"aria-live":"polite",children:[m,"%"]})]}),d.jsx("div",{className:"bar",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":m,"aria-label":"Author writing progress",children:d.jsx("span",{style:{width:`${m}%`}})})]}),d.jsx("p",{className:"desc",children:e.description||"No description available."}),d.jsxs("div",{className:"rating","aria-label":`Rating ${((n=e.rating)==null?void 0:n.toFixed(1))||"0.0"} out of 5 based on ${e.reviews_count||0} reviews`,children:[d.jsx("span",{className:"stars","aria-hidden":"true",children:[...Array(5)].map((x,w)=>d.jsx(dg,{className:`star ${w<(o!==null?o:Math.floor(e.rating||0))?"filled":""}`,onClick:()=>v(w+1),onMouseEnter:()=>i&&a(w+1),onMouseLeave:()=>i&&a(f??null),style:{cursor:i?"pointer":"default"}},w))}),d.jsx("span",{children:((s=e.rating)==null?void 0:s.toFixed(1))||"0.0"}),d.jsxs("small",{children:["• ",e.reviews_count||0," reviews"]})]}),d.jsx("div",{className:"actions",children:t?d.jsx(d.Fragment,{children:d.jsx("button",{className:"btn primary",children:"Open"})}):d.jsx("button",{className:"btn primary",children:"Buy now"})}),e.sample_content&&d.jsxs("button",{className:"sample-toggle-btn",onClick:()=>c(!l),"aria-expanded":l,children:[d.jsx("span",{children:"Read Sample"}),d.jsx("svg",{className:`toggle-arrow ${l?"expanded":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d.jsx("polyline",{points:"6,9 12,15 18,9"})})]})]})]}),l&&e.sample_content&&d.jsxs("div",{className:"sample-card expanded",children:[d.jsx("div",{className:"sample-header",children:d.jsxs("h4",{children:['Sample from "',e.title,'"']})}),d.jsx("div",{className:"sample-excerpt",children:d.jsx("p",{children:e.sample_content})}),d.jsx("div",{className:"sample-actions",children:t?d.jsx("button",{className:"continue-btn",children:"Continue reading"}):d.jsx("button",{className:"buy-btn",children:"Buy now"})})]})]})},u0e=()=>{const{user:e}=ix(),t=so(),{data:r,isLoading:n,isError:s,error:i}=Rt({queryKey:["allWorks"],queryFn:i0e}),{data:o,isLoading:a,isError:l,error:c}=Rt({queryKey:["userLibraryItems",e==null?void 0:e.id],queryFn:()=>o0e((e==null?void 0:e.id)||""),enabled:!!(e!=null&&e.id)}),[u,h]=g.useState(!0),[f,p]=g.useState("All"),[v,m]=g.useState("All"),b=(r==null?void 0:r.filter(x=>{const w=f==="All"||x.type===f.toLowerCase(),_=v==="All"||x.status===v.toLowerCase();return w&&_}))||[];return n||a?d.jsx("div",{className:"text-center py-8 text-text-light",children:"Loading library..."}):s?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading works: ",i==null?void 0:i.message]}):l?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading user library: ",c==null?void 0:c.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8 bg-background-dark text-text-light min-h-screen",children:[d.jsx("h1",{className:"text-4xl font-bold text-text-light mb-6",children:"Your Library"}),u&&d.jsxs("div",{className:"bg-blue-900 bg-opacity-30 border border-blue-700 text-blue-200 p-4 rounded-md mb-6 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(xU,{size:20}),d.jsx("p",{className:"text-sm",children:"Files may include a purchaser-specific watermark. Download limits: 5 per format."})]}),d.jsx("button",{onClick:()=>h(!1),className:"text-blue-200 hover:text-white",children:d.jsx(hC,{size:20})})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.jsx("button",{onClick:()=>p("All"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="All"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"All"}),d.jsx("button",{onClick:()=>p("Book"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Book"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Books"}),d.jsx("button",{onClick:()=>p("Volume"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Volume"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Volumes"}),d.jsx("button",{onClick:()=>p("Saga"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Saga"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Sagas"}),d.jsx("button",{onClick:()=>p("Arc"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Arc"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Arcs"}),d.jsx("button",{onClick:()=>p("Issue"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Issue"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Issues"}),d.jsxs("select",{value:v,onChange:x=>m(x.target.value),className:"px-3 py-2 rounded-full text-sm font-semibold bg-gray-700 text-gray-300 hover:bg-gray-600",children:[d.jsx("option",{value:"All",children:"All Status"}),d.jsx("option",{value:"Published",children:"Published"}),d.jsx("option",{value:"Planning",children:"Planning"}),d.jsx("option",{value:"Writing",children:"Writing"}),d.jsx("option",{value:"Editing",children:"Editing"}),d.jsx("option",{value:"On_hold",children:"On Hold"})]})]}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:d.jsx("div",{className:"lg:col-span-3",children:d.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8",children:b.map(x=>{const w=o==null?void 0:o.find(_=>_.work_id===x.id);return d.jsx(c0e,{work:x,userLibraryItem:w,queryClient:t},x.id)})})})})]})};var kq="basil",d0e=function(e){return e===3?"v3":e},Nq="https://js.stripe.com",h0e="".concat(Nq,"/").concat(kq,"/stripe.js"),f0e=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,p0e=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,m0e=function(e){return f0e.test(e)||p0e.test(e)},g0e=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Nq,'"]')),t=0;t<e.length;t++){var r=e[t];if(m0e(r.src))return r}return null},q4=function(e){var t="",r=document.createElement("script");r.src="".concat(h0e).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},y0e=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})},Yf=null,Fy=null,zy=null,v0e=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},b0e=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},x0e=function(e){return Yf!==null?Yf:(Yf=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var n=g0e();if(!(n&&e)){if(!n)n=q4(e);else if(n&&zy!==null&&Fy!==null){var s;n.removeEventListener("load",zy),n.removeEventListener("error",Fy),(s=n.parentNode)===null||s===void 0||s.removeChild(n),n=q4(e)}}zy=b0e(t,r),Fy=v0e(r),n.addEventListener("load",zy),n.addEventListener("error",Fy)}catch(i){r(i);return}}),Yf.catch(function(t){return Yf=null,Promise.reject(t)}))},w0e=function(e,t,r){if(e===null)return null;var n=t[0],s=n.match(/^pk_test/),i=d0e(e.version),o=kq;s&&i!==o&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(o,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return y0e(a,r),a},Uy,Sq=!1,Eq=function(){return Uy||(Uy=x0e(null).catch(function(e){return Uy=null,Promise.reject(e)}),Uy)};Promise.resolve().then(function(){return Eq()}).catch(function(e){Sq||console.warn(e)});var _0e=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Sq=!0;var n=Date.now();return Eq().then(function(s){return w0e(s,t,n)})};const HC=g.createContext({});function ZC(e){const t=g.useRef(null);return t.current===null&&(t.current=e()),t.current}const GC=typeof window<"u",Cq=GC?g.useLayoutEffect:g.useEffect,Tx=g.createContext(null);function YC(e,t){e.indexOf(t)===-1&&e.push(t)}function JC(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Ta=(e,t,r)=>r>t?t:r<e?e:r;let XC=()=>{};const Aa={},Tq=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Aq(e){return typeof e=="object"&&e!==null}const Oq=e=>/^0[^.\s]+$/u.test(e);function QC(e){let t;return()=>(t===void 0&&(t=e()),t)}const di=e=>e,j0e=(e,t)=>r=>t(e(r)),gg=(...e)=>e.reduce(j0e),bm=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class eT{constructor(){this.subscriptions=[]}add(t){return YC(this.subscriptions,t),()=>JC(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const To=e=>e*1e3,Ao=e=>e/1e3;function Pq(e,t){return t?e*(1e3/t):0}const Rq=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,k0e=1e-7,N0e=12;function S0e(e,t,r,n,s){let i,o,a=0;do o=t+(r-t)/2,i=Rq(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>k0e&&++a<N0e);return o}function yg(e,t,r,n){if(e===t&&r===n)return di;const s=i=>S0e(i,0,1,e,r);return i=>i===0||i===1?i:Rq(s(i),t,n)}const Iq=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Dq=e=>t=>1-e(1-t),Lq=yg(.33,1.53,.69,.99),tT=Dq(Lq),Mq=Iq(tT),$q=e=>(e*=2)<1?.5*tT(e):.5*(2-Math.pow(2,-10*(e-1))),rT=e=>1-Math.sin(Math.acos(e)),Fq=Dq(rT),zq=Iq(rT),E0e=yg(.42,0,1,1),C0e=yg(0,0,.58,1),Uq=yg(.42,0,.58,1),T0e=e=>Array.isArray(e)&&typeof e[0]!="number",Bq=e=>Array.isArray(e)&&typeof e[0]=="number",A0e={linear:di,easeIn:E0e,easeInOut:Uq,easeOut:C0e,circIn:rT,circInOut:zq,circOut:Fq,backIn:tT,backInOut:Mq,backOut:Lq,anticipate:$q},O0e=e=>typeof e=="string",V4=e=>{if(Bq(e)){XC(e.length===4);const[t,r,n,s]=e;return yg(t,r,n,s)}else if(O0e(e))return A0e[e];return e},By=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function P0e(e,t){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),e()),u(a)}const c={schedule:(u,h=!1,f=!1)=>{const p=f&&s?r:n;return h&&o.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(a=u,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,i&&(i=!1,c.process(u))}};return c}const R0e=40;function qq(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=By.reduce((x,w)=>(x[w]=P0e(i),x),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:f,render:p,postRender:v}=o,m=()=>{const x=Aa.useManualTiming?s.timestamp:performance.now();r=!1,Aa.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(x-s.timestamp,R0e),1)),s.timestamp=x,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),h.process(s),f.process(s),p.process(s),v.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(m))},b=()=>{r=!0,n=!0,s.isProcessing||e(m)};return{schedule:By.reduce((x,w)=>{const _=o[w];return x[w]=(j,k=!1,N=!1)=>(r||b(),_.schedule(j,k,N)),x},{}),cancel:x=>{for(let w=0;w<By.length;w++)o[By[w]].cancel(x)},state:s,steps:o}}const{schedule:Ht,cancel:ql,state:gn,steps:jj}=qq(typeof requestAnimationFrame<"u"?requestAnimationFrame:di,!0);let Sv;function I0e(){Sv=void 0}const gs={now:()=>(Sv===void 0&&gs.set(gn.isProcessing||Aa.useManualTiming?gn.timestamp:performance.now()),Sv),set:e=>{Sv=e,queueMicrotask(I0e)}},Vq=e=>t=>typeof t=="string"&&t.startsWith(e),nT=Vq("--"),D0e=Vq("var(--"),sT=e=>D0e(e)?L0e.test(e.split("/*")[0].trim()):!1,L0e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ff={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},xm={...ff,transform:e=>Ta(0,1,e)},qy={...ff,default:1},Bp=e=>Math.round(e*1e5)/1e5,iT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function M0e(e){return e==null}const $0e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,oT=(e,t)=>r=>!!(typeof r=="string"&&$0e.test(r)&&r.startsWith(e)||t&&!M0e(r)&&Object.prototype.hasOwnProperty.call(r,t)),Wq=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,a]=n.match(iT);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},F0e=e=>Ta(0,255,e),kj={...ff,transform:e=>Math.round(F0e(e))},Mc={test:oT("rgb","red"),parse:Wq("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+kj.transform(e)+", "+kj.transform(t)+", "+kj.transform(r)+", "+Bp(xm.transform(n))+")"};function z0e(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const XN={test:oT("#"),parse:z0e,transform:Mc.transform},vg=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),dl=vg("deg"),Oo=vg("%"),Ve=vg("px"),U0e=vg("vh"),B0e=vg("vw"),W4={...Oo,parse:e=>Oo.parse(e)/100,transform:e=>Oo.transform(e*100)},Rd={test:oT("hsl","hue"),parse:Wq("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Oo.transform(Bp(t))+", "+Oo.transform(Bp(r))+", "+Bp(xm.transform(n))+")"},Ar={test:e=>Mc.test(e)||XN.test(e)||Rd.test(e),parse:e=>Mc.test(e)?Mc.parse(e):Rd.test(e)?Rd.parse(e):XN.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Mc.transform(e):Rd.transform(e),getAnimatableNone:e=>{const t=Ar.parse(e);return t.alpha=0,Ar.transform(t)}},q0e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function V0e(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(iT))==null?void 0:t.length)||0)+(((r=e.match(q0e))==null?void 0:r.length)||0)>0}const Kq="number",Hq="color",W0e="var",K0e="var(",K4="${}",H0e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wm(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const o=t.replace(H0e,a=>(Ar.test(a)?(n.color.push(i),s.push(Hq),r.push(Ar.parse(a))):a.startsWith(K0e)?(n.var.push(i),s.push(W0e),r.push(a)):(n.number.push(i),s.push(Kq),r.push(parseFloat(a))),++i,K4)).split(K4);return{values:r,split:o,indexes:n,types:s}}function Zq(e){return wm(e).values}function Gq(e){const{split:t,types:r}=wm(e),n=t.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],s[o]!==void 0){const a=r[o];a===Kq?i+=Bp(s[o]):a===Hq?i+=Ar.transform(s[o]):i+=s[o]}return i}}const Z0e=e=>typeof e=="number"?0:Ar.test(e)?Ar.getAnimatableNone(e):e;function G0e(e){const t=Zq(e);return Gq(e)(t.map(Z0e))}const Vl={test:V0e,parse:Zq,createTransformer:Gq,getAnimatableNone:G0e};function Nj(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Y0e({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const a=r<.5?r*(1+t):r+t-r*t,l=2*r-a;s=Nj(l,a,e+1/3),i=Nj(l,a,e),o=Nj(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function vb(e,t){return r=>r>0?t:e}const rr=(e,t,r)=>e+(t-e)*r,Sj=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},J0e=[XN,Mc,Rd],X0e=e=>J0e.find(t=>t.test(e));function H4(e){const t=X0e(e);if(!t)return!1;let r=t.parse(e);return t===Rd&&(r=Y0e(r)),r}const Z4=(e,t)=>{const r=H4(e),n=H4(t);if(!r||!n)return vb(e,t);const s={...r};return i=>(s.red=Sj(r.red,n.red,i),s.green=Sj(r.green,n.green,i),s.blue=Sj(r.blue,n.blue,i),s.alpha=rr(r.alpha,n.alpha,i),Mc.transform(s))},QN=new Set(["none","hidden"]);function Q0e(e,t){return QN.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function exe(e,t){return r=>rr(e,t,r)}function aT(e){return typeof e=="number"?exe:typeof e=="string"?sT(e)?vb:Ar.test(e)?Z4:nxe:Array.isArray(e)?Yq:typeof e=="object"?Ar.test(e)?Z4:txe:vb}function Yq(e,t){const r=[...e],n=r.length,s=e.map((i,o)=>aT(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function txe(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=aT(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function rxe(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][n[i]],a=e.values[o]??0;r[s]=a,n[i]++}return r}const nxe=(e,t)=>{const r=Vl.createTransformer(t),n=wm(e),s=wm(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?QN.has(e)&&!s.values.length||QN.has(t)&&!n.values.length?Q0e(e,t):gg(Yq(rxe(n,s),s.values),r):vb(e,t)};function Jq(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?rr(e,t,r):aT(e)(e,t)}const sxe=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Ht.update(t,r),stop:()=>ql(t),now:()=>gn.isProcessing?gn.timestamp:gs.now()}},Xq=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},bb=2e4;function lT(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<bb;)t+=r,n=e.next(t);return t>=bb?1/0:t}function ixe(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(lT(n),bb);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:Ao(s)}}const oxe=5;function Qq(e,t,r){const n=Math.max(t-oxe,0);return Pq(r-e(n),t-n)}const hr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ej=.001;function axe({duration:e=hr.duration,bounce:t=hr.bounce,velocity:r=hr.velocity,mass:n=hr.mass}){let s,i,o=1-t;o=Ta(hr.minDamping,hr.maxDamping,o),e=Ta(hr.minDuration,hr.maxDuration,Ao(e)),o<1?(s=c=>{const u=c*o,h=u*e,f=u-r,p=eS(c,o),v=Math.exp(-h);return Ej-f/p*v},i=c=>{const u=c*o*e,h=u*r+r,f=Math.pow(o,2)*Math.pow(c,2)*e,p=Math.exp(-u),v=eS(Math.pow(c,2),o);return(-s(c)+Ej>0?-1:1)*((h-f)*p)/v}):(s=c=>{const u=Math.exp(-c*e),h=(c-r)*e+1;return-Ej+u*h},i=c=>{const u=Math.exp(-c*e),h=(r-c)*(e*e);return u*h});const a=5/e,l=cxe(s,i,a);if(e=To(e),isNaN(l))return{stiffness:hr.stiffness,damping:hr.damping,duration:e};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:e}}}const lxe=12;function cxe(e,t,r){let n=r;for(let s=1;s<lxe;s++)n=n-e(n)/t(n);return n}function eS(e,t){return e*Math.sqrt(1-t*t)}const uxe=["duration","bounce"],dxe=["stiffness","damping","mass"];function G4(e,t){return t.some(r=>e[r]!==void 0)}function hxe(e){let t={velocity:hr.velocity,stiffness:hr.stiffness,damping:hr.damping,mass:hr.mass,isResolvedFromDuration:!1,...e};if(!G4(e,dxe)&&G4(e,uxe))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*Ta(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:hr.mass,stiffness:s,damping:i}}else{const r=axe(e);t={...t,...r,mass:hr.mass},t.isResolvedFromDuration=!0}return t}function xb(e=hr.visualDuration,t=hr.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=hxe({...r,velocity:-Ao(r.velocity||0)}),v=f||0,m=c/(2*Math.sqrt(l*u)),b=o-i,x=Ao(Math.sqrt(l/u)),w=Math.abs(b)<5;n||(n=w?hr.restSpeed.granular:hr.restSpeed.default),s||(s=w?hr.restDelta.granular:hr.restDelta.default);let _;if(m<1){const k=eS(x,m);_=N=>{const S=Math.exp(-m*x*N);return o-S*((v+m*x*b)/k*Math.sin(k*N)+b*Math.cos(k*N))}}else if(m===1)_=k=>o-Math.exp(-x*k)*(b+(v+x*b)*k);else{const k=x*Math.sqrt(m*m-1);_=N=>{const S=Math.exp(-m*x*N),E=Math.min(k*N,300);return o-S*((v+m*x*b)*Math.sinh(E)+k*b*Math.cosh(E))/k}}const j={calculatedDuration:p&&h||null,next:k=>{const N=_(k);if(p)a.done=k>=h;else{let S=k===0?v:0;m<1&&(S=k===0?To(v):Qq(_,k,N));const E=Math.abs(S)<=n,T=Math.abs(o-N)<=s;a.done=E&&T}return a.value=a.done?o:N,a},toString:()=>{const k=Math.min(lT(j),bb),N=Xq(S=>j.next(k*S).value,k,30);return k+"ms "+N},toTransition:()=>{}};return j}xb.applyToOptions=e=>{const t=ixe(e,100,xb);return e.ease=t.ease,e.duration=To(t.duration),e.type="keyframes",e};function tS({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,v=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let m=r*t;const b=h+m,x=o===void 0?b:o(b);x!==b&&(m=x-h);const w=E=>-m*Math.exp(-E/n),_=E=>x+w(E),j=E=>{const T=w(E),P=_(E);f.done=Math.abs(T)<=c,f.value=f.done?x:P};let k,N;const S=E=>{p(f.value)&&(k=E,N=xb({keyframes:[f.value,v(f.value)],velocity:Qq(_,E,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:E=>{let T=!1;return!N&&k===void 0&&(T=!0,j(E),S(E)),k!==void 0&&E>=k?N.next(E-k):(!T&&j(E),f)}}}function fxe(e,t,r){const n=[],s=r||Aa.mix||Jq,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||di:t;a=gg(l,a)}n.push(a)}return n}function pxe(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(XC(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=fxe(t,n,s),l=a.length,c=u=>{if(o&&u<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const f=bm(e[h],e[h+1],u);return a[h](f)};return r?u=>c(Ta(e[0],e[i-1],u)):c}function mxe(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=bm(0,t,n);e.push(rr(r,1,s))}}function gxe(e){const t=[0];return mxe(t,e.length-1),t}function yxe(e,t){return e.map(r=>r*t)}function vxe(e,t){return e.map(()=>t||Uq).splice(0,e.length-1)}function qp({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=T0e(n)?n.map(V4):V4(n),i={done:!1,value:t[0]},o=yxe(r&&r.length===t.length?r:gxe(t),e),a=pxe(o,t,{ease:Array.isArray(s)?s:vxe(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const bxe=e=>e!==null;function cT(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(bxe),o=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!o||n===void 0?i[o]:n}const xxe={decay:tS,inertia:tS,tween:qp,keyframes:qp,spring:xb};function e7(e){typeof e.type=="string"&&(e.type=xxe[e.type])}class uT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const wxe=e=>e/100;class dT extends uT{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,n;const{motionValue:s}=this.options;s&&s.updatedAt!==gs.now()&&this.tick(gs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(r=this.options).onStop)==null||n.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;e7(t);const{type:r=qp,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=r||qp;l!==qp&&typeof a[0]!="number"&&(this.mixKeyframes=gg(wxe,Jq(a[0],a[1])),a=[0,100]);const c=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=lT(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=c}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:c=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:p,type:v,onUpdate:m,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const x=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,j=n;if(h){const E=Math.min(this.currentTime,s)/a;let T=Math.floor(E),P=E%1;!P&&E>=1&&(P=1),P===1&&T--,T=Math.min(T,h+1),T%2&&(f==="reverse"?(P=1-P,p&&(P-=p/a)):f==="mirror"&&(j=o)),_=Ta(0,1,P)*a}const k=w?{done:!1,value:u[0]}:j.next(_);i&&(k.value=i(k.value));let{done:N}=k;!w&&l!==null&&(N=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return S&&v!==tS&&(k.value=cT(u,this.options,b,this.speed)),m&&m(k.value),S&&this.finish(),k}then(t,r){return this.finished.then(t,r)}get duration(){return Ao(this.calculatedDuration)}get time(){return Ao(this.currentTime)}set time(t){var r;t=To(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(gs.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Ao(this.currentTime))}play(){var t,r;if(this.isStopped)return;const{driver:n=sxe,startTime:s}=this.options;this.driver||(this.driver=n(o=>this.tick(o))),(r=(t=this.options).onPlay)==null||r.call(t);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=s??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(gs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function _xe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const $c=e=>e*180/Math.PI,rS=e=>{const t=$c(Math.atan2(e[1],e[0]));return nS(t)},jxe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:rS,rotateZ:rS,skewX:e=>$c(Math.atan(e[1])),skewY:e=>$c(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},nS=e=>(e=e%360,e<0&&(e+=360),e),Y4=rS,J4=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),X4=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),kxe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:J4,scaleY:X4,scale:e=>(J4(e)+X4(e))/2,rotateX:e=>nS($c(Math.atan2(e[6],e[5]))),rotateY:e=>nS($c(Math.atan2(-e[2],e[0]))),rotateZ:Y4,rotate:Y4,skewX:e=>$c(Math.atan(e[4])),skewY:e=>$c(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function sS(e){return e.includes("scale")?1:0}function iS(e,t){if(!e||e==="none")return sS(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=kxe,s=r;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=jxe,s=a}if(!s)return sS(t);const i=n[t],o=s[1].split(",").map(Sxe);return typeof i=="function"?i(o):o[i]}const Nxe=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return iS(r,t)};function Sxe(e){return parseFloat(e.trim())}const pf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mf=new Set(pf),Q4=e=>e===ff||e===Ve,Exe=new Set(["x","y","z"]),Cxe=pf.filter(e=>!Exe.has(e));function Txe(e){const t=[];return Cxe.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Qc={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>iS(t,"x"),y:(e,{transform:t})=>iS(t,"y")};Qc.translateX=Qc.x;Qc.translateY=Qc.y;const eu=new Set;let oS=!1,aS=!1,lS=!1;function t7(){if(aS){const e=Array.from(eu).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=Txe(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var a;(a=n.getValue(i))==null||a.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}aS=!1,oS=!1,eu.forEach(e=>e.complete(lS)),eu.clear()}function r7(){eu.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(aS=!0)})}function Axe(){lS=!0,r7(),t7(),lS=!1}class hT{constructor(t,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(eu.add(this),oS||(oS=!0,Ht.read(r7),Ht.resolveKeyframes(t7))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const a=n.readValue(r,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}_xe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),eu.delete(this)}cancel(){this.state==="scheduled"&&(eu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Oxe=e=>e.startsWith("--");function Pxe(e,t,r){Oxe(t)?e.style.setProperty(t,r):e.style[t]=r}const Rxe=QC(()=>window.ScrollTimeline!==void 0),Ixe={};function Dxe(e,t){const r=QC(e);return()=>Ixe[t]??r()}const n7=Dxe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),kp=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,eD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:kp([0,.65,.55,1]),circOut:kp([.55,0,1,.45]),backIn:kp([.31,.01,.66,-.59]),backOut:kp([.33,1.53,.69,.99])};function s7(e,t){if(e)return typeof e=="function"?n7()?Xq(e,t):"ease-out":Bq(e)?kp(e):Array.isArray(e)?e.map(r=>s7(r,t)||eD.easeOut):eD[e]}function Lxe(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[t]:r};l&&(u.offset=l);const h=s7(a,s);Array.isArray(h)&&(u.easing=h);const f={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(u,f)}function i7(e){return typeof e=="function"&&"applyToOptions"in e}function Mxe({type:e,...t}){return i7(e)&&n7()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class $xe extends uT{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,XC(typeof t.type!="string");const c=Mxe(t);this.animation=Lxe(r,n,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=cT(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):Pxe(r,n,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var t,r;const n=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Ao(Number(n))}get time(){return Ao(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=To(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Rxe()?(this.animation.timeline=t,di):r(this)}}const o7={anticipate:$q,backInOut:Mq,circInOut:zq};function Fxe(e){return e in o7}function zxe(e){typeof e.ease=="string"&&Fxe(e.ease)&&(e.ease=o7[e.ease])}const tD=10;class Uxe extends $xe{constructor(t){zxe(t),e7(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const a=new dT({...o,autoplay:!1}),l=To(this.finishedTime??this.time);r.setWithVelocity(a.sample(l-tD).value,a.sample(l).value,tD),a.stop()}}const rD=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Vl.test(e)||e==="0")&&!e.startsWith("url("));function Bxe(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function qxe(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=rD(s,t),a=rD(i,t);return!o||!a?!1:Bxe(e)||(r==="spring"||i7(r))&&n}function cS(e){e.duration=0,e.type}const Vxe=new Set(["opacity","clipPath","filter","transform"]),Wxe=QC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Kxe(e){var t;const{motionValue:r,name:n,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!(((t=r==null?void 0:r.owner)==null?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=r.owner.getProps();return Wxe()&&n&&Vxe.has(n)&&(n!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}const Hxe=40;class Zxe extends uT{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...h}){var f;super(),this.stop=()=>{var m,b;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=gs.now();const p={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:c,element:u,...h},v=(u==null?void 0:u.KeyframeResolver)||hT;this.keyframeResolver=new v(a,(m,b,x)=>this.onKeyframesResolved(m,b,p,!x),l,c,u),(f=this.keyframeResolver)==null||f.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=n;this.resolvedAt=gs.now(),qxe(t,i,o,a)||((Aa.instantAnimations||!l)&&(u==null||u(cT(t,n,r))),t[0]=t[t.length-1],cS(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Hxe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},f=!c&&Kxe(h)?new Uxe({...h,element:h.motionValue.owner.current}):new dT(h);f.finished.then(()=>this.notifyFinished()).catch(di),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Axe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Gxe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Yxe(e){const t=Gxe.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function a7(e,t,r=1){const[n,s]=Yxe(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return Tq(o)?parseFloat(o):o}return sT(s)?a7(s,t,r+1):s}function fT(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const l7=new Set(["width","height","top","left","right","bottom",...pf]),Jxe={test:e=>e==="auto",parse:e=>e},c7=e=>t=>t.test(e),u7=[ff,Ve,Oo,dl,B0e,U0e,Jxe],nD=e=>u7.find(c7(e));function Xxe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Oq(e):!0}const Qxe=new Set(["brightness","contrast","saturate","opacity"]);function ewe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(iT)||[];if(!n)return e;const s=r.replace(n,"");let i=Qxe.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const twe=/\b([a-z-]*)\(.*?\)/gu,uS={...Vl,getAnimatableNone:e=>{const t=e.match(twe);return t?t.map(ewe).join(" "):e}},sD={...ff,transform:Math.round},rwe={rotate:dl,rotateX:dl,rotateY:dl,rotateZ:dl,scale:qy,scaleX:qy,scaleY:qy,scaleZ:qy,skew:dl,skewX:dl,skewY:dl,distance:Ve,translateX:Ve,translateY:Ve,translateZ:Ve,x:Ve,y:Ve,z:Ve,perspective:Ve,transformPerspective:Ve,opacity:xm,originX:W4,originY:W4,originZ:Ve},pT={borderWidth:Ve,borderTopWidth:Ve,borderRightWidth:Ve,borderBottomWidth:Ve,borderLeftWidth:Ve,borderRadius:Ve,radius:Ve,borderTopLeftRadius:Ve,borderTopRightRadius:Ve,borderBottomRightRadius:Ve,borderBottomLeftRadius:Ve,width:Ve,maxWidth:Ve,height:Ve,maxHeight:Ve,top:Ve,right:Ve,bottom:Ve,left:Ve,padding:Ve,paddingTop:Ve,paddingRight:Ve,paddingBottom:Ve,paddingLeft:Ve,margin:Ve,marginTop:Ve,marginRight:Ve,marginBottom:Ve,marginLeft:Ve,backgroundPositionX:Ve,backgroundPositionY:Ve,...rwe,zIndex:sD,fillOpacity:xm,strokeOpacity:xm,numOctaves:sD},nwe={...pT,color:Ar,backgroundColor:Ar,outlineColor:Ar,fill:Ar,stroke:Ar,borderColor:Ar,borderTopColor:Ar,borderRightColor:Ar,borderBottomColor:Ar,borderLeftColor:Ar,filter:uS,WebkitFilter:uS},d7=e=>nwe[e];function h7(e,t){let r=d7(e);return r!==uS&&(r=Vl),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const swe=new Set(["auto","none","0"]);function iwe(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!swe.has(i)&&wm(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=h7(r,s)}class owe extends hT{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),sT(c))){const u=a7(c,r.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!l7.has(n)||t.length!==2)return;const[s,i]=t,o=nD(s),a=nD(i);if(o!==a)if(Q4(o)&&Q4(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Qc[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||Xxe(t[s]))&&n.push(s);n.length&&iwe(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qc[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Qc[n](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(t=this.removedTransforms)!=null&&t.length&&this.removedTransforms.forEach(([l,c])=>{r.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function awe(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const f7=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function p7(e){return Aq(e)&&"offsetHeight"in e}const iD=30,lwe=e=>!isNaN(parseFloat(e));class cwe{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var s;const i=gs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=gs.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=lwe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new eT);const n=this.events[t].add(r);return t==="change"?()=>{n(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=gs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>iD)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,iD);return Pq(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Oh(e,t){return new cwe(e,t)}const{schedule:mT}=qq(queueMicrotask,!1),Ri={x:!1,y:!1};function m7(){return Ri.x||Ri.y}function uwe(e){return e==="x"||e==="y"?Ri[e]?null:(Ri[e]=!0,()=>{Ri[e]=!1}):Ri.x||Ri.y?null:(Ri.x=Ri.y=!0,()=>{Ri.x=Ri.y=!1})}function g7(e,t){const r=awe(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function oD(e){return!(e.pointerType==="touch"||m7())}function dwe(e,t,r={}){const[n,s,i]=g7(e,r),o=a=>{if(!oD(a))return;const{target:l}=a,c=t(l,a);if(typeof c!="function"||!l)return;const u=h=>{oD(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return n.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const y7=(e,t)=>t?e===t?!0:y7(e,t.parentElement):!1,gT=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,hwe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function fwe(e){return hwe.has(e.tagName)||e.tabIndex!==-1}const Ev=new WeakSet;function aD(e){return t=>{t.key==="Enter"&&e(t)}}function Cj(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const pwe=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=aD(()=>{if(Ev.has(r))return;Cj(r,"down");const s=aD(()=>{Cj(r,"up")}),i=()=>Cj(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function lD(e){return gT(e)&&!m7()}function mwe(e,t,r={}){const[n,s,i]=g7(e,r),o=a=>{const l=a.currentTarget;if(!lD(a))return;Ev.add(l);const c=t(l,a),u=(p,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Ev.has(l)&&Ev.delete(l),lD(p)&&typeof c=="function"&&c(p,{success:v})},h=p=>{u(p,l===window||l===document||r.useGlobalTarget||y7(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return n.forEach(a=>{(r.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),p7(a)&&(a.addEventListener("focus",l=>pwe(l,s)),!fwe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function v7(e){return Aq(e)&&"ownerSVGElement"in e}function gwe(e){return v7(e)&&e.tagName==="svg"}const On=e=>!!(e&&e.getVelocity),ywe=[...u7,Ar,Vl],vwe=e=>ywe.find(c7(e)),yT=g.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class bwe extends g.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=p7(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function xwe({children:e,isPresent:t,anchorX:r,root:n}){const s=g.useId(),i=g.useRef(null),o=g.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=g.useContext(yT);return g.useInsertionEffect(()=>{const{width:l,height:c,top:u,left:h,right:f}=o.current;if(t||!i.current||!l||!c)return;const p=r==="left"?`left: ${h}`:`right: ${f}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");a&&(v.nonce=a);const m=n??document.head;return m.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${p}px !important;
            top: ${u}px !important;
          }
        `),()=>{m.contains(v)&&m.removeChild(v)}},[t]),d.jsx(bwe,{isPresent:t,childRef:i,sizeRef:o,children:g.cloneElement(e,{ref:i})})}const wwe=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:l})=>{const c=ZC(_we),u=g.useId();let h=!0,f=g.useMemo(()=>(h=!1,{id:u,initial:t,isPresent:r,custom:s,onExitComplete:p=>{c.set(p,!0);for(const v of c.values())if(!v)return;n&&n()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[r,c,n]);return i&&h&&(f={...f}),g.useMemo(()=>{c.forEach((p,v)=>c.set(v,!1))},[r]),g.useEffect(()=>{!r&&!c.size&&n&&n()},[r]),o==="popLayout"&&(e=d.jsx(xwe,{isPresent:r,anchorX:a,root:l,children:e})),d.jsx(Tx.Provider,{value:f,children:e})};function _we(){return new Map}function b7(e=!0){const t=g.useContext(Tx);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=g.useId();g.useEffect(()=>{if(e)return s(i)},[e]);const o=g.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const Vy=e=>e.key||"";function cD(e){const t=[];return g.Children.forEach(e,r=>{g.isValidElement(r)&&t.push(r)}),t}const jwe=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=b7(o),h=g.useMemo(()=>cD(e),[e]),f=o&&!c?[]:h.map(Vy),p=g.useRef(!0),v=g.useRef(h),m=ZC(()=>new Map),[b,x]=g.useState(h),[w,_]=g.useState(h);Cq(()=>{p.current=!1,v.current=h;for(let N=0;N<w.length;N++){const S=Vy(w[N]);f.includes(S)?m.delete(S):m.get(S)!==!0&&m.set(S,!1)}},[w,f.length,f.join("-")]);const j=[];if(h!==b){let N=[...h];for(let S=0;S<w.length;S++){const E=w[S],T=Vy(E);f.includes(T)||(N.splice(S,0,E),j.push(E))}return i==="wait"&&j.length&&(N=j),_(cD(N)),x(h),null}const{forceRender:k}=g.useContext(HC);return d.jsx(d.Fragment,{children:w.map(N=>{const S=Vy(N),E=o&&!c?!1:h===w||f.includes(S),T=()=>{if(m.has(S))m.set(S,!0);else return;let P=!0;m.forEach(O=>{O||(P=!1)}),P&&(k==null||k(),_(v.current),o&&(u==null||u()),n&&n())};return d.jsx(wwe,{isPresent:E,initial:!p.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:E?void 0:T,anchorX:a,children:N},S)})})},x7=g.createContext({strict:!1}),uD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ph={};for(const e in uD)Ph[e]={isEnabled:t=>uD[e].some(r=>!!t[r])};function kwe(e){for(const t in e)Ph[t]={...Ph[t],...e[t]}}const Nwe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wb(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Nwe.has(e)}let w7=e=>!wb(e);function Swe(e){typeof e=="function"&&(w7=t=>t.startsWith("on")?!wb(t):e(t))}try{Swe(require("@emotion/is-prop-valid").default)}catch{}function Ewe(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(w7(s)||r===!0&&wb(s)||!t&&!wb(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const Ax=g.createContext({});function Ox(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function _m(e){return typeof e=="string"||Array.isArray(e)}const vT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bT=["initial",...vT];function Px(e){return Ox(e.animate)||bT.some(t=>_m(e[t]))}function _7(e){return!!(Px(e)||e.variants)}function Cwe(e,t){if(Px(e)){const{initial:r,animate:n}=e;return{initial:r===!1||_m(r)?r:void 0,animate:_m(n)?n:void 0}}return e.inherit!==!1?t:{}}function Twe(e){const{initial:t,animate:r}=Cwe(e,g.useContext(Ax));return g.useMemo(()=>({initial:t,animate:r}),[dD(t),dD(r)])}function dD(e){return Array.isArray(e)?e.join(" "):e}const jm={};function Awe(e){for(const t in e)jm[t]=e[t],nT(t)&&(jm[t].isCSSVariable=!0)}function j7(e,{layout:t,layoutId:r}){return mf.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!jm[e]||e==="opacity")}const Owe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Pwe=pf.length;function Rwe(e,t,r){let n="",s=!0;for(let i=0;i<Pwe;i++){const o=pf[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||r){const c=f7(a,pT[o]);if(!l){s=!1;const u=Owe[o]||o;n+=`${u}(${c}) `}r&&(t[o]=c)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function xT(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const c=t[l];if(mf.has(l)){o=!0;continue}else if(nT(l)){s[l]=c;continue}else{const u=f7(c,pT[l]);l.startsWith("origin")?(a=!0,i[l]=u):n[l]=u}}if(t.transform||(o||r?n.transform=Rwe(t,e.transform,r):n.transform&&(n.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;n.transformOrigin=`${l} ${c} ${u}`}}const wT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function k7(e,t,r){for(const n in t)!On(t[n])&&!j7(n,r)&&(e[n]=t[n])}function Iwe({transformTemplate:e},t){return g.useMemo(()=>{const r=wT();return xT(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Dwe(e,t){const r=e.style||{},n={};return k7(n,r,e),Object.assign(n,Iwe(e,t)),n}function Lwe(e,t){const r={},n=Dwe(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const Mwe={offset:"stroke-dashoffset",array:"stroke-dasharray"},$we={offset:"strokeDashoffset",array:"strokeDasharray"};function Fwe(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?Mwe:$we;e[i.offset]=Ve.transform(-n);const o=Ve.transform(t),a=Ve.transform(r);e[i.array]=`${o} ${a}`}function N7(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,c,u){if(xT(e,a,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&Fwe(h,s,i,o,!1)}const S7=()=>({...wT(),attrs:{}}),E7=e=>typeof e=="string"&&e.toLowerCase()==="svg";function zwe(e,t,r,n){const s=g.useMemo(()=>{const i=S7();return N7(i,t,E7(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};k7(i,e.style,e),s.style={...i,...s.style}}return s}const Uwe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _T(e){return typeof e!="string"||e.includes("-")?!1:!!(Uwe.indexOf(e)>-1||/[A-Z]/u.test(e))}function Bwe(e,t,r,{latestValues:n},s,i=!1){const o=(_T(e)?zwe:Lwe)(t,n,s,e),a=Ewe(t,typeof e=="string",i),l=e!==g.Fragment?{...a,...o,ref:r}:{},{children:c}=t,u=g.useMemo(()=>On(c)?c.get():c,[c]);return g.createElement(e,{...l,children:u})}function hD(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function jT(e,t,r,n){if(typeof t=="function"){const[s,i]=hD(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=hD(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function Cv(e){return On(e)?e.get():e}function qwe({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:Vwe(r,n,s,e),renderState:t()}}function Vwe(e,t,r,n){const s={},i=n(e,{});for(const f in i)s[f]=Cv(i[f]);let{initial:o,animate:a}=e;const l=Px(e),c=_7(e);t&&c&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!Ox(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const v=jT(e,f[p]);if(v){const{transitionEnd:m,transition:b,...x}=v;for(const w in x){let _=x[w];if(Array.isArray(_)){const j=u?_.length-1:0;_=_[j]}_!==null&&(s[w]=_)}for(const w in m)s[w]=m[w]}}}return s}const C7=e=>(t,r)=>{const n=g.useContext(Ax),s=g.useContext(Tx),i=()=>qwe(e,t,n,s);return r?i():ZC(i)};function kT(e,t,r){var n;const{style:s}=e,i={};for(const o in s)(On(s[o])||t.style&&On(t.style[o])||j7(o,e)||((n=r==null?void 0:r.getValue(o))==null?void 0:n.liveStyle)!==void 0)&&(i[o]=s[o]);return i}const Wwe=C7({scrapeMotionValuesFromProps:kT,createRenderState:wT});function T7(e,t,r){const n=kT(e,t,r);for(const s in e)if(On(e[s])||On(t[s])){const i=pf.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const Kwe=C7({scrapeMotionValuesFromProps:T7,createRenderState:S7}),Hwe=Symbol.for("motionComponentSymbol");function Id(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Zwe(e,t,r){return g.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Id(r)&&(r.current=n))},[t])}const NT=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Gwe="framerAppearId",A7="data-"+NT(Gwe),O7=g.createContext({});function Ywe(e,t,r,n,s){var i,o;const{visualElement:a}=g.useContext(Ax),l=g.useContext(x7),c=g.useContext(Tx),u=g.useContext(yT).reducedMotion,h=g.useRef(null);n=n||l.renderer,!h.current&&n&&(h.current=n(e,{visualState:t,parent:a,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,p=g.useContext(O7);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&Jwe(h.current,r,s,p);const v=g.useRef(!1);g.useInsertionEffect(()=>{f&&v.current&&f.update(r,c)});const m=r[A7],b=g.useRef(!!m&&!((i=window.MotionHandoffIsComplete)!=null&&i.call(window,m))&&((o=window.MotionHasOptimisedAnimation)==null?void 0:o.call(window,m)));return Cq(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),g.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,m)}),b.current=!1),f.enteringChildren=void 0)}),f}function Jwe(e,t,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:P7(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Id(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:l,layoutRoot:c})}function P7(e){if(e)return e.options.allowProjection!==!1?e.projection:P7(e.parent)}function Tj(e,{forwardMotionProps:t=!1}={},r,n){r&&kwe(r);const s=_T(e)?Kwe:Wwe;function i(a,l){let c;const u={...g.useContext(yT),...a,layoutId:Xwe(a)},{isStatic:h}=u,f=Twe(a),p=s(a,h);if(!h&&GC){Qwe();const v=e_e(u);c=v.MeasureLayout,f.visualElement=Ywe(e,p,u,n,v.ProjectionNode)}return d.jsxs(Ax.Provider,{value:f,children:[c&&f.visualElement?d.jsx(c,{visualElement:f.visualElement,...u}):null,Bwe(e,a,Zwe(p,f.visualElement,l),p,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=g.forwardRef(i);return o[Hwe]=e,o}function Xwe({layoutId:e}){const t=g.useContext(HC).id;return t&&e!==void 0?t+"-"+e:e}function Qwe(e,t){g.useContext(x7).strict}function e_e(e){const{drag:t,layout:r}=Ph;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function t_e(e,t){if(typeof Proxy>"u")return Tj;const r=new Map,n=(i,o)=>Tj(i,o,e,t),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,Tj(o,void 0,e,t)),r.get(o))})}function R7({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function r_e({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function n_e(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Aj(e){return e===void 0||e===1}function dS({scale:e,scaleX:t,scaleY:r}){return!Aj(e)||!Aj(t)||!Aj(r)}function Tc(e){return dS(e)||I7(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function I7(e){return fD(e.x)||fD(e.y)}function fD(e){return e&&e!=="0%"}function _b(e,t,r){const n=e-r,s=t*n;return r+s}function pD(e,t,r,n,s){return s!==void 0&&(e=_b(e,s,n)),_b(e,r,n)+t}function hS(e,t=0,r=1,n,s){e.min=pD(e.min,t,r,n,s),e.max=pD(e.max,t,r,n,s)}function D7(e,{x:t,y:r}){hS(e.x,t.translate,t.scale,t.originPoint),hS(e.y,r.translate,r.scale,r.originPoint)}const mD=.999999999999,gD=1.0000000000001;function s_e(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ld(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,D7(e,o)),n&&Tc(i.latestValues)&&Ld(e,i.latestValues))}t.x<gD&&t.x>mD&&(t.x=1),t.y<gD&&t.y>mD&&(t.y=1)}function Dd(e,t){e.min=e.min+t,e.max=e.max+t}function yD(e,t,r,n,s=.5){const i=rr(e.min,e.max,s);hS(e,t,r,i,n)}function Ld(e,t){yD(e.x,t.x,t.scaleX,t.scale,t.originX),yD(e.y,t.y,t.scaleY,t.scale,t.originY)}function L7(e,t){return R7(n_e(e.getBoundingClientRect(),t))}function i_e(e,t,r){const n=L7(e,r),{scroll:s}=t;return s&&(Dd(n.x,s.offset.x),Dd(n.y,s.offset.y)),n}const vD=()=>({translate:0,scale:1,origin:0,originPoint:0}),Md=()=>({x:vD(),y:vD()}),bD=()=>({min:0,max:0}),yr=()=>({x:bD(),y:bD()}),fS={current:null},M7={current:!1};function o_e(){if(M7.current=!0,!!GC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>fS.current=e.matches;e.addEventListener("change",t),t()}else fS.current=!1}const a_e=new WeakMap;function l_e(e,t,r){for(const n in t){const s=t[n],i=r[n];if(On(s))e.addValue(n,s);else if(On(i))e.addValue(n,Oh(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(n);e.addValue(n,Oh(o!==void 0?o:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const xD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class c_e{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=hT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=gs.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ht.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Px(r),this.isVariantNode=_7(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&On(p)&&p.set(l[f])}}mount(t){var r;this.current=t,a_e.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),M7.current||o_e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fS.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),ql(this.notifyUpdate),ql(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=mf.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ph){const r=Ph[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<xD.length;n++){const s=xD[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=l_e(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Oh(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(Tq(n)||Oq(n))?n=parseFloat(n):!vwe(n)&&Vl.test(r)&&(n=h7(t,r)),this.setBaseTarget(t,On(n)?n.get():n)),On(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=jT(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);o&&(s=o[t])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!On(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new eT),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){mT.render(this.render)}}class $7 extends c_e{constructor(){super(...arguments),this.KeyframeResolver=owe}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;On(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function F7(e,{style:t,vars:r},n,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function u_e(e){return window.getComputedStyle(e)}class d_e extends $7{constructor(){super(...arguments),this.type="html",this.renderInstance=F7}readValueFromInstance(t,r){var n;if(mf.has(r))return(n=this.projection)!=null&&n.isProjecting?sS(r):Nxe(t,r);{const s=u_e(t),i=(nT(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return L7(t,r)}build(t,r,n){xT(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return kT(t,r,n)}}const z7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function h_e(e,t,r,n){F7(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(z7.has(s)?s:NT(s),t.attrs[s])}class f_e extends $7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=yr}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(mf.has(r)){const n=d7(r);return n&&n.default||0}return r=z7.has(r)?r:NT(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return T7(t,r,n)}build(t,r,n){N7(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){h_e(t,r,n,s)}mount(t){this.isSVGTag=E7(t.tagName),super.mount(t)}}const p_e=(e,t)=>_T(e)?new f_e(t):new d_e(t,{allowProjection:e!==g.Fragment});function Yd(e,t,r){const n=e.getProps();return jT(n,t,r!==void 0?r:n.custom,e)}const pS=e=>Array.isArray(e);function m_e(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Oh(r))}function g_e(e){return pS(e)?e[e.length-1]||0:e}function y_e(e,t){const r=Yd(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const a=g_e(i[o]);m_e(e,o,a)}}function v_e(e){return!!(On(e)&&e.add)}function mS(e,t){const r=e.getValue("willChange");if(v_e(r))return r.add(t);if(!r&&Aa.WillChange){const n=new Aa.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function U7(e){return e.props[A7]}const b_e=e=>e!==null;function x_e(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(b_e),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}const w_e={type:"spring",stiffness:500,damping:25,restSpeed:10},__e=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),j_e={type:"keyframes",duration:.8},k_e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},N_e=(e,{keyframes:t})=>t.length>2?j_e:mf.has(e)?e.startsWith("scale")?__e(t[1]):w_e:k_e;function S_e({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const ST=(e,t,r,n={},s,i)=>o=>{const a=fT(n,e)||{},l=a.delay||n.delay||0;let{elapsed:c=0}=n;c=c-To(l);const u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};S_e(a)||Object.assign(u,N_e(e,u)),u.duration&&(u.duration=To(u.duration)),u.repeatDelay&&(u.repeatDelay=To(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(cS(u),u.delay===0&&(h=!0)),(Aa.instantAnimations||Aa.skipAnimations)&&(h=!0,cS(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!i&&t.get()!==void 0){const f=x_e(u.keyframes,a);if(f!==void 0){Ht.update(()=>{u.onUpdate(f),u.onComplete()});return}}return a.isSync?new dT(u):new Zxe(u)};function E_e({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function B7(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;n&&(i=n);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const u in a){const h=e.getValue(u,e.latestValues[u]??null),f=a[u];if(f===void 0||c&&E_e(c,u))continue;const p={delay:r,...fT(i||{},u)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===v&&!p.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const x=U7(e);if(x){const w=window.MotionHandoffAnimation(x,u,Ht);w!==null&&(p.startTime=w,m=!0)}}mS(e,u),h.start(ST(u,h,f,e.shouldReduceMotion&&l7.has(u)?{type:!1}:p,e,m));const b=h.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{Ht.update(()=>{o&&y_e(e,o)})}),l}function q7(e,t,r,n=0,s=1){const i=Array.from(e).sort((l,c)=>l.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:a-i*n}function gS(e,t,r={}){var n;const s=Yd(e,t,r.type==="exit"?(n=e.presenceContext)==null?void 0:n.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const o=s?()=>Promise.all(B7(e,s,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=i;return C_e(e,t,c,u,h,f,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function C_e(e,t,r=0,n=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(gS(l,t,{...o,delay:r+(typeof n=="function"?0:n)+q7(e.variantChildren,l,n,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function T_e(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>gS(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=gS(e,t,r);else{const s=typeof t=="function"?Yd(e,t,r.custom):t;n=Promise.all(B7(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function V7(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const A_e=bT.length;function W7(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?W7(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<A_e;r++){const n=bT[r],s=e.props[n];(_m(s)||s===!1)&&(t[n]=s)}return t}const O_e=[...vT].reverse(),P_e=vT.length;function R_e(e){return t=>Promise.all(t.map(({animation:r,options:n})=>T_e(e,r,n)))}function I_e(e){let t=R_e(e),r=wD(),n=!0;const s=l=>(c,u)=>{var h;const f=Yd(e,u,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:v,...m}=f;c={...c,...m,...v}}return c};function i(l){t=l(e)}function o(l){const{props:c}=e,u=W7(e.parent)||{},h=[],f=new Set;let p={},v=1/0;for(let b=0;b<P_e;b++){const x=O_e[b],w=r[x],_=c[x]!==void 0?c[x]:u[x],j=_m(_),k=x===l?w.isActive:null;k===!1&&(v=b);let N=_===u[x]&&_!==c[x]&&j;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),w.protectedKeys={...p},!w.isActive&&k===null||!_&&!w.prevProp||Ox(_)||typeof _=="boolean")continue;const S=D_e(w.prevProp,_);let E=S||x===l&&w.isActive&&!N&&j||b>v&&j,T=!1;const P=Array.isArray(_)?_:[_];let O=P.reduce(s(x),{});k===!1&&(O={});const{prevResolvedValues:R={}}=w,I={...R,...O},M=W=>{E=!0,f.has(W)&&(T=!0,f.delete(W)),w.needsAnimating[W]=!0;const q=e.getValue(W);q&&(q.liveStyle=!1)};for(const W in I){const q=O[W],Y=R[W];if(p.hasOwnProperty(W))continue;let L=!1;pS(q)&&pS(Y)?L=!V7(q,Y):L=q!==Y,L?q!=null?M(W):f.add(W):q!==void 0&&f.has(W)?M(W):w.protectedKeys[W]=!0}w.prevProp=_,w.prevResolvedValues=O,w.isActive&&(p={...p,...O}),n&&e.blockInitialAnimation&&(E=!1);const z=N&&S;E&&(!z||T)&&h.push(...P.map(W=>{const q={type:x};if(typeof W=="string"&&n&&!z&&e.manuallyAnimateOnMount&&e.parent){const{parent:Y}=e,L=Yd(Y,W);if(Y.enteringChildren&&L){const{delayChildren:K}=L.transition||{};q.delay=q7(Y.enteringChildren,e,K)}}return{animation:W,options:q}}))}if(f.size){const b={};if(typeof c.initial!="boolean"){const x=Yd(e,Array.isArray(c.initial)?c.initial[0]:c.initial);x&&x.transition&&(b.transition=x.transition)}f.forEach(x=>{const w=e.getBaseTarget(x),_=e.getValue(x);_&&(_.liveStyle=!0),b[x]=w??null}),h.push({animation:b})}let m=!!h.length;return n&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),n=!1,m?t(h):Promise.resolve()}function a(l,c){var u;if(r[l].isActive===c)return Promise.resolve();(u=e.variantChildren)==null||u.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),r[l].isActive=c;const h=o(l);for(const f in r)r[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>r,reset:()=>{r=wD(),n=!0}}}function D_e(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!V7(t,e):!1}function jc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wD(){return{animate:jc(!0),whileInView:jc(),whileHover:jc(),whileTap:jc(),whileDrag:jc(),whileFocus:jc(),exit:jc()}}class rc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class L_e extends rc{constructor(t){super(t),t.animationState||(t.animationState=I_e(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ox(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let M_e=0;class $_e extends rc{constructor(){super(...arguments),this.id=M_e++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const F_e={animation:{Feature:L_e},exit:{Feature:$_e}};function km(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function bg(e){return{point:{x:e.pageX,y:e.pageY}}}const z_e=e=>t=>gT(t)&&e(t,bg(t));function Vp(e,t,r,n){return km(e,t,z_e(r),n)}const K7=1e-4,U_e=1-K7,B_e=1+K7,H7=.01,q_e=0-H7,V_e=0+H7;function Gn(e){return e.max-e.min}function W_e(e,t,r){return Math.abs(e-t)<=r}function _D(e,t,r,n=.5){e.origin=n,e.originPoint=rr(t.min,t.max,e.origin),e.scale=Gn(r)/Gn(t),e.translate=rr(r.min,r.max,e.origin)-e.originPoint,(e.scale>=U_e&&e.scale<=B_e||isNaN(e.scale))&&(e.scale=1),(e.translate>=q_e&&e.translate<=V_e||isNaN(e.translate))&&(e.translate=0)}function Wp(e,t,r,n){_D(e.x,t.x,r.x,n?n.originX:void 0),_D(e.y,t.y,r.y,n?n.originY:void 0)}function jD(e,t,r){e.min=r.min+t.min,e.max=e.min+Gn(t)}function K_e(e,t,r){jD(e.x,t.x,r.x),jD(e.y,t.y,r.y)}function kD(e,t,r){e.min=t.min-r.min,e.max=e.min+Gn(t)}function Kp(e,t,r){kD(e.x,t.x,r.x),kD(e.y,t.y,r.y)}function Xs(e){return[e("x"),e("y")]}const Z7=({current:e})=>e?e.ownerDocument.defaultView:null,ND=(e,t)=>Math.abs(e-t);function H_e(e,t){const r=ND(e.x,t.x),n=ND(e.y,t.y);return Math.sqrt(r**2+n**2)}class G7{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Pj(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,v=H_e(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!v)return;const{point:m}=f,{timestamp:b}=gn;this.history.push({...m,timestamp:b});const{onStart:x,onMove:w}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Oj(p,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:v,onSessionEnd:m,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Pj(f.type==="pointercancel"?this.lastMoveEventInfo:Oj(p,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,x),m&&m(f,x)},!gT(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const a=bg(t),l=Oj(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=gn;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=r;h&&h(t,Pj(l,this.history)),this.removeListeners=gg(Vp(this.contextWindow,"pointermove",this.handlePointerMove),Vp(this.contextWindow,"pointerup",this.handlePointerUp),Vp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ql(this.updatePoint)}}function Oj(e,t){return t?{point:t(e.point)}:e}function SD(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Pj({point:e},t){return{point:e,delta:SD(e,Y7(t)),offset:SD(e,Z_e(t)),velocity:G_e(t,.1)}}function Z_e(e){return e[0]}function Y7(e){return e[e.length-1]}function G_e(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=Y7(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>To(t)));)r--;if(!n)return{x:0,y:0};const i=Ao(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Y_e(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?rr(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?rr(r,e,n.max):Math.min(e,r)),e}function ED(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function J_e(e,{top:t,left:r,bottom:n,right:s}){return{x:ED(e.x,r,s),y:ED(e.y,t,n)}}function CD(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function X_e(e,t){return{x:CD(e.x,t.x),y:CD(e.y,t.y)}}function Q_e(e,t){let r=.5;const n=Gn(e),s=Gn(t);return s>n?r=bm(t.min,t.max-n,e.min):n>s&&(r=bm(e.min,e.max-s,t.min)),Ta(0,1,r)}function eje(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const yS=.35;function tje(e=yS){return e===!1?e=0:e===!0&&(e=yS),{x:TD(e,"left","right"),y:TD(e,"top","bottom")}}function TD(e,t,r){return{min:AD(e,t),max:AD(e,r)}}function AD(e,t){return typeof e=="number"?e:e[t]||0}const rje=new WeakMap;class nje{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(bg(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:v,onDragStart:m}=this.getProps();if(p&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uwe(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xs(x=>{let w=this.getAxisMotionValue(x).get()||0;if(Oo.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const j=_.layout.layoutBox[x];j&&(w=Gn(j)*(parseFloat(w)/100))}}this.originPoint[x]=w}),m&&Ht.postRender(()=>m(h,f)),mS(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:v,onDirectionLock:m,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=f;if(v&&this.currentDirection===null){this.currentDirection=sje(x),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),b&&b(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Xs(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new G7(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:Z7(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ht.postRender(()=>a(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Wy(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=Y_e(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)==null?void 0:t.layout,i=this.constraints;r&&Id(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=J_e(s.layoutBox,r):this.constraints=!1,this.elastic=tje(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Xs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=eje(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Id(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=i_e(n,s.root,this.visualElement.getTransformPagePoint());let o=X_e(s.layout.layoutBox,i);if(r){const a=r(r_e(o));this.hasMutatedConstraints=!!a,a&&(o=R7(a))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Xs(u=>{if(!Wy(u,r,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,v={type:"inertia",velocity:n?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(a)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return mS(this.visualElement,t),n.start(ST(t,n,0,r,this.visualElement,!1))}stopAnimation(){Xs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Xs(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps();return n[r]||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Xs(r=>{const{drag:n}=this.getProps();if(!Wy(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[r];i.set(t[r]-rr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Id(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Xs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=Q_e({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Xs(o=>{if(!Wy(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(rr(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;rje.set(this.visualElement,this);const t=this.visualElement.current,r=Vp(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Id(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ht.read(n);const o=km(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Xs(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=yS,dragMomentum:a=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Wy(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function sje(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class ije extends rc{constructor(t){super(t),this.removeGroupControls=di,this.removeListeners=di,this.controls=new nje(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||di}unmount(){this.removeGroupControls(),this.removeListeners()}}const OD=e=>(t,r)=>{e&&Ht.postRender(()=>e(t,r))};class oje extends rc{constructor(){super(...arguments),this.removePointerDownListener=di}onPointerDown(t){this.session=new G7(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Z7(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:OD(t),onStart:OD(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Ht.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Vp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PD(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Jf={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ve.test(e))e=parseFloat(e);else return e;const r=PD(e,t.target.x),n=PD(e,t.target.y);return`${r}% ${n}%`}},aje={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Vl.parse(e);if(s.length>5)return n;const i=Vl.createTransformer(e),o=typeof s[0]!="number"?1:0,a=r.x.scale*t.x,l=r.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const c=rr(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};let Rj=!1;class lje extends g.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;Awe(cje),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),Rj&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Tv.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,Rj=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Ht.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),mT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;Rj=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function J7(e){const[t,r]=b7(),n=g.useContext(HC);return d.jsx(lje,{...e,layoutGroup:n,switchLayoutGroup:g.useContext(O7),isPresent:t,safeToRemove:r})}const cje={borderRadius:{...Jf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jf,borderTopRightRadius:Jf,borderBottomLeftRadius:Jf,borderBottomRightRadius:Jf,boxShadow:aje};function uje(e,t,r){const n=On(e)?e:Oh(e);return n.start(ST("",n,t,r)),n.animation}const dje=(e,t)=>e.depth-t.depth;class hje{constructor(){this.children=[],this.isDirty=!1}add(t){YC(this.children,t),this.isDirty=!0}remove(t){JC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(dje),this.isDirty=!1,this.children.forEach(t)}}function fje(e,t){const r=gs.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(ql(n),e(i-t))};return Ht.setup(n,!0),()=>ql(n)}const X7=["TopLeft","TopRight","BottomLeft","BottomRight"],pje=X7.length,RD=e=>typeof e=="string"?parseFloat(e):e,ID=e=>typeof e=="number"||Ve.test(e);function mje(e,t,r,n,s,i){s?(e.opacity=rr(0,r.opacity??1,gje(n)),e.opacityExit=rr(t.opacity??1,0,yje(n))):i&&(e.opacity=rr(t.opacity??1,r.opacity??1,n));for(let o=0;o<pje;o++){const a=`border${X7[o]}Radius`;let l=DD(t,a),c=DD(r,a);l===void 0&&c===void 0||(l||(l=0),c||(c=0),l===0||c===0||ID(l)===ID(c)?(e[a]=Math.max(rr(RD(l),RD(c),n),0),(Oo.test(c)||Oo.test(l))&&(e[a]+="%")):e[a]=c)}(t.rotate||r.rotate)&&(e.rotate=rr(t.rotate||0,r.rotate||0,n))}function DD(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const gje=Q7(0,.5,Fq),yje=Q7(.5,.95,di);function Q7(e,t,r){return n=>n<e?0:n>t?1:r(bm(e,t,n))}function LD(e,t){e.min=t.min,e.max=t.max}function Ks(e,t){LD(e.x,t.x),LD(e.y,t.y)}function MD(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function $D(e,t,r,n,s){return e-=t,e=_b(e,1/r,n),s!==void 0&&(e=_b(e,1/s,n)),e}function vje(e,t=0,r=1,n=.5,s,i=e,o=e){if(Oo.test(t)&&(t=parseFloat(t),t=rr(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=rr(i.min,i.max,n);e===i&&(a-=t),e.min=$D(e.min,t,r,a,s),e.max=$D(e.max,t,r,a,s)}function FD(e,t,[r,n,s],i,o){vje(e,t[r],t[n],t[s],t.scale,i,o)}const bje=["x","scaleX","originX"],xje=["y","scaleY","originY"];function zD(e,t,r,n){FD(e.x,t,bje,r?r.x:void 0,n?n.x:void 0),FD(e.y,t,xje,r?r.y:void 0,n?n.y:void 0)}function UD(e){return e.translate===0&&e.scale===1}function e9(e){return UD(e.x)&&UD(e.y)}function BD(e,t){return e.min===t.min&&e.max===t.max}function wje(e,t){return BD(e.x,t.x)&&BD(e.y,t.y)}function qD(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function t9(e,t){return qD(e.x,t.x)&&qD(e.y,t.y)}function VD(e){return Gn(e.x)/Gn(e.y)}function WD(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class _je{constructor(){this.members=[]}add(t){YC(this.members,t),t.scheduleRender()}remove(t){if(JC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jje(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:p,skewY:v}=r;c&&(n=`perspective(${c}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),v&&(n+=`skewY(${v}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const Ij=["","X","Y","Z"],kje=1e3;let Nje=0;function Dj(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function r9(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=U7(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Ht,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&r9(n)}function n9({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t==null?void 0:t()){this.id=Nje++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Cje),this.nodes.forEach(Pje),this.nodes.forEach(Rje),this.nodes.forEach(Tje)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new hje)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new eT),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const a=this.eventHandlers.get(i);a&&a.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=v7(i)&&!gwe(i),this.instance=i;const{layoutId:o,layout:a,visualElement:l}=this.options;if(l&&!l.current&&l.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(a||o)&&(this.isLayoutDirty=!0),e){let c,u=0;const h=()=>this.root.updateBlockedByResize=!1;Ht.read(()=>{u=window.innerWidth}),e(i,()=>{const f=window.innerWidth;f!==u&&(u=f,this.root.updateBlockedByResize=!0,c&&c(),c=fje(h,250),Tv.hasAnimatedSinceResize&&(Tv.hasAnimatedSinceResize=!1,this.nodes.forEach(ZD)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&l&&(o||a)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||l.getDefaultTransition()||$je,{onLayoutAnimationStart:v,onLayoutAnimationComplete:m}=l.getProps(),b=!this.targetLayout||!t9(this.targetLayout,f),x=!u&&h;if(this.options.layoutRoot||this.resumeFrom||x||u&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...fT(p,"layout"),onPlay:v,onComplete:m};(l.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(c,x)}else u||ZD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ql(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ije),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&r9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const u=this.path[c];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:o,layout:a}=this.options;if(o===void 0&&!a)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KD);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(HD);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Oje),this.nodes.forEach(Sje),this.nodes.forEach(Eje)):this.nodes.forEach(HD),this.clearAllSnapshots();const i=gs.now();gn.delta=Ta(0,1e3/60,i-gn.timestamp),gn.timestamp=i,gn.isProcessing=!0,jj.update.process(gn),jj.preRender.process(gn),jj.render.process(gn),gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Aje),this.sharedNodes.forEach(Dje)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Gn(this.snapshot.measuredBox.x)&&!Gn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const a=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:a,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!e9(this.projectionDelta),a=this.getTransformTemplate(),l=a?a(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;i&&this.instance&&(o||Tc(this.latestValues)||c)&&(s(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let a=this.removeElementScroll(o);return i&&(a=this.removeTransform(a)),Fje(a),{animationId:this.root.animationId,measuredBox:o,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:o}=this.options;if(!o)return yr();const a=o.measureViewportBox();if(!((i=this.scroll)!=null&&i.wasRoot||this.path.some(zje))){const{scroll:l}=this.root;l&&(Dd(a.x,l.offset.x),Dd(a.y,l.offset.y))}return a}removeElementScroll(i){var o;const a=yr();if(Ks(a,i),(o=this.scroll)!=null&&o.wasRoot)return a;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;c!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&Ks(a,i),Dd(a.x,u.offset.x),Dd(a.y,u.offset.y))}return a}applyTransform(i,o=!1){const a=yr();Ks(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ld(a,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Tc(c.latestValues)&&Ld(a,c.latestValues)}return Tc(this.latestValues)&&Ld(a,this.latestValues),a}removeTransform(i){const o=yr();Ks(o,i);for(let a=0;a<this.path.length;a++){const l=this.path[a];if(!l.instance||!Tc(l.latestValues))continue;dS(l.latestValues)&&l.updateSnapshot();const c=yr(),u=l.measurePageBox();Ks(c,u),zD(o,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return Tc(this.latestValues)&&zD(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var o;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(o=this.parent)!=null&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:u}=this.options;if(!(!this.layout||!(c||u))){if(this.resolvedRelativeTargetAt=gn.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yr(),this.relativeTargetOrigin=yr(),Kp(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Ks(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=yr(),this.targetWithTransforms=yr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),K_e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ks(this.target,this.layout.layoutBox),D7(this.target,this.targetDelta)):Ks(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yr(),this.relativeTargetOrigin=yr(),Kp(this.relativeTargetOrigin,this.target,h.target),Ks(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||dS(this.parent.latestValues)||I7(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(i=this.parent)!=null&&i.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===gn.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Ks(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;s_e(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=yr());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(MD(this.prevProjectionDelta.x,this.projectionDelta.x),MD(this.prevProjectionDelta.y,this.projectionDelta.y)),Wp(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!WD(this.projectionDelta.x,this.prevProjectionDelta.x)||!WD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),i){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Md(),this.projectionDelta=Md(),this.projectionDeltaWithTransform=Md()}setAnimationOrigin(i,o=!1){const a=this.snapshot,l=a?a.latestValues:{},c={...this.latestValues},u=Md();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=yr(),f=a?a.source:void 0,p=this.layout?this.layout.source:void 0,v=f!==p,m=this.getStack(),b=!m||m.members.length<=1,x=!!(v&&!b&&this.options.crossfade===!0&&!this.path.some(Mje));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const j=_/1e3;GD(u.x,i.x,j),GD(u.y,i.y,j),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Kp(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lje(this.relativeTarget,this.relativeTargetOrigin,h,j),w&&wje(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=yr()),Ks(w,this.relativeTarget)),v&&(this.animationValues=c,mje(c,l,this.latestValues,j,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var o,a,l;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(l=(a=this.resumingFrom)==null?void 0:a.currentAnimation)==null||l.stop(),this.pendingAnimation&&(ql(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{Tv.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Oh(0)),this.currentAnimation=uje(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),i.onUpdate&&i.onUpdate(c)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kje),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:a,layout:l,latestValues:c}=i;if(!(!o||!a||!l)){if(this!==i&&this.layout&&l&&s9(this.options.animationType,this.layout.layoutBox,l.layoutBox)){a=this.target||yr();const u=Gn(this.layout.layoutBox.x);a.x.min=i.target.x.min,a.x.max=a.x.min+u;const h=Gn(this.layout.layoutBox.y);a.y.min=i.target.y.min,a.y.max=a.y.min+h}Ks(o,a),Ld(o,c),Wp(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new _je),this.sharedNodes.get(i).add(o);const a=o.options.initialPromotionConfig;o.promote({transition:a?a.transition:void 0,preserveFollowOpacity:a&&a.shouldPreserveFollowOpacity?a.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:o}=this.options;return o?((i=this.getStack())==null?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:o}=this.options;return o?(i=this.getStack())==null?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:a}={}){const l=this.getStack();l&&l.promote(this,a),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:a}=i;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(o=!0),!o)return;const l={};a.z&&Dj("z",i,l,this.animationValues);for(let c=0;c<Ij.length;c++)Dj(`rotate${Ij[c]}`,i,l,this.animationValues),Dj(`skew${Ij[c]}`,i,l,this.animationValues);i.render();for(const c in l)i.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const a=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Cv(o==null?void 0:o.pointerEvents)||"",i.transform=a?a(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Cv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Tc(this.latestValues)&&(i.transform=a?a({},""):"none",this.hasProjected=!1);return}i.visibility="";const c=l.animationValues||l.latestValues;this.applyTransformsToTarget();let u=jje(this.projectionDeltaWithTransform,this.treeScale,c);a&&(u=a(c,u)),i.transform=u;const{x:h,y:f}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,l.animationValues?i.opacity=l===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:i.opacity=l===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in jm){if(c[p]===void 0)continue;const{correct:v,applyTo:m,isCSSVariable:b}=jm[p],x=u==="none"?c[p]:v(c[p],l);if(m){const w=m.length;for(let _=0;_<w;_++)i[m[_]]=x}else b?this.options.visualElement.renderState.vars[p]=x:i[p]=x}this.options.layoutId&&(i.pointerEvents=l===this?Cv(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var o;return(o=i.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(KD),this.root.sharedNodes.clear()}}}function Sje(e){e.updateLayout()}function Eje(e){var t;const r=((t=e.resumeFrom)==null?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?Xs(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],p=Gn(f);f.min=n[h].min,f.max=f.min+p}):s9(i,r.layoutBox,n)&&Xs(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],p=Gn(n[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const a=Md();Wp(a,n,r.layoutBox);const l=Md();o?Wp(l,e.applyTransform(s,!0),r.measuredBox):Wp(l,n,r.layoutBox);const c=!e9(a);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const v=yr();Kp(v,r.layoutBox,f.layoutBox);const m=yr();Kp(m,n,p.layoutBox),t9(v,m)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function Cje(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Tje(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Aje(e){e.clearSnapshot()}function KD(e){e.clearMeasurements()}function HD(e){e.isLayoutDirty=!1}function Oje(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ZD(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Pje(e){e.resolveTargetDelta()}function Rje(e){e.calcProjection()}function Ije(e){e.resetSkewAndRotation()}function Dje(e){e.removeLeadSnapshot()}function GD(e,t,r){e.translate=rr(t.translate,0,r),e.scale=rr(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function YD(e,t,r,n){e.min=rr(t.min,r.min,n),e.max=rr(t.max,r.max,n)}function Lje(e,t,r,n){YD(e.x,t.x,r.x,n),YD(e.y,t.y,r.y,n)}function Mje(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const $je={duration:.45,ease:[.4,0,.1,1]},JD=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),XD=JD("applewebkit/")&&!JD("chrome/")?Math.round:di;function QD(e){e.min=XD(e.min),e.max=XD(e.max)}function Fje(e){QD(e.x),QD(e.y)}function s9(e,t,r){return e==="position"||e==="preserve-aspect"&&!W_e(VD(t),VD(r),.2)}function zje(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Uje=n9({attachResizeListener:(e,t)=>km(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Lj={current:void 0},i9=n9({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Lj.current){const e=new Uje({});e.mount(window),e.setOptions({layoutScroll:!0}),Lj.current=e}return Lj.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Bje={pan:{Feature:oje},drag:{Feature:ije,ProjectionNode:i9,MeasureLayout:J7}};function e3(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Ht.postRender(()=>i(t,bg(t)))}class qje extends rc{mount(){const{current:t}=this.node;t&&(this.unmount=dwe(t,(r,n)=>(e3(this.node,n,"Start"),s=>e3(this.node,s,"End"))))}unmount(){}}class Vje extends rc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gg(km(this.node.current,"focus",()=>this.onFocus()),km(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function t3(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Ht.postRender(()=>i(t,bg(t)))}class Wje extends rc{mount(){const{current:t}=this.node;t&&(this.unmount=mwe(t,(r,n)=>(t3(this.node,n,"Start"),(s,{success:i})=>t3(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vS=new WeakMap,Mj=new WeakMap,Kje=e=>{const t=vS.get(e.target);t&&t(e)},Hje=e=>{e.forEach(Kje)};function Zje({root:e,...t}){const r=e||document;Mj.has(r)||Mj.set(r,{});const n=Mj.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(Hje,{root:e,...t})),n[s]}function Gje(e,t,r){const n=Zje(t);return vS.set(e,r),n.observe(e),()=>{vS.delete(e),n.unobserve(e)}}const Yje={some:0,all:1};class Jje extends rc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:Yje[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return Gje(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(Xje(t,r))&&this.startObserver()}unmount(){}}function Xje({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const Qje={inView:{Feature:Jje},tap:{Feature:Wje},focus:{Feature:Vje},hover:{Feature:qje}},eke={layout:{ProjectionNode:i9,MeasureLayout:J7}},tke={...F_e,...Qje,...Bje,...eke},kc=t_e(tke,p_e),rke=()=>{var e,t;const{isAuthenticated:r}=ix(),[n,s]=g.useState(null),[i,o]=g.useState(!1),[a,l]=g.useState(!1);let c,u,h;const f=(t=(e=import.meta)==null?void 0:e.env)==null?void 0:t.VITE_STRIPE_PUBLISHABLE_KEY;ee.useEffect(()=>{var x,w,_;console.log("🔑 SubscriptionPage - Environment check:"),console.log("🔑 Stripe key from env:",(w=(x=import.meta)==null?void 0:x.env)==null?void 0:w.VITE_STRIPE_PUBLISHABLE_KEY),console.log("🔑 All env vars:",(_=import.meta)==null?void 0:_.env)},[]);const p=[{id:"price_1S2L8JQv3TvmaocsYofzFKgm",name:"Monthly Membership",price:9.99,interval:"month",features:["Access to all released content","New chapters as they release","Exclusive behind-the-scenes","Early character reveals","Community discussions","Author notes and insights"],paypalPlanId:"prod_SyHh0v9pcletkx",highlight:"Perfect for new readers"},{id:"price_1S2L95Qv3TvmaocsN5zRIEXO",name:"Annual Membership",price:99.99,interval:"year",features:["Everything in Monthly plan","2 months free (17% savings)","Priority content access","Exclusive annual content","Direct Q&A with author","Member-only events"],popular:!0,paypalPlanId:"prod_SyHiFk24bHGA2U",highlight:"Best value - Save $19.89"}],v=async x=>{if(!r){window.location.href="/login?returnTo=/subscribe";return}const w=p.find(_=>_.id===x);w&&(s(w),o(!0),setTimeout(async()=>{const _=document.getElementById("email"),j=document.getElementById("error");if(!f){j&&(j.textContent="Stripe Publishable Key is not configured.");return}try{const k=(_==null?void 0:_.value)||"",N=await fetch("http://localhost:4242/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:k,priceId:w.id})}),S=await N.json();if(!N.ok)throw new Error(S.error||"Failed to initialize subscription");h=S.clientSecret,await m(h),l(!0),setTimeout(()=>{const E=document.getElementById("email"),T=document.getElementById("payment-element"),P=document.querySelector(".checkout-form-container"),O=E||T||P;O&&O.scrollIntoView({behavior:"smooth",block:"center"})},1500)}catch(k){j&&(j.textContent=k.message),o(!1)}},100))};async function m(x){if(!f)return;const w=await _0e(f);w&&(c=w,u=c.elements({clientSecret:x,appearance:{theme:"stripe",variables:{colorPrimary:"#4A90E2",colorText:"#1F2937",colorTextSecondary:"#6B7280",colorDanger:"#EF4444",borderRadius:"10px"},rules:{".Input":{border:"1px solid #E5E7EB",boxShadow:"none"},".Label":{fontWeight:"500"}}}}),u.create("payment").mount("#payment-element"))}const b=()=>{l(!1),setTimeout(()=>{o(!1),s(null),u&&u.destroy()},1e3)};return g.useEffect(()=>{const x=document.getElementById("confirm"),w=document.getElementById("email"),_=document.getElementById("error"),j=document.getElementById("status"),k=S=>{x&&(x.disabled=S),j&&(j.textContent=S?"Processing…":"")},N=async()=>{k(!0),_&&(_.textContent="");const S=w==null?void 0:w.value;if(!S){_&&(_.textContent="Please enter your email."),k(!1);return}try{const{error:E}=await c.confirmPayment({elements:u,confirmParams:{receipt_email:S,return_url:window.location.origin+"/subscription-success"},redirect:"if_required"});if(E){_&&(_.textContent=E.message||"Payment failed. Try another payment method."),k(!1);return}j&&(j.textContent="Success! You’re subscribed."),setTimeout(()=>window.location.assign("/subscription-success"),700)}catch(E){_&&(_.textContent=E.message)}finally{k(!1)}};return x&&x.addEventListener("click",N),()=>{x&&x.removeEventListener("click",N)}},[i,c,u]),g.useEffect(()=>{const x=w=>{w.key==="Escape"&&i&&b()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[i]),d.jsxs(d.Fragment,{children:[d.jsx("style",{children:`
          :root{
            --primary:#4A90E2; --secondary:#50E3C2;
            --bg:#F9FAFB; --text:#1F2937; --muted:#6B7280; --error:#EF4444;
          }
          .row{display:flex;gap:.75rem;align-items:center;margin:.75rem 0}
          .email{width:100%;padding:.85rem 1rem;border:1px solid #E5E7EB;border-radius:10px;font-size:1rem}
          .btn{background:var(--primary);color:#fff;border:none;padding:.9rem 1rem;border-radius:10px;cursor:pointer}
          .meta{display:flex;justify-content:space-between;align-items:center;margin-top:.5rem;color:var(--muted);font-size:.9rem}
          .secure{display:flex;align-items:center;gap:.4rem}
          .error{color:var(--error);margin-top:.5rem;min-height:1.25rem}
          /* Payment Element container */
          #payment-element{margin:1rem 0}
        `}),d.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-blue-900 overflow-hidden",children:[d.jsx("div",{className:"relative z-10",children:d.jsxs("div",{className:"container mx-auto px-4 py-16 md:py-24",children:[d.jsxs(kc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[d.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 bg-clip-text text-transparent mb-6 leading-tight",children:"Join the Zoroasterverse"}),d.jsx("p",{className:"text-xl md:text-2xl text-gray-600 dark:text-gray-300 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Experience the complete story with premium membership plans"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:p.map((x,w)=>d.jsxs(kc.div,{initial:{opacity:0,y:50,rotateY:-10},animate:{opacity:1,y:0,rotateY:0},transition:{delay:w*.2+.4,duration:.8,type:"spring",damping:20},className:`relative group cursor-pointer ${x.popular?"md:scale-105 z-20":"z-10"}`,children:[x.popular&&d.jsx("div",{className:"absolute -top-5 left-1/2 transform -translate-x-1/2 z-30",children:d.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-6 py-2 rounded-full text-sm font-bold shadow-lg",children:[d.jsx(hm,{className:"w-4 h-4 inline mr-2"}),"MOST POPULAR"]})}),d.jsxs("div",{className:`
                  bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm
                  border-2 rounded-3xl p-8 h-full
                  transition-all duration-500 group-hover:-translate-y-2
                  ${x.popular?"border-yellow-400 shadow-2xl shadow-yellow-500/25 bg-gradient-to-b from-yellow-50/80 to-white/80 dark:from-yellow-900/20 dark:to-gray-800/80":"border-gray-200 dark:border-gray-600 shadow-xl hover:shadow-2xl hover:border-blue-400 dark:hover:border-blue-500"}
                `,children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:x.name}),x.highlight&&d.jsx("div",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium mb-4 ${x.popular?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:x.highlight}),d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"flex items-baseline justify-center gap-2",children:[d.jsxs("span",{className:"text-6xl font-black text-gray-900 dark:text-white",children:["$",x.price]}),d.jsxs("span",{className:"text-2xl text-gray-500 dark:text-gray-400 font-medium",children:["/",x.interval]})]}),x.interval==="year"&&d.jsxs("p",{className:"text-green-600 dark:text-green-400 font-semibold mt-2",children:["Save $19.89 annually • $",(x.price/12).toFixed(2),"/month"]})]})]}),d.jsx("ul",{className:"space-y-4 mb-8",children:x.features.map((_,j)=>d.jsxs("li",{className:"flex items-start gap-3",children:[d.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${x.popular?"bg-yellow-100 dark:bg-yellow-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:d.jsx(ua,{className:`${x.popular?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"}`,size:16})}),d.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:_})]},j))}),d.jsxs("button",{onClick:()=>v(x.id),className:`w-full py-4 px-6 rounded-2xl font-bold text-lg transition-all duration-300 flex items-center justify-center gap-3 shadow-lg group-hover:shadow-xl ${x.popular?"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white shadow-yellow-500/30":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-blue-500/30"} transform group-hover:-translate-y-1`,children:[d.jsx("span",{children:"Get Started"}),d.jsx(jv,{className:"w-5 h-5 transition-transform group-hover:translate-x-1"})]})]})]},x.id))}),d.jsxs(kc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.6},className:"mt-16 flex flex-wrap justify-center items-center gap-8 text-gray-500 dark:text-gray-400",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(rj,{className:"w-5 h-5 text-green-500"}),d.jsx("span",{className:"font-medium",children:"Bank-Level Security"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ua,{className:"w-5 h-5 text-green-500"}),d.jsx("span",{className:"font-medium",children:"30-Day Guarantee"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Eh,{className:"w-5 h-5 text-blue-500"}),d.jsx("span",{className:"font-medium",children:"Join 10,000+ Readers"})]})]})]})}),d.jsx(jwe,{children:i&&d.jsxs("div",{className:"fixed inset-0 z-[9999]",style:{perspective:"1000px"},children:[d.jsxs(kc.div,{initial:{rotateY:0},animate:{rotateY:a?-90:0},transition:{duration:1,ease:"easeInOut"},className:"absolute top-0 left-0 w-1/2 h-full bg-gradient-to-br from-blue-600 to-purple-700 shadow-2xl",style:{transformOrigin:"right center"},children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent to-black/10"}),d.jsxs("div",{className:"absolute top-1/2 left-8 transform -translate-y-1/2 text-white",children:[d.jsx(hm,{className:"w-16 h-16 mb-4 opacity-30"}),d.jsx("h3",{className:"text-2xl font-bold opacity-50",children:"Zoroasterverse"})]})]}),d.jsxs(kc.div,{initial:{rotateY:0},animate:{rotateY:a?90:0},transition:{duration:1,ease:"easeInOut"},className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-bl from-purple-600 to-blue-700 shadow-2xl",style:{transformOrigin:"left center"},children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-l from-transparent to-black/10"}),d.jsxs("div",{className:"absolute top-1/2 right-8 transform -translate-y-1/2 text-white text-right",children:[d.jsx(hu,{className:"w-16 h-16 mb-4 opacity-30 ml-auto"}),d.jsx("h3",{className:"text-2xl font-bold opacity-50",children:"Premium"})]})]}),d.jsx(kc.div,{initial:{opacity:0,scale:.8},animate:{opacity:a?1:0,scale:a?1:.8},transition:{delay:a?.5:0,duration:.6,ease:"easeOut"},className:"absolute inset-0 flex items-center justify-center p-4 bg-white/10 dark:bg-black/10 backdrop-blur-sm checkout-form-container",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 rounded-t-3xl relative",children:[d.jsx("button",{onClick:b,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full",children:d.jsx(Ji,{className:"w-6 h-6"})}),d.jsxs("div",{className:"text-center text-white",children:[d.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Complete Your Subscription"}),d.jsxs("p",{className:"text-white/90",children:[n==null?void 0:n.name," • $",n==null?void 0:n.price,"/",n==null?void 0:n.interval]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 p-8",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"What You're Getting"}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-6",children:[d.jsxs("div",{className:"text-center mb-4",children:[d.jsxs("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["$",n==null?void 0:n.price]}),d.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:["per ",n==null?void 0:n.interval]})]}),d.jsx("ul",{className:"space-y-3",children:n==null?void 0:n.features.map((x,w)=>d.jsxs("li",{className:"flex items-start gap-3",children:[d.jsx(ua,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:x})]},w))})]})]}),d.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-xl border border-green-200 dark:border-green-800",children:[d.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400 mb-2",children:[d.jsx(rj,{className:"w-5 h-5"}),d.jsx("span",{className:"font-semibold",children:"30-Day Money-Back Guarantee"})]}),d.jsx("p",{className:"text-sm text-green-600 dark:text-green-500",children:"Not satisfied? Get a full refund within 30 days, no questions asked."})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Secure Payment"}),d.jsxs("div",{children:[d.jsx("div",{className:"row",children:d.jsx("input",{className:"email",id:"email",type:"email",placeholder:"Email address",autoComplete:"email",required:!0})}),d.jsx("div",{id:"payment-element"}),d.jsx("button",{className:"btn",id:"confirm",children:"Subscribe Now"}),d.jsxs("div",{className:"meta",children:[d.jsx("span",{className:"secure",children:"🔒 Secure payment"}),d.jsx("span",{id:"status","aria-live":"polite"})]}),d.jsx("div",{id:"error",className:"error",role:"alert"})]})]})]})]})})]})}),d.jsx("section",{className:"relative z-10 py-20 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsxs("div",{className:"text-center mb-16",children:[d.jsx("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Why Readers Love Zoroasterverse"}),d.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Experience the complete story with exclusive benefits"})]}),d.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[{icon:d.jsx(hu,{className:"w-12 h-12 text-blue-500"}),title:"Exclusive Content",description:"Access to all chapters, including early releases and subscriber-only content."},{icon:d.jsx(yU,{className:"w-12 h-12 text-blue-500"}),title:"Regular Updates",description:"New chapters delivered consistently. Get the story as it develops!"},{icon:d.jsx(NU,{className:"w-12 h-12 text-blue-500"}),title:"Early Access",description:"Be first to experience new chapters before public release."},{icon:d.jsx(bU,{className:"w-12 h-12 text-blue-500"}),title:"Community",description:"Join discussions and connect with fellow readers."},{icon:d.jsx(dg,{className:"w-12 h-12 text-blue-500"}),title:"Behind the Scenes",description:"Exclusive insights into the creative process and world-building."},{icon:d.jsx(rj,{className:"w-12 h-12 text-blue-500"}),title:"Ad-Free Experience",description:"Enjoy reading without distractions or interruptions."}].map((x,w)=>d.jsxs(kc.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:w*.1,duration:.6},className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm p-8 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2",children:[d.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 flex items-center justify-center mb-6",children:x.icon}),d.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3",children:x.title}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:x.description})]},w))})]})})]})]})},nke=()=>{const[e]=vQ(),[t,r]=g.useState(null),[n,s]=g.useState(!0);return g.useEffect(()=>{const i=e.get("session_id");r(i),s(!1)},[e]),n?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center",children:d.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900",children:[d.jsxs("div",{className:"relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),d.jsx("div",{className:"relative z-10 container mx-auto px-4 py-20 text-center",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("div",{className:"w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-8",children:d.jsx(ua,{className:"w-12 h-12 text-white"})}),d.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"Welcome to the Zoroasterverse!"}),d.jsx("p",{className:"text-xl md:text-2xl text-gray-300 mb-8 leading-relaxed",children:"Your subscription is now active. You're ready to dive into the world of episodic storytelling and join our community of readers."}),t&&d.jsx("div",{className:"bg-gray-800 bg-opacity-50 rounded-lg p-4 mb-8 inline-block",children:d.jsxs("p",{className:"text-gray-300 text-sm",children:["Session ID: ",d.jsx("span",{className:"font-mono text-green-400",children:t})]})})]})})]}),d.jsx("div",{className:"py-20 bg-gray-800",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-16",children:"What Happens Next?"}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(hu,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Access Your Library"}),d.jsx("p",{className:"text-gray-300",children:"Visit your library to read all available chapters and exclusive content."})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(dg,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Stay Updated"}),d.jsx("p",{className:"text-gray-300",children:"You'll receive notifications when new chapters are ready to read."})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(Eh,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Join the Community"}),d.jsx("p",{className:"text-gray-300",children:"Connect with fellow readers and discuss theories in our community."})]})]})]})}),d.jsx("div",{className:"py-20 bg-gray-900",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-16",children:"Get Started Right Away"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[d.jsx(sn,{to:"/library",className:"bg-purple-600 hover:bg-purple-700 text-white p-8 rounded-2xl transition-all duration-300 hover:scale-105 group",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Visit Your Library"}),d.jsx("p",{className:"text-purple-100 mb-6",children:"Access all available chapters and start reading immediately."})]}),d.jsx(jv,{className:"w-8 h-8 group-hover:translate-x-2 transition-transform"})]})}),d.jsx(sn,{to:"/account",className:"bg-gray-700 hover:bg-gray-600 text-white p-8 rounded-2xl transition-all duration-300 hover:scale-105 group",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Manage Subscription"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"View your subscription details and manage your account."})]}),d.jsx(jv,{className:"w-8 h-8 group-hover:translate-x-2 transition-transform"})]})})]})]})}),d.jsx("div",{className:"py-20 bg-gradient-to-r from-purple-900 to-blue-900",children:d.jsx("div",{className:"container mx-auto px-4 text-center",children:d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsx("div",{className:"w-20 h-20 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(hm,{className:"w-10 h-10 text-white"})}),d.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Welcome Bonus Unlocked!"}),d.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"As a new subscriber, you now have access to exclusive content including:"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-left mb-8",children:[d.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Behind the Scenes"}),d.jsx("p",{className:"text-gray-300",children:"Author notes, character development insights, and world-building details."})]}),d.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Community Access"}),d.jsx("p",{className:"text-gray-300",children:"Join discussions, share theories, and connect with fellow readers."})]})]}),d.jsxs(sn,{to:"/library",className:"bg-yellow-500 hover:bg-yellow-600 text-gray-900 px-8 py-4 rounded-xl text-xl font-bold transition-all duration-300 hover:scale-105 shadow-lg inline-flex items-center gap-2",children:["Explore Your Library",d.jsx(jv,{className:"w-6 h-6"})]})]})})}),d.jsx("div",{className:"py-16 bg-gray-800",children:d.jsxs("div",{className:"container mx-auto px-4 text-center",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Questions or Need Help?"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"Our support team is here to help you get the most out of your subscription."}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[d.jsx(sn,{to:"/account",className:"bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg transition-colors",children:"Contact Support"}),d.jsx(sn,{to:"/",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Return Home"})]})]})})]})},ske=e=>e.resultType==="page",ike=e=>e.resultType==="folder";function $j({page:e,onEdit:t}){var r,n,s;const{folderSlug:i,pageSlug:o}=Tu(),[a,l]=g.useState([]),[c,u]=g.useState([]),[h,f]=g.useState(null),[p,v]=g.useState(""),[m,b]=g.useState([]),[x,w]=g.useState(!1),[_,j]=g.useState(!0),[k,N]=g.useState(!1),[S,E]=g.useState(!0),[T,P]=g.useState([]),O=g.useRef(null),R=g.useRef(null);e.excerpt;const I=async q=>{if(!q.trim()){b([]);return}try{w(!0);const{data:Y,error:L}=await fe.from("wiki_pages").select(`
          *,
          content, seo_title, seo_description, seo_keywords, sections,
          category:wiki_categories(*),
          user:profiles(*)
        `).or(`title.ilike.%${q}%,excerpt.ilike.%${q}%`);if(L)throw L;const K=(Y||[]).map(G=>{let re=null;G.user&&typeof G.user=="object"&&!("error"in G.user)&&(re=G.user);let H=null;return G.category&&typeof G.category=="object"&&!("error"in G.category)&&(H=G.category),{...G,resultType:"page",sections:G.sections||[],content:G.content||"",excerpt:G.excerpt||"",is_published:G.is_published??!0,category_id:G.category_id??null,folder_id:G.folder_id??null,created_at:G.created_at||new Date().toISOString(),updated_at:new Date().toISOString(),created_by:G.created_by||"",view_count:G.view_count||0,slug:G.slug||"",seo_title:G.seo_title||null,seo_description:G.seo_description||null,seo_keywords:G.seo_keywords||[],category:H,user:re}});b(K)}catch(Y){console.error("Search error:",Y),We.error("Failed to perform search")}finally{w(!1)}};g.useEffect(()=>{(async()=>{try{E(!0);const{data:q,error:Y}=await fe.from("wiki_pages").select("*, content, seo_title, seo_description, seo_keywords, sections, category:wiki_categories(*), user:profiles(*)").order("title");if(Y)throw Y;const L=(q||[]).map(K=>{let G=null;K.user&&typeof K.user=="object"&&!("error"in K.user)&&(G=K.user);let re=null;return K.category&&typeof K.category=="object"&&!("error"in K.category)&&(re=K.category),{...K,sections:K.sections||[],content:K.content||"",seo_title:K.seo_title||"",seo_description:K.seo_description||"",seo_keywords:K.seo_keywords||[],category:re,user:G,resultType:"page"}});l(L)}catch(q){console.error("Error fetching data:",q),We.error("Failed to load wiki pages")}finally{E(!1)}})()},[o]);const M=q=>{const Y=new Map,L=[];return q.forEach(K=>{Y.set(K.id,{...K,children:[]})}),Y.forEach(K=>{if(K.parent_id&&Y.has(K.parent_id)){const G=Y.get(K.parent_id);G&&(G.children=[...G.children||[],K])}else L.push(K)}),L},z=q=>{var Y,L,K,G,re,H,ne,J,Ie,me,ge;if(!q)return null;switch(q.type){case"heading_1":case"heading_2":case"heading_3":const U=`h${parseInt(q.type.split("_")[1])}`;return d.jsx(U,{id:`heading-${q.id}`,className:"mt-6 mb-4 font-semibold",children:(Y=q.content)==null?void 0:Y.text});case"paragraph":return d.jsx("p",{className:"mb-4 leading-relaxed",children:(L=q.content)==null?void 0:L.text});case"bullet_list":return d.jsx("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:(G=(K=q.content)==null?void 0:K.items)==null?void 0:G.map((Z,le)=>d.jsx("li",{children:Z},le))});case"ordered_list":return d.jsx("ol",{className:"list-decimal pl-6 mb-4 space-y-1",children:(H=(re=q.content)==null?void 0:re.items)==null?void 0:H.map((Z,le)=>d.jsx("li",{children:Z},le))});case"quote":return d.jsx("blockquote",{className:"border-l-4 border-gray-300 pl-4 py-1 my-4 text-gray-600 italic",children:(ne=q.content)==null?void 0:ne.text});case"code":return d.jsx("pre",{className:"bg-gray-100 p-4 rounded-md my-4 overflow-x-auto",children:d.jsx("code",{children:(J=q.content)==null?void 0:J.code})});case"image":return d.jsxs("div",{className:"my-6",children:[d.jsx("img",{src:(Ie=q.content)==null?void 0:Ie.url,alt:((me=q.content)==null?void 0:me.alt)||"",className:"max-w-full h-auto rounded-md"}),((ge=q.content)==null?void 0:ge.caption)&&d.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:q.content.caption})]});default:return null}},W=(q,Y=0)=>q.map(L=>d.jsxs("div",{className:"pl-2",children:[d.jsxs("div",{className:"flex items-center py-1 px-2 rounded hover:bg-accent cursor-pointer",children:[d.jsx(dC,{size:16,className:"mr-1 text-muted-foreground"}),d.jsx(sb,{size:14,className:"mr-2 text-blue-500"}),d.jsx("span",{className:"text-sm",children:L.name})]}),L.children&&L.children.length>0&&d.jsx("div",{className:"pl-4 border-l border-border ml-1",children:W(L.children,Y+1)}),d.jsx("div",{className:"pl-6",children:a.filter(K=>K.folder_id===L.id).map(K=>d.jsxs(sn,{to:`/wiki/${L.slug}/${K.slug}`,className:`flex items-center py-1 px-2 rounded text-sm ${o===K.slug?"bg-accent font-medium":"text-muted-foreground hover:bg-accent"}`,children:[d.jsx(nb,{size:12,className:"mr-2 text-gray-500"}),d.jsx("span",{className:"truncate",children:K.title})]},K.id))})]},L.id));return g.useEffect(()=>{const q=async()=>{if(!p.trim()){b([]);return}w(!0);try{await I(p)}catch(L){console.error("Search error:",L),We.error("Failed to perform search")}finally{w(!1)}};O.current!==null&&(window.clearTimeout(O.current),O.current=null);const Y=window.setTimeout(q,500);return O.current=Y,()=>{O.current!==null&&(window.clearTimeout(O.current),O.current=null)}},[p]),g.useEffect(()=>{v(""),b([])},[i,o]),e?d.jsxs("div",{className:"flex h-screen bg-background",children:[_&&d.jsxs("div",{className:"w-64 bg-card border-r border-border flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b border-border",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx(hu,{size:16,className:"mr-2"}),"Wiki"]}),d.jsx(Ke,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>j(!1),children:d.jsx(Ji,{size:16})})]}),d.jsxs("div",{className:"relative",children:[d.jsx(Ru,{size:16,className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),d.jsx(Tn,{type:"search",placeholder:"Search wiki...",className:"w-full pl-8 h-8 text-sm",value:p,onChange:q=>v(q.target.value)})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:S?d.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):W(M(c))}),p&&d.jsxs("div",{className:"mt-2 border-t border-border pt-2",children:[d.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2 px-2",children:x?"Searching...":`Found ${m.length} results`}),!x&&m.length===0?d.jsxs("div",{className:"text-xs text-muted-foreground px-2 py-1",children:['No results found for "',p,'"']}):d.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:m.map(q=>d.jsx(sn,{to:q.resultType==="page"?`/wiki/${q.folder_id?`${q.folder_id}/`:""}${q.slug}`:`/wiki/folder/${q.id}`,className:"flex items-center px-2 py-1.5 text-sm rounded hover:bg-accent",onClick:()=>v(""),children:ske(q)?d.jsxs("div",{className:"flex items-center",children:[d.jsx(nb,{className:"h-4 w-4 mr-2 text-gray-500"}),d.jsx("span",{children:q.title})]}):ike(q)?d.jsxs("div",{className:"flex items-center",children:[d.jsx(sb,{className:"h-4 w-4 mr-2 text-yellow-500"}),d.jsx("span",{children:q.name})]}):null},`${q.resultType}-${q.id}`))})]})]}),d.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[d.jsxs("header",{className:"h-14 border-b border-border flex items-center px-4",children:[!_&&d.jsx(Ke,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>j(!0),children:d.jsx(LI,{size:18})}),d.jsx("div",{className:"flex-1",children:d.jsx("h1",{className:"font-semibold",children:(h==null?void 0:h.title)||"Welcome to the Wiki"})}),d.jsx(Ke,{variant:"ghost",size:"icon",onClick:()=>N(!k),children:d.jsx(LI,{size:18})})]}),d.jsx("main",{ref:R,className:"flex-1 overflow-y-auto p-6 max-w-4xl mx-auto w-full",children:h?d.jsxs("article",{className:"prose max-w-none",children:[(r=h.sections)==null?void 0:r.map(q=>d.jsx("div",{children:z(q)},q.id)),d.jsxs("div",{className:"mt-12 pt-6 border-t border-border text-sm text-muted-foreground",children:["Last updated: ",new Date(h.updated_at).toLocaleDateString()]})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground",children:[d.jsx(hu,{size:48,className:"mb-4 text-muted-foreground/50"}),d.jsx("h2",{className:"text-xl font-medium mb-2",children:"Welcome to the Wiki"}),d.jsx("p",{className:"max-w-md",children:"Select a page from the sidebar or create a new one to get started."})]})})]}),k&&d.jsxs("div",{className:"w-64 border-l border-border bg-card overflow-y-auto",children:[d.jsx("div",{className:"p-4 border-b border-border",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"font-medium",children:"Table of Contents"}),d.jsx(Ke,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>N(!1),children:d.jsx(Ji,{size:16})})]})}),d.jsx("div",{className:"p-4",children:T.length>0?d.jsx("nav",{className:"space-y-1",children:T.map((q,Y)=>d.jsx("a",{href:`#${q.id}`,className:`block py-1 text-sm ${q.level===1?"font-medium":"text-muted-foreground"} hover:text-foreground`,style:{marginLeft:`${(q.level-1)*8}px`},children:q.text},Y))}):d.jsx("p",{className:"text-sm text-muted-foreground",children:"No headings found"})})]}),d.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[d.jsx("h1",{children:e.title}),(n=e.sections)!=null&&n.length?d.jsx("div",{className:"space-y-6",children:(s=e.sections)==null?void 0:s.sort((q,Y)=>(q.order_index??0)-(Y.order_index??0)).map(q=>d.jsxs("div",{className:"section",children:[q.title&&d.jsx("h2",{className:"text-2xl font-semibold mb-2",children:q.title}),d.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:q.content||""}})]},q.id))}):d.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:e.excerpt||""}})]})]}):d.jsx("div",{children:"Loading..."})}const oke=async()=>{const{data:e,error:t}=await fe.from("characters").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},ake=()=>{const{data:e,isLoading:t,isError:r,error:n}=Rt({queryKey:["characters"],queryFn:oke}),s=g.useRef(null);g.useRef({});const i=g.useRef([]);return g.useEffect(()=>{if(s.current){const o=s.current;for(let a=0;a<20;a++){const l=document.createElement("div");l.className="floating-dot",l.style.left=Math.random()*100+"%",l.style.top=Math.random()*100+"%",l.style.animationDelay=Math.random()*6+"s",l.style.animationDuration=4+Math.random()*4+"s",o.appendChild(l)}}},[]),g.useEffect(()=>{const o=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&l.target.classList.add("visible")})},{threshold:.2,rootMargin:"-50px"});return i.current.forEach(a=>{a&&o.observe(a)}),()=>{i.current.forEach(a=>{a&&o.unobserve(a)})}},[e]),g.useEffect(()=>{const o=()=>{var a;const l=window.pageYOffset,c=(a=s.current)==null?void 0:a.querySelectorAll(".floating-dot");c==null||c.forEach((u,h)=>{const f=.5+h%3*.2;u.style.transform=`translateY(${l*f}px) rotate(${l*.1}deg)`})};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),t?d.jsx("div",{className:"text-center py-8 text-text-light",children:"Loading characters..."}):r?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading characters: ",n==null?void 0:n.message]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{ref:s,className:"floating-elements"}),d.jsx("section",{className:"hero-section",children:d.jsxs("div",{children:[d.jsx("h1",{className:"hero-title",children:"Meet the Characters"}),d.jsx("p",{className:"hero-subtitle",children:"Journey into the world of extraordinary souls"}),d.jsx("div",{className:"scroll-indicator",children:d.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]})}),e==null?void 0:e.map((o,a)=>{var l;return d.jsxs("section",{ref:c=>{i.current[a]=c},className:"character-section ",children:[d.jsx("div",{className:"character-silhouette",children:d.jsx("div",{className:"silhouette-container",children:o.image_url?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:o.image_url,alt:o.name,className:"character-image"}),d.jsx("div",{className:"silhouette-overlay",style:{"--mask-image":`url(${o.silhouette_url||o.image_url})`}})]}):d.jsxs("div",{className:"upload-placeholder",children:[d.jsx("div",{className:"upload-icon",children:"📷"}),d.jsx("div",{children:"No Image"})]})})}),d.jsxs("div",{className:"character-info",children:[d.jsx("h2",{className:"character-name",children:o.name}),d.jsx("p",{className:"character-title",children:o.title}),d.jsx("p",{className:"character-description",children:o.description}),d.jsx("div",{className:"character-traits",children:(l=o.traits)==null?void 0:l.map((c,u)=>d.jsx("span",{className:"trait",children:c},u))})]})]},o.id)})]})},lke=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Locations & Factions"})}),cke=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Glossary"})}),uke=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Reviews"})}),dke=async()=>{const{data:e,error:t}=await fe.from("posts").select("*").eq("status","published").order("created_at",{ascending:!1});if(t)throw new Error(t.message);return e},hke=()=>{const{data:e,isLoading:t,isError:r,error:n}=Rt({queryKey:["blogPosts"],queryFn:dke});return t?d.jsx("div",{className:"text-center py-8",children:"Loading blog posts..."}):r?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading posts: ",n==null?void 0:n.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Blog & News"}),e&&e.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(s=>d.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:d.jsxs("div",{className:"p-6",children:[d.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:s.title}),d.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Published on ",new Date(s.created_at).toLocaleDateString()]}),d.jsx("div",{className:"text-gray-700 leading-relaxed line-clamp-3",dangerouslySetInnerHTML:{__html:s.content}}),d.jsx(sn,{to:`/blog/${s.slug}`,className:"mt-4 inline-block text-blue-600 hover:text-blue-800 font-medium",children:"Read More →"})]})},s.id))}):d.jsxs("div",{className:"text-center py-12 text-gray-600",children:[d.jsx("p",{className:"text-xl mb-4",children:"No blog posts published yet."}),d.jsx("p",{children:"Check back soon for new content!"})]})]})},fke=()=>d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-4xl font-bold",children:"404 - Not Found"}),d.jsx("p",{className:"mt-4",children:"Sorry, the page you are looking for does not exist."}),d.jsx(sn,{to:"/",className:"mt-6 inline-block bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",children:"Go to Home"})]}),pke=()=>{const e=()=>{localStorage.removeItem("isAuthenticated"),localStorage.removeItem("betaApplicationStatus"),window.location.href="/login"},t={title:"The Obsidian Gate - Issue 7",chaptersRead:5,totalChapters:10,readingWindowEnd:"August 30, 2025",feedbackWindowEnd:"September 7, 2025",launchDay:"September 15, 2025",downloadLink:"#"},r=[{id:1,description:"Read the Material",completed:!1},{id:2,description:"Submit Structured Feedback",completed:!1},{id:3,description:"Convert to Public Review",completed:!1}],n=[{name:"Beta Alumni",description:"Completed 1+ beta cycles"}],s=[{id:1,title:"New Feedback Form Available!",date:"August 20, 2025",content:"The feedback form for Issue 7 is now live. Please submit your thoughts by the deadline."},{id:2,title:"Reminder: Reading Window Ends Soon",date:"August 25, 2025",content:"Just a friendly reminder that the reading window for Issue 7 closes on August 30th."}];return d.jsxs("div",{className:"p-4",children:[d.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Welcome to the Beta Reader Portal!"}),d.jsx("p",{className:"mb-4",children:"This is your central hub for all active beta reading projects and resources."}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:["Current Beta Cycle: ",t.title]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Reading Window Ends:"})," ",t.readingWindowEnd]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Feedback Window Ends:"})," ",t.feedbackWindowEnd]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Launch Day:"})," ",t.launchDay]}),d.jsxs("p",{className:"mt-2",children:[d.jsx("strong",{children:"Your Progress:"})," Chapters Read ",t.chaptersRead,"/",t.totalChapters]}),d.jsx("a",{href:t.downloadLink,className:"mt-4 inline-block bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded",children:"Download Material"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mandatory Tasks"}),d.jsx("ul",{className:"list-none",children:r.map(i=>d.jsxs("li",{className:"flex items-center mb-1",children:[d.jsx("input",{type:"checkbox",checked:i.completed,readOnly:!0,className:"mr-2"}),i.description]},i.id))}),d.jsx("a",{href:"/beta/feedback",className:"mt-4 inline-block bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded",children:"Submit Feedback"})]})]})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Announcements"}),s.length>0?d.jsx("ul",{children:s.map(i=>d.jsxs("li",{className:"mb-4 pb-4 border-b last:border-b-0",children:[d.jsx("h3",{className:"font-bold text-lg",children:i.title}),d.jsx("p",{className:"text-sm text-muted-foreground",children:i.date}),d.jsx("p",{className:"mt-1",children:i.content})]},i.id))}):d.jsx("p",{className:"text-muted-foreground",children:"No new announcements at this time."})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Rewards & Recognition"}),n.length>0?d.jsx("div",{className:"flex flex-wrap gap-4",children:n.map(i=>d.jsxs("span",{className:"bg-muted text-muted-foreground text-sm font-medium px-3 py-1 rounded-full",children:[i.name," - ",i.description]},i.name))}):d.jsx("p",{className:"text-muted-foreground",children:"Complete your first beta cycle to earn your first badge!"}),d.jsx("p",{className:"mt-4 text-muted-foreground",children:"Upon successful completion of a beta cycle, you will receive a store discount coupon."})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Important Links"}),d.jsxs("ul",{className:"list-disc list-inside text-primary",children:[d.jsx("li",{children:d.jsx("a",{href:"/beta/handbook",className:"hover:underline",children:"Beta Reader Handbook"})}),d.jsx("li",{children:d.jsx("a",{href:"/beta/timeline",className:"hover:underline",children:"Operational Timeline"})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:underline",children:"Community Forum (Discord/Private Channel)"})}),d.jsx("li",{children:d.jsx("a",{href:"/beta/nda",className:"hover:underline",children:"View NDA"})})]})]}),d.jsx("button",{onClick:e,className:"mt-8 bg-destructive hover:bg-destructive-dark text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Logout"})]})},mke=()=>{const e=localStorage.getItem("betaApplicationStatus")||"none";let t="",r="text-gray-800",n=null;switch(e){case"none":t="You have not yet submitted a beta reader application.",r="text-blue-700",n=d.jsx(sn,{to:"/beta/application",className:"text-blue-500 hover:underline",children:"Apply now"});break;case"pending":t="Your beta reader application is currently under review. We will notify you of our decision soon.",r="text-yellow-700";break;case"accepted":t="Congratulations! Your beta reader application has been accepted. Welcome to the program!",r="text-green-700",n=d.jsx(sn,{to:"/beta/portal",className:"text-green-500 hover:underline",children:"Go to Beta Portal"});break;case"rejected":t="We regret to inform you that your beta reader application was not successful at this time.",r="text-red-700";break;default:t="Unknown application status.",r="text-gray-800"}return d.jsxs("div",{className:"p-4 text-center",children:[d.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Beta Application Status"}),d.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r} bg-white`,children:[d.jsx("p",{className:"text-lg font-semibold mb-4",children:t}),n&&d.jsx("p",{className:"mt-4",children:n})]})]})},gke=()=>{const{workId:e}=Tu(),[t,r]=g.useState(null),[n,s]=g.useState(!0),[i,o]=g.useState(null),[a,l]=g.useState(null);g.useEffect(()=>{(async()=>{const{data:{user:u}}=await fe.auth.getUser();u?l(u.id):(o("User not authenticated."),s(!1))})()},[]),g.useEffect(()=>{a&&e&&(async()=>{if(!(!a||!e))try{o(null);const u=await fetch(`http://localhost:3001/api/content/${e}`,{headers:{"x-user-id":a}}),h=await u.json();u.ok?r(h):o(h.message||"Failed to fetch content.")}catch(u){console.error("Error fetching work content:",u),o("An error occurred while fetching the work content.")}finally{s(!1)}})()},[a,e]);const c=async()=>{if(!(!a||!e))try{const u=await fetch(`http://localhost:3001/api/library/${a}/library/${e}/progress`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":a},body:JSON.stringify({is_finished:!0})});if(u.ok)alert("Work marked as finished!");else{const h=await u.json();alert(`Failed to mark as finished: ${h.message}`)}}catch(u){console.error("Error marking as finished:",u),alert("An error occurred while marking as finished.")}};return n?d.jsx("div",{className:"text-text-light",children:"Loading content..."}):i?d.jsxs("div",{className:"text-red-400",children:["Error: ",i]}):t?d.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"auto",fontFamily:"Arial, sans-serif"},children:[d.jsx("h2",{style:{fontSize:"2.5em",marginBottom:"10px",color:"#E0BBE4"},children:t.title}),d.jsx("p",{style:{fontSize:"1.1em",color:"#957DAD",marginBottom:"20px"},children:t.description}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{fontSize:"1.5em",marginBottom:"10px",color:"#FFC72C"},children:"Download Options:"}),t.content_urls.epub&&d.jsx("a",{href:t.content_urls.epub,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#4CAF50",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download EPUB"}),t.content_urls.pdf&&d.jsx("a",{href:t.content_urls.pdf,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#F44336",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download PDF"}),t.content_urls.mobi&&d.jsx("a",{href:t.content_urls.mobi,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#2196F3",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download MOBI"}),!t.content_urls.epub&&!t.content_urls.pdf&&!t.content_urls.mobi&&d.jsx("p",{style:{color:"#957DAD"},children:"No downloadable content available for this work."})]}),d.jsx("button",{onClick:c,style:{padding:"10px 20px",backgroundColor:"#8860D0",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",marginTop:"20px"},children:"Mark as Finished"})]}):d.jsx("div",{className:"text-text-light",children:"Content not found or not accessible."})},yke=g.createContext(void 0),vke=()=>{const e=g.useContext(yke);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e},bke=()=>{const{state:e,clearCart:t}=vke(),[r,n]=g.useState(!1),s=(a,l)=>new Intl.NumberFormat("en-US",{style:"currency",currency:l.toUpperCase()}).format(a),i=async()=>{n(!0),setTimeout(()=>{n(!1),t()},2e3)},o=()=>{};return e.items.length===0?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx(pC,{className:"w-16 h-16 text-text-dark mx-auto mb-4"}),d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-2",children:"Your cart is empty"}),d.jsx("p",{className:"text-text-dark mb-6",children:"Add some products to your cart before checking out."}),d.jsx("button",{onClick:o,className:"px-6 py-3 bg-secondary text-background rounded-xl hover:bg-secondary-dark transition-colors",children:"Continue Shopping"})]})}):d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background",children:d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsxs("button",{onClick:o,className:"flex items-center space-x-2 text-text-light hover:text-secondary transition-colors mb-4",children:[d.jsx(pU,{className:"w-5 h-5"}),d.jsx("span",{children:"Back to Store"})]}),d.jsx("h1",{className:"text-4xl font-heading text-text-light mb-2",children:"Checkout"}),d.jsx("p",{className:"text-text-light/70",children:"Complete your purchase"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30",children:[d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-6",children:"Order Summary"}),d.jsx("div",{className:"space-y-4 mb-6",children:e.items.map(a=>d.jsxs("div",{className:"flex items-center justify-between p-4 bg-background/30 rounded-xl",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-text-light",children:a.title}),d.jsx("p",{className:"text-sm text-text-dark",children:a.format.toUpperCase()})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-secondary font-medium",children:s(a.price,a.currency)}),d.jsxs("p",{className:"text-sm text-text-dark",children:["Qty: ",a.quantity]})]})]},a.id))}),d.jsxs("div",{className:"border-t border-border/30 pt-4",children:[d.jsxs("div",{className:"flex justify-between items-center text-lg font-medium text-text-light mb-2",children:[d.jsx("span",{children:"Subtotal:"}),d.jsx("span",{children:s(e.total,"USD")})]}),d.jsxs("div",{className:"flex justify-between items-center text-sm text-text-dark mb-4",children:[d.jsx("span",{children:"Tax:"}),d.jsx("span",{children:"Calculated at checkout"})]}),d.jsxs("div",{className:"flex justify-between items-center text-xl font-bold text-secondary",children:[d.jsx("span",{children:"Total:"}),d.jsx("span",{children:s(e.total,"USD")})]})]})]}),d.jsxs("div",{className:"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30",children:[d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-6",children:"Payment Information"}),d.jsxs("form",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-text-light mb-4",children:"Customer Information"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"First Name"}),d.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter first name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Last Name"}),d.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter last name"})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Email"}),d.jsx("input",{type:"email",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter email address"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-text-light mb-4",children:"Payment Method"}),d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-background/30 rounded-xl border border-border/30",children:[d.jsx("input",{type:"radio",name:"payment",id:"card",defaultChecked:!0,className:"text-secondary focus:ring-secondary"}),d.jsxs("label",{htmlFor:"card",className:"flex items-center space-x-2 cursor-pointer",children:[d.jsx(Rue,{className:"w-5 h-5 text-secondary"}),d.jsx("span",{className:"text-text-light",children:"Credit/Debit Card"})]})]})})]}),d.jsxs("div",{className:"p-4 bg-accent/10 border border-accent/30 rounded-xl",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-accent mb-2",children:[d.jsx(wU,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:"Secure Checkout"})]}),d.jsx("p",{className:"text-sm text-text-light/70",children:"Your payment information is encrypted and secure. We never store your credit card details."})]}),d.jsx("button",{type:"button",onClick:i,disabled:r,className:"w-full bg-secondary text-background py-4 px-6 rounded-xl font-medium hover:bg-secondary-dark focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:ring-offset-2 focus:ring-offset-background-light transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-lg",children:r?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"w-5 h-5 border-2 border-background border-t-transparent rounded-full animate-spin"}),d.jsx("span",{children:"Processing..."})]}):`Complete Purchase - ${s(e.total,"USD")}`})]})]})]})]})})};var Rx={},o9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(o9);var ET={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(ET);var CT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(CT);var Ix={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",a="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const c=r[i];a?c==="\\"&&i+1<s?(i++,o+=r[i]):c===a?a="":o+=c:l?c==='"'||c==="'"?a=c:c==="]"?(l=!1,n.push(o),o=""):o+=c:c==="["?(l=!0,o&&(n.push(o),o="")):c==="."?o&&(n.push(o),o=""):o+=c,i++}return o&&n.push(o),n}e.toPath=t})(Ix);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o9,r=ET,n=CT,s=Ix;function i(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?r.isDeepKey(l)?i(a,s.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let h=0;h<l.length;h++){if(u==null||t.isUnsafeProperty(l[h]))return c;u=u[l[h]]}return u===void 0?c:u}e.get=i})(Rx);var xke=Rx.get;const Wl=io(xke);var a9={exports:{}},wt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3;function wke(){if(r3)return wt;r3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function v(m){if(typeof m=="object"&&m!==null){var b=m.$$typeof;switch(b){case e:switch(m=m.type,m){case r:case s:case n:case l:case c:case f:return m;default:switch(m=m&&m.$$typeof,m){case o:case a:case h:case u:return m;case i:return m;default:return b}}case t:return b}}}return wt.ContextConsumer=i,wt.ContextProvider=o,wt.Element=e,wt.ForwardRef=a,wt.Fragment=r,wt.Lazy=h,wt.Memo=u,wt.Portal=t,wt.Profiler=s,wt.StrictMode=n,wt.Suspense=l,wt.SuspenseList=c,wt.isContextConsumer=function(m){return v(m)===i},wt.isContextProvider=function(m){return v(m)===o},wt.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===e},wt.isForwardRef=function(m){return v(m)===a},wt.isFragment=function(m){return v(m)===r},wt.isLazy=function(m){return v(m)===h},wt.isMemo=function(m){return v(m)===u},wt.isPortal=function(m){return v(m)===t},wt.isProfiler=function(m){return v(m)===s},wt.isStrictMode=function(m){return v(m)===n},wt.isSuspense=function(m){return v(m)===l},wt.isSuspenseList=function(m){return v(m)===c},wt.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===r||m===s||m===n||m===l||m===c||typeof m=="object"&&m!==null&&(m.$$typeof===h||m.$$typeof===u||m.$$typeof===o||m.$$typeof===i||m.$$typeof===a||m.$$typeof===p||m.getModuleId!==void 0)},wt.typeOf=v,wt}a9.exports=wke();var _ke=a9.exports,Pn=e=>e===0?0:e>0?1:-1,mi=e=>typeof e=="number"&&e!=+e,Fc=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Oe=e=>(typeof e=="number"||e instanceof Number)&&!mi(e),Mo=e=>Oe(e)||typeof e=="string",jke=0,Nm=e=>{var t=++jke;return"".concat(e||"").concat(t)},hi=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Oe(e)&&typeof e!="string")return r;var s;if(Fc(e)){if(t==null)return r;var i=e.indexOf("%");s=t*parseFloat(e.slice(0,i))/100}else s=+e;return mi(s)&&(s=r),n&&t!=null&&s>t&&(s=t),s},l9=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},n3=(e,t)=>Oe(e)&&Oe(t)?r=>e+r*(t-e):()=>t;function Xf(e,t,r){return Oe(e)&&Oe(t)?e+r*(t-e):t}function c9(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Wl(n,t))===r)}var Rr=e=>e===null||typeof e>"u",xg=e=>Rr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),kke=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function TT(e){if(typeof e!="string")return!1;var t=kke;return t.includes(e)}var Nke=["viewBox","children"],s3=["points","pathLength"],i3={svg:Nke,polygon:s3,polyline:s3},AT=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(g.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{TT(s)&&(n[s]=i=>r[s](r,i))}),n},Ske=(e,t,r)=>n=>(e(t,r,n),null),OT=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];TT(s)&&typeof i=="function"&&(n||(n={}),n[s]=Ske(i,t,r))}),n},Eke=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function u9(e){if(typeof e!="string")return!1;var t=Eke;return t.includes(e)}function nc(e){var t=Object.entries(e).filter(r=>{var[n]=r;return u9(n)});return Object.fromEntries(t)}var o3=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",a3=null,Fj=null,d9=e=>{if(e===a3&&Array.isArray(Fj))return Fj;var t=[];return g.Children.forEach(e,r=>{Rr(r)||(_ke.isFragment(r)?t=t.concat(d9(r.props.children)):t.push(r))}),Fj=t,a3=e,t};function Dx(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>o3(s)):n=[o3(t)],d9(e).forEach(s=>{var i=Wl(s,"type.displayName")||Wl(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var h9=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Cke=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var i=(s=n&&(i3==null?void 0:i3[n]))!==null&&s!==void 0?s:[],o=t.startsWith("data-"),a=typeof e!="function"&&(!!n&&i.includes(t)||u9(t)),l=!!r&&TT(t);return o||a||l},nr=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;Cke((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},Tke=["children","width","height","viewBox","className","style","title","desc"];function bS(){return bS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bS.apply(null,arguments)}function Ake(e,t){if(e==null)return{};var r,n,s=Oke(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Oke(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PT=g.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:a,title:l,desc:c}=e,u=Ake(e,Tke),h=i||{width:n,height:s,x:0,y:0},f=ot("recharts-surface",o);return g.createElement("svg",bS({},nr(u,!0,"svg"),{className:f,width:n,height:s,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),g.createElement("title",null,l),g.createElement("desc",null,c),r)}),Pke=["children","className"];function xS(){return xS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xS.apply(null,arguments)}function Rke(e,t){if(e==null)return{};var r,n,s=Ike(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ike(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gi=g.forwardRef((e,t)=>{var{children:r,className:n}=e,s=Rke(e,Pke),i=ot("recharts-layer",n);return g.createElement("g",xS({className:i},nr(s,!0),{ref:t}),r)}),f9=g.createContext(null),Dke=()=>g.useContext(f9);function zt(e){return function(){return e}}const p9=Math.cos,jb=Math.sin,ao=Math.sqrt,kb=Math.PI,Lx=2*kb,wS=Math.PI,_S=2*wS,Ac=1e-6,Lke=_S-Ac;function m9(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Mke(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return m9;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class $ke{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?m9:Mke(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=n-t,c=s-r,u=o-t,h=a-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>Ac)if(!(Math.abs(h*l-c*u)>Ac)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,v=s-a,m=l*l+c*c,b=p*p+v*v,x=Math.sqrt(m),w=Math.sqrt(f),_=i*Math.tan((wS-Math.acos((m+f-b)/(2*x*w)))/2),j=_/w,k=_/x;Math.abs(j-1)>Ac&&this._append`L${t+j*u},${r+j*h}`,this._append`A${i},${i},0,0,${+(h*p>u*v)},${this._x1=t+k*l},${this._y1=r+k*c}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(s),l=n*Math.sin(s),c=t+a,u=r+l,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Ac||Math.abs(this._y1-u)>Ac)&&this._append`L${c},${u}`,n&&(f<0&&(f=f%_S+_S),f>Lke?this._append`A${n},${n},0,1,${h},${t-a},${r-l}A${n},${n},0,1,${h},${this._x1=c},${this._y1=u}`:f>Ac&&this._append`A${n},${n},0,${+(f>=wS)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function RT(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new $ke(t)}function IT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function g9(e){this._context=e}g9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Mx(e){return new g9(e)}function y9(e){return e[0]}function v9(e){return e[1]}function b9(e,t){var r=zt(!0),n=null,s=Mx,i=null,o=RT(a);e=typeof e=="function"?e:e===void 0?y9:zt(e),t=typeof t=="function"?t:t===void 0?v9:zt(t);function a(l){var c,u=(l=IT(l)).length,h,f=!1,p;for(n==null&&(i=s(p=o())),c=0;c<=u;++c)!(c<u&&r(h=l[c],c,l))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,c,l),+t(h,c,l));if(p)return i=null,p+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:zt(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:zt(+l),a):t},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:zt(!!l),a):r},a.curve=function(l){return arguments.length?(s=l,n!=null&&(i=s(n)),a):s},a.context=function(l){return arguments.length?(l==null?n=i=null:i=s(n=l),a):n},a}function Ky(e,t,r){var n=null,s=zt(!0),i=null,o=Mx,a=null,l=RT(c);e=typeof e=="function"?e:e===void 0?y9:zt(+e),t=typeof t=="function"?t:zt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?v9:zt(+r);function c(h){var f,p,v,m=(h=IT(h)).length,b,x=!1,w,_=new Array(m),j=new Array(m);for(i==null&&(a=o(w=l())),f=0;f<=m;++f){if(!(f<m&&s(b=h[f],f,h))===x)if(x=!x)p=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),v=f-1;v>=p;--v)a.point(_[v],j[v]);a.lineEnd(),a.areaEnd()}x&&(_[f]=+e(b,f,h),j[f]=+t(b,f,h),a.point(n?+n(b,f,h):_[f],r?+r(b,f,h):j[f]))}if(w)return a=null,w+""||null}function u(){return b9().defined(s).curve(o).context(i)}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:zt(+h),n=null,c):e},c.x0=function(h){return arguments.length?(e=typeof h=="function"?h:zt(+h),c):e},c.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:zt(+h),c):n},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:zt(+h),r=null,c):t},c.y0=function(h){return arguments.length?(t=typeof h=="function"?h:zt(+h),c):t},c.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:zt(+h),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(h){return arguments.length?(s=typeof h=="function"?h:zt(!!h),c):s},c.curve=function(h){return arguments.length?(o=h,i!=null&&(a=o(i)),c):o},c.context=function(h){return arguments.length?(h==null?i=a=null:a=o(i=h),c):i},c}class x9{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Fke(e){return new x9(e,!0)}function zke(e){return new x9(e,!1)}const DT={draw(e,t){const r=ao(t/kb);e.moveTo(r,0),e.arc(0,0,r,0,Lx)}},Uke={draw(e,t){const r=ao(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},w9=ao(1/3),Bke=w9*2,qke={draw(e,t){const r=ao(t/Bke),n=r*w9;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Vke={draw(e,t){const r=ao(t),n=-r/2;e.rect(n,n,r,r)}},Wke=.8908130915292852,_9=jb(kb/10)/jb(7*kb/10),Kke=jb(Lx/10)*_9,Hke=-p9(Lx/10)*_9,Zke={draw(e,t){const r=ao(t*Wke),n=Kke*r,s=Hke*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Lx*i/5,a=p9(o),l=jb(o);e.lineTo(l*r,-a*r),e.lineTo(a*n-l*s,l*n+a*s)}e.closePath()}},zj=ao(3),Gke={draw(e,t){const r=-ao(t/(zj*3));e.moveTo(0,r*2),e.lineTo(-zj*r,-r),e.lineTo(zj*r,-r),e.closePath()}},Hs=-.5,Zs=ao(3)/2,jS=1/ao(12),Yke=(jS/2+1)*3,Jke={draw(e,t){const r=ao(t/Yke),n=r/2,s=r*jS,i=n,o=r*jS+r,a=-i,l=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(a,l),e.lineTo(Hs*n-Zs*s,Zs*n+Hs*s),e.lineTo(Hs*i-Zs*o,Zs*i+Hs*o),e.lineTo(Hs*a-Zs*l,Zs*a+Hs*l),e.lineTo(Hs*n+Zs*s,Hs*s-Zs*n),e.lineTo(Hs*i+Zs*o,Hs*o-Zs*i),e.lineTo(Hs*a+Zs*l,Hs*l-Zs*a),e.closePath()}};function Xke(e,t){let r=null,n=RT(s);e=typeof e=="function"?e:zt(e||DT),t=typeof t=="function"?t:zt(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:zt(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:zt(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Nb(){}function Sb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function j9(e){this._context=e}j9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Sb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Sb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Qke(e){return new j9(e)}function k9(e){this._context=e}k9.prototype={areaStart:Nb,areaEnd:Nb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Sb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eNe(e){return new k9(e)}function N9(e){this._context=e}N9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Sb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tNe(e){return new N9(e)}function S9(e){this._context=e}S9.prototype={areaStart:Nb,areaEnd:Nb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function rNe(e){return new S9(e)}function l3(e){return e<0?-1:1}function c3(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),a=(i*s+o*n)/(n+s);return(l3(i)+l3(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function u3(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Uj(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,a=(i-n)/3;e._context.bezierCurveTo(n+a,s+a*t,i-a,o-a*r,i,o)}function Eb(e){this._context=e}Eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Uj(this,this._t0,u3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Uj(this,u3(this,r=c3(this,e,t)),r);break;default:Uj(this,this._t0,r=c3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function E9(e){this._context=new C9(e)}(E9.prototype=Object.create(Eb.prototype)).point=function(e,t){Eb.prototype.point.call(this,t,e)};function C9(e){this._context=e}C9.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function nNe(e){return new Eb(e)}function sNe(e){return new E9(e)}function T9(e){this._context=e}T9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=d3(e),s=d3(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function d3(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function iNe(e){return new T9(e)}function $x(e,t){this._context=e,this._t=t}$x.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function oNe(e){return new $x(e,.5)}function aNe(e){return new $x(e,0)}function lNe(e){return new $x(e,1)}function Rh(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,a=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<a;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function kS(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function cNe(e,t){return e[t]}function uNe(e){const t=[];return t.key=e,t}function dNe(){var e=zt([]),t=kS,r=Rh,n=cNe;function s(i){var o=Array.from(e.apply(this,arguments),uNe),a,l=o.length,c=-1,u;for(const h of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+n(h,o[a].key,c,i)]).data=h;for(a=0,u=IT(t(o));a<l;++a)o[u[a]].index=a;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:zt(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:zt(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?kS:typeof i=="function"?i:zt(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Rh,s):r},s}function hNe(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}Rh(e,t)}}function fNe(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,a=0;o<s;++o)a+=e[o][r][1]||0;n[r][1]+=n[r][0]=-a/2}Rh(e,t)}}function pNe(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var a=0,l=0,c=0;a<o;++a){for(var u=e[t[a]],h=u[n][1]||0,f=u[n-1][1]||0,p=(h-f)/2,v=0;v<a;++v){var m=e[t[v]],b=m[n][1]||0,x=m[n-1][1]||0;p+=b-x}l+=h,c+=p*h}s[n-1][1]+=s[n-1][0]=r,l&&(r-=c/l)}s[n-1][1]+=s[n-1][0]=r,Rh(e,t)}}var mNe=["type","size","sizeType"];function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NS.apply(null,arguments)}function h3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function f3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h3(Object(r),!0).forEach(function(n){gNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gNe(e,t,r){return(t=yNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yNe(e){var t=vNe(e,"string");return typeof t=="symbol"?t:t+""}function vNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bNe(e,t){if(e==null)return{};var r,n,s=xNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var A9={symbolCircle:DT,symbolCross:Uke,symbolDiamond:qke,symbolSquare:Vke,symbolStar:Zke,symbolTriangle:Gke,symbolWye:Jke},wNe=Math.PI/180,_Ne=e=>{var t="symbol".concat(xg(e));return A9[t]||DT},jNe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*wNe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},kNe=(e,t)=>{A9["symbol".concat(xg(e))]=t},LT=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=bNe(e,mNe),i=f3(f3({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var h=_Ne(t),f=Xke().type(h).size(jNe(r,n,t));return f()},{className:a,cx:l,cy:c}=i,u=nr(i,!0);return l===+l&&c===+c&&r===+r?g.createElement("path",NS({},u,{className:ot("recharts-symbols",a),transform:"translate(".concat(l,", ").concat(c,")"),d:o()})):null};LT.registerSymbol=kNe;function SS(){return SS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SS.apply(null,arguments)}function p3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function NNe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p3(Object(r),!0).forEach(function(n){MT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MT(e,t,r){return(t=SNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SNe(e){var t=ENe(e,"string");return typeof t=="symbol"?t:t+""}function ENe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gs=32;class $T extends g.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,s=Gs/2,i=Gs/6,o=Gs/3,a=t.inactive?n:t.color,l=r??t.type;if(l==="none")return null;if(l==="plainline")return g.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:Gs,y2:s,className:"recharts-legend-icon"});if(l==="line")return g.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(Gs,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(l==="rect")return g.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(Gs/8,"h").concat(Gs,"v").concat(Gs*3/4,"h").concat(-Gs,"z"),className:"recharts-legend-icon"});if(g.isValidElement(t.legendIcon)){var c=NNe({},t);return delete c.legendIcon,g.cloneElement(t.legendIcon,c)}return g.createElement(LT,{fill:a,cx:s,cy:s,size:Gs,sizeType:"diameter",type:l})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:i,iconType:o}=this.props,a={x:0,y:0,width:Gs,height:Gs},l={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var f=u.formatter||s,p=ot({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,m=f?f(u.value,u,h):u.value;return g.createElement("li",SS({className:p,style:l,key:"legend-item-".concat(h)},OT(this.props,u,h)),g.createElement(PT,{width:r,height:r,viewBox:a,style:c,"aria-label":"".concat(m," legend icon")},this.renderIcon(u,o)),g.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return g.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}MT($T,"displayName","Legend");MT($T,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var O9={},P9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],a=n(o);s.has(a)||s.set(a,o)}return Array.from(s.values())}e.uniqBy=t})(P9);var FT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(FT);var R9={},Fx={},I9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(I9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I9;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Fx);var D9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(D9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fx,r=D9;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(R9);var L9={},M9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rx;function r(n){return function(s){return t.get(s,n)}}e.property=r})(M9);var $9={},m3={},g3={},zT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(zT);var UT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(UT);var zx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(zx);var y3;function CNe(){return y3||(y3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BT(),r=zT,n=UT,s=zx;function i(h,f,p){return typeof p!="function"?t.isMatch(h,f):o(h,f,function v(m,b,x,w,_,j){const k=p(m,b,x,w,_,j);return k!==void 0?!!k:o(m,b,v,j)},new Map)}function o(h,f,p,v){if(f===h)return!0;switch(typeof f){case"object":return a(h,f,p,v);case"function":return Object.keys(f).length>0?o(h,{...f},p,v):s.eq(h,f);default:return r.isObject(h)?typeof f=="string"?f==="":!0:s.eq(h,f)}}function a(h,f,p,v){if(f==null)return!0;if(Array.isArray(f))return c(h,f,p,v);if(f instanceof Map)return l(h,f,p,v);if(f instanceof Set)return u(h,f,p,v);const m=Object.keys(f);if(h==null)return m.length===0;if(m.length===0)return!0;if(v&&v.has(f))return v.get(f)===h;v&&v.set(f,h);try{for(let b=0;b<m.length;b++){const x=m[b];if(!n.isPrimitive(h)&&!(x in h)||f[x]===void 0&&h[x]!==void 0||f[x]===null&&h[x]!==null||!p(h[x],f[x],x,h,f,v))return!1}return!0}finally{v&&v.delete(f)}}function l(h,f,p,v){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[m,b]of f.entries()){const x=h.get(m);if(p(x,b,m,h,f,v)===!1)return!1}return!0}function c(h,f,p,v){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const m=new Set;for(let b=0;b<f.length;b++){const x=f[b];let w=!1;for(let _=0;_<h.length;_++){if(m.has(_))continue;const j=h[_];let k=!1;if(p(j,x,b,h,f,v)&&(k=!0),k){m.add(_),w=!0;break}}if(!w)return!1}return!0}function u(h,f,p,v){return f.size===0?!0:h instanceof Set?c([...h],[...f],p,v):!1}e.isMatchWith=i,e.isSetMatch=u}(g3)),g3}var v3;function BT(){return v3||(v3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CNe();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(m3)),m3}var F9={},qT={},VT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(VT);var Ux={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Ux);var Bx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",p="[object Object]",v="[object Error]",m="[object DataView]",b="[object Uint8Array]",x="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",j="[object BigUint64Array]",k="[object Int8Array]",N="[object Int16Array]",S="[object Int32Array]",E="[object BigInt64Array]",T="[object Float32Array]",P="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=u,e.bigInt64ArrayTag=E,e.bigUint64ArrayTag=j,e.booleanTag=s,e.dataViewTag=m,e.dateTag=a,e.errorTag=v,e.float32ArrayTag=T,e.float64ArrayTag=P,e.functionTag=h,e.int16ArrayTag=N,e.int32ArrayTag=S,e.int8ArrayTag=k,e.mapTag=l,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=x})(Bx);var z9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(z9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VT,r=Ux,n=Bx,s=UT,i=z9;function o(u,h){return a(u,void 0,u,new Map,h)}function a(u,h,f,p=new Map,v=void 0){const m=v==null?void 0:v(u,h,f,p);if(m!==void 0)return m;if(s.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const b=new Array(u.length);p.set(u,b);for(let x=0;x<u.length;x++)b[x]=a(u[x],x,f,p,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;p.set(u,b);for(const[x,w]of u)b.set(x,a(w,x,f,p,v));return b}if(u instanceof Set){const b=new Set;p.set(u,b);for(const x of u)b.add(a(x,void 0,f,p,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,b);for(let x=0;x<u.length;x++)b[x]=a(u[x],x,f,p,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,b),l(b,u,f,p,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return p.set(u,b),l(b,u,f,p,v),b}if(u instanceof Blob){const b=new Blob([u],{type:u.type});return p.set(u,b),l(b,u,f,p,v),b}if(u instanceof Error){const b=new u.constructor;return p.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,l(b,u,f,p,v),b}if(typeof u=="object"&&c(u)){const b=Object.create(Object.getPrototypeOf(u));return p.set(u,b),l(b,u,f,p,v),b}return u}function l(u,h,f=u,p,v){const m=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<m.length;b++){const x=m[b],w=Object.getOwnPropertyDescriptor(u,x);(w==null||w.writable)&&(u[x]=a(h[x],x,f,p,v))}}function c(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=a,e.copyProperties=l})(qT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qT;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(F9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BT(),r=F9;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})($9);var U9={},B9={},q9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qT,r=Bx;function n(s,i){return t.cloneDeepWith(s,(o,a,l,c)=>{const u=i==null?void 0:i(o,a,l,c);if(u!==void 0)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n})(q9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q9;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(B9);var V9={},WT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(WT);var W9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ux;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(W9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ET,r=WT,n=W9,s=Ix;function i(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&t.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=s.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const h=l[u];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}e.has=i})(V9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BT(),r=CT,n=B9,s=Rx,i=V9;function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=r.toKey(a);break}}return l=n.cloneDeep(l),function(c){const u=s.get(c,a);return u===void 0?i.has(c,a):l===void 0?u===void 0:t.isMatch(u,l)}}e.matchesProperty=o})(U9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FT,r=M9,n=$9,s=U9;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(L9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P9,r=FT,n=R9,s=L9;function i(o,a=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(a)):[]}e.uniqBy=i})(O9);var TNe=O9.uniqBy;const b3=io(TNe);function K9(e,t,r){return t===!0?b3(e,r):typeof t=="function"?b3(e,t):e}var H9={exports:{}},Bj={},x3={exports:{}},qj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w3;function ANe(){if(w3)return qj;w3=1;var e=ee;function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function a(h,f){var p=f(),v=n({inst:{value:p,getSnapshot:f}}),m=v[0].inst,b=v[1];return i(function(){m.value=p,m.getSnapshot=f,l(m)&&b({inst:m})},[h,p,f]),s(function(){return l(m)&&b({inst:m}),h(function(){l(m)&&b({inst:m})})},[h]),o(p),p}function l(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!r(h,p)}catch{return!0}}function c(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return qj.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,qj}var _3;function ONe(){return _3||(_3=1,x3.exports=ANe()),x3.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j3;function PNe(){if(j3)return Bj;j3=1;var e=ee,t=ONe();function r(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,l=e.useDebugValue;return Bj.useSyncExternalStoreWithSelector=function(c,u,h,f,p){var v=i(null);if(v.current===null){var m={hasValue:!1,value:null};v.current=m}else m=v.current;v=a(function(){function x(N){if(!w){if(w=!0,_=N,N=f(N),p!==void 0&&m.hasValue){var S=m.value;if(p(S,N))return j=S}return j=N}if(S=j,n(_,N))return S;var E=f(N);return p!==void 0&&p(S,E)?(_=N,S):(_=N,j=E)}var w=!1,_,j,k=h===void 0?null:h;return[function(){return x(u())},k===null?void 0:function(){return x(k())}]},[u,h,f,p]);var b=s(c,v[0],v[1]);return o(function(){m.hasValue=!0,m.value=b},[b]),l(b),b},Bj}H9.exports=PNe();var RNe=H9.exports,KT=g.createContext(null),INe=e=>e,ar=()=>{var e=g.useContext(KT);return e?e.store.dispatch:INe},Av=()=>{},DNe=()=>Av,LNe=(e,t)=>e===t;function De(e){var t=g.useContext(KT);return RNe.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:DNe,t?t.store.getState:Av,t?t.store.getState:Av,t?e:Av,LNe)}function MNe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function $Ne(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function FNe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var k3=e=>Array.isArray(e)?e:[e];function zNe(e){const t=Array.isArray(e[0])?e[0]:e;return FNe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function UNe(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var BNe=class{constructor(e){this.value=e}deref(){return this.value}},qNe=typeof WeakRef<"u"?WeakRef:BNe,VNe=0,N3=1;function Hy(){return{s:VNe,v:void 0,o:null,p:null}}function Z9(e,t={}){let r=Hy();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var a;let l=r;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const v=arguments[f];if(typeof v=="function"||typeof v=="object"&&v!==null){let m=l.o;m===null&&(l.o=m=new WeakMap);const b=m.get(v);b===void 0?(l=Hy(),m.set(v,l)):l=b}else{let m=l.p;m===null&&(l.p=m=new Map);const b=m.get(v);b===void 0?(l=Hy(),m.set(v,l)):l=b}}const u=l;let h;if(l.s===N3)h=l.v;else if(h=e.apply(null,arguments),i++,n){const f=((a=s==null?void 0:s.deref)==null?void 0:a.call(s))??s;f!=null&&n(f,h)&&(h=f,i!==0&&i--),s=typeof h=="object"&&h!==null||typeof h=="function"?new qNe(h):h}return u.s=N3,u.v=h,h}return o.clearCache=()=>{r=Hy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function WNe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,a,l={},c=s.pop();typeof c=="object"&&(l=c,c=s.pop()),MNe(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...r,...l},{memoize:h,memoizeOptions:f=[],argsMemoize:p=Z9,argsMemoizeOptions:v=[]}=u,m=k3(f),b=k3(v),x=zNe(s),w=h(function(){return i++,c.apply(null,arguments)},...m),_=p(function(){o++;const j=UNe(x,arguments);return a=w.apply(null,j),a},...b);return Object.assign(_,{resultFunc:c,memoizedResultFunc:w,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var X=WNe(Z9),KNe=Object.assign((e,t=X)=>{$Ne(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,a)=>(i[r[a]]=o,i),{}))},{withTypes:()=>KNe}),G9={},Y9={},J9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),a=t(s);if(o===a&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?a-o:o-a}return 0};e.compareValues=r})(J9);var X9={},HT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(HT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HT,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(X9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J9,r=X9,n=Ix;function s(i,o,a,l){if(i==null)return[];a=l?void 0:a,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(f=>String(f));const c=(f,p)=>{let v=f;for(let m=0;m<p.length&&v!=null;++m)v=v[p[m]];return v},u=(f,p)=>p==null||f==null?p:typeof f=="object"&&"key"in f?Object.hasOwn(p,f.key)?p[f.key]:c(p,f.path):typeof f=="function"?f(p):Array.isArray(f)?c(p,f):typeof p=="object"?p[f]:p,h=o.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||r.isKey(f)?f:{key:f,path:n.toPath(f)}));return i.map(f=>({original:f,criteria:h.map(p=>u(p,f))})).slice().sort((f,p)=>{for(let v=0;v<h.length;v++){const m=t.compareValues(f.criteria[v],p.criteria[v],a[v]);if(m!==0)return m}return 0}).map(f=>f.original)}e.orderBy=s})(Y9);var Q9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<i?o(u,l+1):s.push(u)}};return o(r,0),s}e.flatten=t})(Q9);var ZT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WT,r=Fx,n=zT,s=zx;function i(o,a,l){return n.isObject(l)&&(typeof a=="number"&&r.isArrayLike(l)&&t.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?s.eq(l[a],o):!1}e.isIterateeCall=i})(ZT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y9,r=Q9,n=ZT;function s(i,...o){const a=o.length;return a>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:a>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})(G9);var HNe=G9.sortBy;const qx=io(HNe);var eV=e=>e.legend.settings,ZNe=e=>e.legend.size,GNe=e=>e.legend.payload,YNe=X([GNe,eV],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?qx(n,r):n});function JNe(){return De(YNe)}var Zy=1;function tV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=g.useState({height:0,left:0,top:0,width:0}),n=g.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Zy||Math.abs(o.left-t.left)>Zy||Math.abs(o.top-t.top)>Zy||Math.abs(o.width-t.width)>Zy)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function mn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var XNe=typeof Symbol=="function"&&Symbol.observable||"@@observable",S3=XNe,Vj=()=>Math.random().toString(36).substring(7).split("").join("."),QNe={INIT:`@@redux/INIT${Vj()}`,REPLACE:`@@redux/REPLACE${Vj()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Vj()}`},Cb=QNe;function GT(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function rV(e,t,r){if(typeof e!="function")throw new Error(mn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(mn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(mn(1));return r(rV)(e,t)}let n=e,s=t,i=new Map,o=i,a=0,l=!1;function c(){o===i&&(o=new Map,i.forEach((m,b)=>{o.set(b,m)}))}function u(){if(l)throw new Error(mn(3));return s}function h(m){if(typeof m!="function")throw new Error(mn(4));if(l)throw new Error(mn(5));let b=!0;c();const x=a++;return o.set(x,m),function(){if(b){if(l)throw new Error(mn(6));b=!1,c(),o.delete(x),i=null}}}function f(m){if(!GT(m))throw new Error(mn(7));if(typeof m.type>"u")throw new Error(mn(8));if(typeof m.type!="string")throw new Error(mn(17));if(l)throw new Error(mn(9));try{l=!0,s=n(s,m)}finally{l=!1}return(i=o).forEach(b=>{b()}),m}function p(m){if(typeof m!="function")throw new Error(mn(10));n=m,f({type:Cb.REPLACE})}function v(){const m=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(mn(11));function x(){const w=b;w.next&&w.next(u())}return x(),{unsubscribe:m(x)}},[S3](){return this}}}return f({type:Cb.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:p,[S3]:v}}function eSe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Cb.INIT})>"u")throw new Error(mn(12));if(typeof r(void 0,{type:Cb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(mn(13))})}function nV(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{eSe(r)}catch(i){s=i}return function(i={},o){if(s)throw s;let a=!1;const l={};for(let c=0;c<n.length;c++){const u=n[c],h=r[u],f=i[u],p=h(f,o);if(typeof p>"u")throw o&&o.type,new Error(mn(14));l[u]=p,a=a||p!==f}return a=a||n.length!==Object.keys(i).length,a?l:i}}function Tb(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function tSe(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(mn(15))};const o={getState:s.getState,dispatch:(l,...c)=>i(l,...c)},a=e.map(l=>l(o));return i=Tb(...a)(s.dispatch),{...s,dispatch:i}}}function sV(e){return GT(e)&&"type"in e&&typeof e.type=="string"}var iV=Symbol.for("immer-nothing"),E3=Symbol.for("immer-draftable"),zs=Symbol.for("immer-state");function Ki(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ih=Object.getPrototypeOf;function yu(e){return!!e&&!!e[zs]}function Oa(e){var t;return e?oV(e)||Array.isArray(e)||!!e[E3]||!!((t=e.constructor)!=null&&t[E3])||Wx(e)||Kx(e):!1}var rSe=Object.prototype.constructor.toString();function oV(e){if(!e||typeof e!="object")return!1;const t=Ih(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===rSe}function Ab(e,t){Vx(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Vx(e){const t=e[zs];return t?t.type_:Array.isArray(e)?1:Wx(e)?2:Kx(e)?3:0}function ES(e,t){return Vx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function aV(e,t,r){const n=Vx(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function nSe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Wx(e){return e instanceof Map}function Kx(e){return e instanceof Set}function Oc(e){return e.copy_||e.base_}function CS(e,t){if(Wx(e))return new Map(e);if(Kx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=oV(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[zs];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Ih(e),n)}else{const n=Ih(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function YT(e,t=!1){return Hx(e)||yu(e)||!Oa(e)||(Vx(e)>1&&(e.set=e.add=e.clear=e.delete=sSe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>YT(n,!0))),e}function sSe(){Ki(2)}function Hx(e){return Object.isFrozen(e)}var iSe={};function vu(e){const t=iSe[e];return t||Ki(0,e),t}var Sm;function lV(){return Sm}function oSe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function C3(e,t){t&&(vu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function TS(e){AS(e),e.drafts_.forEach(aSe),e.drafts_=null}function AS(e){e===Sm&&(Sm=e.parent_)}function T3(e){return Sm=oSe(Sm,e)}function aSe(e){const t=e[zs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function A3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[zs].modified_&&(TS(t),Ki(4)),Oa(e)&&(e=Ob(t,e),t.parent_||Pb(t,e)),t.patches_&&vu("Patches").generateReplacementPatches_(r[zs].base_,e,t.patches_,t.inversePatches_)):e=Ob(t,r,[]),TS(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==iV?e:void 0}function Ob(e,t,r){if(Hx(t))return t;const n=t[zs];if(!n)return Ab(t,(s,i)=>O3(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Pb(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),Ab(i,(a,l)=>O3(e,n,s,a,l,r,o)),Pb(e,s,!1),r&&e.patches_&&vu("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function O3(e,t,r,n,s,i,o){if(yu(s)){const a=i&&t&&t.type_!==3&&!ES(t.assigned_,n)?i.concat(n):void 0,l=Ob(e,s,a);if(aV(r,n,l),yu(l))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(Oa(s)&&!Hx(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ob(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Pb(e,s)}}function Pb(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&YT(t,r)}function lSe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:lV(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=JT;r&&(s=[n],i=Em);const{revoke:o,proxy:a}=Proxy.revocable(s,i);return n.draft_=a,n.revoke_=o,a}var JT={get(e,t){if(t===zs)return e;const r=Oc(e);if(!ES(r,t))return cSe(e,r,t);const n=r[t];return e.finalized_||!Oa(n)?n:n===Wj(e.base_,t)?(Kj(e),e.copy_[t]=PS(n,e)):n},has(e,t){return t in Oc(e)},ownKeys(e){return Reflect.ownKeys(Oc(e))},set(e,t,r){const n=cV(Oc(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Wj(Oc(e),t),i=s==null?void 0:s[zs];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(nSe(r,s)&&(r!==void 0||ES(e.base_,t)))return!0;Kj(e),OS(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Wj(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Kj(e),OS(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Oc(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Ki(11)},getPrototypeOf(e){return Ih(e.base_)},setPrototypeOf(){Ki(12)}},Em={};Ab(JT,(e,t)=>{Em[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Em.deleteProperty=function(e,t){return Em.set.call(this,e,t,void 0)};Em.set=function(e,t,r){return JT.set.call(this,e[0],t,r,e[0])};function Wj(e,t){const r=e[zs];return(r?Oc(r):e)[t]}function cSe(e,t,r){var n;const s=cV(t,r);return s?"value"in s?s.value:(n=s.get)==null?void 0:n.call(e.draft_):void 0}function cV(e,t){if(!(t in e))return;let r=Ih(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ih(r)}}function OS(e){e.modified_||(e.modified_=!0,e.parent_&&OS(e.parent_))}function Kj(e){e.copy_||(e.copy_=CS(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var uSe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(a=i,...l){return o.produce(a,c=>r.call(this,c,...l))}}typeof r!="function"&&Ki(6),n!==void 0&&typeof n!="function"&&Ki(7);let s;if(Oa(t)){const i=T3(this),o=PS(t,void 0);let a=!0;try{s=r(o),a=!1}finally{a?TS(i):AS(i)}return C3(i,n),A3(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===iV&&(s=void 0),this.autoFreeze_&&YT(s,!0),n){const i=[],o=[];vu("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else Ki(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,a=>t(a,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Oa(e)||Ki(8),yu(e)&&(e=wa(e));const t=T3(this),r=PS(e,void 0);return r[zs].isManual_=!0,AS(t),r}finishDraft(e,t){const r=e&&e[zs];(!r||!r.isManual_)&&Ki(9);const{scope_:n}=r;return C3(n,t),A3(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=vu("Patches").applyPatches_;return yu(e)?n(e,t):this.produce(e,s=>n(s,t))}};function PS(e,t){const r=Wx(e)?vu("MapSet").proxyMap_(e,t):Kx(e)?vu("MapSet").proxySet_(e,t):lSe(e,t);return(t?t.scope_:lV()).drafts_.push(r),r}function wa(e){return yu(e)||Ki(10,e),uV(e)}function uV(e){if(!Oa(e)||Hx(e))return e;const t=e[zs];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=CS(e,t.scope_.immer_.useStrictShallowCopy_)}else r=CS(e,!0);return Ab(r,(n,s)=>{aV(r,n,uV(s))}),t&&(t.finalized_=!1),r}var Us=new uSe,dV=Us.produce;Us.produceWithPatches.bind(Us);Us.setAutoFreeze.bind(Us);Us.setUseStrictShallowCopy.bind(Us);Us.applyPatches.bind(Us);Us.createDraft.bind(Us);Us.finishDraft.bind(Us);function hV(e){return({dispatch:t,getState:r})=>n=>s=>typeof s=="function"?s(t,r,e):n(s)}var dSe=hV(),hSe=hV,fSe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Tb:Tb.apply(null,arguments)};function yi(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Fs(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>sV(n)&&n.type===e,r}var fV=class Np extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Np.prototype)}static get[Symbol.species](){return Np}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Np(...t[0].concat(this)):new Np(...t.concat(this))}};function P3(e){return Oa(e)?dV(e,()=>{}):e}function Gy(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function pSe(e){return typeof e=="boolean"}var mSe=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:s=!0}=e??{};let i=new fV;return t&&(pSe(t)?i.push(dSe):i.push(hSe(t.extraArgument))),i},gSe="RTK_autoBatch",R3=e=>t=>{setTimeout(t,e)},ySe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const a=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:R3(10):e.type==="callback"?e.queueNotification:R3(e.timeout),c=()=>{o=!1,i&&(i=!1,a.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>s&&u(),f=n.subscribe(h);return a.add(u),()=>{f(),a.delete(u)}},dispatch(u){var h;try{return s=!((h=u==null?void 0:u.meta)!=null&&h[gSe]),i=!s,i&&(o||(o=!0,l(c))),n.dispatch(u)}finally{s=!0}}})},vSe=e=>function(t){const{autoBatch:r=!0}=t??{};let n=new fV(e);return r&&n.push(ySe(typeof r=="object"?r:void 0)),n};function bSe(e){const t=mSe(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(GT(r))a=nV(r);else throw new Error(Fs(1));let l;typeof n=="function"?l=n(t):l=t();let c=Tb;s&&(c=fSe({trace:!1,...typeof s=="object"&&s}));const u=tSe(...l),h=vSe(u);let f=typeof o=="function"?o(h):h();const p=c(...f);return rV(a,i,p)}function pV(e){const t={},r=[];let n;const s={addCase(i,o){const a=typeof i=="string"?i:i.type;if(!a)throw new Error(Fs(28));if(a in t)throw new Error(Fs(29));return t[a]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function xSe(e){return typeof e=="function"}function wSe(e,t){let[r,n,s]=pV(t),i;if(xSe(e))i=()=>P3(e());else{const a=P3(e);i=()=>a}function o(a=i(),l){let c=[r[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[s]),c.reduce((u,h)=>{if(h)if(yu(u)){const f=h(u,l);return f===void 0?u:f}else{if(Oa(u))return dV(u,f=>h(f,l));{const f=h(u,l);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},a)}return o.getInitialState=i,o}var _Se="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",jSe=(e=21)=>{let t="",r=e;for(;r--;)t+=_Se[Math.random()*64|0];return t},kSe=Symbol.for("rtk-slice-createasyncthunk");function NSe(e,t){return`${e}/${t}`}function SSe({creators:e}={}){var t;const r=(t=e==null?void 0:e.asyncThunk)==null?void 0:t[kSe];return function(n){const{name:s,reducerPath:i=s}=n;if(!s)throw new Error(Fs(11));const o=(typeof n.reducers=="function"?n.reducers(CSe()):n.reducers)||{},a=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,j){const k=typeof _=="string"?_:_.type;if(!k)throw new Error(Fs(12));if(k in l.sliceCaseReducersByType)throw new Error(Fs(13));return l.sliceCaseReducersByType[k]=j,c},addMatcher(_,j){return l.sliceMatchers.push({matcher:_,reducer:j}),c},exposeAction(_,j){return l.actionCreators[_]=j,c},exposeCaseReducer(_,j){return l.sliceCaseReducersByName[_]=j,c}};a.forEach(_=>{const j=o[_],k={reducerName:_,type:NSe(s,_),createNotation:typeof n.reducers=="function"};ASe(j)?PSe(k,j,c,r):TSe(k,j,c)});function u(){const[_={},j=[],k=void 0]=typeof n.extraReducers=="function"?pV(n.extraReducers):[n.extraReducers],N={..._,...l.sliceCaseReducersByType};return wSe(n.initialState,S=>{for(let E in N)S.addCase(E,N[E]);for(let E of l.sliceMatchers)S.addMatcher(E.matcher,E.reducer);for(let E of j)S.addMatcher(E.matcher,E.reducer);k&&S.addDefaultCase(k)})}const h=_=>_,f=new Map,p=new WeakMap;let v;function m(_,j){return v||(v=u()),v(_,j)}function b(){return v||(v=u()),v.getInitialState()}function x(_,j=!1){function k(S){let E=S[_];return typeof E>"u"&&j&&(E=Gy(p,k,b)),E}function N(S=h){const E=Gy(f,j,()=>new WeakMap);return Gy(E,S,()=>{const T={};for(const[P,O]of Object.entries(n.selectors??{}))T[P]=ESe(O,S,()=>Gy(p,S,b),j);return T})}return{reducerPath:_,getSelectors:N,get selectors(){return N(k)},selectSlice:k}}const w={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:b,...x(i),injectInto(_,{reducerPath:j,...k}={}){const N=j??i;return _.inject({reducerPath:N,reducer:m},k),{...w,...x(N,!0)}}};return w}}function ESe(e,t,r,n){function s(i,...o){let a=t(i);return typeof a>"u"&&n&&(a=r()),e(a,...o)}return s.unwrapped=e,s}var Bs=SSe();function CSe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function TSe({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!OSe(n))throw new Error(Fs(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?yi(e,o):yi(e))}function ASe(e){return e._reducerDefinitionType==="asyncThunk"}function OSe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function PSe({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Fs(18));const{payloadCreator:i,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=r,h=s(e,i,u);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),a&&n.addCase(h.pending,a),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(t,{fulfilled:o||Yy,pending:a||Yy,rejected:l||Yy,settled:c||Yy})}function Yy(){}var RSe="task",mV="listener",gV="completed",XT="cancelled",ISe=`task-${XT}`,DSe=`task-${gV}`,RS=`${mV}-${XT}`,LSe=`${mV}-${gV}`,Zx=class{constructor(e){de(this,"name","TaskAbortError"),de(this,"message"),this.code=e,this.message=`${RSe} ${XT} (reason: ${e})`}},QT=(e,t)=>{if(typeof e!="function")throw new TypeError(Fs(32))},Rb=()=>{},yV=(e,t=Rb)=>(e.catch(t),e),vV=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),tu=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ru=e=>{if(e.aborted){const{reason:t}=e;throw new Zx(t)}};function bV(e,t){let r=Rb;return new Promise((n,s)=>{const i=()=>s(new Zx(e.reason));if(e.aborted){i();return}r=vV(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Rb})}var MSe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Zx?"cancelled":"rejected",error:r}}finally{t==null||t()}},Ib=e=>t=>yV(bV(e,t).then(r=>(ru(e),r))),xV=e=>{const t=Ib(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Jd}=Object,I3={},Gx="listenerMiddleware",$Se=(e,t)=>{const r=n=>vV(e,()=>tu(n,e.reason));return(n,s)=>{QT(n);const i=new AbortController;r(i);const o=MSe(async()=>{ru(e),ru(i.signal);const a=await n({pause:Ib(i.signal),delay:xV(i.signal),signal:i.signal});return ru(i.signal),a},()=>tu(i,DSe));return s!=null&&s.autoJoin&&t.push(o.catch(Rb)),{result:Ib(e)(o),cancel(){tu(i,ISe)}}}},FSe=(e,t)=>{const r=async(n,s)=>{ru(t);let i=()=>{};const o=[new Promise((a,l)=>{let c=e({predicate:n,effect:(u,h)=>{h.unsubscribe(),a([u,h.getState(),h.getOriginalState()])}});i=()=>{c(),l()}})];s!=null&&o.push(new Promise(a=>setTimeout(a,s,null)));try{const a=await bV(t,Promise.race(o));return ru(t),a}finally{i()}};return(n,s)=>yV(r(n,s))},wV=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=yi(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Fs(21));return QT(i),{predicate:s,type:t,effect:i}},_V=Jd(e=>{const{type:t,predicate:r,effect:n}=wV(e);return{id:jSe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Fs(22))}}},{withTypes:()=>_V}),D3=(e,t)=>{const{type:r,effect:n,predicate:s}=wV(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},IS=e=>{e.pending.forEach(t=>{tu(t,RS)})},zSe=e=>()=>{e.forEach(IS),e.clear()},L3=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},jV=Jd(yi(`${Gx}/add`),{withTypes:()=>jV}),USe=yi(`${Gx}/removeAll`),kV=Jd(yi(`${Gx}/remove`),{withTypes:()=>kV}),BSe=(...e)=>{console.error(`${Gx}/error`,...e)},wg=(e={})=>{const t=new Map,{extra:r,onError:n=BSe}=e;QT(n);const s=c=>(c.unsubscribe=()=>t.delete(c.id),t.set(c.id,c),u=>{c.unsubscribe(),u!=null&&u.cancelActive&&IS(c)}),i=c=>{const u=D3(t,c)??_V(c);return s(u)};Jd(i,{withTypes:()=>i});const o=c=>{const u=D3(t,c);return u&&(u.unsubscribe(),c.cancelActive&&IS(u)),!!u};Jd(o,{withTypes:()=>o});const a=async(c,u,h,f)=>{const p=new AbortController,v=FSe(i,p.signal),m=[];try{c.pending.add(p),await Promise.resolve(c.effect(u,Jd({},h,{getOriginalState:f,condition:(b,x)=>v(b,x).then(Boolean),take:v,delay:xV(p.signal),pause:Ib(p.signal),extra:r,signal:p.signal,fork:$Se(p.signal,m),unsubscribe:c.unsubscribe,subscribe:()=>{t.set(c.id,c)},cancelActiveListeners:()=>{c.pending.forEach((b,x,w)=>{b!==p&&(tu(b,RS),w.delete(b))})},cancel:()=>{tu(p,RS),c.pending.delete(p)},throwIfCancelled:()=>{ru(p.signal)}})))}catch(b){b instanceof Zx||L3(n,b,{raisedBy:"effect"})}finally{await Promise.all(m),tu(p,LSe),c.pending.delete(p)}},l=zSe(t);return{middleware:c=>u=>h=>{if(!sV(h))return u(h);if(jV.match(h))return i(h.payload);if(USe.match(h)){l();return}if(kV.match(h))return o(h.payload);let f=c.getState();const p=()=>{if(f===I3)throw new Error(Fs(23));return f};let v;try{if(v=u(h),t.size>0){const m=c.getState(),b=Array.from(t.values());for(const x of b){let w=!1;try{w=x.predicate(h,m,f)}catch(_){w=!1,L3(n,_,{raisedBy:"predicate"})}w&&a(x,h,c,p)}}}finally{f=I3}return v},startListening:i,stopListening:o,clearListeners:l}};function Fs(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var qSe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},NV=Bs({name:"chartLayout",initialState:qSe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:VSe,setLayout:WSe,setChartSize:KSe,setScale:HSe}=NV.actions,ZSe=NV.reducer;function M3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(r),!0).forEach(function(n){GSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GSe(e,t,r){return(t=YSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YSe(e){var t=JSe(e,"string");return typeof t=="symbol"?t:t+""}function JSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Db=Math.PI/180,XSe=e=>e*180/Math.PI,Pr=(e,t,r,n)=>({x:e+Math.cos(-Db*n)*r,y:t+Math.sin(-Db*n)*r}),SV=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},QSe=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},e2e=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=QSe({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var a=(r-s)/o,l=Math.acos(a);return n>i&&(l=2*Math.PI-l),{radius:o,angle:XSe(l),angleInRadian:l}},t2e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},r2e=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},n2e=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=e2e({x:r,y:n},t),{innerRadius:o,outerRadius:a}=t;if(s<o||s>a||s===0)return null;var{startAngle:l,endAngle:c}=t2e(t),u=i,h;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;h=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=l}return h?$3($3({},t),{},{radius:s,angle:r2e(u,t)}):null};function EV(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function F3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function si(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(r),!0).forEach(function(n){s2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s2e(e,t,r){return(t=i2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i2e(e){var t=o2e(e,"string");return typeof t=="symbol"?t:t+""}function o2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kt(e,t,r){return Rr(e)||Rr(t)?r:Mo(t)?Wl(e,t,r):typeof t=="function"?t(e):r}var a2e=(e,t,r,n,s)=>{var i,o=-1,a=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(a<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<a;l++){var c=l>0?r[l-1].coordinate:r[a-1].coordinate,u=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,f=void 0;if(Pn(u-c)!==Pn(h-u)){var p=[];if(Pn(h-u)===Pn(s[1]-s[0])){f=h;var v=u+s[1]-s[0];p[0]=Math.min(v,(v+c)/2),p[1]=Math.max(v,(v+c)/2)}else{f=c;var m=h+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var b=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:o}=r[l]);break}}else{var x=Math.min(c,h),w=Math.max(c,h);if(e>(x+u)/2&&e<=(w+u)/2){({index:o}=r[l]);break}}}else if(t){for(var _=0;_<a;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<a-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===a-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:o}=t[_]);break}}return o},l2e=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:a}=t;if((a==="vertical"||a==="horizontal"&&o==="middle")&&i!=="center"&&Oe(e[i]))return si(si({},e),{},{[i]:e[i]+(n||0)});if((a==="horizontal"||a==="vertical"&&i==="center")&&o!=="middle"&&Oe(e[o]))return si(si({},e),{},{[o]:e[o]+(s||0)})}return e},sc=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",CV=(e,t,r,n)=>{if(n)return e.map(a=>a.coordinate);var s,i,o=e.map(a=>(a.coordinate===t&&(s=!0),a.coordinate===r&&(i=!0),a.coordinate));return s||o.push(t),i||o.push(r),o},TV=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:h,niceTicks:f,axisType:p}=e;if(!o)return null;var v=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,m=s==="category"&&o.bandwidth?o.bandwidth()/v:0;if(m=p==="angleAxis"&&i&&i.length>=2?Pn(i[0]-i[1])*2*m:m,h||f){var b=(h||f||[]).map((x,w)=>{var _=n?n.indexOf(x):x;return{coordinate:o(_)+m,value:x,offset:m,index:w}});return b.filter(x=>!mi(x.coordinate))}return l&&c?c.map((x,w)=>({coordinate:o(x)+m,value:x,index:w,offset:m})):o.ticks&&u!=null?o.ticks(u).map((x,w)=>({coordinate:o(x)+m,value:x,offset:m,index:w})):o.domain().map((x,w)=>({coordinate:o(x)+m,value:n?n[x]:x,index:w,offset:m}))},z3=1e-4,c2e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-z3,i=Math.max(n[0],n[1])+z3,o=e(t[0]),a=e(t[r-1]);(o<s||o>i||a<s||a>i)&&e.domain([t[0],t[r-1]])}},u2e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var a=mi(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=s,e[o][r][1]=s+a,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1])}},d2e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=mi(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},h2e={sign:u2e,expand:hNe,none:Rh,silhouette:fNe,wiggle:pNe,positive:d2e},f2e=(e,t,r)=>{var n=h2e[r],s=dNe().keys(t).value((i,o)=>+Kt(i,o,0)).order(kS).offset(n);return s(e)};function U3(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Rr(s[t.dataKey])){var a=c9(r,"value",s[t.dataKey]);if(a)return a.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Kt(s,Rr(o)?t.dataKey:o);return Rr(l)?null:t.scale(l)}var p2e=e=>{var t=e.flat(2).filter(Oe);return[Math.min(...t),Math.max(...t)]},m2e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],g2e=(e,t,r)=>{if(e!=null)return m2e(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,a=o.reduce((l,c)=>{var u=EV(c,t,r),h=p2e(u);return[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(a[0],n[0]),Math.max(a[1],n[1])]},[1/0,-1/0]))},B3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,q3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,DS=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=qx(t,u=>u.coordinate),i=1/0,o=1,a=s.length;o<a;o++){var l=s[o],c=s[o-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function V3(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return si(si({},t),{},{dataKey:r,payload:n,value:s,name:i})}function Yx(e,t){if(e)return String(e);if(typeof t=="string")return t}function y2e(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?n2e({x:e,y:t},n):null}var v2e=(e,t,r,n)=>{var s=t.find(c=>c&&c.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return si(si(si({},n),Pr(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var a=s.coordinate,{angle:l}=n;return si(si(si({},n),Pr(n.cx,n.cy,a,l)),{},{angle:l,radius:a})}return{x:0,y:0}},b2e=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Ba=e=>e.layout.width,qa=e=>e.layout.height,x2e=e=>e.layout.scale,AV=e=>e.layout.margin,eA=X(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),tA=X(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),OV="data-recharts-item-index",PV="data-recharts-item-data-key",Jx=60;function W3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W3(Object(r),!0).forEach(function(n){w2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w2e(e,t,r){return(t=_2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _2e(e){var t=j2e(e,"string");return typeof t=="symbol"?t:t+""}function j2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k2e=e=>e.brush.height,ln=X([Ba,qa,AV,k2e,eA,tA,eV,ZNe],(e,t,r,n,s,i,o,a)=>{var l=i.reduce((v,m)=>{var{orientation:b}=m;if(!m.mirror&&!m.hide){var x=typeof m.width=="number"?m.width:Jx;return nl(nl({},v),{},{[b]:v[b]+x})}return v},{left:r.left||0,right:r.right||0}),c=s.reduce((v,m)=>{var{orientation:b}=m;return!m.mirror&&!m.hide?nl(nl({},v),{},{[b]:Wl(v,"".concat(b))+m.height}):v},{top:r.top||0,bottom:r.bottom||0}),u=nl(nl({},c),l),h=u.bottom;u.bottom+=n,u=l2e(u,o,a);var f=e-u.left-u.right,p=t-u.top-u.bottom;return nl(nl({brushBottom:h},u),{},{width:Math.max(f,0),height:Math.max(p,0)})}),N2e=X(ln,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),RV=X(Ba,qa,(e,t)=>({x:0,y:0,width:e,height:t})),S2e=g.createContext(null),ji=()=>g.useContext(S2e)!=null,Xx=e=>e.brush,Qx=X([Xx,ln,AV],(e,t,r)=>({height:e.height,x:Oe(e.x)?e.x:t.left,y:Oe(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Oe(e.width)?e.width:t.width})),rA=()=>{var e,t=ji(),r=De(N2e),n=De(Qx),s=(e=De(Xx))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},E2e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},IV=()=>{var e;return(e=De(ln))!==null&&e!==void 0?e:E2e},nA=()=>De(Ba),sA=()=>De(qa),C2e={top:0,right:0,bottom:0,left:0},T2e=()=>{var e;return(e=De(t=>t.layout.margin))!==null&&e!==void 0?e:C2e},_t=e=>e.layout.layoutType,iA=()=>De(_t),A2e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},DV=Bs({name:"legend",initialState:A2e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=wa(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:K3,setLegendSettings:O2e,addLegendPayload:LV,removeLegendPayload:MV}=DV.actions,P2e=DV.reducer,R2e=["contextPayload"];function LS(){return LS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LS.apply(null,arguments)}function H3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(r),!0).forEach(function(n){oA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oA(e,t,r){return(t=I2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I2e(e){var t=D2e(e,"string");return typeof t=="symbol"?t:t+""}function D2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L2e(e,t){if(e==null)return{};var r,n,s=M2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function M2e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $2e(e){return e.value}function F2e(e){var{contextPayload:t}=e,r=L2e(e,R2e),n=K9(t,e.payloadUniqBy,$2e),s=Dh(Dh({},r),{},{payload:n});return g.isValidElement(e.content)?g.cloneElement(e.content,s):typeof e.content=="function"?g.createElement(e.content,s):g.createElement($T,s)}function z2e(e,t,r,n,s,i){var{layout:o,align:a,verticalAlign:l}=t,c,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(a==="center"&&o==="vertical"?c={left:((n||0)-i.width)/2}:c=a==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(l==="middle"?u={top:((s||0)-i.height)/2}:u=l==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Dh(Dh({},c),u)}function U2e(e){var t=ar();return g.useEffect(()=>{t(O2e(e))},[t,e]),null}function B2e(e){var t=ar();return g.useEffect(()=>(t(K3(e)),()=>{t(K3({width:0,height:0}))}),[t,e]),null}function q2e(e){var t=JNe(),r=Dke(),n=T2e(),{width:s,height:i,wrapperStyle:o,portal:a}=e,[l,c]=tV([t]),u=nA(),h=sA(),f=u-(n.left||0)-(n.right||0),p=Cm.getWidthOrHeight(e.layout,i,s,f),v=a?o:Dh(Dh({position:"absolute",width:(p==null?void 0:p.width)||s||"auto",height:(p==null?void 0:p.height)||i||"auto"},z2e(o,e,n,u,h,l)),o),m=a??r;if(m==null)return null;var b=g.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:c},g.createElement(U2e,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),g.createElement(B2e,{width:l.width,height:l.height}),g.createElement(F2e,LS({},e,p,{margin:n,chartWidth:u,chartHeight:h,contextPayload:t})));return Zn.createPortal(b,m)}class Cm extends g.PureComponent{static getWidthOrHeight(t,r,n,s){return t==="vertical"&&Oe(r)?{height:r}:t==="horizontal"?{width:n||s}:null}render(){return g.createElement(q2e,this.props)}}oA(Cm,"displayName","Legend");oA(Cm,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function MS(){return MS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MS.apply(null,arguments)}function Z3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z3(Object(r),!0).forEach(function(n){V2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V2e(e,t,r){return(t=W2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W2e(e){var t=K2e(e,"string");return typeof t=="symbol"?t:t+""}function K2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H2e(e){return Array.isArray(e)&&Mo(e[0])&&Mo(e[1])?e.join(" ~ "):e}var Z2e=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,p=()=>{if(i&&i.length){var k={padding:0,margin:0},N=(a?qx(i,a):i).map((S,E)=>{if(S.type==="none")return null;var T=S.formatter||o||H2e,{value:P,name:O}=S,R=P,I=O;if(T){var M=T(P,O,S,E,i);if(Array.isArray(M))[R,I]=M;else if(M!=null)R=M;else return null}var z=Hj({display:"block",paddingTop:4,paddingBottom:4,color:S.color||"#000"},n);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:z},Mo(I)?g.createElement("span",{className:"recharts-tooltip-item-name"},I):null,Mo(I)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},R),g.createElement("span",{className:"recharts-tooltip-item-unit"},S.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:k},N)}return null},v=Hj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),m=Hj({margin:0},s),b=!Rr(u),x=b?u:"",w=ot("recharts-default-tooltip",l),_=ot("recharts-tooltip-label",c);b&&h&&i!==void 0&&i!==null&&(x=h(u,i));var j=f?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",MS({className:w,style:v},j),g.createElement("p",{className:_,style:m},g.isValidElement(x)?x:"".concat(x)),p())},Qf="recharts-tooltip-wrapper",G2e={visibility:"hidden"};function Y2e(e){var{coordinate:t,translateX:r,translateY:n}=e;return ot(Qf,{["".concat(Qf,"-right")]:Oe(r)&&t&&Oe(t.x)&&r>=t.x,["".concat(Qf,"-left")]:Oe(r)&&t&&Oe(t.x)&&r<t.x,["".concat(Qf,"-bottom")]:Oe(n)&&t&&Oe(t.y)&&n>=t.y,["".concat(Qf,"-top")]:Oe(n)&&t&&Oe(t.y)&&n<t.y})}function G3(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=e;if(i&&Oe(i[n]))return i[n];var u=r[n]-a-(s>0?s:0),h=r[n]+s;if(t[n])return o[n]?u:h;var f=l[n];if(f==null)return 0;if(o[n]){var p=u,v=f;return p<v?Math.max(h,f):Math.max(u,f)}if(c==null)return 0;var m=h+a,b=f+c;return m>b?Math.max(u,f):Math.max(h,f)}function J2e(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function X2e(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:a,viewBox:l}=e,c,u,h;return o.height>0&&o.width>0&&r?(u=G3({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),h=G3({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=J2e({translateX:u,translateY:h,useTranslate3d:a})):c=G2e,{cssProperties:c,cssClasses:Y2e({translateX:u,translateY:h,coordinate:r})}}function Y3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y3(Object(r),!0).forEach(function(n){$S(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $S(e,t,r){return(t=Q2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q2e(e){var t=eEe(e,"string");return typeof t=="symbol"?t:t+""}function eEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tEe extends g.PureComponent{constructor(){super(...arguments),$S(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),$S(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:h,useTranslate3d:f,viewBox:p,wrapperStyle:v,lastBoundingBox:m,innerRef:b,hasPortalFromProps:x}=this.props,{cssClasses:w,cssProperties:_}=X2e({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:h,tooltipBox:{height:m.height,width:m.width},useTranslate3d:f,viewBox:p}),j=x?{}:Jy(Jy({transition:l&&t?"transform ".concat(n,"ms ").concat(s):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&a?"visible":"hidden",position:"absolute",top:0,left:0}),k=Jy(Jy({},j),{},{visibility:!this.state.dismissed&&t&&a?"visible":"hidden"},v);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},i)}}var rEe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),gf={isSsr:rEe()},$V=()=>De(e=>e.rootProps.accessibilityLayer);function eo(e){return Number.isFinite(e)}function Lh(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function FS(){return FS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FS.apply(null,arguments)}function J3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function X3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(r),!0).forEach(function(n){nEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nEe(e,t,r){return(t=sEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sEe(e){var t=iEe(e,"string");return typeof t=="symbol"?t:t+""}function iEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q3={curveBasisClosed:eNe,curveBasisOpen:tNe,curveBasis:Qke,curveBumpX:Fke,curveBumpY:zke,curveLinearClosed:rNe,curveLinear:Mx,curveMonotoneX:nNe,curveMonotoneY:sNe,curveNatural:iNe,curveStep:oNe,curveStepAfter:lNe,curveStepBefore:aNe},Xy=e=>eo(e.x)&&eo(e.y),ep=e=>e.x,tp=e=>e.y,oEe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(xg(e));return(r==="curveMonotone"||r==="curveBump")&&t?Q3["".concat(r).concat(t==="vertical"?"Y":"X")]:Q3[r]||Mx},aEe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=oEe(t,s),a=i?r.filter(Xy):r,l;if(Array.isArray(n)){var c=i?n.filter(h=>Xy(h)):n,u=a.map((h,f)=>X3(X3({},h),{},{base:c[f]}));return s==="vertical"?l=Ky().y(tp).x1(ep).x0(h=>h.base.x):l=Ky().x(ep).y1(tp).y0(h=>h.base.y),l.defined(Xy).curve(o),l(u)}return s==="vertical"&&Oe(n)?l=Ky().y(tp).x1(ep).x0(n):Oe(n)?l=Ky().x(ep).y1(tp).y0(n):l=b9().x(ep).y(tp),l.defined(Xy).curve(o),l(a)},aA=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?aEe(e):n;return g.createElement("path",FS({},nc(e),AT(e),{className:ot("recharts-curve",t),d:i===null?void 0:i,ref:s}))},lEe=["x","y","top","left","width","height","className"];function zS(){return zS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zS.apply(null,arguments)}function e5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cEe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e5(Object(r),!0).forEach(function(n){uEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uEe(e,t,r){return(t=dEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dEe(e){var t=hEe(e,"string");return typeof t=="symbol"?t:t+""}function hEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fEe(e,t){if(e==null)return{};var r,n,s=pEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mEe=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),gEe=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:a}=e,l=fEe(e,lEe),c=cEe({x:t,y:r,top:n,left:s,width:i,height:o},l);return!Oe(t)||!Oe(r)||!Oe(i)||!Oe(o)||!Oe(n)||!Oe(s)?null:g.createElement("path",zS({},nr(c,!0),{className:ot("recharts-cross",a),d:mEe(t,r,i,o,n,s)}))};function yEe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function t5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vEe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t5(Object(r),!0).forEach(function(n){bEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bEe(e,t,r){return(t=xEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xEe(e){var t=wEe(e,"string");return typeof t=="symbol"?t:t+""}function wEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ki(e,t){var r=vEe({},e),n=t,s=Object.keys(t),i=s.reduce((o,a)=>(o[a]===void 0&&n[a]!==void 0&&(o[a]=n[a]),o),r);return i}var FV={},zV={},UV={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(UV);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UV,r=VT,n=Ux,s=Bx,i=zx;function o(c,u,h){return a(c,u,void 0,void 0,void 0,void 0,h)}function a(c,u,h,f,p,v,m){const b=m(c,u,h,f,p,v);if(b!==void 0)return b;if(typeof c==typeof u)switch(typeof c){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return c===u;case"number":return c===u||Object.is(c,u);case"function":return c===u;case"object":return l(c,u,v,m)}return l(c,u,v,m)}function l(c,u,h,f){if(Object.is(c,u))return!0;let p=n.getTag(c),v=n.getTag(u);if(p===s.argumentsTag&&(p=s.objectTag),v===s.argumentsTag&&(v=s.objectTag),p!==v)return!1;switch(p){case s.stringTag:return c.toString()===u.toString();case s.numberTag:{const x=c.valueOf(),w=u.valueOf();return i.eq(x,w)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(c.valueOf(),u.valueOf());case s.regexpTag:return c.source===u.source&&c.flags===u.flags;case s.functionTag:return c===u}h=h??new Map;const m=h.get(c),b=h.get(u);if(m!=null&&b!=null)return m===u;h.set(c,u),h.set(u,c);try{switch(p){case s.mapTag:{if(c.size!==u.size)return!1;for(const[x,w]of c.entries())if(!u.has(x)||!a(w,u.get(x),x,c,u,h,f))return!1;return!0}case s.setTag:{if(c.size!==u.size)return!1;const x=Array.from(c.values()),w=Array.from(u.values());for(let _=0;_<x.length;_++){const j=x[_],k=w.findIndex(N=>a(j,N,void 0,c,u,h,f));if(k===-1)return!1;w.splice(k,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(c)!==Buffer.isBuffer(u)||c.length!==u.length)return!1;for(let x=0;x<c.length;x++)if(!a(c[x],u[x],x,c,u,h,f))return!1;return!0}case s.arrayBufferTag:return c.byteLength!==u.byteLength?!1:l(new Uint8Array(c),new Uint8Array(u),h,f);case s.dataViewTag:return c.byteLength!==u.byteLength||c.byteOffset!==u.byteOffset?!1:l(new Uint8Array(c),new Uint8Array(u),h,f);case s.errorTag:return c.name===u.name&&c.message===u.message;case s.objectTag:{if(!(l(c.constructor,u.constructor,h,f)||t.isPlainObject(c)&&t.isPlainObject(u)))return!1;const x=[...Object.keys(c),...r.getSymbols(c)],w=[...Object.keys(u),...r.getSymbols(u)];if(x.length!==w.length)return!1;for(let _=0;_<x.length;_++){const j=x[_],k=c[j];if(!Object.hasOwn(u,j))return!1;const N=u[j];if(!a(k,N,j,c,u,h,f))return!1}return!0}default:return!1}}finally{h.delete(c),h.delete(u)}}e.isEqualWith=o})(zV);var BV={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(BV);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zV,r=BV;function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n})(FV);var _Ee=FV.isEqual;const jEe=io(_Ee);var Lb=1e-4,qV=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],VV=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),r5=(e,t)=>r=>{var n=qV(e,t);return VV(n,r)},kEe=(e,t)=>r=>{var n=qV(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return VV(s,r)},n5=function(){for(var e,t,r,n,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[e,r,t,n]=[0,0,1,1];break;case"ease":[e,r,t,n]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,n]=[.42,0,1,1];break;case"ease-out":[e,r,t,n]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,n]=[0,0,.58,1];break;default:{var a=i[0].split("(");a[0]==="cubic-bezier"&&a[1].split(")")[0].split(",").length===4&&([e,r,t,n]=a[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else i.length===4&&([e,r,t,n]=i);var l=r5(e,t),c=r5(r,n),u=kEe(e,t),h=p=>p>1?1:p<0?0:p,f=p=>{for(var v=p>1?1:p,m=v,b=0;b<8;++b){var x=l(m)-v,w=u(m);if(Math.abs(x-v)<Lb||w<Lb)return c(m);m=h(m-x/w)}return c(m)};return f.isStepper=!1,f},NEe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,s=(i,o,a)=>{var l=-(i-o)*t,c=a*r,u=a+(l-c)*n/1e3,h=a*n/1e3+i;return Math.abs(h-o)<Lb&&Math.abs(u)<Lb?[o,0]:[h,u]};return s.isStepper=!0,s.dt=n,s},WV=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return n5(e);case"spring":return NEe();default:if(e.split("(")[0]==="cubic-bezier")return n5(e)}return typeof e=="function"?e:null};function s5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function i5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s5(Object(r),!0).forEach(function(n){SEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SEe(e,t,r){return(t=EEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EEe(e){var t=CEe(e,"string");return typeof t=="symbol"?t:t+""}function CEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TEe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),AEe=(e,t,r)=>e.map(n=>"".concat(TEe(n)," ").concat(t,"ms ").concat(r)).join(","),OEe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Tm=(e,t)=>Object.keys(t).reduce((r,n)=>i5(i5({},r),{},{[n]:e(n,t[n])}),{});function o5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o5(Object(r),!0).forEach(function(n){PEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PEe(e,t,r){return(t=REe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function REe(e){var t=IEe(e,"string");return typeof t=="symbol"?t:t+""}function IEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mb=(e,t,r)=>e+(t-e)*r,US=e=>{var{from:t,to:r}=e;return t!==r},KV=(e,t,r)=>{var n=Tm((s,i)=>{if(US(i)){var[o,a]=e(i.from,i.to,i.velocity);return yn(yn({},i),{},{from:o,velocity:a})}return i},t);return r<1?Tm((s,i)=>US(i)?yn(yn({},i),{},{velocity:Mb(i.velocity,n[s].velocity,r),from:Mb(i.from,n[s].from,r)}):i,t):KV(e,n,r-1)};function DEe(e,t,r,n,s,i){var o,a=n.reduce((f,p)=>yn(yn({},f),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>Tm((f,p)=>p.from,a),c=()=>!Object.values(a).filter(US).length,u=null,h=f=>{o||(o=f);var p=f-o,v=p/r.dt;a=KV(r,a,v),s(yn(yn(yn({},e),t),l())),o=f,c()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{u()})}function LEe(e,t,r,n,s,i,o){var a=null,l=s.reduce((h,f)=>yn(yn({},h),{},{[f]:[e[f],t[f]]}),{}),c,u=h=>{c||(c=h);var f=(h-c)/n,p=Tm((m,b)=>Mb(...b,r(f)),l);if(i(yn(yn(yn({},e),t),p)),f<1)a=o.setTimeout(u);else{var v=Tm((m,b)=>Mb(...b,r(1)),l);i(yn(yn(yn({},e),t),v))}};return()=>(a=o.setTimeout(u),()=>{a()})}const HV=(e,t,r,n,s,i)=>{var o=OEe(e,t);return r.isStepper===!0?DEe(e,t,r,o,s,i):LEe(e,t,r,n,o,s,i)};function MEe(e){var t,r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){s=e.setTimeout(i.bind(null,c),l);return}i(l),s=e.setTimeout(i.bind(null,c));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class $Ee{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function FEe(){return MEe(new $Ee)}var zEe=g.createContext(FEe);function ZV(e,t){var r=g.useContext(zEe);return g.useMemo(()=>t??r(e),[e,t,r])}var UEe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function BS(){return BS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BS.apply(null,arguments)}function BEe(e,t){if(e==null)return{};var r,n,s=qEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function a5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a5(Object(r),!0).forEach(function(n){zc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zc(e,t,r){return(t=VEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VEe(e){var t=WEe(e,"string");return typeof t=="symbol"?t:t+""}function WEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class lA extends g.PureComponent{constructor(t,r){super(t,r),zc(this,"mounted",!1),zc(this,"manager",void 0),zc(this,"stopJSAnimation",null),zc(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:a,duration:l,animationManager:c}=this.props;if(this.manager=c,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0){this.state={style:{}},typeof a=="function"&&(this.state={style:o});return}if(i){if(typeof a=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:a}=this.props,{style:l}=this.state;if(n){if(!r){var c={style:s?{[s]:o}:o};this.state&&l&&(s&&l[s]!==o||!s&&l!==o)&&this.setState(c);return}if(!(jEe(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||i?a:t.to;if(this.state&&l){var f={style:s?{[s]:h}:h};(s&&l[s]!==h||!s&&l!==h)&&this.setState(f)}this.runAnimation(sl(sl({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:a,onAnimationStart:l}=t,c=HV(r,n,WV(i),s,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=c()};this.manager.start([l,o,u,s,a])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:a,onAnimationEnd:l,children:c}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof c=="function"||o==="spring"){this.runJSAnimation(t);return}var u=s?{[s]:i}:i,h=AEe(Object.keys(u),n,o);this.manager.start([a,r,sl(sl({},u),{},{transition:h}),n,l])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:a,from:l,to:c,canBegin:u,onAnimationEnd:h,shouldReAnimate:f,onAnimationReStart:p,animationManager:v}=t,m=BEe(t,UEe),b=g.Children.count(r),x=this.state.style;if(typeof r=="function")return r(x);if(!a||b===0||s<=0)return r;var w=_=>{var{style:j={},className:k}=_.props,N=g.cloneElement(_,sl(sl({},m),{},{style:sl(sl({},j),x),className:k}));return N};return b===1?w(g.Children.only(r)):g.createElement("div",null,g.Children.map(r,_=>w(_)))}}zc(lA,"displayName","Animate");zc(lA,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function $b(e){var t,r=ZV((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return g.createElement(lA,BS({},e,{animationManager:r}))}function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fb.apply(null,arguments)}var l5=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,a=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,c;if(i>0&&s instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=s[h]>i?i:s[h];c="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(e+a*u[0],",").concat(t)),c+="L ".concat(e+r-a*u[1],",").concat(t),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+o*u[1])),c+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(e+r-a*u[2],",").concat(t+n)),c+="L ".concat(e+a*u[3],",").concat(t+n),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-o*u[3])),c+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);c="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+a*p,",").concat(t,`
            L `).concat(e+r-a*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(t+o*p,`
            L `).concat(e+r,",").concat(t+n-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-a*p,",").concat(t+n,`
            L `).concat(e+a*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+n-o*p," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return c},KEe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GV=e=>{var t=ki(e,KEe),r=g.useRef(null),[n,s]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&s(x)}catch{}},[]);var{x:i,y:o,width:a,height:l,radius:c,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isAnimationActive:v,isUpdateAnimationActive:m}=t;if(i!==+i||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var b=ot("recharts-rectangle",u);return m?g.createElement($b,{canBegin:n>0,from:{width:a,height:l,x:i,y:o},to:{width:a,height:l,x:i,y:o},duration:f,animationEasing:h,isActive:m},x=>{var{width:w,height:_,x:j,y:k}=x;return g.createElement($b,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,isActive:v,easing:h},g.createElement("path",Fb({},nr(t,!0),{className:b,d:l5(j,k,w,_,c),ref:r})))}):g.createElement("path",Fb({},nr(t,!0),{className:b,d:l5(i,o,a,l,c)}))};function YV(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=Pr(t,r,n,s),a=Pr(t,r,n,i);return{points:[o,a],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function qS(){return qS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qS.apply(null,arguments)}var HEe=(e,t)=>{var r=Pn(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Qy=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:a,cornerIsExternal:l}=e,c=a*(o?1:-1)+n,u=Math.asin(a/c)/Db,h=l?s:s+i*u,f=Pr(t,r,c,h),p=Pr(t,r,n,h),v=l?s-i*u:s,m=Pr(t,r,c*Math.cos(u*Db),v);return{center:f,circleTangency:p,lineTangency:m,theta:u}},JV=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,a=HEe(i,o),l=i+a,c=Pr(t,r,s,i),u=Pr(t,r,s,l),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(i>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var f=Pr(t,r,n,i),p=Pr(t,r,n,l);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(i<=l),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},ZEe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=e,u=Pn(c-l),{circleTangency:h,lineTangency:f,theta:p}=Qy({cx:t,cy:r,radius:s,angle:l,sign:u,cornerRadius:i,cornerIsExternal:a}),{circleTangency:v,lineTangency:m,theta:b}=Qy({cx:t,cy:r,radius:s,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:a}),x=a?Math.abs(l-c):Math.abs(l-c)-p-b;if(x<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):JV({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:c});var w="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(x>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(m.x,",").concat(m.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:j,theta:k}=Qy({cx:t,cy:r,radius:n,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:a}),{circleTangency:N,lineTangency:S,theta:E}=Qy({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:a}),T=a?Math.abs(l-c):Math.abs(l-c)-k-E;if(T<0&&i===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(j.x,",").concat(j.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},GEe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},XV=e=>{var t=ki(e,GEe),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:h}=t;if(i<s||c===u)return null;var f=ot("recharts-sector",h),p=i-s,v=hi(o,p,0,!0),m;return v>0&&Math.abs(c-u)<360?m=ZEe({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(v,p/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):m=JV({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:c,endAngle:u}),g.createElement("path",qS({},nr(t,!0),{className:f,d:m}))};function YEe(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:a,cy:l,innerRadius:c,outerRadius:u,angle:h}=t,f=Pr(a,l,c,h),p=Pr(a,l,u,h);n=f.x,s=f.y,i=p.x,o=p.y}else return YV(t);return[{x:n,y:s},{x:i,y:o}]}var QV={},eW={},tW={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HT;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(tW);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tW;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(eW);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZT,r=eW;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const a=Math.max(Math.ceil((i-s)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=s,s+=o;return l}e.range=n})(QV);var JEe=QV.range;const rW=io(JEe);function Dl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XEe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cA(e){let t,r,n;e.length!==2?(t=Dl,r=(a,l)=>Dl(e(a),l),n=(a,l)=>e(a)-l):(t=e===Dl||e===XEe?e:QEe,r=e,n=e);function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;r(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;r(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=s(a,l,c,u-1);return h>c&&n(a[h-1],l)>-n(a[h],l)?h-1:h}return{left:s,center:o,right:i}}function QEe(){return 0}function nW(e){return e===null?NaN:+e}function*eCe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const tCe=cA(Dl),_g=tCe.right;cA(nW).center;class c5 extends Map{constructor(t,r=sCe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(u5(this,t))}has(t){return super.has(u5(this,t))}set(t,r){return super.set(rCe(this,t),r)}delete(t){return super.delete(nCe(this,t))}}function u5({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function rCe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function nCe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function sCe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function iCe(e=Dl){if(e===Dl)return sW;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function sW(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const oCe=Math.sqrt(50),aCe=Math.sqrt(10),lCe=Math.sqrt(2);function zb(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=oCe?10:i>=aCe?5:i>=lCe?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=r&&r<2?zb(e,t,r*2):[a,l,c]}function VS(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?zb(t,e,r):zb(e,t,r);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(n)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function WS(e,t,r){return t=+t,e=+e,r=+r,zb(e,t,r)[2]}function KS(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?WS(t,e,r):WS(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function d5(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function h5(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function iW(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?sW:iCe(s);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(t-c*h/l+f)),v=Math.min(n,Math.floor(t+(l-c)*h/l+f));iW(e,t,p,v,s)}const i=e[t];let o=r,a=n;for(rp(e,r,t),s(e[n],i)>0&&rp(e,r,n);o<a;){for(rp(e,o,a),++o,--a;s(e[o],i)<0;)++o;for(;s(e[a],i)>0;)--a}s(e[r],i)===0?rp(e,r,a):(++a,rp(e,a,n)),a<=t&&(r=a+1),t<=a&&(n=a-1)}return e}function rp(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function cCe(e,t,r){if(e=Float64Array.from(eCe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return h5(e);if(t>=1)return d5(e);var n,s=(n-1)*t,i=Math.floor(s),o=d5(iW(e,i).subarray(0,i+1)),a=h5(e.subarray(i+1));return o+(a-o)*(s-i)}}function uCe(e,t,r=nW){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),a=+r(e[i+1],i+1,e);return o+(a-o)*(s-i)}}function dCe(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Ni(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Va(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const HS=Symbol("implicit");function uA(){var e=new c5,t=[],r=[],n=HS;function s(i){let o=e.get(i);if(o===void 0){if(n!==HS)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new c5;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return uA(t,r).unknown(n)},Ni.apply(s,arguments),s}function dA(){var e=uA().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function h(){var f=t().length,p=s<n,v=p?s:n,m=p?n:s;i=(m-v)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),v+=(m-v-i*(f-l))*u,o=i*(1-l),a&&(v=Math.round(v),o=Math.round(o));var b=dCe(f).map(function(x){return v+i*x});return r(p?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,a=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,h()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},e.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return dA(t(),[n,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},Ni.apply(h(),arguments)}function oW(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return oW(t())},e}function hCe(){return oW(dA.apply(null,arguments).paddingInner(1))}function hA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function aW(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function jg(){}var Am=.7,Ub=1/Am,Xd="\\s*([+-]?\\d+)\\s*",Om="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Po="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fCe=/^#([0-9a-f]{3,8})$/,pCe=new RegExp(`^rgb\\(${Xd},${Xd},${Xd}\\)$`),mCe=new RegExp(`^rgb\\(${Po},${Po},${Po}\\)$`),gCe=new RegExp(`^rgba\\(${Xd},${Xd},${Xd},${Om}\\)$`),yCe=new RegExp(`^rgba\\(${Po},${Po},${Po},${Om}\\)$`),vCe=new RegExp(`^hsl\\(${Om},${Po},${Po}\\)$`),bCe=new RegExp(`^hsla\\(${Om},${Po},${Po},${Om}\\)$`),f5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hA(jg,Pm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:p5,formatHex:p5,formatHex8:xCe,formatHsl:wCe,formatRgb:m5,toString:m5});function p5(){return this.rgb().formatHex()}function xCe(){return this.rgb().formatHex8()}function wCe(){return lW(this).formatHsl()}function m5(){return this.rgb().formatRgb()}function Pm(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=fCe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?g5(t):r===3?new ys(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ev(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ev(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pCe.exec(e))?new ys(t[1],t[2],t[3],1):(t=mCe.exec(e))?new ys(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gCe.exec(e))?ev(t[1],t[2],t[3],t[4]):(t=yCe.exec(e))?ev(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vCe.exec(e))?b5(t[1],t[2]/100,t[3]/100,1):(t=bCe.exec(e))?b5(t[1],t[2]/100,t[3]/100,t[4]):f5.hasOwnProperty(e)?g5(f5[e]):e==="transparent"?new ys(NaN,NaN,NaN,0):null}function g5(e){return new ys(e>>16&255,e>>8&255,e&255,1)}function ev(e,t,r,n){return n<=0&&(e=t=r=NaN),new ys(e,t,r,n)}function _Ce(e){return e instanceof jg||(e=Pm(e)),e?(e=e.rgb(),new ys(e.r,e.g,e.b,e.opacity)):new ys}function ZS(e,t,r,n){return arguments.length===1?_Ce(e):new ys(e,t,r,n??1)}function ys(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}hA(ys,ZS,aW(jg,{brighter(e){return e=e==null?Ub:Math.pow(Ub,e),new ys(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Am:Math.pow(Am,e),new ys(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ys(nu(this.r),nu(this.g),nu(this.b),Bb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:y5,formatHex:y5,formatHex8:jCe,formatRgb:v5,toString:v5}));function y5(){return`#${Uc(this.r)}${Uc(this.g)}${Uc(this.b)}`}function jCe(){return`#${Uc(this.r)}${Uc(this.g)}${Uc(this.b)}${Uc((isNaN(this.opacity)?1:this.opacity)*255)}`}function v5(){const e=Bb(this.opacity);return`${e===1?"rgb(":"rgba("}${nu(this.r)}, ${nu(this.g)}, ${nu(this.b)}${e===1?")":`, ${e})`}`}function Bb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Uc(e){return e=nu(e),(e<16?"0":"")+e.toString(16)}function b5(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hi(e,t,r,n)}function lW(e){if(e instanceof Hi)return new Hi(e.h,e.s,e.l,e.opacity);if(e instanceof jg||(e=Pm(e)),!e)return new Hi;if(e instanceof Hi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,a=i-s,l=(i+s)/2;return a?(t===i?o=(r-n)/a+(r<n)*6:r===i?o=(n-t)/a+2:o=(t-r)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new Hi(o,a,l,e.opacity)}function kCe(e,t,r,n){return arguments.length===1?lW(e):new Hi(e,t,r,n??1)}function Hi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}hA(Hi,kCe,aW(jg,{brighter(e){return e=e==null?Ub:Math.pow(Ub,e),new Hi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Am:Math.pow(Am,e),new Hi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new ys(Zj(e>=240?e-240:e+120,s,n),Zj(e,s,n),Zj(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Hi(x5(this.h),tv(this.s),tv(this.l),Bb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bb(this.opacity);return`${e===1?"hsl(":"hsla("}${x5(this.h)}, ${tv(this.s)*100}%, ${tv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function x5(e){return e=(e||0)%360,e<0?e+360:e}function tv(e){return Math.max(0,Math.min(1,e||0))}function Zj(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const fA=e=>()=>e;function NCe(e,t){return function(r){return e+r*t}}function SCe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function ECe(e){return(e=+e)==1?cW:function(t,r){return r-t?SCe(t,r,e):fA(isNaN(t)?r:t)}}function cW(e,t){var r=t-e;return r?NCe(e,r):fA(isNaN(e)?t:e)}const w5=function e(t){var r=ECe(t);function n(s,i){var o=r((s=ZS(s)).r,(i=ZS(i)).r),a=r(s.g,i.g),l=r(s.b,i.b),c=cW(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return n.gamma=e,n}(1);function CCe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function TCe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ACe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=yf(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(a){for(o=0;o<n;++o)i[o]=s[o](a);return i}}function OCe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function qb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function PCe(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=yf(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var GS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gj=new RegExp(GS.source,"g");function RCe(e){return function(){return e}}function ICe(e){return function(t){return e(t)+""}}function DCe(e,t){var r=GS.lastIndex=Gj.lastIndex=0,n,s,i,o=-1,a=[],l=[];for(e=e+"",t=t+"";(n=GS.exec(e))&&(s=Gj.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:qb(n,s)})),r=Gj.lastIndex;return r<t.length&&(i=t.slice(r),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?ICe(l[0].x):RCe(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function yf(e,t){var r=typeof t,n;return t==null||r==="boolean"?fA(t):(r==="number"?qb:r==="string"?(n=Pm(t))?(t=n,w5):DCe:t instanceof Pm?w5:t instanceof Date?OCe:TCe(t)?CCe:Array.isArray(t)?ACe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?PCe:qb)(e,t)}function pA(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function LCe(e,t){t===void 0&&(t=e,e=yf);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[a](o-a)}}function MCe(e){return function(){return e}}function Vb(e){return+e}var _5=[0,1];function Yn(e){return e}function YS(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:MCe(isNaN(t)?NaN:.5)}function $Ce(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function FCe(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=YS(s,n),i=r(o,i)):(n=YS(n,s),i=r(i,o)),function(a){return i(n(a))}}function zCe(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=YS(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(a){var l=_g(e,a,1,n)-1;return i[l](s[l](a))}}function kg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ew(){var e=_5,t=_5,r=yf,n,s,i,o=Yn,a,l,c;function u(){var f=Math.min(e.length,t.length);return o!==Yn&&(o=$Ce(e[0],e[f-1])),a=f>2?zCe:FCe,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?i:(l||(l=a(e.map(n),t,r)))(n(o(f)))}return h.invert=function(f){return o(s((c||(c=a(t,e.map(n),qb)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Vb),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=pA,u()},h.clamp=function(f){return arguments.length?(o=f?!0:Yn,u()):o!==Yn},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,p){return n=f,s=p,u()}}function mA(){return ew()(Yn,Yn)}function UCe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Wb(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Mh(e){return e=Wb(Math.abs(e)),e?e[1]:NaN}function BCe(e,t){return function(r,n){for(var s=r.length,i=[],o=0,a=e[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),i.push(r.substring(s-=a,s+a)),!((l+=a+1)>n));)a=e[o=(o+1)%e.length];return i.reverse().join(t)}}function qCe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var VCe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rm(e){if(!(t=VCe.exec(e)))throw new Error("invalid format: "+e);var t;return new gA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Rm.prototype=gA.prototype;function gA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function WCe(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var uW;function KCe(e,t){var r=Wb(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(uW=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Wb(e,Math.max(0,t+i-1))[0]}function j5(e,t){var r=Wb(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const k5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:UCe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>j5(e*100,t),r:j5,s:KCe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function N5(e){return e}var S5=Array.prototype.map,E5=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function HCe(e){var t=e.grouping===void 0||e.thousands===void 0?N5:BCe(S5.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?N5:qCe(S5.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(h){h=Rm(h);var f=h.fill,p=h.align,v=h.sign,m=h.symbol,b=h.zero,x=h.width,w=h.comma,_=h.precision,j=h.trim,k=h.type;k==="n"?(w=!0,k="g"):k5[k]||(_===void 0&&(_=12),j=!0,k="g"),(b||f==="0"&&p==="=")&&(b=!0,f="0",p="=");var N=m==="$"?r:m==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",S=m==="$"?n:/[%p]/.test(k)?o:"",E=k5[k],T=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function P(O){var R=N,I=S,M,z,W;if(k==="c")I=E(O)+I,O="";else{O=+O;var q=O<0||1/O<0;if(O=isNaN(O)?l:E(Math.abs(O),_),j&&(O=WCe(O)),q&&+O==0&&v!=="+"&&(q=!1),R=(q?v==="("?v:a:v==="-"||v==="("?"":v)+R,I=(k==="s"?E5[8+uW/3]:"")+I+(q&&v==="("?")":""),T){for(M=-1,z=O.length;++M<z;)if(W=O.charCodeAt(M),48>W||W>57){I=(W===46?s+O.slice(M+1):O.slice(M))+I,O=O.slice(0,M);break}}}w&&!b&&(O=t(O,1/0));var Y=R.length+O.length+I.length,L=Y<x?new Array(x-Y+1).join(f):"";switch(w&&b&&(O=t(L+O,L.length?x-I.length:1/0),L=""),p){case"<":O=R+O+I+L;break;case"=":O=R+L+O+I;break;case"^":O=L.slice(0,Y=L.length>>1)+R+O+I+L.slice(Y);break;default:O=L+R+O+I;break}return i(O)}return P.toString=function(){return h+""},P}function u(h,f){var p=c((h=Rm(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Mh(f)/3)))*3,m=Math.pow(10,-v),b=E5[8+v/3];return function(x){return p(m*x)+b}}return{format:c,formatPrefix:u}}var rv,yA,dW;ZCe({thousands:",",grouping:[3],currency:["$",""]});function ZCe(e){return rv=HCe(e),yA=rv.format,dW=rv.formatPrefix,rv}function GCe(e){return Math.max(0,-Mh(Math.abs(e)))}function YCe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mh(t)/3)))*3-Mh(Math.abs(e)))}function JCe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mh(t)-Mh(e))+1}function hW(e,t,r,n){var s=KS(e,t,r),i;switch(n=Rm(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=YCe(s,o))&&(n.precision=i),dW(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=JCe(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=GCe(s))&&(n.precision=i-(n.type==="%")*2);break}}return yA(n)}function ic(e){var t=e.domain;return e.ticks=function(r){var n=t();return VS(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return hW(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],a=n[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=WS(o,a,r),c===l)return n[s]=o,n[i]=a,t(n);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function fW(){var e=mA();return e.copy=function(){return kg(e,fW())},Ni.apply(e,arguments),ic(e)}function pW(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Vb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return pW(e).unknown(t)},e=arguments.length?Array.from(e,Vb):[0,1],ic(r)}function mW(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function C5(e){return Math.log(e)}function T5(e){return Math.exp(e)}function XCe(e){return-Math.log(-e)}function QCe(e){return-Math.exp(-e)}function eTe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tTe(e){return e===10?eTe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function rTe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function A5(e){return(t,r)=>-e(-t,r)}function vA(e){const t=e(C5,T5),r=t.domain;let n=10,s,i;function o(){return s=rTe(n),i=tTe(n),r()[0]<0?(s=A5(s),i=A5(i),e(XCe,QCe)):e(C5,T5),t}return t.base=function(a){return arguments.length?(n=+a,o()):n},t.domain=function(a){return arguments.length?(r(a),o()):r()},t.ticks=a=>{const l=r();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let f=s(c),p=s(u),v,m;const b=a==null?10:+a;let x=[];if(!(n%1)&&p-f<b){if(f=Math.floor(f),p=Math.ceil(p),c>0){for(;f<=p;++f)for(v=1;v<n;++v)if(m=f<0?v/i(-f):v*i(f),!(m<c)){if(m>u)break;x.push(m)}}else for(;f<=p;++f)for(v=n-1;v>=1;--v)if(m=f>0?v/i(-f):v*i(f),!(m<c)){if(m>u)break;x.push(m)}x.length*2<b&&(x=VS(c,u,b))}else x=VS(f,p,Math.min(p-f,b)).map(i);return h?x.reverse():x},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Rm(l)).precision==null&&(l.trim=!0),l=yA(l)),a===1/0)return l;const c=Math.max(1,n*a/t.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*n<n-.5&&(h*=n),h<=c?l(u):""}},t.nice=()=>r(mW(r(),{floor:a=>i(Math.floor(s(a))),ceil:a=>i(Math.ceil(s(a)))})),t}function gW(){const e=vA(ew()).domain([1,10]);return e.copy=()=>kg(e,gW()).base(e.base()),Ni.apply(e,arguments),e}function O5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function P5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function bA(e){var t=1,r=e(O5(t),P5(t));return r.constant=function(n){return arguments.length?e(O5(t=+n),P5(t)):t},ic(r)}function yW(){var e=bA(ew());return e.copy=function(){return kg(e,yW()).constant(e.constant())},Ni.apply(e,arguments)}function R5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nTe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function sTe(e){return e<0?-e*e:e*e}function xA(e){var t=e(Yn,Yn),r=1;function n(){return r===1?e(Yn,Yn):r===.5?e(nTe,sTe):e(R5(r),R5(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},ic(t)}function wA(){var e=xA(ew());return e.copy=function(){return kg(e,wA()).exponent(e.exponent())},Ni.apply(e,arguments),e}function iTe(){return wA.apply(null,arguments).exponent(.5)}function I5(e){return Math.sign(e)*e*e}function oTe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function vW(){var e=mA(),t=[0,1],r=!1,n;function s(i){var o=oTe(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(I5(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Vb)).map(I5)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return vW(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ni.apply(s,arguments),ic(s)}function bW(){var e=[],t=[],r=[],n;function s(){var o=0,a=Math.max(1,t.length);for(r=new Array(a-1);++o<a;)r[o-1]=uCe(e,o/a);return i}function i(o){return o==null||isNaN(o=+o)?n:t[_g(r,o)]}return i.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?r[a-1]:e[0],a<r.length?r[a]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Dl),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return bW().domain(e).range(t).unknown(n)},Ni.apply(i,arguments)}function xW(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(l){return l!=null&&l<=l?s[_g(n,l,0,r)]:i}function a(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(r=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return xW().domain([e,t]).range(s).unknown(i)},Ni.apply(ic(o),arguments)}function wW(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[_g(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return wW().domain(e).range(t).unknown(r)},Ni.apply(s,arguments)}const Yj=new Date,Jj=new Date;function Yr(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),a=s.ceil(i);return i-o<a-i?o:a},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,a)=>{const l=[];if(i=s.ceil(i),a=a==null?1:Math.floor(a),!(i<o)||!(a>0))return l;let c;do l.push(c=new Date(+i)),t(i,a),e(i);while(c<i&&i<o);return l},s.filter=i=>Yr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!i(o););else for(;--a>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(Yj.setTime(+i),Jj.setTime(+o),e(Yj),e(Jj),Math.floor(r(Yj,Jj))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Kb=Yr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Kb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Yr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Kb);Kb.range;const ma=1e3,li=ma*60,ga=li*60,Pa=ga*24,_A=Pa*7,D5=Pa*30,Xj=Pa*365,Bc=Yr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ma)},(e,t)=>(t-e)/ma,e=>e.getUTCSeconds());Bc.range;const jA=Yr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ma)},(e,t)=>{e.setTime(+e+t*li)},(e,t)=>(t-e)/li,e=>e.getMinutes());jA.range;const kA=Yr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*li)},(e,t)=>(t-e)/li,e=>e.getUTCMinutes());kA.range;const NA=Yr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ma-e.getMinutes()*li)},(e,t)=>{e.setTime(+e+t*ga)},(e,t)=>(t-e)/ga,e=>e.getHours());NA.range;const SA=Yr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ga)},(e,t)=>(t-e)/ga,e=>e.getUTCHours());SA.range;const Ng=Yr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*li)/Pa,e=>e.getDate()-1);Ng.range;const tw=Yr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pa,e=>e.getUTCDate()-1);tw.range;const _W=Yr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pa,e=>Math.floor(e/Pa));_W.range;function Du(e){return Yr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*li)/_A)}const rw=Du(0),Hb=Du(1),aTe=Du(2),lTe=Du(3),$h=Du(4),cTe=Du(5),uTe=Du(6);rw.range;Hb.range;aTe.range;lTe.range;$h.range;cTe.range;uTe.range;function Lu(e){return Yr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/_A)}const nw=Lu(0),Zb=Lu(1),dTe=Lu(2),hTe=Lu(3),Fh=Lu(4),fTe=Lu(5),pTe=Lu(6);nw.range;Zb.range;dTe.range;hTe.range;Fh.range;fTe.range;pTe.range;const EA=Yr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());EA.range;const CA=Yr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());CA.range;const Ra=Yr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ra.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Yr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ra.range;const Ia=Yr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ia.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Yr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ia.range;function jW(e,t,r,n,s,i){const o=[[Bc,1,ma],[Bc,5,5*ma],[Bc,15,15*ma],[Bc,30,30*ma],[i,1,li],[i,5,5*li],[i,15,15*li],[i,30,30*li],[s,1,ga],[s,3,3*ga],[s,6,6*ga],[s,12,12*ga],[n,1,Pa],[n,2,2*Pa],[r,1,_A],[t,1,D5],[t,3,3*D5],[e,1,Xj]];function a(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const p=h&&typeof h.range=="function"?h:l(c,u,h),v=p?p.range(c,+u+1):[];return f?v.reverse():v}function l(c,u,h){const f=Math.abs(u-c)/h,p=cA(([,,b])=>b).right(o,f);if(p===o.length)return e.every(KS(c/Xj,u/Xj,h));if(p===0)return Kb.every(Math.max(KS(c,u,h),1));const[v,m]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return v.every(m)}return[a,l]}const[mTe,gTe]=jW(Ia,CA,nw,_W,SA,kA),[yTe,vTe]=jW(Ra,EA,rw,Ng,NA,jA);function Qj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ek(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function np(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function bTe(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=sp(s),u=ip(s),h=sp(i),f=ip(i),p=sp(o),v=ip(o),m=sp(a),b=ip(a),x=sp(l),w=ip(l),_={a:q,A:Y,b:L,B:K,c:null,d:U5,e:U5,f:BTe,g:XTe,G:eAe,H:FTe,I:zTe,j:UTe,L:kW,m:qTe,M:VTe,p:G,q:re,Q:V5,s:W5,S:WTe,u:KTe,U:HTe,V:ZTe,w:GTe,W:YTe,x:null,X:null,y:JTe,Y:QTe,Z:tAe,"%":q5},j={a:H,A:ne,b:J,B:Ie,c:null,d:B5,e:B5,f:iAe,g:mAe,G:yAe,H:rAe,I:nAe,j:sAe,L:SW,m:oAe,M:aAe,p:me,q:ge,Q:V5,s:W5,S:lAe,u:cAe,U:uAe,V:dAe,w:hAe,W:fAe,x:null,X:null,y:pAe,Y:gAe,Z:vAe,"%":q5},k={a:P,A:O,b:R,B:I,c:M,d:F5,e:F5,f:DTe,g:$5,G:M5,H:z5,I:z5,j:OTe,L:ITe,m:ATe,M:PTe,p:T,q:TTe,Q:MTe,s:$Te,S:RTe,u:kTe,U:NTe,V:STe,w:jTe,W:ETe,x:z,X:W,y:$5,Y:M5,Z:CTe,"%":LTe};_.x=N(r,_),_.X=N(n,_),_.c=N(t,_),j.x=N(r,j),j.X=N(n,j),j.c=N(t,j);function N(U,Z){return function(le){var B=[],we=-1,Ee=0,He=U.length,Je,ct,Et;for(le instanceof Date||(le=new Date(+le));++we<He;)U.charCodeAt(we)===37&&(B.push(U.slice(Ee,we)),(ct=L5[Je=U.charAt(++we)])!=null?Je=U.charAt(++we):ct=Je==="e"?" ":"0",(Et=Z[Je])&&(Je=Et(le,ct)),B.push(Je),Ee=we+1);return B.push(U.slice(Ee,we)),B.join("")}}function S(U,Z){return function(le){var B=np(1900,void 0,1),we=E(B,U,le+="",0),Ee,He;if(we!=le.length)return null;if("Q"in B)return new Date(B.Q);if("s"in B)return new Date(B.s*1e3+("L"in B?B.L:0));if(Z&&!("Z"in B)&&(B.Z=0),"p"in B&&(B.H=B.H%12+B.p*12),B.m===void 0&&(B.m="q"in B?B.q:0),"V"in B){if(B.V<1||B.V>53)return null;"w"in B||(B.w=1),"Z"in B?(Ee=ek(np(B.y,0,1)),He=Ee.getUTCDay(),Ee=He>4||He===0?Zb.ceil(Ee):Zb(Ee),Ee=tw.offset(Ee,(B.V-1)*7),B.y=Ee.getUTCFullYear(),B.m=Ee.getUTCMonth(),B.d=Ee.getUTCDate()+(B.w+6)%7):(Ee=Qj(np(B.y,0,1)),He=Ee.getDay(),Ee=He>4||He===0?Hb.ceil(Ee):Hb(Ee),Ee=Ng.offset(Ee,(B.V-1)*7),B.y=Ee.getFullYear(),B.m=Ee.getMonth(),B.d=Ee.getDate()+(B.w+6)%7)}else("W"in B||"U"in B)&&("w"in B||(B.w="u"in B?B.u%7:"W"in B?1:0),He="Z"in B?ek(np(B.y,0,1)).getUTCDay():Qj(np(B.y,0,1)).getDay(),B.m=0,B.d="W"in B?(B.w+6)%7+B.W*7-(He+5)%7:B.w+B.U*7-(He+6)%7);return"Z"in B?(B.H+=B.Z/100|0,B.M+=B.Z%100,ek(B)):Qj(B)}}function E(U,Z,le,B){for(var we=0,Ee=Z.length,He=le.length,Je,ct;we<Ee;){if(B>=He)return-1;if(Je=Z.charCodeAt(we++),Je===37){if(Je=Z.charAt(we++),ct=k[Je in L5?Z.charAt(we++):Je],!ct||(B=ct(U,le,B))<0)return-1}else if(Je!=le.charCodeAt(B++))return-1}return B}function T(U,Z,le){var B=c.exec(Z.slice(le));return B?(U.p=u.get(B[0].toLowerCase()),le+B[0].length):-1}function P(U,Z,le){var B=p.exec(Z.slice(le));return B?(U.w=v.get(B[0].toLowerCase()),le+B[0].length):-1}function O(U,Z,le){var B=h.exec(Z.slice(le));return B?(U.w=f.get(B[0].toLowerCase()),le+B[0].length):-1}function R(U,Z,le){var B=x.exec(Z.slice(le));return B?(U.m=w.get(B[0].toLowerCase()),le+B[0].length):-1}function I(U,Z,le){var B=m.exec(Z.slice(le));return B?(U.m=b.get(B[0].toLowerCase()),le+B[0].length):-1}function M(U,Z,le){return E(U,t,Z,le)}function z(U,Z,le){return E(U,r,Z,le)}function W(U,Z,le){return E(U,n,Z,le)}function q(U){return o[U.getDay()]}function Y(U){return i[U.getDay()]}function L(U){return l[U.getMonth()]}function K(U){return a[U.getMonth()]}function G(U){return s[+(U.getHours()>=12)]}function re(U){return 1+~~(U.getMonth()/3)}function H(U){return o[U.getUTCDay()]}function ne(U){return i[U.getUTCDay()]}function J(U){return l[U.getUTCMonth()]}function Ie(U){return a[U.getUTCMonth()]}function me(U){return s[+(U.getUTCHours()>=12)]}function ge(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var Z=N(U+="",_);return Z.toString=function(){return U},Z},parse:function(U){var Z=S(U+="",!1);return Z.toString=function(){return U},Z},utcFormat:function(U){var Z=N(U+="",j);return Z.toString=function(){return U},Z},utcParse:function(U){var Z=S(U+="",!0);return Z.toString=function(){return U},Z}}}var L5={"-":"",_:" ",0:"0"},cn=/^\s*\d+/,xTe=/^%/,wTe=/[\\^$*+?|[\]().{}]/g;function ft(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function _Te(e){return e.replace(wTe,"\\$&")}function sp(e){return new RegExp("^(?:"+e.map(_Te).join("|")+")","i")}function ip(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function jTe(e,t,r){var n=cn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function kTe(e,t,r){var n=cn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function NTe(e,t,r){var n=cn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function STe(e,t,r){var n=cn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ETe(e,t,r){var n=cn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function M5(e,t,r){var n=cn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function $5(e,t,r){var n=cn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function CTe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function TTe(e,t,r){var n=cn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function ATe(e,t,r){var n=cn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function F5(e,t,r){var n=cn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function OTe(e,t,r){var n=cn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function z5(e,t,r){var n=cn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function PTe(e,t,r){var n=cn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function RTe(e,t,r){var n=cn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function ITe(e,t,r){var n=cn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function DTe(e,t,r){var n=cn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function LTe(e,t,r){var n=xTe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function MTe(e,t,r){var n=cn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function $Te(e,t,r){var n=cn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function U5(e,t){return ft(e.getDate(),t,2)}function FTe(e,t){return ft(e.getHours(),t,2)}function zTe(e,t){return ft(e.getHours()%12||12,t,2)}function UTe(e,t){return ft(1+Ng.count(Ra(e),e),t,3)}function kW(e,t){return ft(e.getMilliseconds(),t,3)}function BTe(e,t){return kW(e,t)+"000"}function qTe(e,t){return ft(e.getMonth()+1,t,2)}function VTe(e,t){return ft(e.getMinutes(),t,2)}function WTe(e,t){return ft(e.getSeconds(),t,2)}function KTe(e){var t=e.getDay();return t===0?7:t}function HTe(e,t){return ft(rw.count(Ra(e)-1,e),t,2)}function NW(e){var t=e.getDay();return t>=4||t===0?$h(e):$h.ceil(e)}function ZTe(e,t){return e=NW(e),ft($h.count(Ra(e),e)+(Ra(e).getDay()===4),t,2)}function GTe(e){return e.getDay()}function YTe(e,t){return ft(Hb.count(Ra(e)-1,e),t,2)}function JTe(e,t){return ft(e.getFullYear()%100,t,2)}function XTe(e,t){return e=NW(e),ft(e.getFullYear()%100,t,2)}function QTe(e,t){return ft(e.getFullYear()%1e4,t,4)}function eAe(e,t){var r=e.getDay();return e=r>=4||r===0?$h(e):$h.ceil(e),ft(e.getFullYear()%1e4,t,4)}function tAe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ft(t/60|0,"0",2)+ft(t%60,"0",2)}function B5(e,t){return ft(e.getUTCDate(),t,2)}function rAe(e,t){return ft(e.getUTCHours(),t,2)}function nAe(e,t){return ft(e.getUTCHours()%12||12,t,2)}function sAe(e,t){return ft(1+tw.count(Ia(e),e),t,3)}function SW(e,t){return ft(e.getUTCMilliseconds(),t,3)}function iAe(e,t){return SW(e,t)+"000"}function oAe(e,t){return ft(e.getUTCMonth()+1,t,2)}function aAe(e,t){return ft(e.getUTCMinutes(),t,2)}function lAe(e,t){return ft(e.getUTCSeconds(),t,2)}function cAe(e){var t=e.getUTCDay();return t===0?7:t}function uAe(e,t){return ft(nw.count(Ia(e)-1,e),t,2)}function EW(e){var t=e.getUTCDay();return t>=4||t===0?Fh(e):Fh.ceil(e)}function dAe(e,t){return e=EW(e),ft(Fh.count(Ia(e),e)+(Ia(e).getUTCDay()===4),t,2)}function hAe(e){return e.getUTCDay()}function fAe(e,t){return ft(Zb.count(Ia(e)-1,e),t,2)}function pAe(e,t){return ft(e.getUTCFullYear()%100,t,2)}function mAe(e,t){return e=EW(e),ft(e.getUTCFullYear()%100,t,2)}function gAe(e,t){return ft(e.getUTCFullYear()%1e4,t,4)}function yAe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Fh(e):Fh.ceil(e),ft(e.getUTCFullYear()%1e4,t,4)}function vAe(){return"+0000"}function q5(){return"%"}function V5(e){return+e}function W5(e){return Math.floor(+e/1e3)}var hd,CW,TW;bAe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bAe(e){return hd=bTe(e),CW=hd.format,hd.parse,TW=hd.utcFormat,hd.utcParse,hd}function xAe(e){return new Date(e)}function wAe(e){return e instanceof Date?+e:+new Date(+e)}function TA(e,t,r,n,s,i,o,a,l,c){var u=mA(),h=u.invert,f=u.domain,p=c(".%L"),v=c(":%S"),m=c("%I:%M"),b=c("%I %p"),x=c("%a %d"),w=c("%b %d"),_=c("%B"),j=c("%Y");function k(N){return(l(N)<N?p:a(N)<N?v:o(N)<N?m:i(N)<N?b:n(N)<N?s(N)<N?x:w:r(N)<N?_:j)(N)}return u.invert=function(N){return new Date(h(N))},u.domain=function(N){return arguments.length?f(Array.from(N,wAe)):f().map(xAe)},u.ticks=function(N){var S=f();return e(S[0],S[S.length-1],N??10)},u.tickFormat=function(N,S){return S==null?k:c(S)},u.nice=function(N){var S=f();return(!N||typeof N.range!="function")&&(N=t(S[0],S[S.length-1],N??10)),N?f(mW(S,N)):u},u.copy=function(){return kg(u,TA(e,t,r,n,s,i,o,a,l,c))},u}function _Ae(){return Ni.apply(TA(yTe,vTe,Ra,EA,rw,Ng,NA,jA,Bc,CW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function jAe(){return Ni.apply(TA(mTe,gTe,Ia,CA,nw,tw,SA,kA,Bc,TW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sw(){var e=0,t=1,r,n,s,i,o=Yn,a=!1,l;function c(h){return h==null||isNaN(h=+h)?l:o(s===0?.5:(h=(i(h)-r)*s,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(o=h,c):o};function u(h){return function(f){var p,v;return arguments.length?([p,v]=f,o=h(p,v),c):[o(0),o(1)]}}return c.range=u(yf),c.rangeRound=u(pA),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return i=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),c}}function oc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function AW(){var e=ic(sw()(Yn));return e.copy=function(){return oc(e,AW())},Va.apply(e,arguments)}function OW(){var e=vA(sw()).domain([1,10]);return e.copy=function(){return oc(e,OW()).base(e.base())},Va.apply(e,arguments)}function PW(){var e=bA(sw());return e.copy=function(){return oc(e,PW()).constant(e.constant())},Va.apply(e,arguments)}function AA(){var e=xA(sw());return e.copy=function(){return oc(e,AA()).exponent(e.exponent())},Va.apply(e,arguments)}function kAe(){return AA.apply(null,arguments).exponent(.5)}function RW(){var e=[],t=Yn;function r(n){if(n!=null&&!isNaN(n=+n))return t((_g(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Dl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>cCe(e,i/n))},r.copy=function(){return RW(t).domain(e)},Va.apply(r,arguments)}function iw(){var e=0,t=.5,r=1,n=1,s,i,o,a,l,c=Yn,u,h=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-i)*(n*m<n*i?a:l),c(h?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,s=u(e=+e),i=u(t=+t),o=u(r=+r),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),n=i<s?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(h=!!m,p):h},p.interpolator=function(m){return arguments.length?(c=m,p):c};function v(m){return function(b){var x,w,_;return arguments.length?([x,w,_]=b,c=LCe(m,[x,w,_]),p):[c(0),c(.5),c(1)]}}return p.range=v(yf),p.rangeRound=v(pA),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return u=m,s=m(e),i=m(t),o=m(r),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),n=i<s?-1:1,p}}function IW(){var e=ic(iw()(Yn));return e.copy=function(){return oc(e,IW())},Va.apply(e,arguments)}function DW(){var e=vA(iw()).domain([.1,1,10]);return e.copy=function(){return oc(e,DW()).base(e.base())},Va.apply(e,arguments)}function LW(){var e=bA(iw());return e.copy=function(){return oc(e,LW()).constant(e.constant())},Va.apply(e,arguments)}function OA(){var e=xA(iw());return e.copy=function(){return oc(e,OA()).exponent(e.exponent())},Va.apply(e,arguments)}function NAe(){return OA.apply(null,arguments).exponent(.5)}const Sp=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dA,scaleDiverging:IW,scaleDivergingLog:DW,scaleDivergingPow:OA,scaleDivergingSqrt:NAe,scaleDivergingSymlog:LW,scaleIdentity:pW,scaleImplicit:HS,scaleLinear:fW,scaleLog:gW,scaleOrdinal:uA,scalePoint:hCe,scalePow:wA,scaleQuantile:bW,scaleQuantize:xW,scaleRadial:vW,scaleSequential:AW,scaleSequentialLog:OW,scaleSequentialPow:AA,scaleSequentialQuantile:RW,scaleSequentialSqrt:kAe,scaleSequentialSymlog:PW,scaleSqrt:iTe,scaleSymlog:yW,scaleThreshold:wW,scaleTime:_Ae,scaleUtc:jAe,tickFormat:hW},Symbol.toStringTag,{value:"Module"}));var ac=e=>e.chartData,PA=X([ac],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),RA=(e,t,r,n)=>n?PA(e):ac(e);function zh(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(eo(t)&&eo(r))return!0}return!1}function K5(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function SAe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(eo(r))s=r;else if(typeof r=="function")return;if(eo(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(zh(o))return o}}function EAe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(zh(n))return K5(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,a;if(s==="auto")t!=null&&(o=Math.min(...t));else if(Oe(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&B3.test(s)){var l=B3.exec(s);if(l==null||t==null)o=void 0;else{var c=+l[1];o=t[0]-c}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(a=Math.max(...t));else if(Oe(i))a=i;else if(typeof i=="function")try{t!=null&&(a=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&q3.test(i)){var u=q3.exec(i);if(u==null||t==null)a=void 0;else{var h=+u[1];a=t[1]+h}}else a=t==null?void 0:t[1];var f=[o,a];if(zh(f))return t==null?f:K5(f,t,r)}}}var vf=1e9,CAe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},DA,Zt=!0,vi="[DecimalError] ",su=vi+"Invalid argument: ",IA=vi+"Exponent out of range: ",bf=Math.floor,Pc=Math.pow,TAe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Is,rn=1e7,Ut=7,MW=9007199254740991,Gb=bf(MW/Ut),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ut;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(e){return _a(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,r=t.constructor;return Nt(_a(t,new r(e),0,1),r.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return Ir(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Is))throw Error(vi+"NaN");if(r.s<1)throw Error(vi+(r.s?"NaN":"-Infinity"));return r.eq(Is)?new n(0):(Zt=!1,t=_a(Im(r,i),Im(e,i),i),Zt=!0,Nt(t,s))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?zW(t,e):$W(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(vi+"NaN");return r.s?(Zt=!1,t=_a(r,e,0,1).times(e),Zt=!0,r.minus(t)):Nt(new n(r),s)};Ce.naturalExponential=Ce.exp=function(){return FW(this)};Ce.naturalLogarithm=Ce.ln=function(){return Im(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$W(t,e):zW(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(su+e);if(t=Ir(s)+1,n=s.d.length-1,r=n*Ut+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ce.squareRoot=Ce.sqrt=function(){var e,t,r,n,s,i,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(vi+"NaN")}for(e=Ir(a),Zt=!1,s=Math.sqrt(+a),s==0||s==1/0?(t=So(a.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=bf((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(s.toString()),r=l.precision,s=o=r+3;;)if(i=n,n=i.plus(_a(a,i,o+2)).times(.5),So(i.d).slice(0,o)===(t=So(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Nt(i,r+1,0),i.times(i).eq(a)){n=i;break}}else if(t!="9999")break;o+=4}return Zt=!0,Nt(n,r)};Ce.times=Ce.mul=function(e){var t,r,n,s,i,o,a,l,c,u=this,h=u.constructor,f=u.d,p=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,l=f.length,c=p.length,l<c&&(i=f,f=p,p=i,o=l,l=c,c=o),i=[],o=l+c,n=o;n--;)i.push(0);for(n=c;--n>=0;){for(t=0,s=l+n;s>n;)a=i[s]+p[n]*f[s-n-1]+t,i[s--]=a%rn|0,t=a/rn|0;i[s]=(i[s]+t)%rn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Zt?Nt(e,h.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:($o(e,0,vf),t===void 0?t=n.rounding:$o(t,0,8),Nt(r,e+Ir(r)+1,t))};Ce.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=bu(n,!0):($o(e,0,vf),t===void 0?t=s.rounding:$o(t,0,8),n=Nt(new s(n),e+1,t),r=bu(n,!0,e+1)),r};Ce.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?bu(s):($o(e,0,vf),t===void 0?t=i.rounding:$o(t,0,8),n=Nt(new i(s),e+Ir(s)+1,t),r=bu(n.abs(),!1,e+Ir(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return Nt(new t(e),Ir(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,r,n,s,i,o,a=this,l=a.constructor,c=12,u=+(e=new l(e));if(!e.s)return new l(Is);if(a=new l(a),!a.s){if(e.s<1)throw Error(vi+"Infinity");return a}if(a.eq(Is))return a;if(n=l.precision,e.eq(Is))return Nt(a,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=a.s,o){if((r=u<0?-u:u)<=MW){for(s=new l(Is),t=Math.ceil(n/Ut+4),Zt=!1;r%2&&(s=s.times(a),Z5(s.d,t)),r=bf(r/2),r!==0;)a=a.times(a),Z5(a.d,t);return Zt=!0,e.s<0?new l(Is).div(s):Nt(s,n)}}else if(i<0)throw Error(vi+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,a.s=1,Zt=!1,s=e.times(Im(a,n+c)),Zt=!0,s=FW(s),s.s=i,s};Ce.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=Ir(s),n=bu(s,r<=i.toExpNeg||r>=i.toExpPos)):($o(e,1,vf),t===void 0?t=i.rounding:$o(t,0,8),s=Nt(new i(s),e,t),r=Ir(s),n=bu(s,e<=r||r<=i.toExpNeg,e)),n};Ce.toSignificantDigits=Ce.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):($o(e,1,vf),t===void 0?t=n.rounding:$o(t,0,8)),Nt(new n(r),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ir(e),r=e.constructor;return bu(e,t<=r.toExpNeg||t>=r.toExpPos)};function $W(e,t){var r,n,s,i,o,a,l,c,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Zt?Nt(t,h):t;if(l=e.d,c=t.d,o=e.e,s=t.e,l=l.slice(),i=o-s,i){for(i<0?(n=l,i=-i,a=c.length):(n=c,s=o,a=l.length),o=Math.ceil(h/Ut),a=o>a?o+1:a+1,i>a&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(a=l.length,i=c.length,a-i<0&&(i=a,n=c,c=l,l=n),r=0;i;)r=(l[--i]=l[i]+c[i]+r)/rn|0,l[i]%=rn;for(r&&(l.unshift(r),++s),a=l.length;l[--a]==0;)l.pop();return t.d=l,t.e=s,Zt?Nt(t,h):t}function $o(e,t,r){if(e!==~~e||e<t||e>r)throw Error(su+e)}function So(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Ut-n.length,r&&(i+=fl(r)),i+=n;o=e[t],n=o+"",r=Ut-n.length,r&&(i+=fl(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var _a=function(){function e(n,s){var i,o=0,a=n.length;for(n=n.slice();a--;)i=n[a]*s+o,n[a]=i%rn|0,o=i/rn|0;return o&&n.unshift(o),n}function t(n,s,i,o){var a,l;if(i!=o)l=i>o?1:-1;else for(a=l=0;a<i;a++)if(n[a]!=s[a]){l=n[a]>s[a]?1:-1;break}return l}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*rn+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var a,l,c,u,h,f,p,v,m,b,x,w,_,j,k,N,S,E,T=n.constructor,P=n.s==s.s?1:-1,O=n.d,R=s.d;if(!n.s)return new T(n);if(!s.s)throw Error(vi+"Division by zero");for(l=n.e-s.e,S=R.length,k=O.length,p=new T(P),v=p.d=[],c=0;R[c]==(O[c]||0);)++c;if(R[c]>(O[c]||0)&&--l,i==null?w=i=T.precision:o?w=i+(Ir(n)-Ir(s))+1:w=i,w<0)return new T(0);if(w=w/Ut+2|0,c=0,S==1)for(u=0,R=R[0],w++;(c<k||u)&&w--;c++)_=u*rn+(O[c]||0),v[c]=_/R|0,u=_%R|0;else{for(u=rn/(R[0]+1)|0,u>1&&(R=e(R,u),O=e(O,u),S=R.length,k=O.length),j=S,m=O.slice(0,S),b=m.length;b<S;)m[b++]=0;E=R.slice(),E.unshift(0),N=R[0],R[1]>=rn/2&&++N;do u=0,a=t(R,m,S,b),a<0?(x=m[0],S!=b&&(x=x*rn+(m[1]||0)),u=x/N|0,u>1?(u>=rn&&(u=rn-1),h=e(R,u),f=h.length,b=m.length,a=t(h,m,f,b),a==1&&(u--,r(h,S<f?E:R,f))):(u==0&&(a=u=1),h=R.slice()),f=h.length,f<b&&h.unshift(0),r(m,h,b),a==-1&&(b=m.length,a=t(R,m,S,b),a<1&&(u++,r(m,S<b?E:R,b))),b=m.length):a===0&&(u++,m=[0]),v[c++]=u,a&&m[0]?m[b++]=O[j]||0:(m=[O[j]],b=1);while((j++<k||m[0]!==void 0)&&w--)}return v[0]||v.shift(),p.e=l,Nt(p,o?i+Ir(p)+1:i)}}();function FW(e,t){var r,n,s,i,o,a,l=0,c=0,u=e.constructor,h=u.precision;if(Ir(e)>16)throw Error(IA+Ir(e));if(!e.s)return new u(Is);for(Zt=!1,a=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(n=Math.log(Pc(2,c))/Math.LN10*2+5|0,a+=n,r=s=i=new u(Is),u.precision=a;;){if(s=Nt(s.times(e),a),r=r.times(++l),o=i.plus(_a(s,r,a)),So(o.d).slice(0,a)===So(i.d).slice(0,a)){for(;c--;)i=Nt(i.times(i),a);return u.precision=h,t==null?(Zt=!0,Nt(i,h)):i}i=o}}function Ir(e){for(var t=e.e*Ut,r=e.d[0];r>=10;r/=10)t++;return t}function tk(e,t,r){if(t>e.LN10.sd())throw Zt=!0,r&&(e.precision=r),Error(vi+"LN10 precision limit exceeded");return Nt(new e(e.LN10),t)}function fl(e){for(var t="";e--;)t+="0";return t}function Im(e,t){var r,n,s,i,o,a,l,c,u,h=1,f=10,p=e,v=p.d,m=p.constructor,b=m.precision;if(p.s<1)throw Error(vi+(p.s?"NaN":"-Infinity"));if(p.eq(Is))return new m(0);if(t==null?(Zt=!1,c=b):c=t,p.eq(10))return t==null&&(Zt=!0),tk(m,c);if(c+=f,m.precision=c,r=So(v),n=r.charAt(0),i=Ir(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=So(p.d),n=r.charAt(0),h++;i=Ir(p),n>1?(p=new m("0."+r),i++):p=new m(n+"."+r.slice(1))}else return l=tk(m,c+2,b).times(i+""),p=Im(new m(n+"."+r.slice(1)),c-f).plus(l),m.precision=b,t==null?(Zt=!0,Nt(p,b)):p;for(a=o=p=_a(p.minus(Is),p.plus(Is),c),u=Nt(p.times(p),c),s=3;;){if(o=Nt(o.times(u),c),l=a.plus(_a(o,new m(s),c)),So(l.d).slice(0,c)===So(a.d).slice(0,c))return a=a.times(2),i!==0&&(a=a.plus(tk(m,c+2,b).times(i+""))),a=_a(a,new m(h),c),m.precision=b,t==null?(Zt=!0,Nt(a,b)):a;a=l,s+=2}}function H5(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=bf(r/Ut),e.d=[],n=(r+1)%Ut,r<0&&(n+=Ut),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Ut;n<s;)e.d.push(+t.slice(n,n+=Ut));t=t.slice(n),n=Ut-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Zt&&(e.e>Gb||e.e<-Gb))throw Error(IA+r)}else e.s=0,e.e=0,e.d=[0];return e}function Nt(e,t,r){var n,s,i,o,a,l,c,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ut,s=t,c=h[u=0];else{if(u=Math.ceil((n+1)/Ut),i=h.length,u>=i)return e;for(c=i=h[u],o=1;i>=10;i/=10)o++;n%=Ut,s=n-Ut+o}if(r!==void 0&&(i=Pc(10,o-s-1),a=c/i%10|0,l=t<0||h[u+1]!==void 0||c%i,l=r<4?(a||l)&&(r==0||r==(e.s<0?3:2)):a>5||a==5&&(r==4||l||r==6&&(n>0?s>0?c/Pc(10,o-s):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return l?(i=Ir(e),h.length=1,t=t-i-1,h[0]=Pc(10,(Ut-t%Ut)%Ut),e.e=bf(-t/Ut)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=u,i=1,u--):(h.length=u+1,i=Pc(10,Ut-n),h[u]=s>0?(c/Pc(10,o-s)%Pc(10,s)|0)*i:0),l)for(;;)if(u==0){(h[0]+=i)==rn&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=rn)break;h[u--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(Zt&&(e.e>Gb||e.e<-Gb))throw Error(IA+Ir(e));return e}function zW(e,t){var r,n,s,i,o,a,l,c,u,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Zt?Nt(t,p):t;if(l=e.d,h=t.d,n=t.e,c=e.e,l=l.slice(),o=c-n,o){for(u=o<0,u?(r=l,o=-o,a=h.length):(r=h,n=c,a=l.length),s=Math.max(Math.ceil(p/Ut),a)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=l.length,a=h.length,u=s<a,u&&(a=s),s=0;s<a;s++)if(l[s]!=h[s]){u=l[s]<h[s];break}o=0}for(u&&(r=l,l=h,h=r,t.s=-t.s),a=l.length,s=h.length-a;s>0;--s)l[a++]=0;for(s=h.length;s>o;){if(l[--s]<h[s]){for(i=s;i&&l[--i]===0;)l[i]=rn-1;--l[i],l[s]+=rn}l[s]-=h[s]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Zt?Nt(t,p):t):new f(0)}function bu(e,t,r){var n,s=Ir(e),i=So(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+fl(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+fl(-s-1)+i,r&&(n=r-o)>0&&(i+=fl(n))):s>=o?(i+=fl(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+fl(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=fl(n))),e.s<0?"-"+i:i}function Z5(e,t){if(e.length>t)return e.length=t,!0}function UW(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(su+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return H5(o,i.toString())}else if(typeof i!="string")throw Error(su+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,TAe.test(i))H5(o,i);else throw Error(su+i)}if(s.prototype=Ce,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=UW,s.config=s.set=AAe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function AAe(e){if(!e||typeof e!="object")throw Error(vi+"Object expected");var t,r,n,s=["precision",1,vf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(bf(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(su+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(su+r+": "+n);return this}var DA=UW(CAe);Is=new DA(1);const bt=DA;var OAe=e=>e,BW={},qW=e=>e===BW,G5=e=>function t(){return arguments.length===0||arguments.length===1&&qW(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},VW=(e,t)=>e===1?t:G5(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==BW).length;return i>=e?t(...n):VW(e-i,G5(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=n.map(u=>qW(u)?a.shift():u);return t(...c,...a)}))}),ow=e=>VW(e.length,e),JS=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},PAe=ow((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),RAe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return OAe;var n=t.reverse(),s=n[0],i=n.slice(1);return function(){return i.reduce((o,a)=>a(o),s(...arguments))}},XS=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),WW=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,a)=>{var l;return o===((l=t)===null||l===void 0?void 0:l[a])})||(t=s,r=e(...s)),r}};function KW(e){var t;return e===0?t=1:t=Math.floor(new bt(e).abs().log(10).toNumber())+1,t}function HW(e,t,r){for(var n=new bt(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}ow((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});ow((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});ow((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var ZW=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},GW=(e,t,r)=>{if(e.lte(0))return new bt(0);var n=KW(e.toNumber()),s=new bt(10).pow(n),i=e.div(s),o=n!==1?.05:.1,a=new bt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=a.mul(s);return t?new bt(l.toNumber()):new bt(Math.ceil(l.toNumber()))},IAe=(e,t,r)=>{var n=new bt(1),s=new bt(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new bt(10).pow(KW(e)-1),s=new bt(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new bt(Math.floor(e)))}else e===0?s=new bt(Math.floor((t-1)/2)):r||(s=new bt(Math.floor(e)));var o=Math.floor((t-1)/2),a=RAe(PAe(l=>s.add(new bt(l-o).mul(n)).toNumber()),JS);return a(0,t)},YW=function(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new bt(0),tickMin:new bt(0),tickMax:new bt(0)};var i=GW(new bt(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new bt(0):(o=new bt(e).add(t).div(2),o=o.sub(new bt(o).mod(i)));var a=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new bt(t).sub(o).div(i).toNumber()),c=a+l+1;return c>r?YW(e,t,r,n,s+1):(c<r&&(l=t>0?l+(r-c):l,a=t>0?a:a+(r-c)),{step:i,tickMin:o.sub(new bt(a).mul(i)),tickMax:o.add(new bt(l).mul(i))})};function DAe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,a]=ZW([t,r]);if(o===-1/0||a===1/0){var l=a===1/0?[o,...JS(0,n-1).map(()=>1/0)]:[...JS(0,n-1).map(()=>-1/0),a];return t>r?XS(l):l}if(o===a)return IAe(o,n,s);var{step:c,tickMin:u,tickMax:h}=YW(o,a,i,s,0),f=HW(u,h.add(new bt(.1).mul(c)),c);return t>r?XS(f):f}function LAe(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=ZW([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var a=Math.max(t,2),l=GW(new bt(o).sub(i).div(a-1),s,0),c=[...HW(new bt(i),new bt(o),l),o];return s===!1&&(c=c.map(u=>Math.round(u))),r>n?XS(c):c}var MAe=WW(DAe),$Ae=WW(LAe),FAe=e=>e.rootProps.barCategoryGap,Sg=e=>e.rootProps.stackOffset,LA=e=>e.options.chartName,MA=e=>e.rootProps.syncId,JW=e=>e.rootProps.syncMethod,$A=e=>e.options.eventEmitter,ha={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},As={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},aw=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},zAe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ha.angleAxisId,includeHidden:!1,name:void 0,reversed:ha.reversed,scale:ha.scale,tick:ha.tick,tickCount:void 0,ticks:void 0,type:ha.type,unit:void 0},UAe={allowDataOverflow:As.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:As.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:As.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:As.scale,tick:As.tick,tickCount:As.tickCount,ticks:void 0,type:As.type,unit:void 0},BAe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ha.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ha.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ha.scale,tick:ha.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},qAe={allowDataOverflow:As.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:As.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:As.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:As.scale,tick:As.tick,tickCount:As.tickCount,ticks:void 0,type:"category",unit:void 0},FA=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?BAe:zAe,zA=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?qAe:UAe,lw=e=>e.polarOptions,UA=X([Ba,qa,ln],SV),XW=X([lw,UA],(e,t)=>{if(e!=null)return hi(e.innerRadius,t,0)}),QW=X([lw,UA],(e,t)=>{if(e!=null)return hi(e.outerRadius,t,t*.8)}),VAe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},eK=X([lw],VAe);X([FA,eK],aw);var tK=X([UA,XW,QW],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});X([zA,tK],aw);var rK=X([_t,lw,XW,QW,Ba,qa],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=t;return{cx:hi(o,s,s/2),cy:hi(a,i,i/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),Xt=(e,t)=>t,Eg=(e,t,r)=>r;function nK(e){return e==null?void 0:e.id}var Jr=e=>{var t=_t(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},xf=e=>e.tooltip.settings.axisId,Xr=e=>{var t=Jr(e),r=xf(e);return Cg(e,t,r)};function sK(e,t,r){var{chartData:n=[]}=t,s=r==null?void 0:r.dataKey,i=new Map;return e.forEach(o=>{var a,l=(a=o.data)!==null&&a!==void 0?a:n;if(!(l==null||l.length===0)){var c=nK(o);l.forEach((u,h)=>{var f=s==null?h:String(Kt(u,s,null)),p=Kt(u,o.dataKey,0),v;i.has(f)?v=i.get(f):v={},Object.assign(v,{[c]:p}),i.set(f,v)})}}),Array.from(i.values())}function BA(e){return e.stackId!=null&&e.dataKey!=null}function Y5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(r),!0).forEach(function(n){WAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WAe(e,t,r){return(t=KAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KAe(e){var t=HAe(e,"string");return typeof t=="symbol"?t:t+""}function HAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QS=[0,"auto"],Es={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Wa=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Es},Cs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:QS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Jx},lc=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Cs},ZAe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qA=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??ZAe},kr=(e,t,r)=>{switch(t){case"xAxis":return Wa(e,r);case"yAxis":return lc(e,r);case"zAxis":return qA(e,r);case"angleAxis":return FA(e,r);case"radiusAxis":return zA(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},GAe=(e,t,r)=>{switch(t){case"xAxis":return Wa(e,r);case"yAxis":return lc(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Cg=(e,t,r)=>{switch(t){case"xAxis":return Wa(e,r);case"yAxis":return lc(e,r);case"angleAxis":return FA(e,r);case"radiusAxis":return zA(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},iK=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function VA(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var oK=e=>e.graphicalItems.cartesianItems,YAe=X([Xt,Eg],VA),WA=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Tg=X([oK,kr,YAe],WA),aK=X([Tg],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(BA)),lK=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),cK=X([Tg],lK),KA=e=>e.map(t=>t.data).filter(Boolean).flat(1),JAe=X([Tg],KA),HA=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},ZA=X([JAe,RA],HA),GA=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Kt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Kt(s,n)}))):e.map(n=>({value:n})),cw=X([ZA,kr,Tg],GA);function uK(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Mu(e){return e.filter(t=>Mo(t)||t instanceof Date).map(Number).filter(t=>mi(t)===!1)}function XAe(e,t,r){return!r||typeof t!="number"||mi(t)?[]:r.length?Mu(r.flatMap(n=>{var s=Kt(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!eo(i)||!eo(o)))return[t-i,t+o]})):[]}var QAe=X([aK,RA,Xr],sK),dK=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,a]=i,l=a.map(nK);return[o,{stackedData:f2e(e,l,r),graphicalItems:a}]}))},eOe=X([QAe,aK,Sg],dK),hK=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=g2e(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},tOe=X([eOe,ac,Xt],hK),fK=(e,t,r,n,s)=>r.length>0?e.flatMap(i=>r.flatMap(o=>{var a,l,c=(a=n[o.id])===null||a===void 0?void 0:a.filter(h=>uK(s,h)),u=Kt(i,(l=t.dataKey)!==null&&l!==void 0?l:o.dataKey);return{value:u,errorDomain:XAe(i,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:Kt(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),uw=e=>e.errorBars,pK=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>uK(r,n));X([cK,uw,Xt],pK);var rOe=X([ZA,kr,cK,uw,Xt],fK);function nOe(e){var{value:t}=e;if(Mo(t)||t instanceof Date)return t}var J5=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Mu(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},sOe=(e,t,r)=>{var n=e.map(nOe).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&l9(n))?rW(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},YA=e=>{var t;if(e==null||!("domain"in e))return QS;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Mu(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:QS},Jb=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(n.length!==0){var s=n.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},mK=e=>e.referenceElements.dots,wf=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),iOe=X([mK,Xt,Eg],wf),gK=e=>e.referenceElements.areas,oOe=X([gK,Xt,Eg],wf),yK=e=>e.referenceElements.lines,aOe=X([yK,Xt,Eg],wf),vK=(e,t)=>{var r=Mu(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},lOe=X(iOe,Xt,vK),bK=(e,t)=>{var r=Mu(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},cOe=X([oOe,Xt],bK),xK=(e,t)=>{var r=Mu(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},uOe=X(aOe,Xt,xK),dOe=X(lOe,uOe,cOe,(e,t,r)=>Jb(e,r,t)),wK=X([kr],YA),JA=(e,t,r,n,s,i,o)=>{var a=SAe(t,e.allowDataOverflow);if(a!=null)return a;var l=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",c=l?Jb(r,s,J5(n)):Jb(s,J5(n));return EAe(t,c,e.allowDataOverflow)},hOe=X([kr,wK,tOe,rOe,dOe,_t,Xt],JA),fOe=[0,1],XA=(e,t,r,n,s,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:a,type:l}=e,c=sc(t,i);return c&&a==null?rW(0,r.length):l==="category"?sOe(n,e,c):s==="expand"?fOe:o}},QA=X([kr,_t,ZA,cw,Sg,Xt,hOe],XA),_K=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var a="scale".concat(xg(i));return a in Sp?a:"point"}}},_f=X([kr,_t,iK,LA,Xt],_K);function pOe(e){if(e!=null){if(e in Sp)return Sp[e]();var t="scale".concat(xg(e));if(t in Sp)return Sp[t]()}}function eO(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=pOe(t);if(s!=null){var i=s.domain(r).range(n);return c2e(i),i}}}var tO=(e,t,r)=>{var n=YA(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&zh(e))return MAe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&zh(e))return $Ae(e,t.tickCount,t.allowDecimals)}},rO=X([QA,Cg,_f],tO),nO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&zh(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],a=r[r.length-1];return[Math.min(s,i),Math.max(o,a)]}return t},mOe=X([kr,QA,rO,Xt],nO),gOe=X(cw,kr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Mu(e.map(a=>a.value))).sort((a,l)=>a-l);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),jK=X(gOe,_t,FAe,ln,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!eo(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=hi(r,e*i),a=e*i/2;return a-o-(a-o)/i*o}return 0}),yOe=(e,t)=>{var r=Wa(e,t);return r==null||typeof r.padding!="string"?0:jK(e,"xAxis",t,r.padding)},vOe=(e,t)=>{var r=lc(e,t);return r==null||typeof r.padding!="string"?0:jK(e,"yAxis",t,r.padding)},bOe=X(Wa,yOe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),xOe=X(lc,vOe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),wOe=X([ln,bOe,Qx,Xx,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),_Oe=X([ln,_t,xOe,Qx,Xx,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Ag=(e,t,r,n)=>{var s;switch(t){case"xAxis":return wOe(e,r,n);case"yAxis":return _Oe(e,r,n);case"zAxis":return(s=qA(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return eK(e);case"radiusAxis":return tK(e,r);default:return}},kK=X([kr,Ag],aw),jf=X([kr,_f,mOe,kK],eO);X([Tg,uw,Xt],pK);function NK(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dw=(e,t)=>t,hw=(e,t,r)=>r,jOe=X(eA,dw,hw,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(NK)),kOe=X(tA,dw,hw,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(NK)),SK=(e,t)=>({width:e.width,height:t.height}),NOe=(e,t)=>{var r=typeof t.width=="number"?t.width:Jx;return{width:r,height:e.height}},SOe=X(ln,Wa,SK),EOe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},COe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},TOe=X(qa,ln,jOe,dw,hw,(e,t,r,n,s)=>{var i={},o;return r.forEach(a=>{var l=SK(t,a);o==null&&(o=EOe(t,n,e));var c=n==="top"&&!s||n==="bottom"&&s;i[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),i}),AOe=X(Ba,ln,kOe,dw,hw,(e,t,r,n,s)=>{var i={},o;return r.forEach(a=>{var l=NOe(t,a);o==null&&(o=COe(t,n,e));var c=n==="left"&&!s||n==="right"&&s;i[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),i}),OOe=(e,t)=>{var r=ln(e),n=Wa(e,t);if(n!=null){var s=TOe(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},POe=(e,t)=>{var r=ln(e),n=lc(e,t);if(n!=null){var s=AOe(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},ROe=X(ln,lc,(e,t)=>{var r=typeof t.width=="number"?t.width:Jx;return{width:r,height:e.height}}),EK=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,a=sc(e,n),l=t.map(c=>c.value);if(o&&a&&i==="category"&&s&&l9(l))return l}},sO=X([_t,cw,kr,Xt],EK),CK=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=sc(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(a=>a.value)}},iO=X([_t,cw,Cg,Xt],CK),X5=X([_t,GAe,_f,jf,sO,iO,Ag,rO,Xt],(e,t,r,n,s,i,o,a,l)=>{if(t==null)return null;var c=sc(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:s,isCategorical:c,niceTicks:a,range:o,realScaleType:r,scale:n}}),IOe=(e,t,r,n,s,i,o,a,l)=>{if(!(t==null||n==null)){var c=sc(e,l),{type:u,ticks:h,tickCount:f}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,v=u==="category"&&n.bandwidth?n.bandwidth()/p:0;v=l==="angleAxis"&&i!=null&&i.length>=2?Pn(i[0]-i[1])*2*v:v;var m=h||s;if(m){var b=m.map((x,w)=>{var _=o?o.indexOf(x):x;return{index:w,coordinate:n(_)+v,value:x,offset:v}});return b.filter(x=>!mi(x.coordinate))}return c&&a?a.map((x,w)=>({coordinate:n(x)+v,value:x,index:w,offset:v})):n.ticks?n.ticks(f).map(x=>({coordinate:n(x)+v,value:x,offset:v})):n.domain().map((x,w)=>({coordinate:n(x)+v,value:o?o[x]:x,index:w,offset:v}))}},TK=X([_t,Cg,_f,jf,rO,Ag,sO,iO,Xt],IOe),DOe=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var a=sc(e,o),{tickCount:l}=t,c=0;return c=o==="angleAxis"&&(n==null?void 0:n.length)>=2?Pn(n[0]-n[1])*2*c:c,a&&i?i.map((u,h)=>({coordinate:r(u)+c,value:u,index:h,offset:c})):r.ticks?r.ticks(l).map(u=>({coordinate:r(u)+c,value:u,offset:c})):r.domain().map((u,h)=>({coordinate:r(u)+c,value:s?s[u]:u,index:h,offset:c}))}},AK=X([_t,Cg,jf,Ag,sO,iO,Xt],DOe),OK=X(kr,jf,(e,t)=>{if(!(e==null||t==null))return Yb(Yb({},e),{},{scale:t})}),LOe=X([kr,_f,QA,kK],eO);X((e,t,r)=>qA(e,r),LOe,(e,t)=>{if(!(e==null||t==null))return Yb(Yb({},e),{},{scale:t})});var MOe=X([_t,eA,tA],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),PK=e=>e.options.defaultTooltipEventType,RK=e=>e.options.validateTooltipEventTypes;function IK(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function oO(e,t){var r=PK(e),n=RK(e);return IK(t,r,n)}function $Oe(e){return De(t=>oO(t,e))}var DK=(e,t)=>{var r,n=Number(t);if(!(mi(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},FOe=e=>e.tooltip.settings,vl={active:!1,index:null,dataKey:void 0,coordinate:void 0},zOe={itemInteraction:{click:vl,hover:vl},axisInteraction:{click:vl,hover:vl},keyboardInteraction:vl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},LK=Bs({name:"tooltip",initialState:zOe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=wa(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:UOe,removeTooltipEntrySettings:BOe,setTooltipSettingsState:qOe,setActiveMouseOverItemIndex:MK,mouseLeaveItem:VOe,mouseLeaveChart:$K,setActiveClickItemIndex:WOe,setMouseOverAxisIndex:FK,setMouseClickAxisIndex:KOe,setSyncInteraction:e2,setKeyboardInteraction:t2}=LK.actions,HOe=LK.reducer;function Q5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q5(Object(r),!0).forEach(function(n){ZOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZOe(e,t,r){return(t=GOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GOe(e){var t=YOe(e,"string");return typeof t=="symbol"?t:t+""}function YOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JOe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function XOe(e){return e.index!=null}var zK=(e,t,r,n)=>{if(t==null)return vl;var s=JOe(e,t,r);if(s==null)return vl;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(XOe(s)){if(i)return nv(nv({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return nv(nv({},vl),{},{coordinate:s.coordinate})},aO=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!eo(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},UK=(e,t,r,n,s,i,o,a)=>{if(!(i==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,i);if(c!=null)return c;var u=s==null?void 0:s[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},BK=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Og=e=>e.options.tooltipPayloadSearcher,kf=e=>e.tooltip;function eL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eL(Object(r),!0).forEach(function(n){QOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QOe(e,t,r){return(t=ePe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ePe(e){var t=tPe(e,"string");return typeof t=="symbol"?t:t+""}function tPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rPe(e,t){return e??t}var qK=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=r,h=[];return e.reduce((f,p)=>{var v,{dataDefinedOnItem:m,settings:b}=p,x=rPe(m,a),w=Array.isArray(x)?EV(x,c,u):x,_=(v=b==null?void 0:b.dataKey)!==null&&v!==void 0?v:n==null?void 0:n.dataKey,j=b==null?void 0:b.nameKey,k;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?k=c9(w,n.dataKey,s):k=i(w,t,l,j),Array.isArray(k))k.forEach(S=>{var E=tL(tL({},b),{},{name:S.name,unit:S.unit,color:void 0,fill:void 0});f.push(V3({tooltipEntrySettings:E,dataKey:S.dataKey,payload:S.payload,value:Kt(S.payload,S.dataKey),name:S.name}))});else{var N;f.push(V3({tooltipEntrySettings:b,dataKey:_,payload:k,value:Kt(k,_),name:(N=Kt(k,j))!==null&&N!==void 0?N:b==null?void 0:b.name}))}return f},h)}},lO=X([Xr,_t,iK,LA,Jr],_K),nPe=X([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),sPe=X([Jr,xf],VA),Pg=X([nPe,Xr,sPe],WA),iPe=X([Pg],e=>e.filter(BA)),oPe=X([Pg],KA),Nf=X([oPe,ac],HA),aPe=X([iPe,ac,Xr],sK),cO=X([Nf,Xr,Pg],GA),lPe=X([Xr],YA),cPe=X([Pg],e=>e.filter(BA)),uPe=X([aPe,cPe,Sg],dK),dPe=X([uPe,ac,Jr],hK),hPe=X([Pg],lK),fPe=X([Nf,Xr,hPe,uw,Jr],fK),pPe=X([mK,Jr,xf],wf),mPe=X([pPe,Jr],vK),gPe=X([gK,Jr,xf],wf),yPe=X([gPe,Jr],bK),vPe=X([yK,Jr,xf],wf),bPe=X([vPe,Jr],xK),xPe=X([mPe,bPe,yPe],Jb),wPe=X([Xr,lPe,dPe,fPe,xPe,_t,Jr],JA),VK=X([Xr,_t,Nf,cO,Sg,Jr,wPe],XA),_Pe=X([VK,Xr,lO],tO),jPe=X([Xr,VK,_Pe,Jr],nO),WK=e=>{var t=Jr(e),r=xf(e),n=!1;return Ag(e,t,r,n)},KK=X([Xr,WK],aw),HK=X([Xr,lO,jPe,KK],eO),kPe=X([_t,cO,Xr,Jr],EK),NPe=X([_t,cO,Xr,Jr],CK),SPe=(e,t,r,n,s,i,o,a)=>{if(t){var{type:l}=t,c=sc(e,a);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=l==="category"&&n.bandwidth?n.bandwidth()/u:0;return h=a==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?Pn(s[0]-s[1])*2*h:h,c&&o?o.map((f,p)=>({coordinate:n(f)+h,value:f,index:p,offset:h})):n.domain().map((f,p)=>({coordinate:n(f)+h,value:i?i[f]:f,index:p,offset:h}))}}},Ka=X([_t,Xr,lO,HK,WK,kPe,NPe,Jr],SPe),uO=X([PK,RK,FOe],(e,t,r)=>IK(r.shared,e,t)),ZK=e=>e.tooltip.settings.trigger,dO=e=>e.tooltip.settings.defaultIndex,fw=X([kf,uO,ZK,dO],zK),Uh=X([fw,Nf],aO),GK=X([Ka,Uh],DK),EPe=X([fw],e=>{if(e)return e.dataKey}),YK=X([kf,uO,ZK,dO],BK),CPe=X([Ba,qa,_t,ln,Ka,dO,YK,Og],UK),TPe=X([fw,CPe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),APe=X([fw],e=>e.active),OPe=X([YK,Uh,ac,Xr,GK,Og,uO],qK),PPe=X([OPe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function rL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rL(Object(r),!0).forEach(function(n){RPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RPe(e,t,r){return(t=IPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IPe(e){var t=DPe(e,"string");return typeof t=="symbol"?t:t+""}function DPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LPe=()=>De(Xr),MPe=()=>{var e=LPe(),t=De(Ka),r=De(HK);return DS(nL(nL({},e),{},{scale:r}),t)},$Pe=()=>De(LA),hO=(e,t)=>t,JK=(e,t,r)=>r,fO=(e,t,r,n)=>n,FPe=X(Ka,e=>qx(e,t=>t.coordinate)),pO=X([kf,hO,JK,fO],zK),XK=X([pO,Nf],aO),zPe=(e,t,r)=>{if(t!=null){var n=kf(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},QK=X([kf,hO,JK,fO],BK),Xb=X([Ba,qa,_t,ln,Ka,fO,QK,Og],UK),UPe=X([pO,Xb],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),eH=X(Ka,XK,DK),BPe=X([QK,XK,ac,Xr,eH,Og,hO],qK),qPe=X([pO],e=>({isActive:e.active,activeIndex:e.index})),VPe=(e,t,r,n,s,i,o,a)=>{if(!(!e||!t||!n||!s||!i)){var l=y2e(e.chartX,e.chartY,t,r,a);if(l){var c=b2e(l,t),u=a2e(c,o,i,n,s),h=v2e(t,i,u,l);return{activeIndex:String(u),activeCoordinate:h}}}};function r2(){return r2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r2.apply(null,arguments)}function sL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sL(Object(r),!0).forEach(function(n){WPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WPe(e,t,r){return(t=KPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KPe(e){var t=HPe(e,"string");return typeof t=="symbol"?t:t+""}function HPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZPe(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:a,tooltipEventType:l,chartName:c}=e,u=t,h=r,f=n;if(!a||!u||c!=="ScatterChart"&&l!=="axis")return null;var p,v;if(c==="ScatterChart")p=u,v=gEe;else if(c==="BarChart")p=yEe(o,u,s,i),v=GV;else if(o==="radial"){var{cx:m,cy:b,radius:x,startAngle:w,endAngle:_}=YV(u);p={cx:m,cy:b,startAngle:w,endAngle:_,innerRadius:x,outerRadius:x},v=XV}else p={points:YEe(o,u,s)},v=aA;var j=typeof a=="object"&&"className"in a?a.className:void 0,k=sv(sv(sv(sv({stroke:"#ccc",pointerEvents:"none"},s),p),nr(a,!1)),{},{payload:h,payloadIndex:f,className:ot("recharts-tooltip-cursor",j)});return g.isValidElement(a)?g.cloneElement(a,k):g.createElement(v,k)}function GPe(e){var t=MPe(),r=IV(),n=iA(),s=$Pe();return g.createElement(ZPe,r2({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var tH=g.createContext(null),YPe=()=>g.useContext(tH),rH={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||l,f),v=r?r+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],p]:l._events[v].push(p):(l._events[v]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)t.call(c,u)&&l.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=r?r+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,f=u.length,p=new Array(f);h<f;h++)p[h]=u[h].fn;return p},a.prototype.listenerCount=function(l){var c=r?r+l:l,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(l,c,u,h,f,p){var v=r?r+l:l;if(!this._events[v])return!1;var m=this._events[v],b=arguments.length,x,w;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,u),!0;case 4:return m.fn.call(m.context,c,u,h),!0;case 5:return m.fn.call(m.context,c,u,h,f),!0;case 6:return m.fn.call(m.context,c,u,h,f,p),!0}for(w=1,x=new Array(b-1);w<b;w++)x[w-1]=arguments[w];m.fn.apply(m.context,x)}else{var _=m.length,j;for(w=0;w<_;w++)switch(m[w].once&&this.removeListener(l,m[w].fn,void 0,!0),b){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,c);break;case 3:m[w].fn.call(m[w].context,c,u);break;case 4:m[w].fn.call(m[w].context,c,u,h);break;default:if(!x)for(j=1,x=new Array(b-1);j<b;j++)x[j-1]=arguments[j];m[w].fn.apply(m[w].context,x)}}return!0},a.prototype.on=function(l,c,u){return i(this,l,c,u,!1)},a.prototype.once=function(l,c,u){return i(this,l,c,u,!0)},a.prototype.removeListener=function(l,c,u,h){var f=r?r+l:l;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!h||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var v=0,m=[],b=p.length;v<b;v++)(p[v].fn!==c||h&&!p[v].once||u&&p[v].context!==u)&&m.push(p[v]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=r?r+l:l,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(rH);var JPe=rH.exports;const nH=io(JPe);var Dm=new nH,n2="recharts.syncEvent.tooltip",iL="recharts.syncEvent.brush";function sH(e,t){if(t){var r=Number.parseInt(t,10);if(!mi(r))return e==null?void 0:e[r]}}var XPe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},iH=Bs({name:"options",initialState:XPe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),QPe=iH.reducer,{createEventEmitter:eRe}=iH.actions;function tRe(e){return e.tooltip.syncInteraction}var rRe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},oH=Bs({name:"chartData",initialState:rRe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:oL,setDataStartEndIndexes:nRe,setComputedData:dHe}=oH.actions,sRe=oH.reducer,aH=()=>{};function iRe(){var e=De(MA),t=De($A),r=ar(),n=De(JW),s=De(Ka),i=iA(),o=rA(),a=De(l=>l.rootProps.className);g.useEffect(()=>{if(e==null)return aH;var l=(c,u,h)=>{if(t!==h&&e===c){if(n==="index"){r(u);return}if(s!=null){var f;if(typeof n=="function"){var p={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},v=n(s,p);f=s[v]}else n==="value"&&(f=s.find(N=>String(N.value)===u.payload.label));var{coordinate:m}=u.payload;if(f==null||u.payload.active===!1||m==null||o==null){r(e2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y:x}=m,w=Math.min(b,o.x+o.width),_=Math.min(x,o.y+o.height),j={x:i==="horizontal"?f.coordinate:w,y:i==="horizontal"?_:f.coordinate},k=e2({active:u.payload.active,coordinate:j,dataKey:u.payload.dataKey,index:String(f.index),label:u.payload.label});r(k)}}};return Dm.on(n2,l),()=>{Dm.off(n2,l)}},[a,r,t,e,n,s,i,o])}function oRe(){var e=De(MA),t=De($A),r=ar();g.useEffect(()=>{if(e==null)return aH;var n=(s,i,o)=>{t!==o&&e===s&&r(nRe(i))};return Dm.on(iL,n),()=>{Dm.off(iL,n)}},[r,t,e])}function aRe(){var e=ar();g.useEffect(()=>{e(eRe())},[e]),iRe(),oRe()}function lRe(e,t,r,n,s,i){var o=De(f=>zPe(f,e,t)),a=De($A),l=De(MA),c=De(JW),u=De(tRe),h=u==null?void 0:u.active;g.useEffect(()=>{if(!h&&l!=null&&a!=null){var f=e2({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});Dm.emit(n2,l,f,a)}},[h,r,o,s,n,a,l,c,i])}function aL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(r),!0).forEach(function(n){cRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cRe(e,t,r){return(t=uRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uRe(e){var t=dRe(e,"string");return typeof t=="symbol"?t:t+""}function dRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hRe(e){return e.dataKey}function fRe(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(Z2e,t)}var cL=[],pRe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!gf.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function uL(e){var t=ki(e,pRe),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:a,isAnimationActive:l,offset:c,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:p,wrapperStyle:v,cursor:m,shared:b,trigger:x,defaultIndex:w,portal:_,axisId:j}=t,k=ar(),N=typeof w=="number"?String(w):w;g.useEffect(()=>{k(qOe({shared:b,trigger:x,axisId:j,active:r,defaultIndex:N}))},[k,b,x,j,r,N]);var S=rA(),E=$V(),T=$Oe(b),{activeIndex:P,isActive:O}=De(J=>qPe(J,T,x,N)),R=De(J=>BPe(J,T,x,N)),I=De(J=>eH(J,T,x,N)),M=De(J=>UPe(J,T,x,N)),z=R,W=YPe(),q=r??O,[Y,L]=tV([z,q]),K=T==="axis"?I:void 0;lRe(T,x,M,K,P,q);var G=_??W;if(G==null)return null;var re=z??cL;q||(re=cL),a&&re.length&&(re=K9(z.filter(J=>J.value!=null&&(J.hide!==!0||t.includeHidden)),u,hRe));var H=re.length>0,ne=g.createElement(tEe,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:l,active:q,coordinate:M,hasPayload:H,offset:c,position:h,reverseDirection:f,useTranslate3d:p,viewBox:S,wrapperStyle:v,lastBoundingBox:Y,innerRef:L,hasPortalFromProps:!!_},fRe(o,lL(lL({},t),{},{payload:re,label:K,active:q,coordinate:M,accessibilityLayer:E})));return g.createElement(g.Fragment,null,Zn.createPortal(ne,G),q&&g.createElement(GPe,{cursor:m,tooltipEventType:T,coordinate:M,payload:z,index:P}))}var lH={},cH={},uH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,a=null;const l=i!=null&&i.includes("leading"),c=i==null||i.includes("trailing"),u=()=>{a!==null&&(r.apply(o,a),o=void 0,a=null)},h=()=>{c&&u(),m()};let f=null;const p=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},n)},v=()=>{f!==null&&(clearTimeout(f),f=null)},m=()=>{v(),o=void 0,a=null},b=()=>{u()},x=function(...w){if(s!=null&&s.aborted)return;o=this,a=w;const _=f==null;p(),l&&_&&u()};return x.schedule=p,x.cancel=m,x.flush=b,s==null||s.addEventListener("abort",m,{once:!0}),x}e.debounce=t})(uH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uH;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:a=!0,maxWait:l}=i,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,h=null;const f=t.debounce(function(...m){u=n.apply(this,m),h=null},s,{edges:c}),p=function(...m){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(u=n.apply(this,m),h=Date.now(),f.cancel(),f.schedule(),u):(f.apply(this,m),u)},v=()=>(f.flush(),u);return p.cancel=f.cancel,p.flush=v,p}e.debounce=r})(cH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cH;function r(n,s=0,i={}){const{leading:o=!0,trailing:a=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:a})}e.throttle=r})(lH);var mRe=lH.throttle;const gRe=io(mRe);var Hp=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s]};function dL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dL(Object(r),!0).forEach(function(n){yRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yRe(e,t,r){return(t=vRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vRe(e){var t=bRe(e,"string");return typeof t=="symbol"?t:t+""}function bRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hL=g.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:h,className:f,onResize:p,style:v={}}=e,m=g.useRef(null),b=g.useRef();b.current=p,g.useImperativeHandle(t,()=>m.current);var[x,w]=g.useState({containerWidth:n.width,containerHeight:n.height}),_=g.useCallback((k,N)=>{w(S=>{var E=Math.round(k),T=Math.round(N);return S.containerWidth===E&&S.containerHeight===T?S:{containerWidth:E,containerHeight:T}})},[]);g.useEffect(()=>{var k=T=>{var P,{width:O,height:R}=T[0].contentRect;_(O,R),(P=b.current)===null||P===void 0||P.call(b,O,R)};u>0&&(k=gRe(k,u,{trailing:!0,leading:!1}));var N=new ResizeObserver(k),{width:S,height:E}=m.current.getBoundingClientRect();return _(S,E),N.observe(m.current),()=>{N.disconnect()}},[_,u]);var j=g.useMemo(()=>{var{containerWidth:k,containerHeight:N}=x;if(k<0||N<0)return null;Hp(Fc(s)||Fc(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),Hp(!r||r>0,"The aspect(%s) must be greater than zero.",r);var S=Fc(s)?k:s,E=Fc(i)?N:i;return r&&r>0&&(S?E=S/r:E&&(S=E*r),l&&E>l&&(E=l)),Hp(S>0||E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,S,E,s,i,o,a,r),g.Children.map(c,T=>g.cloneElement(T,{width:S,height:E,style:rk({width:S,height:E},T.props.style)}))},[r,c,i,l,a,o,x,s]);return g.createElement("div",{id:h?"".concat(h):void 0,className:ot("recharts-responsive-container",f),style:rk(rk({},v),{},{width:s,height:i,minWidth:o,minHeight:a,maxHeight:l}),ref:m},g.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),pw=e=>null;pw.displayName="Cell";function xRe(e,t,r){return(t=wRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wRe(e){var t=_Re(e,"string");return typeof t=="symbol"?t:t+""}function _Re(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jRe{constructor(t){xRe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function fL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fL(Object(r),!0).forEach(function(n){NRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NRe(e,t,r){return(t=SRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SRe(e){var t=ERe(e,"string");return typeof t=="symbol"?t:t+""}function ERe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CRe={cacheSize:2e3,enableCache:!0},dH=kRe({},CRe),pL=new jRe(dH.cacheSize),TRe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},mL="recharts_measurement_span";function ARe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",a=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(a)}var gL=(e,t)=>{try{var r=document.getElementById(mL);r||(r=document.createElement("span"),r.setAttribute("id",mL),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,TRe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Zp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||gf.isSsr)return{width:0,height:0};if(!dH.enableCache)return gL(e,t);var r=ARe(e,t),n=pL.get(r);if(n)return n;var s=gL(e,t);return pL.set(r,s),s},yL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ORe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,PRe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},RRe=Object.keys(hH),$d="NaN";function IRe(e,t){return e*hH[t]}class us{static parse(t){var r,[,n,s]=(r=PRe.exec(t))!==null&&r!==void 0?r:[];return new us(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,mi(t)&&(this.unit=""),r!==""&&!ORe.test(r)&&(this.num=NaN,this.unit=""),RRe.includes(r)&&(this.num=IRe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new us(NaN,""):new us(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new us(NaN,""):new us(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new us(NaN,""):new us(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new us(NaN,""):new us(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return mi(this.num)}}function fH(e){if(e.includes($d))return $d;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=yL.exec(t))!==null&&r!==void 0?r:[],o=us.parse(n??""),a=us.parse(i??""),l=s==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return $d;t=t.replace(yL,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,h,f]=(c=vL.exec(t))!==null&&c!==void 0?c:[],p=us.parse(u??""),v=us.parse(f??""),m=h==="+"?p.add(v):p.subtract(v);if(m.isNaN())return $d;t=t.replace(vL,m.toString())}return t}var bL=/\(([^()]*)\)/;function DRe(e){for(var t=e,r;(r=bL.exec(t))!=null;){var[,n]=r;t=t.replace(bL,fH(n))}return t}function LRe(e){var t=e.replace(/\s+/g,"");return t=DRe(t),t=fH(t),t}function MRe(e){try{return LRe(e)}catch{return $d}}function nk(e){var t=MRe(e.slice(5,-1));return t===$d?"":t}var $Re=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],FRe=["dx","dy","angle","className","breakAll"];function s2(){return s2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s2.apply(null,arguments)}function xL(e,t){if(e==null)return{};var r,n,s=zRe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pH=/[ \f\n\r\t\v\u2028\u2029]+/,mH=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Rr(t)||(r?s=t.toString().split(""):s=t.toString().split(pH));var i=s.map(a=>({word:a,width:Zp(a,n).width})),o=r?0:Zp(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},URe=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:a,breakAll:l}=e,c=Oe(i),u=o,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((O,R)=>{var{word:I,width:M}=R,z=O[O.length-1];if(z&&(n==null||s||z.width+M+r<Number(n)))z.words.push(I),z.width+=M+r;else{var W={words:[I],width:M};O.push(W)}return O},[])},f=h(t),p=P=>P.reduce((O,R)=>O.width>R.width?O:R);if(!c||s)return f;var v=f.length>i||p(f).width>Number(n);if(!v)return f;for(var m="…",b=P=>{var O=u.slice(0,P),R=mH({breakAll:l,style:a,children:O+m}).wordsWithComputedWidth,I=h(R),M=I.length>i||p(I).width>Number(n);return[M,I]},x=0,w=u.length-1,_=0,j;x<=w&&_<=u.length-1;){var k=Math.floor((x+w)/2),N=k-1,[S,E]=b(N),[T]=b(k);if(!S&&!T&&(x=k+1),S&&T&&(w=k-1),!S&&T){j=E;break}_++}return j||f},wL=e=>{var t=Rr(e)?[]:e.toString().split(pH);return[{words:t}]},BRe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!gf.isSsr){var a,l,c=mH({breakAll:i,children:n,style:s});if(c){var{wordsWithComputedWidth:u,spaceWidth:h}=c;a=u,l=h}else return wL(n);return URe({breakAll:i,children:n,maxLines:o,style:s},a,l,t,r)}return wL(n)},_L="#808080",mw=g.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:a="start",verticalAnchor:l="end",fill:c=_L}=e,u=xL(e,$Re),h=g.useMemo(()=>BRe({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:f,dy:p,angle:v,className:m,breakAll:b}=u,x=xL(u,FRe);if(!Mo(r)||!Mo(n))return null;var w=r+(Oe(f)?f:0),_=n+(Oe(p)?p:0),j;switch(l){case"start":j=nk("calc(".concat(i,")"));break;case"middle":j=nk("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:j=nk("calc(".concat(h.length-1," * -").concat(s,")"));break}var k=[];if(o){var N=h[0].width,{width:S}=u;k.push("scale(".concat(Oe(S)?S/N:1,")"))}return v&&k.push("rotate(".concat(v,", ").concat(w,", ").concat(_,")")),k.length&&(x.transform=k.join(" ")),g.createElement("text",s2({},nr(x,!0),{ref:t,x:w,y:_,className:ot("recharts-text",m),textAnchor:a,fill:c.includes("url")?_L:c}),h.map((E,T)=>{var P=E.words.join(b?"":" ");return g.createElement("tspan",{x:w,dy:T===0?j:s,key:"".concat(P,"-").concat(T)},P)}))});mw.displayName="Text";var qRe=["offset"],VRe=["labelRef"];function jL(e,t){if(e==null)return{};var r,n,s=WRe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kL(Object(r),!0).forEach(function(n){KRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KRe(e,t,r){return(t=HRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HRe(e){var t=ZRe(e,"string");return typeof t=="symbol"?t:t+""}function ZRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fa(){return fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fa.apply(null,arguments)}var GRe=e=>{var{value:t,formatter:r}=e,n=Rr(e.children)?t:e.children;return typeof r=="function"?r(n):n},mO=e=>e!=null&&typeof e=="function",YRe=(e,t)=>{var r=Pn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},JRe=(e,t,r,n)=>{var{position:s,offset:i,className:o}=e,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:h,endAngle:f,clockWise:p}=n,v=(c+u)/2,m=YRe(h,f),b=m>=0?1:-1,x,w;s==="insideStart"?(x=h+b*i,w=p):s==="insideEnd"?(x=f-b*i,w=!p):s==="end"&&(x=f+b*i,w=p),w=m<=0?w:!w;var _=Pr(a,l,v,x),j=Pr(a,l,v,x+(w?1:-1)*359),k="M".concat(_.x,",").concat(_.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(j.x,",").concat(j.y),N=Rr(e.id)?Nm("recharts-radial-line-"):e.id;return g.createElement("text",fa({},r,{dominantBaseline:"central",className:ot("recharts-radial-bar-label",o)}),g.createElement("defs",null,g.createElement("path",{id:N,d:k})),g.createElement("textPath",{xlinkHref:"#".concat(N)},t))},XRe=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:a,endAngle:l}=e,c=(a+l)/2;if(r==="outside"){var{x:u,y:h}=Pr(n,s,o+t,c);return{x:u,y:h,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var f=(i+o)/2,{x:p,y:v}=Pr(n,s,f,c);return{x:p,y:v,textAnchor:"middle",verticalAnchor:"middle"}},QRe=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:a,height:l}=t,c=l>=0?1:-1,u=c*n,h=c>0?"end":"start",f=c>0?"start":"end",p=a>=0?1:-1,v=p*n,m=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var x={x:i+a/2,y:o-c*n,textAnchor:"middle",verticalAnchor:h};return dr(dr({},x),r?{height:Math.max(o-r.y,0),width:a}:{})}if(s==="bottom"){var w={x:i+a/2,y:o+l+u,textAnchor:"middle",verticalAnchor:f};return dr(dr({},w),r?{height:Math.max(r.y+r.height-(o+l),0),width:a}:{})}if(s==="left"){var _={x:i-v,y:o+l/2,textAnchor:m,verticalAnchor:"middle"};return dr(dr({},_),r?{width:Math.max(_.x-r.x,0),height:l}:{})}if(s==="right"){var j={x:i+a+v,y:o+l/2,textAnchor:b,verticalAnchor:"middle"};return dr(dr({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:l}:{})}var k=r?{width:a,height:l}:{};return s==="insideLeft"?dr({x:i+v,y:o+l/2,textAnchor:b,verticalAnchor:"middle"},k):s==="insideRight"?dr({x:i+a-v,y:o+l/2,textAnchor:m,verticalAnchor:"middle"},k):s==="insideTop"?dr({x:i+a/2,y:o+u,textAnchor:"middle",verticalAnchor:f},k):s==="insideBottom"?dr({x:i+a/2,y:o+l-u,textAnchor:"middle",verticalAnchor:h},k):s==="insideTopLeft"?dr({x:i+v,y:o+u,textAnchor:b,verticalAnchor:f},k):s==="insideTopRight"?dr({x:i+a-v,y:o+u,textAnchor:m,verticalAnchor:f},k):s==="insideBottomLeft"?dr({x:i+v,y:o+l-u,textAnchor:b,verticalAnchor:h},k):s==="insideBottomRight"?dr({x:i+a-v,y:o+l-u,textAnchor:m,verticalAnchor:h},k):s&&typeof s=="object"&&(Oe(s.x)||Fc(s.x))&&(Oe(s.y)||Fc(s.y))?dr({x:i+hi(s.x,a),y:o+hi(s.y,l),textAnchor:"end",verticalAnchor:"end"},k):dr({x:i+a/2,y:o+l/2,textAnchor:"middle",verticalAnchor:"middle"},k)},eIe=e=>"cx"in e&&Oe(e.cx);function Rs(e){var{offset:t=5}=e,r=jL(e,qRe),n=dr({offset:t},r),{viewBox:s,position:i,value:o,children:a,content:l,className:c="",textBreakAll:u,labelRef:h}=n,f=De(rK),p=rA(),v=i==="center"?p:f??p,m=s||v;if(!m||Rr(o)&&Rr(a)&&!g.isValidElement(l)&&typeof l!="function")return null;var b=dr(dr({},n),{},{viewBox:m});if(g.isValidElement(l)){var{labelRef:x}=b,w=jL(b,VRe);return g.cloneElement(l,w)}var _;if(typeof l=="function"){if(_=g.createElement(l,b),g.isValidElement(_))return _}else _=GRe(n);var j=eIe(m),k=nr(n,!0);if(j&&(i==="insideStart"||i==="insideEnd"||i==="end"))return JRe(n,_,k,m);var N=j?XRe(m,n.offset,n.position):QRe(n,m);return g.createElement(mw,fa({ref:h,className:ot("recharts-label",c)},k,N,{breakAll:u}),_)}Rs.displayName="Label";var gH=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:a,innerRadius:l,outerRadius:c,x:u,y:h,top:f,left:p,width:v,height:m,clockWise:b,labelViewBox:x}=e;if(x)return x;if(Oe(v)&&Oe(m)){if(Oe(u)&&Oe(h))return{x:u,y:h,width:v,height:m};if(Oe(f)&&Oe(p))return{x:f,y:p,width:v,height:m}}if(Oe(u)&&Oe(h))return{x:u,y:h,width:0,height:0};if(Oe(t)&&Oe(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:l||0,outerRadius:c||a||o||0,clockWise:b};if(e.viewBox)return e.viewBox},tIe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?g.createElement(Rs,fa({key:"label-implicit"},n)):Mo(e)?g.createElement(Rs,fa({key:"label-implicit",value:e},n)):g.isValidElement(e)?e.type===Rs?g.cloneElement(e,dr({key:"label-implicit"},n)):g.createElement(Rs,fa({key:"label-implicit",content:e},n)):mO(e)?g.createElement(Rs,fa({key:"label-implicit",content:e},n)):e&&typeof e=="object"?g.createElement(Rs,fa({},e,{key:"label-implicit"},n)):null},rIe=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n,labelRef:s}=e,i=gH(e),o=Dx(n,Rs).map((l,c)=>g.cloneElement(l,{viewBox:t||i,key:"label-".concat(c)}));if(!r)return o;var a=tIe(e.label,t||i,s);return[a,...o]};Rs.parseViewBox=gH;Rs.renderCallByParent=rIe;var yH={},vH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(vH);var bH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(bH);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vH,r=bH,n=Fx;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(yH);var nIe=yH.last;const sIe=io(nIe);var iIe=["valueAccessor"],oIe=["data","dataKey","clockWise","id","textBreakAll"];function Qb(){return Qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qb.apply(null,arguments)}function NL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function SL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NL(Object(r),!0).forEach(function(n){aIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aIe(e,t,r){return(t=lIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lIe(e){var t=cIe(e,"string");return typeof t=="symbol"?t:t+""}function cIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EL(e,t){if(e==null)return{};var r,n,s=uIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dIe=e=>Array.isArray(e.value)?sIe(e.value):e.value;function iu(e){var{valueAccessor:t=dIe}=e,r=EL(e,iIe),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:a}=r,l=EL(r,oIe);return!n||!n.length?null:g.createElement(gi,{className:"recharts-label-list"},n.map((c,u)=>{var h=Rr(s)?t(c,u):Kt(c&&c.payload,s),f=Rr(o)?{}:{id:"".concat(o,"-").concat(u)};return g.createElement(Rs,Qb({},nr(c,!0),l,f,{parentViewBox:c.parentViewBox,value:h,textBreakAll:a,viewBox:Rs.parseViewBox(Rr(i)?c:SL(SL({},c),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}iu.displayName="LabelList";function hIe(e,t){return e?e===!0?g.createElement(iu,{key:"labelList-implicit",data:t}):g.isValidElement(e)||mO(e)?g.createElement(iu,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?g.createElement(iu,Qb({data:t},e,{key:"labelList-implicit"})):null:null}function fIe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=Dx(n,iu).map((o,a)=>g.cloneElement(o,{data:t,key:"labelList-".concat(a)}));if(!r)return s;var i=hIe(e.label,t);return[i,...s]}iu.renderCallByParent=fIe;function i2(){return i2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i2.apply(null,arguments)}var xH=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=ot("recharts-dot",s);return t===+t&&r===+r&&n===+n?g.createElement("circle",i2({},nc(e),AT(e),{className:i,cx:t,cy:r,r:n})):null},wH=e=>e.graphicalItems.polarItems,pIe=X([Xt,Eg],VA),gO=X([wH,kr,pIe],WA),mIe=X([gO],KA),yO=X([mIe,PA],HA),gIe=X([yO,kr,gO],GA),yIe=X([yO,kr,gO],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(s=>{var i,o=Kt(n,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Kt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),CL=()=>{},vIe=X([kr,wK,CL,yIe,CL,_t,Xt],JA),_H=X([kr,_t,yO,gIe,Sg,Xt,vIe],XA),bIe=X([_H,kr,_f],tO);X([kr,_H,bIe,Xt],nO);var xIe={radiusAxis:{},angleAxis:{}},jH=Bs({name:"polarAxis",initialState:xIe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:hHe,removeRadiusAxis:fHe,addAngleAxis:pHe,removeAngleAxis:mHe}=jH.actions,wIe=jH.reducer;function TL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function AL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TL(Object(r),!0).forEach(function(n){_Ie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Ie(e,t,r){return(t=jIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jIe(e){var t=kIe(e,"string");return typeof t=="symbol"?t:t+""}function kIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NIe=(e,t)=>t,vO=X([wH,NIe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),SIe=[],bO=(e,t,r)=>(r==null?void 0:r.length)===0?SIe:r,kH=X([PA,vO,bO],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var s;if((t==null?void 0:t.data)!=null&&t.data.length>0?s=t.data:s=n,(!s||!s.length)&&r!=null&&(s=r.map(i=>AL(AL({},t.presentationProps),i.props))),s!=null)return s}}),EIe=X([kH,vO,bO],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,s)=>{var i,o=Kt(n,t.nameKey,t.name),a;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?a=r[s].props.fill:typeof n=="object"&&n!=null&&"fill"in n?a=n.fill:a=t.fill,{value:Yx(o,t.dataKey),color:a,payload:n,type:t.legendType}})}),CIe=X([kH,vO,bO,ln],(e,t,r,n)=>{if(!(t==null||e==null))return N4e({offset:n,pieSettings:t,displayedData:e,cells:r})}),NH={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((n=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&n.writable)?!1:r.toString()===`[object ${i}]`}let s=r;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(r)===s}e.isPlainObject=t})(NH);var TIe=NH.isPlainObject;const AIe=io(TIe);function e0(){return e0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e0.apply(null,arguments)}var OL=(e,t,r,n,s)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},OIe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},PIe=e=>{var t=ki(e,OIe),r=g.useRef(),[n,s]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var{x:i,y:o,upperWidth:a,lowerWidth:l,height:c,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isUpdateAnimationActive:v}=t;if(i!==+i||o!==+o||a!==+a||l!==+l||c!==+c||a===0&&l===0||c===0)return null;var m=ot("recharts-trapezoid",u);return v?g.createElement($b,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:c,x:i,y:o},to:{upperWidth:a,lowerWidth:l,height:c,x:i,y:o},duration:f,animationEasing:h,isActive:v},b=>{var{upperWidth:x,lowerWidth:w,height:_,x:j,y:k}=b;return g.createElement($b,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,easing:h},g.createElement("path",e0({},nr(t,!0),{className:m,d:OL(j,k,x,w,_),ref:r})))}):g.createElement("g",null,g.createElement("path",e0({},nr(t,!0),{className:m,d:OL(i,o,a,l,c)})))},RIe=["option","shapeType","propTransformer","activeClassName","isActive"];function IIe(e,t){if(e==null)return{};var r,n,s=DIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function DIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function PL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function t0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PL(Object(r),!0).forEach(function(n){LIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LIe(e,t,r){return(t=MIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MIe(e){var t=$Ie(e,"string");return typeof t=="symbol"?t:t+""}function $Ie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FIe(e,t){return t0(t0({},t),e)}function zIe(e,t){return e==="symbols"}function RL(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return g.createElement(GV,r);case"trapezoid":return g.createElement(PIe,r);case"sector":return g.createElement(XV,r);case"symbols":if(zIe(t))return g.createElement(LT,r);break;default:return null}}function UIe(e){return g.isValidElement(e)?e.props:e}function BIe(e){var{option:t,shapeType:r,propTransformer:n=FIe,activeClassName:s="recharts-active-shape",isActive:i}=e,o=IIe(e,RIe),a;if(g.isValidElement(t))a=g.cloneElement(t,t0(t0({},o),UIe(t)));else if(typeof t=="function")a=t(o);else if(AIe(t)&&typeof t!="boolean"){var l=n(t,o);a=g.createElement(RL,{shapeType:r,elementProps:l})}else{var c=o;a=g.createElement(RL,{shapeType:r,elementProps:c})}return i?g.createElement(gi,{className:s},a):a}var qIe=(e,t)=>{var r=ar();return(n,s)=>i=>{e==null||e(n,s,i),r(MK({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},VIe=e=>{var t=ar();return(r,n)=>s=>{e==null||e(r,n,s),t(VOe())}},WIe=(e,t)=>{var r=ar();return(n,s)=>i=>{e==null||e(n,s,i),r(WOe({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function SH(e){var{fn:t,args:r}=e,n=ar(),s=ji();return g.useEffect(()=>{if(!s){var i=t(r);return n(UOe(i)),()=>{n(BOe(i))}}},[t,r,n,s]),null}var EH=()=>{};function KIe(e){var{legendPayload:t}=e,r=ar(),n=ji();return g.useEffect(()=>n?EH:(r(LV(t)),()=>{r(MV(t))}),[r,n,t]),null}function HIe(e){var{legendPayload:t}=e,r=ar(),n=De(_t);return g.useEffect(()=>n!=="centric"&&n!=="radial"?EH:(r(LV(t)),()=>{r(MV(t))}),[r,n,t]),null}function CH(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=g.useRef(Nm(t)),n=g.useRef(e);return n.current!==e&&(r.current=Nm(t),n.current=e),r.current}var sk,ZIe=()=>{var[e]=g.useState(()=>Nm("uid-"));return e},GIe=(sk=g.useId)!==null&&sk!==void 0?sk:ZIe;function YIe(e,t){var r=GIe();return t||(e?"".concat(e,"-").concat(r):r)}var JIe=g.createContext(void 0),TH=e=>{var{id:t,type:r,children:n}=e,s=YIe("recharts-".concat(r),t);return g.createElement(JIe.Provider,{value:s},n(s))},XIe={cartesianItems:[],polarItems:[]},AH=Bs({name:"graphicalItems",initialState:XIe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=wa(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=wa(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=wa(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:QIe,replaceCartesianGraphicalItem:e4e,removeCartesianGraphicalItem:t4e,addPolarGraphicalItem:r4e,removePolarGraphicalItem:n4e}=AH.actions,s4e=AH.reducer;function i4e(e){var t=ar(),r=g.useRef(null);return g.useEffect(()=>{r.current===null?t(QIe(e)):r.current!==e&&t(e4e({prev:r.current,next:e})),r.current=e},[t,e]),g.useEffect(()=>()=>{r.current&&(t(t4e(r.current)),r.current=null)},[t]),null}function o4e(e){var t=ar();return g.useEffect(()=>(t(r4e(e)),()=>{t(n4e(e))}),[t,e]),null}function a4e(){}var l4e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},IL={t:0},ik={t:1};function OH(e){var t=ki(e,l4e),{isActive:r,canBegin:n,duration:s,easing:i,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=t,u=ZV("JavascriptAnimate",t.animationManager),[h,f]=g.useState(r?IL:ik),p=g.useRef(null);return g.useEffect(()=>{r||f(ik)},[r]),g.useEffect(()=>{if(!r||!n)return a4e;var v=HV(IL,ik,WV(i),s,f,u.getTimeoutController()),m=()=>{p.current=v()};return u.start([l,o,m,s,a]),()=>{u.stop(),p.current&&p.current(),a()}},[r,n,s,i,o,l,a,u]),c(h.t)}var c4e=["onMouseEnter","onClick","onMouseLeave"],u4e=["id"],d4e=["id"];function xO(e,t){if(e==null)return{};var r,n,s=h4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function h4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function DL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DL(Object(r),!0).forEach(function(n){f4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f4e(e,t,r){return(t=p4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p4e(e){var t=m4e(e,"string");return typeof t=="symbol"?t:t+""}function m4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Da(){return Da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Da.apply(null,arguments)}function g4e(e){var t=g.useMemo(()=>Dx(e.children,pw),[e.children]),r=De(n=>EIe(n,e.id,t));return r==null?null:g.createElement(HIe,{legendPayload:r})}function y4e(e){var{dataKey:t,nameKey:r,sectors:n,stroke:s,strokeWidth:i,fill:o,name:a,hide:l,tooltipType:c}=e;return{dataDefinedOnItem:n==null?void 0:n.map(u=>u.tooltipPayload),positions:n==null?void 0:n.map(u=>u.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:Yx(a,t),hide:l,type:c,color:o,unit:""}}}var v4e=(e,t)=>e>t?"start":e<t?"end":"middle",b4e=(e,t,r)=>typeof t=="function"?t(e):hi(t,r,r*.8),x4e=(e,t,r)=>{var{top:n,left:s,width:i,height:o}=t,a=SV(i,o),l=s+hi(e.cx,i,i/2),c=n+hi(e.cy,o,o/2),u=hi(e.innerRadius,a,0),h=b4e(r,e.outerRadius,a),f=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:h,maxRadius:f}},w4e=(e,t)=>{var r=Pn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},_4e=(e,t)=>{if(g.isValidElement(e))return g.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ot("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return g.createElement(aA,Da({},t,{type:"linear",className:r}))},j4e=(e,t,r)=>{if(g.isValidElement(e))return g.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),g.isValidElement(n)))return n;var s=ot("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return g.createElement(mw,Da({},t,{alignmentBaseline:"middle",className:s}),n)};function k4e(e){var{sectors:t,props:r,showLabels:n}=e,{label:s,labelLine:i,dataKey:o}=r;if(!n||!s||!t)return null;var a=nc(r),l=nr(s,!1),c=nr(i,!1),u=typeof s=="object"&&"offsetRadius"in s&&s.offsetRadius||20,h=t.map((f,p)=>{var v=(f.startAngle+f.endAngle)/2,m=Pr(f.cx,f.cy,f.outerRadius+u,v),b=fr(fr(fr(fr({},a),f),{},{stroke:"none"},l),{},{index:p,textAnchor:v4e(m.x,f.cx)},m),x=fr(fr(fr(fr({},a),f),{},{fill:"none",stroke:f.fill},c),{},{index:p,points:[Pr(f.cx,f.cy,f.outerRadius,v),m],key:"line"});return g.createElement(gi,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(p)},i&&_4e(i,x),j4e(s,b,Kt(f,o)))});return g.createElement(gi,{className:"recharts-pie-labels"},h)}function PH(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:s,showLabels:i}=e,o=De(Uh),{onMouseEnter:a,onClick:l,onMouseLeave:c}=s,u=xO(s,c4e),h=qIe(a,s.dataKey),f=VIe(c),p=WIe(l,s.dataKey);return t==null?null:g.createElement(g.Fragment,null,t.map((v,m)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&t.length!==1)return null;var b=r&&String(m)===o,x=o?n:null,w=b?r:x,_=fr(fr({},v),{},{stroke:v.stroke,tabIndex:-1,[OV]:m,[PV]:s.dataKey});return g.createElement(gi,Da({tabIndex:-1,className:"recharts-pie-sector"},OT(u,v,m),{onMouseEnter:h(v,m),onMouseLeave:f(v,m),onClick:p(v,m),key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(m)}),g.createElement(BIe,Da({option:w,isActive:b,shapeType:"sector"},_)))}),g.createElement(k4e,{sectors:t,props:s,showLabels:i}))}function N4e(e){var t,{pieSettings:r,displayedData:n,cells:s,offset:i}=e,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:h}=r,f=Math.abs(r.minAngle),p=w4e(a,l),v=Math.abs(p),m=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(N=>Kt(N,c,0)!==0).length,x=(v>=360?b:b-1)*m,w=v-b*f-x,_=n.reduce((N,S)=>{var E=Kt(S,c,0);return N+(Oe(E)?E:0)},0),j;if(_>0){var k;j=n.map((N,S)=>{var E=Kt(N,c,0),T=Kt(N,u,S),P=x4e(r,i,N),O=(Oe(E)?E:0)/_,R,I=fr(fr({},N),s&&s[S]&&s[S].props);S?R=k.endAngle+Pn(p)*m*(E!==0?1:0):R=a;var M=R+Pn(p)*((E!==0?f:0)+O*w),z=(R+M)/2,W=(P.innerRadius+P.outerRadius)/2,q=[{name:T,value:E,payload:I,dataKey:c,type:h}],Y=Pr(P.cx,P.cy,W,z);return k=fr(fr(fr(fr({},r.presentationProps),{},{percent:O,cornerRadius:o,name:T,tooltipPayload:q,midAngle:z,middleRadius:W,tooltipPosition:Y},I),P),{},{value:Kt(N,c),startAngle:R,endAngle:M,payload:I,paddingAngle:Pn(p)*m}),k})}return j}function S4e(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:a,activeShape:l,inactiveShape:c,onAnimationStart:u,onAnimationEnd:h}=t,f=CH(t,"recharts-pie-"),p=r.current,[v,m]=g.useState(!0),b=g.useCallback(()=>{typeof h=="function"&&h(),m(!1)},[h]),x=g.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return g.createElement(OH,{begin:i,duration:o,isActive:s,easing:a,onAnimationStart:x,onAnimationEnd:b,key:f},w=>{var _=[],j=n&&n[0],k=j.startAngle;return n.forEach((N,S)=>{var E=p&&p[S],T=S>0?Wl(N,"paddingAngle",0):0;if(E){var P=n3(E.endAngle-E.startAngle,N.endAngle-N.startAngle),O=fr(fr({},N),{},{startAngle:k+T,endAngle:k+P(w)+T});_.push(O),k=O.endAngle}else{var{endAngle:R,startAngle:I}=N,M=n3(0,R-I),z=M(w),W=fr(fr({},N),{},{startAngle:k+T,endAngle:k+z+T});_.push(W),k=W.endAngle}}),r.current=_,g.createElement(gi,null,g.createElement(PH,{sectors:_,activeShape:l,inactiveShape:c,allOtherPieProps:t,showLabels:!v}))})}function E4e(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:s}=e,i=g.useRef(null),o=i.current;return r&&t&&t.length&&(!o||o!==t)?g.createElement(S4e,{props:e,previousSectorsRef:i}):g.createElement(PH,{sectors:t,activeShape:n,inactiveShape:s,allOtherPieProps:e,showLabels:!0})}function C4e(e){var{hide:t,className:r,rootTabIndex:n}=e,s=ot("recharts-pie",r);return t?null:g.createElement(gi,{tabIndex:n,className:s},g.createElement(E4e,e))}var T4e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!gf.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function A4e(e){var{id:t}=e,r=xO(e,u4e),n=g.useMemo(()=>Dx(e.children,pw),[e.children]),s=De(i=>CIe(i,t,n));return g.createElement(g.Fragment,null,g.createElement(SH,{fn:y4e,args:fr(fr({},e),{},{sectors:s})}),g.createElement(C4e,Da({},r,{sectors:s})))}function RH(e){var t=ki(e,T4e),{id:r}=t,n=xO(t,d4e),s=nc(n);return g.createElement(TH,{id:r,type:"pie"},i=>g.createElement(g.Fragment,null,g.createElement(o4e,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s}),g.createElement(g4e,Da({},n,{id:i})),g.createElement(A4e,Da({},n,{id:i})),n.children))}RH.displayName="Pie";var O4e=X([ln],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),P4e=X([O4e,Ba,qa],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),wO=()=>De(P4e),R4e=()=>De(PPe);function LL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ML(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LL(Object(r),!0).forEach(function(n){I4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I4e(e,t,r){return(t=D4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D4e(e){var t=L4e(e,"string");return typeof t=="symbol"?t:t+""}function L4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M4e=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=ML(ML({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},nr(s,!1)),AT(s)),a;return g.isValidElement(s)?a=g.cloneElement(s,o):typeof s=="function"?a=s(o):a=g.createElement(xH,o),g.createElement(gi,{className:"recharts-active-dot"},a)};function $4e(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=De(Uh),o=R4e();if(t==null||o==null)return null;var a=t.find(l=>o.includes(l.payload));return Rr(a)?null:M4e({point:a,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var F4e={},IH=Bs({name:"errorBars",initialState:F4e,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:gHe,removeErrorBar:yHe}=IH.actions,z4e=IH.reducer,U4e=["children"];function B4e(e,t){if(e==null)return{};var r,n,s=q4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function q4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var V4e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},W4e=g.createContext(V4e);function K4e(e){var{children:t}=e,r=B4e(e,U4e);return g.createElement(W4e.Provider,{value:r},t)}function DH(e,t){var r,n,s=De(c=>Wa(c,e)),i=De(c=>lc(c,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Es.allowDataOverflow,a=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Cs.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function H4e(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=wO(),{needClipX:i,needClipY:o,needClip:a}=DH(t,r);if(!a)return null;var{x:l,y:c,width:u,height:h}=s;return g.createElement("clipPath",{id:"clipPath-".concat(n)},g.createElement("rect",{x:i?l:l-u/2,y:o?c:c-h/2,width:i?u:u*2,height:o?h:h*2}))}var LH=e=>{var{chartData:t}=e,r=ar(),n=ji();return g.useEffect(()=>n?()=>{}:(r(oL(t)),()=>{r(oL(void 0))}),[t,r,n]),null},$L={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},MH=Bs({name:"brush",initialState:$L,reducers:{setBrushSettings(e,t){return t.payload==null?$L:t.payload}}}),{setBrushSettings:vHe}=MH.actions,Z4e=MH.reducer;function G4e(e,t,r){return(t=Y4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y4e(e){var t=J4e(e,"string");return typeof t=="symbol"?t:t+""}function J4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _O{static create(t){return new _O(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}G4e(_O,"EPS",1e-4);function X4e(e){return(e%180+180)%180}var Q4e=function(e){var{width:t,height:r}=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=X4e(n),i=s*Math.PI/180,o=Math.atan(r/t),a=i>o&&i<Math.PI-o?r/Math.sin(i):t/Math.cos(i);return Math.abs(a)},eDe={dots:[],areas:[],lines:[]},$H=Bs({name:"referenceElements",initialState:eDe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=wa(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=wa(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=wa(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:bHe,removeDot:xHe,addArea:wHe,removeArea:_He,addLine:jHe,removeLine:kHe}=$H.actions,tDe=$H.reducer,rDe=g.createContext(void 0),nDe=e=>{var{children:t}=e,[r]=g.useState("".concat(Nm("recharts"),"-clip")),n=wO();if(n==null)return null;var{x:s,y:i,width:o,height:a}=n;return g.createElement(rDe.Provider,{value:r},g.createElement("defs",null,g.createElement("clipPath",{id:r},g.createElement("rect",{x:s,y:i,height:a,width:o}))),t)};function ok(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function FH(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function sDe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Q4e(n,r)}function iDe(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:a}=e;return t===1?{start:n?s:i,end:n?s+o:i+a}:{start:n?s+o:i+a,end:n?s:i}}function r0(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function oDe(e,t){return FH(e,t+1)}function aDe(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:a}=t,l=0,c=1,u=o,h=function(){var p=n==null?void 0:n[l];if(p===void 0)return{v:FH(n,c)};var v=l,m,b=()=>(m===void 0&&(m=r(p,v)),m),x=p.coordinate,w=l===0||r0(e,x,b,u,a);w||(l=0,u=o,c+=1),w&&(u=x+e*(b()/2+s),l+=c)},f;c<=i.length;)if(f=h(),f)return f.v;return[]}function FL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FL(Object(r),!0).forEach(function(n){lDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lDe(e,t,r){return(t=cDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cDe(e){var t=uDe(e,"string");return typeof t=="symbol"?t:t+""}function uDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dDe(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:a}=t,{end:l}=t,c=function(h){var f=i[h],p,v=()=>(p===void 0&&(p=r(f,h)),p);if(h===o-1){var m=e*(f.coordinate+e*v()/2-l);i[h]=f=Nn(Nn({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else i[h]=f=Nn(Nn({},f),{},{tickCoord:f.coordinate});var b=r0(e,f.tickCoord,v,a,l);b&&(l=f.tickCoord-e*(v()/2+s),i[h]=Nn(Nn({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function hDe(e,t,r,n,s,i){var o=(n||[]).slice(),a=o.length,{start:l,end:c}=t;if(i){var u=n[a-1],h=r(u,a-1),f=e*(u.coordinate+e*h/2-c);o[a-1]=u=Nn(Nn({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=r0(e,u.tickCoord,()=>h,l,c);p&&(c=u.tickCoord-e*(h/2+s),o[a-1]=Nn(Nn({},u),{},{isShow:!0}))}for(var v=i?a-1:a,m=function(x){var w=o[x],_,j=()=>(_===void 0&&(_=r(w,x)),_);if(x===0){var k=e*(w.coordinate-e*j()/2-l);o[x]=w=Nn(Nn({},w),{},{tickCoord:k<0?w.coordinate-k*e:w.coordinate})}else o[x]=w=Nn(Nn({},w),{},{tickCoord:w.coordinate});var N=r0(e,w.tickCoord,j,l,c);N&&(l=w.tickCoord+e*(j()/2+s),o[x]=Nn(Nn({},w),{},{isShow:!0}))},b=0;b<v;b++)m(b);return o}function jO(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:u,angle:h}=e;if(!s||!s.length||!n)return[];if(Oe(l)||gf.isSsr){var f;return(f=oDe(s,Oe(l)?l:0))!==null&&f!==void 0?f:[]}var p=[],v=a==="top"||a==="bottom"?"width":"height",m=u&&v==="width"?Zp(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(_,j)=>{var k=typeof c=="function"?c(_.value,j):_.value;return v==="width"?sDe(Zp(k,{fontSize:t,letterSpacing:r}),m,h):Zp(k,{fontSize:t,letterSpacing:r})[v]},x=s.length>=2?Pn(s[1].coordinate-s[0].coordinate):1,w=iDe(i,x,v);return l==="equidistantPreserveStart"?aDe(x,w,b,s,o):(l==="preserveStart"||l==="preserveStartEnd"?p=hDe(x,w,b,s,o,l==="preserveStartEnd"):p=dDe(x,w,b,s,o),p.filter(_=>_.isShow))}var fDe=["viewBox"],pDe=["viewBox"];function Fd(){return Fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fd.apply(null,arguments)}function zL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zL(Object(r),!0).forEach(function(n){kO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UL(e,t){if(e==null)return{};var r,n,s=mDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kO(e,t,r){return(t=gDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gDe(e){var t=yDe(e,"string");return typeof t=="symbol"?t:t+""}function yDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class cc extends g.Component{constructor(t){super(t),this.tickRefs=g.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=UL(t,fDe),i=this.props,{viewBox:o}=i,a=UL(i,pDe);return!ok(n,o)||!ok(s,a)||!ok(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:a,mirror:l,tickMargin:c}=this.props,u,h,f,p,v,m,b=l?-1:1,x=t.tickSize||a,w=Oe(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=h=t.coordinate,p=n+ +!l*i,f=p-b*x,m=f-b*c,v=w;break;case"left":f=p=t.coordinate,h=r+ +!l*s,u=h-b*x,v=u-b*c,m=w;break;case"right":f=p=t.coordinate,h=r+ +l*s,u=h+b*x,v=u+b*c,m=w;break;default:u=h=t.coordinate,p=n+ +l*i,f=p+b*x,m=f+b*c,v=w;break}return{line:{x1:u,y1:f,x2:h,y2:p},tick:{x:v,y:m}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:a}=this.props,l=zr(zr(zr({},nr(this.props,!1)),nr(a,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var c=+(i==="top"&&!o||i==="bottom"&&o);l=zr(zr({},l),{},{x1:t,y1:r+c*s,x2:t+n,y2:r+c*s})}else{var u=+(i==="left"&&!o||i==="right"&&o);l=zr(zr({},l),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+s})}return g.createElement("line",Fd({},l,{className:ot("recharts-cartesian-axis-line",Wl(a,"className"))}))}static renderTickItem(t,r,n){var s,i=ot(r.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))s=g.cloneElement(t,zr(zr({},r),{},{className:i}));else if(typeof t=="function")s=t(zr(zr({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=ot(o,t.className)),s=g.createElement(mw,Fd({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:a,unit:l,padding:c}=this.props,u=jO(zr(zr({},this.props),{},{ticks:n}),t,r),h=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),p=nc(this.props),v=nr(o,!1),m=zr(zr({},p),{},{fill:"none"},nr(s,!1)),b=u.map((x,w)=>{var{line:_,tick:j}=this.getTickLineCoord(x),k=zr(zr(zr(zr({textAnchor:h,verticalAnchor:f},p),{},{stroke:"none",fill:i},v),j),{},{index:w,payload:x,visibleTicksCount:u.length,tickFormatter:a,padding:c});return g.createElement(gi,Fd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},OT(this.props,x,w)),s&&g.createElement("line",Fd({},m,_,{className:ot("recharts-cartesian-axis-tick-line",Wl(s,"className"))})),o&&cc.renderTickItem(o,k,"".concat(typeof a=="function"?a(x.value,w):x.value).concat(l||"")))});return b.length>0?g.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:g.createElement(gi,{className:ot("recharts-cartesian-axis",s),ref:a=>{if(a){var l=a.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var c=l[0];if(c){var u=window.getComputedStyle(c).fontSize,h=window.getComputedStyle(c).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Rs.renderCallByParent(this.props))}}kO(cc,"displayName","CartesianAxis");kO(cc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var vDe=["x1","y1","x2","y2","key"],bDe=["offset"],xDe=["xAxisId","yAxisId"],wDe=["xAxisId","yAxisId"];function BL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BL(Object(r),!0).forEach(function(n){_De(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _De(e,t,r){return(t=jDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jDe(e){var t=kDe(e,"string");return typeof t=="symbol"?t:t+""}function kDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qc(){return qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qc.apply(null,arguments)}function n0(e,t){if(e==null)return{};var r,n,s=NDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var SDe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:a}=e;return g.createElement("rect",{x:n,y:s,ry:a,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function zH(e,t){var r;if(g.isValidElement(e))r=g.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:a}=t,l=n0(t,vDe),c=nc(l),{offset:u}=c,h=n0(c,bDe);r=g.createElement("line",qc({},h,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:a}))}return r}function EDe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,a=n0(e,xDe),l=s.map((c,u)=>{var h=En(En({},a),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(u),index:u});return zH(n,h)});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function CDe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,a=n0(e,wDe),l=s.map((c,u)=>{var h=En(En({},a),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(u),index:u});return zH(n,h)});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function TDe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:a,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var c=a.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==c[0]&&c.unshift(0);var u=c.map((h,f)=>{var p=!c[f+1],v=p?s+o-h:c[f+1]-h;if(v<=0)return null;var m=f%t.length;return g.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:v,width:i,stroke:"none",fill:t[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function ADe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:a,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==c[0]&&c.unshift(0);var u=c.map((h,f)=>{var p=!c[f+1],v=p?s+o-h:c[f+1]-h;if(v<=0)return null;var m=f%r.length;return g.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:v,height:a,stroke:"none",fill:r[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var ODe=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return CV(jO(En(En(En({},cc.defaultProps),r),{},{ticks:TV(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},PDe=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return CV(jO(En(En(En({},cc.defaultProps),r),{},{ticks:TV(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},RDe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function UH(e){var t=nA(),r=sA(),n=IV(),s=En(En({},ki(e,RDe)),{},{x:Oe(e.x)?e.x:n.left,y:Oe(e.y)?e.y:n.top,width:Oe(e.width)?e.width:n.width,height:Oe(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:a,y:l,width:c,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:p}=s,v=ji(),m=De(T=>X5(T,"xAxis",i,v)),b=De(T=>X5(T,"yAxis",o,v));if(!Oe(c)||c<=0||!Oe(u)||u<=0||!Oe(a)||a!==+a||!Oe(l)||l!==+l)return null;var x=s.verticalCoordinatesGenerator||ODe,w=s.horizontalCoordinatesGenerator||PDe,{horizontalPoints:_,verticalPoints:j}=s;if((!_||!_.length)&&typeof w=="function"){var k=f&&f.length,N=w({yAxis:b?En(En({},b),{},{ticks:k?f:b.ticks}):void 0,width:t,height:r,offset:n},k?!0:h);Hp(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(_=N)}if((!j||!j.length)&&typeof x=="function"){var S=p&&p.length,E=x({xAxis:m?En(En({},m),{},{ticks:S?p:m.ticks}):void 0,width:t,height:r,offset:n},S?!0:h);Hp(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(j=E)}return g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(SDe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),g.createElement(TDe,qc({},s,{horizontalPoints:_})),g.createElement(ADe,qc({},s,{verticalPoints:j})),g.createElement(EDe,qc({},s,{offset:n,horizontalPoints:_,xAxis:m,yAxis:b})),g.createElement(CDe,qc({},s,{offset:n,verticalPoints:j,xAxis:m,yAxis:b})))}UH.displayName="CartesianGrid";var BH=(e,t,r,n)=>OK(e,"xAxis",t,n),qH=(e,t,r,n)=>AK(e,"xAxis",t,n),VH=(e,t,r,n)=>OK(e,"yAxis",r,n),WH=(e,t,r,n)=>AK(e,"yAxis",r,n),IDe=X([_t,BH,VH,qH,WH],(e,t,r,n,s)=>sc(e,"xAxis")?DS(t,n,!1):DS(r,s,!1)),DDe=(e,t,r,n,s)=>s;function LDe(e){return e.type==="line"}var MDe=X([oK,DDe],(e,t)=>e.filter(LDe).find(r=>r.id===t)),$De=X([_t,BH,VH,qH,WH,MDe,IDe,RA],(e,t,r,n,s,i,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=a;if(!(i==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:h,data:f}=i,p;if(f!=null&&f.length>0?p=f:p=l==null?void 0:l.slice(c,u+1),p!=null)return i3e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:h,bandSize:o,displayedData:p})}}),FDe=["id"],zDe=["type","layout","connectNulls","needClip"],UDe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function qL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qL(Object(r),!0).forEach(function(n){BDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BDe(e,t,r){return(t=qDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qDe(e){var t=VDe(e,"string");return typeof t=="symbol"?t:t+""}function VDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NO(e,t){if(e==null)return{};var r,n,s=WDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function xu(){return xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xu.apply(null,arguments)}var KDe=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Yx(r,t),payload:e}]};function HDe(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:a,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Yx(o,t),hide:a,type:e.tooltipType,color:e.stroke,unit:l}}}var KH=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function ZDe(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var GDe=(e,t,r)=>{var n=r.reduce((h,f)=>h+f);if(!n)return KH(t,e);for(var s=Math.floor(e/n),i=e%n,o=t-e,a=[],l=0,c=0;l<r.length;c+=r[l],++l)if(c+r[l]>i){a=[...r.slice(0,l),i-c];break}var u=a.length%2===0?[0,o]:[o];return[...ZDe(r,s),...a,...u].map(h=>"".concat(h,"px")).join(", ")};function YDe(e,t){var r;if(g.isValidElement(e))r=g.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=ot("recharts-line-dot",typeof e!="boolean"?e.className:"");r=g.createElement(xH,xu({},t,{className:n}))}return r}function JDe(e,t){return e==null?!1:t?!0:e.length===1}function XDe(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:i,needClip:o}=n;if(!JDe(r,s))return null;var{id:a}=n,l=NO(n,FDe),c=h9(s),u=nc(l),h=nr(s,!0),f=r.map((v,m)=>{var b=Bi(Bi(Bi({key:"dot-".concat(m),r:3},u),h),{},{index:m,cx:v.x,cy:v.y,dataKey:i,value:v.value,payload:v.payload,points:r});return YDe(s,b)}),p={clipPath:o?"url(#clipPath-".concat(c?"":"dots-").concat(t,")"):void 0};return g.createElement(gi,xu({className:"recharts-line-dots",key:"dots"},p),f)}function o2(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:i,showLabels:o}=e,{type:a,layout:l,connectNulls:c,needClip:u}=i,h=NO(i,zDe),f=Bi(Bi({},nr(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:a,layout:l,connectNulls:c,strokeDasharray:s??i.strokeDasharray});return g.createElement(g.Fragment,null,(n==null?void 0:n.length)>1&&g.createElement(aA,xu({},f,{pathRef:r})),g.createElement(XDe,{points:n,clipPathId:t,props:i}),o&&iu.renderCallByParent(i,n))}function QDe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function e3e(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:h,animateNewValues:f,width:p,height:v,onAnimationEnd:m,onAnimationStart:b}=r,x=s.current,w=CH(r,"recharts-line-"),[_,j]=g.useState(!1),k=g.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),N=g.useCallback(()=>{typeof b=="function"&&b(),j(!0)},[b]),S=QDe(n.current),E=i.current;return g.createElement(OH,{begin:c,duration:u,isActive:l,easing:h,onAnimationEnd:k,onAnimationStart:N,key:w},T=>{var P=Xf(E,S+E,T),O=Math.min(P,S),R;if(a){var I="".concat(a).split(/[,\s]+/gim).map(W=>parseFloat(W));R=GDe(O,S,I)}else R=KH(S,O);if(x){var M=x.length/o.length,z=T===1?o:o.map((W,q)=>{var Y=Math.floor(q*M);if(x[Y]){var L=x[Y];return Bi(Bi({},W),{},{x:Xf(L.x,W.x,T),y:Xf(L.y,W.y,T)})}return f?Bi(Bi({},W),{},{x:Xf(p*2,W.x,T),y:Xf(v/2,W.y,T)}):Bi(Bi({},W),{},{x:W.x,y:W.y})});return s.current=z,g.createElement(o2,{props:r,points:z,clipPathId:t,pathRef:n,showLabels:!_,strokeDasharray:R})}return T>0&&S>0&&(s.current=o,i.current=O),g.createElement(o2,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!_,strokeDasharray:R})})}function t3e(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:s}=r,i=g.useRef(null),o=g.useRef(0),a=g.useRef(null),l=i.current;return s&&n&&n.length&&l!==n?g.createElement(e3e,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:a}):g.createElement(o2,{props:r,points:n,clipPathId:t,pathRef:a,showLabels:!0})}var r3e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Kt(e.payload,t)});class n3e extends g.Component{render(){var t,{hide:r,dot:n,points:s,className:i,xAxisId:o,yAxisId:a,top:l,left:c,width:u,height:h,id:f,needClip:p}=this.props;if(r)return null;var v=ot("recharts-line",i),m=f,{r:b=3,strokeWidth:x=2}=(t=nr(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=h9(n),_=b*2+x;return g.createElement(g.Fragment,null,g.createElement(gi,{className:v},p&&g.createElement("defs",null,g.createElement(H4e,{clipPathId:m,xAxisId:o,yAxisId:a}),!w&&g.createElement("clipPath",{id:"clipPath-dots-".concat(m)},g.createElement("rect",{x:c-_/2,y:l-_/2,width:u+_,height:h+_}))),g.createElement(t3e,{props:this.props,clipPathId:m}),g.createElement(K4e,{xAxisId:o,yAxisId:a,data:s,dataPointFormatter:r3e,errorBarOffset:0},this.props.children)),g.createElement($4e,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var HH={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!gf.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function s3e(e){var t=ki(e,HH),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:u,label:h,legendType:f,xAxisId:p,yAxisId:v,id:m}=t,b=NO(t,UDe),{needClip:x}=DH(p,v),w=wO(),_=iA(),j=ji(),k=De(P=>$De(P,p,v,j,m));if(_!=="horizontal"&&_!=="vertical"||k==null||w==null)return null;var{height:N,width:S,x:E,y:T}=w;return g.createElement(n3e,xu({},b,{id:m,connectNulls:a,dot:l,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:c,label:h,legendType:f,xAxisId:p,yAxisId:v,points:k,layout:_,height:N,width:S,left:E,top:T,needClip:x}))}function i3e(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:a,displayedData:l}=e;return l.map((c,u)=>{var h=Kt(c,o);if(t==="horizontal"){var f=U3({axis:r,ticks:s,bandSize:a,entry:c,index:u}),p=Rr(h)?null:n.scale(h);return{x:f,y:p,value:h,payload:c}}var v=Rr(h)?null:r.scale(h),m=U3({axis:n,ticks:i,bandSize:a,entry:c,index:u});return v==null||m==null?null:{x:v,y:m,value:h,payload:c}}).filter(Boolean)}function ZH(e){var t=ki(e,HH),r=ji();return g.createElement(TH,{id:t.id,type:"line"},n=>g.createElement(g.Fragment,null,g.createElement(KIe,{legendPayload:KDe(t)}),g.createElement(SH,{fn:HDe,args:t}),g.createElement(i4e,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),g.createElement(s3e,xu({},t,{id:n}))))}ZH.displayName="Line";function VL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VL(Object(r),!0).forEach(function(n){o3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o3e(e,t,r){return(t=a3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a3e(e){var t=l3e(e,"string");return typeof t=="symbol"?t:t+""}function l3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c3e={xAxis:{},yAxis:{},zAxis:{}},GH=Bs({name:"cartesianAxis",initialState:c3e,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=WL(WL({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:u3e,removeXAxis:d3e,addYAxis:h3e,removeYAxis:f3e,addZAxis:NHe,removeZAxis:SHe,updateYAxisWidth:p3e}=GH.actions,m3e=GH.reducer,g3e=["children"],y3e=["dangerouslySetInnerHTML","ticks"];function YH(e,t,r){return(t=v3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v3e(e){var t=b3e(e,"string");return typeof t=="symbol"?t:t+""}function b3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a2(){return a2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a2.apply(null,arguments)}function JH(e,t){if(e==null)return{};var r,n,s=x3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function x3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function w3e(e){var t=ar(),r=g.useMemo(()=>{var{children:i}=e,o=JH(e,g3e);return o},[e]),n=De(i=>Wa(i,r.id)),s=r===n;return g.useEffect(()=>(t(u3e(r)),()=>{t(d3e(r))}),[r,t]),s?e.children:null}var _3e=e=>{var{xAxisId:t,className:r}=e,n=De(RV),s=ji(),i="xAxis",o=De(p=>jf(p,i,t,s)),a=De(p=>TK(p,i,t,s)),l=De(p=>SOe(p,t)),c=De(p=>OOe(p,t));if(l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=e,f=JH(e,y3e);return g.createElement(cc,a2({},f,{scale:o,x:c.x,y:c.y,width:l.width,height:l.height,className:ot("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:a}))},j3e=e=>{var t,r,n,s,i;return g.createElement(w3e,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},g.createElement(_3e,e))};class SO extends g.Component{render(){return g.createElement(j3e,this.props)}}YH(SO,"displayName","XAxis");YH(SO,"defaultProps",{allowDataOverflow:Es.allowDataOverflow,allowDecimals:Es.allowDecimals,allowDuplicatedCategory:Es.allowDuplicatedCategory,height:Es.height,hide:!1,mirror:Es.mirror,orientation:Es.orientation,padding:Es.padding,reversed:Es.reversed,scale:Es.scale,tickCount:Es.tickCount,type:Es.type,xAxisId:0});var k3e=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var a=r?r.getBoundingClientRect().width:0,l=s+i,c=o+l+a+(r?n:0);return Math.round(c)}return 0},N3e=["dangerouslySetInnerHTML","ticks"];function XH(e,t,r){return(t=S3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S3e(e){var t=E3e(e,"string");return typeof t=="symbol"?t:t+""}function E3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l2.apply(null,arguments)}function C3e(e,t){if(e==null)return{};var r,n,s=T3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function T3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function A3e(e){var t=ar();return g.useEffect(()=>(t(h3e(e)),()=>{t(f3e(e))}),[e,t]),null}var O3e=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=g.useRef(null),a=g.useRef(null),l=De(RV),c=ji(),u=ar(),h="yAxis",f=De(_=>jf(_,h,r,c)),p=De(_=>ROe(_,r)),v=De(_=>POe(_,r)),m=De(_=>TK(_,h,r,c));if(g.useLayoutEffect(()=>{var _;if(!(s!=="auto"||!p||mO(i)||g.isValidElement(i))){var j=o.current,k=j==null||(_=j.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:N,tickMargin:S}=j.props,E=k3e({ticks:k,label:a.current,labelGapWithTick:5,tickSize:N,tickMargin:S});Math.round(p.width)!==Math.round(E)&&u(p3e({id:r,width:E}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,u,i,r,s]),p==null||v==null)return null;var{dangerouslySetInnerHTML:b,ticks:x}=e,w=C3e(e,N3e);return g.createElement(cc,l2({},w,{ref:o,labelRef:a,scale:f,x:v.x,y:v.y,width:p.width,height:p.height,className:ot("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:m}))},P3e=e=>{var t,r,n,s,i;return g.createElement(g.Fragment,null,g.createElement(A3e,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),g.createElement(O3e,e))},R3e={allowDataOverflow:Cs.allowDataOverflow,allowDecimals:Cs.allowDecimals,allowDuplicatedCategory:Cs.allowDuplicatedCategory,hide:!1,mirror:Cs.mirror,orientation:Cs.orientation,padding:Cs.padding,reversed:Cs.reversed,scale:Cs.scale,tickCount:Cs.tickCount,type:Cs.type,width:Cs.width,yAxisId:0};class EO extends g.Component{render(){return g.createElement(P3e,this.props)}}XH(EO,"displayName","YAxis");XH(EO,"defaultProps",R3e);var ak={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KL;function I3e(){if(KL)return ak;KL=1;var e=ee;function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,a=e.useDebugValue;return ak.useSyncExternalStoreWithSelector=function(l,c,u,h,f){var p=s(null);if(p.current===null){var v={hasValue:!1,value:null};p.current=v}else v=p.current;p=o(function(){function b(k){if(!x){if(x=!0,w=k,k=h(k),f!==void 0&&v.hasValue){var N=v.value;if(f(N,k))return _=N}return _=k}if(N=_,r(w,k))return N;var S=h(k);return f!==void 0&&f(N,S)?(w=k,N):(w=k,_=S)}var x=!1,w,_,j=u===void 0?null:u;return[function(){return b(c())},j===null?void 0:function(){return b(j())}]},[c,u,h,f]);var m=n(l,p[0],p[1]);return i(function(){v.hasValue=!0,v.value=m},[m]),a(m),m},ak}I3e();function D3e(e){e()}function L3e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){D3e(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var HL={notify(){},get:()=>[]};function M3e(e,t){let r,n=HL,s=0,i=!1;function o(m){u();const b=n.subscribe(m);let x=!1;return()=>{x||(x=!0,b(),h())}}function a(){n.notify()}function l(){v.onStateChange&&v.onStateChange()}function c(){return i}function u(){s++,r||(r=e.subscribe(l),n=L3e())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=HL)}function f(){i||(i=!0,u())}function p(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>n};return v}var $3e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",F3e=$3e(),z3e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",U3e=z3e(),B3e=()=>F3e||U3e?g.useLayoutEffect:g.useEffect,q3e=B3e(),ZL=Symbol.for("react-redux-context"),GL=typeof globalThis<"u"?globalThis:{};function V3e(){if(!g.createContext)return{};const e=GL[ZL]??(GL[ZL]=new Map);let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var W3e=V3e();function K3e(e){const{children:t,context:r,serverState:n,store:s}=e,i=g.useMemo(()=>{const l=M3e(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),o=g.useMemo(()=>s.getState(),[s]);q3e(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,o]);const a=r||W3e;return g.createElement(a.Provider,{value:i},t)}var H3e=K3e,Z3e=(e,t)=>t,CO=X([Z3e,_t,rK,Jr,KK,Ka,FPe,ln],VPe),TO=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},QH=yi("mouseClick"),eZ=wg();eZ.startListening({actionCreator:QH,effect:(e,t)=>{var r=e.payload,n=CO(t.getState(),TO(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(KOe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var c2=yi("mouseMove"),tZ=wg();tZ.startListening({actionCreator:c2,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=oO(n,n.tooltip.settings.shared),i=CO(n,TO(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(FK({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch($K()))}});function G3e(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var YL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},rZ=Bs({name:"rootProps",initialState:YL,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:YL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Y3e=rZ.reducer,{updateOptions:J3e}=rZ.actions,nZ=Bs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:X3e}=nZ.actions,Q3e=nZ.reducer,sZ=yi("keyDown"),iZ=yi("focus"),AO=wg();AO.startListening({actionCreator:sZ,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(aO(s,Nf(r))),a=Ka(r);if(i==="Enter"){var l=Xb(r,"axis","hover",String(s.index));t.dispatch(t2({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:l}));return}var c=MOe(r),u=c==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,f=o+h*u;if(!(a==null||f>=a.length||f<0)){var p=Xb(r,"axis","hover",String(f));t.dispatch(t2({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});AO.startListening({actionCreator:iZ,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=Xb(r,"axis","hover",String(i));t.dispatch(t2({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Ys=yi("externalEvent"),oZ=wg();oZ.startListening({actionCreator:Ys,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:TPe(r),activeDataKey:EPe(r),activeIndex:Uh(r),activeLabel:GK(r),activeTooltipIndex:Uh(r),isTooltipActive:APe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var e5e=X([kf],e=>e.tooltipItemPayloads),t5e=X([e5e,Og,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(a=>a.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),aZ=yi("touchMove"),lZ=wg();lZ.startListening({actionCreator:aZ,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=oO(n,n.tooltip.settings.shared);if(s==="axis"){var i=CO(n,TO({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(FK({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,a=r.touches[0],l=document.elementFromPoint(a.clientX,a.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(OV),u=(o=l.getAttribute(PV))!==null&&o!==void 0?o:void 0,h=t5e(t.getState(),c,u);t.dispatch(MK({activeDataKey:u,activeIndex:c,activeCoordinate:h}))}}});var r5e=nV({brush:Z4e,cartesianAxis:m3e,chartData:sRe,errorBars:z4e,graphicalItems:s4e,layout:ZSe,legend:P2e,options:QPe,polarAxis:wIe,polarOptions:Q3e,referenceElements:tDe,rootProps:Y3e,tooltip:HOe}),n5e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return bSe({reducer:r5e,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([eZ.middleware,tZ.middleware,AO.middleware,oZ.middleware,lZ.middleware]),devTools:{serialize:{replacer:G3e},name:"recharts-".concat(t)}})};function cZ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=ji(),i=g.useRef(null);if(s)return r;i.current==null&&(i.current=n5e(t,n));var o=KT;return g.createElement(H3e,{context:o,store:i.current},r)}function uZ(e){var{layout:t,width:r,height:n,margin:s}=e,i=ar(),o=ji();return g.useEffect(()=>{o||(i(WSe(t)),i(KSe({width:r,height:n})),i(VSe(s)))},[i,o,t,r,n,s]),null}function dZ(e){var t=ar();return g.useEffect(()=>{t(J3e(e))},[t,e]),null}var s5e=["children"];function i5e(e,t){if(e==null)return{};var r,n,s=o5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function o5e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function s0(){return s0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s0.apply(null,arguments)}var a5e={width:"100%",height:"100%"},l5e=g.forwardRef((e,t)=>{var r=nA(),n=sA(),s=$V();if(!Lh(r)||!Lh(n))return null;var{children:i,otherAttributes:o,title:a,desc:l}=e,c,u;return typeof o.tabIndex=="number"?c=o.tabIndex:c=s?0:void 0,typeof o.role=="string"?u=o.role:u=s?"application":void 0,g.createElement(PT,s0({},o,{title:a,desc:l,role:u,tabIndex:c,width:r,height:n,style:a5e,ref:t}),i)}),c5e=e=>{var{children:t}=e,r=De(Qx);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return g.createElement(PT,{width:n,height:s,x:o,y:i},t)},JL=g.forwardRef((e,t)=>{var{children:r}=e,n=i5e(e,s5e),s=ji();return s?g.createElement(c5e,null,r):g.createElement(l5e,s0({ref:t},n),r)});function u5e(){var e=ar(),[t,r]=g.useState(null),n=De(x2e);return g.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;eo(i)&&i!==n&&e(HSe(i))}},[t,e,n]),r}function XL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function d5e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XL(Object(r),!0).forEach(function(n){h5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h5e(e,t,r){return(t=f5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f5e(e){var t=p5e(e,"string");return typeof t=="symbol"?t:t+""}function p5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m5e=g.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:p,onTouchMove:v,onTouchStart:m,style:b,width:x}=e,w=ar(),[_,j]=g.useState(null),[k,N]=g.useState(null);aRe();var S=u5e(),E=g.useCallback(re=>{S(re),typeof t=="function"&&t(re),j(re),N(re)},[S,t,j,N]),T=g.useCallback(re=>{w(QH(re)),w(Ys({handler:i,reactEvent:re}))},[w,i]),P=g.useCallback(re=>{w(c2(re)),w(Ys({handler:c,reactEvent:re}))},[w,c]),O=g.useCallback(re=>{w($K()),w(Ys({handler:u,reactEvent:re}))},[w,u]),R=g.useCallback(re=>{w(c2(re)),w(Ys({handler:h,reactEvent:re}))},[w,h]),I=g.useCallback(()=>{w(iZ())},[w]),M=g.useCallback(re=>{w(sZ(re.key))},[w]),z=g.useCallback(re=>{w(Ys({handler:o,reactEvent:re}))},[w,o]),W=g.useCallback(re=>{w(Ys({handler:a,reactEvent:re}))},[w,a]),q=g.useCallback(re=>{w(Ys({handler:l,reactEvent:re}))},[w,l]),Y=g.useCallback(re=>{w(Ys({handler:f,reactEvent:re}))},[w,f]),L=g.useCallback(re=>{w(Ys({handler:m,reactEvent:re}))},[w,m]),K=g.useCallback(re=>{w(aZ(re)),w(Ys({handler:v,reactEvent:re}))},[w,v]),G=g.useCallback(re=>{w(Ys({handler:p,reactEvent:re}))},[w,p]);return g.createElement(tH.Provider,{value:_},g.createElement(f9.Provider,{value:k},g.createElement("div",{className:ot("recharts-wrapper",n),style:d5e({position:"relative",cursor:"default",width:x,height:s},b),onClick:T,onContextMenu:z,onDoubleClick:W,onFocus:I,onKeyDown:M,onMouseDown:q,onMouseEnter:P,onMouseLeave:O,onMouseMove:R,onMouseUp:Y,onTouchEnd:G,onTouchMove:K,onTouchStart:L,ref:E},r)))}),g5e=["children","className","width","height","style","compact","title","desc"];function y5e(e,t){if(e==null)return{};var r,n,s=v5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function v5e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hZ=g.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:a,title:l,desc:c}=e,u=y5e(e,g5e),h=nc(u);return a?g.createElement(JL,{otherAttributes:h,title:l,desc:c},r):g.createElement(m5e,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(JL,{otherAttributes:h,title:l,desc:c,ref:t},g.createElement(nDe,null,r)))}),b5e=["width","height"];function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u2.apply(null,arguments)}function x5e(e,t){if(e==null)return{};var r,n,s=w5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function w5e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _5e={top:5,right:5,bottom:5,left:5},j5e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:_5e,reverseStackOrder:!1,syncMethod:"index"},k5e=g.forwardRef(function(e,t){var r,n=ki(e.categoricalChartProps,j5e),{width:s,height:i}=n,o=x5e(n,b5e);if(!Lh(s)||!Lh(i))return null;var{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:h}=e,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return g.createElement(cZ,{preloadedState:{options:f},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:a},g.createElement(LH,{chartData:h.data}),g.createElement(uZ,{width:s,height:i,layout:n.layout,margin:n.margin}),g.createElement(dZ,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),g.createElement(hZ,u2({},o,{width:s,height:i,ref:t})))}),N5e=["axis"],S5e=g.forwardRef((e,t)=>g.createElement(k5e,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:N5e,tooltipPayloadSearcher:sH,categoricalChartProps:e,ref:t}));function E5e(e){var t=ar();return g.useEffect(()=>{t(X3e(e))},[t,e]),null}var C5e=["width","height","layout"];function d2(){return d2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d2.apply(null,arguments)}function T5e(e,t){if(e==null)return{};var r,n,s=A5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function A5e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var O5e={top:5,right:5,bottom:5,left:5},P5e={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:O5e,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},R5e=g.forwardRef(function(e,t){var r,n=ki(e.categoricalChartProps,P5e),{width:s,height:i,layout:o}=n,a=T5e(n,C5e);if(!Lh(s)||!Lh(i))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return g.createElement(cZ,{preloadedState:{options:f},reduxStoreName:(r=n.id)!==null&&r!==void 0?r:l},g.createElement(LH,{chartData:n.data}),g.createElement(uZ,{width:s,height:i,layout:o,margin:n.margin}),g.createElement(dZ,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),g.createElement(E5e,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),g.createElement(hZ,d2({width:s,height:i},a,{ref:t})))}),I5e=["item"],D5e={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},L5e=g.forwardRef((e,t)=>{var r=ki(e,D5e);return g.createElement(R5e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:I5e,tooltipPayloadSearcher:sH,categoricalChartProps:r,ref:t})});const M5e=async()=>{const{count:e}=await fe.from("profiles").select("id",{count:"exact",head:!0}),{count:t}=await fe.from("subscriptions").select("id",{count:"exact",head:!0}).eq("status","active"),{data:r,error:n}=await fe.from("pages").select("view_count"),{data:s,error:i}=await fe.from("orders").select("total_amount, status").eq("status","completed"),{count:o}=await fe.from("products").select("id",{count:"exact",head:!0}).eq("active",!0),{count:a}=await fe.from("orders").select("id",{count:"exact",head:!0}),{count:l}=await fe.from("orders").select("id",{count:"exact",head:!0}).eq("status","pending");(n||i)&&console.error("Error fetching key metrics:",{viewsError:n,ordersError:i});const c=(r==null?void 0:r.reduce((h,f)=>h+(f.view_count||0),0))||0,u=(s==null?void 0:s.reduce((h,f)=>h+f.total_amount,0))||0;return{totalUsers:e||0,activeSubscribers:t||0,totalRevenue:u,totalViews:c,totalProducts:o||0,totalOrders:a||0,pendingOrders:l||0}},$5e=async()=>{const e=new Date;e.setDate(e.getDate()-30);const{data:t,error:r}=await fe.from("profiles").select("created_at").gte("created_at",e.toISOString());if(r)throw new Error(r.message);const n=t.reduce((s,i)=>{const o=new Date(i.created_at).toISOString().split("T")[0];return s[o]=(s[o]||0)+1,s},{});return Object.entries(n).map(([s,i])=>({date:s,count:i})).sort((s,i)=>new Date(s.date).getTime()-new Date(i.date).getTime())},F5e=async()=>{const{data:e,error:t}=await fe.from("subscriptions").select("status");if(t)throw new Error(t.message);const r=e.reduce((n,s)=>{const i=s.status||"unknown";return n[i]=(n[i]||0)+1,n},{});return Object.entries(r).map(([n,s])=>({name:n,value:s}))},z5e=async()=>{const{data:e,error:t}=await fe.from("detailed_audit_log").select("*").order("created_at",{ascending:!1}).limit(5);if(t)throw new Error(t.message);return e},Nc=({title:e,value:t,icon:r,color:n})=>d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 flex items-center space-x-4 hover:border-blue-500/50 transition-colors",children:[d.jsx("div",{className:`p-3 rounded-lg bg-${n}-500/20 text-${n}-400`,children:d.jsx(r,{className:"w-6 h-6"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-400",children:e}),d.jsx("p",{className:"text-2xl font-bold text-white",children:t})]})]}),QL=({title:e,children:t,icon:r})=>d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(r,{className:"w-5 h-5 mr-2 text-gray-400"}),d.jsx("h3",{className:"text-lg font-semibold text-white",children:e})]}),d.jsx("div",{className:"h-72",children:t})]}),lk=()=>d.jsx("div",{className:"flex justify-center items-center h-full",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400"})}),ck=({message:e})=>d.jsxs("div",{className:"flex justify-center items-center h-full text-red-400",children:[d.jsx(zi,{className:"w-6 h-6 mr-2"}),d.jsxs("p",{children:["Error loading data: ",e]})]}),eM=({message:e,icon:t=Fue})=>d.jsxs("div",{className:"flex flex-col justify-center items-center h-full text-gray-500",children:[d.jsx(t,{className:"w-12 h-12 mb-4"}),d.jsx("p",{className:"font-semibold",children:"No Data Available"}),d.jsx("p",{className:"text-sm",children:e})]}),U5e=()=>{const{data:e,isLoading:t}=Rt({queryKey:["keyMetrics"],queryFn:M5e}),{data:r,isLoading:n,error:s}=Rt({queryKey:["usersOverTime"],queryFn:$5e}),{data:i,isLoading:o,error:a}=Rt({queryKey:["subscriptionStatus"],queryFn:F5e}),{data:l,isLoading:c,error:u}=Rt({queryKey:["recentActivity"],queryFn:z5e}),h=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("header",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Dashboard"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"An overview of your website's performance."})]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:t?d.jsx("p",{className:"text-gray-900 dark:text-white",children:"Loading metrics..."}):d.jsxs(d.Fragment,{children:[d.jsx(Nc,{title:"Total Users",value:(e==null?void 0:e.totalUsers.toLocaleString())??"0",icon:Eh,color:"blue"}),d.jsx(Nc,{title:"Active Subscribers",value:(e==null?void 0:e.activeSubscribers.toLocaleString())??"0",icon:Gue,color:"green"}),d.jsx(Nc,{title:"Total Revenue",value:`$${(e==null?void 0:e.totalRevenue.toFixed(2))??"0.00"}`,icon:Iue,color:"yellow"}),d.jsx(Nc,{title:"Total Page Views",value:(e==null?void 0:e.totalViews.toLocaleString())??"0",icon:fu,color:"purple"})]})}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:t?d.jsx("p",{className:"text-gray-900 dark:text-white",children:"Loading e-commerce metrics..."}):d.jsxs(d.Fragment,{children:[d.jsx(Nc,{title:"Active Products",value:(e==null?void 0:e.totalProducts.toLocaleString())??"0",icon:jU,color:"blue"}),d.jsx(Nc,{title:"Total Orders",value:(e==null?void 0:e.totalOrders.toLocaleString())??"0",icon:pC,color:"green"}),d.jsx(Nc,{title:"Pending Orders",value:(e==null?void 0:e.pendingOrders.toLocaleString())??"0",icon:zi,color:"orange"})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsx(QL,{title:"New Users (Last 30 Days)",icon:Bue,children:n?d.jsx(lk,{}):s?d.jsx(ck,{message:s.message}):r&&r.length>0?d.jsx(hL,{width:"100%",height:"100%",children:d.jsxs(S5e,{data:r,children:[d.jsx(UH,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(SO,{dataKey:"date",stroke:"#A0AEC0",tick:{fontSize:12}}),d.jsx(EO,{stroke:"#A0AEC0",tick:{fontSize:12}}),d.jsx(uL,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(Cm,{wrapperStyle:{fontSize:14}}),d.jsx(ZH,{type:"monotone",dataKey:"count",name:"New Users",stroke:"#3B82F6",strokeWidth:2,dot:{r:4},activeDot:{r:8}})]})}):d.jsx(eM,{message:"No new user data to display for this period."})}),d.jsx(QL,{title:"Subscription Status",icon:Kue,children:o?d.jsx(lk,{}):a?d.jsx(ck,{message:a.message}):i&&i.length>0?d.jsx(hL,{width:"100%",height:"100%",children:d.jsxs(L5e,{children:[d.jsx(RH,{data:i,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",labelLine:!1,label:({name:f,percent:p})=>`${f}: ${((p??0)*100).toFixed(0)}%`,children:i==null?void 0:i.map((f,p)=>d.jsx(pw,{fill:h[p%h.length]},`cell-${p}`))}),d.jsx(uL,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(Cm,{wrapperStyle:{fontSize:14}})]})}):d.jsx(eM,{message:"No subscription data available."})})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(que,{className:"w-5 h-5 mr-2 text-gray-600 dark:text-gray-300"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"})]}),d.jsx("div",{className:"space-y-4",children:c?d.jsx(lk,{}):u?d.jsx(ck,{message:u.message}):l&&l.length>0?l.map(f=>{var p;return d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[d.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:f.actor_display_name||f.actor_username||"A user"})," ",(p=f.action)==null?void 0:p.toLowerCase(),"."]}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:f.created_at?new Date(f.created_at).toLocaleString():""})]},f.id)}):d.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No recent activity found."})})]})]})};let B5e={data:""},q5e=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||B5e,V5e=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,W5e=/\/\*[^]*?\*\/|  +/g,tM=/\n+/g,bl=(e,t)=>{let r="",n="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?bl(o,i):i+"{"+bl(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=bl(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=bl.p?bl.p(i,o):i+":"+o+";")}return r+(t&&s?t+"{"+s+"}":s)+n},Jo={},fZ=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+fZ(e[r]);return t}return e},K5e=(e,t,r,n,s)=>{let i=fZ(e),o=Jo[i]||(Jo[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!Jo[o]){let l=i!==e?e:(c=>{let u,h,f=[{}];for(;u=V5e.exec(c.replace(W5e,""));)u[4]?f.shift():u[3]?(h=u[3].replace(tM," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(tM," ").trim();return f[0]})(e);Jo[o]=bl(s?{["@keyframes "+o]:l}:l,r?"":"."+o)}let a=r&&Jo.g?Jo.g:null;return r&&(Jo.g=Jo[o]),((l,c,u,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Jo[o],t,n,a),o},H5e=(e,t,r)=>e.reduce((n,s,i)=>{let o=t[i];if(o&&o.call){let a=o(r),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":bl(a,""):a===!1?"":a}return n+s+(o??"")},"");function gw(e){let t=this||{},r=e.call?e(t.p):e;return K5e(r.unshift?r.raw?H5e(r,[].slice.call(arguments,1),t.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):r,q5e(t.target),t.g,t.o,t.k)}let pZ,h2,f2;gw.bind({g:1});let La=gw.bind({k:1});function Z5e(e,t,r,n){bl.p=t,pZ=e,h2=r,f2=n}function uc(e,t){let r=this||{};return function(){let n=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;r.p=Object.assign({theme:h2&&h2()},a),r.o=/ *go\d+/.test(l),a.className=gw.apply(r,n)+(l?" "+l:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),f2&&c[0]&&f2(a),pZ(c,a)}return s}}var G5e=e=>typeof e=="function",i0=(e,t)=>G5e(e)?e(t):e,Y5e=(()=>{let e=0;return()=>(++e).toString()})(),mZ=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),J5e=20,OO="default",gZ=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return gZ(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Ov=[],yZ={toasts:[],pausedAt:void 0,settings:{toastLimit:J5e}},Eo={},vZ=(e,t=OO)=>{Eo[t]=gZ(Eo[t]||yZ,e),Ov.forEach(([r,n])=>{r===t&&n(Eo[t])})},bZ=e=>Object.keys(Eo).forEach(t=>vZ(e,t)),X5e=e=>Object.keys(Eo).find(t=>Eo[t].toasts.some(r=>r.id===e)),yw=(e=OO)=>t=>{vZ(t,e)},Q5e={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},eLe=(e={},t=OO)=>{let[r,n]=g.useState(Eo[t]||yZ),s=g.useRef(Eo[t]);g.useEffect(()=>(s.current!==Eo[t]&&n(Eo[t]),Ov.push([t,n]),()=>{let o=Ov.findIndex(([a])=>a===t);o>-1&&Ov.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var a,l,c;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||Q5e[o.type],style:{...e.style,...(c=e[o.type])==null?void 0:c.style,...o.style}}});return{...r,toasts:i}},tLe=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Y5e()}),Rg=e=>(t,r)=>{let n=tLe(t,e,r);return yw(n.toasterId||X5e(n.id))({type:2,toast:n}),n.id},vr=(e,t)=>Rg("blank")(e,t);vr.error=Rg("error");vr.success=Rg("success");vr.loading=Rg("loading");vr.custom=Rg("custom");vr.dismiss=(e,t)=>{let r={type:3,toastId:e};t?yw(t)(r):bZ(r)};vr.dismissAll=e=>vr.dismiss(void 0,e);vr.remove=(e,t)=>{let r={type:4,toastId:e};t?yw(t)(r):bZ(r)};vr.removeAll=e=>vr.remove(void 0,e);vr.promise=(e,t,r)=>{let n=vr.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?i0(t.success,s):void 0;return i?vr.success(i,{id:n,...r,...r==null?void 0:r.success}):vr.dismiss(n),s}).catch(s=>{let i=t.error?i0(t.error,s):void 0;i?vr.error(i,{id:n,...r,...r==null?void 0:r.error}):vr.dismiss(n)}),e};var rLe=1e3,nLe=(e,t="default")=>{let{toasts:r,pausedAt:n}=eLe(e,t),s=g.useRef(new Map).current,i=g.useCallback((h,f=rLe)=>{if(s.has(h))return;let p=setTimeout(()=>{s.delete(h),o({type:4,toastId:h})},f);s.set(h,p)},[]);g.useEffect(()=>{if(n)return;let h=Date.now(),f=r.map(p=>{if(p.duration===1/0)return;let v=(p.duration||0)+p.pauseDuration-(h-p.createdAt);if(v<0){p.visible&&vr.dismiss(p.id);return}return setTimeout(()=>vr.dismiss(p.id,t),v)});return()=>{f.forEach(p=>p&&clearTimeout(p))}},[r,n,t]);let o=g.useCallback(yw(t),[t]),a=g.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=g.useCallback((h,f)=>{o({type:1,toast:{id:h,height:f}})},[o]),c=g.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=g.useCallback((h,f)=>{let{reverseOrder:p=!1,gutter:v=8,defaultPosition:m}=f||{},b=r.filter(_=>(_.position||m)===(h.position||m)&&_.height),x=b.findIndex(_=>_.id===h.id),w=b.filter((_,j)=>j<x&&_.visible).length;return b.filter(_=>_.visible).slice(...p?[w+1]:[0,w]).reduce((_,j)=>_+(j.height||0)+v,0)},[r]);return g.useEffect(()=>{r.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let f=s.get(h.id);f&&(clearTimeout(f),s.delete(h.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},sLe=La`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,iLe=La`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oLe=La`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,aLe=uc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sLe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${iLe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${oLe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,lLe=La`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,cLe=uc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${lLe} 1s linear infinite;
`,uLe=La`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,dLe=La`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,hLe=uc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uLe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${dLe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,fLe=uc("div")`
  position: absolute;
`,pLe=uc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,mLe=La`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,gLe=uc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${mLe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,yLe=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?g.createElement(gLe,null,t):t:r==="blank"?null:g.createElement(pLe,null,g.createElement(cLe,{...n}),r!=="loading"&&g.createElement(fLe,null,r==="error"?g.createElement(aLe,{...n}):g.createElement(hLe,{...n})))},vLe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,bLe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,xLe="0%{opacity:0;} 100%{opacity:1;}",wLe="0%{opacity:1;} 100%{opacity:0;}",_Le=uc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,jLe=uc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,kLe=(e,t)=>{let r=e.includes("top")?1:-1,[n,s]=mZ()?[xLe,wLe]:[vLe(r),bLe(r)];return{animation:t?`${La(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${La(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},NLe=g.memo(({toast:e,position:t,style:r,children:n})=>{let s=e.height?kLe(e.position||t||"top-center",e.visible):{opacity:0},i=g.createElement(yLe,{toast:e}),o=g.createElement(jLe,{...e.ariaProps},i0(e.message,e));return g.createElement(_Le,{className:e.className,style:{...s,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):g.createElement(g.Fragment,null,i,o))});Z5e(g.createElement);var SLe=({id:e,className:t,style:r,onHeightUpdate:n,children:s})=>{let i=g.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;n(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return g.createElement("div",{ref:i,className:t,style:r},s)},ELe=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:mZ()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...s}},CLe=gw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,iv=16,TLe=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=nLe(r,i);return g.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:iv,left:iv,right:iv,bottom:iv,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let h=u.position||t,f=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),p=ELe(h,f);return g.createElement(SLe,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?CLe:"",style:p},u.type==="custom"?i0(u.message,u):s?s(u):g.createElement(NLe,{toast:u,position:h}))}))},xo=vr;function PO(){return{toast:({title:e,description:t,variant:r})=>{r==="destructive"?vr.error(e,{id:e,duration:5e3,style:{background:"#fee2e2",color:"#ef4444",border:"1px solid #fca5a5"},iconTheme:{primary:"#ef4444",secondary:"#fee2e2"}}):vr.success(e,{id:e,duration:3e3,style:{background:"#dcfce7",color:"#22c55e",border:"1px solid #86efac"},iconTheme:{primary:"#22c55e",secondary:"#dcfce7"}})}}}const jn=PO(),ALe=async()=>{const{data:e,error:t}=await fe.from("homepage_content").select("*");if(t)throw new Error(t.message);return e},OLe=async e=>{const{id:t,...r}=e,{data:n,error:s}=await fe.from("homepage_content").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},PLe=async e=>{const{data:t,error:r}=await fe.from("homepage_content").insert(e).select();if(r)throw new Error(r.message);return t[0]},RLe=async()=>{const{data:e,error:t}=await fe.from("news_items").select("*").order("date",{ascending:!1});if(t)throw new Error(t.message);return e},ILe=async e=>{const{data:t,error:r}=await fe.from("news_items").insert(e).select();if(r)throw new Error(r.message);return t[0]},DLe=async e=>{const{data:t,error:r}=await fe.from("news_items").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},LLe=async e=>{const{error:t}=await fe.from("news_items").delete().eq("id",e);if(t)throw new Error(t.message)},MLe=async()=>{const{data:e,error:t}=await fe.from("release_items").select("*").order("release_date",{ascending:!1});if(t)throw new Error(t.message);return e},$Le=async e=>{const{data:t,error:r}=await fe.from("release_items").insert(e).select();if(r)throw new Error(r.message);return t[0]},FLe=async e=>{const{data:t,error:r}=await fe.from("release_items").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},zLe=async e=>{const{error:t}=await fe.from("release_items").delete().eq("id",e);if(t)throw new Error(t.message)},ULe=()=>{var e,t,r,n,s,i,o,a;const l=so(),{data:c,isLoading:u,isError:h,error:f}=Rt({queryKey:["homepageContent"],queryFn:ALe}),{data:p,isLoading:v,isError:m,error:b}=Rt({queryKey:["newsItems"],queryFn:RLe}),{data:x,isLoading:w,isError:_,error:j}=Rt({queryKey:["releaseItems"],queryFn:MLe}),k=kt({mutationFn:OLe,onSuccess:()=>{l.invalidateQueries({queryKey:["homepageContent"]}),jn.toast({title:"Content updated successfully!",variant:"default"})},onError:B=>{jn.toast({title:`Error updating content: ${B.message}`,variant:"destructive"})}}),N=kt({mutationFn:PLe,onSuccess:()=>{l.invalidateQueries({queryKey:["homepageContent"]}),jn.toast({title:"Content created successfully!",variant:"default"})},onError:B=>{jn.toast({title:`Error creating content: ${B.message}`,variant:"destructive"})}}),S=kt({mutationFn:ILe,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),jn.toast({title:"News item added successfully!",variant:"default"}),J()},onError:B=>{jn.toast({title:`Error adding news item: ${B.message}`,variant:"destructive"})}}),E=kt({mutationFn:DLe,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),jn.toast({title:"News item updated successfully!",variant:"default"}),J()},onError:B=>{jn.toast({title:`Error updating news item: ${B.message}`,variant:"destructive"})}}),T=kt({mutationFn:LLe,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),jn.toast({title:"News item deleted successfully!",variant:"default"})},onError:B=>{jn.toast({title:`Error deleting news item: ${B.message}`,variant:"destructive"})}}),P=kt({mutationFn:$Le,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),jn.toast({title:"Release item added successfully!",variant:"default"}),U()},onError:B=>{jn.toast({title:`Error adding release item: ${B.message}`,variant:"destructive"})}}),O=kt({mutationFn:FLe,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),jn.toast({title:"Release item updated successfully!",variant:"default"}),U()},onError:B=>{jn.toast({title:`Error updating release item: ${B.message}`,variant:"destructive"})}}),R=kt({mutationFn:zLe,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),jn.toast({title:"Release item deleted successfully!",variant:"default"})},onError:B=>{jn.toast({title:`Error deleting release item: ${B.message}`,variant:"destructive"})}}),[I,M]=g.useState(!1),[z,W]=g.useState(null),[q,Y]=g.useState(!1),[L,K]=g.useState(null),G=B=>c==null?void 0:c.find(we=>we.section===B),re=async B=>{B.preventDefault();const we=B.target,Ee=we.heroTitle.value,He=we.heroDescription.value,Je=we.heroButtonText.value,ct=we.heroButtonLink.value,Et=[{section:"hero_title",content:Ee},{section:"hero_description",content:He},{section:"hero_button_text",content:Je},{section:"hero_button_link",content:ct}];for(const D of Et){const V=G(D.section);V?k.mutate({...V,content:D.content}):N.mutate(D)}},H=async B=>{B.preventDefault();const we=B.target,Ee=we.wordsWritten.value,He=we.betaReaders.value,Je=we.averageRating.value,ct=we.booksPublished.value,Et=[{section:"stat_words_written",content:Ee},{section:"stat_beta_readers",content:He},{section:"stat_average_rating",content:Je},{section:"stat_books_published",content:ct}];for(const D of Et){const V=G(D.section);V?k.mutate({...V,content:D.content}):N.mutate(D)}},ne=(B=null)=>{W(B),M(!0)},J=()=>{W(null),M(!1)},Ie=B=>{B.preventDefault();const we=B.target,Ee=we.newsTitle.value,He=we.newsContent.value,Je=we.newsStatus.value,ct=we.newsDate.value,Et={title:Ee,content:He,status:Je,date:ct};z?E.mutate({...z,...Et}):S.mutate(Et)},me=B=>{window.confirm("Are you sure you want to delete this news item?")&&T.mutate(B)},ge=(B=null)=>{K(B),Y(!0)},U=()=>{K(null),Y(!1)},Z=B=>{B.preventDefault();const we=B.target,Ee=we.releaseTitle.value,He=we.releaseType.value,Je=we.releaseStatus.value,ct=we.releaseDescription.value,Et=we.releaseDate.value,D=we.purchaseLink.value,V={title:Ee,type:He,status:Je,description:ct,release_date:Et,purchase_link:D};L?O.mutate({...L,...V}):P.mutate(V)},le=B=>{window.confirm("Are you sure you want to delete this release item?")&&R.mutate(B)};return u||v||w?d.jsx("div",{className:"text-center py-8",children:"Loading homepage content manager..."}):h?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error: ",f==null?void 0:f.message]}):m?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading news: ",b==null?void 0:b.message]}):_?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading releases: ",j==null?void 0:j.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-4",role:"alert",children:[d.jsx("strong",{children:"Note:"})," Changes made here will be reflected on your homepage immediately after saving."]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Hero Section"}),d.jsx("div",{className:"p-6",children:d.jsxs("form",{onSubmit:re,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Main Title"}),d.jsx("input",{type:"text",id:"heroTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((e=G("hero_title"))==null?void 0:e.content)||""})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroDescription",className:"block text-gray-700 text-sm font-bold mb-2",children:"Subtitle/Description"}),d.jsx("textarea",{id:"heroDescription",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-32 resize-y",defaultValue:((t=G("hero_description"))==null?void 0:t.content)||""})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroButtonText",className:"block text-gray-700 text-sm font-bold mb-2",children:"Button Text"}),d.jsx("input",{type:"text",id:"heroButtonText",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((r=G("hero_button_text"))==null?void 0:r.content)||""})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{htmlFor:"heroButtonLink",className:"block text-gray-700 text-sm font-bold mb-2",children:"Button Link"}),d.jsx("input",{type:"url",id:"heroButtonLink",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((n=G("hero_button_link"))==null?void 0:n.content)||""})]}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Hero Section"})]})})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Statistics"}),d.jsx("div",{className:"p-6",children:d.jsxs("form",{onSubmit:H,children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"wordsWritten",className:"block text-gray-700 text-sm font-bold mb-2",children:"Words Written"}),d.jsx("input",{type:"text",id:"wordsWritten",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((s=G("stat_words_written"))==null?void 0:s.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"betaReaders",className:"block text-gray-700 text-sm font-bold mb-2",children:"Beta Readers"}),d.jsx("input",{type:"text",id:"betaReaders",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((i=G("stat_beta_readers"))==null?void 0:i.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"averageRating",className:"block text-gray-700 text-sm font-bold mb-2",children:"Average Rating"}),d.jsx("input",{type:"text",id:"averageRating",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((o=G("stat_average_rating"))==null?void 0:o.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"booksPublished",className:"block text-gray-700 text-sm font-bold mb-2",children:"Books Published"}),d.jsx("input",{type:"text",id:"booksPublished",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((a=G("stat_books_published"))==null?void 0:a.content)||""})]})]}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Statistics"})]})})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Latest News & Updates"}),d.jsxs("div",{className:"p-6",children:[d.jsx("button",{onClick:()=>ne(),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-4",children:"+ Add New Update"}),p==null?void 0:p.map(B=>d.jsxs("div",{className:"bg-gray-100 p-4 rounded-md mb-2 relative",children:[d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsx("button",{onClick:()=>ne(B),className:"bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"Edit"}),d.jsx("button",{onClick:()=>me(B.id),className:"bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Delete"})]}),d.jsx("h3",{className:"font-bold text-lg mb-1",children:B.title}),d.jsx("p",{className:"text-gray-700 text-sm",children:B.content}),d.jsxs("small",{className:"text-gray-500",children:["Status: ",B.status," | Date: ",B.date]})]},B.id))]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Latest Releases"}),d.jsxs("div",{className:"p-6",children:[d.jsx("button",{onClick:()=>ge(),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-4",children:"+ Add New Release"}),x==null?void 0:x.map(B=>d.jsxs("div",{className:"bg-gray-100 p-4 rounded-md mb-2 relative",children:[d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsx("button",{onClick:()=>ge(B),className:"bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"Edit"}),d.jsx("button",{onClick:()=>le(B.id),className:"bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Delete"})]}),d.jsx("h3",{className:"font-bold text-lg mb-1",children:B.title}),d.jsxs("p",{className:"text-gray-700 text-sm",children:[d.jsx("strong",{children:"Type:"})," ",B.type," | ",d.jsx("strong",{children:"Status:"})," ",B.status]}),d.jsxs("small",{className:"text-gray-500",children:["Released: ",B.release_date]})]},B.id))]})]}),I&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:z?"Edit Update":"Add New Update"}),d.jsx("button",{onClick:J,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),d.jsxs("form",{onSubmit:Ie,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newsTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),d.jsx("input",{type:"text",id:"newsTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(z==null?void 0:z.title)||"",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newsContent",className:"block text-gray-700 text-sm font-bold mb-2",children:"Content"}),d.jsx("textarea",{id:"newsContent",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 resize-y",defaultValue:(z==null?void 0:z.content)||"",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newsStatus",className:"block text-gray-700 text-sm font-bold mb-2",children:"Status"}),d.jsxs("select",{id:"newsStatus",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(z==null?void 0:z.status)||"draft",children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newsDate",className:"block text-gray-700 text-sm font-bold mb-2",children:"Date"}),d.jsx("input",{type:"date",id:"newsDate",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(z==null?void 0:z.date)||new Date().toISOString().split("T")[0],required:!0})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:J,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Update"})]})]})]})}),q&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:L?"Edit Release":"Add New Release"}),d.jsx("button",{onClick:U,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),d.jsxs("form",{onSubmit:Z,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"releaseTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),d.jsx("input",{type:"text",id:"releaseTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(L==null?void 0:L.title)||"",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseType",className:"block text-gray-700 text-sm font-bold mb-2",children:"Type"}),d.jsxs("select",{id:"releaseType",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(L==null?void 0:L.type)||"issue",children:[d.jsx("option",{value:"issue",children:"Issue"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"volume",children:"Volume"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseStatus",className:"block text-gray-700 text-sm font-bold mb-2",children:"Status"}),d.jsxs("select",{id:"releaseStatus",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(L==null?void 0:L.status)||"available",children:[d.jsx("option",{value:"available",children:"Available"}),d.jsx("option",{value:"coming-soon",children:"Coming Soon"}),d.jsx("option",{value:"pre-order",children:"Pre-order"})]})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"releaseDescription",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),d.jsx("textarea",{id:"releaseDescription",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 resize-y",defaultValue:(L==null?void 0:L.description)||""})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseDate",className:"block text-gray-700 text-sm font-bold mb-2",children:"Release Date"}),d.jsx("input",{type:"date",id:"releaseDate",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(L==null?void 0:L.release_date)||new Date().toISOString().split("T")[0],required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"purchaseLink",className:"block text-gray-700 text-sm font-bold mb-2",children:"Purchase Link"}),d.jsx("input",{type:"url",id:"purchaseLink",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(L==null?void 0:L.purchase_link)||""})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:U,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Release"})]})]})]})})]})};var xZ=typeof global=="object"&&global&&global.Object===Object&&global,BLe=typeof self=="object"&&self&&self.Object===Object&&self,Wo=xZ||BLe||Function("return this")(),Kl=Wo.Symbol,wZ=Object.prototype,qLe=wZ.hasOwnProperty,VLe=wZ.toString,op=Kl?Kl.toStringTag:void 0;function WLe(e){var t=qLe.call(e,op),r=e[op];try{e[op]=void 0;var n=!0}catch{}var s=VLe.call(e);return n&&(t?e[op]=r:delete e[op]),s}var KLe=Object.prototype,HLe=KLe.toString;function ZLe(e){return HLe.call(e)}var GLe="[object Null]",YLe="[object Undefined]",rM=Kl?Kl.toStringTag:void 0;function Sf(e){return e==null?e===void 0?YLe:GLe:rM&&rM in Object(e)?WLe(e):ZLe(e)}function Ma(e){return e!=null&&typeof e=="object"}var wu=Array.isArray;function dc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function _Z(e){return e}var JLe="[object AsyncFunction]",XLe="[object Function]",QLe="[object GeneratorFunction]",eMe="[object Proxy]";function RO(e){if(!dc(e))return!1;var t=Sf(e);return t==XLe||t==QLe||t==JLe||t==eMe}var uk=Wo["__core-js_shared__"],nM=function(){var e=/[^.]+$/.exec(uk&&uk.keys&&uk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function tMe(e){return!!nM&&nM in e}var rMe=Function.prototype,nMe=rMe.toString;function $u(e){if(e!=null){try{return nMe.call(e)}catch{}try{return e+""}catch{}}return""}var sMe=/[\\^$.*+?()[\]{}|]/g,iMe=/^\[object .+?Constructor\]$/,oMe=Function.prototype,aMe=Object.prototype,lMe=oMe.toString,cMe=aMe.hasOwnProperty,uMe=RegExp("^"+lMe.call(cMe).replace(sMe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dMe(e){if(!dc(e)||tMe(e))return!1;var t=RO(e)?uMe:iMe;return t.test($u(e))}function hMe(e,t){return e==null?void 0:e[t]}function Fu(e,t){var r=hMe(e,t);return dMe(r)?r:void 0}var p2=Fu(Wo,"WeakMap"),sM=Object.create,fMe=function(){function e(){}return function(t){if(!dc(t))return{};if(sM)return sM(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function pMe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function mMe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var gMe=800,yMe=16,vMe=Date.now;function bMe(e){var t=0,r=0;return function(){var n=vMe(),s=yMe-(n-r);if(r=n,s>0){if(++t>=gMe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function xMe(e){return function(){return e}}var o0=function(){try{var e=Fu(Object,"defineProperty");return e({},"",{}),e}catch{}}(),wMe=o0?function(e,t){return o0(e,"toString",{configurable:!0,enumerable:!1,value:xMe(t),writable:!0})}:_Z,_Me=bMe(wMe);function jMe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var kMe=9007199254740991,NMe=/^(?:0|[1-9]\d*)$/;function jZ(e,t){var r=typeof e;return t=t??kMe,!!t&&(r=="number"||r!="symbol"&&NMe.test(e))&&e>-1&&e%1==0&&e<t}function IO(e,t,r){t=="__proto__"&&o0?o0(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Ig(e,t){return e===t||e!==e&&t!==t}var SMe=Object.prototype,EMe=SMe.hasOwnProperty;function kZ(e,t,r){var n=e[t];(!(EMe.call(e,t)&&Ig(n,r))||r===void 0&&!(t in e))&&IO(e,t,r)}function CMe(e,t,r,n){var s=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],l=void 0;l===void 0&&(l=e[a]),s?IO(r,a,l):kZ(r,a,l)}return r}var iM=Math.max;function TMe(e,t,r){return t=iM(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=iM(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=r(o),pMe(e,this,a)}}function AMe(e,t){return _Me(TMe(e,t,_Z),e+"")}var OMe=9007199254740991;function NZ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=OMe}function vw(e){return e!=null&&NZ(e.length)&&!RO(e)}function PMe(e,t,r){if(!dc(r))return!1;var n=typeof t;return(n=="number"?vw(r)&&jZ(t,r.length):n=="string"&&t in r)?Ig(r[t],e):!1}function RMe(e){return AMe(function(t,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(s--,i):void 0,o&&PMe(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var a=r[n];a&&e(t,a,n,i)}return t})}var IMe=Object.prototype;function DO(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||IMe;return e===r}function DMe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var LMe="[object Arguments]";function oM(e){return Ma(e)&&Sf(e)==LMe}var SZ=Object.prototype,MMe=SZ.hasOwnProperty,$Me=SZ.propertyIsEnumerable,m2=oM(function(){return arguments}())?oM:function(e){return Ma(e)&&MMe.call(e,"callee")&&!$Me.call(e,"callee")};function FMe(){return!1}var EZ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,aM=EZ&&typeof module=="object"&&module&&!module.nodeType&&module,zMe=aM&&aM.exports===EZ,lM=zMe?Wo.Buffer:void 0,UMe=lM?lM.isBuffer:void 0,Lm=UMe||FMe,BMe="[object Arguments]",qMe="[object Array]",VMe="[object Boolean]",WMe="[object Date]",KMe="[object Error]",HMe="[object Function]",ZMe="[object Map]",GMe="[object Number]",YMe="[object Object]",JMe="[object RegExp]",XMe="[object Set]",QMe="[object String]",e6e="[object WeakMap]",t6e="[object ArrayBuffer]",r6e="[object DataView]",n6e="[object Float32Array]",s6e="[object Float64Array]",i6e="[object Int8Array]",o6e="[object Int16Array]",a6e="[object Int32Array]",l6e="[object Uint8Array]",c6e="[object Uint8ClampedArray]",u6e="[object Uint16Array]",d6e="[object Uint32Array]",Ft={};Ft[n6e]=Ft[s6e]=Ft[i6e]=Ft[o6e]=Ft[a6e]=Ft[l6e]=Ft[c6e]=Ft[u6e]=Ft[d6e]=!0;Ft[BMe]=Ft[qMe]=Ft[t6e]=Ft[VMe]=Ft[r6e]=Ft[WMe]=Ft[KMe]=Ft[HMe]=Ft[ZMe]=Ft[GMe]=Ft[YMe]=Ft[JMe]=Ft[XMe]=Ft[QMe]=Ft[e6e]=!1;function h6e(e){return Ma(e)&&NZ(e.length)&&!!Ft[Sf(e)]}function LO(e){return function(t){return e(t)}}var CZ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gp=CZ&&typeof module=="object"&&module&&!module.nodeType&&module,f6e=Gp&&Gp.exports===CZ,dk=f6e&&xZ.process,Bh=function(){try{var e=Gp&&Gp.require&&Gp.require("util").types;return e||dk&&dk.binding&&dk.binding("util")}catch{}}(),cM=Bh&&Bh.isTypedArray,MO=cM?LO(cM):h6e,p6e=Object.prototype,m6e=p6e.hasOwnProperty;function TZ(e,t){var r=wu(e),n=!r&&m2(e),s=!r&&!n&&Lm(e),i=!r&&!n&&!s&&MO(e),o=r||n||s||i,a=o?DMe(e.length,String):[],l=a.length;for(var c in e)(t||m6e.call(e,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||jZ(c,l)))&&a.push(c);return a}function AZ(e,t){return function(r){return e(t(r))}}var g6e=AZ(Object.keys,Object),y6e=Object.prototype,v6e=y6e.hasOwnProperty;function b6e(e){if(!DO(e))return g6e(e);var t=[];for(var r in Object(e))v6e.call(e,r)&&r!="constructor"&&t.push(r);return t}function x6e(e){return vw(e)?TZ(e):b6e(e)}function w6e(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var _6e=Object.prototype,j6e=_6e.hasOwnProperty;function k6e(e){if(!dc(e))return w6e(e);var t=DO(e),r=[];for(var n in e)n=="constructor"&&(t||!j6e.call(e,n))||r.push(n);return r}function OZ(e){return vw(e)?TZ(e,!0):k6e(e)}var Mm=Fu(Object,"create");function N6e(){this.__data__=Mm?Mm(null):{},this.size=0}function S6e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var E6e="__lodash_hash_undefined__",C6e=Object.prototype,T6e=C6e.hasOwnProperty;function A6e(e){var t=this.__data__;if(Mm){var r=t[e];return r===E6e?void 0:r}return T6e.call(t,e)?t[e]:void 0}var O6e=Object.prototype,P6e=O6e.hasOwnProperty;function R6e(e){var t=this.__data__;return Mm?t[e]!==void 0:P6e.call(t,e)}var I6e="__lodash_hash_undefined__";function D6e(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Mm&&t===void 0?I6e:t,this}function _u(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}_u.prototype.clear=N6e;_u.prototype.delete=S6e;_u.prototype.get=A6e;_u.prototype.has=R6e;_u.prototype.set=D6e;function L6e(){this.__data__=[],this.size=0}function bw(e,t){for(var r=e.length;r--;)if(Ig(e[r][0],t))return r;return-1}var M6e=Array.prototype,$6e=M6e.splice;function F6e(e){var t=this.__data__,r=bw(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():$6e.call(t,r,1),--this.size,!0}function z6e(e){var t=this.__data__,r=bw(t,e);return r<0?void 0:t[r][1]}function U6e(e){return bw(this.__data__,e)>-1}function B6e(e,t){var r=this.__data__,n=bw(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Ha(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ha.prototype.clear=L6e;Ha.prototype.delete=F6e;Ha.prototype.get=z6e;Ha.prototype.has=U6e;Ha.prototype.set=B6e;var $m=Fu(Wo,"Map");function q6e(){this.size=0,this.__data__={hash:new _u,map:new($m||Ha),string:new _u}}function V6e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function xw(e,t){var r=e.__data__;return V6e(t)?r[typeof t=="string"?"string":"hash"]:r.map}function W6e(e){var t=xw(this,e).delete(e);return this.size-=t?1:0,t}function K6e(e){return xw(this,e).get(e)}function H6e(e){return xw(this,e).has(e)}function Z6e(e,t){var r=xw(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function zu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}zu.prototype.clear=q6e;zu.prototype.delete=W6e;zu.prototype.get=K6e;zu.prototype.has=H6e;zu.prototype.set=Z6e;function G6e(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var PZ=AZ(Object.getPrototypeOf,Object),Y6e="[object Object]",J6e=Function.prototype,X6e=Object.prototype,RZ=J6e.toString,Q6e=X6e.hasOwnProperty,e$e=RZ.call(Object);function t$e(e){if(!Ma(e)||Sf(e)!=Y6e)return!1;var t=PZ(e);if(t===null)return!0;var r=Q6e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&RZ.call(r)==e$e}function r$e(){this.__data__=new Ha,this.size=0}function n$e(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function s$e(e){return this.__data__.get(e)}function i$e(e){return this.__data__.has(e)}var o$e=200;function a$e(e,t){var r=this.__data__;if(r instanceof Ha){var n=r.__data__;if(!$m||n.length<o$e-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new zu(n)}return r.set(e,t),this.size=r.size,this}function Ro(e){var t=this.__data__=new Ha(e);this.size=t.size}Ro.prototype.clear=r$e;Ro.prototype.delete=n$e;Ro.prototype.get=s$e;Ro.prototype.has=i$e;Ro.prototype.set=a$e;var IZ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,uM=IZ&&typeof module=="object"&&module&&!module.nodeType&&module,l$e=uM&&uM.exports===IZ,dM=l$e?Wo.Buffer:void 0,hM=dM?dM.allocUnsafe:void 0;function DZ(e,t){if(t)return e.slice();var r=e.length,n=hM?hM(r):new e.constructor(r);return e.copy(n),n}function c$e(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}function u$e(){return[]}var d$e=Object.prototype,h$e=d$e.propertyIsEnumerable,fM=Object.getOwnPropertySymbols,f$e=fM?function(e){return e==null?[]:(e=Object(e),c$e(fM(e),function(t){return h$e.call(e,t)}))}:u$e;function p$e(e,t,r){var n=t(e);return wu(e)?n:G6e(n,r(e))}function g2(e){return p$e(e,x6e,f$e)}var y2=Fu(Wo,"DataView"),v2=Fu(Wo,"Promise"),b2=Fu(Wo,"Set"),pM="[object Map]",m$e="[object Object]",mM="[object Promise]",gM="[object Set]",yM="[object WeakMap]",vM="[object DataView]",g$e=$u(y2),y$e=$u($m),v$e=$u(v2),b$e=$u(b2),x$e=$u(p2),qi=Sf;(y2&&qi(new y2(new ArrayBuffer(1)))!=vM||$m&&qi(new $m)!=pM||v2&&qi(v2.resolve())!=mM||b2&&qi(new b2)!=gM||p2&&qi(new p2)!=yM)&&(qi=function(e){var t=Sf(e),r=t==m$e?e.constructor:void 0,n=r?$u(r):"";if(n)switch(n){case g$e:return vM;case y$e:return pM;case v$e:return mM;case b$e:return gM;case x$e:return yM}return t});var w$e=Object.prototype,_$e=w$e.hasOwnProperty;function j$e(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&_$e.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var a0=Wo.Uint8Array;function $O(e){var t=new e.constructor(e.byteLength);return new a0(t).set(new a0(e)),t}function k$e(e,t){var r=$O(e.buffer);return new e.constructor(r,e.byteOffset,e.byteLength)}var N$e=/\w*$/;function S$e(e){var t=new e.constructor(e.source,N$e.exec(e));return t.lastIndex=e.lastIndex,t}var bM=Kl?Kl.prototype:void 0,xM=bM?bM.valueOf:void 0;function E$e(e){return xM?Object(xM.call(e)):{}}function LZ(e,t){var r=t?$O(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var C$e="[object Boolean]",T$e="[object Date]",A$e="[object Map]",O$e="[object Number]",P$e="[object RegExp]",R$e="[object Set]",I$e="[object String]",D$e="[object Symbol]",L$e="[object ArrayBuffer]",M$e="[object DataView]",$$e="[object Float32Array]",F$e="[object Float64Array]",z$e="[object Int8Array]",U$e="[object Int16Array]",B$e="[object Int32Array]",q$e="[object Uint8Array]",V$e="[object Uint8ClampedArray]",W$e="[object Uint16Array]",K$e="[object Uint32Array]";function H$e(e,t,r){var n=e.constructor;switch(t){case L$e:return $O(e);case C$e:case T$e:return new n(+e);case M$e:return k$e(e);case $$e:case F$e:case z$e:case U$e:case B$e:case q$e:case V$e:case W$e:case K$e:return LZ(e,r);case A$e:return new n;case O$e:case I$e:return new n(e);case P$e:return S$e(e);case R$e:return new n;case D$e:return E$e(e)}}function MZ(e){return typeof e.constructor=="function"&&!DO(e)?fMe(PZ(e)):{}}var Z$e="[object Map]";function G$e(e){return Ma(e)&&qi(e)==Z$e}var wM=Bh&&Bh.isMap,Y$e=wM?LO(wM):G$e,J$e="[object Set]";function X$e(e){return Ma(e)&&qi(e)==J$e}var _M=Bh&&Bh.isSet,Q$e=_M?LO(_M):X$e,eFe=1,$Z="[object Arguments]",tFe="[object Array]",rFe="[object Boolean]",nFe="[object Date]",sFe="[object Error]",FZ="[object Function]",iFe="[object GeneratorFunction]",oFe="[object Map]",aFe="[object Number]",zZ="[object Object]",lFe="[object RegExp]",cFe="[object Set]",uFe="[object String]",dFe="[object Symbol]",hFe="[object WeakMap]",fFe="[object ArrayBuffer]",pFe="[object DataView]",mFe="[object Float32Array]",gFe="[object Float64Array]",yFe="[object Int8Array]",vFe="[object Int16Array]",bFe="[object Int32Array]",xFe="[object Uint8Array]",wFe="[object Uint8ClampedArray]",_Fe="[object Uint16Array]",jFe="[object Uint32Array]",At={};At[$Z]=At[tFe]=At[fFe]=At[pFe]=At[rFe]=At[nFe]=At[mFe]=At[gFe]=At[yFe]=At[vFe]=At[bFe]=At[oFe]=At[aFe]=At[zZ]=At[lFe]=At[cFe]=At[uFe]=At[dFe]=At[xFe]=At[wFe]=At[_Fe]=At[jFe]=!0;At[sFe]=At[FZ]=At[hFe]=!1;function Pv(e,t,r,n,s,i){var o,a=t&eFe;if(o!==void 0)return o;if(!dc(e))return e;var l=wu(e);if(l)o=j$e(e);else{var c=qi(e),u=c==FZ||c==iFe;if(Lm(e))return DZ(e,a);if(c==zZ||c==$Z||u&&!s)o=u?{}:MZ(e);else{if(!At[c])return s?e:{};o=H$e(e,c,a)}}i||(i=new Ro);var h=i.get(e);if(h)return h;i.set(e,o),Q$e(e)?e.forEach(function(v){o.add(Pv(v,t,r,v,e,i))}):Y$e(e)&&e.forEach(function(v,m){o.set(m,Pv(v,t,r,m,e,i))});var f=g2,p=l?void 0:f(e);return jMe(p||e,function(v,m){p&&(m=v,v=e[m]),kZ(o,m,Pv(v,t,r,m,e,i))}),o}var kFe=1,NFe=4;function Qd(e){return Pv(e,kFe|NFe)}var SFe="__lodash_hash_undefined__";function EFe(e){return this.__data__.set(e,SFe),this}function CFe(e){return this.__data__.has(e)}function l0(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new zu;++t<r;)this.add(e[t])}l0.prototype.add=l0.prototype.push=EFe;l0.prototype.has=CFe;function TFe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function AFe(e,t){return e.has(t)}var OFe=1,PFe=2;function UZ(e,t,r,n,s,i){var o=r&OFe,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var h=-1,f=!0,p=r&PFe?new l0:void 0;for(i.set(e,t),i.set(t,e);++h<a;){var v=e[h],m=t[h];if(n)var b=o?n(m,v,h,t,e,i):n(v,m,h,e,t,i);if(b!==void 0){if(b)continue;f=!1;break}if(p){if(!TFe(t,function(x,w){if(!AFe(p,w)&&(v===x||s(v,x,r,n,i)))return p.push(w)})){f=!1;break}}else if(!(v===m||s(v,m,r,n,i))){f=!1;break}}return i.delete(e),i.delete(t),f}function RFe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}function IFe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var DFe=1,LFe=2,MFe="[object Boolean]",$Fe="[object Date]",FFe="[object Error]",zFe="[object Map]",UFe="[object Number]",BFe="[object RegExp]",qFe="[object Set]",VFe="[object String]",WFe="[object Symbol]",KFe="[object ArrayBuffer]",HFe="[object DataView]",jM=Kl?Kl.prototype:void 0,hk=jM?jM.valueOf:void 0;function ZFe(e,t,r,n,s,i,o){switch(r){case HFe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case KFe:return!(e.byteLength!=t.byteLength||!i(new a0(e),new a0(t)));case MFe:case $Fe:case UFe:return Ig(+e,+t);case FFe:return e.name==t.name&&e.message==t.message;case BFe:case VFe:return e==t+"";case zFe:var a=RFe;case qFe:var l=n&DFe;if(a||(a=IFe),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=LFe,o.set(e,t);var u=UZ(a(e),a(t),n,s,i,o);return o.delete(e),u;case WFe:if(hk)return hk.call(e)==hk.call(t)}return!1}var GFe=1,YFe=Object.prototype,JFe=YFe.hasOwnProperty;function XFe(e,t,r,n,s,i){var o=r&GFe,a=g2(e),l=a.length,c=g2(t),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in t:JFe.call(t,f)))return!1}var p=i.get(e),v=i.get(t);if(p&&v)return p==t&&v==e;var m=!0;i.set(e,t),i.set(t,e);for(var b=o;++h<l;){f=a[h];var x=e[f],w=t[f];if(n)var _=o?n(w,x,f,t,e,i):n(x,w,f,e,t,i);if(!(_===void 0?x===w||s(x,w,r,n,i):_)){m=!1;break}b||(b=f=="constructor")}if(m&&!b){var j=e.constructor,k=t.constructor;j!=k&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof k=="function"&&k instanceof k)&&(m=!1)}return i.delete(e),i.delete(t),m}var QFe=1,kM="[object Arguments]",NM="[object Array]",ov="[object Object]",eze=Object.prototype,SM=eze.hasOwnProperty;function tze(e,t,r,n,s,i){var o=wu(e),a=wu(t),l=o?NM:qi(e),c=a?NM:qi(t);l=l==kM?ov:l,c=c==kM?ov:c;var u=l==ov,h=c==ov,f=l==c;if(f&&Lm(e)){if(!Lm(t))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new Ro),o||MO(e)?UZ(e,t,r,n,s,i):ZFe(e,t,l,r,n,s,i);if(!(r&QFe)){var p=u&&SM.call(e,"__wrapped__"),v=h&&SM.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,b=v?t.value():t;return i||(i=new Ro),s(m,b,r,n,i)}}return f?(i||(i=new Ro),XFe(e,t,r,n,s,i)):!1}function BZ(e,t,r,n,s){return e===t?!0:e==null||t==null||!Ma(e)&&!Ma(t)?e!==e&&t!==t:tze(e,t,r,n,BZ,s)}function rze(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),a=o.length;a--;){var l=o[++s];if(r(i[l],l,i)===!1)break}return t}}var nze=rze();function x2(e,t,r){(r!==void 0&&!Ig(e[t],r)||r===void 0&&!(t in e))&&IO(e,t,r)}function sze(e){return Ma(e)&&vw(e)}function w2(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function ize(e){return CMe(e,OZ(e))}function oze(e,t,r,n,s,i,o){var a=w2(e,r),l=w2(t,r),c=o.get(l);if(c){x2(e,r,c);return}var u=i?i(a,l,r+"",e,t,o):void 0,h=u===void 0;if(h){var f=wu(l),p=!f&&Lm(l),v=!f&&!p&&MO(l);u=l,f||p||v?wu(a)?u=a:sze(a)?u=mMe(a):p?(h=!1,u=DZ(l,!0)):v?(h=!1,u=LZ(l,!0)):u=[]:t$e(l)||m2(l)?(u=a,m2(a)?u=ize(a):(!dc(a)||RO(a))&&(u=MZ(l))):h=!1}h&&(o.set(l,u),s(u,l,n,i,o),o.delete(l)),x2(e,r,u)}function qZ(e,t,r,n,s){e!==t&&nze(t,function(i,o){if(s||(s=new Ro),dc(i))oze(e,t,o,r,qZ,n,s);else{var a=n?n(w2(e,o),i,o+"",e,t,s):void 0;a===void 0&&(a=i),x2(e,o,a)}},OZ)}function xl(e,t){return BZ(e,t)}var Ll=RMe(function(e,t,r){qZ(e,t,r)}),Re=(e=>(e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY",e))(Re||{});class Fo{constructor(t,r,n={}){this.attrName=t,this.keyName=r;const s=Re.TYPE&Re.ATTRIBUTE;this.scope=n.scope!=null?n.scope&Re.LEVEL|s:Re.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map(r=>r.name)}add(t,r){return this.canAdd(t,r)?(t.setAttribute(this.keyName,r),!0):!1}canAdd(t,r){return this.whitelist==null?!0:typeof r=="string"?this.whitelist.indexOf(r.replace(/["']/g,""))>-1:this.whitelist.indexOf(r)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const r=t.getAttribute(this.keyName);return this.canAdd(t,r)&&r?r:""}}class eh extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const VZ=class _2{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,r=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(r){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,r)}return null}create(t,r,n){const s=this.query(r);if(s==null)throw new eh(`Unable to create ${r} blot`);const i=s,o=r instanceof Node||r.nodeType===Node.TEXT_NODE?r:i.create(n),a=new i(t,o,n);return _2.blots.set(a.domNode,a),a}find(t,r=!1){return _2.find(t,r)}query(t,r=Re.ANY){let n;return typeof t=="string"?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:typeof t=="number"?t&Re.LEVEL&Re.BLOCK?n=this.types.block:t&Re.LEVEL&Re.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(s=>(n=this.classes[s],!!n)),n=n||this.tags[t.tagName]),n==null?null:"scope"in n&&r&Re.LEVEL&n.scope&&r&Re.TYPE&n.scope?n:null}register(...t){return t.map(r=>{const n="blotName"in r,s="attrName"in r;if(!n&&!s)throw new eh("Invalid definition");if(n&&r.blotName==="abstract")throw new eh("Cannot register abstract class");const i=n?r.blotName:s?r.attrName:void 0;return this.types[i]=r,s?typeof r.keyName=="string"&&(this.attributes[r.keyName]=r):n&&(r.className&&(this.classes[r.className]=r),r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map(o=>o.toUpperCase()):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach(o=>{(this.tags[o]==null||r.className==null)&&(this.tags[o]=r)}))),r})}};VZ.blots=new WeakMap;let qh=VZ;function EM(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(r=>r.indexOf(`${t}-`)===0)}class aze extends Fo{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(r=>r.split("-").slice(0,-1).join("-"))}add(t,r){return this.canAdd(t,r)?(this.remove(t),t.classList.add(`${this.keyName}-${r}`),!0):!1}remove(t){EM(t,this.keyName).forEach(r=>{t.classList.remove(r)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const r=(EM(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,r)?r:""}}const lo=aze;function fk(e){const t=e.split("-"),r=t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return t[0]+r}class lze extends Fo{static keys(t){return(t.getAttribute("style")||"").split(";").map(r=>r.split(":")[0].trim())}add(t,r){return this.canAdd(t,r)?(t.style[fk(this.keyName)]=r,!0):!1}remove(t){t.style[fk(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const r=t.style[fk(this.keyName)];return this.canAdd(t,r)?r:""}}const hc=lze;class cze{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,r){r?t.add(this.domNode,r)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=qh.find(this.domNode);if(t==null)return;const r=Fo.keys(this.domNode),n=lo.keys(this.domNode),s=hc.keys(this.domNode);r.concat(n).concat(s).forEach(i=>{const o=t.scroll.query(i,Re.ATTRIBUTE);o instanceof Fo&&(this.attributes[o.attrName]=o)})}copy(t){Object.keys(this.attributes).forEach(r=>{const n=this.attributes[r].value(this.domNode);t.format(r,n)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(r=>{this.attributes[r].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,r)=>(t[r]=this.attributes[r].value(this.domNode),t),{})}}const ww=cze,WZ=class{constructor(e,t){this.scroll=e,this.domNode=t,qh.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new eh("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),qh.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,n){const s=this.isolate(e,t);if(this.scroll.query(r,Re.BLOT)!=null&&n)s.wrap(r,n);else if(this.scroll.query(r,Re.ATTRIBUTE)!=null){const i=this.scroll.create(this.statics.scope);s.wrap(i),i.format(r,n)}}insertAt(e,t,r){const n=r==null?this.scroll.create("text",t):this.scroll.create(t,r),s=this.split(e);this.parent.insertBefore(n,s||void 0)}isolate(e,t){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new eh(`Cannot wrap ${e}`);return r.appendChild(this),r}};WZ.blotName="abstract";let KZ=WZ;const HZ=class extends KZ{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};HZ.scope=Re.INLINE_BLOT;let uze=HZ;const An=uze;class dze{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const r=t.slice(1);this.append(...r)}}at(t){const r=this.iterator();let n=r();for(;n&&t>0;)t-=1,n=r();return n}contains(t){const r=this.iterator();let n=r();for(;n;){if(n===t)return!0;n=r()}return!1}indexOf(t){const r=this.iterator();let n=r(),s=0;for(;n;){if(n===t)return s;s+=1,n=r()}return-1}insertBefore(t,r){t!=null&&(this.remove(t),t.next=r,r!=null?(t.prev=r.prev,r.prev!=null&&(r.prev.next=t),r.prev=t,r===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let r=0,n=this.head;for(;n!=null;){if(n===t)return r;r+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const r=t;return t!=null&&(t=t.next),r}}find(t,r=!1){const n=this.iterator();let s=n();for(;s;){const i=s.length();if(t<i||r&&t===i&&(s.next==null||s.next.length()!==0))return[s,t];t-=i,s=n()}return[null,0]}forEach(t){const r=this.iterator();let n=r();for(;n;)t(n),n=r()}forEachAt(t,r,n){if(r<=0)return;const[s,i]=this.find(t);let o=t-i;const a=this.iterator(s);let l=a();for(;l&&o<t+r;){const c=l.length();t>o?n(l,t-o,Math.min(r,o+c-t)):n(l,0,Math.min(c,t+r-o)),o+=c,l=a()}}map(t){return this.reduce((r,n)=>(r.push(t(n)),r),[])}reduce(t,r){const n=this.iterator();let s=n();for(;s;)r=t(r,s),s=n();return r}}function CM(e,t){const r=t.find(e);if(r)return r;try{return t.create(e)}catch{const n=t.create(Re.INLINE);return Array.from(e.childNodes).forEach(s=>{n.domNode.appendChild(s)}),e.parentNode&&e.parentNode.replaceChild(n.domNode,e),n.attach(),n}}const ZZ=class hl extends KZ{constructor(t,r){super(t,r),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,hl.uiClass&&this.uiNode.classList.add(hl.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new dze,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const r=CM(t,this.scroll);this.insertBefore(r,this.children.head||void 0)}catch(r){if(r instanceof eh)return;throw r}})}deleteAt(t,r){if(t===0&&r===this.length())return this.remove();this.children.forEachAt(t,r,(n,s,i)=>{n.deleteAt(s,i)})}descendant(t,r=0){const[n,s]=this.children.find(r);return t.blotName==null&&t(n)||t.blotName!=null&&n instanceof t?[n,s]:n instanceof hl?n.descendant(t,s):[null,-1]}descendants(t,r=0,n=Number.MAX_VALUE){let s=[],i=n;return this.children.forEachAt(r,n,(o,a,l)=>{(t.blotName==null&&t(o)||t.blotName!=null&&o instanceof t)&&s.push(o),o instanceof hl&&(s=s.concat(o.descendants(t,a,i))),i-=l}),s}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(r=>{t||this.statics.allowedChildren.some(n=>r instanceof n)||(r.statics.scope===Re.BLOCK_BLOT?(r.next!=null&&this.splitAfter(r),r.prev!=null&&this.splitAfter(r.prev),r.parent.unwrap(),t=!0):r instanceof hl?r.unwrap():r.remove())})}formatAt(t,r,n,s){this.children.forEachAt(t,r,(i,o,a)=>{i.formatAt(o,a,n,s)})}insertAt(t,r,n){const[s,i]=this.children.find(t);if(s)s.insertAt(i,r,n);else{const o=n==null?this.scroll.create("text",r):this.scroll.create(r,n);this.appendChild(o)}}insertBefore(t,r){t.parent!=null&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,r||null),t.parent=this,r!=null&&(n=r.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce((t,r)=>t+r.length(),0)}moveChildren(t,r){this.children.forEach(n=>{t.insertBefore(n,r)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const r=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(r)}else this.remove()}path(t,r=!1){const[n,s]=this.children.find(t,r),i=[[this,t]];return n instanceof hl?i.concat(n.path(s,r)):(n!=null&&i.push([n,s]),i)}removeChild(t){this.children.remove(t)}replaceWith(t,r){const n=typeof t=="string"?this.scroll.create(t,r):t;return n instanceof hl&&this.moveChildren(n),super.replaceWith(n)}split(t,r=!1){if(!r){if(t===0)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(s,i,o)=>{const a=s.split(i,r);a!=null&&n.appendChild(a)}),n}splitAfter(t){const r=this.clone();for(;t.next!=null;)r.appendChild(t.next);return this.parent&&this.parent.insertBefore(r,this.next||void 0),r}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,r){const n=[],s=[];t.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(n.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(i);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),n.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,o)=>i===o?0:i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let o=null;i.nextSibling!=null&&(o=this.scroll.find(i.nextSibling));const a=CM(i,this.scroll);(a.next!==o||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};ZZ.uiClass="";let hze=ZZ;const Zi=hze;function fze(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}const vd=class bd extends Zi{static create(t){return super.create(t)}static formats(t,r){const n=r.query(bd.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,r){super(t,r),this.attributes=new ww(this.domNode)}format(t,r){if(t===this.statics.blotName&&!r)this.children.forEach(n=>{n instanceof bd||(n=n.wrap(bd.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{const n=this.scroll.query(t,Re.INLINE);if(n==null)return;n instanceof Fo?this.attributes.attribute(n,r):r&&(t!==this.statics.blotName||this.formats()[t]!==r)&&this.replaceWith(t,r)}}formats(){const t=this.attributes.values(),r=this.statics.formats(this.domNode,this.scroll);return r!=null&&(t[this.statics.blotName]=r),t}formatAt(t,r,n,s){this.formats()[n]!=null||this.scroll.query(n,Re.ATTRIBUTE)?this.isolate(t,r).format(n,s):super.formatAt(t,r,n,s)}optimize(t){super.optimize(t);const r=this.formats();if(Object.keys(r).length===0)return this.unwrap();const n=this.next;n instanceof bd&&n.prev===this&&fze(r,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,r){const n=super.replaceWith(t,r);return this.attributes.copy(n),n}update(t,r){super.update(t,r),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(t,r){const n=super.wrap(t,r);return n instanceof bd&&this.attributes.move(n),n}};vd.allowedChildren=[vd,An],vd.blotName="inline",vd.scope=Re.INLINE_BLOT,vd.tagName="SPAN";let pze=vd;const FO=pze,xd=class j2 extends Zi{static create(t){return super.create(t)}static formats(t,r){const n=r.query(j2.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,r){super(t,r),this.attributes=new ww(this.domNode)}format(t,r){const n=this.scroll.query(t,Re.BLOCK);n!=null&&(n instanceof Fo?this.attributes.attribute(n,r):t===this.statics.blotName&&!r?this.replaceWith(j2.blotName):r&&(t!==this.statics.blotName||this.formats()[t]!==r)&&this.replaceWith(t,r))}formats(){const t=this.attributes.values(),r=this.statics.formats(this.domNode,this.scroll);return r!=null&&(t[this.statics.blotName]=r),t}formatAt(t,r,n,s){this.scroll.query(n,Re.BLOCK)!=null?this.format(n,s):super.formatAt(t,r,n,s)}insertAt(t,r,n){if(n==null||this.scroll.query(r,Re.INLINE)!=null)super.insertAt(t,r,n);else{const s=this.split(t);if(s!=null){const i=this.scroll.create(r,n);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,r){const n=super.replaceWith(t,r);return this.attributes.copy(n),n}update(t,r){super.update(t,r),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};xd.blotName="block",xd.scope=Re.BLOCK_BLOT,xd.tagName="P",xd.allowedChildren=[FO,xd,An];let mze=xd;const Fm=mze,k2=class extends Zi{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,n){super.formatAt(e,t,r,n),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};k2.blotName="container",k2.scope=Re.BLOCK_BLOT;let gze=k2;const _w=gze;class yze extends An{static formats(t,r){}format(t,r){super.formatAt(0,this.length(),t,r)}formatAt(t,r,n,s){t===0&&r===this.length()?this.format(n,s):super.formatAt(t,r,n,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const qs=yze,vze={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},bze=100,wd=class extends Zi{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,vze),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=Re.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,n){this.update(),super.formatAt(e,t,r,n)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let n=Array.from(this.observer.takeRecords());for(;n.length>0;)e.push(n.pop());const s=(a,l=!0)=>{a==null||a===this||a.domNode.parentNode!=null&&(r.has(a.domNode)||r.set(a.domNode,[]),l&&s(a.parent))},i=a=>{r.has(a.domNode)&&(a instanceof Zi&&a.children.forEach(i),r.delete(a.domNode),a.optimize(t))};let o=e;for(let a=0;o.length>0;a+=1){if(a>=bze)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(l=>{const c=this.find(l.target,!0);c!=null&&(c.domNode===l.target&&(l.type==="childList"?(s(this.find(l.previousSibling,!1)),Array.from(l.addedNodes).forEach(u=>{const h=this.find(u,!1);s(h,!1),h instanceof Zi&&h.children.forEach(f=>{s(f,!1)})})):l.type==="attributes"&&s(c.prev)),s(c))}),this.children.forEach(i),o=Array.from(this.observer.takeRecords()),n=o.slice();n.length>0;)e.push(n.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(n=>{const s=this.find(n.target,!0);return s==null?null:r.has(s.domNode)?(r.get(s.domNode).push(n),null):(r.set(s.domNode,[n]),s)}).forEach(n=>{n!=null&&n!==this&&r.has(n.domNode)&&n.update(r.get(n.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};wd.blotName="scroll",wd.defaultChild=Fm,wd.allowedChildren=[Fm,_w],wd.scope=Re.BLOCK_BLOT,wd.tagName="DIV";let xze=wd;const zO=xze,N2=class GZ extends An{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,r){super(t,r),this.text=this.statics.value(this.domNode)}deleteAt(t,r){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+r)}index(t,r){return this.domNode===t?r:-1}insertAt(t,r,n){n==null?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,r,n)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof GZ&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,r=!1){return[this.domNode,t]}split(t,r=!1){if(!r){if(t===0)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,r){t.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};N2.blotName="text",N2.scope=Re.INLINE_BLOT;let wze=N2;const c0=wze,_ze=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Fo,AttributorStore:ww,BlockBlot:Fm,ClassAttributor:lo,ContainerBlot:_w,EmbedBlot:qs,InlineBlot:FO,LeafBlot:An,ParentBlot:Zi,Registry:qh,Scope:Re,ScrollBlot:zO,StyleAttributor:hc,TextBlot:c0},Symbol.toStringTag,{value:"Module"}));var S2={exports:{}},Ls=-1,Jn=1,Hr=0;function zm(e,t,r,n,s){if(e===t)return e?[[Hr,e]]:[];if(r!=null){var i=Oze(e,t,r);if(i)return i}var o=UO(e,t),a=e.substring(0,o);e=e.substring(o),t=t.substring(o),o=jw(e,t);var l=e.substring(e.length-o);e=e.substring(0,e.length-o),t=t.substring(0,t.length-o);var c=jze(e,t);return a&&c.unshift([Hr,a]),l&&c.push([Hr,l]),BO(c,s),n&&Sze(c),c}function jze(e,t){var r;if(!e)return[[Jn,t]];if(!t)return[[Ls,e]];var n=e.length>t.length?e:t,s=e.length>t.length?t:e,i=n.indexOf(s);if(i!==-1)return r=[[Jn,n.substring(0,i)],[Hr,s],[Jn,n.substring(i+s.length)]],e.length>t.length&&(r[0][0]=r[2][0]=Ls),r;if(s.length===1)return[[Ls,e],[Jn,t]];var o=Nze(e,t);if(o){var a=o[0],l=o[1],c=o[2],u=o[3],h=o[4],f=zm(a,c),p=zm(l,u);return f.concat([[Hr,h]],p)}return kze(e,t)}function kze(e,t){for(var r=e.length,n=t.length,s=Math.ceil((r+n)/2),i=s,o=2*s,a=new Array(o),l=new Array(o),c=0;c<o;c++)a[c]=-1,l[c]=-1;a[i+1]=0,l[i+1]=0;for(var u=r-n,h=u%2!==0,f=0,p=0,v=0,m=0,b=0;b<s;b++){for(var x=-b+f;x<=b-p;x+=2){var w=i+x,_;x===-b||x!==b&&a[w-1]<a[w+1]?_=a[w+1]:_=a[w-1]+1;for(var j=_-x;_<r&&j<n&&e.charAt(_)===t.charAt(j);)_++,j++;if(a[w]=_,_>r)p+=2;else if(j>n)f+=2;else if(h){var k=i+u-x;if(k>=0&&k<o&&l[k]!==-1){var N=r-l[k];if(_>=N)return TM(e,t,_,j)}}}for(var S=-b+v;S<=b-m;S+=2){var k=i+S,N;S===-b||S!==b&&l[k-1]<l[k+1]?N=l[k+1]:N=l[k-1]+1;for(var E=N-S;N<r&&E<n&&e.charAt(r-N-1)===t.charAt(n-E-1);)N++,E++;if(l[k]=N,N>r)m+=2;else if(E>n)v+=2;else if(!h){var w=i+u-S;if(w>=0&&w<o&&a[w]!==-1){var _=a[w],j=i+_-w;if(N=r-N,_>=N)return TM(e,t,_,j)}}}}return[[Ls,e],[Jn,t]]}function TM(e,t,r,n){var s=e.substring(0,r),i=t.substring(0,n),o=e.substring(r),a=t.substring(n),l=zm(s,i),c=zm(o,a);return l.concat(c)}function UO(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,i=0;r<s;)e.substring(i,s)==t.substring(i,s)?(r=s,i=r):n=s,s=Math.floor((n-r)/2+r);return YZ(e.charCodeAt(s-1))&&s--,s}function AM(e,t){var r=e.length,n=t.length;if(r==0||n==0)return 0;r>n?e=e.substring(r-n):r<n&&(t=t.substring(0,r));var s=Math.min(r,n);if(e==t)return s;for(var i=0,o=1;;){var a=e.substring(s-o),l=t.indexOf(a);if(l==-1)return i;o+=l,(l==0||e.substring(s-o)==t.substring(0,o))&&(i=o,o++)}}function jw(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,i=0;r<s;)e.substring(e.length-s,e.length-i)==t.substring(t.length-s,t.length-i)?(r=s,i=r):n=s,s=Math.floor((n-r)/2+r);return JZ(e.charCodeAt(e.length-s))&&s--,s}function Nze(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||n.length*2<r.length)return null;function s(p,v,m){for(var b=p.substring(m,m+Math.floor(p.length/4)),x=-1,w="",_,j,k,N;(x=v.indexOf(b,x+1))!==-1;){var S=UO(p.substring(m),v.substring(x)),E=jw(p.substring(0,m),v.substring(0,x));w.length<E+S&&(w=v.substring(x-E,x)+v.substring(x,x+S),_=p.substring(0,m-E),j=p.substring(m+S),k=v.substring(0,x-E),N=v.substring(x+S))}return w.length*2>=p.length?[_,j,k,N,w]:null}var i=s(r,n,Math.ceil(r.length/4)),o=s(r,n,Math.ceil(r.length/2)),a;if(!i&&!o)return null;o?i?a=i[4].length>o[4].length?i:o:a=o:a=i;var l,c,u,h;e.length>t.length?(l=a[0],c=a[1],u=a[2],h=a[3]):(u=a[0],h=a[1],l=a[2],c=a[3]);var f=a[4];return[l,c,u,h,f]}function Sze(e){for(var t=!1,r=[],n=0,s=null,i=0,o=0,a=0,l=0,c=0;i<e.length;)e[i][0]==Hr?(r[n++]=i,o=l,a=c,l=0,c=0,s=e[i][1]):(e[i][0]==Jn?l+=e[i][1].length:c+=e[i][1].length,s&&s.length<=Math.max(o,a)&&s.length<=Math.max(l,c)&&(e.splice(r[n-1],0,[Ls,s]),e[r[n-1]+1][0]=Jn,n--,n--,i=n>0?r[n-1]:-1,o=0,a=0,l=0,c=0,s=null,t=!0)),i++;for(t&&BO(e),Tze(e),i=1;i<e.length;){if(e[i-1][0]==Ls&&e[i][0]==Jn){var u=e[i-1][1],h=e[i][1],f=AM(u,h),p=AM(h,u);f>=p?(f>=u.length/2||f>=h.length/2)&&(e.splice(i,0,[Hr,h.substring(0,f)]),e[i-1][1]=u.substring(0,u.length-f),e[i+1][1]=h.substring(f),i++):(p>=u.length/2||p>=h.length/2)&&(e.splice(i,0,[Hr,u.substring(0,p)]),e[i-1][0]=Jn,e[i-1][1]=h.substring(0,h.length-p),e[i+1][0]=Ls,e[i+1][1]=u.substring(p),i++),i++}i++}}var OM=/[^a-zA-Z0-9]/,PM=/\s/,RM=/[\r\n]/,Eze=/\n\r?\n$/,Cze=/^\r?\n\r?\n/;function Tze(e){function t(p,v){if(!p||!v)return 6;var m=p.charAt(p.length-1),b=v.charAt(0),x=m.match(OM),w=b.match(OM),_=x&&m.match(PM),j=w&&b.match(PM),k=_&&m.match(RM),N=j&&b.match(RM),S=k&&p.match(Eze),E=N&&v.match(Cze);return S||E?5:k||N?4:x&&!_&&j?3:_||j?2:x||w?1:0}for(var r=1;r<e.length-1;){if(e[r-1][0]==Hr&&e[r+1][0]==Hr){var n=e[r-1][1],s=e[r][1],i=e[r+1][1],o=jw(n,s);if(o){var a=s.substring(s.length-o);n=n.substring(0,n.length-o),s=a+s.substring(0,s.length-o),i=a+i}for(var l=n,c=s,u=i,h=t(n,s)+t(s,i);s.charAt(0)===i.charAt(0);){n+=s.charAt(0),s=s.substring(1)+i.charAt(0),i=i.substring(1);var f=t(n,s)+t(s,i);f>=h&&(h=f,l=n,c=s,u=i)}e[r-1][1]!=l&&(l?e[r-1][1]=l:(e.splice(r-1,1),r--),e[r][1]=c,u?e[r+1][1]=u:(e.splice(r+1,1),r--))}r++}}function BO(e,t){e.push([Hr,""]);for(var r=0,n=0,s=0,i="",o="",a;r<e.length;){if(r<e.length-1&&!e[r][1]){e.splice(r,1);continue}switch(e[r][0]){case Jn:s++,o+=e[r][1],r++;break;case Ls:n++,i+=e[r][1],r++;break;case Hr:var l=r-s-n-1;if(t){if(l>=0&&QZ(e[l][1])){var c=e[l][1].slice(-1);if(e[l][1]=e[l][1].slice(0,-1),i=c+i,o=c+o,!e[l][1]){e.splice(l,1),r--;var u=l-1;e[u]&&e[u][0]===Jn&&(s++,o=e[u][1]+o,u--),e[u]&&e[u][0]===Ls&&(n++,i=e[u][1]+i,u--),l=u}}if(XZ(e[r][1])){var c=e[r][1].charAt(0);e[r][1]=e[r][1].slice(1),i+=c,o+=c}}if(r<e.length-1&&!e[r][1]){e.splice(r,1);break}if(i.length>0||o.length>0){i.length>0&&o.length>0&&(a=UO(o,i),a!==0&&(l>=0?e[l][1]+=o.substring(0,a):(e.splice(0,0,[Hr,o.substring(0,a)]),r++),o=o.substring(a),i=i.substring(a)),a=jw(o,i),a!==0&&(e[r][1]=o.substring(o.length-a)+e[r][1],o=o.substring(0,o.length-a),i=i.substring(0,i.length-a)));var h=s+n;i.length===0&&o.length===0?(e.splice(r-h,h),r=r-h):i.length===0?(e.splice(r-h,h,[Jn,o]),r=r-h+1):o.length===0?(e.splice(r-h,h,[Ls,i]),r=r-h+1):(e.splice(r-h,h,[Ls,i],[Jn,o]),r=r-h+2)}r!==0&&e[r-1][0]===Hr?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,s=0,n=0,i="",o="";break}}e[e.length-1][1]===""&&e.pop();var f=!1;for(r=1;r<e.length-1;)e[r-1][0]===Hr&&e[r+1][0]===Hr&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)===e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),f=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),f=!0)),r++;f&&BO(e,t)}function YZ(e){return e>=55296&&e<=56319}function JZ(e){return e>=56320&&e<=57343}function XZ(e){return JZ(e.charCodeAt(0))}function QZ(e){return YZ(e.charCodeAt(e.length-1))}function Aze(e){for(var t=[],r=0;r<e.length;r++)e[r][1].length>0&&t.push(e[r]);return t}function pk(e,t,r,n){return QZ(e)||XZ(n)?null:Aze([[Hr,e],[Ls,t],[Jn,r],[Hr,n]])}function Oze(e,t,r){var n=typeof r=="number"?{index:r,length:0}:r.oldRange,s=typeof r=="number"?null:r.newRange,i=e.length,o=t.length;if(n.length===0&&(s===null||s.length===0)){var a=n.index,l=e.slice(0,a),c=e.slice(a),u=s?s.index:null;e:{var h=a+o-i;if(u!==null&&u!==h||h<0||h>o)break e;var f=t.slice(0,h),p=t.slice(h);if(p!==c)break e;var v=Math.min(a,h),m=l.slice(0,v),b=f.slice(0,v);if(m!==b)break e;var x=l.slice(v),w=f.slice(v);return pk(m,x,w,c)}e:{if(u!==null&&u!==a)break e;var _=a,f=t.slice(0,_),p=t.slice(_);if(f!==l)break e;var j=Math.min(i-_,o-_),k=c.slice(c.length-j),N=p.slice(p.length-j);if(k!==N)break e;var x=c.slice(0,c.length-j),w=p.slice(0,p.length-j);return pk(l,x,w,k)}}if(n.length>0&&s&&s.length===0)e:{var m=e.slice(0,n.index),k=e.slice(n.index+n.length),v=m.length,j=k.length;if(o<v+j)break e;var b=t.slice(0,v),N=t.slice(o-j);if(m!==b||k!==N)break e;var x=e.slice(v,i-j),w=t.slice(v,o-j);return pk(m,x,w,k)}return null}function kw(e,t,r,n){return zm(e,t,r,n,!0)}kw.INSERT=Jn;kw.DELETE=Ls;kw.EQUAL=Hr;var Pze=kw,u0={exports:{}};u0.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",h="[object GeneratorFunction]",f="[object Map]",p="[object Number]",v="[object Object]",m="[object Promise]",b="[object RegExp]",x="[object Set]",w="[object String]",_="[object Symbol]",j="[object WeakMap]",k="[object ArrayBuffer]",N="[object DataView]",S="[object Float32Array]",E="[object Float64Array]",T="[object Int8Array]",P="[object Int16Array]",O="[object Int32Array]",R="[object Uint8Array]",I="[object Uint8ClampedArray]",M="[object Uint16Array]",z="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,q=/\w*$/,Y=/^\[object .+?Constructor\]$/,L=/^(?:0|[1-9]\d*)$/,K={};K[i]=K[o]=K[k]=K[N]=K[a]=K[l]=K[S]=K[E]=K[T]=K[P]=K[O]=K[f]=K[p]=K[v]=K[b]=K[x]=K[w]=K[_]=K[R]=K[I]=K[M]=K[z]=!0,K[c]=K[u]=K[j]=!1;var G=typeof Or=="object"&&Or&&Or.Object===Object&&Or,re=typeof self=="object"&&self&&self.Object===Object&&self,H=G||re||Function("return this")(),ne=t&&!t.nodeType&&t,J=ne&&!0&&e&&!e.nodeType&&e,Ie=J&&J.exports===ne;function me(C,A){return C.set(A[0],A[1]),C}function ge(C,A){return C.add(A),C}function U(C,A){for(var $=-1,te=C?C.length:0;++$<te&&A(C[$],$,C)!==!1;);return C}function Z(C,A){for(var $=-1,te=A.length,Ge=C.length;++$<te;)C[Ge+$]=A[$];return C}function le(C,A,$,te){for(var Ge=-1,Me=C?C.length:0;++Ge<Me;)$=A($,C[Ge],Ge,C);return $}function B(C,A){for(var $=-1,te=Array(C);++$<C;)te[$]=A($);return te}function we(C,A){return C==null?void 0:C[A]}function Ee(C){var A=!1;if(C!=null&&typeof C.toString!="function")try{A=!!(C+"")}catch{}return A}function He(C){var A=-1,$=Array(C.size);return C.forEach(function(te,Ge){$[++A]=[Ge,te]}),$}function Je(C,A){return function($){return C(A($))}}function ct(C){var A=-1,$=Array(C.size);return C.forEach(function(te){$[++A]=te}),$}var Et=Array.prototype,D=Function.prototype,V=Object.prototype,Q=H["__core-js_shared__"],ve=function(){var C=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}(),pe=D.toString,ue=V.hasOwnProperty,_e=V.toString,Ze=RegExp("^"+pe.call(ue).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=Ie?H.Buffer:void 0,at=H.Symbol,Mr=H.Uint8Array,ut=Je(Object.getPrototypeOf,Object),ns=Object.create,Vs=V.propertyIsEnumerable,Si=Et.splice,ss=Object.getOwnPropertySymbols,js=Ue?Ue.isBuffer:void 0,Ei=Je(Object.keys,Object),$r=Ci(H,"DataView"),is=Ci(H,"Map"),un=Ci(H,"Promise"),ks=Ci(H,"Set"),lr=Ci(H,"WeakMap"),Dt=Ci(Object,"create"),mr=$n($r),Er=$n(is),Cr=$n(un),er=$n(ks),Qr=$n(lr),en=at?at.prototype:void 0,Vt=en?en.valueOf:void 0;function Wt(C){var A=-1,$=C?C.length:0;for(this.clear();++A<$;){var te=C[A];this.set(te[0],te[1])}}function Mn(){this.__data__=Dt?Dt(null):{}}function Ws(C){return this.has(C)&&delete this.__data__[C]}function dn(C){var A=this.__data__;if(Dt){var $=A[C];return $===n?void 0:$}return ue.call(A,C)?A[C]:void 0}function hn(C){var A=this.__data__;return Dt?A[C]!==void 0:ue.call(A,C)}function Ns(C,A){var $=this.__data__;return $[C]=Dt&&A===void 0?n:A,this}Wt.prototype.clear=Mn,Wt.prototype.delete=Ws,Wt.prototype.get=dn,Wt.prototype.has=hn,Wt.prototype.set=Ns;function ie(C){var A=-1,$=C?C.length:0;for(this.clear();++A<$;){var te=C[A];this.set(te[0],te[1])}}function qe(){this.__data__=[]}function Be(C){var A=this.__data__,$=Ku(A,C);if($<0)return!1;var te=A.length-1;return $==te?A.pop():Si.call(A,$,1),!0}function cr(C){var A=this.__data__,$=Ku(A,C);return $<0?void 0:A[$][1]}function xn(C){return Ku(this.__data__,C)>-1}function fn(C,A){var $=this.__data__,te=Ku($,C);return te<0?$.push([C,A]):$[te][1]=A,this}ie.prototype.clear=qe,ie.prototype.delete=Be,ie.prototype.get=cr,ie.prototype.has=xn,ie.prototype.set=fn;function Lt(C){var A=-1,$=C?C.length:0;for(this.clear();++A<$;){var te=C[A];this.set(te[0],te[1])}}function Df(){this.__data__={hash:new Wt,map:new(is||ie),string:new Wt}}function e_(C){return yc(this,C).delete(C)}function t_(C){return yc(this,C).get(C)}function r_(C){return yc(this,C).has(C)}function n_(C,A){return yc(this,C).set(C,A),this}Lt.prototype.clear=Df,Lt.prototype.delete=e_,Lt.prototype.get=t_,Lt.prototype.has=r_,Lt.prototype.set=n_;function os(C){this.__data__=new ie(C)}function s_(){this.__data__=new ie}function i_(C){return this.__data__.delete(C)}function o_(C){return this.__data__.get(C)}function a_(C){return this.__data__.has(C)}function l_(C,A){var $=this.__data__;if($ instanceof ie){var te=$.__data__;if(!is||te.length<r-1)return te.push([C,A]),this;$=this.__data__=new Lt(te)}return $.set(C,A),this}os.prototype.clear=s_,os.prototype.delete=i_,os.prototype.get=o_,os.prototype.has=a_,os.prototype.set=l_;function Wu(C,A){var $=Ff(C)||Zu(C)?B(C.length,String):[],te=$.length,Ge=!!te;for(var Me in C)ue.call(C,Me)&&!(Ge&&(Me=="length"||__(Me,te)))&&$.push(Me);return $}function Xg(C,A,$){var te=C[A];(!(ue.call(C,A)&&ny(te,$))||$===void 0&&!(A in C))&&(C[A]=$)}function Ku(C,A){for(var $=C.length;$--;)if(ny(C[$][0],A))return $;return-1}function fo(C,A){return C&&$f(A,Uf(A),C)}function Lf(C,A,$,te,Ge,Me,dt){var lt;if(te&&(lt=Me?te(C,Ge,Me,dt):te(C)),lt!==void 0)return lt;if(!mo(C))return C;var Tr=Ff(C);if(Tr){if(lt=x_(C),!A)return y_(C,lt)}else{var gt=Ho(C),wn=gt==u||gt==h;if(sy(C))return Hu(C,A);if(gt==v||gt==i||wn&&!Me){if(Ee(C))return Me?C:{};if(lt=po(wn?{}:C),!A)return v_(C,fo(lt,C))}else{if(!K[gt])return Me?C:{};lt=w_(C,gt,Lf,A)}}dt||(dt=new os);var as=dt.get(C);if(as)return as;if(dt.set(C,lt),!Tr)var Fr=$?b_(C):Uf(C);return U(Fr||C,function(_n,pn){Fr&&(pn=_n,_n=C[pn]),Xg(lt,pn,Lf(_n,A,$,te,pn,C,dt))}),lt}function c_(C){return mo(C)?ns(C):{}}function u_(C,A,$){var te=A(C);return Ff(C)?te:Z(te,$(C))}function d_(C){return _e.call(C)}function h_(C){if(!mo(C)||k_(C))return!1;var A=zf(C)||Ee(C)?Ze:Y;return A.test($n(C))}function f_(C){if(!ty(C))return Ei(C);var A=[];for(var $ in Object(C))ue.call(C,$)&&$!="constructor"&&A.push($);return A}function Hu(C,A){if(A)return C.slice();var $=new C.constructor(C.length);return C.copy($),$}function Mf(C){var A=new C.constructor(C.byteLength);return new Mr(A).set(new Mr(C)),A}function gc(C,A){var $=A?Mf(C.buffer):C.buffer;return new C.constructor($,C.byteOffset,C.byteLength)}function Qg(C,A,$){var te=A?$(He(C),!0):He(C);return le(te,me,new C.constructor)}function ey(C){var A=new C.constructor(C.source,q.exec(C));return A.lastIndex=C.lastIndex,A}function p_(C,A,$){var te=A?$(ct(C),!0):ct(C);return le(te,ge,new C.constructor)}function m_(C){return Vt?Object(Vt.call(C)):{}}function g_(C,A){var $=A?Mf(C.buffer):C.buffer;return new C.constructor($,C.byteOffset,C.length)}function y_(C,A){var $=-1,te=C.length;for(A||(A=Array(te));++$<te;)A[$]=C[$];return A}function $f(C,A,$,te){$||($={});for(var Ge=-1,Me=A.length;++Ge<Me;){var dt=A[Ge],lt=void 0;Xg($,dt,lt===void 0?C[dt]:lt)}return $}function v_(C,A){return $f(C,Ko(C),A)}function b_(C){return u_(C,Uf,Ko)}function yc(C,A){var $=C.__data__;return j_(A)?$[typeof A=="string"?"string":"hash"]:$.map}function Ci(C,A){var $=we(C,A);return h_($)?$:void 0}var Ko=ss?Je(ss,Object):S_,Ho=d_;($r&&Ho(new $r(new ArrayBuffer(1)))!=N||is&&Ho(new is)!=f||un&&Ho(un.resolve())!=m||ks&&Ho(new ks)!=x||lr&&Ho(new lr)!=j)&&(Ho=function(C){var A=_e.call(C),$=A==v?C.constructor:void 0,te=$?$n($):void 0;if(te)switch(te){case mr:return N;case Er:return f;case Cr:return m;case er:return x;case Qr:return j}return A});function x_(C){var A=C.length,$=C.constructor(A);return A&&typeof C[0]=="string"&&ue.call(C,"index")&&($.index=C.index,$.input=C.input),$}function po(C){return typeof C.constructor=="function"&&!ty(C)?c_(ut(C)):{}}function w_(C,A,$,te){var Ge=C.constructor;switch(A){case k:return Mf(C);case a:case l:return new Ge(+C);case N:return gc(C,te);case S:case E:case T:case P:case O:case R:case I:case M:case z:return g_(C,te);case f:return Qg(C,te,$);case p:case w:return new Ge(C);case b:return ey(C);case x:return p_(C,te,$);case _:return m_(C)}}function __(C,A){return A=A??s,!!A&&(typeof C=="number"||L.test(C))&&C>-1&&C%1==0&&C<A}function j_(C){var A=typeof C;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?C!=="__proto__":C===null}function k_(C){return!!ve&&ve in C}function ty(C){var A=C&&C.constructor,$=typeof A=="function"&&A.prototype||V;return C===$}function $n(C){if(C!=null){try{return pe.call(C)}catch{}try{return C+""}catch{}}return""}function ry(C){return Lf(C,!0,!0)}function ny(C,A){return C===A||C!==C&&A!==A}function Zu(C){return N_(C)&&ue.call(C,"callee")&&(!Vs.call(C,"callee")||_e.call(C)==i)}var Ff=Array.isArray;function Gu(C){return C!=null&&iy(C.length)&&!zf(C)}function N_(C){return oy(C)&&Gu(C)}var sy=js||E_;function zf(C){var A=mo(C)?_e.call(C):"";return A==u||A==h}function iy(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=s}function mo(C){var A=typeof C;return!!C&&(A=="object"||A=="function")}function oy(C){return!!C&&typeof C=="object"}function Uf(C){return Gu(C)?Wu(C):f_(C)}function S_(){return[]}function E_(){return!1}e.exports=ry})(u0,u0.exports);var eG=u0.exports,d0={exports:{}};d0.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",s=1,i=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",f="[object Error]",p="[object Function]",v="[object GeneratorFunction]",m="[object Map]",b="[object Number]",x="[object Null]",w="[object Object]",_="[object Promise]",j="[object Proxy]",k="[object RegExp]",N="[object Set]",S="[object String]",E="[object Symbol]",T="[object Undefined]",P="[object WeakMap]",O="[object ArrayBuffer]",R="[object DataView]",I="[object Float32Array]",M="[object Float64Array]",z="[object Int8Array]",W="[object Int16Array]",q="[object Int32Array]",Y="[object Uint8Array]",L="[object Uint8ClampedArray]",K="[object Uint16Array]",G="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,J={};J[I]=J[M]=J[z]=J[W]=J[q]=J[Y]=J[L]=J[K]=J[G]=!0,J[a]=J[l]=J[O]=J[u]=J[R]=J[h]=J[f]=J[p]=J[m]=J[b]=J[w]=J[k]=J[N]=J[S]=J[P]=!1;var Ie=typeof Or=="object"&&Or&&Or.Object===Object&&Or,me=typeof self=="object"&&self&&self.Object===Object&&self,ge=Ie||me||Function("return this")(),U=t&&!t.nodeType&&t,Z=U&&!0&&e&&!e.nodeType&&e,le=Z&&Z.exports===U,B=le&&Ie.process,we=function(){try{return B&&B.binding&&B.binding("util")}catch{}}(),Ee=we&&we.isTypedArray;function He(C,A){for(var $=-1,te=C==null?0:C.length,Ge=0,Me=[];++$<te;){var dt=C[$];A(dt,$,C)&&(Me[Ge++]=dt)}return Me}function Je(C,A){for(var $=-1,te=A.length,Ge=C.length;++$<te;)C[Ge+$]=A[$];return C}function ct(C,A){for(var $=-1,te=C==null?0:C.length;++$<te;)if(A(C[$],$,C))return!0;return!1}function Et(C,A){for(var $=-1,te=Array(C);++$<C;)te[$]=A($);return te}function D(C){return function(A){return C(A)}}function V(C,A){return C.has(A)}function Q(C,A){return C==null?void 0:C[A]}function ve(C){var A=-1,$=Array(C.size);return C.forEach(function(te,Ge){$[++A]=[Ge,te]}),$}function pe(C,A){return function($){return C(A($))}}function ue(C){var A=-1,$=Array(C.size);return C.forEach(function(te){$[++A]=te}),$}var _e=Array.prototype,Ze=Function.prototype,Ue=Object.prototype,at=ge["__core-js_shared__"],Mr=Ze.toString,ut=Ue.hasOwnProperty,ns=function(){var C=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}(),Vs=Ue.toString,Si=RegExp("^"+Mr.call(ut).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ss=le?ge.Buffer:void 0,js=ge.Symbol,Ei=ge.Uint8Array,$r=Ue.propertyIsEnumerable,is=_e.splice,un=js?js.toStringTag:void 0,ks=Object.getOwnPropertySymbols,lr=ss?ss.isBuffer:void 0,Dt=pe(Object.keys,Object),mr=Ko(ge,"DataView"),Er=Ko(ge,"Map"),Cr=Ko(ge,"Promise"),er=Ko(ge,"Set"),Qr=Ko(ge,"WeakMap"),en=Ko(Object,"create"),Vt=$n(mr),Wt=$n(Er),Mn=$n(Cr),Ws=$n(er),dn=$n(Qr),hn=js?js.prototype:void 0,Ns=hn?hn.valueOf:void 0;function ie(C){var A=-1,$=C==null?0:C.length;for(this.clear();++A<$;){var te=C[A];this.set(te[0],te[1])}}function qe(){this.__data__=en?en(null):{},this.size=0}function Be(C){var A=this.has(C)&&delete this.__data__[C];return this.size-=A?1:0,A}function cr(C){var A=this.__data__;if(en){var $=A[C];return $===n?void 0:$}return ut.call(A,C)?A[C]:void 0}function xn(C){var A=this.__data__;return en?A[C]!==void 0:ut.call(A,C)}function fn(C,A){var $=this.__data__;return this.size+=this.has(C)?0:1,$[C]=en&&A===void 0?n:A,this}ie.prototype.clear=qe,ie.prototype.delete=Be,ie.prototype.get=cr,ie.prototype.has=xn,ie.prototype.set=fn;function Lt(C){var A=-1,$=C==null?0:C.length;for(this.clear();++A<$;){var te=C[A];this.set(te[0],te[1])}}function Df(){this.__data__=[],this.size=0}function e_(C){var A=this.__data__,$=Hu(A,C);if($<0)return!1;var te=A.length-1;return $==te?A.pop():is.call(A,$,1),--this.size,!0}function t_(C){var A=this.__data__,$=Hu(A,C);return $<0?void 0:A[$][1]}function r_(C){return Hu(this.__data__,C)>-1}function n_(C,A){var $=this.__data__,te=Hu($,C);return te<0?(++this.size,$.push([C,A])):$[te][1]=A,this}Lt.prototype.clear=Df,Lt.prototype.delete=e_,Lt.prototype.get=t_,Lt.prototype.has=r_,Lt.prototype.set=n_;function os(C){var A=-1,$=C==null?0:C.length;for(this.clear();++A<$;){var te=C[A];this.set(te[0],te[1])}}function s_(){this.size=0,this.__data__={hash:new ie,map:new(Er||Lt),string:new ie}}function i_(C){var A=Ci(this,C).delete(C);return this.size-=A?1:0,A}function o_(C){return Ci(this,C).get(C)}function a_(C){return Ci(this,C).has(C)}function l_(C,A){var $=Ci(this,C),te=$.size;return $.set(C,A),this.size+=$.size==te?0:1,this}os.prototype.clear=s_,os.prototype.delete=i_,os.prototype.get=o_,os.prototype.has=a_,os.prototype.set=l_;function Wu(C){var A=-1,$=C==null?0:C.length;for(this.__data__=new os;++A<$;)this.add(C[A])}function Xg(C){return this.__data__.set(C,n),this}function Ku(C){return this.__data__.has(C)}Wu.prototype.add=Wu.prototype.push=Xg,Wu.prototype.has=Ku;function fo(C){var A=this.__data__=new Lt(C);this.size=A.size}function Lf(){this.__data__=new Lt,this.size=0}function c_(C){var A=this.__data__,$=A.delete(C);return this.size=A.size,$}function u_(C){return this.__data__.get(C)}function d_(C){return this.__data__.has(C)}function h_(C,A){var $=this.__data__;if($ instanceof Lt){var te=$.__data__;if(!Er||te.length<r-1)return te.push([C,A]),this.size=++$.size,this;$=this.__data__=new os(te)}return $.set(C,A),this.size=$.size,this}fo.prototype.clear=Lf,fo.prototype.delete=c_,fo.prototype.get=u_,fo.prototype.has=d_,fo.prototype.set=h_;function f_(C,A){var $=Zu(C),te=!$&&ny(C),Ge=!$&&!te&&Gu(C),Me=!$&&!te&&!Ge&&oy(C),dt=$||te||Ge||Me,lt=dt?Et(C.length,String):[],Tr=lt.length;for(var gt in C)ut.call(C,gt)&&!(dt&&(gt=="length"||Ge&&(gt=="offset"||gt=="parent")||Me&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||w_(gt,Tr)))&&lt.push(gt);return lt}function Hu(C,A){for(var $=C.length;$--;)if(ry(C[$][0],A))return $;return-1}function Mf(C,A,$){var te=A(C);return Zu(C)?te:Je(te,$(C))}function gc(C){return C==null?C===void 0?T:x:un&&un in Object(C)?Ho(C):ty(C)}function Qg(C){return mo(C)&&gc(C)==a}function ey(C,A,$,te,Ge){return C===A?!0:C==null||A==null||!mo(C)&&!mo(A)?C!==C&&A!==A:p_(C,A,$,te,ey,Ge)}function p_(C,A,$,te,Ge,Me){var dt=Zu(C),lt=Zu(A),Tr=dt?l:po(C),gt=lt?l:po(A);Tr=Tr==a?w:Tr,gt=gt==a?w:gt;var wn=Tr==w,as=gt==w,Fr=Tr==gt;if(Fr&&Gu(C)){if(!Gu(A))return!1;dt=!0,wn=!1}if(Fr&&!wn)return Me||(Me=new fo),dt||oy(C)?$f(C,A,$,te,Ge,Me):v_(C,A,Tr,$,te,Ge,Me);if(!($&s)){var _n=wn&&ut.call(C,"__wrapped__"),pn=as&&ut.call(A,"__wrapped__");if(_n||pn){var Ya=_n?C.value():C,Zo=pn?A.value():A;return Me||(Me=new fo),Ge(Ya,Zo,$,te,Me)}}return Fr?(Me||(Me=new fo),b_(C,A,$,te,Ge,Me)):!1}function m_(C){if(!iy(C)||j_(C))return!1;var A=sy(C)?Si:H;return A.test($n(C))}function g_(C){return mo(C)&&zf(C.length)&&!!J[gc(C)]}function y_(C){if(!k_(C))return Dt(C);var A=[];for(var $ in Object(C))ut.call(C,$)&&$!="constructor"&&A.push($);return A}function $f(C,A,$,te,Ge,Me){var dt=$&s,lt=C.length,Tr=A.length;if(lt!=Tr&&!(dt&&Tr>lt))return!1;var gt=Me.get(C);if(gt&&Me.get(A))return gt==A;var wn=-1,as=!0,Fr=$&i?new Wu:void 0;for(Me.set(C,A),Me.set(A,C);++wn<lt;){var _n=C[wn],pn=A[wn];if(te)var Ya=dt?te(pn,_n,wn,A,C,Me):te(_n,pn,wn,C,A,Me);if(Ya!==void 0){if(Ya)continue;as=!1;break}if(Fr){if(!ct(A,function(Zo,vc){if(!V(Fr,vc)&&(_n===Zo||Ge(_n,Zo,$,te,Me)))return Fr.push(vc)})){as=!1;break}}else if(!(_n===pn||Ge(_n,pn,$,te,Me))){as=!1;break}}return Me.delete(C),Me.delete(A),as}function v_(C,A,$,te,Ge,Me,dt){switch($){case R:if(C.byteLength!=A.byteLength||C.byteOffset!=A.byteOffset)return!1;C=C.buffer,A=A.buffer;case O:return!(C.byteLength!=A.byteLength||!Me(new Ei(C),new Ei(A)));case u:case h:case b:return ry(+C,+A);case f:return C.name==A.name&&C.message==A.message;case k:case S:return C==A+"";case m:var lt=ve;case N:var Tr=te&s;if(lt||(lt=ue),C.size!=A.size&&!Tr)return!1;var gt=dt.get(C);if(gt)return gt==A;te|=i,dt.set(C,A);var wn=$f(lt(C),lt(A),te,Ge,Me,dt);return dt.delete(C),wn;case E:if(Ns)return Ns.call(C)==Ns.call(A)}return!1}function b_(C,A,$,te,Ge,Me){var dt=$&s,lt=yc(C),Tr=lt.length,gt=yc(A),wn=gt.length;if(Tr!=wn&&!dt)return!1;for(var as=Tr;as--;){var Fr=lt[as];if(!(dt?Fr in A:ut.call(A,Fr)))return!1}var _n=Me.get(C);if(_n&&Me.get(A))return _n==A;var pn=!0;Me.set(C,A),Me.set(A,C);for(var Ya=dt;++as<Tr;){Fr=lt[as];var Zo=C[Fr],vc=A[Fr];if(te)var ZP=dt?te(vc,Zo,Fr,A,C,Me):te(Zo,vc,Fr,C,A,Me);if(!(ZP===void 0?Zo===vc||Ge(Zo,vc,$,te,Me):ZP)){pn=!1;break}Ya||(Ya=Fr=="constructor")}if(pn&&!Ya){var ay=C.constructor,ly=A.constructor;ay!=ly&&"constructor"in C&&"constructor"in A&&!(typeof ay=="function"&&ay instanceof ay&&typeof ly=="function"&&ly instanceof ly)&&(pn=!1)}return Me.delete(C),Me.delete(A),pn}function yc(C){return Mf(C,Uf,x_)}function Ci(C,A){var $=C.__data__;return __(A)?$[typeof A=="string"?"string":"hash"]:$.map}function Ko(C,A){var $=Q(C,A);return m_($)?$:void 0}function Ho(C){var A=ut.call(C,un),$=C[un];try{C[un]=void 0;var te=!0}catch{}var Ge=Vs.call(C);return te&&(A?C[un]=$:delete C[un]),Ge}var x_=ks?function(C){return C==null?[]:(C=Object(C),He(ks(C),function(A){return $r.call(C,A)}))}:S_,po=gc;(mr&&po(new mr(new ArrayBuffer(1)))!=R||Er&&po(new Er)!=m||Cr&&po(Cr.resolve())!=_||er&&po(new er)!=N||Qr&&po(new Qr)!=P)&&(po=function(C){var A=gc(C),$=A==w?C.constructor:void 0,te=$?$n($):"";if(te)switch(te){case Vt:return R;case Wt:return m;case Mn:return _;case Ws:return N;case dn:return P}return A});function w_(C,A){return A=A??o,!!A&&(typeof C=="number"||ne.test(C))&&C>-1&&C%1==0&&C<A}function __(C){var A=typeof C;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?C!=="__proto__":C===null}function j_(C){return!!ns&&ns in C}function k_(C){var A=C&&C.constructor,$=typeof A=="function"&&A.prototype||Ue;return C===$}function ty(C){return Vs.call(C)}function $n(C){if(C!=null){try{return Mr.call(C)}catch{}try{return C+""}catch{}}return""}function ry(C,A){return C===A||C!==C&&A!==A}var ny=Qg(function(){return arguments}())?Qg:function(C){return mo(C)&&ut.call(C,"callee")&&!$r.call(C,"callee")},Zu=Array.isArray;function Ff(C){return C!=null&&zf(C.length)&&!sy(C)}var Gu=lr||E_;function N_(C,A){return ey(C,A)}function sy(C){if(!iy(C))return!1;var A=gc(C);return A==p||A==v||A==c||A==j}function zf(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=o}function iy(C){var A=typeof C;return C!=null&&(A=="object"||A=="function")}function mo(C){return C!=null&&typeof C=="object"}var oy=Ee?D(Ee):g_;function Uf(C){return Ff(C)?f_(C):y_(C)}function S_(){return[]}function E_(){return!1}e.exports=N_})(d0,d0.exports);var tG=d0.exports,qO={};Object.defineProperty(qO,"__esModule",{value:!0});const Rze=eG,Ize=tG;var E2;(function(e){function t(i={},o={},a=!1){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});let l=Rze(o);a||(l=Object.keys(l).reduce((c,u)=>(l[u]!=null&&(c[u]=l[u]),c),{}));for(const c in i)i[c]!==void 0&&o[c]===void 0&&(l[c]=i[c]);return Object.keys(l).length>0?l:void 0}e.compose=t;function r(i={},o={}){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});const a=Object.keys(i).concat(Object.keys(o)).reduce((l,c)=>(Ize(i[c],o[c])||(l[c]=o[c]===void 0?null:o[c]),l),{});return Object.keys(a).length>0?a:void 0}e.diff=r;function n(i={},o={}){i=i||{};const a=Object.keys(o).reduce((l,c)=>(o[c]!==i[c]&&i[c]!==void 0&&(l[c]=o[c]),l),{});return Object.keys(i).reduce((l,c)=>(i[c]!==o[c]&&o[c]===void 0&&(l[c]=null),l),a)}e.invert=n;function s(i,o,a=!1){if(typeof i!="object")return o;if(typeof o!="object")return;if(!a)return o;const l=Object.keys(o).reduce((c,u)=>(i[u]===void 0&&(c[u]=o[u]),c),{});return Object.keys(l).length>0?l:void 0}e.transform=s})(E2||(E2={}));qO.default=E2;var Nw={};Object.defineProperty(Nw,"__esModule",{value:!0});var C2;(function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t})(C2||(C2={}));Nw.default=C2;var VO={};Object.defineProperty(VO,"__esModule",{value:!0});const IM=Nw;class Dze{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const r=this.ops[this.index];if(r){const n=this.offset,s=IM.default.length(r);if(t>=s-n?(t=s-n,this.index+=1,this.offset=0):this.offset+=t,typeof r.delete=="number")return{delete:t};{const i={};return r.attributes&&(i.attributes=r.attributes),typeof r.retain=="number"?i.retain=t:typeof r.retain=="object"&&r.retain!==null?i.retain=r.retain:typeof r.insert=="string"?i.insert=r.insert.substr(n,t):i.insert=r.insert,i}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?IM.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const t=this.offset,r=this.index,n=this.next(),s=this.ops.slice(this.index);return this.offset=t,this.index=r,[n].concat(s)}}else return[]}}VO.default=Dze;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const r=Pze,n=eG,s=tG,i=qO;t.AttributeMap=i.default;const o=Nw;t.Op=o.default;const a=VO;t.OpIterator=a.default;const l="\0",c=(h,f)=>{if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);const p=Object.keys(h)[0];if(!p||p!==Object.keys(f)[0])throw new Error(`embed types not matched: ${p} != ${Object.keys(f)[0]}`);return[p,h[p],f[p]]};class u{constructor(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]}static registerEmbed(f,p){this.handlers[f]=p}static unregisterEmbed(f){delete this.handlers[f]}static getHandler(f){const p=this.handlers[f];if(!p)throw new Error(`no handlers for embed type "${f}"`);return p}insert(f,p){const v={};return typeof f=="string"&&f.length===0?this:(v.insert=f,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(v.attributes=p),this.push(v))}delete(f){return f<=0?this:this.push({delete:f})}retain(f,p){if(typeof f=="number"&&f<=0)return this;const v={retain:f};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(v.attributes=p),this.push(v)}push(f){let p=this.ops.length,v=this.ops[p-1];if(f=n(f),typeof v=="object"){if(typeof f.delete=="number"&&typeof v.delete=="number")return this.ops[p-1]={delete:v.delete+f.delete},this;if(typeof v.delete=="number"&&f.insert!=null&&(p-=1,v=this.ops[p-1],typeof v!="object"))return this.ops.unshift(f),this;if(s(f.attributes,v.attributes)){if(typeof f.insert=="string"&&typeof v.insert=="string")return this.ops[p-1]={insert:v.insert+f.insert},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof v.retain=="number")return this.ops[p-1]={retain:v.retain+f.retain},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this}}return p===this.ops.length?this.ops.push(f):this.ops.splice(p,0,f),this}chop(){const f=this.ops[this.ops.length-1];return f&&typeof f.retain=="number"&&!f.attributes&&this.ops.pop(),this}filter(f){return this.ops.filter(f)}forEach(f){this.ops.forEach(f)}map(f){return this.ops.map(f)}partition(f){const p=[],v=[];return this.forEach(m=>{(f(m)?p:v).push(m)}),[p,v]}reduce(f,p){return this.ops.reduce(f,p)}changeLength(){return this.reduce((f,p)=>p.insert?f+o.default.length(p):p.delete?f-p.delete:f,0)}length(){return this.reduce((f,p)=>f+o.default.length(p),0)}slice(f=0,p=1/0){const v=[],m=new a.default(this.ops);let b=0;for(;b<p&&m.hasNext();){let x;b<f?x=m.next(f-b):(x=m.next(p-b),v.push(x)),b+=o.default.length(x)}return new u(v)}compose(f){const p=new a.default(this.ops),v=new a.default(f.ops),m=[],b=v.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){let w=b.retain;for(;p.peekType()==="insert"&&p.peekLength()<=w;)w-=p.peekLength(),m.push(p.next());b.retain-w>0&&v.next(b.retain-w)}const x=new u(m);for(;p.hasNext()||v.hasNext();)if(v.peekType()==="insert")x.push(v.next());else if(p.peekType()==="delete")x.push(p.next());else{const w=Math.min(p.peekLength(),v.peekLength()),_=p.next(w),j=v.next(w);if(j.retain){const k={};if(typeof _.retain=="number")k.retain=typeof j.retain=="number"?w:j.retain;else if(typeof j.retain=="number")_.retain==null?k.insert=_.insert:k.retain=_.retain;else{const S=_.retain==null?"insert":"retain",[E,T,P]=c(_[S],j.retain),O=u.getHandler(E);k[S]={[E]:O.compose(T,P,S==="retain")}}const N=i.default.compose(_.attributes,j.attributes,typeof _.retain=="number");if(N&&(k.attributes=N),x.push(k),!v.hasNext()&&s(x.ops[x.ops.length-1],k)){const S=new u(p.rest());return x.concat(S).chop()}}else typeof j.delete=="number"&&(typeof _.retain=="number"||typeof _.retain=="object"&&_.retain!==null)&&x.push(j)}return x.chop()}concat(f){const p=new u(this.ops.slice());return f.ops.length>0&&(p.push(f.ops[0]),p.ops=p.ops.concat(f.ops.slice(1))),p}diff(f,p){if(this.ops===f.ops)return new u;const v=[this,f].map(_=>_.map(j=>{if(j.insert!=null)return typeof j.insert=="string"?j.insert:l;const k=_===f?"on":"with";throw new Error("diff() called "+k+" non-document")}).join("")),m=new u,b=r(v[0],v[1],p,!0),x=new a.default(this.ops),w=new a.default(f.ops);return b.forEach(_=>{let j=_[1].length;for(;j>0;){let k=0;switch(_[0]){case r.INSERT:k=Math.min(w.peekLength(),j),m.push(w.next(k));break;case r.DELETE:k=Math.min(j,x.peekLength()),x.next(k),m.delete(k);break;case r.EQUAL:k=Math.min(x.peekLength(),w.peekLength(),j);const N=x.next(k),S=w.next(k);s(N.insert,S.insert)?m.retain(k,i.default.diff(N.attributes,S.attributes)):m.push(S).delete(k);break}j-=k}}),m.chop()}eachLine(f,p=`
`){const v=new a.default(this.ops);let m=new u,b=0;for(;v.hasNext();){if(v.peekType()!=="insert")return;const x=v.peek(),w=o.default.length(x)-v.peekLength(),_=typeof x.insert=="string"?x.insert.indexOf(p,w)-w:-1;if(_<0)m.push(v.next());else if(_>0)m.push(v.next(_));else{if(f(m,v.next(1).attributes||{},b)===!1)return;b+=1,m=new u}}m.length()>0&&f(m,{},b)}invert(f){const p=new u;return this.reduce((v,m)=>{if(m.insert)p.delete(o.default.length(m));else{if(typeof m.retain=="number"&&m.attributes==null)return p.retain(m.retain),v+m.retain;if(m.delete||typeof m.retain=="number"){const b=m.delete||m.retain;return f.slice(v,v+b).forEach(x=>{m.delete?p.push(x):m.retain&&m.attributes&&p.retain(o.default.length(x),i.default.invert(m.attributes,x.attributes))}),v+b}else if(typeof m.retain=="object"&&m.retain!==null){const b=f.slice(v,v+1),x=new a.default(b.ops).next(),[w,_,j]=c(m.retain,x.insert),k=u.getHandler(w);return p.retain({[w]:k.invert(_,j)},i.default.invert(m.attributes,x.attributes)),v+1}}return v},0),p.chop()}transform(f,p=!1){if(p=!!p,typeof f=="number")return this.transformPosition(f,p);const v=f,m=new a.default(this.ops),b=new a.default(v.ops),x=new u;for(;m.hasNext()||b.hasNext();)if(m.peekType()==="insert"&&(p||b.peekType()!=="insert"))x.retain(o.default.length(m.next()));else if(b.peekType()==="insert")x.push(b.next());else{const w=Math.min(m.peekLength(),b.peekLength()),_=m.next(w),j=b.next(w);if(_.delete)continue;if(j.delete)x.push(j);else{const k=_.retain,N=j.retain;let S=typeof N=="object"&&N!==null?N:w;if(typeof k=="object"&&k!==null&&typeof N=="object"&&N!==null){const E=Object.keys(k)[0];if(E===Object.keys(N)[0]){const T=u.getHandler(E);T&&(S={[E]:T.transform(k[E],N[E],p)})}}x.retain(S,i.default.transform(_.attributes,j.attributes,p))}}return x.chop()}transformPosition(f,p=!1){p=!!p;const v=new a.default(this.ops);let m=0;for(;v.hasNext()&&m<=f;){const b=v.peekLength(),x=v.peekType();if(v.next(),x==="delete"){f-=Math.min(b,f-m);continue}else x==="insert"&&(m<f||!p)&&(f+=b);m+=b}return f}}u.Op=o.default,u.OpIterator=a.default,u.AttributeMap=i.default,u.handlers={},t.default=u,e.exports=u,e.exports.default=u})(S2,S2.exports);var ci=S2.exports;const Pe=io(ci);class co extends qs{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}co.blotName="break";co.tagName="BR";let to=class extends c0{};const Lze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Sw(e){return e.replace(/[&<>"']/g,t=>Lze[t])}const Rv=class _d extends FO{static compare(t,r){const n=_d.order.indexOf(t),s=_d.order.indexOf(r);return n>=0||s>=0?n-s:t===r?0:t<r?-1:1}formatAt(t,r,n,s){if(_d.compare(this.statics.blotName,n)<0&&this.scroll.query(n,Re.BLOT)){const i=this.isolate(t,r);s&&i.wrap(n,s)}else super.formatAt(t,r,n,s)}optimize(t){if(super.optimize(t),this.parent instanceof _d&&_d.compare(this.statics.blotName,this.parent.statics.blotName)>0){const r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}};de(Rv,"allowedChildren",[Rv,co,qs,to]),de(Rv,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let fc=Rv;const DM=1;class bn extends Fm{constructor(){super(...arguments),de(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=rG(this)),this.cache.delta}deleteAt(t,r){super.deleteAt(t,r),this.cache={}}formatAt(t,r,n,s){r<=0||(this.scroll.query(n,Re.BLOCK)?t+r===this.length()&&this.format(n,s):super.formatAt(t,Math.min(r,this.length()-t-1),n,s),this.cache={})}insertAt(t,r,n){if(n!=null){super.insertAt(t,r,n),this.cache={};return}if(r.length===0)return;const s=r.split(`
`),i=s.shift();i.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});let o=this;s.reduce((a,l)=>(o=o.split(a,!0),o.insertAt(0,l),l.length),t+i.length)}insertBefore(t,r){const{head:n}=this.children;super.insertBefore(t,r),n instanceof co&&n.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+DM),this.cache.length}moveChildren(t,r){super.moveChildren(t,r),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(t===0||t>=this.length()-DM)){const s=this.clone();return t===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const n=super.split(t,r);return this.cache={},n}}bn.blotName="block";bn.tagName="P";bn.defaultChild=co;bn.allowedChildren=[co,fc,qs,to];class ui extends qs{attach(){super.attach(),this.attributes=new ww(this.domNode)}delta(){return new Pe().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,r){const n=this.scroll.query(t,Re.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,r)}formatAt(t,r,n,s){this.format(n,s)}insertAt(t,r,n){if(n!=null){super.insertAt(t,r,n);return}const s=r.split(`
`),i=s.pop(),o=s.map(l=>{const c=this.scroll.create(bn.blotName);return c.insertAt(0,l),c}),a=this.split(t);o.forEach(l=>{this.parent.insertBefore(l,a)}),i&&this.parent.insertBefore(this.scroll.create("text",i),a)}}ui.scope=Re.BLOCK_BLOT;function rG(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.descendants(An).reduce((r,n)=>n.length()===0?r:r.insert(n.value(),ii(n,{},t)),new Pe).insert(`
`,ii(e))}function ii(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e==null||("formats"in e&&typeof e.formats=="function"&&(t={...t,...e.formats()},r&&delete t["code-token"]),e.parent==null||e.parent.statics.blotName==="scroll"||e.parent.statics.scope!==e.statics.scope)?t:ii(e.parent,t,r)}const Ep=class Rc extends qs{static value(){}constructor(t,r,n){super(t,r),this.selection=n,this.textNode=document.createTextNode(Rc.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,r){if(this.savedLength!==0){super.format(t,r);return}let n=this,s=0;for(;n!=null&&n.statics.scope!==Re.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=Rc.CONTENTS.length,n.optimize(),n.formatAt(s,Rc.CONTENTS.length,t,r),this.savedLength=0)}index(t,r){return t===this.textNode?0:super.index(t,r)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const r=this.prev instanceof to?this.prev:null,n=r?r.length():0,s=this.next instanceof to?this.next:null,i=s?s.text:"",{textNode:o}=this,a=o.data.split(Rc.CONTENTS).join("");o.data=Rc.CONTENTS;let l;if(r)l=r,(a||s)&&(r.insertAt(r.length(),a+i),s&&s.remove());else if(s)l=s,s.insertAt(0,a);else{const c=document.createTextNode(a);l=this.scroll.create(c),this.parent.insertBefore(l,this)}if(this.remove(),t){const c=(f,p)=>r&&f===r.domNode?p:f===o?n+p-1:s&&f===s.domNode?n+a.length+p:null,u=c(t.start.node,t.start.offset),h=c(t.end.node,t.end.offset);if(u!==null&&h!==null)return{startNode:l.domNode,startOffset:u,endNode:l.domNode,endOffset:h}}return null}update(t,r){if(t.some(n=>n.type==="characterData"&&n.target===this.textNode)){const n=this.restore();n&&(r.range=n)}}optimize(t){super.optimize(t);let{parent:r}=this;for(;r;){if(r.domNode.tagName==="A"){this.savedLength=Rc.CONTENTS.length,r.isolate(this.offset(r),this.length()).unwrap(),this.savedLength=0;break}r=r.parent}}value(){return""}};de(Ep,"blotName","cursor"),de(Ep,"className","ql-cursor"),de(Ep,"tagName","span"),de(Ep,"CONTENTS","\uFEFF");let Ew=Ep;const T2=new WeakMap,A2=["error","warn","log","info"];let O2="warn";function nG(e){if(O2&&A2.indexOf(e)<=A2.indexOf(O2)){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console[e](...r)}}function Za(e){return A2.reduce((t,r)=>(t[r]=nG.bind(console,r,e),t),{})}Za.level=e=>{O2=e};nG.level=Za.level;const mk=Za("quill:events"),Mze=["selectionchange","mousedown","mouseup","click"];Mze.forEach(e=>{document.addEventListener(e,function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=T2.get(s);i&&i.emitter&&i.emitter.handleDOM(...r)})})});class Te extends nH{constructor(){super(),this.domListeners={},this.on("error",mk.error)}emit(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return mk.log.call(mk,...r),super.emit(...r)}handleDOM(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach(i=>{let{node:o,handler:a}=i;(t.target===o||o.contains(t.target))&&a(t,...n)})}listenDOM(t,r,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:r,handler:n})}}de(Te,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),de(Te,"sources",{API:"api",SILENT:"silent",USER:"user"});const gk=Za("quill:selection");let ju=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}};class $ze{constructor(t,r){this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new ju(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Te.sources.USER),1)}),this.emitter.on(Te.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once(Te.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const o=i.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(o?Te.sources.SILENT:s)}catch{}})}),this.emitter.on(Te.events.SCROLL_OPTIMIZE,(n,s)=>{if(s.range){const{startNode:i,startOffset:o,endNode:a,endOffset:l}=s.range;this.setNativeRange(i,o,a,l),this.update(Te.sources.SILENT)}}),this.update(Te.sources.SILENT)}handleComposition(){this.emitter.on(Te.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Te.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Te.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,r){this.scroll.update();const n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(t,Re.BLOCK))){if(n.start.node!==this.cursor.textNode){const s=this.scroll.find(n.start.node,!1);if(s==null)return;if(s instanceof An){const i=s.split(n.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,r),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=this.scroll.length();t=Math.min(t,n-1),r=Math.min(t+r,n-1)-t;let s,[i,o]=this.scroll.leaf(t);if(i==null)return null;if(r>0&&o===i.length()){const[u]=this.scroll.leaf(t+1);if(u){const[h]=this.scroll.line(t),[f]=this.scroll.line(t+1);h===f&&(i=u,o=0)}}[s,o]=i.position(o,!0);const a=document.createRange();if(r>0)return a.setStart(s,o),[i,o]=this.scroll.leaf(t+r),i==null?null:([s,o]=i.position(o,!0),a.setEnd(s,o),a.getBoundingClientRect());let l="left",c;if(s instanceof Text){if(!s.data.length)return null;o<s.data.length?(a.setStart(s,o),a.setEnd(s,o+1)):(a.setStart(s,o-1),a.setEnd(s,o),l="right"),c=a.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;c=i.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const r=t.getRangeAt(0);if(r==null)return null;const n=this.normalizeNative(r);return gk.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const r=this.getNativeRange();return r==null?[null,null]:[this.normalizedToRange(r),r]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&yk(this.root,document.activeElement)}normalizedToRange(t){const r=[[t.start.node,t.start.offset]];t.native.collapsed||r.push([t.end.node,t.end.offset]);const n=r.map(o=>{const[a,l]=o,c=this.scroll.find(a,!0),u=c.offset(this.scroll);return l===0?u:c instanceof An?u+c.index(a,l):u+c.length()}),s=Math.min(Math.max(...n),this.scroll.length()-1),i=Math.min(s,...n);return new ju(i,s-i)}normalizeNative(t){if(!yk(this.root,t.startContainer)||!t.collapsed&&!yk(this.root,t.endContainer))return null;const r={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[r.start,r.end].forEach(n=>{let{node:s,offset:i}=n;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;n.node=s,n.offset=i}),r}rangeToNative(t){const r=this.scroll.length(),n=(s,i)=>{s=Math.min(r-1,s);const[o,a]=this.scroll.leaf(s);return o?o.position(a,i):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(gk.info("setNativeRange",t,r,n,s),t!=null&&(this.root.parentNode==null||t.parentNode==null||n.parentNode==null))return;const o=document.getSelection();if(o!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(a==null||i||t!==a.startContainer||r!==a.startOffset||n!==a.endContainer||s!==a.endOffset){t instanceof Element&&t.tagName==="BR"&&(r=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&n.tagName==="BR"&&(s=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const l=document.createRange();l.setStart(t,r),l.setEnd(n,s),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;if(typeof r=="string"&&(n=r,r=!1),gk.info("setRange",t),t!=null){const s=this.rangeToNative(t);this.setNativeRange(...s,r)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.sources.USER;const r=this.lastRange,[n,s]=this.getRange();if(this.lastRange=n,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!xl(r,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const i=[Te.events.SELECTION_CHANGE,Qd(this.lastRange),Qd(r),t];this.emitter.emit(Te.events.EDITOR_CHANGE,...i),t!==Te.sources.SILENT&&this.emitter.emit(...i)}}}function yk(e,t){try{t.parentNode}catch{return!1}return e.contains(t)}const Fze=/^[ -~]*$/;class zze{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let r=this.scroll.length();this.scroll.batchStart();const n=LM(t),s=new Pe;return Bze(n.ops.slice()).reduce((i,o)=>{const a=ci.Op.length(o);let l=o.attributes||{},c=!1,u=!1;if(o.insert!=null){if(s.retain(a),typeof o.insert=="string"){const p=o.insert;u=!p.endsWith(`
`)&&(r<=i||!!this.scroll.descendant(ui,i)[0]),this.scroll.insertAt(i,p);const[v,m]=this.scroll.line(i);let b=Ll({},ii(v));if(v instanceof bn){const[x]=v.descendant(An,m);x&&(b=Ll(b,ii(x)))}l=ci.AttributeMap.diff(b,l)||{}}else if(typeof o.insert=="object"){const p=Object.keys(o.insert)[0];if(p==null)return i;const v=this.scroll.query(p,Re.INLINE)!=null;if(v)(r<=i||this.scroll.descendant(ui,i)[0])&&(u=!0);else if(i>0){const[m,b]=this.scroll.descendant(An,i-1);m instanceof to?m.value()[b]!==`
`&&(c=!0):m instanceof qs&&m.statics.scope===Re.INLINE_BLOT&&(c=!0)}if(this.scroll.insertAt(i,p,o.insert[p]),v){const[m]=this.scroll.descendant(An,i);if(m){const b=Ll({},ii(m));l=ci.AttributeMap.diff(b,l)||{}}}}r+=a}else if(s.push(o),o.retain!==null&&typeof o.retain=="object"){const p=Object.keys(o.retain)[0];if(p==null)return i;this.scroll.updateEmbedAt(i,p,o.retain[p])}Object.keys(l).forEach(p=>{this.scroll.formatAt(i,a,p,l[p])});const h=c?1:0,f=u?1:0;return r+=h+f,s.retain(h),s.delete(f),i+a+h+f},0),s.reduce((i,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(i,o.delete),i):i+ci.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,r){return this.scroll.deleteAt(t,r),this.update(new Pe().retain(t).delete(r))}formatLine(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(i=>{this.scroll.lines(t,Math.max(r,1)).forEach(o=>{o.format(i,n[i])})}),this.scroll.optimize();const s=new Pe().retain(t).retain(r,Qd(n));return this.update(s)}formatText(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(i=>{this.scroll.formatAt(t,r,i,n[i])});const s=new Pe().retain(t).retain(r,Qd(n));return this.update(s)}getContents(t,r){return this.delta.slice(t,t+r)}getDelta(){return this.scroll.lines().reduce((t,r)=>t.concat(r.delta()),new Pe)}getFormat(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],s=[];r===0?this.scroll.path(t).forEach(a=>{const[l]=a;l instanceof bn?n.push(l):l instanceof An&&s.push(l)}):(n=this.scroll.lines(t,r),s=this.scroll.descendants(An,t,r));const[i,o]=[n,s].map(a=>{const l=a.shift();if(l==null)return{};let c=ii(l);for(;Object.keys(c).length>0;){const u=a.shift();if(u==null)return c;c=Uze(ii(u),c)}return c});return{...i,...o}}getHTML(t,r){const[n,s]=this.scroll.line(t);if(n){const i=n.length();return n.length()>=s+r&&!(s===0&&r===i)?Um(n,s,r,!0):Um(this.scroll,t,r,!0)}return""}getText(t,r){return this.getContents(t,r).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(t,r){const n=LM(r),s=new Pe().retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(s)}insertEmbed(t,r,n){return this.scroll.insertAt(t,r,n),this.update(new Pe().retain(t).insert({[r]:n}))}insertText(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r=r.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,r),Object.keys(n).forEach(s=>{this.scroll.formatAt(t,r.length,s,n[s])}),this.update(new Pe().retain(t).insert(r,Qd(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==bn.blotName)return!1;const r=t;return r.children.length>1?!1:r.children.head instanceof co}removeFormat(t,r){const n=this.getText(t,r),[s,i]=this.scroll.line(t+r);let o=0,a=new Pe;s!=null&&(o=s.length()-i,a=s.delta().slice(i,i+o-1).insert(`
`));const l=this.getContents(t,r+o).diff(new Pe().insert(n).concat(a)),c=new Pe().retain(t).concat(l);return this.applyDelta(c)}update(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(r.length===1&&r[0].type==="characterData"&&r[0].target.data.match(Fze)&&this.scroll.find(r[0].target)){const i=this.scroll.find(r[0].target),o=ii(i),a=i.offset(this.scroll),l=r[0].oldValue.replace(Ew.CONTENTS,""),c=new Pe().insert(l),u=new Pe().insert(i.value()),h=n&&{oldRange:MM(n.oldRange,-a),newRange:MM(n.newRange,-a)};t=new Pe().retain(a).concat(c.diff(u,h)).reduce((f,p)=>p.insert?f.insert(p.insert,o):f.push(p),new Pe),this.delta=s.compose(t)}else this.delta=this.getDelta(),(!t||!xl(s.compose(t),this.delta))&&(t=s.diff(this.delta,n));return t}}function jd(e,t,r){if(e.length===0){const[p]=vk(r.pop());return t<=0?`</li></${p}>`:`</li></${p}>${jd([],t-1,r)}`}const[{child:n,offset:s,length:i,indent:o,type:a},...l]=e,[c,u]=vk(a);if(o>t)return r.push(a),o===t+1?`<${c}><li${u}>${Um(n,s,i)}${jd(l,o,r)}`:`<${c}><li>${jd(e,t+1,r)}`;const h=r[r.length-1];if(o===t&&a===h)return`</li><li${u}>${Um(n,s,i)}${jd(l,o,r)}`;const[f]=vk(r.pop());return`</li></${f}>${jd(e,t-1,r)}`}function Um(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in e&&typeof e.html=="function")return e.html(t,r);if(e instanceof to)return Sw(e.value().slice(t,t+r)).replaceAll(" ","&nbsp;");if(e instanceof Zi){if(e.statics.blotName==="list-container"){const c=[];return e.children.forEachAt(t,r,(u,h,f)=>{const p="formats"in u&&typeof u.formats=="function"?u.formats():{};c.push({child:u,offset:h,length:f,indent:p.indent||0,type:p.list})}),jd(c,-1,[])}const s=[];if(e.children.forEachAt(t,r,(c,u,h)=>{s.push(Um(c,u,h))}),n||e.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:o}=e.domNode,[a,l]=i.split(`>${o}<`);return a==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${l}`:`${a}>${s.join("")}<${l}`}return e.domNode instanceof Element?e.domNode.outerHTML:""}function Uze(e,t){return Object.keys(t).reduce((r,n)=>{if(e[n]==null)return r;const s=t[n];return s===e[n]?r[n]=s:Array.isArray(s)?s.indexOf(e[n])<0?r[n]=s.concat([e[n]]):r[n]=s:r[n]=[s,e[n]],r},{})}function vk(e){const t=e==="ordered"?"ol":"ul";switch(e){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function LM(e){return e.reduce((t,r)=>{if(typeof r.insert=="string"){const n=r.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(n,r.attributes)}return t.push(r)},new Pe)}function MM(e,t){let{index:r,length:n}=e;return new ju(r+t,n)}function Bze(e){const t=[];return e.forEach(r=>{typeof r.insert=="string"?r.insert.split(`
`).forEach((n,s)=>{s&&t.push({insert:`
`,attributes:r.attributes}),n&&t.push({insert:n,attributes:r.attributes})}):t.push(r)}),t}class uo{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=r}}de(uo,"DEFAULTS",{});const av="\uFEFF";class WO extends qs{constructor(t,r){super(t,r),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(av),this.rightGuard=document.createTextNode(av),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,r){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,r)}restore(t){let r=null,n;const s=t.data.split(av).join("");if(t===this.leftGuard)if(this.prev instanceof to){const i=this.prev.length();this.prev.insertAt(i,s),r={startNode:this.prev.domNode,startOffset:i+s.length}}else n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this),r={startNode:n,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof to?(this.next.insertAt(0,s),r={startNode:this.next.domNode,startOffset:s.length}):(n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this.next),r={startNode:n,startOffset:s.length}));return t.data=av,r}update(t,r){t.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){const s=this.restore(n.target);s&&(r.range=s)}})}}class qze{constructor(t,r){de(this,"isComposing",!1),this.scroll=t,this.emitter=r,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const r=t.target instanceof Node?this.scroll.find(t.target,!0):null;r&&!(r instanceof WO)&&(this.emitter.emit(Te.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Te.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Te.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Te.events.COMPOSITION_END,t),this.isComposing=!1}}const Iv=class{constructor(t,r){de(this,"modules",{}),this.quill=t,this.options=r}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const r=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new r(this.quill,this.options.modules[t]||{}),this.modules[t]}};de(Iv,"DEFAULTS",{modules:{}}),de(Iv,"themes",{default:Iv});let Cw=Iv;const Vze=e=>e.parentElement||e.getRootNode().host||null,Wze=e=>{const t=e.getBoundingClientRect(),r="offsetWidth"in e&&Math.abs(t.width)/e.offsetWidth||1,n="offsetHeight"in e&&Math.abs(t.height)/e.offsetHeight||1;return{top:t.top,right:t.left+e.clientWidth*r,bottom:t.top+e.clientHeight*n,left:t.left}},lv=e=>{const t=parseInt(e,10);return Number.isNaN(t)?0:t},$M=(e,t,r,n,s,i)=>e<r&&t>n?0:e<r?-(r-e+s):t>n?t-e>n-r?e+s-r:t-n+i:0,Kze=(e,t)=>{var r,n,s;const i=e.ownerDocument;let o=t,a=e;for(;a;){const l=a===i.body,c=l?{top:0,right:((r=window.visualViewport)==null?void 0:r.width)??i.documentElement.clientWidth,bottom:((n=window.visualViewport)==null?void 0:n.height)??i.documentElement.clientHeight,left:0}:Wze(a),u=getComputedStyle(a),h=$M(o.left,o.right,c.left,c.right,lv(u.scrollPaddingLeft),lv(u.scrollPaddingRight)),f=$M(o.top,o.bottom,c.top,c.bottom,lv(u.scrollPaddingTop),lv(u.scrollPaddingBottom));if(h||f)if(l)(s=i.defaultView)==null||s.scrollBy(h,f);else{const{scrollLeft:p,scrollTop:v}=a;f&&(a.scrollTop+=f),h&&(a.scrollLeft+=h);const m=a.scrollLeft-p,b=a.scrollTop-v;o={left:o.left-m,top:o.top-b,right:o.right-m,bottom:o.bottom-b}}a=l||u.position==="fixed"?null:Vze(a)}},Hze=100,Zze=["block","break","cursor","inline","scroll","text"],Gze=(e,t,r)=>{const n=new qh;return Zze.forEach(s=>{const i=t.query(s);i&&n.register(i)}),e.forEach(s=>{let i=t.query(s);i||r.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;i;)if(n.register(i),i="blotName"in i?i.requiredContainer??null:null,o+=1,o>Hze){r.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),n},th=Za("quill"),Dv=new qh;Zi.uiClass="ql-ui";const kd=class Cp{static debug(t){t===!0&&(t="log"),Za.level(t)}static find(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return T2.get(t)||Dv.find(t,r)}static import(t){return this.imports[t]==null&&th.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],r=!!(!(arguments.length<=1)&&arguments[1]),n="attrName"in t?t.attrName:t.blotName;typeof n=="string"?this.register(`formats/${n}`,t,r):Object.keys(t).forEach(s=>{this.register(s,t[s],r)})}else{const t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!n&&th.warn(`Overwriting ${t} with`,r),this.imports[t]=r,(t.startsWith("blots/")||t.startsWith("formats/"))&&r&&typeof r!="boolean"&&r.blotName!=="abstract"&&Dv.register(r),typeof r.register=="function"&&r.register(Dv)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Yze(t,r),this.container=this.options.container,this.container==null){th.error("Invalid Quill container",t);return}this.options.debug&&Cp.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",T2.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Te;const s=zO.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new zze(this.scroll),this.selection=new $ze(this.scroll,this.emitter),this.composition=new qze(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Te.events.EDITOR_CHANGE,o=>{o===Te.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Te.events.SCROLL_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Ti.call(this,()=>this.editor.update(null,a,u),o)}),this.emitter.on(Te.events.SCROLL_EMBED_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Ti.call(this,()=>{const h=new Pe().retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(h,[],u)},Cp.sources.USER)}),n){const o=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const n=t;t=document.createElement("div"),t.classList.add(n)}return this.container.insertBefore(t,r),t}blur(){this.selection.setRange(null)}deleteText(t,r,n){return[t,r,,n]=Xo(t,r,n),Ti.call(this,()=>this.editor.deleteText(t,r),n,t,-1*r)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const r=t();return this.allowReadOnlyEdits=!1,r}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;return Ti.call(this,()=>{const s=this.getSelection(!0);let i=new Pe;if(s==null)return i;if(this.scroll.query(t,Re.BLOCK))i=this.editor.formatLine(s.index,s.length,{[t]:r});else{if(s.length===0)return this.selection.format(t,r),i;i=this.editor.formatText(s.index,s.length,{[t]:r})}return this.setSelection(s,Te.sources.SILENT),i},n)}formatLine(t,r,n,s,i){let o;return[t,r,o,i]=Xo(t,r,n,s,i),Ti.call(this,()=>this.editor.formatLine(t,r,o),i,t,0)}formatText(t,r,n,s,i){let o;return[t,r,o,i]=Xo(t,r,n,s,i),Ti.call(this,()=>this.editor.formatText(t,r,o),i,t,0)}getBounds(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof t=="number"?n=this.selection.getBounds(t,r):n=this.selection.getBounds(t.index,t.length),!n)return null;const s=this.container.getBoundingClientRect();return{bottom:n.bottom-s.top,height:n.height,left:n.left-s.left,right:n.right-s.left,top:n.top-s.top,width:n.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,r]=Xo(t,r),this.editor.getContents(t,r)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,r):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,r)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(r=r??this.getLength()-t),[t,r]=Xo(t,r),this.editor.getHTML(t,r)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(r=r??this.getLength()-t),[t,r]=Xo(t,r),this.editor.getText(t,r)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Cp.sources.API;return Ti.call(this,()=>this.editor.insertEmbed(t,r,n),s,t)}insertText(t,r,n,s,i){let o;return[t,,o,i]=Xo(t,0,n,s,i),Ti.call(this,()=>this.editor.insertText(t,r,o),i,t,r.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,r,n){return[t,r,,n]=Xo(t,r,n),Ti.call(this,()=>this.editor.removeFormat(t,r),n,t)}scrollRectIntoView(t){Kze(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,r=t&&this.selection.getBounds(t.index,t.length);r&&this.scrollRectIntoView(r)}setContents(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;return Ti.call(this,()=>{t=new Pe(t);const n=this.getLength(),s=this.editor.deleteText(0,n),i=this.editor.insertContents(0,t),o=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(o)},r)}setSelection(t,r,n){t==null?this.selection.setRange(null,r||Cp.sources.API):([t,r,,n]=Xo(t,r,n),this.selection.setRange(new ju(Math.max(0,t),r),n),n!==Te.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;const n=new Pe().insert(t);return this.setContents(n,r)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.sources.USER;const r=this.scroll.update(t);return this.selection.update(t),r}updateContents(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;return Ti.call(this,()=>(t=new Pe(t),this.editor.applyDelta(t)),r,!0)}};de(kd,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Dv,theme:"default"}),de(kd,"events",Te.events),de(kd,"sources",Te.sources),de(kd,"version","2.0.3"),de(kd,"imports",{delta:Pe,parchment:_ze,"core/module":uo,"core/theme":Cw});let oe=kd;function FM(e){return typeof e=="string"?document.querySelector(e):e}function bk(e){return Object.entries(e??{}).reduce((t,r)=>{let[n,s]=r;return{...t,[n]:s===!0?{}:s}},{})}function zM(e){return Object.fromEntries(Object.entries(e).filter(t=>t[1]!==void 0))}function Yze(e,t){const r=FM(e);if(!r)throw new Error("Invalid Quill container");const n=!t.theme||t.theme===oe.DEFAULTS.theme?Cw:oe.import(`themes/${t.theme}`);if(!n)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:s,...i}=oe.DEFAULTS,{modules:o,...a}=n.DEFAULTS;let l=bk(t.modules);l!=null&&l.toolbar&&l.toolbar.constructor!==Object&&(l={...l,toolbar:{container:l.toolbar}});const c=Ll({},bk(s),bk(o),l),u={...i,...zM(a),...zM(t)};let h=t.registry;return h?t.formats&&th.warn('Ignoring "formats" option because "registry" is specified'):h=t.formats?Gze(t.formats,u.registry,th):u.registry,{...u,registry:h,container:r,theme:n,modules:Object.entries(c).reduce((f,p)=>{let[v,m]=p;if(!m)return f;const b=oe.import(`modules/${v}`);return b==null?(th.error(`Cannot load ${v} module. Are you sure you registered it?`),f):{...f,[v]:Ll({},b.DEFAULTS||{},m)}},{}),bounds:FM(u.bounds)}}function Ti(e,t,r,n){if(!this.isEnabled()&&t===Te.sources.USER&&!this.allowReadOnlyEdits)return new Pe;let s=r==null?null:this.getSelection();const i=this.editor.delta,o=e();if(s!=null&&(r===!0&&(r=s.index),n==null?s=UM(s,o,t):n!==0&&(s=UM(s,r,n,t)),this.setSelection(s,Te.sources.SILENT)),o.length()>0){const a=[Te.events.TEXT_CHANGE,o,i,t];this.emitter.emit(Te.events.EDITOR_CHANGE,...a),t!==Te.sources.SILENT&&this.emitter.emit(...a)}return o}function Xo(e,t,r,n,s){let i={};return typeof e.index=="number"&&typeof e.length=="number"?typeof t!="number"?(s=n,n=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):typeof t!="number"&&(s=n,n=r,r=t,t=0),typeof r=="object"?(i=r,s=n):typeof r=="string"&&(n!=null?i[r]=n:s=r),s=s||Te.sources.API,[e,t,i,s]}function UM(e,t,r,n){const s=typeof r=="number"?r:0;if(e==null)return null;let i,o;return t&&typeof t.transformPosition=="function"?[i,o]=[e.index,e.index+e.length].map(a=>t.transformPosition(a,n!==Te.sources.USER)):[i,o]=[e.index,e.index+e.length].map(a=>a<t||a===t&&n===Te.sources.USER?a:s>=0?a+s:Math.max(t,a+s)),new ju(i,o-i)}class Uu extends _w{}function BM(e){return e instanceof bn||e instanceof ui}function qM(e){return typeof e.updateContent=="function"}class Nd extends zO{constructor(t,r,n){let{emitter:s}=n;super(t,r),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Te.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Te.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,r){this.emitter.emit(Te.events.SCROLL_EMBED_UPDATE,t,r)}deleteAt(t,r){const[n,s]=this.line(t),[i]=this.line(t+r);if(super.deleteAt(t,r),i!=null&&n!==i&&s>0){if(n instanceof ui||i instanceof ui){this.optimize();return}const o=i.children.head instanceof co?null:i.children.head;n.moveChildren(i,o),n.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,r,n,s){super.formatAt(t,r,n,s),this.optimize()}insertAt(t,r,n){if(t>=this.length())if(n==null||this.scroll.query(r,Re.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),n==null&&r.endsWith(`
`)?s.insertAt(0,r.slice(0,-1),n):s.insertAt(0,r,n)}else{const s=this.scroll.create(r,n);this.appendChild(s)}else super.insertAt(t,r,n);this.optimize()}insertBefore(t,r){if(t.statics.scope===Re.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,r)}else super.insertBefore(t,r)}insertContents(t,r){const n=this.deltaToRenderBlocks(r.concat(new Pe().insert(`
`))),s=n.pop();if(s==null)return;this.batchStart();const i=n.shift();if(i){const l=i.type==="block"&&(i.delta.length()===0||!this.descendant(ui,t)[0]&&t<this.length()),c=i.type==="block"?i.delta:new Pe().insert({[i.key]:i.value});xk(this,t,c);const u=i.type==="block"?1:0,h=t+c.length()+u;l&&this.insertAt(h-1,`
`);const f=ii(this.line(t)[0]),p=ci.AttributeMap.diff(f,i.attributes)||{};Object.keys(p).forEach(v=>{this.formatAt(h-1,1,v,p[v])}),t=h}let[o,a]=this.children.find(t);if(n.length&&(o&&(o=o.split(a),a=0),n.forEach(l=>{if(l.type==="block"){const c=this.createBlock(l.attributes,o||void 0);xk(c,0,l.delta)}else{const c=this.create(l.key,l.value);this.insertBefore(c,o||void 0),Object.keys(l.attributes).forEach(u=>{c.format(u,l.attributes[u])})}})),s.type==="block"&&s.delta.length()){const l=o?o.offset(o.scroll)+a:this.length();xk(this,l,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const r=this.path(t).pop();if(!r)return[null,-1];const[n,s]=r;return n instanceof An?[n,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(BM,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const n=(s,i,o)=>{let a=[],l=o;return s.children.forEachAt(i,o,(c,u,h)=>{BM(c)?a.push(c):c instanceof _w&&(a=a.concat(n(c,u,l))),l-=h}),a};return n(this,t,r)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,r),t.length>0&&this.emitter.emit(Te.events.SCROLL_OPTIMIZE,t,r))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let r=Te.sources.USER;typeof t=="string"&&(r=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(n=>{let{target:s}=n;const i=this.find(s,!0);return i&&!qM(i)}),t.length>0&&this.emitter.emit(Te.events.SCROLL_BEFORE_UPDATE,r,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Te.events.SCROLL_UPDATE,r,t)}updateEmbedAt(t,r,n){const[s]=this.descendant(i=>i instanceof ui,t);s&&s.statics.blotName===r&&qM(s)&&s.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const r=[];let n=new Pe;return t.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const o=i.split(`
`);o.slice(0,-1).forEach(l=>{n.insert(l,s.attributes),r.push({type:"block",delta:n,attributes:s.attributes??{}}),n=new Pe});const a=o[o.length-1];a&&n.insert(a,s.attributes)}else{const o=Object.keys(i)[0];if(!o)return;this.query(o,Re.INLINE)?n.push(s):(n.length()&&r.push({type:"block",delta:n,attributes:{}}),n=new Pe,r.push({type:"blockEmbed",key:o,value:i[o],attributes:s.attributes??{}}))}}),n.length()&&r.push({type:"block",delta:n,attributes:{}}),r}createBlock(t,r){let n;const s={};Object.entries(t).forEach(a=>{let[l,c]=a;this.query(l,Re.BLOCK&Re.BLOT)!=null?n=l:s[l]=c});const i=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(i,r||void 0);const o=i.length();return Object.entries(s).forEach(a=>{let[l,c]=a;i.formatAt(0,o,l,c)}),i}}de(Nd,"blotName","scroll"),de(Nd,"className","ql-editor"),de(Nd,"tagName","DIV"),de(Nd,"defaultChild",bn),de(Nd,"allowedChildren",[bn,ui,Uu]);function xk(e,t,r){r.reduce((n,s)=>{const i=ci.Op.length(s);let o=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const a=s.insert;e.insertAt(n,a);const[l]=e.descendant(An,n),c=ii(l);o=ci.AttributeMap.diff(c,o)||{}}else if(typeof s.insert=="object"){const a=Object.keys(s.insert)[0];if(a==null)return n;if(e.insertAt(n,a,s.insert[a]),e.scroll.query(a,Re.INLINE)!=null){const[l]=e.descendant(An,n),c=ii(l);o=ci.AttributeMap.diff(c,o)||{}}}}return Object.keys(o).forEach(a=>{e.formatAt(n,i,a,o[a])}),n+i},t)}const KO={scope:Re.BLOCK,whitelist:["right","center","justify"]},Jze=new Fo("align","align",KO),sG=new lo("align","ql-align",KO),iG=new hc("align","text-align",KO);class oG extends hc{value(t){let r=super.value(t);return r.startsWith("rgb(")?(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${r.split(",").map(n=>`00${parseInt(n,10).toString(16)}`.slice(-2)).join("")}`):r}}const Xze=new lo("color","ql-color",{scope:Re.INLINE}),HO=new oG("color","color",{scope:Re.INLINE}),Qze=new lo("background","ql-bg",{scope:Re.INLINE}),ZO=new oG("background","background-color",{scope:Re.INLINE});class Bu extends Uu{static create(t){const r=super.create(t);return r.setAttribute("spellcheck","false"),r}code(t,r){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(t,t+r)}html(t,r){return`<pre>
${Sw(this.code(t,r))}
</pre>`}}class In extends bn{static register(){oe.register(Bu)}}de(In,"TAB","  ");class GO extends fc{}GO.blotName="code";GO.tagName="CODE";In.blotName="code-block";In.className="ql-code-block";In.tagName="DIV";Bu.blotName="code-block-container";Bu.className="ql-code-block-container";Bu.tagName="DIV";Bu.allowedChildren=[In];In.allowedChildren=[to,co,Ew];In.requiredContainer=Bu;const YO={scope:Re.BLOCK,whitelist:["rtl"]},aG=new Fo("direction","dir",YO),lG=new lo("direction","ql-direction",YO),cG=new hc("direction","direction",YO),uG={scope:Re.INLINE,whitelist:["serif","monospace"]},dG=new lo("font","ql-font",uG);class e8e extends hc{value(t){return super.value(t).replace(/["']/g,"")}}const hG=new e8e("font","font-family",uG),fG=new lo("size","ql-size",{scope:Re.INLINE,whitelist:["small","large","huge"]}),pG=new hc("size","font-size",{scope:Re.INLINE,whitelist:["10px","18px","32px"]}),t8e=Za("quill:keyboard"),r8e=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Tw extends uo{static match(t,r){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!r[n]!==t[n]&&r[n]!==null)?!1:r.key===t.key||r.key===t.which}constructor(t,r){super(t,r),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=s8e(t);if(s==null){t8e.warn("Attempted to add invalid keyboard binding",s);return}typeof r=="function"&&(r={handler:r}),typeof n=="function"&&(n={handler:n}),(Array.isArray(s.key)?s.key:[s.key]).forEach(i=>{const o={...s,key:i,...r,...n};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const r=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(v=>Tw.match(t,v));if(r.length===0)return;const n=oe.find(t.target,!0);if(n&&n.scroll!==this.quill.scroll)return;const s=this.quill.getSelection();if(s==null||!this.quill.hasFocus())return;const[i,o]=this.quill.getLine(s.index),[a,l]=this.quill.getLeaf(s.index),[c,u]=s.length===0?[a,l]:this.quill.getLeaf(s.index+s.length),h=a instanceof c0?a.value().slice(0,l):"",f=c instanceof c0?c.value().slice(u):"",p={collapsed:s.length===0,empty:s.length===0&&i.length()<=1,format:this.quill.getFormat(s),line:i,offset:o,prefix:h,suffix:f,event:t};r.some(v=>{if(v.collapsed!=null&&v.collapsed!==p.collapsed||v.empty!=null&&v.empty!==p.empty||v.offset!=null&&v.offset!==p.offset)return!1;if(Array.isArray(v.format)){if(v.format.every(m=>p.format[m]==null))return!1}else if(typeof v.format=="object"&&!Object.keys(v.format).every(m=>v.format[m]===!0?p.format[m]!=null:v.format[m]===!1?p.format[m]==null:xl(v.format[m],p.format[m])))return!1;return v.prefix!=null&&!v.prefix.test(p.prefix)||v.suffix!=null&&!v.suffix.test(p.suffix)?!1:v.handler.call(this,s,p,v)!==!0})&&t.preventDefault()})}handleBackspace(t,r){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(r.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(t.index);let o=new Pe().retain(t.index-n).delete(n);if(r.offset===0){const[a]=this.quill.getLine(t.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){const l=i.formats(),c=this.quill.getFormat(t.index-1,1);if(s=ci.AttributeMap.diff(l,c)||{},Object.keys(s).length>0){const u=new Pe().retain(t.index+i.length()-2).retain(1,s);o=o.compose(u)}}}this.quill.updateContents(o,oe.sources.USER),this.quill.focus()}handleDelete(t,r){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(r.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let s={};const[i]=this.quill.getLine(t.index);let o=new Pe().retain(t.index).delete(n);if(r.offset>=i.length()-1){const[a]=this.quill.getLine(t.index+1);if(a){const l=i.formats(),c=this.quill.getFormat(t.index,1);s=ci.AttributeMap.diff(l,c)||{},Object.keys(s).length>0&&(o=o.retain(a.length()-1).retain(1,s))}}this.quill.updateContents(o,oe.sources.USER),this.quill.focus()}handleDeleteRange(t){JO({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,r){const n=Object.keys(r.format).reduce((i,o)=>(this.quill.scroll.query(o,Re.BLOCK)&&!Array.isArray(r.format[o])&&(i[o]=r.format[o]),i),{}),s=new Pe().retain(t.index).delete(t.length).insert(`
`,n);this.quill.updateContents(s,oe.sources.USER),this.quill.setSelection(t.index+1,oe.sources.SILENT),this.quill.focus()}}const n8e={bindings:{bold:wk("bold"),italic:wk("italic"),underline:wk("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",oe.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",oe.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(e,t){t.format.indent!=null?this.quill.format("indent","-1",oe.sources.USER):t.format.list!=null&&this.quill.format("list",!1,oe.sources.USER)}},"indent code-block":VM(!0),"outdent code-block":VM(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(e){this.quill.deleteText(e.index-1,1,oe.sources.USER)}},tab:{key:"Tab",handler(e,t){if(t.format.table)return!0;this.quill.history.cutoff();const r=new Pe().retain(e.index).delete(e.length).insert("	");return this.quill.updateContents(r,oe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,oe.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,oe.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(e,t){const r={list:!1};t.format.indent&&(r.indent=!1),this.quill.formatLine(e.index,e.length,r,oe.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(e){const[t,r]=this.quill.getLine(e.index),n={...t.formats(),list:"checked"},s=new Pe().retain(e.index).insert(`
`,n).retain(t.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,oe.sources.USER),this.quill.setSelection(e.index+1,oe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(e,t){const[r,n]=this.quill.getLine(e.index),s=new Pe().retain(e.index).insert(`
`,t.format).retain(r.length()-n-1).retain(1,{header:null});this.quill.updateContents(s,oe.sources.USER),this.quill.setSelection(e.index+1,oe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(e){const t=this.quill.getModule("table");if(t){const[r,n,s,i]=t.getTable(e),o=i8e(r,n,s,i);if(o==null)return;let a=r.offset();if(o<0){const l=new Pe().retain(a).insert(`
`);this.quill.updateContents(l,oe.sources.USER),this.quill.setSelection(e.index+1,e.length,oe.sources.SILENT)}else if(o>0){a+=r.length();const l=new Pe().retain(a).insert(`
`);this.quill.updateContents(l,oe.sources.USER),this.quill.setSelection(a,oe.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(e,t){const{event:r,line:n}=t,s=n.offset(this.quill.scroll);r.shiftKey?this.quill.setSelection(s-1,oe.sources.USER):this.quill.setSelection(s+n.length(),oe.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query("list")==null)return!0;const{length:r}=t.prefix,[n,s]=this.quill.getLine(e.index);if(s>r)return!0;let i;switch(t.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(e.index," ",oe.sources.USER),this.quill.history.cutoff();const o=new Pe().retain(e.index-s).delete(r+1).retain(n.length()-2-s).retain(1,{list:i});return this.quill.updateContents(o,oe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,oe.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(e){const[t,r]=this.quill.getLine(e.index);let n=2,s=t;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,n-=1,n<=0){const i=new Pe().retain(e.index+t.length()-r-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,oe.sources.USER),this.quill.setSelection(e.index-1,oe.sources.SILENT),!1}return!0}},"embed left":cv("ArrowLeft",!1),"embed left shift":cv("ArrowLeft",!0),"embed right":cv("ArrowRight",!1),"embed right shift":cv("ArrowRight",!0),"table down":WM(!1),"table up":WM(!0)}};Tw.DEFAULTS=n8e;function VM(e){return{key:"Tab",shiftKey:!e,format:{"code-block":!0},handler(t,r){let{event:n}=r;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(t.length===0&&!n.shiftKey){this.quill.insertText(t.index,i,oe.sources.USER),this.quill.setSelection(t.index+i.length,oe.sources.SILENT);return}const o=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:a,length:l}=t;o.forEach((c,u)=>{e?(c.insertAt(0,i),u===0?a+=i.length:l+=i.length):c.domNode.textContent.startsWith(i)&&(c.deleteAt(0,i.length),u===0?a-=i.length:l-=i.length)}),this.quill.update(oe.sources.USER),this.quill.setSelection(a,l,oe.sources.SILENT)}}}function cv(e,t){return{key:e,shiftKey:t,altKey:null,[e==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:n}=r;e==="ArrowRight"&&(n+=r.length+1);const[s]=this.quill.getLeaf(n);return s instanceof qs?(e==="ArrowLeft"?t?this.quill.setSelection(r.index-1,r.length+1,oe.sources.USER):this.quill.setSelection(r.index-1,oe.sources.USER):t?this.quill.setSelection(r.index,r.length+1,oe.sources.USER):this.quill.setSelection(r.index+r.length+1,oe.sources.USER),!1):!0}}}function wk(e){return{key:e[0],shortKey:!0,handler(t,r){this.quill.format(e,!r.format[e],oe.sources.USER)}}}function WM(e){return{key:e?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,r){const n=e?"prev":"next",s=r.line,i=s.parent[n];if(i!=null){if(i.statics.blotName==="table-row"){let o=i.children.head,a=s;for(;a.prev!=null;)a=a.prev,o=o.next;const l=o.offset(this.quill.scroll)+Math.min(r.offset,o.length()-1);this.quill.setSelection(l,0,oe.sources.USER)}}else{const o=s.table()[n];o!=null&&(e?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,oe.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,oe.sources.USER))}return!1}}}function s8e(e){if(typeof e=="string"||typeof e=="number")e={key:e};else if(typeof e=="object")e=Qd(e);else return null;return e.shortKey&&(e[r8e]=e.shortKey,delete e.shortKey),e}function JO(e){let{quill:t,range:r}=e;const n=t.getLines(r);let s={};if(n.length>1){const i=n[0].formats(),o=n[n.length-1].formats();s=ci.AttributeMap.diff(o,i)||{}}t.deleteText(r,oe.sources.USER),Object.keys(s).length>0&&t.formatLine(r.index,1,s,oe.sources.USER),t.setSelection(r.index,oe.sources.SILENT)}function i8e(e,t,r,n){return t.prev==null&&t.next==null?r.prev==null&&r.next==null?n===0?-1:1:r.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const o8e=/font-weight:\s*normal/,a8e=["P","OL","UL"],KM=e=>e&&a8e.includes(e.tagName),l8e=e=>{Array.from(e.querySelectorAll("br")).filter(t=>KM(t.previousElementSibling)&&KM(t.nextElementSibling)).forEach(t=>{var r;(r=t.parentNode)==null||r.removeChild(t)})},c8e=e=>{Array.from(e.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var r;return(r=t.getAttribute("style"))==null?void 0:r.match(o8e)}).forEach(t=>{var r;const n=e.createDocumentFragment();n.append(...t.childNodes),(r=t.parentNode)==null||r.replaceChild(n,t)})};function u8e(e){e.querySelector('[id^="docs-internal-guid-"]')&&(c8e(e),l8e(e))}const d8e=/\bmso-list:[^;]*ignore/i,h8e=/\bmso-list:[^;]*\bl(\d+)/i,f8e=/\bmso-list:[^;]*\blevel(\d+)/i,p8e=(e,t)=>{const r=e.getAttribute("style"),n=r==null?void 0:r.match(h8e);if(!n)return null;const s=Number(n[1]),i=r==null?void 0:r.match(f8e),o=i?Number(i[1]):1,a=new RegExp(`@list l${s}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=t.match(a),c=l&&l[1]==="bullet"?"bullet":"ordered";return{id:s,indent:o,type:c,element:e}},m8e=e=>{var t,r;const n=Array.from(e.querySelectorAll("[style*=mso-list]")),s=[],i=[];n.forEach(l=>{(l.getAttribute("style")||"").match(d8e)?s.push(l):i.push(l)}),s.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)});const o=e.documentElement.innerHTML,a=i.map(l=>p8e(l,o)).filter(l=>l);for(;a.length;){const l=[];let c=a.shift();for(;c;)l.push(c),c=a.length&&((t=a[0])==null?void 0:t.element)===c.element.nextElementSibling&&a[0].id===c.id?a.shift():null;const u=document.createElement("ul");l.forEach(p=>{const v=document.createElement("li");v.setAttribute("data-list",p.type),p.indent>1&&v.setAttribute("class",`ql-indent-${p.indent-1}`),v.innerHTML=p.element.innerHTML,u.appendChild(v)});const h=(r=l[0])==null?void 0:r.element,{parentNode:f}=h??{};h&&(f==null||f.replaceChild(u,h)),l.slice(1).forEach(p=>{let{element:v}=p;f==null||f.removeChild(v)})}};function g8e(e){e.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&m8e(e)}const y8e=[g8e,u8e],v8e=e=>{e.documentElement&&y8e.forEach(t=>{t(e)})},b8e=Za("quill:clipboard"),x8e=[[Node.TEXT_NODE,P8e],[Node.TEXT_NODE,ZM],["br",N8e],[Node.ELEMENT_NODE,ZM],[Node.ELEMENT_NODE,k8e],[Node.ELEMENT_NODE,j8e],[Node.ELEMENT_NODE,A8e],["li",C8e],["ol, ul",T8e],["pre",S8e],["tr",O8e],["b",_k("bold")],["i",_k("italic")],["strike",_k("strike")],["style",E8e]],w8e=[Jze,aG].reduce((e,t)=>(e[t.keyName]=t,e),{}),HM=[iG,ZO,HO,cG,hG,pG].reduce((e,t)=>(e[t.keyName]=t,e),{});class mG extends uo{constructor(t,r){super(t,r),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],x8e.concat(this.options.matchers??[]).forEach(n=>{let[s,i]=n;this.addMatcher(s,i)})}addMatcher(t,r){this.matchers.push([t,r])}convert(t){let{html:r,text:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[In.blotName])return new Pe().insert(n||"",{[In.blotName]:s[In.blotName]});if(!r)return new Pe().insert(n||"",s);const i=this.convertHTML(r);return Dg(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new Pe().retain(i.length()-1).delete(1)):i}normalizeHTML(t){v8e(t)}convertHTML(t){const r=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(r);const n=r.body,s=new WeakMap,[i,o]=this.prepareMatching(n,s);return XO(this.quill.scroll,n,i,o,s)}dangerouslyPasteHTML(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe.sources.API;if(typeof t=="string"){const s=this.convert({html:t,text:""});this.quill.setContents(s,r),this.quill.setSelection(0,oe.sources.SILENT)}else{const s=this.convert({html:r,text:""});this.quill.updateContents(new Pe().retain(t).concat(s),n),this.quill.setSelection(t+s.length(),oe.sources.SILENT)}}onCaptureCopy(t){var r,n;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[i]=this.quill.selection.getRange();if(i==null)return;const{html:o,text:a}=this.onCopy(i,s);(r=t.clipboardData)==null||r.setData("text/plain",a),(n=t.clipboardData)==null||n.setData("text/html",o),s&&JO({range:i,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(r=>r[0]!=="#").join(`
`)}onCapturePaste(t){var r,n,s,i,o;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const a=this.quill.getSelection(!0);if(a==null)return;const l=(r=t.clipboardData)==null?void 0:r.getData("text/html");let c=(n=t.clipboardData)==null?void 0:n.getData("text/plain");if(!l&&!c){const h=(s=t.clipboardData)==null?void 0:s.getData("text/uri-list");h&&(c=this.normalizeURIList(h))}const u=Array.from(((i=t.clipboardData)==null?void 0:i.files)||[]);if(!l&&u.length>0){this.quill.uploader.upload(a,u);return}if(l&&u.length>0){const h=new DOMParser().parseFromString(l,"text/html");if(h.body.childElementCount===1&&((o=h.body.firstElementChild)==null?void 0:o.tagName)==="IMG"){this.quill.uploader.upload(a,u);return}}this.onPaste(a,{html:l,text:c})}onCopy(t){const r=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:r}}onPaste(t,r){let{text:n,html:s}=r;const i=this.quill.getFormat(t.index),o=this.convert({text:n,html:s},i);b8e.log("onPaste",o,{text:n,html:s});const a=new Pe().retain(t.index).delete(t.length).concat(o);this.quill.updateContents(a,oe.sources.USER),this.quill.setSelection(a.length()-t.length,oe.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,r){const n=[],s=[];return this.matchers.forEach(i=>{const[o,a]=i;switch(o){case Node.TEXT_NODE:s.push(a);break;case Node.ELEMENT_NODE:n.push(a);break;default:Array.from(t.querySelectorAll(o)).forEach(l=>{if(r.has(l)){const c=r.get(l);c==null||c.push(a)}else r.set(l,[a])});break}}),[n,s]}}de(mG,"DEFAULTS",{matchers:[]});function qu(e,t,r,n){return n.query(t)?e.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[t])return s.push(i);const o=r?{[t]:r}:{};return s.insert(i.insert,{...o,...i.attributes})},new Pe):e}function Dg(e,t){let r="";for(let n=e.ops.length-1;n>=0&&r.length<t.length;--n){const s=e.ops[n];if(typeof s.insert!="string")break;r=s.insert+r}return r.slice(-1*t.length)===t}function Al(e,t){if(!(e instanceof Element))return!1;const r=t.query(e);return r&&r.prototype instanceof qs?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(e.tagName.toLowerCase())}function _8e(e,t){return e.previousElementSibling&&e.nextElementSibling&&!Al(e.previousElementSibling,t)&&!Al(e.nextElementSibling,t)}const uv=new WeakMap;function gG(e){return e==null?!1:(uv.has(e)||(e.tagName==="PRE"?uv.set(e,!0):uv.set(e,gG(e.parentNode))),uv.get(e))}function XO(e,t,r,n,s){return t.nodeType===t.TEXT_NODE?n.reduce((i,o)=>o(t,i,e),new Pe):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((i,o)=>{let a=XO(e,o,r,n,s);return o.nodeType===t.ELEMENT_NODE&&(a=r.reduce((l,c)=>c(o,l,e),a),a=(s.get(o)||[]).reduce((l,c)=>c(o,l,e),a)),i.concat(a)},new Pe):new Pe}function _k(e){return(t,r,n)=>qu(r,e,!0,n)}function j8e(e,t,r){const n=Fo.keys(e),s=lo.keys(e),i=hc.keys(e),o={};return n.concat(s).concat(i).forEach(a=>{let l=r.query(a,Re.ATTRIBUTE);l!=null&&(o[l.attrName]=l.value(e),o[l.attrName])||(l=w8e[a],l!=null&&(l.attrName===a||l.keyName===a)&&(o[l.attrName]=l.value(e)||void 0),l=HM[a],l!=null&&(l.attrName===a||l.keyName===a)&&(l=HM[a],o[l.attrName]=l.value(e)||void 0))}),Object.entries(o).reduce((a,l)=>{let[c,u]=l;return qu(a,c,u,r)},t)}function k8e(e,t,r){const n=r.query(e);if(n==null)return t;if(n.prototype instanceof qs){const s={},i=n.value(e);if(i!=null)return s[n.blotName]=i,new Pe().insert(s,n.formats(e,r))}else if(n.prototype instanceof Fm&&!Dg(t,`
`)&&t.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return qu(t,n.blotName,n.formats(e,r),r);return t}function N8e(e,t){return Dg(t,`
`)||t.insert(`
`),t}function S8e(e,t,r){const n=r.query("code-block"),s=n&&"formats"in n&&typeof n.formats=="function"?n.formats(e,r):!0;return qu(t,"code-block",s,r)}function E8e(){return new Pe}function C8e(e,t,r){const n=r.query(e);if(n==null||n.blotName!=="list"||!Dg(t,`
`))return t;let s=-1,i=e.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?t:t.reduce((o,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?o.push(a):o.insert(a.insert,{indent:s,...a.attributes||{}}):o,new Pe)}function T8e(e,t,r){const n=e;let s=n.tagName==="OL"?"ordered":"bullet";const i=n.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),qu(t,"list",s,r)}function ZM(e,t,r){if(!Dg(t,`
`)){if(Al(e,r)&&(e.childNodes.length>0||e instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&e.nextSibling){let n=e.nextSibling;for(;n!=null;){if(Al(n,r))return t.insert(`
`);const s=r.query(n);if(s&&s.prototype instanceof ui)return t.insert(`
`);n=n.firstChild}}}return t}function A8e(e,t,r){var n;const s={},i=e.style||{};return i.fontStyle==="italic"&&(s.italic=!0),i.textDecoration==="underline"&&(s.underline=!0),i.textDecoration==="line-through"&&(s.strike=!0),((n=i.fontWeight)!=null&&n.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(s.bold=!0),t=Object.entries(s).reduce((o,a)=>{let[l,c]=a;return qu(o,l,c,r)},t),parseFloat(i.textIndent||0)>0?new Pe().insert("	").concat(t):t}function O8e(e,t,r){var n,s;const i=((n=e.parentElement)==null?void 0:n.tagName)==="TABLE"?e.parentElement:(s=e.parentElement)==null?void 0:s.parentElement;if(i!=null){const o=Array.from(i.querySelectorAll("tr")).indexOf(e)+1;return qu(t,"table",o,r)}return t}function P8e(e,t,r){var n;let s=e.data;if(((n=e.parentElement)==null?void 0:n.tagName)==="O:P")return t.insert(s.trim());if(!gG(e)){if(s.trim().length===0&&s.includes(`
`)&&!_8e(e,r))return t;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(e.previousSibling==null&&e.parentElement!=null&&Al(e.parentElement,r)||e.previousSibling instanceof Element&&Al(e.previousSibling,r))&&(s=s.replace(/^ /,"")),(e.nextSibling==null&&e.parentElement!=null&&Al(e.parentElement,r)||e.nextSibling instanceof Element&&Al(e.nextSibling,r))&&(s=s.replace(/ $/,"")),s=s.replaceAll(" "," ")}return t.insert(s)}class yG extends uo{constructor(t,r){super(t,r),de(this,"lastRecorded",0),de(this,"ignoreChange",!1),de(this,"stack",{undo:[],redo:[]}),de(this,"currentRange",null),this.quill.on(oe.events.EDITOR_CHANGE,(n,s,i,o)=>{n===oe.events.SELECTION_CHANGE?s&&o!==oe.sources.SILENT&&(this.currentRange=s):n===oe.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===oe.sources.USER?this.record(s,i):this.transform(s)),this.currentRange=P2(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",n=>{n.inputType==="historyUndo"?(this.undo(),n.preventDefault()):n.inputType==="historyRedo"&&(this.redo(),n.preventDefault())})}change(t,r){if(this.stack[t].length===0)return;const n=this.stack[t].pop();if(!n)return;const s=this.quill.getContents(),i=n.delta.invert(s);this.stack[r].push({delta:i,range:P2(n.range,i)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,oe.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,r){if(t.ops.length===0)return;this.stack.redo=[];let n=t.invert(r),s=this.currentRange;const i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(n=n.compose(o.delta),s=o.range)}else this.lastRecorded=i;n.length()!==0&&(this.stack.undo.push({delta:n,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){GM(this.stack.undo,t),GM(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,oe.sources.USER);else{const r=I8e(this.quill.scroll,t.delta);this.quill.setSelection(r,oe.sources.USER)}}}de(yG,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function GM(e,t){let r=t;for(let n=e.length-1;n>=0;n-=1){const s=e[n];e[n]={delta:r.transform(s.delta,!0),range:s.range&&P2(s.range,r)},r=s.delta.transform(r),e[n].delta.length()===0&&e.splice(n,1)}}function R8e(e,t){const r=t.ops[t.ops.length-1];return r==null?!1:r.insert!=null?typeof r.insert=="string"&&r.insert.endsWith(`
`):r.attributes!=null?Object.keys(r.attributes).some(n=>e.query(n,Re.BLOCK)!=null):!1}function I8e(e,t){const r=t.reduce((s,i)=>s+(i.delete||0),0);let n=t.length()-r;return R8e(e,t)&&(n-=1),n}function P2(e,t){if(!e)return e;const r=t.transformPosition(e.index),n=t.transformPosition(e.index+e.length);return{index:r,length:n-r}}class vG extends uo{constructor(t,r){super(t,r),t.root.addEventListener("drop",n=>{var s;n.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){const a=document.caretPositionFromPoint(n.clientX,n.clientY);i=document.createRange(),i.setStart(a.offsetNode,a.offset),i.setEnd(a.offsetNode,a.offset)}const o=i&&t.selection.normalizeNative(i);if(o){const a=t.selection.normalizedToRange(o);(s=n.dataTransfer)!=null&&s.files&&this.upload(a,n.dataTransfer.files)}})}upload(t,r){const n=[];Array.from(r).forEach(s=>{var i;s&&(i=this.options.mimetypes)!=null&&i.includes(s.type)&&n.push(s)}),n.length>0&&this.options.handler.call(this,t,n)}}vG.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(e,t){if(!this.quill.scroll.query("image"))return;const r=t.map(n=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(n)}));Promise.all(r).then(n=>{const s=n.reduce((i,o)=>i.insert({image:o}),new Pe().retain(e.index).delete(e.length));this.quill.updateContents(s,Te.sources.USER),this.quill.setSelection(e.index+n.length,Te.sources.SILENT)})}};const D8e=["insertText","insertReplacementText"];class L8e extends uo{constructor(t,r){super(t,r),t.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||t.on(oe.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){JO({range:t,quill:this.quill})}replaceText(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(r){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new Pe().retain(t.index).insert(r,n),oe.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+r.length,0,oe.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!D8e.includes(t.inputType))return;const r=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!r||r.collapsed===!0)return;const n=M8e(t);if(n==null)return;const s=this.quill.selection.normalizeNative(r),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function M8e(e){var t;return typeof e.data=="string"?e.data:(t=e.dataTransfer)!=null&&t.types.includes("text/plain")?e.dataTransfer.getData("text/plain"):null}const $8e=/Mac/i.test(navigator.platform),F8e=100,z8e=e=>!!(e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="Home"||$8e&&e.key==="a"&&e.ctrlKey===!0);class U8e extends uo{constructor(t,r){super(t,r),de(this,"isListening",!1),de(this,"selectionChangeDeadline",0),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,r){let{line:n,event:s}=r;if(!(n instanceof Zi)||!n.uiNode)return!0;const i=getComputedStyle(n.domNode).direction==="rtl";return i&&s.key!=="ArrowRight"||!i&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(s.shiftKey?1:0),oe.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&z8e(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+F8e,this.isListening)return;this.isListening=!0;const t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const r=t.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const n=this.quill.scroll.find(r.startContainer);if(!(n instanceof Zi)||!n.uiNode)return;const s=document.createRange();s.setStartAfter(n.uiNode),s.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(s)}}oe.register({"blots/block":bn,"blots/block/embed":ui,"blots/break":co,"blots/container":Uu,"blots/cursor":Ew,"blots/embed":WO,"blots/inline":fc,"blots/scroll":Nd,"blots/text":to,"modules/clipboard":mG,"modules/history":yG,"modules/keyboard":Tw,"modules/uploader":vG,"modules/input":L8e,"modules/uiNode":U8e});class B8e extends lo{add(t,r){let n=0;if(r==="+1"||r==="-1"){const s=this.value(t)||0;n=r==="+1"?s+1:s-1}else typeof r=="number"&&(n=r);return n===0?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,r){return super.canAdd(t,r)||super.canAdd(t,parseInt(r,10))}value(t){return parseInt(super.value(t),10)||void 0}}const q8e=new B8e("indent","ql-indent",{scope:Re.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class R2 extends bn{}de(R2,"blotName","blockquote"),de(R2,"tagName","blockquote");class I2 extends bn{static formats(t){return this.tagName.indexOf(t.tagName)+1}}de(I2,"blotName","header"),de(I2,"tagName",["H1","H2","H3","H4","H5","H6"]);class Lg extends Uu{}Lg.blotName="list-container";Lg.tagName="OL";class Mg extends bn{static create(t){const r=super.create();return r.setAttribute("data-list",t),r}static formats(t){return t.getAttribute("data-list")||void 0}static register(){oe.register(Lg)}constructor(t,r){super(t,r);const n=r.ownerDocument.createElement("span"),s=i=>{if(!t.isEnabled())return;const o=this.statics.formats(r,t);o==="checked"?(this.format("list","unchecked"),i.preventDefault()):o==="unchecked"&&(this.format("list","checked"),i.preventDefault())};n.addEventListener("mousedown",s),n.addEventListener("touchstart",s),this.attachUI(n)}format(t,r){t===this.statics.blotName&&r?this.domNode.setAttribute("data-list",r):super.format(t,r)}}Mg.blotName="list";Mg.tagName="LI";Lg.allowedChildren=[Mg];Mg.requiredContainer=Lg;class Bm extends fc{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}de(Bm,"blotName","bold"),de(Bm,"tagName",["STRONG","B"]);class D2 extends Bm{}de(D2,"blotName","italic"),de(D2,"tagName",["EM","I"]);class Ol extends fc{static create(t){const r=super.create(t);return r.setAttribute("href",this.sanitize(t)),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}static formats(t){return t.getAttribute("href")}static sanitize(t){return bG(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,r){t!==this.statics.blotName||!r?super.format(t,r):this.domNode.setAttribute("href",this.constructor.sanitize(r))}}de(Ol,"blotName","link"),de(Ol,"tagName","A"),de(Ol,"SANITIZED_URL","about:blank"),de(Ol,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function bG(e,t){const r=document.createElement("a");r.href=e;const n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}class L2 extends fc{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}de(L2,"blotName","script"),de(L2,"tagName",["SUB","SUP"]);class M2 extends Bm{}de(M2,"blotName","strike"),de(M2,"tagName",["S","STRIKE"]);class $2 extends fc{}de($2,"blotName","underline"),de($2,"tagName","U");class Lv extends WO{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const r=super.create(t);return typeof t=="string"&&(window.katex.render(t,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",t)),r}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}de(Lv,"blotName","formula"),de(Lv,"className","ql-formula"),de(Lv,"tagName","SPAN");const YM=["alt","height","width"];class F2 extends qs{static create(t){const r=super.create(t);return typeof t=="string"&&r.setAttribute("src",this.sanitize(t)),r}static formats(t){return YM.reduce((r,n)=>(t.hasAttribute(n)&&(r[n]=t.getAttribute(n)),r),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return bG(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,r){YM.indexOf(t)>-1?r?this.domNode.setAttribute(t,r):this.domNode.removeAttribute(t):super.format(t,r)}}de(F2,"blotName","image"),de(F2,"tagName","IMG");const JM=["height","width"];class Mv extends ui{static create(t){const r=super.create(t);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen","true"),r.setAttribute("src",this.sanitize(t)),r}static formats(t){return JM.reduce((r,n)=>(t.hasAttribute(n)&&(r[n]=t.getAttribute(n)),r),{})}static sanitize(t){return Ol.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,r){JM.indexOf(t)>-1?r?this.domNode.setAttribute(t,r):this.domNode.removeAttribute(t):super.format(t,r)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}de(Mv,"blotName","video"),de(Mv,"className","ql-video"),de(Mv,"tagName","IFRAME");const Tp=new lo("code-token","hljs",{scope:Re.INLINE});class $a extends fc{static formats(t,r){for(;t!=null&&t!==r.domNode;){if(t.classList&&t.classList.contains(In.className))return super.formats(t,r);t=t.parentNode}}constructor(t,r,n){super(t,r,n),Tp.add(this.domNode,n)}format(t,r){t!==$a.blotName?super.format(t,r):r?Tp.add(this.domNode,r):(Tp.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Tp.value(this.domNode)||this.unwrap()}}$a.blotName="code-token";$a.className="ql-token";class oi extends In{static create(t){const r=super.create(t);return typeof t=="string"&&r.setAttribute("data-language",t),r}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,r){t===this.statics.blotName&&r?this.domNode.setAttribute("data-language",r):super.format(t,r)}replaceWith(t,r){return this.formatAt(0,this.length(),$a.blotName,!1),super.replaceWith(t,r)}}class Yp extends Bu{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,r){t===oi.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(t,r)}))}formatAt(t,r,n,s){n===oi.blotName&&(this.forceNext=!0),super.formatAt(t,r,n,s)}highlight(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const n=`${Array.from(this.domNode.childNodes).filter(i=>i!==this.uiNode).map(i=>i.textContent).join(`
`)}
`,s=oi.formats(this.children.head.domNode);if(r||this.forceNext||this.cachedText!==n){if(n.trim().length>0||this.cachedText==null){const i=this.children.reduce((a,l)=>a.concat(rG(l,!1)),new Pe),o=t(n,s);i.diff(o).reduce((a,l)=>{let{retain:c,attributes:u}=l;return c?(u&&Object.keys(u).forEach(h=>{[oi.blotName,$a.blotName].includes(h)&&this.formatAt(a,c,h,u[h])}),a+c):a},0)}this.cachedText=n,this.forceNext=!1}}html(t,r){const[n]=this.children.find(t);return`<pre data-language="${n?oi.formats(n.domNode):"plain"}">
${Sw(this.code(t,r))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const r=oi.formats(this.children.head.domNode);r!==this.uiNode.value&&(this.uiNode.value=r)}}}Yp.allowedChildren=[oi];oi.requiredContainer=Yp;oi.allowedChildren=[$a,Ew,to,co];const V8e=(e,t,r)=>{if(typeof e.versionString=="string"){const n=e.versionString.split(".")[0];if(parseInt(n,10)>=11)return e.highlight(r,{language:t}).value}return e.highlight(t,r).value};class xG extends uo{static register(){oe.register($a,!0),oe.register(oi,!0),oe.register(Yp,!0)}constructor(t,r){if(super(t,r),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,s)=>{let{key:i}=s;return n[i]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(oe.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof Yp))return;const r=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:s,label:i}=n;const o=r.ownerDocument.createElement("option");o.textContent=i,o.setAttribute("value",s),r.appendChild(o)}),r.addEventListener("change",()=>{t.format(oi.blotName,r.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(r),t.children.head&&(r.value=oi.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(oe.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(oe.sources.USER);const n=this.quill.getSelection();(t==null?this.quill.scroll.descendants(Yp):[t]).forEach(s=>{s.highlight(this.highlightBlot,r)}),this.quill.update(oe.sources.SILENT),n!=null&&this.quill.setSelection(n,oe.sources.SILENT)}highlightBlot(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(r=this.languages[r]?r:"plain",r==="plain")return Sw(t).split(`
`).reduce((s,i,o)=>(o!==0&&s.insert(`
`,{[In.blotName]:r}),s.insert(i)),new Pe);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(In.className),n.innerHTML=V8e(this.options.hljs,r,t),XO(this.quill.scroll,n,[(s,i)=>{const o=Tp.value(s);return o?i.compose(new Pe().retain(i.length(),{[$a.blotName]:o})):i}],[(s,i)=>s.data.split(`
`).reduce((o,a,l)=>(l!==0&&o.insert(`
`,{[In.blotName]:r}),o.insert(a)),i)],new WeakMap)}}xG.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const z2=class wG extends bn{static create(t){const r=super.create();return t?r.setAttribute("data-row",t):r.setAttribute("data-row",QO()),r}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,r){t===wG.blotName&&r?this.domNode.setAttribute("data-row",r):super.format(t,r)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};de(z2,"blotName","table"),de(z2,"tagName","TD");let pa=z2;class Fa extends Uu{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),r=this.children.tail.formats(),n=this.next.children.head.formats(),s=this.next.children.tail.formats();return t.table===r.table&&t.table===n.table&&t.table===s.table}return!1}optimize(t){super.optimize(t),this.children.forEach(r=>{if(r.next==null)return;const n=r.formats(),s=r.next.formats();if(n.table!==s.table){const i=this.splitAfter(r);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}de(Fa,"blotName","table-row"),de(Fa,"tagName","TR");class Io extends Uu{}de(Io,"blotName","table-body"),de(Io,"tagName","TBODY");class Vh extends Uu{balanceCells(){const t=this.descendants(Fa),r=t.reduce((n,s)=>Math.max(s.children.length,n),0);t.forEach(n=>{new Array(r-n.children.length).fill(0).forEach(()=>{let s;n.children.head!=null&&(s=pa.formats(n.children.head.domNode));const i=this.scroll.create(pa.blotName,s);n.appendChild(i),i.optimize()})})}cells(t){return this.rows().map(r=>r.children.at(t))}deleteColumn(t){const[r]=this.descendant(Io);r==null||r.children.head==null||r.children.forEach(n=>{const s=n.children.at(t);s!=null&&s.remove()})}insertColumn(t){const[r]=this.descendant(Io);r==null||r.children.head==null||r.children.forEach(n=>{const s=n.children.at(t),i=pa.formats(n.children.head.domNode),o=this.scroll.create(pa.blotName,i);n.insertBefore(o,s)})}insertRow(t){const[r]=this.descendant(Io);if(r==null||r.children.head==null)return;const n=QO(),s=this.scroll.create(Fa.blotName);r.children.head.children.forEach(()=>{const o=this.scroll.create(pa.blotName,n);s.appendChild(o)});const i=r.children.at(t);r.insertBefore(s,i)}rows(){const t=this.children.head;return t==null?[]:t.children.map(r=>r)}}de(Vh,"blotName","table-container"),de(Vh,"tagName","TABLE");Vh.allowedChildren=[Io];Io.requiredContainer=Vh;Io.allowedChildren=[Fa];Fa.requiredContainer=Io;Fa.allowedChildren=[pa];pa.requiredContainer=Fa;function QO(){return`row-${Math.random().toString(36).slice(2,6)}`}class W8e extends uo{static register(){oe.register(pa),oe.register(Fa),oe.register(Io),oe.register(Vh)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Vh).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,r]=this.getTable();r!=null&&(t.deleteColumn(r.cellOffset()),this.quill.update(oe.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(oe.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const r=t.offset();t.remove(),this.quill.update(oe.sources.USER),this.quill.setSelection(r,oe.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[r,n]=this.quill.getLine(t.index);if(r==null||r.statics.blotName!==pa.blotName)return[null,null,null,-1];const s=r.parent;return[s.parent.parent,s,r,n]}insertColumn(t){const r=this.quill.getSelection();if(!r)return;const[n,s,i]=this.getTable(r);if(i==null)return;const o=i.cellOffset();n.insertColumn(o+t),this.quill.update(oe.sources.USER);let a=s.rowOffset();t===0&&(a+=1),this.quill.setSelection(r.index+a,r.length,oe.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const r=this.quill.getSelection();if(!r)return;const[n,s,i]=this.getTable(r);if(i==null)return;const o=s.rowOffset();n.insertRow(o+t),this.quill.update(oe.sources.USER),t>0?this.quill.setSelection(r,oe.sources.SILENT):this.quill.setSelection(r.index+s.children.length,r.length,oe.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,r){const n=this.quill.getSelection();if(n==null)return;const s=new Array(t).fill(0).reduce(i=>{const o=new Array(r).fill(`
`).join("");return i.insert(o,{table:QO()})},new Pe().retain(n.index));this.quill.updateContents(s,oe.sources.USER),this.quill.setSelection(n.index,oe.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(oe.events.SCROLL_OPTIMIZE,t=>{t.some(r=>["TD","TR","TBODY","TABLE"].includes(r.target.tagName)?(this.quill.once(oe.events.TEXT_CHANGE,(n,s,i)=>{i===oe.sources.USER&&this.balanceTables()}),!0):!1)})}}const XM=Za("quill:toolbar");class eP extends uo{constructor(t,r){var n,s;if(super(t,r),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),K8e(i,this.options.container),(s=(n=t.container)==null?void 0:n.parentNode)==null||s.insertBefore(i,t.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){XM.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var o;const a=(o=this.options.handlers)==null?void 0:o[i];a&&this.addHandler(i,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(oe.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(t,r){this.handlers[t]=r}attach(t){let r=Array.from(t.classList).find(s=>s.indexOf("ql-")===0);if(!r)return;if(r=r.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[r]==null&&this.quill.scroll.query(r)==null){XM.warn("ignoring attaching to nonexistent format",r,t);return}const n=t.tagName==="SELECT"?"change":"click";t.addEventListener(n,s=>{let i;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const a=t.options[t.selectedIndex];a.hasAttribute("selected")?i=!1:i=a.value||!1}else t.classList.contains("ql-active")?i=!1:i=t.value||!t.hasAttribute("value"),s.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[r]!=null)this.handlers[r].call(this,i);else if(this.quill.scroll.query(r).prototype instanceof qs){if(i=prompt(`Enter ${r}`),!i)return;this.quill.updateContents(new Pe().retain(o.index).delete(o.length).insert({[r]:i}),oe.sources.USER)}else this.quill.format(r,i,oe.sources.USER);this.update(o)}),this.controls.push([r,t])}update(t){const r=t==null?{}:this.quill.getFormat(t);this.controls.forEach(n=>{const[s,i]=n;if(i.tagName==="SELECT"){let o=null;if(t==null)o=null;else if(r[s]==null)o=i.querySelector("option[selected]");else if(!Array.isArray(r[s])){let a=r[s];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),o=i.querySelector(`option[value="${a}"]`)}o==null?(i.value="",i.selectedIndex=-1):o.selected=!0}else if(t==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const o=r[s],a=o===i.getAttribute("value")||o!=null&&o.toString()===i.getAttribute("value")||o==null&&!i.getAttribute("value");i.classList.toggle("ql-active",a),i.setAttribute("aria-pressed",a.toString())}else{const o=r[s]!=null;i.classList.toggle("ql-active",o),i.setAttribute("aria-pressed",o.toString())}})}}eP.DEFAULTS={};function QM(e,t,r){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${t}`),n.setAttribute("aria-pressed","false"),r!=null?(n.value=r,n.setAttribute("aria-label",`${t}: ${r}`)):n.setAttribute("aria-label",t),e.appendChild(n)}function K8e(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(r=>{const n=document.createElement("span");n.classList.add("ql-formats"),r.forEach(s=>{if(typeof s=="string")QM(n,s);else{const i=Object.keys(s)[0],o=s[i];Array.isArray(o)?H8e(n,i,o):QM(n,i,o)}}),e.appendChild(n)})}function H8e(e,t,r){const n=document.createElement("select");n.classList.add(`ql-${t}`),r.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),n.appendChild(i)}),e.appendChild(n)}eP.DEFAULTS={container:null,handlers:{clean(){const e=this.quill.getSelection();if(e!=null)if(e.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(r=>{this.quill.scroll.query(r,Re.INLINE)!=null&&this.quill.format(r,!1,oe.sources.USER)})}else this.quill.removeFormat(e.index,e.length,oe.sources.USER)},direction(e){const{align:t}=this.quill.getFormat();e==="rtl"&&t==null?this.quill.format("align","right",oe.sources.USER):!e&&t==="right"&&this.quill.format("align",!1,oe.sources.USER),this.quill.format("direction",e,oe.sources.USER)},indent(e){const t=this.quill.getSelection(),r=this.quill.getFormat(t),n=parseInt(r.indent||0,10);if(e==="+1"||e==="-1"){let s=e==="+1"?1:-1;r.direction==="rtl"&&(s*=-1),this.quill.format("indent",n+s,oe.sources.USER)}},link(e){e===!0&&(e=prompt("Enter link URL:")),this.quill.format("link",e,oe.sources.USER)},list(e){const t=this.quill.getSelection(),r=this.quill.getFormat(t);e==="check"?r.list==="checked"||r.list==="unchecked"?this.quill.format("list",!1,oe.sources.USER):this.quill.format("list","unchecked",oe.sources.USER):this.quill.format("list",e,oe.sources.USER)}}};const Z8e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',G8e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',Y8e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',J8e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',X8e='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Q8e='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',eUe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',tUe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',e6='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',rUe='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',nUe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',sUe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',iUe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',oUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',aUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',lUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',cUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',uUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',dUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',hUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',fUe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',pUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',mUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',gUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',yUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',vUe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',bUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',xUe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',wUe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',_Ue='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',jUe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',kUe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',NUe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',qm={align:{"":Z8e,center:G8e,right:Y8e,justify:J8e},background:X8e,blockquote:Q8e,bold:eUe,clean:tUe,code:e6,"code-block":e6,color:rUe,direction:{"":nUe,rtl:sUe},formula:iUe,header:{1:oUe,2:aUe,3:lUe,4:cUe,5:uUe,6:dUe},italic:hUe,image:fUe,indent:{"+1":pUe,"-1":mUe},link:gUe,list:{bullet:yUe,check:vUe,ordered:bUe},script:{sub:xUe,super:wUe},strike:_Ue,table:jUe,underline:kUe,video:NUe},SUe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let t6=0;function r6(e,t){e.setAttribute(t,`${e.getAttribute(t)!=="true"}`)}class Aw{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",r=>{switch(r.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),r.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),r6(this.label,"aria-expanded"),r6(this.options,"aria-hidden")}buildItem(t){const r=document.createElement("span");r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&r.setAttribute("data-value",n),t.textContent&&r.setAttribute("data-label",t.textContent),r.addEventListener("click",()=>{this.selectItem(r,!0)}),r.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(r,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),r}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=SUe,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${t6}`,t6+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(r=>{const n=this.buildItem(r);t.appendChild(n),r.selected===!0&&this.selectItem(n)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.container.querySelector(".ql-selected");t!==n&&(n!=null&&n.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),r&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const r=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}class _G extends Aw{constructor(t,r){super(t),this.label.innerHTML=r,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(t){const r=super.buildItem(t);return r.style.backgroundColor=t.getAttribute("value")||"",r}selectItem(t,r){super.selectItem(t,r);const n=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=s:n.style.fill=s)}}class jG extends Aw{constructor(t,r){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=r[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,r){super.selectItem(t,r);const n=t||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}}const EUe=e=>{const{overflowY:t}=getComputedStyle(e,null);return t!=="visible"&&t!=="clip"};class kG{constructor(t,r){this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,EUe(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const r=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${r}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let o=0;if(i.right>s.right&&(o=s.right-i.right,this.root.style.left=`${r+o}px`),i.left<s.left&&(o=s.left-i.left,this.root.style.left=`${r+o}px`),i.bottom>s.bottom){const a=i.bottom-i.top,l=t.bottom-t.top+a;this.root.style.top=`${n-l}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const CUe=[!1,"center","right","justify"],TUe=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],AUe=[!1,"serif","monospace"],OUe=["1","2","3",!1],PUe=["small",!1,"large","huge"];class $g extends Cw{constructor(t,r){super(t,r);const n=s=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};t.emitter.listenDOM("click",document.body,n)}addModule(t){const r=super.addModule(t);return t==="toolbar"&&this.extendToolbar(r),r}buildButtons(t,r){Array.from(t).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),r[s]!=null))if(s==="direction")n.innerHTML=r[s][""]+r[s].rtl;else if(typeof r[s]=="string")n.innerHTML=r[s];else{const i=n.value||"";i!=null&&r[s][i]&&(n.innerHTML=r[s][i])}})})}buildPickers(t,r){this.pickers=Array.from(t).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&ap(s,CUe),typeof r.align=="object"))return new jG(s,r.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&ap(s,TUe,i==="background"?"#ffffff":"#000000"),new _G(s,r[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?ap(s,AUe):s.classList.contains("ql-header")?ap(s,OUe):s.classList.contains("ql-size")&&ap(s,PUe)),new Aw(s)});const n=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(Te.events.EDITOR_CHANGE,n)}}$g.DEFAULTS=Ll({},Cw.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let e=this.container.querySelector("input.ql-image[type=file]");e==null&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),e.classList.add("ql-image"),e.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,e.files),e.value=""}),this.container.appendChild(e)),e.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class NG extends kG{constructor(t,r){super(t,r),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;r!=null?this.textbox.value=r:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:r}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Te.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Te.sources.USER)),this.quill.root.scrollTop=r;break}case"video":t=RUe(t);case"formula":{if(!t)break;const r=this.quill.getSelection(!0);if(r!=null){const n=r.index+r.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,Te.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",Te.sources.USER),this.quill.setSelection(n+2,Te.sources.USER)}break}}this.textbox.value="",this.hide()}}function RUe(e){let t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:e}function ap(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(n=>{const s=document.createElement("option");n===r?s.setAttribute("selected","selected"):s.setAttribute("value",String(n)),e.appendChild(s)})}const IUe=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class SG extends NG{constructor(t,r){super(t,r),this.quill.on(Te.events.EDITOR_CHANGE,(n,s,i,o)=>{if(n===Te.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&o===Te.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const a=this.quill.getLines(s.index,s.length);if(a.length===1){const l=this.quill.getBounds(s);l!=null&&this.position(l)}else{const l=a[a.length-1],c=this.quill.getIndex(l),u=Math.min(l.length()-1,s.index+s.length-c),h=this.quill.getBounds(new ju(c,u));h!=null&&this.position(h)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Te.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const r=this.quill.getBounds(t);r!=null&&this.position(r)}},1)})}cancel(){this.show()}position(t){const r=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",r!==0&&(n.style.marginLeft=`${-1*r-n.offsetWidth/2}px`),r}}de(SG,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class EG extends $g{constructor(t,r){r.modules.toolbar!=null&&r.modules.toolbar.container==null&&(r.modules.toolbar.container=IUe),super(t,r),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new SG(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),qm),this.buildPickers(t.container.querySelectorAll("select"),qm))}}EG.DEFAULTS=Ll({},$g.DEFAULTS,{modules:{toolbar:{handlers:{link(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1,oe.sources.USER)}}}}});const DUe=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class CG extends NG{constructor(){super(...arguments),de(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,Te.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(Te.events.SELECTION_CHANGE,(t,r,n)=>{if(t!=null){if(t.length===0&&n===Te.sources.USER){const[s,i]=this.quill.scroll.descendant(Ol,t.index);if(s!=null){this.linkRange=new ju(t.index-i,s.length());const o=Ol.formats(s.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}de(CG,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class TG extends $g{constructor(t,r){r.modules.toolbar!=null&&r.modules.toolbar.container==null&&(r.modules.toolbar.container=DUe),super(t,r),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),qm),this.buildPickers(t.container.querySelectorAll("select"),qm),this.tooltip=new CG(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(r,n)=>{t.handlers.link.call(t,!n.format.link)}))}}TG.DEFAULTS=Ll({},$g.DEFAULTS,{modules:{toolbar:{handlers:{link(e){if(e){const t=this.quill.getSelection();if(t==null||t.length===0)return;let r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&r.indexOf("mailto:")!==0&&(r=`mailto:${r}`);const{tooltip:n}=this.quill.theme;n.edit("link",r)}else this.quill.format("link",!1,oe.sources.USER)}}}}});oe.register({"attributors/attribute/direction":aG,"attributors/class/align":sG,"attributors/class/background":Qze,"attributors/class/color":Xze,"attributors/class/direction":lG,"attributors/class/font":dG,"attributors/class/size":fG,"attributors/style/align":iG,"attributors/style/background":ZO,"attributors/style/color":HO,"attributors/style/direction":cG,"attributors/style/font":hG,"attributors/style/size":pG},!0);oe.register({"formats/align":sG,"formats/direction":lG,"formats/indent":q8e,"formats/background":ZO,"formats/color":HO,"formats/font":dG,"formats/size":fG,"formats/blockquote":R2,"formats/code-block":In,"formats/header":I2,"formats/list":Mg,"formats/bold":Bm,"formats/code":GO,"formats/italic":D2,"formats/link":Ol,"formats/script":L2,"formats/strike":M2,"formats/underline":$2,"formats/formula":Lv,"formats/image":F2,"formats/video":Mv,"modules/syntax":xG,"modules/table":W8e,"modules/toolbar":eP,"themes/bubble":EG,"themes/snow":TG,"ui/icons":qm,"ui/picker":Aw,"ui/icon-picker":jG,"ui/color-picker":_G,"ui/tooltip":kG},!0);class Fg extends ee.Component{constructor(t){super(t),this.editingAreaRef=g.createRef(),this.containerRef=g.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(n,s,i,o)=>{var a,l;n==="text-change"?(a=this.onEditorChangeText)==null||a.call(this,this.editor.root.innerHTML,s,o,this.unprivilegedEditor):n==="selection-change"&&((l=this.onEditorChangeSelection)==null||l.call(this,s,o,this.unprivilegedEditor))};const r=this.isControlled()?t.value:t.defaultValue;this.value=r??""}validateProps(t){if(ee.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ee.Children.count(t.children)){const r=ee.Children.only(t.children);if((r==null?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(t,r){if(this.validateProps(t),!this.editor||this.state.generation!==r.generation)return!0;if("value"in t){const n=this.getEditorContents(),s=t.value??"";this.isEqualValue(s,n)||this.setEditorContents(this.editor,s)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),[...this.cleanProps,...this.dirtyProps].some(n=>!xl(t[n],this.props[n]))}shouldComponentRegenerate(t){return this.dirtyProps.some(r=>!xl(t[r],this.props[r]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(t,r){if(this.editor&&this.shouldComponentRegenerate(t)){const n=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){const{delta:n,selection:s}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const i=this.editor;i.setContents(n),n6(()=>this.setEditorSelection(i,s))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){var t,r;if(!this.editor)return;this.unhookEditor(this.editor);const n=(t=this.props.modules)==null?void 0:t.toolbar;if(!(typeof n=="object"&&n&&"container"in n&&typeof n.container=="string"||typeof n=="string")){const s=(r=this.containerRef.current)==null?void 0:r.querySelector(".ql-toolbar");s&&s.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(t,r){const n=new oe(t,r);return r.tabIndex!=null&&this.setEditorTabIndex(n,r.tabIndex),this.hookEditor(n),n}hookEditor(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)}unhookEditor(t){t.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(t){return t&&t.ops}isEqualValue(t,r){return this.isDelta(t)&&this.isDelta(r)?xl(t.ops,r.ops):xl(t,r)}setEditorContents(t,r){this.value=r;const n=this.getEditorSelection();typeof r=="string"?t.setContents(t.clipboard.convert({html:r})):t.setContents(r),n6(()=>this.setEditorSelection(t,n))}setEditorSelection(t,r){if(this.selection=r,r){const n=t.getLength();r.index=Math.max(0,Math.min(r.index,n-1)),r.length=Math.max(0,Math.min(r.length,n-1-r.index)),t.setSelection(r)}}setEditorTabIndex(t,r){var n;(n=t==null?void 0:t.scroll)!=null&&n.domNode&&(t.scroll.domNode.tabIndex=r)}setEditorReadOnly(t,r){r?t.disable():t.enable()}makeUnprivilegedEditor(t){const r=t;return{getHTML:()=>r.root.innerHTML,getSemanticHTML:r.getSemanticHTML.bind(r),getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}}getEditingArea(){const t=this.editingAreaRef.current;if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t}renderEditingArea(){const{children:t,preserveWhitespace:r}=this.props,{generation:n}=this.state,s={key:n,ref:this.editingAreaRef};return ee.Children.count(t)?ee.cloneElement(ee.Children.only(t),s):r?ee.createElement("pre",{...s}):ee.createElement("div",{...s})}render(){return ee.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(t,r,n,s){var i,o;if(!this.editor)return;const a=this.isDelta(this.value)?s.getContents():s.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=a,(o=(i=this.props).onChange)==null||o.call(i,t,r,n,s))}onEditorChangeSelection(t,r,n){var s,i,o,a,l,c;if(!this.editor)return;const u=this.getEditorSelection(),h=!u&&t,f=u&&!t;xl(t,u)||(this.selection=t,(i=(s=this.props).onChangeSelection)==null||i.call(s,t,r,n),h?(a=(o=this.props).onFocus)==null||a.call(o,t,r,n):f&&((c=(l=this.props).onBlur)==null||c.call(l,u,r,n)))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}Fg.displayName="React Quill";Fg.Quill=oe;Fg.defaultProps={theme:"snow",modules:{},readOnly:!1};function n6(e){Promise.resolve().then(e)}const LUe=async()=>{const{data:e,error:t}=await fe.from("posts").select("*");if(t)throw new Error(t.message);return e},MUe=async e=>{const{data:{user:t},error:r}=await fe.auth.getUser();if(r)throw new Error(r.message);if(!t)throw new Error("User not authenticated.");console.log("Attempting to create post with data:",{...e,author_id:t.id});const{data:n,error:s}=await fe.from("posts").insert({...e,author_id:t.id}).select();if(s)throw new Error(s.message);if(!n||n.length===0)throw new Error("Failed to create post: No data returned.");return n[0]},$Ue=async e=>{const{data:t,error:r}=await fe.from("posts").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},FUe=async e=>{const{error:t}=await fe.from("posts").delete().eq("id",e);if(t)throw new Error(t.message)},zUe=({post:e,onSave:t,onCancel:r})=>{const[n,s]=g.useState({title:(e==null?void 0:e.title)||"",content:(e==null?void 0:e.content)||"",status:(e==null?void 0:e.status)||"draft",slug:(e==null?void 0:e.slug)||""}),i=()=>{if(!n.title.trim()){xo.error("Title cannot be empty.");return}if(!n.slug.trim()){xo.error("Slug cannot be empty.");return}const o=e?{...e,...n}:n;t(o)};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Post":"Create New Post"}),d.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-gray-700",children:d.jsx(Ji,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:n.title,onChange:o=>s({...n,title:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter post title...",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug"}),d.jsx("input",{type:"text",value:n.slug,onChange:o=>s({...n,slug:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"post-url-slug"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),d.jsx(Fg,{theme:"snow",value:n.content,onChange:o=>s({...n,content:o}),className:"h-64 mb-12"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:n.status,onChange:o=>s({...n,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"archived",children:"Archived"})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsxs("button",{type:"button",onClick:i,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(fC,{className:"w-4 h-4"}),"Save Post"]}),d.jsx("button",{type:"button",onClick:r,className:"flex items-center gap-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},UUe=()=>{const e=so(),[t,r]=g.useState(!1),[n,s]=g.useState(null),[i,o]=g.useState(""),[a,l]=g.useState("all"),{data:c,isLoading:u,isError:h,error:f}=Rt({queryKey:["posts"],queryFn:LUe}),p=kt({mutationFn:MUe,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]}),r(!1),s(null)}}),v=kt({mutationFn:$Ue,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]}),r(!1),s(null)}}),m=kt({mutationFn:FUe,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]})}}),b=_=>{if(n)v.mutate(_);else{const{...j}=_;p.mutate(j)}},x=_=>{window.confirm("Are you sure you want to delete this post?")&&m.mutate(_)},w=(c==null?void 0:c.filter(_=>{const j=_.title.toLowerCase().includes(i.toLowerCase()),k=a==="all"||_.status===a;return j&&k}))||[];return u?d.jsx("div",{children:"Loading posts..."}):h?d.jsxs("div",{children:["Error loading posts: ",f==null?void 0:f.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(zUe,{post:n,onSave:b,onCancel:()=>{r(!1),s(null)}}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Posts"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Yi,{className:"w-4 h-4"}),"New Post"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(Ru,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:_=>o(_.target.value),placeholder:"Search posts...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsxs("select",{value:a,onChange:_=>l(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"archived",children:"Archived"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Status"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Author"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Date"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Views"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:w.map(_=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:_.title})}),d.jsx("td",{className:"py-4 px-6",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.status==="published"?"bg-green-100 text-green-800":_.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:_.status})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:_.author_id}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:new Date(_.created_at).toLocaleDateString()}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:_.views}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(_),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ox,{className:"w-4 h-4"})}),d.jsx("button",{className:"p-1 text-gray-500 hover:text-green-600",children:d.jsx(fu,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>x(_.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(Ql,{className:"w-4 h-4"})})]})})]},_.id))})]})})]})})};function BUe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qUe=BUe(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const AG=g.createContext(null);function VUe(e,t){return{getTheme:function(){return t??null}}}function Ef(){const e=g.useContext(AG);return e==null&&qUe(8),e}function WUe(e){return{}}const tP={},KUe={},OG={},ou={},rh={},h0={},nh={},rP={},U2={},Vm={},Wm={},Pl={},nP={},sP={},HUe={},PG={},ZUe={},RG={},GUe={},IG={},DG={},f0={},YUe={},LG={},MG={},$G={},JUe={},XUe={},QUe={},s6={},FG={},eBe={},zG={},UG={},tBe={},Ow={},iP={},B2={},rBe={},nBe={},dv={},hv={},sBe={},iBe={},oBe={},ho=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,aBe=ho&&"documentMode"in document?document.documentMode:null,Pi=ho&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Ml=ho&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),p0=!(!ho||!("InputEvent"in window)||aBe)&&"getTargetRanges"in new window.InputEvent("input"),oP=ho&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Pw=ho&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,lBe=ho&&/Android/.test(navigator.userAgent),BG=ho&&/^(?=.*Chrome).*/i.test(navigator.userAgent),cBe=ho&&lBe&&BG,aP=ho&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!BG,zg=1,pc=3,ku=0,qG=1,Wh=2,uBe=0,dBe=1,hBe=2,m0=4,g0=8,lP=128,fBe=112|(3|m0|g0)|lP,cP=1,uP=2,dP=3,hP=4,fP=5,pP=6,Rw=oP||Pw||aP?" ":"​",za=`

`,pBe=Ml?" ":Rw,VG="֑-߿יִ-﷽ﹰ-ﻼ",WG="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",mBe=new RegExp("^[^"+WG+"]*["+VG+"]"),gBe=new RegExp("^[^"+VG+"]*["+WG+"]"),Nu={bold:1,code:16,highlight:lP,italic:2,strikethrough:m0,subscript:32,superscript:64,underline:g0},yBe={directionless:1,unmergeable:2},i6={center:uP,end:pP,justify:hP,left:cP,right:dP,start:fP},vBe={[uP]:"center",[pP]:"end",[hP]:"justify",[cP]:"left",[dP]:"right",[fP]:"start"},bBe={normal:0,segmented:2,token:1},xBe={[uBe]:"normal",[hBe]:"segmented",[dBe]:"token"};function wBe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var je=wBe(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function y0(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const _Be=100;let q2=!1,mP=0;function jBe(e){mP=e.timeStamp}function jk(e,t,r){return t.__lexicalLineBreak===e||e[`__lexicalKey_${r._key}`]!==void 0}function kBe(e,t,r){const n=Uo(r._window);let s=null,i=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,i=n.focusOffset);const o=e.nodeValue;o!==null&&bP(t,o,s,i,!1)}function NBe(e,t,r){if(be(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return t.nodeType===pc&&r.isAttached()}function KG(e,t,r){q2=!0;const n=performance.now()-mP>_Be;try{Ds(e,()=>{const s=Le()||function(f){return f.getEditorState().read(()=>{const p=Le();return p!==null?p.clone():null})}(e),i=new Map,o=e.getRootElement(),a=e._editorState,l=e._blockCursorElement;let c=!1,u="";for(let f=0;f<t.length;f++){const p=t[f],v=p.type,m=p.target;let b=Su(m,a);if(!(b===null&&m!==o||qt(b))){if(v==="characterData")n&&xe(b)&&NBe(s,m,b)&&kBe(m,b,e);else if(v==="childList"){c=!0;const x=p.addedNodes;for(let j=0;j<x.length;j++){const k=x[j],N=JG(k),S=k.parentNode;if(S!=null&&k!==l&&N===null&&(k.nodeName!=="BR"||!jk(k,S,e))){if(Ml){const E=k.innerText||k.nodeValue;E&&(u+=E)}S.removeChild(k)}}const w=p.removedNodes,_=w.length;if(_>0){let j=0;for(let k=0;k<_;k++){const N=w[k];(N.nodeName==="BR"&&jk(N,m,e)||l===N)&&(m.appendChild(N),j++)}_!==j&&(m===o&&(b=QG(a)),i.set(m,b))}}}}if(i.size>0)for(const[f,p]of i)if(ce(p)){const v=p.getChildrenKeys();let m=f.firstChild;for(let b=0;b<v.length;b++){const x=v[b],w=e.getElementByKey(x);w!==null&&(m==null?(f.appendChild(w),m=w):m!==w&&f.replaceChild(w,m),m=m.nextSibling)}}else xe(p)&&p.markDirty();const h=r.takeRecords();if(h.length>0){for(let f=0;f<h.length;f++){const p=h[f],v=p.addedNodes,m=p.target;for(let b=0;b<v.length;b++){const x=v[b],w=x.parentNode;w==null||x.nodeName!=="BR"||jk(x,m,e)||w.removeChild(x)}}r.takeRecords()}s!==null&&(c&&(s.dirty=!0,zo(s)),Ml&&nY(e)&&s.insertRawText(u))})}finally{q2=!1}}function HG(e){const t=e._observer;t!==null&&KG(e,t.takeRecords(),t)}function ZG(e){(function(t){mP===0&&Lw(t).addEventListener("textInput",jBe,!0)})(e),e._observer=new MutationObserver((t,r)=>{KG(e,t,r)})}function o6(e,t){const r=e.__mode,n=e.__format,s=e.__style,i=t.__mode,o=t.__format,a=t.__style;return!(r!==null&&r!==i||n!==null&&n!==o||s!==null&&s!==a)}function a6(e,t){const r=e.mergeWithSibling(t),n=wr()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function l6(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&xe(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(o6(t,n)){n=a6(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&xe(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(o6(n,r)){n=a6(n,r);break}break}r.remove()}}else n.remove()}function GG(e){return c6(e.anchor),c6(e.focus),e}function c6(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),xe(n)){e.set(n.__key,s?n.getTextContentSize():0,"text");break}if(!ce(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element")}}let SBe=1;const EBe=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function gP(e){const t=document.activeElement;if(t===null)return!1;const r=t.nodeName;return qt(Su(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&t.__lexicalEditor==null)}function Ug(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!gP(t)&&YG(t)===e}catch{return!1}}function YG(e){let t=e;for(;t!=null;){const r=t.__lexicalEditor;if(r!=null)return r;t=Dw(t)}return null}function Sd(e){return e.isToken()||e.isSegmented()}function CBe(e){return e.nodeType===pc}function v0(e){let t=e;for(;t!=null;){if(CBe(t))return t;t=t.firstChild}return null}function V2(e,t,r){const n=Nu[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"&&(s&=-33),s}function TBe(e,t){if(t!=null)return void(e.__key=t);ps(),jY();const r=wr(),n=Ga(),s=""+SBe++;n._nodeMap.set(s,e),ce(e)?r._dirtyElements.set(s,!0):r._dirtyLeaves.add(s),r._cloneNotNeeded.add(s),r._dirtyType=qG,e.__key=s}function au(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),i=e.getNextSibling();if(s===null)if(i!==null){const o=i.getWritable();n.__first=i.__key,o.__prev=null}else n.__first=null;else{const o=s.getWritable();if(i!==null){const a=i.getWritable();a.__prev=o.__key,o.__next=a.__key}else o.__next=null;r.__prev=null}if(i===null)if(s!==null){const o=s.getWritable();n.__last=s.__key,o.__next=null}else n.__last=null;else{const o=i.getWritable();if(s!==null){const a=s.getWritable();a.__next=o.__key,o.__prev=a.__key}else o.__prev=null;r.__next=null}n.__size--,r.__parent=null}}function b0(e){jY();const t=e.getLatest(),r=t.__parent,n=Ga(),s=wr(),i=n._nodeMap,o=s._dirtyElements;r!==null&&function(l,c,u){let h=l;for(;h!==null;){if(u.has(h))return;const f=c.get(h);if(f===void 0)break;u.set(h,!1),h=f.__parent}}(r,i,o);const a=t.__key;s._dirtyType=qG,ce(e)?o.set(a,!0):s._dirtyLeaves.add(a)}function vn(e){ps();const t=wr(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=Hn(r);n!==null&&n.getWritable()}if(e!==null){const n=Hn(e);n!==null&&n.getWritable()}}}function Rl(){return Kg()?null:wr()._compositionKey}function Hn(e,t){const r=(t||Ga())._nodeMap.get(e);return r===void 0?null:r}function JG(e,t){const r=e[`__lexicalKey_${wr()._key}`];return r!==void 0?Hn(r,t):null}function Su(e,t){let r=e;for(;r!=null;){const n=JG(r,t);if(n!==null)return n;r=Dw(r)}return null}function XG(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function u6(e){return e.read(()=>Dr().getTextContent())}function Dr(){return QG(Ga())}function QG(e){return e._nodeMap.get("root")}function zo(e){ps();const t=Ga();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function zd(e){const t=wr(),r=function(n,s){let i=n;for(;i!=null;){const o=i[`__lexicalKey_${s._key}`];if(o!==void 0)return o;i=Dw(i)}return null}(e,t);return r===null?e===t.getRootElement()?Hn("root"):null:Hn(r)}function d6(e,t){return t?e.getTextContentSize():0}function eY(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function yP(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function tY(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function rY(e){return e.nodeType===pc?e.nodeValue:null}function vP(e,t,r){const n=Uo(t._window);if(n===null)return;const s=n.anchorNode;let{anchorOffset:i,focusOffset:o}=n;if(s!==null){let a=rY(s);const l=Su(s);if(a!==null&&xe(l)){if(a===Rw&&r){const c=r.length;a=r,i=c,o=c}a!==null&&bP(l,a,i,o,e)}}}function bP(e,t,r,n,s){let i=e;if(i.isAttached()&&(s||!i.isDirty())){const o=i.isComposing();let a=t;(o||s)&&t[t.length-1]===Rw&&(a=t.slice(0,-1));const l=i.getTextContent();if(s||a!==l){if(a===""){if(vn(null),oP||Pw||aP)i.remove();else{const m=wr();setTimeout(()=>{m.update(()=>{i.isAttached()&&i.remove()})},20)}return}const c=i.getParent(),u=Wg(),h=i.getTextContentSize(),f=Rl(),p=i.getKey();if(i.isToken()||f!==null&&p===f&&!o||be(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===e.__key&&u.anchor.offset===0&&!i.canInsertTextBefore()&&!o||u.focus.key===e.__key&&u.focus.offset===h&&!i.canInsertTextAfter()&&!o))return void i.markDirty();const v=Le();if(!be(v)||r===null||n===null)return void i.setTextContent(a);if(v.setTextNodeRange(i,r,i,n),i.isSegmented()){const m=Sn(i.getTextContent());i.replace(m),i=m}i.setTextContent(a)}}}function ABe(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;const r=e.anchor.offset,n=t.getParentOrThrow(),s=t.isToken();return r===0?!t.canInsertTextBefore()||!n.canInsertTextBefore()&&!t.isComposing()||s||function(i){const o=i.getPreviousSibling();return(xe(o)||ce(o)&&o.isInline())&&!o.canInsertTextAfter()}(t):r===t.getTextContentSize()&&(!t.canInsertTextAfter()||!n.canInsertTextAfter()&&!t.isComposing()||s)}function h6(e){return e==="ArrowLeft"}function f6(e){return e==="ArrowRight"}function Ap(e,t){return Pi?e:t}function p6(e){return e==="Enter"}function lp(e){return e==="Backspace"}function cp(e){return e==="Delete"}function m6(e,t,r){return e.toLowerCase()==="a"&&Ap(t,r)}function OBe(){const e=Dr();zo(GG(e.select(0,e.getChildrenSize())))}function Jp(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const i=y0(s);return r[t]=i,i}return s}function xP(e,t,r,n,s){if(r.size===0)return;const i=n.__type,o=n.__key,a=t.get(i);a===void 0&&je(33,i);const l=a.klass;let c=e.get(l);c===void 0&&(c=new Map,e.set(l,c));const u=c.get(o),h=u==="destroyed"&&s==="created";(u===void 0||h)&&c.set(o,h?"updated":s)}function g6(e,t,r){const n=e.getParent();let s=r,i=e;return n!==null&&(t&&r===0?(s=i.getIndexWithinParent(),i=n):t||r!==i.getChildrenSize()||(s=i.getIndexWithinParent()+1,i=n)),i.getChildAtIndex(t?s-1:s)}function Km(e,t){const r=e.offset;if(e.type==="element")return g6(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?g6(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function nY(e){const t=Lw(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function Ne(e,t,r){return kY(e,t,r)}function Iw(e){return!Rn(e)&&!e.isLastChild()&&!e.isInline()}function x0(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&je(75,t),r}function Dw(e){const t=e.assignedSlot||e.parentElement;return t!==null&&t.nodeType===11?t.host:t}function W2(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function Lw(e){const t=e._window;return t===null&&je(78),t}function PBe(e){let t=e.getParentOrThrow();for(;t!==null;){if(Cf(t))return t;t=t.getParentOrThrow()}return t}function Cf(e){return Rn(e)||ce(e)&&e.isShadowRoot()}function Mw(e){const t=wr(),r=e.constructor.getType(),n=t._nodes.get(r);n===void 0&&je(97);const s=n.replace;if(s!==null){const i=s(e);return i instanceof e.constructor||je(98),i}return e}function kk(e,t){!Rn(e.getParent())||ce(t)||qt(t)||je(99)}function Nk(e){return(qt(e)||ce(e)&&!e.canBeEmpty())&&!e.isInline()}function wP(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function RBe(e,t,r){let n=e._blockCursorElement;if(be(r)&&r.isCollapsed()&&r.anchor.type==="element"&&t.contains(document.activeElement)){const s=r.anchor,i=s.getNode(),o=s.offset;let a=!1,l=null;if(o===i.getChildrenSize())Nk(i.getChildAtIndex(o-1))&&(a=!0);else{const c=i.getChildAtIndex(o);if(Nk(c)){const u=c.getPreviousSibling();(u===null||Nk(u))&&(a=!0,l=e.getElementByKey(c.__key))}}if(a){const c=e.getElementByKey(i.__key);return n===null&&(e._blockCursorElement=n=function(u){const h=u.theme,f=document.createElement("div");f.contentEditable="false",f.setAttribute("data-lexical-cursor","true");let p=h.blockCursor;if(p!==void 0){if(typeof p=="string"){const v=y0(p);p=h.blockCursor=v}p!==void 0&&f.classList.add(...p)}return f}(e._config)),t.style.caretColor="transparent",void(l===null?c.appendChild(n):c.insertBefore(n,l))}}n!==null&&wP(n,e,t)}function Uo(e){return ho?(e||window).getSelection():null}function _P(e){return e.nodeType===1}function IBe(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function DBe(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function Ed(e){if(Rn(e)||qt(e)&&!e.isInline())return!0;if(!ce(e)||Cf(e))return!1;const t=e.getFirstChild(),r=t===null||em(t)||xe(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function Sk(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function sY(e,t,r,n,s,i){let o=e.getFirstChild();for(;o!==null;){const a=o.__key;o.__parent===t&&(ce(o)&&sY(o,a,r,n,s,i),r.has(a)||i.delete(a),s.push(a)),o=o.getNextSibling()}}let Hl,ts,Hm,$w,K2,H2,Eu,Gi,Z2,Zm,Zr="",Xn="",Ii=null,oa="",iY=!1,Fw=!1,$v=null;function w0(e,t){const r=Eu.get(e);if(t!==null){const n=J2(e);n.parentNode===t&&t.removeChild(n)}if(Gi.has(e)||ts._keyToDOMMap.delete(e),ce(r)){const n=j0(r,Eu);G2(n,0,n.length-1,null)}r!==void 0&&xP(Zm,Hm,$w,r,"destroyed")}function G2(e,t,r,n){let s=t;for(;s<=r;++s){const i=e[s];i!==void 0&&w0(i,n)}}function Sc(e,t){e.setProperty("text-align",t)}const LBe="40px";function oY(e,t){const r=Hl.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||LBe;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function aY(e,t){const r=e.style;t===0?Sc(r,""):t===cP?Sc(r,"left"):t===uP?Sc(r,"center"):t===dP?Sc(r,"right"):t===hP?Sc(r,"justify"):t===fP?Sc(r,"start"):t===pP&&Sc(r,"end")}function _0(e,t,r){const n=Gi.get(e);n===void 0&&je(60);const s=n.createDOM(Hl,ts);if(function(i,o,a){const l=a._keyToDOMMap;o["__lexicalKey_"+a._key]=i,l.set(i,o)}(e,s,ts),xe(n)?s.setAttribute("data-lexical-text","true"):qt(n)&&s.setAttribute("data-lexical-decorator","true"),ce(n)){const i=n.__indent,o=n.__size;if(i!==0&&oY(s,i),o!==0){const l=o-1;(function(c,u,h,f){const p=Xn;Xn="",Y2(c,h,0,u,f,null),cY(h,f),Xn=p})(j0(n,Gi),l,n,s)}const a=n.__format;a!==0&&aY(s,a),n.isInline()||lY(null,n,s),Iw(n)&&(Zr+=za,oa+=za)}else{const i=n.getTextContent();if(qt(n)){const o=n.decorate(ts,Hl);o!==null&&uY(e,o),s.contentEditable="false"}else xe(n)&&(n.isDirectionless()||(Xn+=i));Zr+=i,oa+=i}if(t!==null)if(r!=null)t.insertBefore(s,r);else{const i=t.__lexicalLineBreak;i!=null?t.insertBefore(s,i):t.appendChild(s)}return xP(Zm,Hm,$w,n,"created"),s}function Y2(e,t,r,n,s,i){const o=Zr;Zr="";let a=r;for(;a<=n;++a){_0(e[a],s,i);const l=Gi.get(e[a]);l!==null&&Ii===null&&xe(l)&&(Ii=l.getFormat())}Iw(t)&&(Zr+=za),s.__lexicalTextContent=Zr,Zr=o+Zr}function y6(e,t){const r=t.get(e);return em(r)||qt(r)&&r.isInline()}function lY(e,t,r){const n=e!==null&&(e.__size===0||y6(e.__last,Eu)),s=t.__size===0||y6(t.__last,Gi);if(n){if(!s){const i=r.__lexicalLineBreak;i!=null&&r.removeChild(i),r.__lexicalLineBreak=null}}else if(s){const i=document.createElement("br");r.__lexicalLineBreak=i,r.appendChild(i)}}function cY(e,t){const r=t.__lexicalDirTextContent,n=t.__lexicalDir;if(r!==Xn||n!==$v){const i=Xn==="",o=i?$v:(s=Xn,mBe.test(s)?"rtl":gBe.test(s)?"ltr":null);if(o!==n){const a=t.classList,l=Hl.theme;let c=n!==null?l[n]:void 0,u=o!==null?l[o]:void 0;if(c!==void 0){if(typeof c=="string"){const h=y0(c);c=l[n]=h}a.remove(...c)}if(o===null||i&&o==="ltr")t.removeAttribute("dir");else{if(u!==void 0){if(typeof u=="string"){const h=y0(u);u=l[o]=h}u!==void 0&&a.add(...u)}t.dir=o}Fw||(e.getWritable().__dir=o)}$v=o,t.__lexicalDirTextContent=Xn,t.__lexicalDir=o}var s}function MBe(e,t,r){const n=Xn;var s;Xn="",Ii=null,function(i,o,a){const l=Zr,c=i.__size,u=o.__size;if(Zr="",c===1&&u===1){const h=i.__first,f=o.__first;if(h===f)Op(h,a);else{const v=J2(h),m=_0(f,null,null);a.replaceChild(m,v),w0(h,null)}const p=Gi.get(f);Ii===null&&xe(p)&&(Ii=p.getFormat())}else{const h=j0(i,Eu),f=j0(o,Gi);if(c===0)u!==0&&Y2(f,o,0,u-1,a,null);else if(u===0){if(c!==0){const p=a.__lexicalLineBreak==null;G2(h,0,c-1,p?null:a),p&&(a.textContent="")}}else(function(p,v,m,b,x,w){const _=b-1,j=x-1;let k,N,S=(P=w,P.firstChild),E=0,T=0;for(var P;E<=_&&T<=j;){const I=v[E],M=m[T];if(I===M)S=Ek(Op(M,w)),E++,T++;else{k===void 0&&(k=new Set(v)),N===void 0&&(N=new Set(m));const W=N.has(I),q=k.has(M);if(W)if(q){const Y=x0(ts,M);Y===S?S=Ek(Op(M,w)):(S!=null?w.insertBefore(Y,S):w.appendChild(Y),Op(M,w)),E++,T++}else _0(M,w,S),T++;else S=Ek(J2(I)),w0(I,w),E++}const z=Gi.get(M);z!==null&&Ii===null&&xe(z)&&(Ii=z.getFormat())}const O=E>_,R=T>j;if(O&&!R){const I=m[j+1];Y2(m,p,T,j,w,I===void 0?null:ts.getElementByKey(I))}else R&&!O&&G2(v,E,_,w)})(o,h,f,c,u,a)}Iw(o)&&(Zr+=za),a.__lexicalTextContent=Zr,Zr=l+Zr}(e,t,r),cY(t,r),Hh(s=t)&&Ii!=null&&Ii!==s.__textFormat&&!Fw&&s.setTextFormat(Ii),Xn=n,Ii=null}function j0(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&je(101),r.push(n),n=s.__next}return r}function Op(e,t){const r=Eu.get(e);let n=Gi.get(e);r!==void 0&&n!==void 0||je(61);const s=iY||H2.has(e)||K2.has(e),i=x0(ts,e);if(r===n&&!s){if(ce(r)){const o=i.__lexicalTextContent;o!==void 0&&(Zr+=o,oa+=o);const a=i.__lexicalDirTextContent;a!==void 0&&(Xn+=a)}else{const o=r.getTextContent();xe(r)&&!r.isDirectionless()&&(Xn+=o),oa+=o,Zr+=o}return i}if(r!==n&&s&&xP(Zm,Hm,$w,n,"updated"),n.updateDOM(r,i,Hl)){const o=_0(e,null,null);return t===null&&je(62),t.replaceChild(o,i),w0(e,null),o}if(ce(r)&&ce(n)){const o=n.__indent;o!==r.__indent&&oY(i,o);const a=n.__format;a!==r.__format&&aY(i,a),s&&(MBe(r,n,i),Rn(n)||n.isInline()||lY(r,n,i)),Iw(n)&&(Zr+=za,oa+=za)}else{const o=n.getTextContent();if(qt(n)){const a=n.decorate(ts,Hl);a!==null&&uY(e,a)}else xe(n)&&!n.isDirectionless()&&(Xn+=o);Zr+=o,oa+=o}if(!Fw&&Rn(n)&&n.__cachedText!==oa){const o=n.getWritable();o.__cachedText=oa,n=o}return i}function uY(e,t){let r=ts._pendingDecorators;const n=ts._decorators;if(r===null){if(n[e]===t)return;r=XG(ts)}r[e]=t}function Ek(e){let t=e.nextSibling;return t!==null&&t===ts._blockCursorElement&&(t=t.nextSibling),t}function $Be(e,t,r,n,s,i){Zr="",oa="",Xn="",iY=n===Wh,$v=null,ts=r,Hl=r._config,Hm=r._nodes,$w=ts._listeners.mutation,K2=s,H2=i,Eu=e._nodeMap,Gi=t._nodeMap,Fw=t._readOnly,Z2=new Map(r._keyToDOMMap);const o=new Map;return Zm=o,Op("root",null),ts=void 0,Hm=void 0,K2=void 0,H2=void 0,Eu=void 0,Gi=void 0,Hl=void 0,Z2=void 0,Zm=void 0,o}function J2(e){const t=Z2.get(e);return t===void 0&&je(75,e),t}const Qo=Object.freeze({}),X2=30,Q2=[["keydown",function(e,t){if(Xp=e.timeStamp,dY=e.key,t.isComposing())return;const{key:r,shiftKey:n,ctrlKey:s,metaKey:i,altKey:o}=e;Ne(t,HUe,e)||r!=null&&(function(a,l,c,u){return f6(a)&&!l&&!u&&!c}(r,s,o,i)?Ne(t,PG,e):function(a,l,c,u,h){return f6(a)&&!u&&!c&&(l||h)}(r,s,n,o,i)?Ne(t,ZUe,e):function(a,l,c,u){return h6(a)&&!l&&!u&&!c}(r,s,o,i)?Ne(t,RG,e):function(a,l,c,u,h){return h6(a)&&!u&&!c&&(l||h)}(r,s,n,o,i)?Ne(t,GUe,e):function(a,l,c){return function(u){return u==="ArrowUp"}(a)&&!l&&!c}(r,s,i)?Ne(t,IG,e):function(a,l,c){return function(u){return u==="ArrowDown"}(a)&&!l&&!c}(r,s,i)?Ne(t,DG,e):function(a,l){return p6(a)&&l}(r,n)?(Qp=!0,Ne(t,f0,e)):function(a){return a===" "}(r)?Ne(t,YUe,e):function(a,l){return Pi&&l&&a.toLowerCase()==="o"}(r,s)?(e.preventDefault(),Qp=!0,Ne(t,rh,!0)):function(a,l){return p6(a)&&!l}(r,n)?(Qp=!1,Ne(t,f0,e)):function(a,l,c,u){return Pi?!l&&!c&&(lp(a)||a.toLowerCase()==="h"&&u):!(u||l||c)&&lp(a)}(r,o,i,s)?lp(r)?Ne(t,LG,e):(e.preventDefault(),Ne(t,ou,!0)):function(a){return a==="Escape"}(r)?Ne(t,MG,e):function(a,l,c,u,h){return Pi?!(c||u||h)&&(cp(a)||a.toLowerCase()==="d"&&l):!(l||u||h)&&cp(a)}(r,s,n,o,i)?cp(r)?Ne(t,$G,e):(e.preventDefault(),Ne(t,ou,!1)):function(a,l,c){return lp(a)&&(Pi?l:c)}(r,o,s)?(e.preventDefault(),Ne(t,Vm,!0)):function(a,l,c){return cp(a)&&(Pi?l:c)}(r,o,s)?(e.preventDefault(),Ne(t,Vm,!1)):function(a,l){return Pi&&l&&lp(a)}(r,i)?(e.preventDefault(),Ne(t,Wm,!0)):function(a,l){return Pi&&l&&cp(a)}(r,i)?(e.preventDefault(),Ne(t,Wm,!1)):function(a,l,c,u){return a.toLowerCase()==="b"&&!l&&Ap(c,u)}(r,o,i,s)?(e.preventDefault(),Ne(t,Pl,"bold")):function(a,l,c,u){return a.toLowerCase()==="u"&&!l&&Ap(c,u)}(r,o,i,s)?(e.preventDefault(),Ne(t,Pl,"underline")):function(a,l,c,u){return a.toLowerCase()==="i"&&!l&&Ap(c,u)}(r,o,i,s)?(e.preventDefault(),Ne(t,Pl,"italic")):function(a,l,c,u){return a==="Tab"&&!l&&!c&&!u}(r,o,s,i)?Ne(t,JUe,e):function(a,l,c,u){return a.toLowerCase()==="z"&&!l&&Ap(c,u)}(r,n,i,s)?(e.preventDefault(),Ne(t,nP,void 0)):function(a,l,c,u){return Pi?a.toLowerCase()==="z"&&c&&l:a.toLowerCase()==="y"&&u||a.toLowerCase()==="z"&&u&&l}(r,n,i,s)?(e.preventDefault(),Ne(t,sP,void 0)):Ui(t._editorState._selection)?function(a,l,c,u){return!l&&a.toLowerCase()==="c"&&(Pi?c:u)}(r,n,i,s)?(e.preventDefault(),Ne(t,Ow,e)):function(a,l,c,u){return!l&&a.toLowerCase()==="x"&&(Pi?c:u)}(r,n,i,s)?(e.preventDefault(),Ne(t,iP,e)):m6(r,i,s)&&(e.preventDefault(),Ne(t,B2,e)):!Ml&&m6(r,i,s)&&(e.preventDefault(),Ne(t,B2,e)),function(a,l,c,u){return a||l||c||u}(s,n,o,i)&&Ne(t,oBe,e))}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;r instanceof Node&&n!=="touch"&&Ds(t,()=>{qt(Su(r))||(tE=!0)})}],["compositionstart",function(e,t){Ds(t,()=>{const r=Le();if(be(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();vn(n.key),(e.timeStamp<Xp+X2||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||xe(s)&&s.getStyle()!==r.style)&&Ne(t,nh,pBe)}})}],["compositionend",function(e,t){Ml?up=!0:Ds(t,()=>{Ck(t,e.data)})}],["input",function(e,t){e.stopPropagation(),Ds(t,()=>{const r=Le(),n=e.data,s=mY(e);if(n!=null&&be(r)&&pY(r,s,n,e.timeStamp,!1)){up&&(Ck(t,n),up=!1);const i=r.anchor.getNode(),o=Uo(t._window);if(o===null)return;const a=r.isBackward(),l=a?r.anchor.offset:r.focus.offset,c=a?r.focus.offset:r.anchor.offset;p0&&!r.isCollapsed()&&xe(i)&&o.anchorNode!==null&&i.getTextContent().slice(0,l)+n+i.getTextContent().slice(l+c)===rY(o.anchorNode)||Ne(t,nh,n);const u=n.length;Ml&&u>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=u),oP||Pw||aP||!t.isComposing()||(Xp=0,vn(null))}else vP(!1,t,n!==null?n:void 0),up&&(Ck(t,n||void 0),up=!1);ps(),HG(wr())}),Cd=null}],["click",function(e,t){Ds(t,()=>{const r=Le(),n=Uo(t._window),s=Wg();if(n){if(be(r)){const i=r.anchor,o=i.getNode();i.type==="element"&&i.offset===0&&r.isCollapsed()&&!Rn(o)&&Dr().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s)?(n.removeAllRanges(),r.dirty=!0):e.detail===3&&!r.isCollapsed()&&o!==r.focus.getNode()&&(ce(o)?o.select(0):o.getParentOrThrow().select(0))}else if(e.pointerType==="touch"){const i=n.anchorNode;if(i!==null){const o=i.nodeType;(o===zg||o===pc)&&zo(kP(s,n,t,e))}}}Ne(t,OG,e)})}],["cut",Qo],["copy",Qo],["dragstart",Qo],["dragover",Qo],["dragend",Qo],["paste",Qo],["focus",Qo],["blur",Qo],["drop",Qo]];p0&&Q2.push(["beforeinput",(e,t)=>function(r,n){const s=r.inputType,i=mY(r);s==="deleteCompositionText"||Ml&&nY(n)||s!=="insertCompositionText"&&Ds(n,()=>{const o=Le();if(s==="deleteContentBackward"){if(o===null){const p=Wg();if(!be(p))return;zo(p.clone())}if(be(o)){const p=o.anchor.key===o.focus.key;if(a=r.timeStamp,dY==="MediaLast"&&a<Xp+X2&&n.isComposing()&&p){if(vn(null),Xp=0,setTimeout(()=>{Ds(n,()=>{vn(null)})},X2),be(o)){const v=o.anchor.getNode();v.markDirty(),o.format=v.getFormat(),xe(v)||je(142),o.style=v.getStyle()}}else{vn(null),r.preventDefault();const v=o.anchor.getNode().getTextContent(),m=o.anchor.offset===0&&o.focus.offset===v.length;cBe&&p&&!m||Ne(n,ou,!0)}return}}var a;if(!be(o))return;const l=r.data;Cd!==null&&vP(!1,n,Cd),o.dirty&&Cd===null||!o.isCollapsed()||Rn(o.anchor.getNode())||i===null||o.applyDOMRange(i),Cd=null;const c=o.anchor,u=o.focus,h=c.getNode(),f=u.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Ne(n,nh,r);break;case"insertFromComposition":vn(null),Ne(n,nh,r);break;case"insertLineBreak":vn(null),Ne(n,rh,!1);break;case"insertParagraph":vn(null),Qp&&!Pw?(Qp=!1,Ne(n,rh,!1)):Ne(n,h0,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Ne(n,rP,r);break;case"deleteByComposition":(function(p,v){return p!==v||ce(p)||ce(v)||!p.isToken()||!v.isToken()})(h,f)&&Ne(n,U2,r);break;case"deleteByDrag":case"deleteByCut":Ne(n,U2,r);break;case"deleteContent":Ne(n,ou,!1);break;case"deleteWordBackward":Ne(n,Vm,!0);break;case"deleteWordForward":Ne(n,Vm,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Ne(n,Wm,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Ne(n,Wm,!1);break;case"formatStrikeThrough":Ne(n,Pl,"strikethrough");break;case"formatBold":Ne(n,Pl,"bold");break;case"formatItalic":Ne(n,Pl,"italic");break;case"formatUnderline":Ne(n,Pl,"underline");break;case"historyUndo":Ne(n,nP,void 0);break;case"historyRedo":Ne(n,sP,void 0)}else{if(l===`
`)r.preventDefault(),Ne(n,rh,!1);else if(l===za)r.preventDefault(),Ne(n,h0,void 0);else if(l==null&&r.dataTransfer){const p=r.dataTransfer.getData("text/plain");r.preventDefault(),o.insertRawText(p)}else l!=null&&pY(o,i,l,r.timeStamp,!0)?(r.preventDefault(),Ne(n,nh,l)):Cd=l;hY=r.timeStamp}})}(e,t)]);let Xp=0,dY=null,hY=0,Cd=null;const k0=new WeakMap;let eE=!1,tE=!1,Qp=!1,up=!1,fY=[0,"",0,"root",0];function pY(e,t,r,n,s){const i=e.anchor,o=e.focus,a=i.getNode(),l=wr(),c=Uo(l._window),u=c!==null?c.anchorNode:null,h=i.key,f=l.getElementByKey(h),p=r.length;return h!==o.key||!xe(a)||(!s&&(!p0||hY<n+50)||a.isDirty()&&p<2||eY(r))&&i.offset!==o.offset&&!a.isComposing()||Sd(a)||a.isDirty()&&p>1||(s||!p0)&&f!==null&&!a.isComposing()&&u!==v0(f)||c!==null&&t!==null&&(!t.collapsed||t.startContainer!==c.anchorNode||t.startOffset!==c.anchorOffset)||a.getFormat()!==e.format||a.getStyle()!==e.style||ABe(e,a)}function v6(e,t){return e!==null&&e.nodeValue!==null&&e.nodeType===pc&&t!==0&&t!==e.nodeValue.length}function b6(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:o}=e;eE&&(eE=!1,v6(n,s)&&v6(i,o))||Ds(t,()=>{if(!r)return void zo(null);if(!Ug(t,n,i))return;const a=Le();if(be(a)){const l=a.anchor,c=l.getNode();if(a.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(a.dirty=!0);const u=Lw(t).event,h=u?u.timeStamp:performance.now(),[f,p,v,m,b]=fY,x=Dr(),w=t.isComposing()===!1&&x.getTextContent()==="";if(h<b+200&&l.offset===v&&l.key===m)a.format=f,a.style=p;else if(l.type==="text")xe(c)||je(141),a.format=c.getFormat(),a.style=c.getStyle();else if(l.type==="element"&&!w){const _=l.getNode();_ instanceof Af&&_.getChildrenSize()===0?a.format=_.getTextFormat():a.format=0,a.style=""}}else{const u=l.key,h=a.focus.key,f=a.getNodes(),p=f.length,v=a.isBackward(),m=v?o:s,b=v?s:o,x=v?h:u,w=v?u:h;let _=fBe,j=!1;for(let k=0;k<p;k++){const N=f[k],S=N.getTextContentSize();if(xe(N)&&S!==0&&!(k===0&&N.__key===x&&m===S||k===p-1&&N.__key===w&&b===0)&&(j=!0,_&=N.getFormat(),_===0))break}a.format=j?_:0}}Ne(t,tP,void 0)})}function mY(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function Ck(e,t){const r=e._compositionKey;if(vn(null),r!==null&&t!=null){if(t===""){const n=Hn(r),s=v0(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&xe(n)&&bP(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=Le();if(be(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void Ne(e,f0,null)}}}vP(!0,e,t)}function gY(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const sh=new Map;function yY(e){const t=e.target,r=Uo(t==null?null:t.nodeType===9?t.defaultView:t.ownerDocument.defaultView);if(r===null)return;const n=YG(r.anchorNode);if(n===null)return;tE&&(tE=!1,Ds(n,()=>{const c=Wg(),u=r.anchorNode;if(u===null)return;const h=u.nodeType;h!==zg&&h!==pc||zo(kP(c,r,n,e))}));const s=yP(n),i=s[s.length-1],o=i._key,a=sh.get(o),l=a||i;l!==n&&b6(r,l,!1),b6(r,n,!0),n!==i?sh.set(o,n):a&&sh.delete(o)}function x6(e){e._lexicalHandled=!0}function w6(e){return e._lexicalHandled===!0}function FBe(e){const t=e.ownerDocument,r=k0.get(t);r===void 0&&je(162);const n=r-1;n>=0||je(164),k0.set(t,n),n===0&&t.removeEventListener("selectionchange",yY);const s=e.__lexicalEditor;s!=null&&(function(o){if(o._parentEditor!==null){const a=yP(o),l=a[a.length-1]._key;sh.get(l)===o&&sh.delete(l)}else sh.delete(o._key)}(s),e.__lexicalEditor=null);const i=gY(e);for(let o=0;o<i.length;o++)i[o]();e.__lexicalEventHandles=[]}function rE(e,t,r){ps();const n=e.__key,s=e.getParent();if(s===null)return;const i=function(a){const l=Le();if(!be(l)||!ce(a))return l;const{anchor:c,focus:u}=l,h=c.getNode(),f=u.getNode();return W2(h,a)&&c.set(a.__key,0,"element"),W2(f,a)&&u.set(a.__key,0,"element"),l}(e);let o=!1;if(be(i)&&t){const a=i.anchor,l=i.focus;a.key===n&&(S0(a,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0),l.key===n&&(S0(l,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0)}else Ui(i)&&t&&e.isSelected()&&e.selectPrevious();if(be(i)&&t&&!o){const a=e.getIndexWithinParent();au(e),N0(i,s,a,-1)}else au(e);r||Cf(s)||s.canBeEmpty()||!s.isEmpty()||rE(s,t),t&&Rn(s)&&s.isEmpty()&&s.selectEnd()}class zw{static getType(){je(64,this.name)}static clone(t){je(65,this.name)}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,TBe(this,t)}getType(){return this.__type}isInline(){je(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=Hn(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||Le();if(r==null)return!1;const n=r.getNodes().some(s=>s.__key===this.__key);return(xe(this)||!be(r)||r.anchor.type!=="element"||r.focus.type!=="element"||r.anchor.key!==r.focus.key||r.anchor.offset!==r.focus.offset)&&n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:Hn(t)}getParentOrThrow(){const t=this.getParent();return t===null&&je(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if(Cf(r))return ce(t)||je(138),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&je(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:Hn(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:Hn(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=this.getParents(),n=t.getParents();ce(this)&&r.unshift(this),ce(t)&&n.unshift(t);const s=r.length,i=n.length;if(s===0||i===0||r[s-1]!==n[i-1])return null;const o=new Set(n);for(let a=0;a<s;a++){const l=r[a];if(o.has(l))return l}return null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){if(this===t)return!1;if(t.isParentOf(this))return!0;if(this.isParentOf(t))return!1;const r=this.getCommonAncestor(t);let n=0,s=0,i=this;for(;;){const o=i.getParentOrThrow();if(o===r){n=i.getIndexWithinParent();break}i=o}for(i=t;;){const o=i.getParentOrThrow();if(o===r){s=i.getIndexWithinParent();break}i=o}return n<s}isParentOf(t){const r=this.__key;if(r===t.__key)return!1;let n=t;for(;n!==null;){if(n.__key===r)return!0;n=n.getParent()}return!1}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let i=this;for(;i!==null;){const o=i.__key;if(s.has(o)||(s.add(o),n.push(i)),i===t)break;const a=ce(i)?r?i.getFirstChild():i.getLastChild():null;if(a!==null){i=a;continue}const l=r?i.getNextSibling():i.getPreviousSibling();if(l!==null){i=l;continue}const c=i.getParentOrThrow();if(s.has(c.__key)||n.push(c),c===t)break;let u=null,h=c;do{if(h===null&&je(68),u=r?h.getNextSibling():h.getPreviousSibling(),h=h.getParent(),h===null)break;u!==null||s.has(h.__key)||n.push(h)}while(u===null);i=u}return r||n.reverse(),n}isDirty(){const t=wr()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=Hn(this.__key);return t===null&&je(113),t}getWritable(){ps();const t=Ga(),r=wr(),n=t._nodeMap,s=this.__key,i=this.getLatest(),o=i.__parent,a=r._cloneNotNeeded,l=Le();if(l!==null&&l.setCachedNodes(null),a.has(s))return b0(i),i;const c=i.constructor.clone(i);return c.__parent=o,c.__next=i.__next,c.__prev=i.__prev,ce(i)&&ce(c)?(Hh(i)&&Hh(c)&&(c.__textFormat=i.__textFormat),c.__first=i.__first,c.__last=i.__last,c.__size=i.__size,c.__indent=i.__indent,c.__format=i.__format,c.__dir=i.__dir):xe(i)&&xe(c)&&(c.__format=i.__format,c.__style=i.__style,c.__mode=i.__mode,c.__detail=i.__detail),a.add(s),c.__key=s,b0(c),n.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){je(70)}updateDOM(t,r,n){je(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){je(72)}static importJSON(t){je(18,this.name)}static transform(){return null}remove(t){rE(this,!0,t)}replace(t,r){ps();let n=Le();n!==null&&(n=n.clone()),kk(this,t);const s=this.getLatest(),i=this.__key,o=t.__key,a=t.getWritable(),l=this.getParentOrThrow().getWritable(),c=l.__size;au(a);const u=s.getPreviousSibling(),h=s.getNextSibling(),f=s.__prev,p=s.__next,v=s.__parent;if(rE(s,!1,!0),u===null?l.__first=o:u.getWritable().__next=o,a.__prev=f,h===null?l.__last=o:h.getWritable().__prev=o,a.__next=p,a.__parent=v,l.__size=c,r&&(ce(this)&&ce(a)||je(139),this.getChildren().forEach(m=>{a.append(m)})),be(n)){zo(n);const m=n.anchor,b=n.focus;m.key===i&&S6(m,a),b.key===i&&S6(b,a)}return Rl()===i&&vn(o),a}insertAfter(t,r=!0){ps(),kk(this,t);const n=this.getWritable(),s=t.getWritable(),i=s.getParent(),o=Le();let a=!1,l=!1;if(i!==null){const p=t.getIndexWithinParent();if(au(s),be(o)){const v=i.__key,m=o.anchor,b=o.focus;a=m.type==="element"&&m.key===v&&m.offset===p+1,l=b.type==="element"&&b.key===v&&b.offset===p+1}}const c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),h=s.__key,f=n.__next;if(c===null?u.__last=h:c.getWritable().__prev=h,u.__size++,n.__next=h,s.__next=f,s.__prev=n.__key,s.__parent=n.__parent,r&&be(o)){const p=this.getIndexWithinParent();N0(o,u,p+1);const v=u.__key;a&&o.anchor.set(v,p+2,"element"),l&&o.focus.set(v,p+2,"element")}return t}insertBefore(t,r=!0){ps(),kk(this,t);const n=this.getWritable(),s=t.getWritable(),i=s.__key;au(s);const o=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),l=n.__prev,c=this.getIndexWithinParent();o===null?a.__first=i:o.getWritable().__next=i,a.__size++,n.__prev=i,s.__prev=l,s.__next=n.__key,s.__parent=n.__parent;const u=Le();return r&&be(u)&&N0(u,this.getParentOrThrow(),c),t}isParentRequired(){return!1}createParentElementNode(){return Do()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){ps();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(ce(n))return n.select();if(!xe(n)){const i=n.getIndexWithinParent()+1;return s.select(i,i)}return n.select(t,r)}selectNext(t,r){ps();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(ce(n))return n.select(0,0);if(!xe(n)){const i=n.getIndexWithinParent();return s.select(i,i)}return n.select(t,r)}markDirty(){this.getWritable()}}class Bg extends zw{static getType(){return"linebreak"}static clone(t){return new Bg(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:t=>function(r){const n=r.parentElement;if(n!==null){const s=n.firstChild;if(s===r||s.nextSibling===r&&_6(s)){const i=n.lastChild;if(i===r||i.previousSibling===r&&_6(i))return!0}}return!1}(t)?null:{conversion:zBe,priority:0}}}static importJSON(t){return Kh()}exportJSON(){return{type:"linebreak",version:1}}}function zBe(e){return{node:Kh()}}function Kh(){return Mw(new Bg)}function em(e){return e instanceof Bg}function _6(e){return e.nodeType===pc&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function Tk(e,t){return 16&t?"code":t&lP?"mark":32&t?"sub":64&t?"sup":null}function Ak(e,t){return 1&t?"strong":2&t?"em":"span"}function vY(e,t,r,n,s){const i=n.classList;let o=Jp(s,"base");o!==void 0&&i.add(...o),o=Jp(s,"underlineStrikethrough");let a=!1;const l=t&g0&&t&m0;o!==void 0&&(r&g0&&r&m0?(a=!0,l||i.add(...o)):l&&i.remove(...o));for(const c in Nu){const u=Nu[c];if(o=Jp(s,c),o!==void 0)if(r&u){if(a&&(c==="underline"||c==="strikethrough")){t&u&&i.remove(...o);continue}t&u&&(!l||c!=="underline")&&c!=="strikethrough"||i.add(...o)}else t&u&&i.remove(...o)}}function bY(e,t,r){const n=t.firstChild,s=r.isComposing(),i=e+(s?Rw:"");if(n==null)t.textContent=i;else{const o=n.nodeValue;if(o!==i)if(s||Ml){const[a,l,c]=function(u,h){const f=u.length,p=h.length;let v=0,m=0;for(;v<f&&v<p&&u[v]===h[v];)v++;for(;m+v<f&&m+v<p&&u[f-m-1]===h[p-m-1];)m++;return[v,f-v-m,h.slice(v,p-m)]}(o,i);l!==0&&n.deleteData(a,l),n.insertData(a,c)}else n.nodeValue=i}}function j6(e,t,r,n,s,i){bY(s,e,t);const o=i.theme.text;o!==void 0&&vY(0,0,n,e,o)}function fv(e,t){const r=document.createElement(t);return r.appendChild(e),r}class Tf extends zw{static getType(){return"text"}static clone(t){return new Tf(t.__text,t.__key)}constructor(t,r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return xBe[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Rl()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=Nu[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return V2(this.getLatest().__format,t,r)}canHaveFormat(){return!0}createDOM(t,r){const n=this.__format,s=Tk(0,n),i=Ak(0,n),o=s===null?i:s,a=document.createElement(o);let l=a;this.hasFormat("code")&&a.setAttribute("spellcheck","false"),s!==null&&(l=document.createElement(i),a.appendChild(l)),j6(l,this,0,n,this.__text,t);const c=this.__style;return c!==""&&(a.style.cssText=c),a}updateDOM(t,r,n){const s=this.__text,i=t.__format,o=this.__format,a=Tk(0,i),l=Tk(0,o),c=Ak(0,i),u=Ak(0,o);if((a===null?c:a)!==(l===null?u:l))return!0;if(a===l&&c!==u){const m=r.firstChild;m==null&&je(48);const b=document.createElement(u);return j6(b,this,0,o,s,n),r.replaceChild(b,m),!1}let h=r;l!==null&&a!==null&&(h=r.firstChild,h==null&&je(49)),bY(s,h,this);const f=n.theme.text;f!==void 0&&i!==o&&vY(0,i,o,h,f);const p=t.__style,v=this.__style;return p!==v&&(r.style.cssText=v),!1}static importDOM(){return{"#text":()=>({conversion:VBe,priority:0}),b:()=>({conversion:BBe,priority:0}),code:()=>({conversion:il,priority:0}),em:()=>({conversion:il,priority:0}),i:()=>({conversion:il,priority:0}),s:()=>({conversion:il,priority:0}),span:()=>({conversion:UBe,priority:0}),strong:()=>({conversion:il,priority:0}),sub:()=>({conversion:il,priority:0}),sup:()=>({conversion:il,priority:0}),u:()=>({conversion:il,priority:0})}}static importJSON(t){const r=Sn(t.text);return r.setFormat(t.format),r.setDetail(t.detail),r.setMode(t.mode),r.setStyle(t.style),r}exportDOM(t){let{element:r}=super.exportDOM(t);return r!==null&&_P(r)||je(132),r.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(r=fv(r,"b")),this.hasFormat("italic")&&(r=fv(r,"i")),this.hasFormat("strikethrough")&&(r=fv(r,"s")),this.hasFormat("underline")&&(r=fv(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?Nu[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?yBe[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=V2(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=bBe[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){ps();let n=t,s=r;const i=Le(),o=this.getTextContent(),a=this.__key;if(typeof o=="string"){const l=o.length;n===void 0&&(n=l),s===void 0&&(s=l)}else n=0,s=0;if(!be(i))return _Y(a,n,a,s,"text","text");{const l=Rl();l!==i.anchor.key&&l!==i.focus.key||vn(a),i.setTextNodeRange(this,n,this,s)}return i}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const i=this.getWritable(),o=i.__text,a=n.length;let l=t;l<0&&(l=a+l,l<0&&(l=0));const c=Le();if(s&&be(c)){const h=t+a;c.setTextNodeRange(i,h,i,h)}const u=o.slice(0,l)+n+o.slice(l+r);return i.__text=u,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){ps();const r=this.getLatest(),n=r.getTextContent(),s=r.__key,i=Rl(),o=new Set(t),a=[],l=n.length;let c="";for(let S=0;S<l;S++)c!==""&&o.has(S)&&(a.push(c),c=""),c+=n[S];c!==""&&a.push(c);const u=a.length;if(u===0)return[];if(a[0]===n)return[r];const h=a[0],f=r.getParentOrThrow();let p;const v=r.getFormat(),m=r.getStyle(),b=r.__detail;let x=!1;r.isSegmented()?(p=Sn(h),p.__format=v,p.__style=m,p.__detail=b,x=!0):(p=r.getWritable(),p.__text=h);const w=Le(),_=[p];let j=h.length;for(let S=1;S<u;S++){const E=a[S],T=E.length,P=Sn(E).getWritable();P.__format=v,P.__style=m,P.__detail=b;const O=P.__key,R=j+T;if(be(w)){const I=w.anchor,M=w.focus;I.key===s&&I.type==="text"&&I.offset>j&&I.offset<=R&&(I.key=O,I.offset-=j,w.dirty=!0),M.key===s&&M.type==="text"&&M.offset>j&&M.offset<=R&&(M.key=O,M.offset-=j,w.dirty=!0)}i===s&&vn(O),j=R,_.push(P)}(function(S){const E=S.getPreviousSibling(),T=S.getNextSibling();E!==null&&b0(E),T!==null&&b0(T)})(this);const k=f.getWritable(),N=this.getIndexWithinParent();return x?(k.splice(N,0,_),this.remove()):k.splice(N,1,_),be(w)&&N0(w,f,N,u-1),_}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||je(50);const n=this.__key,s=t.__key,i=this.__text,o=i.length;Rl()===s&&vn(n);const a=Le();if(be(a)){const h=a.anchor,f=a.focus;h!==null&&h.key===s&&(R6(h,r,n,t,o),a.dirty=!0),f!==null&&f.key===s&&(R6(f,r,n,t,o),a.dirty=!0)}const l=t.__text,c=r?l+i:i+l;this.setTextContent(c);const u=this.getWritable();return t.remove(),u}isTextEntity(){return!1}}function UBe(e){return{forChild:jP(e.style),node:null}}function BBe(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:jP(t.style,r?void 0:"bold"),node:null}}const k6=new WeakMap;function qBe(e){return e.nodeName==="PRE"||e.nodeType===zg&&e.style!==void 0&&e.style.whiteSpace!==void 0&&e.style.whiteSpace.startsWith("pre")}function VBe(e){const t=e;e.parentElement===null&&je(129);let r=t.textContent||"";if(function(n){let s,i=n.parentNode;const o=[n];for(;i!==null&&(s=k6.get(i))===void 0&&!qBe(i);)o.push(i),i=i.parentNode;const a=s===void 0?i:s;for(let l=0;l<o.length;l++)k6.set(o[l],a);return a}(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],i=n.length;for(let o=0;o<i;o++){const a=n[o];a===`
`||a===`\r
`?s.push(Kh()):a==="	"?s.push(Vg()):a!==""&&s.push(Sn(a))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=N6(n,!1))!==null;){const i=n.textContent||"";if(i.length>0){/[ \t\n]$/.test(i)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=N6(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:Sn(r)}}function N6(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const i=r.parentElement;if(i===null)return null;r=i}if(r=n,r.nodeType===zg){const i=r.style.display;if(i===""&&!IBe(r)||i!==""&&!i.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(r.nodeType===pc)return r;if(r.nodeName==="BR")return null}}const WBe={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function il(e){const t=WBe[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:jP(e.style,t),node:null}}function Sn(e=""){return Mw(new Tf(e))}function xe(e){return e instanceof Tf}function jP(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",i=n.includes("line-through"),o=e.fontStyle==="italic",a=n.includes("underline"),l=e.verticalAlign;return c=>(xe(c)&&(s&&!c.hasFormat("bold")&&c.toggleFormat("bold"),i&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),o&&!c.hasFormat("italic")&&c.toggleFormat("italic"),a&&!c.hasFormat("underline")&&c.toggleFormat("underline"),l!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),l!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),t&&!c.hasFormat(t)&&c.toggleFormat(t)),c)}class qg extends Tf{static getType(){return"tab"}static clone(t){const r=new qg(t.__key);return r.__text=t.__text,r.__format=t.__format,r.__style=t.__style,r}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}static importJSON(t){const r=Vg();return r.setFormat(t.format),r.setStyle(t.style),r}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(t){je(126)}setDetail(t){je(127)}setMode(t){je(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function Vg(){return Mw(new qg)}function KBe(e){return e instanceof qg}class HBe{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){let r=this.getNode(),n=t.getNode();const s=this.offset,i=t.offset;return ce(r)&&(r=r.getDescendantByIndex(s)??r),ce(n)&&(n=n.getDescendantByIndex(i)??n),r===n?s<i:r.isBefore(n)}getNode(){const t=Hn(this.key);return t===null&&je(20),t}set(t,r,n){const s=this._selection,i=this.key;this.key=t,this.offset=r,this.type=n,Kg()||(Rl()===i&&vn(t),s!==null&&(s.setCachedNodes(null),s.dirty=!0))}}function Bo(e,t,r){return new HBe(e,t,r)}function Ok(e,t){let r=t.__key,n=e.offset,s="element";if(xe(t)){s="text";const i=t.getTextContentSize();n>i&&(n=i)}else if(!ce(t)){const i=t.getNextSibling();if(xe(i))r=i.__key,n=0,s="text";else{const o=t.getParent();o&&(r=o.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function S6(e,t){if(ce(t)){const r=t.getLastDescendant();ce(r)||xe(r)?Ok(e,r):Ok(e,t)}else Ok(e,t)}function pl(e,t,r,n){e.key=t,e.offset=r,e.type=n}class Uw{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!Ui(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every(s=>n.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new Uw(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let i;if(xe(s))i=s.select();else{const o=s.getIndexWithinParent()+1;i=s.getParentOrThrow().select(o,o)}i.insertNodes(t);for(let o=0;o<n;o++)r[o].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const i=Hn(s);i!==null&&n.push(i)}return Kg()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}}function be(e){return e instanceof mc}class mc{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!be(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this.anchor,n=this.focus,s=r.isBefore(n),i=s?r:n,o=s?n:r;let a=i.getNode(),l=o.getNode();const c=i.offset,u=o.offset;if(ce(a)&&(a=a.getDescendantByIndex(c)??a),ce(l)){let f=l.getDescendantByIndex(u);f!==null&&f!==a&&l.getChildAtIndex(u)===f&&(f=f.getPreviousSibling()),l=f??l}let h;return h=a.is(l)?ce(a)&&a.getChildrenSize()>0?[]:[a]:a.getNodesBetween(l),Kg()||(this._cachedNodes=h),h}setTextNodeRange(t,r,n,s){pl(this.anchor,t.__key,r,"text"),pl(this.focus,n.__key,s,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,i=this.focus,o=s.isBefore(i),[a,l]=nE(this);let c="",u=!0;for(let h=0;h<t.length;h++){const f=t[h];if(ce(f)&&!f.isInline())u||(c+=`
`),u=!f.isEmpty();else if(u=!1,xe(f)){let p=f.getTextContent();f===r?f===n?s.type==="element"&&i.type==="element"&&i.offset!==s.offset||(p=a<l?p.slice(a,l):p.slice(l,a)):p=o?p.slice(a):p.slice(l):f===n&&(p=o?p.slice(0,l):p.slice(0,a)),c+=p}else!qt(f)&&!em(f)||f===n&&this.isCollapsed()||(c+=f.getTextContent())}return c}applyDOMRange(t){const r=wr(),n=r.getEditorState()._selection,s=wY(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[i,o]=s;pl(this.anchor,i.key,i.offset,i.type),pl(this.focus,o.key,o.offset,o.type),this._cachedNodes=null}clone(){const t=this.anchor,r=this.focus;return new mc(Bo(t.key,t.offset,t.type),Bo(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=V2(this.format,t,null),this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=Nu[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let i=0;i<s;i++){const o=r[i];o===`
`||o===`\r
`?n.push(Kh()):o==="	"?n.push(Vg()):n.push(Sn(o))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,i=this.style;let o=r,a=n;!this.isCollapsed()&&n.isBefore(r)&&(o=n,a=r),o.type==="element"&&function(b,x,w,_){const j=b.getNode(),k=j.getChildAtIndex(b.offset),N=Sn(),S=Rn(j)?Do().append(N):N;N.setFormat(w),N.setStyle(_),k===null?j.append(S):k.insertBefore(S),b.is(x)&&x.set(N.__key,0,"text"),b.set(N.__key,0,"text")}(o,a,s,i);const l=o.offset;let c=a.offset;const u=this.getNodes(),h=u.length;let f=u[0];xe(f)||je(26);const p=f.getTextContent().length,v=f.getParentOrThrow();let m=u[h-1];if(h===1&&a.type==="element"&&(c=p,a.set(o.key,c,"text")),this.isCollapsed()&&l===p&&(f.isSegmented()||f.isToken()||!f.canInsertTextAfter()||!v.canInsertTextAfter()&&f.getNextSibling()===null)){let b=f.getNextSibling();if(xe(b)&&b.canInsertTextBefore()&&!Sd(b)||(b=Sn(),b.setFormat(s),b.setStyle(i),v.canInsertTextAfter()?f.insertAfter(b):v.insertAfter(b)),b.select(0,0),f=b,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(f.isSegmented()||f.isToken()||!f.canInsertTextBefore()||!v.canInsertTextBefore()&&f.getPreviousSibling()===null)){let b=f.getPreviousSibling();if(xe(b)&&!Sd(b)||(b=Sn(),b.setFormat(s),v.canInsertTextBefore()?f.insertBefore(b):v.insertBefore(b)),b.select(),f=b,t!=="")return void this.insertText(t)}else if(f.isSegmented()&&l!==p){const b=Sn(f.getTextContent());b.setFormat(s),f.replace(b),f=b}else if(!this.isCollapsed()&&t!==""){const b=m.getParent();if(!v.canInsertTextBefore()||!v.canInsertTextAfter()||ce(b)&&(!b.canInsertTextBefore()||!b.canInsertTextAfter()))return this.insertText(""),xY(this.anchor,this.focus,null),void this.insertText(t)}if(h===1){if(f.isToken()){const _=Sn(t);return _.select(),void f.replace(_)}const b=f.getFormat(),x=f.getStyle();if(l!==c||b===s&&x===i){if(KBe(f)){const _=Sn(t);return _.setFormat(s),_.setStyle(i),_.select(),void f.replace(_)}}else{if(f.getTextContent()!==""){const _=Sn(t);if(_.setFormat(s),_.setStyle(i),_.select(),l===0)f.insertBefore(_,!1);else{const[j]=f.splitText(l);j.insertAfter(_,!1)}return void(_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}f.setFormat(s),f.setStyle(i)}const w=c-l;f=f.spliceText(l,w,t,!0),f.getTextContent()===""?f.remove():this.anchor.type==="text"&&(f.isComposing()?this.anchor.offset-=t.length:(this.format=b,this.style=x))}else{const b=new Set([...f.getParentKeys(),...m.getParentKeys()]),x=ce(f)?f:f.getParentOrThrow();let w=ce(m)?m:m.getParentOrThrow(),_=m;if(!x.is(w)&&w.isInline())do _=w,w=w.getParentOrThrow();while(w.isInline());if(a.type==="text"&&(c!==0||m.getTextContent()==="")||a.type==="element"&&m.getIndexWithinParent()<c)if(xe(m)&&!m.isToken()&&c!==m.getTextContentSize()){if(m.isSegmented()){const E=Sn(m.getTextContent());m.replace(E),m=E}Rn(a.getNode())||a.type!=="text"||(m=m.spliceText(0,c,"")),b.add(m.__key)}else{const E=m.getParentOrThrow();E.canBeEmpty()||E.getChildrenSize()!==1?m.remove():E.remove()}else b.add(m.__key);const j=w.getChildren(),k=new Set(u),N=x.is(w),S=x.isInline()&&f.getNextSibling()===null?x:f;for(let E=j.length-1;E>=0;E--){const T=j[E];if(T.is(f)||ce(T)&&T.isParentOf(f))break;T.isAttached()&&(!k.has(T)||T.is(_)?N||S.insertAfter(T,!1):T.remove())}if(!N){let E=w,T=null;for(;E!==null;){const P=E.getChildren(),O=P.length;(O===0||P[O-1].is(T))&&(b.delete(E.__key),T=E),E=E.getParent()}}if(f.isToken())if(l===p)f.select();else{const E=Sn(t);E.select(),f.replace(E)}else f=f.spliceText(l,p-l,t,!0),f.getTextContent()===""?f.remove():f.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let E=1;E<h;E++){const T=u[E],P=T.__key;b.has(P)||T.remove()}}}removeText(){this.insertText("")}formatText(t){if(this.isCollapsed())return this.toggleFormat(t),void vn(null);const r=this.getNodes(),n=[];for(const w of r)xe(w)&&n.push(w);const s=n.length;if(s===0)return this.toggleFormat(t),void vn(null);const i=this.anchor,o=this.focus,a=this.isBackward(),l=a?o:i,c=a?i:o;let u=0,h=n[0],f=l.type==="element"?0:l.offset;if(l.type==="text"&&f===h.getTextContentSize()&&(u=1,h=n[1],f=0),h==null)return;const p=h.getFormatFlags(t,null),v=s-1;let m=n[v];const b=c.type==="text"?c.offset:m.getTextContentSize();if(h.is(m)){if(f===b)return;if(Sd(h)||f===0&&b===h.getTextContentSize())h.setFormat(p);else{const w=h.splitText(f,b),_=f===0?w[0]:w[1];_.setFormat(p),l.type==="text"&&l.set(_.__key,0,"text"),c.type==="text"&&c.set(_.__key,b-f,"text")}return void(this.format=p)}f===0||Sd(h)||([,h]=h.splitText(f),f=0),h.setFormat(p);const x=m.getFormatFlags(t,p);b>0&&(b===m.getTextContentSize()||Sd(m)||([m]=m.splitText(b)),m.setFormat(x));for(let w=u+1;w<v;w++){const _=n[w],j=_.getFormatFlags(t,x);_.setFormat(j)}l.type==="text"&&l.set(h.__key,f,"text"),c.type==="text"&&c.set(m.__key,b,"text"),this.format=p|x}insertNodes(t){if(t.length===0)return;if(this.anchor.key==="root"){this.insertParagraph();const v=Le();return be(v)||je(134),v.insertNodes(t)}const r=Sk((this.isBackward()?this.focus:this.anchor).getNode(),Ed),n=t[t.length-1];if("__language"in r&&ce(r)){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const v=Pk(this);r.splice(v,0,t),n.selectEnd()}return}if(!t.some(v=>(ce(v)||qt(v))&&!v.isInline())){ce(r)||je(135);const v=Pk(this);return r.splice(v,0,t),void n.selectEnd()}const s=function(v){const m=Do();let b=null;for(let x=0;x<v.length;x++){const w=v[x],_=em(w);if(_||qt(w)&&w.isInline()||ce(w)&&w.isInline()||xe(w)||w.isParentRequired()){if(b===null&&(b=w.createParentElementNode(),m.append(b),_))continue;b!==null&&b.append(w)}else m.append(w),b=null}return m}(t),i=s.getLastDescendant(),o=s.getChildren(),a=v=>"__value"in v&&"__checked"in v,l=!ce(r)||!r.isEmpty()?this.insertParagraph():null,c=o[o.length-1];let u=o[0];var h;ce(h=u)&&Ed(h)&&!h.isEmpty()&&ce(r)&&(!r.isEmpty()||a(r))&&(ce(r)||je(135),r.append(...u.getChildren()),u=o[1]),u&&function(v,m,b){const x=m.getParentOrThrow().getLastChild();let w=m;const _=[m];for(;w!==x;)w.getNextSibling()||je(140),w=w.getNextSibling(),_.push(w);let j=v;for(const k of _)j=j.insertAfter(k)}(r,u);const f=Sk(i,Ed);l&&ce(f)&&(a(l)||Ed(c))&&(f.append(...l.getChildren()),l.remove()),ce(r)&&r.isEmpty()&&r.remove(),i.selectEnd();const p=ce(r)?r.getLastChild():null;em(p)&&f!==r&&p.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=Do();return Dr().splice(this.anchor.offset,0,[o]),o.select(),o}const t=Pk(this),r=Sk(this.anchor.getNode(),Ed);ce(r)||je(136);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],i=r.insertNewAfter(this,!1);return i?(i.append(...s),i.selectStart(),i):null}insertLineBreak(t){const r=Kh();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,i=this.focus;let o=t[0],a=t[n];const[l,c]=nE(this);if(r===0)return[];if(r===1){if(xe(o)&&!this.isCollapsed()){const h=l>c?c:l,f=l>c?l:c,p=o.splitText(h,f),v=h===0?p[0]:p[1];return v!=null?[v]:[]}return[o]}const u=s.isBefore(i);if(xe(o)){const h=u?l:c;h===o.getTextContentSize()?t.shift():h!==0&&([,o]=o.splitText(h),t[0]=o)}if(xe(a)){const h=a.getTextContent().length,f=u?c:l;f===0?t.pop():f!==h&&([a]=a.splitText(f),t[n]=a)}return t}modify(t,r,n){const s=this.focus,i=this.anchor,o=t==="move",a=Km(s,r);if(qt(a)&&!a.isIsolated()){if(o&&a.isKeyboardSelectable()){const p=O6();return p.add(a.__key),void zo(p)}const f=r?a.getPreviousSibling():a.getNextSibling();if(xe(f)){const p=f.__key,v=r?f.getTextContent().length:0;return s.set(p,v,"text"),void(o&&i.set(p,v,"text"))}{const p=a.getParentOrThrow();let v,m;return ce(f)?(m=f.__key,v=r?f.getChildrenSize():0):(v=a.getIndexWithinParent(),m=p.__key,r||v++),s.set(m,v,"element"),void(o&&i.set(m,v,"element"))}}const l=wr(),c=Uo(l._window);if(!c)return;const u=l._blockCursorElement,h=l._rootElement;if(h===null||u===null||!ce(a)||a.isInline()||a.canBeEmpty()||wP(u,l,h),function(f,p,v,m){f.modify(p,v,m)}(c,t,r?"backward":"forward",n),c.rangeCount>0){const f=c.getRangeAt(0),p=this.anchor.getNode(),v=Rn(p)?p:PBe(p);if(this.applyDOMRange(f),this.dirty=!0,!o){const m=this.getNodes(),b=[];let x=!1;for(let w=0;w<m.length;w++){const _=m[w];W2(_,v)?b.push(_):x=!0}if(x&&b.length>0)if(r){const w=b[0];ce(w)?w.selectStart():w.getParentOrThrow().selectStart()}else{const w=b[b.length-1];ce(w)?w.selectEnd():w.getParentOrThrow().selectEnd()}c.anchorNode===f.startContainer&&c.anchorOffset===f.startOffset||function(w){const _=w.focus,j=w.anchor,k=j.key,N=j.offset,S=j.type;pl(j,_.key,_.offset,_.type),pl(_,k,N,S),w._cachedNodes=null}(this)}}}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&ce(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),i=r.getNextSibling()||(s===null?null:s.getNextSibling());if(ce(i)&&i.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const i=this.focus,o=Km(i,t);if(qt(o)&&!o.isIsolated()){if(o.isKeyboardSelectable()&&ce(s)&&s.getChildrenSize()===0){s.remove();const a=O6();a.add(o.__key),zo(a)}else o.remove(),wr().dispatchCommand(tP,void 0);return}if(!t&&ce(o)&&ce(s)&&s.isEmpty())return s.remove(),void o.selectStart();if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&(n.type==="element"?n.getNode():n.getNode().getParentOrThrow()).collapseAtStart(this))return}else{const a=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,a!==null&&a.isSegmented()){const l=i.offset,c=a.getTextContentSize();if(a.is(s)||t&&l!==c||!t&&l!==0)return void C6(a,t,l)}else if(s!==null&&s.isSegmented()){const l=n.offset,c=s.getTextContentSize();if(s.is(a)||t&&l!==0||!t&&l!==c)return void C6(s,t,l)}(function(l,c){const u=l.anchor,h=l.focus,f=u.getNode(),p=h.getNode();if(f===p&&u.type==="text"&&h.type==="text"){const v=u.offset,m=h.offset,b=v<m,x=b?v:m,w=b?m:v,_=w-1;x!==_&&(eY(f.getTextContent().slice(x,w))||(c?h.offset=_:u.offset=_))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&Rn(n.getParent())&&n.getIndexWithinParent()===0&&n.collapseAtStart(this)}}deleteLine(t){if(this.isCollapsed()){const r=this.anchor.type==="element";if(r&&this.insertText(" "),this.modify("extend",t,"lineboundary"),(t?this.focus:this.anchor).offset===0&&this.modify("extend",t,"character"),r){const n=t?this.anchor:this.focus;n.set(n.key,n.offset+1,n.type)}}this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function Ui(e){return e instanceof Uw}function E6(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function nE(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[E6(r),E6(n)]}function C6(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),i=s.length;let o=0,a=0;for(let c=0;c<i;c++){const u=c===i-1;if(a=o,o+=s[c].length,t&&o===r||o>r||u){s.splice(c,1),u&&(a=void 0);break}}const l=s.join("").trim();l===""?n.remove():(n.setTextContent(l),n.select(a,a))}function T6(e,t,r,n){let s,i=t;if(e.nodeType===zg){let o=!1;const a=e.childNodes,l=a.length,c=n._blockCursorElement;i===l&&(o=!0,i=l-1);let u=a[i],h=!1;if(u===c)u=a[i+1],h=!0;else if(c!==null){const f=c.parentNode;e===f&&t>Array.prototype.indexOf.call(f.children,c)&&i--}if(s=zd(u),xe(s))i=d6(s,o);else{let f=zd(e);if(f===null)return null;if(ce(f)){i=Math.min(f.getChildrenSize(),i);let p=f.getChildAtIndex(i);if(ce(p)&&function(v,m,b){const x=v.getParent();return b===null||x===null||!x.canBeEmpty()||x!==b.getNode()}(p,0,r)){const v=o?p.getLastDescendant():p.getFirstDescendant();v===null?f=p:(p=v,f=ce(p)?p:p.getParentOrThrow()),i=0}xe(p)?(s=p,f=null,i=d6(p,o)):p!==f&&o&&!h&&i++}else{const p=f.getIndexWithinParent();i=t===0&&qt(f)&&zd(e)===f?p:p+1,f=f.getParentOrThrow()}if(ce(f))return Bo(f.__key,i,"element")}}else s=zd(e);return xe(s)?Bo(s.__key,i,"text"):null}function A6(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const i=s.getPreviousSibling(),o=s.getParent();if(t){if((r||!t)&&i===null&&ce(o)&&o.isInline()){const a=o.getPreviousSibling();xe(a)&&(e.key=a.__key,e.offset=a.getTextContent().length)}}else ce(i)&&!r&&i.isInline()?(e.key=i.__key,e.offset=i.getChildrenSize(),e.type="element"):xe(i)&&(e.key=i.__key,e.offset=i.getTextContent().length)}else if(n===s.getTextContent().length){const i=s.getNextSibling(),o=s.getParent();if(t&&ce(i)&&i.isInline())e.key=i.__key,e.offset=0,e.type="element";else if((r||t)&&i===null&&ce(o)&&o.isInline()&&!o.canInsertTextAfter()){const a=o.getNextSibling();xe(a)&&(e.key=a.__key,e.offset=0)}}}function xY(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);A6(e,n,s),A6(t,!n,s),s&&(t.key=e.key,t.offset=e.offset,t.type=e.type);const i=wr();if(i.isComposing()&&i._compositionKey!==e.key&&be(r)){const o=r.anchor,a=r.focus;pl(e,o.key,o.offset,o.type),pl(t,a.key,a.offset,a.type)}}}function wY(e,t,r,n,s,i){if(e===null||r===null||!Ug(s,e,r))return null;const o=T6(e,t,be(i)?i.anchor:null,s);if(o===null)return null;const a=T6(r,n,be(i)?i.focus:null,s);if(a===null)return null;if(o.type==="element"&&a.type==="element"){const l=zd(e),c=zd(r);if(qt(l)&&qt(c))return null}return xY(o,a,i),[o,a]}function sE(e){return ce(e)&&!e.isInline()}function _Y(e,t,r,n,s,i){const o=Ga(),a=new mc(Bo(e,t,s),Bo(r,n,i),0,"");return a.dirty=!0,o._selection=a,a}function ZBe(){const e=Bo("root",0,"element"),t=Bo("root",0,"element");return new mc(e,t,0,"")}function O6(){return new Uw(new Set)}function kP(e,t,r,n){const s=r._window;if(s===null)return null;const i=n||s.event,o=i?i.type:void 0,a=o==="selectionchange",l=!q2&&(a||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&i&&i.detail===3||o==="drop"||o===void 0);let c,u,h,f;if(be(e)&&!l)return e.clone();if(t===null)return null;if(c=t.anchorNode,u=t.focusNode,h=t.anchorOffset,f=t.focusOffset,a&&be(e)&&!Ug(r,c,u))return e.clone();const p=wY(c,h,u,f,r,e);if(p===null)return null;const[v,m]=p;return new mc(v,m,be(e)?e.format:0,be(e)?e.style:"")}function Le(){return Ga()._selection}function Wg(){return wr()._editorState._selection}function N0(e,t,r,n=1){const s=e.anchor,i=e.focus,o=s.getNode(),a=i.getNode();if(!t.is(o)&&!t.is(a))return;const l=t.__key;if(e.isCollapsed()){const c=s.offset;if(r<=c&&n>0||r<c&&n<0){const u=Math.max(0,c+n);s.set(l,u,"element"),i.set(l,u,"element"),P6(e)}}else{const c=e.isBackward(),u=c?i:s,h=u.getNode(),f=c?s:i,p=f.getNode();if(t.is(h)){const v=u.offset;(r<=v&&n>0||r<v&&n<0)&&u.set(l,Math.max(0,v+n),"element")}if(t.is(p)){const v=f.offset;(r<=v&&n>0||r<v&&n<0)&&f.set(l,Math.max(0,v+n),"element")}}P6(e)}function P6(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,i=t.getNode(),o=n.getNode();if(e.isCollapsed()){if(!ce(i))return;const a=i.getChildrenSize(),l=r>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(r);if(xe(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,"text"),n.set(c.__key,u,"text")}}else{if(ce(i)){const a=i.getChildrenSize(),l=r>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(r);if(xe(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,"text")}}if(ce(o)){const a=o.getChildrenSize(),l=s>=a,c=l?o.getChildAtIndex(a-1):o.getChildAtIndex(s);if(xe(c)){let u=0;l&&(u=c.getTextContentSize()),n.set(c.__key,u,"text")}}}}function S0(e,t,r,n,s){let i=null,o=0,a=null;n!==null?(i=n.__key,xe(n)?(o=n.getTextContentSize(),a="text"):ce(n)&&(o=n.getChildrenSize(),a="element")):s!==null&&(i=s.__key,xe(s)?a="text":ce(s)&&(a="element")),i!==null&&a!==null?e.set(i,o,a):(o=t.getIndexWithinParent(),o===-1&&(o=r.getChildrenSize()),e.set(r.__key,o,"element"))}function R6(e,t,r,n,s){e.type==="text"?(e.key=r,t||(e.offset+=s)):e.offset>n.getIndexWithinParent()&&(e.offset-=1)}function GBe(e,t,r,n,s,i,o){const a=n.anchorNode,l=n.focusNode,c=n.anchorOffset,u=n.focusOffset,h=document.activeElement;if(s.has("collaboration")&&h!==i||h!==null&&gP(h))return;if(!be(t))return void(e!==null&&Ug(r,a,l)&&n.removeAllRanges());const f=t.anchor,p=t.focus,v=f.key,m=p.key,b=x0(r,v),x=x0(r,m),w=f.offset,_=p.offset,j=t.format,k=t.style,N=t.isCollapsed();let S=b,E=x,T=!1;if(f.type==="text"){S=v0(b);const z=f.getNode();T=z.getFormat()!==j||z.getStyle()!==k}else be(e)&&e.anchor.type==="text"&&(T=!0);var P,O,R,I,M;if(p.type==="text"&&(E=v0(x)),S!==null&&E!==null&&(N&&(e===null||T||be(e)&&(e.format!==j||e.style!==k))&&(P=j,O=k,R=w,I=v,M=performance.now(),fY=[P,O,R,I,M]),c!==w||u!==_||a!==S||l!==E||n.type==="Range"&&N||(h!==null&&i.contains(h)||i.focus({preventScroll:!0}),f.type==="element"))){try{n.setBaseAndExtent(S,w,E,_)}catch{}if(!s.has("skip-scroll-into-view")&&t.isCollapsed()&&i!==null&&i===document.activeElement){const z=t instanceof mc&&t.anchor.type==="element"?S.childNodes[w]||null:n.rangeCount>0?n.getRangeAt(0):null;if(z!==null){let W;if(z instanceof Text){const q=document.createRange();q.selectNode(z),W=q.getBoundingClientRect()}else W=z.getBoundingClientRect();(function(q,Y,L){const K=L.ownerDocument,G=K.defaultView;if(G===null)return;let{top:re,bottom:H}=Y,ne=0,J=0,Ie=L;for(;Ie!==null;){const me=Ie===K.body;if(me)ne=0,J=Lw(q).innerHeight;else{const U=Ie.getBoundingClientRect();ne=U.top,J=U.bottom}let ge=0;if(re<ne?ge=-(ne-re):H>J&&(ge=H-J),ge!==0)if(me)G.scrollBy(0,ge);else{const U=Ie.scrollTop;Ie.scrollTop+=ge;const Z=Ie.scrollTop-U;re-=Z,H-=Z}if(me)break;Ie=Dw(Ie)}})(r,W,i)}}eE=!0}}function YBe(e){let t=Le()||Wg();t===null&&(t=Dr().selectEnd()),t.insertNodes(e)}function Pk(e){let t=e;e.isCollapsed()||t.removeText();const r=Le();be(r)&&(t=r),be(t)||je(161);const n=t.anchor;let s=n.getNode(),i=n.offset;for(;!Ed(s);)[s,i]=JBe(s,i);return i}function JBe(e,t){const r=e.getParent();if(!r){const s=Do();return Dr().append(s),s.select(),[Dr(),0]}if(xe(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const i=t===0?0:1;return[r,s[0].getIndexWithinParent()+i]}if(!ce(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new mc(Bo(e.__key,t,"element"),Bo(e.__key,t,"element"),0,""),i=e.insertNewAfter(s);i&&i.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}let on=null,an=null,vs=!1,Rk=!1,Fv=0;const I6={characterData:!0,childList:!0,subtree:!0};function Kg(){return vs||on!==null&&on._readOnly}function ps(){vs&&je(13)}function jY(){Fv>99&&je(14)}function Ga(){return on===null&&je(15),on}function wr(){return an===null&&je(16),an}function XBe(){return an}function D6(e,t,r){const n=t.__type,s=function(a,l){const c=a._nodes.get(l);return c===void 0&&je(30,l),c}(e,n);let i=r.get(n);i===void 0&&(i=Array.from(s.transforms),r.set(n,i));const o=i.length;for(let a=0;a<o&&(i[a](t),t.isAttached());a++);}function L6(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function QBe(e){return NP(e,wr()._nodes)}function NP(e,t){const r=e.type,n=t.get(r);n===void 0&&je(17,r);const s=n.klass;e.type!==s.getType()&&je(18,s.name);const i=s.importJSON(e),o=e.children;if(ce(i)&&Array.isArray(o))for(let a=0;a<o.length;a++){const l=NP(o[a],t);i.append(l)}return i}function M6(e,t){const r=on,n=vs,s=an;on=e,vs=!0,an=null;try{return t()}finally{on=r,vs=n,an=s}}function lu(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const i=e._editorState,o=i._selection,a=r._selection,l=e._dirtyType!==ku,c=on,u=vs,h=an,f=e._updating,p=e._observer;let v=null;if(e._pendingEditorState=null,e._editorState=r,!s&&l&&p!==null){an=e,on=r,vs=!1,e._updating=!0;try{const N=e._dirtyType,S=e._dirtyElements,E=e._dirtyLeaves;p.disconnect(),v=$Be(i,r,e,N,S,E)}catch(N){if(N instanceof Error&&e._onError(N),Rk)throw N;return EY(e,null,n,r),ZG(e),e._dirtyType=Wh,Rk=!0,lu(e,i),void(Rk=!1)}finally{p.observe(n,I6),e._updating=f,on=c,vs=u,an=h}}r._readOnly||(r._readOnly=!0);const m=e._dirtyLeaves,b=e._dirtyElements,x=e._normalizedNodes,w=e._updateTags,_=e._deferred;l&&(e._dirtyType=ku,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(N,S){const E=N._decorators;let T=N._pendingDecorators||E;const P=S._nodeMap;let O;for(O in T)P.has(O)||(T===E&&(T=XG(N)),delete T[O])}(e,r);const j=s?null:Uo(e._window);if(e._editable&&j!==null&&(l||a===null||a.dirty)){an=e,on=r;try{if(p!==null&&p.disconnect(),l||a===null||a.dirty){const N=e._blockCursorElement;N!==null&&wP(N,e,n),GBe(o,a,e,j,w,n)}RBe(e,n,a),p!==null&&p.observe(n,I6)}finally{an=h,on=c}}v!==null&&function(N,S,E,T,P){const O=Array.from(N._listeners.mutation),R=O.length;for(let I=0;I<R;I++){const[M,z]=O[I],W=S.get(z);W!==void 0&&M(W,{dirtyLeaves:T,prevEditorState:P,updateTags:E})}}(e,v,w,m,i),be(a)||a===null||o!==null&&o.is(a)||e.dispatchCommand(tP,void 0);const k=e._pendingDecorators;k!==null&&(e._decorators=k,e._pendingDecorators=null,tm("decorator",e,!0,k)),function(N,S,E){const T=u6(S),P=u6(E);T!==P&&tm("textcontent",N,!0,P)}(e,t||i,r),tm("update",e,!0,{dirtyElements:b,dirtyLeaves:m,editorState:r,normalizedNodes:x,prevEditorState:t||i,tags:w}),function(N,S){if(N._deferred=[],S.length!==0){const E=N._updating;N._updating=!0;try{for(let T=0;T<S.length;T++)S[T]()}finally{N._updating=E}}}(e,_),function(N){const S=N._updates;if(S.length!==0){const E=S.shift();if(E){const[T,P]=E;NY(N,T,P)}}}(e)}function tm(e,t,r,...n){const s=t._updating;t._updating=r;try{const i=Array.from(t._listeners[e]);for(let o=0;o<i.length;o++)i[o].apply(null,n)}finally{t._updating=s}}function kY(e,t,r){if(e._updating===!1||an!==e){let s=!1;return e.update(()=>{s=kY(e,t,r)}),s}const n=yP(e);for(let s=4;s>=0;s--)for(let i=0;i<n.length;i++){const o=n[i]._commands.get(t);if(o!==void 0){const a=o[s];if(a!==void 0){const l=Array.from(a),c=l.length;for(let u=0;u<c;u++)if(l[u](r,e)===!0)return!0}}}return!1}function $6(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[i,o]=s;let a,l;o!==void 0&&(a=o.onUpdate,l=o.tag,o.skipTransforms&&(n=!0),a&&e._deferred.push(a),l&&e._updateTags.add(l)),i()}}return n}function NY(e,t,r){const n=e._updateTags;let s,i,o=!1,a=!1;r!==void 0&&(s=r.onUpdate,i=r.tag,i!=null&&n.add(i),o=r.skipTransforms||!1,a=r.discrete||!1),s&&e._deferred.push(s);const l=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=new qw(new Map((c||l)._nodeMap)),u=!0),c._flushSync=a;const h=on,f=vs,p=an,v=e._updating;on=c,vs=!1,e._updating=!0,an=e;try{u&&(e._headless?l._selection!==null&&(c._selection=l._selection.clone()):c._selection=function(x){const w=x.getEditorState()._selection,_=Uo(x._window);return be(w)||w==null?kP(w,_,x,null):w.clone()}(e));const m=e._compositionKey;t(),o=$6(e,o),function(x,w){const _=w.getEditorState()._selection,j=x._selection;if(be(j)){const k=j.anchor,N=j.focus;let S;if(k.type==="text"&&(S=k.getNode(),S.selectionTransform(_,j)),N.type==="text"){const E=N.getNode();S!==E&&E.selectionTransform(_,j)}}}(c,e),e._dirtyType!==ku&&(o?function(x,w){const _=w._dirtyLeaves,j=x._nodeMap;for(const k of _){const N=j.get(k);xe(N)&&N.isAttached()&&N.isSimpleText()&&!N.isUnmergeable()&&l6(N)}}(c,e):function(x,w){const _=w._dirtyLeaves,j=w._dirtyElements,k=x._nodeMap,N=Rl(),S=new Map;let E=_,T=E.size,P=j,O=P.size;for(;T>0||O>0;){if(T>0){w._dirtyLeaves=new Set;for(const R of E){const I=k.get(R);xe(I)&&I.isAttached()&&I.isSimpleText()&&!I.isUnmergeable()&&l6(I),I!==void 0&&L6(I,N)&&D6(w,I,S),_.add(R)}if(E=w._dirtyLeaves,T=E.size,T>0){Fv++;continue}}w._dirtyLeaves=new Set,w._dirtyElements=new Map;for(const R of P){const I=R[0],M=R[1];if(I!=="root"&&!M)continue;const z=k.get(I);z!==void 0&&L6(z,N)&&D6(w,z,S),j.set(I,M)}E=w._dirtyLeaves,T=E.size,P=w._dirtyElements,O=P.size,Fv++}w._dirtyLeaves=_,w._dirtyElements=j}(c,e),$6(e),function(x,w,_,j){const k=x._nodeMap,N=w._nodeMap,S=[];for(const[E]of j){const T=N.get(E);T!==void 0&&(T.isAttached()||(ce(T)&&sY(T,E,k,N,S,j),k.has(E)||j.delete(E),S.push(E)))}for(const E of S)N.delete(E);for(const E of _){const T=N.get(E);T===void 0||T.isAttached()||(k.has(E)||_.delete(E),N.delete(E))}}(l,c,e._dirtyLeaves,e._dirtyElements)),m!==e._compositionKey&&(c._flushSync=!0);const b=c._selection;if(be(b)){const x=c._nodeMap,w=b.anchor.key,_=b.focus.key;x.get(w)!==void 0&&x.get(_)!==void 0||je(19)}else Ui(b)&&b._nodes.size===0&&(c._selection=null)}catch(m){return m instanceof Error&&e._onError(m),e._pendingEditorState=l,e._dirtyType=Wh,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void lu(e)}finally{on=h,vs=f,an=p,e._updating=v,Fv=0}e._dirtyType!==ku||function(m,b){const x=b.getEditorState()._selection,w=m._selection;if(w!==null){if(w.dirty||!w.is(x))return!0}else if(x!==null)return!0;return!1}(c,e)?c._flushSync?(c._flushSync=!1,lu(e)):u&&EBe(()=>{lu(e)}):(c._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function Ds(e,t,r){e._updating?e._updates.push([t,r]):NY(e,t,r)}class Bw extends zw{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__indent=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return vBe[t]||""}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=wr()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(xe(r)&&t.push(r),ce(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;ce(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;ce(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const i=r[n-1];return ce(i)&&i.getLastDescendant()||i||null}const s=r[t];return ce(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:Hn(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&je(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:Hn(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&je(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const i=r[s];t+=i.getTextContent(),ce(i)&&s!==n-1&&!i.isInline()&&(t+=za)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const i=r[s];t+=i.getTextContentSize(),ce(i)&&s!==n-1&&!i.isInline()&&(t+=za.length)}return t}getDirection(){return this.getLatest().__dir}hasFormat(t){if(t!==""){const r=i6[t];return!!(this.getFormat()&r)}return!1}select(t,r){ps();const n=Le();let s=t,i=r;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const l=this.getFirstChild();if(xe(l)||ce(l))return l.select(0,0)}else if(!(t!==void 0&&t!==o||r!==void 0&&r!==o)){const l=this.getLastChild();if(xe(l)||ce(l))return l.select()}}s===void 0&&(s=o),i===void 0&&(i=o);const a=this.__key;return be(n)?(n.anchor.set(a,s,"element"),n.focus.set(a,i,"element"),n.dirty=!0,n):_Y(a,s,a,i,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(r=>r.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?i6[t]:0,this}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,i=this.getChildrenSize(),o=this.getWritable(),a=o.__key,l=[],c=[],u=this.getChildAtIndex(t+r);let h=null,f=i-r+s;if(t!==0)if(t===i)h=this.getLastChild();else{const v=this.getChildAtIndex(t);v!==null&&(h=v.getPreviousSibling())}if(r>0){let v=h===null?this.getFirstChild():h.getNextSibling();for(let m=0;m<r;m++){v===null&&je(100);const b=v.getNextSibling(),x=v.__key;au(v.getWritable()),c.push(x),v=b}}let p=h;for(let v=0;v<s;v++){const m=n[v];p!==null&&m.is(p)&&(h=p=p.getPreviousSibling());const b=m.getWritable();b.__parent===a&&f--,au(b);const x=m.__key;if(p===null)o.__first=x,b.__prev=null;else{const w=p.getWritable();w.__next=x,b.__prev=w.__key}m.__key===a&&je(76),b.__parent=a,l.push(x),p=m}if(t+r===i)p!==null&&(p.getWritable().__next=null,o.__last=p.__key);else if(u!==null){const v=u.getWritable();if(p!==null){const m=p.getWritable();v.__prev=p.__key,m.__next=u.__key}else v.__prev=null}if(o.__size=f,c.length){const v=Le();if(be(v)){const m=new Set(c),b=new Set(l),{anchor:x,focus:w}=v;F6(x,m,b)&&S0(x,x.getNode(),this,h,u),F6(w,m,b)&&S0(w,w.getNode(),this,h,u),f!==0||this.canBeEmpty()||Cf(this)||this.remove()}}return o}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}}function ce(e){return e instanceof Bw}function F6(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}class eqe extends zw{constructor(t){super(t)}decorate(t,r){je(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function qt(e){return e instanceof eqe}class Hg extends Bw{static getType(){return"root"}static clone(){return new Hg}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){je(51)}getTextContent(){const t=this.__cachedText;return!Kg()&&wr()._dirtyType!==ku||t===null?super.getTextContent():t}remove(){je(52)}replace(t){je(53)}insertBefore(t){je(54)}insertAfter(t){je(55)}updateDOM(t,r){return!1}append(...t){for(let r=0;r<t.length;r++){const n=t[r];ce(n)||qt(n)||je(56)}return super.append(...t)}static importJSON(t){const r=Dr();return r.setFormat(t.format),r.setIndent(t.indent),r.setDirection(t.direction),r}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function Rn(e){return e instanceof Hg}function SP(){return new qw(new Map([["root",new Hg]]))}function SY(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&je(130,r.name),ce(e)){const n=t.children;Array.isArray(n)||je(59,r.name);const s=e.getChildren();for(let i=0;i<s.length;i++){const o=SY(s[i]);n.push(o)}}return t}class qw{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t){return M6(this,t)}clone(t){const r=new qw(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return M6(this,()=>({root:SY(Dr())}))}}class EP extends Bw{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class Af extends Bw{constructor(t){super(t),this.__textFormat=0}static getType(){return"paragraph"}getTextFormat(){return this.getLatest().__textFormat}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}hasTextFormat(t){const r=Nu[t];return!!(this.getTextFormat()&r)}static clone(t){return new Af(t.__key)}createDOM(t){const r=document.createElement("p"),n=Jp(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:tqe,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(r&&_P(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();r.style.textAlign=n;const s=this.getDirection();s&&(r.dir=s);const i=this.getIndent();i>0&&(r.style.textIndent=20*i+"px")}return{element:r}}static importJSON(t){const r=Do();return r.setFormat(t.format),r.setIndent(t.indent),r.setDirection(t.direction),r.setTextFormat(t.textFormat),r}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),type:"paragraph",version:1}}insertNewAfter(t,r){const n=Do();n.setTextFormat(t.format);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||xe(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function tqe(e){const t=Do();if(e.style){t.setFormat(e.style.textAlign);const r=parseInt(e.style.textIndent,10)/20;r>0&&t.setIndent(r)}return{node:t}}function Do(){return Mw(new Af)}function Hh(e){return e instanceof Af}const pt=0,rqe=4;function EY(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=SP(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=ku,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const i=e._observer;i!==null&&(i.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function nqe(e){const t=e||{},r=XBe(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,i=t.disableEvents||!1,o=SP(),a=t.namespace||(s!==null?s._config.namespace:tY()),l=t.editorState,c=[Hg,Tf,Bg,qg,Af,EP,...t.nodes||[]],{onError:u,html:h}=t,f=t.editable===void 0||t.editable;let p;if(e===void 0&&r!==null)p=r._nodes;else{p=new Map;for(let m=0;m<c.length;m++){let b=c[m],x=null,w=null;if(typeof b!="function"){const N=b;b=N.replace,x=N.with,w=N.withKlass||null}const _=b.getType(),j=b.transform(),k=new Set;j!==null&&k.add(j),p.set(_,{exportDOM:h&&h.export?h.export.get(b):void 0,klass:b,replace:x,replaceWithKlass:w,transforms:k})}}const v=new sqe(o,s,p,{disableEvents:i,namespace:a,theme:n},u||console.error,function(m,b){const x=new Map,w=new Set,_=j=>{Object.keys(j).forEach(k=>{let N=x.get(k);N===void 0&&(N=[],x.set(k,N)),N.push(j[k])})};return m.forEach(j=>{const k=j.klass.importDOM;if(k==null||w.has(k))return;w.add(k);const N=k.call(j.klass);N!==null&&_(N)}),b&&_(b),x}(p,h?h.import:void 0),f);return l!==void 0&&(v._pendingEditorState=l,v._dirtyType=Wh),v}class sqe{constructor(t,r,n,s,i,o,a){this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=ku,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=tY(),this._onError=i,this._htmlConversions=o,this._editable=a,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&je(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const i=s.get(t);i===void 0&&je(36,String(t));const o=i[n];return o.add(r),()=>{o.delete(r),i.every(a=>a.size===0)&&s.delete(t)}}registerMutationListener(t,r){let n=this._nodes.get(t.getType());n===void 0&&je(37,t.name);let s=t,i=null;for(;i=n.replaceWithKlass;)s=i,n=this._nodes.get(i.getType()),n===void 0&&je(37,i.name);const o=this._listeners.mutation;return o.set(r,s),()=>{o.delete(r)}}registerNodeTransformToKlass(t,r){const n=t.getType(),s=this._nodes.get(n);return s===void 0&&je(37,t.name),s.transforms.add(r),s}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],i=n.replaceWithKlass;if(i!=null){const l=this.registerNodeTransformToKlass(i,r);s.push(l)}var o,a;return o=this,a=t.getType(),Ds(o,()=>{const l=Ga();if(l.isEmpty())return;if(a==="root")return void Dr().markDirty();const c=l._nodeMap;for(const[,u]of c)u.markDirty()},o._pendingEditorState===null?{tag:"history-merge"}:void 0),()=>{s.forEach(l=>l.transforms.delete(r))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return Ne(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=Jp(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,EY(this,r,t,s),r!==null&&(this._config.disableEvents||FBe(r),n!=null&&r.classList.remove(...n)),t!==null){const i=function(a){const l=a.ownerDocument;return l&&l.defaultView||null}(t),o=t.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=i,this._dirtyType=Wh,ZG(this),this._updateTags.add("history-merge"),lu(this),this._config.disableEvents||function(a,l){const c=a.ownerDocument,u=k0.get(c);(u===void 0||u<1)&&c.addEventListener("selectionchange",yY),k0.set(c,(u||0)+1),a.__lexicalEditor=l;const h=gY(a);for(let f=0;f<Q2.length;f++){const[p,v]=Q2[f],m=typeof v=="function"?b=>{w6(b)||(x6(b),(l.isEditable()||p==="click")&&v(b,l))}:b=>{if(w6(b))return;x6(b);const x=l.isEditable();switch(p){case"cut":return x&&Ne(l,iP,b);case"copy":return Ne(l,Ow,b);case"paste":return x&&Ne(l,rP,b);case"dragstart":return x&&Ne(l,zG,b);case"dragover":return x&&Ne(l,UG,b);case"dragend":return x&&Ne(l,tBe,b);case"focus":return x&&Ne(l,sBe,b);case"blur":return x&&Ne(l,iBe,b);case"drop":return x&&Ne(l,FG,b)}};a.addEventListener(p,m),h.push(()=>{a.removeEventListener(p,m)})}}(t,this),n!=null&&t.classList.add(...n)}else this._editorState=s,this._pendingEditorState=null,this._window=null;tm("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&je(38),HG(this);const n=this._pendingEditorState,s=this._updateTags,i=r!==void 0?r.tag:null;n===null||n.isEmpty()||(i!=null&&s.add(i),lu(this)),this._pendingEditorState=t,this._dirtyType=Wh,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&s.add(i),lu(this)}parseEditorState(t,r){return function(n,s,i){const o=SP(),a=on,l=vs,c=an,u=s._dirtyElements,h=s._dirtyLeaves,f=s._cloneNotNeeded,p=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,on=o,vs=!1,an=s;try{const v=s._nodes;NP(n.root,v),i&&i(),o._readOnly=!0}catch(v){v instanceof Error&&s._onError(v)}finally{s._dirtyElements=u,s._dirtyLeaves=h,s._cloneNotNeeded=f,s._dirtyType=p,on=a,vs=l,an=c}return o}(typeof t=="string"?JSON.parse(t):t,this,r)}update(t,r){Ds(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),Ds(this,()=>{const s=Le(),i=Dr();s!==null?s.dirty=!0:i.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?i.selectStart():i.selectEnd())},{onUpdate:()=>{n.removeAttribute("autocapitalize"),t&&t()},tag:"focus"}),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=Uo(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,tm("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}const CY=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,iqe=CY?g.useLayoutEffect:g.useEffect,pv={tag:"history-merge"};function oqe({initialConfig:e,children:t}){const r=g.useMemo(()=>{const{theme:n,namespace:s,editor__DEPRECATED:i,nodes:o,onError:a,editorState:l,html:c}=e,u=VUe(null,n);let h=i||null;if(h===null){const f=nqe({editable:e.editable,html:c,namespace:s,nodes:o,onError:p=>a(p,f),theme:n});(function(p,v){if(v!==null){if(v===void 0)p.update(()=>{const m=Dr();if(m.isEmpty()){const b=Do();m.append(b);const x=CY?document.activeElement:null;(Le()!==null||x!==null&&x===p.getRootElement())&&b.select()}},pv);else if(v!==null)switch(typeof v){case"string":{const m=p.parseEditorState(v);p.setEditorState(m,pv);break}case"object":p.setEditorState(v,pv);break;case"function":p.update(()=>{Dr().isEmpty()&&v(p)},pv)}}})(f,l),h=f}return[h,u]},[]);return iqe(()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)},[]),d.jsx(AG.Provider,{value:r,children:t})}const aqe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?g.useLayoutEffect:g.useEffect;function lqe(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function cqe(){return function(e){const[t]=Ef(),r=g.useMemo(()=>e(t),[t,e]),n=g.useRef(r.initialValueFn()),[s,i]=g.useState(n.current);return aqe(()=>{const{initialValueFn:o,subscribe:a}=r,l=o();return n.current!==l&&(n.current=l,i(l)),a(c=>{n.current=c,i(c)})},[r,e]),s}(lqe)}function uqe(){return Dr().getTextContent()}function dqe(e,t=!0){if(e)return!1;let r=uqe();return t&&(r=r.trim()),r===""}function hqe(e){if(!dqe(e,!1))return!1;const t=Dr().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(qt(s))return!1;if(ce(s)){if(!Hh(s)||s.__indent!==0)return!1;const i=s.getChildren(),o=i.length;for(let a=0;a<o;a++){const l=i[n];if(!xe(l))return!1}}}return!0}function fqe(e){return()=>hqe(e)}function pqe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}pqe(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function mqe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}mqe(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const gqe=new Map;function yqe(e){const t={},r=e.split(";");for(const n of r)if(n!==""){const[s,i]=n.split(/:([^]+)/);s&&i&&(t[s.trim()]=i.trim())}return t}function TY(e){const t=e.constructor.clone(e);return t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,ce(e)&&ce(t)?(n=e,(r=t).__first=n.__first,r.__last=n.__last,r.__size=n.__size,r.__format=n.__format,r.__indent=n.__indent,r.__dir=n.__dir,r):xe(e)&&xe(t)?function(s,i){return s.__format=i.__format,s.__style=i.__style,s.__mode=i.__mode,s.__detail=i.__detail,s}(t,e):Hh(e)&&Hh(t)?function(s,i){return s.__textFormat=i.__textFormat,s}(t,e):t;var r,n}function AY(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&r!==null){const[n,s]=r,i=e.isBackward(),o=n.getNode(),a=s.getNode(),l=t.is(o),c=t.is(a);if(l||c){const[u,h]=nE(e),f=o.is(a),p=t.is(i?a:o),v=t.is(i?o:a);let m,b=0;return f?(b=u>h?h:u,m=u>h?u:h):p?(b=i?h:u,m=void 0):v&&(b=0,m=i?u:h),t.__text=t.__text.slice(b,m),t}}return t}function vqe(e){const t=e.getStyle(),r=yqe(t);gqe.set(t,r)}function z6(e,t){const r=Km(e.focus,t);return qt(r)&&!r.isIsolated()||ce(r)&&!r.isInline()&&!r.canBeEmpty()}function bqe(e,t,r,n){e.modify(t?"extend":"move",r,n)}function xqe(e){const t=e.anchor.getNode();return(Rn(t)?t:t.getParentOrThrow()).getDirection()==="rtl"}function U6(e,t,r){const n=xqe(e);bqe(e,t,r?!n:n,"character")}function wqe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _qe=wqe(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const OY=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,jqe=OY&&"documentMode"in document?document.documentMode:null;!(!OY||!("InputEvent"in window)||jqe)&&"getTargetRanges"in new window.InputEvent("input");function Vw(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function kqe(e){const t=CP(e,r=>ce(r)&&!r.isInline());return ce(t)||_qe(4,e.__key),t}const CP=(e,t)=>{let r=e;for(;r!==Dr()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function Vc(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function Nqe(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const i=n.data;if(typeof i=="string"){let o;try{o=JSON.parse(i)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const a=o.payload;if(a&&a.functionId==="makeChanges"){const l=a.args;if(l){const[c,u,h,f,p,v]=l;e.update(()=>{const m=Le();if(be(m)){const b=m.anchor;let x=b.getNode(),w=0,_=0;if(xe(x)&&c>=0&&u>=0&&(w=c,_=c+u,m.setTextNodeRange(x,w,x,_)),w===_&&h===""||(m.insertRawText(h),x=b.getNode()),xe(x)){w=f,_=f+p;const j=x.getTextContentSize();w=w>j?j:w,_=_>j?j:_,m.setTextNodeRange(x,w,x,_)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function Sqe(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let i=0;i<r.length;i++){const o=r[i];if(!RY.has(o.nodeName)){const a=IY(o,e,s,!1);a!==null&&(n=n.concat(a))}}return function(i){for(const o of i)o.getNextSibling()instanceof EP&&o.insertAfter(Kh());for(const o of i){const a=o.getChildren();for(const l of a)o.insertBefore(l);o.remove()}}(s),n}function Eqe(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=Dr().getChildren();for(let s=0;s<n.length;s++)PY(e,n[s],r,t);return r.innerHTML}function PY(e,t,r,n=null){let s=n===null||t.isSelected(n);const i=ce(t)&&t.excludeFromCopy("html");let o=t;if(n!==null){let p=TY(t);p=xe(p)&&n!==null?AY(n,p):p,o=p}const a=ce(o)?o.getChildren():[],l=e._nodes.get(o.getType());let c;c=l&&l.exportDOM!==void 0?l.exportDOM(e,o):o.exportDOM(e);const{element:u,after:h}=c;if(!u)return!1;const f=document.createDocumentFragment();for(let p=0;p<a.length;p++){const v=a[p],m=PY(e,v,f,n);!s&&ce(t)&&m&&t.extractWithChild(v,n,"html")&&(s=!0)}if(s&&!i){if(_P(u)&&u.append(f),r.append(u),h){const p=h.call(o,u);p&&u.replaceWith(p)}}else r.append(f);return s}const RY=new Set(["STYLE","SCRIPT"]);function IY(e,t,r,n,s=new Map,i){let o=[];if(RY.has(e.nodeName))return o;let a=null;const l=function(v,m){const{nodeName:b}=v,x=m._htmlConversions.get(b.toLowerCase());let w=null;if(x!==void 0)for(const _ of x){const j=_(v);j!==null&&(w===null||(w.priority||0)<(j.priority||0))&&(w=j)}return w!==null?w.conversion:null}(e,t),c=l?l(e):null;let u=null;if(c!==null){u=c.after;const v=c.node;if(a=Array.isArray(v)?v[v.length-1]:v,a!==null){for(const[,m]of s)if(a=m(a,i),!a)break;a&&o.push(...Array.isArray(v)?v:[a])}c.forChild!=null&&s.set(e.nodeName,c.forChild)}const h=e.childNodes;let f=[];const p=(a==null||!Cf(a))&&(a!=null&&sE(a)||n);for(let v=0;v<h.length;v++)f.push(...IY(h[v],t,r,p,new Map(s),a));return u!=null&&(f=u(f)),DBe(e)&&(f=Cqe(e,f,p?()=>{const v=new EP;return r.push(v),v}:Do)),a==null?o=o.concat(f):ce(a)&&a.append(...f),o}function Cqe(e,t,r){const n=e.style.textAlign,s=[];let i=[];for(let o=0;o<t.length;o++){const a=t[o];if(sE(a))n&&!a.getFormat()&&a.setFormat(n),s.push(a);else if(i.push(a),o===t.length-1||o<t.length-1&&sE(t[o+1])){const l=r();l.setFormat(n),l.append(...i),s.push(l),i=[]}}return s}function Tqe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var E0=Tqe(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const Aqe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,DY=e=>Aqe?(e||window).getSelection():null;function Oqe(e){const t=Le();return t==null&&E0(166),be(t)&&t.isCollapsed()||t.getNodes().length===0?"":Eqe(e,t)}function Pqe(e){const t=Le();return t==null&&E0(166),be(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(Rqe(e,t))}function B6(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return q6(r,Iqe(o.nodes),t)}catch{}const s=e.getData("text/html");if(s)try{const o=new DOMParser().parseFromString(s,"text/html");return q6(r,Sqe(r,o),t)}catch{}const i=e.getData("text/plain")||e.getData("text/uri-list");if(i!=null)if(be(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let a=0;a<o.length;a++){const l=Le();if(be(l)){const c=o[a];c===`
`||c===`\r
`?l.insertParagraph():c==="	"?l.insertNodes([Vg()]):l.insertText(c)}}}else t.insertRawText(i)}function q6(e,t,r){e.dispatchCommand(KUe,{nodes:t,selection:r})||r.insertNodes(t)}function LY(e,t,r,n=[]){let s=t===null||r.isSelected(t);const i=ce(r)&&r.excludeFromCopy("html");let o=r;if(t!==null){let c=TY(r);c=xe(c)&&t!==null?AY(t,c):c,o=c}const a=ce(o)?o.getChildren():[],l=function(c){const u=c.exportJSON(),h=c.constructor;if(u.type!==h.getType()&&E0(58,h.name),ce(c)){const f=u.children;Array.isArray(f)||E0(59,h.name)}return u}(o);if(xe(o)){const c=o.__text;c.length>0?l.text=c:s=!1}for(let c=0;c<a.length;c++){const u=a[c],h=LY(e,t,u,l.children);!s&&ce(r)&&h&&r.extractWithChild(u,t,"clone")&&(s=!0)}if(s&&!i)n.push(l);else if(Array.isArray(l.children))for(let c=0;c<l.children.length;c++){const u=l.children[c];n.push(u)}return s}function Rqe(e,t){const r=[],n=Dr().getChildren();for(let s=0;s<n.length;s++)LY(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function Iqe(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=QBe(n);xe(s)&&vqe(s),t.push(s)}return t}let fd=null;async function V6(e,t){if(fd!==null)return!1;if(t!==null)return new Promise((a,l)=>{e.update(()=>{a(W6(e,t))})});const r=e.getRootElement(),n=e._window==null?window.document:e._window.document,s=DY(e._window);if(r===null||s===null)return!1;const i=n.createElement("span");i.style.cssText="position: fixed; top: -1000px;",i.append(n.createTextNode("#")),r.append(i);const o=new Range;return o.setStart(i,0),o.setEnd(i,1),s.removeAllRanges(),s.addRange(o),new Promise((a,l)=>{const c=e.registerCommand(Ow,u=>(Vc(u,ClipboardEvent)&&(c(),fd!==null&&(window.clearTimeout(fd),fd=null),a(W6(e,u))),!0),rqe);fd=window.setTimeout(()=>{c(),fd=null,a(!1)},50),n.execCommand("copy"),i.remove()})}function W6(e,t){const r=DY(e._window);if(!r)return!1;const n=r.anchorNode,s=r.focusNode;if(n!==null&&s!==null&&!Ug(e,n,s))return!1;t.preventDefault();const i=t.clipboardData,o=Le();if(i===null||o===null)return!1;const a=Oqe(e),l=Pqe(e);let c="";return o!==null&&(c=o.getTextContent()),a!==null&&i.setData("text/html",a),l!==null&&i.setData("application/x-lexical-editor",l),i.setData("text/plain",c),!0}function K6(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const Of=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Dqe=Of&&"documentMode"in document?document.documentMode:null,Lqe=!(!Of||!("InputEvent"in window)||Dqe)&&"getTargetRanges"in new window.InputEvent("input"),Mqe=Of&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),$qe=Of&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Fqe=Of&&/^(?=.*Chrome).*/i.test(navigator.userAgent),zqe=Of&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Fqe,H6=WUe();function mv(e){let t=null;if(Vc(e,DragEvent)?t=e.dataTransfer:Vc(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function Z6(e){const t=Le();if(!be(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const i=n[s],o=i.getKey();if(r.has(o))continue;const a=CP(i,c=>ce(c)&&!c.isInline());if(a===null)continue;const l=a.getKey();a.canIndent()&&!r.has(l)&&(r.add(l),e(a))}return r.size>0}function gv(e){const t=Su(e);return qt(t)}function Uqe(e){return Vw(e.registerCommand(OG,t=>{const r=Le();return!!Ui(r)&&(r.clear(),!0)},0),e.registerCommand(ou,t=>{const r=Le();return!!be(r)&&(r.deleteCharacter(t),!0)},pt),e.registerCommand(Vm,t=>{const r=Le();return!!be(r)&&(r.deleteWord(t),!0)},pt),e.registerCommand(Wm,t=>{const r=Le();return!!be(r)&&(r.deleteLine(t),!0)},pt),e.registerCommand(nh,t=>{const r=Le();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)B6(n,r,e);else if(be(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0},pt),e.registerCommand(U2,()=>{const t=Le();return!!be(t)&&(t.removeText(),!0)},pt),e.registerCommand(Pl,t=>{const r=Le();return!!be(r)&&(r.formatText(t),!0)},pt),e.registerCommand(eBe,t=>{const r=Le();if(!be(r)&&!Ui(r))return!1;const n=r.getNodes();for(const s of n){const i=CP(s,o=>ce(o)&&!o.isInline());i!==null&&i.setFormat(t)}return!0},pt),e.registerCommand(rh,t=>{const r=Le();return!!be(r)&&(r.insertLineBreak(t),!0)},pt),e.registerCommand(h0,()=>{const t=Le();return!!be(t)&&(t.insertParagraph(),!0)},pt),e.registerCommand(XUe,()=>(YBe([Vg()]),!0),pt),e.registerCommand(QUe,()=>Z6(t=>{const r=t.getIndent();t.setIndent(r+1)}),pt),e.registerCommand(s6,()=>Z6(t=>{const r=t.getIndent();r>0&&t.setIndent(r-1)}),pt),e.registerCommand(IG,t=>{const r=Le();if(Ui(r)&&!gv(t.target)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(be(r)){const n=Km(r.focus,!0);if(!t.shiftKey&&qt(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1},pt),e.registerCommand(DG,t=>{const r=Le();if(Ui(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(be(r)){if(function(s){const i=s.focus;return i.key==="root"&&i.offset===Dr().getChildrenSize()}(r))return t.preventDefault(),!0;const n=Km(r.focus,!1);if(!t.shiftKey&&qt(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1},pt),e.registerCommand(RG,t=>{const r=Le();if(Ui(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectPrevious(),!0}if(!be(r))return!1;if(z6(r,!0)){const n=t.shiftKey;return t.preventDefault(),U6(r,n,!0),!0}return!1},pt),e.registerCommand(PG,t=>{const r=Le();if(Ui(r)&&!gv(t.target)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),s[0].selectNext(0,0),!0}if(!be(r))return!1;const n=t.shiftKey;return!!z6(r,!1)&&(t.preventDefault(),U6(r,n,!1),!0)},pt),e.registerCommand(LG,t=>{if(gv(t.target))return!1;const r=Le();if(!be(r))return!1;t.preventDefault();const{anchor:n}=r,s=n.getNode();return r.isCollapsed()&&n.offset===0&&!Rn(s)&&kqe(s).getIndent()>0?e.dispatchCommand(s6,void 0):e.dispatchCommand(ou,!0)},pt),e.registerCommand($G,t=>{if(gv(t.target))return!1;const r=Le();return!!be(r)&&(t.preventDefault(),e.dispatchCommand(ou,!1))},pt),e.registerCommand(f0,t=>{const r=Le();if(!be(r))return!1;if(t!==null){if(($qe||Mqe||zqe)&&Lqe)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(rh,!1)}return e.dispatchCommand(h0,void 0)},pt),e.registerCommand(MG,()=>{const t=Le();return!!be(t)&&(e.blur(),!0)},pt),e.registerCommand(FG,t=>{const[,r]=mv(t);if(r.length>0){const s=K6(t.clientX,t.clientY);if(s!==null){const{offset:i,node:o}=s,a=Su(o);if(a!==null){const l=ZBe();if(xe(a))l.anchor.set(a.getKey(),i,"text"),l.focus.set(a.getKey(),i,"text");else{const u=a.getParentOrThrow().getKey(),h=a.getIndexWithinParent()+1;l.anchor.set(u,h,"element"),l.focus.set(u,h,"element")}const c=GG(l);zo(c)}e.dispatchCommand(H6,r)}return t.preventDefault(),!0}const n=Le();return!!be(n)},pt),e.registerCommand(zG,t=>{const[r]=mv(t),n=Le();return!(r&&!be(n))},pt),e.registerCommand(UG,t=>{const[r]=mv(t),n=Le();if(r&&!be(n))return!1;const s=K6(t.clientX,t.clientY);if(s!==null){const i=Su(s.node);qt(i)&&t.preventDefault()}return!0},pt),e.registerCommand(B2,()=>(OBe(),!0),pt),e.registerCommand(Ow,t=>(V6(e,Vc(t,ClipboardEvent)?t:null),!0),pt),e.registerCommand(iP,t=>(async function(r,n){await V6(n,Vc(r,ClipboardEvent)?r:null),n.update(()=>{const s=Le();be(s)?s.removeText():Ui(s)&&s.getNodes().forEach(i=>i.remove())})}(t,e),!0),pt),e.registerCommand(rP,t=>{const[,r,n]=mv(t);return r.length>0&&!n?(e.dispatchCommand(H6,r),!0):gP(t.target)?!1:Le()!==null&&(function(s,i){s.preventDefault(),i.update(()=>{const o=Le(),a=Vc(s,InputEvent)||Vc(s,KeyboardEvent)?null:s.clipboardData;a!=null&&o!==null&&B6(a,o,i)},{tag:"paste"})}(t,e),!0)},pt))}const iE=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?g.useLayoutEffect:g.useEffect;function G6(e){return e.getEditorState().read(fqe(e.isComposing()))}function Bqe({contentEditable:e,placeholder:t,ErrorBoundary:r}){const[n]=Ef(),s=function(i,o){const[a,l]=g.useState(()=>i.getDecorators());return iE(()=>i.registerDecoratorListener(c=>{Zn.flushSync(()=>{l(c)})}),[i]),g.useEffect(()=>{l(i.getDecorators())},[i]),g.useMemo(()=>{const c=[],u=Object.keys(a);for(let h=0;h<u.length;h++){const f=u[h],p=d.jsx(o,{onError:m=>i._onError(m),children:d.jsx(g.Suspense,{fallback:null,children:a[f]})}),v=i.getElementByKey(f);v!==null&&c.push(Zn.createPortal(p,v,f))}return c},[o,a,i])}(n,r);return function(i){iE(()=>Vw(Uqe(i),Nqe(i)),[i])}(n),d.jsxs(d.Fragment,{children:[e,d.jsx(qqe,{content:t}),s]})}function qqe({content:e}){const[t]=Ef(),r=function(s){const[i,o]=g.useState(()=>G6(s));return iE(()=>{function a(){const l=G6(s);o(l)}return a(),Vw(s.registerUpdateListener(()=>{a()}),s.registerEditableListener(()=>{a()}))},[s]),i}(t),n=cqe();return r?typeof e=="function"?e(n):e:null}const Vqe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?g.useLayoutEffect:g.useEffect;function Wqe({ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:r,ariaDescribedBy:n,ariaExpanded:s,ariaLabel:i,ariaLabelledBy:o,ariaMultiline:a,ariaOwns:l,ariaRequired:c,autoCapitalize:u,className:h,id:f,role:p="textbox",spellCheck:v=!0,style:m,tabIndex:b,"data-testid":x,...w}){const[_]=Ef(),[j,k]=g.useState(!1),N=g.useCallback(S=>{S&&S.ownerDocument&&S.ownerDocument.defaultView&&_.setRootElement(S)},[_]);return Vqe(()=>(k(_.isEditable()),_.registerEditableListener(S=>{k(S)})),[_]),d.jsx("div",{...w,"aria-activedescendant":j?e:void 0,"aria-autocomplete":j?t:"none","aria-controls":j?r:void 0,"aria-describedby":n,"aria-expanded":j&&p==="combobox"?!!s:void 0,"aria-label":i,"aria-labelledby":o,"aria-multiline":a,"aria-owns":j?l:void 0,"aria-readonly":!j||void 0,"aria-required":c,autoCapitalize:u,className:h,contentEditable:j,"data-testid":x,id:f,ref:N,role:p,spellCheck:v,style:m,tabIndex:b})}const Ik=0,oE=1,aE=2,Di=0,Kqe=1,Y6=2,Hqe=3,Zqe=4;function Gqe(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return Di;const i=t._selection,o=e._selection;if(s)return Kqe;if(!(be(i)&&be(o)&&o.isCollapsed()&&i.isCollapsed()))return Di;const a=function(x,w,_){const j=x._nodeMap,k=[];for(const N of w){const S=j.get(N);S!==void 0&&k.push(S)}for(const[N,S]of _){if(!S)continue;const E=j.get(N);E===void 0||Rn(E)||k.push(E)}return k}(t,r,n);if(a.length===0)return Di;if(a.length>1){const x=t._nodeMap,w=x.get(i.anchor.key),_=x.get(o.anchor.key);return w&&_&&!e._nodeMap.has(w.__key)&&xe(w)&&w.__text.length===1&&i.anchor.offset===1?Y6:Di}const l=a[0],c=e._nodeMap.get(l.__key);if(!xe(c)||!xe(l)||c.__mode!==l.__mode)return Di;const u=c.__text,h=l.__text;if(u===h)return Di;const f=i.anchor,p=o.anchor;if(f.key!==p.key||f.type!=="text")return Di;const v=f.offset,m=p.offset,b=h.length-u.length;return b===1&&m===v-1?Y6:b===-1&&m===v+1?Hqe:b===-1&&m===v?Zqe:Di}function Yqe(e,t){let r=Date.now(),n=Di;return(s,i,o,a,l,c)=>{const u=Date.now();if(c.has("historic"))return n=Di,r=u,aE;const h=Gqe(s,i,a,l,e.isComposing()),f=(()=>{const p=o===null||o.editor===e,v=c.has("history-push");if(!v&&p&&c.has("history-merge"))return Ik;if(s===null)return oE;const m=i._selection;return a.size>0||l.size>0?v===!1&&h!==Di&&h===n&&u<r+t&&p||a.size===1&&function(b,x,w){const _=x._nodeMap.get(b),j=w._nodeMap.get(b),k=x._selection,N=w._selection;let S=!1;return be(k)&&be(N)&&(S=k.anchor.type==="element"&&k.focus.type==="element"&&N.anchor.type==="text"&&N.focus.type==="text"),!(S||!xe(_)||!xe(j))&&_.__type===j.__type&&_.__text===j.__text&&_.__mode===j.__mode&&_.__detail===j.__detail&&_.__style===j.__style&&_.__format===j.__format&&_.__parent===j.__parent}(Array.from(a)[0],s,i)?Ik:oE:m!==null?Ik:aE})();return r=u,n=h,f}}function J6(e){e.undoStack=[],e.redoStack=[],e.current=null}function Jqe(e,t,r){const n=Yqe(e,r);return Vw(e.registerCommand(nP,()=>(function(s,i){const o=i.redoStack,a=i.undoStack;if(a.length!==0){const l=i.current,c=a.pop();l!==null&&(o.push(l),s.dispatchCommand(dv,!0)),a.length===0&&s.dispatchCommand(hv,!1),i.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:"historic"})}}(e,t),!0),pt),e.registerCommand(sP,()=>(function(s,i){const o=i.redoStack,a=i.undoStack;if(o.length!==0){const l=i.current;l!==null&&(a.push(l),s.dispatchCommand(hv,!0));const c=o.pop();o.length===0&&s.dispatchCommand(dv,!1),i.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:"historic"})}}(e,t),!0),pt),e.registerCommand(rBe,()=>(J6(t),!1),pt),e.registerCommand(nBe,()=>(J6(t),e.dispatchCommand(dv,!1),e.dispatchCommand(hv,!1),!0),pt),e.registerUpdateListener(({editorState:s,prevEditorState:i,dirtyLeaves:o,dirtyElements:a,tags:l})=>{const c=t.current,u=t.redoStack,h=t.undoStack,f=c===null?null:c.editorState;if(c!==null&&s===f)return;const p=n(i,s,c,o,a,l);if(p===oE)u.length!==0&&(t.redoStack=[],e.dispatchCommand(dv,!1)),c!==null&&(h.push({...c}),e.dispatchCommand(hv,!0));else if(p===aE)return;t.current={editor:e,editorState:s}}))}function Xqe(){return{current:null,redoStack:[],undoStack:[]}}function Qqe({externalHistoryState:e}){const[t]=Ef();return function(r,n,s=1e3){const i=g.useMemo(()=>n||Xqe(),[n]);g.useEffect(()=>Jqe(r,i,s),[s,r,i])}(t,e),null}function e7e({defaultSelection:e}){const[t]=Ef();return g.useEffect(()=>{t.focus(()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})},{defaultSelection:e})},[e,t]),null}function lE(e,t){return lE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},lE(e,t)}var X6={error:null},t7e=function(e){var t,r;function n(){for(var i,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(i=e.call.apply(e,[this].concat(a))||this).state=X6,i.resetErrorBoundary=function(){for(var c,u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];i.props.onReset==null||(c=i.props).onReset.apply(c,h),i.reset()},i}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,lE(t,r),n.getDerivedStateFromError=function(i){return{error:i}};var s=n.prototype;return s.reset=function(){this.setState(X6)},s.componentDidCatch=function(i,o){var a,l;(a=(l=this.props).onError)==null||a.call(l,i,o)},s.componentDidUpdate=function(i,o){var a,l,c,u,h=this.state.error,f=this.props.resetKeys;h!==null&&o.error!==null&&((c=i.resetKeys)===void 0&&(c=[]),(u=f)===void 0&&(u=[]),c.length!==u.length||c.some(function(p,v){return!Object.is(p,u[v])}))&&((a=(l=this.props).onResetKeysChange)==null||a.call(l,i.resetKeys,f),this.reset())},s.render=function(){var i=this.state.error,o=this.props,a=o.fallbackRender,l=o.FallbackComponent,c=o.fallback;if(i!==null){var u={error:i,resetErrorBoundary:this.resetErrorBoundary};if(g.isValidElement(c))return c;if(typeof a=="function")return a(u);if(l)return g.createElement(l,u);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n}(g.Component);function r7e({children:e,onError:t}){return d.jsx(t7e,{fallback:d.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}function n7e({item:e,contentType:t,onSave:r,onCancel:n}){const[s,i]=g.useState(l()),[o,a]=g.useState({});function l(){if(e){const{id:m,created_at:b,updated_at:x,created_by:w,..._}=e;return _}return(()=>{switch(t){case"posts":case"pages":return{status:"draft",title:"",content:"",slug:"",author_id:void 0,excerpt:void 0,featured_image:void 0,tags:[],category_id:void 0};case"storeItems":return{status:"active",name:"",description:"",price:0,category:"digital",image_url:void 0,stock_quantity:0,sku:void 0};case"libraryItems":return{status:"draft",title:"",description:"",file_url:"",file_type:void 0,file_size:0,category:"tutorial",thumbnail_url:void 0};case"characters":return{status:"draft",name:"",description:"",role:"",backstory:"",image_url:"",birth_date:void 0,death_date:void 0,species:void 0,occupation:void 0,relationships:void 0};case"timelineEvents":return{status:"draft",title:"",date:"",era:"ancient",description:"",is_published:!1,details:null,background_image:null,nested_events:[]};case"betaUsers":return{status:"pending",name:"",email:"",message:""};default:throw new Error(`Unsupported content type: ${t}`)}})()}const c=g.useCallback(()=>{const m=e?{...e,...s}:s;r(m)},[s,e,r]),u={namespace:"MyEditor",theme:{},onError(m){console.error(m)}},h=g.useCallback(m=>b=>{const x=b.target.value;i(w=>({...w,[m]:x}))},[]),f=g.useCallback(m=>b=>{const x=parseFloat(b.target.value);i(w=>({...w,[m]:x}))},[]),p=g.useCallback(m=>b=>{const x=b.target.value;i(w=>({...w,[m]:x}))},[]),v=()=>{switch(t){case"posts":case"pages":const m=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:m.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter title...",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug"}),d.jsx("input",{type:"text",value:m.slug,onChange:k=>i(N=>({...N,slug:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"my-awesome-post"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"URL-friendly version of the title. e.g., 'my-awesome-post'"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),d.jsx("div",{className:"editor-container",children:d.jsxs(oqe,{initialConfig:u,children:[d.jsx(Bqe,{contentEditable:d.jsx(Wqe,{className:"editor-input"}),placeholder:d.jsx("div",{className:"editor-placeholder",children:"Enter your content..."}),ErrorBoundary:r7e}),d.jsx(Qqe,{}),d.jsx(e7e,{})]})})]})]});case"storeItems":const b=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name"}),d.jsx("input",{type:"text",value:b.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price"}),d.jsx("input",{type:"number",step:"0.01",value:b.price,onChange:f("price"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),d.jsxs("select",{value:b.category,onChange:p("category"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"digital",children:"Digital"}),d.jsx("option",{value:"physical",children:"Physical"}),d.jsx("option",{value:"subscription",children:"Subscription"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:b.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product description..."})]})]});case"libraryItems":const x=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:x.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resource title..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),d.jsxs("select",{value:x.category,onChange:p("category"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"tutorial",children:"Tutorial"}),d.jsx("option",{value:"resources",children:"Resources"}),d.jsx("option",{value:"template",children:"Template"}),d.jsx("option",{value:"guide",children:"Guide"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File URL"}),d.jsx("input",{type:"url",value:x.file_url,onChange:h("file_url"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:x.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resource description..."})]})]});case"characters":const w=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Character Name"}),d.jsx("input",{type:"text",value:w.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),d.jsxs("select",{value:w.role,onChange:p("role"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"protagonist",children:"Protagonist"}),d.jsx("option",{value:"antagonist",children:"Antagonist"}),d.jsx("option",{value:"mentor",children:"Mentor"}),d.jsx("option",{value:"ally",children:"Ally"}),d.jsx("option",{value:"neutral",children:"Neutral"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:w.description,onChange:h("description"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character description..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backstory"}),d.jsx("textarea",{value:w.backstory,onChange:h("backstory"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character backstory..."})]})]});case"timelineEvents":const _=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title"}),d.jsx("input",{type:"text",value:_.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event title..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),d.jsx("input",{type:"date",value:_.date,onChange:h("date"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Era"}),d.jsxs("select",{value:_.era,onChange:p("era"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"ancient",children:"Ancient"}),d.jsx("option",{value:"medieval",children:"Medieval"}),d.jsx("option",{value:"modern",children:"Modern"}),d.jsx("option",{value:"future",children:"Future"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:_.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event description..."})]})]});case"betaUsers":const j=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),d.jsx("input",{type:"text",value:j.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"User name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),d.jsx("input",{type:"email",value:j.email,onChange:h("email"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"user@example.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),d.jsx("textarea",{value:j.message,onChange:h("message"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"User message/notes..."})]})]});default:return null}};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?`Edit ${t}`:`Create New ${t}`}),d.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700",children:d.jsx(Ji,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[v(),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:s.status,onChange:m=>i({...s,status:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t==="posts"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"archived",children:"Archived"})]}),t==="pages"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="storeItems"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]}),t==="libraryItems"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="characters"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="timelineEvents"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="betaUsers"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsxs("button",{type:"button",onClick:c,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(fC,{className:"w-4 h-4"}),"Save"]}),d.jsx("button",{type:"button",onClick:n,className:"flex items-center gap-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}const s7e=({contentType:e,items:t,title:r,columns:n,createActionLabel:s,onEdit:i,onDelete:o,onCreateNew:a})=>{const[l,c]=g.useState(""),[u,h]=g.useState("all"),f=t.filter(p=>{const v=Object.values(p).some(b=>b&&b.toString().toLowerCase().includes(l.toLowerCase())),m=u==="all"||p.status===u;return v&&m});return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r}),d.jsxs("button",{onClick:a,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Yi,{className:"w-4 h-4"}),s]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(Ru,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),placeholder:`Search ${r.toLowerCase()}...`,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsxs("select",{value:u,onChange:p=>h(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"}),d.jsx("option",{value:"pending",children:"Pending"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[n.map(p=>d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:p.label},p.key)),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:f.map(p=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[n.map(v=>d.jsx("td",{className:"py-4 px-6",children:v.render?v.render(p):d.jsx("div",{className:v.key===n[0].key?"font-medium text-gray-900":"text-sm text-gray-500",children:p[v.key]})},v.key)),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>i(p),className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ox,{className:"w-4 h-4"})}),d.jsx("button",{className:"p-1 text-gray-500 hover:text-green-600",children:d.jsx(fu,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>o(p.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(Ql,{className:"w-4 h-4"})})]})})]},p.id))})]})})]})},i7e=async()=>{const{data:e,error:t}=await fe.from("pages").select("*");if(t)throw new Error(t.message);return e},o7e=async e=>{const{data:t,error:r}=await fe.from("pages").insert(e).select();if(r)throw new Error(r.message);return t[0]},a7e=async e=>{const{data:t,error:r}=await fe.from("pages").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},l7e=async e=>{const{error:t}=await fe.from("pages").delete().eq("id",e);if(t)throw new Error(t.message)},c7e=()=>{const e=so(),[t,r]=g.useState(!1),[n,s]=g.useState(null),{data:i,isLoading:o,isError:a,error:l}=Rt({queryKey:["pages"],queryFn:i7e}),c=kt({mutationFn:o7e,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]}),r(!1),s(null)}}),u=kt({mutationFn:a7e,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]}),r(!1),s(null)}}),h=kt({mutationFn:l7e,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]})}}),f=m=>{n?u.mutate(m):c.mutate(m)},p=m=>{window.confirm("Are you sure you want to delete this page?")&&h.mutate(m)},v=[{key:"title",label:"Page Title"},{key:"slug",label:"URL Slug"},{key:"status",label:"Status",render:m=>d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m.status==="published"?"bg-green-100 text-green-800":m.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:m.status})},{key:"created_at",label:"Created At",render:m=>new Date(m.created_at??"").toLocaleDateString()},{key:"updated_at",label:"Last Updated",render:m=>new Date(m.updated_at??"").toLocaleDateString()}];return o?d.jsx("div",{children:"Loading pages..."}):a?d.jsxs("div",{children:["Error loading pages: ",l==null?void 0:l.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(n7e,{item:n||void 0,contentType:"pages",onSave:f,onCancel:()=>{r(!1),s(null)}}):d.jsx(s7e,{contentType:"pages",items:i||[],title:"Website Pages",columns:v,createActionLabel:"New Page",onEdit:m=>{s(m||null),r(!0)},onDelete:p,onCreateNew:()=>{s(null),r(!0)}})})},u7e=async()=>{const{data:e,error:t}=await fe.from("characters").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},d7e=async e=>{const{data:t,error:r}=await fe.from("characters").insert(e).select();if(r)throw new Error(r.message);return t[0]},h7e=async e=>{const{id:t,...r}=e,{data:n,error:s}=await fe.from("characters").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},f7e=async e=>{const{error:t}=await fe.from("characters").delete().eq("id",e);if(t)throw new Error(t.message)},p7e=({character:e,onSave:t,onCancel:r})=>{var n;const[s,i]=g.useState({name:(e==null?void 0:e.name)||"",title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",traits:((n=e==null?void 0:e.traits)==null?void 0:n.join(", "))||"",image_url:(e==null?void 0:e.image_url)||"",silhouette_url:(e==null?void 0:e.silhouette_url)||""}),o=()=>{const a={...s,traits:s.traits.split(",").map(l=>l.trim()).filter(l=>l!=="")};t(e?{...e,...a}:a)};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e?"Edit Character":"Create New Character"}),d.jsxs("form",{onSubmit:a=>{a.preventDefault(),o()},children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),d.jsx("input",{type:"text",value:s.name,onChange:a=>i({...s,name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:s.title,onChange:a=>i({...s,title:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:s.description,onChange:a=>i({...s,description:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Traits (comma-separated)"}),d.jsx("input",{type:"text",value:s.traits,onChange:a=>i({...s,traits:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),d.jsx("input",{type:"url",value:s.image_url,onChange:a=>i({...s,image_url:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Silhouette URL (Optional)"}),d.jsx("input",{type:"url",value:s.silhouette_url,onChange:a=>i({...s,silhouette_url:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Save Character"}),d.jsx("button",{type:"button",onClick:r,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},m7e=()=>{const e=so(),[t,r]=g.useState(!1),[n,s]=g.useState(null),[i,o]=g.useState(""),{data:a,isLoading:l,isError:c,error:u}=Rt({queryKey:["characters"],queryFn:u7e}),h=kt({mutationFn:d7e,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]}),r(!1),s(null)}}),f=kt({mutationFn:h7e,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]}),r(!1),s(null)}}),p=kt({mutationFn:f7e,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]})}}),v=x=>{n?f.mutate(x):h.mutate(x)},m=x=>{window.confirm("Are you sure you want to delete this character?")&&p.mutate(x)},b=(a==null?void 0:a.filter(x=>x.name.toLowerCase().includes(i.toLowerCase())))||[];return l?d.jsx("div",{children:"Loading characters..."}):c?d.jsxs("div",{children:["Error loading characters: ",u==null?void 0:u.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(p7e,{character:n,onSave:v,onCancel:()=>{r(!1),s(null)}}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Characters"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Yi,{className:"w-4 h-4"}),"New Character"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:d.jsxs("div",{className:"relative",children:[d.jsx(Ru,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),placeholder:"Search characters...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Name"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Traits"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:b.map(x=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:x.name})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:x.title}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:x.traits.join(", ")}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(x),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ox,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>m(x.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(Ql,{className:"w-4 h-4"})})]})})]},x.id))})]})})]})})},g7e=async()=>{const{data:e,error:t}=await fe.from("works").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},y7e=async e=>{const{data:t,error:r}=await fe.from("works").insert(e).select();if(r)throw new Error(r.message);return t[0]},v7e=async e=>{const{id:t,...r}=e,{data:n,error:s}=await fe.from("works").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},b7e=async e=>{const{error:t}=await fe.from("works").delete().eq("id",e);if(t)throw new Error(t.message)},x7e=({work:e,onSave:t,onCancel:r,allWorks:n})=>{var s,i,o;const[a,l]=g.useState({title:(e==null?void 0:e.title)||"",type:(e==null?void 0:e.type)||"book",parent_id:(e==null?void 0:e.parent_id)||"",order_in_parent:(e==null?void 0:e.order_in_parent)||"",description:(e==null?void 0:e.description)||"",status:(e==null?void 0:e.status)||"planning",progress_percentage:((s=e==null?void 0:e.progress_percentage)==null?void 0:s.toString())||"",release_date:(e==null?void 0:e.release_date)||"",estimated_release:(e==null?void 0:e.estimated_release)||"",cover_image_url:(e==null?void 0:e.cover_image_url)||"",sample_content:(e==null?void 0:e.sample_content)||"",is_purchasable:(e==null?void 0:e.is_purchasable)??!0,is_featured:(e==null?void 0:e.is_featured)??!1,word_count:((i=e==null?void 0:e.word_count)==null?void 0:i.toString())||"",target_word_count:((o=e==null?void 0:e.target_word_count)==null?void 0:o.toString())||""}),c=()=>{t({...e,...a,parent_id:a.parent_id===""?void 0:a.parent_id,order_in_parent:a.order_in_parent?Number(a.order_in_parent):void 0,progress_percentage:a.progress_percentage?Number(a.progress_percentage):void 0,word_count:a.word_count?Number(a.word_count):void 0,target_word_count:a.target_word_count?Number(a.target_word_count):void 0,id:(e==null?void 0:e.id)||"",created_at:(e==null?void 0:e.created_at)||new Date().toISOString(),updated_at:new Date().toISOString()})},u=n.filter(h=>h.id!==(e==null?void 0:e.id));return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e?"Edit Work":"Create New Work"}),d.jsxs("form",{onSubmit:h=>{h.preventDefault(),c()},children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:a.title,onChange:h=>l({...a,title:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),d.jsxs("select",{value:a.type,onChange:h=>l({...a,type:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"issue",children:"Issue"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent Work (for nesting)"}),d.jsxs("select",{value:a.parent_id,onChange:h=>l({...a,parent_id:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"None"}),u.map(h=>d.jsxs("option",{value:h.id,children:[h.title," (",h.type,")"]},h.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order in Parent"}),d.jsx("input",{type:"number",value:a.order_in_parent,onChange:h=>l({...a,order_in_parent:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:a.description,onChange:h=>l({...a,description:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:a.status,onChange:h=>l({...a,status:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"planning",children:"Planning"}),d.jsx("option",{value:"writing",children:"Writing"}),d.jsx("option",{value:"editing",children:"Editing"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"on_hold",children:"On Hold"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress Percentage (0-100)"}),d.jsx("input",{type:"number",value:a.progress_percentage,onChange:h=>l({...a,progress_percentage:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"100"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Date"}),d.jsx("input",{type:"date",value:a.release_date,onChange:h=>l({...a,release_date:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Release (e.g., Q2 2024)"}),d.jsx("input",{type:"text",value:a.estimated_release,onChange:h=>l({...a,estimated_release:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Image URL"}),d.jsx("input",{type:"url",value:a.cover_image_url,onChange:h=>l({...a,cover_image_url:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sample Content"}),d.jsx("textarea",{value:a.sample_content,onChange:h=>l({...a,sample_content:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-48"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Word Count"}),d.jsx("input",{type:"number",value:a.word_count,onChange:h=>l({...a,word_count:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Word Count"}),d.jsx("input",{type:"number",value:a.target_word_count,onChange:h=>l({...a,target_word_count:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isPurchasable",checked:a.is_purchasable,onChange:h=>l({...a,is_purchasable:h.target.checked}),className:"mr-2"}),d.jsx("label",{htmlFor:"isPurchasable",className:"text-sm font-medium text-gray-700",children:"Is Purchasable"})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isFeatured",checked:a.is_featured,onChange:h=>l({...a,is_featured:h.target.checked}),className:"mr-2"}),d.jsx("label",{htmlFor:"isFeatured",className:"text-sm font-medium text-gray-700",children:"Is Featured"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Save Work"}),d.jsx("button",{type:"button",onClick:r,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},w7e=()=>{const e=so(),[t,r]=g.useState(!1),[n,s]=g.useState(null),[i,o]=g.useState(""),[a,l]=g.useState("all"),[c,u]=g.useState("all"),{data:h,isLoading:f,isError:p,error:v}=Rt({queryKey:["works"],queryFn:g7e}),m=kt({mutationFn:y7e,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]}),r(!1),s(null)},onError:k=>{alert(`Error creating work: ${k.message}`)}}),b=kt({mutationFn:v7e,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]}),r(!1),s(null)},onError:k=>{alert(`Error updating work: ${k.message}`)}}),x=kt({mutationFn:b7e,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]})}}),w=k=>{n?b.mutate(k):m.mutate(k)},_=k=>{window.confirm("Are you sure you want to delete this work?")&&x.mutate(k)},j=(h==null?void 0:h.filter(k=>{const N=k.title.toLowerCase().includes(i.toLowerCase()),S=a==="all"||k.type===a,E=c==="all"||k.status===c;return N&&S&&E}))||[];return f?d.jsx("div",{children:"Loading works..."}):p?d.jsxs("div",{children:["Error loading works: ",v==null?void 0:v.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(x7e,{work:n,onSave:w,onCancel:()=>{r(!1),s(null)},allWorks:h||[]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Works Management"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Yi,{className:"w-4 h-4"}),"New Work"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(Ru,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:k=>o(k.target.value),placeholder:"Search works...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("select",{value:a,onChange:k=>l(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"issue",children:"Issue"})]}),d.jsxs("select",{value:c,onChange:k=>u(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"planning",children:"Planning"}),d.jsx("option",{value:"writing",children:"Writing"}),d.jsx("option",{value:"editing",children:"Editing"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"on_hold",children:"On Hold"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Type"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Status"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Parent"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Release Date"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:j.map(k=>{var N;return d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:k.title})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:k.type}),d.jsx("td",{className:"py-4 px-6",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.status==="published"?"bg-green-100 text-green-800":k.status==="planning"?"bg-blue-100 text-blue-800":k.status==="writing"?"bg-yellow-100 text-yellow-800":k.status==="editing"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:k.status})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:((N=h==null?void 0:h.find(S=>S.id===k.parent_id))==null?void 0:N.title)||"N/A"}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:k.release_date||k.estimated_release||"N/A"}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(k),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ox,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>_(k.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(Ql,{className:"w-4 h-4"})})]})})]},k.id)})})]})})]})})},_7e=()=>{const[e,t]=g.useState(""),[r,n]=g.useState("chapter"),[s,i]=g.useState(""),[o,a]=g.useState(""),[l,c]=g.useState(""),[u,h]=g.useState(null),[f,p]=g.useState(null),[v,m]=g.useState(null),[b,x]=g.useState(""),[w,_]=g.useState(""),[j,k]=g.useState(!1),[N,S]=g.useState([]),[E,T]=g.useState(!0),[P,O]=g.useState(null),[R,I]=g.useState(!1),[M,z]=g.useState(null),[W,q]=g.useState(""),[Y,L]=g.useState(!1),[K,G]=g.useState(""),[re,H]=g.useState(""),ne=async()=>{T(!0),O(null);try{const{data:{session:U}}=await fe.auth.getSession();if(!U){O("User not authenticated."),T(!1);return}const Z=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${U.access_token}`}});if(!Z.ok){const B=await Z.json();throw new Error(B.error||"Failed to fetch users.")}const le=await Z.json();S(le.users)}catch(U){console.error("Error fetching users:",U instanceof Error?U.message:U),O("Failed to load users: "+(U instanceof Error?U.message:"Unknown error"))}finally{T(!1)}};g.useEffect(()=>{ne()},[]);const J=async U=>{U.preventDefault(),x(""),_(""),k(!0);const Z=new FormData;Z.append("title",e),Z.append("type",r),Z.append("description",s),Z.append("release_date",o),Z.append("cover_image_url",l),u&&Z.append("epub_file",u),f&&Z.append("pdf_file",f),v&&Z.append("mobi_file",v);try{const le="YOUR_ADMIN_USER_ID";if(le==="YOUR_ADMIN_USER_ID"){_("Please replace 'YOUR_ADMIN_USER_ID' with an actual admin user's ID in AdminUploadPage.jsx"),k(!1);return}const B=await fetch("http://localhost:3001/api/admin/works",{method:"POST",headers:{"x-user-id":le},body:Z}),we=await B.json();B.ok?(x("Work uploaded successfully!"),t(""),n("chapter"),i(""),a(""),c(""),h(null),p(null),m(null),document.getElementById("epubFileInput").value="",document.getElementById("pdfFileInput").value="",document.getElementById("mobiFileInput").value=""):_(we.message||"Failed to upload work.")}catch(le){console.error("Error uploading work:",le),_("An error occurred while uploading the work. Check console for details.")}finally{k(!1)}},Ie=U=>{z(U);const Z=U.subscriptions.find(le=>le.status==="active"||le.status==="trialing");Z?(q(Z.subscription_type),L(Z.status==="active"||Z.status==="trialing"),G(Z.start_date?Z.start_date.split("T")[0]:""),H(Z.current_period_end?Z.current_period_end.split("T")[0]:"")):(q(""),L(!1),G(new Date().toISOString().split("T")[0]),H("")),I(!0)},me=()=>{I(!1),z(null)},ge=async U=>{if(U.preventDefault(),!!M)try{const{data:{session:Z}}=await fe.auth.getSession();if(!Z){alert("You must be logged in to manage subscriptions.");return}const le=await fetch(`/api/admin/users/${M.id}/subscription`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Z.access_token}`},body:JSON.stringify({subscription_type:W,status:Y?"active":"canceled",start_date:K,current_period_end:re||null})});if(!le.ok){const B=await le.json();throw new Error(B.error||"Failed to update subscription.")}alert("Subscription updated successfully!"),me(),ne()}catch(Z){console.error("Error updating subscription:",Z instanceof Error?Z.message:Z),alert("Error updating subscription: "+(Z instanceof Error?Z.message:"Unknown error"))}};return d.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"auto",fontFamily:"Arial, sans-serif"},children:[d.jsx("h1",{style:{textAlign:"center",marginBottom:"30px"},children:"Admin Dashboard"}),d.jsxs("div",{style:{marginBottom:"50px",border:"1px solid #ccc",padding:"20px",borderRadius:"8px"},children:[d.jsx("h2",{children:"Upload New Work (Chapter/Issue)"}),b&&d.jsx("p",{style:{color:"green",fontWeight:"bold"},children:b}),w&&d.jsx("p",{style:{color:"red",fontWeight:"bold"},children:w}),d.jsxs("form",{onSubmit:J,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Title:"}),d.jsx("input",{type:"text",value:e,onChange:U=>t(U.target.value),required:!0,style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Type:"}),d.jsxs("select",{value:r,onChange:U=>n(U.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box"},children:[d.jsx("option",{value:"chapter",children:"Chapter"}),d.jsx("option",{value:"issue",children:"Issue"}),d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Description:"}),d.jsx("textarea",{value:s,onChange:U=>i(U.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box",minHeight:"80px"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Release Date:"}),d.jsx("input",{type:"date",value:o,onChange:U=>a(U.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Cover Image URL:"}),d.jsx("input",{type:"text",value:l,onChange:U=>c(U.target.value),placeholder:"e.g., https://example.com/cover.jpg",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"EPUB File:"}),d.jsx("input",{type:"file",id:"epubFileInput",onChange:U=>{var Z;return h(((Z=U.target.files)==null?void 0:Z[0])||null)},accept:".epub",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"PDF File:"}),d.jsx("input",{type:"file",id:"pdfFileInput",onChange:U=>{var Z;return p(((Z=U.target.files)==null?void 0:Z[0])||null)},accept:".pdf",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"MOBI File:"}),d.jsx("input",{type:"file",id:"mobiFileInput",onChange:U=>{var Z;return m(((Z=U.target.files)==null?void 0:Z[0])||null)},accept:".mobi",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsx("button",{type:"submit",disabled:j,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:j?"not-allowed":"pointer",fontSize:"16px"},children:j?"Uploading...":"Upload Work"})]})]}),d.jsxs("div",{style:{border:"1px solid #ccc",padding:"20px",borderRadius:"8px"},children:[d.jsx("h2",{children:"User Management"}),E&&d.jsx("p",{children:"Loading users..."}),P&&d.jsx("p",{style:{color:"red"},children:P}),!E&&!P&&d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{backgroundColor:"#f2f2f2"},children:[d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Email"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Display Name"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Role"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Subscription Status"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Actions"})]})}),d.jsx("tbody",{children:N.map(U=>{var Z,le;return d.jsxs("tr",{children:[d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:U.email}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:((Z=U.profile)==null?void 0:Z.display_name)||"N/A"}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:((le=U.profile)==null?void 0:le.role)||"user"}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:U.subscriptions.length>0&&U.subscriptions.some(B=>B.status==="active"||B.status==="trialing")?"Active":"Inactive"}),d.jsxs("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[d.jsx("button",{style:{marginRight:"5px",padding:"5px 10px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},onClick:()=>Ie(U),children:"Manage Subscription"}),d.jsx("button",{style:{padding:"5px 10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Manage Entitlements"})]})]},U.id)})})]})]}),R&&M&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center"},children:d.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",width:"500px",color:"black"},children:[d.jsxs("h3",{style:{marginBottom:"15px"},children:["Manage Subscription for ",M.email]}),d.jsxs("form",{onSubmit:ge,style:{display:"flex",flexDirection:"column",gap:"10px"},children:[d.jsxs("div",{children:[d.jsx("label",{children:"Subscription Type:"}),d.jsx("input",{type:"text",value:W,onChange:U=>q(U.target.value),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"Is Active:"}),d.jsx("input",{type:"checkbox",checked:Y,onChange:U=>L(U.target.checked),style:{marginLeft:"10px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"Start Date:"}),d.jsx("input",{type:"date",value:K,onChange:U=>G(U.target.value),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"End Date:"}),d.jsx("input",{type:"date",value:re,onChange:U=>H(U.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[d.jsx("button",{type:"button",onClick:me,style:{padding:"8px 15px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),d.jsx("button",{type:"submit",style:{padding:"8px 15px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save"})]})]})]})})]})},j7e=()=>{var e;const[t,r]=g.useState([]),[n,s]=g.useState(!0),[i,o]=g.useState(null),[a,l]=g.useState(!1),[c,u]=g.useState(!1),[h,f]=g.useState(!1),[p,v]=g.useState(!1),[m,b]=g.useState(null),[x,w]=g.useState(null),[_,j]=g.useState(null),[k,N]=g.useState(""),[S,E]=g.useState("active"),[T,P]=g.useState(""),[O,R]=g.useState(""),[I,M]=g.useState(""),[z,W]=g.useState(""),[q,Y]=g.useState(!1),[L,K]=g.useState(!1),[G,re]=g.useState(""),[H,ne]=g.useState(""),[J,Ie]=g.useState(""),[me,ge]=g.useState(""),[U,Z]=g.useState("user"),[le,B]=g.useState(!1),[we,Ee]=g.useState(""),[He,Je]=g.useState(""),[ct,Et]=g.useState(""),[D,V]=g.useState(""),[Q,ve]=g.useState(""),[pe,ue]=g.useState("created_at"),[_e,Ze]=g.useState("desc"),[Ue,at]=g.useState(1),[Mr,ut]=g.useState(10);function ns(ie){return!ie.subscriptions||ie.subscriptions.length===0?"No Subscription":ie.subscriptions.some(qe=>qe.status==="active"||qe.status==="trialing")?"Active":"Inactive"}function Vs(ie){switch(ie){case"Active":return d.jsx(ua,{className:"w-4 h-4 text-green-500"});case"Inactive":return d.jsx(hC,{className:"w-4 h-4 text-red-500"});default:return d.jsx(zi,{className:"w-4 h-4 text-gray-400"})}}function Si(ie){switch(ie){case"admin":return"bg-purple-100 text-purple-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}function ss(ie){if(!ie)return"—";const qe=new Date(ie);return Number.isNaN(qe.getTime())?"—":qe.toLocaleString()}const[js,Ei]=g.useState(!1),$r=g.useCallback(async()=>{s(!0),o(null);try{const{data:{session:ie}}=await fe.auth.getSession();if(!ie){o("User not authenticated."),s(!1);return}const qe=await fetch("/api/admin/users",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie.access_token}`}});if(!qe.ok){const cr=await qe.json();throw new Error(cr.error||"Failed to fetch users.")}const Be=await qe.json();r(Be),Be.length>0&&(Be[0].role==="admin"||Be[0].role==="super_admin")?Ei(!0):Ei(!1)}catch(ie){console.error("Error fetching users or checking admin status:",ie),o((ie instanceof Error?ie.message:String(ie))||"An unexpected error occurred.")}finally{s(!1)}},[]);g.useEffect(()=>{$r()},[$r]);const is=g.useMemo(()=>{const ie=t.filter(qe=>{var Be;const cr=qe.email.toLowerCase().includes(ct.toLowerCase())||(((Be=qe.profile)==null?void 0:Be.display_name)||"").toLowerCase().includes(ct.toLowerCase()),xn=!D||qe.role===D,fn=ns(qe);return cr&&xn&&(!Q||fn===Q)});return ie.sort((qe,Be)=>{var cr,xn;let fn=qe[pe],Lt=Be[pe];return pe==="display_name"&&(fn=((cr=qe.profile)==null?void 0:cr.display_name)||"",Lt=((xn=Be.profile)==null?void 0:xn.display_name)||""),(pe==="created_at"||pe==="last_sign_in")&&(fn=new Date(fn),Lt=new Date(Lt)),fn<Lt?_e==="asc"?-1:1:fn>Lt?_e==="asc"?1:-1:0}),ie},[t,ct,D,Q,pe,_e]),un=g.useMemo(()=>{const ie=(Ue-1)*Mr;return is.slice(ie,ie+Mr)},[is,Ue,Mr]),ks=Math.ceil(is.length/Mr)||1,lr=()=>{Ie(""),ge(""),Z("user"),Ee(""),Je(""),f(!0)},Dt=()=>{f(!1)},mr=ie=>{var qe;b(ie);const Be=(qe=ie.subscriptions)==null?void 0:qe.find(cr=>cr.is_active);Be?(N(Be.plan_id||""),E(Be.status),P(Be.current_period_start?new Date(Be.current_period_start).toISOString().split("T")[0]:""),R(Be.current_period_end?new Date(Be.current_period_end).toISOString().split("T")[0]:"")):(N(""),E("active"),P(new Date().toISOString().split("T")[0]),R("")),M(""),W(""),l(!0)},Er=()=>{l(!1),b(null),Y(!1)},Cr=ie=>{w(ie),re(""),ne(""),u(!0)},er=()=>{u(!1),w(null),K(!1)},Qr=ie=>{j(ie),v(!0)},en=()=>{v(!1),j(null)},Vt=async ie=>{var qe;ie.preventDefault(),B(!0),Ee(""),Je("");try{if(!J||!/\S+@\S+\.\S+/.test(J))throw new Error("Please enter a valid email address.");if(t.some(fn=>fn.email.toLowerCase()===J.toLowerCase()))throw new Error("A user with this email already exists in the list.");const Be={action:"addProfile",data:{username:me||J.split("@")[0],email:J,role:U}},cr=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(qe=(await fe.auth.getSession()).data.session)==null?void 0:qe.access_token}`},body:JSON.stringify(Be)}),xn=await cr.json();if(!cr.ok)throw new Error(xn.error||"Failed to add user profile via Edge Function");Ee("User profile added successfully! Full user creation (auth.users) might require backend."),$r(),setTimeout(()=>{Dt()},600)}catch(Be){console.error("Error adding user:",Be),Je((Be instanceof Error?Be.message:String(Be))||"An unexpected error occurred while adding user.")}finally{B(!1)}},Wt=async ie=>{var qe;if(ie.preventDefault(),!!m){Y(!0),M(""),W("");try{if(T&&O&&new Date(T)>=new Date(O))throw new Error("End date must be after start date.");const Be={action:"updateSubscription",userId:m.id,data:{plan_id:k,status:S,current_period_start:T?new Date(T).toISOString():null,current_period_end:O?new Date(O).toISOString():null}},cr=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(qe=(await fe.auth.getSession()).data.session)==null?void 0:qe.access_token}`},body:JSON.stringify(Be)}),xn=await cr.json();if(!cr.ok)throw new Error(xn.error||"Failed to update subscription via Edge Function");M("Subscription updated successfully!"),$r(),setTimeout(()=>{Er()},600)}catch(Be){console.error("Error managing subscription:",Be),W((Be instanceof Error?Be.message:String(Be))||"An unexpected error occurred while managing subscription.")}finally{Y(!1)}}},Mn=async ie=>{var qe;if(ie.preventDefault(),!!x){K(!0),re(""),ne("");try{const Be=new FormData(ie.target),cr=Be.get("displayName"),xn=Be.get("role"),fn={action:"changeRole",targetUserId:x.id,newRole:xn,data:{display_name:cr}},Lt=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(qe=(await fe.auth.getSession()).data.session)==null?void 0:qe.access_token}`},body:JSON.stringify(fn)}),Df=await Lt.json();if(!Lt.ok)throw new Error(Df.error||"Failed to update user details via Edge Function");re("User details updated successfully!"),$r(),setTimeout(()=>{er()},600)}catch(Be){console.error("Error updating user details:",Be),ne((Be instanceof Error?Be.message:String(Be))||"An unexpected error occurred while updating user details.")}finally{K(!1)}}},Ws=async()=>{var ie;if(_)try{const qe={action:"deleteUser",targetUserId:_.id},Be=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(ie=(await fe.auth.getSession()).data.session)==null?void 0:ie.access_token}`},body:JSON.stringify(qe)}),cr=await Be.json();if(!Be.ok)throw new Error(cr.error||"Failed to delete user via Edge Function");r(xn=>xn.filter(fn=>fn.id!==_.id)),en(),un.length===1&&Ue>1&&at(Ue-1),alert(`User ${_.email} deleted successfully.`)}catch(qe){console.error("Error deleting user:",qe),alert(`Failed to delete user: ${qe instanceof Error?qe.message:String(qe)}`)}},dn=ie=>{pe===ie?Ze(_e==="asc"?"desc":"asc"):(ue(ie),Ze("asc")),at(1)},hn=ie=>{ie<1||ie>ks||at(ie)},Ns=ie=>{ut(ie),at(1)};return n?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),d.jsx("span",{className:"text-gray-600",children:"Loading users and plans..."})]})}):i?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-red-600 mb-2",children:[d.jsx(zi,{className:"w-5 h-5"}),d.jsx("span",{className:"font-semibold",children:"Error"})]}),d.jsx("p",{className:"text-red-700",children:i}),d.jsx("button",{onClick:$r,className:"mt-4 px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),d.jsx("p",{className:"text-gray-600",children:"Manage users, subscriptions, and account details"})]}),d.jsx("div",{className:"mt-4 sm:mt-0",children:d.jsxs("button",{onClick:lr,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[d.jsx(Que,{className:"w-4 h-4 mr-2"}),"Add User"]})})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(nj,{className:"w-8 h-8 text-blue-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(ua,{className:"w-8 h-8 text-green-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Subscriptions"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(ie=>ns(ie)==="Active").length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(hm,{className:"w-8 h-8 text-purple-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Admin Users"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(ie=>ie.role==="admin").length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(zi,{className:"w-8 h-8 text-gray-400"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"No Subscription"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(ie=>ns(ie)==="No Subscription").length})]})]})})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(Ru,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),d.jsx("input",{type:"text",placeholder:"Search users...",value:ct,onChange:ie=>{Et(ie.target.value),at(1)},className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("select",{value:D,onChange:ie=>{V(ie.target.value),at(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"All Roles"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"user",children:"User"})]}),d.jsxs("select",{value:Q,onChange:ie=>{ve(ie.target.value),at(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"All Statuses"}),d.jsx("option",{value:"Active",children:"Active"}),d.jsx("option",{value:"Inactive",children:"Inactive"}),d.jsx("option",{value:"No Subscription",children:"No Subscription"})]}),d.jsxs("select",{value:Mr,onChange:ie=>Ns(Number(ie.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:5,children:"5 per page"}),d.jsx("option",{value:10,children:"10 per page"}),d.jsx("option",{value:25,children:"25 per page"}),d.jsx("option",{value:50,children:"50 per page"})]}),d.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[d.jsx(Mue,{className:"w-4 h-4 mr-2"}),is.length," of ",t.length," users"]})]})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>dn("email"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(_U,{className:"w-4 h-4"}),d.jsx("span",{children:"Email"}),pe==="email"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>dn("display_name"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(nj,{className:"w-4 h-4"}),d.jsx("span",{children:"Display Name"}),pe==="display_name"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(hm,{className:"w-4 h-4"}),d.jsx("span",{children:"Role"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>dn("created_at"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(mU,{className:"w-4 h-4"}),d.jsx("span",{children:"Created At"}),pe==="created_at"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>dn("last_sign_in"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(yU,{className:"w-4 h-4"}),d.jsx("span",{children:"Last Sign In"}),pe==="last_sign_in"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[un.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-sm text-gray-500",children:"No users found."})}),un.map(ie=>{var qe;const Be=ns(ie);return d.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:d.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:d.jsx(nj,{className:"w-4 h-4 text-gray-500"})})}),d.jsx("div",{className:"ml-3",children:d.jsx("div",{className:"text-sm font-medium text-gray-900",children:ie.email})})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((qe=ie.profile)==null?void 0:qe.display_name)||"—"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Si(ie.role)}`,children:ie.role})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[Vs(Be),d.jsx("span",{className:"text-gray-900",children:Be})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ss(ie.created_at)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ie.last_sign_in?ss(ie.last_sign_in):"Never"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:()=>Cr(ie),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50",title:"Edit Details",children:[d.jsx(Wue,{className:"w-4 h-4 mr-1"}),"Edit"]}),d.jsxs("button",{onClick:()=>mr(ie),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50",title:"Manage Subscription",children:[d.jsx(fu,{className:"w-4 h-4 mr-1"}),"Subscription"]}),d.jsxs("button",{onClick:()=>Qr(ie),className:"inline-flex items-center px-2.5 py-1.5 border border-red-300 text-red-700 rounded-md hover:bg-red-50",title:"Delete User",children:[d.jsx(Ql,{className:"w-4 h-4 mr-1"}),"Delete"]})]})})]},ie.id)})]})]})}),d.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",Ue," of ",ks]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>hn(Ue-1),disabled:Ue===1,className:"px-3 py-1.5 text-sm border rounded-md disabled:opacity-50",children:"Previous"}),Array.from({length:ks}).map((ie,qe)=>d.jsx("button",{onClick:()=>hn(qe+1),className:`px-3 py-1.5 text-sm border rounded-md ${Ue===qe+1?"bg-blue-600 text-white border-blue-600":"hover:bg-gray-50"}`,children:qe+1},qe)),d.jsx("button",{onClick:()=>hn(Ue+1),disabled:Ue===ks,className:"px-3 py-1.5 text-sm border rounded-md disabled:opacity-50",children:"Next"})]})]})]})]}),h&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:Dt}),d.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New User"}),d.jsxs("form",{onSubmit:Vt,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",value:J,onChange:ie=>Ie(ie.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"user@example.com",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name (optional)"}),d.jsx("input",{type:"text",value:me,onChange:ie=>ge(ie.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jane Doe"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:U,onChange:ie=>Z(ie.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"user",children:"User"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),He&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx(zi,{className:"w-4 h-4"}),He]}),we&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(ua,{className:"w-4 h-4"}),we]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:Dt,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:le,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:le?"Adding…":"Add User"})]})]})]})]}),a&&m&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:Er}),d.jsxs("div",{className:"relative bg-white w-full max-w-xl rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Manage Subscription"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:m.email}),d.jsxs("form",{onSubmit:Wt,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan"}),d.jsxs("select",{value:k,onChange:ie=>N(ie.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"— Select a plan —"}),d.jsx("option",{value:"Monthly",children:"Monthly"}),d.jsx("option",{value:"Yearly",children:"Yearly"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),d.jsxs("select",{value:S,onChange:ie=>E(ie.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"active",children:"active"}),d.jsx("option",{value:"trialing",children:"trialing"}),d.jsx("option",{value:"canceled",children:"canceled"}),d.jsx("option",{value:"paused",children:"paused"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),d.jsx("input",{type:"date",value:T,onChange:ie=>P(ie.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),d.jsx("input",{type:"date",value:O,onChange:ie=>R(ie.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),z&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx(zi,{className:"w-4 h-4"}),z]}),I&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(ua,{className:"w-4 h-4"}),I]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:Er,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:q,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:q?"Saving…":"Save Changes"})]})]})]})]}),c&&x&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:er}),d.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit User Details"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:x.email}),d.jsxs("form",{onSubmit:Mn,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),d.jsx("input",{name:"displayName",type:"text",defaultValue:((e=x.profile)==null?void 0:e.display_name)||"",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jane Doe"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{name:"role",defaultValue:x.role,className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"user",children:"User"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),H&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx(zi,{className:"w-4 h-4"}),H]}),G&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(ua,{className:"w-4 h-4"}),G]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:er,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:L,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:L?"Saving…":"Save Changes"})]})]})]})]}),p&&_&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:en}),d.jsxs("div",{className:"relative bg-white w-full max-w-md rounded-lg shadow-lg p-6",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"shrink-0 mt-1",children:d.jsx(zi,{className:"w-6 h-6 text-red-600"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Delete user?"}),d.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["This will permanently remove ",d.jsx("span",{className:"font-mono",children:_.email})," and their subscriptions from the local list."]})]})]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 mt-6",children:[d.jsx("button",{onClick:en,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{onClick:Ws,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})]})]})},k7e=()=>{const e=g.useRef(null);return g.useEffect(()=>{const t=e.current;if(!t)return;const r=50,n=()=>{const i=document.createElement("div");i.className="star",i.style.position="absolute",i.style.backgroundColor="#ffffff",i.style.borderRadius="50%",i.style.left=Math.random()*100+"%",i.style.top=Math.random()*100+"%";const o=Math.random()*3+1;i.style.width=i.style.height=o+"px",i.style.animationDelay=Math.random()*3+"s",i.style.animationDuration=Math.random()*2+2+"s",i.style.pointerEvents="none",t.appendChild(i)};t.innerHTML="";for(let i=0;i<r;i++)n();const s=()=>{const i=window.pageYOffset*-.1;t&&(t.style.transform=`translateY(${i}px)`)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[]),d.jsx("div",{ref:e,className:"stars fixed top-0 left-0 w-full h-full pointer-events-none -z-10",children:" "})},N7e=async()=>{const{data:e,error:t}=await fe.from("works").select("id, title");if(t)throw new Error(t.message);return e},S7e=async e=>{const{data:t,error:r}=await fe.from("works").insert({title:e,type:"book"}).select();if(r)throw new Error(r.message);return t[0]},E7e=()=>{const e=so(),[t,r]=g.useState(null),[n,s]=g.useState(""),[i,o]=g.useState(1),[a,l]=g.useState(""),[c,u]=g.useState(""),[h,f]=g.useState(!1),[p,v]=g.useState(!1),{data:m,isLoading:b,isError:x,error:w}=Rt({queryKey:["books"],queryFn:N7e}),_=kt({mutationFn:S7e,onSuccess:N=>{e.invalidateQueries({queryKey:["books"]}),l(N.id),u(""),xo.success(`Book "${N.title}" created successfully!`)},onError:N=>{xo.error(`Error creating book: ${N.message}`)}}),j=N=>{N.target.files&&N.target.files[0]&&r(N.target.files[0])},k=async N=>{if(N.preventDefault(),!t||!n||!i){xo.error("Please fill in all required chapter fields and select a file.");return}let S=a;if(c){if(_.isPending){xo.error("Book creation is already in progress. Please wait.");return}try{S=(await _.mutateAsync(c)).id}catch{return}}if(!S){xo.error("Please select an existing book or create a new one.");return}v(!0);const E=new FormData;E.append("file",t),E.append("title",n),E.append("chapter_number",i.toString()),E.append("book_id",S),E.append("is_published",h.toString());try{const{data:{session:T},error:P}=await fe.auth.getSession();if(P||!T){xo.error("User session not found. Please log in."),v(!1);return}const O=await fetch("/api/chapters/upload",{method:"POST",body:E,headers:{Authorization:`Bearer ${T.access_token}`}});if(!O.ok){const R=await O.json();throw new Error(R.message||R.error||"Failed to upload chapter.")}await O.json(),xo.success("Chapter uploaded successfully!"),r(null),s(""),o(1),l(""),u(""),f(!1),N.target instanceof HTMLFormElement&&N.target.reset()}catch(T){console.error("Upload error:",T),xo.error(T.message||"An error occurred during upload.")}finally{v(!1)}};return b?d.jsx("div",{className:"text-center py-8",children:"Loading books..."}):x?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading books: ",w==null?void 0:w.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx(TLe,{}),d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Upload New Chapter"}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:d.jsxs("form",{onSubmit:k,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"file",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter File (PDF, DOCX, TXT, HTML)"}),d.jsx("input",{type:"file",id:"file",onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",accept:".pdf,.docx,.txt,.html",required:!0}),t&&d.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Selected file: ",t.name]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"chapterTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter Title"}),d.jsx("input",{type:"text",id:"chapterTitle",value:n,onChange:N=>s(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"chapterNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter Number"}),d.jsx("input",{type:"number",id:"chapterNumber",value:i,onChange:N=>o(parseInt(N.target.value)||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,min:"1"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"bookId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Existing Book"}),d.jsxs("select",{id:"bookId",value:a,onChange:N=>l(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"-- Select a Book --"}),m==null?void 0:m.map(N=>d.jsx("option",{value:N.id,children:N.title},N.id))]})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("span",{className:"text-gray-500 mr-2",children:"OR"}),d.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newBookTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Create New Book"}),d.jsx("input",{type:"text",id:"newBookTitle",value:c,onChange:N=>u(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new book title"})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isPublished",checked:h,onChange:N=>f(N.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),d.jsx("label",{htmlFor:"isPublished",className:"text-sm font-medium text-gray-700",children:"Publish Immediately"})]}),d.jsx("button",{type:"submit",className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:p||_.isPending,children:p?d.jsxs(d.Fragment,{children:[d.jsx(Pue,{className:"w-4 h-4 animate-pulse"}),"Uploading Chapter..."]}):_.isPending?d.jsxs(d.Fragment,{children:[d.jsx(Cue,{className:"w-4 h-4 animate-pulse"}),"Creating Book..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Yi,{className:"w-4 h-4"}),"Upload Chapter"]})})]})})]})},C7e=async e=>{const t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),r=fe.from("wiki_pages").select(`
      id, created_at, created_by, title, slug, excerpt, is_published, category_id, folder_id, updated_at, view_count,
      content, seo_title, seo_description, seo_keywords,
      category(*),
      user(*)
    `).eq(t?"id":"slug",e),{data:n,error:s}=await r.single();if(s)return console.error("Error fetching wiki page:",s),null;if(n){n.user&&typeof n.user=="object"&&"error"in n.user&&(n.user=null),n.category&&typeof n.category=="object"&&"error"in n.category&&(n.category=null);const{data:i,error:o}=await fe.from("wiki_content_blocks").select("id, type, content, position").eq("page_id",n.id).order("position");if(o)throw console.error("Error fetching wiki content:",o),new Error("Failed to fetch wiki content");const a=(i==null?void 0:i.map(l=>({id:l.id,type:l.type,content:l.content,title:""})))||[];return await fe.rpc("increment_wiki_page_views",{page_id:n.id}),{...n,sections:a,content:n.content||"",seo_title:n.seo_title||"",seo_description:n.seo_description||"",seo_keywords:n.seo_keywords||[],category:n.category,user:n.user}}return null},T7e=async()=>{const{data:e,error:t}=await fe.from("wiki_categories").select("*").order("name",{ascending:!0});if(t)throw console.error("Error fetching categories:",t),new Error("Failed to fetch categories");return e||[]},zv=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Gr("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));zv.displayName="Card";const Uv=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Gr("flex flex-col space-y-1.5 p-6",e),...t}));Uv.displayName="CardHeader";const cE=g.forwardRef(({className:e,...t},r)=>d.jsx("h3",{ref:r,className:Gr("text-2xl font-semibold leading-none tracking-tight",e),...t}));cE.displayName="CardTitle";const A7e=g.forwardRef(({className:e,...t},r)=>d.jsx("p",{ref:r,className:Gr("text-sm text-muted-foreground",e),...t}));A7e.displayName="CardDescription";const Bv=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Gr("p-6 pt-0",e),...t}));Bv.displayName="CardContent";const O7e=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Gr("flex items-center p-6 pt-0",e),...t}));O7e.displayName="CardFooter";const P7e=J0("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary/10 text-primary hover:bg-primary/20",secondary:"border-transparent bg-secondary/10 text-secondary-foreground hover:bg-secondary/20",destructive:"border-transparent bg-destructive/10 text-destructive hover:bg-destructive/20",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Q6({className:e,variant:t,...r}){return d.jsx("div",{className:Gr(P7e({variant:t}),e),...r})}const uE=g.forwardRef(({value:e,onChange:t,theme:r="snow",modules:n={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},formats:s=["header","bold","italic","underline","strike","list","bullet","link","image"],...i},o)=>{const a=l=>{try{t&&t(l)}catch(c){console.error("Error in handleChange:",c)}};return d.jsx("div",{className:"mt-4",children:d.jsx(Fg,{ref:o,theme:r,value:e,onChange:a,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","link","image"],...i})})});uE.displayName="QuillEditor";function dE({id:e,onUpdatePage:t,initialData:r}){const{id:n}=Tu(),[s,i]=g.useState(!!e),[o,a]=g.useState(!1),[l,c]=g.useState([]),[u,h]=g.useState(""),[f,p]=g.useState(!1),[v,m]=g.useState(null),[b,x]=g.useState(""),[w,_]=g.useState(!1),[j,k]=g.useState(()=>r?{...r,category:r.category||null,user:r.user||null}:{id:"",title:"",slug:"",excerpt:null,content:"",seo_title:null,seo_description:null,seo_keywords:[],sections:[],category_id:null,is_published:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:null,folder_id:null,view_count:null,category:null,user:null}),[N,S]=g.useState("");g.useEffect(()=>{const H=e||n;E(),H?T(H):i(!1)},[e,n]);const E=async()=>{try{console.log("Fetching categories...");const H=await T7e();c(H||[]),(!H||H.length===0)&&(console.warn("No categories found in the database"),We.warning("No categories found. Please create categories first."))}catch(H){console.error("Error in fetchCategories:",H),We.error("Failed to load categories. Check console for details.")}},T=async H=>{try{const ne=await C7e(H);if(ne){const J={...ne,sections:ne.sections||[]};k(J),ne.category&&m(ne.category)}else throw new Error("Wiki page not found.")}catch(ne){console.error("Error fetching wiki page:",ne),We.error("Failed to load wiki page")}finally{i(!1)}},P=H=>{const{name:ne,value:J}=H.target;k(Ie=>({...Ie,[ne]:J}))},O=H=>{const ne={id:`section-${Date.now()}`,title:"New Section",content:"",type:H||"paragraph"};k(J=>({...J,sections:[...J.sections,ne]}))},R=(H,ne)=>{k(J=>({...J,sections:J.sections.map(Ie=>Ie.id===H?{...Ie,...ne}:Ie)}))},I=H=>{if(j.sections.length<=1){We.error("You must have at least one section");return}k(ne=>({...ne,sections:ne.sections.filter(J=>J.id!==H)}))},M=H=>{const ne=H.target.value;k(J=>({...J,title:ne,slug:J.slug||q(ne)}))},z=H=>{m(H),k(ne=>({...ne,category_id:H.id})),p(!1)},W=()=>{m(null),k(H=>({...H,category_id:null}))},q=H=>H.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").trim(),Y=async()=>{var H,ne;a(!0);try{if(!((H=j==null?void 0:j.title)!=null&&H.trim())){We.error("Title is required"),a(!1);return}if(!((ne=j.slug)!=null&&ne.trim())){We.error("Slug is required"),a(!1);return}const{data:{user:J},error:Ie}=await fe.auth.getUser();if(Ie||!J){We.error("You must be signed in to save changes."),a(!1);return}const me={title:j.title.trim(),slug:j.slug.trim(),category_id:j.category_id||null,is_published:j.is_published,updated_at:new Date().toISOString()};let ge=null;if(e){const{data:U,error:Z}=await fe.from("wiki_pages").update(me).eq("id",e).select().single();if(Z)throw Z;if(U)ge=U;else throw new Error("Page data not found after update.");We.success("Wiki page updated successfully");const{error:le}=await fe.from("wiki_content_blocks").delete().eq("page_id",ge.id);if(le)throw console.error("Error deleting old content blocks:",le),new Error("Failed to update content blocks")}else{const{data:U,error:Z}=await fe.from("wiki_pages").insert([{...me,created_by:J.id,created_at:new Date().toISOString(),view_count:0}]).select("*, user:profiles(*), category:wiki_categories(*)").single();if(Z)throw Z;if(U)ge=U;else throw new Error("Page data not found after creation.");We.success("Wiki page created successfully")}if(ge&&j.sections&&j.sections.length>0){const U=j.sections.map((le,B)=>({page_id:ge.id,type:le.type,content:le.content,position:B,created_by:J.id})),{error:Z}=await fe.from("wiki_content_blocks").insert(U);if(Z)throw console.error("Error saving content blocks:",Z),new Error("Failed to save content blocks")}if(ge){let U=null;ge.user&&typeof ge.user=="object"&&!("error"in ge.user)&&(U=ge.user);const Z={...ge,title:j.title,slug:j.slug,excerpt:j.excerpt||null,is_published:j.is_published,category_id:j.category_id||null,category:v||null,sections:j.sections||[],created_at:ge.created_at||new Date().toISOString(),updated_at:new Date().toISOString(),user:U};t&&t(Z)}}catch(J){throw console.error("Error saving wiki page:",J),J.code==="23505"?We.error("A page with this slug already exists"):J.code==="42501"?We.error("You do not have permission to perform this action"):We.error(`Failed to save wiki page: ${(J instanceof Error?J.message:String(J))||"Unknown error"}`),J}finally{a(!1)}},L=async()=>{const H=!j.is_published;if(k(ne=>({...ne,is_published:H})),e)try{const{error:ne}=await fe.from("wiki_pages").update({is_published:H,published_at:H?new Date().toISOString():null}).eq("id",e);if(ne)throw ne;We.success(`Page ${H?"published":"unpublished"} successfully`)}catch(ne){console.error("Error updating publish status:",ne),We.error(`Failed to update page status: ${ne instanceof Error?ne.message:String(ne)}`),k(J=>({...J,is_published:!H}))}},K=async()=>{if(!b.trim()){We.error("Category name cannot be empty");return}try{const{data:{user:H}}=await fe.auth.getUser();if(!H){We.error("You must be logged in to create categories");return}const{data:ne,error:J}=await fe.from("wiki_categories").insert([{name:b.trim(),slug:b.trim().toLowerCase().replace(/\s+/g,"-"),created_by:H.id,is_active:!0}]).select().single();if(J)throw console.error("Error creating category:",J),new Error("Failed to create category");if(ne===null){console.error("No data returned after creating category, but no error was thrown."),We.error("Failed to create category: No data received.");return}const Ie=ne;c(me=>[...me,Ie]),z(Ie),x(""),_(!1),We.success("Category created successfully")}catch(H){console.error("Error creating category:",H),We.error("Failed to create category")}},G=()=>d.jsxs("div",{className:"space-y-2",children:[d.jsx(ht,{children:"Category"}),v?d.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Q6,{className:"h-4 w-4 mr-2 text-muted-foreground"}),d.jsx("span",{children:v.name})]}),d.jsx(Ke,{type:"button",variant:"ghost",size:"sm",onClick:W,children:d.jsx(Ji,{className:"h-4 w-4"})})]}):w?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(Tn,{placeholder:"Enter category name",value:b,onChange:H=>x(H.target.value),autoFocus:!0}),d.jsx(Ke,{type:"button",onClick:K,disabled:!b.trim(),children:"Add"})]}),d.jsx(Ke,{type:"button",variant:"ghost",size:"sm",onClick:()=>_(!1),children:"Cancel"})]}):d.jsxs("div",{className:"space-y-2",children:[d.jsxs(Ke,{type:"button",variant:"outline",className:"w-full justify-start",onClick:()=>p(!0),children:[d.jsx(Q6,{className:"h-4 w-4 mr-2"}),"Select a category"]}),d.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["or"," ",d.jsx("button",{type:"button",className:"text-primary hover:underline",onClick:()=>_(!0),children:"create a new category"})]})]})]}),re=H=>{const ne=J=>{R(H.id,{content:J})};switch(H.type){case"heading_1":case"heading_2":case"heading_3":case"paragraph":case"bullet_list":case"ordered_list":return d.jsx("div",{className:"mt-4",children:d.jsx(uE,{value:H.content||"",onChange:ne,placeholder:"Start writing..."})});case"quote":return d.jsx("div",{className:"mt-4 border-l-4 border-gray-300 pl-4 italic",children:d.jsx(uE,{value:H.content||"",onChange:ne,placeholder:"Start writing..."})});case"code":return d.jsx("div",{className:"mt-4 bg-gray-100 p-4 rounded-md font-mono text-sm",children:d.jsx(Wi,{value:H.content||"",onChange:J=>R(H.id,{content:J.target.value}),placeholder:"Enter code...",rows:6,className:"font-mono"})});case"divider":return d.jsx("div",{className:"my-6 border-t border-gray-200"});case"image":return d.jsxs("div",{className:"mt-4",children:[d.jsx(Tn,{type:"text",value:H.content||"",onChange:J=>R(H.id,{content:J.target.value}),placeholder:"Enter image URL..."}),H.content&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:H.content,alt:"Section content",className:"max-w-full h-auto rounded-md"})})]});default:return d.jsxs("div",{className:"mt-4 text-gray-500 italic",children:["Unsupported section type: ",H.type]})}};return s?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx(Sh,{className:"h-8 w-8 animate-spin"})}):(u&&l.filter(H=>H.name.toLowerCase().includes(u.toLowerCase())),d.jsx("div",{className:"container mx-auto p-6",children:d.jsxs("form",{onSubmit:H=>H.preventDefault(),children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs(Ke,{type:"button",variant:"outline",size:"sm",children:[d.jsx(pU,{className:"mr-2 h-4 w-4"})," Back to Wiki"]}),d.jsx("h1",{className:"text-2xl font-bold",children:e?"Edit Wiki Page":"Create New Wiki Page"})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(ht,{htmlFor:"is_published",children:"Publish"}),d.jsx(vm,{id:"is_published",checked:j.is_published??void 0,onCheckedChange:L})]}),d.jsx(Ke,{type:"button",disabled:o,onClick:Y,children:o?d.jsxs(d.Fragment,{children:[d.jsx(Sh,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):d.jsxs(d.Fragment,{children:[d.jsx(fC,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2 space-y-6",children:d.jsxs(zv,{children:[d.jsx(Uv,{children:d.jsx(cE,{children:"Page Content"})}),d.jsxs(Bv,{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(ht,{htmlFor:"title",children:"Title *"}),d.jsx(Tn,{id:"title",name:"title",value:j.title,onChange:M,placeholder:"Enter page title",required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(ht,{htmlFor:"slug",children:"URL Slug *"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:`${window.location.origin}/wiki/${j.slug||"your-page-slug"}`})]}),d.jsx(Tn,{id:"slug",name:"slug",value:j.slug,onChange:P,placeholder:"page-slug",required:!0})]}),G(),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ht,{children:"Sections"}),j.sections.map((H,ne)=>d.jsxs(zv,{className:"mb-4",children:[d.jsx(Uv,{children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(Tn,{value:H.title,onChange:J=>R(H.id,{title:J.target.value}),placeholder:"Section Title",className:"text-xl font-bold"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("select",{value:H.type,onChange:J=>R(H.id,{type:J.target.value}),className:"text-sm p-1 border rounded",children:[d.jsx("option",{value:"paragraph",children:"Paragraph"}),d.jsx("option",{value:"heading_1",children:"Heading 1"}),d.jsx("option",{value:"heading_2",children:"Heading 2"}),d.jsx("option",{value:"heading_3",children:"Heading 3"}),d.jsx("option",{value:"bullet_list",children:"Bullet List"}),d.jsx("option",{value:"ordered_list",children:"Ordered List"}),d.jsx("option",{value:"image",children:"Image"}),d.jsx("option",{value:"table",children:"Table"}),d.jsx("option",{value:"quote",children:"Quote"}),d.jsx("option",{value:"code",children:"Code"}),d.jsx("option",{value:"divider",children:"Divider"})]}),d.jsx(Ke,{variant:"ghost",size:"icon",type:"button",onClick:()=>I(H.id),disabled:j.sections.length<=1,children:d.jsx(Ji,{className:"h-4 w-4"})})]})]})}),d.jsx(Bv,{children:re(H)})]},H.id))]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.jsx(Ke,{type:"button",variant:"outline",onClick:()=>O("paragraph"),children:"Add Paragraph"}),d.jsx(Ke,{type:"button",variant:"outline",onClick:()=>O("heading_1"),children:"Add Heading 1"}),d.jsx(Ke,{type:"button",variant:"outline",onClick:()=>O("quote"),children:"Add Quote"})]})]})]})}),d.jsx("div",{className:"space-y-6",children:d.jsxs(zv,{children:[d.jsx(Uv,{children:d.jsx(cE,{children:"Publishing"})}),d.jsxs(Bv,{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Status"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:j.is_published?"Published":"Draft"})]}),d.jsx(vm,{checked:j.is_published??void 0,onCheckedChange:L})]}),e&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-medium",children:"URL"}),d.jsx("div",{className:"flex items-center",children:d.jsxs("a",{href:`/wiki/${j.slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center",children:["View page ",d.jsx(fu,{className:"ml-1 h-3 w-3"})]})})]})]})]})})]})]})}))}function R7e({folders:e,pages:t,selectedFolder:r,selectedPage:n,onSelect:s,onPageSelect:i,onDeleteFolder:o,onEditFolder:a,onDeletePage:l,onEditPage:c}){const u=g.useMemo(()=>{const f=new Map,p=[];e.forEach(m=>{const b={...m,children:[],pages:[],type:"folder"};f.set(m.id,b)}),e.forEach(m=>{const b=f.get(m.id);if(b&&m.parent_id&&f.has(m.parent_id)){const x=f.get(m.parent_id);x&&x.children.push(b)}else b&&p.push(b)});const v=[];return t.forEach(m=>{const b={id:m.id,title:m.title,slug:m.slug,folder_id:m.folder_id,category_id:m.category_id,created_at:m.created_at,updated_at:m.updated_at,created_by:m.created_by,is_published:m.is_published||!1,excerpt:m.excerpt||null,view_count:m.view_count||0,type:"page",content:m.content};if(m.folder_id&&f.has(m.folder_id)){const x=f.get(m.folder_id);x&&x.pages.push(b)}else m.folder_id||v.push(b)}),[...p,...v]},[e,t]),h=(f,p=0)=>f?f.type==="page"?d.jsxs("div",{className:Gr("flex items-center px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-800",n===f.id&&"bg-blue-50 dark:bg-blue-900/30"),onClick:()=>i(f.id),children:[d.jsx(nb,{className:"h-4 w-4 mr-2 text-gray-500"}),d.jsx("span",{className:"truncate",children:f.title})]},f.id):d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:Gr("flex items-center justify-between p-2 rounded-md cursor-pointer",r===f.id?"bg-blue-50 dark:bg-blue-900/30":"hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:()=>s(f.id),children:[d.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[d.jsx(sb,{className:"h-4 w-4 text-blue-500"}),d.jsx("span",{className:"truncate",children:f.name})]}),d.jsxs("div",{className:"flex space-x-1",children:[d.jsx(Ke,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:v=>{v.stopPropagation(),a(f)},children:d.jsx(Yue,{className:"h-3.5 w-3.5"})}),d.jsx(Ke,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500 hover:text-red-600",onClick:v=>{v.stopPropagation(),o(f.id)},children:d.jsx(Ql,{className:"h-3.5 w-3.5"})})]})]}),f.children.length>0&&d.jsx("div",{className:"pl-4 border-l border-gray-200 dark:border-gray-700",children:f.children.map(v=>h(v,p+1))}),f.pages.length>0&&d.jsx("div",{className:"pl-4",children:f.pages.map(v=>h(v,p+1))})]},f.id):null;return d.jsx("div",{className:"space-y-1",children:u.map(f=>d.jsx("div",{children:h(f,0)},f.id))})}function e$(){const{folderId:e}=Tu(),[t,r]=g.useState([]),[n,s]=g.useState([]),[i,o]=g.useState(""),[a,l]=g.useState(""),[c,u]=g.useState(!1),[h,f]=g.useState(!1),[p,v]=g.useState(null),[m,b]=g.useState(null),[x,w]=g.useState(null),[_,j]=g.useState(""),[k,N]=g.useState(!0);g.useEffect(()=>{(async()=>{try{N(!0);const{data:L,error:K}=await fe.from("wiki_folders").select("*").order("name");if(K)throw K;const{data:G,error:re}=await fe.from("wiki_pages").select(`
            *,
            sections:wiki_sections(*)
          `);if(re)throw re;const H=(G||[]).map(ne=>({...ne,sections:(ne.sections||[]).map(J=>({...J,content:J.content||""}))}));r(L||[]),s(H)}catch(L){console.error("Error fetching wiki data:",L),We.error("Failed to load wiki content")}finally{N(!1)}})()},[]);const S=async()=>{if(i.trim())try{const L=(await fe.auth.getUser()).data.user;if(!L){We.error("You must be logged in to create a folder");return}const{data:K,error:G}=await fe.from("wiki_folders").insert([{name:i.trim(),slug:i.trim().toLowerCase().replace(/\s+/g,"-"),parent_id:e||null,created_by:L.id}]).select().single();if(G)throw G;r(re=>[...re,K]),o(""),u(!1),We.success("Folder created successfully")}catch(L){console.error("Error creating folder:",L),We.error(L instanceof Error?L.message:"Failed to create folder")}},E=async L=>{try{const K=(await fe.auth.getUser()).data.user;if(!K){We.error("You must be logged in to create a page");return}const{data:G,error:re}=await fe.from("wiki_pages").insert([{title:"New Page",content:"",folder_id:L||null,is_published:!1,created_by:K.id,excerpt:"",slug:"new-page-"+Date.now(),seo_title:"New Page",seo_description:"",seo_keywords:[],view_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),category_id:null}]).select("*").single();if(re)throw re;s(H=>[...H,{...G,sections:[]}]),G&&(v(G.id),b(G.id)),l(""),f(!1),We.success("Page created successfully")}catch(K){console.error("Error creating page:",K),We.error(K instanceof Error?K.message:"Failed to create page")}},T=L=>{b(L.id),v(L.id)},P=async L=>{if(confirm("Are you sure you want to delete this page? This action cannot be undone."))try{N(!0);const{error:K}=await fe.from("wiki_content_blocks").delete().eq("page_id",L);if(K)throw K;const{error:G}=await fe.from("wiki_pages").delete().eq("id",L);if(G)throw G;s(re=>re.filter(H=>H.id!==L)),p===L&&(v(null),b(null)),We.success("Page deleted successfully")}catch(K){console.error("Error deleting page:",K),We.error("Failed to delete page")}finally{N(!1)}},O=async L=>{var K;try{const{data:G,error:re}=await fe.from("wiki_pages").upsert({...L,updated_at:new Date().toISOString(),updated_by:(K=(await fe.auth.getUser()).data.user)==null?void 0:K.id}).select().single();if(re)throw re;return s(H=>H.map(ne=>ne.id===G.id?{...ne,...G}:ne)),We.success("Page saved successfully"),G}catch(G){throw console.error("Error saving page:",G),We.error("Failed to save page"),G}},R=L=>{w(L),j(L.name)},I=async()=>{if(!(!x||!_.trim()))try{const{data:L,error:K}=await fe.from("wiki_folders").update({name:_.trim(),slug:_.trim().toLowerCase().replace(/\s+/g,"-")}).eq("id",x.id).select().single();if(K)throw K;r(G=>G.map(re=>re.id===L.id?L:re)),w(null),j(""),We.success("Folder updated successfully")}catch(L){console.error("Error updating folder:",L),We.error("Failed to update folder")}},M=async L=>{var K;if(confirm("Are you sure you want to delete this folder and all its contents? This action cannot be undone."))try{N(!0);const{error:G}=await fe.from("wiki_folders").delete().eq("id",L);if(G)throw G;const re=(ne,J)=>ne.reduce((Ie,me)=>me.id===J||me.parent_id===J?Ie:[...Ie,me],[]);r(ne=>re(ne,L));const H=e;if(H===L||t.some(ne=>ne.parent_id===L&&ne.id===H)){const ne=(K=t.find(J=>J.id===L))==null?void 0:K.parent_id}We.success("Folder and its contents deleted successfully")}catch(G){console.error("Error deleting folder:",G),We.error("Failed to delete folder. Please try again.")}finally{N(!1)}},z=async(L,K)=>{try{if(t.some(G=>G.id===L)){const{error:G}=await fe.from("wiki_folders").update({parent_id:K}).eq("id",L);if(G)throw G;r(re=>re.map(H=>H.id===L?{...H,parent_id:K}:H))}else{const{error:G}=await fe.from("wiki_pages").update({folder_id:K}).eq("id",L);if(G)throw G;s(re=>re.map(H=>H.id===L?{...H,folder_id:K}:H))}We.success("Item moved successfully")}catch(G){console.error("Error moving item:",G),We.error("Failed to move item")}},W=L=>{v(null),b(null)};g.useMemo(()=>{const L=new Map,K=[];t.forEach(H=>{L.set(H.id,{...H,children:[]})}),t.forEach(H=>{const ne=L.get(H.id);if(ne)if(H.parent_id&&L.has(H.parent_id)){const J=L.get(H.parent_id);J&&J.children.push(ne)}else K.push(ne)});const G=H=>[...H].sort((ne,J)=>{var Ie,me;return(((Ie=ne.data)==null?void 0:Ie.order_index)??0)-(((me=J.data)==null?void 0:me.order_index)??0)}),re=H=>G(H).map(ne=>({...ne,children:ne.children?re(ne.children):[]}));return re(K)},[t,e]);const q=t.find(L=>L.id===e),Y=n.find(L=>L.id===p);return d.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[d.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Wiki Manager"}),d.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-2 overflow-x-auto",children:[d.jsx("button",{className:"hover:text-blue-600 dark:hover:text-blue-400",children:"Home"}),q&&d.jsxs(d.Fragment,{children:[d.jsx(dC,{className:"h-4 w-4 mx-1"}),d.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:q.name})]})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[d.jsxs("div",{className:"space-y-2 mb-4",children:[d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs(Ke,{variant:"outline",size:"sm",className:"flex-1 justify-center bg-white dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>E(e),children:[d.jsx(Yi,{size:14,className:"mr-2"}),"New Page"]}),d.jsxs(Ke,{variant:"outline",size:"sm",className:"flex-1 justify-center bg-white dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>u(!c),children:[d.jsx(sb,{size:14,className:"mr-2"}),"New Folder"]})]}),c&&d.jsxs("div",{className:"flex space-x-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700",children:[d.jsx(Tn,{autoFocus:!0,value:i,onChange:L=>o(L.target.value),onKeyDown:L=>L.key==="Enter"&&S(),placeholder:"Folder name",className:"h-8 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.jsx(Ke,{size:"sm",onClick:S,disabled:!i.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add"})]}),h&&d.jsxs("div",{className:"flex space-x-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700",children:[d.jsx(Tn,{autoFocus:!0,value:a,onChange:L=>l(L.target.value),onKeyDown:L=>{L.key==="Enter"&&E(e)},placeholder:"Page title",className:"h-8 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.jsx(Ke,{size:"sm",onClick:()=>E(e),disabled:!a.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add"})]})]}),d.jsx("div",{className:"mt-2",children:k?d.jsx("div",{className:"flex justify-center py-4",children:d.jsx(Sh,{className:"h-4 w-4 animate-spin text-gray-700 dark:text-gray-300"})}):d.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:d.jsx(R7e,{folders:t,pages:n,selectedFolder:e||void 0,selectedPage:p||void 0,onSelect:W,onPageSelect:L=>{v(L),b(L)},onDeleteFolder:M,onEditFolder:R,onDeletePage:P,onEditPage:T,onMoveItem:z})})})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Y?d.jsx(dE,{id:Y.id,onUpdatePage:O}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[d.jsx(nb,{className:"h-16 w-16 text-gray-400 mb-4"}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:q?`No pages in ${q.name}`:"No page selected"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:q?"Create a new page in this folder using the sidebar.":"Select a page from the sidebar or create a new one."}),d.jsxs(Ke,{onClick:()=>E(e),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[d.jsx(Yi,{className:"h-4 w-4 mr-2"}),"New Page"]})]})}),x&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-96",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Folder"}),d.jsx(Tn,{autoFocus:!0,value:_,onChange:L=>j(L.target.value),onKeyDown:L=>L.key==="Enter"&&I(),placeholder:"Folder name",className:"mb-4"}),d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx(Ke,{variant:"outline",onClick:()=>{w(null),j("")},children:"Cancel"}),d.jsx(Ke,{onClick:I,disabled:!_.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Save Changes"})]})]})})]})}var MY={exports:{}},Dk,t$;function I7e(){if(t$)return Dk;t$=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dk=e,Dk}var Lk,r$;function D7e(){if(r$)return Lk;r$=1;var e=I7e();function t(){}function r(){}return r.resetWarningCache=t,Lk=function(){function n(o,a,l,c,u,h){if(h!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},Lk}MY.exports=D7e()();var L7e=MY.exports;const tr=io(L7e);function n$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function s$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n$(Object(r),!0).forEach(function(n){$Y(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qv(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qv=function(t){return typeof t}:qv=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qv(e)}function $Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M7e(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function $7e(e,t){if(e==null)return{};var r=M7e(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function F7e(e,t){return z7e(e)||U7e(e,t)||B7e(e,t)||q7e()}function z7e(e){if(Array.isArray(e))return e}function U7e(e,t){var r=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(r!=null){var n=[],s=!0,i=!1,o,a;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));s=!0);}catch(l){i=!0,a=l}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw a}}return n}}function B7e(e,t){if(e){if(typeof e=="string")return i$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i$(e,t)}}function i$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ss=function(e,t,r){var n=!!r,s=ee.useRef(r);ee.useEffect(function(){s.current=r},[r]),ee.useEffect(function(){if(!n||!e)return function(){};var i=function(){s.current&&s.current.apply(s,arguments)};return e.on(t,i),function(){e.off(t,i)}},[n,t,e,s])},V7e=function(e){var t=ee.useRef(e);return ee.useEffect(function(){t.current=e},[e]),t.current},C0=function(e){return e!==null&&qv(e)==="object"},o$="[object Object]",W7e=function e(t,r){if(!C0(t)||!C0(r))return t===r;var n=Array.isArray(t),s=Array.isArray(r);if(n!==s)return!1;var i=Object.prototype.toString.call(t)===o$,o=Object.prototype.toString.call(r)===o$;if(i!==o)return!1;if(!i&&!n)return t===r;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(var c={},u=0;u<a.length;u+=1)c[a[u]]=!0;for(var h=0;h<l.length;h+=1)c[l[h]]=!0;var f=Object.keys(c);if(f.length!==a.length)return!1;var p=t,v=r,m=function(b){return e(p[b],v[b])};return f.every(m)},K7e=function(e,t,r){return C0(e)?Object.keys(e).reduce(function(n,s){var i=!C0(t)||!W7e(e[s],t[s]);return r.includes(s)?(i&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),n):i?s$(s$({},n||{}),{},$Y({},s,e[s])):n},null):null},FY=ee.createContext(null);FY.displayName="ElementsContext";var H7e=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e};tr.any,tr.object;tr.func.isRequired;var zY=ee.createContext(null);zY.displayName="CheckoutSdkContext";var Z7e=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},G7e=ee.createContext(null);G7e.displayName="CheckoutContext";tr.any,tr.shape({fetchClientSecret:tr.func.isRequired,elementsOptions:tr.object}).isRequired;var a$=function(e){var t=ee.useContext(zY),r=ee.useContext(FY);if(t&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?Z7e(t,e):H7e(r,e)},Y7e=["mode"],J7e=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Nr=function(e,t){var r="".concat(J7e(e),"Element"),n=function(o){var a=o.id,l=o.className,c=o.options,u=c===void 0?{}:c,h=o.onBlur,f=o.onFocus,p=o.onReady,v=o.onChange,m=o.onEscape,b=o.onClick,x=o.onLoadError,w=o.onLoaderStart,_=o.onNetworksChange,j=o.onConfirm,k=o.onCancel,N=o.onShippingAddressChange,S=o.onShippingRateChange,E=a$("mounts <".concat(r,">")),T="elements"in E?E.elements:null,P="checkoutSdk"in E?E.checkoutSdk:null,O=ee.useState(null),R=F7e(O,2),I=R[0],M=R[1],z=ee.useRef(null),W=ee.useRef(null);Ss(I,"blur",h),Ss(I,"focus",f),Ss(I,"escape",m),Ss(I,"click",b),Ss(I,"loaderror",x),Ss(I,"loaderstart",w),Ss(I,"networkschange",_),Ss(I,"confirm",j),Ss(I,"cancel",k),Ss(I,"shippingaddresschange",N),Ss(I,"shippingratechange",S),Ss(I,"change",v);var q;p&&(e==="expressCheckout"?q=p:q=function(){p(I)}),Ss(I,"ready",q),ee.useLayoutEffect(function(){if(z.current===null&&W.current!==null&&(T||P)){var L=null;if(P)switch(e){case"payment":L=P.createPaymentElement(u);break;case"address":if("mode"in u){var K=u.mode,G=$7e(u,Y7e);if(K==="shipping")L=P.createShippingAddressElement(G);else if(K==="billing")L=P.createBillingAddressElement(G);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":L=P.createExpressCheckoutElement(u);break;case"currencySelector":L=P.createCurrencySelectorElement();break;case"taxId":L=P.createTaxIdElement(u);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else T&&(L=T.create(e,u));z.current=L,M(L),L&&L.mount(W.current)}},[T,P,u]);var Y=V7e(u);return ee.useEffect(function(){if(z.current){var L=K7e(u,Y,["paymentRequest"]);L&&"update"in z.current&&z.current.update(L)}},[u,Y]),ee.useLayoutEffect(function(){return function(){if(z.current&&typeof z.current.destroy=="function")try{z.current.destroy(),z.current=null}catch{}}},[]),ee.createElement("div",{id:a,className:l,ref:W})},s=function(o){a$("mounts <".concat(r,">"));var a=o.id,l=o.className;return ee.createElement("div",{id:a,className:l})},i=t?s:n;return i.propTypes={id:tr.string,className:tr.string,onChange:tr.func,onBlur:tr.func,onFocus:tr.func,onReady:tr.func,onEscape:tr.func,onClick:tr.func,onLoadError:tr.func,onLoaderStart:tr.func,onNetworksChange:tr.func,onConfirm:tr.func,onCancel:tr.func,onShippingAddressChange:tr.func,onShippingRateChange:tr.func,options:tr.object},i.displayName=r,i.__elementType=e,i},Sr=typeof window>"u",X7e=ee.createContext(null);X7e.displayName="EmbeddedCheckoutProviderContext";Nr("auBankAccount",Sr);Nr("card",Sr);Nr("cardNumber",Sr);Nr("cardExpiry",Sr);Nr("cardCvc",Sr);Nr("fpxBank",Sr);Nr("iban",Sr);Nr("idealBank",Sr);Nr("p24Bank",Sr);Nr("epsBank",Sr);Nr("payment",Sr);Nr("expressCheckout",Sr);Nr("currencySelector",Sr);Nr("paymentRequestButton",Sr);Nr("linkAuthentication",Sr);Nr("address",Sr);Nr("shippingAddress",Sr);Nr("paymentMethodMessaging",Sr);Nr("affirmMessage",Sr);Nr("afterpayClearpayMessage",Sr);Nr("taxId",Sr);const Q7e={default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent",outline:"text-foreground border border-input hover:bg-accent hover:text-accent-foreground",success:"bg-green-500 text-white hover:bg-green-600 border-transparent"},UY=g.forwardRef(({className:e,variant:t="default",...r},n)=>d.jsx("div",{ref:n,className:Ye("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",Q7e[t],e),...r}));UY.displayName="Badge";const Zl="timeline_events",Gm="timeline_nested_events",e9e=async({page:e=1,limit:t=10,includeUnpublished:r=!1}={})=>{const n=(e-1)*t,s=n+t-1;let i=es.from(Zl).select("*",{count:"exact"}).order("order",{ascending:!0}).order("created_at",{ascending:!1}).range(n,s);r||(i=i.eq("is_published",!0));const{data:o,error:a,count:l}=await i;if(a)throw console.error("Error fetching timeline events:",a),a;return{data:await Promise.all((o||[]).map(async c=>{const{data:u}=await es.from(Gm).select("*").eq("timeline_event_id",c.id).order("order",{ascending:!0});return{...c,nestedEvents:u||[]}})),total:l||0,page:e,limit:t,totalPages:Math.ceil((l||0)/t)}},BY=async e=>{const{data:t,error:r}=await es.from(Zl).select("*").eq("id",e).single();if(r)return console.error(`Error fetching timeline event ${e}:`,r),null;const{data:n}=await es.from(Gm).select("*").eq("timeline_event_id",e).order("order",{ascending:!0});return{...t,nestedEvents:n||[]}},t9e=async e=>{const{nested_events:t,...r}=e,{data:n,error:s}=await es.from(Zl).insert({...r,is_published:r.is_published??!1}).select().single();if(s)throw console.error("Error creating timeline event:",s),s;if(t&&t.length>0){const i=t.map(a=>({...a,timeline_event_id:n.id})),{error:o}=await es.from(Gm).insert(i);if(o)throw console.error("Error creating nested events:",o),await es.from(Zl).delete().eq("id",n.id),o}return BY(n.id)},r9e=async(e,t)=>{const{nested_events:r,...n}=t,{error:s}=await es.from(Zl).update({...n,is_published:n.is_published??!1}).eq("id",e);if(s)throw console.error(`Error updating timeline event ${e}:`,s),s;if(r){const{error:i}=await es.from(Gm).delete().eq("timeline_event_id",e);if(i)throw console.error(`Error deleting nested events for timeline event ${e}:`,i),i;if(r.length>0){const o=r.map(l=>({...l,timeline_event_id:e})),{error:a}=await es.from(Gm).insert(o);if(a)throw console.error("Error updating nested events:",a),a}}return BY(e)},n9e=async e=>{const{error:t}=await es.from(Zl).delete().eq("id",e);if(t)throw console.error(`Error deleting timeline event ${e}:`,t),t},s9e=async e=>{const t=e.map(({id:n,order:s})=>es.from(Zl).update({order:s}).eq("id",n)),r=(await Promise.all(t)).filter(n=>n.error);if(r.length>0)throw console.error("Error reordering timeline events:",r),new Error("Failed to reorder timeline events")},i9e=async(e,t)=>{const{data:r,error:n}=await es.from(Zl).update({is_published:t}).eq("id",e).select().single();if(n)throw console.error(`Error toggling publish status for timeline event ${e}:`,n),n;return r};function o9e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g.useMemo(()=>n=>{t.forEach(s=>s(n))},t)}const Ww=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Pf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function TP(e){return"nodeType"in e}function _s(e){var t,r;return e?Pf(e)?e:TP(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function AP(e){const{Document:t}=_s(e);return e instanceof t}function Zg(e){return Pf(e)?!1:e instanceof _s(e).HTMLElement}function qY(e){return e instanceof _s(e).SVGElement}function Rf(e){return e?Pf(e)?e.document:TP(e)?AP(e)?e:Zg(e)||qY(e)?e.ownerDocument:document:document:document}const qo=Ww?g.useLayoutEffect:g.useEffect;function OP(e){const t=g.useRef(e);return qo(()=>{t.current=e}),g.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function a9e(){const e=g.useRef(null),t=g.useCallback((n,s)=>{e.current=setInterval(n,s)},[]),r=g.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Ym(e,t){t===void 0&&(t=[e]);const r=g.useRef(e);return qo(()=>{r.current!==e&&(r.current=e)},t),r}function Gg(e,t){const r=g.useRef();return g.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function T0(e){const t=OP(e),r=g.useRef(null),n=g.useCallback(s=>{s!==r.current&&(t==null||t(s,r.current)),r.current=s},[]);return[r,n]}function hE(e){const t=g.useRef();return g.useEffect(()=>{t.current=e},[e]),t.current}let Mk={};function Yg(e,t){return g.useMemo(()=>{if(t)return t;const r=Mk[e]==null?0:Mk[e]+1;return Mk[e]=r,e+"-"+r},[e,t])}function VY(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((i,o)=>{const a=Object.entries(o);for(const[l,c]of a){const u=i[l];u!=null&&(i[l]=u+e*c)}return i},{...t})}}const ih=VY(1),Jm=VY(-1);function l9e(e){return"clientX"in e&&"clientY"in e}function PP(e){if(!e)return!1;const{KeyboardEvent:t}=_s(e.target);return t&&e instanceof t}function c9e(e){if(!e)return!1;const{TouchEvent:t}=_s(e.target);return t&&e instanceof t}function fE(e){if(c9e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return l9e(e)?{x:e.clientX,y:e.clientY}:null}const Zh=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Zh.Translate.toString(e),Zh.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),l$="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function u9e(e){return e.matches(l$)?e:e.querySelector(l$)}const d9e={display:"none"};function h9e(e){let{id:t,value:r}=e;return ee.createElement("div",{id:t,style:d9e},r)}function f9e(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ee.createElement("div",{id:t,style:s,role:"status","aria-live":n,"aria-atomic":!0},r)}function p9e(){const[e,t]=g.useState("");return{announce:g.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const WY=g.createContext(null);function m9e(e){const t=g.useContext(WY);g.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function g9e(){const[e]=g.useState(()=>new Set),t=g.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[g.useCallback(r=>{let{type:n,event:s}=r;e.forEach(i=>{var o;return(o=i[n])==null?void 0:o.call(i,s)})},[e]),t]}const y9e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},v9e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function b9e(e){let{announcements:t=v9e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:s=y9e}=e;const{announce:i,announcement:o}=p9e(),a=Yg("DndLiveRegion"),[l,c]=g.useState(!1);if(g.useEffect(()=>{c(!0)},[]),m9e(g.useMemo(()=>({onDragStart(h){let{active:f}=h;i(t.onDragStart({active:f}))},onDragMove(h){let{active:f,over:p}=h;t.onDragMove&&i(t.onDragMove({active:f,over:p}))},onDragOver(h){let{active:f,over:p}=h;i(t.onDragOver({active:f,over:p}))},onDragEnd(h){let{active:f,over:p}=h;i(t.onDragEnd({active:f,over:p}))},onDragCancel(h){let{active:f,over:p}=h;i(t.onDragCancel({active:f,over:p}))}}),[i,t])),!l)return null;const u=ee.createElement(ee.Fragment,null,ee.createElement(h9e,{id:n,value:s.draggable}),ee.createElement(f9e,{id:a,announcement:o}));return r?Zn.createPortal(u,r):u}var Wr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Wr||(Wr={}));function A0(){}function O0(e,t){return g.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function KY(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const ro=Object.freeze({x:0,y:0});function HY(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ZY(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function x9e(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function c$(e){let{left:t,top:r,height:n,width:s}=e;return[{x:t,y:r},{x:t+s,y:r},{x:t,y:r+n},{x:t+s,y:r+n}]}function GY(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function u$(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const YY=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=u$(t,t.left,t.top),i=[];for(const o of n){const{id:a}=o,l=r.get(a);if(l){const c=HY(u$(l),s);i.push({id:a,data:{droppableContainer:o,value:c}})}}return i.sort(ZY)},w9e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=c$(t),i=[];for(const o of n){const{id:a}=o,l=r.get(a);if(l){const c=c$(l),u=s.reduce((f,p,v)=>f+HY(c[v],p),0),h=Number((u/4).toFixed(4));i.push({id:a,data:{droppableContainer:o,value:h}})}}return i.sort(ZY)};function _9e(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=s-n,a=i-r;if(n<s&&r<i){const l=t.width*t.height,c=e.width*e.height,u=o*a,h=u/(l+c-u);return Number(h.toFixed(4))}return 0}const j9e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=[];for(const i of n){const{id:o}=i,a=r.get(o);if(a){const l=_9e(a,t);l>0&&s.push({id:o,data:{droppableContainer:i,value:l}})}}return s.sort(x9e)};function k9e(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function JY(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ro}function N9e(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((i,o)=>({...i,top:i.top+e*o.y,bottom:i.bottom+e*o.y,left:i.left+e*o.x,right:i.right+e*o.x}),{...t})}}const S9e=N9e(1);function E9e(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function C9e(e,t,r){const n=E9e(t);if(!n)return e;const{scaleX:s,scaleY:i,x:o,y:a}=n,l=e.left-o-(1-s)*parseFloat(r),c=e.top-a-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),u=s?e.width/s:e.width,h=i?e.height/i:e.height;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l}}const T9e={ignoreTransform:!1};function If(e,t){t===void 0&&(t=T9e);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:u}=_s(e).getComputedStyle(e);c&&(r=C9e(r,c,u))}const{top:n,left:s,width:i,height:o,bottom:a,right:l}=r;return{top:n,left:s,width:i,height:o,bottom:a,right:l}}function d$(e){return If(e,{ignoreTransform:!0})}function A9e(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function O9e(e,t){return t===void 0&&(t=_s(e).getComputedStyle(e)),t.position==="fixed"}function P9e(e,t){t===void 0&&(t=_s(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(n=>{const s=t[n];return typeof s=="string"?r.test(s):!1})}function Kw(e,t){const r=[];function n(s){if(t!=null&&r.length>=t||!s)return r;if(AP(s)&&s.scrollingElement!=null&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!Zg(s)||qY(s)||r.includes(s))return r;const i=_s(e).getComputedStyle(s);return s!==e&&P9e(s,i)&&r.push(s),O9e(s,i)?r:n(s.parentNode)}return e?n(e):r}function XY(e){const[t]=Kw(e,1);return t??null}function $k(e){return!Ww||!e?null:Pf(e)?e:TP(e)?AP(e)||e===Rf(e).scrollingElement?window:Zg(e)?e:null:null}function QY(e){return Pf(e)?e.scrollX:e.scrollLeft}function eJ(e){return Pf(e)?e.scrollY:e.scrollTop}function pE(e){return{x:QY(e),y:eJ(e)}}var nn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(nn||(nn={}));function tJ(e){return!Ww||!e?!1:e===document.scrollingElement}function rJ(e){const t={x:0,y:0},r=tJ(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},s=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=n.y,a=e.scrollLeft>=n.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:n,minScroll:t}}const R9e={x:.2,y:.2};function I9e(e,t,r,n,s){let{top:i,left:o,right:a,bottom:l}=r;n===void 0&&(n=10),s===void 0&&(s=R9e);const{isTop:c,isBottom:u,isLeft:h,isRight:f}=rJ(e),p={x:0,y:0},v={x:0,y:0},m={height:t.height*s.y,width:t.width*s.x};return!c&&i<=t.top+m.height?(p.y=nn.Backward,v.y=n*Math.abs((t.top+m.height-i)/m.height)):!u&&l>=t.bottom-m.height&&(p.y=nn.Forward,v.y=n*Math.abs((t.bottom-m.height-l)/m.height)),!f&&a>=t.right-m.width?(p.x=nn.Forward,v.x=n*Math.abs((t.right-m.width-a)/m.width)):!h&&o<=t.left+m.width&&(p.x=nn.Backward,v.x=n*Math.abs((t.left+m.width-o)/m.width)),{direction:p,speed:v}}function D9e(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:r,right:n,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:s,width:e.clientWidth,height:e.clientHeight}}function nJ(e){return e.reduce((t,r)=>ih(t,pE(r)),ro)}function L9e(e){return e.reduce((t,r)=>t+QY(r),0)}function M9e(e){return e.reduce((t,r)=>t+eJ(r),0)}function $9e(e,t){if(t===void 0&&(t=If),!e)return;const{top:r,left:n,bottom:s,right:i}=t(e);XY(e)&&(s<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const F9e=[["x",["left","right"],L9e],["y",["top","bottom"],M9e]];class RP{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Kw(r),s=nJ(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,a]of F9e)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(n),u=s[i]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class rm{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var s;(s=this.target)==null||s.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function z9e(e){const{EventTarget:t}=_s(e);return e instanceof t?e:Rf(e)}function Fk(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var ri;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ri||(ri={}));function h$(e){e.preventDefault()}function U9e(e){e.stopPropagation()}var it;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(it||(it={}));const sJ={start:[it.Space,it.Enter],cancel:[it.Esc],end:[it.Space,it.Enter,it.Tab]},B9e=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case it.Right:return{...r,x:r.x+25};case it.Left:return{...r,x:r.x-25};case it.Down:return{...r,y:r.y+25};case it.Up:return{...r,y:r.y-25}}};class Hw{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new rm(Rf(r)),this.windowListeners=new rm(_s(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ri.Resize,this.handleCancel),this.windowListeners.add(ri.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ri.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&$9e(n),r(ro)}handleKeyDown(t){if(PP(t)){const{active:r,context:n,options:s}=this.props,{keyboardCodes:i=sJ,coordinateGetter:o=B9e,scrollBehavior:a="smooth"}=s,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:c}=n.current,u=c?{x:c.left,y:c.top}:ro;this.referenceCoordinates||(this.referenceCoordinates=u);const h=o(t,{active:r,context:n.current,currentCoordinates:u});if(h){const f=Jm(h,u),p={x:0,y:0},{scrollableAncestors:v}=n.current;for(const m of v){const b=t.code,{isTop:x,isRight:w,isLeft:_,isBottom:j,maxScroll:k,minScroll:N}=rJ(m),S=D9e(m),E={x:Math.min(b===it.Right?S.right-S.width/2:S.right,Math.max(b===it.Right?S.left:S.left+S.width/2,h.x)),y:Math.min(b===it.Down?S.bottom-S.height/2:S.bottom,Math.max(b===it.Down?S.top:S.top+S.height/2,h.y))},T=b===it.Right&&!w||b===it.Left&&!_,P=b===it.Down&&!j||b===it.Up&&!x;if(T&&E.x!==h.x){const O=m.scrollLeft+f.x,R=b===it.Right&&O<=k.x||b===it.Left&&O>=N.x;if(R&&!f.y){m.scrollTo({left:O,behavior:a});return}R?p.x=m.scrollLeft-O:p.x=b===it.Right?m.scrollLeft-k.x:m.scrollLeft-N.x,p.x&&m.scrollBy({left:-p.x,behavior:a});break}else if(P&&E.y!==h.y){const O=m.scrollTop+f.y,R=b===it.Down&&O<=k.y||b===it.Up&&O>=N.y;if(R&&!f.x){m.scrollTo({top:O,behavior:a});return}R?p.y=m.scrollTop-O:p.y=b===it.Down?m.scrollTop-k.y:m.scrollTop-N.y,p.y&&m.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,ih(Jm(h,this.referenceCoordinates),p))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Hw.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=sJ,onActivation:s}=t,{active:i}=r;const{code:o}=e.nativeEvent;if(n.start.includes(o)){const a=i.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function f$(e){return!!(e&&"distance"in e)}function p$(e){return!!(e&&"delay"in e)}class IP{constructor(t,r,n){var s;n===void 0&&(n=z9e(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:o}=i;this.props=t,this.events=r,this.document=Rf(o),this.documentListeners=new rm(this.document),this.listeners=new rm(n),this.windowListeners=new rm(_s(o)),this.initialCoordinates=(s=fE(i))!=null?s:ro,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ri.Resize,this.handleCancel),this.windowListeners.add(ri.DragStart,h$),this.windowListeners.add(ri.VisibilityChange,this.handleCancel),this.windowListeners.add(ri.ContextMenu,h$),this.documentListeners.add(ri.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(p$(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(f$(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:s}=this.props;s(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(ri.Click,U9e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ri.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const l=(r=fE(t))!=null?r:ro,c=Jm(s,l);if(!n&&a){if(f$(a)){if(a.tolerance!=null&&Fk(c,a.tolerance))return this.handleCancel();if(Fk(c,a.distance))return this.handleStart()}if(p$(a)&&Fk(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}t.cancelable&&t.preventDefault(),o(l)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===it.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const q9e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Zw extends IP{constructor(t){const{event:r}=t,n=Rf(r.target);super(t,q9e,n)}}Zw.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const V9e={move:{name:"mousemove"},end:{name:"mouseup"}};var mE;(function(e){e[e.RightClick=2]="RightClick"})(mE||(mE={}));class W9e extends IP{constructor(t){super(t,V9e,Rf(t.event.target))}}W9e.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===mE.RightClick?!1:(n==null||n({event:r}),!0)}}];const zk={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class K9e extends IP{constructor(t){super(t,zk)}static setup(){return window.addEventListener(zk.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(zk.move.name,t)};function t(){}}}K9e.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:s}=r;return s.length>1?!1:(n==null||n({event:r}),!0)}}];var nm;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(nm||(nm={}));var P0;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(P0||(P0={}));function H9e(e){let{acceleration:t,activator:r=nm.Pointer,canScroll:n,draggingRect:s,enabled:i,interval:o=5,order:a=P0.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:h,threshold:f}=e;const p=G9e({delta:h,disabled:!i}),[v,m]=a9e(),b=g.useRef({x:0,y:0}),x=g.useRef({x:0,y:0}),w=g.useMemo(()=>{switch(r){case nm.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case nm.DraggableRect:return s}},[r,s,l]),_=g.useRef(null),j=g.useCallback(()=>{const N=_.current;if(!N)return;const S=b.current.x*x.current.x,E=b.current.y*x.current.y;N.scrollBy(S,E)},[]),k=g.useMemo(()=>a===P0.TreeOrder?[...c].reverse():c,[a,c]);g.useEffect(()=>{if(!i||!c.length||!w){m();return}for(const N of k){if((n==null?void 0:n(N))===!1)continue;const S=c.indexOf(N),E=u[S];if(!E)continue;const{direction:T,speed:P}=I9e(N,E,w,t,f);for(const O of["x","y"])p[O][T[O]]||(P[O]=0,T[O]=0);if(P.x>0||P.y>0){m(),_.current=N,v(j,o),b.current=P,x.current=T;return}}b.current={x:0,y:0},x.current={x:0,y:0},m()},[t,j,n,m,i,o,JSON.stringify(w),JSON.stringify(p),v,c,k,u,JSON.stringify(f)])}const Z9e={x:{[nn.Backward]:!1,[nn.Forward]:!1},y:{[nn.Backward]:!1,[nn.Forward]:!1}};function G9e(e){let{delta:t,disabled:r}=e;const n=hE(t);return Gg(s=>{if(r||!n||!s)return Z9e;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[nn.Backward]:s.x[nn.Backward]||i.x===-1,[nn.Forward]:s.x[nn.Forward]||i.x===1},y:{[nn.Backward]:s.y[nn.Backward]||i.y===-1,[nn.Forward]:s.y[nn.Forward]||i.y===1}}},[r,t,n])}function Y9e(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return Gg(s=>{var i;return t==null?null:(i=n??s)!=null?i:null},[n,t])}function J9e(e,t){return g.useMemo(()=>e.reduce((r,n)=>{const{sensor:s}=n,i=s.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,n)}));return[...r,...i]},[]),[e,t])}var Xm;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Xm||(Xm={}));var gE;(function(e){e.Optimized="optimized"})(gE||(gE={}));const m$=new Map;function X9e(e,t){let{dragging:r,dependencies:n,config:s}=t;const[i,o]=g.useState(null),{frequency:a,measure:l,strategy:c}=s,u=g.useRef(e),h=b(),f=Ym(h),p=g.useCallback(function(x){x===void 0&&(x=[]),!f.current&&o(w=>w===null?x:w.concat(x.filter(_=>!w.includes(_))))},[f]),v=g.useRef(null),m=Gg(x=>{if(h&&!r)return m$;if(!x||x===m$||u.current!==e||i!=null){const w=new Map;for(let _ of e){if(!_)continue;if(i&&i.length>0&&!i.includes(_.id)&&_.rect.current){w.set(_.id,_.rect.current);continue}const j=_.node.current,k=j?new RP(l(j),j):null;_.rect.current=k,k&&w.set(_.id,k)}return w}return x},[e,i,r,h,l]);return g.useEffect(()=>{u.current=e},[e]),g.useEffect(()=>{h||p()},[r,h]),g.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),g.useEffect(()=>{h||typeof a!="number"||v.current!==null||(v.current=setTimeout(()=>{p(),v.current=null},a))},[a,h,p,...n]),{droppableRects:m,measureDroppableContainers:p,measuringScheduled:i!=null};function b(){switch(c){case Xm.Always:return!1;case Xm.BeforeDragging:return r;default:return!r}}}function iJ(e,t){return Gg(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function Q9e(e,t){return iJ(e,t)}function eVe(e){let{callback:t,disabled:r}=e;const n=OP(t),s=g.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return g.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Gw(e){let{callback:t,disabled:r}=e;const n=OP(t),s=g.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return g.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function tVe(e){return new RP(If(e),e)}function g$(e,t,r){t===void 0&&(t=tVe);const[n,s]=g.useState(null);function i(){s(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l??r)!=null?c:null}const u=t(e);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const o=eVe({callback(l){if(e)for(const c of l){const{type:u,target:h}=c;if(u==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),a=Gw({callback:i});return qo(()=>{i(),e?(a==null||a.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[e]),n}function rVe(e){const t=iJ(e);return JY(e,t)}const y$=[];function nVe(e){const t=g.useRef(e),r=Gg(n=>e?n&&n!==y$&&e&&t.current&&e.parentNode===t.current.parentNode?n:Kw(e):y$,[e]);return g.useEffect(()=>{t.current=e},[e]),r}function sVe(e){const[t,r]=g.useState(null),n=g.useRef(e),s=g.useCallback(i=>{const o=$k(i.target);o&&r(a=>a?(a.set(o,pE(o)),new Map(a)):null)},[]);return g.useEffect(()=>{const i=n.current;if(e!==i){o(i);const a=e.map(l=>{const c=$k(l);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,pE(c)]):null}).filter(l=>l!=null);r(a.length?new Map(a):null),n.current=e}return()=>{o(e),o(i)};function o(a){a.forEach(l=>{const c=$k(l);c==null||c.removeEventListener("scroll",s)})}},[s,e]),g.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>ih(i,o),ro):nJ(e):ro,[e,t])}function v$(e,t){t===void 0&&(t=[]);const r=g.useRef(null);return g.useEffect(()=>{r.current=null},t),g.useEffect(()=>{const n=e!==ro;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?Jm(e,r.current):ro}function iVe(e){g.useEffect(()=>{if(!Ww)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function oVe(e,t){return g.useMemo(()=>e.reduce((r,n)=>{let{eventName:s,handler:i}=n;return r[s]=o=>{i(o,t)},r},{}),[e,t])}function oJ(e){return g.useMemo(()=>e?A9e(e):null,[e])}const b$=[];function aVe(e,t){t===void 0&&(t=If);const[r]=e,n=oJ(r?_s(r):null),[s,i]=g.useState(b$);function o(){i(()=>e.length?e.map(l=>tJ(l)?n:new RP(t(l),l)):b$)}const a=Gw({callback:o});return qo(()=>{a==null||a.disconnect(),o(),e.forEach(l=>a==null?void 0:a.observe(l))},[e]),s}function lVe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Zg(t)?t:e}function cVe(e){let{measure:t}=e;const[r,n]=g.useState(null),s=g.useCallback(c=>{for(const{target:u}of c)if(Zg(u)){n(h=>{const f=t(u);return h?{...h,width:f.width,height:f.height}:f});break}},[t]),i=Gw({callback:s}),o=g.useCallback(c=>{const u=lVe(c);i==null||i.disconnect(),u&&(i==null||i.observe(u)),n(u?t(u):null)},[t,i]),[a,l]=T0(o);return g.useMemo(()=>({nodeRef:a,rect:r,setRef:l}),[r,a,l])}const uVe=[{sensor:Zw,options:{}},{sensor:Hw,options:{}}],dVe={current:{}},Vv={draggable:{measure:d$},droppable:{measure:d$,strategy:Xm.WhileDragging,frequency:gE.Optimized},dragOverlay:{measure:If}};class sm extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const hVe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new sm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:A0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Vv,measureDroppableContainers:A0,windowRect:null,measuringScheduled:!1},fVe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:A0,draggableNodes:new Map,over:null,measureDroppableContainers:A0},Yw=g.createContext(fVe),aJ=g.createContext(hVe);function pVe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new sm}}}function mVe(e,t){switch(t.type){case Wr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Wr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Wr.DragEnd:case Wr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Wr.RegisterDroppable:{const{element:r}=t,{id:n}=r,s=new sm(e.droppable.containers);return s.set(n,r),{...e,droppable:{...e.droppable,containers:s}}}case Wr.SetDroppableDisabled:{const{id:r,key:n,disabled:s}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new sm(e.droppable.containers);return o.set(r,{...i,disabled:s}),{...e,droppable:{...e.droppable,containers:o}}}case Wr.UnregisterDroppable:{const{id:r,key:n}=t,s=e.droppable.containers.get(r);if(!s||n!==s.key)return e;const i=new sm(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function gVe(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:s}=g.useContext(Yw),i=hE(n),o=hE(r==null?void 0:r.id);return g.useEffect(()=>{if(!t&&!n&&i&&o!=null){if(!PP(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const h=u9e(u);if(h){h.focus();break}}})}},[n,t,s,o,i]),null}function yVe(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((s,i)=>i({transform:s,...n}),r):r}function vVe(e){return g.useMemo(()=>({draggable:{...Vv.draggable,...e==null?void 0:e.draggable},droppable:{...Vv.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Vv.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function bVe(e){let{activeNode:t,measure:r,initialRect:n,config:s=!0}=e;const i=g.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;qo(()=>{if(!o&&!a||!t){i.current=!1;return}if(i.current||!n)return;const l=t==null?void 0:t.node.current;if(!l||l.isConnected===!1)return;const c=r(l),u=JY(c,n);if(o||(u.x=0),a||(u.y=0),i.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const h=XY(l);h&&h.scrollBy({top:u.y,left:u.x})}},[t,o,a,n,r])}const lJ=g.createContext({...ro,scaleX:1,scaleY:1});var ml;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ml||(ml={}));const cJ=g.memo(function(e){var t,r,n,s;let{id:i,accessibility:o,autoScroll:a=!0,children:l,sensors:c=uVe,collisionDetection:u=j9e,measuring:h,modifiers:f,...p}=e;const v=g.useReducer(mVe,void 0,pVe),[m,b]=v,[x,w]=g9e(),[_,j]=g.useState(ml.Uninitialized),k=_===ml.Initialized,{draggable:{active:N,nodes:S,translate:E},droppable:{containers:T}}=m,P=N!=null?S.get(N):null,O=g.useRef({initial:null,translated:null}),R=g.useMemo(()=>{var lr;return N!=null?{id:N,data:(lr=P==null?void 0:P.data)!=null?lr:dVe,rect:O}:null},[N,P]),I=g.useRef(null),[M,z]=g.useState(null),[W,q]=g.useState(null),Y=Ym(p,Object.values(p)),L=Yg("DndDescribedBy",i),K=g.useMemo(()=>T.getEnabled(),[T]),G=vVe(h),{droppableRects:re,measureDroppableContainers:H,measuringScheduled:ne}=X9e(K,{dragging:k,dependencies:[E.x,E.y],config:G.droppable}),J=Y9e(S,N),Ie=g.useMemo(()=>W?fE(W):null,[W]),me=ks(),ge=Q9e(J,G.draggable.measure);bVe({activeNode:N!=null?S.get(N):null,config:me.layoutShiftCompensation,initialRect:ge,measure:G.draggable.measure});const U=g$(J,G.draggable.measure,ge),Z=g$(J?J.parentElement:null),le=g.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),B=T.getNodeFor((t=le.current.over)==null?void 0:t.id),we=cVe({measure:G.dragOverlay.measure}),Ee=(r=we.nodeRef.current)!=null?r:J,He=k?(n=we.rect)!=null?n:U:null,Je=!!(we.nodeRef.current&&we.rect),ct=rVe(Je?null:U),Et=oJ(Ee?_s(Ee):null),D=nVe(k?B??J:null),V=aVe(D),Q=yVe(f,{transform:{x:E.x-ct.x,y:E.y-ct.y,scaleX:1,scaleY:1},activatorEvent:W,active:R,activeNodeRect:U,containerNodeRect:Z,draggingNodeRect:He,over:le.current.over,overlayNodeRect:we.rect,scrollableAncestors:D,scrollableAncestorRects:V,windowRect:Et}),ve=Ie?ih(Ie,E):null,pe=sVe(D),ue=v$(pe),_e=v$(pe,[U]),Ze=ih(Q,ue),Ue=He?S9e(He,Q):null,at=R&&Ue?u({active:R,collisionRect:Ue,droppableRects:re,droppableContainers:K,pointerCoordinates:ve}):null,Mr=GY(at,"id"),[ut,ns]=g.useState(null),Vs=Je?Q:ih(Q,_e),Si=k9e(Vs,(s=ut==null?void 0:ut.rect)!=null?s:null,U),ss=g.useRef(null),js=g.useCallback((lr,Dt)=>{let{sensor:mr,options:Er}=Dt;if(I.current==null)return;const Cr=S.get(I.current);if(!Cr)return;const er=lr.nativeEvent,Qr=new mr({active:I.current,activeNode:Cr,event:er,options:Er,context:le,onAbort(Vt){if(!S.get(Vt))return;const{onDragAbort:Wt}=Y.current,Mn={id:Vt};Wt==null||Wt(Mn),x({type:"onDragAbort",event:Mn})},onPending(Vt,Wt,Mn,Ws){if(!S.get(Vt))return;const{onDragPending:dn}=Y.current,hn={id:Vt,constraint:Wt,initialCoordinates:Mn,offset:Ws};dn==null||dn(hn),x({type:"onDragPending",event:hn})},onStart(Vt){const Wt=I.current;if(Wt==null)return;const Mn=S.get(Wt);if(!Mn)return;const{onDragStart:Ws}=Y.current,dn={activatorEvent:er,active:{id:Wt,data:Mn.data,rect:O}};Zn.unstable_batchedUpdates(()=>{Ws==null||Ws(dn),j(ml.Initializing),b({type:Wr.DragStart,initialCoordinates:Vt,active:Wt}),x({type:"onDragStart",event:dn}),z(ss.current),q(er)})},onMove(Vt){b({type:Wr.DragMove,coordinates:Vt})},onEnd:en(Wr.DragEnd),onCancel:en(Wr.DragCancel)});ss.current=Qr;function en(Vt){return async function(){const{active:Wt,collisions:Mn,over:Ws,scrollAdjustedTranslate:dn}=le.current;let hn=null;if(Wt&&dn){const{cancelDrop:Ns}=Y.current;hn={activatorEvent:er,active:Wt,collisions:Mn,delta:dn,over:Ws},Vt===Wr.DragEnd&&typeof Ns=="function"&&await Promise.resolve(Ns(hn))&&(Vt=Wr.DragCancel)}I.current=null,Zn.unstable_batchedUpdates(()=>{b({type:Vt}),j(ml.Uninitialized),ns(null),z(null),q(null),ss.current=null;const Ns=Vt===Wr.DragEnd?"onDragEnd":"onDragCancel";if(hn){const ie=Y.current[Ns];ie==null||ie(hn),x({type:Ns,event:hn})}})}}},[S]),Ei=g.useCallback((lr,Dt)=>(mr,Er)=>{const Cr=mr.nativeEvent,er=S.get(Er);if(I.current!==null||!er||Cr.dndKit||Cr.defaultPrevented)return;const Qr={active:er};lr(mr,Dt.options,Qr)===!0&&(Cr.dndKit={capturedBy:Dt.sensor},I.current=Er,js(mr,Dt))},[S,js]),$r=J9e(c,Ei);iVe(c),qo(()=>{U&&_===ml.Initializing&&j(ml.Initialized)},[U,_]),g.useEffect(()=>{const{onDragMove:lr}=Y.current,{active:Dt,activatorEvent:mr,collisions:Er,over:Cr}=le.current;if(!Dt||!mr)return;const er={active:Dt,activatorEvent:mr,collisions:Er,delta:{x:Ze.x,y:Ze.y},over:Cr};Zn.unstable_batchedUpdates(()=>{lr==null||lr(er),x({type:"onDragMove",event:er})})},[Ze.x,Ze.y]),g.useEffect(()=>{const{active:lr,activatorEvent:Dt,collisions:mr,droppableContainers:Er,scrollAdjustedTranslate:Cr}=le.current;if(!lr||I.current==null||!Dt||!Cr)return;const{onDragOver:er}=Y.current,Qr=Er.get(Mr),en=Qr&&Qr.rect.current?{id:Qr.id,rect:Qr.rect.current,data:Qr.data,disabled:Qr.disabled}:null,Vt={active:lr,activatorEvent:Dt,collisions:mr,delta:{x:Cr.x,y:Cr.y},over:en};Zn.unstable_batchedUpdates(()=>{ns(en),er==null||er(Vt),x({type:"onDragOver",event:Vt})})},[Mr]),qo(()=>{le.current={activatorEvent:W,active:R,activeNode:J,collisionRect:Ue,collisions:at,droppableRects:re,draggableNodes:S,draggingNode:Ee,draggingNodeRect:He,droppableContainers:T,over:ut,scrollableAncestors:D,scrollAdjustedTranslate:Ze},O.current={initial:He,translated:Ue}},[R,J,at,Ue,S,Ee,He,re,T,ut,D,Ze]),H9e({...me,delta:E,draggingRect:Ue,pointerCoordinates:ve,scrollableAncestors:D,scrollableAncestorRects:V});const is=g.useMemo(()=>({active:R,activeNode:J,activeNodeRect:U,activatorEvent:W,collisions:at,containerNodeRect:Z,dragOverlay:we,draggableNodes:S,droppableContainers:T,droppableRects:re,over:ut,measureDroppableContainers:H,scrollableAncestors:D,scrollableAncestorRects:V,measuringConfiguration:G,measuringScheduled:ne,windowRect:Et}),[R,J,U,W,at,Z,we,S,T,re,ut,H,D,V,G,ne,Et]),un=g.useMemo(()=>({activatorEvent:W,activators:$r,active:R,activeNodeRect:U,ariaDescribedById:{draggable:L},dispatch:b,draggableNodes:S,over:ut,measureDroppableContainers:H}),[W,$r,R,U,b,L,S,ut,H]);return ee.createElement(WY.Provider,{value:w},ee.createElement(Yw.Provider,{value:un},ee.createElement(aJ.Provider,{value:is},ee.createElement(lJ.Provider,{value:Si},l)),ee.createElement(gVe,{disabled:(o==null?void 0:o.restoreFocus)===!1})),ee.createElement(b9e,{...o,hiddenTextDescribedById:L}));function ks(){const lr=(M==null?void 0:M.autoScrollEnabled)===!1,Dt=typeof a=="object"?a.enabled===!1:a===!1,mr=k&&!lr&&!Dt;return typeof a=="object"?{...a,enabled:mr}:{enabled:mr}}}),xVe=g.createContext(null),x$="button",wVe="Draggable";function _Ve(e){let{id:t,data:r,disabled:n=!1,attributes:s}=e;const i=Yg(wVe),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:h,over:f}=g.useContext(Yw),{role:p=x$,roleDescription:v="draggable",tabIndex:m=0}=s??{},b=(l==null?void 0:l.id)===t,x=g.useContext(b?lJ:xVe),[w,_]=T0(),[j,k]=T0(),N=oVe(o,t),S=Ym(r);qo(()=>(h.set(t,{id:t,key:i,node:w,activatorNode:j,data:S}),()=>{const T=h.get(t);T&&T.key===i&&h.delete(t)}),[h,t]);const E=g.useMemo(()=>({role:p,tabIndex:m,"aria-disabled":n,"aria-pressed":b&&p===x$?!0:void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[n,p,m,b,v,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:E,isDragging:b,listeners:n?void 0:N,node:w,over:f,setNodeRef:_,setActivatorNodeRef:k,transform:x}}function jVe(){return g.useContext(aJ)}const kVe="Droppable",NVe={timeout:25};function SVe(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:s}=e;const i=Yg(kVe),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=g.useContext(Yw),u=g.useRef({disabled:r}),h=g.useRef(!1),f=g.useRef(null),p=g.useRef(null),{disabled:v,updateMeasurementsFor:m,timeout:b}={...NVe,...s},x=Ym(m??n),w=g.useCallback(()=>{if(!h.current){h.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),p.current=null},b)},[b]),_=Gw({callback:w,disabled:v||!o}),j=g.useCallback((E,T)=>{_&&(T&&(_.unobserve(T),h.current=!1),E&&_.observe(E))},[_]),[k,N]=T0(j),S=Ym(t);return g.useEffect(()=>{!_||!k.current||(_.disconnect(),h.current=!1,_.observe(k.current))},[k,_]),g.useEffect(()=>(a({type:Wr.RegisterDroppable,element:{id:n,key:i,disabled:r,node:k,rect:f,data:S}}),()=>a({type:Wr.UnregisterDroppable,key:i,id:n})),[n]),g.useEffect(()=>{r!==u.current.disabled&&(a({type:Wr.SetDroppableDisabled,id:n,key:i,disabled:r}),u.current.disabled=r)},[n,i,r,a]),{active:o,rect:f,isOver:(l==null?void 0:l.id)===n,node:k,over:l,setNodeRef:N}}function uJ(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function EVe(e,t){return e.reduce((r,n,s)=>{const i=t.get(n);return i&&(r[s]=i),r},Array(e.length))}function yv(e){return e!==null&&e>=0}function CVe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function TVe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const dJ=e=>{let{rects:t,activeIndex:r,overIndex:n,index:s}=e;const i=uJ(t,n,r),o=t[s],a=i[s];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},vv={scaleX:1,scaleY:1},hJ=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:s,rects:i,overIndex:o}=e;const a=(t=i[r])!=null?t:n;if(!a)return null;if(s===r){const c=i[o];return c?{x:0,y:r<o?c.top+c.height-(a.top+a.height):c.top-a.top,...vv}:null}const l=AVe(i,s,r);return s>r&&s<=o?{x:0,y:-a.height-l,...vv}:s<r&&s>=o?{x:0,y:a.height+l,...vv}:{x:0,y:0,...vv}};function AVe(e,t,r){const n=e[t],s=e[t-1],i=e[t+1];return n?r<t?s?n.top-(s.top+s.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0}const fJ="Sortable",pJ=ee.createContext({activeIndex:-1,containerId:fJ,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:dJ,disabled:{draggable:!1,droppable:!1}});function mJ(e){let{children:t,id:r,items:n,strategy:s=dJ,disabled:i=!1}=e;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=jVe(),h=Yg(fJ,r),f=a.rect!==null,p=g.useMemo(()=>n.map(N=>typeof N=="object"&&"id"in N?N.id:N),[n]),v=o!=null,m=o?p.indexOf(o.id):-1,b=c?p.indexOf(c.id):-1,x=g.useRef(p),w=!CVe(p,x.current),_=b!==-1&&m===-1||w,j=TVe(i);qo(()=>{w&&v&&u(p)},[w,p,v,u]),g.useEffect(()=>{x.current=p},[p]);const k=g.useMemo(()=>({activeIndex:m,containerId:h,disabled:j,disableTransforms:_,items:p,overIndex:b,useDragOverlay:f,sortedRects:EVe(p,l),strategy:s}),[m,h,j.draggable,j.droppable,_,p,b,l,f,s]);return ee.createElement(pJ.Provider,{value:k},t)}const OVe=e=>{let{id:t,items:r,activeIndex:n,overIndex:s}=e;return uJ(r,n,s).indexOf(t)},PVe=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:s,items:i,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=e;return!c||!n||a!==i&&s===o?!1:r?!0:o!==s&&t===l},RVe={duration:200,easing:"ease"},gJ="transform",IVe=Zh.Transition.toString({property:gJ,duration:0,easing:"linear"}),DVe={roleDescription:"sortable"};function LVe(e){let{disabled:t,index:r,node:n,rect:s}=e;const[i,o]=g.useState(null),a=g.useRef(r);return qo(()=>{if(!t&&r!==a.current&&n.current){const l=s.current;if(l){const c=If(n.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&o(u)}}r!==a.current&&(a.current=r)},[t,r,n,s]),g.useEffect(()=>{i&&o(null)},[i]),i}function yJ(e){let{animateLayoutChanges:t=PVe,attributes:r,disabled:n,data:s,getNewIndex:i=OVe,id:o,strategy:a,resizeObserverConfig:l,transition:c=RVe}=e;const{items:u,containerId:h,activeIndex:f,disabled:p,disableTransforms:v,sortedRects:m,overIndex:b,useDragOverlay:x,strategy:w}=g.useContext(pJ),_=MVe(n,p),j=u.indexOf(o),k=g.useMemo(()=>({sortable:{containerId:h,index:j,items:u},...s}),[h,s,j,u]),N=g.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:S,node:E,isOver:T,setNodeRef:P}=SVe({id:o,data:k,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...l}}),{active:O,activatorEvent:R,activeNodeRect:I,attributes:M,setNodeRef:z,listeners:W,isDragging:q,over:Y,setActivatorNodeRef:L,transform:K}=_Ve({id:o,data:k,attributes:{...DVe,...r},disabled:_.draggable}),G=o9e(P,z),re=!!O,H=re&&!v&&yv(f)&&yv(b),ne=!x&&q,J=ne&&H?K:null,Ie=H?J??(a??w)({rects:m,activeNodeRect:I,activeIndex:f,overIndex:b,index:j}):null,me=yv(f)&&yv(b)?i({id:o,items:u,activeIndex:f,overIndex:b}):j,ge=O==null?void 0:O.id,U=g.useRef({activeId:ge,items:u,newIndex:me,containerId:h}),Z=u!==U.current.items,le=t({active:O,containerId:h,isDragging:q,isSorting:re,id:o,index:j,items:u,newIndex:U.current.newIndex,previousItems:U.current.items,previousContainerId:U.current.containerId,transition:c,wasDragging:U.current.activeId!=null}),B=LVe({disabled:!le,index:j,node:E,rect:S});return g.useEffect(()=>{re&&U.current.newIndex!==me&&(U.current.newIndex=me),h!==U.current.containerId&&(U.current.containerId=h),u!==U.current.items&&(U.current.items=u)},[re,me,h,u]),g.useEffect(()=>{if(ge===U.current.activeId)return;if(ge&&!U.current.activeId){U.current.activeId=ge;return}const Ee=setTimeout(()=>{U.current.activeId=ge},50);return()=>clearTimeout(Ee)},[ge]),{active:O,activeIndex:f,attributes:M,data:k,rect:S,index:j,newIndex:me,items:u,isOver:T,isSorting:re,isDragging:q,listeners:W,node:E,overIndex:b,over:Y,setNodeRef:G,setActivatorNodeRef:L,setDroppableNodeRef:P,setDraggableNodeRef:z,transform:B??Ie,transition:we()};function we(){if(B||Z&&U.current.newIndex===j)return IVe;if(!(ne&&!PP(R)||!c)&&(re||le))return Zh.Transition.toString({...c,property:gJ})}}function MVe(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}function R0(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const $Ve=[it.Down,it.Right,it.Up,it.Left],vJ=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:a}}=t;if($Ve.includes(e.code)){if(e.preventDefault(),!r||!n)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const f=s.get(h.id);if(f)switch(e.code){case it.Down:n.top<f.top&&l.push(h);break;case it.Up:n.top>f.top&&l.push(h);break;case it.Left:n.left>f.left&&l.push(h);break;case it.Right:n.left<f.left&&l.push(h);break}});const c=w9e({collisionRect:n,droppableRects:s,droppableContainers:l});let u=GY(c,"id");if(u===(o==null?void 0:o.id)&&c.length>1&&(u=c[1].id),u!=null){const h=i.get(r.id),f=i.get(u),p=f?s.get(f.id):null,v=f==null?void 0:f.node.current;if(v&&p&&h&&f){const m=Kw(v).some((j,k)=>a[k]!==j),b=bJ(h,f),x=FVe(h,f),w=m||!b?{x:0,y:0}:{x:x?n.width-p.width:0,y:x?n.height-p.height:0},_={x:p.left,y:p.top};return w.x&&w.y?_:Jm(_,w)}}}};function bJ(e,t){return!R0(e)||!R0(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function FVe(e,t){return!R0(e)||!R0(t)||!bJ(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const xJ=e=>{let{transform:t}=e;return{...t,x:0}},zVe=Ch({id:jt().optional(),date:jt().min(1,"Date is required"),title:jt().min(1,"Title is required"),description:jt().min(1,"Description is required"),order:SB().default(0).optional(),timeline_event_id:jt().optional()}),UVe=Ch({id:jt().optional(),date:jt().min(1,"Date is required"),title:jt().min(1,"Title is required"),description:jt().min(1,"Description is required"),details:jt().optional().nullable(),background_image:jt().optional().nullable(),is_published:TC().default(!1),era:hb(["ancient","medieval","modern","future"]).default("ancient"),nested_events:bx(zVe).default([]).optional()}),w$={date:"",title:"",description:"",details:"",background_image:null,is_published:!1,era:"ancient",nested_events:[]},BVe=({id:e,index:t,control:r,remove:n,register:s,errors:i})=>{var o,a,l,c,u,h;const{attributes:f,listeners:p,setNodeRef:v,transform:m,transition:b,isDragging:x}=yJ({id:e}),w={transform:Zh.Transform.toString(m),transition:b,opacity:x?.8:1,zIndex:x?1:"auto"};return d.jsx("div",{ref:v,style:w,className:`p-4 border rounded-lg mb-2 bg-card ${x?"shadow-lg":""}`,children:d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx("button",{type:"button",className:"h-10 w-8 flex items-center justify-center text-muted-foreground hover:text-foreground",...f,...p,children:d.jsx(vU,{className:"h-4 w-4"})}),d.jsxs("div",{className:"flex-1 space-y-3",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx(ht,{htmlFor:`nested_events.${t}.date`,children:"Date"}),d.jsx(Tn,{id:`nested_events.${t}.date`,...s(`nested_events.${t}.date`),placeholder:"e.g., 2023"}),((a=(o=i==null?void 0:i.nested_events)==null?void 0:o[t])==null?void 0:a.date)&&d.jsx("p",{className:"text-sm text-destructive mt-1",children:i.nested_events[t].date.message})]}),d.jsxs("div",{children:[d.jsx(ht,{htmlFor:`nested_events.${t}.title`,children:"Title"}),d.jsx(Tn,{id:`nested_events.${t}.title`,...s(`nested_events.${t}.title`),placeholder:"Event title"}),((c=(l=i==null?void 0:i.nested_events)==null?void 0:l[t])==null?void 0:c.title)&&d.jsx("p",{className:"text-sm text-destructive mt-1",children:i.nested_events[t].title.message})]})]}),d.jsxs("div",{children:[d.jsx(ht,{htmlFor:`nested_events.${t}.description`,children:"Description"}),d.jsx(Wi,{id:`nested_events.${t}.description`,...s(`nested_events.${t}.description`),placeholder:"Brief description of the event",rows:2}),((h=(u=i==null?void 0:i.nested_events)==null?void 0:u[t])==null?void 0:h.description)&&d.jsx("p",{className:"text-sm text-destructive mt-1",children:i.nested_events[t].description.message})]})]}),d.jsx(Ke,{type:"button",variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>n(t),children:d.jsx(Ji,{className:"h-4 w-4"})})]})})};function qVe({open:e,onOpenChange:t,event:r,onSuccess:n}){const{toast:s}=PO(),i=so(),[o,a]=g.useState(!1),l=wC({resolver:CC(UVe),defaultValues:w$,mode:"onChange"}),{control:c,handleSubmit:u,register:h,reset:f,setValue:p,watch:v,formState:{errors:m}}=l;g.useEffect(()=>{var I;f(r?{title:r.title,description:r.description,details:r.details||"",date:r.date,era:r.era||"ancient",background_image:r.background_image||"",is_published:r.is_published,nested_events:((I=r.nested_events)==null?void 0:I.map(M=>({date:M.date,title:M.title,description:M.description,order:M.order||0})))||[]}:w$)},[r,f]);const{fields:b,append:x,remove:w,move:_}=bhe({control:c,name:"nested_events",keyName:"nestedId"}),j=KY(O0(Zw,{activationConstraint:{distance:8}}),O0(Hw,{coordinateGetter:vJ})),{mutate:k}=kt({mutationFn:async I=>{const{nested_events:M,details:z,background_image:W,...q}=I,Y={...q,details:z||void 0,...W?{background_image:W}:{},nested_events:(M||[]).map((K,G)=>({date:K.date,title:K.title,description:K.description,order:G}))},L=Object.fromEntries(Object.entries(Y).filter(([K,G])=>G!==void 0));return t9e(L)},onSuccess:()=>{i.invalidateQueries({queryKey:["timelineEvents"]}),s({title:"Success",description:"Timeline event created successfully"}),n()},onError:I=>{s({title:"Error",description:I.message,variant:"destructive"})},onSettled:()=>{a(!1)}}),{mutate:N}=kt({mutationFn:async I=>{const{nested_events:M,details:z,background_image:W,id:q,...Y}=I,L={id:q,...Y,details:z||null,background_image:W||null,nested_events:(M||[]).map((K,G)=>({...K,order:G,timeline_event_id:q}))};return r9e(L.id,L)},onSuccess:()=>{i.invalidateQueries({queryKey:["timelineEvents"]}),s({title:"Success",description:"Timeline event updated successfully"}),n()},onError:I=>{s({title:"Error",description:I.message,variant:"destructive"})},onSettled:()=>{a(!1)}}),S=I=>{const{active:M,over:z}=I;if(M.id!==z.id){const W=b.findIndex(Y=>Y.nestedId===M.id),q=b.findIndex(Y=>Y.nestedId===z.id);_(W,q)}},E=I=>{var M,z;a(!0),r?N({...I,id:r.id,nested_events:((M=I.nested_events)==null?void 0:M.map((W,q)=>({...W,order:q,timeline_event_id:r.id})))||[]}):k({...I,nested_events:((z=I.nested_events)==null?void 0:z.map((W,q)=>({...W,order:q})))||[]})},T=I=>{p("background_image",I),a(!1)},P=()=>{a(!0)},O=I=>{s({title:"Error",description:I,variant:"destructive"}),a(!1)},R=v("background_image");return d.jsx(wq,{open:e,onOpenChange:t,children:d.jsxs(VC,{className:"sm:max-w-[90vw] max-h-[90vh] flex flex-col p-0",onInteractOutside:I=>I.preventDefault(),children:[d.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[d.jsx(WC,{children:d.jsx(KC,{children:r?"Edit Timeline Event":"Create New Timeline Event"})}),d.jsxs("form",{id:"timeline-event-form",onSubmit:u(E),className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(ht,{htmlFor:"title",children:"Title *"}),d.jsx(Tn,{id:"title",placeholder:"Event title",...h("title"),className:"w-full"}),m.title&&d.jsx("p",{className:"text-sm text-destructive mt-1",children:m.title.message})]}),d.jsxs("div",{children:[d.jsx(ht,{htmlFor:"date",children:"Date *"}),d.jsx(Tn,{id:"date",type:"date",...h("date"),className:"w-full"}),m.date&&d.jsx("p",{className:"text-sm text-destructive mt-1",children:m.date.message})]}),d.jsxs("div",{children:[d.jsx(ht,{htmlFor:"description",children:"Description *"}),d.jsx(Wi,{id:"description",placeholder:"Brief description of the event",...h("description"),rows:3,className:"w-full"}),m.description&&d.jsx("p",{className:"text-sm text-destructive mt-1",children:m.description.message})]}),d.jsxs("div",{children:[d.jsx(ht,{children:"Background Image (Optional)"}),d.jsx("div",{className:"mt-1",children:R?d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:R,alt:"Event background",className:"h-40 w-full object-cover rounded-md"}),d.jsx(Ke,{type:"button",variant:"ghost",size:"icon",className:"absolute top-2 right-2 bg-background/80 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>p("background_image",""),children:d.jsx(Ji,{className:"h-4 w-4"})})]}):d.jsx(wue,{folder:"timeline",onUpload:T,onError:O,onStart:P,children:d.jsx("div",{className:"flex flex-col items-center justify-center h-28 border-2 border-dashed rounded-md p-4 text-center cursor-pointer hover:bg-accent/50 transition-colors",children:o?d.jsx("div",{className:"animate-pulse text-sm",children:"Uploading..."}):d.jsxs(d.Fragment,{children:[d.jsx($ue,{className:"h-6 w-6 mb-1 text-muted-foreground"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to upload or drag and drop"}),d.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"PNG, JPG, GIF up to 5MB"})]})})})})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(ht,{htmlFor:"details",children:"Details (Optional)"}),d.jsx(Wi,{id:"details",placeholder:"Detailed information about the event",...h("details"),rows:7,className:"w-full"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Kd,{control:c,name:"is_published",render:({field:{value:I,onChange:M}})=>d.jsx(vm,{id:"is_published",checked:I,onCheckedChange:M})}),d.jsx(ht,{htmlFor:"is_published",className:"!mt-0",children:v("is_published")?"Published":"Draft"})]}),d.jsxs("div",{children:[d.jsx(ht,{htmlFor:"era",children:"Era *"}),d.jsxs("select",{id:"era",...h("era"),className:"w-full p-2 border rounded-md focus:ring-accent focus:border-accent",children:[d.jsx("option",{value:"ancient",children:"Ancient"}),d.jsx("option",{value:"medieval",children:"Medieval"}),d.jsx("option",{value:"modern",children:"Modern"}),d.jsx("option",{value:"future",children:"Future"})]}),m.era&&d.jsx("p",{className:"text-sm text-destructive mt-1",children:m.era.message})]})]})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx(ht,{className:"text-base",children:"Nested Events"}),d.jsxs(Ke,{type:"button",variant:"outline",size:"sm",onClick:()=>x({date:"",title:"",description:"",order:0}),children:[d.jsx(Yi,{className:"h-4 w-4 mr-2"}),"Add Nested Event"]})]}),b.length>0?d.jsx(cJ,{sensors:j,collisionDetection:YY,onDragEnd:S,modifiers:[xJ],children:d.jsx(mJ,{items:b.map(I=>I.nestedId),strategy:hJ,children:d.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2 -mr-2",children:b.map((I,M)=>d.jsx(BVe,{id:I.nestedId,index:M,control:c,remove:w,register:h,errors:m},I.nestedId))})})}):d.jsx("div",{className:"text-center p-4 border-2 border-dashed rounded-md",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:"No nested events added yet. Add events that are related to this main event."})})]}),d.jsxs(jq,{className:"pt-4",children:[d.jsx(Ke,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),d.jsxs(Ke,{type:"submit",children:[r?"Update":"Create"," Event"]})]})]})]}),d.jsx("div",{className:"border-t p-4",children:d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(Ke,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),d.jsxs(Ke,{type:"submit",form:"timeline-event-form",children:[r?"Update":"Create"," Event"]})]})})]})})}const VVe=({id:e,children:t})=>{const{attributes:r,listeners:n,setNodeRef:s,transform:i,transition:o,isDragging:a}=yJ({id:e}),l={transform:Zh.Transform.toString(i),transition:o,opacity:a?.8:1,zIndex:a?1:"auto"};return d.jsx("tr",{ref:s,style:l,className:a?"bg-gray-100 dark:bg-gray-800":"",...r,children:t({attributes:r,listeners:n,isDragging:a})})},WVe=()=>{const{toast:e}=PO(),t=so(),[r,n]=g.useState(!1),[s,i]=g.useState(null),[o,a]=g.useState(null),[l,c]=g.useState(!1),[u,h]=g.useState(!1),[f,p]=g.useState([]),{data:v,isLoading:m,error:b,refetch:x}=Rt({queryKey:["timelineEvents",{showUnpublished:l}],queryFn:()=>e9e({includeUnpublished:!0})});kt({mutationFn:n9e,onSuccess:()=>{t.invalidateQueries({queryKey:["timelineEvents"]}),e({title:"Success",description:"Timeline event deleted successfully"})},onError:N=>{e({title:"Error",description:N.message,variant:"destructive"})}}),kt({mutationFn:({id:N,isPublished:S})=>i9e(N,!S),onSuccess:()=>{t.invalidateQueries({queryKey:["timelineEvents"]}),e({title:"Success",description:"Timeline event status updated"})},onError:N=>{e({title:"Error",description:N.message,variant:"destructive"})}}),kt({mutationFn:s9e,onSuccess:()=>{t.invalidateQueries({queryKey:["timelineEvents"]}),e({title:"Success",description:"Timeline events reordered successfully"})},onError:N=>{e({title:"Error",description:N.message,variant:"destructive"}),x()}}),g.useEffect(()=>{},[]);const w=N=>{i(N),n(!0)},_=()=>{o&&a(null)},j=N=>{const{active:S,over:E}=N;S.id!==E.id&&p(T=>{const P=T.findIndex(M=>M.id===S.id),O=T.findIndex(M=>M.id===E.id),R=[...T],[I]=R.splice(P,1);return R.splice(O,0,I),R.map((M,z)=>({...M,order:z}))})},k=KY(O0(Zw,{activationConstraint:{distance:8}}),O0(Hw,{coordinateGetter:vJ}));return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Timeline Events"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage the timeline events displayed on the website"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[d.jsx(Ke,{variant:l?"outline":"default",onClick:()=>c(!l),className:"w-full sm:w-auto",children:l?"Hide Unpublished":"Show Unpublished"}),d.jsx(Ke,{variant:u?"destructive":"outline",onClick:()=>h(!u),className:"w-full sm:w-auto",children:u?"Done Reordering":"Reorder Events"}),d.jsxs(Ke,{onClick:()=>{i(null),n(!0)},className:"w-full sm:w-auto",children:[d.jsx(Yi,{className:"mr-2 h-4 w-4"}),"Add Event"]})]})]}),d.jsx("div",{className:"rounded-md border",children:d.jsx(cJ,{sensors:k,collisionDetection:YY,onDragEnd:j,modifiers:[xJ],children:d.jsxs(UC,{children:[d.jsx(BC,{children:d.jsxs(Up,{children:[u&&d.jsx(ni,{className:"w-10"}),d.jsx(ni,{children:"Date"}),d.jsx(ni,{children:"Title"}),d.jsx(ni,{children:"Description"}),d.jsx(ni,{children:"Status"}),d.jsx(ni,{children:"Actions"})]})}),d.jsx(qC,{children:d.jsx(mJ,{items:f.map(N=>N.id),strategy:hJ,children:f.map(N=>d.jsx(VVe,{id:N.id,children:({listeners:S,isDragging:E})=>d.jsxs(d.Fragment,{children:[u&&d.jsx(Ps,{className:"w-10",children:d.jsx("div",{className:"h-8 w-8 p-0 flex items-center justify-center cursor-move",...S,children:d.jsx(vU,{className:"h-4 w-4"})})}),d.jsx(Ps,{children:d.jsx("div",{className:"font-medium",children:N.date})}),d.jsx(Ps,{children:d.jsx("div",{className:"font-medium",children:N.title})}),d.jsx(Ps,{className:"max-w-[300px] truncate",children:N.description}),d.jsx(Ps,{children:d.jsx(UY,{variant:N.is_published?"default":"outline",children:N.is_published?"Published":"Draft"})}),d.jsx(Ps,{children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(Ke,{variant:"ghost",size:"icon",onClick:()=>w(N),children:d.jsx(kU,{className:"h-4 w-4"})}),d.jsx(Ke,{variant:"ghost",size:"icon",onClick:()=>a(N.id),children:d.jsx(Ql,{className:"h-4 w-4 text-destructive"})})]})})]})},N.id))})})]})})}),d.jsx(qVe,{open:r,onOpenChange:n,event:s,onSuccess:()=>{n(!1),i(null),x()}}),d.jsx(ale,{open:!!o,onOpenChange:N=>!N&&a(null),onConfirm:_,title:"Delete Timeline Event",description:"Are you sure you want to delete this timeline event? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel"})]})};function DP(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Vu=DP();function wJ(e){Vu=e}var im={exec:()=>null};function vt(e,t=""){let r=typeof e=="string"?e:e.source,n={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Qn.caret,"$1"),r=r.replace(s,o),n},getRegex:()=>new RegExp(r,t)};return n}var Qn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},KVe=/^(?:[ \t]*(?:\n|$))+/,HVe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,ZVe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Jg=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,GVe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,LP=/(?:[*+-]|\d{1,9}[.)])/,_J=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,jJ=vt(_J).replace(/bull/g,LP).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),YVe=vt(_J).replace(/bull/g,LP).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),MP=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,JVe=/^[^\n]+/,$P=/(?!\s*\])(?:\\.|[^\[\]\\])+/,XVe=vt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",$P).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),QVe=vt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,LP).getRegex(),Jw="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",FP=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,eWe=vt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",FP).replace("tag",Jw).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),kJ=vt(MP).replace("hr",Jg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jw).getRegex(),tWe=vt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",kJ).getRegex(),zP={blockquote:tWe,code:HVe,def:XVe,fences:ZVe,heading:GVe,hr:Jg,html:eWe,lheading:jJ,list:QVe,newline:KVe,paragraph:kJ,table:im,text:JVe},_$=vt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Jg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jw).getRegex(),rWe={...zP,lheading:YVe,table:_$,paragraph:vt(MP).replace("hr",Jg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",_$).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jw).getRegex()},nWe={...zP,html:vt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",FP).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:im,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:vt(MP).replace("hr",Jg).replace("heading",` *#{1,6} *[^
]`).replace("lheading",jJ).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},sWe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,iWe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,NJ=/^( {2,}|\\)\n(?!\s*$)/,oWe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Xw=/[\p{P}\p{S}]/u,UP=/[\s\p{P}\p{S}]/u,SJ=/[^\s\p{P}\p{S}]/u,aWe=vt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,UP).getRegex(),EJ=/(?!~)[\p{P}\p{S}]/u,lWe=/(?!~)[\s\p{P}\p{S}]/u,cWe=/(?:[^\s\p{P}\p{S}]|~)/u,uWe=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,CJ=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,dWe=vt(CJ,"u").replace(/punct/g,Xw).getRegex(),hWe=vt(CJ,"u").replace(/punct/g,EJ).getRegex(),TJ="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",fWe=vt(TJ,"gu").replace(/notPunctSpace/g,SJ).replace(/punctSpace/g,UP).replace(/punct/g,Xw).getRegex(),pWe=vt(TJ,"gu").replace(/notPunctSpace/g,cWe).replace(/punctSpace/g,lWe).replace(/punct/g,EJ).getRegex(),mWe=vt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,SJ).replace(/punctSpace/g,UP).replace(/punct/g,Xw).getRegex(),gWe=vt(/\\(punct)/,"gu").replace(/punct/g,Xw).getRegex(),yWe=vt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),vWe=vt(FP).replace("(?:-->|$)","-->").getRegex(),bWe=vt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",vWe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),I0=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xWe=vt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",I0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),AJ=vt(/^!?\[(label)\]\[(ref)\]/).replace("label",I0).replace("ref",$P).getRegex(),OJ=vt(/^!?\[(ref)\](?:\[\])?/).replace("ref",$P).getRegex(),wWe=vt("reflink|nolink(?!\\()","g").replace("reflink",AJ).replace("nolink",OJ).getRegex(),BP={_backpedal:im,anyPunctuation:gWe,autolink:yWe,blockSkip:uWe,br:NJ,code:iWe,del:im,emStrongLDelim:dWe,emStrongRDelimAst:fWe,emStrongRDelimUnd:mWe,escape:sWe,link:xWe,nolink:OJ,punctuation:aWe,reflink:AJ,reflinkSearch:wWe,tag:bWe,text:oWe,url:im},_We={...BP,link:vt(/^!?\[(label)\]\((.*?)\)/).replace("label",I0).getRegex(),reflink:vt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",I0).getRegex()},yE={...BP,emStrongRDelimAst:pWe,emStrongLDelim:hWe,url:vt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},jWe={...yE,br:vt(NJ).replace("{2,}","*").getRegex(),text:vt(yE.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},bv={normal:zP,gfm:rWe,pedantic:nWe},dp={normal:BP,gfm:yE,breaks:jWe,pedantic:_We},kWe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},j$=e=>kWe[e];function yo(e,t){if(t){if(Qn.escapeTest.test(e))return e.replace(Qn.escapeReplace,j$)}else if(Qn.escapeTestNoEncode.test(e))return e.replace(Qn.escapeReplaceNoEncode,j$);return e}function k$(e){try{e=encodeURI(e).replace(Qn.percentDecode,"%")}catch{return null}return e}function N$(e,t){var r;let n=e.replace(Qn.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),s=n.split(Qn.splitPipe),i=0;if(s[0].trim()||s.shift(),s.length>0&&!((r=s.at(-1))!=null&&r.trim())&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(Qn.slashPipe,"|");return s}function hp(e,t,r){let n=e.length;if(n===0)return"";let s=0;for(;s<n&&e.charAt(n-s-1)===t;)s++;return e.slice(0,n-s)}function NWe(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}function S$(e,t,r,n,s){let i=t.href,o=t.title||null,a=e[1].replace(s.other.outputLinkReplace,"$1");n.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:i,title:o,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,l}function SWe(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(n===null)return t;let s=n[1];return t.split(`
`).map(i=>{let o=i.match(r.other.beginningSpace);if(o===null)return i;let[a]=o;return a.length>=s.length?i.slice(s.length):i}).join(`
`)}var D0=class{constructor(e){de(this,"options"),de(this,"rules"),de(this,"lexer"),this.options=e||Vu}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:hp(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],n=SWe(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){let n=hp(r,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(r=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:hp(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=hp(t[0],`
`).split(`
`),n="",s="",i=[];for(;r.length>0;){let o=!1,a=[],l;for(l=0;l<r.length;l++)if(this.rules.other.blockquoteStart.test(r[l]))a.push(r[l]),o=!0;else if(!o)a.push(r[l]);else break;r=r.slice(l);let c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${c}`:c,s=s?`${s}
${u}`:u;let h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,i,!0),this.lexer.state.top=h,r.length===0)break;let f=i.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){let p=f,v=p.raw+`
`+r.join(`
`),m=this.blockquote(v);i[i.length-1]=m,n=n.substring(0,n.length-p.raw.length)+m.raw,s=s.substring(0,s.length-p.text.length)+m.text;break}else if((f==null?void 0:f.type)==="list"){let p=f,v=p.raw+`
`+r.join(`
`),m=this.list(v);i[i.length-1]=m,n=n.substring(0,n.length-f.raw.length)+m.raw,s=s.substring(0,s.length-p.raw.length)+m.raw,r=v.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),n=r.length>1,s={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");let i=this.rules.other.listItemRegex(r),o=!1;for(;e;){let l=!1,c="",u="";if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let h=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),f=e.split(`
`,1)[0],p=!h.trim(),v=0;if(this.options.pedantic?(v=2,u=h.trimStart()):p?v=t[1].length+1:(v=t[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,u=h.slice(v),v+=t[1].length),p&&this.rules.other.blankLine.test(f)&&(c+=f+`
`,e=e.substring(f.length+1),l=!0),!l){let x=this.rules.other.nextBulletRegex(v),w=this.rules.other.hrRegex(v),_=this.rules.other.fencesBeginRegex(v),j=this.rules.other.headingBeginRegex(v),k=this.rules.other.htmlBeginRegex(v);for(;e;){let N=e.split(`
`,1)[0],S;if(f=N,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),S=f):S=f.replace(this.rules.other.tabCharGlobal,"    "),_.test(f)||j.test(f)||k.test(f)||x.test(f)||w.test(f))break;if(S.search(this.rules.other.nonSpaceChar)>=v||!f.trim())u+=`
`+S.slice(v);else{if(p||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||_.test(h)||j.test(h)||w.test(h))break;u+=`
`+f}!p&&!f.trim()&&(p=!0),c+=N+`
`,e=e.substring(N.length+1),h=S.slice(v)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let m=null,b;this.options.gfm&&(m=this.rules.other.listIsTask.exec(u),m&&(b=m[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:c,task:!!m,checked:b,loose:!1,text:u,tokens:[]}),s.raw+=c}let a=s.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){let c=s.items[l].tokens.filter(h=>h.type==="space"),u=c.length>0&&c.some(h=>this.rules.other.anyLine.test(h.raw));s.loose=u}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:n,title:s}}}table(e){var t;let r=this.rules.block.table.exec(e);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let n=N$(r[1]),s=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(t=r[3])!=null&&t.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===s.length){for(let a of s)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<n.length;a++)o.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:o.align[a]});for(let a of i)o.rows.push(N$(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let i=hp(r.slice(0,-1),"\\");if((r.length-i.length)%2===0)return}else{let i=NWe(t[2],"()");if(i===-2)return;if(i>-1){let o=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let n=t[2],s="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(n);i&&(n=i[1],s=i[3])}else s=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?n=n.slice(1):n=n.slice(1,-1)),S$(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let n=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[n.toLowerCase()];if(!s){let i=r[0].charAt(0);return{type:"text",raw:i,text:i}}return S$(r,s,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!r||this.rules.inline.punctuation.exec(r))){let s=[...n[0]].length-1,i,o,a=s,l=0,c=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+s);(n=c.exec(t))!=null;){if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!i)continue;if(o=[...i].length,n[3]||n[4]){a+=o;continue}else if((n[5]||n[6])&&s%3&&!((s+o)%3)){l+=o;continue}if(a-=o,a>0)continue;o=Math.min(o,o+a+l);let u=[...n[0]][0].length,h=e.slice(0,s+n.index+u+o);if(Math.min(s,o)%2){let p=h.slice(1,-1);return{type:"em",raw:h,text:p,tokens:this.lexer.inlineTokens(p)}}let f=h.slice(2,-2);return{type:"strong",raw:h,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return n&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,n;return t[2]==="@"?(r=t[1],n="mailto:"+r):(r=t[1],n=r),{type:"link",raw:t[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var t;let r;if(r=this.rules.inline.url.exec(e)){let n,s;if(r[2]==="@")n=r[0],s="mailto:"+n;else{let i;do i=r[0],r[0]=((t=this.rules.inline._backpedal.exec(r[0]))==null?void 0:t[0])??"";while(i!==r[0]);n=r[0],r[1]==="www."?s="http://"+r[0]:s=r[0]}return{type:"link",raw:r[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},ya=class vE{constructor(t){de(this,"tokens"),de(this,"options"),de(this,"state"),de(this,"tokenizer"),de(this,"inlineQueue"),this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Vu,this.options.tokenizer=this.options.tokenizer||new D0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Qn,block:bv.normal,inline:dp.normal};this.options.pedantic?(r.block=bv.pedantic,r.inline=dp.pedantic):this.options.gfm&&(r.block=bv.gfm,this.options.breaks?r.inline=dp.breaks:r.inline=dp.gfm),this.tokenizer.rules=r}static get rules(){return{block:bv,inline:dp}}static lex(t,r){return new vE(r).lex(t)}static lexInline(t,r){return new vE(r).inlineTokens(t)}lex(t){t=t.replace(Qn.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],n=!1){var s,i,o;for(this.options.pedantic&&(t=t.replace(Qn.tabCharGlobal,"    ").replace(Qn.spaceLine,""));t;){let a;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(c=>(a=c.call({lexer:this},t,r))?(t=t.substring(a.raw.length),r.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);let c=r.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:r.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):r.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},r.push(a));continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),r.push(a);continue}let l=t;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0,u=t.slice(1),h;this.options.extensions.startBlock.forEach(f=>{h=f.call({lexer:this},u),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){let c=r.at(-1);n&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(a),n=l.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(a);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){var n,s,i;let o=t,a=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let l=!1,c="";for(;t;){l||(c=""),l=!1;let u;if((s=(n=this.options.extensions)==null?void 0:n.inline)!=null&&s.some(f=>(u=f.call({lexer:this},t,r))?(t=t.substring(u.raw.length),r.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);let f=r.at(-1);u.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):r.push(u);continue}if(u=this.tokenizer.emStrong(t,o,c)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),r.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),r.push(u);continue}let h=t;if((i=this.options.extensions)!=null&&i.startInline){let f=1/0,p=t.slice(1),v;this.options.extensions.startInline.forEach(m=>{v=m.call({lexer:this},p),typeof v=="number"&&v>=0&&(f=Math.min(f,v))}),f<1/0&&f>=0&&(h=t.substring(0,f+1))}if(u=this.tokenizer.inlineText(h)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(c=u.raw.slice(-1)),l=!0;let f=r.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):r.push(u);continue}if(t){let f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return r}},L0=class{constructor(e){de(this,"options"),de(this,"parser"),this.options=e||Vu}space(e){return""}code({text:e,lang:t,escaped:r}){var n;let s=(n=(t||"").match(Qn.notSpaceStart))==null?void 0:n[0],i=e.replace(Qn.endingNewline,"")+`
`;return s?'<pre><code class="language-'+yo(s)+'">'+(r?i:yo(i,!0))+`</code></pre>
`:"<pre><code>"+(r?i:yo(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,n="";for(let o=0;o<e.items.length;o++){let a=e.items[o];n+=this.listitem(a)}let s=t?"ol":"ul",i=t&&r!==1?' start="'+r+'"':"";return"<"+s+i+`>
`+n+"</"+s+`>
`}listitem(e){var t;let r="";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?((t=e.tokens[0])==null?void 0:t.type)==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+yo(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):r+=n+" "}return r+=this.parser.parse(e.tokens,!!e.loose),`<li>${r}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let n="";for(let s=0;s<e.rows.length;s++){let i=e.rows[s];r="";for(let o=0;o<i.length;o++)r+=this.tablecell(i[o]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${yo(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let n=this.parser.parseInline(r),s=k$(e);if(s===null)return n;e=s;let i='<a href="'+e+'"';return t&&(i+=' title="'+yo(t)+'"'),i+=">"+n+"</a>",i}image({href:e,title:t,text:r,tokens:n}){n&&(r=this.parser.parseInline(n,this.parser.textRenderer));let s=k$(e);if(s===null)return yo(r);e=s;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${yo(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:yo(e.text)}},qP=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},va=class bE{constructor(t){de(this,"options"),de(this,"renderer"),de(this,"textRenderer"),this.options=t||Vu,this.options.renderer=this.options.renderer||new L0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new qP}static parse(t,r){return new bE(r).parse(t)}static parseInline(t,r){return new bE(r).parseInline(t)}parse(t,r=!0){var n,s;let i="";for(let o=0;o<t.length;o++){let a=t[o];if((s=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&s[a.type]){let c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){i+=u||"";continue}}let l=a;switch(l.type){case"space":{i+=this.renderer.space(l);continue}case"hr":{i+=this.renderer.hr(l);continue}case"heading":{i+=this.renderer.heading(l);continue}case"code":{i+=this.renderer.code(l);continue}case"table":{i+=this.renderer.table(l);continue}case"blockquote":{i+=this.renderer.blockquote(l);continue}case"list":{i+=this.renderer.list(l);continue}case"html":{i+=this.renderer.html(l);continue}case"def":{i+=this.renderer.def(l);continue}case"paragraph":{i+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<t.length&&t[o+1].type==="text";)c=t[++o],u+=`
`+this.renderer.text(c);r?i+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):i+=u;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return i}parseInline(t,r=this.renderer){var n,s;let i="";for(let o=0;o<t.length;o++){let a=t[o];if((s=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&s[a.type]){let c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){i+=c||"";continue}}let l=a;switch(l.type){case"escape":{i+=r.text(l);break}case"html":{i+=r.html(l);break}case"link":{i+=r.link(l);break}case"image":{i+=r.image(l);break}case"strong":{i+=r.strong(l);break}case"em":{i+=r.em(l);break}case"codespan":{i+=r.codespan(l);break}case"br":{i+=r.br(l);break}case"del":{i+=r.del(l);break}case"text":{i+=r.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return i}},Uk,Wv=(Uk=class{constructor(e){de(this,"options"),de(this,"block"),this.options=e||Vu}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?ya.lex:ya.lexInline}provideParser(){return this.block?va.parse:va.parseInline}},de(Uk,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Uk),EWe=class{constructor(...e){de(this,"defaults",DP()),de(this,"options",this.setOptions),de(this,"parse",this.parseMarkdown(!0)),de(this,"parseInline",this.parseMarkdown(!1)),de(this,"Parser",va),de(this,"Renderer",L0),de(this,"TextRenderer",qP),de(this,"Lexer",ya),de(this,"Tokenizer",D0),de(this,"Hooks",Wv),this.use(...e)}walkTokens(e,t){var r,n;let s=[];for(let i of e)switch(s=s.concat(t.call(this,i)),i.type){case"table":{let o=i;for(let a of o.header)s=s.concat(this.walkTokens(a.tokens,t));for(let a of o.rows)for(let l of a)s=s.concat(this.walkTokens(l.tokens,t));break}case"list":{let o=i;s=s.concat(this.walkTokens(o.items,t));break}default:{let o=i;(n=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&n[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{let l=o[a].flat(1/0);s=s.concat(this.walkTokens(l,t))}):o.tokens&&(s=s.concat(this.walkTokens(o.tokens,t)))}}return s}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let n={...r};if(n.async=this.defaults.async||n.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let i=t.renderers[s.name];i?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=i.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=t[s.level];i?i.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),n.extensions=t),r.renderer){let s=this.defaults.renderer||new L0(this.defaults);for(let i in r.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let o=i,a=r.renderer[o],l=s[o];s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u||""}}n.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new D0(this.defaults);for(let i in r.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let o=i,a=r.tokenizer[o],l=s[o];s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u}}n.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new Wv;for(let i in r.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let o=i,a=r.hooks[o],l=s[o];Wv.passThroughHooks.has(i)?s[o]=c=>{if(this.defaults.async)return Promise.resolve(a.call(s,c)).then(h=>l.call(s,h));let u=a.call(s,c);return l.call(s,u)}:s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u}}n.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,i=r.walkTokens;n.walkTokens=function(o){let a=[];return a.push(i.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ya.lex(e,t??this.defaults)}parser(e,t){return va.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{let n={...r},s={...this.defaults,...n},i=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&n.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);let o=s.hooks?s.hooks.provideLexer():e?ya.lex:ya.lexInline,a=s.hooks?s.hooks.provideParser():e?va.parse:va.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(t):t).then(l=>o(l,s)).then(l=>s.hooks?s.hooks.processAllTokens(l):l).then(l=>s.walkTokens?Promise.all(this.walkTokens(l,s.walkTokens)).then(()=>l):l).then(l=>a(l,s)).then(l=>s.hooks?s.hooks.postprocess(l):l).catch(i);try{s.hooks&&(t=s.hooks.preprocess(t));let l=o(t,s);s.hooks&&(l=s.hooks.processAllTokens(l)),s.walkTokens&&this.walkTokens(l,s.walkTokens);let c=a(l,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(l){return i(l)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let n="<p>An error occurred:</p><pre>"+yo(r.message+"",!0)+"</pre>";return t?Promise.resolve(n):n}if(t)return Promise.reject(r);throw r}}},Cu=new EWe;function xt(e,t){return Cu.parse(e,t)}xt.options=xt.setOptions=function(e){return Cu.setOptions(e),xt.defaults=Cu.defaults,wJ(xt.defaults),xt};xt.getDefaults=DP;xt.defaults=Vu;xt.use=function(...e){return Cu.use(...e),xt.defaults=Cu.defaults,wJ(xt.defaults),xt};xt.walkTokens=function(e,t){return Cu.walkTokens(e,t)};xt.parseInline=Cu.parseInline;xt.Parser=va;xt.parser=va.parse;xt.Renderer=L0;xt.TextRenderer=qP;xt.Lexer=ya;xt.lexer=ya.lex;xt.Tokenizer=D0;xt.Hooks=Wv;xt.parse=xt;xt.options;xt.setOptions;xt.use;xt.walkTokens;xt.parseInline;va.parse;ya.lex;const VP=({filePath:e})=>{const[t,r]=g.useState(""),[n,s]=g.useState(!0),[i,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{s(!0);const a=await fetch(e);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const l=await a.text(),c=await xt(l);r(c)}catch(a){o(a.message)}finally{s(!1)}})()},[e]),n?d.jsx("div",{className:"text-center py-8",children:"Loading content..."}):i?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading content: ",i]}):d.jsx("div",{className:"prose lg:prose-lg max-w-none",dangerouslySetInnerHTML:{__html:t}})},CWe=()=>d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Beta Reader Handbook"}),d.jsx(VP,{filePath:"/docs/Documentation for Zoroasterverse Website/community_engagement/beta_program/beta_reader_handbook.md"})]}),TWe=()=>d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Operational Timeline"}),d.jsx(VP,{filePath:"/docs/Documentation for Zoroasterverse Website/community_engagement/beta_program/operational-timeline.md"})]}),AWe=()=>d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Non-Disclosure Agreement (NDA)"}),d.jsx(VP,{filePath:"/docs/Documentation for Zoroasterverse Website/community_engagement/beta_program/beta-reader-policy-pre-nda.md"})]});var Qw="Checkbox",[OWe,CHe]=Ou(Qw),[PWe,WP]=OWe(Qw);function RWe(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:h}=e,[f,p]=lg({prop:r,defaultProp:s??!1,onChange:l,caller:Qw}),[v,m]=g.useState(null),[b,x]=g.useState(null),w=g.useRef(!1),_=v?!!o||!!v.closest("form"):!0,j={checked:f,disabled:i,setChecked:p,control:v,setControl:m,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:w,required:c,defaultChecked:$l(s)?!1:s,isFormControl:_,bubbleInput:b,setBubbleInput:x};return d.jsx(PWe,{scope:t,...j,children:DWe(h)?h(j):n})}var PJ="CheckboxTrigger",RJ=g.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:v}=WP(PJ,e),m=Dn(s,u),b=g.useRef(l);return g.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const w=()=>h(b.current);return x.addEventListener("reset",w),()=>x.removeEventListener("reset",w)}},[i,h]),d.jsx(_r.button,{type:"button",role:"checkbox","aria-checked":$l(l)?"mixed":l,"aria-required":c,"data-state":$J(l),"data-disabled":a?"":void 0,disabled:a,value:o,...n,ref:m,onKeyDown:br(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:br(r,x=>{h(w=>$l(w)?!0:!w),v&&p&&(f.current=x.isPropagationStopped(),f.current||x.stopPropagation())})})});RJ.displayName=PJ;var IJ=g.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...h}=e;return d.jsx(RWe,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:n,form:u,value:l,internal_do_not_use_render:({isFormControl:f})=>d.jsxs(d.Fragment,{children:[d.jsx(RJ,{...h,ref:t,__scopeCheckbox:r}),f&&d.jsx(MJ,{__scopeCheckbox:r})]})})});IJ.displayName=Qw;var DJ="CheckboxIndicator",IWe=g.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,i=WP(DJ,r);return d.jsx(of,{present:n||$l(i.checked)||i.checked===!0,children:d.jsx(_r.span,{"data-state":$J(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});IWe.displayName=DJ;var LJ="CheckboxBubbleInput",MJ=g.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:h,bubbleInput:f,setBubbleInput:p}=WP(LJ,e),v=Dn(r,p),m=fq(i),b=pq(n);g.useEffect(()=>{const w=f;if(!w)return;const _=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(_,"checked").set,k=!s.current;if(m!==i&&j){const N=new Event("click",{bubbles:k});w.indeterminate=$l(i),j.call(w,$l(i)?!1:i),w.dispatchEvent(N)}},[f,m,i,s]);const x=g.useRef($l(i)?!1:i);return d.jsx(_r.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:a,disabled:l,name:c,value:u,form:h,...t,tabIndex:-1,ref:v,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});MJ.displayName=LJ;function DWe(e){return typeof e=="function"}function $l(e){return e==="indeterminate"}function $J(e){return $l(e)?"indeterminate":e?"checked":"unchecked"}const LWe=Ch({overallRating:SB().min(1,"Rating is required").max(5,"Rating must be between 1 and 5"),publicHeadline:jt().min(1,"Headline is required").max(80,"Headline must be 80 characters or less"),quickTake:jt().min(1,"Quick Take is required").max(200,"Quick Take must be 1-2 sentences"),highlights:bx(jt()).min(0,"Select at least 0 highlights"),publicReview:jt().min(1,"Public review text is required"),allowSpoilers:TC(),spoilerContent:jt().optional(),privateFeedback:jt().min(1,"Detailed private feedback is required"),typoFixes:jt().optional(),specificFeedback:Ch({pacing:jt().optional(),characters:jt().optional(),worldbuilding:jt().optional(),dialogue:jt().optional(),plot:jt().optional()}).optional()}),MWe=({value:e,onChange:t})=>{const[r,n]=g.useState(0);return d.jsxs("div",{className:"flex items-center gap-1 mb-4",children:[[1,2,3,4,5].map(s=>d.jsx("button",{type:"button",className:`text-2xl transition-colors ${s<=(r||e)?"text-yellow-400":"text-gray-300"}`,onMouseEnter:()=>n(s),onMouseLeave:()=>n(0),onClick:()=>t(s),children:d.jsx(dg,{fill:"currentColor"})},s)),d.jsx("span",{className:"ml-2 text-gray-600",children:e>0?`${e}/5 stars`:"Click to rate"})]})},$We=()=>{const{handleSubmit:e,control:t,register:r,formState:{errors:n},setValue:s,watch:i}=wC({resolver:CC(LWe),defaultValues:{overallRating:0,publicHeadline:"",quickTake:"",highlights:[],publicReview:"",allowSpoilers:!1,spoilerContent:"",privateFeedback:"",typoFixes:"",specificFeedback:{pacing:"",characters:"",worldbuilding:"",dialogue:"",plot:""}}}),[o,a]=g.useState("pre-publication"),[l,c]=g.useState({}),u=i("allowSpoilers"),h=i("overallRating"),f=i("highlights"),p=i("publicHeadline"),v=i("quickTake"),m=i("publicReview"),b=i("spoilerContent"),x=[{id:"worldbuilding",label:"🌌 Worldbuilding",icon:DI},{id:"emotional",label:"💔 Emotional Impact",icon:bU},{id:"pacing",label:"⚡ Pacing",icon:NU},{id:"characters",label:"👥 Characters",icon:Eh},{id:"writing",label:"✨ Writing Style",icon:hu}],w=k=>{c(N=>({...N,[k]:!N[k]}))},_=k=>{console.log("Beta Reader Feedback Submitted:",k),We.success("Thank you for your feedback! Your response has been submitted.")},j=(k,N)=>{if(o==="pre-publication")return null;const S=l[N];return d.jsxs("div",{className:"mt-4 border border-red-200 rounded-lg p-4 bg-red-50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("span",{className:"text-sm font-semibold text-red-600 flex items-center gap-1",children:[d.jsx(fu,{className:"w-4 h-4"}),"Spoiler Content"]}),d.jsxs("button",{type:"button",onClick:()=>w(N),className:"text-sm bg-red-100 hover:bg-red-200 px-3 py-1 rounded-md flex items-center gap-1 transition-colors",children:[S?d.jsx(Due,{className:"w-4 h-4"}):d.jsx(fu,{className:"w-4 h-4"}),S?"Hide":"Reveal"]})]}),d.jsx("div",{className:`transition-all duration-300 ${S?"opacity-100":"opacity-100 blur-sm select-none pointer-events-none bg-black text-black"}`,children:k||"No spoiler content provided"})]})};return d.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white min-h-screen",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Beta Reader Feedback Form"}),d.jsx("p",{className:"text-gray-600",children:"Your feedback helps make this story the best it can be!"}),d.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[d.jsx("button",{type:"button",onClick:()=>a("pre-publication"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o==="pre-publication"?"bg-blue-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:"Pre-Publication Preview"}),d.jsx("button",{type:"button",onClick:()=>a("post-publication"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o==="post-publication"?"bg-purple-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:"Post-Publication Preview"})]})]}),d.jsxs("form",{onSubmit:e(_),className:"space-y-8",children:[d.jsxs("div",{className:"p-6 rounded-lg border border-yellow-200",style:{backgroundColor:"#fffbeb"},children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(wU,{className:"w-5 h-5 text-yellow-600"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Private Feedback (Author Only)"})]}),d.jsx("p",{className:"text-sm text-yellow-700 mb-4",children:"This section is completely private and will only be seen by the author. Be as detailed and honest as possible!"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(ht,{htmlFor:"privateFeedback",className:"block text-sm font-medium text-gray-700 mb-2",children:"Overall Detailed Feedback"}),d.jsx(Wi,{id:"privateFeedback",...r("privateFeedback"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"Share your complete thoughts: plot holes, character development, pacing issues, suggestions for improvement, favorite moments, areas that confused you, etc. Include spoilers freely!"}),n.privateFeedback&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.privateFeedback.message})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries({pacing:"Pacing & Flow",characters:"Character Development",worldbuilding:"Worldbuilding & Setting",dialogue:"Dialogue & Voice",plot:"Plot & Structure"}).map(([k,N])=>{var S,E;return d.jsxs("div",{children:[d.jsx(ht,{htmlFor:`specificFeedback.${k}`,className:"block text-sm font-medium text-gray-700 mb-1",children:N}),d.jsx(Wi,{id:`specificFeedback.${k}`,...r(`specificFeedback.${k}`),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm",placeholder:`Specific feedback about ${N.toLowerCase()}...`}),((S=n.specificFeedback)==null?void 0:S[k])&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:(E=n.specificFeedback[k])==null?void 0:E.message})]},k)})})]})]}),d.jsxs("div",{className:"p-6 rounded-lg border border-blue-200",style:{backgroundColor:"#eff6ff"},children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(DI,{className:"w-5 h-5 text-blue-600"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Public Review"})]}),d.jsx("p",{className:"text-sm text-blue-700 mb-6",children:"This section will be visible to the public. Use the preview mode above to see how it will appear!"}),d.jsxs("div",{className:"mb-6",children:[d.jsx(ht,{htmlFor:"overallRating",className:"block text-sm font-medium text-gray-700 mb-2",children:"Overall Rating *"}),d.jsx(Kd,{name:"overallRating",control:t,render:({field:k})=>d.jsx(MWe,{value:k.value,onChange:k.onChange})}),n.overallRating&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.overallRating.message})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx(ht,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Story Highlights"}),d.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Select what stood out most (optional)"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(k=>{var N;const S=k.icon;return d.jsxs("button",{type:"button",onClick:()=>{const E=i("highlights")||[],T=E.includes(k.id)?E.filter(P=>P!==k.id):[...E,k.id];s("highlights",T,{shouldValidate:!0})},className:`flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium transition-colors ${(N=i("highlights"))!=null&&N.includes(k.id)?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[d.jsx(S,{className:"w-4 h-4"}),k.label]},k.id)})}),n.highlights&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.highlights.message})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(ht,{htmlFor:"publicHeadline",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Review Headline *"}),d.jsx(Tn,{id:"publicHeadline",type:"text",...r("publicHeadline"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 'A captivating journey through...' (keep spoiler-free)"}),n.publicHeadline&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.publicHeadline.message})]}),d.jsxs("div",{children:[d.jsx(ht,{htmlFor:"quickTake",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Quick Take (1-2 sentences) *"}),d.jsx(Wi,{id:"quickTake",...r("quickTake"),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief spoiler-free summary of your thoughts..."}),n.quickTake&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.quickTake.message})]}),d.jsxs("div",{children:[d.jsx(ht,{htmlFor:"publicReview",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Public Review Text *"}),d.jsx(Wi,{id:"publicReview",...r("publicReview"),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your detailed review without spoilers. Focus on writing quality, emotional impact, and general impressions..."}),n.publicReview&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.publicReview.message})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(Kd,{name:"allowSpoilers",control:t,render:({field:k})=>d.jsx(IJ,{id:"allowSpoilers",checked:k.value,onCheckedChange:k.onChange,className:"rounded border-gray-300 text-red-500 focus:ring-red-500"})}),d.jsx(ht,{htmlFor:"allowSpoilers",className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Include spoiler content for post-publication review"})]}),u&&d.jsxs("div",{children:[d.jsx(ht,{htmlFor:"spoilerContent",className:"block text-sm font-medium text-red-700 dark:text-red-200 mb-1",children:"Spoiler Content (Post-Publication Only)"}),d.jsx(Wi,{id:"spoilerContent",...r("spoilerContent"),rows:4,className:"w-full px-3 py-2 border border-red-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Content that includes spoilers - plot details, twists, character fates, etc. This will only be visible after publication with spoiler warnings."}),n.spoilerContent&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.spoilerContent.message})]})]})]})]}),d.jsxs("div",{className:"p-6 rounded-lg border border-green-200 col-span-2",style:{backgroundColor:"#f0fff4"},children:[" ",d.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Review Preview - ",o==="pre-publication"?"Pre-Publication":"Post-Publication"," Mode"]}),h>0||p||v||m?d.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[h>0&&d.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[[1,2,3,4,5].map(k=>d.jsx(dg,{className:`w-5 h-5 ${k<=h?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},k)),d.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[h,"/5"]})]}),p&&d.jsx("h4",{className:"font-semibold text-lg text-gray-800 mb-2",children:p}),f.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:f.map(k=>{const N=x.find(S=>S.id===k);return d.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs",children:N==null?void 0:N.label},k)})}),v&&d.jsxs("p",{className:"text-gray-700 mb-3 italic",children:['"',v,'"']}),m&&d.jsx("p",{className:"text-gray-700 mb-3",children:m}),u&&b&&j(b,"main")]}):d.jsx("p",{className:"text-gray-500 italic",children:"Fill out the form above to see your review preview..."})]}),d.jsxs("div",{className:"text-center col-span-2",children:[" ",d.jsxs(Ke,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[d.jsx(Hue,{className:"w-5 h-5"}),"Submit Beta Reader Feedback"]})]})]})]})},FWe=()=>d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Submit Your Feedback"}),d.jsx($We,{})]}),E$=({children:e})=>{const{user:t,isLoading:r}=IF();return r?y.jsx("div",{children:"Loading..."}):t?y.jsx(y.Fragment,{children:e}):y.jsx(eF,{to:"/login",replace:!0})},zWe=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[s,i]=g.useState(null),[o,a]=g.useState(null),[l,c]=g.useState(!1);g.useEffect(()=>{(async()=>{n(!0);const{data:m,error:b}=await supabase.from("beta_applications").select("*");b?(console.error("Error fetching beta applications:",b),i(b.message)):t(m||[]),n(!1)})()},[]);const u=async(v,m,b)=>{const{error:x}=await supabase.from("beta_applications").update({status:m,admin_notes:b}).eq("id",v);if(x){console.error("Error updating application status:",x),alert("Failed to update application status.");return}const{data:w,error:_}=await supabase.from("beta_applications").select("user_id").eq("id",v).single();if(_||!w){console.error("Error fetching application user_id:",_),alert("Failed to fetch application user for profile update.");return}const j=m==="approved"?"approved":"rejected",{error:k}=await supabase.from("profiles").update({beta_reader_status:j}).eq("id",w.user_id);if(k){console.error("Error updating user profile beta_reader_status:",k),alert("Failed to update user's beta reader status in profile.");return}t(N=>N.map(S=>S.id===v?{...S,status:m,admin_notes:b}:S)),alert(`Application ${m} and user profile updated successfully!`)},h=v=>{a(v),c(!0)},f=()=>{a(null),c(!1)},p=async(v,m)=>{const{error:b}=await supabase.from("beta_applications").update({admin_notes:m}).eq("id",v);b?(console.error("Error updating admin notes:",b),alert("Failed to update admin notes.")):(t(x=>x.map(w=>w.id===v?{...w,admin_notes:m}:w)),o&&o.id===v&&a(x=>x?{...x,admin_notes:m}:null),alert("Admin notes updated successfully!"))};return r?y.jsx("div",{className:"text-gray-100",children:"Loading applications..."}):s?y.jsxs("div",{className:"text-red-400",children:["Error: ",s]}):y.jsxs("div",{className:"admin-beta-applications-manager",children:[y.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"Manage Beta Applications"}),e.length===0?y.jsx("p",{className:"text-gray-400",children:"No beta applications submitted yet."}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(v=>y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:v.full_name}),y.jsx("p",{className:"text-gray-400 text-sm",children:v.email}),y.jsxs("p",{className:"text-gray-400 text-sm",children:["Status: ",y.jsx("span",{className:`font-medium ${v.status==="pending"?"text-yellow-400":v.status==="approved"?"text-green-400":"text-red-400"}`,children:v.status.toUpperCase()})]}),y.jsxs("p",{className:"text-gray-400 text-sm",children:["Composite Score: ",v.composite_score,"/100"]}),y.jsxs("div",{className:"mt-4 space-y-2",children:[y.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 1 Score: ",v.stage1_raw_score,"/100"]}),y.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 2 Score: ",v.stage2_raw_score,"/60"]}),y.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 3 Score: ",v.stage3_raw_score,"/40"]}),y.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 4 Score: ",v.stage4_raw_score,"/60"]})]}),v.admin_notes&&y.jsxs("div",{className:"mt-4 p-3 bg-gray-700/50 rounded-lg text-gray-300 text-sm",children:[y.jsx("strong",{children:"Admin Notes:"})," ",v.admin_notes]}),y.jsxs("div",{className:"mt-6 flex space-x-3",children:[v.status==="pending"&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>u(v.id,"approved",prompt("Add admin notes for approval:")||""),className:"px-4 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Approve"}),y.jsx("button",{onClick:()=>u(v.id,"denied",prompt("Add admin notes for denial:")||""),className:"px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-sm font-medium",children:"Deny"})]}),y.jsx("button",{onClick:()=>h(v),className:"px-4 py-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors text-sm font-medium",children:"View Details"})]})]},v.id))}),l&&o&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-gray-800/90 rounded-lg p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-gray-700 relative",children:[y.jsx("button",{onClick:f,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:"×"}),y.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["Application Details: ",o.full_name]}),y.jsxs("div",{className:"space-y-4 text-gray-300",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Applicant Information"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Email:"})," ",o.email]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Time Zone:"})," ",o.time_zone]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Country:"})," ",o.country||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Goodreads:"})," ",o.goodreads||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Applied On:"})," ",new Date(o.created_at).toLocaleString()]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Current Status:"})," ",o.status.toUpperCase()]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Composite Score:"})," ",o.composite_score,"/100"]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Admin Notes"}),y.jsx("textarea",{className:"w-full p-2 rounded bg-gray-700 border border-gray-600 text-white",rows:4,value:o.admin_notes||"",onChange:v=>a(m=>m?{...m,admin_notes:v.target.value}:null)}),y.jsx("button",{onClick:()=>p(o.id,o.admin_notes||""),className:"mt-2 px-4 py-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors text-sm font-medium",children:"Save Notes"})]}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 1: Application Form (Score: ",o.stage1_raw_score,"/100)"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Beta Commitment:"})," ",o.beta_commitment]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Hours Per Week:"})," ",o.hours_per_week]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Portal Use:"})," ",o.portal_use]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Recent Reads:"})," ",o.recent_reads||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Interest Statement:"})," ",o.interest_statement]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Prior Beta Experience:"})," ",o.prior_beta||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Feedback Philosophy:"})," ",o.feedback_philosophy]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Track Record:"})," ",o.track_record||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Communication:"})," ",o.communication]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Devices:"})," ",o.devices.join(", ")||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Access Needs:"})," ",o.access_needs||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Demographics:"})," ",o.demographics||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passed Stage 1:"})," ",o.stage1_passed?"Yes":"No"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Auto Fail:"})," ",o.stage1_auto_fail?"Yes":"No"]})]}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 2: Comprehension Test (Score: ",o.stage2_raw_score,"/60)"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Q1 Answer:"})," ",o.q1||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Q2 Answer:"})," ",o.q2||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Clarity Feedback:"})," ",o.clarity_feedback||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Pacing Analysis:"})," ",o.pacing_analysis||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Taste Alignment:"})," ",o.taste_alignment||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passed Stage 2:"})," ",o.stage2_passed?"Yes":"No"]})]}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 3: Calibration Test (Score: ",o.stage3_raw_score,"/40)"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Worse Passage:"})," ",o.worse_passage||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passage A Analysis:"})," ",o.passage_a_analysis||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passage B Analysis:"})," ",o.passage_b_analysis||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Priority Fix:"})," ",o.priority_fix||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passed Stage 3:"})," ",o.stage3_passed?"Yes":"No"]})]}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 4: Timed Trial (Score: ",o.stage4_raw_score,"/60)"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Overall Assessment:"})," ",o.overall_assessment||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Chapter Summary:"})," ",o.chapter_summary||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passed Stage 4:"})," ",o.stage4_passed?"Yes":"No"]})]}),y.jsxs("div",{className:"mt-6",children:[y.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Change Application Status"}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsx("button",{onClick:()=>u(o.id,"approved",prompt("Add admin notes for approval:")||o.admin_notes||""),className:"px-4 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Approve"}),y.jsx("button",{onClick:()=>u(o.id,"denied",prompt("Add admin notes for denial:")||o.admin_notes||""),className:"px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-sm font-medium",children:"Deny"})]})]})]})]})})]})},UWe="_timeline_1x8m9_1",BWe="_milestone_1x8m9_20",qWe="_dot_1x8m9_57",VWe="_content_1x8m9_76",WWe="_date_1x8m9_88",KWe="_expandedContent_1x8m9_108",HWe="_detailsText_1x8m9_114",ZWe="_miniTimeline_1x8m9_120",GWe="_miniMilestone_1x8m9_126",YWe="_miniDot_1x8m9_131",JWe="_miniContent_1x8m9_141",XWe="_miniDate_1x8m9_145",Js={timeline:UWe,milestone:BWe,dot:qWe,content:VWe,date:WWe,expandedContent:KWe,detailsText:HWe,miniTimeline:ZWe,miniMilestone:GWe,miniDot:YWe,miniContent:JWe,miniDate:XWe},Bk={};var QWe={};const C$=typeof window<"u",FJ="https://opukvvmumyegtkukqint.supabase.co",zJ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",FJ);console.log("DEBUG: supabaseAnonKey (raw):",zJ);((Bk==null?void 0:Bk.VITE_DEBUG)==="true"||QWe.VITE_DEBUG==="true")&&(console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set"));let UJ;try{UJ=AF(FJ,zJ,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:C$?window.localStorage:void 0}});const e=typeof process<"u"&&!1}catch(e){throw console.error("Error initializing Supabase client:",e),e}const eKe=async()=>{const{data:e,error:t}=await supabase.from("timeline_events").select(`
      *,
      timeline_nested_events (
        id,
        date,
        title,
        description,
        "order"
      )
    `).eq("is_published",!0).order("order",{ascending:!0});return t?(console.error("Error fetching timeline events:",t),[]):e},tKe=({date:e,title:t,description:r,details:n,nested_events:s=[],background_image:i})=>{const[o,a]=g.useState(!1),l=()=>{a(!o)},c=i?{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${i})`,backgroundSize:"cover",backgroundPosition:"center",color:"white",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}:{};return y.jsxs("div",{className:Js.milestone,style:c,children:[y.jsx("div",{className:Js.dot}),y.jsxs("div",{className:Js.content,onClick:l,children:[y.jsx("span",{className:Js.date,children:e}),y.jsx("h3",{children:t}),y.jsx("p",{children:r}),o&&y.jsxs("div",{className:Js.expandedContent,children:[n&&y.jsx("p",{className:Js.detailsText,children:n}),s&&s.length>0&&y.jsx("div",{className:Js.miniTimeline,children:s.map((u,h)=>y.jsxs("div",{className:Js.miniMilestone,children:[y.jsx("div",{className:Js.miniDot}),y.jsxs("div",{className:Js.miniContent,children:[y.jsx("span",{className:Js.miniDate,children:u.date}),y.jsx("h4",{children:u.title}),y.jsx("p",{children:u.description})]})]},h))})]})]})]})},rKe=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[s,i]=g.useState(null);return g.useEffect(()=>{(async()=>{try{n(!0);const a=await eKe();t(a)}catch(a){console.error("Failed to load timeline events:",a),i("Failed to load timeline. Please try again later.")}finally{n(!1)}})()},[]),r?y.jsx("div",{className:"flex justify-center items-center h-screen",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s?y.jsx("div",{className:"container mx-auto p-4",children:y.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Error: "}),y.jsx("span",{className:"block sm:inline",children:s})]})}):e.length===0?y.jsx("div",{className:"container mx-auto p-4",children:y.jsxs("div",{className:"text-center py-12",children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Timeline Events Found"}),y.jsx("p",{className:"text-gray-600",children:"Check back later for updates to the timeline."})]})}):y.jsx("section",{className:`${Js.timeline} py-12`,children:y.jsxs("div",{className:"container mx-auto px-4",children:[y.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"Zoroastrian Timeline"}),e.map(o=>y.jsx(tKe,{date:o.date,title:o.title,description:o.description,details:o.details,nested_events:o.nested_events,background_image:o.background_image},o.id))]})})},nKe=()=>{var j,k,N,S;const[e,t]=g.useState(1),[r,n]=g.useState({}),[s,i]=g.useState(1),[o,a]=g.useState(48*60*60),l=[{label:"Application"},{label:"Comprehension"},{label:"Calibration"},{label:"Trial Task"}],c=({state:E})=>{const T=E==="done"?"#10B981":E==="current"?"#60A5FA":"#6B7280",P=E==="upcoming"?"#9CA3AF":"#E5E7EB";return y.jsxs("svg",{viewBox:"0 0 64 40",width:"36",height:"24",className:`mountain-icon ${E}`,"aria-hidden":!0,children:[y.jsx("path",{d:"M2 38 L20 12 L28 22 L40 4 L62 38 Z",fill:T,stroke:T,strokeWidth:"1.5"}),y.jsx("path",{d:"M20 12 L24 18 L16 18 Z",fill:P}),y.jsx("path",{d:"M40 4 L44 12 L36 12 Z",fill:P})]})},u=({done:E})=>y.jsx("div",{className:`connector ${E?"done":""}`}),h=()=>y.jsxs("div",{className:"mountain-stepper",children:[y.jsx(u,{done:e>0}),l.map((E,T)=>{const P=T+1,O=P<e?"done":P===e?"current":"upcoming";return y.jsxs(ee.Fragment,{children:[y.jsxs("div",{className:"mountain-step-container",onClick:()=>f(),children:[y.jsx(c,{state:O}),y.jsx("span",{className:`mountain-label ${O}`,children:E.label})]}),y.jsx(u,{done:P<e})]},E.label)})]}),f=E=>{t(6)},p=(E,T,P,O)=>{const R=document.getElementById(E),I=document.getElementById(T);if(R&&I){const M=R.value.trim().split(/\s+/).filter(z=>z.length>0).length;I.textContent=`${M}/${O} words`,I.className="word-count",M<P?I.classList.add("error"):M>O*.9&&I.classList.add("warning")}};g.useEffect(()=>{p("interestStatement","interestWordCount",150,250),p("taste_response","tasteWordCount",0,100),p("overall_assessment","assessmentWordCount",200,300)},[e]),g.useEffect(()=>{let E;return e===4&&(E=setInterval(()=>{a(T=>T<=0?(clearInterval(E),alert("Time expired! Your submission may be marked as late."),0):T-1)},1e3)),()=>clearInterval(E)},[e]);const v=E=>{const T=Math.floor(E/3600),P=Math.floor(E%3600/60),O=E%60;return`${T.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`},m=E=>{E.preventDefault();const T=new FormData(E.target),P=Object.fromEntries(T.entries()),O=Array.from(document.querySelectorAll('input[name="devices"]:checked')).map(ne=>ne.value);P.devices=O;let R=0,I=!1;R+={weekly_deadlines:10,commit_with_extensions:6,prefer_flexible:3,no_commitment:0}[P.betaCommitment]||0,P.betaCommitment==="no_commitment"&&(I=!0),R+={"5_plus":5,"3_4":3,under_3:0}[P.hoursPerWeek]||0,R+={yes_comfortable:5,yes_unsure:2,no:0}[P.portalUse]||0,P.portalUse==="no"&&(I=!0),R=Math.min(R,20);let q=0;P.recentReads.length>0&&P.interestStatement.length>0&&(q=10),R+=q;let Y=0;P.priorBeta.length>0&&P.feedbackPhilosophy.length>0&&(Y=10),R+=Y;let L=0;P.trackRecord.length>0&&P.communication.length>0&&(L=10),R+=L;let K=0;const G=O.length;G===3?K+=6:G===2?K+=4:G===1&&(K+=2),K=Math.min(K,20),R+=K;let H=R>=50&&!I;n(ne=>({...ne,stage1:{...P,rawScore:R,passed:H,autoFail:I}})),f()},b=E=>{E.preventDefault();const T=new FormData(E.target),P=Object.fromEntries(T.entries());let O=0;const R=38;P.q1==="b"&&(O+=20),P.clarity_feedback.length>0&&P.pacing_feedback.length>0&&(O+=15),P.taste_response.length>0&&(O+=5);let I=O>=R;n(M=>({...M,stage2:{...P,rawScore:O,passed:I}})),f()},x=E=>{E.preventDefault();const T=new FormData(E.target),P=Object.fromEntries(T.entries());let O=0;const R=26;P.worse_passage==="a"&&(O+=15),P.passage_a_analysis.length>0&&P.passage_b_analysis.length>0&&P.priority_fix.length>0&&(O+=5);let I=O>=R;n(M=>({...M,stage3:{...P,rawScore:O,passed:I}})),f()},w=async E=>{var L;E.preventDefault();const T=new FormData(E.target),P=Object.fromEntries(T.entries());let O=0;const R=40;o>0?O+=10:O+=0;const I=document.querySelectorAll(".inline-comment");P.overall_assessment.length>0&&P.chapter_summary.length>0&&I.length>=8?O+=10:P.overall_assessment.length>0&&P.chapter_summary.length>0&&I.length>=4&&(O+=5),I.length>0&&(O+=10),P.chapter_summary.length>0&&(O+=10);let M=O>=R;n(K=>({...K,stage4:{...P,rawScore:O,passed:M}}));const z={stage1:.2,stage2:.25,stage3:.2,stage4:.35},W=r.stage1.rawScore/100*(z.stage1*100)+r.stage2.rawScore/60*(z.stage2*100)+r.stage3.rawScore/40*(z.stage3*100)+r.stage4.rawScore/60*(z.stage4*100);n(K=>({...K,compositeScore:Math.round(W*10)/10})),t(6);const q={user_id:(L=(await supabase.auth.getUser()).data.user)==null?void 0:L.id,full_name:r.stage1.fullName,email:r.stage1.email,time_zone:r.stage1.timeZone,country:r.stage1.country,goodreads:r.stage1.goodreads,beta_commitment:r.stage1.betaCommitment,hours_per_week:r.stage1.hoursPerWeek,portal_use:r.stage1.portalUse,recent_reads:r.stage1.recentReads,interest_statement:r.stage1.interestStatement,prior_beta:r.stage1.priorBeta,feedback_philosophy:r.stage1.feedbackPhilosophy,track_record:r.stage1.trackRecord,communication:r.stage1.communication,devices:r.stage1.devices,access_needs:r.stage1.accessNeeds,demographics:r.stage1.demographics,stage1_raw_score:r.stage1.rawScore,stage1_passed:r.stage1.passed,stage1_auto_fail:r.stage1.autoFail,q1:r.stage2.q1,q2:r.stage2.q2,clarity_feedback:r.stage2.clarity_feedback,pacing_analysis:r.stage2.pacing_feedback,taste_alignment:r.stage2.taste_response,stage2_raw_score:r.stage2.rawScore,stage2_passed:r.stage2.passed,worse_passage:r.stage3.worse_passage,passage_a_analysis:r.stage3.passage_a_analysis,passage_b_analysis:r.stage3.passage_b_analysis,priority_fix:r.stage3.priority_fix,stage3_raw_score:r.stage3.rawScore,stage3_passed:r.stage3.passed,overall_assessment:r.stage4.overall_assessment,chapter_summary:r.stage4.chapter_summary,stage4_raw_score:r.stage4.rawScore,stage4_passed:r.stage4.passed,composite_score:r.compositeScore},{error:Y}=await supabase.from("beta_applications").insert([q]);Y?(console.error("Error saving beta application:",Y),alert("There was an error saving your application. Please try again.")):console.log("Beta application saved successfully!")},_=()=>{i(E=>E+1)};return y.jsxs("div",{className:"beta-app-container",children:[y.jsxs("div",{className:"beta-app-header",children:[y.jsx("h1",{children:"Zangar/Spandam Beta Reader Program"}),y.jsx("p",{children:"Join our exclusive beta reading community for epic sci-fi/fantasy"})]}),h(),e===1&&y.jsx("div",{id:"stage1",className:"stage-content",children:y.jsxs("form",{onSubmit:m,children:[y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Contact Information"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"fullName",children:"Full Name *"}),y.jsx("input",{type:"text",id:"fullName",name:"fullName",className:"form-control",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",children:"Email Address *"}),y.jsx("input",{type:"email",id:"email",name:"email",className:"form-control",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"timeZone",children:"Time Zone *"}),y.jsxs("select",{id:"timeZone",name:"timeZone",className:"form-control",required:!0,children:[y.jsx("option",{value:"",children:"Select your time zone"}),y.jsx("option",{value:"America/New_York",children:"Eastern Time (UTC-5/-4)"}),y.jsx("option",{value:"America/Chicago",children:"Central Time (UTC-6/-5)"}),y.jsx("option",{value:"America/Denver",children:"Mountain Time (UTC-7/-6)"}),y.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (UTC-8/-7)"}),y.jsx("option",{value:"Europe/London",children:"GMT/BST (UTC+0/+1)"}),y.jsx("option",{value:"Europe/Paris",children:"CET/CEST (UTC+1/+2)"}),y.jsx("option",{value:"Asia/Tokyo",children:"JST (UTC+9)"}),y.jsx("option",{value:"Australia/Sydney",children:"AEST/AEDT (UTC+10/+11)"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"country",children:"Country"}),y.jsx("input",{type:"text",id:"country",name:"country",className:"form-control"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"goodreads",children:"Goodreads Profile (optional)"}),y.jsx("input",{type:"text",id:"goodreads",name:"goodreads",className:"form-control",placeholder:"https://goodreads.com/user/..."})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Commitment & Availability (Max 20 pts)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"betaCommitment",children:"Beta Window Commitment (6-8 weeks) *"}),y.jsxs("select",{id:"betaCommitment",name:"betaCommitment",className:"form-control",required:!0,children:[y.jsx("option",{value:"",children:"Select your commitment level"}),y.jsx("option",{value:"weekly_deadlines",children:"I can commit to weekly deadlines (10 pts)"}),y.jsx("option",{value:"commit_with_extensions",children:"I can commit but may need 1+ extensions (6 pts)"}),y.jsx("option",{value:"prefer_flexible",children:"I prefer flexible deadlines (3 pts)"}),y.jsx("option",{value:"no_commitment",children:"I cannot commit to deadlines (0 pts)"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"hoursPerWeek",children:"Time Budget per Week *"}),y.jsxs("select",{id:"hoursPerWeek",name:"hoursPerWeek",className:"form-control",required:!0,children:[y.jsx("option",{value:"",children:"Select your time availability"}),y.jsx("option",{value:"5_plus",children:"5+ hours per week (5 pts)"}),y.jsx("option",{value:"3_4",children:"3-4 hours per week (3 pts)"}),y.jsx("option",{value:"under_3",children:"Less than 3 hours (0 pts)"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"portalUse",children:"Website Portal Usage *"}),y.jsxs("select",{id:"portalUse",name:"portalUse",className:"form-control",required:!0,children:[y.jsx("option",{value:"",children:"Select your comfort level"}),y.jsx("option",{value:"yes_comfortable",children:"Yes, I'm comfortable using web tools (5 pts)"}),y.jsx("option",{value:"yes_unsure",children:"Yes, but I'm unsure about tech (2 pts)"}),y.jsx("option",{value:"no",children:"No, I prefer other methods (0 pts)"})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Genre/Series Alignment (Max 20 pts)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"recentReads",children:"Recent Relevant Reads"}),y.jsx("textarea",{id:"recentReads",name:"recentReads",className:"form-control",placeholder:"List 3-5 books you've read in the last 12 months that relate to epic sci-fi/fantasy, Persian/Zoroastrian themes, or big-idea worldbuilding..."})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"interestStatement",children:"Why This Series? (150-250 words) *"}),y.jsx("textarea",{id:"interestStatement",name:"interestStatement",className:"form-control",placeholder:"What specifically interests you about the Zangar/Spandam series? Mention themes like empire vs. kinship, oath/fate dynamics, cliffside megastructures, etc.",required:!0}),y.jsx("div",{className:"word-count",id:"interestWordCount",children:"0/250 words"})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Feedback Experience & Philosophy (Max 20 pts)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"priorBeta",children:"Prior Beta/Critique Experience"}),y.jsx("textarea",{id:"priorBeta",name:"priorBeta",className:"form-control",placeholder:"Describe your experience with beta reading, manuscript critiques, or writing groups. Include specific examples and outcomes..."})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"feedbackPhilosophy",children:"Feedback Philosophy *"}),y.jsx("textarea",{id:"feedbackPhilosophy",name:"feedbackPhilosophy",className:"form-control",placeholder:"How do you approach giving feedback? How do you balance honesty with kindness? Describe your method for providing actionable, specific suggestions...",required:!0})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Reliability Signals (Max 20 pts)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"trackRecord",children:"Deadline Track Record"}),y.jsx("textarea",{id:"trackRecord",name:"trackRecord",className:"form-control",placeholder:"Provide examples of meeting deadlines in work, volunteer, or creative contexts. Include any verifiable references or public profiles..."})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"communication",children:"Communication Style *"}),y.jsx("textarea",{id:"communication",name:"communication",className:"form-control",placeholder:"How do you handle check-ins and communication? What would you do if you encountered a blocker or needed to request an extension?",required:!0})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Diversity & Coverage (Max 20 pts)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Reading Devices/Platforms *"}),y.jsxs("div",{className:"checkbox-group",children:[y.jsxs("div",{className:"checkbox-item",children:[y.jsx("input",{type:"checkbox",id:"desktop",name:"devices",value:"desktop"}),y.jsx("label",{htmlFor:"desktop",children:"Desktop/Laptop"})]}),y.jsxs("div",{className:"checkbox-item",children:[y.jsx("input",{type:"checkbox",id:"mobile",name:"devices",value:"mobile"}),y.jsx("label",{htmlFor:"mobile",children:"Mobile/Tablet"})]}),y.jsxs("div",{className:"checkbox-item",children:[y.jsx("input",{type:"checkbox",id:"ereader",name:"devices",value:"ereader"}),y.jsx("label",{htmlFor:"ereader",children:"E-reader (Kindle, etc.)"})]})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"accessNeeds",children:"Access Needs & Unique Perspectives"}),y.jsx("textarea",{id:"accessNeeds",name:"accessNeeds",className:"form-control",placeholder:"Do you have any access needs, cultural backgrounds (especially Persian/Middle Eastern), military experience, or other perspectives that would add value to our beta program?"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"demographics",children:"Additional Diversity Information"}),y.jsx("textarea",{id:"demographics",name:"demographics",className:"form-control",placeholder:"Any other demographic or experience diversity you'd like to share that would improve our beta reader representation?"})]})]}),y.jsxs("div",{className:"navigation",children:[y.jsx("div",{}),y.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Application"})]})]})}),e===6&&y.jsx("div",{id:"stage2",className:"stage-content",children:y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Stage 2: Reading Comprehension & Taste Fit"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Instructions:"})," Read the excerpt below and answer the questions. This tests your ability to parse complex worldbuilding and provide specific feedback."]}),y.jsxs("div",{className:"excerpt-container",children:[y.jsx("h4",{children:"Sample Excerpt (800 words)"}),y.jsx("p",{className:"excerpt-text",children:"The Vənāsō winds carried more than salt and storm-promise tonight. Hooran felt the weight of unspoken oaths pressing against her temples as she stood upon the Cliffside Sanctum, watching the fires of Spandam flicker like dying stars across the chasm. Each flame represented a choice—empire or kinship, the Saoshyant's path or the old ways of her mothers."}),y.jsx("p",{className:"excerpt-text",children:'"The Zangar expect answers by dawn," Cyrus said, his voice cutting through the wind-song. His ceremonial armor caught moonlight like captured ice, each plate inscribed with binding-runes that pulsed faintly blue. "The Great Assembly grows restless."'}),y.jsx("p",{className:"excerpt-text",children:"Hooran's fingers traced the oath-scar on her palm—the mark that bound her to choices not yet made. Below, the megastructure of Spandam stretched into darkness, its bio-luminescent veins carrying information like blood through stone arteries. Somewhere in those depths, her brother Darius worked the Deep Forges, unaware that his sister's decision would reshape not just their family's fate, but the balance between the Seven Domains."}),y.jsx("p",{className:"excerpt-text",children:`"The winds know," she whispered, tasting copper and ozone. "They've always known."`})]}),y.jsxs("form",{onSubmit:b,children:[y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Question 1:"})," What is the primary source of tension in this scene?"]}),y.jsxs("select",{className:"form-control",name:"q1",required:!0,children:[y.jsx("option",{value:"",children:"Choose the best answer"}),y.jsx("option",{value:"a",children:"Weather conditions threatening the characters"}),y.jsx("option",{value:"b",children:"Hooran must choose between competing loyalties by dawn"}),y.jsx("option",{value:"c",children:"Cyrus is pressuring Hooran to attack Spandam"}),y.jsx("option",{value:"d",children:"The bio-luminescent technology is failing"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Question 2:"}),' What role do the "Vənāsō winds" serve in this passage?']}),y.jsx("textarea",{className:"form-control",name:"q2",placeholder:"Explain in 2-3 sentences...",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Feedback Task:"})," Identify one clarity issue and suggest a specific improvement"]}),y.jsx("textarea",{className:"form-control",name:"clarity_feedback",placeholder:"Point to specific lines and explain what's unclear, then suggest how to fix it...",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Pacing Analysis:"})," How does the pacing work in this excerpt?"]}),y.jsx("textarea",{className:"form-control",name:"pacing_feedback",placeholder:"Analyze the rhythm and flow, citing specific examples...",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Taste Alignment (100 words):"})," What about this excerpt most engages or loses you?"]}),y.jsx("textarea",{id:"taste_response",className:"form-control",name:"taste_response",placeholder:"Be specific about what works or doesn't work for you as a reader...",required:!0}),y.jsx("div",{className:"word-count",id:"tasteWordCount",children:"0/100 words"})]}),y.jsxs("div",{className:"navigation",children:[y.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Application"}),y.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Stage 2"})]})]})]})}),e===3&&y.jsx("div",{id:"stage3",className:"stage-content",children:y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Stage 3: Calibration Test"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Instructions:"})," Compare these two passages and rank which needs more revision. Explain your reasoning."]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"25px",margin:"25px 0"},children:[y.jsxs("div",{className:"excerpt-container",style:{background:"linear-gradient(145deg, #f0f8f0 0%, #e8f4e8 100%)",borderColor:"#90ee90"},children:[y.jsx("h4",{style:{color:"#228b22"},children:"Passage A"}),y.jsx("p",{className:"excerpt-text",children:"The battle raged across the crystalline plains. Warriors fought with determination. Magic crackled through the air as spells were cast by the mages. It was a significant moment in the war. Many would die. The outcome would affect everyone. The protagonist felt conflicted about their role in the violence."})]}),y.jsxs("div",{className:"excerpt-container",style:{background:"linear-gradient(145deg, #fff8dc 0%, #f5f5dc 100%)",borderColor:"#daa520"},children:[y.jsx("h4",{style:{color:"#b8860b"},children:"Passage B"}),y.jsx("p",{className:"excerpt-text",children:"Kara's blade sang against Varek's shield, the impact reverberating through her bones. Around them, the Shattered Fields erupted in cascades of amber light—each spell-strike from the War-Mages above sending hairline fractures racing through the crystalline ground. She could taste copper and ozone, hear the wet snap of breaking bone somewhere to her left. This was the moment Sehran had warned her about: when ideology met steel, and someone had to choose what they were willing to break."})]})]}),y.jsxs("form",{onSubmit:x,children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:y.jsx("strong",{children:"Which passage needs more revision?"})}),y.jsxs("select",{className:"form-control",name:"worse_passage",required:!0,children:[y.jsx("option",{value:"",children:"Choose one"}),y.jsx("option",{value:"a",children:"Passage A"}),y.jsx("option",{value:"b",children:"Passage B"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Analysis of Passage A:"})," Identify strengths and weaknesses"]}),y.jsx("textarea",{className:"form-control",name:"passage_a_analysis",placeholder:"What works and what doesn't? Be specific...",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Analysis of Passage B:"})," Identify strengths and weaknesses"]}),y.jsx("textarea",{className:"form-control",name:"passage_b_analysis",placeholder:"What works and what doesn't? Be specific...",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Top Priority Fix:"})," What's the most important issue to address?"]}),y.jsx("textarea",{className:"form-control",name:"priority_fix",placeholder:"Choose the highest-impact problem and suggest a concrete solution...",required:!0})]}),y.jsxs("div",{className:"navigation",children:[y.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Stage 2"}),y.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Stage 3"})]})]})]})}),e===4&&y.jsx("div",{id:"stage4",className:"stage-content",children:y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Stage 4: Timed Trial Task"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Deadline:"})," You have 48 hours from now to complete this task."]}),y.jsxs("div",{id:"timer",style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a52)",color:"white",padding:"20px",borderRadius:"15px",textAlign:"center",margin:"20px 0",fontSize:"1.5em",fontWeight:"bold"},children:["Time Remaining: ",y.jsx("span",{id:"countdown",children:v(o)})]}),y.jsxs("div",{className:"excerpt-container",children:[y.jsx("h4",{children:"Chapter Excerpt (2,500 words - Sample)"}),y.jsx("p",{children:y.jsx("em",{children:"Read the full chapter and provide detailed feedback using the form below..."})}),y.jsx("div",{style:{height:"350px",overflowY:"auto",background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",padding:"20px",border:"1px solid #d4c5a9",fontStyle:"italic",lineHeight:"1.8",color:"#3c2415"},children:"[Full chapter content would be provided here - this is a placeholder showing the format. The actual implementation would include the complete text with line numbers for reference. Each paragraph would be numbered for easy reference in feedback.]"})]}),y.jsxs("form",{onSubmit:w,children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:y.jsx("strong",{children:"Overall Assessment (200-300 words):"})}),y.jsx("textarea",{id:"overall_assessment",className:"form-control",name:"overall_assessment",placeholder:"Provide a comprehensive overview focusing on the top 3 issues that need attention...",required:!0,style:{minHeight:"150px"}}),y.jsx("div",{className:"word-count",id:"assessmentWordCount",children:"0/300 words"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:y.jsx("strong",{children:"Inline Comments (minimum 8):"})}),y.jsx("div",{id:"inline-comments",children:Array.from({length:s}).map((E,T)=>y.jsxs("div",{className:"inline-comment",style:{background:"white",padding:"15px",borderRadius:"8px",marginBottom:"15px",borderLeft:"3px solid #667eea"},children:[y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"15px"},children:[y.jsxs("div",{children:[y.jsx("label",{children:"Line/Section Reference:"}),y.jsx("input",{type:"text",className:"form-control",name:`comment_ref_${T+1}`,placeholder:"e.g., Line 45, Paragraph 3"})]}),y.jsxs("div",{children:[y.jsx("label",{children:"Issue Type:"}),y.jsxs("select",{className:"form-control",name:`comment_type_${T+1}`,children:[y.jsx("option",{value:"",children:"Select type"}),y.jsx("option",{value:"clarity",children:"Clarity"}),y.jsx("option",{value:"pacing",children:"Pacing"}),y.jsx("option",{value:"continuity",children:"Continuity"}),y.jsx("option",{value:"voice",children:"Voice"}),y.jsx("option",{value:"logic",children:"Logic"}),y.jsx("option",{value:"worldbuilding",children:"Worldbuilding"}),y.jsx("option",{value:"stakes",children:"Stakes/Tension"})]})]})]}),y.jsxs("div",{style:{marginTop:"10px"},children:[y.jsx("label",{children:"Comment & Suggestion:"}),y.jsx("textarea",{className:"form-control",name:`comment_text_${T+1}`,placeholder:"Describe the issue and provide a specific suggestion for improvement..."})]}),T>0&&y.jsx("button",{type:"button",onClick:()=>i(P=>P-1),className:"btn btn-secondary",style:{marginTop:"10px",fontSize:"0.8em",padding:"8px 15px"},children:"Remove Comment"})]},T))}),y.jsx("button",{type:"button",onClick:_,className:"btn btn-secondary",style:{marginTop:"15px"},children:"Add Another Comment"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:y.jsx("strong",{children:"Chapter Summary & Recommendations:"})}),y.jsx("textarea",{className:"form-control",name:"chapter_summary",placeholder:"Summarize your overall thoughts and provide 3 key recommendations for improvement...",required:!0,style:{minHeight:"120px"}})]}),y.jsxs("div",{className:"navigation",children:[y.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Stage 3"}),y.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Final Stage"})]})]})]})}),e===5&&y.jsx("div",{id:"admin",className:"stage-content",children:y.jsxs("div",{className:"admin-panel",children:[y.jsx("h3",{className:"section-title",children:"Admin Panel - Beta Reader Applications"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[y.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[y.jsx("h4",{children:"Total Applications"}),y.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#8b4513"},children:"127"})]}),y.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[y.jsx("h4",{children:"Passed Stage 1"}),y.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#228b22"},children:"89"})]}),y.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[y.jsx("h4",{children:"Final Selections"}),y.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#8b4513"},children:"37"})]}),y.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[y.jsx("h4",{children:"Waitlist"}),y.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#b8860b"},children:"15"})]})]}),y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Report generated!"),children:"Generate Final Report"}),y.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Data exported!"),children:"Export Data"}),y.jsx("button",{className:"btn btn-secondary",onClick:()=>{window.confirm("Send selection emails to all applicants? This cannot be undone.")&&alert("Emails sent!")},children:"Send Selection Emails"})]}),y.jsxs("div",{className:"applicant-list",id:"applicantList",children:[y.jsxs("div",{className:"applicant-card",children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Sarah Chen"}),y.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"sarah.chen @email.com | GMT+8"})]}),y.jsx("span",{className:"status-badge status-passed",children:"Selected"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 1:"})," 87/100"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 2:"})," 52/60"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 3:"})," 34/40"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 4:"})," 55/60"]})]}),y.jsxs("div",{style:{background:"rgba(139, 69, 19, 0.1)",padding:"10px",borderLeft:"3px solid #8b4513"},children:[y.jsx("strong",{children:"Composite Score: 92.1"})," | Strengths: Genre expertise, reliable communication, mobile testing"]})]}),y.jsxs("div",{className:"applicant-card",children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Marcus Rodriguez"}),y.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"m.rodriguez @email.com | EST"})]}),y.jsx("span",{className:"status-badge status-pending",children:"Waitlist"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 1:"})," 79/100"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 2:"})," 48/60"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 3:"})," 31/40"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 4:"})," 48/60"]})]}),y.jsxs("div",{style:{background:"rgba(218, 165, 32, 0.1)",padding:"10px",borderLeft:"3px solid #daa520"},children:[y.jsx("strong",{children:"Composite Score: 83.7"})," | Strengths: Military background, Persian cultural knowledge"]})]}),y.jsxs("div",{className:"applicant-card",children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Jennifer Walsh"}),y.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"jen.walsh @email.com | GMT"})]}),y.jsx("span",{className:"status-badge status-failed",children:"Not Selected"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 1:"})," 71/100"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 2:"})," 33/60"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 3:"})," —"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 4:"})," —"]})]}),y.jsxs("div",{style:{background:"rgba(220, 20, 60, 0.1)",padding:"10px",borderLeft:"3px solid #dc143c"},children:[y.jsx("strong",{children:"Composite Score: 45.2"})," | Issues: Failed Stage 2 comprehension, generic feedback"]})]})]})]})}),"            ",e===6&&y.jsxs("div",{className:"score-display",children:["                    ",y.jsx("h2",{style:{marginBottom:"20px"},children:"Application Complete!"}),"                    ",y.jsxs("div",{className:"score-breakdown",children:["                        ",y.jsxs("div",{className:"score-item",children:["                            ",y.jsx("h4",{children:"Stage 1"}),"                            ",y.jsxs("p",{children:[((j=r.stage1)==null?void 0:j.rawScore)||0,"/100"]}),"                        "]}),"                        ",y.jsxs("div",{className:"score-item",children:["                            ",y.jsx("h4",{children:"Stage 2"}),"                            ",y.jsxs("p",{children:[((k=r.stage2)==null?void 0:k.rawScore)||0,"/60"]}),"                        "]}),"                        ",y.jsxs("div",{className:"score-item",children:["                            ",y.jsx("h4",{children:"Stage 3"}),"                            ",y.jsxs("p",{children:[((N=r.stage3)==null?void 0:N.rawScore)||0,"/40"]}),"                        "]}),"                        ",y.jsxs("div",{className:"score-item",children:["                            ",y.jsx("h4",{children:"Stage 4"}),"                            ",y.jsxs("p",{children:[((S=r.stage4)==null?void 0:S.rawScore)||0,"/60"]}),"                        "]}),"                    "]}),"                    ",y.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.3)"},children:["                        ",y.jsxs("h3",{children:["Final Composite Score: ",r.compositeScore||0,"/100"]}),"                        ",y.jsx("p",{style:{marginTop:"15px"},children:"Thank you for your application! We\\'ll be in touch within 1-2 weeks with our decision."}),"                    "]}),"                    ","                    ",y.jsxs("div",{className:"submitted-data",style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.3)"},children:["                        ",y.jsx("h3",{children:"Submitted Application Data for Review"}),"                        ","                        ",r.stage1&&y.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",y.jsx("h4",{children:"Stage 1: Application Form"}),"                                ",Object.entries(r.stage1).map(([E,T])=>y.jsxs("p",{children:[y.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                        ","                        ",r.stage2&&y.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",y.jsx("h4",{children:"Stage 2: Comprehension Test"}),"                                ",Object.entries(r.stage2).map(([E,T])=>y.jsxs("p",{children:[y.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                        ","                        ",r.stage3&&y.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",y.jsx("h4",{children:"Stage 3: Calibration Test"}),"                                ",Object.entries(r.stage3).map(([E,T])=>y.jsxs("p",{children:[y.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                        ","                        ",r.stage4&&y.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",y.jsx("h4",{children:"Stage 4: Timed Trial Task"}),"                                ",Object.entries(r.stage4).map(([E,T])=>y.jsxs("p",{children:[y.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                    "]}),"                "]})]})};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sKe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BJ=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iKe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oKe=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>g.createElement("svg",{ref:l,...iKe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:BJ("lucide",s),...a},[...o.map(([c,u])=>g.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=(e,t)=>{const r=g.forwardRef(({className:n,...s},i)=>g.createElement(oKe,{ref:i,iconNode:t,className:BJ(`lucide-${sKe(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=Qt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=Qt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=Qt("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aKe=Qt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lKe=Qt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cKe=Qt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uKe=Qt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=Qt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=Qt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dKe=Qt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=Qt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=Qt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hKe=Qt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fKe=Qt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pKe=Qt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mKe=Qt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gKe=Qt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=Qt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yKe=Qt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=Qt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vKe=Qt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=Qt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=Qt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bKe=Qt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xKe=({product:e,onCheckoutProduct:t})=>{const r=o=>{switch(o){case"single_issue":return"Single Issue";case"bundle":return"Bundle";case"chapter_pass":return"Chapter Pass";case"arc_pass":return"Arc Pass";default:return o}},n=o=>{switch(o){case"single_issue":return"bg-accent/20 text-accent";case"bundle":return"bg-secondary/20 text-secondary";case"chapter_pass":return"bg-primary/20 text-primary";case"arc_pass":return"bg-gradient-to-r from-primary/20 to-secondary/20 text-primary";default:return"bg-text-dark/20 text-text-dark"}},s=()=>{t&&e.prices&&e.prices.length>0&&t(e,e.prices[0])},i=o=>o?`$${(o.unit_amount/100).toFixed(2)}${o.interval?`/${o.interval}`:""}`:"Free";return y.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-2xl p-6 border border-border/30 hover:border-secondary/50 transition-all duration-300 group",children:[y.jsxs("div",{className:"relative w-full h-48 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-xl mb-4 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsx(HP,{className:"w-16 h-16 text-secondary/50"})}),y.jsx("div",{className:`absolute top-3 left-3 px-3 py-1 rounded-full text-xs font-medium ${n(e.product_type)}`,children:r(e.product_type)})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h3",{className:"text-xl font-heading text-text-light group-hover:text-secondary transition-colors",children:e.name}),e.description&&y.jsx("p",{className:"text-text-dark text-sm line-clamp-2",children:e.description}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"space-y-1",children:e.prices&&e.prices.length>0?e.prices.map((o,a)=>y.jsx("div",{className:"text-lg font-semibold text-text-light",children:i(o)},a)):y.jsx("div",{className:"text-lg font-semibold text-accent",children:"Free"})}),y.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(5)].map((o,a)=>y.jsx(KJ,{className:"w-4 h-4 text-secondary/30"},a)),y.jsx("span",{className:"text-text-dark text-sm ml-1",children:"(0)"})]})]}),y.jsxs("div",{className:"flex space-x-2 pt-2",children:[y.jsxs("button",{onClick:s,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-secondary hover:bg-secondary-dark text-background rounded-xl transition-colors",children:[y.jsx(vKe,{className:"w-4 h-4"}),y.jsx("span",{children:"Purchase"})]}),y.jsx("button",{className:"px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-xl transition-colors",children:y.jsx(VJ,{className:"w-4 h-4"})})]})]})]})},wKe=({product:e,onSuccess:t,onCancel:r})=>{const[n,s]=g.useState(!1),[i,o]=g.useState(null),[a,l]=g.useState(""),[c,u]=g.useState(""),[h,f]=g.useState(""),[p,v]=g.useState(""),[m,b]=g.useState(""),x=()=>`$${(e.price/100).toFixed(2)}`,w=async _=>{_.preventDefault(),s(!0),o(null);try{await new Promise(j=>setTimeout(j,2e3)),console.log("Processing payment for:",e),t()}catch{o("Payment failed. Please try again.")}finally{s(!1)}};return y.jsxs("div",{className:"bg-background rounded-2xl p-6 border border-border/30",children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsx("h3",{className:"text-2xl font-heading text-text-light",children:"Checkout"}),y.jsx("button",{onClick:r,className:"p-2 hover:bg-background-light/50 rounded-lg transition-colors",children:y.jsx(bKe,{className:"w-5 h-5 text-text-dark"})})]}),y.jsx("div",{className:"bg-background-light/30 rounded-xl p-4 mb-6 border border-border/20",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-lg font-medium text-text-light",children:e.name}),y.jsxs("p",{className:"text-text-dark text-sm",children:[e.is_subscription?"Subscription":"One-time purchase",e.interval&&` • Billed ${e.interval}ly`,e.trial_period_days&&` • ${e.trial_period_days} day trial`]})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("div",{className:"text-xl font-semibold text-secondary",children:[x(),e.interval&&y.jsxs("span",{className:"text-sm",children:["/",e.interval]})]}),e.trial_period_days&&y.jsx("div",{className:"text-xs text-accent",children:"Free trial included"})]})]})}),i&&y.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 mb-6 flex items-center space-x-3",children:[y.jsx(uKe,{className:"w-5 h-5 text-red-400"}),y.jsx("p",{className:"text-red-400",children:i})]}),y.jsxs("form",{onSubmit:w,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Email Address"}),y.jsx("input",{type:"email",value:a,onChange:_=>l(_.target.value),required:!0,className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"your.email@example.com"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Cardholder Name"}),y.jsx("input",{type:"text",value:m,onChange:_=>b(_.target.value),required:!0,className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"John Doe"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Card Number"}),y.jsx("input",{type:"text",value:c,onChange:_=>u(_.target.value),required:!0,maxLength:19,className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"1234 5678 9012 3456"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Expiry Date"}),y.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),required:!0,placeholder:"MM/YY",maxLength:5,className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"CVC"}),y.jsx("input",{type:"text",value:p,onChange:_=>v(_.target.value),required:!0,maxLength:4,placeholder:"123",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all"})]})]}),y.jsx("button",{type:"submit",disabled:n,className:"w-full flex items-center justify-center space-x-3 px-6 py-4 bg-secondary hover:bg-secondary-dark disabled:bg-text-dark/20 disabled:text-text-dark text-background rounded-xl transition-all font-medium mt-6",children:n?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"w-5 h-5 border-2 border-background/30 border-t-background rounded-full animate-spin"}),y.jsx("span",{children:"Processing..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(dKe,{className:"w-5 h-5"}),y.jsx("span",{children:e.trial_period_days?"Start Free Trial":`Pay ${x()}`})]})}),y.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-4 text-text-dark text-sm",children:[y.jsx(xE,{className:"w-4 h-4 text-accent"}),y.jsx("span",{children:"Secure payment powered by Stripe"})]})]}),y.jsx("div",{className:"mt-6 pt-4 border-t border-border/20",children:y.jsxs("p",{className:"text-xs text-text-dark text-center",children:["By completing this purchase, you agree to our"," ",y.jsx("a",{href:"/terms",className:"text-secondary hover:underline",children:"Terms of Service"})," ","and"," ",y.jsx("a",{href:"/privacy",className:"text-secondary hover:underline",children:"Privacy Policy"}),".",e.is_subscription&&y.jsx("span",{children:" Your subscription will auto-renew unless cancelled."})]})})]})},_Ke=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[s,i]=g.useState(""),[o,a]=g.useState("all"),[l,c]=g.useState("all"),[u,h]=g.useState([0,50]),[f,p]=g.useState("grid"),[v,m]=g.useState("newest"),[b,x]=g.useState(!1),[w,_]=g.useState(!1),[j,k]=g.useState(null),[N,S]=g.useState(null),E=g.useRef(null);g.useEffect(()=>{(async()=>{try{const z=await fetch("/api/products");if(!z.ok)throw new Error(`HTTP error! status: ${z.status}`);const W=await z.json();t(W.products)}catch(z){console.error("Error fetching products:",z)}})()},[]),g.useEffect(()=>{let M=e.filter(z=>{const W=z.name.toLowerCase().includes(s.toLowerCase())||z.description&&z.description.toLowerCase().includes(s.toLowerCase()),q=o==="all"||o==="bundles"&&z.product_type==="bundle"||o==="subscriptions"&&(z.product_type==="chapter_pass"||z.product_type==="arc_pass")||o==="single"&&z.product_type==="single_issue",Y=l==="all",L=z.prices&&z.prices.length>0?z.prices[0].unit_amount/100:0,K=L>=u[0]&&L<=u[1];return W&&q&&Y&&K});M.sort((z,W)=>{switch(v){case"newest":return new Date(W.created_at).getTime()-new Date(z.created_at).getTime();case"oldest":return new Date(z.created_at).getTime()-new Date(W.created_at).getTime();case"price-low":const q=z.prices&&z.prices.length>0?z.prices[0].unit_amount:0,Y=W.prices&&W.prices.length>0?W.prices[0].unit_amount:0;return q-Y;case"price-high":const L=z.prices&&z.prices.length>0?z.prices[0].unit_amount:0;return(W.prices&&W.prices.length>0?W.prices[0].unit_amount:0)-L;case"title":return z.name.localeCompare(W.name);default:return 0}}),n(M)},[e,s,o,l,u,v]);const T=(M,z)=>{k(M),S(z),_(!0),setTimeout(()=>{var W;(W=E.current)==null||W.scrollIntoView({behavior:"smooth"})},100)},P=()=>{console.log("Checkout successful"),_(!1),k(null),S(null)},O=()=>{_(!1),k(null),S(null)},R=[{id:"all",name:"All Products",count:e.length},{id:"single",name:"Single Issues",count:e.filter(M=>M.product_type==="single_issue").length},{id:"bundles",name:"Bundles",count:e.filter(M=>M.product_type==="bundle").length},{id:"subscriptions",name:"Subscriptions",count:e.filter(M=>M.product_type==="chapter_pass"||M.product_type==="arc_pass").length}],I=[{id:"all",name:"All Formats",count:e.length}];return y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background",children:[y.jsxs("div",{className:"relative overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-secondary/20"}),y.jsxs("div",{className:"relative z-10 container mx-auto px-4 py-16 text-center",children:[y.jsxs("h1",{className:"text-5xl md:text-6xl font-heading text-text-light mb-6",children:[y.jsx("span",{className:"text-secondary",children:"Zoroasterverse"})," Store"]}),y.jsx("p",{className:"text-xl text-text-light/80 max-w-3xl mx-auto leading-relaxed",children:"Discover epic tales of magic, technology, and cosmic adventure. From single volumes to complete collections, your journey awaits."}),y.jsx("div",{className:"mt-8 flex justify-center",children:y.jsxs("div",{className:"flex items-center space-x-4 text-text-light/60",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(HP,{className:"w-5 h-5 text-secondary"}),y.jsx("span",{children:"Premium Content"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(VJ,{className:"w-5 h-5 text-accent"}),y.jsx("span",{children:"Multiple Formats"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(KJ,{className:"w-5 h-5 text-secondary"}),y.jsx("span",{children:"Exclusive Bundles"})]})]})})]})]}),y.jsxs("div",{className:"container mx-auto px-4 pb-16",children:[y.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-border/30",children:[y.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center",children:[y.jsxs("div",{className:"flex-1 relative",children:[y.jsx(T$,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-dark w-5 h-5"}),y.jsx("input",{type:"text",placeholder:"Search for books, series, or authors...",value:s,onChange:M=>i(M.target.value),className:"w-full pl-10 pr-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all"})]}),y.jsxs("div",{className:"flex items-center space-x-2 bg-background/50 rounded-xl p-1 border border-border/30",children:[y.jsx("button",{onClick:()=>p("grid"),className:`p-2 rounded-lg transition-all ${f==="grid"?"bg-secondary text-background":"text-text-light hover:text-secondary"}`,children:y.jsx(fKe,{className:"w-5 h-5"})}),y.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded-lg transition-all ${f==="list"?"bg-secondary text-background":"text-text-light hover:text-secondary"}`,children:y.jsx(mKe,{className:"w-5 h-5"})})]}),y.jsxs("select",{value:v,onChange:M=>m(M.target.value),className:"px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",children:[y.jsx("option",{value:"newest",children:"Newest First"}),y.jsx("option",{value:"oldest",children:"Oldest First"}),y.jsx("option",{value:"price-low",children:"Price: Low to High"}),y.jsx("option",{value:"price-high",children:"Price: High to Low"}),y.jsx("option",{value:"title",children:"Alphabetical"})]}),y.jsxs("button",{onClick:()=>x(!b),className:"px-4 py-3 bg-primary/20 hover:bg-primary/30 border border-primary/30 rounded-xl text-text-light transition-all flex items-center space-x-2",children:[y.jsx(hKe,{className:"w-5 h-5"}),y.jsx("span",{children:"Filters"}),b?y.jsx(cKe,{className:"w-4 h-4"}):y.jsx(aKe,{className:"w-4 h-4"})]})]}),b&&y.jsx("div",{className:"mt-6 pt-6 border-t border-border/30",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-text-light mb-3",children:"Categories"}),y.jsx("div",{className:"space-y-2",children:R.map(M=>y.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[y.jsx("input",{type:"radio",name:"category",value:M.id,checked:o===M.id,onChange:z=>a(z.target.value),className:"text-secondary focus:ring-secondary"}),y.jsx("span",{className:"text-text-light",children:M.name}),y.jsxs("span",{className:"text-text-dark text-sm",children:["(",M.count,")"]})]},M.id))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-text-light mb-3",children:"Formats"}),y.jsx("div",{className:"space-y-2",children:I.map(M=>y.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[y.jsx("input",{type:"radio",name:"format",value:M.id,checked:l===M.id,onChange:z=>c(z.target.value),className:"text-secondary focus:ring-secondary"}),y.jsx("span",{className:"text-text-light",children:M.name}),y.jsxs("span",{className:"text-text-dark text-sm",children:["(",M.count,")"]})]},M.id))})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-text-light mb-3",children:["Price Range: $",u[0]," - $",u[1]]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("input",{type:"range",min:"0",max:"50",value:u[1],onChange:M=>h([u[0],parseInt(M.target.value)]),className:"w-full h-2 bg-background/50 rounded-lg appearance-none cursor-pointer slider"}),y.jsxs("div",{className:"flex justify-between text-sm text-text-dark",children:[y.jsx("span",{children:"$0"}),y.jsxs("span",{children:["$",u[1]]})]})]})]})]})})]}),y.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[y.jsxs("p",{className:"text-text-light",children:["Showing ",y.jsx("span",{className:"text-secondary font-medium",children:r.length})," of"," ",y.jsx("span",{className:"text-text-light",children:e.length})," products"]}),s&&y.jsx("button",{onClick:()=>i(""),className:"text-text-dark hover:text-text-light transition-colors",children:"Clear search"})]}),r.length>0?y.jsx("div",{className:f==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:r.map(M=>y.jsx("div",{className:f==="list"?"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30":"",children:y.jsx(xKe,{product:M,onCheckoutProduct:T})},M.id))}):y.jsxs("div",{className:"text-center py-16",children:[y.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-background-light/30 rounded-full flex items-center justify-center",children:y.jsx(T$,{className:"w-12 h-12 text-text-dark"})}),y.jsx("h3",{className:"text-2xl font-heading text-text-light mb-2",children:"No products found"}),y.jsx("p",{className:"text-text-dark mb-6",children:"Try adjusting your search terms or filters to find what you're looking for."}),y.jsx("button",{onClick:()=>{i(""),a("all"),c("all"),h([0,50])},className:"px-6 py-3 bg-secondary text-background rounded-xl hover:bg-secondary-dark transition-colors",children:"Clear all filters"})]}),w&&j&&N&&y.jsxs("div",{ref:E,className:"mt-16 p-8 bg-background-light/30 backdrop-blur-sm rounded-2xl border border-border/30 shadow-xl",children:[y.jsx("h2",{className:"text-3xl font-heading text-text-light mb-6 text-center",children:"Complete Your Purchase"}),y.jsx("div",{className:"max-w-md mx-auto",children:y.jsx(wKe,{product:{id:j.id,name:j.name,price:N.unit_amount,currency:N.currency,interval:N.interval,trial_period_days:N.trial_days,is_subscription:j.product_type==="chapter_pass"||j.product_type==="arc_pass"},onSuccess:P,onCancel:O})})]})]})]})},jKe=async e=>{const{data:t,error:r}=await Ms.from("posts").select("*").eq("slug",e).eq("status","published").single();if(r&&r.code!=="PGRST116")throw new Error(r.message);return t},kKe=()=>{const{slug:e}=Tu(),{data:t,isLoading:r,isError:n,error:s}=Rt({queryKey:["blogPost",e],queryFn:()=>e?jKe(e):Promise.resolve(null),enabled:!!e});if(r)return y.jsx("div",{className:"text-center py-8 text-gray-300",children:"Loading post..."});if(n)return y.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading post: ",s==null?void 0:s.message]});if(!t)return y.jsx("div",{className:"text-center py-8 text-gray-400",children:"Post not found or not published."});const i=t.content.length>150?t.content.substring(0,150)+"...":t.content;return y.jsx("div",{className:"container mx-auto px-4 py-8 max-w-3xl relative z-20",children:y.jsxs("article",{className:"blog-post relative overflow-hidden transition-transform duration-300 ease-in-out hover:translate-y-[-5px] hover:shadow-lg-custom",children:[y.jsx("div",{className:"absolute top-0 left-0 right-0 h-[3px] bg-gradient-to-r from-[#d4af37] via-[#b8860b] to-[#d4af37]"}),y.jsxs("div",{className:"post-meta flex justify-between items-center mb-8 pb-4 border-b border-gold-300-opacity flex-wrap gap-4",children:[y.jsx("span",{className:"post-date text-[#d4af37] font-semibold text-sm tracking-wider",children:new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),y.jsx("span",{className:"post-category bg-gradient-to-br from-[#d4af37] to-[#b8860b] text-[#1a1a2e] px-4 py-2 rounded-full text-xs font-semibold uppercase tracking-wider",children:"World Building"})]}),y.jsx("h1",{className:"post-title font-cinzel text-4xl text-[#f0f0f0] mb-6 leading-tight text-shadow-md",children:t.title}),y.jsx("div",{className:"post-excerpt text-lg text-[#c0c0c0] mb-8 italic border-l-4 border-[#d4af37] pl-6",dangerouslySetInnerHTML:{__html:i}}),y.jsx("div",{className:"post-content text-lg leading-relaxed text-[#e8e8e8] prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:t.content}}),y.jsxs("div",{className:"post-footer mt-12 pt-8 border-t border-gold-300-opacity flex justify-between items-center flex-wrap gap-4",children:[y.jsxs("div",{className:"post-tags flex gap-2 flex-wrap",children:[y.jsx("span",{className:"tag bg-gold-300-opacity-20 text-[#d4af37] px-3 py-1 rounded-full text-sm border border-gold-300-opacity-30 transition-all duration-300 hover:bg-gold-300-opacity-30 hover:scale-105",children:"#Magic"}),y.jsx("span",{className:"tag bg-gold-300-opacity-20 text-[#d4af37] px-3 py-1 rounded-full text-sm border border-gold-300-opacity-30 transition-all duration-300 hover:bg-gold-300-opacity-30 hover:scale-105",children:"#WorldBuilding"})]}),y.jsxs("div",{className:"social-share flex gap-4",children:[y.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"📱"}),y.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"📘"}),y.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"🔗"})]})]})]})})},NKe=async e=>{const{data:t,error:r}=await supabase.from("pages").select("*").eq("slug",e).eq("status","published").single();if(r&&r.code!=="PGRST116")throw new Error(r.message);return t},SKe=()=>{const{slug:e}=Tu(),{data:t,isLoading:r,isError:n,error:s}=Rt({queryKey:["genericPage",e],queryFn:()=>e?NKe(e):Promise.resolve(null),enabled:!!e});return r?y.jsx("div",{className:"text-center py-8",children:"Loading page..."}):n?y.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading page: ",s==null?void 0:s.message]}):t?y.jsx("div",{className:"container mx-auto px-4 py-8",children:y.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:t.title}),y.jsx("div",{className:"prose lg:prose-lg max-w-none text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:t.content}})]})}):y.jsx("div",{className:"text-center py-8 text-gray-600",children:"Page not found or not published."})},EKe=({userId:e,isSubscribed:t,subscriptionTier:r="free",betaReaderStatus:n,subscriptionEndDate:s,booksRead:i,readingHours:o,currentlyReading:a,achievements:l,username:c,onSignOut:u})=>{const{data:h,isLoading:f,isError:p}=Rt({queryKey:["userActivities",e],queryFn:async()=>{const{data:j,error:k}=await Ms.from("user_activities").select("*").eq("user_id",e).order("timestamp",{ascending:!1}).limit(5);if(k)throw k;return j},enabled:!!e});if(f)return y.jsx("div",{className:"text-gray-100",children:"Loading activities..."});if(p)return y.jsx("div",{className:"text-red-400",children:"Error loading activities."});const v=[{label:"Books Read",value:i,icon:y.jsx(oh,{size:20,className:"text-indigo-400"})},{label:"Reading Hours",value:`${o}h`,icon:y.jsx(wE,{size:20,className:"text-green-400"})},{label:"Currently Reading",value:a||"None",icon:y.jsx(qJ,{size:20,className:"text-blue-400"})},{label:"Achievements",value:l,icon:y.jsx(KP,{size:20,className:"text-yellow-400"})}],m=s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,x=(j=>{switch(j){case"premium":return{name:"Premium",color:"bg-blue-500"};case"patron":return{name:"Patron",color:"bg-purple-500"};default:return{name:"Free",color:"bg-gray-500"}}})(r),_=(j=>{switch(j){case"approved":return{text:"Beta Reader",color:"bg-green-500",icon:y.jsx(xE,{size:16})};case"pending":return{text:"Application Pending",color:"bg-yellow-500",icon:y.jsx(wE,{size:16})};case"rejected":return{text:"Application Rejected",color:"bg-red-500",icon:y.jsx(WJ,{size:16})};default:return{text:"Not Applied",color:"bg-gray-500",icon:y.jsx(M0,{size:16})}}})(n);return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Account Dashboard"}),y.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",c||"User"]})]}),y.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:[y.jsx(gKe,{size:16}),"Sign Out"]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:"Subscription Status"}),y.jsxs("div",{className:"flex items-center mt-2",children:[y.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${x.color}`}),y.jsxs("span",{className:"text-white",children:[x.name," Tier"]})]}),t&&s&&y.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Renews on ",m]})]}),y.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:y.jsx(HP,{size:24,className:"text-yellow-400"})})]}),!t&&y.jsx("button",{className:"mt-4 w-full py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium",children:"Upgrade Plan"})]}),y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:"Beta Reader Program"}),y.jsxs("div",{className:"flex items-center mt-2",children:[y.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${_.color}`}),y.jsx("span",{className:"text-white",children:_.text})]}),n==="not_applied"&&y.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Apply to get early access to new content"}),n==="pending"&&y.jsx("p",{className:"text-sm text-yellow-400 mt-1",children:"We'll review your application soon"})]}),y.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:_.icon})]}),n==="approved"?y.jsxs(sn,{to:"/beta/portal",className:"mt-4 w-full py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[y.jsx(oh,{size:16}),"Go to Beta Portal"]}):y.jsx(sn,{to:n==="not_applied"?"/beta/application":"/beta/status",className:"mt-4 w-full block text-center py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium",children:n==="not_applied"?"Apply Now":"View Application Status"})]})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map((j,k)=>y.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-2xl font-bold text-white",children:j.value}),y.jsx("p",{className:"text-sm text-gray-400 mt-1",children:j.label})]}),y.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:j.icon})]})},k))}),y.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl border border-gray-800 overflow-hidden",children:y.jsxs("div",{className:"p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Recent Activity"}),y.jsx("div",{className:"space-y-4",children:h&&h.length>0?h.map(j=>y.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-800/50 rounded-lg transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[j.cover_image_url?y.jsx("img",{src:j.cover_image_url,alt:j.item_title,className:"w-12 h-12 object-cover rounded-lg"}):y.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${j.status==="completed"?"bg-green-600/20":"bg-indigo-600/20"}`,children:j.status==="completed"?y.jsx(xE,{className:"w-6 h-6 text-green-400"}):y.jsx(oh,{className:"w-6 h-6 text-indigo-400"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-medium text-white",children:j.item_title}),y.jsx("p",{className:"text-sm text-gray-400",children:j.status==="completed"?"Completed":"In Progress"})]})]}),j.status!=="completed"&&y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:y.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:`${j.progress/(j.total_progress||100)*100}%`}})}),y.jsx("button",{className:"text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:"Resume"})]})]},j.id)):y.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent activity"})})]})})]})},CKe=()=>{const[e,t]=g.useState({fullName:"",bio:"",location:"",website:""}),r=s=>{const{name:i,value:o}=s.target;t(a=>({...a,[i]:o}))},n=s=>{s.preventDefault(),console.log("Profile updated:",e)};return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Profile Settings"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your personal information and account settings."})]}),y.jsxs("form",{onSubmit:n,className:"space-y-6",children:[y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 space-y-6",children:[y.jsxs("div",{className:"flex items-center space-x-6",children:[y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:y.jsx(M0,{className:"w-12 h-12 text-gray-400"})}),y.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-primary rounded-full p-2 shadow-lg transform translate-y-1/3 group-hover:translate-y-0 transition-transform duration-200",children:y.jsxs("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white",children:"Profile Photo"}),y.jsx("p",{className:"text-sm text-gray-400",children:"JPG, GIF or PNG. Max size of 2MB"})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Full Name"}),y.jsx("input",{type:"text",id:"fullName",name:"fullName",value:e.fullName,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Enter your full name"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-300 mb-1",children:"Location"}),y.jsx("input",{type:"text",id:"location",name:"location",value:e.location,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Your location"})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-300 mb-1",children:"Website"}),y.jsx("input",{type:"url",id:"website",name:"website",value:e.website,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"https://yourwebsite.com"})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-300 mb-1",children:"Bio"}),y.jsx("textarea",{id:"bio",name:"bio",rows:4,value:e.bio,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Tell us about yourself..."})]})]})]}),y.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[y.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-600 rounded-lg text-white hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),y.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors duration-200 font-medium",children:"Save Changes"})]})]})]})},TKe=[{id:1,title:"The Gathas of Zarathushtra",author:"Zarathushtra",cover:"/covers/gathas.jpg",progress:75,lastRead:"2 days ago",totalPages:320,currentPage:240,category:"Religious Text"},{id:2,title:"The Denkard",author:"Various Authors",cover:"/covers/denkard.jpg",progress:30,lastRead:"1 week ago",totalPages:450,currentPage:135,category:"Religious Text"},{id:3,title:"Zoroastrianism: An Introduction",author:"Jenny Rose",cover:"/covers/zoroastrianism-intro.jpg",progress:100,lastRead:"3 weeks ago",totalPages:280,currentPage:280,category:"Non-Fiction"}],AKe=()=>{const[e,t]=g.useState("all"),r=TKe.filter(n=>e==="all"?!0:e==="reading"?n.progress<100:n.progress===100);return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reading History"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Track your reading progress and history."})]}),y.jsx("div",{className:"flex space-x-2 mb-6 p-1 bg-gray-800/50 rounded-lg",children:[{id:"all",label:"All Books"},{id:"reading",label:"Currently Reading"},{id:"completed",label:"Completed"}].map(n=>y.jsx("button",{onClick:()=>t(n.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===n.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:n.label},n.id))}),y.jsx("div",{className:"space-y-6",children:r.length>0?r.map(n=>y.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:y.jsx("div",{className:"p-6",children:y.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[y.jsx("div",{className:"w-full md:w-32 flex-shrink-0",children:y.jsx("div",{className:"aspect-[2/3] bg-gray-700 rounded-lg overflow-hidden",children:y.jsx("img",{src:n.cover,alt:n.title,className:"w-full h-full object-cover",onError:s=>{const i=s.target;i.src="https://via.placeholder.com/150x225?text=No+Cover"}})})}),y.jsx("div",{className:"flex-1",children:y.jsxs("div",{className:"flex flex-col h-full",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-white",children:n.title}),y.jsx("p",{className:"text-gray-400",children:n.author})]}),y.jsx("span",{className:"px-3 py-1 text-xs bg-gray-700 text-gray-300 rounded-full",children:n.category})]}),y.jsxs("div",{className:"mt-4",children:[y.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[y.jsxs("span",{children:["Progress: ",n.progress,"%"]}),y.jsxs("span",{children:["Page ",n.currentPage," of ",n.totalPages]})]}),y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:y.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${n.progress}%`}})})]})]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex items-center justify-between",children:[y.jsxs("span",{className:"text-sm text-gray-400",children:["Last read ",n.lastRead]}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-primary/10 hover:bg-primary/20 rounded-lg transition-colors",children:n.progress<100?"Continue Reading":"Read Again"}),y.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})})})]})]})]})})]})})},n.id)):y.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[y.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:y.jsx(oh,{className:"w-8 h-8 text-gray-500"})}),y.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"No books found"}),y.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:e==="all"?"You haven't added any books to your library yet.":e==="reading"?"You don't have any books in progress.":"You haven't completed any books yet."}),y.jsx("button",{className:"mt-4 px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-lg transition-colors",children:"Browse Library"})]})})]})},qk=[{id:1,title:"First Steps",description:"Complete your first reading session",icon:"🏆",progress:100,unlocked:!0,date:"2023-10-15",rarity:"common"},{id:2,title:"Book Worm",description:"Read for 10 hours",icon:"📚",progress:75,unlocked:!1,date:null,rarity:"uncommon"},{id:3,title:"Zoroastrian Scholar",description:"Read all core Zoroastrian texts",icon:"📜",progress:30,unlocked:!1,date:null,rarity:"rare"},{id:4,title:"Daily Devotee",description:"Read for 7 days in a row",icon:"🔥",progress:42,unlocked:!1,date:null,rarity:"uncommon"},{id:5,title:"Knowledge Seeker",description:"Complete 50 reading sessions",icon:"🔍",progress:100,unlocked:!0,date:"2023-11-02",rarity:"rare"},{id:6,title:"Wisdom Keeper",description:"Achieve 100% completion on any text",icon:"🧠",progress:0,unlocked:!1,date:null,rarity:"epic"}],OKe=e=>{switch(e){case"common":return"bg-gray-500/20 border-gray-500";case"uncommon":return"bg-emerald-500/20 border-emerald-500";case"rare":return"bg-blue-500/20 border-blue-500";case"epic":return"bg-purple-500/20 border-purple-500";case"legendary":return"bg-amber-500/20 border-amber-500";default:return"bg-gray-500/20 border-gray-500"}},PKe=()=>{const[e,t]=g.useState("all"),r=qk.filter(o=>e==="all"?!0:e==="unlocked"?o.unlocked:!o.unlocked),n=qk.filter(o=>o.unlocked).length,s=qk.length,i=Math.round(n/s*100);return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Achievements"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Track your progress and unlock new milestones."})]}),y.jsx("div",{className:"bg-gray-800/50 rounded-xl p-6",children:y.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("h3",{className:"text-lg font-medium text-white",children:"Achievement Progress"}),y.jsxs("p",{className:"text-gray-400",children:[n," of ",s," achievements unlocked"]})]}),y.jsxs("div",{className:"w-full md:w-64",children:[y.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/70 rounded-full transition-all duration-1000",style:{width:`${i}%`}})}),y.jsxs("p",{className:"text-sm text-right text-gray-400 mt-1",children:[i,"% Complete"]})]})]})}),y.jsx("div",{className:"flex space-x-2 p-1 bg-gray-800/50 rounded-lg",children:[{id:"all",label:"All Achievements"},{id:"unlocked",label:"Unlocked"},{id:"locked",label:"Locked"}].map(o=>y.jsx("button",{onClick:()=>t(o.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===o.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:o.label},o.id))}),r.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(o=>y.jsxs("div",{className:`relative p-5 rounded-xl border-2 transition-all duration-200 ${o.unlocked?OKe(o.rarity):"bg-gray-800/30 border-gray-700 opacity-60"}`,children:[y.jsxs("div",{className:"flex items-start space-x-4",children:[y.jsx("div",{className:"flex-shrink-0 w-14 h-14 rounded-full bg-gray-700 flex items-center justify-center text-2xl",children:o.icon}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h3",{className:`text-lg font-semibold ${o.unlocked?"text-white":"text-gray-400"}`,children:o.title}),y.jsx("p",{className:"text-sm text-gray-400 mt-1",children:o.description}),!o.unlocked&&y.jsxs("div",{className:"mt-2",children:[y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:y.jsx("div",{className:"bg-primary h-1.5 rounded-full",style:{width:`${o.progress}%`}})}),y.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[o.progress,"% complete"]})]})]})]}),o.unlocked&&o.date&&y.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700",children:y.jsxs("p",{className:"text-xs text-gray-400",children:["Unlocked on ",new Date(o.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})}),o.unlocked&&y.jsx("div",{className:"absolute top-3 right-3",children:y.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:y.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]},o.id))}):y.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[y.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:y.jsx(KP,{className:"w-8 h-8 text-gray-500"})}),y.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:e==="unlocked"?"You haven't unlocked any achievements yet":"No locked achievements found"}),y.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:e==="unlocked"?"Start reading and completing texts to unlock achievements!":"You've unlocked all available achievements! More coming soon."})]})]})},RKe=()=>{const[e,t]=g.useState({theme:"dark",fontSize:"medium",notifications:!0,emailNotifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,readingMode:"paginated",autoSave:!0,showProgress:!0,showWordCount:!0}),r=a=>{const{name:l,value:c,type:u}=a.target,h=a.target.checked;t(f=>({...f,[l]:u==="checkbox"?h:c}))},n=a=>{a.preventDefault(),console.log("Saving settings:",e)},s=()=>{window.confirm("Are you sure you want to reset all preferences to default?")&&t({theme:"dark",fontSize:"medium",notifications:!0,emailNotifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,readingMode:"paginated",autoSave:!0,showProgress:!0,showWordCount:!0})},i=({title:a,children:l})=>y.jsxs("div",{className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-medium text-white",children:a}),y.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-gray-700",children:l})]}),o=({label:a,description:l,children:c})=>y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 py-3 border-b border-gray-700/50 last:border-0",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"text-sm font-medium text-white",children:a}),l&&y.jsx("p",{className:"text-xs text-gray-400 mt-1",children:l})]}),y.jsx("div",{className:"sm:w-48",children:c})]});return y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Preferences"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Customize your experience on our platform."})]}),y.jsxs("form",{onSubmit:n,className:"space-y-8",children:[y.jsxs(i,{title:"Appearance",children:[y.jsx(o,{label:"Theme",description:"Choose between light and dark themes",children:y.jsxs("select",{name:"theme",value:e.theme,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[y.jsx("option",{value:"light",children:"Light"}),y.jsx("option",{value:"dark",children:"Dark"}),y.jsx("option",{value:"system",children:"System Default"})]})}),y.jsx(o,{label:"Font Size",description:"Adjust the text size across the application",children:y.jsxs("select",{name:"fontSize",value:e.fontSize,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[y.jsx("option",{value:"small",children:"Small"}),y.jsx("option",{value:"medium",children:"Medium"}),y.jsx("option",{value:"large",children:"Large"})]})})]}),y.jsxs(i,{title:"Notifications",children:[y.jsx(o,{label:"Enable Notifications",description:"Receive browser notifications",children:y.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[y.jsx("input",{type:"checkbox",name:"notifications",id:"notifications",checked:e.notifications,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),y.jsx("label",{htmlFor:"notifications",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.notifications?"bg-primary":"bg-gray-600"}`})]})}),y.jsx(o,{label:"Email Notifications",description:"Receive notifications via email",children:y.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[y.jsx("input",{type:"checkbox",name:"emailNotifications",id:"emailNotifications",checked:e.emailNotifications,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),y.jsx("label",{htmlFor:"emailNotifications",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.emailNotifications?"bg-primary":"bg-gray-600"}`})]})})]}),y.jsxs(i,{title:"Reading",children:[y.jsx(o,{label:"Reading Mode",description:"Choose how content is displayed",children:y.jsxs("select",{name:"readingMode",value:e.readingMode,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[y.jsx("option",{value:"paginated",children:"Paginated"}),y.jsx("option",{value:"scrolling",children:"Scrolling"})]})}),y.jsx(o,{label:"Auto-save Progress",description:"Automatically save your reading progress",children:y.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[y.jsx("input",{type:"checkbox",name:"autoSave",id:"autoSave",checked:e.autoSave,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),y.jsx("label",{htmlFor:"autoSave",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.autoSave?"bg-primary":"bg-gray-600"}`})]})}),y.jsx(o,{label:"Show Reading Progress",description:"Display progress indicators while reading",children:y.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[y.jsx("input",{type:"checkbox",name:"showProgress",id:"showProgress",checked:e.showProgress,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),y.jsx("label",{htmlFor:"showProgress",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.showProgress?"bg-primary":"bg-gray-600"}`})]})}),y.jsx(o,{label:"Show Word Count",description:"Display word count for texts",children:y.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[y.jsx("input",{type:"checkbox",name:"showWordCount",id:"showWordCount",checked:e.showWordCount,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),y.jsx("label",{htmlFor:"showWordCount",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.showWordCount?"bg-primary":"bg-gray-600"}`})]})})]}),y.jsxs(i,{title:"Language & Region",children:[y.jsx(o,{label:"Language",description:"Select your preferred language",children:y.jsxs("select",{name:"language",value:e.language,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[y.jsx("option",{value:"en",children:"English"}),y.jsx("option",{value:"es",children:"Español"}),y.jsx("option",{value:"fr",children:"Français"}),y.jsx("option",{value:"de",children:"Deutsch"}),y.jsx("option",{value:"fa",children:"فارسی"}),y.jsx("option",{value:"gu",children:"ગુજરાતી"})]})}),y.jsx(o,{label:"Time Zone",description:"Set your local time zone",children:y.jsxs("select",{name:"timezone",value:e.timezone,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[y.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),y.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),y.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),y.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),y.jsx("option",{value:"Europe/London",children:"London (GMT)"}),y.jsx("option",{value:"Europe/Paris",children:"Paris (CET)"}),y.jsx("option",{value:"Asia/Tehran",children:"Tehran (IRST)"}),y.jsx("option",{value:"Asia/Kolkata",children:"Mumbai (IST)"})]})})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 pt-6 border-t border-gray-700",children:[y.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:"Reset to Defaults"}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium border border-gray-600 text-gray-300 hover:bg-gray-700/50 rounded-lg transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-lg transition-colors",children:"Save Changes"})]})]})]}),y.jsx("style",{children:`
        .toggle-checkbox:checked {
          right: 0;
          border-color: #68D391;
        }
        .toggle-checkbox:checked + .toggle-label {
          background-color: #68D391;
        }
      `})]})},IKe=()=>{const[e,t]=g.useState("overview"),[r,n]=g.useState(""),[s,i]=g.useState(""),[o,a]=g.useState(""),[l,c]=g.useState(!1),[u,h]=g.useState([]),[f,p]=g.useState(!1),[v,m]=g.useState(!1),[b,x]=g.useState(""),[w,_]=g.useState(""),j=[{id:"1",device:"Windows 10, Chrome",location:"New York, US",ip:"192.168.1.1",lastActive:"2 hours ago",current:!0},{id:"2",device:"iPhone 13, Safari",location:"San Francisco, US",ip:"203.0.113.1",lastActive:"1 week ago",current:!1},{id:"3",device:"MacBook Pro, Safari",location:"London, UK",ip:"198.51.100.1",lastActive:"2 weeks ago",current:!1}],k=[{id:"1",type:"login",description:"Successful login from New York, US",device:"Windows 10, Chrome",ip:"192.168.1.1",timestamp:"2023-11-15T14:30:00Z",status:"success"},{id:"2",type:"password_change",description:"Password changed",device:"iPhone 13, Safari",ip:"203.0.113.1",timestamp:"2023-11-10T09:15:00Z",status:"info"},{id:"3",type:"failed_login",description:"Failed login attempt",device:"Unknown",ip:"198.51.100.1",timestamp:"2023-11-05T18:45:00Z",status:"warning"}],N=async O=>{if(O.preventDefault(),x(""),_(""),s!==o){x("New passwords do not match");return}if(s.length<8){x("Password must be at least 8 characters long");return}m(!0);try{await new Promise(R=>setTimeout(R,1e3)),_("Password changed successfully"),n(""),i(""),a("")}catch{x("Failed to change password. Please try again.")}finally{m(!1)}},S=async()=>{m(!0);try{await new Promise(R=>setTimeout(R,1e3)),c(!0);const O=Array.from({length:10},()=>Math.random().toString(36).substring(2,8).toUpperCase());h(O),p(!0),_("Two-factor authentication has been enabled")}catch{x("Failed to enable two-factor authentication")}finally{m(!1)}},E=async()=>{if(window.confirm("Are you sure you want to disable two-factor authentication? This will make your account less secure.")){m(!0);try{await new Promise(O=>setTimeout(O,1e3)),c(!1),h([]),_("Two-factor authentication has been disabled")}catch{x("Failed to disable two-factor authentication")}finally{m(!1)}}},T=async()=>{if(window.confirm("Are you sure you want to revoke this session?")){m(!0);try{await new Promise(O=>setTimeout(O,800)),_("Session has been revoked")}catch{x("Failed to revoke session")}finally{m(!1)}}},P=O=>new Date(O).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Security Settings"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your account security and privacy settings."})]}),y.jsx("div",{className:"flex space-x-2 p-1 bg-gray-800/50 rounded-lg",children:[{id:"overview",label:"Overview"},{id:"sessions",label:"Active Sessions"},{id:"activity",label:"Security Activity"}].map(O=>y.jsx("button",{onClick:()=>t(O.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===O.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:O.label},O.id))}),b&&y.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 text-red-300 rounded-lg",children:b}),w&&y.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/30 text-green-300 rounded-lg",children:w}),f&&y.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:"Save Your Backup Codes"}),y.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),y.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Save these backup codes in a safe place. You can use them to access your account if you lose access to your authenticator app."}),y.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:u.map((O,R)=>y.jsx("div",{className:"bg-gray-700/50 p-2 rounded text-center font-mono",children:O},R))}),y.jsx("div",{className:"flex justify-end",children:y.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"I've saved my codes"})})]})}),e==="overview"&&y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[y.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Change Password"}),y.jsxs("form",{onSubmit:N,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),y.jsx("input",{type:"password",id:"currentPassword",value:r,onChange:O=>n(O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),y.jsx("input",{type:"password",id:"newPassword",value:s,onChange:O=>i(O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),y.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:O=>a(O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),y.jsx("div",{className:"pt-2",children:y.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:v?"Updating...":"Update Password"})})]})]}),y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:"Two-Factor Authentication"}),y.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l?"Two-factor authentication is currently enabled.":"Add an extra layer of security to your account."})]}),l?y.jsx("button",{onClick:E,disabled:v,className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors disabled:opacity-50",children:v?"Disabling...":"Disable 2FA"}):y.jsx("button",{onClick:S,disabled:v,className:"px-4 py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors disabled:opacity-50",children:v?"Enabling...":"Enable 2FA"})]}),l&&u.length>0&&y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:y.jsx("button",{onClick:()=>p(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"View Backup Codes"})})]}),y.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6",children:[y.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-3",children:"Security Tips"}),y.jsxs("ul",{className:"space-y-3 text-sm text-blue-200",children:[y.jsxs("li",{className:"flex items-start",children:[y.jsx("span",{className:"mr-2",children:"🔒"}),y.jsx("span",{children:"Use a strong, unique password that you don't use elsewhere."})]}),y.jsxs("li",{className:"flex items-start",children:[y.jsx("span",{className:"mr-2",children:"🔑"}),y.jsx("span",{children:"Enable two-factor authentication for added security."})]}),y.jsxs("li",{className:"flex items-start",children:[y.jsx("span",{className:"mr-2",children:"👀"}),y.jsx("span",{children:"Regularly review your active sessions and revoke any that look suspicious."})]}),y.jsxs("li",{className:"flex items-start",children:[y.jsx("span",{className:"mr-2",children:"📧"}),y.jsx("span",{children:"Make sure your email account is secure, as it can be used to reset your password."})]})]})]})]}),e==="sessions"&&y.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:y.jsxs("div",{className:"p-6",children:[y.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Active Sessions"}),y.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"This is a list of devices that have logged into your account. Revoke any sessions that you don't recognize."}),y.jsx("div",{className:"space-y-4",children:j.map(O=>y.jsx("div",{className:`p-4 rounded-lg ${O.current?"bg-primary/10 border border-primary/30":"bg-gray-700/50"}`,children:y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"font-medium text-white",children:O.device}),O.current&&y.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-primary/20 text-primary rounded-full",children:"Current Session"})]}),y.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[O.location," • ",O.ip]}),y.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last active: ",O.lastActive]})]}),!O.current&&y.jsx("button",{onClick:T,disabled:v,className:"px-3 py-1 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors disabled:opacity-50",children:"Revoke"})]})},O.id))})]})}),e==="activity"&&y.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:y.jsxs("div",{className:"p-6",children:[y.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Security Activity"}),y.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Review recent security events related to your account."}),y.jsx("div",{className:"space-y-4",children:k.map(O=>y.jsx("div",{className:"p-4 bg-gray-700/30 rounded-lg",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${O.status==="success"?"bg-green-500":O.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),y.jsxs("div",{className:"ml-4 flex-1",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsx("h4",{className:"font-medium text-white",children:O.description}),y.jsx("span",{className:"text-xs text-gray-500",children:P(O.timestamp)})]}),y.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[O.device," • ",O.ip]})]})]})},O.id))}),y.jsx("div",{className:"mt-6 text-center",children:y.jsx("button",{className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"View All Activity"})})]})})]})},DKe=()=>y.jsxs("div",{className:"text-gray-100",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Admin Dashboard"}),y.jsx("p",{children:"Admin specific content and tools."})]}),LKe=()=>{var w;const e=z0(),t=xi(),[r,n]=g.useState("overview"),{user:s,userProfile:i,isAdmin:o,isLoading:a,isAuthenticated:l}=IF(),[c,u]=g.useState({isSubscribed:!1,subscriptionTier:"free",betaReaderStatus:"not_applied",subscriptionEndDate:void 0,booksRead:0,readingHours:0,currentlyReading:"",achievements:0,username:"User"});g.useEffect(()=>{!a&&!l&&e("/login")},[a,l,e]),g.useEffect(()=>{const _=t.pathname.split("/").pop()||"overview";n(_==="account"?"overview":_)},[t]);const h=[{id:"overview",name:"Overview",icon:y.jsx(pKe,{size:18}),path:"/account"},{id:"profile",name:"Profile",icon:y.jsx(M0,{size:18}),path:"/account/profile"},{id:"reading",name:"Reading",icon:y.jsx(oh,{size:18}),path:"/account/reading"},{id:"achievements",name:"Achievements",icon:y.jsx(KP,{size:18}),path:"/account/achievements"},{id:"preferences",name:"Preferences",icon:y.jsx(yKe,{size:18}),path:"/account/preferences"},{id:"security",name:"Security",icon:y.jsx(WJ,{size:18}),path:"/account/security"}],f=g.useMemo(()=>[...h],[]),{data:p,isLoading:v}=Rt({queryKey:["userStats",s==null?void 0:s.id],queryFn:()=>Wee(s.id),enabled:!!(s!=null&&s.id)}),{data:m,isLoading:b}=Rt({queryKey:["subscription",s==null?void 0:s.id],queryFn:()=>Bee(s.id),enabled:!!(s!=null&&s.id)});g.useEffect(()=>{i&&u(_=>{var j;return{..._,username:i.username||((j=s==null?void 0:s.email)==null?void 0:j.split("@")[0])||"User",betaReaderStatus:i.beta_reader_status||"not_applied"}}),p&&u(_=>({..._,booksRead:p.books_read||0,readingHours:p.reading_hours||0,currentlyReading:p.currently_reading||"",achievements:p.achievements||0})),m&&u(_=>({..._,isSubscribed:!0,subscriptionTier:m.plan_id,subscriptionEndDate:m.current_period_end}))},[s,i,p,m]);const x=async()=>{await Ms.auth.signOut(),e("/login")};return a||l&&(!i||v||b)?y.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-background-darker flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),y.jsx("p",{className:"mt-4 text-gray-400",children:"Loading your profile..."})]})}):!l||!s?null:y.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-background-darker text-text-light",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:y.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[y.jsxs("aside",{className:"w-full lg:w-64 flex-shrink-0",children:[y.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl overflow-hidden border border-gray-800",children:[y.jsxs("div",{className:"p-6 text-center border-b border-gray-800",children:[y.jsxs("div",{className:"relative inline-block",children:[y.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-4xl font-bold text-white",children:(w=s==null?void 0:s.email)==null?void 0:w.charAt(0).toUpperCase()}),y.jsx("button",{className:"absolute -bottom-1 -right-1 bg-primary w-8 h-8 rounded-full flex items-center justify-center text-white hover:bg-primary/90 transition-colors",children:y.jsx(M0,{size:16})})]}),y.jsx("h2",{className:"mt-4 text-xl font-semibold text-white",children:(i==null?void 0:i.display_name)||(i==null?void 0:i.username)}),y.jsx("p",{className:"text-sm text-gray-400",children:o?"Admin":"Member"})]}),y.jsx("nav",{className:"p-2",children:y.jsx("ul",{className:"space-y-1",children:f.map(_=>y.jsx("li",{children:y.jsxs(Ud,{to:_.path,end:_.path==="/account",className:({isActive:j})=>`flex items-center justify-between px-4 py-3 rounded-lg transition-colors duration-200 ${j?"bg-primary/10 text-primary":"text-gray-300 hover:bg-gray-800/50 hover:text-white"}`,children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-3",children:_.icon}),_.name]}),y.jsx(lKe,{size:16,className:"text-gray-500"})]})},_.id))})})]}),r==="overview"&&y.jsxs("div",{className:"mt-6 bg-background-light/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-4",children:"YOUR STATS"}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-indigo-500/10 flex items-center justify-center text-indigo-400",children:y.jsx(oh,{size:16})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Books Read"}),y.jsx("p",{className:"text-lg font-semibold text-white",children:c.booksRead})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center text-green-400",children:y.jsx(wE,{size:16})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Reading Hours"}),y.jsxs("p",{className:"text-lg font-semibold text-white",children:[c.readingHours,"h"]})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-400",children:y.jsx(qJ,{size:16})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Currently Reading"}),y.jsx("p",{className:"text-lg font-semibold text-white",children:c.currentlyReading||"None"})]})]})]})]})]}),y.jsx("main",{className:"flex-1",children:y.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl border border-gray-800 overflow-hidden",children:y.jsxs("div",{className:"p-6",children:[y.jsxs(tF,{children:[y.jsx(Ae,{path:"/",element:y.jsx(EKe,{userId:s.id,isSubscribed:c.isSubscribed,subscriptionTier:c.subscriptionTier,betaReaderStatus:c.betaReaderStatus,subscriptionEndDate:c.subscriptionEndDate,booksRead:c.booksRead,readingHours:c.readingHours,currentlyReading:c.currentlyReading,achievements:c.achievements,username:c.username,onSignOut:x})}),y.jsx(Ae,{path:"profile",element:y.jsx(CKe,{})}),y.jsx(Ae,{path:"reading",element:y.jsx(AKe,{})}),y.jsx(Ae,{path:"achievements",element:y.jsx(PKe,{})}),y.jsx(Ae,{path:"preferences",element:y.jsx(RKe,{})}),y.jsx(Ae,{path:"security",element:y.jsx(IKe,{})}),o&&y.jsx(Ae,{path:"admin/*",element:y.jsx(DKe,{})})]}),y.jsx(EE,{})]})})})]})})})},MKe=()=>{const e=g.useRef(null),t=g.useRef({}),r=g.useRef({}),[n,s]=g.useState({fullName:"",preferredName:"",email:"",timezone:"",country:"",portfolioLinks:"",specialties:[],tools:[],availability:"",startDate:"",commitment:"",bestPieces:"",makingOfNotes:"",visualInfluences:"",worldVisualization:"",feedbackProcess:"",colorGrading:"",references:"",turnaround:"",revisionPolicy:"",revenueShareWilling:"",preferredTrack:"",taxConstraints:"",projectPortal:!1,ndaAcceptance:!1,originalityConfirm:!1,rightsConfirm:!1,signature:"",signatureDate:new Date().toISOString().split("T")[0]}),i=f=>{const{name:p,value:v,type:m,checked:b}=f.target;s(m==="checkbox"?x=>{const w=x[p]||[];return b?{...x,[p]:[...w,v]}:{...x,[p]:w.filter(_=>_!==v)}}:m==="radio"?x=>({...x,[p]:v}):x=>({...x,[p]:v}))},o=(f,p)=>{const v=f.target.files;s(m=>({...m,[p]:v})),a(f.target)},a=(f,p)=>{const v=f.closest(".file-upload");if(!v)return;const m=f.files?f.files.length:0,b=v.querySelector("p");b&&(m>0?(b.innerHTML=`${m} file(s) selected<br><small>Ready to upload</small>`,v.style.backgroundColor="#e8f5e8"):(b.innerHTML="Drop files here or click to browse<br><small>JPG/PNG, max 5MB per file</small>",v.style.backgroundColor="white"))},l=f=>{f.preventDefault(),f.currentTarget.style.backgroundColor="#f0f8ff"},c=f=>{f.preventDefault(),f.currentTarget.style.backgroundColor="white"},u=(f,p)=>{f.preventDefault(),f.currentTarget.style.backgroundColor="#e8f5e8";const v=f.dataTransfer.files;t.current[p]&&(t.current[p].files=v,s(m=>({...m,[p]:v})),a(t.current[p]))},h=f=>{f.preventDefault(),console.log("Application data:",n),alert("Thank you for your application! We'll review your submission and get back to you within 1-2 weeks.")};return g.useEffect(()=>{var p,v,m;const f=(p=document.getElementById("preferredTrack"))==null?void 0:p.closest(".form-group");f&&(n.revenueShareWilling==="yes"?(f.style.display="block",(v=document.getElementById("preferredTrack"))==null||v.setAttribute("required","required")):(f.style.display="none",(m=document.getElementById("preferredTrack"))==null||m.removeAttribute("required"),s(b=>({...b,preferredTrack:""}))))},[n.revenueShareWilling]),g.useEffect(()=>{Object.entries(r.current).forEach(([f,p])=>{var v;if(p){const m=parseInt(p.getAttribute("data-maxlength")||"1000");let b=p.nextElementSibling;(!b||!b.classList.contains("char-counter"))&&(b=document.createElement("small"),b.classList.add("char-counter"),b.style.display="block",b.style.textAlign="right",b.style.color="var(--muted-foreground)",b.style.marginTop="0.25rem",(v=p.parentNode)==null||v.insertBefore(b,p.nextSibling));const x=()=>{const w=p.value.length;b.textContent=`${w}/${m} characters`,w>m*.9?b.style.color="var(--destructive)":w>m*.7?b.style.color="var(--accent)":b.style.color="var(--muted-foreground)"};return p.addEventListener("input",x),x(),()=>{p.removeEventListener("input",x)}}})},[n]),g.useEffect(()=>{var b;const f=document.createElement("div");f.style.cssText=`
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--border); /* Using CSS variable */
            z-index: 1000;
            transition: all 0.3s ease;
        `;const p=document.createElement("div");p.style.cssText=`
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%); /* Using CSS variables */
            width: 0%;
            transition: width 0.3s ease;
        `,f.appendChild(p),document.body.prepend(f);const v=()=>{if(!e.current)return;const x=Array.from(e.current.querySelectorAll("[required]")),w=x.filter(k=>k.type==="checkbox"||k.type==="radio"?k.checked:k.value.trim()!=="").length,_=x.length,j=_>0?w/_*100:0;p.style.width=`${j}%`},m=(b=e.current)==null?void 0:b.querySelectorAll("input, select, textarea");return m==null||m.forEach(x=>{x.addEventListener("input",v),x.addEventListener("change",v)}),v(),()=>{f.remove(),m==null||m.forEach(x=>{x.removeEventListener("input",v),x.removeEventListener("change",v)})}},[]),y.jsxs("div",{className:"max-w-7xl mx-auto bg-card shadow-lg rounded-xl overflow-hidden my-8",children:[" ",y.jsxs("div",{className:"relative p-12 text-center text-white bg-gradient-to-br from-gray-800 to-gray-900 overflow-hidden",children:[" ",y.jsx("div",{className:"absolute inset-0",style:{background:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.08)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>') repeat`,opacity:.3}}),y.jsx("h1",{className:"text-4xl font-bold mb-2 relative z-10",children:"Artist Collaboration Program"})," ",y.jsx("p",{className:"text-lg opacity-90 relative z-10",children:"Shape the visual identity of the Zangar/Spandam Series"})," "]}),y.jsxs("div",{className:"p-12",children:[" ",y.jsxs("div",{className:"bg-background p-8 rounded-lg mb-12 border-l-4 border-primary",children:[" ",y.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Join Our Creative Vision"})," ",y.jsxs("p",{className:"text-lg mb-4",children:["We're seeking ",y.jsx("strong",{children:"1-2 talented artists"}),' to collaborate on bringing to life a world of cliffside megacities, sky-splitting space elevators, and civilizations locked in "soft war." This is a unique revenue-share collaboration opportunity where your creative vision helps shape an entire series.']})," ",y.jsx("p",{className:"text-lg mb-4",children:"No upfront payment required - you'll earn meaningful percentages of book revenue with transparent reporting and fair compensation structures designed to reward your contribution over time."})," "]}),y.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent text-white p-6 rounded-lg my-8",children:[" ",y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"What We're Looking For"})," ",y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 my-8",children:[" ",y.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[" ",y.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Cover Art"})," ",y.jsx("p",{children:"Stunning key art that captures the epic scope and Persian/Zoroastrian-influenced aesthetic of our megastructures"})]}),y.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[y.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Interior Illustrations"}),y.jsx("p",{children:"6-12 atmospheric pieces that enhance key scenes and world-building moments"})]}),y.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[y.jsx("h4",{className:"text-xl font-semibold mb-2",children:"World Design"}),y.jsx("p",{children:"Clan sigils, glyphs, UI ornaments, and visual motifs that define our world's identity"})]}),y.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[y.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Marketing Assets"}),y.jsx("p",{children:"Website heroes, social banners, and promotional materials that drive engagement"})]})]})]}),y.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Fair Compensation Structure"}),y.jsx("p",{className:"text-lg mb-4",children:"Choose the track that works best for your situation:"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 my-8",children:[" ",y.jsxs("div",{className:"bg-card border-2 border-border rounded-lg p-6 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-xl hover:border-primary",children:[" ",y.jsx("h4",{className:"text-xl font-semibold text-primary mb-4",children:"Track A: Higher Percentage, Shorter Term"})," ",y.jsxs("ul",{className:"list-disc list-inside text-foreground",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Primary Cover:"})," 5% net revenue for 12 months (cap: $7,500)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Secondary/Marketing Art:"})," 2.5% for 12 months (cap: $3,500)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Interior Pack (6-12 images):"})," 1.5% for 12 months (cap: $2,000)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Motifs/UI Package:"})," 1.0% for 12 months (cap: $1,200)"]})]})]}),y.jsxs("div",{className:"bg-card border-2 border-border rounded-lg p-6 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-xl hover:border-primary",children:[y.jsx("h4",{className:"text-xl font-semibold text-primary mb-4",children:"Track B: Lower Percentage, Longer Term"}),y.jsxs("ul",{className:"list-disc list-inside text-foreground",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Primary Cover:"})," 3% net revenue for 24 months (cap: $7,500)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Secondary/Marketing Art:"})," 1.5% for 24 months (cap: $3,500)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Interior Pack:"})," 1.0% for 24 months (cap: $2,000)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Motifs/UI:"})," 0.75% for 24 months (cap: $1,200)"]})]})]})]}),y.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent text-white p-6 rounded-lg my-8",children:[" ",y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Transparency & Trust"}),y.jsxs("p",{className:"mb-2",children:[y.jsx("strong",{children:"Quarterly financial statements"})," with itemized revenue calculations"]}),y.jsxs("p",{className:"mb-2",children:[y.jsx("strong",{children:"Payment within 30 days"})," of each quarter end"]}),y.jsxs("p",{className:"mb-2",children:[y.jsx("strong",{children:"Right to audit"})," statements once per year"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Milestone bonuses"})," if the book crosses $50,000 in net revenue"]})]}),y.jsxs("div",{className:"bg-background p-8 rounded-lg mt-12",children:[" ",y.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Application Form"}),y.jsxs("form",{ref:e,onSubmit:h,children:[y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[" ",y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Identity & Contact"]})," ",y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[" ",y.jsxs("div",{className:"mb-4",children:[" ",y.jsxs("label",{htmlFor:"fullName",className:"block mb-2 font-semibold text-muted-foreground",children:["Full Name",y.jsx("span",{className:"text-destructive",children:" *"})]})," ",y.jsx("input",{type:"text",id:"fullName",name:"fullName",required:!0,value:n.fullName,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})," "]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"preferredName",className:"block mb-2 font-semibold text-muted-foreground",children:"Preferred Name/Alias"}),y.jsx("input",{type:"text",id:"preferredName",name:"preferredName",value:n.preferredName,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"email",className:"block mb-2 font-semibold text-muted-foreground",children:["Email",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:n.email,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"timezone",className:"block mb-2 font-semibold text-muted-foreground",children:["Time Zone",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsxs("select",{id:"timezone",name:"timezone",required:!0,value:n.timezone,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[y.jsx("option",{value:"",children:"Select your timezone"}),y.jsx("option",{value:"UTC-12",children:"UTC-12 (Baker Island)"}),y.jsx("option",{value:"UTC-11",children:"UTC-11 (Hawaii)"}),y.jsx("option",{value:"UTC-10",children:"UTC-10 (Alaska)"}),y.jsx("option",{value:"UTC-9",children:"UTC-9 (Pacific)"}),y.jsx("option",{value:"UTC-8",children:"UTC-8 (Mountain)"}),y.jsx("option",{value:"UTC-7",children:"UTC-7 (Central)"}),y.jsx("option",{value:"UTC-6",children:"UTC-6 (Eastern)"}),y.jsx("option",{value:"UTC-5",children:"UTC-5 (Atlantic)"}),y.jsx("option",{value:"UTC+0",children:"UTC+0 (London)"}),y.jsx("option",{value:"UTC+1",children:"UTC+1 (Central Europe)"}),y.jsx("option",{value:"UTC+2",children:"UTC+2 (Eastern Europe)"}),y.jsx("option",{value:"UTC+8",children:"UTC+8 (China/Singapore)"}),y.jsx("option",{value:"UTC+9",children:"UTC+9 (Japan)"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"country",className:"block mb-2 font-semibold text-muted-foreground",children:["Country",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"text",id:"country",name:"country",required:!0,value:n.country,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"portfolioLinks",className:"block mb-2 font-semibold text-muted-foreground",children:["Portfolio Links",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("textarea",{id:"portfolioLinks",name:"portfolioLinks",placeholder:"Please provide links to your portfolio (ArtStation, Behance, personal website, Instagram, etc.)",required:!0,value:n.portfolioLinks,onChange:i,ref:f=>{r.current.portfolioLinks=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Art Focus & Availability"]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-2 font-semibold text-muted-foreground",children:"Primary Specialties (check all that apply)"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2",children:[" ",y.jsxs("div",{className:"flex items-center",children:[" ",y.jsx("input",{type:"checkbox",id:"coverIll",name:"specialties",value:"cover-illustration",onChange:i,checked:n.specialties.includes("cover-illustration"),className:"w-auto mr-2"})," ",y.jsx("label",{htmlFor:"coverIll",children:"Cover Illustration"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"charDesign",name:"specialties",value:"character-design",onChange:i,checked:n.specialties.includes("character-design"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"charDesign",children:"Character Design"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"environment",name:"specialties",value:"environment",onChange:i,checked:n.specialties.includes("environment"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"environment",children:"Environment Art"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"uiMotifs",name:"specialties",value:"ui-motifs",onChange:i,checked:n.specialties.includes("ui-motifs"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"uiMotifs",children:"UI/Sigil Design"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"typography",name:"specialties",value:"typography",onChange:i,checked:n.specialties.includes("typography"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"typography",children:"Typography"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"marketing",name:"specialties",value:"marketing",onChange:i,checked:n.specialties.includes("marketing"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"marketing",children:"Marketing Visuals"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-2 font-semibold text-muted-foreground",children:"Tools/Software (check all that apply)"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"photoshop",name:"tools",value:"photoshop",onChange:i,checked:n.tools.includes("photoshop"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"photoshop",children:"Photoshop"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"procreate",name:"tools",value:"procreate",onChange:i,checked:n.tools.includes("procreate"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"procreate",children:"Procreate"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"clipstudio",name:"tools",value:"clip-studio",onChange:i,checked:n.tools.includes("clip-studio"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"clipstudio",children:"Clip Studio"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"blender",name:"tools",value:"blender",onChange:i,checked:n.tools.includes("blender"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"blender",children:"Blender"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"illustrator",name:"tools",value:"illustrator",onChange:i,checked:n.tools.includes("illustrator"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"illustrator",children:"Illustrator"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"other",name:"tools",value:"other",onChange:i,checked:n.tools.includes("other"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"other",children:"Other"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"availability",className:"block mb-2 font-semibold text-muted-foreground",children:["Weekly Availability",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsxs("select",{id:"availability",name:"availability",required:!0,value:n.availability,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[y.jsx("option",{value:"",children:"Select availability"}),y.jsx("option",{value:"10-15",children:"10-15 hours/week"}),y.jsx("option",{value:"15-25",children:"15-25 hours/week"}),y.jsx("option",{value:"25+",children:"25+ hours/week"}),y.jsx("option",{value:"project-sprints",children:"Project-only sprints"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"startDate",className:"block mb-2 font-semibold text-muted-foreground",children:["Earliest Start Date",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"date",id:"startDate",name:"startDate",required:!0,value:n.startDate,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"commitment",className:"block mb-2 font-semibold text-muted-foreground",children:"Time Commitment Window"}),y.jsx("input",{type:"text",id:"commitment",name:"commitment",placeholder:"e.g., 'I can commit for 3 months' or 'Available through Q2 2025'",value:n.commitment,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Portfolio & Samples"]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"portfolioUpload",className:"block mb-2 font-semibold text-muted-foreground",children:"Portfolio Upload (3-6 images, optional)"}),y.jsxs("div",{className:"file-upload border-2 border-dashed border-primary rounded-lg p-8 text-center bg-card transition-colors duration-300 ease-in-out hover:bg-blue-50",onDragOver:l,onDragLeave:c,onDrop:f=>u(f,"portfolioUpload"),children:[" ",y.jsx("input",{type:"file",id:"portfolioUpload",name:"portfolioUpload",multiple:!0,accept:"image/*",onChange:f=>o(f,"portfolioUpload"),ref:f=>{t.current.portfolioUpload=f},className:"hidden"})," ",y.jsxs("p",{className:"text-muted-foreground",children:["Drop files here or ",y.jsx("span",{className:"text-primary cursor-pointer",onClick:()=>{var f;return(f=t.current.portfolioUpload)==null?void 0:f.click()},children:"click to browse"}),y.jsx("br",{}),y.jsx("small",{children:"JPG/PNG, max 5MB per file"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"bestPieces",className:"block mb-2 font-semibold text-muted-foreground",children:["Direct Links to 3-5 Best Pieces",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("textarea",{id:"bestPieces",name:"bestPieces",placeholder:"Please provide direct links to your best work that showcases your style and skill",required:!0,value:n.bestPieces,onChange:i,ref:f=>{r.current.bestPieces=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"customSample",className:"block mb-2 font-semibold text-muted-foreground",children:"Custom Sample for This Project (optional)"}),y.jsxs("div",{className:"file-upload border-2 border-dashed border-primary rounded-lg p-8 text-center bg-card transition-colors duration-300 ease-in-out hover:bg-blue-50",children:[y.jsx("input",{type:"file",id:"customSample",name:"customSample",accept:"image/*",onChange:f=>o(f,"customSample"),ref:f=>{t.current.customSample=f},className:"hidden"}),y.jsxs("p",{className:"text-muted-foreground",children:["Upload a custom piece based on our world concept",y.jsx("br",{}),y.jsx("small",{children:"Not required but highly encouraged"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"makingOfNotes",className:"block mb-2 font-semibold text-muted-foreground",children:"Brief Making-of Notes (optional)"}),y.jsx("textarea",{id:"makingOfNotes",name:"makingOfNotes",placeholder:"Describe your approach, tools, or references used (50-150 words)",value:n.makingOfNotes,onChange:i,ref:f=>{r.current.makingOfNotes=f},"data-maxlength":"150",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Style & Fit Questions"]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"visualInfluences",className:"block mb-2 font-semibold text-muted-foreground",children:["Visual Influences for This Project",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("textarea",{id:"visualInfluences",name:"visualInfluences",placeholder:"What visual influences, artists, or styles do you think overlap with this Persian/Zoroastrian-influenced sci-fi world? (100-200 words)",required:!0,value:n.visualInfluences,onChange:i,ref:f=>{r.current.visualInfluences=f},"data-maxlength":"200",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"worldVisualization",className:"block mb-2 font-semibold text-muted-foreground",children:["World Visualization",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("textarea",{id:"worldVisualization",name:"worldVisualization",placeholder:"Describe how you'd visualize: cliffside megacity Vənāsō, space elevator, 'soft war' sky, oath-bound warrior (Hooran) (150-250 words)",required:!0,value:n.worldVisualization,onChange:i,ref:f=>{r.current.worldVisualization=f},"data-maxlength":"250",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"feedbackProcess",className:"block mb-2 font-semibold text-muted-foreground",children:["Feedback & Revision Process",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("textarea",{id:"feedbackProcess",name:"feedbackProcess",placeholder:"How do you handle feedback and revisions? What's your typical process? (100-200 words)",required:!0,value:n.feedbackProcess,onChange:i,ref:f=>{r.current.feedbackProcess=f},"data-maxlength":"200",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"colorGrading",className:"block mb-2 font-semibold text-muted-foreground",children:"Preferred Color Grading"}),y.jsx("input",{type:"text",id:"colorGrading",name:"colorGrading",placeholder:"e.g., 'Cool teals/slates with warm amber accents' or 'Muted earth tones with electric blues'",value:n.colorGrading,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Process & Reliability"]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"references",className:"block mb-2 font-semibold text-muted-foreground",children:"Past Client References or Shipped Work"}),y.jsx("textarea",{id:"references",name:"references",placeholder:"Links to published work, client testimonials, or references (optional)",value:n.references,onChange:i,ref:f=>{r.current.references=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"turnaround",className:"block mb-2 font-semibold text-muted-foreground",children:["Typical Turnaround for Single Finished Piece",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsxs("select",{id:"turnaround",name:"turnaround",required:!0,value:n.turnaround,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[y.jsx("option",{value:"",children:"Select timeframe"}),y.jsx("option",{value:"3-5-days",children:"3-5 days"}),y.jsx("option",{value:"1-2-weeks",children:"1-2 weeks"}),y.jsx("option",{value:"2-4-weeks",children:"2-4 weeks"}),y.jsx("option",{value:">4-weeks",children:"More than 4 weeks"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"revisionPolicy",className:"block mb-2 font-semibold text-muted-foreground",children:["Revision Policy",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"text",id:"revisionPolicy",name:"revisionPolicy",placeholder:"e.g., '2 rounds of revisions included, additional rounds at hourly rate'",required:!0,value:n.revisionPolicy,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Compensation Preferences"]}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"radio",name:"revenueShareWilling",value:"yes",required:!0,onChange:i,checked:n.revenueShareWilling==="yes",className:"w-auto mr-2"}),"Yes, I'm willing to work for revenue share until sales begin"]})}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"radio",name:"revenueShareWilling",value:"no",required:!0,onChange:i,checked:n.revenueShareWilling==="no",className:"w-auto mr-2"}),"No, I prefer upfront payment"]})}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"preferredTrack",className:"block mb-2 font-semibold text-muted-foreground",children:"If yes to revenue share, preferred track:"}),y.jsxs("select",{id:"preferredTrack",name:"preferredTrack",value:n.preferredTrack,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[y.jsx("option",{value:"",children:"Select preferred track"}),y.jsx("option",{value:"track-a",children:"Track A: Higher percentage, 12 months"}),y.jsx("option",{value:"track-b",children:"Track B: Lower percentage, 24 months"}),y.jsx("option",{value:"flexible",children:"Flexible/Open to discussion"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"taxConstraints",className:"block mb-2 font-semibold text-muted-foreground",children:"Tax or Invoicing Constraints"}),y.jsx("input",{type:"text",id:"taxConstraints",name:"taxConstraints",placeholder:"Any specific requirements for your country/region? (optional)",value:n.taxConstraints,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Legal & Agreements"]}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"checkbox",name:"projectPortal",required:!0,onChange:i,checked:n.projectPortal,className:"w-auto mr-2"}),"I consent to using the project portal/workflow system"]})}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"checkbox",name:"ndaAcceptance",required:!0,onChange:i,checked:n.ndaAcceptance,className:"w-auto mr-2"}),"I accept NDA/Confidentiality requirements"]})}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"checkbox",name:"originalityConfirm",required:!0,onChange:i,checked:n.originalityConfirm,className:"w-auto mr-2"}),"I confirm originality of my work and ability to grant licensing rights"]})}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"checkbox",name:"rightsConfirm",required:!0,onChange:i,checked:n.rightsConfirm,className:"w-auto mr-2"}),"I confirm my ability to grant project-specific rights as outlined"]})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"signature",className:"block mb-2 font-semibold text-muted-foreground",children:["Digital Signature",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"text",id:"signature",name:"signature",placeholder:"Type your full name",required:!0,value:n.signature,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"signatureDate",className:"block mb-2 font-semibold text-muted-foreground",children:["Date",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"date",id:"signatureDate",name:"signatureDate",required:!0,value:n.signatureDate,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]})]}),y.jsx("button",{type:"submit",className:"w-full py-4 px-8 bg-gradient-to-br from-primary to-accent text-white font-semibold text-lg rounded-lg border-none cursor-pointer transition-all duration-300 ease-in-out mt-8 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-primary/50",children:"Apply to Collaborate"})," "]})]})]})]})},A$={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_STRIPE_PUBLISHABLE_KEY:"pk_live_51RxGqHQv3TvmaocsigmbkzARDylf5d34zCKW0INXPNSvz9XPZKWcgSavRvi5TarLZSBNyZR7ROgsMQxSDd0AOdl200sNB27qOy",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s",VITE_SUPABASE_URL:"https://opukvvmumyegtkukqint.supabase.co"},$Ke=()=>{const e="pk_live_51RxGqHQv3TvmaocsigmbkzARDylf5d34zCKW0INXPNSvz9XPZKWcgSavRvi5TarLZSBNyZR7ROgsMQxSDd0AOdl200sNB27qOy";console.log("🔑 Stripe key loaded:",e),console.log("🔑 Environment variables:",A$);const t=`Found: ${e.substring(0,20)}...`,r=e!=null&&e.startsWith("pk_test_")?"Test Key":e!=null&&e.startsWith("pk_live_")?"Live Key":"Unknown";return y.jsx("div",{style:{minHeight:"100vh",padding:"20px",fontFamily:"Arial, sans-serif"},children:y.jsxs("div",{style:{maxWidth:"500px",margin:"0 auto",border:"1px solid #ccc",borderRadius:"8px",padding:"20px"},children:[y.jsx("h1",{style:{fontSize:"24px",marginBottom:"20px"},children:"Stripe Configuration Test"}),y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("strong",{children:"Stripe Key Status:"}),y.jsx("div",{style:{padding:"10px",margin:"5px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#d4edda",color:"#155724"},children:t})]}),y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("strong",{children:"Key Type:"}),y.jsx("div",{style:{padding:"10px",margin:"5px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#d1ecf1"},children:r})]}),y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("strong",{children:"Environment Variables:"}),y.jsx("div",{style:{padding:"10px",margin:"5px 0",border:"1px solid #ddd",borderRadius:"4px",fontSize:"12px"},children:JSON.stringify(A$,null,2)})]}),y.jsx("button",{onClick:()=>window.location.href="/subscriptions",style:{width:"100%",padding:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Go to Subscriptions Page"})]})})},FKe=()=>{const[e,t]=ee.useState(null),r=Tu();return ee.useEffect(()=>{r.pageSlug&&qee(r.pageSlug).then(t)},[r.pageSlug]),y.jsxs(Uee,{children:[y.jsx(k7e,{}),y.jsxs(tF,{children:[y.jsx(Ae,{path:"/login",element:y.jsx(_ue,{})}),y.jsxs(Ae,{element:y.jsx(Ede,{}),children:[y.jsx(Ae,{path:"/",element:y.jsx(Lde,{})}),y.jsx(Ae,{path:"/store",element:y.jsx(_Ke,{})}),y.jsx(Ae,{path:"/checkout",element:y.jsx(bke,{})}),y.jsx(Ae,{path:"/library",element:y.jsx(u0e,{})}),y.jsx(Ae,{path:"/subscriptions",element:y.jsx(rke,{})}),y.jsx(Ae,{path:"/subscription-success",element:y.jsx(nke,{})}),y.jsx(Ae,{path:"/stripe-test",element:y.jsx($Ke,{})}),y.jsxs(Ae,{path:"/wiki",children:[y.jsx(Ae,{index:!0,element:e?y.jsx($j,{page:e}):y.jsx("div",{children:"Loading..."})}),y.jsx(Ae,{path:":folderSlug",element:e?y.jsx($j,{page:e}):y.jsx("div",{children:"Loading..."})}),y.jsx(Ae,{path:":folderSlug/:pageSlug",element:e?y.jsx($j,{page:e}):y.jsx("div",{children:"Loading..."})})]}),y.jsx(Ae,{path:"/timelines",element:y.jsx(rKe,{})}),y.jsx(Ae,{path:"/characters",element:y.jsx(ake,{})}),y.jsx(Ae,{path:"/locations",element:y.jsx(lke,{})}),y.jsx(Ae,{path:"/glossary",element:y.jsx(cke,{})}),y.jsx(Ae,{path:"/reviews",element:y.jsx(uke,{})}),y.jsx(Ae,{path:"/account/*",element:y.jsx(LKe,{})}),y.jsx(Ae,{path:"/blog",element:y.jsx(hke,{})}),y.jsx(Ae,{path:"/blog/:slug",element:y.jsx(kKe,{})}),y.jsx(Ae,{path:"/beta/application",element:y.jsx(E$,{children:y.jsx(nKe,{})})}),y.jsx(Ae,{path:"/artist-collaboration",element:y.jsx(MKe,{})}),y.jsx(Ae,{path:"/read/:workId",element:y.jsx(gke,{})}),y.jsx(Ae,{path:"/beta/status",element:y.jsx(mke,{})}),y.jsx(Ae,{path:"/beta/handbook",element:y.jsx(CWe,{})}),y.jsx(Ae,{path:"/beta/timeline",element:y.jsx(TWe,{})}),y.jsx(Ae,{path:"/beta/nda",element:y.jsx(AWe,{})}),y.jsx(Ae,{path:"/beta/feedback",element:y.jsx(FWe,{})}),y.jsx(Ae,{path:"/beta/portal",element:y.jsx(E$,{children:y.jsx(pke,{})})}),y.jsx(Ae,{path:"/:slug",element:y.jsx(SKe,{})}),y.jsx(Ae,{path:"*",element:y.jsx(fke,{})})]}),y.jsxs(Ae,{path:"/account/admin",element:y.jsx(nde,{children:y.jsx(rde,{})}),children:[y.jsx(Ae,{index:!0,element:y.jsx(U5e,{})}),y.jsx(Ae,{path:"homepage-content",element:y.jsx(ULe,{})}),y.jsx(Ae,{path:"posts",element:y.jsx(UUe,{})}),y.jsx(Ae,{path:"pages",element:y.jsx(c7e,{})}),y.jsx(Ae,{path:"characters",element:y.jsx(m7e,{})}),y.jsx(Ae,{path:"works",element:y.jsx(w7e,{})}),y.jsx(Ae,{path:"upload-work",element:y.jsx(_7e,{})}),y.jsx(Ae,{path:"upload-chapter",element:y.jsx(E7e,{})}),y.jsx(Ae,{path:"users",element:y.jsx(j7e,{})}),y.jsx(Ae,{path:"beta-applications",element:y.jsx(zWe,{})}),y.jsx(Ae,{path:"wiki",element:y.jsx(e$,{})}),y.jsx(Ae,{path:"wiki/folder/:folderId",element:y.jsx(e$,{})}),y.jsx(Ae,{path:"wiki/new",element:y.jsx(dE,{})}),y.jsx(Ae,{path:"wiki/edit/:id",element:y.jsx(dE,{})}),y.jsx(Ae,{path:"timeline/events",element:y.jsx(WVe,{})}),y.jsx(Ae,{path:"store",element:y.jsx(s0e,{})}),y.jsx(Ae,{path:"library",element:y.jsx("div",{children:"Library Management Coming Soon!"})}),y.jsx(Ae,{path:"characters",element:y.jsx("div",{children:"Characters Management Coming Soon!"})}),y.jsx(Ae,{path:"beta-program",element:y.jsx("div",{children:"Beta Program Management Coming Soon!"})}),y.jsx(Ae,{path:"media",element:y.jsx("div",{children:"Media Management Coming Soon!"})}),y.jsx(Ae,{path:"settings",element:y.jsx("div",{children:"Settings Coming Soon!"})})]})]})]})},zKe=new jie;Vk.createRoot(document.getElementById("root")).render(y.jsxs(ee.StrictMode,{children:[y.jsxs(pQ,{children:[" ",y.jsx(Cie,{client:zKe,children:y.jsx($ee,{supabaseClient:UJ,children:y.jsx(FKe,{})})})]})," "]}));export{wp as A,ni as B,xp as C,qC as G,BC as H,UC as K,jp as P,_p as T,Up as W,Ke as Z,Bbe as a,d as c,ht as f,Tn as k,Ps as w};
