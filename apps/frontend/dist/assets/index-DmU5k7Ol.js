const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PriceManager-DsbB1g1r-BCZIDD7g.js","assets/react-CVbheGn-.js"])))=>i.map(i=>d[i]);
var oO=e=>{throw TypeError(e)};var S0=(e,t,r)=>t.has(e)||oO("Cannot "+r);var U=(e,t,r)=>(S0(e,t,"read from private field"),r?r.call(e):t.get(e)),Fe=(e,t,r)=>t.has(e)?oO("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ne=(e,t,r,n)=>(S0(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),tt=(e,t,r)=>(S0(e,t,"access private method"),r);var Ng=(e,t,r,n)=>({set _(s){Ne(e,t,s,r)},get _(){return U(e,t,n)}});import{r as g,a as to,q as kL,R as ue,_ as SL,g as XH,c as Ts}from"./react-CVbheGn-.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var NL={exports:{}},Hb={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eK=g,tK=Symbol.for("react.element"),rK=Symbol.for("react.fragment"),nK=Object.prototype.hasOwnProperty,sK=eK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iK={key:!0,ref:!0,__self:!0,__source:!0};function CL(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)nK.call(t,n)&&!iK.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:tK,type:e,key:i,ref:o,props:s,_owner:sK.current}}Hb.Fragment=rK;Hb.jsx=CL;Hb.jsxs=CL;NL.exports=Hb;var y=NL.exports,Dj={},aO=to;Dj.createRoot=aO.createRoot,Dj.hydrateRoot=aO.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lO="popstate";function oK(e={}){function t(n,s){let{pathname:i,search:o,hash:a}=n.location;return Mj("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Cp(s)}return lK(t,r,null,e)}function It(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aK(){return Math.random().toString(36).substring(2,10)}function cO(e,t){return{usr:e.state,key:e.key,idx:t}}function Mj(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?fh(t):t,state:r,key:t&&t.key||n||aK()}}function Cp({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fh(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function lK(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let b=u(),x=b==null?null:b-c;c=b,l&&l({action:a,location:m.location,delta:x})}function f(b,x){a="PUSH";let w=Mj(m.location,b,x);c=u()+1;let _=cO(w,c),j=m.createHref(w);try{o.pushState(_,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(j)}i&&l&&l({action:a,location:m.location,delta:1})}function p(b,x){a="REPLACE";let w=Mj(m.location,b,x);c=u();let _=cO(w,c),j=m.createHref(w);o.replaceState(_,"",j),i&&l&&l({action:a,location:m.location,delta:0})}function v(b){return cK(b)}let m={get action(){return a},get location(){return e(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(lO,h),l=b,()=>{s.removeEventListener(lO,h),l=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let x=v(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(b){return o.go(b)}};return m}function cK(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),It(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Cp(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function EL(e,t,r="/"){return uK(e,t,r,!1)}function uK(e,t,r,n){let s=typeof t=="string"?fh(t):t,i=Vo(s.pathname||"/",r);if(i==null)return null;let o=TL(e);dK(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=_K(i);a=xK(o[l],c,n)}return a}function TL(e,t=[],r=[],n="",s=!1){let i=(o,a,l=s,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;It(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=Uo([n,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(It(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),TL(o.children,t,f,h,l)),!(o.path==null&&!o.index)&&t.push({path:h,score:vK(h,o.index),routesMeta:f})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of AL(o.path))i(o,a,!0,c)}),t}function AL(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=AL(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function dK(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:bK(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var hK=/^:[\w-]+$/,fK=3,pK=2,mK=1,gK=10,yK=-2,uO=e=>e==="*";function vK(e,t){let r=e.split("/"),n=r.length;return r.some(uO)&&(n+=yK),t&&(n+=pK),r.filter(s=>!uO(s)).reduce((s,i)=>s+(hK.test(i)?fK:i===""?mK:gK),n)}function bK(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function xK(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=ov({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=ov({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Uo([i,h.pathname]),pathnameBase:NK(Uo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Uo([i,h.pathnameBase]))}return o}function ov(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=wK(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:h},f)=>{if(u==="*"){let v=a[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function wK(e,t=!1,r=!0){pi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function _K(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return pi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Vo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function jK(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?fh(e):e;return{pathname:r?r.startsWith("/")?r:kK(r,t):t,search:CK(n),hash:EK(s)}}function kK(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function N0(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SK(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function r2(e){let t=SK(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function n2(e,t,r,n=!1){let s;typeof e=="string"?s=fh(e):(s={...e},It(!s.pathname||!s.pathname.includes("?"),N0("?","pathname","search",s)),It(!s.pathname||!s.pathname.includes("#"),N0("#","pathname","hash",s)),It(!s.search||!s.search.includes("#"),N0("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?t[h]:"/"}let l=jK(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Uo=e=>e.join("/").replace(/\/\/+/g,"/"),NK=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),CK=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,EK=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function TK(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var OL=["POST","PUT","PATCH","DELETE"];new Set(OL);var AK=["GET",...OL];new Set(AK);var ph=g.createContext(null);ph.displayName="DataRouter";var Kb=g.createContext(null);Kb.displayName="DataRouterState";g.createContext(!1);var PL=g.createContext({isTransitioning:!1});PL.displayName="ViewTransition";var OK=g.createContext(new Map);OK.displayName="Fetchers";var PK=g.createContext(null);PK.displayName="Await";var xi=g.createContext(null);xi.displayName="Navigation";var _m=g.createContext(null);_m.displayName="Location";var Ds=g.createContext({outlet:null,matches:[],isDataRoute:!1});Ds.displayName="Route";var s2=g.createContext(null);s2.displayName="RouteError";function RK(e,{relative:t}={}){It(mh(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=g.useContext(xi),{hash:s,pathname:i,search:o}=jm(e,{relative:t}),a=i;return r!=="/"&&(a=i==="/"?r:Uo([r,i])),n.createHref({pathname:a,search:o,hash:s})}function mh(){return g.useContext(_m)!=null}function la(){return It(mh(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(_m).location}var RL="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DL(e){g.useContext(xi).static||g.useLayoutEffect(e)}function i2(){let{isDataRoute:e}=g.useContext(Ds);return e?YK():DK()}function DK(){It(mh(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(ph),{basename:t,navigator:r}=g.useContext(xi),{matches:n}=g.useContext(Ds),{pathname:s}=la(),i=JSON.stringify(r2(n)),o=g.useRef(!1);return DL(()=>{o.current=!0}),g.useCallback((l,c={})=>{if(pi(o.current,RL),!o.current)return;if(typeof l=="number"){r.go(l);return}let u=n2(l,JSON.parse(i),s,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Uo([t,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[t,r,i,s,e])}var MK=g.createContext(null);function IK(e){let t=g.useContext(Ds).outlet;return t&&g.createElement(MK.Provider,{value:e},t)}function o2(){let{matches:e}=g.useContext(Ds),t=e[e.length-1];return t?t.params:{}}function jm(e,{relative:t}={}){let{matches:r}=g.useContext(Ds),{pathname:n}=la(),s=JSON.stringify(r2(r));return g.useMemo(()=>n2(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function LK(e,t){return ML(e,t)}function ML(e,t,r,n,s){var w;It(mh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(xi),{matches:o}=g.useContext(Ds),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";IL(c,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=la(),p;if(t){let _=typeof t=="string"?fh(t):t;It(u==="/"||((w=_.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=f;let v=p.pathname||"/",m=v;if(u!=="/"){let _=u.replace(/^\//,"").split("/");m="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=EL(e,{pathname:m});pi(h||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),pi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=qK(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Uo([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Uo([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,r,n,s);return t&&x?g.createElement(_m.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function FK(){let e=KK(),t=TK(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:s},r):null,o)}var $K=g.createElement(FK,null),zK=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Ds.Provider,{value:this.props.routeContext},g.createElement(s2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UK({routeContext:e,match:t,children:r}){let n=g.useContext(ph);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Ds.Provider,{value:e},r)}function qK(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let c=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);It(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,l=-1;if(r)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:f}=r,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,u,h)=>{let f,p=!1,v=null,m=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,v=u.route.errorElement||$K,a&&(l<0&&h===0?(IL("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,m=null):l===h&&(p=!0,m=u.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,h+1)),x=()=>{let w;return f?w=v:p?w=m:u.route.Component?w=g.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=c,g.createElement(UK,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?g.createElement(zK,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):x()},null)}function a2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BK(e){let t=g.useContext(ph);return It(t,a2(e)),t}function WK(e){let t=g.useContext(Kb);return It(t,a2(e)),t}function VK(e){let t=g.useContext(Ds);return It(t,a2(e)),t}function l2(e){let t=VK(e),r=t.matches[t.matches.length-1];return It(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function HK(){return l2("useRouteId")}function KK(){var n;let e=g.useContext(s2),t=WK("useRouteError"),r=l2("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function YK(){let{router:e}=BK("useNavigate"),t=l2("useNavigate"),r=g.useRef(!1);return DL(()=>{r.current=!0}),g.useCallback(async(s,i={})=>{pi(r.current,RL),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var dO={};function IL(e,t,r){!t&&!dO[e]&&(dO[e]=!0,pi(!1,r))}g.memo(GK);function GK({routes:e,future:t,state:r,unstable_onError:n}){return ML(e,void 0,r,n,t)}function ZK({to:e,replace:t,state:r,relative:n}){It(mh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=g.useContext(xi);pi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=g.useContext(Ds),{pathname:o}=la(),a=i2(),l=n2(e,r2(i),o,n==="path"),c=JSON.stringify(l);return g.useEffect(()=>{a(JSON.parse(c),{replace:t,state:r,relative:n})},[a,c,n,t,r]),null}function JK(e){return IK(e.context)}function Te(e){It(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QK({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){It(!mh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=g.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=fh(r));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:f="default"}=r,p=g.useMemo(()=>{let v=Vo(l,o);return v==null?null:{location:{pathname:v,search:c,hash:u,state:h,key:f},navigationType:n}},[o,l,c,u,h,f,n]);return pi(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:g.createElement(xi.Provider,{value:a},g.createElement(_m.Provider,{children:t,value:p}))}function LL({children:e,location:t}){return LK(Ij(e),t)}function Ij(e,t=[]){let r=[];return g.Children.forEach(e,(n,s)=>{if(!g.isValidElement(n))return;let i=[...t,s];if(n.type===g.Fragment){r.push.apply(r,Ij(n.props.children,i));return}It(n.type===Te,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),It(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ij(n.props.children,i)),r.push(o)}),r}var My="get",Iy="application/x-www-form-urlencoded";function Yb(e){return e!=null&&typeof e.tagName=="string"}function XK(e){return Yb(e)&&e.tagName.toLowerCase()==="button"}function eY(e){return Yb(e)&&e.tagName.toLowerCase()==="form"}function tY(e){return Yb(e)&&e.tagName.toLowerCase()==="input"}function rY(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nY(e,t){return e.button===0&&(!t||t==="_self")&&!rY(e)}var Cg=null;function sY(){if(Cg===null)try{new FormData(document.createElement("form"),0),Cg=!1}catch{Cg=!0}return Cg}var iY=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function C0(e){return e!=null&&!iY.has(e)?(pi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Iy}"`),null):e}function oY(e,t){let r,n,s,i,o;if(eY(e)){let a=e.getAttribute("action");n=a?Vo(a,t):null,r=e.getAttribute("method")||My,s=C0(e.getAttribute("enctype"))||Iy,i=new FormData(e)}else if(XK(e)||tY(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?Vo(l,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||My,s=C0(e.getAttribute("formenctype"))||C0(a.getAttribute("enctype"))||Iy,i=new FormData(a,e),!sY()){let{name:c,type:u,value:h}=e;if(u==="image"){let f=c?`${c}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else c&&i.append(c,h)}}else{if(Yb(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=My,n=null,s=Iy,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function c2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function aY(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Vo(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function lY(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cY(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function uY(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await lY(i,r);return o.links?o.links():[]}return[]}));return pY(n.flat(1).filter(cY).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function hO(e,t,r,n,s,i){let o=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,a=(l,c)=>{var u;return r[c].pathname!==l.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?t.filter((l,c)=>{var h;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function dY(e,t,{includeHydrateFallback:r}={}){return hY(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function hY(e){return[...new Set(e)]}function fY(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function pY(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(fY(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function FL(){let e=g.useContext(ph);return c2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function mY(){let e=g.useContext(Kb);return c2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var u2=g.createContext(void 0);u2.displayName="FrameworkContext";function $L(){let e=g.useContext(u2);return c2(e,"You must render this element inside a <HydratedRouter> element"),e}function gY(e,t){let r=g.useContext(u2),[n,s]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=t,f=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=x=>{x.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(m,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[e]),g.useEffect(()=>{if(n){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[n]);let p=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:tf(a,p),onBlur:tf(l,v),onMouseEnter:tf(c,p),onMouseLeave:tf(u,v),onTouchStart:tf(h,p)}]:[!1,f,{}]}function tf(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function yY({page:e,...t}){let{router:r}=FL(),n=g.useMemo(()=>EL(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?g.createElement(bY,{page:e,matches:n,...t}):null}function vY(e){let{manifest:t,routeModules:r}=$L(),[n,s]=g.useState([]);return g.useEffect(()=>{let i=!1;return uY(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function bY({page:e,matches:t,...r}){let n=la(),{manifest:s,routeModules:i}=$L(),{basename:o}=FL(),{loaderData:a,matches:l}=mY(),c=g.useMemo(()=>hO(e,t,l,s,n,"data"),[e,t,l,s,n]),u=g.useMemo(()=>hO(e,t,l,s,n,"assets"),[e,t,l,s,n]),h=g.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let v=new Set,m=!1;if(t.forEach(x=>{var _;let w=s.routes[x.route.id];!w||!w.hasLoader||(!c.some(j=>j.route.id===x.route.id)&&x.route.id in a&&((_=i[x.route.id])!=null&&_.shouldRevalidate)||w.hasClientLoader?m=!0:v.add(x.route.id))}),v.size===0)return[];let b=aY(e,o,"data");return m&&v.size>0&&b.searchParams.set("_routes",t.filter(x=>v.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[o,a,n,s,c,t,e,i]),f=g.useMemo(()=>dY(u,s),[u,s]),p=vY(u);return g.createElement(g.Fragment,null,h.map(v=>g.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),f.map(v=>g.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),p.map(({key:v,link:m})=>g.createElement("link",{key:v,nonce:r.nonce,...m})))}function xY(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var zL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zL&&(window.__reactRouterVersion="7.8.2")}catch{}function wY({basename:e,children:t,window:r}){let n=g.useRef();n.current==null&&(n.current=oK({window:r,v5Compat:!0}));let s=n.current,[i,o]=g.useState({action:s.action,location:s.location}),a=g.useCallback(l=>{g.startTransition(()=>o(l))},[o]);return g.useLayoutEffect(()=>s.listen(a),[s,a]),g.createElement(QK,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var UL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,av=g.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h,...f},p){let{basename:v}=g.useContext(xi),m=typeof c=="string"&&UL.test(c),b,x=!1;if(typeof c=="string"&&m&&(b=c,zL))try{let T=new URL(window.location.href),O=c.startsWith("//")?new URL(T.protocol+c):new URL(c),P=Vo(O.pathname,v);O.origin===T.origin&&P!=null?c=P+O.search+O.hash:x=!0}catch{pi(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=RK(c,{relative:s}),[_,j,k]=gY(n,f),S=kY(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function E(T){t&&t(T),T.defaultPrevented||S(T)}let C=g.createElement("a",{...f,...k,href:b||w,onClick:x||i?t:E,ref:xY(p,j),target:l,"data-discover":!m&&r==="render"?"true":void 0});return _&&!m?g.createElement(g.Fragment,null,C,g.createElement(yY,{page:w})):C});av.displayName="Link";var qL=g.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let h=jm(o,{relative:c.relative}),f=la(),p=g.useContext(Kb),{navigator:v,basename:m}=g.useContext(xi),b=p!=null&&TY(h)&&a===!0,x=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=f.pathname,_=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(w=w.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&m&&(_=Vo(_,m)||_);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let k=w===x||!s&&w.startsWith(x)&&w.charAt(j)==="/",S=_!=null&&(_===x||!s&&_.startsWith(x)&&_.charAt(x.length)==="/"),E={isActive:k,isPending:S,isTransitioning:b},C=k?t:void 0,T;typeof n=="function"?T=n(E):T=[n,k?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let O=typeof i=="function"?i(E):i;return g.createElement(av,{...c,"aria-current":C,className:T,ref:u,style:O,to:o,viewTransition:a},typeof l=="function"?l(E):l)});qL.displayName="NavLink";var _Y=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=My,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...f},p)=>{let v=CY(),m=EY(a,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&UL.test(a),w=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let j=_.nativeEvent.submitter,k=(j==null?void 0:j.getAttribute("formmethod"))||o;v(j||_.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:h})};return g.createElement("form",{ref:p,method:b,action:m,onSubmit:n?l:w,...f,"data-discover":!x&&e==="render"?"true":void 0})});_Y.displayName="Form";function jY(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BL(e){let t=g.useContext(ph);return It(t,jY(e)),t}function kY(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=i2(),l=la(),c=jm(e,{relative:i});return g.useCallback(u=>{if(nY(u,t)){u.preventDefault();let h=r!==void 0?r:Cp(l)===Cp(c);a(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,r,n,t,e,s,i,o])}var SY=0,NY=()=>`__${String(++SY)}__`;function CY(){let{router:e}=BL("useSubmit"),{basename:t}=g.useContext(xi),r=HK();return g.useCallback(async(n,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=oY(n,t);if(s.navigate===!1){let u=s.fetcherKey||NY();await e.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function EY(e,{relative:t}={}){let{basename:r}=g.useContext(xi),n=g.useContext(Ds);It(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...jm(e||".",{relative:t})},o=la();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let u=a.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Uo([r,i.pathname])),Cp(i)}function TY(e,{relative:t}={}){let r=g.useContext(PL);It(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=BL("useViewTransitionState"),s=jm(e,{relative:t});if(!r.isTransitioning)return!1;let i=Vo(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Vo(r.nextLocation.pathname,n)||r.nextLocation.pathname;return ov(s.pathname,o)!=null||ov(s.pathname,i)!=null}const AY="modulepreload",OY=function(e){return"/"+e},fO={},gh=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=OY(l),l in fO)return;fO[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":AY,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};var Gb={VITE_API_BASE_URL:"http://localhost:3001/api",VITE_BACKEND_URL:"http://localhost:3001",VITE_SUPABASE_URL:"https://opukvvmumyegtkukqint.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s",VITE_STRIPE_PUBLISHABLE_KEY:"pk_test_your_publishable_key_here",VITE_APP_NAME:"Zoroasterverse",VITE_APP_VERSION:"1.0.0",VITE_ENABLE_STRIPE:"true",VITE_ENABLE_SUBSCRIPTIONS:"true",VITE_ENABLE_FILE_PREVIEWS:"true",VITE_ENABLE_ANALYTICS:"true",VITE_DEBUG:"true",VITE_LOG_LEVEL:"debug",ALLUSERSPROFILE:"C:\\ProgramData",APPDATA:"C:\\Users\\Sinap\\AppData\\Roaming",ChocolateyInstall:"C:\\ProgramData\\chocolatey",ChocolateyLastPathUpdate:"133980423376552877",CLion:"C:\\Program Files\\JetBrains\\CLion 2024.1.4\\bin;",CommonProgramFiles:"C:\\Program Files\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files",CommonProgramW6432:"C:\\Program Files\\Common Files",COMPUTERNAME:"WARDRIC",ComSpec:"C:\\WINDOWS\\system32\\cmd.exe",DriverData:"C:\\Windows\\System32\\Drivers\\DriverData",EFC_10432_1262719628:"1",EFC_10432_1592913036:"1",EFC_10432_2283032206:"1",EFC_10432_2775293581:"1",EFC_10432_3789132940:"1",FPS_BROWSER_APP_PROFILE_STRING:"Internet Explorer",FPS_BROWSER_USER_PROFILE_STRING:"Default",HOME:"C:\\Users\\Sinap",HOMEDRIVE:"C:",HOMEPATH:"\\Users\\Sinap",INIT_CWD:"C:\\Users\\Sinap\\OneDrive\\WORK\\MACHINE LEARNING\\MACHINE LEARNING\\Website\\ZOROASTERVERSE\\apps\\frontend",LOCALAPPDATA:"C:\\Users\\Sinap\\AppData\\Local",LOGONSERVER:"\\\\WARDRIC",NODE:"C:\\nvm4w\\nodejs\\node.exe",NODE_ENV:"production",npm_command:"run-script",npm_config_auto_install_peers:"true",npm_config_frozen_lockfile:"",npm_config_node_gyp:"C:\\Users\\Sinap\\AppData\\Local\\pnpm\\.tools\\pnpm\\8.15.0\\node_modules\\pnpm\\dist\\node_modules\\node-gyp\\bin\\node-gyp.js",npm_config_node_linker:"hoisted",npm_config_prefer_frozen_lockfile:"",npm_config_prefer_offline:"true",npm_config_prefix:"C:\\Users\\Sinap\\npm-global",npm_config_registry:"https://registry.npmjs.org/",npm_config_shamefully_hoist:"true",npm_config_shared_workspace_shrinkwrap:"",npm_config_strict_peer_dependencies:"",npm_config_strict_ssl:"",npm_config_user_agent:"pnpm/8.15.0 npm/? node/v24.6.0 win32 x64",npm_execpath:"C:\\Users\\Sinap\\AppData\\Local\\pnpm\\.tools\\pnpm\\8.15.0\\node_modules\\pnpm\\bin\\pnpm.cjs",npm_lifecycle_event:"build",npm_lifecycle_script:"pnpm build:deps && vite build",npm_node_execpath:"C:\\nvm4w\\nodejs\\node.exe",npm_package_dependencies_bulma:"^1.0.4",npm_package_dependencies_classnames:"^2.5.1",npm_package_dependencies_class_variance_authority:"^0.7.1",npm_package_dependencies_clsx:"^2.1.1",npm_package_dependencies_date_fns:"^4.1.0",npm_package_dependencies_lexical:"^0.16.0",npm_package_dependencies_lucide_react:"^0.400.0",npm_package_dependencies_quill:"^2.0.3",npm_package_dependencies_react:"^18.2.0",npm_package_dependencies_react_dom:"^18.2.0",npm_package_dependencies_react_hook_form:"^7.62.0",npm_package_dependencies_react_hot_toast:"^2.6.0",npm_package_dependencies_react_router_dom:"^7.8.1",npm_package_dependencies_react_select:"^5.10.2",npm_package_dependencies_recharts:"^3.1.2",npm_package_dependencies_rehype_katex:"^7.0.1",npm_package_dependencies_remark_gfm:"^4.0.1",npm_package_dependencies_remark_math:"^6.0.0",npm_package_dependencies_sonner:"^2.0.7",npm_package_dependencies_tailwindcss_animate:"^1.0.7",npm_package_dependencies_tailwind_merge:"^3.3.1",npm_package_dependencies_uuid:"^11.1.0",npm_package_dependencies_zod:"^4.0.17",npm_package_dependencies__dnd_kit_core:"^6.3.1",npm_package_dependencies__dnd_kit_modifiers:"^6.0.0",npm_package_dependencies__dnd_kit_sortable:"^7.0.2",npm_package_dependencies__dnd_kit_utilities:"^3.2.1",npm_package_dependencies__hookform_resolvers:"^5.2.1",npm_package_dependencies__lexical_react:"^0.16.0",npm_package_dependencies__radix_ui_react_alert_dialog:"^1.1.15",npm_package_dependencies__radix_ui_react_dialog:"^1.1.15",npm_package_dependencies__radix_ui_react_label:"^2.1.7",npm_package_dependencies__radix_ui_react_slot:"^1.2.3",npm_package_dependencies__radix_ui_react_switch:"^1.2.6",npm_package_dependencies__radix_ui_react_tabs:"^1.1.13",npm_package_dependencies__stripe_react_stripe_js:"^3.9.0",npm_package_dependencies__stripe_stripe_js:"^7.8.0",npm_package_dependencies__supabase_postgrest_js:"^1.21.3",npm_package_dependencies__supabase_supabase_js:"latest",npm_package_dependencies__tailwindcss_line_clamp:"^0.4.4",npm_package_dependencies__tanstack_react_query:"^5.85.3",npm_package_dependencies__tiptap_extension_image:"^3.2.1",npm_package_dependencies__tiptap_extension_link:"^3.2.1",npm_package_dependencies__tiptap_extension_placeholder:"^3.2.1",npm_package_dependencies__tiptap_pm:"^3.2.1",npm_package_dependencies__tiptap_react:"^3.2.1",npm_package_dependencies__tiptap_starter_kit:"^3.2.1",npm_package_dependencies__types_node:"^20.19.11",npm_package_dependencies__types_react_select:"^5.0.0",npm_package_dependencies__types_recharts:"^2.0.1",npm_package_dependencies__types_uuid:"^10.0.0",npm_package_dependencies__zoroaster_shared:"workspace:*",npm_package_dependencies__zoroaster_ui:"workspace:*",npm_package_devDependencies_autoprefixer:"^10.4.21",npm_package_devDependencies_eslint:"^9.33.0",npm_package_devDependencies_eslint_plugin_react_hooks:"^5.2.0",npm_package_devDependencies_eslint_plugin_react_refresh:"^0.4.20",npm_package_devDependencies_globals:"^16.3.0",npm_package_devDependencies_postcss:"^8.4.38",npm_package_devDependencies_tailwindcss:"^3.4.3",npm_package_devDependencies_typescript:"^5.3.3",npm_package_devDependencies_typescript_eslint:"^8.39.1",npm_package_devDependencies_vite:"^5.1.0",npm_package_devDependencies_vite_tsconfig_paths:"^4.3.2",npm_package_devDependencies__babel_plugin_transform_typescript:"^7.28.0",npm_package_devDependencies__eslint_js:"^9.33.0",npm_package_devDependencies__types_react:"^19.1.10",npm_package_devDependencies__types_react_dom:"^19.1.7",npm_package_devDependencies__vitejs_plugin_react:"^5.0.0",npm_package_name:"frontend",npm_package_peerDependencies_react:"^18.2.0",npm_package_peerDependencies_react_dom:"^18.2.0",npm_package_private:"true",npm_package_scripts_build:"pnpm build:deps && vite build",npm_package_scripts_build_deps:"pnpm --filter @zoroaster/shared build && pnpm --filter @zoroaster/ui build",npm_package_scripts_dev:"vite",npm_package_scripts_generate_types:"supabase gen types typescript --project-id opukvvmumyegtkukqint > src/lib/database.types.ts",npm_package_scripts_lint:"eslint .",npm_package_scripts_preview:"vite preview",npm_package_type:"module",npm_package_version:"0.0.0",NUMBER_OF_PROCESSORS:"8",NVM_HOME:"C:\\Users\\Sinap\\AppData\\Local\\nvm",NVM_SYMLINK:"C:\\nvm4w\\nodejs",OneDrive:"C:\\Users\\Sinap\\OneDrive",OneDriveConsumer:"C:\\Users\\Sinap\\OneDrive",OS:"Windows_NT",Path:"C:\\Users\\Sinap\\OneDrive\\WORK\\MACHINE LEARNING\\MACHINE LEARNING\\Website\\ZOROASTERVERSE\\apps\\frontend\\node_modules\\.bin;C:\\Users\\Sinap\\AppData\\Local\\pnpm\\.tools\\pnpm\\8.15.0\\node_modules\\pnpm\\dist\\node-gyp-bin;C:\\Users\\Sinap\\OneDrive\\WORK\\MACHINE LEARNING\\MACHINE LEARNING\\Website\\ZOROASTERVERSE\\node_modules\\.bin;C:\\Users\\Sinap\\AppData\\Local\\pnpm\\.tools\\pnpm\\8.15.0\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Windows Kits\\10\\Windows Performance Toolkit\\;C:\\Program Files (x86)\\Incredibuild;C:\\Program Files\\GitHub CLI\\;C:\\Program Files\\CMake\\bin;C:\\Program Files\\Cloudflare\\Cloudflare WARP\\;C:\\Users\\Sinap\\AppData\\Local\\nvm;C:\\nvm4w\\nodejs;C:\\Program Files\\nodejs\\;C:\\Users\\Sinap\\AppData\\Local\\nvm;C:\\Users\\Sinap\\npm-global;C:\\Users\\Sinap\\npm-global\\bin;C:\\Program Files\\Void\\bin;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\Git\\cmd;c:\\Users\\Sinap\\AppData\\Local\\Programs\\cursor\\resources\\app\\codeBin;C:\\Users\\Sinap\\scoop\\shims;C:\\Users\\Sinap\\AppData\\Local\\pnpm;C:\\Users\\Sinap\\AppData\\Local\\Programs\\Python\\Python39\\Scripts\\;C:\\Users\\Sinap\\AppData\\Local\\Programs\\Python\\Python39\\;C:\\Users\\Sinap\\AppData\\Local\\Programs\\Python\\Python312\\Scripts\\;C:\\Users\\Sinap\\AppData\\Local\\Programs\\Python\\Python312\\;C:\\Users\\Sinap\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Program Files\\JetBrains\\CLion 2024.1.4\\bin;C:\\Users\\Sinap\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\Sinap\\AppData\\Local\\Microsoft\\WinGet\\Packages\\Schniz.fnm_Microsoft.Winget.Source_8wekyb3d8bbwe;C:\\Users\\Sinap\\.dotnet\\tools;C:\\Users\\Sinap\\.lmstudio\\bin;C:\\Users\\Sinap\\AppData\\Local\\Muse Hub\\lib;C:\\Users\\Sinap\\.dotnet\\tools;C:\\Users\\Sinap\\AppData\\Local\\GitHubDesktop\\bin;C:\\Users\\Sinap\\AppData\\Local\\Programs\\Windsurf\\bin;C:\\Users\\Sinap\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Users\\Sinap\\AppData\\Local\\nvm;C:\\nvm4w\\nodejs;C:\\Users\\Sinap\\AppData\\Roaming\\npm",PATHEXT:".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JSE;.WSF;.WSH;.MSC;.CPL",PNPM_HOME:"C:\\Users\\Sinap\\AppData\\Local\\pnpm",PNPM_SCRIPT_SRC_DIR:"C:\\Users\\Sinap\\OneDrive\\WORK\\MACHINE LEARNING\\MACHINE LEARNING\\Website\\ZOROASTERVERSE\\apps\\frontend",PROCESSOR_ARCHITECTURE:"AMD64",PROCESSOR_IDENTIFIER:"Intel64 Family 6 Model 142 Stepping 10, GenuineIntel",PROCESSOR_LEVEL:"6",PROCESSOR_REVISION:"8e0a",ProgramData:"C:\\ProgramData",ProgramFiles:"C:\\Program Files","ProgramFiles(x86)":"C:\\Program Files (x86)",ProgramW6432:"C:\\Program Files",PROMPT:"$P$G",PSModulePath:"C:\\Users\\Sinap\\OneDrive\\Documents\\WindowsPowerShell\\Modules;C:\\Program Files\\WindowsPowerShell\\Modules;C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\Modules",PUBLIC:"C:\\Users\\Public",SESSIONNAME:"Console",SSH_SOCKET_DIR:"~/.ssh",SystemDrive:"C:",SystemRoot:"C:\\WINDOWS",TEMP:"C:\\Users\\Sinap\\AppData\\Local\\Temp",TERM_PROGRAM:"WarpTerminal",TMP:"C:\\Users\\Sinap\\AppData\\Local\\Temp",USERDOMAIN:"WARDRIC",USERDOMAIN_ROAMINGPROFILE:"WARDRIC",USERNAME:"Sinap",USERPROFILE:"C:\\Users\\Sinap",VS140COMNTOOLS:"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools\\",WARP_HONOR_PS1:"0",WARP_IS_LOCAL_SHELL_SESSION:"1",WARP_SHELL_DEBUG_MODE:"0",WARP_USE_SSH_WRAPPER:"1",windir:"C:\\WINDOWS"},PY=Object.defineProperty,WL=e=>{throw TypeError(e)},RY=(e,t,r)=>t in e?PY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,be=(e,t,r)=>RY(e,typeof t!="symbol"?t+"":t,r),d2=(e,t,r)=>t.has(e)||WL("Cannot "+r),se=(e,t,r)=>(d2(e,t,"read from private field"),r?r.call(e):t.get(e)),bt=(e,t,r)=>t.has(e)?WL("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Qe=(e,t,r,n)=>(d2(e,t,"write to private field"),t.set(e,r),r),Pt=(e,t,r)=>(d2(e,t,"access private method"),r),dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function DY(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var VL={exports:{}},rf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pO;function MY(){if(pO)return rf;pO=1;var e=ue,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},f=null,p=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)n.call(l,u)&&!i.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:t,type:a,key:f,ref:p,props:h,_owner:s.current}}return rf.Fragment=r,rf.jsx=o,rf.jsxs=o,rf}VL.exports=MY();var d=VL.exports;function mO(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function HL(...e){return t=>{let r=!1;const n=e.map(s=>{const i=mO(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():mO(e[s],null)}}}}function qn(...e){return g.useCallback(HL(...e),e)}function Ep(e){const t=LY(e),r=g.forwardRef((n,s)=>{const{children:i,...o}=n,a=g.Children.toArray(i),l=a.find($Y);if(l){const c=l.props.children,u=a.map(h=>h===l?g.Children.count(c)>1?g.Children.only(null):g.isValidElement(c)?c.props.children:null:h);return d.jsx(t,{...o,ref:s,children:g.isValidElement(c)?g.cloneElement(c,void 0,u):null})}return d.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var IY=Ep("Slot");function LY(e){const t=g.forwardRef((r,n)=>{const{children:s,...i}=r;if(g.isValidElement(s)){const o=UY(s),a=zY(i,s.props);return s.type!==g.Fragment&&(a.ref=n?HL(n,o):o),g.cloneElement(s,a)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var KL=Symbol("radix.slottable");function FY(e){const t=({children:r})=>d.jsx(d.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=KL,t}function $Y(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===KL}function zY(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...o)=>{const a=i(...o);return s(...o),a}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function UY(e){var t,r;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function YL(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=YL(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function st(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=YL(e))&&(n&&(n+=" "),n+=t);return n}const gO=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,yO=st,Zb=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return yO(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(c=>{const u=r==null?void 0:r[c],h=i==null?void 0:i[c];if(u===null)return null;const f=gO(u)||gO(h);return s[c][f]}),a=r&&Object.entries(r).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(v=>{let[m,b]=v;return Array.isArray(b)?b.includes({...i,...a}[m]):{...i,...a}[m]===b})?[...c,h,f]:c},[]);return yO(e,o,l,r==null?void 0:r.class,r==null?void 0:r.className)},qY=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>yh).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class h2 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class BY extends h2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class vO extends h2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class bO extends h2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Lj;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Lj||(Lj={}));var WY=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class VY{constructor(t,{headers:r={},customFetch:n,region:s=Lj.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=qY(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return WY(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(m=>{throw new BY(m)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new vO(h);if(!h.ok)throw new bO(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield h.json():p==="application/octet-stream"?v=yield h.blob():p==="text/event-stream"?v=h:p==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof bO||s instanceof vO?s.context:void 0}}})}}var In={},f2={},Jb={},km={},Qb={},Xb={},HY=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bd=HY();const KY=Bd.fetch,GL=Bd.fetch.bind(Bd),ZL=Bd.Headers,YY=Bd.Request,GY=Bd.Response,yh=Object.freeze(Object.defineProperty({__proto__:null,Headers:ZL,Request:YY,Response:GY,default:GL,fetch:KY},Symbol.toStringTag,{value:"Module"})),ZY=DY(yh);var ex={};Object.defineProperty(ex,"__esModule",{value:!0});let JY=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ex.default=JY;var JL=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xb,"__esModule",{value:!0});const QY=JL(ZY),XY=JL(ex);let eG=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=QY.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,o,a,l;let c=null,u=null,h=null,f=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text")?u=b:u=JSON.parse(b))}const v=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&m&&m.length>1&&(h=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await s.text();try{c=JSON.parse(v),Array.isArray(c)&&s.status===404&&(u=[],c=null,f=200,p="OK")}catch{s.status===404&&v===""?(f=204,p="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows")&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new XY.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(n=n.catch(s=>{var i,o,a;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(a=s==null?void 0:s.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Xb.default=eG;var tG=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qb,"__esModule",{value:!0});const rG=tG(Xb);let nG=class extends rG.default{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Qb.default=nG;var sG=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(km,"__esModule",{value:!0});const iG=sG(Qb);let oG=class extends iG.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};km.default=oG;var aG=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jb,"__esModule",{value:!0});const nf=aG(km);let lG=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new nf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new nf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new nf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new nf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new nf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Jb.default=lG;var QL=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(f2,"__esModule",{value:!0});const cG=QL(Jb),uG=QL(km);let dG=class XL{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new cG.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new XL(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new uG.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};f2.default=dG;var vh=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(In,"__esModule",{value:!0});In.PostgrestError=In.PostgrestBuilder=In.PostgrestTransformBuilder=In.PostgrestFilterBuilder=In.PostgrestQueryBuilder=In.PostgrestClient=void 0;const e6=vh(f2);In.PostgrestClient=e6.default;const t6=vh(Jb);In.PostgrestQueryBuilder=t6.default;const r6=vh(km);In.PostgrestFilterBuilder=r6.default;const n6=vh(Qb);In.PostgrestTransformBuilder=n6.default;const s6=vh(Xb);In.PostgrestBuilder=s6.default;const i6=vh(ex);In.PostgrestError=i6.default;var hG=In.default={PostgrestClient:e6.default,PostgrestQueryBuilder:t6.default,PostgrestFilterBuilder:r6.default,PostgrestTransformBuilder:n6.default,PostgrestBuilder:s6.default,PostgrestError:i6.default};const{PostgrestClient:fG,PostgrestQueryBuilder:sze,PostgrestFilterBuilder:ize,PostgrestTransformBuilder:oze,PostgrestBuilder:aze,PostgrestError:lze}=hG;class pG{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const mG="2.15.1",gG=`realtime-js/${mG}`,yG="1.0.0",Fj=1e4,vG=1e3,bG=100;var Xf;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Xf||(Xf={}));var wr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(wr||(wr={}));var ti;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ti||(ti={}));var $j;(function(e){e.websocket="websocket"})($j||($j={}));var dc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(dc||(dc={}));class xG{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+s));o=o+s;const l=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class o6{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_t||(_t={}));const xO=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=wG(o,e,t,s),i),{})},wG=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?a6(i,o):zj(o)},a6=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return SG(t,r)}switch(e){case _t.bool:return _G(t);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return jG(t);case _t.json:case _t.jsonb:return kG(t);case _t.timestamp:return NG(t);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return zj(t);default:return zj(t)}},zj=e=>e,_G=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},jG=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},kG=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},SG=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const i=e.slice(1,r);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(o=>a6(t,o))}return e},NG=e=>typeof e=="string"?e.replace(" ","T"):e,l6=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class E0{constructor(t,r,n={},s=Fj){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var wO;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(wO||(wO={}));class ep{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ep.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=ep.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ep.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),v=u.filter(b=>p.indexOf(b.presence_ref)<0),m=h.filter(b=>f.indexOf(b.presence_ref)<0);v.length>0&&(a[c]=v),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _O;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(_O||(_O={}));var tp;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(tp||(tp={}));var To;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(To||(To={}));class p2{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=wr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new E0(this,ti.join,this.params,this.timeout),this.rejoinTimer=new o6(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ti.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ep(this),this.broadcastEndpointURL=l6(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==wr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[tp.PRESENCE]&&this.bindings[tp.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(To.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(To.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t==null||t(To.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,m=(p=v==null?void 0:v.length)!==null&&p!==void 0?p:0,b=[];for(let x=0;x<m;x++){const w=v[x],{filter:{event:_,schema:j,table:k,filter:S}}=w,E=f&&f[x];if(E&&E.event===_&&E.schema===j&&E.table===k&&E.filter===S)b.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=wr.errored,t==null||t(To.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(To.SUBSCRIBED);return}}).receive("error",f=>{this.state=wr.errored,t==null||t(To.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(To.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===wr.joined&&t===tp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=wr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ti.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new E0(this,ti.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new E0(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>bG){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ti;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,v,m;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(v=f.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,v,m,b,x,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,j=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((v=r.ids)===null||v===void 0?void 0:v.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((m=r.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const _=(x=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:v,table:m,commit_timestamp:b,type:x,errors:w}=p;h=Object.assign(Object.assign({},{schema:v,table:m,commit_timestamp:b,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(p))}f.callback(h,n)})}_isClosed(){return this.state===wr.closed}_isJoined(){return this.state===wr.joined}_isJoining(){return this.state===wr.joining}_isLeaving(){return this.state===wr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&p2.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ti.close,{},t)}_onError(t){this._on(ti.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=xO(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=xO(t.columns,t.old_record)),r}}const jO=()=>{},Eg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},CG=[1e3,2e3,5e3,1e4],EG=1e4,TG=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class AG{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fj,this.transport=null,this.heartbeatIntervalMs=Eg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jO,this.ref=0,this.reconnectTimer=null,this.logger=jO,this.conn=null,this.sendBuffer=[],this.serializer=new xG,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Promise.resolve().then(()=>yh).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${$j.websocket}`,this.httpEndpoint=l6(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=pG.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yG}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Xf.connecting:return dc.Connecting;case Xf.open:return dc.Open;case Xf.closing:return dc.Closing;default:return dc.Closed}}isConnected(){return this.connectionState()===dc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new p2(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(vG,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Eg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ti.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([TG],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:gG};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ti.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new o6(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Eg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Fj,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Eg.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t==null?void 0:t.reconnectAfterMs)!==null&&a!==void 0?a:u=>CG[u-1]||EG,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(u,h)=>h(JSON.stringify(u)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class m2 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function kr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class OG extends m2{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Uj extends m2{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var PG=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const c6=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>yh).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},RG=()=>PG(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>yh)).Response:Response}),qj=e=>{if(Array.isArray(e))return e.map(r=>qj(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=qj(n)}),t},DG=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ru=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const T0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),MG=(e,t,r)=>ru(void 0,void 0,void 0,function*(){const n=yield RG();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new OG(T0(s),i,o))}).catch(s=>{t(new Uj(T0(s),s))}):t(new Uj(T0(e),e))}),IG=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(DG(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Sm(e,t,r,n,s,i){return ru(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,IG(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>MG(l,a,n))})})}function lv(e,t,r,n){return ru(this,void 0,void 0,function*(){return Sm(e,"GET",t,r,n)})}function Ii(e,t,r,n,s){return ru(this,void 0,void 0,function*(){return Sm(e,"POST",t,n,s,r)})}function Bj(e,t,r,n,s){return ru(this,void 0,void 0,function*(){return Sm(e,"PUT",t,n,s,r)})}function LG(e,t,r,n){return ru(this,void 0,void 0,function*(){return Sm(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function u6(e,t,r,n,s){return ru(this,void 0,void 0,function*(){return Sm(e,"DELETE",t,n,s,r)})}var mn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const FG={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $G{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=c6(s)}uploadOrUpdate(t,r,n,s){return mn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},kO),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(t=="PUT"?Bj:Ii)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(kr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return mn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return mn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:kO.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield Bj(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(kr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return mn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Ii(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new m2("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(kr(n))return{data:null,error:n};throw n}})}update(t,r,n){return mn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return mn(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(kr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return mn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ii(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(kr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return mn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ii(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(kr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return mn(this,void 0,void 0,function*(){try{const s=yield Ii(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(kr(s))return{data:null,error:s};throw s}})}download(t,r){return mn(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield lv(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(kr(o))return{data:null,error:o};throw o}})}info(t){return mn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield lv(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:qj(n),error:null}}catch(n){if(kr(n))return{data:null,error:n};throw n}})}exists(t){return mn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield LG(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(kr(n)&&n instanceof Uj){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});a!==""&&s.push(a);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${l}`)}}}remove(t){return mn(this,void 0,void 0,function*(){try{return{data:yield u6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(kr(r))return{data:null,error:r};throw r}})}list(t,r,n){return mn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},FG),r),{prefix:t||""});return{data:yield Ii(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(kr(s))return{data:null,error:s};throw s}})}listV2(t,r){return mn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Ii(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(kr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const zG="2.11.0",UG={"X-Client-Info":`storage-js/${zG}`};var _u=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class qG{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},UG),r),this.fetch=c6(n)}listBuckets(){return _u(this,void 0,void 0,function*(){try{return{data:yield lv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(kr(t))return{data:null,error:t};throw t}})}getBucket(t){return _u(this,void 0,void 0,function*(){try{return{data:yield lv(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(kr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return _u(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(kr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return _u(this,void 0,void 0,function*(){try{return{data:yield Bj(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(kr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return _u(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(kr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return _u(this,void 0,void 0,function*(){try{return{data:yield u6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(kr(r))return{data:null,error:r};throw r}})}}class BG extends qG{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new $G(this.url,this.headers,t,this.fetch)}}const WG="2.56.0";let Df="";typeof Deno<"u"?Df="deno":typeof document<"u"?Df="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Df="react-native":Df="node";const VG={"X-Client-Info":`supabase-js-${Df}/${WG}`},HG={headers:VG},KG={schema:"public"},YG={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},GG={};var ZG=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const JG=e=>{let t;return e?t=e:typeof fetch>"u"?t=GL:t=fetch,(...r)=>t(...r)},QG=()=>typeof Headers>"u"?ZL:Headers,XG=(e,t,r)=>{const n=JG(r),s=QG();return(i,o)=>ZG(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var eZ=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};function tZ(e){return e.endsWith("/")?e:e+"/"}function rZ(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>eZ(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const d6="2.71.1",Wu=30*1e3,Wj=3,A0=Wj*Wu,nZ="http://localhost:9999",sZ="supabase.auth.token",iZ={"X-Client-Info":`gotrue-js/${d6}`},Vj="X-Supabase-Api-Version",h6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},oZ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,aZ=10*60*1e3;class g2 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lZ extends g2{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function cZ(e){return We(e)&&e.name==="AuthApiError"}class f6 extends g2{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class yl extends g2{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Pa extends yl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uZ(e){return We(e)&&e.name==="AuthSessionMissingError"}class Tg extends yl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ag extends yl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Og extends yl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dZ(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}class SO extends yl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hj extends yl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function O0(e){return We(e)&&e.name==="AuthRetryableFetchError"}class NO extends yl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Kj extends yl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const cv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),CO=` 	
\r=`.split(""),hZ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<CO.length;t+=1)e[CO[t].charCodeAt(0)]=-2;for(let t=0;t<cv.length;t+=1)e[cv[t].charCodeAt(0)]=t;return e})();function EO(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(cv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(cv[n]),t.queuedBits-=6}}function p6(e,t,r){const n=hZ[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function TO(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{mZ(o,n,r)};for(let o=0;o<e.length;o+=1)p6(e.charCodeAt(o),s,i);return t.join("")}function fZ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function pZ(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}fZ(n,t)}}function mZ(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function gZ(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)p6(e.charCodeAt(s),r,n);return new Uint8Array(t)}function yZ(e){const t=[];return pZ(e,r=>t.push(r)),new Uint8Array(t)}function vZ(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>EO(s,r,n)),EO(null,r,n),t.join("")}function bZ(e){return Math.round(Date.now()/1e3)+e}function xZ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ks=()=>typeof window<"u"&&typeof document<"u",Wl={tested:!1,writable:!1},m6=()=>{if(!Ks())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wl.tested)return Wl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Wl.tested=!0,Wl.writable=!0}catch{Wl.tested=!0,Wl.writable=!1}return Wl.writable};function wZ(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,s)=>{t[s]=n})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const g6=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>yh).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},_Z=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Vu=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Vl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},_a=async(e,t)=>{await e.removeItem(t)};class tx{constructor(){this.promise=new tx.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}tx.promiseConstructor=Promise;function P0(e){const t=e.split(".");if(t.length!==3)throw new Kj("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!oZ.test(t[r]))throw new Kj("JWT not in base64url format");return{header:JSON.parse(TO(t[0])),payload:JSON.parse(TO(t[1])),signature:gZ(t[2]),raw:{header:t[0],payload:t[1]}}}async function jZ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function kZ(e,t){return new Promise((r,n)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await e(s);if(!t(s,null,i)){r(i);return}}catch(i){if(!t(s,i)){n(i);return}}})()})}function SZ(e){return("0"+e.toString(16)).substr(-2)}function NZ(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let n="";for(let s=0;s<56;s++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,SZ).join("")}async function CZ(e){const t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(s=>String.fromCharCode(s)).join("")}async function EZ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await CZ(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ju(e,t,r=!1){const n=NZ();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Vu(e,`${t}-code-verifier`,s);const i=await EZ(n);return[i,n===i?"plain":"s256"]}const TZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function AZ(e){const t=e.headers.get(Vj);if(!t||!t.match(TZ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function OZ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function PZ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const RZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ku(e){if(!RZ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function R0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function AO(e){return JSON.parse(JSON.stringify(e))}var DZ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const nc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),MZ=[502,503,504];async function OO(e){var t;if(!_Z(e))throw new Hj(nc(e),0);if(MZ.includes(e.status))throw new Hj(nc(e),e.status);let r;try{r=await e.json()}catch(i){throw new f6(nc(i),i)}let n;const s=AZ(e);if(s&&s.getTime()>=h6["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new NO(nc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Pa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new NO(nc(r),e.status,r.weak_password.reasons);throw new lZ(nc(r),e.status||500,n)}const IZ=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Ze(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Vj]||(i[Vj]=h6["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await LZ(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function LZ(e,t,r,n,s,i){const o=IZ(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new Hj(nc(l),0)}if(a.ok||await OO(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await OO(l)}}function No(e){var t;let r=null;UZ(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=bZ(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function PO(e){const t=No(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ua(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function FZ(e){return{data:e,error:null}}function $Z(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=DZ(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function zZ(e){return e}function UZ(e){return e.access_token&&e.refresh_token&&e.expires_in}const D0=["global","local","others"];var qZ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class BZ{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=g6(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=D0[0]){if(D0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${D0.join(", ")}`);try{return await Ze(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ua})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=qZ(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:$Z,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(We(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ze(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ua})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zZ});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(We(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){ku(t);try{return await Ze(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ua})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ku(t);try{return await Ze(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ua})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ku(t);try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ua})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ku(t.userId);try{const{data:r,error:n}=await Ze(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(We(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ku(t.userId),ku(t.id);try{return{data:await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}}function RO(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function WZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Su={debug:!!(globalThis&&m6()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class y6 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class VZ extends y6{}async function HZ(e,t,r){Su.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Su.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Su.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Su.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Su.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new VZ(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Su.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}WZ();const KZ={url:nZ,storageKey:sZ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iZ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function DO(e,t,r){return await r()}const Nu={};class Tp{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Tp.nextInstanceID,Tp.nextInstanceID+=1,this.instanceID>0&&Ks()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},KZ),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new BZ({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=g6(s.fetch),this.lock=s.lock||DO,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ks()&&!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks?this.lock=HZ:this.lock=DO,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:m6()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=RO(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=RO(this.memoryStorage)),Ks()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Nu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Nu[this.storageKey]=Object.assign(Object.assign({},Nu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Nu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Nu[this.storageKey]=Object.assign(Object.assign({},Nu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${d6}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=wZ(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ks()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),dZ(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return We(r)?{error:r}:{error:new f6("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:No}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(We(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await ju(this.storage,this.storageKey)),i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:No})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:No})}else throw new Ag("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(We(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:PO})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:PO})}else throw new Ag("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Tg}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(We(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,a,l,c,u,h,f,p;let v,m;if("message"in t)v=t.message,m=t.signature;else{const{chain:b,wallet:x,statement:w,options:_}=t;let j;if(Ks())if(typeof x=="object")j=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const k=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=S}}try{const{data:b,error:x}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:vZ(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:No});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Tg}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(We(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await Vl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:No});if(await _a(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Tg}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(We(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:No}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Tg}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(We(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await ju(this.storage,this.storageKey));const{error:h}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Ag("You must provide either an email or phone number.")}catch(a){if(We(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await Ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:No});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(We(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ju(this.storage,this.storageKey)),await Ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:FZ})}catch(i){if(We(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Pa;const{error:s}=await Ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(We(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await Ze(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await Ze(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Ag("You must provide either an email or phone number and a type")}catch(r){if(We(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Vl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<A0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Vl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=R0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(a,l,c)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,l,c))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ua}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pa}:await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ua})})}catch(r){if(We(r))return uZ(r)&&(await this._removeSession(),await _a(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Pa;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await ju(this.storage,this.storageKey));const{data:c,error:u}=await Ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ua});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Pa;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=P0(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(We(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Pa;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(We(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ks())throw new Og("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Og(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new SO("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Og("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new SO("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new Og("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=Wu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=f-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:m,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(We(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Vl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(cZ(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await _a(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=xZ(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ju(this.storage,this.storageKey,!0));try{return await Ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(We(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ze(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Ks()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(We(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await Ze(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await kZ(async s=>(s>0&&await jZ(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:No})),(s,i)=>{const o=200*Math.pow(2,s);return i&&O0(i)&&Date.now()+o-n<Wu})}catch(n){if(this._debug(r,"error",n),We(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ks()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Vl(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Vl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Vu(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:R0()}else if(s&&!s.user&&!s.user){const o=await Vl(this.storage,this.storageKey+"-user");o&&o!=null&&o.user?(s.user=o.user,await _a(this.storage,this.storageKey+"-user"),await Vu(this.storage,this.storageKey,s)):s.user=R0()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<A0;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${A0}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),O0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&o!=null&&o.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Pa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new tx;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Pa;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),We(i)){const o={session:null,error:i};return O0(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Vu(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=AO(s);await Vu(this.storage,this.storageKey,i)}else{const s=AO(r);await Vu(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await _a(this.storage,this.storageKey),await _a(this.storage,this.storageKey+"-code-verifier"),await _a(this.storage,this.storageKey+"-user"),this.userStorage&&await _a(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ks()&&window!=null&&window.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Wu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Wu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Wu}ms, refresh threshold is ${Wj} ticks`),s<=Wj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof y6)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ks()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ju(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Ze(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await Ze(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await Ze(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(We(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Ze(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(We(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=P0(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+aZ>s)return n;const{data:i,error:o}=await Ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};n=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=P0(n);r!=null&&r.allowExpired||OZ(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const u=PZ(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,yZ(`${a}.${l}`)))throw new Kj("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}}Tp.nextInstanceID=0;const YZ=Tp;class GZ extends YZ{constructor(t){super(t)}}var ZZ=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class JZ{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=tZ(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:KG,realtime:GG,auth:Object.assign(Object.assign({},YG),{storageKey:c}),global:HG},h=rZ(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=XG(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new fG(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new BG(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new VY(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return ZZ(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new GZ({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new AG(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const v6=(e,t,r)=>new JZ(e,t,r);function QZ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}QZ()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Yj=typeof window<"u",uv=Gb.VITE_SUPABASE_URL||"",y2=Gb.VITE_SUPABASE_ANON_KEY||"";Gb.VITE_DEBUG==="true"&&(console.log("Supabase URL:",uv?"✅ Set":"❌ Missing"),console.log("Supabase Anon Key:",y2?"✅ Set":"❌ Missing"));if((!uv||!y2)&&Yj){const e=`
    Missing Supabase environment variables.
    Please check your .env file and ensure the following are set:
    - VITE_SUPABASE_URL
    - VITE_SUPABASE_ANON_KEY
  `;throw console.error(e),new Error(e)}let le;var MO;try{le=v6(uv,y2,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:Yj?window.localStorage:void 0}}),typeof process<"u"&&((MO=Gb)==null?void 0:MO.NODE_ENV)==="development"&&Yj&&console.log("Supabase client initialized with URL:",uv)}catch(e){throw console.error("Error initializing Supabase client:",e),e}const XZ=g.createContext(void 0),rx=()=>{const e=g.useContext(XZ);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},eJ=g.createContext(void 0),b6=()=>{const e=g.useContext(eJ);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e},tJ=async e=>{const t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),r=le.from("wiki_pages").select(`
      id, created_at, created_by, title, slug, excerpt, is_published, category_id, folder_id, updated_at, view_count,
      content, seo_title, seo_description, seo_keywords,
      category(*),
      user(*)
    `).eq(t?"id":"slug",e),{data:n,error:s}=await r.single();if(s)return console.error("Error fetching wiki page:",s),null;if(n){n.user&&typeof n.user=="object"&&"error"in n.user&&(n.user=null),n.category&&typeof n.category=="object"&&"error"in n.category&&(n.category=null);const{data:i,error:o}=await le.from("wiki_content_blocks").select("id, type, content, position").eq("page_id",n.id).order("position");if(o)throw console.error("Error fetching wiki content:",o),new Error("Failed to fetch wiki content");const a=(i==null?void 0:i.map(l=>({id:l.id,type:l.type,content:l.content,title:""})))||[];return await le.rpc("increment_wiki_page_views",{page_id:n.id}),{...n,sections:a,content:n.content||"",seo_title:n.seo_title||"",seo_description:n.seo_description||"",seo_keywords:n.seo_keywords||[],category:n.category,user:n.user}}return null},rJ=async()=>{const{data:e,error:t}=await le.from("wiki_categories").select("*").order("name",{ascending:!0});if(t)throw console.error("Error fetching categories:",t),new Error("Failed to fetch categories");return e||[]},v2="-",nJ=e=>{const t=iJ(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:s=>{const i=s.split(v2);return i[0]===""&&i.length!==1&&i.shift(),x6(i,t)||sJ(s)},getConflictingClassGroupIds:(s,i)=>{const o=r[s]||[];return i&&n[s]?[...o,...n[s]]:o}}},x6=(e,t)=>{var r;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),i=s?x6(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(v2);return(r=t.validators.find(({validator:a})=>a(o)))==null?void 0:r.classGroupId},IO=/^\[(.+)\]$/,sJ=e=>{if(IO.test(e)){const t=IO.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},iJ=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return aJ(Object.entries(e.classGroups),r).forEach(([s,i])=>{Gj(i,n,s,t)}),n},Gj=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:LO(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(oJ(s)){Gj(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{Gj(o,LO(t,i),r,n)})})},LO=(e,t)=>{let r=e;return t.split(v2).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},oJ=e=>e.isThemeGetter,aJ=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[t+o,a])):i);return[r,s]}):e,lJ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},w6="!",cJ=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,o=a=>{const l=[];let c=0,u=0,h;for(let b=0;b<a.length;b++){let x=a[b];if(c===0){if(x===s&&(n||a.slice(b,b+i)===t)){l.push(a.slice(u,b)),u=b+i;continue}if(x==="/"){h=b;continue}}x==="["?c++:x==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(w6),v=p?f.substring(1):f,m=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:m}};return r?a=>r({className:a,parseClassName:o}):o},uJ=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},dJ=e=>({cache:lJ(e.cacheSize),parseClassName:cJ(e),...nJ(e)}),hJ=/\s+/,fJ=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split(hJ);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=r(c);let v=!!p,m=n(v?f.substring(0,p):f);if(!m){if(!v){a=c+(a.length>0?" "+a:a);continue}if(m=n(f),!m){a=c+(a.length>0?" "+a:a);continue}v=!1}const b=uJ(u).join(":"),x=h?b+w6:b,w=x+m;if(i.includes(w))continue;i.push(w);const _=s(m,v);for(let j=0;j<_.length;++j){const k=_[j];i.push(x+k)}a=c+(a.length>0?" "+a:a)}return a};function pJ(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=_6(t))&&(n&&(n+=" "),n+=r);return n}const _6=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=_6(e[n]))&&(r&&(r+=" "),r+=t);return r};function mJ(e,...t){let r,n,s,i=o;function o(l){const c=t.reduce((u,h)=>h(u),e());return r=dJ(c),n=r.cache.get,s=r.cache.set,i=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=fJ(l,r);return s(l,u),u}return function(){return i(pJ.apply(null,arguments))}}const Nt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},j6=/^\[(?:([a-z-]+):)?(.+)\]$/i,gJ=/^\d+\/\d+$/,yJ=new Set(["px","full","screen"]),vJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wJ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_J=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wo=e=>md(e)||yJ.has(e)||gJ.test(e),ja=e=>bh(e,"length",AJ),md=e=>!!e&&!Number.isNaN(Number(e)),M0=e=>bh(e,"number",md),sf=e=>!!e&&Number.isInteger(Number(e)),jJ=e=>e.endsWith("%")&&md(e.slice(0,-1)),He=e=>j6.test(e),ka=e=>vJ.test(e),kJ=new Set(["length","size","percentage"]),SJ=e=>bh(e,kJ,k6),NJ=e=>bh(e,"position",k6),CJ=new Set(["image","url"]),EJ=e=>bh(e,CJ,PJ),TJ=e=>bh(e,"",OJ),of=()=>!0,bh=(e,t,r)=>{const n=j6.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},AJ=e=>bJ.test(e)&&!xJ.test(e),k6=()=>!1,OJ=e=>wJ.test(e),PJ=e=>_J.test(e),RJ=()=>{const e=Nt("colors"),t=Nt("spacing"),r=Nt("blur"),n=Nt("brightness"),s=Nt("borderColor"),i=Nt("borderRadius"),o=Nt("borderSpacing"),a=Nt("borderWidth"),l=Nt("contrast"),c=Nt("grayscale"),u=Nt("hueRotate"),h=Nt("invert"),f=Nt("gap"),p=Nt("gradientColorStops"),v=Nt("gradientColorStopPositions"),m=Nt("inset"),b=Nt("margin"),x=Nt("opacity"),w=Nt("padding"),_=Nt("saturate"),j=Nt("scale"),k=Nt("sepia"),S=Nt("skew"),E=Nt("space"),C=Nt("translate"),T=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",He,t],D=()=>[He,t],R=()=>["",wo,ja],$=()=>["auto",md,He],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",He],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[md,He];return{cacheSize:500,separator:":",theme:{colors:[of],spacing:[wo,ja],blur:["none","",ka,He],brightness:X(),borderColor:[e],borderRadius:["none","","full",ka,He],borderSpacing:D(),borderWidth:R(),contrast:X(),grayscale:Y(),hueRotate:X(),invert:Y(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[jJ,ja],inset:P(),margin:P(),opacity:X(),padding:D(),saturate:X(),scale:X(),sepia:Y(),skew:X(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[ka]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),He]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sf,He]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",sf,He]}],"grid-cols":[{"grid-cols":[of]}],"col-start-end":[{col:["auto",{span:["full",sf,He]},He]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[of]}],"row-start-end":[{row:["auto",{span:[sf,He]},He]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",He,t]}],"min-w":[{"min-w":[He,t,"min","max","fit"]}],"max-w":[{"max-w":[He,t,"none","full","min","max","fit","prose",{screen:[ka]},ka]}],h:[{h:[He,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[He,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ka,ja]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",M0]}],"font-family":[{font:[of]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",md,M0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wo,He]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wo,ja]}],"underline-offset":[{"underline-offset":["auto",wo,He]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),NJ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",SJ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},EJ]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:V()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[wo,He]}],"outline-w":[{outline:[wo,ja]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[wo,ja]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ka,TJ]}],"shadow-color":[{shadow:[of]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ka,He]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[sf,He]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[wo,ja,M0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},S6=mJ(RJ);function Ke(...e){return S6(st(e))}const DJ=Zb("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),lt=g.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const o=n?IY:"button";return d.jsx(o,{className:Ke(DJ({variant:t,size:r,className:e})),ref:i,...s})});lt.displayName="Button";function MJ(e,t){const r=g.createContext(t),n=i=>{const{children:o,...a}=i,l=g.useMemo(()=>a,Object.values(a));return d.jsx(r.Provider,{value:l,children:o})};n.displayName=e+"Provider";function s(i){const o=g.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function xh(e,t=[]){let r=[];function n(i,o){const a=g.createContext(o),l=r.length;r=[...r,o];const c=h=>{var f;const{scope:p,children:v,...m}=h,b=((f=p==null?void 0:p[e])==null?void 0:f[l])||a,x=g.useMemo(()=>m,Object.values(m));return d.jsx(b.Provider,{value:x,children:v})};c.displayName=i+"Provider";function u(h,f){var p;const v=((p=f==null?void 0:f[e])==null?void 0:p[l])||a,m=g.useContext(v);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=r.map(o=>g.createContext(o));return function(o){const a=(o==null?void 0:o[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return s.scopeName=e,[n,IJ(s,...t)]}function IJ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const i=n.reduce((o,{useScope:a,scopeName:l})=>{const c=a(s)[`__scope${l}`];return{...o,...c}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function Er(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}var Wd=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},LJ=SL[" useId ".trim().toString()]||(()=>{}),FJ=0;function rp(e){const[t,r]=g.useState(LJ());return Wd(()=>{r(n=>n??String(FJ++))},[e]),t?`radix-${t}`:""}var $J=SL[" useInsertionEffect ".trim().toString()]||Wd;function nx({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,o]=zJ({defaultProp:t,onChange:r}),a=e!==void 0,l=a?e:s;{const u=g.useRef(e!==void 0);g.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}const c=g.useCallback(u=>{var h;if(a){const f=UJ(u)?u(e):u;f!==e&&((h=o.current)==null||h.call(o,f))}else i(u)},[a,e,i,o]);return[l,c]}function zJ({defaultProp:e,onChange:t}){const[r,n]=g.useState(e),s=g.useRef(r),i=g.useRef(t);return $J(()=>{i.current=t},[t]),g.useEffect(()=>{var o;s.current!==r&&((o=i.current)==null||o.call(i,r),s.current=r)},[r,s]),[r,n,i]}function UJ(e){return typeof e=="function"}var qJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$r=qJ.reduce((e,t)=>{const r=Ep(`Primitive.${t}`),n=g.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(l,{...a,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function BJ(e,t){e&&to.flushSync(()=>e.dispatchEvent(t))}function Vd(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function WJ(e,t=globalThis==null?void 0:globalThis.document){const r=Vd(e);g.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var VJ="DismissableLayer",Zj="dismissableLayer.update",HJ="dismissableLayer.pointerDownOutside",KJ="dismissableLayer.focusOutside",FO,N6=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),C6=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=e,c=g.useContext(N6),[u,h]=g.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=g.useState({}),v=qn(t,E=>h(E)),m=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=m.indexOf(b),w=u?m.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,j=w>=x,k=ZJ(E=>{const C=E.target,T=[...c.branches].some(O=>O.contains(C));!j||T||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},f),S=JJ(E=>{const C=E.target;[...c.branches].some(T=>T.contains(C))||(i==null||i(E),o==null||o(E),E.defaultPrevented||a==null||a())},f);return WJ(E=>{w===c.layers.size-1&&(n==null||n(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),g.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(FO=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),$O(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=FO)}},[u,f,r,c]),g.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),$O())},[u,c]),g.useEffect(()=>{const E=()=>p({});return document.addEventListener(Zj,E),()=>document.removeEventListener(Zj,E)},[]),d.jsx($r.div,{...l,ref:v,style:{pointerEvents:_?j?"auto":"none":void 0,...e.style},onFocusCapture:Er(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Er(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Er(e.onPointerDownCapture,k.onPointerDownCapture)})});C6.displayName=VJ;var YJ="DismissableLayerBranch",GJ=g.forwardRef((e,t)=>{const r=g.useContext(N6),n=g.useRef(null),s=qn(t,n);return g.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),d.jsx($r.div,{...e,ref:s})});GJ.displayName=YJ;function ZJ(e,t=globalThis==null?void 0:globalThis.document){const r=Vd(e),n=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){E6(HJ,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function JJ(e,t=globalThis==null?void 0:globalThis.document){const r=Vd(e),n=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!n.current&&E6(KJ,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function $O(){const e=new CustomEvent(Zj);document.dispatchEvent(e)}function E6(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?BJ(s,i):s.dispatchEvent(i)}var I0="focusScope.autoFocusOnMount",L0="focusScope.autoFocusOnUnmount",zO={bubbles:!1,cancelable:!0},QJ="FocusScope",T6=g.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[a,l]=g.useState(null),c=Vd(s),u=Vd(i),h=g.useRef(null),f=qn(t,m=>l(m)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(n){let m=function(_){if(p.paused||!a)return;const j=_.target;a.contains(j)?h.current=j:Ra(h.current,{select:!0})},b=function(_){if(p.paused||!a)return;const j=_.relatedTarget;j!==null&&(a.contains(j)||Ra(h.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const j of _)j.removedNodes.length>0&&Ra(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),w.disconnect()}}},[n,a,p.paused]),g.useEffect(()=>{if(a){qO.add(p);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(I0,zO);a.addEventListener(I0,c),a.dispatchEvent(b),b.defaultPrevented||(XJ(sQ(A6(a)),{select:!0}),document.activeElement===m&&Ra(a))}return()=>{a.removeEventListener(I0,c),setTimeout(()=>{const b=new CustomEvent(L0,zO);a.addEventListener(L0,u),a.dispatchEvent(b),b.defaultPrevented||Ra(m??document.body,{select:!0}),a.removeEventListener(L0,u),qO.remove(p)},0)}}},[a,c,u,p]);const v=g.useCallback(m=>{if(!r&&!n||p.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(b&&x){const w=m.currentTarget,[_,j]=eQ(w);_&&j?!m.shiftKey&&x===j?(m.preventDefault(),r&&Ra(_,{select:!0})):m.shiftKey&&x===_&&(m.preventDefault(),r&&Ra(j,{select:!0})):x===w&&m.preventDefault()}},[r,n,p.paused]);return d.jsx($r.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});T6.displayName=QJ;function XJ(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ra(n,{select:t}),document.activeElement!==r)return}function eQ(e){const t=A6(e),r=UO(t,e),n=UO(t.reverse(),e);return[r,n]}function A6(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function UO(e,t){for(const r of e)if(!tQ(r,{upTo:t}))return r}function tQ(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function rQ(e){return e instanceof HTMLInputElement&&"select"in e}function Ra(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&rQ(e)&&t&&e.select()}}var qO=nQ();function nQ(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=BO(e,t),e.unshift(t)},remove(t){var r;e=BO(e,t),(r=e[0])==null||r.resume()}}}function BO(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function sQ(e){return e.filter(t=>t.tagName!=="A")}var iQ="Portal",O6=g.forwardRef((e,t)=>{var r;const{container:n,...s}=e,[i,o]=g.useState(!1);Wd(()=>o(!0),[]);const a=n||i&&((r=globalThis==null?void 0:globalThis.document)==null?void 0:r.body);return a?kL.createPortal(d.jsx($r.div,{...s,ref:t}),a):null});O6.displayName=iQ;function oQ(e,t){return g.useReducer((r,n)=>t[r][n]??r,e)}var Nm=e=>{const{present:t,children:r}=e,n=aQ(t),s=typeof r=="function"?r({present:n.isPresent}):g.Children.only(r),i=qn(n.ref,lQ(s));return typeof r=="function"||n.isPresent?g.cloneElement(s,{ref:i}):null};Nm.displayName="Presence";function aQ(e){const[t,r]=g.useState(),n=g.useRef(null),s=g.useRef(e),i=g.useRef("none"),o=e?"mounted":"unmounted",[a,l]=oQ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=Pg(n.current);i.current=a==="mounted"?c:"none"},[a]),Wd(()=>{const c=n.current,u=s.current;if(u!==e){const h=i.current,f=Pg(c);e?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),Wd(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,h=p=>{const v=Pg(n.current).includes(CSS.escape(p.animationName));if(p.target===t&&v&&(l("ANIMATION_END"),!s.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},f=p=>{p.target===t&&(i.current=Pg(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function Pg(e){return(e==null?void 0:e.animationName)||"none"}function lQ(e){var t,r;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var F0=0;function cQ(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??WO()),document.body.insertAdjacentElement("beforeend",e[1]??WO()),F0++,()=>{F0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),F0--}},[])}function WO(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var on=function(){return on=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},on.apply(this,arguments)};function b2(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function P6(e,t,r){for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var np="right-scroll-bar-position",sp="width-before-scroll-bar",uQ="with-scroll-bars-hidden",dQ="--removed-body-scroll-bar-size";function $0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function hQ(e,t){var r=g.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var fQ=typeof window<"u"?g.useLayoutEffect:g.useEffect,VO=new WeakMap;function R6(e,t){var r=hQ(null,function(n){return e.forEach(function(s){return $0(s,n)})});return fQ(function(){var n=VO.get(r);if(n){var s=new Set(n),i=new Set(e),o=r.current;s.forEach(function(a){i.has(a)||$0(a,null)}),i.forEach(function(a){s.has(a)||$0(a,o)})}VO.set(r,e)},[e]),r}function pQ(e){return e}function mQ(e,t){t===void 0&&(t=pQ);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(a){return i(a)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(i),o=r}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),r}}}};return s}function D6(e){e===void 0&&(e={});var t=mQ(null);return t.options=on({async:!0,ssr:!1},e),t}var M6=function(e){var t=e.sideCar,r=b2(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return g.createElement(n,on({},r))};M6.isSideCarExport=!0;function I6(e,t){return e.useMedium(t),M6}var L6=D6(),z0=function(){},sx=g.forwardRef(function(e,t){var r=g.useRef(null),n=g.useState({onScrollCapture:z0,onWheelCapture:z0,onTouchMoveCapture:z0}),s=n[0],i=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noRelative,v=e.noIsolation,m=e.inert,b=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,_=e.gapMode,j=b2(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,S=R6([r,t]),E=on(on({},j),s);return g.createElement(g.Fragment,null,u&&g.createElement(k,{sideCar:L6,removeScrollBar:c,shards:h,noRelative:p,noIsolation:v,inert:m,setCallbacks:i,allowPinchZoom:!!b,lockRef:r,gapMode:_}),o?g.cloneElement(g.Children.only(a),on(on({},E),{ref:S})):g.createElement(w,on({},E,{className:l,ref:S}),a))});sx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sx.classNames={fullWidth:sp,zeroRight:np};var gQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function yQ(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=gQ();return t&&e.setAttribute("nonce",t),e}function vQ(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function bQ(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var xQ=function(){var e=0,t=null;return{add:function(r){e==0&&(t=yQ())&&(vQ(t,r),bQ(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},wQ=function(){var e=xQ();return function(t,r){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},x2=function(){var e=wQ(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},_Q={left:0,top:0,right:0,gap:0},U0=function(e){return parseInt(e||"",10)||0},jQ=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[U0(r),U0(n),U0(s)]},kQ=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return _Q;var t=jQ(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},SQ=x2(),gd="data-scroll-locked",NQ=function(e,t,r,n){var s=e.left,i=e.top,o=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(uQ,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(gd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(np,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(sp,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(np," .").concat(np,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(sp," .").concat(sp,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(gd,`] {
    `).concat(dQ,": ").concat(a,`px;
  }
`)},HO=function(){var e=parseInt(document.body.getAttribute(gd)||"0",10);return isFinite(e)?e:0},CQ=function(){g.useEffect(function(){return document.body.setAttribute(gd,(HO()+1).toString()),function(){var e=HO()-1;e<=0?document.body.removeAttribute(gd):document.body.setAttribute(gd,e.toString())}},[])},F6=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;CQ();var i=g.useMemo(function(){return kQ(s)},[s]);return g.createElement(SQ,{styles:NQ(i,!t,s,r?"":"!important")})},Jj=!1;if(typeof window<"u")try{var Rg=Object.defineProperty({},"passive",{get:function(){return Jj=!0,!0}});window.addEventListener("test",Rg,Rg),window.removeEventListener("test",Rg,Rg)}catch{Jj=!1}var Cu=Jj?{passive:!1}:!1,EQ=function(e){return e.tagName==="TEXTAREA"},$6=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!EQ(e)&&r[t]==="visible")},TQ=function(e){return $6(e,"overflowY")},AQ=function(e){return $6(e,"overflowX")},KO=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=z6(e,n);if(s){var i=U6(e,n),o=i[1],a=i[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},OQ=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},PQ=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},z6=function(e,t){return e==="v"?TQ(t):AQ(t)},U6=function(e,t){return e==="v"?OQ(t):PQ(t)},RQ=function(e,t){return e==="h"&&t==="rtl"?-1:1},DQ=function(e,t,r,n,s){var i=RQ(e,window.getComputedStyle(t).direction),o=i*n,a=r.target,l=t.contains(a),c=!1,u=o>0,h=0,f=0;do{if(!a)break;var p=U6(e,a),v=p[0],m=p[1],b=p[2],x=m-b-i*v;(v||x)&&z6(e,a)&&(h+=x,f+=v);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Dg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},YO=function(e){return[e.deltaX,e.deltaY]},GO=function(e){return e&&"current"in e?e.current:e},MQ=function(e,t){return e[0]===t[0]&&e[1]===t[1]},IQ=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},LQ=0,Eu=[];function FQ(e){var t=g.useRef([]),r=g.useRef([0,0]),n=g.useRef(),s=g.useState(LQ++)[0],i=g.useState(x2)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=P6([e.lockRef.current],(e.shards||[]).map(GO)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=g.useCallback(function(m,b){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var x=Dg(m),w=r.current,_="deltaX"in m?m.deltaX:w[0]-x[0],j="deltaY"in m?m.deltaY:w[1]-x[1],k,S=m.target,E=Math.abs(_)>Math.abs(j)?"h":"v";if("touches"in m&&E==="h"&&S.type==="range")return!1;var C=KO(E,S);if(!C)return!0;if(C?k=E:(k=E==="v"?"h":"v",C=KO(E,S)),!C)return!1;if(!n.current&&"changedTouches"in m&&(_||j)&&(n.current=k),!k)return!0;var T=n.current||k;return DQ(T,b,m,T==="h"?_:j)},[]),l=g.useCallback(function(m){var b=m;if(!(!Eu.length||Eu[Eu.length-1]!==i)){var x="deltaY"in b?YO(b):Dg(b),w=t.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&MQ(k.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(GO).filter(Boolean).filter(function(k){return k.contains(b.target)}),j=_.length>0?a(b,_[0]):!o.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),c=g.useCallback(function(m,b,x,w){var _={name:m,delta:b,target:x,should:w,shadowParent:$Q(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(j){return j!==_})},1)},[]),u=g.useCallback(function(m){r.current=Dg(m),n.current=void 0},[]),h=g.useCallback(function(m){c(m.type,YO(m),m.target,a(m,e.lockRef.current))},[]),f=g.useCallback(function(m){c(m.type,Dg(m),m.target,a(m,e.lockRef.current))},[]);g.useEffect(function(){return Eu.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Cu),document.addEventListener("touchmove",l,Cu),document.addEventListener("touchstart",u,Cu),function(){Eu=Eu.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,Cu),document.removeEventListener("touchmove",l,Cu),document.removeEventListener("touchstart",u,Cu)}},[]);var p=e.removeScrollBar,v=e.inert;return g.createElement(g.Fragment,null,v?g.createElement(i,{styles:IQ(s)}):null,p?g.createElement(F6,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function $Q(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const zQ=I6(L6,FQ);var q6=g.forwardRef(function(e,t){return g.createElement(sx,on({},e,{ref:t,sideCar:zQ}))});q6.classNames=sx.classNames;var UQ=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Tu=new WeakMap,Mg=new WeakMap,Ig={},q0=0,B6=function(e){return e&&(e.host||B6(e.parentNode))},qQ=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=B6(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},BQ=function(e,t,r,n){var s=qQ(t,Array.isArray(e)?e:[e]);Ig[r]||(Ig[r]=new WeakMap);var i=Ig[r],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(n),v=p!==null&&p!=="false",m=(Tu.get(f)||0)+1,b=(i.get(f)||0)+1;Tu.set(f,m),i.set(f,b),o.push(f),m===1&&v&&Mg.set(f,!0),b===1&&f.setAttribute(r,"true"),v||f.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return u(t),a.clear(),q0++,function(){o.forEach(function(h){var f=Tu.get(h)-1,p=i.get(h)-1;Tu.set(h,f),i.set(h,p),f||(Mg.has(h)||h.removeAttribute(n),Mg.delete(h)),p||h.removeAttribute(r)}),q0--,q0||(Tu=new WeakMap,Tu=new WeakMap,Mg=new WeakMap,Ig={})}},W6=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=UQ(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),BQ(n,s,r,"aria-hidden")):function(){return null}},ix="Dialog",[V6,H6]=xh(ix),[WQ,_i]=V6(ix),K6=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,a=g.useRef(null),l=g.useRef(null),[c,u]=nx({prop:n,defaultProp:s??!1,onChange:i,caller:ix});return d.jsx(WQ,{scope:t,triggerRef:a,contentRef:l,contentId:rp(),titleId:rp(),descriptionId:rp(),open:c,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};K6.displayName=ix;var Y6="DialogTrigger",G6=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=_i(Y6,r),i=qn(t,s.triggerRef);return d.jsx($r.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":j2(s.open),...n,ref:i,onClick:Er(e.onClick,s.onOpenToggle)})});G6.displayName=Y6;var w2="DialogPortal",[VQ,Z6]=V6(w2,{forceMount:void 0}),J6=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=_i(w2,t);return d.jsx(VQ,{scope:t,forceMount:r,children:g.Children.map(n,o=>d.jsx(Nm,{present:r||i.open,children:d.jsx(O6,{asChild:!0,container:s,children:o})}))})};J6.displayName=w2;var dv="DialogOverlay",Q6=g.forwardRef((e,t)=>{const r=Z6(dv,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=_i(dv,e.__scopeDialog);return i.modal?d.jsx(Nm,{present:n||i.open,children:d.jsx(KQ,{...s,ref:t})}):null});Q6.displayName=dv;var HQ=Ep("DialogOverlay.RemoveScroll"),KQ=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=_i(dv,r);return d.jsx(q6,{as:HQ,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx($r.div,{"data-state":j2(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),zc="DialogContent",X6=g.forwardRef((e,t)=>{const r=Z6(zc,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=_i(zc,e.__scopeDialog);return d.jsx(Nm,{present:n||i.open,children:i.modal?d.jsx(YQ,{...s,ref:t}):d.jsx(GQ,{...s,ref:t})})});X6.displayName=zc;var YQ=g.forwardRef((e,t)=>{const r=_i(zc,e.__scopeDialog),n=g.useRef(null),s=qn(t,r.contentRef,n);return g.useEffect(()=>{const i=n.current;if(i)return W6(i)},[]),d.jsx(eF,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Er(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Er(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Er(e.onFocusOutside,i=>i.preventDefault())})}),GQ=g.forwardRef((e,t)=>{const r=_i(zc,e.__scopeDialog),n=g.useRef(!1),s=g.useRef(!1);return d.jsx(eF,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var o,a;(o=e.onInteractOutside)==null||o.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;(a=r.triggerRef.current)!=null&&a.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),eF=g.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,a=_i(zc,r),l=g.useRef(null),c=qn(t,l);return cQ(),d.jsxs(d.Fragment,{children:[d.jsx(T6,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(C6,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":j2(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(JQ,{titleId:a.titleId}),d.jsx(XQ,{contentRef:l,descriptionId:a.descriptionId})]})]})}),_2="DialogTitle",tF=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=_i(_2,r);return d.jsx($r.h2,{id:s.titleId,...n,ref:t})});tF.displayName=_2;var rF="DialogDescription",nF=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=_i(rF,r);return d.jsx($r.p,{id:s.descriptionId,...n,ref:t})});nF.displayName=rF;var sF="DialogClose",iF=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=_i(sF,r);return d.jsx($r.button,{type:"button",...n,ref:t,onClick:Er(e.onClick,()=>s.onOpenChange(!1))})});iF.displayName=sF;function j2(e){return e?"open":"closed"}var oF="DialogTitleWarning",[ZQ,aF]=MJ(oF,{contentName:zc,titleName:_2,docsSlug:"dialog"}),JQ=({titleId:e})=>{const t=aF(oF),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},QQ="DialogDescriptionWarning",XQ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${aF(QQ).contentName}}.`;return g.useEffect(()=>{var n;const s=(n=e.current)==null?void 0:n.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},eX=K6,lF=G6,cF=J6,k2=Q6,S2=X6,N2=tF,C2=nF,E2=iF,tX="AlertDialog",[rX,cze]=xh(tX,[H6]),vl=H6(),nX="AlertDialogTrigger",sX=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=vl(r);return d.jsx(lF,{...s,...n,ref:t})});sX.displayName=nX;var iX="AlertDialogPortal",uF=e=>{const{__scopeAlertDialog:t,...r}=e,n=vl(t);return d.jsx(cF,{...n,...r})};uF.displayName=iX;var oX="AlertDialogOverlay",dF=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=vl(r);return d.jsx(k2,{...s,...n,ref:t})});dF.displayName=oX;var yd="AlertDialogContent",[aX,lX]=rX(yd),cX=FY("AlertDialogContent"),hF=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,i=vl(r),o=g.useRef(null),a=qn(t,o),l=g.useRef(null);return d.jsx(ZQ,{contentName:yd,titleName:fF,docsSlug:"alert-dialog",children:d.jsx(aX,{scope:r,cancelRef:l,children:d.jsxs(S2,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:Er(s.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[d.jsx(cX,{children:n}),d.jsx(dX,{contentRef:o})]})})})});hF.displayName=yd;var fF="AlertDialogTitle",pF=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=vl(r);return d.jsx(N2,{...s,...n,ref:t})});pF.displayName=fF;var mF="AlertDialogDescription",gF=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=vl(r);return d.jsx(C2,{...s,...n,ref:t})});gF.displayName=mF;var uX="AlertDialogAction",yF=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=vl(r);return d.jsx(E2,{...s,...n,ref:t})});yF.displayName=uX;var vF="AlertDialogCancel",bF=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=lX(vF,r),i=vl(r),o=qn(t,s);return d.jsx(E2,{...i,...n,ref:o})});bF.displayName=vF;var dX=({contentRef:e})=>{const t=`\`${yd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${yd}\` by passing a \`${mF}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${yd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},hX=uF,xF=dF,wF=hF,_F=yF,jF=bF,kF=pF,SF=gF;const fX=hX,NF=g.forwardRef(({className:e,...t},r)=>d.jsx(xF,{className:Ke("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));NF.displayName=xF.displayName;const pX=g.forwardRef(({className:e,...t},r)=>d.jsxs(fX,{children:[d.jsx(NF,{}),d.jsx(wF,{ref:r,className:Ke("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));pX.displayName=wF.displayName;const mX=g.forwardRef(({className:e,...t},r)=>d.jsx(kF,{ref:r,className:Ke("text-lg font-semibold",e),...t}));mX.displayName=kF.displayName;const gX=g.forwardRef(({className:e,...t},r)=>d.jsx(SF,{ref:r,className:Ke("text-sm text-muted-foreground",e),...t}));gX.displayName=SF.displayName;const yX=g.forwardRef(({className:e,...t},r)=>d.jsx(_F,{ref:r,className:Ke("inline-flex h-10 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground ring-offset-background transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));yX.displayName=_F.displayName;const vX=g.forwardRef(({className:e,...t},r)=>d.jsx(jF,{ref:r,className:Ke("inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500","sm:mt-0",e),...t}));vX.displayName=jF.displayName;const bX="",xX="";console.error("Missing Supabase environment variables. Please check your .env file.");v6(bX,xX,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Qj({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function T2(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function CF(e,t,r="/"){return wX(e,t,r,!1)}function wX(e,t,r,n){let s=typeof t=="string"?T2(t):t,i=ll(s.pathname||"/",r);if(i==null)return null;let o=EF(e);_X(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=RX(i);a=OX(o[l],c,n)}return a}function EF(e,t=[],r=[],n="",s=!1){let i=(o,a,l=s,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;Fr(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=qo([n,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(Fr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),EF(o.children,t,f,h,l)),!(o.path==null&&!o.index)&&t.push({path:h,score:TX(h,o.index),routesMeta:f})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of TF(o.path))i(o,a,!0,c)}),t}function TF(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=TF(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function _X(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:AX(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var jX=/^:[\w-]+$/,kX=3,SX=2,NX=1,CX=10,EX=-2,ZO=e=>e==="*";function TX(e,t){let r=e.split("/"),n=r.length;return r.some(ZO)&&(n+=EX),t&&(n+=SX),r.filter(s=>!ZO(s)).reduce((s,i)=>s+(jX.test(i)?kX:i===""?NX:CX),n)}function AX(e,t){return e.length===t.length&&e.slice(0,-1).every((r,n)=>r===t[n])?e[e.length-1]-t[t.length-1]:0}function OX(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=hv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=hv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:qo([i,h.pathname]),pathnameBase:LX(qo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=qo([i,h.pathnameBase]))}return o}function hv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=PX(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((l,{paramName:c,isOptional:u},h)=>{if(c==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[h];return u&&!f?l[c]=void 0:l[c]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:e}}function PX(e,t=!1,r=!0){mi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,a)=>(n.push({paramName:o,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function RX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ll(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function DX(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?T2(e):e;return{pathname:r?r.startsWith("/")?r:MX(r,t):t,search:FX(n),hash:$X(s)}}function MX(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function B0(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IX(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function A2(e){let t=IX(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function O2(e,t,r,n=!1){let s;typeof e=="string"?s=T2(e):(s={...e},Fr(!s.pathname||!s.pathname.includes("?"),B0("?","pathname","search",s)),Fr(!s.pathname||!s.pathname.includes("#"),B0("#","pathname","hash",s)),Fr(!s.search||!s.search.includes("#"),B0("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?t[h]:"/"}let l=DX(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var qo=e=>e.join("/").replace(/\/\/+/g,"/"),LX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),FX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$X=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var AF=["POST","PUT","PATCH","DELETE"];new Set(AF);var UX=["GET",...AF];new Set(UX);var wh=g.createContext(null);wh.displayName="DataRouter";var ox=g.createContext(null);ox.displayName="DataRouterState";g.createContext(!1);var OF=g.createContext({isTransitioning:!1});OF.displayName="ViewTransition";var qX=g.createContext(new Map);qX.displayName="Fetchers";var BX=g.createContext(null);BX.displayName="Await";var uo=g.createContext(null);uo.displayName="Navigation";var P2=g.createContext(null);P2.displayName="Location";var Ms=g.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var R2=g.createContext(null);R2.displayName="RouteError";function WX(e,{relative:t}={}){Fr(Cm(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=g.useContext(uo),{hash:s,pathname:i,search:o}=Em(e,{relative:t}),a=i;return r!=="/"&&(a=i==="/"?r:qo([r,i])),n.createHref({pathname:a,search:o,hash:s})}function Cm(){return g.useContext(P2)!=null}function ji(){return Fr(Cm(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(P2).location}var PF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RF(e){g.useContext(uo).static||g.useLayoutEffect(e)}function ca(){let{isDataRoute:e}=g.useContext(Ms);return e?iee():VX()}function VX(){Fr(Cm(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(wh),{basename:t,navigator:r}=g.useContext(uo),{matches:n}=g.useContext(Ms),{pathname:s}=ji(),i=JSON.stringify(A2(n)),o=g.useRef(!1);return RF(()=>{o.current=!0}),g.useCallback((a,l={})=>{if(mi(o.current,PF),!o.current)return;if(typeof a=="number"){r.go(a);return}let c=O2(a,JSON.parse(i),s,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:qo([t,c.pathname])),(l.replace?r.replace:r.push)(c,l.state,l)},[t,r,i,s,e])}var HX=g.createContext(null);function KX(e){let t=g.useContext(Ms).outlet;return t&&g.createElement(HX.Provider,{value:e},t)}function ax(){let{matches:e}=g.useContext(Ms),t=e[e.length-1];return t?t.params:{}}function Em(e,{relative:t}={}){let{matches:r}=g.useContext(Ms),{pathname:n}=ji(),s=JSON.stringify(A2(r));return g.useMemo(()=>O2(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function YX(e,t,r,n,s){Fr(Cm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(uo),{matches:o}=g.useContext(Ms),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",h=a&&a.route;{let x=h&&h.path||"";DF(c,!h||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let f=ji(),p;p=f;let v=p.pathname||"/",m=v;if(u!=="/"){let x=u.replace(/^\//,"").split("/");m="/"+v.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=CF(e,{pathname:m});return mi(h||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),mi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),XX(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:qo([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:qo([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,r,n,s)}function GX(){let e=see(),t=zX(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:s},r):null,o)}var ZX=g.createElement(GX,null),JX=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Ms.Provider,{value:this.props.routeContext},g.createElement(R2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QX({routeContext:e,match:t,children:r}){let n=g.useContext(wh);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Ms.Provider,{value:e},r)}function XX(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let c=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Fr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,l=-1;if(r)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:f}=r,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,u,h)=>{let f,p=!1,v=null,m=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,v=u.route.errorElement||ZX,a&&(l<0&&h===0?(DF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,m=null):l===h&&(p=!0,m=u.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,h+1)),x=()=>{let w;return f?w=v:p?w=m:u.route.Component?w=g.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=c,g.createElement(QX,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?g.createElement(JX,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):x()},null)}function D2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eee(e){let t=g.useContext(wh);return Fr(t,D2(e)),t}function tee(e){let t=g.useContext(ox);return Fr(t,D2(e)),t}function ree(e){let t=g.useContext(Ms);return Fr(t,D2(e)),t}function M2(e){let t=ree(e),r=t.matches[t.matches.length-1];return Fr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function nee(){return M2("useRouteId")}function see(){var e;let t=g.useContext(R2),r=tee("useRouteError"),n=M2("useRouteError");return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function iee(){let{router:e}=eee("useNavigate"),t=M2("useNavigate"),r=g.useRef(!1);return RF(()=>{r.current=!0}),g.useCallback(async(n,s={})=>{mi(r.current,PF),r.current&&(typeof n=="number"?e.navigate(n):await e.navigate(n,{fromRouteId:t,...s}))},[e,t])}var JO={};function DF(e,t,r){!t&&!JO[e]&&(JO[e]=!0,mi(!1,r))}g.memo(oee);function oee({routes:e,future:t,state:r,unstable_onError:n}){return YX(e,void 0,r,n,t)}function aee({to:e,replace:t,state:r,relative:n}){Fr(Cm(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=g.useContext(uo);mi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=g.useContext(Ms),{pathname:o}=ji(),a=ca(),l=O2(e,A2(i),o,n==="path"),c=JSON.stringify(l);return g.useEffect(()=>{a(JSON.parse(c),{replace:t,state:r,relative:n})},[a,c,n,t,r]),null}function MF(e){return KX(e.context)}var Ly="get",Fy="application/x-www-form-urlencoded";function lx(e){return e!=null&&typeof e.tagName=="string"}function lee(e){return lx(e)&&e.tagName.toLowerCase()==="button"}function cee(e){return lx(e)&&e.tagName.toLowerCase()==="form"}function uee(e){return lx(e)&&e.tagName.toLowerCase()==="input"}function dee(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hee(e,t){return e.button===0&&(!t||t==="_self")&&!dee(e)}function Xj(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function fee(e,t){let r=Xj(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var Lg=null;function pee(){if(Lg===null)try{new FormData(document.createElement("form"),0),Lg=!1}catch{Lg=!0}return Lg}var mee=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function W0(e){return e!=null&&!mee.has(e)?(mi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fy}"`),null):e}function gee(e,t){let r,n,s,i,o;if(cee(e)){let a=e.getAttribute("action");n=a?ll(a,t):null,r=e.getAttribute("method")||Ly,s=W0(e.getAttribute("enctype"))||Fy,i=new FormData(e)}else if(lee(e)||uee(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?ll(l,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||Ly,s=W0(e.getAttribute("formenctype"))||W0(a.getAttribute("enctype"))||Fy,i=new FormData(a,e),!pee()){let{name:c,type:u,value:h}=e;if(u==="image"){let f=c?`${c}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else c&&i.append(c,h)}}else{if(lx(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ly,n=null,s=Fy,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function I2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yee(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&ll(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function vee(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bee(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function xee(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await vee(i,r);return o.links?o.links():[]}return[]}));return kee(n.flat(1).filter(bee).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function QO(e,t,r,n,s,i){let o=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,a=(l,c)=>{var u;return r[c].pathname!==l.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?t.filter((l,c)=>{var u;let h=n.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((u=r[0])==null?void 0:u.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function wee(e,t,{includeHydrateFallback:r}={}){return _ee(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function _ee(e){return[...new Set(e)]}function jee(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function kee(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(jee(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function IF(){let e=g.useContext(wh);return I2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function See(){let e=g.useContext(ox);return I2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var L2=g.createContext(void 0);L2.displayName="FrameworkContext";function LF(){let e=g.useContext(L2);return I2(e,"You must render this element inside a <HydratedRouter> element"),e}function Nee(e,t){let r=g.useContext(L2),[n,s]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=t,f=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=x=>{x.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(m,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[e]),g.useEffect(()=>{if(n){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[n]);let p=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:af(a,p),onBlur:af(l,v),onMouseEnter:af(c,p),onMouseLeave:af(u,v),onTouchStart:af(h,p)}]:[!1,f,{}]}function af(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Cee({page:e,...t}){let{router:r}=IF(),n=g.useMemo(()=>CF(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?g.createElement(Tee,{page:e,matches:n,...t}):null}function Eee(e){let{manifest:t,routeModules:r}=LF(),[n,s]=g.useState([]);return g.useEffect(()=>{let i=!1;return xee(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function Tee({page:e,matches:t,...r}){let n=ji(),{manifest:s,routeModules:i}=LF(),{basename:o}=IF(),{loaderData:a,matches:l}=See(),c=g.useMemo(()=>QO(e,t,l,s,n,"data"),[e,t,l,s,n]),u=g.useMemo(()=>QO(e,t,l,s,n,"assets"),[e,t,l,s,n]),h=g.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let v=new Set,m=!1;if(t.forEach(x=>{var w;let _=s.routes[x.route.id];!_||!_.hasLoader||(!c.some(j=>j.route.id===x.route.id)&&x.route.id in a&&(w=i[x.route.id])!=null&&w.shouldRevalidate||_.hasClientLoader?m=!0:v.add(x.route.id))}),v.size===0)return[];let b=yee(e,o,"data");return m&&v.size>0&&b.searchParams.set("_routes",t.filter(x=>v.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[o,a,n,s,c,t,e,i]),f=g.useMemo(()=>wee(u,s),[u,s]),p=Eee(u);return g.createElement(g.Fragment,null,h.map(v=>g.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),f.map(v=>g.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),p.map(({key:v,link:m})=>g.createElement("link",{key:v,nonce:r.nonce,...m})))}function Aee(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var FF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FF&&(window.__reactRouterVersion="7.8.2")}catch{}var $F=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yr=g.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:s,replace:i,state:o,target:a,to:l,preventScrollReset:c,viewTransition:u,...h},f){let{basename:p}=g.useContext(uo),v=typeof l=="string"&&$F.test(l),m,b=!1;if(typeof l=="string"&&v&&(m=l,FF))try{let C=new URL(window.location.href),T=l.startsWith("//")?new URL(C.protocol+l):new URL(l),O=ll(T.pathname,p);T.origin===C.origin&&O!=null?l=O+T.search+T.hash:b=!0}catch{mi(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=WX(l,{relative:n}),[w,_,j]=Nee(r,h),k=Ree(l,{replace:i,state:o,target:a,preventScrollReset:c,relative:n,viewTransition:u});function S(C){e&&e(C),C.defaultPrevented||k(C)}let E=g.createElement("a",{...h,...j,href:m||x,onClick:b||s?e:S,ref:Aee(f,_),target:a,"data-discover":!v&&t==="render"?"true":void 0});return w&&!v?g.createElement(g.Fragment,null,E,g.createElement(Cee,{page:x})):E});Yr.displayName="Link";var ip=g.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:s,to:i,viewTransition:o,children:a,...l},c){let u=Em(i,{relative:l.relative}),h=ji(),f=g.useContext(ox),{navigator:p,basename:v}=g.useContext(uo),m=f!=null&&$ee(u)&&o===!0,b=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,x=h.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&v&&(w=ll(w,v)||w);const _=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let j=x===b||!n&&x.startsWith(b)&&x.charAt(_)==="/",k=w!=null&&(w===b||!n&&w.startsWith(b)&&w.charAt(b.length)==="/"),S={isActive:j,isPending:k,isTransitioning:m},E=j?e:void 0,C;typeof r=="function"?C=r(S):C=[r,j?"active":null,k?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let T=typeof s=="function"?s(S):s;return g.createElement(Yr,{...l,"aria-current":E,className:C,ref:c,style:T,to:i,viewTransition:o},typeof a=="function"?a(S):a)});ip.displayName="NavLink";var Oee=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=Ly,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...f},p)=>{let v=Lee(),m=Fee(a,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&$F.test(a),w=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let j=_.nativeEvent.submitter,k=(j==null?void 0:j.getAttribute("formmethod"))||o;v(j||_.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:h})};return g.createElement("form",{ref:p,method:b,action:m,onSubmit:n?l:w,...f,"data-discover":!x&&e==="render"?"true":void 0})});Oee.displayName="Form";function Pee(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zF(e){let t=g.useContext(wh);return Fr(t,Pee(e)),t}function Ree(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=ca(),l=ji(),c=Em(e,{relative:i});return g.useCallback(u=>{if(hee(u,t)){u.preventDefault();let h=r!==void 0?r:Qj(l)===Qj(c);a(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,r,n,t,e,s,i,o])}function Dee(e){mi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(Xj(e)),r=g.useRef(!1),n=ji(),s=g.useMemo(()=>fee(n.search,r.current?null:t.current),[n.search]),i=ca(),o=g.useCallback((a,l)=>{const c=Xj(typeof a=="function"?a(new URLSearchParams(s)):a);r.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var Mee=0,Iee=()=>`__${String(++Mee)}__`;function Lee(){let{router:e}=zF("useSubmit"),{basename:t}=g.useContext(uo),r=nee();return g.useCallback(async(n,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=gee(n,t);if(s.navigate===!1){let u=s.fetcherKey||Iee();await e.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function Fee(e,{relative:t}={}){let{basename:r}=g.useContext(uo),n=g.useContext(Ms);Fr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Em(e||".",{relative:t})},o=ji();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(u=>u).forEach(u=>a.append("index",u));let c=a.toString();i.search=c?`?${c}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:qo([r,i.pathname])),Qj(i)}function $ee(e,{relative:t}={}){let r=g.useContext(OF);Fr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=zF("useViewTransitionState"),s=Em(e,{relative:t});if(!r.isTransitioning)return!1;let i=ll(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=ll(r.nextLocation.pathname,n)||r.nextLocation.pathname;return hv(s.pathname,o)!=null||hv(s.pathname,i)!=null}const zee=()=>{const[e,t]=g.useState("login"),[r,n]=g.useState(null),[s,i]=g.useState(!1),[o,a]=g.useState(""),[l,c]=g.useState(""),[u,h]=g.useState(""),[f,p]=g.useState(""),[v,m]=g.useState(""),[b,x]=g.useState(""),[w,_]=g.useState(null),j=ca(),k=(T,O="info")=>{n({text:T,type:O});const P=setTimeout(()=>n(null),6e3);return()=>clearTimeout(P)},S=async T=>{if(T.preventDefault(),!o||!l){k("Please enter both email and password","error");return}i(!0);try{const{error:O}=await le.auth.signInWithPassword({email:o,password:l});if(O)throw O;j("/")}catch(O){const P=O instanceof Error?O.message:"Failed to sign in";k(P,"error")}finally{i(!1)}},E=async T=>{if(T.preventDefault(),f!==b){k("Passwords do not match","error");return}i(!0);try{const{error:O}=await le.auth.signUp({email:u,password:f,options:{data:{display_name:v}}});if(O)throw O;k("Account created! Please check your email to confirm your account.","success"),t("login")}catch(O){const P=O instanceof Error?O.message:"Failed to create account";k(P,"error")}finally{i(!1)}},C=T=>{if(!T){_(null);return}let O=0;T.length>=8&&O++,/[A-Z]/.test(T)&&O++,/[a-z]/.test(T)&&O++,/[0-9]/.test(T)&&O++,/[^A-Za-z0-9]/.test(T)&&O++,T.length>=12&&O++;const P=[{text:"Weak",className:"weak"},{text:"Fair",className:"fair"},{text:"Good",className:"good"},{text:"Strong",className:"strong"},{text:"Very Strong",className:"very-strong"}],D=Math.min(O,P.length-1);_(P[D])};return d.jsx("div",{className:"auth-page",children:d.jsxs("div",{className:"auth-container",children:[d.jsxs("div",{className:"auth-header",children:[d.jsx("h1",{children:e==="login"?"Welcome Back":"Create Account"}),d.jsx("p",{children:e==="login"?"Sign in to access your account":"Join our community today"})]}),r&&d.jsx("div",{className:`message ${r.type}`,children:r.text}),d.jsxs("div",{className:"tabs",children:[d.jsx("button",{className:`tab ${e==="login"?"active":""}`,onClick:()=>t("login"),type:"button",children:"Sign In"}),d.jsx("button",{className:`tab ${e==="signup"?"active":""}`,onClick:()=>t("signup"),type:"button",children:"Create Account"})]}),e==="login"?d.jsxs("form",{className:"auth-form",onSubmit:S,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"loginEmail",children:"Email"}),d.jsx("input",{type:"email",id:"loginEmail",value:o,onChange:T=>a(T.target.value),placeholder:"Enter your email",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"loginPassword",children:"Password"}),d.jsx("input",{type:"password",id:"loginPassword",value:l,onChange:T=>c(T.target.value),placeholder:"Enter your password",required:!0,disabled:s})]}),d.jsx("button",{type:"submit",className:"btn primary",disabled:s,children:s?"Signing in...":"Sign In"}),d.jsx("div",{className:"form-footer",children:d.jsx(Yr,{to:"/forgot-password",children:"Forgot password?"})})]}):d.jsxs("form",{className:"auth-form",onSubmit:E,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupDisplayName",children:"Display Name"}),d.jsx("input",{type:"text",id:"signupDisplayName",value:v,onChange:T=>m(T.target.value),placeholder:"Enter your name",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupEmail",children:"Email"}),d.jsx("input",{type:"email",id:"signupEmail",value:u,onChange:T=>h(T.target.value),placeholder:"your.email@example.com",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupPassword",children:"Password"}),d.jsx("input",{type:"password",id:"signupPassword",value:f,onChange:T=>{p(T.target.value),C(T.target.value)},placeholder:"Create a strong password",required:!0,disabled:s}),w&&d.jsxs("div",{className:`password-strength ${w.className}`,children:["Password strength: ",w.text]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),d.jsx("input",{type:"password",id:"confirmPassword",value:b,onChange:T=>x(T.target.value),placeholder:"Re-enter your password",required:!0,disabled:s})]}),d.jsx("button",{type:"submit",className:"btn primary",disabled:s,children:s?"Creating account...":"Create Account"})]}),d.jsx("div",{className:"auth-divider",children:d.jsx("span",{children:"or continue with"})}),d.jsxs("div",{className:"social-logins",children:[d.jsx("button",{type:"button",className:"btn social google",onClick:()=>k("Google login is not yet implemented","info"),disabled:s,children:"Google"}),d.jsx("button",{type:"button",className:"btn social github",onClick:()=>k("GitHub login is not yet implemented","info"),disabled:s,children:"GitHub"})]}),d.jsx("div",{className:"auth-footer",children:e==="login"?d.jsxs(d.Fragment,{children:["Don't have an account?"," ",d.jsx("button",{type:"button",className:"text-link",onClick:()=>t("signup"),children:"Sign up"})]}):d.jsxs(d.Fragment,{children:["Already have an account?"," ",d.jsx("button",{type:"button",className:"text-link",onClick:()=>t("login"),children:"Sign in"})]})})]})})};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uee=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UF=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bee=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>g.createElement("svg",{ref:l,...qee,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:UF("lucide",s),...a},[...o.map(([c,u])=>g.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(e,t)=>{const r=g.forwardRef(({className:n,...s},i)=>g.createElement(Bee,{ref:i,iconNode:t,className:UF(`lucide-${Uee(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=Re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wee=Re("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Re("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vee=Re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Re("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hee=Re("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=Re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kee=Re("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yee=Re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=Re("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gee=Re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=Re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zee=Re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Re("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jee=Re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Re("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qee=Re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xee=Re("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=Re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ete=Re("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tte=Re("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rte=Re("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nte=Re("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=Re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ste=Re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ite=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=Re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=Re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Re("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ote=Re("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ate=Re("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lte=Re("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=Re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=Re("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=Re("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dte=Re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=Re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=Re("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=Re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pte=Re("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=Re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=Re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=Re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),vte=[{name:"Dashboard",href:"/account/admin",icon:tte},{name:"Posts",href:"/account/admin/posts",icon:Zee},{name:"Media",href:"/account/admin/media",icon:mte},{name:"Users",href:"/account/admin/users",icon:mv},{name:"Beta Applications",href:"/account/admin/beta-applications",icon:mv},{name:"Store",href:"/account/admin/store",icon:hte},{name:"Works",href:"/account/admin/works",icon:Ap},{name:"Timeline",href:"/account/admin/timeline/events",icon:BF},{name:"Settings",href:"/account/admin/settings",icon:cte}],bte=()=>{var e,t;const[r,n]=g.useState(!1),[s,i]=g.useState(!1),o=ji(),a=ca(),{user:l,userProfile:c}=rx();g.useEffect(()=>{i(!1)},[o]);const u=()=>{n(!r)},h=async()=>{await le.auth.signOut(),a("/login")};return d.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200 flex",children:[d.jsx("button",{onClick:u,className:Ke("fixed top-4 left-0 z-50 p-2 rounded-r-lg bg-white dark:bg-gray-800 shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300",r?"translate-x-0":"translate-x-64","lg:hidden"),"aria-label":r?"Expand sidebar":"Collapse sidebar",children:r?d.jsx(F2,{size:20}):d.jsx(Vee,{size:20})}),d.jsx("aside",{className:Ke("fixed top-0 left-0 z-40 h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out",r?"w-0 opacity-0":"w-64 opacity-100",s?"translate-x-0":"-translate-x-full lg:translate-x-0","lg:opacity-100"),children:d.jsxs("div",{className:"h-full flex flex-col",children:[d.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:d.jsx("h2",{className:"text-xl font-bold",children:"Admin"})}),d.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:d.jsx("ul",{className:"space-y-1",children:vte.map(f=>d.jsx("li",{children:d.jsxs(ip,{to:f.href,end:f.href==="/account/admin",className:({isActive:p})=>Ke("flex items-center p-3 rounded-lg transition-colors",p?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700",r?"justify-center":"space-x-3"),children:[d.jsx(f.icon,{size:20,className:"flex-shrink-0"}),!r&&d.jsx("span",{children:f.name})]})},f.name))})}),d.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:d.jsxs("div",{className:Ke("flex items-center",r?"justify-center":"justify-between"),children:[!r&&d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:((e=c==null?void 0:c.display_name)==null?void 0:e.charAt(0))||((t=l==null?void 0:l.email)==null?void 0:t.charAt(0).toUpperCase())}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium truncate max-w-[140px]",children:(c==null?void 0:c.display_name)||"Admin User"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[140px]",children:l==null?void 0:l.email})]})]}),d.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:"Sign out",children:d.jsx(ite,{size:18})})]})})]})}),d.jsx("div",{className:Ke("transition-all duration-300 min-h-screen",r?"lg:ml-0":"lg:ml-64","ml-0 w-full"),children:d.jsx("div",{className:"w-full max-w-[2000px] mx-auto px-4 py-6",children:d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 md:p-6",children:d.jsx(MF,{})})})})]})},xte=({children:e})=>{var t,r;const[n,s]=g.useState(!0),[i,o]=g.useState({isAuthenticated:!1,isAdmin:!1}),a=ji();return g.useEffect(()=>{(async()=>{console.log("⏳ [AdminProtectedRoute] Checking session and admin status...");const{data:{session:l},error:c}=await le.auth.getSession();if(c||!l){console.log("🔒 [AdminProtectedRoute] No authenticated session found."),o({isAuthenticated:!1,isAdmin:!1}),s(!1);return}console.log("✅ [AdminProtectedRoute] Session found. User:",l.user.email);const{data:u,error:h}=await le.rpc("is_admin");h&&console.error("❌ [AdminProtectedRoute] Error calling is_admin RPC:",h);const f={isAuthenticated:!0,isAdmin:u===!0,user:l.user};console.log("✅ [AdminProtectedRoute] Final auth state:",f),o(f),s(!1)})()},[]),n?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto"}),d.jsx("p",{className:"mt-4",children:"Verifying Admin Privileges..."})]})}):i.isAuthenticated?i.isAdmin?d.jsx(d.Fragment,{children:e}):(console.log("❌ [AdminProtectedRoute] Access Denied. User is not an admin."),d.jsx("div",{className:"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8 text-white",children:d.jsx("div",{className:"max-w-4xl mx-auto",children:d.jsxs("div",{className:"bg-gray-800 shadow-lg rounded-lg overflow-hidden",children:[d.jsxs("div",{className:"bg-red-600 p-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Access Denied"}),d.jsx("p",{className:"text-red-100",children:"You do not have the necessary permissions to view this page."})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsx("p",{children:"The page you are trying to access is restricted to administrators only."}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-medium text-gray-300 mb-2",children:"Your Account Details"}),d.jsxs("dl",{className:"bg-gray-700/50 rounded-lg p-4 space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"User ID"}),d.jsx("dd",{className:"font-mono",children:((t=i.user)==null?void 0:t.id)||"N/A"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"Email"}),d.jsx("dd",{children:((r=i.user)==null?void 0:r.email)||"N/A"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"Admin Status"}),d.jsx("dd",{className:"font-semibold text-red-400",children:"Not an Admin"})]})]})]}),d.jsx("p",{children:"If you believe this is an error, please contact support."}),d.jsx("div",{className:"pt-4",children:d.jsx("a",{href:"/",className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Go to Homepage"})})]})]})})})):(console.log("🛑 [AdminProtectedRoute] Not authenticated, redirecting to login."),d.jsx(aee,{to:"/login",state:{from:a},replace:!0}))},wte="_zoroHeader_6lzsp_2",_te="_logo_6lzsp_16",jte="_navbar_6lzsp_23",kte="_navMenu_6lzsp_27",Ste="_navLink_6lzsp_39",Nte="_dropdownMenu_6lzsp_53",Cte="_dropdownMenuItem_6lzsp_73",Ete="_dropdown_6lzsp_53",Tte="_headerControls_6lzsp_96",Ate="_searchForm_6lzsp_121",Ote="_themeToggle_6lzsp_165",Pte="_icon_6lzsp_186",Rte="_iconSun_6lzsp_197",Dte="_iconMoon_6lzsp_203",tn={zoroHeader:wte,logo:_te,navbar:jte,navMenu:kte,navLink:Ste,dropdownMenu:Nte,dropdownMenuItem:Cte,dropdown:Ete,headerControls:Tte,searchForm:Ate,themeToggle:Ote,icon:Pte,iconSun:Rte,iconMoon:Dte},eP="zoro-theme",Mte=()=>{const[e,t]=g.useState(()=>{if(typeof window<"u"){const n=localStorage.getItem(eP),s=window.matchMedia("(prefers-color-scheme: dark)").matches;return n??(s?"dark":"light")}return"dark"});g.useEffect(()=>{const n=window.document.documentElement;n.setAttribute("data-theme",e),localStorage.setItem(eP,e),e==="dark"?(n.classList.add("dark"),n.classList.remove("light")):(n.classList.add("light"),n.classList.remove("dark"))},[e]);const r=()=>{t(n=>n==="dark"?"light":"dark")};return d.jsxs("button",{id:"theme-toggle",className:tn.themeToggle,"aria-label":"Toggle dark mode","aria-pressed":e==="dark"?"true":"false",title:e==="dark"?"Switch to light mode":"Switch to dark mode",onClick:r,children:[d.jsxs("svg",{className:`${tn.icon} ${tn.iconSun}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:[d.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),d.jsxs("g",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[d.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"5"}),d.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),d.jsx("line",{x1:"2",y1:"12",x2:"5",y2:"12"}),d.jsx("line",{x1:"19",y1:"12",x2:"22",y2:"12"}),d.jsx("line",{x1:"4.2",y1:"4.2",x2:"6.3",y2:"6.3"}),d.jsx("line",{x1:"17.7",y1:"17.7",x2:"19.8",y2:"19.8"}),d.jsx("line",{x1:"4.2",y1:"19.8",x2:"6.3",y2:"17.7"}),d.jsx("line",{x1:"17.7",y1:"6.3",x2:"19.8",y2:"4.2"})]})]}),d.jsx("svg",{className:`${tn.icon} ${tn.iconMoon}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:d.jsx("path",{d:`M21 14.5a9 9 0 1 1-8.5-12
                 a8 8 0 0 0 8.5 12z`,fill:"currentColor"})})]})},Ite=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState(!1),[s,i]=g.useState("none"),o=ca();g.useEffect(()=>{(async()=>{var u,h;const{data:{session:f}}=await le.auth.getSession();n(!!f),(h=(u=f==null?void 0:f.user)==null?void 0:u.user_metadata)!=null&&h.betaApplicationStatus&&i(f.user.user_metadata.betaApplicationStatus)})();const{data:c}=le.auth.onAuthStateChange((u,h)=>{var f,p;n(!!h),(p=(f=h==null?void 0:h.user)==null?void 0:f.user_metadata)!=null&&p.betaApplicationStatus&&i(h.user.user_metadata.betaApplicationStatus)});return()=>{c.subscription.unsubscribe()}},[]);const a=async()=>{await le.auth.signOut(),o("/")},l=[{name:"Home",path:"/"},{name:"Explore",path:"#",children:[{name:"Library",path:"/library"},{name:"Wiki",path:"/wiki"},{name:"Timelines",path:"/timelines"},{name:"Characters",path:"/characters"},{name:"Blog",path:"/blog"}]},{name:"Beta Program",path:"/beta/application"}];if(r){const c=[];c.push({name:"Store",path:"/store"}),c.push({name:"Subscriptions",path:"/subscriptions"}),s==="accepted"&&c.push({name:"Beta Portal",path:"/beta/portal"}),c.push({name:"My Account",path:"/account"}),l.push({name:"Account",path:"#",children:c}),l.push({name:"Logout",path:"#",onClick:a})}else l.push({name:"Login",path:"/login"});return d.jsxs("header",{className:tn.zoroHeader,children:[d.jsx("div",{className:tn.logo,children:d.jsx(ip,{to:"/",children:d.jsx("h1",{children:"Zoroasterverse"})})}),d.jsxs("div",{className:tn.headerControls,children:[" ",d.jsxs("form",{className:tn.searchForm,children:[d.jsx("input",{type:"text",placeholder:"Search..."}),d.jsxs("button",{type:"submit",children:[d.jsx(nu,{})," "]})]}),d.jsx(Mte,{})," "]}),d.jsx("nav",{className:tn.navbar,children:d.jsx("ul",{className:tn.navMenu,children:l.map(c=>d.jsxs("li",{className:c.children?tn.dropdown:"",children:[c.onClick?d.jsx("button",{onClick:c.onClick,className:tn.navLink,children:c.name}):d.jsxs(ip,{to:c.path,className:tn.navLink,children:[c.name," ",c.children?"▾":""]}),c.children&&d.jsx("ul",{className:tn.dropdownMenu,children:c.children.map(u=>d.jsx("li",{children:d.jsx(ip,{to:u.path,className:tn.dropdownMenuItem,children:u.name})},u.name))})]},c.name))})})]})},Lte="_zoroFooter_8qpog_1",Fte="_footerContent_8qpog_8",$te="_footerColumns_8qpog_13",zte="_column_8qpog_20",Ute="_socialIcons_8qpog_50",qte="_footerQuote_8qpog_59",Sa={zoroFooter:Lte,footerContent:Fte,footerColumns:$te,column:zte,socialIcons:Ute,footerQuote:qte},Bte=()=>d.jsx("footer",{className:Sa.zoroFooter,children:d.jsxs("div",{className:Sa.footerContent,children:[d.jsxs("div",{className:Sa.footerColumns,children:[d.jsxs("div",{className:Sa.column,children:[d.jsx("h4",{children:"Zoroasterverse"}),d.jsx("p",{children:"“Truth is the architect of happiness.”"}),d.jsxs("p",{children:["© ",new Date().getFullYear()," Zoroasterverse. All rights reserved."]})]}),d.jsxs("div",{className:Sa.column,children:[d.jsx("h4",{children:"Explore"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx("a",{href:"/about",children:"About"})}),d.jsx("li",{children:d.jsx("a",{href:"/books",children:"Books"})}),d.jsx("li",{children:d.jsx("a",{href:"/collaborate",children:"Artist Collaboration"})}),d.jsx("li",{children:d.jsx("a",{href:"/contact",children:"Contact"})})]})]}),d.jsxs("div",{className:Sa.column,children:[d.jsx("h4",{children:"Connect"}),d.jsxs("ul",{className:Sa.socialIcons,children:[d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(pte,{})})}),d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(ete,{})})}),d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(KF,{})})})]})]})]}),d.jsx("div",{className:Sa.footerQuote,children:d.jsx("em",{children:"“Let your conscience be the altar where right intention dwells.”"})})]})}),Wte=()=>d.jsxs("div",{className:"zr-root",children:[d.jsx(Ite,{}),d.jsx("main",{children:d.jsx(MF,{})}),d.jsx(Bte,{})]});var ux=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Pp=typeof window>"u"||"Deno"in globalThis;function gv(){}function tP(e){return typeof e=="number"&&e>=0&&e!==1/0}function Vte(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ap(e,t){return typeof e=="function"?e(t):e}function ri(e,t){return typeof e=="function"?e(t):e}function rP(e){return JSON.stringify(e,(t,r)=>ek(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function GF(e,t){if(e===t)return e;const r=nP(e)&&nP(t);if(r||ek(e)&&ek(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),o=i.length,a=r?[]:{},l=new Set(n);let c=0;for(let u=0;u<o;u++){const h=r?u:i[u];(!r&&l.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(a[h]=void 0,c++):(a[h]=GF(e[h],t[h]),a[h]===e[h]&&e[h]!==void 0&&c++)}return s===o&&c===s?e:a}return t}function yv(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function nP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ek(e){if(!sP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!sP(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function sP(e){return Object.prototype.toString.call(e)==="[object Object]"}function iP(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?GF(e,t):t}function ZF(e,t){return typeof e=="function"?e(...t):!!e}var Au,Hl,lf,oP,Hte=(oP=class extends ux{constructor(){super(),bt(this,Au),bt(this,Hl),bt(this,lf),Qe(this,lf,e=>{if(!Pp&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){se(this,Hl)||this.setEventListener(se(this,lf))}onUnsubscribe(){var e;this.hasListeners()||((e=se(this,Hl))==null||e.call(this),Qe(this,Hl,void 0))}setEventListener(e){var t;Qe(this,lf,e),(t=se(this,Hl))==null||t.call(this),Qe(this,Hl,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){se(this,Au)!==e&&(Qe(this,Au,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof se(this,Au)=="boolean"?se(this,Au):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Au=new WeakMap,Hl=new WeakMap,lf=new WeakMap,oP),Kte=new Hte,cf,Kl,uf,aP,Yte=(aP=class extends ux{constructor(){super(),bt(this,cf,!0),bt(this,Kl),bt(this,uf),Qe(this,uf,e=>{if(!Pp&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){se(this,Kl)||this.setEventListener(se(this,uf))}onUnsubscribe(){var e;this.hasListeners()||((e=se(this,Kl))==null||e.call(this),Qe(this,Kl,void 0))}setEventListener(e){var t;Qe(this,uf,e),(t=se(this,Kl))==null||t.call(this),Qe(this,Kl,e(this.setOnline.bind(this)))}setOnline(e){se(this,cf)!==e&&(Qe(this,cf,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return se(this,cf)}},cf=new WeakMap,Kl=new WeakMap,uf=new WeakMap,aP),Gte=new Yte;function lP(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function Zte(e){return(e??"online")==="online"?Gte.isOnline():!0}var Jte=e=>setTimeout(e,0);function Qte(){let e=[],t=0,r=a=>{a()},n=a=>{a()},s=Jte;const i=a=>{t?e.push(a):s(()=>{r(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var dx=Qte();function Xte(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Zte(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ere(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wn,nt,Fg,On,Ou,df,Na,Yl,$g,hf,ff,Pu,Ru,Gl,pf,Jt,mf,H0,K0,Y0,G0,Z0,J0,Q0,cP,uP,tre=(uP=class extends ux{constructor(e,t){super(),bt(this,Jt),bt(this,Wn),bt(this,nt),bt(this,Fg),bt(this,On),bt(this,Ou),bt(this,df),bt(this,Na),bt(this,Yl),bt(this,$g),bt(this,hf),bt(this,ff),bt(this,Pu),bt(this,Ru),bt(this,Gl),bt(this,pf,new Set),this.options=t,Qe(this,Wn,e),Qe(this,Yl,null),Qe(this,Na,lP()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(se(this,nt).addObserver(this),dP(se(this,nt),this.options)?Pt(this,Jt,mf).call(this):this.updateResult(),Pt(this,Jt,G0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return tk(se(this,nt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return tk(se(this,nt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Pt(this,Jt,Z0).call(this),Pt(this,Jt,J0).call(this),se(this,nt).removeObserver(this)}setOptions(e){const t=this.options,r=se(this,nt);if(this.options=se(this,Wn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ri(this.options.enabled,se(this,nt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Pt(this,Jt,Q0).call(this),se(this,nt).setOptions(this.options),t._defaulted&&!yv(this.options,t)&&se(this,Wn).getQueryCache().notify({type:"observerOptionsUpdated",query:se(this,nt),observer:this});const n=this.hasListeners();n&&hP(se(this,nt),r,this.options,t)&&Pt(this,Jt,mf).call(this),this.updateResult(),n&&(se(this,nt)!==r||ri(this.options.enabled,se(this,nt))!==ri(t.enabled,se(this,nt))||ap(this.options.staleTime,se(this,nt))!==ap(t.staleTime,se(this,nt)))&&Pt(this,Jt,H0).call(this);const s=Pt(this,Jt,K0).call(this);n&&(se(this,nt)!==r||ri(this.options.enabled,se(this,nt))!==ri(t.enabled,se(this,nt))||s!==se(this,Gl))&&Pt(this,Jt,Y0).call(this,s)}getOptimisticResult(e){const t=se(this,Wn).getQueryCache().build(se(this,Wn),e),r=this.createResult(t,e);return nre(this,r)&&(Qe(this,On,r),Qe(this,df,this.options),Qe(this,Ou,se(this,nt).state)),r}getCurrentResult(){return se(this,On)}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t==null||t(n),n==="promise"&&!this.options.experimental_prefetchInRender&&se(this,Na).status==="pending"&&se(this,Na).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(e){se(this,pf).add(e)}getCurrentQuery(){return se(this,nt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=se(this,Wn).defaultQueryOptions(e),r=se(this,Wn).getQueryCache().build(se(this,Wn),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Pt(this,Jt,mf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),se(this,On)))}createResult(e,t){var r;const n=se(this,nt),s=this.options,i=se(this,On),o=se(this,Ou),a=se(this,df),l=e!==n?e.state:se(this,Fg),{state:c}=e;let u={...c},h=!1,f;if(t._optimisticResults){const E=this.hasListeners(),C=!E&&dP(e,t),T=E&&hP(e,n,t,s);(C||T)&&(u={...u,...Xte(c.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:p,errorUpdatedAt:v,status:m}=u;f=u.data;let b=!1;if(t.placeholderData!==void 0&&f===void 0&&m==="pending"){let E;i!=null&&i.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?(E=i.data,b=!0):E=typeof t.placeholderData=="function"?t.placeholderData((r=se(this,ff))==null?void 0:r.state.data,se(this,ff)):t.placeholderData,E!==void 0&&(m="success",f=iP(i==null?void 0:i.data,E,t),h=!0)}if(t.select&&f!==void 0&&!b)if(i&&f===(o==null?void 0:o.data)&&t.select===se(this,$g))f=se(this,hf);else try{Qe(this,$g,t.select),f=t.select(f),f=iP(i==null?void 0:i.data,f,t),Qe(this,hf,f),Qe(this,Yl,null)}catch(E){Qe(this,Yl,E)}se(this,Yl)&&(p=se(this,Yl),f=se(this,hf),v=Date.now(),m="error");const x=u.fetchStatus==="fetching",w=m==="pending",_=m==="error",j=w&&x,k=f!==void 0,S={status:m,fetchStatus:u.fetchStatus,isPending:w,isSuccess:m==="success",isError:_,isInitialLoading:j,isLoading:j,data:f,dataUpdatedAt:u.dataUpdatedAt,error:p,errorUpdatedAt:v,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:x,isRefetching:x&&!w,isLoadingError:_&&!k,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&k,isStale:q2(e,t),refetch:this.refetch,promise:se(this,Na),isEnabled:ri(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const E=O=>{S.status==="error"?O.reject(S.error):S.data!==void 0&&O.resolve(S.data)},C=()=>{const O=Qe(this,Na,S.promise=lP());E(O)},T=se(this,Na);switch(T.status){case"pending":e.queryHash===n.queryHash&&E(T);break;case"fulfilled":(S.status==="error"||S.data!==T.value)&&C();break;case"rejected":(S.status!=="error"||S.error!==T.reason)&&C();break}}return S}updateResult(){const e=se(this,On),t=this.createResult(se(this,nt),this.options);if(Qe(this,Ou,se(this,nt).state),Qe(this,df,this.options),se(this,Ou).data!==void 0&&Qe(this,ff,se(this,nt)),yv(t,e))return;Qe(this,On,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,s=typeof n=="function"?n():n;if(s==="all"||!s&&!se(this,pf).size)return!0;const i=new Set(s??se(this,pf));return this.options.throwOnError&&i.add("error"),Object.keys(se(this,On)).some(o=>{const a=o;return se(this,On)[a]!==e[a]&&i.has(a)})};Pt(this,Jt,cP).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Pt(this,Jt,G0).call(this)}},Wn=new WeakMap,nt=new WeakMap,Fg=new WeakMap,On=new WeakMap,Ou=new WeakMap,df=new WeakMap,Na=new WeakMap,Yl=new WeakMap,$g=new WeakMap,hf=new WeakMap,ff=new WeakMap,Pu=new WeakMap,Ru=new WeakMap,Gl=new WeakMap,pf=new WeakMap,Jt=new WeakSet,mf=function(e){Pt(this,Jt,Q0).call(this);let t=se(this,nt).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(gv)),t},H0=function(){Pt(this,Jt,Z0).call(this);const e=ap(this.options.staleTime,se(this,nt));if(Pp||se(this,On).isStale||!tP(e))return;const t=Vte(se(this,On).dataUpdatedAt,e)+1;Qe(this,Pu,setTimeout(()=>{se(this,On).isStale||this.updateResult()},t))},K0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(se(this,nt)):this.options.refetchInterval)??!1},Y0=function(e){Pt(this,Jt,J0).call(this),Qe(this,Gl,e),!(Pp||ri(this.options.enabled,se(this,nt))===!1||!tP(se(this,Gl))||se(this,Gl)===0)&&Qe(this,Ru,setInterval(()=>{(this.options.refetchIntervalInBackground||Kte.isFocused())&&Pt(this,Jt,mf).call(this)},se(this,Gl)))},G0=function(){Pt(this,Jt,H0).call(this),Pt(this,Jt,Y0).call(this,Pt(this,Jt,K0).call(this))},Z0=function(){se(this,Pu)&&(clearTimeout(se(this,Pu)),Qe(this,Pu,void 0))},J0=function(){se(this,Ru)&&(clearInterval(se(this,Ru)),Qe(this,Ru,void 0))},Q0=function(){const e=se(this,Wn).getQueryCache().build(se(this,Wn),this.options);if(e===se(this,nt))return;const t=se(this,nt);Qe(this,nt,e),Qe(this,Fg,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},cP=function(e){dx.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(se(this,On))}),se(this,Wn).getQueryCache().notify({query:se(this,nt),type:"observerResultsUpdated"})})},uP);function rre(e,t){return ri(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function dP(e,t){return rre(e,t)||e.state.data!==void 0&&tk(e,t,t.refetchOnMount)}function tk(e,t,r){if(ri(t.enabled,e)!==!1&&ap(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&q2(e,t)}return!1}function hP(e,t,r,n){return(e!==t||ri(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&q2(e,r)}function q2(e,t){return ri(t.enabled,e)!==!1&&e.isStaleByTime(ap(t.staleTime,e))}function nre(e,t){return!yv(e.getCurrentResult(),t)}var Zl,Jl,Vn,Ca,Ql,zg,X0,fP,sre=(fP=class extends ux{constructor(e,t){super(),bt(this,Ql),bt(this,Zl),bt(this,Jl),bt(this,Vn),bt(this,Ca),Qe(this,Zl,e),this.setOptions(t),this.bindMethods(),Pt(this,Ql,zg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=se(this,Zl).defaultMutationOptions(e),yv(this.options,r)||se(this,Zl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:se(this,Vn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&rP(r.mutationKey)!==rP(this.options.mutationKey)?this.reset():((t=se(this,Vn))==null?void 0:t.state.status)==="pending"&&se(this,Vn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=se(this,Vn))==null||e.removeObserver(this)}onMutationUpdate(e){Pt(this,Ql,zg).call(this),Pt(this,Ql,X0).call(this,e)}getCurrentResult(){return se(this,Jl)}reset(){var e;(e=se(this,Vn))==null||e.removeObserver(this),Qe(this,Vn,void 0),Pt(this,Ql,zg).call(this),Pt(this,Ql,X0).call(this)}mutate(e,t){var r;return Qe(this,Ca,t),(r=se(this,Vn))==null||r.removeObserver(this),Qe(this,Vn,se(this,Zl).getMutationCache().build(se(this,Zl),this.options)),se(this,Vn).addObserver(this),se(this,Vn).execute(e)}},Zl=new WeakMap,Jl=new WeakMap,Vn=new WeakMap,Ca=new WeakMap,Ql=new WeakSet,zg=function(){var e;const t=((e=se(this,Vn))==null?void 0:e.state)??ere();Qe(this,Jl,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},X0=function(e){dx.batch(()=>{var t,r,n,s,i,o,a,l;if(se(this,Ca)&&this.hasListeners()){const c=se(this,Jl).variables,u=se(this,Jl).context;(e==null?void 0:e.type)==="success"?((r=(t=se(this,Ca)).onSuccess)==null||r.call(t,e.data,c,u),(s=(n=se(this,Ca)).onSettled)==null||s.call(n,e.data,null,c,u)):(e==null?void 0:e.type)==="error"&&((o=(i=se(this,Ca)).onError)==null||o.call(i,e.error,c,u),(l=(a=se(this,Ca)).onSettled)==null||l.call(a,void 0,e.error,c,u))}this.listeners.forEach(c=>{c(se(this,Jl))})})},fP),ire=g.createContext(void 0),ua=e=>{const t=g.useContext(ire);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},JF=g.createContext(!1),ore=()=>g.useContext(JF);JF.Provider;function are(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var lre=g.createContext(are()),cre=()=>g.useContext(lre),ure=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},dre=e=>{g.useEffect(()=>{e.clearReset()},[e])},hre=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||ZF(r,[e.error,n])),fre=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},pre=(e,t)=>e.isLoading&&e.isFetching&&!t,mre=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,pP=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function gre(e,t,r){var n,s,i,o,a;const l=ore(),c=cre(),u=ua(),h=u.defaultQueryOptions(e);(s=(n=u.getDefaultOptions().queries)==null?void 0:n._experimental_beforeQuery)==null||s.call(n,h),h._optimisticResults=l?"isRestoring":"optimistic",fre(h),ure(h,c),dre(c);const f=!u.getQueryCache().get(h.queryHash),[p]=g.useState(()=>new t(u,h)),v=p.getOptimisticResult(h),m=!l&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(b=>{const x=m?p.subscribe(dx.batchCalls(b)):gv;return p.updateResult(),x},[p,m]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),g.useEffect(()=>{p.setOptions(h)},[h,p]),mre(h,v))throw pP(h,p,c);if(hre({result:v,errorResetBoundary:c,throwOnError:h.throwOnError,query:u.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw v.error;if((o=(i=u.getDefaultOptions().queries)==null?void 0:i._experimental_afterQuery)==null||o.call(i,h,v),h.experimental_prefetchInRender&&!Pp&&pre(v,l)){const b=f?pP(h,p,c):(a=u.getQueryCache().get(h.queryHash))==null?void 0:a.promise;b==null||b.catch(gv).finally(()=>{p.updateResult()})}return h.notifyOnChangeProps?v:p.trackResult(v)}function hr(e,t){return gre(e,tre)}function Gt(e,t){const r=ua(),[n]=g.useState(()=>new sre(r,e));g.useEffect(()=>{n.setOptions(e)},[n,e]);const s=g.useSyncExternalStore(g.useCallback(o=>n.subscribe(dx.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=g.useCallback((o,a)=>{n.mutate(o,a).catch(gv)},[n]);if(s.error&&ZF(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const yre="_zrHero_1fsok_1",vre="_parchmentCard_1fsok_12",bre="_zrHeroContent_1fsok_70",xre="_zrTitle_1fsok_74",wre="_zrQuote_1fsok_88",_re="_zrIntro_1fsok_97",jre="_zrCta_1fsok_105",kre="_zrHeroArt_1fsok_123",Sre="_videoFire_1fsok_156",Nre="_prophecyMask_1fsok_168",Cre="_prophecyReel_1fsok_183",Ere="_prophecyReelSpinning_1fsok_189",Tre="_prophecyItem_1fsok_193",Are="_englishText_1fsok_207",Ore="_zrSection_1fsok_256",Pre="_zrH2_1fsok_263",Rre="_srOnly_1fsok_279",Dre="_spinsIndicator_1fsok_286",Mre="_spinDot_1fsok_295",Ire="_spinDotActive_1fsok_322",ot={zrHero:yre,parchmentCard:vre,zrHeroContent:bre,zrTitle:xre,zrQuote:wre,zrIntro:_re,zrCta:jre,zrHeroArt:kre,videoFire:Sre,prophecyMask:Nre,prophecyReel:Cre,prophecyReelSpinning:Ere,prophecyItem:Tre,englishText:Are,zrSection:Ore,zrH2:Pre,srOnly:Rre,spinsIndicator:Dre,spinDot:Mre,spinDotActive:Ire},Lre=async()=>{const{data:e,error:t}=await le.from("homepage_content").select("*");if(t)throw new Error(t.message);return e},Fre=async()=>{const{data:e,error:t}=await le.from("posts").select("id, title, slug, content, created_at").eq("status","published").order("created_at",{ascending:!1}).limit(3);if(t)throw new Error(t.message);return e},$re=async()=>{const{data:e,error:t}=await le.from("release_items").select("*").order("created_at",{ascending:!1});if(t)throw new Error(t.message);return e},zre=({spinsLeft:e,setSpinsLeft:t})=>{const r=g.useRef(null),[n,s]=g.useState(!1),i=150,o=[{english:"Your heart is a compass that always points toward love—trust it, follow it, honor it."},{english:"You are not who you were yesterday unless you choose to be—each day offers the gift of becoming."},{english:"The friend of truth shall be the friend of my spirit, O Ahura Mazda. (Yasna 46.2)"},{english:"Every moment is sacred when approached with reverence, every task holy when performed with love."},{english:"The mind aligned with truth thinks God's thoughts after Him, sees with divine eyes, loves with cosmic heart."},{english:"May the beneficent spirit help us to speak truth and act righteously. (Yasna 47.6)"},{english:"Hope is the thing with feathers that perches in the soul and sings without words."},{english:"Self-knowledge is the beginning of wisdom, self-acceptance the foundation of growth."},{english:"Grant me, O Truth, the rewards of good thinking that bring joy and satisfaction. (Yasna 50.4)"},{english:"The sacred fire burns brightest in the heart that chooses truth over comfort. Let your conscience be the altar where right intention dwells."},{english:"Truth without compassion is cruelty; compassion without truth is sentimentality—balance both."},{english:"I praise You as the greatest and best, as the most beautiful, O Mazda Ahura. (Yasna 43.16)"},{english:"Truth is the architect of happiness, the foundation of peace, the cornerstone of wisdom. Build your life upon this rock."},{english:"The weight of moral choice is the proof of human dignity—angels don't choose, demons can't choose, but you can."},{english:"Plant seeds of hope in winter and trust them to bloom when spring returns to your life."},{english:"Appreciation is the highest form of prayer—seeing the divine in every blessing."},{english:"The future is not predetermined but is being written by every choice you make right now."},{english:"When shadows of doubt gather, kindle the inner flame of discernment. Fire purifies not by destroying, but by revealing what is true."},{english:"Begin each day as if it were your first—with wonder. End each day as if it were your last—with gratitude."},{english:"Morning brings the gift of choice renewed. Stand at the crossroads of thought and deed—which path serves the light?"},{english:"We invoke good thinking, truth, and the beneficent spirit of Ahura Mazda. (Yasna 37.4)"},{english:"Where truth flourishes, freedom follows; where freedom is genuine, truth is honored."},{english:"The divine dwells not only in temples but in every heart that welcomes it, every life that serves it."},{english:"The sacred fire asks no permission to burn, needs no fuel but truth, casts no shadow but illumination."},{english:"May we be instruments of peace, servants of truth, children of light. (Benediction)"},{english:"Let the fire within you remember the spark of dawn—every choice a new horizon to the world's unfolding. Walk in watchfulness, and the light of Good Mind will not fail you."},{english:"Devotion asks not what you can receive but what you can give, not what you deserve but what you can serve."},{english:"Freedom is not the absence of constraints but the presence of meaningful options."},{english:"Through the beneficent spirit, may we overcome all obstacles to righteousness. (Prayer)"},{english:"The light of understanding grows not by accumulating facts but by illuminating connections."},{english:"The peaceful heart creates peaceful surroundings; the harmonious soul attracts harmonious relationships."},{english:"I take refuge in good thinking, truth, and Your lordship, Mazda, from whom comes the most beneficent spirit. (Yasna 33.5)"},{english:"Rational thought and intuitive wisdom are not opposites but partners in the dance of understanding."},{english:"When you have the power to help and choose not to, you become complicit in the suffering you could have prevented."},{english:"Like a candle lights a thousand candles without diminishing, share your inner light freely with all."},{english:"You are both the author and the main character of your life story—write it well."},{english:"The good mind is not the mind that knows everything but the mind that remains open to learning."},{english:"The stranger is just a friend you haven't met yet, a teacher you haven't learned from yet, a gift you haven't unwrapped yet."},{english:"Those who seek to destroy my family and clan, Mazda, I put them in Your hands through good thinking and truth. (Yasna 48.8)"},{english:"I pray to You with outstretched hands, O Mazda, seeking Your help through the beneficent spirit. (Yasna 50.8)"},{english:"Every decision is a seed planted in the soil of time. What kind of forest are you growing?"},{english:"Devotion is gratitude in action, love expressing itself through loyal service."},{english:"The fire of truth burns away all that is false in you, leaving only what is real and precious."},{english:"The unexamined life scatters like leaves in the wind; the examined life grows deep roots in truth."},{english:"The arc of justice bends only when people like you choose to bend it—be a force for righteousness."},{english:"Choose as if your choice matters to everyone who will ever live—because it does."},{english:"When Good Mind came to me, I first learned to proclaim Your words, O Mazda. (Yasna 43.15)"},{english:"To You, the beneficent ones shall come for refuge, Mazda, not to the followers of falsehood. (Yasna 48.4)"},{english:"Understanding comes not from standing above others but from standing with them in shared humanity."},{english:"The doorway to wisdom opens inward—the journey begins when you stop looking outside and start looking within."},{english:"May we be worthy of Your friendship through righteous actions, O Mazda. (Yasna 46.6)"},{english:"This I ask You: tell me truly, Ahura—what craftsman created light and darkness? (Yasna 44.5)"},{english:"Harmony does not require uniformity—an orchestra creates beauty through coordinated differences."},{english:"May Ahura Mazda be praised! May the beneficent spirit be glorified! (Traditional praise)"},{english:"Wisdom whispers while foolishness shouts—train your ear to hear the quiet voice of truth."},{english:"The measure of a society is how it treats those who cannot defend themselves."},{english:"What doesn't challenge you doesn't change you; what doesn't stretch you doesn't strengthen you."},{english:"Fair is not everyone getting the same thing; fair is everyone getting what they need to thrive."},{english:"Through Your fire, show me the rewards that come through truth for both parties—those who uphold righteousness and those who do not. (Yasna 31.3)"},{english:"The world is changed not by those who point out what's wrong but by those who do what's right."},{english:"Service is love made visible, compassion made practical, faith made fruitful."},{english:"I have recognized You as beneficent through truth and good thinking, O Mazda. (Yasna 49.5)"},{english:"The holy is not somewhere else or some time else but here and now, in this place, at this moment."},{english:"Let your presence be a sanctuary where others can find rest from the storms of life."},{english:"Friendship is truth telling and burden sharing, celebration and consolation, walking together toward the light."},{english:"Small daily improvements lead to stunning yearly results—be consistent rather than dramatic."},{english:"The mind that dwells in truth becomes a sanctuary where peace is always available."},{english:"Your life is a sacred text written one choice at a time—make it a beautiful story."},{english:"Blessed is he who brings happiness to others through truth and good deeds. (Traditional blessing)"},{english:"You are the protector of the righteous, O Mazda, through Your beneficent spirit. (Yasna 47.3)"},{english:"This I ask You: tell me truly, Ahura—who established the path of the sun and stars? (Yasna 44.5)"},{english:"At the crossroads of decision, remember: you are always choosing not just for yourself but for all who will follow."},{english:"I approach You, O Mazda, with good thinking, so that You may grant me both the blessings of this existence and that of the spirit. (Yasna 28.4)"},{english:"Your life is your offering—what will you place on the altar of existence?"},{english:"Learning from others shortens your path to wisdom; teaching others deepens your own understanding."},{english:"Pure thoughts birth noble words; noble words inspire righteous deeds; righteous deeds purify thoughts in return."},{english:"Every meal is communion when shared with gratitude, every conversation prayer when spoken with love."},{english:"The freedom to choose your response to any situation is the last of human freedoms—exercise it wisely."},{english:"Your conscience is your connection to cosmic justice—honor it by living in alignment with its guidance."},{english:"Every sunrise is nature's way of saying, 'Try again'—accept the invitation with gratitude."},{english:"Truth is patient but not passive, gentle but not weak, humble but not uncertain of its worth."},{english:"Action without reflection is blind; reflection without action is empty; but action guided by reflection is transformative."},{english:"Righteousness is the best good. Happiness to him who is righteous for the sake of righteousness alone. (Ashem Vohu variation)"},{english:"Community is not a place but a relationship, not a location but a connection."},{english:"Good thinking leads to good feeling, good feeling leads to good willing, good willing leads to good living."},{english:"Every crossroads is a classroom, every decision a teacher, every consequence a lesson."},{english:"The present moment is the only moment over which you have power—make it count."},{english:"Hope is not naive optimism but courageous commitment to work for what ought to be."},{english:"Every mistake is a teacher in disguise, every failure a step toward success, every setback a setup for comeback."},{english:"The inner fire burns brightest not when fed by passion but when fueled by principle."},{english:"Your privilege is not your fault, but your responsibility. Use whatever advantages you have to lift others."},{english:"Through Your radiant fire, assign the destiny of the righteous and the unrighteous, O Mazda, that our teaching may spread among the living. (Yasna 31.19)"},{english:"Knowledge builds walls to separate us from ignorance; wisdom builds bridges to connect us with all beings."},{english:"As long as I have strength and power, I shall teach people to seek truth. (Yasna 45.4)"},{english:"The beneficent spirit manifests wherever love meets action. Be the hands and heart through which goodness enters the world."},{english:"The bounteous mentality sees abundance everywhere—in every sunrise, every breath, every opportunity to serve the good."},{english:"The mind illuminated by truth sees possibilities where others see only problems. Think with hope, and hope becomes reality."},{english:"Peace begins with each person choosing to be peaceful, harmony starts with each individual choosing to be harmonious."},{english:"Let gratitude be your first thought at dawn, your last thought at dusk, your constant companion throughout the day."},{english:"I realized You, Mazda, to be beneficent when I was encircled by Good Mind, when he taught me to proclaim: 'Let not men seek to please the followers of falsehood.' (Yasna 43.11)"},{english:"Compassion is not feeling sorry for others but feeling with them, sharing their burden until it becomes lighter."},{english:"Count your blessings, not your problems; focus on your gains, not your losses; see your progress, not your perfection."},{english:"Compassion is not pity from above but solidarity from within—suffer with, celebrate with, grow with."},{english:"At every moment you are choosing who you are becoming—choose the highest version of yourself."},{english:"Evening reflection is the mirror of morning intention. End as mindfully as you began."},{english:"True knowledge transforms the knower. If you remain unchanged by what you learn, you have learned nothing."},{english:"The paradox of freedom: you are most free when you choose to serve something greater than yourself."},{english:"The ripple effects of your actions extend far beyond what you can see—act as if the future depends on you."},{english:"The fire of wisdom burns without consuming. Feed it with honest reflection, and it will illumine your path forever."},{english:"Let your thoughts be seeds of kindness, your words be rain of encouragement, your deeds be sunshine of hope."},{english:"For whom did You create this earth and sky? Who made the luminaries and the darkness? (Yasna 29.1)"},{english:"Your presence in the world matters more than you know—show up fully, authentically, lovingly."},{english:"When the world seems broken beyond repair, remember that you are part of the repair."},{english:"The darkness is never permanent, the light is never extinguished completely. Keep the vigil."},{english:"To help the world progress, O Mazda, we have sought You through good thinking. (Yasna 30.6)"},{english:"Let your spirit be a fountain, not a drain. Pour out blessing upon blessing, and watch the desert of despair bloom."},{english:"Loneliness is the human condition; connection is the human choice. Choose connection."},{english:"For a wise Lord I knew You to be, Mazda, when Good Mind came to me and asked: 'Who are you? To whom do you belong?' (Yasna 43.7)"},{english:"True strength is not in never falling but in how gracefully you rise each time you fall."},{english:"Disorder is not the opposite of truth but its absence—fill the void with authentic being."},{english:"The path of wisdom begins with a single step: the decision to begin walking."},{english:"True justice considers not only what is legal but what is right, not only what is permitted but what is beneficial."},{english:"Grant me, O Mazda, through Your most beneficent spirit, through truth, the rewards of good thinking, through which I may bring joy to my supporters. (Yasna 28.11)"},{english:"The fire of Ahura Mazda brings light to the righteous and terror to the wicked. (Fire prayer)"},{english:"Your choices are your prayers—they reveal what you truly worship, what you genuinely value."},{english:"The false teacher leads people astray from the path of good thinking and truth. (Yasna 32.3)"},{english:"The phoenix rises not in spite of the ashes but because of them—let your failures fuel your renewal."},{english:"Forgiveness is not condoning what was wrong but choosing to be free from the burden of carrying resentment."},{english:"I praise good thoughts, good words, good deeds, and the good religion. (Fravarane prayer)"},{english:"The greatest among you will be your servant—greatness is measured by how much you give, not how much you get."},{english:"The morning star reminds us: even in the darkest hour, light is already on its way."},{english:"Where differences divide, find common ground; where similarities unite, celebrate diversity."},{english:"You who are Mazda, through Your spirit and fire, through truth and good thinking, grant me integrity and strength. (Yasna 28.7)"},{english:"In the garden of the heart, plant seeds of truthful speech. Words watered with wisdom bloom into lasting peace."},{english:"Your daily habits are votes for the type of person you wish to become—vote wisely."},{english:"May we receive the promised reward, the joy that comes from truth, O Mazda. (Yasna 33.11)"},{english:"Hope plants seeds in winter, trusting in the promise of spring."},{english:"You are not just in the community; the community is in you—you carry it wherever you go."},{english:"Your presence is often more healing than your words, your listening more valuable than your advice."},{english:"You are a unique note in the symphony of existence—play your part beautifully and boldly."},{english:"Bridge-builders are more valuable than wall-builders, peacemakers more needed than warriors."},{english:"Growth requires leaving your comfort zone regularly—comfort and growth cannot coexist."},{english:"But the righteous man chooses truth and good thinking as his allies. (Yasna 32.2)"},{english:"The threefold path begins in the silence of right thinking, flows through the beauty of truthful speech, and culminates in the power of loving action."},{english:"Truth needs no defense, only expression. Speak it simply and let its power do the rest."},{english:"Through good deeds may we come to You, O Mazda, with joy and gladness. (Yasna 50.10)"},{english:"I beheld You clearly in my mind's eye as the first one at the birth of life, when You made actions have consequences—evil for the evil, good reward for the good. (Yasna 43.5)"},{english:"Inner peace is not a luxury but a necessity, not a retreat from the world but preparation for effective engagement."},{english:"The wise heart holds both confidence and humility, certainty and openness, in perfect balance."},{english:"Your breath connects you to every living being—breathe consciously, live connectedly."},{english:"Whoever upholds truth most, whether man or woman, O Mazda Ahura, is most dear to You. (Yasna 46.11)"},{english:"Yes, there are two fundamental spirits, twins, renowned to be in conflict. In thought and word, in action, they are two: the good and the bad. Between these two, the beneficent have correctly chosen. (Yasna 30.3)"},{english:"Transformation happens not when you try to become someone else but when you become more fully yourself."},{english:"Where injustice flourishes, it is not enough to be personally righteous. Stand up, speak out, act decisively."},{english:"Then spoke Ahura Mazda: We have no pastor here who is both knowing and holy. (Yasna 29.6)"},{english:"The practice of gratitude transforms ordinary moments into sacred experiences."},{english:"Truth is like the sun—you cannot look directly at it for long, but it lights everything else."},{english:"I shall serve You with good thinking, with truth and righteous action, so that You may grant me that which leads to the straight path. (Yasna 28.5)"},{english:"May good thinking and truth dwell in our house forever, O Ahura Mazda. (Yasna 60.6)"},{english:"Look within with the same honesty you demand from others, the same compassion you show to friends."},{english:"The healing the world needs begins with the healing you give yourself—be gentle, be patient, be kind."},{english:"Hope is not a feeling but a decision—decide to hope and then live as if your hope is justified."},{english:"One chooses that rule of good thinking allied with truth in order to serve the beneficent spirit. (Yasna 51.18)"},{english:"The good mind is a gift that grows with giving. Share your wisdom freely, and watch understanding multiply among all beings."},{english:"When thought, word, and deed align like three rivers meeting, their combined power can move mountains of indifference."},{english:"The music of the spheres plays on—attune your heart to hear the cosmic symphony of love."},{english:"We rise by lifting others, we succeed by serving others, we find ourselves by losing ourselves in love."},{english:"The truth you speak has a past—it comes from your experience. Make sure that past is worthy of the truth."},{english:"The beneficent spirit breathes in every act of kindness. When you lift another's burden, you lighten the world."},{english:"Your talents are gifts to be shared, not treasures to be hoarded—invest them in making the world better."},{english:"The grateful heart attracts more to be grateful for—appreciation is the magnet for abundance."},{english:"The person who knows their weaknesses is stronger than the person who denies them."},{english:"May good fortune come through truth to those who proclaim these teachings, O Mazda. (Yasna 51.16)"},{english:"Meditation is the art of listening to the still small voice that whispers your deepest truth."},{english:"The most important choice you make each day is who you choose to become in that day."},{english:"Order emerges not from control but from harmony—the willing cooperation of free beings choosing good."},{english:"True intelligence is not the ability to solve problems but to see the connections between all things."},{english:"Thus speaks the maiden: 'You are the support of good thinking, of truth, and of the lordship desired by Mazda.' (Yasna 53.3)"},{english:"The spiral of growth means you will revisit the same lessons at deeper levels—embrace the journey."},{english:"When you choose increase over decrease, healing over harm, you align with the progressive spirit of creation itself."},{english:"When someone trusts you with their vulnerability, you hold sacred ground. Tread carefully and gratefully."},{english:"Renewal comes not from changing everything at once but from changing one thing completely."},{english:"When will the noble warriors come who shall drive out from here the thirst of the wicked? (Yasna 32.1)"},{english:"The sacred space is wherever you are when you remember who you really are and why you are here."},{english:"Good thinking, good words, and good deeds—these three bring a person to paradise, the best existence, light, and all good things. (Traditional summary)"},{english:"The progressive spirit never asks 'Why me?' but always 'How can I help?' Be an answer to someone's prayer today."},{english:"Then shall I recognize You as mighty, Mazda, when through good thinking You shall grant the blessings that the truthful and untruthful seek. (Yasna 45.8)"},{english:"I know You to be the first and the last, O Ahura Mazda—You are father of good thinking, creator of truth, judge of our actions. (Yasna 31.8)"},{english:"Wisdom is not knowing all the answers but asking better questions. Begin with: How can I serve?"},{english:"Conscience is the ember of the divine fire planted in every human heart—tend it carefully."},{english:"By Your beneficent spirit and by fire, O Mazda, show me truth and good thinking, through whose work one goes to Your abode. (Yasna 31.20)"},{english:"Come to my help, O Mazda, grant me strength through truth and good thinking. (Yasna 33.6)"},{english:"Through good deeds and righteous words, may we please Your spirit, O Mazda. (Yasna 49.10)"},{english:"Through truth we serve the Lord of Wisdom with good mind and beneficial action. (Summary verse)"},{english:"Service is not about being needed but about being useful, not about being thanked but about being trustworthy."},{english:"I who shall serve You with good thinking... may I thus bring solace to the soul of Earth. (Yasna 28.2)"},{english:"Holiness is not about being perfect but about being present, not about being pure but about being real."},{english:"May we be guides for those who seek the path of truth and righteousness. (Yasna 31.22)"},{english:"Wisdom is like water—it takes the shape of whatever vessel contains it, yet never loses its essence."},{english:"The enlightened mind is like clear water—it reflects perfectly what is, without adding or subtracting anything."},{english:"A thankful heart is a magnet for miracles, drawing goodness from the infinite storehouse of grace."},{english:"The pattern that connects all things is love expressing itself as truth, truth expressing itself as justice."},{english:"We are all connected—what helps one helps all, what harms one harms all."},{english:"Both bridegroom and bride, bring your minds into agreement for the practice of the best thoughts. (Yasna 53.4)"},{english:"The questions you ask shape the life you live—ask better questions, live a better life."},{english:"May the light of good thinking shine in our hearts forever. (Prayer verse)"},{english:"True self-knowledge includes knowing not just what you are but what you could become."},{english:"I know You to be mighty when You help me with good thinking, O Mazda Ahura. (Yasna 31.5)"},{english:"Justice is not revenge but restoration—making right what has been wrong, healing what has been harmed."},{english:"The sun rises not because you need it but because it is the nature of the sun to shine—be like the sun."},{english:"Justice is love applied to systems, compassion embodied in institutions, kindness made structural."},{english:"Grant victory to those who speak truth and live righteously, O Ahura Mazda. (Yasna 48.12)"},{english:"The journey inward is the most courageous journey—it requires facing yourself without flinching."},{english:"I have realized You as beneficent, Mazda Ahura, when You came to me with good thinking and asked: 'Who are you willing to please?' (Yasna 49.3)"},{english:"Each choice carves a channel for future choices to follow. Choose wisely what river you dig for tomorrow."},{english:"Therefore may we be among those who make this world fresh and new! (Yasna 30.9)"},{english:"Truth is the gravity of the moral universe—what goes up in lies must come down in consequences."},{english:"The weight of choice is the price of consciousness. Bear it gladly, for it makes you a partner in creation's unfolding."},{english:"This I ask You: Which is the first and which the last? (Yasna 44.6)"},{english:"Thank the sunrise for its faithfulness, the earth for its generosity, life for its infinite possibilities."},{english:"The sacred is not separate from the ordinary but hidden within it, waiting to be discovered."},{english:"Reflect with a clear mind—each person for themselves—before the Great Event of Choices. Awaken to this doctrine: there is no compromise between right and wrong. (Yasna 30.2)"},{english:"Your choices reveal your values more accurately than your words—choose as if your character depends on it."},{english:"You are not just in the world; the world is in you—take care of both."},{english:"Time is the canvas, your choices the paint, your life the masterpiece—create something beautiful."},{english:"I entrust my soul to You, O Mazda, seeking Your protection through good thinking. (Yasna 48.9)"},{english:"The isolated tree falls in the storm; the forest of trees stands strong together."},{english:"Sacred living means recognizing the extraordinary within the ordinary, the eternal within the temporal."},{english:"The arc of the moral universe bends toward justice only when conscious beings like you and me choose to bend it."},{english:"The cosmic order is written in every sunrise, every heartbeat, every act of genuine kindness."},{english:"This I ask You: Who holds up the earth below and keeps the sky from falling? (Yasna 44.4)"},{english:"Let the fire within purify your motives, clarify your vision, energize your compassion."},{english:"The strength of the individual is the community; the strength of the community is the individual."},{english:"The hands that heal are holier than the hands that pray without helping."},{english:"The grateful heart sees abundance everywhere; the ungrateful heart finds scarcity in plenty."},{english:"This I ask You: tell me truly, Ahura—how shall I drive deceit far from us who seek to promote truth in the world? (Yasna 51.4)"},{english:"Every ending contains a beginning; every death, a birth; every loss, an opportunity for growth."},{english:"Know yourself not to become self-absorbed but to become self-aware, not to focus inward but to focus clearly."},{english:"When these two spirits came together in the beginning, they established life and not-life, and how at the end the worst existence shall be for the followers of falsehood, but the best mind for the truthful. (Yasna 30.4)"},{english:"Wisdom is the art of living skillfully, the science of choosing well, the practice of loving wisely."},{english:"In the morning, set your mind like a compass toward truth; let all your steps follow this direction."},{english:"May Your fire shine forth to help the supporter of truth, O Mazda. (Yasna 34.4)"},{english:"The curious mind stays young, the learning heart stays open, the growing soul stays alive."},{english:"The bridge between what is and what could be is built with the materials of hope and hard work."},{english:"The mirror of self-reflection shows not what you want to see but what you need to see."},{english:"Let truth be our guide, good thinking our companion, right action our path. (Summary)"},{english:"The universe conspires to help those who help themselves and others—be part of the conspiracy of good."},{english:"Every act of love is a victory over the forces that diminish life—love boldly, love widely, love deeply."},{english:"The paradox of wisdom: the more you truly know, the more you realize how much you don't know."},{english:"Each day offers lessons if you are willing to be a student, opportunities if you are willing to try."},{english:"Justice is not just a destination but a journey—walk it one step at a time, one choice at a time."},{english:"The beginner's mind sees possibilities everywhere; the expert mind sees problems in everything."},{english:"Every choice is a prayer, every decision a vote for the kind of world you want to live in."},{english:"Justice delayed is often justice denied, but justice rushed is sometimes injustice accomplished. Seek the balanced way."},{english:"To what land to flee? Where shall I go to flee? They exclude me from family and clan. (Yasna 46.1)"},{english:"You are the one who rewards both the truthful and the untruthful according to their deeds. (Yasna 43.12)"},{english:"Who, Mazda, is the faithful friend of Your spirit? Let him teach me the straight paths of good thinking and of truth. (Yasna 47.4)"},{english:"With outstretched hands I pray to You, O Mazda, first of all through truth. (Yasna 28.1)"},{english:"Self-reflection without self-compassion becomes self-criticism; self-compassion without self-reflection becomes self-deception."},{english:"May good thinking reign supreme, may truth be established in the world. (Yasna 45.10)"},{english:"True belonging doesn't require you to change who you are; it requires you to be who you are."},{english:"When you light the lamp of compassion, you illuminate your own path as well as others'."},{english:"The order of existence rewards those who align with it, not to punish those who don't, but to heal what is broken."},{english:"The good mind seeks first to understand, then to be understood; first to serve, then to be served."},{english:"The trinity of human goodness—think well, speak well, act well—echoes the divine harmony that sustains all worlds."},{english:"Freedom is not the absence of consequences but the power to choose which consequences you will embrace."},{english:"Every moment is a fresh beginning, every breath a new chance, every choice a sacred opportunity."},{english:"Begin each day by asking: How can I make today better than yesterday? End each day by answering: How did I succeed?"},{english:"Through Your most beneficent spirit, O Mazda, I seek to do Your will. (Yasna 47.1)"},{english:"The greatest sermon is a life well-lived in service to truth, beauty, and goodness."},{english:"The deepest truth is often the most simple: be kind, be honest, be helpful, be present."},{english:"Peace is not the absence of conflict but the presence of justice, not the silence of oppression but the harmony of mutual respect."},{english:"The darkest night produces the brightest stars—your current darkness may be developing your greatest light."},{english:"Connection is the energy that exists between people when they feel seen, heard, and valued."},{english:"Like fire transforms wood to light, let your choices transform the world from what it is to what it should be."},{english:"Through good thinking, truth, and the spirit's power, they shall overcome the violence of the deceitful. (Yasna 32.16)"},{english:"The day unfolds like a scroll waiting to be written. What story will your choices tell?"},{english:"The gift of choice is also the burden of choice—embrace both aspects with equal courage."},{english:"The scales of justice are balanced not by equal punishment but by proportional restoration."},{english:"The seeds of tomorrow are planted in the soil of today—plant wisely."},{english:"Good thinking is the bridge between knowing and acting. Cross it with courage, and find yourself in the land of fulfillment."},{english:"I approach You, Mazda, with hands outstretched, with good thinking, with truth, hoping to please Your spirit with righteous actions. (Yasna 50.5)"},{english:"The heart that has been broken and healed is stronger than one that has never been tested."},{english:"Thanksgiving is not just a day but a way of life—live thankfully and you will have much to be thankful for."},{english:"Begin each day by asking: How shall I increase the good in the world through my being here?"},{english:"The wise person learns from everyone, teaches everyone, and judges no one harshly."},{english:"Each breath is a gift, each heartbeat a blessing, each moment an opportunity for thankfulness."},{english:"Like a lighthouse guides ships safely home, let your conscience guide you through moral storms to peaceful harbors."},{english:"Your legacy is not what you leave behind but what you build in others while you are here."},{english:"The growing edge is always uncomfortable—that's how you know you're growing."},{english:"We seek Your blessing through fire, through truth, through good thinking. (Yasna 36.3)"},{english:"This I ask You: tell me truly, Ahura—who was the first father of truth by begetting? (Yasna 44.3)"},{english:"Morning is creation's invitation to begin again. Accept it with gratitude and intentional presence."},{english:"Your conscience is the hearth of heaven—tend it with thoughts of justice, words of compassion, deeds of righteousness."},{english:"Your life may be a drop in the ocean, but without your drop the ocean would be less."},{english:"When moral darkness surrounds you, be the flame that others can navigate by."},{english:"Grant us, O Mazda, the straight paths of good thinking and truth. (Yasna 33.5)"},{english:"Your conscience is the sacred fire that never sleeps, never lies, never abandons you in darkness."},{english:"Your work in the world is your worship—do it with the reverence you would bring to the most sacred task."},{english:"True leadership is not about being served but about serving, not about having followers but about creating leaders."},{english:"Renewal comes not from changing your circumstances but from changing your relationship to your circumstances."},{english:"Speak to me as friend speaks to friend! Show me the supports on which both worlds rest. (Yasna 31.3)"},{english:"The light you seek is the light you are—stop looking for it and start being it."},{english:"Honesty is telling the truth to other people; integrity is telling the truth to yourself."},{english:"The wise person is not one who has never erred but one who learns from every mistake."},{english:"When the mind is clear like mountain water, right decisions flow naturally. Still the turbulent thoughts and find your center."},{english:"Through the beneficent spirit, Mazda, give me strength for good thinking, that I may find the straight paths of life. (Yasna 47.2)"},{english:"May we be among those who make this world progress, who are the healers of this world, O Mazda and You, O Truth. (Yasna 30.9)"},{english:"The wise Lord rewards those who serve truth with sincerity and devotion. (Teaching verse)"},{english:"The divine spark within you knows the difference between right and wrong—trust it, follow it, serve it."},{english:"The inner flame burns brightest when fed by deeds of righteousness, words of truth, thoughts of love."},{english:"The deepest wisdom is often the simplest truth, lived with complete sincerity."},{english:"Every person you meet is fighting a battle you know nothing about—be kind, be patient, be present."},{english:"The man of good life speaks to him of ill life: 'May your conscience torment you continuously!' (Yasna 46.11)"},{english:"The flame that burns for justice never consumes the just, only the injustice they oppose."},{english:"We approach You, O Ahura Mazda, with good thinking and truth, seeking Your blessing. (Yasna 34.1)"},{english:"Personal evolution is not about perfection but about progression, not about arrival but about journey."},{english:"Gratitude is the memory of the heart—it never forgets a kindness received or given."},{english:"I shall worship You with good thinking, O Mazda Ahura, so that You may teach me truth through Your spirit. (Yasna 45.6)"},{english:"Each dawn brings the covenant renewed: to think with clarity, speak with truth, act with love."},{english:"Kindness is the universal language that the deaf can hear and the blind can see."},{english:"Even in the darkest times, remember: you are here for a reason, at this time, in this place."},{english:"The phoenix is not reborn from ashes but through them—transformation requires embracing the fire."},{english:"As the first, O Mazda, You gave bodies and breath to the corporeal world through Your thought. (Yasna 31.11)"},{english:"Your inner fire is not yours alone—it is borrowed from the eternal flame that lights all worlds."},{english:"The river that moves you also moves through you—you are not separate from the flow of life."},{english:"The ultimate measure of your life is not what you accomplish but who you become."},{english:"The most precious gift you can give another person is your full, undivided, loving attention."},{english:"Truth is not a destination but a way of walking. Each step in harmony with what is right brings the world closer to wholeness."},{english:"May Ahura Mazda grant us that good which we seek through truth and good thinking. (Yasna 60.12)"},{english:"Gratitude turns what we have into enough, transforms ordinary days into thanksgivings, routine jobs into joy."},{english:"Love is the recognition that the other person's happiness is as important as your own—maybe more important."},{english:"Every person you meet is your teacher—some teach by example, others by cautionary tale."},{english:"Through righteousness may we attain that world of good thinking. (Yasna 34.15)"},{english:"The deceitful one chose to bring to realization the worst things. But the very beneficent spirit chose truth, and so shall those who satisfy the Wise Lord continuously with true actions. (Yasna 30.5)"},{english:"Each breath is a chance to choose life over death, hope over despair, love over fear."},{english:"True understanding comes not from accumulating facts but from seeing the patterns that connect all things."},{english:"Every act of service is a prayer, every moment of helpfulness a hymn, every gesture of kindness a blessing."},{english:"Where truth blooms, falsehood cannot take root. Cultivate the garden of your life with seeds of honesty and integrity."},{english:"The future is not fixed because you are still choosing—make your next choice count."},{english:"The most powerful force in the universe is a human being living in alignment with their highest truth."},{english:"When you see injustice and do nothing, you become part of the injustice—speak up, stand up, act up."},{english:"As rivers seek the sea, let your thoughts flow toward truth. In the silence of right action, wisdom speaks without words."},{english:"Your daily work is your temple, your loving relationships your prayer, your kind actions your worship."},{english:"The true order of existence is good; the most-good existence it is; desire it! Wish it! Happiness, bliss, enlightenment it is for that existence which is the true order of existence. (Ashem Vohu)"},{english:"The heart that has known pain is the heart most capable of healing others' pain."},{english:"Conflict is often the birth-pain of greater understanding—do not avoid it, but engage it constructively."},{english:"Clear thinking leads to clear speaking, which leads to clear acting. Begin each day by clarifying your deepest intentions."},{english:"The order of existence reveals itself to those who seek with sincere hearts. Look closely—truth hides in plain sight."},{english:"Let the actions of good thinking come to fruition for the man who teaches truth to Zarathustra. (Yasna 28.6)"},{english:"The loving man who brings help to the truthful, whether kinsman or fellow-member of the community, is in good accord with truth. (Yasna 46.2)"},{english:"When shall I know that You have power over those who cause harm to me, O Mazda? Let fire accompanied by good thinking make this known to me through truth. (Yasna 48.7)"},{english:"Clarity comes not from having all the answers but from asking the right questions."},{english:"Wisdom is knowing what to do; virtue is doing it; integrity is being consistent in both."},{english:"And when punishment comes to the wicked, then shall Your power be revealed to all, O Mazda. (Yasna 30.8)"},{english:"Your network is not about who can help you but who you can help, not who you know but who knows they can count on you."},{english:"Every ending is a new beginning in disguise—look for the hidden gift in every goodbye."},{english:"Through truth I complete my worship and my praise with actions, O Mazda Ahura. (Yasna 50.11)"},{english:"Where shall the righteous man find refuge when the wicked overwhelm the land? (Yasna 46.1)"},{english:"Like a river finds its course, truth finds its way through every obstacle. Be the clear channel through which it flows."},{english:"Every moment offers the great choice: will you add to the world's burden or its blessing? Choose consciously."},{english:"The rhythm of sunrise and sunset teaches the sacred pace of effort and rest, engagement and reflection."},{english:"Your fire, strong through truth, is a visible help to Your supporter, but visible harm to Your enemy, O Ahura Mazda. (Yasna 34.4)"},{english:"The soul of the earth cries out: For whom did You fashion me? Who created me? (Yasna 29.1)"},{english:"Service is the rent we pay for living on this planet—pay it gladly and generously."}],a=5,l=o.length,c=[];for(let f=0;f<a;f++)c.push(...o);const u=[...c.slice(c.length-l),...c,...c.slice(0,l)],h=async()=>{if(n||!r.current||e<=0){console.log("No spins left or already spinning.");return}console.log("handleSpin called");try{new Audio("/gear-click-351962.mp3").play().catch(m=>console.error("Error playing sound:",m))}catch(m){console.error("Error creating Audio object:",m)}s(!0),t(m=>m-1);const{data:{user:f}}=await le.auth.getUser();if(f){const m=new Date().toISOString().slice(0,10),{error:b}=await le.from("daily_spins").upsert({user_id:f.id,spin_date:m,spin_count:3-e+1},{onConflict:"user_id, spin_date"});b&&console.error("Error updating daily spin count:",b)}const p=Math.floor(Math.random()*o.length),v=(l+p+o.length*Math.floor(a/2))*i;r.current.classList.add(ot.prophecyReelSpinning),r.current.style.transform=`translateY(-${v}px)`,setTimeout(()=>{if(!r.current)return;r.current.classList.remove(ot.prophecyReelSpinning),r.current.style.transition="none";const m=p*i;r.current.style.transform=`translateY(-${m}px)`,r.current.offsetHeight,r.current.style.transition="transform 1.5s cubic-bezier(0.25, 1, 0.5, 1)",s(!1)},1600)};return d.jsx(d.Fragment,{children:d.jsx("div",{className:`${ot.prophecyMask} ${ot.englishMask}`,onClick:h,children:d.jsx("div",{ref:r,className:ot.prophecyReel,children:u.map((f,p)=>d.jsx("div",{className:ot.prophecyItem,children:d.jsx("span",{className:ot.englishText,children:f.english})},p))})})})},Ure=({contentMap:e,spinsLeft:t,setSpinsLeft:r})=>{var n,s,i;const o=((n=e.get("hero_title"))==null?void 0:n.content)||"Zoroasterverse",a=((s=e.get("hero_quote"))==null?void 0:s.content)||"“Happiness comes to them who bring happiness to others.”",l=((i=e.get("hero_description"))==null?void 0:i.content)||"Learn about the teachings of the prophet Zarathustra, the history of one of the world’s oldest religions, and the principles of Good Thoughts, Good Words, and Good Deeds.";return d.jsxs("section",{id:"home",className:ot.zrHero,children:[d.jsxs("div",{className:ot.zrHeroContent,children:[d.jsx("h1",{className:ot.zrTitle,children:o}),d.jsx("p",{className:ot.zrQuote,children:a}),d.jsx("p",{className:ot.zrIntro,children:l}),d.jsx(Yr,{className:ot.zrCta,to:"/blog/about",children:"Learn More"})]}),d.jsxs("figure",{className:ot.zrHeroArt,"aria-labelledby":"art-caption",children:[d.jsx("video",{src:"/200716-913538378.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:ot.videoFire}),d.jsx("div",{className:ot.spinsIndicator,children:[...Array(3)].map((c,u)=>d.jsx("div",{className:`${ot.spinDot} ${u<t?ot.spinDotActive:""}`},u))}),d.jsx(zre,{spinsLeft:t,setSpinsLeft:r}),d.jsx("figcaption",{id:"art-caption",className:ot.srOnly,children:"A stylized winged figure above a sacred fire."})]})]})},qre=({posts:e})=>d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Latest News & Updates"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map(t=>{const r=t.content.length>100?t.content.substring(0,100)+"...":t.content;return d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{children:t.title}),d.jsx("p",{className:"mt-2",dangerouslySetInnerHTML:{__html:r}}),d.jsx(Yr,{to:`/blog/${t.slug}`,className:"mt-4 inline-block",children:"Read More"})]},t.id)})})]}),Bre=({releases:e})=>d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Latest Releases"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map(t=>d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{children:t.title}),d.jsxs("p",{className:"mt-2",children:["Type: ",t.type]}),d.jsx("a",{href:t.link||"#",className:"mt-4 inline-block",children:"View Details / Purchase"})]},t.id))})]}),Wre=()=>{var e,t,r,n;const{data:s,isLoading:i,isError:o}=hr({queryKey:["homepageContent"],queryFn:Lre}),{data:a,isLoading:l,isError:c}=hr({queryKey:["latestPosts"],queryFn:Fre}),{data:u,isLoading:h,isError:f}=hr({queryKey:["releaseItems"],queryFn:$re}),[p,v]=g.useState(3),[m,b]=g.useState(null);g.useEffect(()=>{(async()=>{const{data:{user:j}}=await le.auth.getUser();if(!j){v(0);return}const k=new Date().toISOString().slice(0,10),{data:S,error:E}=await le.from("daily_spins").select("*").eq("user_id",j.id).eq("spin_date",k).single();if(E&&E.code!=="PGRST116"){console.error("Error fetching daily spins:",E),v(0);return}if(S)v(3-S.spin_count),b(S.spin_date);else{v(3),b(k);const{error:C}=await le.from("daily_spins").insert({user_id:j.id,spin_date:k,spin_count:0});C&&console.error("Error inserting new daily spin entry:",C)}})()},[]);const x=i||l||h,w=o||c||f;if(x)return d.jsx("div",{className:"text-center py-8",children:"Loading homepage content..."});if(w)return d.jsx("div",{className:"text-center py-8 text-red-400",children:"Error loading homepage content."});const _=new Map(s==null?void 0:s.map(j=>[j.section,j]));return d.jsxs("div",{children:[d.jsx(Ure,{contentMap:_,spinsLeft:p,setSpinsLeft:v}),d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Our Progress"}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((e=_.get("statistics_words_written"))==null?void 0:e.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Words Written"})]}),d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((t=_.get("statistics_beta_readers"))==null?void 0:t.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Beta Readers"})]}),d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((r=_.get("statistics_average_rating"))==null?void 0:r.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Average Rating"})]}),d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((n=_.get("statistics_books_published"))==null?void 0:n.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Books Published"})]})]})]}),d.jsx(qre,{posts:a||[]}),d.jsx(Bre,{releases:u||[]}),d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Artist Collaboration"}),d.jsxs("div",{className:"relative rounded-lg shadow-lg overflow-hidden w-full",children:[d.jsx("img",{src:"/images/invite_to_Colab_card.png",alt:"Artist Collaboration Invitation",className:"w-full h-full object-contain"}),d.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-8",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-shadow-md",children:"Join Our Creative Team!"}),d.jsx("p",{className:"text-white mb-6 text-shadow-sm",children:"We're looking for talented artists to help shape the visual identity of the Zangar/Spandam Series. Explore revenue-share opportunities and bring your vision to life."}),d.jsx(Yr,{to:"/artist-collaboration",className:"inline-block bg-primary hover:bg-primary-dark text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:"Apply Now"})]})]})]})]})};function Vre(e){const t=e+"CollectionProvider",[r,n]=xh(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:b,children:x}=m,w=ue.useRef(null),_=ue.useRef(new Map).current;return d.jsx(s,{scope:b,itemMap:_,collectionRef:w,children:x})};o.displayName=t;const a=e+"CollectionSlot",l=Ep(a),c=ue.forwardRef((m,b)=>{const{scope:x,children:w}=m,_=i(a,x),j=qn(b,_.collectionRef);return d.jsx(l,{ref:j,children:w})});c.displayName=a;const u=e+"CollectionItemSlot",h="data-radix-collection-item",f=Ep(u),p=ue.forwardRef((m,b)=>{const{scope:x,children:w,..._}=m,j=ue.useRef(null),k=qn(b,j),S=i(u,x);return ue.useEffect(()=>(S.itemMap.set(j,{ref:j,..._}),()=>void S.itemMap.delete(j))),d.jsx(f,{[h]:"",ref:k,children:w})});p.displayName=u;function v(m){const b=i(e+"CollectionConsumer",m);return ue.useCallback(()=>{const x=b.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((_,j)=>w.indexOf(_.ref.current)-w.indexOf(j.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},v,n]}var Hre=g.createContext(void 0);function QF(e){const t=g.useContext(Hre);return e||t||"ltr"}var e_="rovingFocusGroup.onEntryFocus",Kre={bubbles:!1,cancelable:!0},Am="RovingFocusGroup",[rk,XF,Yre]=Vre(Am),[Gre,e$]=xh(Am,[Yre]),[Zre,Jre]=Gre(Am),t$=g.forwardRef((e,t)=>d.jsx(rk.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(rk.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(Qre,{...e,ref:t})})}));t$.displayName=Am;var Qre=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=e,f=g.useRef(null),p=qn(t,f),v=QF(i),[m,b]=nx({prop:o,defaultProp:a??null,onChange:l,caller:Am}),[x,w]=g.useState(!1),_=Vd(c),j=XF(r),k=g.useRef(!1),[S,E]=g.useState(0);return g.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(e_,_),()=>C.removeEventListener(e_,_)},[_]),d.jsx(Zre,{scope:r,orientation:n,dir:v,loop:s,currentTabStopId:m,onItemFocus:g.useCallback(C=>b(C),[b]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>E(C=>C+1),[]),onFocusableItemRemove:g.useCallback(()=>E(C=>C-1),[]),children:d.jsx($r.div,{tabIndex:x||S===0?-1:0,"data-orientation":n,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:Er(e.onMouseDown,()=>{k.current=!0}),onFocus:Er(e.onFocus,C=>{const T=!k.current;if(C.target===C.currentTarget&&T&&!x){const O=new CustomEvent(e_,Kre);if(C.currentTarget.dispatchEvent(O),!O.defaultPrevented){const P=j().filter(F=>F.focusable),D=P.find(F=>F.active),R=P.find(F=>F.id===m),$=[D,R,...P].filter(Boolean).map(F=>F.ref.current);s$($,u)}}k.current=!1}),onBlur:Er(e.onBlur,()=>w(!1))})})}),r$="RovingFocusGroupItem",n$=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...a}=e,l=rp(),c=i||l,u=Jre(r$,r),h=u.currentTabStopId===c,f=XF(r),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:m}=u;return g.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),d.jsx(rk.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:d.jsx($r.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Er(e.onMouseDown,b=>{n?u.onItemFocus(c):b.preventDefault()}),onFocus:Er(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Er(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=tne(b,u.orientation,u.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=f().filter(_=>_.focusable).map(_=>_.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const _=w.indexOf(b.currentTarget);w=u.loop?rne(w,_+1):w.slice(_+1)}setTimeout(()=>s$(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:m!=null}):o})})});n$.displayName=r$;var Xre={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ene(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function tne(e,t,r){const n=ene(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Xre[n]}function s$(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function rne(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var nne=t$,sne=n$,hx="Tabs",[ine,uze]=xh(hx,[e$]),i$=e$(),[one,B2]=ine(hx),o$=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=QF(a),[h,f]=nx({prop:n,onChange:s,defaultProp:i??"",caller:hx});return d.jsx(one,{scope:r,baseId:rp(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:l,children:d.jsx($r.div,{dir:u,"data-orientation":o,...c,ref:t})})});o$.displayName=hx;var a$="TabsList",l$=g.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=B2(a$,r),o=i$(r);return d.jsx(nne,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:d.jsx($r.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});l$.displayName=a$;var c$="TabsTrigger",u$=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,o=B2(c$,r),a=i$(r),l=f$(o.baseId,n),c=p$(o.baseId,n),u=n===o.value;return d.jsx(sne,{asChild:!0,...a,focusable:!s,active:u,children:d.jsx($r.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:t,onMouseDown:Er(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:Er(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:Er(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!s&&h&&o.onValueChange(n)})})})});u$.displayName=c$;var d$="TabsContent",h$=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=e,a=B2(d$,r),l=f$(a.baseId,n),c=p$(a.baseId,n),u=n===a.value,h=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),d.jsx(Nm,{present:s||u,children:({present:f})=>d.jsx($r.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});h$.displayName=d$;function f$(e,t){return`${e}-trigger-${t}`}function p$(e,t){return`${e}-content-${t}`}var ane=o$,m$=l$,g$=u$,y$=h$;const lne=ane,v$=g.forwardRef(({className:e,...t},r)=>d.jsx(m$,{ref:r,className:Ke("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));v$.displayName=m$.displayName;const Mf=g.forwardRef(({className:e,...t},r)=>d.jsx(g$,{ref:r,className:Ke("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Mf.displayName=g$.displayName;const If=g.forwardRef(({className:e,...t},r)=>d.jsx(y$,{ref:r,className:Ke("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));If.displayName=y$.displayName;var Om=e=>e.type==="checkbox",fc=e=>e instanceof Date,bn=e=>e==null;const b$=e=>typeof e=="object";var rr=e=>!bn(e)&&!Array.isArray(e)&&b$(e)&&!fc(e),x$=e=>rr(e)&&e.target?Om(e.target)?e.target.checked:e.target.value:e,cne=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,w$=(e,t)=>e.has(cne(t)),une=e=>{const t=e.constructor&&e.constructor.prototype;return rr(t)&&t.hasOwnProperty("isPrototypeOf")},W2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function _r(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(W2&&(e instanceof Blob||n))&&(r||rr(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!une(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=_r(e[s]));else return e;return t}var fx=e=>/^\w*$/.test(e),Xt=e=>e===void 0,V2=e=>Array.isArray(e)?e.filter(Boolean):[],H2=e=>V2(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ge=(e,t,r)=>{if(!t||!rr(e))return r;const n=(fx(t)?[t]:H2(t)).reduce((s,i)=>bn(s)?s:s[i],e);return Xt(n)||n===e?Xt(e[t])?r:e[t]:n},Gn=e=>typeof e=="boolean",pt=(e,t,r)=>{let n=-1;const s=fx(t)?[t]:H2(t),i=s.length,o=i-1;for(;++n<i;){const a=s[n];let l=r;if(n!==o){const c=e[a];l=rr(c)||Array.isArray(c)?c:isNaN(+s[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=l,e=e[a]}};const vv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ai={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_o={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},_$=ue.createContext(null);_$.displayName="HookFormContext";const K2=()=>ue.useContext(_$);var j$=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==ai.all&&(t._proxyFormState[o]=!n||ai.all),r&&(r[o]=!0),e[o]}});return s};const Y2=typeof window<"u"?ue.useLayoutEffect:ue.useEffect;function dne(e){const t=K2(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[o,a]=ue.useState(r._formState),l=ue.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Y2(()=>r._subscribe({name:s,formState:l.current,exact:i,callback:c=>{!n&&a({...r._formState,...c})}}),[s,n,i]),ue.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),ue.useMemo(()=>j$(o,r,l.current,!1),[o,r])}var Bi=e=>typeof e=="string",k$=(e,t,r,n,s)=>Bi(e)?(n&&t.watch.add(e),ge(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),ge(r,i))):(n&&(t.watchAll=!0),r),nk=e=>bn(e)||!b$(e);function Mo(e,t,r=new WeakSet){if(nk(e)||nk(t))return e===t;if(fc(e)&&fc(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=t[i];if(fc(o)&&fc(a)||rr(o)&&rr(a)||Array.isArray(o)&&Array.isArray(a)?!Mo(o,a,r):o!==a)return!1}}return!0}function hne(e){const t=K2(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:o,compute:a}=e||{},l=ue.useRef(s),c=ue.useRef(a),u=ue.useRef(void 0);c.current=a;const h=ue.useMemo(()=>r._getWatch(n,l.current),[r,n]),[f,p]=ue.useState(c.current?c.current(h):h);return Y2(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:v=>{if(!i){const m=k$(n,r._names,v.values||r._formValues,!1,l.current);if(c.current){const b=c.current(m);Mo(b,u.current)||(p(b),u.current=b)}else p(m)}}}),[r,i,n,o]),ue.useEffect(()=>r._removeUnmounted()),f}function fne(e){const t=K2(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:o}=e,a=w$(s._names.array,r),l=ue.useMemo(()=>ge(s._formValues,r,ge(s._defaultValues,r,o)),[s,r,o]),c=hne({control:s,name:r,defaultValue:l,exact:!0}),u=dne({control:s,name:r,exact:!0}),h=ue.useRef(e),f=ue.useRef(s.register(r,{...e.rules,value:c,...Gn(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const p=ue.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ge(u.errors,r)},isDirty:{enumerable:!0,get:()=>!!ge(u.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ge(u.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ge(u.validatingFields,r)},error:{enumerable:!0,get:()=>ge(u.errors,r)}}),[u,r]),v=ue.useCallback(w=>f.current.onChange({target:{value:x$(w),name:r},type:vv.CHANGE}),[r]),m=ue.useCallback(()=>f.current.onBlur({target:{value:ge(s._formValues,r),name:r},type:vv.BLUR}),[r,s._formValues]),b=ue.useCallback(w=>{const _=ge(s._fields,r);_&&w&&(_._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:j=>w.setCustomValidity(j),reportValidity:()=>w.reportValidity()})},[s._fields,r]),x=ue.useMemo(()=>({name:r,value:c,...Gn(n)||u.disabled?{disabled:u.disabled||n}:{},onChange:v,onBlur:m,ref:b}),[r,n,u.disabled,v,m,b,c]);return ue.useEffect(()=>{const w=s._options.shouldUnregister||i;s.register(r,{...h.current.rules,...Gn(h.current.disabled)?{disabled:h.current.disabled}:{}});const _=(j,k)=>{const S=ge(s._fields,j);S&&S._f&&(S._f.mount=k)};if(_(r,!0),w){const j=_r(ge(s._options.defaultValues,r));pt(s._defaultValues,r,j),Xt(ge(s._formValues,r))&&pt(s._formValues,r,j)}return!a&&s.register(r),()=>{(a?w&&!s._state.action:w)?s.unregister(r):_(r,!1)}},[r,s,a,i]),ue.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),ue.useMemo(()=>({field:x,formState:u,fieldState:p}),[x,u,p])}const t_=e=>e.render(fne(e));var G2=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},lp=e=>Array.isArray(e)?e:[e],mP=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(r=>r!==t)}}),unsubscribe:()=>{e=[]}}},Rn=e=>rr(e)&&!Object.keys(e).length,Z2=e=>e.type==="file",li=e=>typeof e=="function",bv=e=>{if(!W2)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},S$=e=>e.type==="select-multiple",J2=e=>e.type==="radio",pne=e=>J2(e)||Om(e),r_=e=>bv(e)&&e.isConnected;function mne(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Xt(e)?n++:e[t[n++]];return e}function gne(e){for(const t in e)if(e.hasOwnProperty(t)&&!Xt(e[t]))return!1;return!0}function cr(e,t){const r=Array.isArray(t)?t:fx(t)?[t]:H2(t),n=r.length===1?e:mne(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(rr(n)&&Rn(n)||Array.isArray(n)&&gne(n))&&cr(e,r.slice(0,-1)),e}var N$=e=>{for(const t in e)if(li(e[t]))return!0;return!1};function xv(e,t={}){const r=Array.isArray(e);if(rr(e)||r)for(const n in e)Array.isArray(e[n])||rr(e[n])&&!N$(e[n])?(t[n]=Array.isArray(e[n])?[]:{},xv(e[n],t[n])):bn(e[n])||(t[n]=!0);return t}function C$(e,t,r){const n=Array.isArray(e);if(rr(e)||n)for(const s in e)Array.isArray(e[s])||rr(e[s])&&!N$(e[s])?Xt(t)||nk(r[s])?r[s]=Array.isArray(e[s])?xv(e[s],[]):{...xv(e[s])}:C$(e[s],bn(t)?{}:t[s],r[s]):r[s]=!Mo(e[s],t[s]);return r}var gf=(e,t)=>C$(e,t,xv(t));const gP={value:!1,isValid:!1},yP={value:!0,isValid:!0};var E$=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Xt(e[0].attributes.value)?Xt(e[0].value)||e[0].value===""?yP:{value:e[0].value,isValid:!0}:yP:gP}return gP},T$=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Xt(e)?e:t?e===""?NaN:e&&+e:r&&Bi(e)?new Date(e):n?n(e):e;const vP={isValid:!1,value:null};var A$=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,vP):vP;function bP(e){const t=e.ref;return Z2(t)?t.files:J2(t)?A$(e.refs).value:S$(t)?[...t.selectedOptions].map(({value:r})=>r):Om(t)?E$(e.refs).value:T$(Xt(t.value)?e.ref.value:t.value,e)}var yne=(e,t,r,n)=>{const s={};for(const i of e){const o=ge(t,i);o&&pt(s,i,o._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},wv=e=>e instanceof RegExp,yf=e=>Xt(e)?e:wv(e)?e.source:rr(e)?wv(e.value)?e.value.source:e.value:e,xP=e=>({isOnSubmit:!e||e===ai.onSubmit,isOnBlur:e===ai.onBlur,isOnChange:e===ai.onChange,isOnAll:e===ai.all,isOnTouch:e===ai.onTouched});const wP="AsyncFunction";var vne=e=>!!e&&!!e.validate&&!!(li(e.validate)&&e.validate.constructor.name===wP||rr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===wP)),bne=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),_P=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const cp=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=ge(e,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n||o.ref&&t(o.ref,o.name)&&!n)return!0;if(cp(a,t))break}else if(rr(a)&&cp(a,t))break}}};function jP(e,t,r){const n=ge(e,r);if(n||fx(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=ge(t,i),a=ge(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:r}}var xne=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return Rn(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||ai.all))},wne=(e,t,r)=>!e||!t||e===t||lp(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),_ne=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,jne=(e,t)=>!V2(ge(e,t)).length&&cr(e,t),kne=(e,t,r)=>{const n=lp(ge(e,r));return pt(n,"root",t[r]),pt(e,r,n),e},$y=e=>Bi(e);function kP(e,t,r="validate"){if($y(e)||Array.isArray(e)&&e.every($y)||Gn(e)&&!e)return{type:r,message:$y(e)?e:"",ref:t}}var Du=e=>rr(e)&&!wv(e)?e:{value:e,message:""},SP=async(e,t,r,n,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:h,max:f,pattern:p,validate:v,name:m,valueAsNumber:b,mount:x}=e._f,w=ge(r,m);if(!x||t.has(m))return{};const _=a?a[0]:o,j=D=>{s&&_.reportValidity&&(_.setCustomValidity(Gn(D)?"":D||""),_.reportValidity())},k={},S=J2(o),E=Om(o),C=S||E,T=(b||Z2(o))&&Xt(o.value)&&Xt(w)||bv(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,O=G2.bind(null,m,n,k),P=(D,R,$,F=_o.maxLength,V=_o.minLength)=>{const q=D?R:$;k[m]={type:D?F:V,message:q,ref:o,...O(D?F:V,q)}};if(i?!Array.isArray(w)||!w.length:l&&(!C&&(T||bn(w))||Gn(w)&&!w||E&&!E$(a).isValid||S&&!A$(a).isValid)){const{value:D,message:R}=$y(l)?{value:!!l,message:l}:Du(l);if(D&&(k[m]={type:_o.required,message:R,ref:_,...O(_o.required,R)},!n))return j(R),k}if(!T&&(!bn(h)||!bn(f))){let D,R;const $=Du(f),F=Du(h);if(!bn(w)&&!isNaN(w)){const V=o.valueAsNumber||w&&+w;bn($.value)||(D=V>$.value),bn(F.value)||(R=V<F.value)}else{const V=o.valueAsDate||new Date(w),q=L=>new Date(new Date().toDateString()+" "+L),K=o.type=="time",Y=o.type=="week";Bi($.value)&&w&&(D=K?q(w)>q($.value):Y?w>$.value:V>new Date($.value)),Bi(F.value)&&w&&(R=K?q(w)<q(F.value):Y?w<F.value:V<new Date(F.value))}if((D||R)&&(P(!!D,$.message,F.message,_o.max,_o.min),!n))return j(k[m].message),k}if((c||u)&&!T&&(Bi(w)||i&&Array.isArray(w))){const D=Du(c),R=Du(u),$=!bn(D.value)&&w.length>+D.value,F=!bn(R.value)&&w.length<+R.value;if(($||F)&&(P($,D.message,R.message),!n))return j(k[m].message),k}if(p&&!T&&Bi(w)){const{value:D,message:R}=Du(p);if(wv(D)&&!w.match(D)&&(k[m]={type:_o.pattern,message:R,ref:o,...O(_o.pattern,R)},!n))return j(R),k}if(v){if(li(v)){const D=await v(w,r),R=kP(D,_);if(R&&(k[m]={...R,...O(_o.validate,R.message)},!n))return j(R.message),k}else if(rr(v)){let D={};for(const R in v){if(!Rn(D)&&!n)break;const $=kP(await v[R](w,r),_,R);$&&(D={...$,...O(R,$.message)},j($.message),n&&(k[m]=D))}if(!Rn(D)&&(k[m]={ref:_,...D},!n))return k}}return j(!0),k};const Sne={mode:ai.onSubmit,reValidateMode:ai.onChange,shouldFocusError:!0};function Nne(e={}){let t={...Sne,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:li(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=rr(t.defaultValues)||rr(t.values)?_r(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:_r(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:mP(),state:mP()},p=t.criteriaMode===ai.all,v=M=>B=>{clearTimeout(c),c=setTimeout(M,B)},m=async M=>{if(!t.disabled&&(u.isValid||h.isValid||M)){const B=t.resolver?Rn((await E()).errors):await T(n,!0);B!==r.isValid&&f.state.next({isValid:B})}},b=(M,B)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((M||Array.from(a.mount)).forEach(Q=>{Q&&(B?pt(r.validatingFields,Q,B):cr(r.validatingFields,Q))}),f.state.next({validatingFields:r.validatingFields,isValidating:!Rn(r.validatingFields)}))},x=(M,B=[],Q,me,de=!0,ce=!0)=>{if(me&&Q&&!t.disabled){if(o.action=!0,ce&&Array.isArray(ge(n,M))){const we=Q(ge(n,M),me.argA,me.argB);de&&pt(n,M,we)}if(ce&&Array.isArray(ge(r.errors,M))){const we=Q(ge(r.errors,M),me.argA,me.argB);de&&pt(r.errors,M,we),jne(r.errors,M)}if((u.touchedFields||h.touchedFields)&&ce&&Array.isArray(ge(r.touchedFields,M))){const we=Q(ge(r.touchedFields,M),me.argA,me.argB);de&&pt(r.touchedFields,M,we)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=gf(s,i)),f.state.next({name:M,isDirty:P(M,B),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else pt(i,M,B)},w=(M,B)=>{pt(r.errors,M,B),f.state.next({errors:r.errors})},_=M=>{r.errors=M,f.state.next({errors:r.errors,isValid:!1})},j=(M,B,Q,me)=>{const de=ge(n,M);if(de){const ce=ge(i,M,Xt(Q)?ge(s,M):Q);Xt(ce)||me&&me.defaultChecked||B?pt(i,M,B?ce:bP(de._f)):$(M,ce),o.mount&&m()}},k=(M,B,Q,me,de)=>{let ce=!1,we=!1;const Xe={name:M};if(!t.disabled){if(!Q||me){(u.isDirty||h.isDirty)&&(we=r.isDirty,r.isDirty=Xe.isDirty=P(),ce=we!==Xe.isDirty);const Ue=Mo(ge(s,M),B);we=!!ge(r.dirtyFields,M),Ue?cr(r.dirtyFields,M):pt(r.dirtyFields,M,!0),Xe.dirtyFields=r.dirtyFields,ce=ce||(u.dirtyFields||h.dirtyFields)&&we!==!Ue}if(Q){const Ue=ge(r.touchedFields,M);Ue||(pt(r.touchedFields,M,Q),Xe.touchedFields=r.touchedFields,ce=ce||(u.touchedFields||h.touchedFields)&&Ue!==Q)}ce&&de&&f.state.next(Xe)}return ce?Xe:{}},S=(M,B,Q,me)=>{const de=ge(r.errors,M),ce=(u.isValid||h.isValid)&&Gn(B)&&r.isValid!==B;if(t.delayError&&Q?(l=v(()=>w(M,Q)),l(t.delayError)):(clearTimeout(c),l=null,Q?pt(r.errors,M,Q):cr(r.errors,M)),(Q?!Mo(de,Q):de)||!Rn(me)||ce){const we={...me,...ce&&Gn(B)?{isValid:B}:{},errors:r.errors,name:M};r={...r,...we},f.state.next(we)}},E=async M=>{b(M,!0);const B=await t.resolver(i,t.context,yne(M||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(M),B},C=async M=>{const{errors:B}=await E(M);if(M)for(const Q of M){const me=ge(B,Q);me?pt(r.errors,Q,me):cr(r.errors,Q)}else r.errors=B;return B},T=async(M,B,Q={valid:!0})=>{for(const me in M){const de=M[me];if(de){const{_f:ce,...we}=de;if(ce){const Xe=a.array.has(ce.name),Ue=de._f&&vne(de._f);Ue&&u.validatingFields&&b([me],!0);const vt=await SP(de,a.disabled,i,p,t.shouldUseNativeValidation&&!B,Xe);if(Ue&&u.validatingFields&&b([me]),vt[ce.name]&&(Q.valid=!1,B))break;!B&&(ge(vt,ce.name)?Xe?kne(r.errors,vt,ce.name):pt(r.errors,ce.name,vt[ce.name]):cr(r.errors,ce.name))}!Rn(we)&&await T(we,B,Q)}}return Q.valid},O=()=>{for(const M of a.unMount){const B=ge(n,M);B&&(B._f.refs?B._f.refs.every(Q=>!r_(Q)):!r_(B._f.ref))&&fe(M)}a.unMount=new Set},P=(M,B)=>!t.disabled&&(M&&B&&pt(i,M,B),!Mo(L(),s)),D=(M,B,Q)=>k$(M,a,{...o.mount?i:Xt(B)?s:Bi(M)?{[M]:B}:B},Q,B),R=M=>V2(ge(o.mount?i:s,M,t.shouldUnregister?ge(s,M,[]):[])),$=(M,B,Q={})=>{const me=ge(n,M);let de=B;if(me){const ce=me._f;ce&&(!ce.disabled&&pt(i,M,T$(B,ce)),de=bv(ce.ref)&&bn(B)?"":B,S$(ce.ref)?[...ce.ref.options].forEach(we=>we.selected=de.includes(we.value)):ce.refs?Om(ce.ref)?ce.refs.forEach(we=>{(!we.defaultChecked||!we.disabled)&&(Array.isArray(de)?we.checked=!!de.find(Xe=>Xe===we.value):we.checked=de===we.value||!!de)}):ce.refs.forEach(we=>we.checked=we.value===de):Z2(ce.ref)?ce.ref.value="":(ce.ref.value=de,ce.ref.type||f.state.next({name:M,values:_r(i)})))}(Q.shouldDirty||Q.shouldTouch)&&k(M,de,Q.shouldTouch,Q.shouldDirty,!0),Q.shouldValidate&&Y(M)},F=(M,B,Q)=>{for(const me in B){if(!B.hasOwnProperty(me))return;const de=B[me],ce=M+"."+me,we=ge(n,ce);(a.array.has(M)||rr(de)||we&&!we._f)&&!fc(de)?F(ce,de,Q):$(ce,de,Q)}},V=(M,B,Q={})=>{const me=ge(n,M),de=a.array.has(M),ce=_r(B);pt(i,M,ce),de?(f.array.next({name:M,values:_r(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&Q.shouldDirty&&f.state.next({name:M,dirtyFields:gf(s,i),isDirty:P(M,ce)})):me&&!me._f&&!bn(ce)?F(M,ce,Q):$(M,ce,Q),_P(M,a)&&f.state.next({...r,name:M}),f.state.next({name:o.mount?M:void 0,values:_r(i)})},q=async M=>{o.mount=!0;const B=M.target;let Q=B.name,me=!0;const de=ge(n,Q),ce=Ue=>{me=Number.isNaN(Ue)||fc(Ue)&&isNaN(Ue.getTime())||Mo(Ue,ge(i,Q,Ue))},we=xP(t.mode),Xe=xP(t.reValidateMode);if(de){let Ue,vt;const Zr=B.type?bP(de._f):x$(M),$t=M.type===vv.BLUR||M.type===vv.FOCUS_OUT,zs=!bne(de._f)&&!t.resolver&&!ge(r.errors,Q)&&!de._f.deps||_ne($t,ge(r.touchedFields,Q),r.isSubmitted,Xe,we),Ti=_P(Q,a,$t);pt(i,Q,Zr),$t?(!B||!B.readOnly)&&(de._f.onBlur&&de._f.onBlur(M),l&&l(0)):de._f.onChange&&de._f.onChange(M);const mo=k(Q,Zr,$t),Ai=!Rn(mo)||Ti;if(!$t&&f.state.next({name:Q,type:M.type,values:_r(i)}),zs)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?$t&&m():$t||m()),Ai&&f.state.next({name:Q,...Ti?{}:mo});if(!$t&&Ti&&f.state.next({...r}),t.resolver){const{errors:Oi}=await E([Q]);if(ce(Zr),me){const go=jP(r.errors,n,Q),Jr=jP(Oi,n,go.name||Q);Ue=Jr.error,Q=Jr.name,vt=Rn(Oi)}}else b([Q],!0),Ue=(await SP(de,a.disabled,i,p,t.shouldUseNativeValidation))[Q],b([Q]),ce(Zr),me&&(Ue?vt=!1:(u.isValid||h.isValid)&&(vt=await T(n,!0)));me&&(de._f.deps&&Y(de._f.deps),S(Q,vt,Ue,mo))}},K=(M,B)=>{if(ge(r.errors,B)&&M.focus)return M.focus(),1},Y=async(M,B={})=>{let Q,me;const de=lp(M);if(t.resolver){const ce=await C(Xt(M)?M:de);Q=Rn(ce),me=M?!de.some(we=>ge(ce,we)):Q}else M?(me=(await Promise.all(de.map(async ce=>{const we=ge(n,ce);return await T(we&&we._f?{[ce]:we}:we)}))).every(Boolean),!(!me&&!r.isValid)&&m()):me=Q=await T(n);return f.state.next({...!Bi(M)||(u.isValid||h.isValid)&&Q!==r.isValid?{}:{name:M},...t.resolver||!M?{isValid:Q}:{},errors:r.errors}),B.shouldFocus&&!me&&cp(n,K,M?de:a.mount),me},L=M=>{const B={...o.mount?i:s};return Xt(M)?B:Bi(M)?ge(B,M):M.map(Q=>ge(B,Q))},X=(M,B)=>({invalid:!!ge((B||r).errors,M),isDirty:!!ge((B||r).dirtyFields,M),error:ge((B||r).errors,M),isValidating:!!ge(r.validatingFields,M),isTouched:!!ge((B||r).touchedFields,M)}),te=M=>{M&&lp(M).forEach(B=>cr(r.errors,B)),f.state.next({errors:M?r.errors:{}})},ve=(M,B,Q)=>{const me=(ge(n,M,{_f:{}})._f||{}).ref,de=ge(r.errors,M)||{},{ref:ce,message:we,type:Xe,...Ue}=de;pt(r.errors,M,{...Ue,...B,ref:me}),f.state.next({name:M,errors:r.errors,isValid:!1}),Q&&Q.shouldFocus&&me&&me.focus&&me.focus()},H=(M,B)=>li(M)?f.state.subscribe({next:Q=>"values"in Q&&M(D(void 0,B),Q)}):D(M,B,!0),G=M=>f.state.subscribe({next:B=>{wne(M.name,B.name,M.exact)&&xne(B,M.formState||u,ft,M.reRenderRoot)&&M.callback({values:{...i},...r,...B,defaultValues:s})}}).unsubscribe,he=M=>(o.mount=!0,h={...h,...M.formState},G({...M,formState:h})),fe=(M,B={})=>{for(const Q of M?lp(M):a.mount)a.mount.delete(Q),a.array.delete(Q),B.keepValue||(cr(n,Q),cr(i,Q)),!B.keepError&&cr(r.errors,Q),!B.keepDirty&&cr(r.dirtyFields,Q),!B.keepTouched&&cr(r.touchedFields,Q),!B.keepIsValidating&&cr(r.validatingFields,Q),!t.shouldUnregister&&!B.keepDefaultValue&&cr(s,Q);f.state.next({values:_r(i)}),f.state.next({...r,...B.keepDirty?{isDirty:P()}:{}}),!B.keepIsValid&&m()},_e=({disabled:M,name:B})=>{(Gn(M)&&o.mount||M||a.disabled.has(B))&&(M?a.disabled.add(B):a.disabled.delete(B))},W=(M,B={})=>{let Q=ge(n,M);const me=Gn(B.disabled)||Gn(t.disabled);return pt(n,M,{...Q||{},_f:{...Q&&Q._f?Q._f:{ref:{name:M}},name:M,mount:!0,...B}}),a.mount.add(M),Q?_e({disabled:Gn(B.disabled)?B.disabled:t.disabled,name:M}):j(M,!0,B.value),{...me?{disabled:B.disabled||t.disabled}:{},...t.progressive?{required:!!B.required,min:yf(B.min),max:yf(B.max),minLength:yf(B.minLength),maxLength:yf(B.maxLength),pattern:yf(B.pattern)}:{},name:M,onChange:q,onBlur:q,ref:de=>{if(de){W(M,B),Q=ge(n,M);const ce=Xt(de.value)&&de.querySelectorAll&&de.querySelectorAll("input,select,textarea")[0]||de,we=pne(ce),Xe=Q._f.refs||[];if(we?Xe.find(Ue=>Ue===ce):ce===Q._f.ref)return;pt(n,M,{_f:{...Q._f,...we?{refs:[...Xe.filter(r_),ce,...Array.isArray(ge(s,M))?[{}]:[]],ref:{type:ce.type,name:M}}:{ref:ce}}}),j(M,!1,void 0,ce)}else Q=ge(n,M,{}),Q._f&&(Q._f.mount=!1),(t.shouldUnregister||B.shouldUnregister)&&!(w$(a.array,M)&&o.action)&&a.unMount.add(M)}}},J=()=>t.shouldFocusError&&cp(n,K,a.mount),ae=M=>{Gn(M)&&(f.state.next({disabled:M}),cp(n,(B,Q)=>{const me=ge(n,Q);me&&(B.disabled=me._f.disabled||M,Array.isArray(me._f.refs)&&me._f.refs.forEach(de=>{de.disabled=me._f.disabled||M}))},0,!1))},z=(M,B)=>async Q=>{let me;Q&&(Q.preventDefault&&Q.preventDefault(),Q.persist&&Q.persist());let de=_r(i);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:ce,values:we}=await E();r.errors=ce,de=_r(we)}else await T(n);if(a.disabled.size)for(const ce of a.disabled)cr(de,ce);if(cr(r.errors,"root"),Rn(r.errors)){f.state.next({errors:{}});try{await M(de,Q)}catch(ce){me=ce}}else B&&await B({...r.errors},Q),J(),setTimeout(J);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Rn(r.errors)&&!me,submitCount:r.submitCount+1,errors:r.errors}),me)throw me},ke=(M,B={})=>{ge(n,M)&&(Xt(B.defaultValue)?V(M,_r(ge(s,M))):(V(M,B.defaultValue),pt(s,M,_r(B.defaultValue))),B.keepTouched||cr(r.touchedFields,M),B.keepDirty||(cr(r.dirtyFields,M),r.isDirty=B.defaultValue?P(M,_r(ge(s,M))):P()),B.keepError||(cr(r.errors,M),u.isValid&&m()),f.state.next({...r}))},Pe=(M,B={})=>{const Q=M?_r(M):s,me=_r(Q),de=Rn(M),ce=de?s:me;if(B.keepDefaultValues||(s=Q),!B.keepValues){if(B.keepDirtyValues){const we=new Set([...a.mount,...Object.keys(gf(s,i))]);for(const Xe of Array.from(we))ge(r.dirtyFields,Xe)?pt(ce,Xe,ge(i,Xe)):V(Xe,ge(ce,Xe))}else{if(W2&&Xt(M))for(const we of a.mount){const Xe=ge(n,we);if(Xe&&Xe._f){const Ue=Array.isArray(Xe._f.refs)?Xe._f.refs[0]:Xe._f.ref;if(bv(Ue)){const vt=Ue.closest("form");if(vt){vt.reset();break}}}}if(B.keepFieldsRef)for(const we of a.mount)V(we,ge(ce,we));else n={}}i=t.shouldUnregister?B.keepDefaultValues?_r(s):{}:_r(ce),f.array.next({values:{...ce}}),f.state.next({values:{...ce}})}a={mount:B.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:B.keepSubmitCount?r.submitCount:0,isDirty:de?!1:B.keepDirty?r.isDirty:!!(B.keepDefaultValues&&!Mo(M,s)),isSubmitted:B.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:de?{}:B.keepDirtyValues?B.keepDefaultValues&&i?gf(s,i):r.dirtyFields:B.keepDefaultValues&&M?gf(s,M):B.keepDirty?r.dirtyFields:{},touchedFields:B.keepTouched?r.touchedFields:{},errors:B.keepErrors?r.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Ge=(M,B)=>Pe(li(M)?M(i):M,B),Ye=(M,B={})=>{const Q=ge(n,M),me=Q&&Q._f;if(me){const de=me.refs?me.refs[0]:me.ref;de.focus&&(de.focus(),B.shouldSelect&&li(de.select)&&de.select())}},ft=M=>{r={...r,...M}},Vt={control:{register:W,unregister:fe,getFieldState:X,handleSubmit:z,setError:ve,_subscribe:G,_runSchema:E,_focusError:J,_getWatch:D,_getDirty:P,_setValid:m,_setFieldArray:x,_setDisabledField:_e,_setErrors:_,_getFieldArray:R,_reset:Pe,_resetDefaultValues:()=>li(t.defaultValues)&&t.defaultValues().then(M=>{Ge(M,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:ae,_subjects:f,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(M){o=M},get _defaultValues(){return s},get _names(){return a},set _names(M){a=M},get _formState(){return r},get _options(){return t},set _options(M){t={...t,...M}}},subscribe:he,trigger:Y,register:W,handleSubmit:z,watch:H,setValue:V,getValues:L,reset:Ge,resetField:ke,clearErrors:te,unregister:fe,setError:ve,setFocus:Ye,getFieldState:X};return{...Vt,formControl:Vt}}function Cne(e={}){const t=ue.useRef(void 0),r=ue.useRef(void 0),[n,s]=ue.useState({isDirty:!1,isValidating:!1,isLoading:li(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:li(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!li(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...a}=Nne(e);t.current={...a,formState:n}}const i=t.current.control;return i._options=e,Y2(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),ue.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),ue.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),ue.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),ue.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),ue.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),ue.useEffect(()=>{e.values&&!Mo(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),ue.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=j$(n,i),t.current}const NP=(e,t,r)=>{if(e&&"reportValidity"in e){const n=ge(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},sk=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?NP(n.ref,r,e):n&&n.refs&&n.refs.forEach(s=>NP(s,r,e))}},CP=(e,t)=>{t.shouldUseNativeValidation&&sk(e,t);const r={};for(const n in e){const s=ge(t.fields,n),i=Object.assign(e[n]||{},{ref:s&&s.ref});if(Ene(t.names||Object.keys(e),n)){const o=Object.assign({},ge(r,n));pt(o,"root",i),pt(r,n,o)}else pt(r,n,i)}return r},Ene=(e,t)=>{const r=EP(t);return e.some(n=>EP(n).match(`^${r}\\.\\d+`))};function EP(e){return e.replace(/\]|\[/g,"")}function oe(e,t,r){function n(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in o.prototype)u in a||Object.defineProperty(a,u,{value:o.prototype[u].bind(a)});a._zod.constr=o,a._zod.def=l}const s=(r==null?void 0:r.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:e});function o(a){var l;const c=r!=null&&r.Parent?new i:this;n(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var l,c;return r!=null&&r.Parent&&a instanceof r.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class vd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class O$ extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const P$={};function Uc(e){return P$}function Tne(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,n])=>t.indexOf(+r)===-1).map(([r,n])=>n)}function ik(e,t){return typeof t=="bigint"?t.toString():t}function Q2(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function X2(e){return e==null}function eC(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}const TP=Symbol("evaluating");function St(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==TP)return n===void 0&&(n=TP,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Ane(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function bl(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function _h(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function AP(e){return JSON.stringify(e)}const R$="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function _v(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const One=Q2(()=>{var e;if(typeof navigator<"u"&&(e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Rp(e){if(_v(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(_v(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function D$(e){return Rp(e)?{...e}:e}const Pne=new Set(["string","number","symbol"]);function px(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xl(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function ze(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Rne(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function Dne(e,t){const r=e._zod.def,n=_h(e._zod.def,{get shape(){const s={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(s[i]=r.shape[i])}return bl(this,"shape",s),s},checks:[]});return xl(e,n)}function Mne(e,t){const r=e._zod.def,n=_h(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete s[i]}return bl(this,"shape",s),s},checks:[]});return xl(e,n)}function Ine(e,t){if(!Rp(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const n=_h(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return bl(this,"shape",s),s},checks:[]});return xl(e,n)}function Lne(e,t){if(!Rp(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return bl(this,"shape",n),n},checks:e._zod.def.checks};return xl(e,r)}function Fne(e,t){const r=_h(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return bl(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return xl(e,r)}function $ne(e,t,r){const n=_h(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)i[o]=e?new e({type:"optional",innerType:s[o]}):s[o];return bl(this,"shape",i),i},checks:[]});return xl(t,n)}function zne(e,t,r){const n=_h(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:s[o]}))}else for(const o in s)i[o]=new e({type:"nonoptional",innerType:s[o]});return bl(this,"shape",i),i},checks:[]});return xl(t,n)}function od(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function M$(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Ug(e){return typeof e=="string"?e:e==null?void 0:e.message}function qc(e,t,r){var n,s,i,o,a,l;const c={...e,path:e.path??[]};if(!e.message){const u=Ug((i=(s=(n=e.inst)==null?void 0:n._zod.def)==null?void 0:s.error)==null?void 0:i.call(s,e))??Ug((o=t==null?void 0:t.error)==null?void 0:o.call(t,e))??Ug((a=r.customError)==null?void 0:a.call(r,e))??Ug((l=r.localeError)==null?void 0:l.call(r,e))??"Invalid input";c.message=u}return delete c.inst,delete c.continue,t!=null&&t.reportInput||delete c.input,c}function tC(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Dp(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const I$=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,ik,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},rC=oe("$ZodError",I$),mx=oe("$ZodError",I$,{Parent:Error});function Une(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function qne(e,t){const r=t||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(e),n}const gx=e=>(t,r,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new vd;if(o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>qc(l,i,Uc())));throw R$(a,s==null?void 0:s.callee),a}return o.value},Bne=gx(mx),yx=e=>async(t,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>qc(l,i,Uc())));throw R$(a,s==null?void 0:s.callee),a}return o.value},Wne=yx(mx),vx=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new vd;return i.issues.length?{success:!1,error:new(e??rC)(i.issues.map(o=>qc(o,s,Uc())))}:{success:!0,data:i.value}},Vne=vx(mx),bx=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>qc(o,s,Uc())))}:{success:!0,data:i.value}},Hne=bx(mx),Kne=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return gx(e)(t,r,s)},Yne=e=>(t,r,n)=>gx(e)(t,r,n),Gne=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return yx(e)(t,r,s)},Zne=e=>async(t,r,n)=>yx(e)(t,r,n),Jne=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return vx(e)(t,r,s)},Qne=e=>(t,r,n)=>vx(e)(t,r,n),Xne=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return bx(e)(t,r,s)},ese=e=>async(t,r,n)=>bx(e)(t,r,n),tse=/^[cC][^\s-]{8,}$/,rse=/^[0-9a-z]+$/,nse=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,sse=/^[0-9a-vA-V]{20}$/,ise=/^[A-Za-z0-9]{27}$/,ose=/^[a-zA-Z0-9_-]{21}$/,ase=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,lse=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,OP=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,cse=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,use="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function dse(){return new RegExp(use,"u")}const hse=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fse=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,pse=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,mse=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gse=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,L$=/^[A-Za-z0-9_-]*$/,yse=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,vse=/^\+(?:[0-9]){6,14}[0-9]$/,F$="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",bse=new RegExp(`^${F$}$`);function $$(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function xse(e){return new RegExp(`^${$$(e)}$`)}function wse(e){const t=$$({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${F$}T(?:${n})$`)}const _se=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},jse=/true|false/i,kse=/^[^A-Z]*$/,Sse=/^[^a-z]*$/,ho=oe("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Nse=oe("$ZodCheckMaxLength",(e,t)=>{var r;ho.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!X2(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const i=tC(s);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Cse=oe("$ZodCheckMinLength",(e,t)=>{var r;ho.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!X2(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const i=tC(s);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Ese=oe("$ZodCheckLengthEquals",(e,t)=>{var r;ho.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!X2(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,i=s.length;if(i===t.length)return;const o=tC(s),a=i>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),xx=oe("$ZodCheckStringFormat",(e,t)=>{var r,n;ho.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Tse=oe("$ZodCheckRegex",(e,t)=>{xx.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Ase=oe("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=kse),xx.init(e,t)}),Ose=oe("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Sse),xx.init(e,t)}),Pse=oe("$ZodCheckIncludes",(e,t)=>{ho.init(e,t);const r=px(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),Rse=oe("$ZodCheckStartsWith",(e,t)=>{ho.init(e,t);const r=new RegExp(`^${px(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Dse=oe("$ZodCheckEndsWith",(e,t)=>{ho.init(e,t);const r=new RegExp(`.*${px(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Mse=oe("$ZodCheckOverwrite",(e,t)=>{ho.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Ise{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),n=Math.min(...r.map(i=>i.length-i.trimStart().length)),s=r.map(i=>i.slice(n)).map(i=>" ".repeat(this.indent*2)+i);for(const i of s)this.content.push(i)}compile(){const t=Function,r=this==null?void 0:this.args,n=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...r,n.join(`
`))}}const Lse={major:4,minor:1,patch:3},yr=oe("$ZodType",(e,t)=>{var r,n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Lse;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const i of s)for(const o of i._zod.onattach)o(e);if(s.length===0)(n=e._zod).deferred??(n.deferred=[]),(r=e._zod.deferred)==null||r.push(()=>{e._zod.run=e._zod.parse});else{const i=(a,l,c)=>{let u=od(a),h;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(u)continue;const p=a.issues.length,v=f._zod.check(a);if(v instanceof Promise&&(c==null?void 0:c.async)===!1)throw new vd;if(h||v instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await v,a.issues.length!==p&&(u||(u=od(a,p)))});else{if(a.issues.length===p)continue;u||(u=od(a,p))}}return h?h.then(()=>a):a},o=(a,l,c)=>{if(od(a))return a.aborted=!0,a;const u=i(l,s,c);if(u instanceof Promise){if(c.async===!1)throw new vd;return u.then(h=>e._zod.parse(h,c))}return e._zod.parse(u,c)};e._zod.run=(a,l)=>{if(l.skipChecks)return e._zod.parse(a,l);if(l.direction==="backward"){const u=e._zod.parse({value:a.value,issues:[]},{...l,skipChecks:!0});return u instanceof Promise?u.then(h=>o(h,a,l)):o(u,a,l)}const c=e._zod.parse(a,l);if(c instanceof Promise){if(l.async===!1)throw new vd;return c.then(u=>i(u,s,l))}return i(c,s,l)}}e["~standard"]={validate:i=>{var o;try{const a=Vne(e,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return Hne(e,i).then(a=>{var l;return a.success?{value:a.data}:{issues:(l=a.error)==null?void 0:l.issues}})}},vendor:"zod",version:1}}),nC=oe("$ZodString",(e,t)=>{var r;yr.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??_se(e._zod.bag),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Lt=oe("$ZodStringFormat",(e,t)=>{xx.init(e,t),nC.init(e,t)}),Fse=oe("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=lse),Lt.init(e,t)}),$se=oe("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=OP(r))}else t.pattern??(t.pattern=OP());Lt.init(e,t)}),zse=oe("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=cse),Lt.init(e,t)}),Use=oe("$ZodURL",(e,t)=>{Lt.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:yse.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),qse=oe("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=dse()),Lt.init(e,t)}),Bse=oe("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=ose),Lt.init(e,t)}),Wse=oe("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=tse),Lt.init(e,t)}),Vse=oe("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=rse),Lt.init(e,t)}),Hse=oe("$ZodULID",(e,t)=>{t.pattern??(t.pattern=nse),Lt.init(e,t)}),Kse=oe("$ZodXID",(e,t)=>{t.pattern??(t.pattern=sse),Lt.init(e,t)}),Yse=oe("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=ise),Lt.init(e,t)}),Gse=oe("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=wse(t)),Lt.init(e,t)}),Zse=oe("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=bse),Lt.init(e,t)}),Jse=oe("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=xse(t)),Lt.init(e,t)}),Qse=oe("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=ase),Lt.init(e,t)}),Xse=oe("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=hse),Lt.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),eie=oe("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=fse),Lt.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),tie=oe("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=pse),Lt.init(e,t)}),rie=oe("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=mse),Lt.init(e,t),e._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function z$(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const nie=oe("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=gse),Lt.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{z$(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function sie(e){if(!L$.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return z$(r)}const iie=oe("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=L$),Lt.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{sie(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),oie=oe("$ZodE164",(e,t)=>{t.pattern??(t.pattern=vse),Lt.init(e,t)});function aie(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const lie=oe("$ZodJWT",(e,t)=>{Lt.init(e,t),e._zod.check=r=>{aie(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),cie=oe("$ZodBoolean",(e,t)=>{yr.init(e,t),e._zod.pattern=jse,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),uie=oe("$ZodUnknown",(e,t)=>{yr.init(e,t),e._zod.parse=r=>r}),die=oe("$ZodNever",(e,t)=>{yr.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function PP(e,t,r){e.issues.length&&t.issues.push(...M$(r,e.issues)),t.value[r]=e.value}const hie=oe("$ZodArray",(e,t)=>{yr.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=t.element._zod.run({value:a,issues:[]},n);l instanceof Promise?i.push(l.then(c=>PP(c,r,o))):PP(l,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function jv(e,t,r,n){e.issues.length&&t.issues.push(...M$(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function U$(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape[n]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const r=Rne(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function q$(e,t,r,n,s,i){const o=[],a=s.keySet,l=s.catchall._zod,c=l.def.type;for(const u of Object.keys(t)){if(a.has(u))continue;if(c==="never"){o.push(u);continue}const h=l.run({value:t[u],issues:[]},n);h instanceof Promise?e.push(h.then(f=>jv(f,r,u,t))):jv(h,r,u,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const fie=oe("$ZodObject",(e,t)=>{yr.init(e,t);const r=Q2(()=>U$(t));St(e._zod,"propValues",()=>{const o=t.shape,a={};for(const l in o){const c=o[l]._zod;if(c.values){a[l]??(a[l]=new Set);for(const u of c.values)a[l].add(u)}}return a});const n=_v,s=t.catchall;let i;e._zod.parse=(o,a)=>{i??(i=r.value);const l=o.value;if(!n(l))return o.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),o;o.value={};const c=[],u=i.shape;for(const h of i.keys){const f=u[h]._zod.run({value:l[h],issues:[]},a);f instanceof Promise?c.push(f.then(p=>jv(p,o,h,l))):jv(f,o,h,l)}return s?q$(c,l,o,a,r.value,e):c.length?Promise.all(c).then(()=>o):o}}),pie=oe("$ZodObjectJIT",(e,t)=>{fie.init(e,t);const r=e._zod.parse,n=Q2(()=>U$(t)),s=h=>{const f=new Ise(["shape","payload","ctx"]),p=n.value,v=w=>{const _=AP(w);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};f.write("const input = payload.value;");const m=Object.create(null);let b=0;for(const w of p.keys)m[w]=`key_${b++}`;f.write("const newResult = {}");for(const w of p.keys){const _=m[w],j=AP(w);f.write(`const ${_} = ${v(w)};`),f.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${j}, ...iss.path] : [${j}]
          })));
        }
        
        if (${_}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${_}.value;
        }
      `)}f.write("payload.value = newResult;"),f.write("return payload;");const x=f.compile();return(w,_)=>x(h,w,_)};let i;const o=_v,a=!P$.jitless,l=a&&One.value,c=t.catchall;let u;e._zod.parse=(h,f)=>{u??(u=n.value);const p=h.value;return o(p)?a&&l&&(f==null?void 0:f.async)===!1&&f.jitless!==!0?(i||(i=s(t.shape)),h=i(h,f),c?q$([],p,h,f,u,e):h):r(h,f):(h.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),h)}});function RP(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const s=e.filter(i=>!od(i));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>qc(o,n,Uc())))}),t)}const mie=oe("$ZodUnion",(e,t)=>{yr.init(e,t),St(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),St(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),St(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),St(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>eC(i.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const l of t.options){const c=l._zod.run({value:s.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>RP(l,s,e,i)):RP(a,s,e,i)}}),gie=oe("$ZodIntersection",(e,t)=>{yr.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,i=t.left._zod.run({value:s,issues:[]},n),o=t.right._zod.run({value:s,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([a,l])=>DP(r,a,l)):DP(r,i,o)}});function ok(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Rp(e)&&Rp(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),s={...e,...t};for(const i of n){const o=ok(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],i=t[n],o=ok(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function DP(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),od(e))return e;const n=ok(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const yie=oe("$ZodEnum",(e,t)=>{yr.init(e,t);const r=Tne(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>Pne.has(typeof s)).map(s=>typeof s=="string"?px(s):s.toString()).join("|")})$`),e._zod.parse=(s,i)=>{const o=s.value;return n.has(o)||s.issues.push({code:"invalid_value",values:r,input:o,inst:e}),s}}),vie=oe("$ZodTransform",(e,t)=>{yr.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new O$(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(r.value=i,r));if(s instanceof Promise)throw new vd;return r.value=s,r}});function MP(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const bie=oe("$ZodOptional",(e,t)=>{yr.init(e,t),e._zod.optin="optional",e._zod.optout="optional",St(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),St(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${eC(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>MP(i,r.value)):MP(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),xie=oe("$ZodNullable",(e,t)=>{yr.init(e,t),St(e._zod,"optin",()=>t.innerType._zod.optin),St(e._zod,"optout",()=>t.innerType._zod.optout),St(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${eC(r.source)}|null)$`):void 0}),St(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),wie=oe("$ZodDefault",(e,t)=>{yr.init(e,t),e._zod.optin="optional",St(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>IP(i,t)):IP(s,t)}});function IP(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const _ie=oe("$ZodPrefault",(e,t)=>{yr.init(e,t),e._zod.optin="optional",St(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),jie=oe("$ZodNonOptional",(e,t)=>{yr.init(e,t),St(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>LP(i,e)):LP(s,e)}});function LP(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const kie=oe("$ZodCatch",(e,t)=>{yr.init(e,t),St(e._zod,"optin",()=>t.innerType._zod.optin),St(e._zod,"optout",()=>t.innerType._zod.optout),St(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>qc(o,n,Uc()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(i=>qc(i,n,Uc()))},input:r.value}),r.issues=[]),r)}}),Sie=oe("$ZodPipe",(e,t)=>{yr.init(e,t),St(e._zod,"values",()=>t.in._zod.values),St(e._zod,"optin",()=>t.in._zod.optin),St(e._zod,"optout",()=>t.out._zod.optout),St(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=t.out._zod.run(r,n);return i instanceof Promise?i.then(o=>qg(o,t.in,n)):qg(i,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(i=>qg(i,t.out,n)):qg(s,t.out,n)}});function qg(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Nie=oe("$ZodReadonly",(e,t)=>{yr.init(e,t),St(e._zod,"propValues",()=>t.innerType._zod.propValues),St(e._zod,"values",()=>t.innerType._zod.values),St(e._zod,"optin",()=>t.innerType._zod.optin),St(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(FP):FP(s)}});function FP(e){return e.value=Object.freeze(e.value),e}const Cie=oe("$ZodCustom",(e,t)=>{ho.init(e,t),yr.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(i=>$P(i,r,n,e));$P(s,r,n,e)}});function $P(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(Dp(s))}}class Eie{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Tie(){return new Eie}const Bg=Tie();function Aie(e,t){return new e({type:"string",...ze(t)})}function Oie(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ze(t)})}function zP(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ze(t)})}function Pie(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ze(t)})}function Rie(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ze(t)})}function Die(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ze(t)})}function Mie(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ze(t)})}function Iie(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ze(t)})}function Lie(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ze(t)})}function Fie(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ze(t)})}function $ie(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ze(t)})}function zie(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ze(t)})}function Uie(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ze(t)})}function qie(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ze(t)})}function Bie(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ze(t)})}function Wie(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ze(t)})}function Vie(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ze(t)})}function Hie(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ze(t)})}function Kie(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ze(t)})}function Yie(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ze(t)})}function Gie(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ze(t)})}function Zie(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ze(t)})}function Jie(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ze(t)})}function Qie(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ze(t)})}function Xie(e,t){return new e({type:"string",format:"date",check:"string_format",...ze(t)})}function eoe(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ze(t)})}function toe(e,t){return new e({type:"string",format:"duration",check:"string_format",...ze(t)})}function roe(e,t){return new e({type:"boolean",...ze(t)})}function noe(e){return new e({type:"unknown"})}function soe(e,t){return new e({type:"never",...ze(t)})}function B$(e,t){return new Nse({check:"max_length",...ze(t),maximum:e})}function kv(e,t){return new Cse({check:"min_length",...ze(t),minimum:e})}function W$(e,t){return new Ese({check:"length_equals",...ze(t),length:e})}function ioe(e,t){return new Tse({check:"string_format",format:"regex",...ze(t),pattern:e})}function ooe(e){return new Ase({check:"string_format",format:"lowercase",...ze(e)})}function aoe(e){return new Ose({check:"string_format",format:"uppercase",...ze(e)})}function loe(e,t){return new Pse({check:"string_format",format:"includes",...ze(t),includes:e})}function coe(e,t){return new Rse({check:"string_format",format:"starts_with",...ze(t),prefix:e})}function uoe(e,t){return new Dse({check:"string_format",format:"ends_with",...ze(t),suffix:e})}function Pm(e){return new Mse({check:"overwrite",tx:e})}function doe(e){return Pm(t=>t.normalize(e))}function hoe(){return Pm(e=>e.trim())}function foe(){return Pm(e=>e.toLowerCase())}function poe(){return Pm(e=>e.toUpperCase())}function moe(e,t,r){return new e({type:"array",element:t,...ze(r)})}function goe(e,t,r){return new e({type:"custom",check:"custom",fn:t,...ze(r)})}function yoe(e){const t=voe(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Dp(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(Dp(s))}},e(r.value,r)));return t}function voe(e,t){const r=new ho({check:"custom",...ze(t)});return r._zod.check=e,r}function UP(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}function boe(e,t){for(var r={};e.length;){var n=e[0],s=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var a=n.unionErrors[0].errors[0];r[o]={message:a.message,type:a.code}}else r[o]={message:i,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var l=r[o].types,c=l&&l[n.code];r[o]=G2(o,t,r,s,c?[].concat(c,n.message):n.message)}e.shift()}return r}function xoe(e,t){for(var r={};e.length;){var n=e[0],s=n.code,i=n.message,o=n.path.join(".");if(!r[o])if(n.code==="invalid_union"&&n.errors.length>0){var a=n.errors[0][0];r[o]={message:a.message,type:a.code}}else r[o]={message:i,type:s};if(n.code==="invalid_union"&&n.errors.forEach(function(u){return u.forEach(function(h){return e.push(h)})}),t){var l=r[o].types,c=l&&l[n.code];r[o]=G2(o,t,r,s,c?[].concat(c,n.message):n.message)}e.shift()}return r}function woe(e,t,r){if(r===void 0&&(r={}),function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def}(e))return function(n,s,i){try{return Promise.resolve(UP(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(o){return i.shouldUseNativeValidation&&sk({},i),{errors:{},values:r.raw?Object.assign({},n):o}})},function(o){if(function(a){return Array.isArray(a==null?void 0:a.issues)}(o))return{values:{},errors:CP(boe(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}};if(function(n){return"_zod"in n&&typeof n._zod=="object"}(e))return function(n,s,i){try{return Promise.resolve(UP(function(){return Promise.resolve((r.mode==="sync"?Bne:Wne)(e,n,t)).then(function(o){return i.shouldUseNativeValidation&&sk({},i),{errors:{},values:r.raw?Object.assign({},n):o}})},function(o){if(function(a){return a instanceof rC}(o))return{values:{},errors:CP(xoe(o.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}};throw new Error("Invalid input: not a Zod schema")}const _oe=oe("ZodISODateTime",(e,t)=>{Gse.init(e,t),Bt.init(e,t)});function joe(e){return Qie(_oe,e)}const koe=oe("ZodISODate",(e,t)=>{Zse.init(e,t),Bt.init(e,t)});function Soe(e){return Xie(koe,e)}const Noe=oe("ZodISOTime",(e,t)=>{Jse.init(e,t),Bt.init(e,t)});function Coe(e){return eoe(Noe,e)}const Eoe=oe("ZodISODuration",(e,t)=>{Qse.init(e,t),Bt.init(e,t)});function Toe(e){return toe(Eoe,e)}const Aoe=(e,t)=>{rC.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>qne(e,r)},flatten:{value:r=>Une(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,ik,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,ik,2)}},isEmpty:{get(){return e.issues.length===0}}})},Is=oe("ZodError",Aoe,{Parent:Error}),Ooe=gx(Is),Poe=yx(Is),Roe=vx(Is),Doe=bx(Is),Moe=Kne(Is),Ioe=Yne(Is),Loe=Gne(Is),Foe=Zne(Is),$oe=Jne(Is),zoe=Qne(Is),Uoe=Xne(Is),qoe=ese(Is),Ar=oe("ZodType",(e,t)=>(yr.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>xl(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>Ooe(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>Roe(e,r,n),e.parseAsync=async(r,n)=>Poe(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>Doe(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>Moe(e,r,n),e.decode=(r,n)=>Ioe(e,r,n),e.encodeAsync=async(r,n)=>Loe(e,r,n),e.decodeAsync=async(r,n)=>Foe(e,r,n),e.safeEncode=(r,n)=>$oe(e,r,n),e.safeDecode=(r,n)=>zoe(e,r,n),e.safeEncodeAsync=async(r,n)=>Uoe(e,r,n),e.safeDecodeAsync=async(r,n)=>qoe(e,r,n),e.refine=(r,n)=>e.check(Pae(r,n)),e.superRefine=r=>e.check(Rae(r)),e.overwrite=r=>e.check(Pm(r)),e.optional=()=>VP(e),e.nullable=()=>HP(e),e.nullish=()=>VP(HP(e)),e.nonoptional=r=>Sae(e,r),e.array=()=>H$(e),e.or=r=>mae([e,r]),e.and=r=>yae(e,r),e.transform=r=>KP(e,bae(r)),e.default=r=>_ae(e,r),e.prefault=r=>kae(e,r),e.catch=r=>Cae(e,r),e.pipe=r=>KP(e,r),e.readonly=()=>Aae(e),e.describe=r=>{const n=e.clone();return Bg.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=Bg.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Bg.get(e);const n=e.clone();return Bg.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),V$=oe("_ZodString",(e,t)=>{nC.init(e,t),Ar.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(ioe(...n)),e.includes=(...n)=>e.check(loe(...n)),e.startsWith=(...n)=>e.check(coe(...n)),e.endsWith=(...n)=>e.check(uoe(...n)),e.min=(...n)=>e.check(kv(...n)),e.max=(...n)=>e.check(B$(...n)),e.length=(...n)=>e.check(W$(...n)),e.nonempty=(...n)=>e.check(kv(1,...n)),e.lowercase=n=>e.check(ooe(n)),e.uppercase=n=>e.check(aoe(n)),e.trim=()=>e.check(hoe()),e.normalize=(...n)=>e.check(doe(...n)),e.toLowerCase=()=>e.check(foe()),e.toUpperCase=()=>e.check(poe())}),Boe=oe("ZodString",(e,t)=>{nC.init(e,t),V$.init(e,t),e.email=r=>e.check(Oie(Woe,r)),e.url=r=>e.check(Iie(Voe,r)),e.jwt=r=>e.check(Jie(oae,r)),e.emoji=r=>e.check(Lie(Hoe,r)),e.guid=r=>e.check(zP(qP,r)),e.uuid=r=>e.check(Pie(Vg,r)),e.uuidv4=r=>e.check(Rie(Vg,r)),e.uuidv6=r=>e.check(Die(Vg,r)),e.uuidv7=r=>e.check(Mie(Vg,r)),e.nanoid=r=>e.check(Fie(Koe,r)),e.guid=r=>e.check(zP(qP,r)),e.cuid=r=>e.check($ie(Yoe,r)),e.cuid2=r=>e.check(zie(Goe,r)),e.ulid=r=>e.check(Uie(Zoe,r)),e.base64=r=>e.check(Yie(nae,r)),e.base64url=r=>e.check(Gie(sae,r)),e.xid=r=>e.check(qie(Joe,r)),e.ksuid=r=>e.check(Bie(Qoe,r)),e.ipv4=r=>e.check(Wie(Xoe,r)),e.ipv6=r=>e.check(Vie(eae,r)),e.cidrv4=r=>e.check(Hie(tae,r)),e.cidrv6=r=>e.check(Kie(rae,r)),e.e164=r=>e.check(Zie(iae,r)),e.datetime=r=>e.check(joe(r)),e.date=r=>e.check(Soe(r)),e.time=r=>e.check(Coe(r)),e.duration=r=>e.check(Toe(r))});function Wg(e){return Aie(Boe,e)}const Bt=oe("ZodStringFormat",(e,t)=>{Lt.init(e,t),V$.init(e,t)}),Woe=oe("ZodEmail",(e,t)=>{zse.init(e,t),Bt.init(e,t)}),qP=oe("ZodGUID",(e,t)=>{Fse.init(e,t),Bt.init(e,t)}),Vg=oe("ZodUUID",(e,t)=>{$se.init(e,t),Bt.init(e,t)}),Voe=oe("ZodURL",(e,t)=>{Use.init(e,t),Bt.init(e,t)}),Hoe=oe("ZodEmoji",(e,t)=>{qse.init(e,t),Bt.init(e,t)}),Koe=oe("ZodNanoID",(e,t)=>{Bse.init(e,t),Bt.init(e,t)}),Yoe=oe("ZodCUID",(e,t)=>{Wse.init(e,t),Bt.init(e,t)}),Goe=oe("ZodCUID2",(e,t)=>{Vse.init(e,t),Bt.init(e,t)}),Zoe=oe("ZodULID",(e,t)=>{Hse.init(e,t),Bt.init(e,t)}),Joe=oe("ZodXID",(e,t)=>{Kse.init(e,t),Bt.init(e,t)}),Qoe=oe("ZodKSUID",(e,t)=>{Yse.init(e,t),Bt.init(e,t)}),Xoe=oe("ZodIPv4",(e,t)=>{Xse.init(e,t),Bt.init(e,t)}),eae=oe("ZodIPv6",(e,t)=>{eie.init(e,t),Bt.init(e,t)}),tae=oe("ZodCIDRv4",(e,t)=>{tie.init(e,t),Bt.init(e,t)}),rae=oe("ZodCIDRv6",(e,t)=>{rie.init(e,t),Bt.init(e,t)}),nae=oe("ZodBase64",(e,t)=>{nie.init(e,t),Bt.init(e,t)}),sae=oe("ZodBase64URL",(e,t)=>{iie.init(e,t),Bt.init(e,t)}),iae=oe("ZodE164",(e,t)=>{oie.init(e,t),Bt.init(e,t)}),oae=oe("ZodJWT",(e,t)=>{lie.init(e,t),Bt.init(e,t)}),aae=oe("ZodBoolean",(e,t)=>{cie.init(e,t),Ar.init(e,t)});function lae(e){return roe(aae,e)}const cae=oe("ZodUnknown",(e,t)=>{uie.init(e,t),Ar.init(e,t)});function BP(){return noe(cae)}const uae=oe("ZodNever",(e,t)=>{die.init(e,t),Ar.init(e,t)});function dae(e){return soe(uae,e)}const hae=oe("ZodArray",(e,t)=>{hie.init(e,t),Ar.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(kv(r,n)),e.nonempty=r=>e.check(kv(1,r)),e.max=(r,n)=>e.check(B$(r,n)),e.length=(r,n)=>e.check(W$(r,n)),e.unwrap=()=>e.element});function H$(e,t){return moe(hae,e,t)}const fae=oe("ZodObject",(e,t)=>{pie.init(e,t),Ar.init(e,t),St(e,"shape",()=>t.shape),e.keyof=()=>lk(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:BP()}),e.loose=()=>e.clone({...e._zod.def,catchall:BP()}),e.strict=()=>e.clone({...e._zod.def,catchall:dae()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>Ine(e,r),e.safeExtend=r=>Lne(e,r),e.merge=r=>Fne(e,r),e.pick=r=>Dne(e,r),e.omit=r=>Mne(e,r),e.partial=(...r)=>$ne(K$,e,r[0]),e.required=(...r)=>zne(Y$,e,r[0])});function WP(e,t){const r={type:"object",get shape(){return bl(this,"shape",e?Ane(e):{}),this.shape},...ze(t)};return new fae(r)}const pae=oe("ZodUnion",(e,t)=>{mie.init(e,t),Ar.init(e,t),e.options=t.options});function mae(e,t){return new pae({type:"union",options:e,...ze(t)})}const gae=oe("ZodIntersection",(e,t)=>{gie.init(e,t),Ar.init(e,t)});function yae(e,t){return new gae({type:"intersection",left:e,right:t})}const ak=oe("ZodEnum",(e,t)=>{yie.init(e,t),Ar.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new ak({...t,checks:[],...ze(s),entries:i})},e.exclude=(n,s)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new ak({...t,checks:[],...ze(s),entries:i})}});function lk(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new ak({type:"enum",entries:r,...ze(t)})}const vae=oe("ZodTransform",(e,t)=>{vie.init(e,t),Ar.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new O$(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Dp(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),r.issues.push(Dp(o))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(i=>(r.value=i,r)):(r.value=s,r)}});function bae(e){return new vae({type:"transform",transform:e})}const K$=oe("ZodOptional",(e,t)=>{bie.init(e,t),Ar.init(e,t),e.unwrap=()=>e._zod.def.innerType});function VP(e){return new K$({type:"optional",innerType:e})}const xae=oe("ZodNullable",(e,t)=>{xie.init(e,t),Ar.init(e,t),e.unwrap=()=>e._zod.def.innerType});function HP(e){return new xae({type:"nullable",innerType:e})}const wae=oe("ZodDefault",(e,t)=>{wie.init(e,t),Ar.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function _ae(e,t){return new wae({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():D$(t)}})}const jae=oe("ZodPrefault",(e,t)=>{_ie.init(e,t),Ar.init(e,t),e.unwrap=()=>e._zod.def.innerType});function kae(e,t){return new jae({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():D$(t)}})}const Y$=oe("ZodNonOptional",(e,t)=>{jie.init(e,t),Ar.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Sae(e,t){return new Y$({type:"nonoptional",innerType:e,...ze(t)})}const Nae=oe("ZodCatch",(e,t)=>{kie.init(e,t),Ar.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Cae(e,t){return new Nae({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Eae=oe("ZodPipe",(e,t)=>{Sie.init(e,t),Ar.init(e,t),e.in=t.in,e.out=t.out});function KP(e,t){return new Eae({type:"pipe",in:e,out:t})}const Tae=oe("ZodReadonly",(e,t)=>{Nie.init(e,t),Ar.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Aae(e){return new Tae({type:"readonly",innerType:e})}const Oae=oe("ZodCustom",(e,t)=>{Cie.init(e,t),Ar.init(e,t)});function Pae(e,t={}){return goe(Oae,e,t)}function Rae(e){return yoe(e)}const ci=g.forwardRef(({className:e,type:t,...r},n)=>d.jsx("input",{type:t,className:Ke("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));ci.displayName="Input";var Dae="Label",G$=g.forwardRef((e,t)=>d.jsx($r.label,{...e,ref:t,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));G$.displayName=Dae;var Z$=G$;const Mae=Zb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xs=g.forwardRef(({className:e,...t},r)=>d.jsx(Z$,{ref:r,className:Ke(Mae(),e),...t}));xs.displayName=Z$.displayName;const sC=g.forwardRef(({className:e,...t},r)=>d.jsx("textarea",{className:Ke("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));sC.displayName="Textarea";function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wt.apply(null,arguments)}function YP(e,[t,r]){return Math.min(r,Math.max(t,e))}function xn(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function iC(e,t=[]){let r=[];function n(i,o){const a=g.createContext(o),l=r.length;r=[...r,o];function c(h){const{scope:f,children:p,...v}=h,m=(f==null?void 0:f[e][l])||a,b=g.useMemo(()=>v,Object.values(v));return g.createElement(m.Provider,{value:b},p)}function u(h,f){const p=(f==null?void 0:f[e][l])||a,v=g.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=r.map(o=>g.createContext(o));return function(o){const a=(o==null?void 0:o[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return s.scopeName=e,[n,Iae(s,...t)]}function Iae(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const i=n.reduce((o,{useScope:a,scopeName:l})=>{const c=a(s)[`__scope${l}`];return{...o,...c}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function Lae(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function J$(...e){return t=>e.forEach(r=>Lae(r,t))}function Bn(...e){return g.useCallback(J$(...e),e)}const Mp=g.forwardRef((e,t)=>{const{children:r,...n}=e,s=g.Children.toArray(r),i=s.find($ae);if(i){const o=i.props.children,a=s.map(l=>l===i?g.Children.count(o)>1?g.Children.only(null):g.isValidElement(o)?o.props.children:null:l);return g.createElement(ck,wt({},n,{ref:t}),g.isValidElement(o)?g.cloneElement(o,void 0,a):null)}return g.createElement(ck,wt({},n,{ref:t}),r)});Mp.displayName="Slot";const ck=g.forwardRef((e,t)=>{const{children:r,...n}=e;return g.isValidElement(r)?g.cloneElement(r,{...zae(n,r.props),ref:t?J$(t,r.ref):r.ref}):g.Children.count(r)>1?g.Children.only(null):null});ck.displayName="SlotClone";const Fae=({children:e})=>g.createElement(g.Fragment,null,e);function $ae(e){return g.isValidElement(e)&&e.type===Fae}function zae(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...o)=>{i(...o),s(...o)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Uae(e){const t=e+"CollectionProvider",[r,n]=iC(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:m}=p,b=ue.useRef(null),x=ue.useRef(new Map).current;return ue.createElement(s,{scope:v,itemMap:x,collectionRef:b},m)},a=e+"CollectionSlot",l=ue.forwardRef((p,v)=>{const{scope:m,children:b}=p,x=i(a,m),w=Bn(v,x.collectionRef);return ue.createElement(Mp,{ref:w},b)}),c=e+"CollectionItemSlot",u="data-radix-collection-item",h=ue.forwardRef((p,v)=>{const{scope:m,children:b,...x}=p,w=ue.useRef(null),_=Bn(v,w),j=i(c,m);return ue.useEffect(()=>(j.itemMap.set(w,{ref:w,...x}),()=>void j.itemMap.delete(w))),ue.createElement(Mp,{[u]:"",ref:_},b)});function f(p){const v=i(e+"CollectionConsumer",p);return ue.useCallback(()=>{const m=v.collectionRef.current;if(!m)return[];const b=Array.from(m.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((x,w)=>b.indexOf(x.ref.current)-b.indexOf(w.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},f,n]}const qae=g.createContext(void 0);function Bae(e){const t=g.useContext(qae);return e||t||"ltr"}const Wae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],hn=Wae.reduce((e,t)=>{const r=g.forwardRef((n,s)=>{const{asChild:i,...o}=n,a=i?Mp:t;return g.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),g.createElement(a,wt({},o,{ref:s}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Vae(e,t){e&&to.flushSync(()=>e.dispatchEvent(t))}function Ho(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function Hae(e,t=globalThis==null?void 0:globalThis.document){const r=Ho(e);g.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[r,t])}const uk="dismissableLayer.update",Kae="dismissableLayer.pointerDownOutside",Yae="dismissableLayer.focusOutside";let GP;const Gae=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zae=g.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=g.useContext(Gae),[h,f]=g.useState(null),p=(r=h==null?void 0:h.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,v]=g.useState({}),m=Bn(t,C=>f(C)),b=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(x),_=h?b.indexOf(h):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,k=_>=w,S=Jae(C=>{const T=C.target,O=[...u.branches].some(P=>P.contains(T));!k||O||(i==null||i(C),a==null||a(C),C.defaultPrevented||l==null||l())},p),E=Qae(C=>{const T=C.target;[...u.branches].some(O=>O.contains(T))||(o==null||o(C),a==null||a(C),C.defaultPrevented||l==null||l())},p);return Hae(C=>{_===u.layers.size-1&&(s==null||s(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},p),g.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(GP=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),ZP(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=GP)}},[h,p,n,u]),g.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),ZP())},[h,u]),g.useEffect(()=>{const C=()=>v({});return document.addEventListener(uk,C),()=>document.removeEventListener(uk,C)},[]),g.createElement(hn.div,wt({},c,{ref:m,style:{pointerEvents:j?k?"auto":"none":void 0,...e.style},onFocusCapture:xn(e.onFocusCapture,E.onFocusCapture),onBlurCapture:xn(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:xn(e.onPointerDownCapture,S.onPointerDownCapture)}))});function Jae(e,t=globalThis==null?void 0:globalThis.document){const r=Ho(e),n=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){Q$(Kae,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Qae(e,t=globalThis==null?void 0:globalThis.document){const r=Ho(e),n=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!n.current&&Q$(Yae,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ZP(){const e=new CustomEvent(uk);document.dispatchEvent(e)}function Q$(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Vae(s,i):s.dispatchEvent(i)}let n_=0;function Xae(){g.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:JP()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:JP()),n_++,()=>{n_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),n_--}},[])}function JP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const s_="focusScope.autoFocusOnMount",i_="focusScope.autoFocusOnUnmount",QP={bubbles:!1,cancelable:!0},ele=g.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[a,l]=g.useState(null),c=Ho(s),u=Ho(i),h=g.useRef(null),f=Bn(t,m=>l(m)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(n){let m=function(_){if(p.paused||!a)return;const j=_.target;a.contains(j)?h.current=j:Da(h.current,{select:!0})},b=function(_){if(p.paused||!a)return;const j=_.relatedTarget;j!==null&&(a.contains(j)||Da(h.current,{select:!0}))},x=function(_){const j=document.activeElement;for(const k of _)k.removedNodes.length>0&&(a!=null&&a.contains(j)||Da(a))};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),w.disconnect()}}},[n,a,p.paused]),g.useEffect(()=>{if(a){e4.add(p);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(s_,QP);a.addEventListener(s_,c),a.dispatchEvent(b),b.defaultPrevented||(tle(ole(X$(a)),{select:!0}),document.activeElement===m&&Da(a))}return()=>{a.removeEventListener(s_,c),setTimeout(()=>{const b=new CustomEvent(i_,QP);a.addEventListener(i_,u),a.dispatchEvent(b),b.defaultPrevented||Da(m??document.body,{select:!0}),a.removeEventListener(i_,u),e4.remove(p)},0)}}},[a,c,u,p]);const v=g.useCallback(m=>{if(!r&&!n||p.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(b&&x){const w=m.currentTarget,[_,j]=rle(w);_&&j?!m.shiftKey&&x===j?(m.preventDefault(),r&&Da(_,{select:!0})):m.shiftKey&&x===_&&(m.preventDefault(),r&&Da(j,{select:!0})):x===w&&m.preventDefault()}},[r,n,p.paused]);return g.createElement(hn.div,wt({tabIndex:-1},o,{ref:f,onKeyDown:v}))});function tle(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Da(n,{select:t}),document.activeElement!==r)return}function rle(e){const t=X$(e),r=XP(t,e),n=XP(t.reverse(),e);return[r,n]}function X$(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function XP(e,t){for(const r of e)if(!nle(r,{upTo:t}))return r}function nle(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function sle(e){return e instanceof HTMLInputElement&&"select"in e}function Da(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&sle(e)&&t&&e.select()}}const e4=ile();function ile(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=t4(e,t),e.unshift(t)},remove(t){var r;e=t4(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function t4(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function ole(e){return e.filter(t=>t.tagName!=="A")}const Ko=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},ale=g.useId||(()=>{});let lle=0;function e8(e){const[t,r]=g.useState(ale());return Ko(()=>{r(n=>n??String(lle++))},[e]),t?`radix-${t}`:""}const cle=["top","right","bottom","left"],ul=Math.min,Jn=Math.max,Sv=Math.round,Hg=Math.floor,Ki=e=>({x:e,y:e}),ule={left:"right",right:"left",bottom:"top",top:"bottom"},dle={start:"end",end:"start"};function dk(e,t,r){return Jn(e,ul(t,r))}function Yo(e,t){return typeof e=="function"?e(t):e}function Go(e){return e.split("-")[0]}function jh(e){return e.split("-")[1]}function oC(e){return e==="x"?"y":"x"}function aC(e){return e==="y"?"height":"width"}const hle=new Set(["top","bottom"]);function Wi(e){return hle.has(Go(e))?"y":"x"}function lC(e){return oC(Wi(e))}function fle(e,t,r){r===void 0&&(r=!1);const n=jh(e),s=lC(e),i=aC(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Nv(o)),[o,Nv(o)]}function ple(e){const t=Nv(e);return[hk(e),t,hk(t)]}function hk(e){return e.replace(/start|end/g,t=>dle[t])}const r4=["left","right"],n4=["right","left"],mle=["top","bottom"],gle=["bottom","top"];function yle(e,t,r){switch(e){case"top":case"bottom":return r?t?n4:r4:t?r4:n4;case"left":case"right":return t?mle:gle;default:return[]}}function vle(e,t,r,n){const s=jh(e);let i=yle(Go(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(hk)))),i}function Nv(e){return e.replace(/left|right|bottom|top/g,t=>ule[t])}function ble(e){return{top:0,right:0,bottom:0,left:0,...e}}function t8(e){return typeof e!="number"?ble(e):{top:e,right:e,bottom:e,left:e}}function Cv(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function s4(e,t,r){let{reference:n,floating:s}=e;const i=Wi(t),o=lC(t),a=aC(o),l=Go(t),c=i==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:n.y-s.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(jh(t)){case"start":p[o]-=f*(r&&c?-1:1);break;case"end":p[o]+=f*(r&&c?-1:1);break}return p}const xle=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=s4(c,n,l),f=n,p={},v=0;for(let m=0;m<a.length;m++){const{name:b,fn:x}=a[m],{x:w,y:_,data:j,reset:k}=await x({x:u,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});u=w??u,h=_??h,p={...p,[b]:{...p[b],...j}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:u,y:h}=s4(c,f,l)),m=-1)}return{x:u,y:h,placement:f,strategy:s,middlewareData:p}};async function Ip(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Yo(t,e),v=t8(p),m=a[f?h==="floating"?"reference":"floating":h],b=Cv(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(m)))==null||r?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=Cv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(b.top-j.top+v.top)/_.y,bottom:(j.bottom-b.bottom+v.bottom)/_.y,left:(b.left-j.left+v.left)/_.x,right:(j.right-b.right+v.right)/_.x}}const wle=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Yo(e,t)||{};if(c==null)return{};const h=t8(u),f={x:r,y:n},p=lC(s),v=aC(p),m=await o.getDimensions(c),b=p==="y",x=b?"top":"left",w=b?"bottom":"right",_=b?"clientHeight":"clientWidth",j=i.reference[v]+i.reference[p]-f[p]-i.floating[v],k=f[p]-i.reference[p],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let E=S?S[_]:0;(!E||!await(o.isElement==null?void 0:o.isElement(S)))&&(E=a.floating[_]||i.floating[v]);const C=j/2-k/2,T=E/2-m[v]/2-1,O=ul(h[x],T),P=ul(h[w],T),D=O,R=E-m[v]-P,$=E/2-m[v]/2+C,F=dk(D,$,R),V=!l.arrow&&jh(s)!=null&&$!==F&&i.reference[v]/2-($<D?O:P)-m[v]/2<0,q=V?$<D?$-D:$-R:0;return{[p]:f[p]+q,data:{[p]:F,centerOffset:$-F-q,...V&&{alignmentOffset:q}},reset:V}}}),_le=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:m=!0,...b}=Yo(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=Go(s),w=Wi(a),_=Go(a)===a,j=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(_||!m?[Nv(a)]:ple(a)),S=v!=="none";!f&&S&&k.push(...vle(a,m,v,j));const E=[a,...k],C=await Ip(t,b),T=[];let O=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&T.push(C[x]),h){const $=fle(s,o,j);T.push(C[$[0]],C[$[1]])}if(O=[...O,{placement:s,overflows:T}],!T.every($=>$<=0)){var P,D;const $=(((P=i.flip)==null?void 0:P.index)||0)+1,F=E[$];if(F&&(!(h==="alignment"&&w!==Wi(F))||O.every(q=>Wi(q.placement)===w?q.overflows[0]>0:!0)))return{data:{index:$,overflows:O},reset:{placement:F}};let V=(D=O.filter(q=>q.overflows[0]<=0).sort((q,K)=>q.overflows[1]-K.overflows[1])[0])==null?void 0:D.placement;if(!V)switch(p){case"bestFit":{var R;const q=(R=O.filter(K=>{if(S){const Y=Wi(K.placement);return Y===w||Y==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(Y=>Y>0).reduce((Y,L)=>Y+L,0)]).sort((K,Y)=>K[1]-Y[1])[0])==null?void 0:R[0];q&&(V=q);break}case"initialPlacement":V=a;break}if(s!==V)return{reset:{placement:V}}}return{}}}};function i4(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function o4(e){return cle.some(t=>e[t]>=0)}const jle=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Yo(e,t);switch(n){case"referenceHidden":{const i=await Ip(t,{...s,elementContext:"reference"}),o=i4(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:o4(o)}}}case"escaped":{const i=await Ip(t,{...s,altBoundary:!0}),o=i4(i,r.floating);return{data:{escapedOffsets:o,escaped:o4(o)}}}default:return{}}}}},r8=new Set(["left","top"]);async function kle(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Go(r),a=jh(r),l=Wi(r)==="y",c=r8.has(o)?-1:1,u=i&&l?-1:1,h=Yo(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(p=a==="end"?v*-1:v),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const Sle=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:a}=t,l=await kle(t,e);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},Nle=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x,y:w}=b;return{x,y:w}}},...l}=Yo(e,t),c={x:r,y:n},u=await Ip(t,l),h=Wi(Go(s)),f=oC(h);let p=c[f],v=c[h];if(i){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=p+u[b],_=p-u[x];p=dk(w,p,_)}if(o){const b=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=v+u[b],_=v-u[x];v=dk(w,v,_)}const m=a.fn({...t,[f]:p,[h]:v});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[f]:i,[h]:o}}}}}},Cle=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Yo(e,t),u={x:r,y:n},h=Wi(s),f=oC(h);let p=u[f],v=u[h];const m=Yo(a,t),b=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const _=f==="y"?"height":"width",j=i.reference[f]-i.floating[_]+b.mainAxis,k=i.reference[f]+i.reference[_]-b.mainAxis;p<j?p=j:p>k&&(p=k)}if(c){var x,w;const _=f==="y"?"width":"height",j=r8.has(Go(s)),k=i.reference[h]-i.floating[_]+(j&&((x=o.offset)==null?void 0:x[h])||0)+(j?0:b.crossAxis),S=i.reference[h]+i.reference[_]+(j?0:((w=o.offset)==null?void 0:w[h])||0)-(j?b.crossAxis:0);v<k?v=k:v>S&&(v=S)}return{[f]:p,[h]:v}}}},Ele=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:o,elements:a}=t,{apply:l=()=>{},...c}=Yo(e,t),u=await Ip(t,c),h=Go(s),f=jh(s),p=Wi(s)==="y",{width:v,height:m}=i.floating;let b,x;h==="top"||h==="bottom"?(b=h,x=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=h,b=f==="end"?"top":"bottom");const w=m-u.top-u.bottom,_=v-u.left-u.right,j=ul(m-u[b],w),k=ul(v-u[x],_),S=!t.middlewareData.shift;let E=j,C=k;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=_),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(E=w),S&&!f){const O=Jn(u.left,0),P=Jn(u.right,0),D=Jn(u.top,0),R=Jn(u.bottom,0);p?C=v-2*(O!==0||P!==0?O+P:Jn(u.left,u.right)):E=m-2*(D!==0||R!==0?D+R:Jn(u.top,u.bottom))}await l({...t,availableWidth:C,availableHeight:E});const T=await o.getDimensions(a.floating);return v!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function wx(){return typeof window<"u"}function kh(e){return n8(e)?(e.nodeName||"").toLowerCase():"#document"}function rs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fo(e){var t;return(t=(n8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function n8(e){return wx()?e instanceof Node||e instanceof rs(e).Node:!1}function gi(e){return wx()?e instanceof Element||e instanceof rs(e).Element:!1}function no(e){return wx()?e instanceof HTMLElement||e instanceof rs(e).HTMLElement:!1}function a4(e){return!wx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rs(e).ShadowRoot}const Tle=new Set(["inline","contents"]);function Rm(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=yi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Tle.has(s)}const Ale=new Set(["table","td","th"]);function Ole(e){return Ale.has(kh(e))}const Ple=[":popover-open",":modal"];function _x(e){return Ple.some(t=>{try{return e.matches(t)}catch{return!1}})}const Rle=["transform","translate","scale","rotate","perspective"],Dle=["transform","translate","scale","rotate","perspective","filter"],Mle=["paint","layout","strict","content"];function cC(e){const t=uC(),r=gi(e)?yi(e):e;return Rle.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Dle.some(n=>(r.willChange||"").includes(n))||Mle.some(n=>(r.contain||"").includes(n))}function Ile(e){let t=dl(e);for(;no(t)&&!Kd(t);){if(cC(t))return t;if(_x(t))return null;t=dl(t)}return null}function uC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Lle=new Set(["html","body","#document"]);function Kd(e){return Lle.has(kh(e))}function yi(e){return rs(e).getComputedStyle(e)}function jx(e){return gi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function dl(e){if(kh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||a4(e)&&e.host||fo(e);return a4(t)?t.host:t}function s8(e){const t=dl(e);return Kd(t)?e.ownerDocument?e.ownerDocument.body:e.body:no(t)&&Rm(t)?t:s8(t)}function Lp(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=s8(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=rs(s);if(i){const a=fk(o);return t.concat(o,o.visualViewport||[],Rm(s)?s:[],a&&r?Lp(a):[])}return t.concat(s,Lp(s,[],r))}function fk(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function i8(e){const t=yi(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=no(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,a=Sv(r)!==i||Sv(n)!==o;return a&&(r=i,n=o),{width:r,height:n,$:a}}function dC(e){return gi(e)?e:e.contextElement}function bd(e){const t=dC(e);if(!no(t))return Ki(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=i8(t);let o=(i?Sv(r.width):r.width)/n,a=(i?Sv(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Fle=Ki(0);function o8(e){const t=rs(e);return!uC()||!t.visualViewport?Fle:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $le(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==rs(e)?!1:t}function Bc(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=dC(e);let o=Ki(1);t&&(n?gi(n)&&(o=bd(n)):o=bd(e));const a=$le(i,r,n)?o8(i):Ki(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const f=rs(i),p=n&&gi(n)?rs(n):n;let v=f,m=fk(v);for(;m&&n&&p!==v;){const b=bd(m),x=m.getBoundingClientRect(),w=yi(m),_=x.left+(m.clientLeft+parseFloat(w.paddingLeft))*b.x,j=x.top+(m.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,h*=b.y,l+=_,c+=j,v=rs(m),m=fk(v)}}return Cv({width:u,height:h,x:l,y:c})}function kx(e,t){const r=jx(e).scrollLeft;return t?t.left+r:Bc(fo(e)).left+r}function a8(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-kx(e,r),s=r.top+t.scrollTop;return{x:n,y:s}}function zle(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=fo(n),a=t?_x(t.floating):!1;if(n===o||a&&i)return r;let l={scrollLeft:0,scrollTop:0},c=Ki(1);const u=Ki(0),h=no(n);if((h||!h&&!i)&&((kh(n)!=="body"||Rm(o))&&(l=jx(n)),no(n))){const p=Bc(n);c=bd(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const f=o&&!h&&!i?a8(o,l):Ki(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:r.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Ule(e){return Array.from(e.getClientRects())}function qle(e){const t=fo(e),r=jx(e),n=e.ownerDocument.body,s=Jn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Jn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+kx(e);const a=-r.scrollTop;return yi(n).direction==="rtl"&&(o+=Jn(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}const l4=25;function Ble(e,t){const r=rs(e),n=fo(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=uC();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=kx(n);if(c<=0){const u=n.ownerDocument,h=u.body,f=getComputedStyle(h),p=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,v=Math.abs(n.clientWidth-h.clientWidth-p);v<=l4&&(i-=v)}else c<=l4&&(i+=c);return{width:i,height:o,x:a,y:l}}const Wle=new Set(["absolute","fixed"]);function Vle(e,t){const r=Bc(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=no(e)?bd(e):Ki(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,l=s*i.x,c=n*i.y;return{width:o,height:a,x:l,y:c}}function c4(e,t,r){let n;if(t==="viewport")n=Ble(e,r);else if(t==="document")n=qle(fo(e));else if(gi(t))n=Vle(t,r);else{const s=o8(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Cv(n)}function l8(e,t){const r=dl(e);return r===t||!gi(r)||Kd(r)?!1:yi(r).position==="fixed"||l8(r,t)}function Hle(e,t){const r=t.get(e);if(r)return r;let n=Lp(e,[],!1).filter(a=>gi(a)&&kh(a)!=="body"),s=null;const i=yi(e).position==="fixed";let o=i?dl(e):e;for(;gi(o)&&!Kd(o);){const a=yi(o),l=cC(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&s&&Wle.has(s.position)||Rm(o)&&!l&&l8(e,o))?n=n.filter(c=>c!==o):s=a,o=dl(o)}return t.set(e,n),n}function Kle(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?_x(t)?[]:Hle(t,this._c):[].concat(r),n],o=i[0],a=i.reduce((l,c)=>{const u=c4(t,c,s);return l.top=Jn(u.top,l.top),l.right=ul(u.right,l.right),l.bottom=ul(u.bottom,l.bottom),l.left=Jn(u.left,l.left),l},c4(t,o,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Yle(e){const{width:t,height:r}=i8(e);return{width:t,height:r}}function Gle(e,t,r){const n=no(t),s=fo(t),i=r==="fixed",o=Bc(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=Ki(0);function c(){l.x=kx(s)}if(n||!n&&!i)if((kh(t)!=="body"||Rm(s))&&(a=jx(t)),n){const p=Bc(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else s&&c();i&&!n&&s&&c();const u=s&&!n&&!i?a8(s,a):Ki(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function o_(e){return yi(e).position==="static"}function u4(e,t){if(!no(e)||yi(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return fo(e)===r&&(r=r.ownerDocument.body),r}function c8(e,t){const r=rs(e);if(_x(e))return r;if(!no(e)){let s=dl(e);for(;s&&!Kd(s);){if(gi(s)&&!o_(s))return s;s=dl(s)}return r}let n=u4(e,t);for(;n&&Ole(n)&&o_(n);)n=u4(n,t);return n&&Kd(n)&&o_(n)&&!cC(n)?r:n||Ile(e)||r}const Zle=async function(e){const t=this.getOffsetParent||c8,r=this.getDimensions,n=await r(e.floating);return{reference:Gle(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Jle(e){return yi(e).direction==="rtl"}const Qle={convertOffsetParentRelativeRectToViewportRelativeRect:zle,getDocumentElement:fo,getClippingRect:Kle,getOffsetParent:c8,getElementRects:Zle,getClientRects:Ule,getDimensions:Yle,getScale:bd,isElement:gi,isRTL:Jle};function u8(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Xle(e,t){let r=null,n;const s=fo(e);function i(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=c;if(a||t(),!f||!p)return;const v=Hg(h),m=Hg(s.clientWidth-(u+f)),b=Hg(s.clientHeight-(h+p)),x=Hg(u),w={rootMargin:-v+"px "+-m+"px "+-b+"px "+-x+"px",threshold:Jn(0,ul(1,l))||1};let _=!0;function j(k){const S=k[0].intersectionRatio;if(S!==l){if(!_)return o();S?o(!1,S):n=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!u8(c,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function ece(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=dC(e),u=s||i?[...c?Lp(c):[],...Lp(t)]:[];u.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const h=c&&a?Xle(c,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(x=>{let[w]=x;w&&w.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let v,m=l?Bc(e):null;l&&b();function b(){const x=Bc(e);m&&!u8(m,x)&&r(),m=x,v=requestAnimationFrame(b)}return r(),()=>{var x;u.forEach(w=>{s&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),h==null||h(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(v)}}const tce=Sle,rce=Nle,nce=_le,sce=Ele,ice=jle,d4=wle,oce=Cle,ace=(e,t,r)=>{const n=new Map,s={platform:Qle,...r},i={...s.platform,_c:n};return xle(e,t,{...s,platform:i})};var lce=typeof document<"u",cce=function(){},zy=lce?g.useLayoutEffect:cce;function Ev(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Ev(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!Ev(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function d8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function h4(e,t){const r=d8(e);return Math.round(t*r)/r}function a_(e){const t=g.useRef(e);return zy(()=>{t.current=e}),t}function uce(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,h]=g.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=g.useState(n);Ev(f,n)||p(n);const[v,m]=g.useState(null),[b,x]=g.useState(null),w=g.useCallback(K=>{K!==S.current&&(S.current=K,m(K))},[]),_=g.useCallback(K=>{K!==E.current&&(E.current=K,x(K))},[]),j=i||v,k=o||b,S=g.useRef(null),E=g.useRef(null),C=g.useRef(u),T=l!=null,O=a_(l),P=a_(s),D=a_(c),R=g.useCallback(()=>{if(!S.current||!E.current)return;const K={placement:t,strategy:r,middleware:f};P.current&&(K.platform=P.current),ace(S.current,E.current,K).then(Y=>{const L={...Y,isPositioned:D.current!==!1};$.current&&!Ev(C.current,L)&&(C.current=L,to.flushSync(()=>{h(L)}))})},[f,t,r,P,D]);zy(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[c]);const $=g.useRef(!1);zy(()=>($.current=!0,()=>{$.current=!1}),[]),zy(()=>{if(j&&(S.current=j),k&&(E.current=k),j&&k){if(O.current)return O.current(j,k,R);R()}},[j,k,R,O,T]);const F=g.useMemo(()=>({reference:S,floating:E,setReference:w,setFloating:_}),[w,_]),V=g.useMemo(()=>({reference:j,floating:k}),[j,k]),q=g.useMemo(()=>{const K={position:r,left:0,top:0};if(!V.floating)return K;const Y=h4(V.floating,u.x),L=h4(V.floating,u.y);return a?{...K,transform:"translate("+Y+"px, "+L+"px)",...d8(V.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Y,top:L}},[r,a,V.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:R,refs:F,elements:V,floatingStyles:q}),[u,R,F,V,q])}const dce=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?d4({element:n.current,padding:s}).fn(r):{}:n?d4({element:n,padding:s}).fn(r):{}}}},hce=(e,t)=>({...tce(e),options:[e,t]}),fce=(e,t)=>({...rce(e),options:[e,t]}),pce=(e,t)=>({...oce(e),options:[e,t]}),mce=(e,t)=>({...nce(e),options:[e,t]}),gce=(e,t)=>({...sce(e),options:[e,t]}),yce=(e,t)=>({...ice(e),options:[e,t]}),vce=(e,t)=>({...dce(e),options:[e,t]});function bce(e){const[t,r]=g.useState(void 0);return Ko(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;r({width:o,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}const h8="Popper",[f8,p8]=iC(h8),[xce,m8]=f8(h8),wce=e=>{const{__scopePopper:t,children:r}=e,[n,s]=g.useState(null);return g.createElement(xce,{scope:t,anchor:n,onAnchorChange:s},r)},_ce="PopperAnchor",jce=g.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=m8(_ce,r),o=g.useRef(null),a=Bn(t,o);return g.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:g.createElement(hn.div,wt({},s,{ref:a}))}),g8="PopperContent",[kce,dze]=f8(g8),Sce=g.forwardRef((e,t)=>{var r,n,s,i,o,a,l,c;const{__scopePopper:u,side:h="bottom",sideOffset:f=0,align:p="center",alignOffset:v=0,arrowPadding:m=0,collisionBoundary:b=[],collisionPadding:x=0,sticky:w="partial",hideWhenDetached:_=!1,avoidCollisions:j=!0,onPlaced:k,...S}=e,E=m8(g8,u),[C,T]=g.useState(null),O=Bn(t,Pe=>T(Pe)),[P,D]=g.useState(null),R=bce(P),$=(r=R==null?void 0:R.width)!==null&&r!==void 0?r:0,F=(n=R==null?void 0:R.height)!==null&&n!==void 0?n:0,V=h+(p!=="center"?"-"+p:""),q=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},K=Array.isArray(b)?b:[b],Y=K.length>0,L={padding:q,boundary:K.filter(Nce),altBoundary:Y},{refs:X,floatingStyles:te,placement:ve,isPositioned:H,middlewareData:G}=uce({strategy:"fixed",placement:V,whileElementsMounted:ece,elements:{reference:E.anchor},middleware:[hce({mainAxis:f+F,alignmentAxis:v}),j&&fce({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?pce():void 0,...L}),j&&mce({...L}),gce({...L,apply:({elements:Pe,rects:Ge,availableWidth:Ye,availableHeight:ft})=>{const{width:Vt,height:M}=Ge.reference,B=Pe.floating.style;B.setProperty("--radix-popper-available-width",`${Ye}px`),B.setProperty("--radix-popper-available-height",`${ft}px`),B.setProperty("--radix-popper-anchor-width",`${Vt}px`),B.setProperty("--radix-popper-anchor-height",`${M}px`)}}),P&&vce({element:P,padding:m}),Cce({arrowWidth:$,arrowHeight:F}),_&&yce({strategy:"referenceHidden"})]}),[he,fe]=y8(ve),_e=Ho(k);Ko(()=>{H&&(_e==null||_e())},[H,_e]);const W=(s=G.arrow)===null||s===void 0?void 0:s.x,J=(i=G.arrow)===null||i===void 0?void 0:i.y,ae=((o=G.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[z,ke]=g.useState();return Ko(()=>{C&&ke(window.getComputedStyle(C).zIndex)},[C]),g.createElement("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:H?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:z,"--radix-popper-transform-origin":[(a=G.transformOrigin)===null||a===void 0?void 0:a.x,(l=G.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:e.dir},g.createElement(kce,{scope:u,placedSide:he,onArrowChange:D,arrowX:W,arrowY:J,shouldHideArrow:ae},g.createElement(hn.div,wt({"data-side":he,"data-align":fe},S,{ref:O,style:{...S.style,animation:H?void 0:"none",opacity:(c=G.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function Nce(e){return e!==null}const Cce=e=>({name:"transformOrigin",options:e,fn(t){var r,n,s,i,o;const{placement:a,rects:l,middlewareData:c}=t,u=((r=c.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,h=u?0:e.arrowWidth,f=u?0:e.arrowHeight,[p,v]=y8(a),m={start:"0%",center:"50%",end:"100%"}[v],b=((n=(s=c.arrow)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0)+h/2,x=((i=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+f/2;let w="",_="";return p==="bottom"?(w=u?m:`${b}px`,_=`${-f}px`):p==="top"?(w=u?m:`${b}px`,_=`${l.floating.height+f}px`):p==="right"?(w=`${-f}px`,_=u?m:`${x}px`):p==="left"&&(w=`${l.floating.width+f}px`,_=u?m:`${x}px`),{data:{x:w,y:_}}}});function y8(e){const[t,r="center"]=e.split("-");return[t,r]}const Ece=wce,Tce=jce,Ace=Sce,Oce=g.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...s}=e;return n?kL.createPortal(g.createElement(hn.div,wt({},s,{ref:t})),n):null});function f4({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=Pce({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:n,a=Ho(r),l=g.useCallback(c=>{if(i){const u=typeof c=="function"?c(e):c;u!==e&&a(u)}else s(c)},[i,e,s,a]);return[o,l]}function Pce({defaultProp:e,onChange:t}){const r=g.useState(e),[n]=r,s=g.useRef(n),i=Ho(t);return g.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}function Rce(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const Dce=g.forwardRef((e,t)=>g.createElement(hn.span,wt({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var v8=D6(),l_=function(){},Sx=g.forwardRef(function(e,t){var r=g.useRef(null),n=g.useState({onScrollCapture:l_,onWheelCapture:l_,onTouchMoveCapture:l_}),s=n[0],i=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noIsolation,v=e.inert,m=e.allowPinchZoom,b=e.as,x=b===void 0?"div":b,w=b2(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),_=f,j=R6([r,t]),k=on(on({},w),s);return g.createElement(g.Fragment,null,u&&g.createElement(_,{sideCar:v8,removeScrollBar:c,shards:h,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!m,lockRef:r}),o?g.cloneElement(g.Children.only(a),on(on({},k),{ref:j})):g.createElement(x,on({},k,{className:l,ref:j}),a))});Sx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Sx.classNames={fullWidth:sp,zeroRight:np};var pk=!1;if(typeof window<"u")try{var Kg=Object.defineProperty({},"passive",{get:function(){return pk=!0,!0}});window.addEventListener("test",Kg,Kg),window.removeEventListener("test",Kg,Kg)}catch{pk=!1}var Mu=pk?{passive:!1}:!1,Mce=function(e){return e.tagName==="TEXTAREA"},b8=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Mce(e)&&r[t]==="visible")},Ice=function(e){return b8(e,"overflowY")},Lce=function(e){return b8(e,"overflowX")},p4=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=x8(e,r);if(n){var s=w8(e,r),i=s[1],o=s[2];if(i>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},Fce=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},$ce=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},x8=function(e,t){return e==="v"?Ice(t):Lce(t)},w8=function(e,t){return e==="v"?Fce(t):$ce(t)},zce=function(e,t){return e==="h"&&t==="rtl"?-1:1},Uce=function(e,t,r,n,s){var i=zce(e,window.getComputedStyle(t).direction),o=i*n,a=r.target,l=t.contains(a),c=!1,u=o>0,h=0,f=0;do{var p=w8(e,a),v=p[0],m=p[1],b=p[2],x=m-b-i*v;(v||x)&&x8(e,a)&&(h+=x,f+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&h===0||!u&&f===0)&&(c=!0),c},Yg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},m4=function(e){return[e.deltaX,e.deltaY]},g4=function(e){return e&&"current"in e?e.current:e},qce=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Bce=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Wce=0,Iu=[];function Vce(e){var t=g.useRef([]),r=g.useRef([0,0]),n=g.useRef(),s=g.useState(Wce++)[0],i=g.useState(function(){return x2()})[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=P6([e.lockRef.current],(e.shards||[]).map(g4)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=g.useCallback(function(m,b){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var x=Yg(m),w=r.current,_="deltaX"in m?m.deltaX:w[0]-x[0],j="deltaY"in m?m.deltaY:w[1]-x[1],k,S=m.target,E=Math.abs(_)>Math.abs(j)?"h":"v";if("touches"in m&&E==="h"&&S.type==="range")return!1;var C=p4(E,S);if(!C)return!0;if(C?k=E:(k=E==="v"?"h":"v",C=p4(E,S)),!C)return!1;if(!n.current&&"changedTouches"in m&&(_||j)&&(n.current=k),!k)return!0;var T=n.current||k;return Uce(T,b,m,T==="h"?_:j)},[]),l=g.useCallback(function(m){var b=m;if(!(!Iu.length||Iu[Iu.length-1]!==i)){var x="deltaY"in b?m4(b):Yg(b),w=t.current.filter(function(k){return k.name===b.type&&k.target===b.target&&qce(k.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(g4).filter(Boolean).filter(function(k){return k.contains(b.target)}),j=_.length>0?a(b,_[0]):!o.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),c=g.useCallback(function(m,b,x,w){var _={name:m,delta:b,target:x,should:w};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(j){return j!==_})},1)},[]),u=g.useCallback(function(m){r.current=Yg(m),n.current=void 0},[]),h=g.useCallback(function(m){c(m.type,m4(m),m.target,a(m,e.lockRef.current))},[]),f=g.useCallback(function(m){c(m.type,Yg(m),m.target,a(m,e.lockRef.current))},[]);g.useEffect(function(){return Iu.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Mu),document.addEventListener("touchmove",l,Mu),document.addEventListener("touchstart",u,Mu),function(){Iu=Iu.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,Mu),document.removeEventListener("touchmove",l,Mu),document.removeEventListener("touchstart",u,Mu)}},[]);var p=e.removeScrollBar,v=e.inert;return g.createElement(g.Fragment,null,v?g.createElement(i,{styles:Bce(s)}):null,p?g.createElement(F6,{gapMode:"margin"}):null)}const Hce=I6(v8,Vce);var _8=g.forwardRef(function(e,t){return g.createElement(Sx,on({},e,{ref:t,sideCar:Hce}))});_8.classNames=Sx.classNames;const Kce=[" ","Enter","ArrowUp","ArrowDown"],Yce=[" ","Enter"],Nx="Select",[Cx,hC,Gce]=Uae(Nx),[Sh,hze]=iC(Nx,[Gce,p8]),fC=p8(),[Zce,iu]=Sh(Nx),[Jce,Qce]=Sh(Nx),Xce=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:f,required:p}=e,v=fC(t),[m,b]=g.useState(null),[x,w]=g.useState(null),[_,j]=g.useState(!1),k=Bae(c),[S=!1,E]=f4({prop:n,defaultProp:s,onChange:i}),[C,T]=f4({prop:o,defaultProp:a,onChange:l}),O=g.useRef(null),P=m?!!m.closest("form"):!0,[D,R]=g.useState(new Set),$=Array.from(D).map(F=>F.props.value).join(";");return g.createElement(Ece,v,g.createElement(Zce,{required:p,scope:t,trigger:m,onTriggerChange:b,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:e8(),value:C,onValueChange:T,open:S,onOpenChange:E,dir:k,triggerPointerDownPosRef:O,disabled:f},g.createElement(Cx.Provider,{scope:t},g.createElement(Jce,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(F=>{R(V=>new Set(V).add(F))},[]),onNativeOptionRemove:g.useCallback(F=>{R(V=>{const q=new Set(V);return q.delete(F),q})},[])},r)),P?g.createElement(S8,{key:$,"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:C,onChange:F=>T(F.target.value),disabled:f},C===void 0?g.createElement("option",{value:""}):null,Array.from(D)):null))},eue="SelectTrigger",tue=g.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=fC(r),o=iu(eue,r),a=o.disabled||n,l=Bn(t,o.onTriggerChange),c=hC(r),[u,h,f]=N8(v=>{const m=c().filter(w=>!w.disabled),b=m.find(w=>w.value===o.value),x=C8(m,v,b);x!==void 0&&o.onValueChange(x.value)}),p=()=>{a||(o.onOpenChange(!0),f())};return g.createElement(Tce,wt({asChild:!0},i),g.createElement(hn.button,wt({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},s,{ref:l,onClick:xn(s.onClick,v=>{v.currentTarget.focus()}),onPointerDown:xn(s.onPointerDown,v=>{const m=v.target;m.hasPointerCapture(v.pointerId)&&m.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&(p(),o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)},v.preventDefault())}),onKeyDown:xn(s.onKeyDown,v=>{const m=u.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(m&&v.key===" ")&&Kce.includes(v.key)&&(p(),v.preventDefault())})})))}),rue="SelectValue",nue=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o,...a}=e,l=iu(rue,r),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,h=Bn(t,l.onValueNodeChange);return Ko(()=>{c(u)},[c,u]),g.createElement(hn.span,wt({},a,{ref:h,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:i)}),sue=g.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return g.createElement(hn.span,wt({"aria-hidden":!0},s,{ref:t}),n||"▼")}),iue=e=>g.createElement(Oce,wt({asChild:!0},e)),Yd="SelectContent",oue=g.forwardRef((e,t)=>{const r=iu(Yd,e.__scopeSelect),[n,s]=g.useState();if(Ko(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?to.createPortal(g.createElement(j8,{scope:e.__scopeSelect},g.createElement(Cx.Slot,{scope:e.__scopeSelect},g.createElement("div",null,e.children))),i):null}return g.createElement(aue,wt({},e,{ref:t}))}),Ao=10,[j8,Ex]=Sh(Yd),aue=g.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:b,...x}=e,w=iu(Yd,r),[_,j]=g.useState(null),[k,S]=g.useState(null),E=Bn(t,fe=>j(fe)),[C,T]=g.useState(null),[O,P]=g.useState(null),D=hC(r),[R,$]=g.useState(!1),F=g.useRef(!1);g.useEffect(()=>{if(_)return W6(_)},[_]),Xae();const V=g.useCallback(fe=>{const[_e,...W]=D().map(z=>z.ref.current),[J]=W.slice(-1),ae=document.activeElement;for(const z of fe)if(z===ae||(z==null||z.scrollIntoView({block:"nearest"}),z===_e&&k&&(k.scrollTop=0),z===J&&k&&(k.scrollTop=k.scrollHeight),z==null||z.focus(),document.activeElement!==ae))return},[D,k]),q=g.useCallback(()=>V([C,_]),[V,C,_]);g.useEffect(()=>{R&&q()},[R,q]);const{onOpenChange:K,triggerPointerDownPosRef:Y}=w;g.useEffect(()=>{if(_){let fe={x:0,y:0};const _e=J=>{var ae,z,ke,Pe;fe={x:Math.abs(Math.round(J.pageX)-((ae=(z=Y.current)===null||z===void 0?void 0:z.x)!==null&&ae!==void 0?ae:0)),y:Math.abs(Math.round(J.pageY)-((ke=(Pe=Y.current)===null||Pe===void 0?void 0:Pe.y)!==null&&ke!==void 0?ke:0))}},W=J=>{fe.x<=10&&fe.y<=10?J.preventDefault():_.contains(J.target)||K(!1),document.removeEventListener("pointermove",_e),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",_e),document.addEventListener("pointerup",W,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_e),document.removeEventListener("pointerup",W,{capture:!0})}}},[_,K,Y]),g.useEffect(()=>{const fe=()=>K(!1);return window.addEventListener("blur",fe),window.addEventListener("resize",fe),()=>{window.removeEventListener("blur",fe),window.removeEventListener("resize",fe)}},[K]);const[L,X]=N8(fe=>{const _e=D().filter(ae=>!ae.disabled),W=_e.find(ae=>ae.ref.current===document.activeElement),J=C8(_e,fe,W);J&&setTimeout(()=>J.ref.current.focus())}),te=g.useCallback((fe,_e,W)=>{const J=!F.current&&!W;(w.value!==void 0&&w.value===_e||J)&&(T(fe),J&&(F.current=!0))},[w.value]),ve=g.useCallback(()=>_==null?void 0:_.focus(),[_]),H=g.useCallback((fe,_e,W)=>{const J=!F.current&&!W;(w.value!==void 0&&w.value===_e||J)&&P(fe)},[w.value]),G=n==="popper"?y4:lue,he=G===y4?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:b}:{};return g.createElement(j8,{scope:r,content:_,viewport:k,onViewportChange:S,itemRefCallback:te,selectedItem:C,onItemLeave:ve,itemTextRefCallback:H,focusSelectedItem:q,selectedItemText:O,position:n,isPositioned:R,searchRef:L},g.createElement(_8,{as:Mp,allowPinchZoom:!0},g.createElement(ele,{asChild:!0,trapped:w.open,onMountAutoFocus:fe=>{fe.preventDefault()},onUnmountAutoFocus:xn(s,fe=>{var _e;(_e=w.trigger)===null||_e===void 0||_e.focus({preventScroll:!0}),fe.preventDefault()})},g.createElement(Zae,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:fe=>fe.preventDefault(),onDismiss:()=>w.onOpenChange(!1)},g.createElement(G,wt({role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:fe=>fe.preventDefault()},x,he,{onPlaced:()=>$(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:xn(x.onKeyDown,fe=>{const _e=fe.ctrlKey||fe.altKey||fe.metaKey;if(fe.key==="Tab"&&fe.preventDefault(),!_e&&fe.key.length===1&&X(fe.key),["ArrowUp","ArrowDown","Home","End"].includes(fe.key)){let W=D().filter(J=>!J.disabled).map(J=>J.ref.current);if(["ArrowUp","End"].includes(fe.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(fe.key)){const J=fe.target,ae=W.indexOf(J);W=W.slice(ae+1)}setTimeout(()=>V(W)),fe.preventDefault()}})}))))))}),lue=g.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=iu(Yd,r),o=Ex(Yd,r),[a,l]=g.useState(null),[c,u]=g.useState(null),h=Bn(t,E=>u(E)),f=hC(r),p=g.useRef(!1),v=g.useRef(!0),{viewport:m,selectedItem:b,selectedItemText:x,focusSelectedItem:w}=o,_=g.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&m&&b&&x){const E=i.trigger.getBoundingClientRect(),C=c.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),O=x.getBoundingClientRect();if(i.dir!=="rtl"){const J=O.left-C.left,ae=T.left-J,z=E.left-ae,ke=E.width+z,Pe=Math.max(ke,C.width),Ge=window.innerWidth-Ao,Ye=YP(ae,[Ao,Ge-Pe]);a.style.minWidth=ke+"px",a.style.left=Ye+"px"}else{const J=C.right-O.right,ae=window.innerWidth-T.right-J,z=window.innerWidth-E.right-ae,ke=E.width+z,Pe=Math.max(ke,C.width),Ge=window.innerWidth-Ao,Ye=YP(ae,[Ao,Ge-Pe]);a.style.minWidth=ke+"px",a.style.right=Ye+"px"}const P=f(),D=window.innerHeight-Ao*2,R=m.scrollHeight,$=window.getComputedStyle(c),F=parseInt($.borderTopWidth,10),V=parseInt($.paddingTop,10),q=parseInt($.borderBottomWidth,10),K=parseInt($.paddingBottom,10),Y=F+V+R+K+q,L=Math.min(b.offsetHeight*5,Y),X=window.getComputedStyle(m),te=parseInt(X.paddingTop,10),ve=parseInt(X.paddingBottom,10),H=E.top+E.height/2-Ao,G=D-H,he=b.offsetHeight/2,fe=b.offsetTop+he,_e=F+V+fe,W=Y-_e;if(_e<=H){const J=b===P[P.length-1].ref.current;a.style.bottom="0px";const ae=c.clientHeight-m.offsetTop-m.offsetHeight,z=Math.max(G,he+(J?ve:0)+ae+q),ke=_e+z;a.style.height=ke+"px"}else{const J=b===P[0].ref.current;a.style.top="0px";const ae=Math.max(H,F+m.offsetTop+(J?te:0)+he)+W;a.style.height=ae+"px",m.scrollTop=_e-H+m.offsetTop}a.style.margin=`${Ao}px 0`,a.style.minHeight=L+"px",a.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,c,m,b,x,i.dir,n]);Ko(()=>_(),[_]);const[j,k]=g.useState();Ko(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const S=g.useCallback(E=>{E&&v.current===!0&&(_(),w==null||w(),v.current=!1)},[_,w]);return g.createElement(cue,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:S},g.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},g.createElement(hn.div,wt({},s,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),y4=g.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Ao,...i}=e,o=fC(r);return g.createElement(Ace,wt({},o,i,{ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[cue,uue]=Sh(Yd,{}),v4="SelectViewport",due=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Ex(v4,r),i=uue(v4,r),o=Bn(t,s.onViewportChange),a=g.useRef(0);return g.createElement(g.Fragment,null,g.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),g.createElement(Cx.Slot,{scope:r},g.createElement(hn.div,wt({"data-radix-select-viewport":"",role:"presentation"},n,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:xn(n.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const p=window.innerHeight-Ao*2,v=parseFloat(u.style.minHeight),m=parseFloat(u.style.height),b=Math.max(v,m);if(b<p){const x=b+f,w=Math.min(p,x),_=x-w;u.style.height=w+"px",u.style.bottom==="0px"&&(c.scrollTop=_>0?_:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),hue="SelectGroup",[fze,fue]=Sh(hue),pue="SelectLabel",mue=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=fue(pue,r);return g.createElement(hn.div,wt({id:s.id},n,{ref:t}))}),mk="SelectItem",[gue,k8]=Sh(mk),yue=g.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=e,a=iu(mk,r),l=Ex(mk,r),c=a.value===n,[u,h]=g.useState(i??""),[f,p]=g.useState(!1),v=Bn(t,x=>{var w;return(w=l.itemRefCallback)===null||w===void 0?void 0:w.call(l,x,n,s)}),m=e8(),b=()=>{s||(a.onValueChange(n),a.onOpenChange(!1))};return g.createElement(gue,{scope:r,value:n,disabled:s,textId:m,isSelected:c,onItemTextChange:g.useCallback(x=>{h(w=>{var _;return w||((_=x==null?void 0:x.textContent)!==null&&_!==void 0?_:"").trim()})},[])},g.createElement(Cx.ItemSlot,{scope:r,value:n,disabled:s,textValue:u},g.createElement(hn.div,wt({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},o,{ref:v,onFocus:xn(o.onFocus,()=>p(!0)),onBlur:xn(o.onBlur,()=>p(!1)),onPointerUp:xn(o.onPointerUp,b),onPointerMove:xn(o.onPointerMove,x=>{if(s){var w;(w=l.onItemLeave)===null||w===void 0||w.call(l)}else x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xn(o.onPointerLeave,x=>{if(x.currentTarget===document.activeElement){var w;(w=l.onItemLeave)===null||w===void 0||w.call(l)}}),onKeyDown:xn(o.onKeyDown,x=>{var w;((w=l.searchRef)===null||w===void 0?void 0:w.current)!==""&&x.key===" "||(Yce.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})}))))}),Gg="SelectItemText",vue=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,o=iu(Gg,r),a=Ex(Gg,r),l=k8(Gg,r),c=Qce(Gg,r),[u,h]=g.useState(null),f=Bn(t,x=>h(x),l.onItemTextChange,x=>{var w;return(w=a.itemTextRefCallback)===null||w===void 0?void 0:w.call(a,x,l.value,l.disabled)}),p=u==null?void 0:u.textContent,v=g.useMemo(()=>g.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},p),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:b}=c;return Ko(()=>(m(v),()=>b(v)),[m,b,v]),g.createElement(g.Fragment,null,g.createElement(hn.span,wt({id:l.textId},i,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?to.createPortal(i.children,o.valueNode):null)}),bue="SelectItemIndicator",xue=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return k8(bue,r).isSelected?g.createElement(hn.span,wt({"aria-hidden":!0},n,{ref:t})):null}),wue=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return g.createElement(hn.div,wt({"aria-hidden":!0},n,{ref:t}))}),S8=g.forwardRef((e,t)=>{const{value:r,...n}=e,s=g.useRef(null),i=Bn(t,s),o=Rce(r);return g.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==r&&c){const u=new Event("change",{bubbles:!0});c.call(a,r),a.dispatchEvent(u)}},[o,r]),g.createElement(Dce,{asChild:!0},g.createElement("select",wt({},n,{ref:i,defaultValue:r})))});S8.displayName="BubbleSelect";function N8(e){const t=Ho(e),r=g.useRef(""),n=g.useRef(0),s=g.useCallback(o=>{const a=r.current+o;t(a),function l(c){r.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(a)},[t]),i=g.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function C8(e,t,r){const n=t.length>1&&Array.from(t).every(a=>a===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let i=_ue(e,Math.max(s,0));n.length===1&&(i=i.filter(a=>a!==r));const o=i.find(a=>a.textValue.toLowerCase().startsWith(n.toLowerCase()));return o!==r?o:void 0}function _ue(e,t){return e.map((r,n)=>e[(t+n)%e.length])}const jue=Xce,E8=tue,kue=nue,Sue=sue,Nue=iue,T8=oue,Cue=due,A8=mue,O8=yue,Eue=vue,Tue=xue,P8=wue;function Tr(...e){return S6(st(e))}const Zg=jue,Jg=kue,Lf=g.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(E8,{ref:n,className:Tr("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,d.jsx(Sue,{asChild:!0,children:d.jsx(WF,{className:"h-4 w-4 opacity-50"})})]}));Lf.displayName=E8.displayName;const Ff=g.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>d.jsx(Nue,{children:d.jsx(T8,{ref:s,className:Tr("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:duration-75",r==="popper"&&"data-[state=open]:slide-in-from-top-[60%] data-[state=closed]:slide-out-to-top-[60%] data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:d.jsx(Cue,{className:Tr("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));Ff.displayName=T8.displayName;const Aue=g.forwardRef(({className:e,...t},r)=>d.jsx(A8,{ref:r,className:Tr("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Aue.displayName=A8.displayName;const Mi=g.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(O8,{ref:n,className:Tr("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(Tue,{children:d.jsx(WF,{className:"h-4 w-4"})})}),d.jsx(Eue,{children:t})]}));Mi.displayName=O8.displayName;const Oue=g.forwardRef(({className:e,...t},r)=>d.jsx(P8,{ref:r,className:Tr("-mx-1 my-1 h-px bg-muted",e),...t}));Oue.displayName=P8.displayName;function Pue(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function Rue(e){const[t,r]=g.useState(void 0);return Wd(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;r({width:o,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Tx="Switch",[Due,pze]=xh(Tx),[Mue,Iue]=Due(Tx),R8=g.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...h}=e,[f,p]=g.useState(null),v=qn(t,_=>p(_)),m=g.useRef(!1),b=f?u||!!f.closest("form"):!0,[x,w]=nx({prop:s,defaultProp:i??!1,onChange:c,caller:Tx});return d.jsxs(Mue,{scope:r,checked:x,disabled:a,children:[d.jsx($r.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":L8(x),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:v,onClick:Er(e.onClick,_=>{w(j=>!j),b&&(m.current=_.isPropagationStopped(),m.current||_.stopPropagation())})}),b&&d.jsx(I8,{control:f,bubbles:!m.current,name:n,value:l,checked:x,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});R8.displayName=Tx;var D8="SwitchThumb",M8=g.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=Iue(D8,r);return d.jsx($r.span,{"data-state":L8(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});M8.displayName=D8;var Lue="SwitchBubbleInput",I8=g.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},i)=>{const o=g.useRef(null),a=qn(o,i),l=Pue(r),c=Rue(t);return g.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&f){const p=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(p)}},[l,r,n]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});I8.displayName=Lue;function L8(e){return e?"checked":"unchecked"}var F8=R8,Fue=M8;const Tv=g.forwardRef(({className:e,...t},r)=>d.jsx(F8,{className:Ke("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:d.jsx(Fue,{className:Ke("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Tv.displayName=F8.displayName;const $ue=Zb("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:h-4 [&>svg]:w-4",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-emerald-500/50 text-emerald-600 dark:text-emerald-400 [&>svg]:text-emerald-600 dark:[&>svg]:text-emerald-400"}},defaultVariants:{variant:"default"}}),pC=g.forwardRef(({className:e,variant:t,...r},n)=>d.jsx("div",{ref:n,role:"alert",className:Tr($ue({variant:t}),e),...r}));pC.displayName="Alert";const mC=g.forwardRef(({className:e,...t},r)=>d.jsx("h5",{ref:r,className:Tr("mb-1 font-medium leading-none tracking-tight",e),...t}));mC.displayName="AlertTitle";const Av=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Tr("text-sm [&_p]:leading-relaxed",e),...t}));Av.displayName="AlertDescription";const zue=g.forwardRef(({className:e,variant:t="default",children:r,icon:n,...s},i)=>{const o={default:HF,destructive:$2,success:Hee}[t]||$i;return d.jsxs(pC,{ref:i,variant:t,className:Tr("flex items-start gap-3",e),...s,children:[n||d.jsx(o,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),d.jsx("div",{children:g.Children.map(r,a=>g.isValidElement(a)&&(a.type===mC||a.type===Av)?a:d.jsx(Av,{children:a}))})]})});zue.displayName="AlertWithIcon";const Uue=WP({name:Wg().min(1,"Name is required").max(100,"Name is too long"),description:Wg().max(500,"Description is too long").optional(),product_type:lk(["single_issue","bundle","chapter_pass","arc_pass"]),active:lae(),work_id:Wg().nullable().optional(),content_grants:H$(WP({type:lk(["work","chapter"]),id:Wg().min(1,"Content ID is required")}))}),que=({product:e,onSave:t,onCancel:r,isSubmitting:n=!1})=>{var s,i;const[o,a]=g.useState([]),[l,c]=g.useState(!0),[u,h]=g.useState(null),{control:f,register:p,handleSubmit:v,reset:m,watch:b,setValue:x,formState:{errors:w}}=Cne({resolver:woe(Uue),defaultValues:{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",product_type:(e==null?void 0:e.product_type)||"single_issue",active:(e==null?void 0:e.active)??!0,work_id:(e==null?void 0:e.work_id)||null,content_grants:Array.isArray(e==null?void 0:e.content_grants)?e.content_grants:[]}}),_=b("product_type");g.useEffect(()=>{(async()=>{c(!0),h(null);try{const C=await fetch("/api/content/works");if(!C.ok)throw new Error(`Failed to fetch works: ${C.statusText}`);const T=await C.json();a(T.works||[])}catch(C){console.error("Error fetching works:",C),h("Failed to load content. Please try again later.")}finally{c(!1)}})()},[]);const j=C=>{const T={...C,work_id:C.work_id||null};t(T)},k=()=>{const C=b("content_grants")||[];x("content_grants",[...C,{type:"work",id:""}],{shouldValidate:!0})},S=C=>{const T=(b("content_grants")||[]).filter((O,P)=>P!==C);x("content_grants",T,{shouldValidate:!0})},E=(C,T,O)=>{const P=[...b("content_grants")||[]];P[C]={...P[C],[T]:O},x("content_grants",P,{shouldValidate:!0})};return l?d.jsxs("div",{className:"flex items-center justify-center p-8",children:[d.jsx(Hd,{className:"h-6 w-6 animate-spin text-primary mr-2"}),d.jsx("span",{children:"Loading form..."})]}):d.jsxs("form",{onSubmit:v(j),className:"space-y-6",children:[u&&d.jsxs(pC,{variant:"destructive",children:[d.jsx($i,{className:"h-4 w-4"}),d.jsx(mC,{children:"Error"}),d.jsx(Av,{children:u})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(xs,{htmlFor:"name",children:"Product Name *"}),d.jsx(ci,{id:"name",placeholder:"e.g., Issue #1, Premium Bundle",...p("name"),className:w.name?"border-destructive":""}),w.name&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.name.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(xs,{htmlFor:"description",children:"Description"}),d.jsx(sC,{id:"description",placeholder:"A brief description of the product...",rows:3,...p("description"),className:w.description?"border-destructive":""}),w.description&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.description.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(xs,{htmlFor:"product_type",children:"Product Type *"}),d.jsx(t_,{name:"product_type",control:f,render:({field:C})=>d.jsxs(Zg,{onValueChange:C.onChange,value:C.value,children:[d.jsx(Lf,{className:"w-full",children:d.jsx(Jg,{placeholder:"Select a product type"})}),d.jsxs(Ff,{children:[d.jsx(Mi,{value:"single_issue",children:"Single Issue"}),d.jsx(Mi,{value:"bundle",children:"Bundle"}),d.jsx(Mi,{value:"chapter_pass",children:"Chapter Pass"}),d.jsx(Mi,{value:"arc_pass",children:"Arc Pass"})]})]})}),w.product_type&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.product_type.message})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(t_,{name:"active",control:f,render:({field:C})=>d.jsx(Tv,{id:"active",checked:C.value,onCheckedChange:C.onChange})}),d.jsx(xs,{htmlFor:"active",children:"Active"})]}),_==="single_issue"&&d.jsxs("div",{className:"space-y-2",children:[d.jsx(xs,{htmlFor:"work_id",children:"Associated Work (Issue/Book)"}),d.jsx(t_,{name:"work_id",control:f,render:({field:C})=>d.jsxs(Zg,{onValueChange:C.onChange,value:C.value||"",children:[d.jsx(Lf,{children:d.jsx(Jg,{placeholder:"Select an associated work"})}),d.jsxs(Ff,{children:[d.jsx(Mi,{value:"",children:"None"}),o.map(T=>d.jsxs(Mi,{value:T.id,children:[T.title," (",T.type,")"]},T.id))]})]})}),w.work_id&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.work_id.message})]}),(_==="bundle"||_==="chapter_pass"||_==="arc_pass")&&d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(xs,{children:"Content Grants"}),d.jsxs(lt,{type:"button",variant:"outline",size:"sm",onClick:k,className:"text-sm",children:[d.jsx(ro,{className:"h-3.5 w-3.5 mr-1.5"}),"Add Grant"]})]}),d.jsxs("div",{className:"space-y-3",children:[(s=b("content_grants"))==null?void 0:s.map((C,T)=>d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-1",children:[d.jsx("div",{className:"space-y-1",children:d.jsxs(Zg,{value:C.type,onValueChange:O=>E(T,"type",O),children:[d.jsx(Lf,{children:d.jsx(Jg,{})}),d.jsxs(Ff,{children:[d.jsx(Mi,{value:"work",children:"Work"}),d.jsx(Mi,{value:"chapter",children:"Chapter"})]})]})}),d.jsx("div",{className:"space-y-1",children:d.jsxs(Zg,{value:C.id,onValueChange:O=>E(T,"id",O),children:[d.jsx(Lf,{children:d.jsx(Jg,{placeholder:`Select ${C.type}...`})}),d.jsxs(Ff,{children:[o.filter(O=>C.type==="work"||O.type===C.type).map(O=>d.jsxs(Mi,{value:O.id,children:[O.title," (",O.type,")"]},O.id)),o.length===0&&d.jsxs("div",{className:"p-2 text-sm text-muted-foreground",children:["No ",C.type,"s found"]})]})]})})]}),d.jsxs(lt,{type:"button",variant:"ghost",size:"icon",className:"h-10 w-10 text-destructive hover:bg-destructive/10",onClick:()=>S(T),children:[d.jsx(cl,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Remove"})]})]},T)),((i=b("content_grants"))==null?void 0:i.length)===0&&d.jsx("div",{className:"rounded-md border border-dashed p-4 text-center",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:'No content grants added yet. Click "Add Grant" to get started.'})})]}),w.content_grants&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.content_grants.message||"Please check the content grants"})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[d.jsx(lt,{type:"button",variant:"outline",onClick:r,disabled:n,children:"Cancel"}),d.jsx(lt,{type:"submit",disabled:n,children:n?d.jsxs(d.Fragment,{children:[d.jsx(Hd,{className:"mr-2 h-4 w-4 animate-spin"}),e?"Updating...":"Creating..."]}):d.jsx(d.Fragment,{children:e?"Update Product":"Create Product"})})]})]})},$8=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{className:"w-full overflow-auto",children:d.jsx("table",{ref:r,className:Ke("w-full caption-bottom text-sm",e),...t})}));$8.displayName="Table";const z8=g.forwardRef(({className:e,...t},r)=>d.jsx("thead",{ref:r,className:Ke("[&_tr]:border-b",e),...t}));z8.displayName="TableHeader";const U8=g.forwardRef(({className:e,...t},r)=>d.jsx("tbody",{ref:r,className:Ke("[&_tr:last-child]:border-0",e),...t}));U8.displayName="TableBody";const Bue=g.forwardRef(({className:e,...t},r)=>d.jsx("tfoot",{ref:r,className:Ke("bg-primary font-medium text-primary-foreground",e),...t}));Bue.displayName="TableFooter";const Uy=g.forwardRef(({className:e,...t},r)=>d.jsx("tr",{ref:r,className:Ke("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Uy.displayName="TableRow";const Hu=g.forwardRef(({className:e,...t},r)=>d.jsx("th",{ref:r,className:Ke("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Hu.displayName="TableHead";const sc=g.forwardRef(({className:e,...t},r)=>d.jsx("td",{ref:r,className:Ke("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));sc.displayName="TableCell";const Wue=g.forwardRef(({className:e,...t},r)=>d.jsx("caption",{ref:r,className:Ke("mt-4 text-sm text-muted-foreground",e),...t}));Wue.displayName="TableCaption";const Vue=eX,Hue=lF,Kue=cF,q8=g.forwardRef(({className:e,...t},r)=>d.jsx(k2,{ref:r,className:Ke("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));q8.displayName=k2.displayName;const B8=g.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(Kue,{children:[d.jsx(q8,{}),d.jsxs(S2,{ref:n,className:Ke("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,d.jsxs(E2,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(cl,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));B8.displayName=S2.displayName;const W8=({className:e,...t})=>d.jsx("div",{className:Ke("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});W8.displayName="DialogHeader";const V8=g.forwardRef(({className:e,...t},r)=>d.jsx(N2,{ref:r,className:Ke("text-lg font-semibold leading-none tracking-tight",e),...t}));V8.displayName=N2.displayName;const Yue=g.forwardRef(({className:e,...t},r)=>d.jsx(C2,{ref:r,className:Ke("text-sm text-muted-foreground",e),...t}));Yue.displayName=C2.displayName;function Gue(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let gk=1;class Zue{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...s}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:gk++,o=this.toasts.find(l=>l.id===i),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:n}),{...l,...t,id:i,dismissible:a,title:n}):l):this.addToast({title:n,...s,dismissible:a,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const a=s.then(async c=>{if(o=["resolve",c],ue.isValidElement(c))i=!1,this.create({id:n,type:"default",message:c});else if(Que(c)&&!c.ok){i=!1;const u=typeof r.error=="function"?await r.error(`HTTP error! status: ${c.status}`):r.error,h=typeof r.description=="function"?await r.description(`HTTP error! status: ${c.status}`):r.description,f=typeof u=="object"&&!ue.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}else if(c instanceof Error){i=!1;const u=typeof r.error=="function"?await r.error(c):r.error,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!ue.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}else if(r.success!==void 0){i=!1;const u=typeof r.success=="function"?await r.success(c):r.success,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!ue.isValidElement(u)?u:{message:u};this.create({id:n,type:"success",description:h,...f})}}).catch(async c=>{if(o=["reject",c],r.error!==void 0){i=!1;const u=typeof r.error=="function"?await r.error(c):r.error,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!ue.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,r)=>{const n=(r==null?void 0:r.id)||gk++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ys=new Zue,Jue=(e,t)=>{const r=(t==null?void 0:t.id)||gk++;return ys.addToast({title:e,...t,id:r}),r},Que=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Xue=Jue,ede=()=>ys.toasts,tde=()=>ys.getActiveToasts(),qe=Object.assign(Xue,{success:ys.success,info:ys.info,warning:ys.warning,error:ys.error,custom:ys.custom,message:ys.message,promise:ys.promise,dismiss:ys.dismiss,loading:ys.loading},{getHistory:ede,getToasts:tde});Gue("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const rde=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!1),[s,i]=g.useState(!0),[o,a]=g.useState(!1),[l,c]=g.useState(null),u=async()=>{i(!0);try{const m=await fetch("/api/products");if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const b=await m.json();t(b.products),qe.success("Products loaded successfully")}catch(m){console.error("Error fetching products:",m),qe.error("Failed to load products")}finally{i(!1)}};g.useEffect(()=>{u()},[]);const h=async m=>{a(!0);try{let b;if(l?b=await fetch(`/api/products/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,active:m.active??!0})}):b=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,active:m.active??!0})}),!b.ok){const w=await b.json();throw new Error(w.message||"Failed to save product")}const x=await b.json();qe.success(l?"Product updated successfully":"Product created successfully"),n(!1),c(null),await u()}catch(b){console.error("Error saving product:",b),qe.error((b instanceof Error?b.message:String(b))||"Failed to save product")}finally{a(!1)}},f=async m=>{if(window.confirm("Are you sure you want to archive this product?"))try{const b=await fetch(`/api/products/${m}`,{method:"DELETE"});if(!b.ok){const x=await b.json();throw new Error(x.message||"Failed to delete product")}qe.success("Product archived successfully"),await u()}catch(b){console.error("Error deleting product:",b),qe.error((b instanceof Error?b.message:String(b))||"Failed to archive product")}},p=m=>{c(m),n(!0)},v=()=>{n(!1),c(null)};return s?d.jsxs("div",{className:"flex items-center justify-center p-8",children:[d.jsx(Hd,{className:"h-8 w-8 animate-spin text-primary"}),d.jsx("span",{className:"ml-2",children:"Loading products..."})]}):d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Products"}),d.jsxs("p",{className:"text-muted-foreground",children:[e.length," product",e.length!==1?"s":""," in your store"]})]}),d.jsxs(Vue,{open:r,onOpenChange:v,children:[d.jsx(Hue,{asChild:!0,children:d.jsxs(lt,{onClick:()=>n(!0),children:[d.jsx(ro,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),d.jsxs(B8,{className:"sm:max-w-[700px]",children:[d.jsx(W8,{children:d.jsx(V8,{children:l?"Edit Product":"Create New Product"})}),d.jsx(que,{product:l,onSave:h,onCancel:v,isSubmitting:o})]})]})]}),d.jsx("div",{className:"rounded-md border",children:d.jsxs($8,{children:[d.jsx(z8,{children:d.jsxs(Uy,{children:[d.jsx(Hu,{className:"w-[300px]",children:"Name"}),d.jsx(Hu,{children:"Type"}),d.jsx(Hu,{children:"Status"}),d.jsx(Hu,{children:"Created"}),d.jsx(Hu,{className:"text-right",children:"Actions"})]})}),d.jsx(U8,{children:e.length===0?d.jsx(Uy,{children:d.jsx(sc,{colSpan:5,className:"h-24 text-center",children:"No products found."})}):e.map(m=>{var b;return d.jsxs(Uy,{children:[d.jsxs(sc,{className:"font-medium",children:[d.jsx("div",{className:"font-medium",children:m.name}),d.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2",children:m.description||"No description"})]}),d.jsx(sc,{children:d.jsx("span",{className:"inline-flex items-center rounded-full bg-secondary px-2.5 py-0.5 text-xs font-medium text-secondary-foreground capitalize",children:(b=m.product_type)==null?void 0:b.replace("_"," ")})}),d.jsx(sc,{children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`h-2.5 w-2.5 rounded-full mr-2 ${m.active?"bg-green-500":"bg-gray-300"}`}),m.active?"Active":"Inactive"]})}),d.jsx(sc,{children:new Date(m.created_at).toLocaleDateString()}),d.jsx(sc,{className:"text-right",children:d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsxs(lt,{variant:"outline",size:"sm",onClick:()=>p(m),children:[d.jsx(ate,{className:"h-4 w-4 mr-1"}),"Edit"]}),d.jsxs(lt,{variant:"outline",size:"sm",onClick:()=>f(m.id),className:"text-destructive hover:bg-destructive/10 hover:text-destructive",children:[d.jsx(su,{className:"h-4 w-4 mr-1"}),"Archive"]})]})})]},m.id)})})]})})]})};function c_({className:e,...t}){return d.jsx("div",{className:`animate-pulse bg-gray-200 dark:bg-gray-700 rounded-md ${e||""}`,...t})}const $f=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Ke("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));$f.displayName="Card";const zf=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Ke("flex flex-col space-y-1.5 p-6",e),...t}));zf.displayName="CardHeader";const Uf=g.forwardRef(({className:e,...t},r)=>d.jsx("h3",{ref:r,className:Ke("text-2xl font-semibold leading-none tracking-tight",e),...t}));Uf.displayName="CardTitle";const nde=g.forwardRef(({className:e,...t},r)=>d.jsx("p",{ref:r,className:Ke("text-sm text-muted-foreground",e),...t}));nde.displayName="CardDescription";const qf=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Ke("p-6 pt-0",e),...t}));qf.displayName="CardContent";const sde=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Ke("flex items-center p-6 pt-0",e),...t}));sde.displayName="CardFooter";const ide=ue.lazy(()=>gh(()=>import("./PriceManager-DsbB1g1r-BCZIDD7g.js"),__vite__mapDeps([0,1]))),ode=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(c_,{className:"h-9 w-32"}),d.jsx(c_,{className:"h-9 w-24"})]}),d.jsx("div",{className:"space-y-2",children:[...Array(5)].map((e,t)=>d.jsx(c_,{className:"h-12 w-full"},t))})]}),ade=()=>d.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Store Management"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage your store's products, pricing, and customer purchases"})]}),d.jsxs(lne,{defaultValue:"products",className:"w-full space-y-6",children:[d.jsxs(v$,{className:"grid w-full md:w-[400px] grid-cols-2",children:[d.jsx(Mf,{value:"products",children:"Products"}),d.jsx(Mf,{value:"prices",children:"Pricing"}),d.jsx(Mf,{value:"purchases",children:"Purchases"}),d.jsx(Mf,{value:"analytics",children:"Analytics"})]}),d.jsx(If,{value:"products",className:"space-y-4",children:d.jsxs($f,{children:[d.jsx(zf,{children:d.jsx(Uf,{children:"Product Catalog"})}),d.jsx(qf,{children:d.jsx(rde,{})})]})}),d.jsx(If,{value:"prices",className:"space-y-4",children:d.jsxs($f,{children:[d.jsx(zf,{children:d.jsx(Uf,{children:"Pricing & Plans"})}),d.jsx(qf,{children:d.jsx(g.Suspense,{fallback:d.jsx(ode,{}),children:d.jsx(ide,{})})})]})}),d.jsx(If,{value:"purchases",className:"space-y-4",children:d.jsxs($f,{children:[d.jsx(zf,{children:d.jsx(Uf,{children:"Purchase History"})}),d.jsx(qf,{children:d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-muted-foreground",children:[d.jsx("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}),d.jsx("path",{d:"M3 6h18"}),d.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]})}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"Purchase History"}),d.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"View and manage customer purchases, refunds, and order history."})]})})]})}),d.jsx(If,{value:"analytics",className:"space-y-4",children:d.jsxs($f,{children:[d.jsx(zf,{children:d.jsx(Uf,{children:"Store Analytics"})}),d.jsx(qf,{children:d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-muted-foreground",children:[d.jsx("path",{d:"M3 3v18h18"}),d.jsx("path",{d:"m19 9-5 5-4-4-3 3"})]})}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sales Analytics"}),d.jsx("p",{className:"text-sm text-muted-foreground max-w-md mb-4",children:"View detailed analytics and reports about your store's performance."}),d.jsx(lt,{disabled:!0,children:"Coming Soon"})]})})]})})]})]}),lde=async()=>{const{data:e,error:t}=await le.from("works").select("*").order("order_in_parent",{ascending:!0});if(t)throw new Error(t.message);return e},cde=async e=>{if(!e)return[];const{data:t,error:r}=await le.from("purchases").select(`
      id,
      user_id,
      product_id,
      purchased_at,
      status,
      products (
        name,
        description,
        product_type,
        work_id
      )
    `).eq("user_id",e);if(r)throw new Error(r.message);return t.map(n=>{var s,i,o,a;return{id:n.id,user_id:n.user_id,product_id:n.product_id,purchased_at:n.purchased_at,status:n.status,product_title:((s=n.products)==null?void 0:s.name)||"Unknown Product",product_description:(i=n.products)==null?void 0:i.description,product_type:((o=n.products)==null?void 0:o.product_type)||"single_issue",work_id:(a=n.products)==null?void 0:a.work_id}})},ude=async(e,t)=>{if(!e||!t)return null;const{data:r,error:n}=await le.from("user_ratings").select("rating").eq("user_id",e).eq("work_id",t).single();if(n&&n.code!=="PGRST116")throw new Error(n.message);return r?r.rating:null},dde=async(e,t,r)=>{const{data:n,error:s}=await le.from("user_ratings").upsert({user_id:e,work_id:t,rating:r},{onConflict:"user_id,work_id"}).select();if(s)throw new Error(s.message);return n[0]},hde=({work:e,userLibraryItem:t,queryClient:r})=>{var n,s;const{user:i}=rx(),[o,a]=g.useState(null),[l,c]=g.useState(!1),[u,h]=g.useState(!1),{data:f}=hr({queryKey:["userRating",i==null?void 0:i.id,e.id],queryFn:()=>ude((i==null?void 0:i.id)||"",e.id),enabled:!!(i!=null&&i.id)});g.useEffect(()=>{f!==void 0&&a(f)},[f]);const p=Gt({mutationFn:({userId:x,workId:w,rating:_})=>dde(x,w,_),onSuccess:()=>{r.invalidateQueries({queryKey:["userRating",i==null?void 0:i.id,e.id]}),r.invalidateQueries({queryKey:["allWorks"]})},onError:x=>{alert(`Error submitting rating: ${x.message}`)}}),v=x=>{if(!i){alert("Please log in to submit a rating.");return}i.id&&p.mutate({userId:i.id,workId:e.id,rating:x})},m=e.word_count&&e.target_word_count?Math.min(100,Math.round(e.word_count/e.target_word_count*100)):e.progress_percentage||0,b="S. Azar";return d.jsxs("article",{className:"book-card","data-book-id":e.id,"aria-label":`Book card: ${e.title} by ${b}`,children:[d.jsxs("div",{className:"book-main",children:[d.jsx("div",{className:"cover",role:"img","aria-label":`Book cover: ${e.title} by ${b}`,style:{background:e.cover_image_url?`url(${e.cover_image_url}) center center / cover`:"var(--teal)"},children:!e.cover_image_url&&d.jsxs("div",{className:"cover-content",children:[d.jsx("div",{className:"cover-title",children:e.title}),d.jsx("div",{className:"cover-author",children:b})]})}),d.jsxs("div",{className:"details",children:[d.jsxs("div",{className:"book-header",children:[d.jsx("h3",{className:"book-title",children:e.title}),d.jsx("div",{className:"author",children:b})]}),(e.release_date||e.estimated_release)&&d.jsx("div",{className:"release-info text-sm text-muted mt-1",children:e.release_date?d.jsxs("span",{children:["Released: ",new Date(e.release_date).toLocaleDateString()]}):d.jsxs("span",{children:["Estimated Release: ",e.estimated_release]})}),(e.status==="planning"||e.status==="writing"||e.status==="editing")&&d.jsxs("div",{className:"progress","aria-label":"Author writing progress",children:[d.jsxs("div",{className:"progress-head",children:[d.jsxs("span",{children:[m,"% written"]}),d.jsxs("span",{"aria-live":"polite",children:[m,"%"]})]}),d.jsx("div",{className:"bar",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":m,"aria-label":"Author writing progress",children:d.jsx("span",{style:{width:`${m}%`}})})]}),d.jsx("p",{className:"desc",children:e.description||"No description available."}),d.jsxs("div",{className:"rating","aria-label":`Rating ${((n=e.rating)==null?void 0:n.toFixed(1))||"0.0"} out of 5 based on ${e.reviews_count||0} reviews`,children:[d.jsx("span",{className:"stars","aria-hidden":"true",children:[...Array(5)].map((x,w)=>d.jsx(U2,{className:`star ${w<(o!==null?o:Math.floor(e.rating||0))?"filled":""}`,onClick:()=>v(w+1),onMouseEnter:()=>i&&a(w+1),onMouseLeave:()=>i&&a(f!==null?f:null),style:{cursor:i?"pointer":"default"}},w))}),d.jsx("span",{children:((s=e.rating)==null?void 0:s.toFixed(1))||"0.0"}),d.jsxs("small",{children:["• ",e.reviews_count||0," reviews"]})]}),d.jsx("div",{className:"actions",children:t?d.jsx(d.Fragment,{children:d.jsx("button",{className:"btn primary",children:"Open"})}):d.jsx("button",{className:"btn primary",children:"Buy now"})}),e.sample_content&&d.jsxs("button",{className:"sample-toggle-btn",onClick:()=>c(!l),"aria-expanded":l,children:[d.jsx("span",{children:"Read Sample"}),d.jsx("svg",{className:`toggle-arrow ${l?"expanded":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d.jsx("polyline",{points:"6,9 12,15 18,9"})})]})]})]}),l&&e.sample_content&&d.jsxs("div",{className:"sample-card expanded",children:[d.jsx("div",{className:"sample-header",children:d.jsxs("h4",{children:['Sample from "',e.title,'"']})}),d.jsx("div",{className:"sample-excerpt",children:d.jsx("p",{children:e.sample_content})}),d.jsx("div",{className:"sample-actions",children:t?d.jsx("button",{className:"continue-btn",children:"Continue reading"}):d.jsx("button",{className:"buy-btn",children:"Buy now"})})]})]})},fde=()=>{const{user:e}=rx(),t=ua(),{data:r,isLoading:n,isError:s,error:i}=hr({queryKey:["allWorks"],queryFn:lde}),{data:o,isLoading:a,isError:l,error:c}=hr({queryKey:["userLibraryItems",e==null?void 0:e.id],queryFn:()=>cde((e==null?void 0:e.id)||""),enabled:!!(e!=null&&e.id)}),[u,h]=g.useState(!0),[f,p]=g.useState("All"),[v,m]=g.useState("All"),b=(r==null?void 0:r.filter(x=>{const w=f==="All"||x.type===f.toLowerCase(),_=v==="All"||x.status===v.toLowerCase();return w&&_}))||[];return n||a?d.jsx("div",{className:"text-center py-8 text-text-light",children:"Loading library..."}):s?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading works: ",i==null?void 0:i.message]}):l?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading user library: ",c==null?void 0:c.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8 bg-background-dark text-text-light min-h-screen",children:[d.jsx("h1",{className:"text-4xl font-bold text-text-light mb-6",children:"Your Library"}),u&&d.jsxs("div",{className:"bg-blue-900 bg-opacity-30 border border-blue-700 text-blue-200 p-4 rounded-md mb-6 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(HF,{size:20}),d.jsx("p",{className:"text-sm",children:"Files may include a purchaser-specific watermark. Download limits: 5 per format."})]}),d.jsx("button",{onClick:()=>h(!1),className:"text-blue-200 hover:text-white",children:d.jsx($2,{size:20})})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.jsx("button",{onClick:()=>p("All"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="All"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"All"}),d.jsx("button",{onClick:()=>p("Book"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Book"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Books"}),d.jsx("button",{onClick:()=>p("Volume"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Volume"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Volumes"}),d.jsx("button",{onClick:()=>p("Saga"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Saga"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Sagas"}),d.jsx("button",{onClick:()=>p("Arc"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Arc"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Arcs"}),d.jsx("button",{onClick:()=>p("Issue"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Issue"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Issues"}),d.jsxs("select",{value:v,onChange:x=>m(x.target.value),className:"px-3 py-2 rounded-full text-sm font-semibold bg-gray-700 text-gray-300 hover:bg-gray-600",children:[d.jsx("option",{value:"All",children:"All Status"}),d.jsx("option",{value:"Published",children:"Published"}),d.jsx("option",{value:"Planning",children:"Planning"}),d.jsx("option",{value:"Writing",children:"Writing"}),d.jsx("option",{value:"Editing",children:"Editing"}),d.jsx("option",{value:"On_hold",children:"On Hold"})]})]}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:d.jsx("div",{className:"lg:col-span-3",children:d.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8",children:b.map(x=>{const w=o==null?void 0:o.find(_=>_.work_id===x.id);return d.jsx(hde,{work:x,userLibraryItem:w,queryClient:t},x.id)})})})})]})};var H8="basil",pde=function(e){return e===3?"v3":e},K8="https://js.stripe.com",mde="".concat(K8,"/").concat(H8,"/stripe.js"),gde=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,yde=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,vde=function(e){return gde.test(e)||yde.test(e)},bde=function(){for(var e=document.querySelectorAll('script[src^="'.concat(K8,'"]')),t=0;t<e.length;t++){var r=e[t];if(vde(r.src))return r}return null},b4=function(e){var t="",r=document.createElement("script");r.src="".concat(mde).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},xde=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})},vf=null,Qg=null,Xg=null,wde=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},_de=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},jde=function(e){return vf!==null?vf:(vf=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var n=bde();if(!(n&&e)){if(!n)n=b4(e);else if(n&&Xg!==null&&Qg!==null){var s;n.removeEventListener("load",Xg),n.removeEventListener("error",Qg),(s=n.parentNode)===null||s===void 0||s.removeChild(n),n=b4(e)}}Xg=_de(t,r),Qg=wde(r),n.addEventListener("load",Xg),n.addEventListener("error",Qg)}catch(i){r(i);return}}),vf.catch(function(t){return vf=null,Promise.reject(t)}))},kde=function(e,t,r){if(e===null)return null;var n=t[0],s=n.match(/^pk_test/),i=pde(e.version),o=H8;s&&i!==o&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(o,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return xde(a,r),a},ey,Y8=!1,G8=function(){return ey||(ey=jde(null).catch(function(e){return ey=null,Promise.reject(e)}),ey)};Promise.resolve().then(function(){return G8()}).catch(function(e){Y8||console.warn(e)});var Sde=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Y8=!0;var n=Date.now();return G8().then(function(s){return kde(s,t,n)})},Z8={exports:{}},u_,x4;function Nde(){if(x4)return u_;x4=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return u_=e,u_}var d_,w4;function Cde(){if(w4)return d_;w4=1;var e=Nde();function t(){}function r(){}return r.resetWarningCache=t,d_=function(){function n(o,a,l,c,u,h){if(h!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},d_}Z8.exports=Cde()();var Ede=Z8.exports;const zt=wi(Ede);function _4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function j4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_4(Object(r),!0).forEach(function(n){J8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qy(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qy=function(t){return typeof t}:qy=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qy(e)}function J8(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tde(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Ade(e,t){if(e==null)return{};var r=Tde(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ode(e,t){return Pde(e)||Rde(e,t)||Dde(e,t)||Mde()}function Pde(e){if(Array.isArray(e))return e}function Rde(e,t){var r=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(r!=null){var n=[],s=!0,i=!1,o,a;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));s=!0);}catch(l){i=!0,a=l}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw a}}return n}}function Dde(e,t){if(e){if(typeof e=="string")return k4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k4(e,t)}}function k4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Hn=function(e,t,r){var n=!!r,s=ue.useRef(r);ue.useEffect(function(){s.current=r},[r]),ue.useEffect(function(){if(!n||!e)return function(){};var i=function(){s.current&&s.current.apply(s,arguments)};return e.on(t,i),function(){e.off(t,i)}},[n,t,e,s])},Ide=function(e){var t=ue.useRef(e);return ue.useEffect(function(){t.current=e},[e]),t.current},Ov=function(e){return e!==null&&qy(e)==="object"},S4="[object Object]",Lde=function e(t,r){if(!Ov(t)||!Ov(r))return t===r;var n=Array.isArray(t),s=Array.isArray(r);if(n!==s)return!1;var i=Object.prototype.toString.call(t)===S4,o=Object.prototype.toString.call(r)===S4;if(i!==o)return!1;if(!i&&!n)return t===r;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(var c={},u=0;u<a.length;u+=1)c[a[u]]=!0;for(var h=0;h<l.length;h+=1)c[l[h]]=!0;var f=Object.keys(c);if(f.length!==a.length)return!1;var p=t,v=r,m=function(b){return e(p[b],v[b])};return f.every(m)},Fde=function(e,t,r){return Ov(e)?Object.keys(e).reduce(function(n,s){var i=!Ov(t)||!Lde(e[s],t[s]);return r.includes(s)?(i&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),n):i?j4(j4({},n||{}),{},J8({},s,e[s])):n},null):null},Q8=ue.createContext(null);Q8.displayName="ElementsContext";var $de=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e};zt.any,zt.object;zt.func.isRequired;var X8=ue.createContext(null);X8.displayName="CheckoutSdkContext";var zde=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},Ude=ue.createContext(null);Ude.displayName="CheckoutContext";zt.any,zt.shape({fetchClientSecret:zt.func.isRequired,elementsOptions:zt.object}).isRequired;var N4=function(e){var t=ue.useContext(X8),r=ue.useContext(Q8);if(t&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?zde(t,e):$de(r,e)},qde=["mode"],Bde=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},sr=function(e,t){var r="".concat(Bde(e),"Element"),n=function(o){var a=o.id,l=o.className,c=o.options,u=c===void 0?{}:c,h=o.onBlur,f=o.onFocus,p=o.onReady,v=o.onChange,m=o.onEscape,b=o.onClick,x=o.onLoadError,w=o.onLoaderStart,_=o.onNetworksChange,j=o.onConfirm,k=o.onCancel,S=o.onShippingAddressChange,E=o.onShippingRateChange,C=N4("mounts <".concat(r,">")),T="elements"in C?C.elements:null,O="checkoutSdk"in C?C.checkoutSdk:null,P=ue.useState(null),D=Ode(P,2),R=D[0],$=D[1],F=ue.useRef(null),V=ue.useRef(null);Hn(R,"blur",h),Hn(R,"focus",f),Hn(R,"escape",m),Hn(R,"click",b),Hn(R,"loaderror",x),Hn(R,"loaderstart",w),Hn(R,"networkschange",_),Hn(R,"confirm",j),Hn(R,"cancel",k),Hn(R,"shippingaddresschange",S),Hn(R,"shippingratechange",E),Hn(R,"change",v);var q;p&&(e==="expressCheckout"?q=p:q=function(){p(R)}),Hn(R,"ready",q),ue.useLayoutEffect(function(){if(F.current===null&&V.current!==null&&(T||O)){var Y=null;if(O)switch(e){case"payment":Y=O.createPaymentElement(u);break;case"address":if("mode"in u){var L=u.mode,X=Ade(u,qde);if(L==="shipping")Y=O.createShippingAddressElement(X);else if(L==="billing")Y=O.createBillingAddressElement(X);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":Y=O.createExpressCheckoutElement(u);break;case"currencySelector":Y=O.createCurrencySelectorElement();break;case"taxId":Y=O.createTaxIdElement(u);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else T&&(Y=T.create(e,u));F.current=Y,$(Y),Y&&Y.mount(V.current)}},[T,O,u]);var K=Ide(u);return ue.useEffect(function(){if(F.current){var Y=Fde(u,K,["paymentRequest"]);Y&&"update"in F.current&&F.current.update(Y)}},[u,K]),ue.useLayoutEffect(function(){return function(){if(F.current&&typeof F.current.destroy=="function")try{F.current.destroy(),F.current=null}catch{}}},[]),ue.createElement("div",{id:a,className:l,ref:V})},s=function(o){N4("mounts <".concat(r,">"));var a=o.id,l=o.className;return ue.createElement("div",{id:a,className:l})},i=t?s:n;return i.propTypes={id:zt.string,className:zt.string,onChange:zt.func,onBlur:zt.func,onFocus:zt.func,onReady:zt.func,onEscape:zt.func,onClick:zt.func,onLoadError:zt.func,onLoaderStart:zt.func,onNetworksChange:zt.func,onConfirm:zt.func,onCancel:zt.func,onShippingAddressChange:zt.func,onShippingRateChange:zt.func,options:zt.object},i.displayName=r,i.__elementType=e,i},ir=typeof window>"u",Wde=ue.createContext(null);Wde.displayName="EmbeddedCheckoutProviderContext";sr("auBankAccount",ir);sr("card",ir);sr("cardNumber",ir);sr("cardExpiry",ir);sr("cardCvc",ir);sr("fpxBank",ir);sr("iban",ir);sr("idealBank",ir);sr("p24Bank",ir);sr("epsBank",ir);sr("payment",ir);sr("expressCheckout",ir);sr("currencySelector",ir);sr("paymentRequestButton",ir);sr("linkAuthentication",ir);sr("address",ir);sr("shippingAddress",ir);sr("paymentMethodMessaging",ir);sr("affirmMessage",ir);sr("afterpayClearpayMessage",ir);sr("taxId",ir);Sde("pk_test_your_key_here");const ez=e=>d.jsx("div",{className:"max-w-md mx-auto bg-background-light rounded-2xl p-6 border border-border/30",children:d.jsxs("div",{className:"text-center",children:[d.jsx(fte,{className:"w-16 h-16 text-warning mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-bold text-text-light mb-2",children:"Stripe Not Configured"}),d.jsx("p",{className:"text-text-dark mb-4",children:"Please configure your Stripe publishable key in the environment variables to enable checkout functionality."}),d.jsx("div",{className:"bg-background/30 p-4 rounded-xl border border-border/30",children:d.jsx("p",{className:"text-sm text-text-dark font-mono",children:"VITE_STRIPE_PUBLISHABLE_KEY=pk_test_your_actual_key_here"})}),d.jsx("button",{onClick:e.onCancel,className:"mt-4 px-6 py-2 bg-secondary text-background rounded-xl hover:bg-secondary-dark transition-colors",children:"Close"})]})}),tz=g.createContext({});function Vde(e){const t=g.useRef(null);return t.current===null&&(t.current=e()),t.current}const gC=typeof window<"u",Hde=gC?g.useLayoutEffect:g.useEffect,yC=g.createContext(null);function vC(e,t){e.indexOf(t)===-1&&e.push(t)}function bC(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Zo=(e,t,r)=>r>t?t:r<e?e:r;let xC=()=>{};const Jo={},rz=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function nz(e){return typeof e=="object"&&e!==null}const sz=e=>/^0[^.\s]+$/u.test(e);function wC(e){let t;return()=>(t===void 0&&(t=e()),t)}const Cs=e=>e,Kde=(e,t)=>r=>t(e(r)),Dm=(...e)=>e.reduce(Kde),Fp=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class _C{constructor(){this.subscriptions=[]}add(t){return vC(this.subscriptions,t),()=>bC(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Yi=e=>e*1e3,Gi=e=>e/1e3;function iz(e,t){return t?e*(1e3/t):0}const oz=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Yde=1e-7,Gde=12;function Zde(e,t,r,n,s){let i,o,a=0;do o=t+(r-t)/2,i=oz(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>Yde&&++a<Gde);return o}function Mm(e,t,r,n){if(e===t&&r===n)return Cs;const s=i=>Zde(i,0,1,e,r);return i=>i===0||i===1?i:oz(s(i),t,n)}const az=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,lz=e=>t=>1-e(1-t),cz=Mm(.33,1.53,.69,.99),jC=lz(cz),uz=az(jC),dz=e=>(e*=2)<1?.5*jC(e):.5*(2-Math.pow(2,-10*(e-1))),kC=e=>1-Math.sin(Math.acos(e)),hz=lz(kC),fz=az(kC),Jde=Mm(.42,0,1,1),Qde=Mm(0,0,.58,1),pz=Mm(.42,0,.58,1),Xde=e=>Array.isArray(e)&&typeof e[0]!="number",mz=e=>Array.isArray(e)&&typeof e[0]=="number",ehe={linear:Cs,easeIn:Jde,easeInOut:pz,easeOut:Qde,circIn:kC,circInOut:fz,circOut:hz,backIn:jC,backInOut:uz,backOut:cz,anticipate:dz},the=e=>typeof e=="string",C4=e=>{if(mz(e)){xC(e.length===4);const[t,r,n,s]=e;return Mm(t,r,n,s)}else if(the(e))return ehe[e];return e},ty=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function rhe(e,t){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),e()),u(a)}const c={schedule:(u,h=!1,f=!1)=>{const p=f&&s?r:n;return h&&o.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(a=u,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,i&&(i=!1,c.process(u))}};return c}const nhe=40;function gz(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=ty.reduce((x,w)=>(x[w]=rhe(i),x),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:f,render:p,postRender:v}=o,m=()=>{const x=Jo.useManualTiming?s.timestamp:performance.now();r=!1,Jo.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(x-s.timestamp,nhe),1)),s.timestamp=x,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),h.process(s),f.process(s),p.process(s),v.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(m))},b=()=>{r=!0,n=!0,s.isProcessing||e(m)};return{schedule:ty.reduce((x,w)=>{const _=o[w];return x[w]=(j,k=!1,S=!1)=>(r||b(),_.schedule(j,k,S)),x},{}),cancel:x=>{for(let w=0;w<ty.length;w++)o[ty[w]].cancel(x)},state:s,steps:o}}const{schedule:Dt,cancel:hl,state:Wr,steps:h_}=gz(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cs,!0);let By;function she(){By=void 0}const $n={now:()=>(By===void 0&&$n.set(Wr.isProcessing||Jo.useManualTiming?Wr.timestamp:performance.now()),By),set:e=>{By=e,queueMicrotask(she)}},yz=e=>t=>typeof t=="string"&&t.startsWith(e),SC=yz("--"),ihe=yz("var(--"),NC=e=>ihe(e)?ohe.test(e.split("/*")[0].trim()):!1,ohe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Nh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},$p={...Nh,transform:e=>Zo(0,1,e)},ry={...Nh,default:1},up=e=>Math.round(e*1e5)/1e5,CC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ahe(e){return e==null}const lhe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,EC=(e,t)=>r=>!!(typeof r=="string"&&lhe.test(r)&&r.startsWith(e)||t&&!ahe(r)&&Object.prototype.hasOwnProperty.call(r,t)),vz=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,a]=n.match(CC);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},che=e=>Zo(0,255,e),f_={...Nh,transform:e=>Math.round(che(e))},pc={test:EC("rgb","red"),parse:vz("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+f_.transform(e)+", "+f_.transform(t)+", "+f_.transform(r)+", "+up($p.transform(n))+")"};function uhe(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const yk={test:EC("#"),parse:uhe,transform:pc.transform},Im=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ma=Im("deg"),Zi=Im("%"),$e=Im("px"),dhe=Im("vh"),hhe=Im("vw"),E4={...Zi,parse:e=>Zi.parse(e)/100,transform:e=>Zi.transform(e*100)},ad={test:EC("hsl","hue"),parse:vz("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Zi.transform(up(t))+", "+Zi.transform(up(r))+", "+up($p.transform(n))+")"},ur={test:e=>pc.test(e)||yk.test(e)||ad.test(e),parse:e=>pc.test(e)?pc.parse(e):ad.test(e)?ad.parse(e):yk.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?pc.transform(e):ad.transform(e),getAnimatableNone:e=>{const t=ur.parse(e);return t.alpha=0,ur.transform(t)}},fhe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function phe(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(CC))==null?void 0:t.length)||0)+(((r=e.match(fhe))==null?void 0:r.length)||0)>0}const bz="number",xz="color",mhe="var",ghe="var(",T4="${}",yhe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zp(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const o=t.replace(yhe,a=>(ur.test(a)?(n.color.push(i),s.push(xz),r.push(ur.parse(a))):a.startsWith(ghe)?(n.var.push(i),s.push(mhe),r.push(a)):(n.number.push(i),s.push(bz),r.push(parseFloat(a))),++i,T4)).split(T4);return{values:r,split:o,indexes:n,types:s}}function wz(e){return zp(e).values}function _z(e){const{split:t,types:r}=zp(e),n=t.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],s[o]!==void 0){const a=r[o];a===bz?i+=up(s[o]):a===xz?i+=ur.transform(s[o]):i+=s[o]}return i}}const vhe=e=>typeof e=="number"?0:ur.test(e)?ur.getAnimatableNone(e):e;function bhe(e){const t=wz(e);return _z(e)(t.map(vhe))}const fl={test:phe,parse:wz,createTransformer:_z,getAnimatableNone:bhe};function p_(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function xhe({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const a=r<.5?r*(1+t):r+t-r*t,l=2*r-a;s=p_(l,a,e+1/3),i=p_(l,a,e),o=p_(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Pv(e,t){return r=>r>0?t:e}const Ut=(e,t,r)=>e+(t-e)*r,m_=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},whe=[yk,pc,ad],_he=e=>whe.find(t=>t.test(e));function A4(e){const t=_he(e);if(!t)return!1;let r=t.parse(e);return t===ad&&(r=xhe(r)),r}const O4=(e,t)=>{const r=A4(e),n=A4(t);if(!r||!n)return Pv(e,t);const s={...r};return i=>(s.red=m_(r.red,n.red,i),s.green=m_(r.green,n.green,i),s.blue=m_(r.blue,n.blue,i),s.alpha=Ut(r.alpha,n.alpha,i),pc.transform(s))},vk=new Set(["none","hidden"]);function jhe(e,t){return vk.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function khe(e,t){return r=>Ut(e,t,r)}function TC(e){return typeof e=="number"?khe:typeof e=="string"?NC(e)?Pv:ur.test(e)?O4:Che:Array.isArray(e)?jz:typeof e=="object"?ur.test(e)?O4:She:Pv}function jz(e,t){const r=[...e],n=r.length,s=e.map((i,o)=>TC(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function She(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=TC(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function Nhe(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][n[i]],a=e.values[o]??0;r[s]=a,n[i]++}return r}const Che=(e,t)=>{const r=fl.createTransformer(t),n=zp(e),s=zp(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?vk.has(e)&&!s.values.length||vk.has(t)&&!n.values.length?jhe(e,t):Dm(jz(Nhe(n,s),s.values),r):Pv(e,t)};function kz(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Ut(e,t,r):TC(e)(e,t)}const Ehe=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Dt.update(t,r),stop:()=>hl(t),now:()=>Wr.isProcessing?Wr.timestamp:$n.now()}},Sz=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Rv=2e4;function AC(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Rv;)t+=r,n=e.next(t);return t>=Rv?1/0:t}function The(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(AC(n),Rv);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:Gi(s)}}const Ahe=5;function Nz(e,t,r){const n=Math.max(t-Ahe,0);return iz(r-e(n),t-n)}const Yt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},g_=.001;function Ohe({duration:e=Yt.duration,bounce:t=Yt.bounce,velocity:r=Yt.velocity,mass:n=Yt.mass}){let s,i,o=1-t;o=Zo(Yt.minDamping,Yt.maxDamping,o),e=Zo(Yt.minDuration,Yt.maxDuration,Gi(e)),o<1?(s=c=>{const u=c*o,h=u*e,f=u-r,p=bk(c,o),v=Math.exp(-h);return g_-f/p*v},i=c=>{const u=c*o*e,h=u*r+r,f=Math.pow(o,2)*Math.pow(c,2)*e,p=Math.exp(-u),v=bk(Math.pow(c,2),o);return(-s(c)+g_>0?-1:1)*((h-f)*p)/v}):(s=c=>{const u=Math.exp(-c*e),h=(c-r)*e+1;return-g_+u*h},i=c=>{const u=Math.exp(-c*e),h=(r-c)*(e*e);return u*h});const a=5/e,l=Rhe(s,i,a);if(e=Yi(e),isNaN(l))return{stiffness:Yt.stiffness,damping:Yt.damping,duration:e};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:e}}}const Phe=12;function Rhe(e,t,r){let n=r;for(let s=1;s<Phe;s++)n=n-e(n)/t(n);return n}function bk(e,t){return e*Math.sqrt(1-t*t)}const Dhe=["duration","bounce"],Mhe=["stiffness","damping","mass"];function P4(e,t){return t.some(r=>e[r]!==void 0)}function Ihe(e){let t={velocity:Yt.velocity,stiffness:Yt.stiffness,damping:Yt.damping,mass:Yt.mass,isResolvedFromDuration:!1,...e};if(!P4(e,Mhe)&&P4(e,Dhe))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*Zo(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Yt.mass,stiffness:s,damping:i}}else{const r=Ohe(e);t={...t,...r,mass:Yt.mass},t.isResolvedFromDuration=!0}return t}function Dv(e=Yt.visualDuration,t=Yt.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=Ihe({...r,velocity:-Gi(r.velocity||0)}),v=f||0,m=c/(2*Math.sqrt(l*u)),b=o-i,x=Gi(Math.sqrt(l/u)),w=Math.abs(b)<5;n||(n=w?Yt.restSpeed.granular:Yt.restSpeed.default),s||(s=w?Yt.restDelta.granular:Yt.restDelta.default);let _;if(m<1){const k=bk(x,m);_=S=>{const E=Math.exp(-m*x*S);return o-E*((v+m*x*b)/k*Math.sin(k*S)+b*Math.cos(k*S))}}else if(m===1)_=k=>o-Math.exp(-x*k)*(b+(v+x*b)*k);else{const k=x*Math.sqrt(m*m-1);_=S=>{const E=Math.exp(-m*x*S),C=Math.min(k*S,300);return o-E*((v+m*x*b)*Math.sinh(C)+k*b*Math.cosh(C))/k}}const j={calculatedDuration:p&&h||null,next:k=>{const S=_(k);if(p)a.done=k>=h;else{let E=k===0?v:0;m<1&&(E=k===0?Yi(v):Nz(_,k,S));const C=Math.abs(E)<=n,T=Math.abs(o-S)<=s;a.done=C&&T}return a.value=a.done?o:S,a},toString:()=>{const k=Math.min(AC(j),Rv),S=Sz(E=>j.next(k*E).value,k,30);return k+"ms "+S},toTransition:()=>{}};return j}Dv.applyToOptions=e=>{const t=The(e,100,Dv);return e.ease=t.ease,e.duration=Yi(t.duration),e.type="keyframes",e};function xk({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},p=C=>a!==void 0&&C<a||l!==void 0&&C>l,v=C=>a===void 0?l:l===void 0||Math.abs(a-C)<Math.abs(l-C)?a:l;let m=r*t;const b=h+m,x=o===void 0?b:o(b);x!==b&&(m=x-h);const w=C=>-m*Math.exp(-C/n),_=C=>x+w(C),j=C=>{const T=w(C),O=_(C);f.done=Math.abs(T)<=c,f.value=f.done?x:O};let k,S;const E=C=>{p(f.value)&&(k=C,S=Dv({keyframes:[f.value,v(f.value)],velocity:Nz(_,C,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:C=>{let T=!1;return!S&&k===void 0&&(T=!0,j(C),E(C)),k!==void 0&&C>=k?S.next(C-k):(!T&&j(C),f)}}}function Lhe(e,t,r){const n=[],s=r||Jo.mix||kz,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Cs:t;a=Dm(l,a)}n.push(a)}return n}function Fhe(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(xC(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=Lhe(t,n,s),l=a.length,c=u=>{if(o&&u<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const f=Fp(e[h],e[h+1],u);return a[h](f)};return r?u=>c(Zo(e[0],e[i-1],u)):c}function $he(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Fp(0,t,n);e.push(Ut(r,1,s))}}function zhe(e){const t=[0];return $he(t,e.length-1),t}function Uhe(e,t){return e.map(r=>r*t)}function qhe(e,t){return e.map(()=>t||pz).splice(0,e.length-1)}function dp({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=Xde(n)?n.map(C4):C4(n),i={done:!1,value:t[0]},o=Uhe(r&&r.length===t.length?r:zhe(t),e),a=Fhe(o,t,{ease:Array.isArray(s)?s:qhe(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const Bhe=e=>e!==null;function OC(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(Bhe),o=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!o||n===void 0?i[o]:n}const Whe={decay:xk,inertia:xk,tween:dp,keyframes:dp,spring:Dv};function Cz(e){typeof e.type=="string"&&(e.type=Whe[e.type])}class PC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const Vhe=e=>e/100;class RC extends PC{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,n;const{motionValue:s}=this.options;s&&s.updatedAt!==$n.now()&&this.tick($n.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(r=this.options).onStop)==null||n.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Cz(t);const{type:r=dp,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=r||dp;l!==dp&&typeof a[0]!="number"&&(this.mixKeyframes=Dm(Vhe,kz(a[0],a[1])),a=[0,100]);const c=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=AC(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=c}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:c=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:p,type:v,onUpdate:m,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const x=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,j=n;if(h){const C=Math.min(this.currentTime,s)/a;let T=Math.floor(C),O=C%1;!O&&C>=1&&(O=1),O===1&&T--,T=Math.min(T,h+1),T%2&&(f==="reverse"?(O=1-O,p&&(O-=p/a)):f==="mirror"&&(j=o)),_=Zo(0,1,O)*a}const k=w?{done:!1,value:u[0]}:j.next(_);i&&(k.value=i(k.value));let{done:S}=k;!w&&l!==null&&(S=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return E&&v!==xk&&(k.value=OC(u,this.options,b,this.speed)),m&&m(k.value),E&&this.finish(),k}then(t,r){return this.finished.then(t,r)}get duration(){return Gi(this.calculatedDuration)}get time(){return Gi(this.currentTime)}set time(t){var r;t=Yi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime($n.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Gi(this.currentTime))}play(){var t,r;if(this.isStopped)return;const{driver:n=Ehe,startTime:s}=this.options;this.driver||(this.driver=n(o=>this.tick(o))),(r=(t=this.options).onPlay)==null||r.call(t);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=s??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime($n.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function Hhe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const mc=e=>e*180/Math.PI,wk=e=>{const t=mc(Math.atan2(e[1],e[0]));return _k(t)},Khe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:wk,rotateZ:wk,skewX:e=>mc(Math.atan(e[1])),skewY:e=>mc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},_k=e=>(e=e%360,e<0&&(e+=360),e),R4=wk,D4=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),M4=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Yhe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:D4,scaleY:M4,scale:e=>(D4(e)+M4(e))/2,rotateX:e=>_k(mc(Math.atan2(e[6],e[5]))),rotateY:e=>_k(mc(Math.atan2(-e[2],e[0]))),rotateZ:R4,rotate:R4,skewX:e=>mc(Math.atan(e[4])),skewY:e=>mc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function jk(e){return e.includes("scale")?1:0}function kk(e,t){if(!e||e==="none")return jk(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=Yhe,s=r;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Khe,s=a}if(!s)return jk(t);const i=n[t],o=s[1].split(",").map(Zhe);return typeof i=="function"?i(o):o[i]}const Ghe=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return kk(r,t)};function Zhe(e){return parseFloat(e.trim())}const Ch=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Eh=new Set(Ch),I4=e=>e===Nh||e===$e,Jhe=new Set(["x","y","z"]),Qhe=Ch.filter(e=>!Jhe.has(e));function Xhe(e){const t=[];return Qhe.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Ac={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>kk(t,"x"),y:(e,{transform:t})=>kk(t,"y")};Ac.translateX=Ac.x;Ac.translateY=Ac.y;const Oc=new Set;let Sk=!1,Nk=!1,Ck=!1;function Ez(){if(Nk){const e=Array.from(Oc).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=Xhe(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var a;(a=n.getValue(i))==null||a.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Nk=!1,Sk=!1,Oc.forEach(e=>e.complete(Ck)),Oc.clear()}function Tz(){Oc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Nk=!0)})}function efe(){Ck=!0,Tz(),Ez(),Ck=!1}class DC{constructor(t,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Oc.add(this),Sk||(Sk=!0,Dt.read(Tz),Dt.resolveKeyframes(Ez))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const a=n.readValue(r,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}Hhe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Oc.delete(this)}cancel(){this.state==="scheduled"&&(Oc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const tfe=e=>e.startsWith("--");function rfe(e,t,r){tfe(t)?e.style.setProperty(t,r):e.style[t]=r}const nfe=wC(()=>window.ScrollTimeline!==void 0),sfe={};function ife(e,t){const r=wC(e);return()=>sfe[t]??r()}const Az=ife(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Bf=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,L4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bf([0,.65,.55,1]),circOut:Bf([.55,0,1,.45]),backIn:Bf([.31,.01,.66,-.59]),backOut:Bf([.33,1.53,.69,.99])};function Oz(e,t){if(e)return typeof e=="function"?Az()?Sz(e,t):"ease-out":mz(e)?Bf(e):Array.isArray(e)?e.map(r=>Oz(r,t)||L4.easeOut):L4[e]}function ofe(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[t]:r};l&&(u.offset=l);const h=Oz(a,s);Array.isArray(h)&&(u.easing=h);const f={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(u,f)}function Pz(e){return typeof e=="function"&&"applyToOptions"in e}function afe({type:e,...t}){return Pz(e)&&Az()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class lfe extends PC{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,xC(typeof t.type!="string");const c=afe(t);this.animation=ofe(r,n,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=OC(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):rfe(r,n,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var t,r;const n=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Gi(Number(n))}get time(){return Gi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Yi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&nfe()?(this.animation.timeline=t,Cs):r(this)}}const Rz={anticipate:dz,backInOut:uz,circInOut:fz};function cfe(e){return e in Rz}function ufe(e){typeof e.ease=="string"&&cfe(e.ease)&&(e.ease=Rz[e.ease])}const F4=10;class dfe extends lfe{constructor(t){ufe(t),Cz(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const a=new RC({...o,autoplay:!1}),l=Yi(this.finishedTime??this.time);r.setWithVelocity(a.sample(l-F4).value,a.sample(l).value,F4),a.stop()}}const $4=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(fl.test(e)||e==="0")&&!e.startsWith("url("));function hfe(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function ffe(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=$4(s,t),a=$4(i,t);return!o||!a?!1:hfe(e)||(r==="spring"||Pz(r))&&n}function Ek(e){e.duration=0,e.type}const pfe=new Set(["opacity","clipPath","filter","transform"]),mfe=wC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function gfe(e){var t;const{motionValue:r,name:n,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!(((t=r==null?void 0:r.owner)==null?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=r.owner.getProps();return mfe()&&n&&pfe.has(n)&&(n!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}const yfe=40;class vfe extends PC{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...h}){var f;super(),this.stop=()=>{var m,b;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=$n.now();const p={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:c,element:u,...h},v=(u==null?void 0:u.KeyframeResolver)||DC;this.keyframeResolver=new v(a,(m,b,x)=>this.onKeyframesResolved(m,b,p,!x),l,c,u),(f=this.keyframeResolver)==null||f.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=n;this.resolvedAt=$n.now(),ffe(t,i,o,a)||((Jo.instantAnimations||!l)&&(u==null||u(OC(t,n,r))),t[0]=t[t.length-1],Ek(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>yfe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},f=!c&&gfe(h)?new dfe({...h,element:h.motionValue.owner.current}):new RC(h);f.finished.then(()=>this.notifyFinished()).catch(Cs),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),efe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const bfe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xfe(e){const t=bfe.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function Dz(e,t,r=1){const[n,s]=xfe(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return rz(o)?parseFloat(o):o}return NC(s)?Dz(s,t,r+1):s}function MC(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Mz=new Set(["width","height","top","left","right","bottom",...Ch]),wfe={test:e=>e==="auto",parse:e=>e},Iz=e=>t=>t.test(e),Lz=[Nh,$e,Zi,Ma,hhe,dhe,wfe],z4=e=>Lz.find(Iz(e));function _fe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||sz(e):!0}const jfe=new Set(["brightness","contrast","saturate","opacity"]);function kfe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(CC)||[];if(!n)return e;const s=r.replace(n,"");let i=jfe.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const Sfe=/\b([a-z-]*)\(.*?\)/gu,Tk={...fl,getAnimatableNone:e=>{const t=e.match(Sfe);return t?t.map(kfe).join(" "):e}},U4={...Nh,transform:Math.round},Nfe={rotate:Ma,rotateX:Ma,rotateY:Ma,rotateZ:Ma,scale:ry,scaleX:ry,scaleY:ry,scaleZ:ry,skew:Ma,skewX:Ma,skewY:Ma,distance:$e,translateX:$e,translateY:$e,translateZ:$e,x:$e,y:$e,z:$e,perspective:$e,transformPerspective:$e,opacity:$p,originX:E4,originY:E4,originZ:$e},IC={borderWidth:$e,borderTopWidth:$e,borderRightWidth:$e,borderBottomWidth:$e,borderLeftWidth:$e,borderRadius:$e,radius:$e,borderTopLeftRadius:$e,borderTopRightRadius:$e,borderBottomRightRadius:$e,borderBottomLeftRadius:$e,width:$e,maxWidth:$e,height:$e,maxHeight:$e,top:$e,right:$e,bottom:$e,left:$e,padding:$e,paddingTop:$e,paddingRight:$e,paddingBottom:$e,paddingLeft:$e,margin:$e,marginTop:$e,marginRight:$e,marginBottom:$e,marginLeft:$e,backgroundPositionX:$e,backgroundPositionY:$e,...Nfe,zIndex:U4,fillOpacity:$p,strokeOpacity:$p,numOctaves:U4},Cfe={...IC,color:ur,backgroundColor:ur,outlineColor:ur,fill:ur,stroke:ur,borderColor:ur,borderTopColor:ur,borderRightColor:ur,borderBottomColor:ur,borderLeftColor:ur,filter:Tk,WebkitFilter:Tk},Fz=e=>Cfe[e];function $z(e,t){let r=Fz(e);return r!==Tk&&(r=fl),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Efe=new Set(["auto","none","0"]);function Tfe(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!Efe.has(i)&&zp(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=$z(r,s)}class Afe extends DC{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),NC(c))){const u=Dz(c,r.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Mz.has(n)||t.length!==2)return;const[s,i]=t,o=z4(s),a=z4(i);if(o!==a)if(I4(o)&&I4(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Ac[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||_fe(t[s]))&&n.push(s);n.length&&Tfe(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ac[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Ac[n](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(t=this.removedTransforms)!=null&&t.length&&this.removedTransforms.forEach(([l,c])=>{r.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Ofe(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const zz=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Pfe(e){return nz(e)&&"offsetHeight"in e}const q4=30,Rfe=e=>!isNaN(parseFloat(e));class Dfe{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var s;const i=$n.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=$n.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Rfe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new _C);const n=this.events[t].add(r);return t==="change"?()=>{n(),Dt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=$n.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>q4)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,q4);return iz(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gd(e,t){return new Dfe(e,t)}const{schedule:LC}=gz(queueMicrotask,!1),Zs={x:!1,y:!1};function Uz(){return Zs.x||Zs.y}function Mfe(e){return e==="x"||e==="y"?Zs[e]?null:(Zs[e]=!0,()=>{Zs[e]=!1}):Zs.x||Zs.y?null:(Zs.x=Zs.y=!0,()=>{Zs.x=Zs.y=!1})}function qz(e,t){const r=Ofe(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function B4(e){return!(e.pointerType==="touch"||Uz())}function Ife(e,t,r={}){const[n,s,i]=qz(e,r),o=a=>{if(!B4(a))return;const{target:l}=a,c=t(l,a);if(typeof c!="function"||!l)return;const u=h=>{B4(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return n.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const Bz=(e,t)=>t?e===t?!0:Bz(e,t.parentElement):!1,FC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Lfe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Ffe(e){return Lfe.has(e.tagName)||e.tabIndex!==-1}const Wy=new WeakSet;function W4(e){return t=>{t.key==="Enter"&&e(t)}}function y_(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const $fe=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=W4(()=>{if(Wy.has(r))return;y_(r,"down");const s=W4(()=>{y_(r,"up")}),i=()=>y_(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function V4(e){return FC(e)&&!Uz()}function zfe(e,t,r={}){const[n,s,i]=qz(e,r),o=a=>{const l=a.currentTarget;if(!V4(a))return;Wy.add(l);const c=t(l,a),u=(p,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Wy.has(l)&&Wy.delete(l),V4(p)&&typeof c=="function"&&c(p,{success:v})},h=p=>{u(p,l===window||l===document||r.useGlobalTarget||Bz(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return n.forEach(a=>{(r.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),Pfe(a)&&(a.addEventListener("focus",l=>$fe(l,s)),!Ffe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function Wz(e){return nz(e)&&"ownerSVGElement"in e}function Ufe(e){return Wz(e)&&e.tagName==="svg"}const ln=e=>!!(e&&e.getVelocity),qfe=[...Lz,ur,fl],Bfe=e=>qfe.find(Iz(e)),Vz=g.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Wfe(e=!0){const t=g.useContext(yC);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=g.useId();g.useEffect(()=>{if(e)return s(i)},[e]);const o=g.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const Hz=g.createContext({strict:!1}),H4={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zd={};for(const e in H4)Zd[e]={isEnabled:t=>H4[e].some(r=>!!t[r])};function Vfe(e){for(const t in e)Zd[t]={...Zd[t],...e[t]}}const Hfe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mv(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Hfe.has(e)}let Kz=e=>!Mv(e);function Kfe(e){typeof e=="function"&&(Kz=t=>t.startsWith("on")?!Mv(t):e(t))}try{Kfe(require("@emotion/is-prop-valid").default)}catch{}function Yfe(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(Kz(s)||r===!0&&Mv(s)||!t&&!Mv(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const Ax=g.createContext({});function Ox(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Up(e){return typeof e=="string"||Array.isArray(e)}const $C=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zC=["initial",...$C];function Px(e){return Ox(e.animate)||zC.some(t=>Up(e[t]))}function Yz(e){return!!(Px(e)||e.variants)}function Gfe(e,t){if(Px(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Up(r)?r:void 0,animate:Up(n)?n:void 0}}return e.inherit!==!1?t:{}}function Zfe(e){const{initial:t,animate:r}=Gfe(e,g.useContext(Ax));return g.useMemo(()=>({initial:t,animate:r}),[K4(t),K4(r)])}function K4(e){return Array.isArray(e)?e.join(" "):e}const qp={};function Jfe(e){for(const t in e)qp[t]=e[t],SC(t)&&(qp[t].isCSSVariable=!0)}function Gz(e,{layout:t,layoutId:r}){return Eh.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!qp[e]||e==="opacity")}const Qfe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Xfe=Ch.length;function epe(e,t,r){let n="",s=!0;for(let i=0;i<Xfe;i++){const o=Ch[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||r){const c=zz(a,IC[o]);if(!l){s=!1;const u=Qfe[o]||o;n+=`${u}(${c}) `}r&&(t[o]=c)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function UC(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const c=t[l];if(Eh.has(l)){o=!0;continue}else if(SC(l)){s[l]=c;continue}else{const u=zz(c,IC[l]);l.startsWith("origin")?(a=!0,i[l]=u):n[l]=u}}if(t.transform||(o||r?n.transform=epe(t,e.transform,r):n.transform&&(n.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;n.transformOrigin=`${l} ${c} ${u}`}}const qC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Zz(e,t,r){for(const n in t)!ln(t[n])&&!Gz(n,r)&&(e[n]=t[n])}function tpe({transformTemplate:e},t){return g.useMemo(()=>{const r=qC();return UC(r,t,e),Object.assign({},r.vars,r.style)},[t])}function rpe(e,t){const r=e.style||{},n={};return Zz(n,r,e),Object.assign(n,tpe(e,t)),n}function npe(e,t){const r={},n=rpe(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const spe={offset:"stroke-dashoffset",array:"stroke-dasharray"},ipe={offset:"strokeDashoffset",array:"strokeDasharray"};function ope(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?spe:ipe;e[i.offset]=$e.transform(-n);const o=$e.transform(t),a=$e.transform(r);e[i.array]=`${o} ${a}`}function Jz(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,c,u){if(UC(e,a,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&ope(h,s,i,o,!1)}const Qz=()=>({...qC(),attrs:{}}),Xz=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ape(e,t,r,n){const s=g.useMemo(()=>{const i=Qz();return Jz(i,t,Xz(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Zz(i,e.style,e),s.style={...i,...s.style}}return s}const lpe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function BC(e){return typeof e!="string"||e.includes("-")?!1:!!(lpe.indexOf(e)>-1||/[A-Z]/u.test(e))}function cpe(e,t,r,{latestValues:n},s,i=!1){const o=(BC(e)?ape:npe)(t,n,s,e),a=Yfe(t,typeof e=="string",i),l=e!==g.Fragment?{...a,...o,ref:r}:{},{children:c}=t,u=g.useMemo(()=>ln(c)?c.get():c,[c]);return g.createElement(e,{...l,children:u})}function Y4(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function WC(e,t,r,n){if(typeof t=="function"){const[s,i]=Y4(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Y4(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function Vy(e){return ln(e)?e.get():e}function upe({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:dpe(r,n,s,e),renderState:t()}}function dpe(e,t,r,n){const s={},i=n(e,{});for(const f in i)s[f]=Vy(i[f]);let{initial:o,animate:a}=e;const l=Px(e),c=Yz(e);t&&c&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!Ox(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const v=WC(e,f[p]);if(v){const{transitionEnd:m,transition:b,...x}=v;for(const w in x){let _=x[w];if(Array.isArray(_)){const j=u?_.length-1:0;_=_[j]}_!==null&&(s[w]=_)}for(const w in m)s[w]=m[w]}}}return s}const eU=e=>(t,r)=>{const n=g.useContext(Ax),s=g.useContext(yC),i=()=>upe(e,t,n,s);return r?i():Vde(i)};function VC(e,t,r){var n;const{style:s}=e,i={};for(const o in s)(ln(s[o])||t.style&&ln(t.style[o])||Gz(o,e)||((n=r==null?void 0:r.getValue(o))==null?void 0:n.liveStyle)!==void 0)&&(i[o]=s[o]);return i}const hpe=eU({scrapeMotionValuesFromProps:VC,createRenderState:qC});function tU(e,t,r){const n=VC(e,t,r);for(const s in e)if(ln(e[s])||ln(t[s])){const i=Ch.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const fpe=eU({scrapeMotionValuesFromProps:tU,createRenderState:Qz}),ppe=Symbol.for("motionComponentSymbol");function ld(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function mpe(e,t,r){return g.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):ld(r)&&(r.current=n))},[t])}const HC=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),gpe="framerAppearId",rU="data-"+HC(gpe),nU=g.createContext({});function ype(e,t,r,n,s){var i,o;const{visualElement:a}=g.useContext(Ax),l=g.useContext(Hz),c=g.useContext(yC),u=g.useContext(Vz).reducedMotion,h=g.useRef(null);n=n||l.renderer,!h.current&&n&&(h.current=n(e,{visualState:t,parent:a,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,p=g.useContext(nU);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&vpe(h.current,r,s,p);const v=g.useRef(!1);g.useInsertionEffect(()=>{f&&v.current&&f.update(r,c)});const m=r[rU],b=g.useRef(!!m&&!((i=window.MotionHandoffIsComplete)!=null&&i.call(window,m))&&((o=window.MotionHasOptimisedAnimation)==null?void 0:o.call(window,m)));return Hde(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),g.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,m)}),b.current=!1),f.enteringChildren=void 0)}),f}function vpe(e,t,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:sU(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&ld(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:l,layoutRoot:c})}function sU(e){if(e)return e.options.allowProjection!==!1?e.projection:sU(e.parent)}function v_(e,{forwardMotionProps:t=!1}={},r,n){r&&Vfe(r);const s=BC(e)?fpe:hpe;function i(a,l){let c;const u={...g.useContext(Vz),...a,layoutId:bpe(a)},{isStatic:h}=u,f=Zfe(a),p=s(a,h);if(!h&&gC){xpe();const v=wpe(u);c=v.MeasureLayout,f.visualElement=ype(e,p,u,n,v.ProjectionNode)}return d.jsxs(Ax.Provider,{value:f,children:[c&&f.visualElement?d.jsx(c,{visualElement:f.visualElement,...u}):null,cpe(e,a,mpe(p,f.visualElement,l),p,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=g.forwardRef(i);return o[ppe]=e,o}function bpe({layoutId:e}){const t=g.useContext(tz).id;return t&&e!==void 0?t+"-"+e:e}function xpe(e,t){g.useContext(Hz).strict}function wpe(e){const{drag:t,layout:r}=Zd;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function _pe(e,t){if(typeof Proxy>"u")return v_;const r=new Map,n=(i,o)=>v_(i,o,e,t),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,v_(o,void 0,e,t)),r.get(o))})}function iU({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function jpe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function kpe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function b_(e){return e===void 0||e===1}function Ak({scale:e,scaleX:t,scaleY:r}){return!b_(e)||!b_(t)||!b_(r)}function ic(e){return Ak(e)||oU(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function oU(e){return G4(e.x)||G4(e.y)}function G4(e){return e&&e!=="0%"}function Iv(e,t,r){const n=e-r,s=t*n;return r+s}function Z4(e,t,r,n,s){return s!==void 0&&(e=Iv(e,s,n)),Iv(e,r,n)+t}function Ok(e,t=0,r=1,n,s){e.min=Z4(e.min,t,r,n,s),e.max=Z4(e.max,t,r,n,s)}function aU(e,{x:t,y:r}){Ok(e.x,t.translate,t.scale,t.originPoint),Ok(e.y,r.translate,r.scale,r.originPoint)}const J4=.999999999999,Q4=1.0000000000001;function Spe(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ud(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,aU(e,o)),n&&ic(i.latestValues)&&ud(e,i.latestValues))}t.x<Q4&&t.x>J4&&(t.x=1),t.y<Q4&&t.y>J4&&(t.y=1)}function cd(e,t){e.min=e.min+t,e.max=e.max+t}function X4(e,t,r,n,s=.5){const i=Ut(e.min,e.max,s);Ok(e,t,r,i,n)}function ud(e,t){X4(e.x,t.x,t.scaleX,t.scale,t.originX),X4(e.y,t.y,t.scaleY,t.scale,t.originY)}function lU(e,t){return iU(kpe(e.getBoundingClientRect(),t))}function Npe(e,t,r){const n=lU(e,r),{scroll:s}=t;return s&&(cd(n.x,s.offset.x),cd(n.y,s.offset.y)),n}const eR=()=>({translate:0,scale:1,origin:0,originPoint:0}),dd=()=>({x:eR(),y:eR()}),tR=()=>({min:0,max:0}),Qt=()=>({x:tR(),y:tR()}),Pk={current:null},cU={current:!1};function Cpe(){if(cU.current=!0,!!gC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Pk.current=e.matches;e.addEventListener("change",t),t()}else Pk.current=!1}const Epe=new WeakMap;function Tpe(e,t,r){for(const n in t){const s=t[n],i=r[n];if(ln(s))e.addValue(n,s);else if(ln(i))e.addValue(n,Gd(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(n);e.addValue(n,Gd(o!==void 0?o:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const rR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ape{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=DC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=$n.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Dt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Px(r),this.isVariantNode=Yz(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&ln(p)&&p.set(l[f])}}mount(t){var r;this.current=t,Epe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),cU.current||Cpe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Pk.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),hl(this.notifyUpdate),hl(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Eh.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Dt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Zd){const r=Zd[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<rR.length;n++){const s=rR[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Tpe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Gd(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(rz(n)||sz(n))?n=parseFloat(n):!Bfe(n)&&fl.test(r)&&(n=$z(t,r)),this.setBaseTarget(t,ln(n)?n.get():n)),ln(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=WC(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);o&&(s=o[t])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!ln(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new _C),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){LC.render(this.render)}}class uU extends Ape{constructor(){super(...arguments),this.KeyframeResolver=Afe}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ln(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function dU(e,{style:t,vars:r},n,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function Ope(e){return window.getComputedStyle(e)}class Ppe extends uU{constructor(){super(...arguments),this.type="html",this.renderInstance=dU}readValueFromInstance(t,r){var n;if(Eh.has(r))return(n=this.projection)!=null&&n.isProjecting?jk(r):Ghe(t,r);{const s=Ope(t),i=(SC(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return lU(t,r)}build(t,r,n){UC(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return VC(t,r,n)}}const hU=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Rpe(e,t,r,n){dU(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(hU.has(s)?s:HC(s),t.attrs[s])}class Dpe extends uU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qt}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Eh.has(r)){const n=Fz(r);return n&&n.default||0}return r=hU.has(r)?r:HC(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return tU(t,r,n)}build(t,r,n){Jz(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){Rpe(t,r,n,s)}mount(t){this.isSVGTag=Xz(t.tagName),super.mount(t)}}const Mpe=(e,t)=>BC(e)?new Dpe(t):new Ppe(t,{allowProjection:e!==g.Fragment});function xd(e,t,r){const n=e.getProps();return WC(n,t,r!==void 0?r:n.custom,e)}const Rk=e=>Array.isArray(e);function Ipe(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Gd(r))}function Lpe(e){return Rk(e)?e[e.length-1]||0:e}function Fpe(e,t){const r=xd(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const a=Lpe(i[o]);Ipe(e,o,a)}}function $pe(e){return!!(ln(e)&&e.add)}function Dk(e,t){const r=e.getValue("willChange");if($pe(r))return r.add(t);if(!r&&Jo.WillChange){const n=new Jo.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function fU(e){return e.props[rU]}const zpe=e=>e!==null;function Upe(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(zpe),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}const qpe={type:"spring",stiffness:500,damping:25,restSpeed:10},Bpe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Wpe={type:"keyframes",duration:.8},Vpe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Hpe=(e,{keyframes:t})=>t.length>2?Wpe:Eh.has(e)?e.startsWith("scale")?Bpe(t[1]):qpe:Vpe;function Kpe({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const KC=(e,t,r,n={},s,i)=>o=>{const a=MC(n,e)||{},l=a.delay||n.delay||0;let{elapsed:c=0}=n;c=c-Yi(l);const u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};Kpe(a)||Object.assign(u,Hpe(e,u)),u.duration&&(u.duration=Yi(u.duration)),u.repeatDelay&&(u.repeatDelay=Yi(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Ek(u),u.delay===0&&(h=!0)),(Jo.instantAnimations||Jo.skipAnimations)&&(h=!0,Ek(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!i&&t.get()!==void 0){const f=Upe(u.keyframes,a);if(f!==void 0){Dt.update(()=>{u.onUpdate(f),u.onComplete()});return}}return a.isSync?new RC(u):new vfe(u)};function Ype({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function pU(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;n&&(i=n);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const u in a){const h=e.getValue(u,e.latestValues[u]??null),f=a[u];if(f===void 0||c&&Ype(c,u))continue;const p={delay:r,...MC(i||{},u)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===v&&!p.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const x=fU(e);if(x){const w=window.MotionHandoffAnimation(x,u,Dt);w!==null&&(p.startTime=w,m=!0)}}Dk(e,u),h.start(KC(u,h,f,e.shouldReduceMotion&&Mz.has(u)?{type:!1}:p,e,m));const b=h.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{Dt.update(()=>{o&&Fpe(e,o)})}),l}function mU(e,t,r,n=0,s=1){const i=Array.from(e).sort((l,c)=>l.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:a-i*n}function Mk(e,t,r={}){var n;const s=xd(e,t,r.type==="exit"?(n=e.presenceContext)==null?void 0:n.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const o=s?()=>Promise.all(pU(e,s,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=i;return Gpe(e,t,c,u,h,f,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function Gpe(e,t,r=0,n=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Mk(l,t,{...o,delay:r+(typeof n=="function"?0:n)+mU(e.variantChildren,l,n,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function Zpe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>Mk(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=Mk(e,t,r);else{const s=typeof t=="function"?xd(e,t,r.custom):t;n=Promise.all(pU(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function gU(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const Jpe=zC.length;function yU(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?yU(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Jpe;r++){const n=zC[r],s=e.props[n];(Up(s)||s===!1)&&(t[n]=s)}return t}const Qpe=[...$C].reverse(),Xpe=$C.length;function eme(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Zpe(e,r,n)))}function tme(e){let t=eme(e),r=nR(),n=!0;const s=l=>(c,u)=>{var h;const f=xd(e,u,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:v,...m}=f;c={...c,...m,...v}}return c};function i(l){t=l(e)}function o(l){const{props:c}=e,u=yU(e.parent)||{},h=[],f=new Set;let p={},v=1/0;for(let b=0;b<Xpe;b++){const x=Qpe[b],w=r[x],_=c[x]!==void 0?c[x]:u[x],j=Up(_),k=x===l?w.isActive:null;k===!1&&(v=b);let S=_===u[x]&&_!==c[x]&&j;if(S&&n&&e.manuallyAnimateOnMount&&(S=!1),w.protectedKeys={...p},!w.isActive&&k===null||!_&&!w.prevProp||Ox(_)||typeof _=="boolean")continue;const E=rme(w.prevProp,_);let C=E||x===l&&w.isActive&&!S&&j||b>v&&j,T=!1;const O=Array.isArray(_)?_:[_];let P=O.reduce(s(x),{});k===!1&&(P={});const{prevResolvedValues:D={}}=w,R={...D,...P},$=V=>{C=!0,f.has(V)&&(T=!0,f.delete(V)),w.needsAnimating[V]=!0;const q=e.getValue(V);q&&(q.liveStyle=!1)};for(const V in R){const q=P[V],K=D[V];if(p.hasOwnProperty(V))continue;let Y=!1;Rk(q)&&Rk(K)?Y=!gU(q,K):Y=q!==K,Y?q!=null?$(V):f.add(V):q!==void 0&&f.has(V)?$(V):w.protectedKeys[V]=!0}w.prevProp=_,w.prevResolvedValues=P,w.isActive&&(p={...p,...P}),n&&e.blockInitialAnimation&&(C=!1);const F=S&&E;C&&(!F||T)&&h.push(...O.map(V=>{const q={type:x};if(typeof V=="string"&&n&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:K}=e,Y=xd(K,V);if(K.enteringChildren&&Y){const{delayChildren:L}=Y.transition||{};q.delay=mU(K.enteringChildren,e,L)}}return{animation:V,options:q}}))}if(f.size){const b={};if(typeof c.initial!="boolean"){const x=xd(e,Array.isArray(c.initial)?c.initial[0]:c.initial);x&&x.transition&&(b.transition=x.transition)}f.forEach(x=>{const w=e.getBaseTarget(x),_=e.getValue(x);_&&(_.liveStyle=!0),b[x]=w??null}),h.push({animation:b})}let m=!!h.length;return n&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),n=!1,m?t(h):Promise.resolve()}function a(l,c){var u;if(r[l].isActive===c)return Promise.resolve();(u=e.variantChildren)==null||u.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),r[l].isActive=c;const h=o(l);for(const f in r)r[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>r,reset:()=>{r=nR(),n=!0}}}function rme(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gU(t,e):!1}function Xl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nR(){return{animate:Xl(!0),whileInView:Xl(),whileHover:Xl(),whileTap:Xl(),whileDrag:Xl(),whileFocus:Xl(),exit:Xl()}}class wl{constructor(t){this.isMounted=!1,this.node=t}update(){}}class nme extends wl{constructor(t){super(t),t.animationState||(t.animationState=tme(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ox(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let sme=0;class ime extends wl{constructor(){super(...arguments),this.id=sme++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const ome={animation:{Feature:nme},exit:{Feature:ime}};function Bp(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Lm(e){return{point:{x:e.pageX,y:e.pageY}}}const ame=e=>t=>FC(t)&&e(t,Lm(t));function hp(e,t,r,n){return Bp(e,t,ame(r),n)}const vU=1e-4,lme=1-vU,cme=1+vU,bU=.01,ume=0-bU,dme=0+bU;function _n(e){return e.max-e.min}function hme(e,t,r){return Math.abs(e-t)<=r}function sR(e,t,r,n=.5){e.origin=n,e.originPoint=Ut(t.min,t.max,e.origin),e.scale=_n(r)/_n(t),e.translate=Ut(r.min,r.max,e.origin)-e.originPoint,(e.scale>=lme&&e.scale<=cme||isNaN(e.scale))&&(e.scale=1),(e.translate>=ume&&e.translate<=dme||isNaN(e.translate))&&(e.translate=0)}function fp(e,t,r,n){sR(e.x,t.x,r.x,n?n.originX:void 0),sR(e.y,t.y,r.y,n?n.originY:void 0)}function iR(e,t,r){e.min=r.min+t.min,e.max=e.min+_n(t)}function fme(e,t,r){iR(e.x,t.x,r.x),iR(e.y,t.y,r.y)}function oR(e,t,r){e.min=t.min-r.min,e.max=e.min+_n(t)}function pp(e,t,r){oR(e.x,t.x,r.x),oR(e.y,t.y,r.y)}function gs(e){return[e("x"),e("y")]}const xU=({current:e})=>e?e.ownerDocument.defaultView:null,aR=(e,t)=>Math.abs(e-t);function pme(e,t){const r=aR(e.x,t.x),n=aR(e.y,t.y);return Math.sqrt(r**2+n**2)}class wU{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=w_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,v=pme(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!v)return;const{point:m}=f,{timestamp:b}=Wr;this.history.push({...m,timestamp:b});const{onStart:x,onMove:w}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=x_(p,this.transformPagePoint),Dt.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:v,onSessionEnd:m,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=w_(f.type==="pointercancel"?this.lastMoveEventInfo:x_(p,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,x),m&&m(f,x)},!FC(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const a=Lm(t),l=x_(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Wr;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=r;h&&h(t,w_(l,this.history)),this.removeListeners=Dm(hp(this.contextWindow,"pointermove",this.handlePointerMove),hp(this.contextWindow,"pointerup",this.handlePointerUp),hp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),hl(this.updatePoint)}}function x_(e,t){return t?{point:t(e.point)}:e}function lR(e,t){return{x:e.x-t.x,y:e.y-t.y}}function w_({point:e},t){return{point:e,delta:lR(e,_U(t)),offset:lR(e,mme(t)),velocity:gme(t,.1)}}function mme(e){return e[0]}function _U(e){return e[e.length-1]}function gme(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=_U(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Yi(t)));)r--;if(!n)return{x:0,y:0};const i=Gi(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function yme(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ut(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ut(r,e,n.max):Math.min(e,r)),e}function cR(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function vme(e,{top:t,left:r,bottom:n,right:s}){return{x:cR(e.x,r,s),y:cR(e.y,t,n)}}function uR(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function bme(e,t){return{x:uR(e.x,t.x),y:uR(e.y,t.y)}}function xme(e,t){let r=.5;const n=_n(e),s=_n(t);return s>n?r=Fp(t.min,t.max-n,e.min):n>s&&(r=Fp(e.min,e.max-s,t.min)),Zo(0,1,r)}function wme(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Ik=.35;function _me(e=Ik){return e===!1?e=0:e===!0&&(e=Ik),{x:dR(e,"left","right"),y:dR(e,"top","bottom")}}function dR(e,t,r){return{min:hR(e,t),max:hR(e,r)}}function hR(e,t){return typeof e=="number"?e:e[t]||0}const jme=new WeakMap;class kme{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Lm(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:v,onDragStart:m}=this.getProps();if(p&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Mfe(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gs(x=>{let w=this.getAxisMotionValue(x).get()||0;if(Zi.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const j=_.layout.layoutBox[x];j&&(w=_n(j)*(parseFloat(w)/100))}}this.originPoint[x]=w}),m&&Dt.postRender(()=>m(h,f)),Dk(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:v,onDirectionLock:m,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=f;if(v&&this.currentDirection===null){this.currentDirection=Sme(x),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),b&&b(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>gs(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new wU(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:xU(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Dt.postRender(()=>a(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!ny(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=yme(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)==null?void 0:t.layout,i=this.constraints;r&&ld(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=vme(s.layoutBox,r):this.constraints=!1,this.elastic=_me(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&gs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=wme(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ld(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Npe(n,s.root,this.visualElement.getTransformPagePoint());let o=bme(s.layout.layoutBox,i);if(r){const a=r(jpe(o));this.hasMutatedConstraints=!!a,a&&(o=iU(a))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=gs(u=>{if(!ny(u,r,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,v={type:"inertia",velocity:n?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(a)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Dk(this.visualElement,t),n.start(KC(t,n,0,r,this.visualElement,!1))}stopAnimation(){gs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gs(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps();return n[r]||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){gs(r=>{const{drag:n}=this.getProps();if(!ny(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[r];i.set(t[r]-Ut(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!ld(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};gs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=xme({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),gs(o=>{if(!ny(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ut(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;jme.set(this.visualElement,this);const t=this.visualElement.current,r=hp(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();ld(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Dt.read(n);const o=Bp(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(gs(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Ik,dragMomentum:a=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function ny(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Sme(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Nme extends wl{constructor(t){super(t),this.removeGroupControls=Cs,this.removeListeners=Cs,this.controls=new kme(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cs}unmount(){this.removeGroupControls(),this.removeListeners()}}const fR=e=>(t,r)=>{e&&Dt.postRender(()=>e(t,r))};class Cme extends wl{constructor(){super(...arguments),this.removePointerDownListener=Cs}onPointerDown(t){this.session=new wU(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xU(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:fR(t),onStart:fR(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Dt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=hp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pR(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const bf={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if($e.test(e))e=parseFloat(e);else return e;const r=pR(e,t.target.x),n=pR(e,t.target.y);return`${r}% ${n}%`}},Eme={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=fl.parse(e);if(s.length>5)return n;const i=fl.createTransformer(e),o=typeof s[0]!="number"?1:0,a=r.x.scale*t.x,l=r.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const c=Ut(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};let __=!1;class Tme extends g.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;Jfe(Ame),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),__&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Hy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,__=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Dt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),LC.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;__=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function jU(e){const[t,r]=Wfe(),n=g.useContext(tz);return d.jsx(Tme,{...e,layoutGroup:n,switchLayoutGroup:g.useContext(nU),isPresent:t,safeToRemove:r})}const Ame={borderRadius:{...bf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:bf,borderTopRightRadius:bf,borderBottomLeftRadius:bf,borderBottomRightRadius:bf,boxShadow:Eme};function Ome(e,t,r){const n=ln(e)?e:Gd(e);return n.start(KC("",n,t,r)),n.animation}const Pme=(e,t)=>e.depth-t.depth;class Rme{constructor(){this.children=[],this.isDirty=!1}add(t){vC(this.children,t),this.isDirty=!0}remove(t){bC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Pme),this.isDirty=!1,this.children.forEach(t)}}function Dme(e,t){const r=$n.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(hl(n),e(i-t))};return Dt.setup(n,!0),()=>hl(n)}const kU=["TopLeft","TopRight","BottomLeft","BottomRight"],Mme=kU.length,mR=e=>typeof e=="string"?parseFloat(e):e,gR=e=>typeof e=="number"||$e.test(e);function Ime(e,t,r,n,s,i){s?(e.opacity=Ut(0,r.opacity??1,Lme(n)),e.opacityExit=Ut(t.opacity??1,0,Fme(n))):i&&(e.opacity=Ut(t.opacity??1,r.opacity??1,n));for(let o=0;o<Mme;o++){const a=`border${kU[o]}Radius`;let l=yR(t,a),c=yR(r,a);l===void 0&&c===void 0||(l||(l=0),c||(c=0),l===0||c===0||gR(l)===gR(c)?(e[a]=Math.max(Ut(mR(l),mR(c),n),0),(Zi.test(c)||Zi.test(l))&&(e[a]+="%")):e[a]=c)}(t.rotate||r.rotate)&&(e.rotate=Ut(t.rotate||0,r.rotate||0,n))}function yR(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Lme=SU(0,.5,hz),Fme=SU(.5,.95,Cs);function SU(e,t,r){return n=>n<e?0:n>t?1:r(Fp(e,t,n))}function vR(e,t){e.min=t.min,e.max=t.max}function us(e,t){vR(e.x,t.x),vR(e.y,t.y)}function bR(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function xR(e,t,r,n,s){return e-=t,e=Iv(e,1/r,n),s!==void 0&&(e=Iv(e,1/s,n)),e}function $me(e,t=0,r=1,n=.5,s,i=e,o=e){if(Zi.test(t)&&(t=parseFloat(t),t=Ut(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Ut(i.min,i.max,n);e===i&&(a-=t),e.min=xR(e.min,t,r,a,s),e.max=xR(e.max,t,r,a,s)}function wR(e,t,[r,n,s],i,o){$me(e,t[r],t[n],t[s],t.scale,i,o)}const zme=["x","scaleX","originX"],Ume=["y","scaleY","originY"];function _R(e,t,r,n){wR(e.x,t,zme,r?r.x:void 0,n?n.x:void 0),wR(e.y,t,Ume,r?r.y:void 0,n?n.y:void 0)}function jR(e){return e.translate===0&&e.scale===1}function NU(e){return jR(e.x)&&jR(e.y)}function kR(e,t){return e.min===t.min&&e.max===t.max}function qme(e,t){return kR(e.x,t.x)&&kR(e.y,t.y)}function SR(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function CU(e,t){return SR(e.x,t.x)&&SR(e.y,t.y)}function NR(e){return _n(e.x)/_n(e.y)}function CR(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Bme{constructor(){this.members=[]}add(t){vC(this.members,t),t.scheduleRender()}remove(t){if(bC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Wme(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:p,skewY:v}=r;c&&(n=`perspective(${c}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),v&&(n+=`skewY(${v}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const j_=["","X","Y","Z"],Vme=1e3;let Hme=0;function k_(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function EU(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=fU(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Dt,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&EU(n)}function TU({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t==null?void 0:t()){this.id=Hme++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Gme),this.nodes.forEach(Xme),this.nodes.forEach(ege),this.nodes.forEach(Zme)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Rme)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new _C),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const a=this.eventHandlers.get(i);a&&a.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=Wz(i)&&!Ufe(i),this.instance=i;const{layoutId:o,layout:a,visualElement:l}=this.options;if(l&&!l.current&&l.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(a||o)&&(this.isLayoutDirty=!0),e){let c,u=0;const h=()=>this.root.updateBlockedByResize=!1;Dt.read(()=>{u=window.innerWidth}),e(i,()=>{const f=window.innerWidth;f!==u&&(u=f,this.root.updateBlockedByResize=!0,c&&c(),c=Dme(h,250),Hy.hasAnimatedSinceResize&&(Hy.hasAnimatedSinceResize=!1,this.nodes.forEach(AR)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&l&&(o||a)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||l.getDefaultTransition()||ige,{onLayoutAnimationStart:v,onLayoutAnimationComplete:m}=l.getProps(),b=!this.targetLayout||!CU(this.targetLayout,f),x=!u&&h;if(this.options.layoutRoot||this.resumeFrom||x||u&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...MC(p,"layout"),onPlay:v,onComplete:m};(l.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(c,x)}else u||AR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),hl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tge),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&EU(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const u=this.path[c];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:o,layout:a}=this.options;if(o===void 0&&!a)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ER);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(TR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Qme),this.nodes.forEach(Kme),this.nodes.forEach(Yme)):this.nodes.forEach(TR),this.clearAllSnapshots();const i=$n.now();Wr.delta=Zo(0,1e3/60,i-Wr.timestamp),Wr.timestamp=i,Wr.isProcessing=!0,h_.update.process(Wr),h_.preRender.process(Wr),h_.render.process(Wr),Wr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,LC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Jme),this.sharedNodes.forEach(rge)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!_n(this.snapshot.measuredBox.x)&&!_n(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const a=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:a,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!NU(this.projectionDelta),a=this.getTransformTemplate(),l=a?a(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;i&&this.instance&&(o||ic(this.latestValues)||c)&&(s(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let a=this.removeElementScroll(o);return i&&(a=this.removeTransform(a)),oge(a),{animationId:this.root.animationId,measuredBox:o,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:o}=this.options;if(!o)return Qt();const a=o.measureViewportBox();if(!((i=this.scroll)!=null&&i.wasRoot||this.path.some(age))){const{scroll:l}=this.root;l&&(cd(a.x,l.offset.x),cd(a.y,l.offset.y))}return a}removeElementScroll(i){var o;const a=Qt();if(us(a,i),(o=this.scroll)!=null&&o.wasRoot)return a;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;c!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&us(a,i),cd(a.x,u.offset.x),cd(a.y,u.offset.y))}return a}applyTransform(i,o=!1){const a=Qt();us(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ud(a,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),ic(c.latestValues)&&ud(a,c.latestValues)}return ic(this.latestValues)&&ud(a,this.latestValues),a}removeTransform(i){const o=Qt();us(o,i);for(let a=0;a<this.path.length;a++){const l=this.path[a];if(!l.instance||!ic(l.latestValues))continue;Ak(l.latestValues)&&l.updateSnapshot();const c=Qt(),u=l.measurePageBox();us(c,u),_R(o,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return ic(this.latestValues)&&_R(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var o;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(o=this.parent)!=null&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:u}=this.options;if(!(!this.layout||!(c||u))){if(this.resolvedRelativeTargetAt=Wr.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),pp(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Qt(),this.targetWithTransforms=Qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fme(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):us(this.target,this.layout.layoutBox),aU(this.target,this.targetDelta)):us(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),pp(this.relativeTargetOrigin,this.target,h.target),us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ak(this.parent.latestValues)||oU(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(i=this.parent)!=null&&i.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Wr.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;us(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Spe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Qt());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bR(this.prevProjectionDelta.x,this.projectionDelta.x),bR(this.prevProjectionDelta.y,this.projectionDelta.y)),fp(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!CR(this.projectionDelta.x,this.prevProjectionDelta.x)||!CR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),i){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=dd(),this.projectionDelta=dd(),this.projectionDeltaWithTransform=dd()}setAnimationOrigin(i,o=!1){const a=this.snapshot,l=a?a.latestValues:{},c={...this.latestValues},u=dd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Qt(),f=a?a.source:void 0,p=this.layout?this.layout.source:void 0,v=f!==p,m=this.getStack(),b=!m||m.members.length<=1,x=!!(v&&!b&&this.options.crossfade===!0&&!this.path.some(sge));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const j=_/1e3;OR(u.x,i.x,j),OR(u.y,i.y,j),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pp(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nge(this.relativeTarget,this.relativeTargetOrigin,h,j),w&&qme(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Qt()),us(w,this.relativeTarget)),v&&(this.animationValues=c,Ime(c,l,this.latestValues,j,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var o,a,l;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(l=(a=this.resumingFrom)==null?void 0:a.currentAnimation)==null||l.stop(),this.pendingAnimation&&(hl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dt.update(()=>{Hy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Gd(0)),this.currentAnimation=Ome(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),i.onUpdate&&i.onUpdate(c)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Vme),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:a,layout:l,latestValues:c}=i;if(!(!o||!a||!l)){if(this!==i&&this.layout&&l&&AU(this.options.animationType,this.layout.layoutBox,l.layoutBox)){a=this.target||Qt();const u=_n(this.layout.layoutBox.x);a.x.min=i.target.x.min,a.x.max=a.x.min+u;const h=_n(this.layout.layoutBox.y);a.y.min=i.target.y.min,a.y.max=a.y.min+h}us(o,a),ud(o,c),fp(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Bme),this.sharedNodes.get(i).add(o);const a=o.options.initialPromotionConfig;o.promote({transition:a?a.transition:void 0,preserveFollowOpacity:a&&a.shouldPreserveFollowOpacity?a.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:o}=this.options;return o?((i=this.getStack())==null?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:o}=this.options;return o?(i=this.getStack())==null?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:a}={}){const l=this.getStack();l&&l.promote(this,a),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:a}=i;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(o=!0),!o)return;const l={};a.z&&k_("z",i,l,this.animationValues);for(let c=0;c<j_.length;c++)k_(`rotate${j_[c]}`,i,l,this.animationValues),k_(`skew${j_[c]}`,i,l,this.animationValues);i.render();for(const c in l)i.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const a=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Vy(o==null?void 0:o.pointerEvents)||"",i.transform=a?a(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Vy(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ic(this.latestValues)&&(i.transform=a?a({},""):"none",this.hasProjected=!1);return}i.visibility="";const c=l.animationValues||l.latestValues;this.applyTransformsToTarget();let u=Wme(this.projectionDeltaWithTransform,this.treeScale,c);a&&(u=a(c,u)),i.transform=u;const{x:h,y:f}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,l.animationValues?i.opacity=l===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:i.opacity=l===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in qp){if(c[p]===void 0)continue;const{correct:v,applyTo:m,isCSSVariable:b}=qp[p],x=u==="none"?c[p]:v(c[p],l);if(m){const w=m.length;for(let _=0;_<w;_++)i[m[_]]=x}else b?this.options.visualElement.renderState.vars[p]=x:i[p]=x}this.options.layoutId&&(i.pointerEvents=l===this?Vy(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var o;return(o=i.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(ER),this.root.sharedNodes.clear()}}}function Kme(e){e.updateLayout()}function Yme(e){var t;const r=((t=e.resumeFrom)==null?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?gs(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],p=_n(f);f.min=n[h].min,f.max=f.min+p}):AU(i,r.layoutBox,n)&&gs(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],p=_n(n[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const a=dd();fp(a,n,r.layoutBox);const l=dd();o?fp(l,e.applyTransform(s,!0),r.measuredBox):fp(l,n,r.layoutBox);const c=!NU(a);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const v=Qt();pp(v,r.layoutBox,f.layoutBox);const m=Qt();pp(m,n,p.layoutBox),CU(v,m)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function Gme(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Zme(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Jme(e){e.clearSnapshot()}function ER(e){e.clearMeasurements()}function TR(e){e.isLayoutDirty=!1}function Qme(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function AR(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Xme(e){e.resolveTargetDelta()}function ege(e){e.calcProjection()}function tge(e){e.resetSkewAndRotation()}function rge(e){e.removeLeadSnapshot()}function OR(e,t,r){e.translate=Ut(t.translate,0,r),e.scale=Ut(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function PR(e,t,r,n){e.min=Ut(t.min,r.min,n),e.max=Ut(t.max,r.max,n)}function nge(e,t,r,n){PR(e.x,t.x,r.x,n),PR(e.y,t.y,r.y,n)}function sge(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const ige={duration:.45,ease:[.4,0,.1,1]},RR=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),DR=RR("applewebkit/")&&!RR("chrome/")?Math.round:Cs;function MR(e){e.min=DR(e.min),e.max=DR(e.max)}function oge(e){MR(e.x),MR(e.y)}function AU(e,t,r){return e==="position"||e==="preserve-aspect"&&!hme(NR(t),NR(r),.2)}function age(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const lge=TU({attachResizeListener:(e,t)=>Bp(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),S_={current:void 0},OU=TU({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!S_.current){const e=new lge({});e.mount(window),e.setOptions({layoutScroll:!0}),S_.current=e}return S_.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),cge={pan:{Feature:Cme},drag:{Feature:Nme,ProjectionNode:OU,MeasureLayout:jU}};function IR(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Dt.postRender(()=>i(t,Lm(t)))}class uge extends wl{mount(){const{current:t}=this.node;t&&(this.unmount=Ife(t,(r,n)=>(IR(this.node,n,"Start"),s=>IR(this.node,s,"End"))))}unmount(){}}class dge extends wl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Dm(Bp(this.node.current,"focus",()=>this.onFocus()),Bp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function LR(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Dt.postRender(()=>i(t,Lm(t)))}class hge extends wl{mount(){const{current:t}=this.node;t&&(this.unmount=zfe(t,(r,n)=>(LR(this.node,n,"Start"),(s,{success:i})=>LR(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Lk=new WeakMap,N_=new WeakMap,fge=e=>{const t=Lk.get(e.target);t&&t(e)},pge=e=>{e.forEach(fge)};function mge({root:e,...t}){const r=e||document;N_.has(r)||N_.set(r,{});const n=N_.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(pge,{root:e,...t})),n[s]}function gge(e,t,r){const n=mge(t);return Lk.set(e,r),n.observe(e),()=>{Lk.delete(e),n.unobserve(e)}}const yge={some:0,all:1};class vge extends wl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:yge[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return gge(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(bge(t,r))&&this.startObserver()}unmount(){}}function bge({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const xge={inView:{Feature:vge},tap:{Feature:hge},focus:{Feature:dge},hover:{Feature:uge}},wge={layout:{ProjectionNode:OU,MeasureLayout:jU}},_ge={...ome,...xge,...cge,...wge},C_=_pe(_ge,Mpe),jge=()=>{const{isAuthenticated:e}=rx(),[t,r]=g.useState(null),[n,s]=g.useState(!1),i=[{id:"monthly",name:"Monthly Membership",price:9.99,interval:"month",features:["Access to all released content","New chapters as they release","Exclusive behind-the-scenes","Early character reveals","Community discussions","Author notes and insights"],paypalPlanId:"monthly_plan_id",highlight:"Perfect for new readers"},{id:"yearly",name:"Annual Membership",price:99.99,interval:"year",features:["Everything in Monthly plan","2 months free (17% savings)","Priority content access","Exclusive annual content","Direct Q&A with author","Member-only events"],popular:!0,paypalPlanId:"yearly_plan_id",highlight:"Best value - Save $19.89"}],o=c=>{if(!e){window.location.href="/login?returnTo=/subscribe";return}r(i.find(u=>u.id===c)||null),s(!0)},a=()=>s(!1),l=()=>s(!1);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 to-background",children:d.jsx("div",{className:"container mx-auto px-4 py-24 md:py-32",children:d.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[d.jsxs(C_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[d.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-foreground mb-6 leading-tight",children:"Unlock the Full Zoroasterverse Experience"}),d.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground mb-8 max-w-3xl mx-auto",children:"Join our community of readers and get exclusive access to the complete story as it unfolds."})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-10 w-full max-w-6xl mx-auto",children:i.map((c,u)=>d.jsxs(C_.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:u*.1+.3,duration:.5},className:`relative w-full ${c.popular?"z-10 transform md:-translate-y-4":""}`,children:[c.popular&&d.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 z-20",children:d.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-amber-600 text-amber-900 px-4 py-1.5 rounded-full text-xs font-bold flex items-center gap-1.5 shadow-lg shadow-amber-500/20",children:[d.jsx(Op,{className:"w-3.5 h-3.5"}),d.jsx("span",{children:"MOST POPULAR"})]})}),d.jsxs("div",{className:`bg-card border rounded-xl p-6 transition-all duration-300 ${c.popular?"border-amber-500/30 shadow-xl shadow-amber-500/10":"border-border hover:border-primary/50 hover:shadow-lg"}`,children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:c.name}),c.highlight&&d.jsx("p",{className:"text-sm text-primary font-medium mb-3",children:c.highlight}),d.jsxs("div",{className:"mb-2",children:[d.jsxs("span",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:["$",c.price]}),d.jsxs("span",{className:"text-muted-foreground text-lg",children:["/",c.interval]})]}),c.interval==="year"&&d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Only $",(c.price/12).toFixed(2)," per month"]})]}),d.jsx("ul",{className:"space-y-3 mb-8",children:c.features.map((h,f)=>d.jsxs("li",{className:"flex items-start gap-3",children:[d.jsx(qa,{className:`flex-shrink-0 mt-0.5 ${c.popular?"text-amber-500":"text-primary"}`,size:18}),d.jsx("span",{className:"text-muted-foreground text-sm",children:h})]},f))}),d.jsxs("button",{onClick:()=>o(c.id),className:`w-full py-3 px-6 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 ${c.popular?"bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white shadow-lg shadow-amber-500/20":"bg-primary/10 hover:bg-primary/20 text-primary border border-primary/20"}`,children:["Get Started",d.jsx(op,{className:"w-4 h-4"})]})]})]},c.id))})]})})}),d.jsx("section",{className:"py-16 md:py-24 bg-card/30",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"What You'll Get"}),d.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[{icon:d.jsx(Ap,{className:"w-8 h-8 text-primary"}),title:"Exclusive Content",description:"Access to all chapters, including early releases and subscriber-only content."},{icon:d.jsx(VF,{className:"w-8 h-8 text-primary"}),title:"Regular Updates",description:"New chapters delivered on a consistent schedule. No waiting for complete books!"},{icon:d.jsx(yte,{className:"w-8 h-8 text-primary"}),title:"Early Access",description:"Be the first to experience new chapters and special releases."},{icon:d.jsx(Qee,{className:"w-8 h-8 text-primary"}),title:"Community",description:"Join discussions, share theories, and connect with other readers."},{icon:d.jsx(U2,{className:"w-8 h-8 text-primary"}),title:"Behind the Scenes",description:"Exclusive insights into the creative process and world-building."},{icon:d.jsx(qa,{className:"w-8 h-8 text-primary"}),title:"Ad-Free Experience",description:"Enjoy your reading without any distractions or interruptions."}].map((c,u)=>d.jsxs(C_.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:u*.1,duration:.5},className:"bg-background/50 backdrop-blur-sm p-6 rounded-xl border border-border hover:border-primary/30 transition-colors",children:[d.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center mb-4",children:c.icon}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:c.title}),d.jsx("p",{className:"text-muted-foreground text-sm",children:c.description})]},u))})]})}),d.jsx("section",{className:"py-16 bg-gradient-to-r from-primary/5 to-primary/10",children:d.jsxs("div",{className:"container mx-auto px-4 text-center",children:[d.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Begin Your Journey?"}),d.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-8",children:"Join thousands of readers who are already exploring the Zoroasterverse."}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[d.jsxs("button",{onClick:()=>o("yearly"),className:"px-8 py-3 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white font-medium rounded-lg shadow-lg shadow-amber-500/20 transition-all flex items-center gap-2",children:["Start Reading Now",d.jsx(op,{className:"w-4 h-4"})]}),d.jsx("button",{className:"px-6 py-3 border border-border hover:border-primary/50 hover:bg-background/50 text-foreground font-medium rounded-lg transition-all",children:"Learn More"})]})]})}),n&&t&&d.jsx(ez,{product:{id:t.id,name:t.name,price:t.price*100,currency:"usd",interval:t.interval,is_subscription:!0,trial_period_days:void 0},onCancel:a,onSuccess:l})]})},kge=()=>{const[e]=Dee(),[t,r]=g.useState(null),[n,s]=g.useState(!0);return g.useEffect(()=>{const i=e.get("session_id");r(i),s(!1)},[e]),n?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center",children:d.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900",children:[d.jsxs("div",{className:"relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),d.jsx("div",{className:"relative z-10 container mx-auto px-4 py-20 text-center",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("div",{className:"w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-8",children:d.jsx(qa,{className:"w-12 h-12 text-white"})}),d.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"Welcome to the Zoroasterverse!"}),d.jsx("p",{className:"text-xl md:text-2xl text-gray-300 mb-8 leading-relaxed",children:"Your subscription is now active. You're ready to dive into the world of episodic storytelling and join our community of readers."}),t&&d.jsx("div",{className:"bg-gray-800 bg-opacity-50 rounded-lg p-4 mb-8 inline-block",children:d.jsxs("p",{className:"text-gray-300 text-sm",children:["Session ID: ",d.jsx("span",{className:"font-mono text-green-400",children:t})]})})]})})]}),d.jsx("div",{className:"py-20 bg-gray-800",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-16",children:"What Happens Next?"}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(Ap,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Access Your Library"}),d.jsx("p",{className:"text-gray-300",children:"Visit your library to read all available chapters and exclusive content."})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(U2,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Stay Updated"}),d.jsx("p",{className:"text-gray-300",children:"You'll receive notifications when new chapters are ready to read."})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(mv,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Join the Community"}),d.jsx("p",{className:"text-gray-300",children:"Connect with fellow readers and discuss theories in our community."})]})]})]})}),d.jsx("div",{className:"py-20 bg-gray-900",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-16",children:"Get Started Right Away"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[d.jsx(Yr,{to:"/library",className:"bg-purple-600 hover:bg-purple-700 text-white p-8 rounded-2xl transition-all duration-300 hover:scale-105 group",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Visit Your Library"}),d.jsx("p",{className:"text-purple-100 mb-6",children:"Access all available chapters and start reading immediately."})]}),d.jsx(op,{className:"w-8 h-8 group-hover:translate-x-2 transition-transform"})]})}),d.jsx(Yr,{to:"/account",className:"bg-gray-700 hover:bg-gray-600 text-white p-8 rounded-2xl transition-all duration-300 hover:scale-105 group",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Manage Subscription"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"View your subscription details and manage your account."})]}),d.jsx(op,{className:"w-8 h-8 group-hover:translate-x-2 transition-transform"})]})})]})]})}),d.jsx("div",{className:"py-20 bg-gradient-to-r from-purple-900 to-blue-900",children:d.jsx("div",{className:"container mx-auto px-4 text-center",children:d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsx("div",{className:"w-20 h-20 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(Op,{className:"w-10 h-10 text-white"})}),d.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Welcome Bonus Unlocked!"}),d.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"As a new subscriber, you now have access to exclusive content including:"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-left mb-8",children:[d.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Behind the Scenes"}),d.jsx("p",{className:"text-gray-300",children:"Author notes, character development insights, and world-building details."})]}),d.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Community Access"}),d.jsx("p",{className:"text-gray-300",children:"Join discussions, share theories, and connect with fellow readers."})]})]}),d.jsxs(Yr,{to:"/library",className:"bg-yellow-500 hover:bg-yellow-600 text-gray-900 px-8 py-4 rounded-xl text-xl font-bold transition-all duration-300 hover:scale-105 shadow-lg inline-flex items-center gap-2",children:["Explore Your Library",d.jsx(op,{className:"w-6 h-6"})]})]})})}),d.jsx("div",{className:"py-16 bg-gray-800",children:d.jsxs("div",{className:"container mx-auto px-4 text-center",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Questions or Need Help?"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"Our support team is here to help you get the most out of your subscription."}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[d.jsx(Yr,{to:"/account",className:"bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg transition-colors",children:"Contact Support"}),d.jsx(Yr,{to:"/",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Return Home"})]})]})})]})},Sge=e=>e.resultType==="page",Nge=e=>e.resultType==="folder";function E_({page:e,onEdit:t}){var r,n,s;const{folderSlug:i,pageSlug:o}=ax(),[a,l]=g.useState([]),[c,u]=g.useState([]),[h,f]=g.useState(null),[p,v]=g.useState(""),[m,b]=g.useState([]),[x,w]=g.useState(!1),[_,j]=g.useState(!0),[k,S]=g.useState(!1),[E,C]=g.useState(!0),[T,O]=g.useState([]),P=g.useRef(null),D=g.useRef(null);e.excerpt;const R=async q=>{if(!q.trim()){b([]);return}try{w(!0);const{data:K,error:Y}=await le.from("wiki_pages").select(`
          *,
          content, seo_title, seo_description, seo_keywords, sections,
          category:wiki_categories(*),
          user:profiles(*)
        `).or(`title.ilike.%${q}%,excerpt.ilike.%${q}%`);if(Y)throw Y;const L=(K||[]).map(X=>{let te=null;X.user&&typeof X.user=="object"&&!("error"in X.user)&&(te=X.user);let ve=null;return X.category&&typeof X.category=="object"&&!("error"in X.category)&&(ve=X.category),{...X,resultType:"page",sections:X.sections||[],content:X.content||"",excerpt:X.excerpt||"",is_published:X.is_published??!0,category_id:X.category_id??null,folder_id:X.folder_id??null,created_at:X.created_at||new Date().toISOString(),updated_at:new Date().toISOString(),created_by:X.created_by||"",view_count:X.view_count||0,slug:X.slug||"",seo_title:X.seo_title||null,seo_description:X.seo_description||null,seo_keywords:X.seo_keywords||[],category:ve,user:te}});b(L)}catch(K){console.error("Search error:",K),qe.error("Failed to perform search")}finally{w(!1)}};g.useEffect(()=>{(async()=>{try{C(!0);const{data:q,error:K}=await le.from("wiki_pages").select("*, content, seo_title, seo_description, seo_keywords, sections, category:wiki_categories(*), user:profiles(*)").order("title");if(K)throw K;const Y=(q||[]).map(L=>{let X=null;L.user&&typeof L.user=="object"&&!("error"in L.user)&&(X=L.user);let te=null;return L.category&&typeof L.category=="object"&&!("error"in L.category)&&(te=L.category),{...L,sections:L.sections||[],content:L.content||"",seo_title:L.seo_title||"",seo_description:L.seo_description||"",seo_keywords:L.seo_keywords||[],category:te,user:X,resultType:"page"}});l(Y)}catch(q){console.error("Error fetching data:",q),qe.error("Failed to load wiki pages")}finally{C(!1)}})()},[o]);const $=q=>{const K=new Map,Y=[];return q.forEach(L=>{K.set(L.id,{...L,children:[]})}),K.forEach(L=>{if(L.parent_id&&K.has(L.parent_id)){const X=K.get(L.parent_id);X&&(X.children=[...X.children||[],L])}else Y.push(L)}),Y},F=q=>{var K,Y,L,X,te,ve,H,G,he,fe,_e;if(!q)return null;switch(q.type){case"heading_1":case"heading_2":case"heading_3":const W=`h${parseInt(q.type.split("_")[1])}`;return d.jsx(W,{id:`heading-${q.id}`,className:"mt-6 mb-4 font-semibold",children:(K=q.content)==null?void 0:K.text});case"paragraph":return d.jsx("p",{className:"mb-4 leading-relaxed",children:(Y=q.content)==null?void 0:Y.text});case"bullet_list":return d.jsx("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:(X=(L=q.content)==null?void 0:L.items)==null?void 0:X.map((J,ae)=>d.jsx("li",{children:J},ae))});case"ordered_list":return d.jsx("ol",{className:"list-decimal pl-6 mb-4 space-y-1",children:(ve=(te=q.content)==null?void 0:te.items)==null?void 0:ve.map((J,ae)=>d.jsx("li",{children:J},ae))});case"quote":return d.jsx("blockquote",{className:"border-l-4 border-gray-300 pl-4 py-1 my-4 text-gray-600 italic",children:(H=q.content)==null?void 0:H.text});case"code":return d.jsx("pre",{className:"bg-gray-100 p-4 rounded-md my-4 overflow-x-auto",children:d.jsx("code",{children:(G=q.content)==null?void 0:G.code})});case"image":return d.jsxs("div",{className:"my-6",children:[d.jsx("img",{src:(he=q.content)==null?void 0:he.url,alt:((fe=q.content)==null?void 0:fe.alt)||"",className:"max-w-full h-auto rounded-md"}),((_e=q.content)==null?void 0:_e.caption)&&d.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:q.content.caption})]});default:return null}},V=(q,K=0)=>q.map(Y=>d.jsxs("div",{className:"pl-2",children:[d.jsxs("div",{className:"flex items-center py-1 px-2 rounded hover:bg-accent cursor-pointer",children:[d.jsx(F2,{size:16,className:"mr-1 text-muted-foreground"}),d.jsx(pv,{size:14,className:"mr-2 text-blue-500"}),d.jsx("span",{className:"text-sm",children:Y.name})]}),Y.children&&Y.children.length>0&&d.jsx("div",{className:"pl-4 border-l border-border ml-1",children:V(Y.children,K+1)}),d.jsx("div",{className:"pl-6",children:a.filter(L=>L.folder_id===Y.id).map(L=>d.jsxs(Yr,{to:`/wiki/${Y.slug}/${L.slug}`,className:`flex items-center py-1 px-2 rounded text-sm ${o===L.slug?"bg-accent font-medium":"text-muted-foreground hover:bg-accent"}`,children:[d.jsx(fv,{size:12,className:"mr-2 text-gray-500"}),d.jsx("span",{className:"truncate",children:L.title})]},L.id))})]},Y.id));return g.useEffect(()=>{const q=async()=>{if(!p.trim()){b([]);return}w(!0);try{await R(p)}catch(Y){console.error("Search error:",Y),qe.error("Failed to perform search")}finally{w(!1)}};P.current!==null&&(window.clearTimeout(P.current),P.current=null);const K=window.setTimeout(q,500);return P.current=K,()=>{P.current!==null&&(window.clearTimeout(P.current),P.current=null)}},[p]),g.useEffect(()=>{v(""),b([])},[i,o]),e?d.jsxs("div",{className:"flex h-screen bg-background",children:[_&&d.jsxs("div",{className:"w-64 bg-card border-r border-border flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b border-border",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx(Ap,{size:16,className:"mr-2"}),"Wiki"]}),d.jsx(lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>j(!1),children:d.jsx(cl,{size:16})})]}),d.jsxs("div",{className:"relative",children:[d.jsx(nu,{size:16,className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),d.jsx(ci,{type:"search",placeholder:"Search wiki...",className:"w-full pl-8 h-8 text-sm",value:p,onChange:q=>v(q.target.value)})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:E?d.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):V($(c))}),p&&d.jsxs("div",{className:"mt-2 border-t border-border pt-2",children:[d.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2 px-2",children:x?"Searching...":`Found ${m.length} results`}),!x&&m.length===0?d.jsxs("div",{className:"text-xs text-muted-foreground px-2 py-1",children:['No results found for "',p,'"']}):d.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:m.map(q=>d.jsx(Yr,{to:q.resultType==="page"?`/wiki/${q.folder_id?`${q.folder_id}/`:""}${q.slug}`:`/wiki/folder/${q.id}`,className:"flex items-center px-2 py-1.5 text-sm rounded hover:bg-accent",onClick:()=>v(""),children:Sge(q)?d.jsxs("div",{className:"flex items-center",children:[d.jsx(fv,{className:"h-4 w-4 mr-2 text-gray-500"}),d.jsx("span",{children:q.title})]}):Nge(q)?d.jsxs("div",{className:"flex items-center",children:[d.jsx(pv,{className:"h-4 w-4 mr-2 text-yellow-500"}),d.jsx("span",{children:q.name})]}):null},`${q.resultType}-${q.id}`))})]})]}),d.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[d.jsxs("header",{className:"h-14 border-b border-border flex items-center px-4",children:[!_&&d.jsx(lt,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>j(!0),children:d.jsx(XO,{size:18})}),d.jsx("div",{className:"flex-1",children:d.jsx("h1",{className:"font-semibold",children:(h==null?void 0:h.title)||"Welcome to the Wiki"})}),d.jsx(lt,{variant:"ghost",size:"icon",onClick:()=>S(!k),children:d.jsx(XO,{size:18})})]}),d.jsx("main",{ref:D,className:"flex-1 overflow-y-auto p-6 max-w-4xl mx-auto w-full",children:h?d.jsxs("article",{className:"prose max-w-none",children:[(r=h.sections)==null?void 0:r.map(q=>d.jsx("div",{children:F(q)},q.id)),d.jsxs("div",{className:"mt-12 pt-6 border-t border-border text-sm text-muted-foreground",children:["Last updated: ",new Date(h.updated_at).toLocaleDateString()]})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground",children:[d.jsx(Ap,{size:48,className:"mb-4 text-muted-foreground/50"}),d.jsx("h2",{className:"text-xl font-medium mb-2",children:"Welcome to the Wiki"}),d.jsx("p",{className:"max-w-md",children:"Select a page from the sidebar or create a new one to get started."})]})})]}),k&&d.jsxs("div",{className:"w-64 border-l border-border bg-card overflow-y-auto",children:[d.jsx("div",{className:"p-4 border-b border-border",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"font-medium",children:"Table of Contents"}),d.jsx(lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>S(!1),children:d.jsx(cl,{size:16})})]})}),d.jsx("div",{className:"p-4",children:T.length>0?d.jsx("nav",{className:"space-y-1",children:T.map((q,K)=>d.jsx("a",{href:`#${q.id}`,className:`block py-1 text-sm ${q.level===1?"font-medium":"text-muted-foreground"} hover:text-foreground`,style:{marginLeft:`${(q.level-1)*8}px`},children:q.text},K))}):d.jsx("p",{className:"text-sm text-muted-foreground",children:"No headings found"})})]}),d.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[d.jsx("h1",{children:e.title}),(n=e.sections)!=null&&n.length?d.jsx("div",{className:"space-y-6",children:(s=e.sections)==null?void 0:s.sort((q,K)=>(q.order_index??0)-(K.order_index??0)).map(q=>d.jsxs("div",{className:"section",children:[q.title&&d.jsx("h2",{className:"text-2xl font-semibold mb-2",children:q.title}),d.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:q.content||""}})]},q.id))}):d.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:e.excerpt||""}})]})]}):d.jsx("div",{children:"Loading..."})}const Cge=async()=>{const{data:e,error:t}=await le.from("characters").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},Ege=()=>{const{data:e,isLoading:t,isError:r,error:n}=hr({queryKey:["characters"],queryFn:Cge}),s=g.useRef(null);g.useRef({});const i=g.useRef([]);return g.useEffect(()=>{if(s.current){const o=s.current;for(let a=0;a<20;a++){const l=document.createElement("div");l.className="floating-dot",l.style.left=Math.random()*100+"%",l.style.top=Math.random()*100+"%",l.style.animationDelay=Math.random()*6+"s",l.style.animationDuration=4+Math.random()*4+"s",o.appendChild(l)}}},[]),g.useEffect(()=>{const o=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&l.target.classList.add("visible")})},{threshold:.2,rootMargin:"-50px"});return i.current.forEach(a=>{a&&o.observe(a)}),()=>{i.current.forEach(a=>{a&&o.unobserve(a)})}},[e]),g.useEffect(()=>{const o=()=>{var a;const l=window.pageYOffset,c=(a=s.current)==null?void 0:a.querySelectorAll(".floating-dot");c==null||c.forEach((u,h)=>{const f=.5+h%3*.2;u.style.transform=`translateY(${l*f}px) rotate(${l*.1}deg)`})};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),t?d.jsx("div",{className:"text-center py-8 text-text-light",children:"Loading characters..."}):r?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading characters: ",n==null?void 0:n.message]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{ref:s,className:"floating-elements"}),d.jsx("section",{className:"hero-section",children:d.jsxs("div",{children:[d.jsx("h1",{className:"hero-title",children:"Meet the Characters"}),d.jsx("p",{className:"hero-subtitle",children:"Journey into the world of extraordinary souls"}),d.jsx("div",{className:"scroll-indicator",children:d.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]})}),e==null?void 0:e.map((o,a)=>{var l;return d.jsxs("section",{ref:c=>{i.current[a]=c},className:"character-section ",children:[d.jsx("div",{className:"character-silhouette",children:d.jsx("div",{className:"silhouette-container",children:o.image_url?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:o.image_url,alt:o.name,className:"character-image"}),d.jsx("div",{className:"silhouette-overlay",style:{"--mask-image":`url(${o.silhouette_url||o.image_url})`}})]}):d.jsxs("div",{className:"upload-placeholder",children:[d.jsx("div",{className:"upload-icon",children:"📷"}),d.jsx("div",{children:"No Image"})]})})}),d.jsxs("div",{className:"character-info",children:[d.jsx("h2",{className:"character-name",children:o.name}),d.jsx("p",{className:"character-title",children:o.title}),d.jsx("p",{className:"character-description",children:o.description}),d.jsx("div",{className:"character-traits",children:(l=o.traits)==null?void 0:l.map((c,u)=>d.jsx("span",{className:"trait",children:c},u))})]})]},o.id)})]})},Tge=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Locations & Factions"})}),Age=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Glossary"})}),Oge=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Reviews"})}),Pge=async()=>{const{data:e,error:t}=await le.from("posts").select("*").eq("status","published").order("created_at",{ascending:!1});if(t)throw new Error(t.message);return e},Rge=()=>{const{data:e,isLoading:t,isError:r,error:n}=hr({queryKey:["blogPosts"],queryFn:Pge});return t?d.jsx("div",{className:"text-center py-8",children:"Loading blog posts..."}):r?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading posts: ",n==null?void 0:n.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Blog & News"}),e&&e.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(s=>d.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:d.jsxs("div",{className:"p-6",children:[d.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:s.title}),d.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Published on ",new Date(s.created_at).toLocaleDateString()]}),d.jsx("div",{className:"text-gray-700 leading-relaxed line-clamp-3",dangerouslySetInnerHTML:{__html:s.content}}),d.jsx(Yr,{to:`/blog/${s.slug}`,className:"mt-4 inline-block text-blue-600 hover:text-blue-800 font-medium",children:"Read More →"})]})},s.id))}):d.jsxs("div",{className:"text-center py-12 text-gray-600",children:[d.jsx("p",{className:"text-xl mb-4",children:"No blog posts published yet."}),d.jsx("p",{children:"Check back soon for new content!"})]})]})},Dge=()=>d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-4xl font-bold",children:"404 - Not Found"}),d.jsx("p",{className:"mt-4",children:"Sorry, the page you are looking for does not exist."}),d.jsx(Yr,{to:"/",className:"mt-6 inline-block bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",children:"Go to Home"})]}),Mge=()=>{const e=()=>{localStorage.removeItem("isAuthenticated"),localStorage.removeItem("betaApplicationStatus"),window.location.href="/login"},t={title:"The Obsidian Gate - Issue 7",chaptersRead:5,totalChapters:10,readingWindowEnd:"August 30, 2025",feedbackWindowEnd:"September 7, 2025",launchDay:"September 15, 2025",downloadLink:"#"},r=[{id:1,description:"Read the Material",completed:!1},{id:2,description:"Submit Structured Feedback",completed:!1},{id:3,description:"Convert to Public Review",completed:!1}],n=[{name:"Beta Alumni",description:"Completed 1+ beta cycles"}],s=[{id:1,title:"New Feedback Form Available!",date:"August 20, 2025",content:"The feedback form for Issue 7 is now live. Please submit your thoughts by the deadline."},{id:2,title:"Reminder: Reading Window Ends Soon",date:"August 25, 2025",content:"Just a friendly reminder that the reading window for Issue 7 closes on August 30th."}];return d.jsxs("div",{className:"p-4",children:[d.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Welcome to the Beta Reader Portal!"}),d.jsx("p",{className:"mb-4",children:"This is your central hub for all active beta reading projects and resources."}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:["Current Beta Cycle: ",t.title]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Reading Window Ends:"})," ",t.readingWindowEnd]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Feedback Window Ends:"})," ",t.feedbackWindowEnd]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Launch Day:"})," ",t.launchDay]}),d.jsxs("p",{className:"mt-2",children:[d.jsx("strong",{children:"Your Progress:"})," Chapters Read ",t.chaptersRead,"/",t.totalChapters]}),d.jsx("a",{href:t.downloadLink,className:"mt-4 inline-block bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded",children:"Download Material"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mandatory Tasks"}),d.jsx("ul",{className:"list-none",children:r.map(i=>d.jsxs("li",{className:"flex items-center mb-1",children:[d.jsx("input",{type:"checkbox",checked:i.completed,readOnly:!0,className:"mr-2"}),i.description]},i.id))}),d.jsx("a",{href:"/beta/feedback",className:"mt-4 inline-block bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded",children:"Submit Feedback"})]})]})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Announcements"}),s.length>0?d.jsx("ul",{children:s.map(i=>d.jsxs("li",{className:"mb-4 pb-4 border-b last:border-b-0",children:[d.jsx("h3",{className:"font-bold text-lg",children:i.title}),d.jsx("p",{className:"text-sm text-muted-foreground",children:i.date}),d.jsx("p",{className:"mt-1",children:i.content})]},i.id))}):d.jsx("p",{className:"text-muted-foreground",children:"No new announcements at this time."})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Rewards & Recognition"}),n.length>0?d.jsx("div",{className:"flex flex-wrap gap-4",children:n.map(i=>d.jsxs("span",{className:"bg-muted text-muted-foreground text-sm font-medium px-3 py-1 rounded-full",children:[i.name," - ",i.description]},i.name))}):d.jsx("p",{className:"text-muted-foreground",children:"Complete your first beta cycle to earn your first badge!"}),d.jsx("p",{className:"mt-4 text-muted-foreground",children:"Upon successful completion of a beta cycle, you will receive a store discount coupon."})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Important Links"}),d.jsxs("ul",{className:"list-disc list-inside text-primary",children:[d.jsx("li",{children:d.jsx("a",{href:"/beta/handbook",className:"hover:underline",children:"Beta Reader Handbook"})}),d.jsx("li",{children:d.jsx("a",{href:"/beta/timeline",className:"hover:underline",children:"Operational Timeline"})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:underline",children:"Community Forum (Discord/Private Channel)"})}),d.jsx("li",{children:d.jsx("a",{href:"/beta/nda",className:"hover:underline",children:"View NDA"})})]})]}),d.jsx("button",{onClick:e,className:"mt-8 bg-destructive hover:bg-destructive-dark text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Logout"})]})},Ige=()=>{const e=localStorage.getItem("betaApplicationStatus")||"none";let t="",r="text-gray-800",n=null;switch(e){case"none":t="You have not yet submitted a beta reader application.",r="text-blue-700",n=d.jsx(Yr,{to:"/beta/application",className:"text-blue-500 hover:underline",children:"Apply now"});break;case"pending":t="Your beta reader application is currently under review. We will notify you of our decision soon.",r="text-yellow-700";break;case"accepted":t="Congratulations! Your beta reader application has been accepted. Welcome to the program!",r="text-green-700",n=d.jsx(Yr,{to:"/beta/portal",className:"text-green-500 hover:underline",children:"Go to Beta Portal"});break;case"rejected":t="We regret to inform you that your beta reader application was not successful at this time.",r="text-red-700";break;default:t="Unknown application status.",r="text-gray-800"}return d.jsxs("div",{className:"p-4 text-center",children:[d.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Beta Application Status"}),d.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r} bg-white`,children:[d.jsx("p",{className:"text-lg font-semibold mb-4",children:t}),n&&d.jsx("p",{className:"mt-4",children:n})]})]})},Lge=()=>{const{workId:e}=ax(),[t,r]=g.useState(null),[n,s]=g.useState(!0),[i,o]=g.useState(null),[a,l]=g.useState(null);g.useEffect(()=>{(async()=>{const{data:{user:u}}=await le.auth.getUser();u?l(u.id):(o("User not authenticated."),s(!1))})()},[]),g.useEffect(()=>{a&&e&&(async()=>{if(!(!a||!e))try{o(null);const u=await fetch(`http://localhost:3001/api/content/${e}`,{headers:{"x-user-id":a}}),h=await u.json();u.ok?r(h):o(h.message||"Failed to fetch content.")}catch(u){console.error("Error fetching work content:",u),o("An error occurred while fetching the work content.")}finally{s(!1)}})()},[a,e]);const c=async()=>{if(!(!a||!e))try{const u=await fetch(`http://localhost:3001/api/library/${a}/library/${e}/progress`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":a},body:JSON.stringify({is_finished:!0})});if(u.ok)alert("Work marked as finished!");else{const h=await u.json();alert(`Failed to mark as finished: ${h.message}`)}}catch(u){console.error("Error marking as finished:",u),alert("An error occurred while marking as finished.")}};return n?d.jsx("div",{className:"text-text-light",children:"Loading content..."}):i?d.jsxs("div",{className:"text-red-400",children:["Error: ",i]}):t?d.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"auto",fontFamily:"Arial, sans-serif"},children:[d.jsx("h2",{style:{fontSize:"2.5em",marginBottom:"10px",color:"#E0BBE4"},children:t.title}),d.jsx("p",{style:{fontSize:"1.1em",color:"#957DAD",marginBottom:"20px"},children:t.description}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{fontSize:"1.5em",marginBottom:"10px",color:"#FFC72C"},children:"Download Options:"}),t.content_urls.epub&&d.jsx("a",{href:t.content_urls.epub,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#4CAF50",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download EPUB"}),t.content_urls.pdf&&d.jsx("a",{href:t.content_urls.pdf,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#F44336",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download PDF"}),t.content_urls.mobi&&d.jsx("a",{href:t.content_urls.mobi,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#2196F3",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download MOBI"}),!t.content_urls.epub&&!t.content_urls.pdf&&!t.content_urls.mobi&&d.jsx("p",{style:{color:"#957DAD"},children:"No downloadable content available for this work."})]}),d.jsx("button",{onClick:c,style:{padding:"10px 20px",backgroundColor:"#8860D0",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",marginTop:"20px"},children:"Mark as Finished"})]}):d.jsx("div",{className:"text-text-light",children:"Content not found or not accessible."})},Fge=()=>{const{state:e,clearCart:t}=b6(),r=ca(),[n,s]=g.useState(!1),i=(l,c)=>new Intl.NumberFormat("en-US",{style:"currency",currency:c.toUpperCase()}).format(l),o=async()=>{s(!0),setTimeout(()=>{s(!1),t(),r("/store?checkout=success")},2e3)},a=()=>{r("/store")};return e.items.length===0?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx(YF,{className:"w-16 h-16 text-text-dark mx-auto mb-4"}),d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-2",children:"Your cart is empty"}),d.jsx("p",{className:"text-text-dark mb-6",children:"Add some products to your cart before checking out."}),d.jsx("button",{onClick:a,className:"px-6 py-3 bg-secondary text-background rounded-xl hover:bg-secondary-dark transition-colors",children:"Continue Shopping"})]})}):d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background",children:d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsxs("button",{onClick:a,className:"flex items-center space-x-2 text-text-light hover:text-secondary transition-colors mb-4",children:[d.jsx(qF,{className:"w-5 h-5"}),d.jsx("span",{children:"Back to Store"})]}),d.jsx("h1",{className:"text-4xl font-heading text-text-light mb-2",children:"Checkout"}),d.jsx("p",{className:"text-text-light/70",children:"Complete your purchase"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30",children:[d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-6",children:"Order Summary"}),d.jsx("div",{className:"space-y-4 mb-6",children:e.items.map(l=>d.jsxs("div",{className:"flex items-center justify-between p-4 bg-background/30 rounded-xl",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-text-light",children:l.title}),d.jsx("p",{className:"text-sm text-text-dark",children:l.format.toUpperCase()})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-secondary font-medium",children:i(l.price,l.currency)}),d.jsxs("p",{className:"text-sm text-text-dark",children:["Qty: ",l.quantity]})]})]},l.id))}),d.jsxs("div",{className:"border-t border-border/30 pt-4",children:[d.jsxs("div",{className:"flex justify-between items-center text-lg font-medium text-text-light mb-2",children:[d.jsx("span",{children:"Subtotal:"}),d.jsx("span",{children:i(e.total,"USD")})]}),d.jsxs("div",{className:"flex justify-between items-center text-sm text-text-dark mb-4",children:[d.jsx("span",{children:"Tax:"}),d.jsx("span",{children:"Calculated at checkout"})]}),d.jsxs("div",{className:"flex justify-between items-center text-xl font-bold text-secondary",children:[d.jsx("span",{children:"Total:"}),d.jsx("span",{children:i(e.total,"USD")})]})]})]}),d.jsxs("div",{className:"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30",children:[d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-6",children:"Payment Information"}),d.jsxs("form",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-text-light mb-4",children:"Customer Information"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"First Name"}),d.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter first name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Last Name"}),d.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter last name"})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Email"}),d.jsx("input",{type:"email",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter email address"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-text-light mb-4",children:"Payment Method"}),d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-background/30 rounded-xl border border-border/30",children:[d.jsx("input",{type:"radio",name:"payment",id:"card",defaultChecked:!0,className:"text-secondary focus:ring-secondary"}),d.jsxs("label",{htmlFor:"card",className:"flex items-center space-x-2 cursor-pointer",children:[d.jsx(Yee,{className:"w-5 h-5 text-secondary"}),d.jsx("span",{className:"text-text-light",children:"Credit/Debit Card"})]})]})})]}),d.jsxs("div",{className:"p-4 bg-accent/10 border border-accent/30 rounded-xl",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-accent mb-2",children:[d.jsx(ste,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:"Secure Checkout"})]}),d.jsx("p",{className:"text-sm text-text-light/70",children:"Your payment information is encrypted and secure. We never store your credit card details."})]}),d.jsx("button",{type:"button",onClick:o,disabled:n,className:"w-full bg-secondary text-background py-4 px-6 rounded-xl font-medium hover:bg-secondary-dark focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:ring-offset-2 focus:ring-offset-background-light transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-lg",children:n?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"w-5 h-5 border-2 border-background border-t-transparent rounded-full animate-spin"}),d.jsx("span",{children:"Processing..."})]}):`Complete Purchase - ${i(e.total,"USD")}`})]})]})]})]})})};var Rx={},PU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(PU);var YC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(YC);var GC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(GC);var Dx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",a="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const c=r[i];a?c==="\\"&&i+1<s?(i++,o+=r[i]):c===a?a="":o+=c:l?c==='"'||c==="'"?a=c:c==="]"?(l=!1,n.push(o),o=""):o+=c:c==="["?(l=!0,o&&(n.push(o),o="")):c==="."?o&&(n.push(o),o=""):o+=c,i++}return o&&n.push(o),n}e.toPath=t})(Dx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PU,r=YC,n=GC,s=Dx;function i(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?r.isDeepKey(l)?i(a,s.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let h=0;h<l.length;h++){if(u==null||t.isUnsafeProperty(l[h]))return c;u=u[l[h]]}return u===void 0?c:u}e.get=i})(Rx);var $ge=Rx.get;const pl=wi($ge);var RU={exports:{}},gt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FR;function zge(){if(FR)return gt;FR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function v(m){if(typeof m=="object"&&m!==null){var b=m.$$typeof;switch(b){case e:switch(m=m.type,m){case r:case s:case n:case l:case c:case f:return m;default:switch(m=m&&m.$$typeof,m){case o:case a:case h:case u:return m;case i:return m;default:return b}}case t:return b}}}return gt.ContextConsumer=i,gt.ContextProvider=o,gt.Element=e,gt.ForwardRef=a,gt.Fragment=r,gt.Lazy=h,gt.Memo=u,gt.Portal=t,gt.Profiler=s,gt.StrictMode=n,gt.Suspense=l,gt.SuspenseList=c,gt.isContextConsumer=function(m){return v(m)===i},gt.isContextProvider=function(m){return v(m)===o},gt.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===e},gt.isForwardRef=function(m){return v(m)===a},gt.isFragment=function(m){return v(m)===r},gt.isLazy=function(m){return v(m)===h},gt.isMemo=function(m){return v(m)===u},gt.isPortal=function(m){return v(m)===t},gt.isProfiler=function(m){return v(m)===s},gt.isStrictMode=function(m){return v(m)===n},gt.isSuspense=function(m){return v(m)===l},gt.isSuspenseList=function(m){return v(m)===c},gt.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===r||m===s||m===n||m===l||m===c||typeof m=="object"&&m!==null&&(m.$$typeof===h||m.$$typeof===u||m.$$typeof===o||m.$$typeof===i||m.$$typeof===a||m.$$typeof===p||m.getModuleId!==void 0)},gt.typeOf=v,gt}RU.exports=zge();var Uge=RU.exports,cn=e=>e===0?0:e>0?1:-1,As=e=>typeof e=="number"&&e!=+e,gc=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ee=e=>(typeof e=="number"||e instanceof Number)&&!As(e),so=e=>Ee(e)||typeof e=="string",qge=0,Wp=e=>{var t=++qge;return"".concat(e||"").concat(t)},Es=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ee(e)&&typeof e!="string")return r;var s;if(gc(e)){if(t==null)return r;var i=e.indexOf("%");s=t*parseFloat(e.slice(0,i))/100}else s=+e;return As(s)&&(s=r),n&&t!=null&&s>t&&(s=t),s},DU=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},$R=(e,t)=>Ee(e)&&Ee(t)?r=>e+r*(t-e):()=>t;function xf(e,t,r){return Ee(e)&&Ee(t)?e+r*(t-e):t}function MU(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):pl(n,t))===r)}var pr=e=>e===null||typeof e>"u",Fm=e=>pr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Bge=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ZC(e){if(typeof e!="string")return!1;var t=Bge;return t.includes(e)}var Wge=["viewBox","children"],zR=["points","pathLength"],UR={svg:Wge,polygon:zR,polyline:zR},JC=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(g.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{ZC(s)&&(n[s]=i=>r[s](r,i))}),n},Vge=(e,t,r)=>n=>(e(t,r,n),null),QC=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];ZC(s)&&typeof i=="function"&&(n||(n={}),n[s]=Vge(i,t,r))}),n},Hge=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function IU(e){if(typeof e!="string")return!1;var t=Hge;return t.includes(e)}function _l(e){var t=Object.entries(e).filter(r=>{var[n]=r;return IU(n)});return Object.fromEntries(t)}var qR=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",BR=null,T_=null,LU=e=>{if(e===BR&&Array.isArray(T_))return T_;var t=[];return g.Children.forEach(e,r=>{pr(r)||(Uge.isFragment(r)?t=t.concat(LU(r.props.children)):t.push(r))}),T_=t,BR=e,t};function Mx(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>qR(s)):n=[qR(t)],LU(e).forEach(s=>{var i=pl(s,"type.displayName")||pl(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var FU=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Kge=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var i=(s=n&&(UR==null?void 0:UR[n]))!==null&&s!==void 0?s:[],o=t.startsWith("data-"),a=typeof e!="function"&&(!!n&&i.includes(t)||IU(t)),l=!!r&&ZC(t);return o||a||l},qt=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;Kge((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},Yge=["children","width","height","viewBox","className","style","title","desc"];function Fk(){return Fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fk.apply(null,arguments)}function Gge(e,t){if(e==null)return{};var r,n,s=Zge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Zge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XC=g.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:a,title:l,desc:c}=e,u=Gge(e,Yge),h=i||{width:n,height:s,x:0,y:0},f=st("recharts-surface",o);return g.createElement("svg",Fk({},qt(u,!0,"svg"),{className:f,width:n,height:s,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),g.createElement("title",null,l),g.createElement("desc",null,c),r)}),Jge=["children","className"];function $k(){return $k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$k.apply(null,arguments)}function Qge(e,t){if(e==null)return{};var r,n,s=Xge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Xge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Os=g.forwardRef((e,t)=>{var{children:r,className:n}=e,s=Qge(e,Jge),i=st("recharts-layer",n);return g.createElement("g",$k({className:i},qt(s,!0),{ref:t}),r)}),$U=g.createContext(null),eye=()=>g.useContext($U);function Et(e){return function(){return e}}const zU=Math.cos,Lv=Math.sin,ki=Math.sqrt,Fv=Math.PI,Ix=2*Fv,zk=Math.PI,Uk=2*zk,oc=1e-6,tye=Uk-oc;function UU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function rye(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return UU;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class nye{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?UU:rye(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=n-t,c=s-r,u=o-t,h=a-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>oc)if(!(Math.abs(h*l-c*u)>oc)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,v=s-a,m=l*l+c*c,b=p*p+v*v,x=Math.sqrt(m),w=Math.sqrt(f),_=i*Math.tan((zk-Math.acos((m+f-b)/(2*x*w)))/2),j=_/w,k=_/x;Math.abs(j-1)>oc&&this._append`L${t+j*u},${r+j*h}`,this._append`A${i},${i},0,0,${+(h*p>u*v)},${this._x1=t+k*l},${this._y1=r+k*c}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(s),l=n*Math.sin(s),c=t+a,u=r+l,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>oc||Math.abs(this._y1-u)>oc)&&this._append`L${c},${u}`,n&&(f<0&&(f=f%Uk+Uk),f>tye?this._append`A${n},${n},0,1,${h},${t-a},${r-l}A${n},${n},0,1,${h},${this._x1=c},${this._y1=u}`:f>oc&&this._append`A${n},${n},0,${+(f>=zk)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function eE(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new nye(t)}function tE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qU(e){this._context=e}qU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Lx(e){return new qU(e)}function BU(e){return e[0]}function WU(e){return e[1]}function VU(e,t){var r=Et(!0),n=null,s=Lx,i=null,o=eE(a);e=typeof e=="function"?e:e===void 0?BU:Et(e),t=typeof t=="function"?t:t===void 0?WU:Et(t);function a(l){var c,u=(l=tE(l)).length,h,f=!1,p;for(n==null&&(i=s(p=o())),c=0;c<=u;++c)!(c<u&&r(h=l[c],c,l))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,c,l),+t(h,c,l));if(p)return i=null,p+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:Et(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:Et(+l),a):t},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Et(!!l),a):r},a.curve=function(l){return arguments.length?(s=l,n!=null&&(i=s(n)),a):s},a.context=function(l){return arguments.length?(l==null?n=i=null:i=s(n=l),a):n},a}function sy(e,t,r){var n=null,s=Et(!0),i=null,o=Lx,a=null,l=eE(c);e=typeof e=="function"?e:e===void 0?BU:Et(+e),t=typeof t=="function"?t:Et(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?WU:Et(+r);function c(h){var f,p,v,m=(h=tE(h)).length,b,x=!1,w,_=new Array(m),j=new Array(m);for(i==null&&(a=o(w=l())),f=0;f<=m;++f){if(!(f<m&&s(b=h[f],f,h))===x)if(x=!x)p=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),v=f-1;v>=p;--v)a.point(_[v],j[v]);a.lineEnd(),a.areaEnd()}x&&(_[f]=+e(b,f,h),j[f]=+t(b,f,h),a.point(n?+n(b,f,h):_[f],r?+r(b,f,h):j[f]))}if(w)return a=null,w+""||null}function u(){return VU().defined(s).curve(o).context(i)}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:Et(+h),n=null,c):e},c.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Et(+h),c):e},c.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Et(+h),c):n},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:Et(+h),r=null,c):t},c.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Et(+h),c):t},c.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Et(+h),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Et(!!h),c):s},c.curve=function(h){return arguments.length?(o=h,i!=null&&(a=o(i)),c):o},c.context=function(h){return arguments.length?(h==null?i=a=null:a=o(i=h),c):i},c}class HU{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function sye(e){return new HU(e,!0)}function iye(e){return new HU(e,!1)}const rE={draw(e,t){const r=ki(t/Fv);e.moveTo(r,0),e.arc(0,0,r,0,Ix)}},oye={draw(e,t){const r=ki(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},KU=ki(1/3),aye=KU*2,lye={draw(e,t){const r=ki(t/aye),n=r*KU;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},cye={draw(e,t){const r=ki(t),n=-r/2;e.rect(n,n,r,r)}},uye=.8908130915292852,YU=Lv(Fv/10)/Lv(7*Fv/10),dye=Lv(Ix/10)*YU,hye=-zU(Ix/10)*YU,fye={draw(e,t){const r=ki(t*uye),n=dye*r,s=hye*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Ix*i/5,a=zU(o),l=Lv(o);e.lineTo(l*r,-a*r),e.lineTo(a*n-l*s,l*n+a*s)}e.closePath()}},A_=ki(3),pye={draw(e,t){const r=-ki(t/(A_*3));e.moveTo(0,r*2),e.lineTo(-A_*r,-r),e.lineTo(A_*r,-r),e.closePath()}},ds=-.5,hs=ki(3)/2,qk=1/ki(12),mye=(qk/2+1)*3,gye={draw(e,t){const r=ki(t/mye),n=r/2,s=r*qk,i=n,o=r*qk+r,a=-i,l=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(a,l),e.lineTo(ds*n-hs*s,hs*n+ds*s),e.lineTo(ds*i-hs*o,hs*i+ds*o),e.lineTo(ds*a-hs*l,hs*a+ds*l),e.lineTo(ds*n+hs*s,ds*s-hs*n),e.lineTo(ds*i+hs*o,ds*o-hs*i),e.lineTo(ds*a+hs*l,ds*l-hs*a),e.closePath()}};function yye(e,t){let r=null,n=eE(s);e=typeof e=="function"?e:Et(e||rE),t=typeof t=="function"?t:Et(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Et(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Et(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function $v(){}function zv(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function GU(e){this._context=e}GU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:zv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:zv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vye(e){return new GU(e)}function ZU(e){this._context=e}ZU.prototype={areaStart:$v,areaEnd:$v,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:zv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bye(e){return new ZU(e)}function JU(e){this._context=e}JU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:zv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xye(e){return new JU(e)}function QU(e){this._context=e}QU.prototype={areaStart:$v,areaEnd:$v,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function wye(e){return new QU(e)}function WR(e){return e<0?-1:1}function VR(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),a=(i*s+o*n)/(n+s);return(WR(i)+WR(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function HR(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function O_(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,a=(i-n)/3;e._context.bezierCurveTo(n+a,s+a*t,i-a,o-a*r,i,o)}function Uv(e){this._context=e}Uv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:O_(this,this._t0,HR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,O_(this,HR(this,r=VR(this,e,t)),r);break;default:O_(this,this._t0,r=VR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function XU(e){this._context=new eq(e)}(XU.prototype=Object.create(Uv.prototype)).point=function(e,t){Uv.prototype.point.call(this,t,e)};function eq(e){this._context=e}eq.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function _ye(e){return new Uv(e)}function jye(e){return new XU(e)}function tq(e){this._context=e}tq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=KR(e),s=KR(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function KR(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function kye(e){return new tq(e)}function Fx(e,t){this._context=e,this._t=t}Fx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Sye(e){return new Fx(e,.5)}function Nye(e){return new Fx(e,0)}function Cye(e){return new Fx(e,1)}function Jd(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,a=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<a;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Bk(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Eye(e,t){return e[t]}function Tye(e){const t=[];return t.key=e,t}function Aye(){var e=Et([]),t=Bk,r=Jd,n=Eye;function s(i){var o=Array.from(e.apply(this,arguments),Tye),a,l=o.length,c=-1,u;for(const h of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+n(h,o[a].key,c,i)]).data=h;for(a=0,u=tE(t(o));a<l;++a)o[u[a]].index=a;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Et(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Et(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Bk:typeof i=="function"?i:Et(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Jd,s):r},s}function Oye(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}Jd(e,t)}}function Pye(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,a=0;o<s;++o)a+=e[o][r][1]||0;n[r][1]+=n[r][0]=-a/2}Jd(e,t)}}function Rye(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var a=0,l=0,c=0;a<o;++a){for(var u=e[t[a]],h=u[n][1]||0,f=u[n-1][1]||0,p=(h-f)/2,v=0;v<a;++v){var m=e[t[v]],b=m[n][1]||0,x=m[n-1][1]||0;p+=b-x}l+=h,c+=p*h}s[n-1][1]+=s[n-1][0]=r,l&&(r-=c/l)}s[n-1][1]+=s[n-1][0]=r,Jd(e,t)}}var Dye=["type","size","sizeType"];function Wk(){return Wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wk.apply(null,arguments)}function YR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function GR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YR(Object(r),!0).forEach(function(n){Mye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mye(e,t,r){return(t=Iye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iye(e){var t=Lye(e,"string");return typeof t=="symbol"?t:t+""}function Lye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fye(e,t){if(e==null)return{};var r,n,s=$ye(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $ye(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rq={symbolCircle:rE,symbolCross:oye,symbolDiamond:lye,symbolSquare:cye,symbolStar:fye,symbolTriangle:pye,symbolWye:gye},zye=Math.PI/180,Uye=e=>{var t="symbol".concat(Fm(e));return rq[t]||rE},qye=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*zye;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Bye=(e,t)=>{rq["symbol".concat(Fm(e))]=t},nE=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=Fye(e,Dye),i=GR(GR({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var h=Uye(t),f=yye().type(h).size(qye(r,n,t));return f()},{className:a,cx:l,cy:c}=i,u=qt(i,!0);return l===+l&&c===+c&&r===+r?g.createElement("path",Wk({},u,{className:st("recharts-symbols",a),transform:"translate(".concat(l,", ").concat(c,")"),d:o()})):null};nE.registerSymbol=Bye;function Vk(){return Vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vk.apply(null,arguments)}function ZR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZR(Object(r),!0).forEach(function(n){sE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sE(e,t,r){return(t=Vye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vye(e){var t=Hye(e,"string");return typeof t=="symbol"?t:t+""}function Hye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fs=32;class iE extends g.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,s=fs/2,i=fs/6,o=fs/3,a=t.inactive?n:t.color,l=r??t.type;if(l==="none")return null;if(l==="plainline")return g.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:fs,y2:s,className:"recharts-legend-icon"});if(l==="line")return g.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(fs,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(l==="rect")return g.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(fs/8,"h").concat(fs,"v").concat(fs*3/4,"h").concat(-fs,"z"),className:"recharts-legend-icon"});if(g.isValidElement(t.legendIcon)){var c=Wye({},t);return delete c.legendIcon,g.cloneElement(t.legendIcon,c)}return g.createElement(nE,{fill:a,cx:s,cy:s,size:fs,sizeType:"diameter",type:l})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:i,iconType:o}=this.props,a={x:0,y:0,width:fs,height:fs},l={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var f=u.formatter||s,p=st({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,m=f?f(u.value,u,h):u.value;return g.createElement("li",Vk({className:p,style:l,key:"legend-item-".concat(h)},QC(this.props,u,h)),g.createElement(XC,{width:r,height:r,viewBox:a,style:c,"aria-label":"".concat(m," legend icon")},this.renderIcon(u,o)),g.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return g.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}sE(iE,"displayName","Legend");sE(iE,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var nq={},sq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],a=n(o);s.has(a)||s.set(a,o)}return Array.from(s.values())}e.uniqBy=t})(sq);var oE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(oE);var iq={},$x={},oq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(oq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oq;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})($x);var aq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(aq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$x,r=aq;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(iq);var lq={},cq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rx;function r(n){return function(s){return t.get(s,n)}}e.property=r})(cq);var uq={},JR={},QR={},aE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(aE);var lE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(lE);var zx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(zx);var XR;function Kye(){return XR||(XR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cE(),r=aE,n=lE,s=zx;function i(h,f,p){return typeof p!="function"?t.isMatch(h,f):o(h,f,function v(m,b,x,w,_,j){const k=p(m,b,x,w,_,j);return k!==void 0?!!k:o(m,b,v,j)},new Map)}function o(h,f,p,v){if(f===h)return!0;switch(typeof f){case"object":return a(h,f,p,v);case"function":return Object.keys(f).length>0?o(h,{...f},p,v):s.eq(h,f);default:return r.isObject(h)?typeof f=="string"?f==="":!0:s.eq(h,f)}}function a(h,f,p,v){if(f==null)return!0;if(Array.isArray(f))return c(h,f,p,v);if(f instanceof Map)return l(h,f,p,v);if(f instanceof Set)return u(h,f,p,v);const m=Object.keys(f);if(h==null)return m.length===0;if(m.length===0)return!0;if(v&&v.has(f))return v.get(f)===h;v&&v.set(f,h);try{for(let b=0;b<m.length;b++){const x=m[b];if(!n.isPrimitive(h)&&!(x in h)||f[x]===void 0&&h[x]!==void 0||f[x]===null&&h[x]!==null||!p(h[x],f[x],x,h,f,v))return!1}return!0}finally{v&&v.delete(f)}}function l(h,f,p,v){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[m,b]of f.entries()){const x=h.get(m);if(p(x,b,m,h,f,v)===!1)return!1}return!0}function c(h,f,p,v){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const m=new Set;for(let b=0;b<f.length;b++){const x=f[b];let w=!1;for(let _=0;_<h.length;_++){if(m.has(_))continue;const j=h[_];let k=!1;if(p(j,x,b,h,f,v)&&(k=!0),k){m.add(_),w=!0;break}}if(!w)return!1}return!0}function u(h,f,p,v){return f.size===0?!0:h instanceof Set?c([...h],[...f],p,v):!1}e.isMatchWith=i,e.isSetMatch=u}(QR)),QR}var eD;function cE(){return eD||(eD=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kye();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(JR)),JR}var dq={},uE={},dE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(dE);var Ux={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Ux);var qx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",p="[object Object]",v="[object Error]",m="[object DataView]",b="[object Uint8Array]",x="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",j="[object BigUint64Array]",k="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",C="[object BigInt64Array]",T="[object Float32Array]",O="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=u,e.bigInt64ArrayTag=C,e.bigUint64ArrayTag=j,e.booleanTag=s,e.dataViewTag=m,e.dateTag=a,e.errorTag=v,e.float32ArrayTag=T,e.float64ArrayTag=O,e.functionTag=h,e.int16ArrayTag=S,e.int32ArrayTag=E,e.int8ArrayTag=k,e.mapTag=l,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=x})(qx);var hq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(hq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dE,r=Ux,n=qx,s=lE,i=hq;function o(u,h){return a(u,void 0,u,new Map,h)}function a(u,h,f,p=new Map,v=void 0){const m=v==null?void 0:v(u,h,f,p);if(m!==void 0)return m;if(s.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const b=new Array(u.length);p.set(u,b);for(let x=0;x<u.length;x++)b[x]=a(u[x],x,f,p,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;p.set(u,b);for(const[x,w]of u)b.set(x,a(w,x,f,p,v));return b}if(u instanceof Set){const b=new Set;p.set(u,b);for(const x of u)b.add(a(x,void 0,f,p,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,b);for(let x=0;x<u.length;x++)b[x]=a(u[x],x,f,p,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,b),l(b,u,f,p,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return p.set(u,b),l(b,u,f,p,v),b}if(u instanceof Blob){const b=new Blob([u],{type:u.type});return p.set(u,b),l(b,u,f,p,v),b}if(u instanceof Error){const b=new u.constructor;return p.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,l(b,u,f,p,v),b}if(typeof u=="object"&&c(u)){const b=Object.create(Object.getPrototypeOf(u));return p.set(u,b),l(b,u,f,p,v),b}return u}function l(u,h,f=u,p,v){const m=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<m.length;b++){const x=m[b],w=Object.getOwnPropertyDescriptor(u,x);(w==null||w.writable)&&(u[x]=a(h[x],x,f,p,v))}}function c(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=a,e.copyProperties=l})(uE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uE;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(dq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cE(),r=dq;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(uq);var fq={},pq={},mq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uE,r=qx;function n(s,i){return t.cloneDeepWith(s,(o,a,l,c)=>{const u=i==null?void 0:i(o,a,l,c);if(u!==void 0)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n})(mq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mq;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(pq);var gq={},hE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(hE);var yq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ux;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(yq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YC,r=hE,n=yq,s=Dx;function i(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&t.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=s.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const h=l[u];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}e.has=i})(gq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cE(),r=GC,n=pq,s=Rx,i=gq;function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=r.toKey(a);break}}return l=n.cloneDeep(l),function(c){const u=s.get(c,a);return u===void 0?i.has(c,a):l===void 0?u===void 0:t.isMatch(u,l)}}e.matchesProperty=o})(fq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oE,r=cq,n=uq,s=fq;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(lq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sq,r=oE,n=iq,s=lq;function i(o,a=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(a)):[]}e.uniqBy=i})(nq);var Yye=nq.uniqBy;const tD=wi(Yye);function vq(e,t,r){return t===!0?tD(e,r):typeof t=="function"?tD(e,t):e}var bq={exports:{}},P_={},rD={exports:{}},R_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nD;function Gye(){if(nD)return R_;nD=1;var e=ue;function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function a(h,f){var p=f(),v=n({inst:{value:p,getSnapshot:f}}),m=v[0].inst,b=v[1];return i(function(){m.value=p,m.getSnapshot=f,l(m)&&b({inst:m})},[h,p,f]),s(function(){return l(m)&&b({inst:m}),h(function(){l(m)&&b({inst:m})})},[h]),o(p),p}function l(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!r(h,p)}catch{return!0}}function c(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return R_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,R_}var sD;function Zye(){return sD||(sD=1,rD.exports=Gye()),rD.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iD;function Jye(){if(iD)return P_;iD=1;var e=ue,t=Zye();function r(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,l=e.useDebugValue;return P_.useSyncExternalStoreWithSelector=function(c,u,h,f,p){var v=i(null);if(v.current===null){var m={hasValue:!1,value:null};v.current=m}else m=v.current;v=a(function(){function x(S){if(!w){if(w=!0,_=S,S=f(S),p!==void 0&&m.hasValue){var E=m.value;if(p(E,S))return j=E}return j=S}if(E=j,n(_,S))return E;var C=f(S);return p!==void 0&&p(E,C)?(_=S,E):(_=S,j=C)}var w=!1,_,j,k=h===void 0?null:h;return[function(){return x(u())},k===null?void 0:function(){return x(k())}]},[u,h,f,p]);var b=s(c,v[0],v[1]);return o(function(){m.hasValue=!0,m.value=b},[b]),l(b),b},P_}bq.exports=Jye();var Qye=bq.exports,fE=g.createContext(null),Xye=e=>e,Wt=()=>{var e=g.useContext(fE);return e?e.store.dispatch:Xye},Ky=()=>{},eve=()=>Ky,tve=(e,t)=>e===t;function Me(e){var t=g.useContext(fE);return Qye.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:eve,t?t.store.getState:Ky,t?t.store.getState:Ky,t?e:Ky,tve)}function rve(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function nve(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function sve(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var oD=e=>Array.isArray(e)?e:[e];function ive(e){const t=Array.isArray(e[0])?e[0]:e;return sve(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function ove(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var ave=class{constructor(e){this.value=e}deref(){return this.value}},lve=typeof WeakRef<"u"?WeakRef:ave,cve=0,aD=1;function iy(){return{s:cve,v:void 0,o:null,p:null}}function xq(e,t={}){let r=iy();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var a;let l=r;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const v=arguments[f];if(typeof v=="function"||typeof v=="object"&&v!==null){let m=l.o;m===null&&(l.o=m=new WeakMap);const b=m.get(v);b===void 0?(l=iy(),m.set(v,l)):l=b}else{let m=l.p;m===null&&(l.p=m=new Map);const b=m.get(v);b===void 0?(l=iy(),m.set(v,l)):l=b}}const u=l;let h;if(l.s===aD)h=l.v;else if(h=e.apply(null,arguments),i++,n){const f=((a=s==null?void 0:s.deref)==null?void 0:a.call(s))??s;f!=null&&n(f,h)&&(h=f,i!==0&&i--),s=typeof h=="object"&&h!==null||typeof h=="function"?new lve(h):h}return u.s=aD,u.v=h,h}return o.clearCache=()=>{r=iy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function uve(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,a,l={},c=s.pop();typeof c=="object"&&(l=c,c=s.pop()),rve(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...r,...l},{memoize:h,memoizeOptions:f=[],argsMemoize:p=xq,argsMemoizeOptions:v=[]}=u,m=oD(f),b=oD(v),x=ive(s),w=h(function(){return i++,c.apply(null,arguments)},...m),_=p(function(){o++;const j=ove(x,arguments);return a=w.apply(null,j),a},...b);return Object.assign(_,{resultFunc:c,memoizedResultFunc:w,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var Z=uve(xq),dve=Object.assign((e,t=Z)=>{nve(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,a)=>(i[r[a]]=o,i),{}))},{withTypes:()=>dve}),wq={},_q={},jq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),a=t(s);if(o===a&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?a-o:o-a}return 0};e.compareValues=r})(jq);var kq={},pE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(pE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pE,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(kq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jq,r=kq,n=Dx;function s(i,o,a,l){if(i==null)return[];a=l?void 0:a,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(f=>String(f));const c=(f,p)=>{let v=f;for(let m=0;m<p.length&&v!=null;++m)v=v[p[m]];return v},u=(f,p)=>p==null||f==null?p:typeof f=="object"&&"key"in f?Object.hasOwn(p,f.key)?p[f.key]:c(p,f.path):typeof f=="function"?f(p):Array.isArray(f)?c(p,f):typeof p=="object"?p[f]:p,h=o.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||r.isKey(f)?f:{key:f,path:n.toPath(f)}));return i.map(f=>({original:f,criteria:h.map(p=>u(p,f))})).slice().sort((f,p)=>{for(let v=0;v<h.length;v++){const m=t.compareValues(f.criteria[v],p.criteria[v],a[v]);if(m!==0)return m}return 0}).map(f=>f.original)}e.orderBy=s})(_q);var Sq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<i?o(u,l+1):s.push(u)}};return o(r,0),s}e.flatten=t})(Sq);var mE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hE,r=$x,n=aE,s=zx;function i(o,a,l){return n.isObject(l)&&(typeof a=="number"&&r.isArrayLike(l)&&t.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?s.eq(l[a],o):!1}e.isIterateeCall=i})(mE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_q,r=Sq,n=mE;function s(i,...o){const a=o.length;return a>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:a>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})(wq);var hve=wq.sortBy;const Bx=wi(hve);var Nq=e=>e.legend.settings,fve=e=>e.legend.size,pve=e=>e.legend.payload,mve=Z([pve,Nq],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Bx(n,r):n});function gve(){return Me(mve)}var oy=1;function Cq(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=g.useState({height:0,left:0,top:0,width:0}),n=g.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>oy||Math.abs(o.left-t.left)>oy||Math.abs(o.top-t.top)>oy||Math.abs(o.width-t.width)>oy)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Br(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yve=typeof Symbol=="function"&&Symbol.observable||"@@observable",lD=yve,D_=()=>Math.random().toString(36).substring(7).split("").join("."),vve={INIT:`@@redux/INIT${D_()}`,REPLACE:`@@redux/REPLACE${D_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${D_()}`},qv=vve;function gE(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Eq(e,t,r){if(typeof e!="function")throw new Error(Br(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Br(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Br(1));return r(Eq)(e,t)}let n=e,s=t,i=new Map,o=i,a=0,l=!1;function c(){o===i&&(o=new Map,i.forEach((m,b)=>{o.set(b,m)}))}function u(){if(l)throw new Error(Br(3));return s}function h(m){if(typeof m!="function")throw new Error(Br(4));if(l)throw new Error(Br(5));let b=!0;c();const x=a++;return o.set(x,m),function(){if(b){if(l)throw new Error(Br(6));b=!1,c(),o.delete(x),i=null}}}function f(m){if(!gE(m))throw new Error(Br(7));if(typeof m.type>"u")throw new Error(Br(8));if(typeof m.type!="string")throw new Error(Br(17));if(l)throw new Error(Br(9));try{l=!0,s=n(s,m)}finally{l=!1}return(i=o).forEach(b=>{b()}),m}function p(m){if(typeof m!="function")throw new Error(Br(10));n=m,f({type:qv.REPLACE})}function v(){const m=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(Br(11));function x(){const w=b;w.next&&w.next(u())}return x(),{unsubscribe:m(x)}},[lD](){return this}}}return f({type:qv.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:p,[lD]:v}}function bve(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:qv.INIT})>"u")throw new Error(Br(12));if(typeof r(void 0,{type:qv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Br(13))})}function Tq(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{bve(r)}catch(i){s=i}return function(i={},o){if(s)throw s;let a=!1;const l={};for(let c=0;c<n.length;c++){const u=n[c],h=r[u],f=i[u],p=h(f,o);if(typeof p>"u")throw o&&o.type,new Error(Br(14));l[u]=p,a=a||p!==f}return a=a||n.length!==Object.keys(i).length,a?l:i}}function Bv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function xve(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Br(15))};const o={getState:s.getState,dispatch:(l,...c)=>i(l,...c)},a=e.map(l=>l(o));return i=Bv(...a)(s.dispatch),{...s,dispatch:i}}}function Aq(e){return gE(e)&&"type"in e&&typeof e.type=="string"}var Oq=Symbol.for("immer-nothing"),cD=Symbol.for("immer-draftable"),ss=Symbol.for("immer-state");function ui(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Qd=Object.getPrototypeOf;function Wc(e){return!!e&&!!e[ss]}function Qo(e){var t;return e?Pq(e)||Array.isArray(e)||!!e[cD]||!!((t=e.constructor)!=null&&t[cD])||Vx(e)||Hx(e):!1}var wve=Object.prototype.constructor.toString();function Pq(e){if(!e||typeof e!="object")return!1;const t=Qd(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===wve}function Wv(e,t){Wx(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Wx(e){const t=e[ss];return t?t.type_:Array.isArray(e)?1:Vx(e)?2:Hx(e)?3:0}function Hk(e,t){return Wx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Rq(e,t,r){const n=Wx(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function _ve(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Vx(e){return e instanceof Map}function Hx(e){return e instanceof Set}function ac(e){return e.copy_||e.base_}function Kk(e,t){if(Vx(e))return new Map(e);if(Hx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Pq(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ss];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Qd(e),n)}else{const n=Qd(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function yE(e,t=!1){return Kx(e)||Wc(e)||!Qo(e)||(Wx(e)>1&&(e.set=e.add=e.clear=e.delete=jve),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>yE(n,!0))),e}function jve(){ui(2)}function Kx(e){return Object.isFrozen(e)}var kve={};function Vc(e){const t=kve[e];return t||ui(0,e),t}var Vp;function Dq(){return Vp}function Sve(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function uD(e,t){t&&(Vc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Yk(e){Gk(e),e.drafts_.forEach(Nve),e.drafts_=null}function Gk(e){e===Vp&&(Vp=e.parent_)}function dD(e){return Vp=Sve(Vp,e)}function Nve(e){const t=e[ss];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hD(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ss].modified_&&(Yk(t),ui(4)),Qo(e)&&(e=Vv(t,e),t.parent_||Hv(t,e)),t.patches_&&Vc("Patches").generateReplacementPatches_(r[ss].base_,e,t.patches_,t.inversePatches_)):e=Vv(t,r,[]),Yk(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Oq?e:void 0}function Vv(e,t,r){if(Kx(t))return t;const n=t[ss];if(!n)return Wv(t,(s,i)=>fD(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Hv(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),Wv(i,(a,l)=>fD(e,n,s,a,l,r,o)),Hv(e,s,!1),r&&e.patches_&&Vc("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function fD(e,t,r,n,s,i,o){if(Wc(s)){const a=i&&t&&t.type_!==3&&!Hk(t.assigned_,n)?i.concat(n):void 0,l=Vv(e,s,a);if(Rq(r,n,l),Wc(l))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(Qo(s)&&!Kx(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Vv(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Hv(e,s)}}function Hv(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yE(t,r)}function Cve(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Dq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=vE;r&&(s=[n],i=Hp);const{revoke:o,proxy:a}=Proxy.revocable(s,i);return n.draft_=a,n.revoke_=o,a}var vE={get(e,t){if(t===ss)return e;const r=ac(e);if(!Hk(r,t))return Eve(e,r,t);const n=r[t];return e.finalized_||!Qo(n)?n:n===M_(e.base_,t)?(I_(e),e.copy_[t]=Jk(n,e)):n},has(e,t){return t in ac(e)},ownKeys(e){return Reflect.ownKeys(ac(e))},set(e,t,r){const n=Mq(ac(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=M_(ac(e),t),i=s==null?void 0:s[ss];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(_ve(r,s)&&(r!==void 0||Hk(e.base_,t)))return!0;I_(e),Zk(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return M_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,I_(e),Zk(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ac(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ui(11)},getPrototypeOf(e){return Qd(e.base_)},setPrototypeOf(){ui(12)}},Hp={};Wv(vE,(e,t)=>{Hp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Hp.deleteProperty=function(e,t){return Hp.set.call(this,e,t,void 0)};Hp.set=function(e,t,r){return vE.set.call(this,e[0],t,r,e[0])};function M_(e,t){const r=e[ss];return(r?ac(r):e)[t]}function Eve(e,t,r){var n;const s=Mq(t,r);return s?"value"in s?s.value:(n=s.get)==null?void 0:n.call(e.draft_):void 0}function Mq(e,t){if(!(t in e))return;let r=Qd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Qd(r)}}function Zk(e){e.modified_||(e.modified_=!0,e.parent_&&Zk(e.parent_))}function I_(e){e.copy_||(e.copy_=Kk(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Tve=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(a=i,...l){return o.produce(a,c=>r.call(this,c,...l))}}typeof r!="function"&&ui(6),n!==void 0&&typeof n!="function"&&ui(7);let s;if(Qo(t)){const i=dD(this),o=Jk(t,void 0);let a=!0;try{s=r(o),a=!1}finally{a?Yk(i):Gk(i)}return uD(i,n),hD(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===Oq&&(s=void 0),this.autoFreeze_&&yE(s,!0),n){const i=[],o=[];Vc("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else ui(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,a=>t(a,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Qo(e)||ui(8),Wc(e)&&(e=Bo(e));const t=dD(this),r=Jk(e,void 0);return r[ss].isManual_=!0,Gk(t),r}finishDraft(e,t){const r=e&&e[ss];(!r||!r.isManual_)&&ui(9);const{scope_:n}=r;return uD(n,t),hD(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Vc("Patches").applyPatches_;return Wc(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Jk(e,t){const r=Vx(e)?Vc("MapSet").proxyMap_(e,t):Hx(e)?Vc("MapSet").proxySet_(e,t):Cve(e,t);return(t?t.scope_:Dq()).drafts_.push(r),r}function Bo(e){return Wc(e)||ui(10,e),Iq(e)}function Iq(e){if(!Qo(e)||Kx(e))return e;const t=e[ss];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Kk(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Kk(e,!0);return Wv(r,(n,s)=>{Rq(r,n,Iq(s))}),t&&(t.finalized_=!1),r}var is=new Tve,Lq=is.produce;is.produceWithPatches.bind(is);is.setAutoFreeze.bind(is);is.setUseStrictShallowCopy.bind(is);is.applyPatches.bind(is);is.createDraft.bind(is);is.finishDraft.bind(is);function Fq(e){return({dispatch:t,getState:r})=>n=>s=>typeof s=="function"?s(t,r,e):n(s)}var Ave=Fq(),Ove=Fq,Pve=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Bv:Bv.apply(null,arguments)};function Ps(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(ns(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Aq(n)&&n.type===e,r}var $q=class Wf extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Wf.prototype)}static get[Symbol.species](){return Wf}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Wf(...t[0].concat(this)):new Wf(...t.concat(this))}};function pD(e){return Qo(e)?Lq(e,()=>{}):e}function ay(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Rve(e){return typeof e=="boolean"}var Dve=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:s=!0}=e??{};let i=new $q;return t&&(Rve(t)?i.push(Ave):i.push(Ove(t.extraArgument))),i},Mve="RTK_autoBatch",mD=e=>t=>{setTimeout(t,e)},Ive=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const a=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mD(10):e.type==="callback"?e.queueNotification:mD(e.timeout),c=()=>{o=!1,i&&(i=!1,a.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>s&&u(),f=n.subscribe(h);return a.add(u),()=>{f(),a.delete(u)}},dispatch(u){var h;try{return s=!((h=u==null?void 0:u.meta)!=null&&h[Mve]),i=!s,i&&(o||(o=!0,l(c))),n.dispatch(u)}finally{s=!0}}})},Lve=e=>function(t){const{autoBatch:r=!0}=t??{};let n=new $q(e);return r&&n.push(Ive(typeof r=="object"?r:void 0)),n};function Fve(e){const t=Dve(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(gE(r))a=Tq(r);else throw new Error(ns(1));let l;typeof n=="function"?l=n(t):l=t();let c=Bv;s&&(c=Pve({trace:!1,...typeof s=="object"&&s}));const u=xve(...l),h=Lve(u);let f=typeof o=="function"?o(h):h();const p=c(...f);return Eq(a,i,p)}function zq(e){const t={},r=[];let n;const s={addCase(i,o){const a=typeof i=="string"?i:i.type;if(!a)throw new Error(ns(28));if(a in t)throw new Error(ns(29));return t[a]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function $ve(e){return typeof e=="function"}function zve(e,t){let[r,n,s]=zq(t),i;if($ve(e))i=()=>pD(e());else{const a=pD(e);i=()=>a}function o(a=i(),l){let c=[r[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[s]),c.reduce((u,h)=>{if(h)if(Wc(u)){const f=h(u,l);return f===void 0?u:f}else{if(Qo(u))return Lq(u,f=>h(f,l));{const f=h(u,l);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},a)}return o.getInitialState=i,o}var Uve="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",qve=(e=21)=>{let t="",r=e;for(;r--;)t+=Uve[Math.random()*64|0];return t},Bve=Symbol.for("rtk-slice-createasyncthunk");function Wve(e,t){return`${e}/${t}`}function Vve({creators:e}={}){var t;const r=(t=e==null?void 0:e.asyncThunk)==null?void 0:t[Bve];return function(n){const{name:s,reducerPath:i=s}=n;if(!s)throw new Error(ns(11));const o=(typeof n.reducers=="function"?n.reducers(Kve()):n.reducers)||{},a=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,j){const k=typeof _=="string"?_:_.type;if(!k)throw new Error(ns(12));if(k in l.sliceCaseReducersByType)throw new Error(ns(13));return l.sliceCaseReducersByType[k]=j,c},addMatcher(_,j){return l.sliceMatchers.push({matcher:_,reducer:j}),c},exposeAction(_,j){return l.actionCreators[_]=j,c},exposeCaseReducer(_,j){return l.sliceCaseReducersByName[_]=j,c}};a.forEach(_=>{const j=o[_],k={reducerName:_,type:Wve(s,_),createNotation:typeof n.reducers=="function"};Gve(j)?Jve(k,j,c,r):Yve(k,j,c)});function u(){const[_={},j=[],k=void 0]=typeof n.extraReducers=="function"?zq(n.extraReducers):[n.extraReducers],S={..._,...l.sliceCaseReducersByType};return zve(n.initialState,E=>{for(let C in S)E.addCase(C,S[C]);for(let C of l.sliceMatchers)E.addMatcher(C.matcher,C.reducer);for(let C of j)E.addMatcher(C.matcher,C.reducer);k&&E.addDefaultCase(k)})}const h=_=>_,f=new Map,p=new WeakMap;let v;function m(_,j){return v||(v=u()),v(_,j)}function b(){return v||(v=u()),v.getInitialState()}function x(_,j=!1){function k(E){let C=E[_];return typeof C>"u"&&j&&(C=ay(p,k,b)),C}function S(E=h){const C=ay(f,j,()=>new WeakMap);return ay(C,E,()=>{const T={};for(const[O,P]of Object.entries(n.selectors??{}))T[O]=Hve(P,E,()=>ay(p,E,b),j);return T})}return{reducerPath:_,getSelectors:S,get selectors(){return S(k)},selectSlice:k}}const w={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:b,...x(i),injectInto(_,{reducerPath:j,...k}={}){const S=j??i;return _.inject({reducerPath:S,reducer:m},k),{...w,...x(S,!0)}}};return w}}function Hve(e,t,r,n){function s(i,...o){let a=t(i);return typeof a>"u"&&n&&(a=r()),e(a,...o)}return s.unwrapped=e,s}var os=Vve();function Kve(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Yve({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!Zve(n))throw new Error(ns(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Ps(e,o):Ps(e))}function Gve(e){return e._reducerDefinitionType==="asyncThunk"}function Zve(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Jve({type:e,reducerName:t},r,n,s){if(!s)throw new Error(ns(18));const{payloadCreator:i,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=r,h=s(e,i,u);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),a&&n.addCase(h.pending,a),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(t,{fulfilled:o||ly,pending:a||ly,rejected:l||ly,settled:c||ly})}function ly(){}var Qve="task",Uq="listener",qq="completed",bE="cancelled",Xve=`task-${bE}`,ebe=`task-${qq}`,Qk=`${Uq}-${bE}`,tbe=`${Uq}-${qq}`,Yx=class{constructor(e){be(this,"name","TaskAbortError"),be(this,"message"),this.code=e,this.message=`${Qve} ${bE} (reason: ${e})`}},xE=(e,t)=>{if(typeof e!="function")throw new TypeError(ns(32))},Kv=()=>{},Bq=(e,t=Kv)=>(e.catch(t),e),Wq=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Pc=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Rc=e=>{if(e.aborted){const{reason:t}=e;throw new Yx(t)}};function Vq(e,t){let r=Kv;return new Promise((n,s)=>{const i=()=>s(new Yx(e.reason));if(e.aborted){i();return}r=Wq(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Kv})}var rbe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Yx?"cancelled":"rejected",error:r}}finally{t==null||t()}},Yv=e=>t=>Bq(Vq(e,t).then(r=>(Rc(e),r))),Hq=e=>{const t=Yv(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:wd}=Object,gD={},Gx="listenerMiddleware",nbe=(e,t)=>{const r=n=>Wq(e,()=>Pc(n,e.reason));return(n,s)=>{xE(n);const i=new AbortController;r(i);const o=rbe(async()=>{Rc(e),Rc(i.signal);const a=await n({pause:Yv(i.signal),delay:Hq(i.signal),signal:i.signal});return Rc(i.signal),a},()=>Pc(i,ebe));return s!=null&&s.autoJoin&&t.push(o.catch(Kv)),{result:Yv(e)(o),cancel(){Pc(i,Xve)}}}},sbe=(e,t)=>{const r=async(n,s)=>{Rc(t);let i=()=>{};const o=[new Promise((a,l)=>{let c=e({predicate:n,effect:(u,h)=>{h.unsubscribe(),a([u,h.getState(),h.getOriginalState()])}});i=()=>{c(),l()}})];s!=null&&o.push(new Promise(a=>setTimeout(a,s,null)));try{const a=await Vq(t,Promise.race(o));return Rc(t),a}finally{i()}};return(n,s)=>Bq(r(n,s))},Kq=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Ps(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(ns(21));return xE(i),{predicate:s,type:t,effect:i}},Yq=wd(e=>{const{type:t,predicate:r,effect:n}=Kq(e);return{id:qve(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ns(22))}}},{withTypes:()=>Yq}),yD=(e,t)=>{const{type:r,effect:n,predicate:s}=Kq(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},Xk=e=>{e.pending.forEach(t=>{Pc(t,Qk)})},ibe=e=>()=>{e.forEach(Xk),e.clear()},vD=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Gq=wd(Ps(`${Gx}/add`),{withTypes:()=>Gq}),obe=Ps(`${Gx}/removeAll`),Zq=wd(Ps(`${Gx}/remove`),{withTypes:()=>Zq}),abe=(...e)=>{console.error(`${Gx}/error`,...e)},$m=(e={})=>{const t=new Map,{extra:r,onError:n=abe}=e;xE(n);const s=c=>(c.unsubscribe=()=>t.delete(c.id),t.set(c.id,c),u=>{c.unsubscribe(),u!=null&&u.cancelActive&&Xk(c)}),i=c=>{const u=yD(t,c)??Yq(c);return s(u)};wd(i,{withTypes:()=>i});const o=c=>{const u=yD(t,c);return u&&(u.unsubscribe(),c.cancelActive&&Xk(u)),!!u};wd(o,{withTypes:()=>o});const a=async(c,u,h,f)=>{const p=new AbortController,v=sbe(i,p.signal),m=[];try{c.pending.add(p),await Promise.resolve(c.effect(u,wd({},h,{getOriginalState:f,condition:(b,x)=>v(b,x).then(Boolean),take:v,delay:Hq(p.signal),pause:Yv(p.signal),extra:r,signal:p.signal,fork:nbe(p.signal,m),unsubscribe:c.unsubscribe,subscribe:()=>{t.set(c.id,c)},cancelActiveListeners:()=>{c.pending.forEach((b,x,w)=>{b!==p&&(Pc(b,Qk),w.delete(b))})},cancel:()=>{Pc(p,Qk),c.pending.delete(p)},throwIfCancelled:()=>{Rc(p.signal)}})))}catch(b){b instanceof Yx||vD(n,b,{raisedBy:"effect"})}finally{await Promise.all(m),Pc(p,tbe),c.pending.delete(p)}},l=ibe(t);return{middleware:c=>u=>h=>{if(!Aq(h))return u(h);if(Gq.match(h))return i(h.payload);if(obe.match(h)){l();return}if(Zq.match(h))return o(h.payload);let f=c.getState();const p=()=>{if(f===gD)throw new Error(ns(23));return f};let v;try{if(v=u(h),t.size>0){const m=c.getState(),b=Array.from(t.values());for(const x of b){let w=!1;try{w=x.predicate(h,m,f)}catch(_){w=!1,vD(n,_,{raisedBy:"predicate"})}w&&a(x,h,c,p)}}}finally{f=gD}return v},startListening:i,stopListening:o,clearListeners:l}};function ns(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var lbe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Jq=os({name:"chartLayout",initialState:lbe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:cbe,setLayout:ube,setChartSize:dbe,setScale:hbe}=Jq.actions,fbe=Jq.reducer;function bD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bD(Object(r),!0).forEach(function(n){pbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pbe(e,t,r){return(t=mbe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mbe(e){var t=gbe(e,"string");return typeof t=="symbol"?t:t+""}function gbe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gv=Math.PI/180,ybe=e=>e*180/Math.PI,fr=(e,t,r,n)=>({x:e+Math.cos(-Gv*n)*r,y:t+Math.sin(-Gv*n)*r}),Qq=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},vbe=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},bbe=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=vbe({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var a=(r-s)/o,l=Math.acos(a);return n>i&&(l=2*Math.PI-l),{radius:o,angle:ybe(l),angleInRadian:l}},xbe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},wbe=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},_be=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=bbe({x:r,y:n},t),{innerRadius:o,outerRadius:a}=t;if(s<o||s>a||s===0)return null;var{startAngle:l,endAngle:c}=xbe(t),u=i,h;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;h=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=l}return h?xD(xD({},t),{},{radius:s,angle:wbe(u,t)}):null};function Xq(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function wD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wD(Object(r),!0).forEach(function(n){jbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jbe(e,t,r){return(t=kbe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kbe(e){var t=Sbe(e,"string");return typeof t=="symbol"?t:t+""}function Sbe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rt(e,t,r){return pr(e)||pr(t)?r:so(t)?pl(e,t,r):typeof t=="function"?t(e):r}var Nbe=(e,t,r,n,s)=>{var i,o=-1,a=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(a<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<a;l++){var c=l>0?r[l-1].coordinate:r[a-1].coordinate,u=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,f=void 0;if(cn(u-c)!==cn(h-u)){var p=[];if(cn(h-u)===cn(s[1]-s[0])){f=h;var v=u+s[1]-s[0];p[0]=Math.min(v,(v+c)/2),p[1]=Math.max(v,(v+c)/2)}else{f=c;var m=h+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var b=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:o}=r[l]);break}}else{var x=Math.min(c,h),w=Math.max(c,h);if(e>(x+u)/2&&e<=(w+u)/2){({index:o}=r[l]);break}}}else if(t){for(var _=0;_<a;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<a-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===a-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:o}=t[_]);break}}return o},Cbe=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:a}=t;if((a==="vertical"||a==="horizontal"&&o==="middle")&&i!=="center"&&Ee(e[i]))return ws(ws({},e),{},{[i]:e[i]+(n||0)});if((a==="horizontal"||a==="vertical"&&i==="center")&&o!=="middle"&&Ee(e[o]))return ws(ws({},e),{},{[o]:e[o]+(s||0)})}return e},jl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",e1=(e,t,r,n)=>{if(n)return e.map(a=>a.coordinate);var s,i,o=e.map(a=>(a.coordinate===t&&(s=!0),a.coordinate===r&&(i=!0),a.coordinate));return s||o.push(t),i||o.push(r),o},t1=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:h,niceTicks:f,axisType:p}=e;if(!o)return null;var v=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,m=s==="category"&&o.bandwidth?o.bandwidth()/v:0;if(m=p==="angleAxis"&&i&&i.length>=2?cn(i[0]-i[1])*2*m:m,h||f){var b=(h||f||[]).map((x,w)=>{var _=n?n.indexOf(x):x;return{coordinate:o(_)+m,value:x,offset:m,index:w}});return b.filter(x=>!As(x.coordinate))}return l&&c?c.map((x,w)=>({coordinate:o(x)+m,value:x,index:w,offset:m})):o.ticks&&u!=null?o.ticks(u).map((x,w)=>({coordinate:o(x)+m,value:x,offset:m,index:w})):o.domain().map((x,w)=>({coordinate:o(x)+m,value:n?n[x]:x,index:w,offset:m}))},_D=1e-4,Ebe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-_D,i=Math.max(n[0],n[1])+_D,o=e(t[0]),a=e(t[r-1]);(o<s||o>i||a<s||a>i)&&e.domain([t[0],t[r-1]])}},Tbe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var a=As(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=s,e[o][r][1]=s+a,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1])}},Abe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=As(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},Obe={sign:Tbe,expand:Oye,none:Jd,silhouette:Pye,wiggle:Rye,positive:Abe},Pbe=(e,t,r)=>{var n=Obe[r],s=Aye().keys(t).value((i,o)=>+Rt(i,o,0)).order(Bk).offset(n);return s(e)};function jD(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!pr(s[t.dataKey])){var a=MU(r,"value",s[t.dataKey]);if(a)return a.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Rt(s,pr(o)?t.dataKey:o);return pr(l)?null:t.scale(l)}var Rbe=e=>{var t=e.flat(2).filter(Ee);return[Math.min(...t),Math.max(...t)]},Dbe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Mbe=(e,t,r)=>{if(e!=null)return Dbe(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,a=o.reduce((l,c)=>{var u=Xq(c,t,r),h=Rbe(u);return[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(a[0],n[0]),Math.max(a[1],n[1])]},[1/0,-1/0]))},kD=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SD=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eS=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Bx(t,u=>u.coordinate),i=1/0,o=1,a=s.length;o<a;o++){var l=s[o],c=s[o-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function ND(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return ws(ws({},t),{},{dataKey:r,payload:n,value:s,name:i})}function Zx(e,t){if(e)return String(e);if(typeof t=="string")return t}function Ibe(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?_be({x:e,y:t},n):null}var Lbe=(e,t,r,n)=>{var s=t.find(c=>c&&c.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return ws(ws(ws({},n),fr(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var a=s.coordinate,{angle:l}=n;return ws(ws(ws({},n),fr(n.cx,n.cy,a,l)),{},{angle:l,radius:a})}return{x:0,y:0}},Fbe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,da=e=>e.layout.width,ha=e=>e.layout.height,$be=e=>e.layout.scale,r1=e=>e.layout.margin,wE=Z(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),_E=Z(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),n1="data-recharts-item-index",s1="data-recharts-item-data-key",Jx=60;function CD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ea(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CD(Object(r),!0).forEach(function(n){zbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zbe(e,t,r){return(t=Ube(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ube(e){var t=qbe(e,"string");return typeof t=="symbol"?t:t+""}function qbe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bbe=e=>e.brush.height,zr=Z([da,ha,r1,Bbe,wE,_E,Nq,fve],(e,t,r,n,s,i,o,a)=>{var l=i.reduce((v,m)=>{var{orientation:b}=m;if(!m.mirror&&!m.hide){var x=typeof m.width=="number"?m.width:Jx;return Ea(Ea({},v),{},{[b]:v[b]+x})}return v},{left:r.left||0,right:r.right||0}),c=s.reduce((v,m)=>{var{orientation:b}=m;return!m.mirror&&!m.hide?Ea(Ea({},v),{},{[b]:pl(v,"".concat(b))+m.height}):v},{top:r.top||0,bottom:r.bottom||0}),u=Ea(Ea({},c),l),h=u.bottom;u.bottom+=n,u=Cbe(u,o,a);var f=e-u.left-u.right,p=t-u.top-u.bottom;return Ea(Ea({brushBottom:h},u),{},{width:Math.max(f,0),height:Math.max(p,0)})}),Wbe=Z(zr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),i1=Z(da,ha,(e,t)=>({x:0,y:0,width:e,height:t})),Vbe=g.createContext(null),Ls=()=>g.useContext(Vbe)!=null,Qx=e=>e.brush,Xx=Z([Qx,zr,r1],(e,t,r)=>({height:e.height,x:Ee(e.x)?e.x:t.left,y:Ee(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Ee(e.width)?e.width:t.width})),jE=()=>{var e,t=Ls(),r=Me(Wbe),n=Me(Xx),s=(e=Me(Qx))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},Hbe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},o1=()=>{var e;return(e=Me(zr))!==null&&e!==void 0?e:Hbe},kE=()=>Me(da),SE=()=>Me(ha),Kbe={top:0,right:0,bottom:0,left:0},Ybe=()=>{var e;return(e=Me(t=>t.layout.margin))!==null&&e!==void 0?e:Kbe},yt=e=>e.layout.layoutType,NE=()=>Me(yt),Gbe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},a1=os({name:"legend",initialState:Gbe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Bo(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:ED,setLegendSettings:Zbe,addLegendPayload:l1,removeLegendPayload:c1}=a1.actions,Jbe=a1.reducer,Qbe=["contextPayload"];function tS(){return tS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tS.apply(null,arguments)}function TD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TD(Object(r),!0).forEach(function(n){CE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CE(e,t,r){return(t=Xbe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xbe(e){var t=exe(e,"string");return typeof t=="symbol"?t:t+""}function exe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function txe(e,t){if(e==null)return{};var r,n,s=rxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rxe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nxe(e){return e.value}function sxe(e){var{contextPayload:t}=e,r=txe(e,Qbe),n=vq(t,e.payloadUniqBy,nxe),s=Xd(Xd({},r),{},{payload:n});return g.isValidElement(e.content)?g.cloneElement(e.content,s):typeof e.content=="function"?g.createElement(e.content,s):g.createElement(iE,s)}function ixe(e,t,r,n,s,i){var{layout:o,align:a,verticalAlign:l}=t,c,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(a==="center"&&o==="vertical"?c={left:((n||0)-i.width)/2}:c=a==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(l==="middle"?u={top:((s||0)-i.height)/2}:u=l==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Xd(Xd({},c),u)}function oxe(e){var t=Wt();return g.useEffect(()=>{t(Zbe(e))},[t,e]),null}function axe(e){var t=Wt();return g.useEffect(()=>(t(ED(e)),()=>{t(ED({width:0,height:0}))}),[t,e]),null}function lxe(e){var t=gve(),r=eye(),n=Ybe(),{width:s,height:i,wrapperStyle:o,portal:a}=e,[l,c]=Cq([t]),u=kE(),h=SE(),f=u-(n.left||0)-(n.right||0),p=Kp.getWidthOrHeight(e.layout,i,s,f),v=a?o:Xd(Xd({position:"absolute",width:(p==null?void 0:p.width)||s||"auto",height:(p==null?void 0:p.height)||i||"auto"},ixe(o,e,n,u,h,l)),o),m=a??r;if(m==null)return null;var b=g.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:c},g.createElement(oxe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),g.createElement(axe,{width:l.width,height:l.height}),g.createElement(sxe,tS({},e,p,{margin:n,chartWidth:u,chartHeight:h,contextPayload:t})));return to.createPortal(b,m)}class Kp extends g.PureComponent{static getWidthOrHeight(t,r,n,s){return t==="vertical"&&Ee(r)?{height:r}:t==="horizontal"?{width:n||s}:null}render(){return g.createElement(lxe,this.props)}}CE(Kp,"displayName","Legend");CE(Kp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function rS(){return rS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rS.apply(null,arguments)}function AD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function L_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AD(Object(r),!0).forEach(function(n){cxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cxe(e,t,r){return(t=uxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uxe(e){var t=dxe(e,"string");return typeof t=="symbol"?t:t+""}function dxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hxe(e){return Array.isArray(e)&&so(e[0])&&so(e[1])?e.join(" ~ "):e}var fxe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,p=()=>{if(i&&i.length){var k={padding:0,margin:0},S=(a?Bx(i,a):i).map((E,C)=>{if(E.type==="none")return null;var T=E.formatter||o||hxe,{value:O,name:P}=E,D=O,R=P;if(T){var $=T(O,P,E,C,i);if(Array.isArray($))[D,R]=$;else if($!=null)D=$;else return null}var F=L_({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:F},so(R)?g.createElement("span",{className:"recharts-tooltip-item-name"},R):null,so(R)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},D),g.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:k},S)}return null},v=L_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),m=L_({margin:0},s),b=!pr(u),x=b?u:"",w=st("recharts-default-tooltip",l),_=st("recharts-tooltip-label",c);b&&h&&i!==void 0&&i!==null&&(x=h(u,i));var j=f?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",rS({className:w,style:v},j),g.createElement("p",{className:_,style:m},g.isValidElement(x)?x:"".concat(x)),p())},wf="recharts-tooltip-wrapper",pxe={visibility:"hidden"};function mxe(e){var{coordinate:t,translateX:r,translateY:n}=e;return st(wf,{["".concat(wf,"-right")]:Ee(r)&&t&&Ee(t.x)&&r>=t.x,["".concat(wf,"-left")]:Ee(r)&&t&&Ee(t.x)&&r<t.x,["".concat(wf,"-bottom")]:Ee(n)&&t&&Ee(t.y)&&n>=t.y,["".concat(wf,"-top")]:Ee(n)&&t&&Ee(t.y)&&n<t.y})}function OD(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=e;if(i&&Ee(i[n]))return i[n];var u=r[n]-a-(s>0?s:0),h=r[n]+s;if(t[n])return o[n]?u:h;var f=l[n];if(f==null)return 0;if(o[n]){var p=u,v=f;return p<v?Math.max(h,f):Math.max(u,f)}if(c==null)return 0;var m=h+a,b=f+c;return m>b?Math.max(u,f):Math.max(h,f)}function gxe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function yxe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:a,viewBox:l}=e,c,u,h;return o.height>0&&o.width>0&&r?(u=OD({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),h=OD({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=gxe({translateX:u,translateY:h,useTranslate3d:a})):c=pxe,{cssProperties:c,cssClasses:mxe({translateX:u,translateY:h,coordinate:r})}}function PD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PD(Object(r),!0).forEach(function(n){nS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nS(e,t,r){return(t=vxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vxe(e){var t=bxe(e,"string");return typeof t=="symbol"?t:t+""}function bxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class xxe extends g.PureComponent{constructor(){super(...arguments),nS(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),nS(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:h,useTranslate3d:f,viewBox:p,wrapperStyle:v,lastBoundingBox:m,innerRef:b,hasPortalFromProps:x}=this.props,{cssClasses:w,cssProperties:_}=yxe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:h,tooltipBox:{height:m.height,width:m.width},useTranslate3d:f,viewBox:p}),j=x?{}:cy(cy({transition:l&&t?"transform ".concat(n,"ms ").concat(s):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&a?"visible":"hidden",position:"absolute",top:0,left:0}),k=cy(cy({},j),{},{visibility:!this.state.dismissed&&t&&a?"visible":"hidden"},v);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},i)}}var wxe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Th={isSsr:wxe()},u1=()=>Me(e=>e.rootProps.accessibilityLayer);function vi(e){return Number.isFinite(e)}function eh(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function sS(){return sS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sS.apply(null,arguments)}function RD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RD(Object(r),!0).forEach(function(n){_xe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _xe(e,t,r){return(t=jxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jxe(e){var t=kxe(e,"string");return typeof t=="symbol"?t:t+""}function kxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MD={curveBasisClosed:bye,curveBasisOpen:xye,curveBasis:vye,curveBumpX:sye,curveBumpY:iye,curveLinearClosed:wye,curveLinear:Lx,curveMonotoneX:_ye,curveMonotoneY:jye,curveNatural:kye,curveStep:Sye,curveStepAfter:Cye,curveStepBefore:Nye},uy=e=>vi(e.x)&&vi(e.y),_f=e=>e.x,jf=e=>e.y,Sxe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Fm(e));return(r==="curveMonotone"||r==="curveBump")&&t?MD["".concat(r).concat(t==="vertical"?"Y":"X")]:MD[r]||Lx},Nxe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=Sxe(t,s),a=i?r.filter(uy):r,l;if(Array.isArray(n)){var c=i?n.filter(h=>uy(h)):n,u=a.map((h,f)=>DD(DD({},h),{},{base:c[f]}));return s==="vertical"?l=sy().y(jf).x1(_f).x0(h=>h.base.x):l=sy().x(_f).y1(jf).y0(h=>h.base.y),l.defined(uy).curve(o),l(u)}return s==="vertical"&&Ee(n)?l=sy().y(jf).x1(_f).x0(n):Ee(n)?l=sy().x(_f).y1(jf).y0(n):l=VU().x(_f).y(jf),l.defined(uy).curve(o),l(a)},EE=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?Nxe(e):n;return g.createElement("path",sS({},_l(e),JC(e),{className:st("recharts-curve",t),d:i===null?void 0:i,ref:s}))},Cxe=["x","y","top","left","width","height","className"];function iS(){return iS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iS.apply(null,arguments)}function ID(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Exe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ID(Object(r),!0).forEach(function(n){Txe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ID(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Txe(e,t,r){return(t=Axe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Axe(e){var t=Oxe(e,"string");return typeof t=="symbol"?t:t+""}function Oxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pxe(e,t){if(e==null)return{};var r,n,s=Rxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Rxe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Dxe=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),Mxe=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:a}=e,l=Pxe(e,Cxe),c=Exe({x:t,y:r,top:n,left:s,width:i,height:o},l);return!Ee(t)||!Ee(r)||!Ee(i)||!Ee(o)||!Ee(n)||!Ee(s)?null:g.createElement("path",iS({},qt(c,!0),{className:st("recharts-cross",a),d:Dxe(t,r,i,o,n,s)}))};function Ixe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function LD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lxe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LD(Object(r),!0).forEach(function(n){Fxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fxe(e,t,r){return(t=$xe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $xe(e){var t=zxe(e,"string");return typeof t=="symbol"?t:t+""}function zxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fs(e,t){var r=Lxe({},e),n=t,s=Object.keys(t),i=s.reduce((o,a)=>(o[a]===void 0&&n[a]!==void 0&&(o[a]=n[a]),o),r);return i}var d1={},h1={},f1={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(f1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f1,r=dE,n=Ux,s=qx,i=zx;function o(c,u,h){return a(c,u,void 0,void 0,void 0,void 0,h)}function a(c,u,h,f,p,v,m){const b=m(c,u,h,f,p,v);if(b!==void 0)return b;if(typeof c==typeof u)switch(typeof c){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return c===u;case"number":return c===u||Object.is(c,u);case"function":return c===u;case"object":return l(c,u,v,m)}return l(c,u,v,m)}function l(c,u,h,f){if(Object.is(c,u))return!0;let p=n.getTag(c),v=n.getTag(u);if(p===s.argumentsTag&&(p=s.objectTag),v===s.argumentsTag&&(v=s.objectTag),p!==v)return!1;switch(p){case s.stringTag:return c.toString()===u.toString();case s.numberTag:{const x=c.valueOf(),w=u.valueOf();return i.eq(x,w)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(c.valueOf(),u.valueOf());case s.regexpTag:return c.source===u.source&&c.flags===u.flags;case s.functionTag:return c===u}h=h??new Map;const m=h.get(c),b=h.get(u);if(m!=null&&b!=null)return m===u;h.set(c,u),h.set(u,c);try{switch(p){case s.mapTag:{if(c.size!==u.size)return!1;for(const[x,w]of c.entries())if(!u.has(x)||!a(w,u.get(x),x,c,u,h,f))return!1;return!0}case s.setTag:{if(c.size!==u.size)return!1;const x=Array.from(c.values()),w=Array.from(u.values());for(let _=0;_<x.length;_++){const j=x[_],k=w.findIndex(S=>a(j,S,void 0,c,u,h,f));if(k===-1)return!1;w.splice(k,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(c)!==Buffer.isBuffer(u)||c.length!==u.length)return!1;for(let x=0;x<c.length;x++)if(!a(c[x],u[x],x,c,u,h,f))return!1;return!0}case s.arrayBufferTag:return c.byteLength!==u.byteLength?!1:l(new Uint8Array(c),new Uint8Array(u),h,f);case s.dataViewTag:return c.byteLength!==u.byteLength||c.byteOffset!==u.byteOffset?!1:l(new Uint8Array(c),new Uint8Array(u),h,f);case s.errorTag:return c.name===u.name&&c.message===u.message;case s.objectTag:{if(!(l(c.constructor,u.constructor,h,f)||t.isPlainObject(c)&&t.isPlainObject(u)))return!1;const x=[...Object.keys(c),...r.getSymbols(c)],w=[...Object.keys(u),...r.getSymbols(u)];if(x.length!==w.length)return!1;for(let _=0;_<x.length;_++){const j=x[_],k=c[j];if(!Object.hasOwn(u,j))return!1;const S=u[j];if(!a(k,S,j,c,u,h,f))return!1}return!0}default:return!1}}finally{h.delete(c),h.delete(u)}}e.isEqualWith=o})(h1);var p1={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(p1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h1,r=p1;function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n})(d1);var Uxe=d1.isEqual;const qxe=wi(Uxe);var Zv=1e-4,m1=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],g1=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),FD=(e,t)=>r=>{var n=m1(e,t);return g1(n,r)},Bxe=(e,t)=>r=>{var n=m1(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return g1(s,r)},$D=function(){for(var e,t,r,n,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[e,r,t,n]=[0,0,1,1];break;case"ease":[e,r,t,n]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,n]=[.42,0,1,1];break;case"ease-out":[e,r,t,n]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,n]=[0,0,.58,1];break;default:{var a=i[0].split("(");a[0]==="cubic-bezier"&&a[1].split(")")[0].split(",").length===4&&([e,r,t,n]=a[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else i.length===4&&([e,r,t,n]=i);var l=FD(e,t),c=FD(r,n),u=Bxe(e,t),h=p=>p>1?1:p<0?0:p,f=p=>{for(var v=p>1?1:p,m=v,b=0;b<8;++b){var x=l(m)-v,w=u(m);if(Math.abs(x-v)<Zv||w<Zv)return c(m);m=h(m-x/w)}return c(m)};return f.isStepper=!1,f},Wxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,s=(i,o,a)=>{var l=-(i-o)*t,c=a*r,u=a+(l-c)*n/1e3,h=a*n/1e3+i;return Math.abs(h-o)<Zv&&Math.abs(u)<Zv?[o,0]:[h,u]};return s.isStepper=!0,s.dt=n,s},y1=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return $D(e);case"spring":return Wxe();default:if(e.split("(")[0]==="cubic-bezier")return $D(e)}return typeof e=="function"?e:null};function zD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function UD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zD(Object(r),!0).forEach(function(n){Vxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vxe(e,t,r){return(t=Hxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hxe(e){var t=Kxe(e,"string");return typeof t=="symbol"?t:t+""}function Kxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yxe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Gxe=(e,t,r)=>e.map(n=>"".concat(Yxe(n)," ").concat(t,"ms ").concat(r)).join(","),Zxe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Yp=(e,t)=>Object.keys(t).reduce((r,n)=>UD(UD({},r),{},{[n]:e(n,t[n])}),{});function qD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qD(Object(r),!0).forEach(function(n){Jxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jxe(e,t,r){return(t=Qxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qxe(e){var t=Xxe(e,"string");return typeof t=="symbol"?t:t+""}function Xxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jv=(e,t,r)=>e+(t-e)*r,oS=e=>{var{from:t,to:r}=e;return t!==r},v1=(e,t,r)=>{var n=Yp((s,i)=>{if(oS(i)){var[o,a]=e(i.from,i.to,i.velocity);return Vr(Vr({},i),{},{from:o,velocity:a})}return i},t);return r<1?Yp((s,i)=>oS(i)?Vr(Vr({},i),{},{velocity:Jv(i.velocity,n[s].velocity,r),from:Jv(i.from,n[s].from,r)}):i,t):v1(e,n,r-1)};function ewe(e,t,r,n,s,i){var o,a=n.reduce((f,p)=>Vr(Vr({},f),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>Yp((f,p)=>p.from,a),c=()=>!Object.values(a).filter(oS).length,u=null,h=f=>{o||(o=f);var p=f-o,v=p/r.dt;a=v1(r,a,v),s(Vr(Vr(Vr({},e),t),l())),o=f,c()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{u()})}function twe(e,t,r,n,s,i,o){var a=null,l=s.reduce((h,f)=>Vr(Vr({},h),{},{[f]:[e[f],t[f]]}),{}),c,u=h=>{c||(c=h);var f=(h-c)/n,p=Yp((m,b)=>Jv(...b,r(f)),l);if(i(Vr(Vr(Vr({},e),t),p)),f<1)a=o.setTimeout(u);else{var v=Yp((m,b)=>Jv(...b,r(1)),l);i(Vr(Vr(Vr({},e),t),v))}};return()=>(a=o.setTimeout(u),()=>{a()})}const b1=(e,t,r,n,s,i)=>{var o=Zxe(e,t);return r.isStepper===!0?ewe(e,t,r,o,s,i):twe(e,t,r,n,o,s,i)};function rwe(e){var t,r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){s=e.setTimeout(i.bind(null,c),l);return}i(l),s=e.setTimeout(i.bind(null,c));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class nwe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function swe(){return rwe(new nwe)}var iwe=g.createContext(swe);function x1(e,t){var r=g.useContext(iwe);return g.useMemo(()=>t??r(e),[e,t,r])}var owe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function aS(){return aS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aS.apply(null,arguments)}function awe(e,t){if(e==null)return{};var r,n,s=lwe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lwe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function BD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BD(Object(r),!0).forEach(function(n){yc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yc(e,t,r){return(t=cwe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cwe(e){var t=uwe(e,"string");return typeof t=="symbol"?t:t+""}function uwe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TE extends g.PureComponent{constructor(t,r){super(t,r),yc(this,"mounted",!1),yc(this,"manager",void 0),yc(this,"stopJSAnimation",null),yc(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:a,duration:l,animationManager:c}=this.props;if(this.manager=c,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0){this.state={style:{}},typeof a=="function"&&(this.state={style:o});return}if(i){if(typeof a=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:a}=this.props,{style:l}=this.state;if(n){if(!r){var c={style:s?{[s]:o}:o};this.state&&l&&(s&&l[s]!==o||!s&&l!==o)&&this.setState(c);return}if(!(qxe(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||i?a:t.to;if(this.state&&l){var f={style:s?{[s]:h}:h};(s&&l[s]!==h||!s&&l!==h)&&this.setState(f)}this.runAnimation(Ta(Ta({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:a,onAnimationStart:l}=t,c=b1(r,n,y1(i),s,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=c()};this.manager.start([l,o,u,s,a])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:a,onAnimationEnd:l,children:c}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof c=="function"||o==="spring"){this.runJSAnimation(t);return}var u=s?{[s]:i}:i,h=Gxe(Object.keys(u),n,o);this.manager.start([a,r,Ta(Ta({},u),{},{transition:h}),n,l])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:a,from:l,to:c,canBegin:u,onAnimationEnd:h,shouldReAnimate:f,onAnimationReStart:p,animationManager:v}=t,m=awe(t,owe),b=g.Children.count(r),x=this.state.style;if(typeof r=="function")return r(x);if(!a||b===0||s<=0)return r;var w=_=>{var{style:j={},className:k}=_.props,S=g.cloneElement(_,Ta(Ta({},m),{},{style:Ta(Ta({},j),x),className:k}));return S};return b===1?w(g.Children.only(r)):g.createElement("div",null,g.Children.map(r,_=>w(_)))}}yc(TE,"displayName","Animate");yc(TE,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Qv(e){var t,r=x1((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return g.createElement(TE,aS({},e,{animationManager:r}))}function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xv.apply(null,arguments)}var WD=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,a=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,c;if(i>0&&s instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=s[h]>i?i:s[h];c="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(e+a*u[0],",").concat(t)),c+="L ".concat(e+r-a*u[1],",").concat(t),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+o*u[1])),c+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(e+r-a*u[2],",").concat(t+n)),c+="L ".concat(e+a*u[3],",").concat(t+n),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-o*u[3])),c+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);c="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+a*p,",").concat(t,`
            L `).concat(e+r-a*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(t+o*p,`
            L `).concat(e+r,",").concat(t+n-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-a*p,",").concat(t+n,`
            L `).concat(e+a*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+n-o*p," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return c},dwe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},w1=e=>{var t=Fs(e,dwe),r=g.useRef(null),[n,s]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&s(x)}catch{}},[]);var{x:i,y:o,width:a,height:l,radius:c,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isAnimationActive:v,isUpdateAnimationActive:m}=t;if(i!==+i||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var b=st("recharts-rectangle",u);return m?g.createElement(Qv,{canBegin:n>0,from:{width:a,height:l,x:i,y:o},to:{width:a,height:l,x:i,y:o},duration:f,animationEasing:h,isActive:m},x=>{var{width:w,height:_,x:j,y:k}=x;return g.createElement(Qv,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,isActive:v,easing:h},g.createElement("path",Xv({},qt(t,!0),{className:b,d:WD(j,k,w,_,c),ref:r})))}):g.createElement("path",Xv({},qt(t,!0),{className:b,d:WD(i,o,a,l,c)}))};function _1(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=fr(t,r,n,s),a=fr(t,r,n,i);return{points:[o,a],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function lS(){return lS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lS.apply(null,arguments)}var hwe=(e,t)=>{var r=cn(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},dy=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:a,cornerIsExternal:l}=e,c=a*(o?1:-1)+n,u=Math.asin(a/c)/Gv,h=l?s:s+i*u,f=fr(t,r,c,h),p=fr(t,r,n,h),v=l?s-i*u:s,m=fr(t,r,c*Math.cos(u*Gv),v);return{center:f,circleTangency:p,lineTangency:m,theta:u}},j1=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,a=hwe(i,o),l=i+a,c=fr(t,r,s,i),u=fr(t,r,s,l),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(i>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var f=fr(t,r,n,i),p=fr(t,r,n,l);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(i<=l),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},fwe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=e,u=cn(c-l),{circleTangency:h,lineTangency:f,theta:p}=dy({cx:t,cy:r,radius:s,angle:l,sign:u,cornerRadius:i,cornerIsExternal:a}),{circleTangency:v,lineTangency:m,theta:b}=dy({cx:t,cy:r,radius:s,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:a}),x=a?Math.abs(l-c):Math.abs(l-c)-p-b;if(x<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):j1({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:c});var w="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(x>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(m.x,",").concat(m.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:j,theta:k}=dy({cx:t,cy:r,radius:n,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:a}),{circleTangency:S,lineTangency:E,theta:C}=dy({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:a}),T=a?Math.abs(l-c):Math.abs(l-c)-k-C;if(T<0&&i===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(j.x,",").concat(j.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},pwe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},k1=e=>{var t=Fs(e,pwe),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:h}=t;if(i<s||c===u)return null;var f=st("recharts-sector",h),p=i-s,v=Es(o,p,0,!0),m;return v>0&&Math.abs(c-u)<360?m=fwe({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(v,p/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):m=j1({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:c,endAngle:u}),g.createElement("path",lS({},qt(t,!0),{className:f,d:m}))};function mwe(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:a,cy:l,innerRadius:c,outerRadius:u,angle:h}=t,f=fr(a,l,c,h),p=fr(a,l,u,h);n=f.x,s=f.y,i=p.x,o=p.y}else return _1(t);return[{x:n,y:s},{x:i,y:o}]}var S1={},N1={},C1={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pE;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(C1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C1;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(N1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mE,r=N1;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const a=Math.max(Math.ceil((i-s)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=s,s+=o;return l}e.range=n})(S1);var gwe=S1.range;const E1=wi(gwe);function sl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ywe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function AE(e){let t,r,n;e.length!==2?(t=sl,r=(a,l)=>sl(e(a),l),n=(a,l)=>e(a)-l):(t=e===sl||e===ywe?e:vwe,r=e,n=e);function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;r(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;r(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=s(a,l,c,u-1);return h>c&&n(a[h-1],l)>-n(a[h],l)?h-1:h}return{left:s,center:o,right:i}}function vwe(){return 0}function T1(e){return e===null?NaN:+e}function*bwe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const xwe=AE(sl),zm=xwe.right;AE(T1).center;class VD extends Map{constructor(t,r=jwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(HD(this,t))}has(t){return super.has(HD(this,t))}set(t,r){return super.set(wwe(this,t),r)}delete(t){return super.delete(_we(this,t))}}function HD({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function wwe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function _we({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function jwe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function kwe(e=sl){if(e===sl)return A1;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function A1(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Swe=Math.sqrt(50),Nwe=Math.sqrt(10),Cwe=Math.sqrt(2);function eb(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=Swe?10:i>=Nwe?5:i>=Cwe?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=r&&r<2?eb(e,t,r*2):[a,l,c]}function cS(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?eb(t,e,r):eb(e,t,r);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(n)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function uS(e,t,r){return t=+t,e=+e,r=+r,eb(e,t,r)[2]}function dS(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?uS(t,e,r):uS(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function KD(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function YD(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function O1(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?A1:kwe(s);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(t-c*h/l+f)),v=Math.min(n,Math.floor(t+(l-c)*h/l+f));O1(e,t,p,v,s)}const i=e[t];let o=r,a=n;for(kf(e,r,t),s(e[n],i)>0&&kf(e,r,n);o<a;){for(kf(e,o,a),++o,--a;s(e[o],i)<0;)++o;for(;s(e[a],i)>0;)--a}s(e[r],i)===0?kf(e,r,a):(++a,kf(e,a,n)),a<=t&&(r=a+1),t<=a&&(n=a-1)}return e}function kf(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Ewe(e,t,r){if(e=Float64Array.from(bwe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return YD(e);if(t>=1)return KD(e);var n,s=(n-1)*t,i=Math.floor(s),o=KD(O1(e,i).subarray(0,i+1)),a=YD(e.subarray(i+1));return o+(a-o)*(s-i)}}function Twe(e,t,r=T1){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),a=+r(e[i+1],i+1,e);return o+(a-o)*(s-i)}}function Awe(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function $s(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function fa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hS=Symbol("implicit");function OE(){var e=new VD,t=[],r=[],n=hS;function s(i){let o=e.get(i);if(o===void 0){if(n!==hS)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new VD;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return OE(t,r).unknown(n)},$s.apply(s,arguments),s}function PE(){var e=OE().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function h(){var f=t().length,p=s<n,v=p?s:n,m=p?n:s;i=(m-v)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),v+=(m-v-i*(f-l))*u,o=i*(1-l),a&&(v=Math.round(v),o=Math.round(o));var b=Awe(f).map(function(x){return v+i*x});return r(p?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,a=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,h()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},e.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return PE(t(),[n,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},$s.apply(h(),arguments)}function P1(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return P1(t())},e}function Owe(){return P1(PE.apply(null,arguments).paddingInner(1))}function RE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function R1(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Um(){}var Gp=.7,tb=1/Gp,_d="\\s*([+-]?\\d+)\\s*",Zp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ji="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pwe=/^#([0-9a-f]{3,8})$/,Rwe=new RegExp(`^rgb\\(${_d},${_d},${_d}\\)$`),Dwe=new RegExp(`^rgb\\(${Ji},${Ji},${Ji}\\)$`),Mwe=new RegExp(`^rgba\\(${_d},${_d},${_d},${Zp}\\)$`),Iwe=new RegExp(`^rgba\\(${Ji},${Ji},${Ji},${Zp}\\)$`),Lwe=new RegExp(`^hsl\\(${Zp},${Ji},${Ji}\\)$`),Fwe=new RegExp(`^hsla\\(${Zp},${Ji},${Ji},${Zp}\\)$`),GD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};RE(Um,Jp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ZD,formatHex:ZD,formatHex8:$we,formatHsl:zwe,formatRgb:JD,toString:JD});function ZD(){return this.rgb().formatHex()}function $we(){return this.rgb().formatHex8()}function zwe(){return D1(this).formatHsl()}function JD(){return this.rgb().formatRgb()}function Jp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Pwe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?QD(t):r===3?new zn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?hy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?hy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Rwe.exec(e))?new zn(t[1],t[2],t[3],1):(t=Dwe.exec(e))?new zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Mwe.exec(e))?hy(t[1],t[2],t[3],t[4]):(t=Iwe.exec(e))?hy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Lwe.exec(e))?t3(t[1],t[2]/100,t[3]/100,1):(t=Fwe.exec(e))?t3(t[1],t[2]/100,t[3]/100,t[4]):GD.hasOwnProperty(e)?QD(GD[e]):e==="transparent"?new zn(NaN,NaN,NaN,0):null}function QD(e){return new zn(e>>16&255,e>>8&255,e&255,1)}function hy(e,t,r,n){return n<=0&&(e=t=r=NaN),new zn(e,t,r,n)}function Uwe(e){return e instanceof Um||(e=Jp(e)),e?(e=e.rgb(),new zn(e.r,e.g,e.b,e.opacity)):new zn}function fS(e,t,r,n){return arguments.length===1?Uwe(e):new zn(e,t,r,n??1)}function zn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}RE(zn,fS,R1(Um,{brighter(e){return e=e==null?tb:Math.pow(tb,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gp:Math.pow(Gp,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zn(Dc(this.r),Dc(this.g),Dc(this.b),rb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XD,formatHex:XD,formatHex8:qwe,formatRgb:e3,toString:e3}));function XD(){return`#${vc(this.r)}${vc(this.g)}${vc(this.b)}`}function qwe(){return`#${vc(this.r)}${vc(this.g)}${vc(this.b)}${vc((isNaN(this.opacity)?1:this.opacity)*255)}`}function e3(){const e=rb(this.opacity);return`${e===1?"rgb(":"rgba("}${Dc(this.r)}, ${Dc(this.g)}, ${Dc(this.b)}${e===1?")":`, ${e})`}`}function rb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vc(e){return e=Dc(e),(e<16?"0":"")+e.toString(16)}function t3(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new di(e,t,r,n)}function D1(e){if(e instanceof di)return new di(e.h,e.s,e.l,e.opacity);if(e instanceof Um||(e=Jp(e)),!e)return new di;if(e instanceof di)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,a=i-s,l=(i+s)/2;return a?(t===i?o=(r-n)/a+(r<n)*6:r===i?o=(n-t)/a+2:o=(t-r)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new di(o,a,l,e.opacity)}function Bwe(e,t,r,n){return arguments.length===1?D1(e):new di(e,t,r,n??1)}function di(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}RE(di,Bwe,R1(Um,{brighter(e){return e=e==null?tb:Math.pow(tb,e),new di(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gp:Math.pow(Gp,e),new di(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new zn(F_(e>=240?e-240:e+120,s,n),F_(e,s,n),F_(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new di(r3(this.h),fy(this.s),fy(this.l),rb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=rb(this.opacity);return`${e===1?"hsl(":"hsla("}${r3(this.h)}, ${fy(this.s)*100}%, ${fy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function r3(e){return e=(e||0)%360,e<0?e+360:e}function fy(e){return Math.max(0,Math.min(1,e||0))}function F_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const DE=e=>()=>e;function Wwe(e,t){return function(r){return e+r*t}}function Vwe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Hwe(e){return(e=+e)==1?M1:function(t,r){return r-t?Vwe(t,r,e):DE(isNaN(t)?r:t)}}function M1(e,t){var r=t-e;return r?Wwe(e,r):DE(isNaN(e)?t:e)}const n3=function e(t){var r=Hwe(t);function n(s,i){var o=r((s=fS(s)).r,(i=fS(i)).r),a=r(s.g,i.g),l=r(s.b,i.b),c=M1(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return n.gamma=e,n}(1);function Kwe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function Ywe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Gwe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Ah(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(a){for(o=0;o<n;++o)i[o]=s[o](a);return i}}function Zwe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function nb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Jwe(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Ah(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var pS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$_=new RegExp(pS.source,"g");function Qwe(e){return function(){return e}}function Xwe(e){return function(t){return e(t)+""}}function e0e(e,t){var r=pS.lastIndex=$_.lastIndex=0,n,s,i,o=-1,a=[],l=[];for(e=e+"",t=t+"";(n=pS.exec(e))&&(s=$_.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:nb(n,s)})),r=$_.lastIndex;return r<t.length&&(i=t.slice(r),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?Xwe(l[0].x):Qwe(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function Ah(e,t){var r=typeof t,n;return t==null||r==="boolean"?DE(t):(r==="number"?nb:r==="string"?(n=Jp(t))?(t=n,n3):e0e:t instanceof Jp?n3:t instanceof Date?Zwe:Ywe(t)?Kwe:Array.isArray(t)?Gwe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Jwe:nb)(e,t)}function ME(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function t0e(e,t){t===void 0&&(t=e,e=Ah);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[a](o-a)}}function r0e(e){return function(){return e}}function sb(e){return+e}var s3=[0,1];function jn(e){return e}function mS(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:r0e(isNaN(t)?NaN:.5)}function n0e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function s0e(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=mS(s,n),i=r(o,i)):(n=mS(n,s),i=r(i,o)),function(a){return i(n(a))}}function i0e(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=mS(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(a){var l=zm(e,a,1,n)-1;return i[l](s[l](a))}}function qm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ew(){var e=s3,t=s3,r=Ah,n,s,i,o=jn,a,l,c;function u(){var f=Math.min(e.length,t.length);return o!==jn&&(o=n0e(e[0],e[f-1])),a=f>2?i0e:s0e,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?i:(l||(l=a(e.map(n),t,r)))(n(o(f)))}return h.invert=function(f){return o(s((c||(c=a(t,e.map(n),nb)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,sb),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=ME,u()},h.clamp=function(f){return arguments.length?(o=f?!0:jn,u()):o!==jn},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,p){return n=f,s=p,u()}}function IE(){return ew()(jn,jn)}function o0e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ib(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function th(e){return e=ib(Math.abs(e)),e?e[1]:NaN}function a0e(e,t){return function(r,n){for(var s=r.length,i=[],o=0,a=e[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),i.push(r.substring(s-=a,s+a)),!((l+=a+1)>n));)a=e[o=(o+1)%e.length];return i.reverse().join(t)}}function l0e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var c0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qp(e){if(!(t=c0e.exec(e)))throw new Error("invalid format: "+e);var t;return new LE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Qp.prototype=LE.prototype;function LE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}LE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function u0e(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var I1;function d0e(e,t){var r=ib(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(I1=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+ib(e,Math.max(0,t+i-1))[0]}function i3(e,t){var r=ib(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const o3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:o0e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>i3(e*100,t),r:i3,s:d0e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function a3(e){return e}var l3=Array.prototype.map,c3=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function h0e(e){var t=e.grouping===void 0||e.thousands===void 0?a3:a0e(l3.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?a3:l0e(l3.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(h){h=Qp(h);var f=h.fill,p=h.align,v=h.sign,m=h.symbol,b=h.zero,x=h.width,w=h.comma,_=h.precision,j=h.trim,k=h.type;k==="n"?(w=!0,k="g"):o3[k]||(_===void 0&&(_=12),j=!0,k="g"),(b||f==="0"&&p==="=")&&(b=!0,f="0",p="=");var S=m==="$"?r:m==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=m==="$"?n:/[%p]/.test(k)?o:"",C=o3[k],T=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function O(P){var D=S,R=E,$,F,V;if(k==="c")R=C(P)+R,P="";else{P=+P;var q=P<0||1/P<0;if(P=isNaN(P)?l:C(Math.abs(P),_),j&&(P=u0e(P)),q&&+P==0&&v!=="+"&&(q=!1),D=(q?v==="("?v:a:v==="-"||v==="("?"":v)+D,R=(k==="s"?c3[8+I1/3]:"")+R+(q&&v==="("?")":""),T){for($=-1,F=P.length;++$<F;)if(V=P.charCodeAt($),48>V||V>57){R=(V===46?s+P.slice($+1):P.slice($))+R,P=P.slice(0,$);break}}}w&&!b&&(P=t(P,1/0));var K=D.length+P.length+R.length,Y=K<x?new Array(x-K+1).join(f):"";switch(w&&b&&(P=t(Y+P,Y.length?x-R.length:1/0),Y=""),p){case"<":P=D+P+R+Y;break;case"=":P=D+Y+P+R;break;case"^":P=Y.slice(0,K=Y.length>>1)+D+P+R+Y.slice(K);break;default:P=Y+D+P+R;break}return i(P)}return O.toString=function(){return h+""},O}function u(h,f){var p=c((h=Qp(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(th(f)/3)))*3,m=Math.pow(10,-v),b=c3[8+v/3];return function(x){return p(m*x)+b}}return{format:c,formatPrefix:u}}var py,FE,L1;f0e({thousands:",",grouping:[3],currency:["$",""]});function f0e(e){return py=h0e(e),FE=py.format,L1=py.formatPrefix,py}function p0e(e){return Math.max(0,-th(Math.abs(e)))}function m0e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(th(t)/3)))*3-th(Math.abs(e)))}function g0e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,th(t)-th(e))+1}function F1(e,t,r,n){var s=dS(e,t,r),i;switch(n=Qp(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=m0e(s,o))&&(n.precision=i),L1(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=g0e(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=p0e(s))&&(n.precision=i-(n.type==="%")*2);break}}return FE(n)}function kl(e){var t=e.domain;return e.ticks=function(r){var n=t();return cS(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return F1(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],a=n[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=uS(o,a,r),c===l)return n[s]=o,n[i]=a,t(n);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function $1(){var e=IE();return e.copy=function(){return qm(e,$1())},$s.apply(e,arguments),kl(e)}function z1(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,sb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return z1(e).unknown(t)},e=arguments.length?Array.from(e,sb):[0,1],kl(r)}function U1(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function u3(e){return Math.log(e)}function d3(e){return Math.exp(e)}function y0e(e){return-Math.log(-e)}function v0e(e){return-Math.exp(-e)}function b0e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function x0e(e){return e===10?b0e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function w0e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function h3(e){return(t,r)=>-e(-t,r)}function $E(e){const t=e(u3,d3),r=t.domain;let n=10,s,i;function o(){return s=w0e(n),i=x0e(n),r()[0]<0?(s=h3(s),i=h3(i),e(y0e,v0e)):e(u3,d3),t}return t.base=function(a){return arguments.length?(n=+a,o()):n},t.domain=function(a){return arguments.length?(r(a),o()):r()},t.ticks=a=>{const l=r();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let f=s(c),p=s(u),v,m;const b=a==null?10:+a;let x=[];if(!(n%1)&&p-f<b){if(f=Math.floor(f),p=Math.ceil(p),c>0){for(;f<=p;++f)for(v=1;v<n;++v)if(m=f<0?v/i(-f):v*i(f),!(m<c)){if(m>u)break;x.push(m)}}else for(;f<=p;++f)for(v=n-1;v>=1;--v)if(m=f>0?v/i(-f):v*i(f),!(m<c)){if(m>u)break;x.push(m)}x.length*2<b&&(x=cS(c,u,b))}else x=cS(f,p,Math.min(p-f,b)).map(i);return h?x.reverse():x},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Qp(l)).precision==null&&(l.trim=!0),l=FE(l)),a===1/0)return l;const c=Math.max(1,n*a/t.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*n<n-.5&&(h*=n),h<=c?l(u):""}},t.nice=()=>r(U1(r(),{floor:a=>i(Math.floor(s(a))),ceil:a=>i(Math.ceil(s(a)))})),t}function q1(){const e=$E(ew()).domain([1,10]);return e.copy=()=>qm(e,q1()).base(e.base()),$s.apply(e,arguments),e}function f3(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function p3(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zE(e){var t=1,r=e(f3(t),p3(t));return r.constant=function(n){return arguments.length?e(f3(t=+n),p3(t)):t},kl(r)}function B1(){var e=zE(ew());return e.copy=function(){return qm(e,B1()).constant(e.constant())},$s.apply(e,arguments)}function m3(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _0e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function j0e(e){return e<0?-e*e:e*e}function UE(e){var t=e(jn,jn),r=1;function n(){return r===1?e(jn,jn):r===.5?e(_0e,j0e):e(m3(r),m3(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},kl(t)}function qE(){var e=UE(ew());return e.copy=function(){return qm(e,qE()).exponent(e.exponent())},$s.apply(e,arguments),e}function k0e(){return qE.apply(null,arguments).exponent(.5)}function g3(e){return Math.sign(e)*e*e}function S0e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function W1(){var e=IE(),t=[0,1],r=!1,n;function s(i){var o=S0e(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(g3(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,sb)).map(g3)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return W1(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},$s.apply(s,arguments),kl(s)}function V1(){var e=[],t=[],r=[],n;function s(){var o=0,a=Math.max(1,t.length);for(r=new Array(a-1);++o<a;)r[o-1]=Twe(e,o/a);return i}function i(o){return o==null||isNaN(o=+o)?n:t[zm(r,o)]}return i.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?r[a-1]:e[0],a<r.length?r[a]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(sl),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return V1().domain(e).range(t).unknown(n)},$s.apply(i,arguments)}function H1(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(l){return l!=null&&l<=l?s[zm(n,l,0,r)]:i}function a(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(r=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return H1().domain([e,t]).range(s).unknown(i)},$s.apply(kl(o),arguments)}function K1(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[zm(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return K1().domain(e).range(t).unknown(r)},$s.apply(s,arguments)}const z_=new Date,U_=new Date;function Or(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),a=s.ceil(i);return i-o<a-i?o:a},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,a)=>{const l=[];if(i=s.ceil(i),a=a==null?1:Math.floor(a),!(i<o)||!(a>0))return l;let c;do l.push(c=new Date(+i)),t(i,a),e(i);while(c<i&&i<o);return l},s.filter=i=>Or(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!i(o););else for(;--a>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(z_.setTime(+i),U_.setTime(+o),e(z_),e(U_),Math.floor(r(z_,U_))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const ob=Or(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ob.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Or(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):ob);ob.range;const $o=1e3,ks=$o*60,zo=ks*60,Xo=zo*24,BE=Xo*7,y3=Xo*30,q_=Xo*365,bc=Or(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$o)},(e,t)=>(t-e)/$o,e=>e.getUTCSeconds());bc.range;const WE=Or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$o)},(e,t)=>{e.setTime(+e+t*ks)},(e,t)=>(t-e)/ks,e=>e.getMinutes());WE.range;const VE=Or(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ks)},(e,t)=>(t-e)/ks,e=>e.getUTCMinutes());VE.range;const HE=Or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$o-e.getMinutes()*ks)},(e,t)=>{e.setTime(+e+t*zo)},(e,t)=>(t-e)/zo,e=>e.getHours());HE.range;const KE=Or(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*zo)},(e,t)=>(t-e)/zo,e=>e.getUTCHours());KE.range;const Bm=Or(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ks)/Xo,e=>e.getDate()-1);Bm.range;const tw=Or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xo,e=>e.getUTCDate()-1);tw.range;const Y1=Or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xo,e=>Math.floor(e/Xo));Y1.range;function ou(e){return Or(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ks)/BE)}const rw=ou(0),ab=ou(1),N0e=ou(2),C0e=ou(3),rh=ou(4),E0e=ou(5),T0e=ou(6);rw.range;ab.range;N0e.range;C0e.range;rh.range;E0e.range;T0e.range;function au(e){return Or(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/BE)}const nw=au(0),lb=au(1),A0e=au(2),O0e=au(3),nh=au(4),P0e=au(5),R0e=au(6);nw.range;lb.range;A0e.range;O0e.range;nh.range;P0e.range;R0e.range;const YE=Or(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());YE.range;const GE=Or(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());GE.range;const ea=Or(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ea.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Or(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ea.range;const ta=Or(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ta.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Or(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ta.range;function G1(e,t,r,n,s,i){const o=[[bc,1,$o],[bc,5,5*$o],[bc,15,15*$o],[bc,30,30*$o],[i,1,ks],[i,5,5*ks],[i,15,15*ks],[i,30,30*ks],[s,1,zo],[s,3,3*zo],[s,6,6*zo],[s,12,12*zo],[n,1,Xo],[n,2,2*Xo],[r,1,BE],[t,1,y3],[t,3,3*y3],[e,1,q_]];function a(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const p=h&&typeof h.range=="function"?h:l(c,u,h),v=p?p.range(c,+u+1):[];return f?v.reverse():v}function l(c,u,h){const f=Math.abs(u-c)/h,p=AE(([,,b])=>b).right(o,f);if(p===o.length)return e.every(dS(c/q_,u/q_,h));if(p===0)return ob.every(Math.max(dS(c,u,h),1));const[v,m]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return v.every(m)}return[a,l]}const[D0e,M0e]=G1(ta,GE,nw,Y1,KE,VE),[I0e,L0e]=G1(ea,YE,rw,Bm,HE,WE);function B_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function W_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sf(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function F0e(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Nf(s),u=Cf(s),h=Nf(i),f=Cf(i),p=Nf(o),v=Cf(o),m=Nf(a),b=Cf(a),x=Nf(l),w=Cf(l),_={a:q,A:K,b:Y,B:L,c:null,d:j3,e:j3,f:a_e,g:y_e,G:b_e,H:s_e,I:i_e,j:o_e,L:Z1,m:l_e,M:c_e,p:X,q:te,Q:N3,s:C3,S:u_e,u:d_e,U:h_e,V:f_e,w:p_e,W:m_e,x:null,X:null,y:g_e,Y:v_e,Z:x_e,"%":S3},j={a:ve,A:H,b:G,B:he,c:null,d:k3,e:k3,f:k_e,g:D_e,G:I_e,H:w_e,I:__e,j:j_e,L:Q1,m:S_e,M:N_e,p:fe,q:_e,Q:N3,s:C3,S:C_e,u:E_e,U:T_e,V:A_e,w:O_e,W:P_e,x:null,X:null,y:R_e,Y:M_e,Z:L_e,"%":S3},k={a:O,A:P,b:D,B:R,c:$,d:w3,e:w3,f:e_e,g:x3,G:b3,H:_3,I:_3,j:Z0e,L:X0e,m:G0e,M:J0e,p:T,q:Y0e,Q:r_e,s:n_e,S:Q0e,u:B0e,U:W0e,V:V0e,w:q0e,W:H0e,x:F,X:V,y:x3,Y:b3,Z:K0e,"%":t_e};_.x=S(r,_),_.X=S(n,_),_.c=S(t,_),j.x=S(r,j),j.X=S(n,j),j.c=S(t,j);function S(W,J){return function(ae){var z=[],ke=-1,Pe=0,Ge=W.length,Ye,ft,Vt;for(ae instanceof Date||(ae=new Date(+ae));++ke<Ge;)W.charCodeAt(ke)===37&&(z.push(W.slice(Pe,ke)),(ft=v3[Ye=W.charAt(++ke)])!=null?Ye=W.charAt(++ke):ft=Ye==="e"?" ":"0",(Vt=J[Ye])&&(Ye=Vt(ae,ft)),z.push(Ye),Pe=ke+1);return z.push(W.slice(Pe,ke)),z.join("")}}function E(W,J){return function(ae){var z=Sf(1900,void 0,1),ke=C(z,W,ae+="",0),Pe,Ge;if(ke!=ae.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(J&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(Pe=W_(Sf(z.y,0,1)),Ge=Pe.getUTCDay(),Pe=Ge>4||Ge===0?lb.ceil(Pe):lb(Pe),Pe=tw.offset(Pe,(z.V-1)*7),z.y=Pe.getUTCFullYear(),z.m=Pe.getUTCMonth(),z.d=Pe.getUTCDate()+(z.w+6)%7):(Pe=B_(Sf(z.y,0,1)),Ge=Pe.getDay(),Pe=Ge>4||Ge===0?ab.ceil(Pe):ab(Pe),Pe=Bm.offset(Pe,(z.V-1)*7),z.y=Pe.getFullYear(),z.m=Pe.getMonth(),z.d=Pe.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),Ge="Z"in z?W_(Sf(z.y,0,1)).getUTCDay():B_(Sf(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(Ge+5)%7:z.w+z.U*7-(Ge+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,W_(z)):B_(z)}}function C(W,J,ae,z){for(var ke=0,Pe=J.length,Ge=ae.length,Ye,ft;ke<Pe;){if(z>=Ge)return-1;if(Ye=J.charCodeAt(ke++),Ye===37){if(Ye=J.charAt(ke++),ft=k[Ye in v3?J.charAt(ke++):Ye],!ft||(z=ft(W,ae,z))<0)return-1}else if(Ye!=ae.charCodeAt(z++))return-1}return z}function T(W,J,ae){var z=c.exec(J.slice(ae));return z?(W.p=u.get(z[0].toLowerCase()),ae+z[0].length):-1}function O(W,J,ae){var z=p.exec(J.slice(ae));return z?(W.w=v.get(z[0].toLowerCase()),ae+z[0].length):-1}function P(W,J,ae){var z=h.exec(J.slice(ae));return z?(W.w=f.get(z[0].toLowerCase()),ae+z[0].length):-1}function D(W,J,ae){var z=x.exec(J.slice(ae));return z?(W.m=w.get(z[0].toLowerCase()),ae+z[0].length):-1}function R(W,J,ae){var z=m.exec(J.slice(ae));return z?(W.m=b.get(z[0].toLowerCase()),ae+z[0].length):-1}function $(W,J,ae){return C(W,t,J,ae)}function F(W,J,ae){return C(W,r,J,ae)}function V(W,J,ae){return C(W,n,J,ae)}function q(W){return o[W.getDay()]}function K(W){return i[W.getDay()]}function Y(W){return l[W.getMonth()]}function L(W){return a[W.getMonth()]}function X(W){return s[+(W.getHours()>=12)]}function te(W){return 1+~~(W.getMonth()/3)}function ve(W){return o[W.getUTCDay()]}function H(W){return i[W.getUTCDay()]}function G(W){return l[W.getUTCMonth()]}function he(W){return a[W.getUTCMonth()]}function fe(W){return s[+(W.getUTCHours()>=12)]}function _e(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var J=S(W+="",_);return J.toString=function(){return W},J},parse:function(W){var J=E(W+="",!1);return J.toString=function(){return W},J},utcFormat:function(W){var J=S(W+="",j);return J.toString=function(){return W},J},utcParse:function(W){var J=E(W+="",!0);return J.toString=function(){return W},J}}}var v3={"-":"",_:" ",0:"0"},Ur=/^\s*\d+/,$0e=/^%/,z0e=/[\\^$*+?|[\]().{}]/g;function ct(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function U0e(e){return e.replace(z0e,"\\$&")}function Nf(e){return new RegExp("^(?:"+e.map(U0e).join("|")+")","i")}function Cf(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function q0e(e,t,r){var n=Ur.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function B0e(e,t,r){var n=Ur.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function W0e(e,t,r){var n=Ur.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function V0e(e,t,r){var n=Ur.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function H0e(e,t,r){var n=Ur.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function b3(e,t,r){var n=Ur.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function x3(e,t,r){var n=Ur.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function K0e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Y0e(e,t,r){var n=Ur.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function G0e(e,t,r){var n=Ur.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function w3(e,t,r){var n=Ur.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Z0e(e,t,r){var n=Ur.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function _3(e,t,r){var n=Ur.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function J0e(e,t,r){var n=Ur.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Q0e(e,t,r){var n=Ur.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function X0e(e,t,r){var n=Ur.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function e_e(e,t,r){var n=Ur.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function t_e(e,t,r){var n=$0e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function r_e(e,t,r){var n=Ur.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function n_e(e,t,r){var n=Ur.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function j3(e,t){return ct(e.getDate(),t,2)}function s_e(e,t){return ct(e.getHours(),t,2)}function i_e(e,t){return ct(e.getHours()%12||12,t,2)}function o_e(e,t){return ct(1+Bm.count(ea(e),e),t,3)}function Z1(e,t){return ct(e.getMilliseconds(),t,3)}function a_e(e,t){return Z1(e,t)+"000"}function l_e(e,t){return ct(e.getMonth()+1,t,2)}function c_e(e,t){return ct(e.getMinutes(),t,2)}function u_e(e,t){return ct(e.getSeconds(),t,2)}function d_e(e){var t=e.getDay();return t===0?7:t}function h_e(e,t){return ct(rw.count(ea(e)-1,e),t,2)}function J1(e){var t=e.getDay();return t>=4||t===0?rh(e):rh.ceil(e)}function f_e(e,t){return e=J1(e),ct(rh.count(ea(e),e)+(ea(e).getDay()===4),t,2)}function p_e(e){return e.getDay()}function m_e(e,t){return ct(ab.count(ea(e)-1,e),t,2)}function g_e(e,t){return ct(e.getFullYear()%100,t,2)}function y_e(e,t){return e=J1(e),ct(e.getFullYear()%100,t,2)}function v_e(e,t){return ct(e.getFullYear()%1e4,t,4)}function b_e(e,t){var r=e.getDay();return e=r>=4||r===0?rh(e):rh.ceil(e),ct(e.getFullYear()%1e4,t,4)}function x_e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ct(t/60|0,"0",2)+ct(t%60,"0",2)}function k3(e,t){return ct(e.getUTCDate(),t,2)}function w_e(e,t){return ct(e.getUTCHours(),t,2)}function __e(e,t){return ct(e.getUTCHours()%12||12,t,2)}function j_e(e,t){return ct(1+tw.count(ta(e),e),t,3)}function Q1(e,t){return ct(e.getUTCMilliseconds(),t,3)}function k_e(e,t){return Q1(e,t)+"000"}function S_e(e,t){return ct(e.getUTCMonth()+1,t,2)}function N_e(e,t){return ct(e.getUTCMinutes(),t,2)}function C_e(e,t){return ct(e.getUTCSeconds(),t,2)}function E_e(e){var t=e.getUTCDay();return t===0?7:t}function T_e(e,t){return ct(nw.count(ta(e)-1,e),t,2)}function X1(e){var t=e.getUTCDay();return t>=4||t===0?nh(e):nh.ceil(e)}function A_e(e,t){return e=X1(e),ct(nh.count(ta(e),e)+(ta(e).getUTCDay()===4),t,2)}function O_e(e){return e.getUTCDay()}function P_e(e,t){return ct(lb.count(ta(e)-1,e),t,2)}function R_e(e,t){return ct(e.getUTCFullYear()%100,t,2)}function D_e(e,t){return e=X1(e),ct(e.getUTCFullYear()%100,t,2)}function M_e(e,t){return ct(e.getUTCFullYear()%1e4,t,4)}function I_e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?nh(e):nh.ceil(e),ct(e.getUTCFullYear()%1e4,t,4)}function L_e(){return"+0000"}function S3(){return"%"}function N3(e){return+e}function C3(e){return Math.floor(+e/1e3)}var Lu,eB,tB;F_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function F_e(e){return Lu=F0e(e),eB=Lu.format,Lu.parse,tB=Lu.utcFormat,Lu.utcParse,Lu}function $_e(e){return new Date(e)}function z_e(e){return e instanceof Date?+e:+new Date(+e)}function ZE(e,t,r,n,s,i,o,a,l,c){var u=IE(),h=u.invert,f=u.domain,p=c(".%L"),v=c(":%S"),m=c("%I:%M"),b=c("%I %p"),x=c("%a %d"),w=c("%b %d"),_=c("%B"),j=c("%Y");function k(S){return(l(S)<S?p:a(S)<S?v:o(S)<S?m:i(S)<S?b:n(S)<S?s(S)<S?x:w:r(S)<S?_:j)(S)}return u.invert=function(S){return new Date(h(S))},u.domain=function(S){return arguments.length?f(Array.from(S,z_e)):f().map($_e)},u.ticks=function(S){var E=f();return e(E[0],E[E.length-1],S??10)},u.tickFormat=function(S,E){return E==null?k:c(E)},u.nice=function(S){var E=f();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?f(U1(E,S)):u},u.copy=function(){return qm(u,ZE(e,t,r,n,s,i,o,a,l,c))},u}function U_e(){return $s.apply(ZE(I0e,L0e,ea,YE,rw,Bm,HE,WE,bc,eB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function q_e(){return $s.apply(ZE(D0e,M0e,ta,GE,nw,tw,KE,VE,bc,tB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sw(){var e=0,t=1,r,n,s,i,o=jn,a=!1,l;function c(h){return h==null||isNaN(h=+h)?l:o(s===0?.5:(h=(i(h)-r)*s,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(o=h,c):o};function u(h){return function(f){var p,v;return arguments.length?([p,v]=f,o=h(p,v),c):[o(0),o(1)]}}return c.range=u(Ah),c.rangeRound=u(ME),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return i=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),c}}function Sl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function rB(){var e=kl(sw()(jn));return e.copy=function(){return Sl(e,rB())},fa.apply(e,arguments)}function nB(){var e=$E(sw()).domain([1,10]);return e.copy=function(){return Sl(e,nB()).base(e.base())},fa.apply(e,arguments)}function sB(){var e=zE(sw());return e.copy=function(){return Sl(e,sB()).constant(e.constant())},fa.apply(e,arguments)}function JE(){var e=UE(sw());return e.copy=function(){return Sl(e,JE()).exponent(e.exponent())},fa.apply(e,arguments)}function B_e(){return JE.apply(null,arguments).exponent(.5)}function iB(){var e=[],t=jn;function r(n){if(n!=null&&!isNaN(n=+n))return t((zm(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(sl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>Ewe(e,i/n))},r.copy=function(){return iB(t).domain(e)},fa.apply(r,arguments)}function iw(){var e=0,t=.5,r=1,n=1,s,i,o,a,l,c=jn,u,h=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-i)*(n*m<n*i?a:l),c(h?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,s=u(e=+e),i=u(t=+t),o=u(r=+r),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),n=i<s?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(h=!!m,p):h},p.interpolator=function(m){return arguments.length?(c=m,p):c};function v(m){return function(b){var x,w,_;return arguments.length?([x,w,_]=b,c=t0e(m,[x,w,_]),p):[c(0),c(.5),c(1)]}}return p.range=v(Ah),p.rangeRound=v(ME),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return u=m,s=m(e),i=m(t),o=m(r),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),n=i<s?-1:1,p}}function oB(){var e=kl(iw()(jn));return e.copy=function(){return Sl(e,oB())},fa.apply(e,arguments)}function aB(){var e=$E(iw()).domain([.1,1,10]);return e.copy=function(){return Sl(e,aB()).base(e.base())},fa.apply(e,arguments)}function lB(){var e=zE(iw());return e.copy=function(){return Sl(e,lB()).constant(e.constant())},fa.apply(e,arguments)}function QE(){var e=UE(iw());return e.copy=function(){return Sl(e,QE()).exponent(e.exponent())},fa.apply(e,arguments)}function W_e(){return QE.apply(null,arguments).exponent(.5)}const Vf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:PE,scaleDiverging:oB,scaleDivergingLog:aB,scaleDivergingPow:QE,scaleDivergingSqrt:W_e,scaleDivergingSymlog:lB,scaleIdentity:z1,scaleImplicit:hS,scaleLinear:$1,scaleLog:q1,scaleOrdinal:OE,scalePoint:Owe,scalePow:qE,scaleQuantile:V1,scaleQuantize:H1,scaleRadial:W1,scaleSequential:rB,scaleSequentialLog:nB,scaleSequentialPow:JE,scaleSequentialQuantile:iB,scaleSequentialSqrt:B_e,scaleSequentialSymlog:sB,scaleSqrt:k0e,scaleSymlog:B1,scaleThreshold:K1,scaleTime:U_e,scaleUtc:q_e,tickFormat:F1},Symbol.toStringTag,{value:"Module"}));var Nl=e=>e.chartData,XE=Z([Nl],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),eT=(e,t,r,n)=>n?XE(e):Nl(e);function sh(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(vi(t)&&vi(r))return!0}return!1}function E3(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function V_e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(vi(r))s=r;else if(typeof r=="function")return;if(vi(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(sh(o))return o}}function H_e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(sh(n))return E3(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,a;if(s==="auto")t!=null&&(o=Math.min(...t));else if(Ee(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&kD.test(s)){var l=kD.exec(s);if(l==null||t==null)o=void 0;else{var c=+l[1];o=t[0]-c}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(a=Math.max(...t));else if(Ee(i))a=i;else if(typeof i=="function")try{t!=null&&(a=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&SD.test(i)){var u=SD.exec(i);if(u==null||t==null)a=void 0;else{var h=+u[1];a=t[1]+h}}else a=t==null?void 0:t[1];var f=[o,a];if(sh(f))return t==null?f:E3(f,t,r)}}}var Oh=1e9,K_e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},rT,Mt=!0,Rs="[DecimalError] ",Mc=Rs+"Invalid argument: ",tT=Rs+"Exponent out of range: ",Ph=Math.floor,lc=Math.pow,Y_e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xn,Mr=1e7,Tt=7,cB=9007199254740991,cb=Ph(cB/Tt),Se={};Se.absoluteValue=Se.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Se.comparedTo=Se.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Se.decimalPlaces=Se.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Tt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Se.dividedBy=Se.div=function(e){return Wo(this,new this.constructor(e))};Se.dividedToIntegerBy=Se.idiv=function(e){var t=this,r=t.constructor;return xt(Wo(t,new r(e),0,1),r.precision)};Se.equals=Se.eq=function(e){return!this.cmp(e)};Se.exponent=function(){return mr(this)};Se.greaterThan=Se.gt=function(e){return this.cmp(e)>0};Se.greaterThanOrEqualTo=Se.gte=function(e){return this.cmp(e)>=0};Se.isInteger=Se.isint=function(){return this.e>this.d.length-2};Se.isNegative=Se.isneg=function(){return this.s<0};Se.isPositive=Se.ispos=function(){return this.s>0};Se.isZero=function(){return this.s===0};Se.lessThan=Se.lt=function(e){return this.cmp(e)<0};Se.lessThanOrEqualTo=Se.lte=function(e){return this.cmp(e)<1};Se.logarithm=Se.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Xn))throw Error(Rs+"NaN");if(r.s<1)throw Error(Rs+(r.s?"NaN":"-Infinity"));return r.eq(Xn)?new n(0):(Mt=!1,t=Wo(Xp(r,i),Xp(e,i),i),Mt=!0,xt(t,s))};Se.minus=Se.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hB(t,e):uB(t,(e.s=-e.s,e))};Se.modulo=Se.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Rs+"NaN");return r.s?(Mt=!1,t=Wo(r,e,0,1).times(e),Mt=!0,r.minus(t)):xt(new n(r),s)};Se.naturalExponential=Se.exp=function(){return dB(this)};Se.naturalLogarithm=Se.ln=function(){return Xp(this)};Se.negated=Se.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Se.plus=Se.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uB(t,e):hB(t,(e.s=-e.s,e))};Se.precision=Se.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Mc+e);if(t=mr(s)+1,n=s.d.length-1,r=n*Tt+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Se.squareRoot=Se.sqrt=function(){var e,t,r,n,s,i,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Rs+"NaN")}for(e=mr(a),Mt=!1,s=Math.sqrt(+a),s==0||s==1/0?(t=Vi(a.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Ph((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(s.toString()),r=l.precision,s=o=r+3;;)if(i=n,n=i.plus(Wo(a,i,o+2)).times(.5),Vi(i.d).slice(0,o)===(t=Vi(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(xt(i,r+1,0),i.times(i).eq(a)){n=i;break}}else if(t!="9999")break;o+=4}return Mt=!0,xt(n,r)};Se.times=Se.mul=function(e){var t,r,n,s,i,o,a,l,c,u=this,h=u.constructor,f=u.d,p=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,l=f.length,c=p.length,l<c&&(i=f,f=p,p=i,o=l,l=c,c=o),i=[],o=l+c,n=o;n--;)i.push(0);for(n=c;--n>=0;){for(t=0,s=l+n;s>n;)a=i[s]+p[n]*f[s-n-1]+t,i[s--]=a%Mr|0,t=a/Mr|0;i[s]=(i[s]+t)%Mr|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Mt?xt(e,h.precision):e};Se.toDecimalPlaces=Se.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(io(e,0,Oh),t===void 0?t=n.rounding:io(t,0,8),xt(r,e+mr(r)+1,t))};Se.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Hc(n,!0):(io(e,0,Oh),t===void 0?t=s.rounding:io(t,0,8),n=xt(new s(n),e+1,t),r=Hc(n,!0,e+1)),r};Se.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Hc(s):(io(e,0,Oh),t===void 0?t=i.rounding:io(t,0,8),n=xt(new i(s),e+mr(s)+1,t),r=Hc(n.abs(),!1,e+mr(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Se.toInteger=Se.toint=function(){var e=this,t=e.constructor;return xt(new t(e),mr(e)+1,t.rounding)};Se.toNumber=function(){return+this};Se.toPower=Se.pow=function(e){var t,r,n,s,i,o,a=this,l=a.constructor,c=12,u=+(e=new l(e));if(!e.s)return new l(Xn);if(a=new l(a),!a.s){if(e.s<1)throw Error(Rs+"Infinity");return a}if(a.eq(Xn))return a;if(n=l.precision,e.eq(Xn))return xt(a,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=a.s,o){if((r=u<0?-u:u)<=cB){for(s=new l(Xn),t=Math.ceil(n/Tt+4),Mt=!1;r%2&&(s=s.times(a),A3(s.d,t)),r=Ph(r/2),r!==0;)a=a.times(a),A3(a.d,t);return Mt=!0,e.s<0?new l(Xn).div(s):xt(s,n)}}else if(i<0)throw Error(Rs+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,a.s=1,Mt=!1,s=e.times(Xp(a,n+c)),Mt=!0,s=dB(s),s.s=i,s};Se.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=mr(s),n=Hc(s,r<=i.toExpNeg||r>=i.toExpPos)):(io(e,1,Oh),t===void 0?t=i.rounding:io(t,0,8),s=xt(new i(s),e,t),r=mr(s),n=Hc(s,e<=r||r<=i.toExpNeg,e)),n};Se.toSignificantDigits=Se.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(io(e,1,Oh),t===void 0?t=n.rounding:io(t,0,8)),xt(new n(r),e,t)};Se.toString=Se.valueOf=Se.val=Se.toJSON=Se[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mr(e),r=e.constructor;return Hc(e,t<=r.toExpNeg||t>=r.toExpPos)};function uB(e,t){var r,n,s,i,o,a,l,c,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Mt?xt(t,h):t;if(l=e.d,c=t.d,o=e.e,s=t.e,l=l.slice(),i=o-s,i){for(i<0?(n=l,i=-i,a=c.length):(n=c,s=o,a=l.length),o=Math.ceil(h/Tt),a=o>a?o+1:a+1,i>a&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(a=l.length,i=c.length,a-i<0&&(i=a,n=c,c=l,l=n),r=0;i;)r=(l[--i]=l[i]+c[i]+r)/Mr|0,l[i]%=Mr;for(r&&(l.unshift(r),++s),a=l.length;l[--a]==0;)l.pop();return t.d=l,t.e=s,Mt?xt(t,h):t}function io(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Mc+e)}function Vi(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Tt-n.length,r&&(i+=$a(r)),i+=n;o=e[t],n=o+"",r=Tt-n.length,r&&(i+=$a(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Wo=function(){function e(n,s){var i,o=0,a=n.length;for(n=n.slice();a--;)i=n[a]*s+o,n[a]=i%Mr|0,o=i/Mr|0;return o&&n.unshift(o),n}function t(n,s,i,o){var a,l;if(i!=o)l=i>o?1:-1;else for(a=l=0;a<i;a++)if(n[a]!=s[a]){l=n[a]>s[a]?1:-1;break}return l}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Mr+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var a,l,c,u,h,f,p,v,m,b,x,w,_,j,k,S,E,C,T=n.constructor,O=n.s==s.s?1:-1,P=n.d,D=s.d;if(!n.s)return new T(n);if(!s.s)throw Error(Rs+"Division by zero");for(l=n.e-s.e,E=D.length,k=P.length,p=new T(O),v=p.d=[],c=0;D[c]==(P[c]||0);)++c;if(D[c]>(P[c]||0)&&--l,i==null?w=i=T.precision:o?w=i+(mr(n)-mr(s))+1:w=i,w<0)return new T(0);if(w=w/Tt+2|0,c=0,E==1)for(u=0,D=D[0],w++;(c<k||u)&&w--;c++)_=u*Mr+(P[c]||0),v[c]=_/D|0,u=_%D|0;else{for(u=Mr/(D[0]+1)|0,u>1&&(D=e(D,u),P=e(P,u),E=D.length,k=P.length),j=E,m=P.slice(0,E),b=m.length;b<E;)m[b++]=0;C=D.slice(),C.unshift(0),S=D[0],D[1]>=Mr/2&&++S;do u=0,a=t(D,m,E,b),a<0?(x=m[0],E!=b&&(x=x*Mr+(m[1]||0)),u=x/S|0,u>1?(u>=Mr&&(u=Mr-1),h=e(D,u),f=h.length,b=m.length,a=t(h,m,f,b),a==1&&(u--,r(h,E<f?C:D,f))):(u==0&&(a=u=1),h=D.slice()),f=h.length,f<b&&h.unshift(0),r(m,h,b),a==-1&&(b=m.length,a=t(D,m,E,b),a<1&&(u++,r(m,E<b?C:D,b))),b=m.length):a===0&&(u++,m=[0]),v[c++]=u,a&&m[0]?m[b++]=P[j]||0:(m=[P[j]],b=1);while((j++<k||m[0]!==void 0)&&w--)}return v[0]||v.shift(),p.e=l,xt(p,o?i+mr(p)+1:i)}}();function dB(e,t){var r,n,s,i,o,a,l=0,c=0,u=e.constructor,h=u.precision;if(mr(e)>16)throw Error(tT+mr(e));if(!e.s)return new u(Xn);for(Mt=!1,a=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(n=Math.log(lc(2,c))/Math.LN10*2+5|0,a+=n,r=s=i=new u(Xn),u.precision=a;;){if(s=xt(s.times(e),a),r=r.times(++l),o=i.plus(Wo(s,r,a)),Vi(o.d).slice(0,a)===Vi(i.d).slice(0,a)){for(;c--;)i=xt(i.times(i),a);return u.precision=h,t==null?(Mt=!0,xt(i,h)):i}i=o}}function mr(e){for(var t=e.e*Tt,r=e.d[0];r>=10;r/=10)t++;return t}function V_(e,t,r){if(t>e.LN10.sd())throw Mt=!0,r&&(e.precision=r),Error(Rs+"LN10 precision limit exceeded");return xt(new e(e.LN10),t)}function $a(e){for(var t="";e--;)t+="0";return t}function Xp(e,t){var r,n,s,i,o,a,l,c,u,h=1,f=10,p=e,v=p.d,m=p.constructor,b=m.precision;if(p.s<1)throw Error(Rs+(p.s?"NaN":"-Infinity"));if(p.eq(Xn))return new m(0);if(t==null?(Mt=!1,c=b):c=t,p.eq(10))return t==null&&(Mt=!0),V_(m,c);if(c+=f,m.precision=c,r=Vi(v),n=r.charAt(0),i=mr(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Vi(p.d),n=r.charAt(0),h++;i=mr(p),n>1?(p=new m("0."+r),i++):p=new m(n+"."+r.slice(1))}else return l=V_(m,c+2,b).times(i+""),p=Xp(new m(n+"."+r.slice(1)),c-f).plus(l),m.precision=b,t==null?(Mt=!0,xt(p,b)):p;for(a=o=p=Wo(p.minus(Xn),p.plus(Xn),c),u=xt(p.times(p),c),s=3;;){if(o=xt(o.times(u),c),l=a.plus(Wo(o,new m(s),c)),Vi(l.d).slice(0,c)===Vi(a.d).slice(0,c))return a=a.times(2),i!==0&&(a=a.plus(V_(m,c+2,b).times(i+""))),a=Wo(a,new m(h),c),m.precision=b,t==null?(Mt=!0,xt(a,b)):a;a=l,s+=2}}function T3(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Ph(r/Tt),e.d=[],n=(r+1)%Tt,r<0&&(n+=Tt),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Tt;n<s;)e.d.push(+t.slice(n,n+=Tt));t=t.slice(n),n=Tt-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Mt&&(e.e>cb||e.e<-cb))throw Error(tT+r)}else e.s=0,e.e=0,e.d=[0];return e}function xt(e,t,r){var n,s,i,o,a,l,c,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Tt,s=t,c=h[u=0];else{if(u=Math.ceil((n+1)/Tt),i=h.length,u>=i)return e;for(c=i=h[u],o=1;i>=10;i/=10)o++;n%=Tt,s=n-Tt+o}if(r!==void 0&&(i=lc(10,o-s-1),a=c/i%10|0,l=t<0||h[u+1]!==void 0||c%i,l=r<4?(a||l)&&(r==0||r==(e.s<0?3:2)):a>5||a==5&&(r==4||l||r==6&&(n>0?s>0?c/lc(10,o-s):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return l?(i=mr(e),h.length=1,t=t-i-1,h[0]=lc(10,(Tt-t%Tt)%Tt),e.e=Ph(-t/Tt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=u,i=1,u--):(h.length=u+1,i=lc(10,Tt-n),h[u]=s>0?(c/lc(10,o-s)%lc(10,s)|0)*i:0),l)for(;;)if(u==0){(h[0]+=i)==Mr&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=Mr)break;h[u--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(Mt&&(e.e>cb||e.e<-cb))throw Error(tT+mr(e));return e}function hB(e,t){var r,n,s,i,o,a,l,c,u,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Mt?xt(t,p):t;if(l=e.d,h=t.d,n=t.e,c=e.e,l=l.slice(),o=c-n,o){for(u=o<0,u?(r=l,o=-o,a=h.length):(r=h,n=c,a=l.length),s=Math.max(Math.ceil(p/Tt),a)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=l.length,a=h.length,u=s<a,u&&(a=s),s=0;s<a;s++)if(l[s]!=h[s]){u=l[s]<h[s];break}o=0}for(u&&(r=l,l=h,h=r,t.s=-t.s),a=l.length,s=h.length-a;s>0;--s)l[a++]=0;for(s=h.length;s>o;){if(l[--s]<h[s]){for(i=s;i&&l[--i]===0;)l[i]=Mr-1;--l[i],l[s]+=Mr}l[s]-=h[s]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Mt?xt(t,p):t):new f(0)}function Hc(e,t,r){var n,s=mr(e),i=Vi(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+$a(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+$a(-s-1)+i,r&&(n=r-o)>0&&(i+=$a(n))):s>=o?(i+=$a(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+$a(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=$a(n))),e.s<0?"-"+i:i}function A3(e,t){if(e.length>t)return e.length=t,!0}function fB(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Mc+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return T3(o,i.toString())}else if(typeof i!="string")throw Error(Mc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Y_e.test(i))T3(o,i);else throw Error(Mc+i)}if(s.prototype=Se,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=fB,s.config=s.set=G_e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function G_e(e){if(!e||typeof e!="object")throw Error(Rs+"Object expected");var t,r,n,s=["precision",1,Oh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Ph(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Mc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Mc+r+": "+n);return this}var rT=fB(K_e);Xn=new rT(1);const mt=rT;var Z_e=e=>e,pB={},mB=e=>e===pB,O3=e=>function t(){return arguments.length===0||arguments.length===1&&mB(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},gB=(e,t)=>e===1?t:O3(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==pB).length;return i>=e?t(...n):gB(e-i,O3(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=n.map(u=>mB(u)?a.shift():u);return t(...c,...a)}))}),ow=e=>gB(e.length,e),gS=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},J_e=ow((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Q_e=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return Z_e;var n=t.reverse(),s=n[0],i=n.slice(1);return function(){return i.reduce((o,a)=>a(o),s(...arguments))}},yS=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),yB=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,a)=>{var l;return o===((l=t)===null||l===void 0?void 0:l[a])})||(t=s,r=e(...s)),r}};function vB(e){var t;return e===0?t=1:t=Math.floor(new mt(e).abs().log(10).toNumber())+1,t}function bB(e,t,r){for(var n=new mt(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}ow((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});ow((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});ow((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var xB=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},wB=(e,t,r)=>{if(e.lte(0))return new mt(0);var n=vB(e.toNumber()),s=new mt(10).pow(n),i=e.div(s),o=n!==1?.05:.1,a=new mt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=a.mul(s);return t?new mt(l.toNumber()):new mt(Math.ceil(l.toNumber()))},X_e=(e,t,r)=>{var n=new mt(1),s=new mt(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new mt(10).pow(vB(e)-1),s=new mt(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new mt(Math.floor(e)))}else e===0?s=new mt(Math.floor((t-1)/2)):r||(s=new mt(Math.floor(e)));var o=Math.floor((t-1)/2),a=Q_e(J_e(l=>s.add(new mt(l-o).mul(n)).toNumber()),gS);return a(0,t)},_B=function(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var i=wB(new mt(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new mt(0):(o=new mt(e).add(t).div(2),o=o.sub(new mt(o).mod(i)));var a=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new mt(t).sub(o).div(i).toNumber()),c=a+l+1;return c>r?_B(e,t,r,n,s+1):(c<r&&(l=t>0?l+(r-c):l,a=t>0?a:a+(r-c)),{step:i,tickMin:o.sub(new mt(a).mul(i)),tickMax:o.add(new mt(l).mul(i))})};function eje(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,a]=xB([t,r]);if(o===-1/0||a===1/0){var l=a===1/0?[o,...gS(0,n-1).map(()=>1/0)]:[...gS(0,n-1).map(()=>-1/0),a];return t>r?yS(l):l}if(o===a)return X_e(o,n,s);var{step:c,tickMin:u,tickMax:h}=_B(o,a,i,s,0),f=bB(u,h.add(new mt(.1).mul(c)),c);return t>r?yS(f):f}function tje(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=xB([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var a=Math.max(t,2),l=wB(new mt(o).sub(i).div(a-1),s,0),c=[...bB(new mt(i),new mt(o),l),o];return s===!1&&(c=c.map(u=>Math.round(u))),r>n?yS(c):c}var rje=yB(eje),nje=yB(tje),sje=e=>e.rootProps.barCategoryGap,Wm=e=>e.rootProps.stackOffset,nT=e=>e.options.chartName,sT=e=>e.rootProps.syncId,jB=e=>e.rootProps.syncMethod,iT=e=>e.options.eventEmitter,Io={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Zn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},aw=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},ije={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Io.angleAxisId,includeHidden:!1,name:void 0,reversed:Io.reversed,scale:Io.scale,tick:Io.tick,tickCount:void 0,ticks:void 0,type:Io.type,unit:void 0},oje={allowDataOverflow:Zn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Zn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zn.scale,tick:Zn.tick,tickCount:Zn.tickCount,ticks:void 0,type:Zn.type,unit:void 0},aje={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Io.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Io.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Io.scale,tick:Io.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},lje={allowDataOverflow:Zn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Zn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zn.scale,tick:Zn.tick,tickCount:Zn.tickCount,ticks:void 0,type:"category",unit:void 0},oT=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?aje:ije,aT=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?lje:oje,lw=e=>e.polarOptions,lT=Z([da,ha,zr],Qq),kB=Z([lw,lT],(e,t)=>{if(e!=null)return Es(e.innerRadius,t,0)}),SB=Z([lw,lT],(e,t)=>{if(e!=null)return Es(e.outerRadius,t,t*.8)}),cje=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},NB=Z([lw],cje);Z([oT,NB],aw);var CB=Z([lT,kB,SB],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Z([aT,CB],aw);var EB=Z([yt,lw,kB,SB,da,ha],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=t;return{cx:Es(o,s,s/2),cy:Es(a,i,i/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),Ft=(e,t)=>t,Vm=(e,t,r)=>r;function TB(e){return e==null?void 0:e.id}var Pr=e=>{var t=yt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Rh=e=>e.tooltip.settings.axisId,Rr=e=>{var t=Pr(e),r=Rh(e);return Hm(e,t,r)};function AB(e,t,r){var{chartData:n=[]}=t,s=r==null?void 0:r.dataKey,i=new Map;return e.forEach(o=>{var a,l=(a=o.data)!==null&&a!==void 0?a:n;if(!(l==null||l.length===0)){var c=TB(o);l.forEach((u,h)=>{var f=s==null?h:String(Rt(u,s,null)),p=Rt(u,o.dataKey,0),v;i.has(f)?v=i.get(f):v={},Object.assign(v,{[c]:p}),i.set(f,v)})}}),Array.from(i.values())}function cT(e){return e.stackId!=null&&e.dataKey!=null}function P3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ub(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P3(Object(r),!0).forEach(function(n){uje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uje(e,t,r){return(t=dje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dje(e){var t=hje(e,"string");return typeof t=="symbol"?t:t+""}function hje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vS=[0,"auto"],Kn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},pa=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Kn},Yn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:vS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Jx},Cl=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Yn},fje={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},uT=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??fje},or=(e,t,r)=>{switch(t){case"xAxis":return pa(e,r);case"yAxis":return Cl(e,r);case"zAxis":return uT(e,r);case"angleAxis":return oT(e,r);case"radiusAxis":return aT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},pje=(e,t,r)=>{switch(t){case"xAxis":return pa(e,r);case"yAxis":return Cl(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Hm=(e,t,r)=>{switch(t){case"xAxis":return pa(e,r);case"yAxis":return Cl(e,r);case"angleAxis":return oT(e,r);case"radiusAxis":return aT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},OB=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function dT(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var PB=e=>e.graphicalItems.cartesianItems,mje=Z([Ft,Vm],dT),hT=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Km=Z([PB,or,mje],hT),RB=Z([Km],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(cT)),DB=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),MB=Z([Km],DB),fT=e=>e.map(t=>t.data).filter(Boolean).flat(1),gje=Z([Km],fT),pT=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},mT=Z([gje,eT],pT),gT=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Rt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Rt(s,n)}))):e.map(n=>({value:n})),cw=Z([mT,or,Km],gT);function IB(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function lu(e){return e.filter(t=>so(t)||t instanceof Date).map(Number).filter(t=>As(t)===!1)}function yje(e,t,r){return!r||typeof t!="number"||As(t)?[]:r.length?lu(r.flatMap(n=>{var s=Rt(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!vi(i)||!vi(o)))return[t-i,t+o]})):[]}var vje=Z([RB,eT,Rr],AB),LB=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,a]=i,l=a.map(TB);return[o,{stackedData:Pbe(e,l,r),graphicalItems:a}]}))},bje=Z([vje,RB,Wm],LB),FB=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=Mbe(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},xje=Z([bje,Nl,Ft],FB),$B=(e,t,r,n,s)=>r.length>0?e.flatMap(i=>r.flatMap(o=>{var a,l,c=(a=n[o.id])===null||a===void 0?void 0:a.filter(h=>IB(s,h)),u=Rt(i,(l=t.dataKey)!==null&&l!==void 0?l:o.dataKey);return{value:u,errorDomain:yje(i,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:Rt(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),uw=e=>e.errorBars,zB=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>IB(r,n));Z([MB,uw,Ft],zB);var wje=Z([mT,or,MB,uw,Ft],$B);function _je(e){var{value:t}=e;if(so(t)||t instanceof Date)return t}var R3=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=lu(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},jje=(e,t,r)=>{var n=e.map(_je).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&DU(n))?E1(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},yT=e=>{var t;if(e==null||!("domain"in e))return vS;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=lu(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:vS},db=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(n.length!==0){var s=n.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},UB=e=>e.referenceElements.dots,Dh=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),kje=Z([UB,Ft,Vm],Dh),qB=e=>e.referenceElements.areas,Sje=Z([qB,Ft,Vm],Dh),BB=e=>e.referenceElements.lines,Nje=Z([BB,Ft,Vm],Dh),WB=(e,t)=>{var r=lu(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Cje=Z(kje,Ft,WB),VB=(e,t)=>{var r=lu(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Eje=Z([Sje,Ft],VB),HB=(e,t)=>{var r=lu(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Tje=Z(Nje,Ft,HB),Aje=Z(Cje,Tje,Eje,(e,t,r)=>db(e,r,t)),KB=Z([or],yT),vT=(e,t,r,n,s,i,o)=>{var a=V_e(t,e.allowDataOverflow);if(a!=null)return a;var l=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",c=l?db(r,s,R3(n)):db(s,R3(n));return H_e(t,c,e.allowDataOverflow)},Oje=Z([or,KB,xje,wje,Aje,yt,Ft],vT),Pje=[0,1],bT=(e,t,r,n,s,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:a,type:l}=e,c=jl(t,i);return c&&a==null?E1(0,r.length):l==="category"?jje(n,e,c):s==="expand"?Pje:o}},xT=Z([or,yt,mT,cw,Wm,Ft,Oje],bT),YB=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var a="scale".concat(Fm(i));return a in Vf?a:"point"}}},Mh=Z([or,yt,OB,nT,Ft],YB);function Rje(e){if(e!=null){if(e in Vf)return Vf[e]();var t="scale".concat(Fm(e));if(t in Vf)return Vf[t]()}}function wT(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=Rje(t);if(s!=null){var i=s.domain(r).range(n);return Ebe(i),i}}}var _T=(e,t,r)=>{var n=yT(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&sh(e))return rje(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&sh(e))return nje(e,t.tickCount,t.allowDecimals)}},jT=Z([xT,Hm,Mh],_T),kT=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&sh(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],a=r[r.length-1];return[Math.min(s,i),Math.max(o,a)]}return t},Dje=Z([or,xT,jT,Ft],kT),Mje=Z(cw,or,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(lu(e.map(a=>a.value))).sort((a,l)=>a-l);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),GB=Z(Mje,yt,sje,zr,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!vi(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Es(r,e*i),a=e*i/2;return a-o-(a-o)/i*o}return 0}),Ije=(e,t)=>{var r=pa(e,t);return r==null||typeof r.padding!="string"?0:GB(e,"xAxis",t,r.padding)},Lje=(e,t)=>{var r=Cl(e,t);return r==null||typeof r.padding!="string"?0:GB(e,"yAxis",t,r.padding)},Fje=Z(pa,Ije,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),$je=Z(Cl,Lje,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),zje=Z([zr,Fje,Xx,Qx,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),Uje=Z([zr,yt,$je,Xx,Qx,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Ym=(e,t,r,n)=>{var s;switch(t){case"xAxis":return zje(e,r,n);case"yAxis":return Uje(e,r,n);case"zAxis":return(s=uT(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return NB(e);case"radiusAxis":return CB(e,r);default:return}},ZB=Z([or,Ym],aw),Ih=Z([or,Mh,Dje,ZB],wT);Z([Km,uw,Ft],zB);function JB(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dw=(e,t)=>t,hw=(e,t,r)=>r,qje=Z(wE,dw,hw,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(JB)),Bje=Z(_E,dw,hw,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(JB)),QB=(e,t)=>({width:e.width,height:t.height}),Wje=(e,t)=>{var r=typeof t.width=="number"?t.width:Jx;return{width:r,height:e.height}},Vje=Z(zr,pa,QB),Hje=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Kje=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Yje=Z(ha,zr,qje,dw,hw,(e,t,r,n,s)=>{var i={},o;return r.forEach(a=>{var l=QB(t,a);o==null&&(o=Hje(t,n,e));var c=n==="top"&&!s||n==="bottom"&&s;i[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),i}),Gje=Z(da,zr,Bje,dw,hw,(e,t,r,n,s)=>{var i={},o;return r.forEach(a=>{var l=Wje(t,a);o==null&&(o=Kje(t,n,e));var c=n==="left"&&!s||n==="right"&&s;i[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),i}),Zje=(e,t)=>{var r=zr(e),n=pa(e,t);if(n!=null){var s=Yje(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},Jje=(e,t)=>{var r=zr(e),n=Cl(e,t);if(n!=null){var s=Gje(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},Qje=Z(zr,Cl,(e,t)=>{var r=typeof t.width=="number"?t.width:Jx;return{width:r,height:e.height}}),XB=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,a=jl(e,n),l=t.map(c=>c.value);if(o&&a&&i==="category"&&s&&DU(l))return l}},ST=Z([yt,cw,or,Ft],XB),e7=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=jl(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(a=>a.value)}},NT=Z([yt,cw,Hm,Ft],e7),D3=Z([yt,pje,Mh,Ih,ST,NT,Ym,jT,Ft],(e,t,r,n,s,i,o,a,l)=>{if(t==null)return null;var c=jl(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:s,isCategorical:c,niceTicks:a,range:o,realScaleType:r,scale:n}}),Xje=(e,t,r,n,s,i,o,a,l)=>{if(!(t==null||n==null)){var c=jl(e,l),{type:u,ticks:h,tickCount:f}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,v=u==="category"&&n.bandwidth?n.bandwidth()/p:0;v=l==="angleAxis"&&i!=null&&i.length>=2?cn(i[0]-i[1])*2*v:v;var m=h||s;if(m){var b=m.map((x,w)=>{var _=o?o.indexOf(x):x;return{index:w,coordinate:n(_)+v,value:x,offset:v}});return b.filter(x=>!As(x.coordinate))}return c&&a?a.map((x,w)=>({coordinate:n(x)+v,value:x,index:w,offset:v})):n.ticks?n.ticks(f).map(x=>({coordinate:n(x)+v,value:x,offset:v})):n.domain().map((x,w)=>({coordinate:n(x)+v,value:o?o[x]:x,index:w,offset:v}))}},t7=Z([yt,Hm,Mh,Ih,jT,Ym,ST,NT,Ft],Xje),eke=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var a=jl(e,o),{tickCount:l}=t,c=0;return c=o==="angleAxis"&&(n==null?void 0:n.length)>=2?cn(n[0]-n[1])*2*c:c,a&&i?i.map((u,h)=>({coordinate:r(u)+c,value:u,index:h,offset:c})):r.ticks?r.ticks(l).map(u=>({coordinate:r(u)+c,value:u,offset:c})):r.domain().map((u,h)=>({coordinate:r(u)+c,value:s?s[u]:u,index:h,offset:c}))}},r7=Z([yt,Hm,Ih,Ym,ST,NT,Ft],eke),n7=Z(or,Ih,(e,t)=>{if(!(e==null||t==null))return ub(ub({},e),{},{scale:t})}),tke=Z([or,Mh,xT,ZB],wT);Z((e,t,r)=>uT(e,r),tke,(e,t)=>{if(!(e==null||t==null))return ub(ub({},e),{},{scale:t})});var rke=Z([yt,wE,_E],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),s7=e=>e.options.defaultTooltipEventType,i7=e=>e.options.validateTooltipEventTypes;function o7(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function CT(e,t){var r=s7(e),n=i7(e);return o7(t,r,n)}function nke(e){return Me(t=>CT(t,e))}var a7=(e,t)=>{var r,n=Number(t);if(!(As(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},ske=e=>e.tooltip.settings,Ba={active:!1,index:null,dataKey:void 0,coordinate:void 0},ike={itemInteraction:{click:Ba,hover:Ba},axisInteraction:{click:Ba,hover:Ba},keyboardInteraction:Ba,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},l7=os({name:"tooltip",initialState:ike,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Bo(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:oke,removeTooltipEntrySettings:ake,setTooltipSettingsState:lke,setActiveMouseOverItemIndex:c7,mouseLeaveItem:cke,mouseLeaveChart:u7,setActiveClickItemIndex:uke,setMouseOverAxisIndex:d7,setMouseClickAxisIndex:dke,setSyncInteraction:bS,setKeyboardInteraction:xS}=l7.actions,hke=l7.reducer;function M3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function my(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(r),!0).forEach(function(n){fke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fke(e,t,r){return(t=pke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pke(e){var t=mke(e,"string");return typeof t=="symbol"?t:t+""}function mke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gke(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function yke(e){return e.index!=null}var h7=(e,t,r,n)=>{if(t==null)return Ba;var s=gke(e,t,r);if(s==null)return Ba;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(yke(s)){if(i)return my(my({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return my(my({},Ba),{},{coordinate:s.coordinate})},ET=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!vi(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},f7=(e,t,r,n,s,i,o,a)=>{if(!(i==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,i);if(c!=null)return c;var u=s==null?void 0:s[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},p7=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Gm=e=>e.options.tooltipPayloadSearcher,Lh=e=>e.tooltip;function I3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function L3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I3(Object(r),!0).forEach(function(n){vke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vke(e,t,r){return(t=bke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bke(e){var t=xke(e,"string");return typeof t=="symbol"?t:t+""}function xke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wke(e,t){return e??t}var m7=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=r,h=[];return e.reduce((f,p)=>{var v,{dataDefinedOnItem:m,settings:b}=p,x=wke(m,a),w=Array.isArray(x)?Xq(x,c,u):x,_=(v=b==null?void 0:b.dataKey)!==null&&v!==void 0?v:n==null?void 0:n.dataKey,j=b==null?void 0:b.nameKey,k;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?k=MU(w,n.dataKey,s):k=i(w,t,l,j),Array.isArray(k))k.forEach(E=>{var C=L3(L3({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});f.push(ND({tooltipEntrySettings:C,dataKey:E.dataKey,payload:E.payload,value:Rt(E.payload,E.dataKey),name:E.name}))});else{var S;f.push(ND({tooltipEntrySettings:b,dataKey:_,payload:k,value:Rt(k,_),name:(S=Rt(k,j))!==null&&S!==void 0?S:b==null?void 0:b.name}))}return f},h)}},TT=Z([Rr,yt,OB,nT,Pr],YB),_ke=Z([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),jke=Z([Pr,Rh],dT),Zm=Z([_ke,Rr,jke],hT),kke=Z([Zm],e=>e.filter(cT)),Ske=Z([Zm],fT),Fh=Z([Ske,Nl],pT),Nke=Z([kke,Nl,Rr],AB),AT=Z([Fh,Rr,Zm],gT),Cke=Z([Rr],yT),Eke=Z([Zm],e=>e.filter(cT)),Tke=Z([Nke,Eke,Wm],LB),Ake=Z([Tke,Nl,Pr],FB),Oke=Z([Zm],DB),Pke=Z([Fh,Rr,Oke,uw,Pr],$B),Rke=Z([UB,Pr,Rh],Dh),Dke=Z([Rke,Pr],WB),Mke=Z([qB,Pr,Rh],Dh),Ike=Z([Mke,Pr],VB),Lke=Z([BB,Pr,Rh],Dh),Fke=Z([Lke,Pr],HB),$ke=Z([Dke,Fke,Ike],db),zke=Z([Rr,Cke,Ake,Pke,$ke,yt,Pr],vT),g7=Z([Rr,yt,Fh,AT,Wm,Pr,zke],bT),Uke=Z([g7,Rr,TT],_T),qke=Z([Rr,g7,Uke,Pr],kT),y7=e=>{var t=Pr(e),r=Rh(e),n=!1;return Ym(e,t,r,n)},v7=Z([Rr,y7],aw),b7=Z([Rr,TT,qke,v7],wT),Bke=Z([yt,AT,Rr,Pr],XB),Wke=Z([yt,AT,Rr,Pr],e7),Vke=(e,t,r,n,s,i,o,a)=>{if(t){var{type:l}=t,c=jl(e,a);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=l==="category"&&n.bandwidth?n.bandwidth()/u:0;return h=a==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?cn(s[0]-s[1])*2*h:h,c&&o?o.map((f,p)=>({coordinate:n(f)+h,value:f,index:p,offset:h})):n.domain().map((f,p)=>({coordinate:n(f)+h,value:i?i[f]:f,index:p,offset:h}))}}},ma=Z([yt,Rr,TT,b7,y7,Bke,Wke,Pr],Vke),OT=Z([s7,i7,ske],(e,t,r)=>o7(r.shared,e,t)),x7=e=>e.tooltip.settings.trigger,PT=e=>e.tooltip.settings.defaultIndex,fw=Z([Lh,OT,x7,PT],h7),ih=Z([fw,Fh],ET),w7=Z([ma,ih],a7),Hke=Z([fw],e=>{if(e)return e.dataKey}),_7=Z([Lh,OT,x7,PT],p7),Kke=Z([da,ha,yt,zr,ma,PT,_7,Gm],f7),Yke=Z([fw,Kke],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Gke=Z([fw],e=>e.active),Zke=Z([_7,ih,Nl,Rr,w7,Gm,OT],m7),Jke=Z([Zke],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function F3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(r),!0).forEach(function(n){Qke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qke(e,t,r){return(t=Xke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xke(e){var t=eSe(e,"string");return typeof t=="symbol"?t:t+""}function eSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tSe=()=>Me(Rr),rSe=()=>{var e=tSe(),t=Me(ma),r=Me(b7);return eS($3($3({},e),{},{scale:r}),t)},nSe=()=>Me(nT),RT=(e,t)=>t,j7=(e,t,r)=>r,DT=(e,t,r,n)=>n,sSe=Z(ma,e=>Bx(e,t=>t.coordinate)),MT=Z([Lh,RT,j7,DT],h7),k7=Z([MT,Fh],ET),iSe=(e,t,r)=>{if(t!=null){var n=Lh(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},S7=Z([Lh,RT,j7,DT],p7),hb=Z([da,ha,yt,zr,ma,DT,S7,Gm],f7),oSe=Z([MT,hb],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),N7=Z(ma,k7,a7),aSe=Z([S7,k7,Nl,Rr,N7,Gm,RT],m7),lSe=Z([MT],e=>({isActive:e.active,activeIndex:e.index})),cSe=(e,t,r,n,s,i,o,a)=>{if(!(!e||!t||!n||!s||!i)){var l=Ibe(e.chartX,e.chartY,t,r,a);if(l){var c=Fbe(l,t),u=Nbe(c,o,i,n,s),h=Lbe(t,i,u,l);return{activeIndex:String(u),activeCoordinate:h}}}};function wS(){return wS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wS.apply(null,arguments)}function z3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z3(Object(r),!0).forEach(function(n){uSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uSe(e,t,r){return(t=dSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dSe(e){var t=hSe(e,"string");return typeof t=="symbol"?t:t+""}function hSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fSe(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:a,tooltipEventType:l,chartName:c}=e,u=t,h=r,f=n;if(!a||!u||c!=="ScatterChart"&&l!=="axis")return null;var p,v;if(c==="ScatterChart")p=u,v=Mxe;else if(c==="BarChart")p=Ixe(o,u,s,i),v=w1;else if(o==="radial"){var{cx:m,cy:b,radius:x,startAngle:w,endAngle:_}=_1(u);p={cx:m,cy:b,startAngle:w,endAngle:_,innerRadius:x,outerRadius:x},v=k1}else p={points:mwe(o,u,s)},v=EE;var j=typeof a=="object"&&"className"in a?a.className:void 0,k=gy(gy(gy(gy({stroke:"#ccc",pointerEvents:"none"},s),p),qt(a,!1)),{},{payload:h,payloadIndex:f,className:st("recharts-tooltip-cursor",j)});return g.isValidElement(a)?g.cloneElement(a,k):g.createElement(v,k)}function pSe(e){var t=rSe(),r=o1(),n=NE(),s=nSe();return g.createElement(fSe,wS({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var C7=g.createContext(null),mSe=()=>g.useContext(C7),E7={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||l,f),v=r?r+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],p]:l._events[v].push(p):(l._events[v]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)t.call(c,u)&&l.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=r?r+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,f=u.length,p=new Array(f);h<f;h++)p[h]=u[h].fn;return p},a.prototype.listenerCount=function(l){var c=r?r+l:l,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(l,c,u,h,f,p){var v=r?r+l:l;if(!this._events[v])return!1;var m=this._events[v],b=arguments.length,x,w;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,u),!0;case 4:return m.fn.call(m.context,c,u,h),!0;case 5:return m.fn.call(m.context,c,u,h,f),!0;case 6:return m.fn.call(m.context,c,u,h,f,p),!0}for(w=1,x=new Array(b-1);w<b;w++)x[w-1]=arguments[w];m.fn.apply(m.context,x)}else{var _=m.length,j;for(w=0;w<_;w++)switch(m[w].once&&this.removeListener(l,m[w].fn,void 0,!0),b){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,c);break;case 3:m[w].fn.call(m[w].context,c,u);break;case 4:m[w].fn.call(m[w].context,c,u,h);break;default:if(!x)for(j=1,x=new Array(b-1);j<b;j++)x[j-1]=arguments[j];m[w].fn.apply(m[w].context,x)}}return!0},a.prototype.on=function(l,c,u){return i(this,l,c,u,!1)},a.prototype.once=function(l,c,u){return i(this,l,c,u,!0)},a.prototype.removeListener=function(l,c,u,h){var f=r?r+l:l;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!h||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var v=0,m=[],b=p.length;v<b;v++)(p[v].fn!==c||h&&!p[v].once||u&&p[v].context!==u)&&m.push(p[v]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=r?r+l:l,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(E7);var gSe=E7.exports;const T7=wi(gSe);var em=new T7,_S="recharts.syncEvent.tooltip",U3="recharts.syncEvent.brush";function A7(e,t){if(t){var r=Number.parseInt(t,10);if(!As(r))return e==null?void 0:e[r]}}var ySe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},O7=os({name:"options",initialState:ySe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),vSe=O7.reducer,{createEventEmitter:bSe}=O7.actions;function xSe(e){return e.tooltip.syncInteraction}var wSe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},P7=os({name:"chartData",initialState:wSe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:q3,setDataStartEndIndexes:_Se,setComputedData:mze}=P7.actions,jSe=P7.reducer,R7=()=>{};function kSe(){var e=Me(sT),t=Me(iT),r=Wt(),n=Me(jB),s=Me(ma),i=NE(),o=jE(),a=Me(l=>l.rootProps.className);g.useEffect(()=>{if(e==null)return R7;var l=(c,u,h)=>{if(t!==h&&e===c){if(n==="index"){r(u);return}if(s!=null){var f;if(typeof n=="function"){var p={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},v=n(s,p);f=s[v]}else n==="value"&&(f=s.find(S=>String(S.value)===u.payload.label));var{coordinate:m}=u.payload;if(f==null||u.payload.active===!1||m==null||o==null){r(bS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y:x}=m,w=Math.min(b,o.x+o.width),_=Math.min(x,o.y+o.height),j={x:i==="horizontal"?f.coordinate:w,y:i==="horizontal"?_:f.coordinate},k=bS({active:u.payload.active,coordinate:j,dataKey:u.payload.dataKey,index:String(f.index),label:u.payload.label});r(k)}}};return em.on(_S,l),()=>{em.off(_S,l)}},[a,r,t,e,n,s,i,o])}function SSe(){var e=Me(sT),t=Me(iT),r=Wt();g.useEffect(()=>{if(e==null)return R7;var n=(s,i,o)=>{t!==o&&e===s&&r(_Se(i))};return em.on(U3,n),()=>{em.off(U3,n)}},[r,t,e])}function NSe(){var e=Wt();g.useEffect(()=>{e(bSe())},[e]),kSe(),SSe()}function CSe(e,t,r,n,s,i){var o=Me(f=>iSe(f,e,t)),a=Me(iT),l=Me(sT),c=Me(jB),u=Me(xSe),h=u==null?void 0:u.active;g.useEffect(()=>{if(!h&&l!=null&&a!=null){var f=bS({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});em.emit(_S,l,f,a)}},[h,r,o,s,n,a,l,c,i])}function B3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function W3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B3(Object(r),!0).forEach(function(n){ESe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ESe(e,t,r){return(t=TSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TSe(e){var t=ASe(e,"string");return typeof t=="symbol"?t:t+""}function ASe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OSe(e){return e.dataKey}function PSe(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(fxe,t)}var V3=[],RSe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Th.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function H3(e){var t=Fs(e,RSe),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:a,isAnimationActive:l,offset:c,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:p,wrapperStyle:v,cursor:m,shared:b,trigger:x,defaultIndex:w,portal:_,axisId:j}=t,k=Wt(),S=typeof w=="number"?String(w):w;g.useEffect(()=>{k(lke({shared:b,trigger:x,axisId:j,active:r,defaultIndex:S}))},[k,b,x,j,r,S]);var E=jE(),C=u1(),T=nke(b),{activeIndex:O,isActive:P}=Me(G=>lSe(G,T,x,S)),D=Me(G=>aSe(G,T,x,S)),R=Me(G=>N7(G,T,x,S)),$=Me(G=>oSe(G,T,x,S)),F=D,V=mSe(),q=r??P,[K,Y]=Cq([F,q]),L=T==="axis"?R:void 0;CSe(T,x,$,L,O,q);var X=_??V;if(X==null)return null;var te=F??V3;q||(te=V3),a&&te.length&&(te=vq(F.filter(G=>G.value!=null&&(G.hide!==!0||t.includeHidden)),u,OSe));var ve=te.length>0,H=g.createElement(xxe,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:l,active:q,coordinate:$,hasPayload:ve,offset:c,position:h,reverseDirection:f,useTranslate3d:p,viewBox:E,wrapperStyle:v,lastBoundingBox:K,innerRef:Y,hasPortalFromProps:!!_},PSe(o,W3(W3({},t),{},{payload:te,label:L,active:q,coordinate:$,accessibilityLayer:C})));return g.createElement(g.Fragment,null,to.createPortal(H,X),q&&g.createElement(pSe,{cursor:m,tooltipEventType:T,coordinate:$,payload:F,index:O}))}var D7={},M7={},I7={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,a=null;const l=i!=null&&i.includes("leading"),c=i==null||i.includes("trailing"),u=()=>{a!==null&&(r.apply(o,a),o=void 0,a=null)},h=()=>{c&&u(),m()};let f=null;const p=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},n)},v=()=>{f!==null&&(clearTimeout(f),f=null)},m=()=>{v(),o=void 0,a=null},b=()=>{u()},x=function(...w){if(s!=null&&s.aborted)return;o=this,a=w;const _=f==null;p(),l&&_&&u()};return x.schedule=p,x.cancel=m,x.flush=b,s==null||s.addEventListener("abort",m,{once:!0}),x}e.debounce=t})(I7);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I7;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:a=!0,maxWait:l}=i,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,h=null;const f=t.debounce(function(...m){u=n.apply(this,m),h=null},s,{edges:c}),p=function(...m){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(u=n.apply(this,m),h=Date.now(),f.cancel(),f.schedule(),u):(f.apply(this,m),u)},v=()=>(f.flush(),u);return p.cancel=f.cancel,p.flush=v,p}e.debounce=r})(M7);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M7;function r(n,s=0,i={}){const{leading:o=!0,trailing:a=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:a})}e.throttle=r})(D7);var DSe=D7.throttle;const MSe=wi(DSe);var mp=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s]};function K3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function H_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(r),!0).forEach(function(n){ISe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ISe(e,t,r){return(t=LSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LSe(e){var t=FSe(e,"string");return typeof t=="symbol"?t:t+""}function FSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y3=g.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:h,className:f,onResize:p,style:v={}}=e,m=g.useRef(null),b=g.useRef();b.current=p,g.useImperativeHandle(t,()=>m.current);var[x,w]=g.useState({containerWidth:n.width,containerHeight:n.height}),_=g.useCallback((k,S)=>{w(E=>{var C=Math.round(k),T=Math.round(S);return E.containerWidth===C&&E.containerHeight===T?E:{containerWidth:C,containerHeight:T}})},[]);g.useEffect(()=>{var k=T=>{var O,{width:P,height:D}=T[0].contentRect;_(P,D),(O=b.current)===null||O===void 0||O.call(b,P,D)};u>0&&(k=MSe(k,u,{trailing:!0,leading:!1}));var S=new ResizeObserver(k),{width:E,height:C}=m.current.getBoundingClientRect();return _(E,C),S.observe(m.current),()=>{S.disconnect()}},[_,u]);var j=g.useMemo(()=>{var{containerWidth:k,containerHeight:S}=x;if(k<0||S<0)return null;mp(gc(s)||gc(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),mp(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=gc(s)?k:s,C=gc(i)?S:i;return r&&r>0&&(E?C=E/r:C&&(E=C*r),l&&C>l&&(C=l)),mp(E>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,C,s,i,o,a,r),g.Children.map(c,T=>g.cloneElement(T,{width:E,height:C,style:H_({width:E,height:C},T.props.style)}))},[r,c,i,l,a,o,x,s]);return g.createElement("div",{id:h?"".concat(h):void 0,className:st("recharts-responsive-container",f),style:H_(H_({},v),{},{width:s,height:i,minWidth:o,minHeight:a,maxHeight:l}),ref:m},g.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),pw=e=>null;pw.displayName="Cell";function $Se(e,t,r){return(t=zSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zSe(e){var t=USe(e,"string");return typeof t=="symbol"?t:t+""}function USe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class qSe{constructor(t){$Se(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function G3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function BSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G3(Object(r),!0).forEach(function(n){WSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WSe(e,t,r){return(t=VSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VSe(e){var t=HSe(e,"string");return typeof t=="symbol"?t:t+""}function HSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KSe={cacheSize:2e3,enableCache:!0},L7=BSe({},KSe),Z3=new qSe(L7.cacheSize),YSe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},J3="recharts_measurement_span";function GSe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",a=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(a)}var Q3=(e,t)=>{try{var r=document.getElementById(J3);r||(r=document.createElement("span"),r.setAttribute("id",J3),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,YSe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},gp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Th.isSsr)return{width:0,height:0};if(!L7.enableCache)return Q3(e,t);var r=GSe(e,t),n=Z3.get(r);if(n)return n;var s=Q3(e,t);return Z3.set(r,s),s},X3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZSe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,JSe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,F7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},QSe=Object.keys(F7),hd="NaN";function XSe(e,t){return e*F7[t]}class Dn{static parse(t){var r,[,n,s]=(r=JSe.exec(t))!==null&&r!==void 0?r:[];return new Dn(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,As(t)&&(this.unit=""),r!==""&&!ZSe.test(r)&&(this.num=NaN,this.unit=""),QSe.includes(r)&&(this.num=XSe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Dn(NaN,""):new Dn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Dn(NaN,""):new Dn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Dn(NaN,""):new Dn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Dn(NaN,""):new Dn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return As(this.num)}}function $7(e){if(e.includes(hd))return hd;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=X3.exec(t))!==null&&r!==void 0?r:[],o=Dn.parse(n??""),a=Dn.parse(i??""),l=s==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return hd;t=t.replace(X3,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,h,f]=(c=eM.exec(t))!==null&&c!==void 0?c:[],p=Dn.parse(u??""),v=Dn.parse(f??""),m=h==="+"?p.add(v):p.subtract(v);if(m.isNaN())return hd;t=t.replace(eM,m.toString())}return t}var tM=/\(([^()]*)\)/;function eNe(e){for(var t=e,r;(r=tM.exec(t))!=null;){var[,n]=r;t=t.replace(tM,$7(n))}return t}function tNe(e){var t=e.replace(/\s+/g,"");return t=eNe(t),t=$7(t),t}function rNe(e){try{return tNe(e)}catch{return hd}}function K_(e){var t=rNe(e.slice(5,-1));return t===hd?"":t}var nNe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],sNe=["dx","dy","angle","className","breakAll"];function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jS.apply(null,arguments)}function rM(e,t){if(e==null)return{};var r,n,s=iNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function iNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var z7=/[ \f\n\r\t\v\u2028\u2029]+/,U7=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];pr(t)||(r?s=t.toString().split(""):s=t.toString().split(z7));var i=s.map(a=>({word:a,width:gp(a,n).width})),o=r?0:gp(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},oNe=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:a,breakAll:l}=e,c=Ee(i),u=o,h=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce((P,D)=>{var{word:R,width:$}=D,F=P[P.length-1];if(F&&(n==null||s||F.width+$+r<Number(n)))F.words.push(R),F.width+=$+r;else{var V={words:[R],width:$};P.push(V)}return P},[])},f=h(t),p=O=>O.reduce((P,D)=>P.width>D.width?P:D);if(!c||s)return f;var v=f.length>i||p(f).width>Number(n);if(!v)return f;for(var m="…",b=O=>{var P=u.slice(0,O),D=U7({breakAll:l,style:a,children:P+m}).wordsWithComputedWidth,R=h(D),$=R.length>i||p(R).width>Number(n);return[$,R]},x=0,w=u.length-1,_=0,j;x<=w&&_<=u.length-1;){var k=Math.floor((x+w)/2),S=k-1,[E,C]=b(S),[T]=b(k);if(!E&&!T&&(x=k+1),E&&T&&(w=k-1),!E&&T){j=C;break}_++}return j||f},nM=e=>{var t=pr(e)?[]:e.toString().split(z7);return[{words:t}]},aNe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Th.isSsr){var a,l,c=U7({breakAll:i,children:n,style:s});if(c){var{wordsWithComputedWidth:u,spaceWidth:h}=c;a=u,l=h}else return nM(n);return oNe({breakAll:i,children:n,maxLines:o,style:s},a,l,t,r)}return nM(n)},sM="#808080",mw=g.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:a="start",verticalAnchor:l="end",fill:c=sM}=e,u=rM(e,nNe),h=g.useMemo(()=>aNe({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:f,dy:p,angle:v,className:m,breakAll:b}=u,x=rM(u,sNe);if(!so(r)||!so(n))return null;var w=r+(Ee(f)?f:0),_=n+(Ee(p)?p:0),j;switch(l){case"start":j=K_("calc(".concat(i,")"));break;case"middle":j=K_("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:j=K_("calc(".concat(h.length-1," * -").concat(s,")"));break}var k=[];if(o){var S=h[0].width,{width:E}=u;k.push("scale(".concat(Ee(E)?E/S:1,")"))}return v&&k.push("rotate(".concat(v,", ").concat(w,", ").concat(_,")")),k.length&&(x.transform=k.join(" ")),g.createElement("text",jS({},qt(x,!0),{ref:t,x:w,y:_,className:st("recharts-text",m),textAnchor:a,fill:c.includes("url")?sM:c}),h.map((C,T)=>{var O=C.words.join(b?"":" ");return g.createElement("tspan",{x:w,dy:T===0?j:s,key:"".concat(O,"-").concat(T)},O)}))});mw.displayName="Text";var lNe=["offset"],cNe=["labelRef"];function iM(e,t){if(e==null)return{};var r,n,s=uNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oM(Object(r),!0).forEach(function(n){dNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dNe(e,t,r){return(t=hNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hNe(e){var t=fNe(e,"string");return typeof t=="symbol"?t:t+""}function fNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lo(){return Lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lo.apply(null,arguments)}var pNe=e=>{var{value:t,formatter:r}=e,n=pr(e.children)?t:e.children;return typeof r=="function"?r(n):n},IT=e=>e!=null&&typeof e=="function",mNe=(e,t)=>{var r=cn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},gNe=(e,t,r,n)=>{var{position:s,offset:i,className:o}=e,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:h,endAngle:f,clockWise:p}=n,v=(c+u)/2,m=mNe(h,f),b=m>=0?1:-1,x,w;s==="insideStart"?(x=h+b*i,w=p):s==="insideEnd"?(x=f-b*i,w=!p):s==="end"&&(x=f+b*i,w=p),w=m<=0?w:!w;var _=fr(a,l,v,x),j=fr(a,l,v,x+(w?1:-1)*359),k="M".concat(_.x,",").concat(_.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(j.x,",").concat(j.y),S=pr(e.id)?Wp("recharts-radial-line-"):e.id;return g.createElement("text",Lo({},r,{dominantBaseline:"central",className:st("recharts-radial-bar-label",o)}),g.createElement("defs",null,g.createElement("path",{id:S,d:k})),g.createElement("textPath",{xlinkHref:"#".concat(S)},t))},yNe=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:a,endAngle:l}=e,c=(a+l)/2;if(r==="outside"){var{x:u,y:h}=fr(n,s,o+t,c);return{x:u,y:h,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var f=(i+o)/2,{x:p,y:v}=fr(n,s,f,c);return{x:p,y:v,textAnchor:"middle",verticalAnchor:"middle"}},vNe=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:a,height:l}=t,c=l>=0?1:-1,u=c*n,h=c>0?"end":"start",f=c>0?"start":"end",p=a>=0?1:-1,v=p*n,m=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var x={x:i+a/2,y:o-c*n,textAnchor:"middle",verticalAnchor:h};return Kt(Kt({},x),r?{height:Math.max(o-r.y,0),width:a}:{})}if(s==="bottom"){var w={x:i+a/2,y:o+l+u,textAnchor:"middle",verticalAnchor:f};return Kt(Kt({},w),r?{height:Math.max(r.y+r.height-(o+l),0),width:a}:{})}if(s==="left"){var _={x:i-v,y:o+l/2,textAnchor:m,verticalAnchor:"middle"};return Kt(Kt({},_),r?{width:Math.max(_.x-r.x,0),height:l}:{})}if(s==="right"){var j={x:i+a+v,y:o+l/2,textAnchor:b,verticalAnchor:"middle"};return Kt(Kt({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:l}:{})}var k=r?{width:a,height:l}:{};return s==="insideLeft"?Kt({x:i+v,y:o+l/2,textAnchor:b,verticalAnchor:"middle"},k):s==="insideRight"?Kt({x:i+a-v,y:o+l/2,textAnchor:m,verticalAnchor:"middle"},k):s==="insideTop"?Kt({x:i+a/2,y:o+u,textAnchor:"middle",verticalAnchor:f},k):s==="insideBottom"?Kt({x:i+a/2,y:o+l-u,textAnchor:"middle",verticalAnchor:h},k):s==="insideTopLeft"?Kt({x:i+v,y:o+u,textAnchor:b,verticalAnchor:f},k):s==="insideTopRight"?Kt({x:i+a-v,y:o+u,textAnchor:m,verticalAnchor:f},k):s==="insideBottomLeft"?Kt({x:i+v,y:o+l-u,textAnchor:b,verticalAnchor:h},k):s==="insideBottomRight"?Kt({x:i+a-v,y:o+l-u,textAnchor:m,verticalAnchor:h},k):s&&typeof s=="object"&&(Ee(s.x)||gc(s.x))&&(Ee(s.y)||gc(s.y))?Kt({x:i+Es(s.x,a),y:o+Es(s.y,l),textAnchor:"end",verticalAnchor:"end"},k):Kt({x:i+a/2,y:o+l/2,textAnchor:"middle",verticalAnchor:"middle"},k)},bNe=e=>"cx"in e&&Ee(e.cx);function Qn(e){var{offset:t=5}=e,r=iM(e,lNe),n=Kt({offset:t},r),{viewBox:s,position:i,value:o,children:a,content:l,className:c="",textBreakAll:u,labelRef:h}=n,f=Me(EB),p=jE(),v=i==="center"?p:f??p,m=s||v;if(!m||pr(o)&&pr(a)&&!g.isValidElement(l)&&typeof l!="function")return null;var b=Kt(Kt({},n),{},{viewBox:m});if(g.isValidElement(l)){var{labelRef:x}=b,w=iM(b,cNe);return g.cloneElement(l,w)}var _;if(typeof l=="function"){if(_=g.createElement(l,b),g.isValidElement(_))return _}else _=pNe(n);var j=bNe(m),k=qt(n,!0);if(j&&(i==="insideStart"||i==="insideEnd"||i==="end"))return gNe(n,_,k,m);var S=j?yNe(m,n.offset,n.position):vNe(n,m);return g.createElement(mw,Lo({ref:h,className:st("recharts-label",c)},k,S,{breakAll:u}),_)}Qn.displayName="Label";var q7=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:a,innerRadius:l,outerRadius:c,x:u,y:h,top:f,left:p,width:v,height:m,clockWise:b,labelViewBox:x}=e;if(x)return x;if(Ee(v)&&Ee(m)){if(Ee(u)&&Ee(h))return{x:u,y:h,width:v,height:m};if(Ee(f)&&Ee(p))return{x:f,y:p,width:v,height:m}}if(Ee(u)&&Ee(h))return{x:u,y:h,width:0,height:0};if(Ee(t)&&Ee(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:l||0,outerRadius:c||a||o||0,clockWise:b};if(e.viewBox)return e.viewBox},xNe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?g.createElement(Qn,Lo({key:"label-implicit"},n)):so(e)?g.createElement(Qn,Lo({key:"label-implicit",value:e},n)):g.isValidElement(e)?e.type===Qn?g.cloneElement(e,Kt({key:"label-implicit"},n)):g.createElement(Qn,Lo({key:"label-implicit",content:e},n)):IT(e)?g.createElement(Qn,Lo({key:"label-implicit",content:e},n)):e&&typeof e=="object"?g.createElement(Qn,Lo({},e,{key:"label-implicit"},n)):null},wNe=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n,labelRef:s}=e,i=q7(e),o=Mx(n,Qn).map((l,c)=>g.cloneElement(l,{viewBox:t||i,key:"label-".concat(c)}));if(!r)return o;var a=xNe(e.label,t||i,s);return[a,...o]};Qn.parseViewBox=q7;Qn.renderCallByParent=wNe;var B7={},W7={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(W7);var V7={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(V7);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W7,r=V7,n=$x;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(B7);var _Ne=B7.last;const jNe=wi(_Ne);var kNe=["valueAccessor"],SNe=["data","dataKey","clockWise","id","textBreakAll"];function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fb.apply(null,arguments)}function aM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aM(Object(r),!0).forEach(function(n){NNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NNe(e,t,r){return(t=CNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CNe(e){var t=ENe(e,"string");return typeof t=="symbol"?t:t+""}function ENe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cM(e,t){if(e==null)return{};var r,n,s=TNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function TNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ANe=e=>Array.isArray(e.value)?jNe(e.value):e.value;function Ic(e){var{valueAccessor:t=ANe}=e,r=cM(e,kNe),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:a}=r,l=cM(r,SNe);return!n||!n.length?null:g.createElement(Os,{className:"recharts-label-list"},n.map((c,u)=>{var h=pr(s)?t(c,u):Rt(c&&c.payload,s),f=pr(o)?{}:{id:"".concat(o,"-").concat(u)};return g.createElement(Qn,fb({},qt(c,!0),l,f,{parentViewBox:c.parentViewBox,value:h,textBreakAll:a,viewBox:Qn.parseViewBox(pr(i)?c:lM(lM({},c),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}Ic.displayName="LabelList";function ONe(e,t){return e?e===!0?g.createElement(Ic,{key:"labelList-implicit",data:t}):g.isValidElement(e)||IT(e)?g.createElement(Ic,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?g.createElement(Ic,fb({data:t},e,{key:"labelList-implicit"})):null:null}function PNe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=Mx(n,Ic).map((o,a)=>g.cloneElement(o,{data:t,key:"labelList-".concat(a)}));if(!r)return s;var i=ONe(e.label,t);return[i,...s]}Ic.renderCallByParent=PNe;function kS(){return kS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kS.apply(null,arguments)}var H7=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=st("recharts-dot",s);return t===+t&&r===+r&&n===+n?g.createElement("circle",kS({},_l(e),JC(e),{className:i,cx:t,cy:r,r:n})):null},K7=e=>e.graphicalItems.polarItems,RNe=Z([Ft,Vm],dT),LT=Z([K7,or,RNe],hT),DNe=Z([LT],fT),FT=Z([DNe,XE],pT),MNe=Z([FT,or,LT],gT),INe=Z([FT,or,LT],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(s=>{var i,o=Rt(n,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Rt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),uM=()=>{},LNe=Z([or,KB,uM,INe,uM,yt,Ft],vT),Y7=Z([or,yt,FT,MNe,Wm,Ft,LNe],bT),FNe=Z([Y7,or,Mh],_T);Z([or,Y7,FNe,Ft],kT);var $Ne={radiusAxis:{},angleAxis:{}},G7=os({name:"polarAxis",initialState:$Ne,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:gze,removeRadiusAxis:yze,addAngleAxis:vze,removeAngleAxis:bze}=G7.actions,zNe=G7.reducer;function dM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(r),!0).forEach(function(n){UNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UNe(e,t,r){return(t=qNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qNe(e){var t=BNe(e,"string");return typeof t=="symbol"?t:t+""}function BNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WNe=(e,t)=>t,$T=Z([K7,WNe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),VNe=[],zT=(e,t,r)=>(r==null?void 0:r.length)===0?VNe:r,Z7=Z([XE,$T,zT],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var s;if((t==null?void 0:t.data)!=null&&t.data.length>0?s=t.data:s=n,(!s||!s.length)&&r!=null&&(s=r.map(i=>hM(hM({},t.presentationProps),i.props))),s!=null)return s}}),HNe=Z([Z7,$T,zT],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,s)=>{var i,o=Rt(n,t.nameKey,t.name),a;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?a=r[s].props.fill:typeof n=="object"&&n!=null&&"fill"in n?a=n.fill:a=t.fill,{value:Zx(o,t.dataKey),color:a,payload:n,type:t.legendType}})}),KNe=Z([Z7,$T,zT,zr],(e,t,r,n)=>{if(!(t==null||e==null))return W2e({offset:n,pieSettings:t,displayedData:e,cells:r})}),J7={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((n=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&n.writable)?!1:r.toString()===`[object ${i}]`}let s=r;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(r)===s}e.isPlainObject=t})(J7);var YNe=J7.isPlainObject;const GNe=wi(YNe);function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pb.apply(null,arguments)}var fM=(e,t,r,n,s)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},ZNe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JNe=e=>{var t=Fs(e,ZNe),r=g.useRef(),[n,s]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var{x:i,y:o,upperWidth:a,lowerWidth:l,height:c,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isUpdateAnimationActive:v}=t;if(i!==+i||o!==+o||a!==+a||l!==+l||c!==+c||a===0&&l===0||c===0)return null;var m=st("recharts-trapezoid",u);return v?g.createElement(Qv,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:c,x:i,y:o},to:{upperWidth:a,lowerWidth:l,height:c,x:i,y:o},duration:f,animationEasing:h,isActive:v},b=>{var{upperWidth:x,lowerWidth:w,height:_,x:j,y:k}=b;return g.createElement(Qv,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,easing:h},g.createElement("path",pb({},qt(t,!0),{className:m,d:fM(j,k,x,w,_),ref:r})))}):g.createElement("g",null,g.createElement("path",pb({},qt(t,!0),{className:m,d:fM(i,o,a,l,c)})))},QNe=["option","shapeType","propTransformer","activeClassName","isActive"];function XNe(e,t){if(e==null)return{};var r,n,s=e2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function e2e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pM(Object(r),!0).forEach(function(n){t2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t2e(e,t,r){return(t=r2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r2e(e){var t=n2e(e,"string");return typeof t=="symbol"?t:t+""}function n2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s2e(e,t){return mb(mb({},t),e)}function i2e(e,t){return e==="symbols"}function mM(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return g.createElement(w1,r);case"trapezoid":return g.createElement(JNe,r);case"sector":return g.createElement(k1,r);case"symbols":if(i2e(t))return g.createElement(nE,r);break;default:return null}}function o2e(e){return g.isValidElement(e)?e.props:e}function a2e(e){var{option:t,shapeType:r,propTransformer:n=s2e,activeClassName:s="recharts-active-shape",isActive:i}=e,o=XNe(e,QNe),a;if(g.isValidElement(t))a=g.cloneElement(t,mb(mb({},o),o2e(t)));else if(typeof t=="function")a=t(o);else if(GNe(t)&&typeof t!="boolean"){var l=n(t,o);a=g.createElement(mM,{shapeType:r,elementProps:l})}else{var c=o;a=g.createElement(mM,{shapeType:r,elementProps:c})}return i?g.createElement(Os,{className:s},a):a}var l2e=(e,t)=>{var r=Wt();return(n,s)=>i=>{e==null||e(n,s,i),r(c7({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},c2e=e=>{var t=Wt();return(r,n)=>s=>{e==null||e(r,n,s),t(cke())}},u2e=(e,t)=>{var r=Wt();return(n,s)=>i=>{e==null||e(n,s,i),r(uke({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function Q7(e){var{fn:t,args:r}=e,n=Wt(),s=Ls();return g.useEffect(()=>{if(!s){var i=t(r);return n(oke(i)),()=>{n(ake(i))}}},[t,r,n,s]),null}var X7=()=>{};function d2e(e){var{legendPayload:t}=e,r=Wt(),n=Ls();return g.useEffect(()=>n?X7:(r(l1(t)),()=>{r(c1(t))}),[r,n,t]),null}function h2e(e){var{legendPayload:t}=e,r=Wt(),n=Me(yt);return g.useEffect(()=>n!=="centric"&&n!=="radial"?X7:(r(l1(t)),()=>{r(c1(t))}),[r,n,t]),null}function e9(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=g.useRef(Wp(t)),n=g.useRef(e);return n.current!==e&&(r.current=Wp(t),n.current=e),r.current}var Y_,f2e=()=>{var[e]=g.useState(()=>Wp("uid-"));return e},p2e=(Y_=g.useId)!==null&&Y_!==void 0?Y_:f2e;function m2e(e,t){var r=p2e();return t||(e?"".concat(e,"-").concat(r):r)}var g2e=g.createContext(void 0),t9=e=>{var{id:t,type:r,children:n}=e,s=m2e("recharts-".concat(r),t);return g.createElement(g2e.Provider,{value:s},n(s))},y2e={cartesianItems:[],polarItems:[]},r9=os({name:"graphicalItems",initialState:y2e,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=Bo(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=Bo(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Bo(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:v2e,replaceCartesianGraphicalItem:b2e,removeCartesianGraphicalItem:x2e,addPolarGraphicalItem:w2e,removePolarGraphicalItem:_2e}=r9.actions,j2e=r9.reducer;function k2e(e){var t=Wt(),r=g.useRef(null);return g.useEffect(()=>{r.current===null?t(v2e(e)):r.current!==e&&t(b2e({prev:r.current,next:e})),r.current=e},[t,e]),g.useEffect(()=>()=>{r.current&&(t(x2e(r.current)),r.current=null)},[t]),null}function S2e(e){var t=Wt();return g.useEffect(()=>(t(w2e(e)),()=>{t(_2e(e))}),[t,e]),null}function N2e(){}var C2e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},gM={t:0},G_={t:1};function n9(e){var t=Fs(e,C2e),{isActive:r,canBegin:n,duration:s,easing:i,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=t,u=x1("JavascriptAnimate",t.animationManager),[h,f]=g.useState(r?gM:G_),p=g.useRef(null);return g.useEffect(()=>{r||f(G_)},[r]),g.useEffect(()=>{if(!r||!n)return N2e;var v=b1(gM,G_,y1(i),s,f,u.getTimeoutController()),m=()=>{p.current=v()};return u.start([l,o,m,s,a]),()=>{u.stop(),p.current&&p.current(),a()}},[r,n,s,i,o,l,a,u]),c(h.t)}var E2e=["onMouseEnter","onClick","onMouseLeave"],T2e=["id"],A2e=["id"];function UT(e,t){if(e==null)return{};var r,n,s=O2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function O2e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yM(Object(r),!0).forEach(function(n){P2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P2e(e,t,r){return(t=R2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R2e(e){var t=D2e(e,"string");return typeof t=="symbol"?t:t+""}function D2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ra(){return ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ra.apply(null,arguments)}function M2e(e){var t=g.useMemo(()=>Mx(e.children,pw),[e.children]),r=Me(n=>HNe(n,e.id,t));return r==null?null:g.createElement(h2e,{legendPayload:r})}function I2e(e){var{dataKey:t,nameKey:r,sectors:n,stroke:s,strokeWidth:i,fill:o,name:a,hide:l,tooltipType:c}=e;return{dataDefinedOnItem:n==null?void 0:n.map(u=>u.tooltipPayload),positions:n==null?void 0:n.map(u=>u.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:Zx(a,t),hide:l,type:c,color:o,unit:""}}}var L2e=(e,t)=>e>t?"start":e<t?"end":"middle",F2e=(e,t,r)=>typeof t=="function"?t(e):Es(t,r,r*.8),$2e=(e,t,r)=>{var{top:n,left:s,width:i,height:o}=t,a=Qq(i,o),l=s+Es(e.cx,i,i/2),c=n+Es(e.cy,o,o/2),u=Es(e.innerRadius,a,0),h=F2e(r,e.outerRadius,a),f=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:h,maxRadius:f}},z2e=(e,t)=>{var r=cn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},U2e=(e,t)=>{if(g.isValidElement(e))return g.cloneElement(e,t);if(typeof e=="function")return e(t);var r=st("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return g.createElement(EE,ra({},t,{type:"linear",className:r}))},q2e=(e,t,r)=>{if(g.isValidElement(e))return g.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),g.isValidElement(n)))return n;var s=st("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return g.createElement(mw,ra({},t,{alignmentBaseline:"middle",className:s}),n)};function B2e(e){var{sectors:t,props:r,showLabels:n}=e,{label:s,labelLine:i,dataKey:o}=r;if(!n||!s||!t)return null;var a=_l(r),l=qt(s,!1),c=qt(i,!1),u=typeof s=="object"&&"offsetRadius"in s&&s.offsetRadius||20,h=t.map((f,p)=>{var v=(f.startAngle+f.endAngle)/2,m=fr(f.cx,f.cy,f.outerRadius+u,v),b=Zt(Zt(Zt(Zt({},a),f),{},{stroke:"none"},l),{},{index:p,textAnchor:L2e(m.x,f.cx)},m),x=Zt(Zt(Zt(Zt({},a),f),{},{fill:"none",stroke:f.fill},c),{},{index:p,points:[fr(f.cx,f.cy,f.outerRadius,v),m],key:"line"});return g.createElement(Os,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(p)},i&&U2e(i,x),q2e(s,b,Rt(f,o)))});return g.createElement(Os,{className:"recharts-pie-labels"},h)}function s9(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:s,showLabels:i}=e,o=Me(ih),{onMouseEnter:a,onClick:l,onMouseLeave:c}=s,u=UT(s,E2e),h=l2e(a,s.dataKey),f=c2e(c),p=u2e(l,s.dataKey);return t==null?null:g.createElement(g.Fragment,null,t.map((v,m)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&t.length!==1)return null;var b=r&&String(m)===o,x=o?n:null,w=b?r:x,_=Zt(Zt({},v),{},{stroke:v.stroke,tabIndex:-1,[n1]:m,[s1]:s.dataKey});return g.createElement(Os,ra({tabIndex:-1,className:"recharts-pie-sector"},QC(u,v,m),{onMouseEnter:h(v,m),onMouseLeave:f(v,m),onClick:p(v,m),key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(m)}),g.createElement(a2e,ra({option:w,isActive:b,shapeType:"sector"},_)))}),g.createElement(B2e,{sectors:t,props:s,showLabels:i}))}function W2e(e){var t,{pieSettings:r,displayedData:n,cells:s,offset:i}=e,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:h}=r,f=Math.abs(r.minAngle),p=z2e(a,l),v=Math.abs(p),m=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(S=>Rt(S,c,0)!==0).length,x=(v>=360?b:b-1)*m,w=v-b*f-x,_=n.reduce((S,E)=>{var C=Rt(E,c,0);return S+(Ee(C)?C:0)},0),j;if(_>0){var k;j=n.map((S,E)=>{var C=Rt(S,c,0),T=Rt(S,u,E),O=$2e(r,i,S),P=(Ee(C)?C:0)/_,D,R=Zt(Zt({},S),s&&s[E]&&s[E].props);E?D=k.endAngle+cn(p)*m*(C!==0?1:0):D=a;var $=D+cn(p)*((C!==0?f:0)+P*w),F=(D+$)/2,V=(O.innerRadius+O.outerRadius)/2,q=[{name:T,value:C,payload:R,dataKey:c,type:h}],K=fr(O.cx,O.cy,V,F);return k=Zt(Zt(Zt(Zt({},r.presentationProps),{},{percent:P,cornerRadius:o,name:T,tooltipPayload:q,midAngle:F,middleRadius:V,tooltipPosition:K},R),O),{},{value:Rt(S,c),startAngle:D,endAngle:$,payload:R,paddingAngle:cn(p)*m}),k})}return j}function V2e(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:a,activeShape:l,inactiveShape:c,onAnimationStart:u,onAnimationEnd:h}=t,f=e9(t,"recharts-pie-"),p=r.current,[v,m]=g.useState(!0),b=g.useCallback(()=>{typeof h=="function"&&h(),m(!1)},[h]),x=g.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return g.createElement(n9,{begin:i,duration:o,isActive:s,easing:a,onAnimationStart:x,onAnimationEnd:b,key:f},w=>{var _=[],j=n&&n[0],k=j.startAngle;return n.forEach((S,E)=>{var C=p&&p[E],T=E>0?pl(S,"paddingAngle",0):0;if(C){var O=$R(C.endAngle-C.startAngle,S.endAngle-S.startAngle),P=Zt(Zt({},S),{},{startAngle:k+T,endAngle:k+O(w)+T});_.push(P),k=P.endAngle}else{var{endAngle:D,startAngle:R}=S,$=$R(0,D-R),F=$(w),V=Zt(Zt({},S),{},{startAngle:k+T,endAngle:k+F+T});_.push(V),k=V.endAngle}}),r.current=_,g.createElement(Os,null,g.createElement(s9,{sectors:_,activeShape:l,inactiveShape:c,allOtherPieProps:t,showLabels:!v}))})}function H2e(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:s}=e,i=g.useRef(null),o=i.current;return r&&t&&t.length&&(!o||o!==t)?g.createElement(V2e,{props:e,previousSectorsRef:i}):g.createElement(s9,{sectors:t,activeShape:n,inactiveShape:s,allOtherPieProps:e,showLabels:!0})}function K2e(e){var{hide:t,className:r,rootTabIndex:n}=e,s=st("recharts-pie",r);return t?null:g.createElement(Os,{tabIndex:n,className:s},g.createElement(H2e,e))}var Y2e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Th.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function G2e(e){var{id:t}=e,r=UT(e,T2e),n=g.useMemo(()=>Mx(e.children,pw),[e.children]),s=Me(i=>KNe(i,t,n));return g.createElement(g.Fragment,null,g.createElement(Q7,{fn:I2e,args:Zt(Zt({},e),{},{sectors:s})}),g.createElement(K2e,ra({},r,{sectors:s})))}function i9(e){var t=Fs(e,Y2e),{id:r}=t,n=UT(t,A2e),s=_l(n);return g.createElement(t9,{id:r,type:"pie"},i=>g.createElement(g.Fragment,null,g.createElement(S2e,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s}),g.createElement(M2e,ra({},n,{id:i})),g.createElement(G2e,ra({},n,{id:i})),n.children))}i9.displayName="Pie";var Z2e=Z([zr],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),J2e=Z([Z2e,da,ha],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),qT=()=>Me(J2e),Q2e=()=>Me(Jke);function vM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vM(Object(r),!0).forEach(function(n){X2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X2e(e,t,r){return(t=eCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eCe(e){var t=tCe(e,"string");return typeof t=="symbol"?t:t+""}function tCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rCe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=bM(bM({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},qt(s,!1)),JC(s)),a;return g.isValidElement(s)?a=g.cloneElement(s,o):typeof s=="function"?a=s(o):a=g.createElement(H7,o),g.createElement(Os,{className:"recharts-active-dot"},a)};function nCe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=Me(ih),o=Q2e();if(t==null||o==null)return null;var a=t.find(l=>o.includes(l.payload));return pr(a)?null:rCe({point:a,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var sCe={},o9=os({name:"errorBars",initialState:sCe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:xze,removeErrorBar:wze}=o9.actions,iCe=o9.reducer,oCe=["children"];function aCe(e,t){if(e==null)return{};var r,n,s=lCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cCe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},uCe=g.createContext(cCe);function dCe(e){var{children:t}=e,r=aCe(e,oCe);return g.createElement(uCe.Provider,{value:r},t)}function a9(e,t){var r,n,s=Me(c=>pa(c,e)),i=Me(c=>Cl(c,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Kn.allowDataOverflow,a=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Yn.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function hCe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=qT(),{needClipX:i,needClipY:o,needClip:a}=a9(t,r);if(!a)return null;var{x:l,y:c,width:u,height:h}=s;return g.createElement("clipPath",{id:"clipPath-".concat(n)},g.createElement("rect",{x:i?l:l-u/2,y:o?c:c-h/2,width:i?u:u*2,height:o?h:h*2}))}var l9=e=>{var{chartData:t}=e,r=Wt(),n=Ls();return g.useEffect(()=>n?()=>{}:(r(q3(t)),()=>{r(q3(void 0))}),[t,r,n]),null},xM={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},c9=os({name:"brush",initialState:xM,reducers:{setBrushSettings(e,t){return t.payload==null?xM:t.payload}}}),{setBrushSettings:_ze}=c9.actions,fCe=c9.reducer;function pCe(e,t,r){return(t=mCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mCe(e){var t=gCe(e,"string");return typeof t=="symbol"?t:t+""}function gCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class BT{static create(t){return new BT(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}pCe(BT,"EPS",1e-4);function yCe(e){return(e%180+180)%180}var vCe=function(e){var{width:t,height:r}=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=yCe(n),i=s*Math.PI/180,o=Math.atan(r/t),a=i>o&&i<Math.PI-o?r/Math.sin(i):t/Math.cos(i);return Math.abs(a)},bCe={dots:[],areas:[],lines:[]},u9=os({name:"referenceElements",initialState:bCe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Bo(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Bo(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Bo(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:jze,removeDot:kze,addArea:Sze,removeArea:Nze,addLine:Cze,removeLine:Eze}=u9.actions,xCe=u9.reducer,wCe=g.createContext(void 0),_Ce=e=>{var{children:t}=e,[r]=g.useState("".concat(Wp("recharts"),"-clip")),n=qT();if(n==null)return null;var{x:s,y:i,width:o,height:a}=n;return g.createElement(wCe.Provider,{value:r},g.createElement("defs",null,g.createElement("clipPath",{id:r},g.createElement("rect",{x:s,y:i,height:a,width:o}))),t)};function Z_(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function d9(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function jCe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return vCe(n,r)}function kCe(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:a}=e;return t===1?{start:n?s:i,end:n?s+o:i+a}:{start:n?s+o:i+a,end:n?s:i}}function gb(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function SCe(e,t){return d9(e,t+1)}function NCe(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:a}=t,l=0,c=1,u=o,h=function(){var p=n==null?void 0:n[l];if(p===void 0)return{v:d9(n,c)};var v=l,m,b=()=>(m===void 0&&(m=r(p,v)),m),x=p.coordinate,w=l===0||gb(e,x,b,u,a);w||(l=0,u=o,c+=1),w&&(u=x+e*(b()/2+s),l+=c)},f;c<=i.length;)if(f=h(),f)return f.v;return[]}function wM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wM(Object(r),!0).forEach(function(n){CCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CCe(e,t,r){return(t=ECe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ECe(e){var t=TCe(e,"string");return typeof t=="symbol"?t:t+""}function TCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ACe(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:a}=t,{end:l}=t,c=function(h){var f=i[h],p,v=()=>(p===void 0&&(p=r(f,h)),p);if(h===o-1){var m=e*(f.coordinate+e*v()/2-l);i[h]=f=rn(rn({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else i[h]=f=rn(rn({},f),{},{tickCoord:f.coordinate});var b=gb(e,f.tickCoord,v,a,l);b&&(l=f.tickCoord-e*(v()/2+s),i[h]=rn(rn({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function OCe(e,t,r,n,s,i){var o=(n||[]).slice(),a=o.length,{start:l,end:c}=t;if(i){var u=n[a-1],h=r(u,a-1),f=e*(u.coordinate+e*h/2-c);o[a-1]=u=rn(rn({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=gb(e,u.tickCoord,()=>h,l,c);p&&(c=u.tickCoord-e*(h/2+s),o[a-1]=rn(rn({},u),{},{isShow:!0}))}for(var v=i?a-1:a,m=function(x){var w=o[x],_,j=()=>(_===void 0&&(_=r(w,x)),_);if(x===0){var k=e*(w.coordinate-e*j()/2-l);o[x]=w=rn(rn({},w),{},{tickCoord:k<0?w.coordinate-k*e:w.coordinate})}else o[x]=w=rn(rn({},w),{},{tickCoord:w.coordinate});var S=gb(e,w.tickCoord,j,l,c);S&&(l=w.tickCoord+e*(j()/2+s),o[x]=rn(rn({},w),{},{isShow:!0}))},b=0;b<v;b++)m(b);return o}function WT(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:u,angle:h}=e;if(!s||!s.length||!n)return[];if(Ee(l)||Th.isSsr){var f;return(f=SCe(s,Ee(l)?l:0))!==null&&f!==void 0?f:[]}var p=[],v=a==="top"||a==="bottom"?"width":"height",m=u&&v==="width"?gp(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(_,j)=>{var k=typeof c=="function"?c(_.value,j):_.value;return v==="width"?jCe(gp(k,{fontSize:t,letterSpacing:r}),m,h):gp(k,{fontSize:t,letterSpacing:r})[v]},x=s.length>=2?cn(s[1].coordinate-s[0].coordinate):1,w=kCe(i,x,v);return l==="equidistantPreserveStart"?NCe(x,w,b,s,o):(l==="preserveStart"||l==="preserveStartEnd"?p=OCe(x,w,b,s,o,l==="preserveStartEnd"):p=ACe(x,w,b,s,o),p.filter(_=>_.isShow))}var PCe=["viewBox"],RCe=["viewBox"];function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fd.apply(null,arguments)}function _M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_M(Object(r),!0).forEach(function(n){VT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_M(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jM(e,t){if(e==null)return{};var r,n,s=DCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function DCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VT(e,t,r){return(t=MCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MCe(e){var t=ICe(e,"string");return typeof t=="symbol"?t:t+""}function ICe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class El extends g.Component{constructor(t){super(t),this.tickRefs=g.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=jM(t,PCe),i=this.props,{viewBox:o}=i,a=jM(i,RCe);return!Z_(n,o)||!Z_(s,a)||!Z_(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:a,mirror:l,tickMargin:c}=this.props,u,h,f,p,v,m,b=l?-1:1,x=t.tickSize||a,w=Ee(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=h=t.coordinate,p=n+ +!l*i,f=p-b*x,m=f-b*c,v=w;break;case"left":f=p=t.coordinate,h=r+ +!l*s,u=h-b*x,v=u-b*c,m=w;break;case"right":f=p=t.coordinate,h=r+ +l*s,u=h+b*x,v=u+b*c,m=w;break;default:u=h=t.coordinate,p=n+ +l*i,f=p+b*x,m=f+b*c,v=w;break}return{line:{x1:u,y1:f,x2:h,y2:p},tick:{x:v,y:m}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:a}=this.props,l=xr(xr(xr({},qt(this.props,!1)),qt(a,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var c=+(i==="top"&&!o||i==="bottom"&&o);l=xr(xr({},l),{},{x1:t,y1:r+c*s,x2:t+n,y2:r+c*s})}else{var u=+(i==="left"&&!o||i==="right"&&o);l=xr(xr({},l),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+s})}return g.createElement("line",fd({},l,{className:st("recharts-cartesian-axis-line",pl(a,"className"))}))}static renderTickItem(t,r,n){var s,i=st(r.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))s=g.cloneElement(t,xr(xr({},r),{},{className:i}));else if(typeof t=="function")s=t(xr(xr({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=st(o,t.className)),s=g.createElement(mw,fd({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:a,unit:l,padding:c}=this.props,u=WT(xr(xr({},this.props),{},{ticks:n}),t,r),h=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),p=_l(this.props),v=qt(o,!1),m=xr(xr({},p),{},{fill:"none"},qt(s,!1)),b=u.map((x,w)=>{var{line:_,tick:j}=this.getTickLineCoord(x),k=xr(xr(xr(xr({textAnchor:h,verticalAnchor:f},p),{},{stroke:"none",fill:i},v),j),{},{index:w,payload:x,visibleTicksCount:u.length,tickFormatter:a,padding:c});return g.createElement(Os,fd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},QC(this.props,x,w)),s&&g.createElement("line",fd({},m,_,{className:st("recharts-cartesian-axis-tick-line",pl(s,"className"))})),o&&El.renderTickItem(o,k,"".concat(typeof a=="function"?a(x.value,w):x.value).concat(l||"")))});return b.length>0?g.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:g.createElement(Os,{className:st("recharts-cartesian-axis",s),ref:a=>{if(a){var l=a.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var c=l[0];if(c){var u=window.getComputedStyle(c).fontSize,h=window.getComputedStyle(c).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Qn.renderCallByParent(this.props))}}VT(El,"displayName","CartesianAxis");VT(El,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var LCe=["x1","y1","x2","y2","key"],FCe=["offset"],$Ce=["xAxisId","yAxisId"],zCe=["xAxisId","yAxisId"];function kM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kM(Object(r),!0).forEach(function(n){UCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UCe(e,t,r){return(t=qCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qCe(e){var t=BCe(e,"string");return typeof t=="symbol"?t:t+""}function BCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xc(){return xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xc.apply(null,arguments)}function yb(e,t){if(e==null)return{};var r,n,s=WCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VCe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:a}=e;return g.createElement("rect",{x:n,y:s,ry:a,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function h9(e,t){var r;if(g.isValidElement(e))r=g.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:a}=t,l=yb(t,LCe),c=_l(l),{offset:u}=c,h=yb(c,FCe);r=g.createElement("line",xc({},h,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:a}))}return r}function HCe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,a=yb(e,$Ce),l=s.map((c,u)=>{var h=sn(sn({},a),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(u),index:u});return h9(n,h)});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function KCe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,a=yb(e,zCe),l=s.map((c,u)=>{var h=sn(sn({},a),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(u),index:u});return h9(n,h)});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function YCe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:a,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var c=a.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==c[0]&&c.unshift(0);var u=c.map((h,f)=>{var p=!c[f+1],v=p?s+o-h:c[f+1]-h;if(v<=0)return null;var m=f%t.length;return g.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:v,width:i,stroke:"none",fill:t[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function GCe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:a,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==c[0]&&c.unshift(0);var u=c.map((h,f)=>{var p=!c[f+1],v=p?s+o-h:c[f+1]-h;if(v<=0)return null;var m=f%r.length;return g.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:v,height:a,stroke:"none",fill:r[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var ZCe=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return e1(WT(sn(sn(sn({},El.defaultProps),r),{},{ticks:t1(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},JCe=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return e1(WT(sn(sn(sn({},El.defaultProps),r),{},{ticks:t1(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},QCe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function f9(e){var t=kE(),r=SE(),n=o1(),s=sn(sn({},Fs(e,QCe)),{},{x:Ee(e.x)?e.x:n.left,y:Ee(e.y)?e.y:n.top,width:Ee(e.width)?e.width:n.width,height:Ee(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:a,y:l,width:c,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:p}=s,v=Ls(),m=Me(T=>D3(T,"xAxis",i,v)),b=Me(T=>D3(T,"yAxis",o,v));if(!Ee(c)||c<=0||!Ee(u)||u<=0||!Ee(a)||a!==+a||!Ee(l)||l!==+l)return null;var x=s.verticalCoordinatesGenerator||ZCe,w=s.horizontalCoordinatesGenerator||JCe,{horizontalPoints:_,verticalPoints:j}=s;if((!_||!_.length)&&typeof w=="function"){var k=f&&f.length,S=w({yAxis:b?sn(sn({},b),{},{ticks:k?f:b.ticks}):void 0,width:t,height:r,offset:n},k?!0:h);mp(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(_=S)}if((!j||!j.length)&&typeof x=="function"){var E=p&&p.length,C=x({xAxis:m?sn(sn({},m),{},{ticks:E?p:m.ticks}):void 0,width:t,height:r,offset:n},E?!0:h);mp(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(j=C)}return g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(VCe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),g.createElement(YCe,xc({},s,{horizontalPoints:_})),g.createElement(GCe,xc({},s,{verticalPoints:j})),g.createElement(HCe,xc({},s,{offset:n,horizontalPoints:_,xAxis:m,yAxis:b})),g.createElement(KCe,xc({},s,{offset:n,verticalPoints:j,xAxis:m,yAxis:b})))}f9.displayName="CartesianGrid";var p9=(e,t,r,n)=>n7(e,"xAxis",t,n),m9=(e,t,r,n)=>r7(e,"xAxis",t,n),g9=(e,t,r,n)=>n7(e,"yAxis",r,n),y9=(e,t,r,n)=>r7(e,"yAxis",r,n),XCe=Z([yt,p9,g9,m9,y9],(e,t,r,n,s)=>jl(e,"xAxis")?eS(t,n,!1):eS(r,s,!1)),eEe=(e,t,r,n,s)=>s;function tEe(e){return e.type==="line"}var rEe=Z([PB,eEe],(e,t)=>e.filter(tEe).find(r=>r.id===t)),nEe=Z([yt,p9,g9,m9,y9,rEe,XCe,eT],(e,t,r,n,s,i,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=a;if(!(i==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:h,data:f}=i,p;if(f!=null&&f.length>0?p=f:p=l==null?void 0:l.slice(c,u+1),p!=null)return kEe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:h,bandSize:o,displayedData:p})}}),sEe=["id"],iEe=["type","layout","connectNulls","needClip"],oEe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function SM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ii(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SM(Object(r),!0).forEach(function(n){aEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aEe(e,t,r){return(t=lEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lEe(e){var t=cEe(e,"string");return typeof t=="symbol"?t:t+""}function cEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HT(e,t){if(e==null)return{};var r,n,s=uEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Kc(){return Kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kc.apply(null,arguments)}var dEe=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Zx(r,t),payload:e}]};function hEe(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:a,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Zx(o,t),hide:a,type:e.tooltipType,color:e.stroke,unit:l}}}var v9=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function fEe(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var pEe=(e,t,r)=>{var n=r.reduce((h,f)=>h+f);if(!n)return v9(t,e);for(var s=Math.floor(e/n),i=e%n,o=t-e,a=[],l=0,c=0;l<r.length;c+=r[l],++l)if(c+r[l]>i){a=[...r.slice(0,l),i-c];break}var u=a.length%2===0?[0,o]:[o];return[...fEe(r,s),...a,...u].map(h=>"".concat(h,"px")).join(", ")};function mEe(e,t){var r;if(g.isValidElement(e))r=g.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=st("recharts-line-dot",typeof e!="boolean"?e.className:"");r=g.createElement(H7,Kc({},t,{className:n}))}return r}function gEe(e,t){return e==null?!1:t?!0:e.length===1}function yEe(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:i,needClip:o}=n;if(!gEe(r,s))return null;var{id:a}=n,l=HT(n,sEe),c=FU(s),u=_l(l),h=qt(s,!0),f=r.map((v,m)=>{var b=ii(ii(ii({key:"dot-".concat(m),r:3},u),h),{},{index:m,cx:v.x,cy:v.y,dataKey:i,value:v.value,payload:v.payload,points:r});return mEe(s,b)}),p={clipPath:o?"url(#clipPath-".concat(c?"":"dots-").concat(t,")"):void 0};return g.createElement(Os,Kc({className:"recharts-line-dots",key:"dots"},p),f)}function SS(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:i,showLabels:o}=e,{type:a,layout:l,connectNulls:c,needClip:u}=i,h=HT(i,iEe),f=ii(ii({},qt(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:a,layout:l,connectNulls:c,strokeDasharray:s??i.strokeDasharray});return g.createElement(g.Fragment,null,(n==null?void 0:n.length)>1&&g.createElement(EE,Kc({},f,{pathRef:r})),g.createElement(yEe,{points:n,clipPathId:t,props:i}),o&&Ic.renderCallByParent(i,n))}function vEe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function bEe(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:h,animateNewValues:f,width:p,height:v,onAnimationEnd:m,onAnimationStart:b}=r,x=s.current,w=e9(r,"recharts-line-"),[_,j]=g.useState(!1),k=g.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),S=g.useCallback(()=>{typeof b=="function"&&b(),j(!0)},[b]),E=vEe(n.current),C=i.current;return g.createElement(n9,{begin:c,duration:u,isActive:l,easing:h,onAnimationEnd:k,onAnimationStart:S,key:w},T=>{var O=xf(C,E+C,T),P=Math.min(O,E),D;if(a){var R="".concat(a).split(/[,\s]+/gim).map(V=>parseFloat(V));D=pEe(P,E,R)}else D=v9(E,P);if(x){var $=x.length/o.length,F=T===1?o:o.map((V,q)=>{var K=Math.floor(q*$);if(x[K]){var Y=x[K];return ii(ii({},V),{},{x:xf(Y.x,V.x,T),y:xf(Y.y,V.y,T)})}return f?ii(ii({},V),{},{x:xf(p*2,V.x,T),y:xf(v/2,V.y,T)}):ii(ii({},V),{},{x:V.x,y:V.y})});return s.current=F,g.createElement(SS,{props:r,points:F,clipPathId:t,pathRef:n,showLabels:!_,strokeDasharray:D})}return T>0&&E>0&&(s.current=o,i.current=P),g.createElement(SS,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!_,strokeDasharray:D})})}function xEe(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:s}=r,i=g.useRef(null),o=g.useRef(0),a=g.useRef(null),l=i.current;return s&&n&&n.length&&l!==n?g.createElement(bEe,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:a}):g.createElement(SS,{props:r,points:n,clipPathId:t,pathRef:a,showLabels:!0})}var wEe=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Rt(e.payload,t)});class _Ee extends g.Component{render(){var t,{hide:r,dot:n,points:s,className:i,xAxisId:o,yAxisId:a,top:l,left:c,width:u,height:h,id:f,needClip:p}=this.props;if(r)return null;var v=st("recharts-line",i),m=f,{r:b=3,strokeWidth:x=2}=(t=qt(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=FU(n),_=b*2+x;return g.createElement(g.Fragment,null,g.createElement(Os,{className:v},p&&g.createElement("defs",null,g.createElement(hCe,{clipPathId:m,xAxisId:o,yAxisId:a}),!w&&g.createElement("clipPath",{id:"clipPath-dots-".concat(m)},g.createElement("rect",{x:c-_/2,y:l-_/2,width:u+_,height:h+_}))),g.createElement(xEe,{props:this.props,clipPathId:m}),g.createElement(dCe,{xAxisId:o,yAxisId:a,data:s,dataPointFormatter:wEe,errorBarOffset:0},this.props.children)),g.createElement(nCe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var b9={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Th.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function jEe(e){var t=Fs(e,b9),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:u,label:h,legendType:f,xAxisId:p,yAxisId:v,id:m}=t,b=HT(t,oEe),{needClip:x}=a9(p,v),w=qT(),_=NE(),j=Ls(),k=Me(O=>nEe(O,p,v,j,m));if(_!=="horizontal"&&_!=="vertical"||k==null||w==null)return null;var{height:S,width:E,x:C,y:T}=w;return g.createElement(_Ee,Kc({},b,{id:m,connectNulls:a,dot:l,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:c,label:h,legendType:f,xAxisId:p,yAxisId:v,points:k,layout:_,height:S,width:E,left:C,top:T,needClip:x}))}function kEe(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:a,displayedData:l}=e;return l.map((c,u)=>{var h=Rt(c,o);if(t==="horizontal"){var f=jD({axis:r,ticks:s,bandSize:a,entry:c,index:u}),p=pr(h)?null:n.scale(h);return{x:f,y:p,value:h,payload:c}}var v=pr(h)?null:r.scale(h),m=jD({axis:n,ticks:i,bandSize:a,entry:c,index:u});return v==null||m==null?null:{x:v,y:m,value:h,payload:c}}).filter(Boolean)}function x9(e){var t=Fs(e,b9),r=Ls();return g.createElement(t9,{id:t.id,type:"line"},n=>g.createElement(g.Fragment,null,g.createElement(d2e,{legendPayload:dEe(t)}),g.createElement(Q7,{fn:hEe,args:t}),g.createElement(k2e,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),g.createElement(jEe,Kc({},t,{id:n}))))}x9.displayName="Line";function NM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function CM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NM(Object(r),!0).forEach(function(n){SEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SEe(e,t,r){return(t=NEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NEe(e){var t=CEe(e,"string");return typeof t=="symbol"?t:t+""}function CEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EEe={xAxis:{},yAxis:{},zAxis:{}},w9=os({name:"cartesianAxis",initialState:EEe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=CM(CM({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:TEe,removeXAxis:AEe,addYAxis:OEe,removeYAxis:PEe,addZAxis:Tze,removeZAxis:Aze,updateYAxisWidth:REe}=w9.actions,DEe=w9.reducer,MEe=["children"],IEe=["dangerouslySetInnerHTML","ticks"];function _9(e,t,r){return(t=LEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LEe(e){var t=FEe(e,"string");return typeof t=="symbol"?t:t+""}function FEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NS.apply(null,arguments)}function j9(e,t){if(e==null)return{};var r,n,s=$Ee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $Ee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zEe(e){var t=Wt(),r=g.useMemo(()=>{var{children:i}=e,o=j9(e,MEe);return o},[e]),n=Me(i=>pa(i,r.id)),s=r===n;return g.useEffect(()=>(t(TEe(r)),()=>{t(AEe(r))}),[r,t]),s?e.children:null}var UEe=e=>{var{xAxisId:t,className:r}=e,n=Me(i1),s=Ls(),i="xAxis",o=Me(p=>Ih(p,i,t,s)),a=Me(p=>t7(p,i,t,s)),l=Me(p=>Vje(p,t)),c=Me(p=>Zje(p,t));if(l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=e,f=j9(e,IEe);return g.createElement(El,NS({},f,{scale:o,x:c.x,y:c.y,width:l.width,height:l.height,className:st("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:a}))},qEe=e=>{var t,r,n,s,i;return g.createElement(zEe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},g.createElement(UEe,e))};class KT extends g.Component{render(){return g.createElement(qEe,this.props)}}_9(KT,"displayName","XAxis");_9(KT,"defaultProps",{allowDataOverflow:Kn.allowDataOverflow,allowDecimals:Kn.allowDecimals,allowDuplicatedCategory:Kn.allowDuplicatedCategory,height:Kn.height,hide:!1,mirror:Kn.mirror,orientation:Kn.orientation,padding:Kn.padding,reversed:Kn.reversed,scale:Kn.scale,tickCount:Kn.tickCount,type:Kn.type,xAxisId:0});var BEe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var a=r?r.getBoundingClientRect().width:0,l=s+i,c=o+l+a+(r?n:0);return Math.round(c)}return 0},WEe=["dangerouslySetInnerHTML","ticks"];function k9(e,t,r){return(t=VEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VEe(e){var t=HEe(e,"string");return typeof t=="symbol"?t:t+""}function HEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CS(){return CS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CS.apply(null,arguments)}function KEe(e,t){if(e==null)return{};var r,n,s=YEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function GEe(e){var t=Wt();return g.useEffect(()=>(t(OEe(e)),()=>{t(PEe(e))}),[e,t]),null}var ZEe=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=g.useRef(null),a=g.useRef(null),l=Me(i1),c=Ls(),u=Wt(),h="yAxis",f=Me(_=>Ih(_,h,r,c)),p=Me(_=>Qje(_,r)),v=Me(_=>Jje(_,r)),m=Me(_=>t7(_,h,r,c));if(g.useLayoutEffect(()=>{var _;if(!(s!=="auto"||!p||IT(i)||g.isValidElement(i))){var j=o.current,k=j==null||(_=j.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:S,tickMargin:E}=j.props,C=BEe({ticks:k,label:a.current,labelGapWithTick:5,tickSize:S,tickMargin:E});Math.round(p.width)!==Math.round(C)&&u(REe({id:r,width:C}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,u,i,r,s]),p==null||v==null)return null;var{dangerouslySetInnerHTML:b,ticks:x}=e,w=KEe(e,WEe);return g.createElement(El,CS({},w,{ref:o,labelRef:a,scale:f,x:v.x,y:v.y,width:p.width,height:p.height,className:st("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:m}))},JEe=e=>{var t,r,n,s,i;return g.createElement(g.Fragment,null,g.createElement(GEe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),g.createElement(ZEe,e))},QEe={allowDataOverflow:Yn.allowDataOverflow,allowDecimals:Yn.allowDecimals,allowDuplicatedCategory:Yn.allowDuplicatedCategory,hide:!1,mirror:Yn.mirror,orientation:Yn.orientation,padding:Yn.padding,reversed:Yn.reversed,scale:Yn.scale,tickCount:Yn.tickCount,type:Yn.type,width:Yn.width,yAxisId:0};class YT extends g.Component{render(){return g.createElement(JEe,this.props)}}k9(YT,"displayName","YAxis");k9(YT,"defaultProps",QEe);var J_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EM;function XEe(){if(EM)return J_;EM=1;var e=ue;function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,a=e.useDebugValue;return J_.useSyncExternalStoreWithSelector=function(l,c,u,h,f){var p=s(null);if(p.current===null){var v={hasValue:!1,value:null};p.current=v}else v=p.current;p=o(function(){function b(k){if(!x){if(x=!0,w=k,k=h(k),f!==void 0&&v.hasValue){var S=v.value;if(f(S,k))return _=S}return _=k}if(S=_,r(w,k))return S;var E=h(k);return f!==void 0&&f(S,E)?(w=k,S):(w=k,_=E)}var x=!1,w,_,j=u===void 0?null:u;return[function(){return b(c())},j===null?void 0:function(){return b(j())}]},[c,u,h,f]);var m=n(l,p[0],p[1]);return i(function(){v.hasValue=!0,v.value=m},[m]),a(m),m},J_}XEe();function eTe(e){e()}function tTe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){eTe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var TM={notify(){},get:()=>[]};function rTe(e,t){let r,n=TM,s=0,i=!1;function o(m){u();const b=n.subscribe(m);let x=!1;return()=>{x||(x=!0,b(),h())}}function a(){n.notify()}function l(){v.onStateChange&&v.onStateChange()}function c(){return i}function u(){s++,r||(r=e.subscribe(l),n=tTe())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=TM)}function f(){i||(i=!0,u())}function p(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>n};return v}var nTe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sTe=nTe(),iTe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",oTe=iTe(),aTe=()=>sTe||oTe?g.useLayoutEffect:g.useEffect,lTe=aTe(),AM=Symbol.for("react-redux-context"),OM=typeof globalThis<"u"?globalThis:{};function cTe(){if(!g.createContext)return{};const e=OM[AM]??(OM[AM]=new Map);let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var uTe=cTe();function dTe(e){const{children:t,context:r,serverState:n,store:s}=e,i=g.useMemo(()=>{const l=rTe(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),o=g.useMemo(()=>s.getState(),[s]);lTe(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,o]);const a=r||uTe;return g.createElement(a.Provider,{value:i},t)}var hTe=dTe,fTe=(e,t)=>t,GT=Z([fTe,yt,EB,Pr,v7,ma,sSe,zr],cSe),ZT=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},S9=Ps("mouseClick"),N9=$m();N9.startListening({actionCreator:S9,effect:(e,t)=>{var r=e.payload,n=GT(t.getState(),ZT(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(dke({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var ES=Ps("mouseMove"),C9=$m();C9.startListening({actionCreator:ES,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=CT(n,n.tooltip.settings.shared),i=GT(n,ZT(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(d7({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(u7()))}});function pTe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var PM={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},E9=os({name:"rootProps",initialState:PM,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:PM.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),mTe=E9.reducer,{updateOptions:gTe}=E9.actions,T9=os({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:yTe}=T9.actions,vTe=T9.reducer,A9=Ps("keyDown"),O9=Ps("focus"),JT=$m();JT.startListening({actionCreator:A9,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(ET(s,Fh(r))),a=ma(r);if(i==="Enter"){var l=hb(r,"axis","hover",String(s.index));t.dispatch(xS({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:l}));return}var c=rke(r),u=c==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,f=o+h*u;if(!(a==null||f>=a.length||f<0)){var p=hb(r,"axis","hover",String(f));t.dispatch(xS({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});JT.startListening({actionCreator:O9,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=hb(r,"axis","hover",String(i));t.dispatch(xS({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var ps=Ps("externalEvent"),P9=$m();P9.startListening({actionCreator:ps,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:Yke(r),activeDataKey:Hke(r),activeIndex:ih(r),activeLabel:w7(r),activeTooltipIndex:ih(r),isTooltipActive:Gke(r)};e.payload.handler(n,e.payload.reactEvent)}}});var bTe=Z([Lh],e=>e.tooltipItemPayloads),xTe=Z([bTe,Gm,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(a=>a.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),R9=Ps("touchMove"),D9=$m();D9.startListening({actionCreator:R9,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=CT(n,n.tooltip.settings.shared);if(s==="axis"){var i=GT(n,ZT({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(d7({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,a=r.touches[0],l=document.elementFromPoint(a.clientX,a.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(n1),u=(o=l.getAttribute(s1))!==null&&o!==void 0?o:void 0,h=xTe(t.getState(),c,u);t.dispatch(c7({activeDataKey:u,activeIndex:c,activeCoordinate:h}))}}});var wTe=Tq({brush:fCe,cartesianAxis:DEe,chartData:jSe,errorBars:iCe,graphicalItems:j2e,layout:fbe,legend:Jbe,options:vSe,polarAxis:zNe,polarOptions:vTe,referenceElements:xCe,rootProps:mTe,tooltip:hke}),_Te=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Fve({reducer:wTe,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([N9.middleware,C9.middleware,JT.middleware,P9.middleware,D9.middleware]),devTools:{serialize:{replacer:pTe},name:"recharts-".concat(t)}})};function M9(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Ls(),i=g.useRef(null);if(s)return r;i.current==null&&(i.current=_Te(t,n));var o=fE;return g.createElement(hTe,{context:o,store:i.current},r)}function I9(e){var{layout:t,width:r,height:n,margin:s}=e,i=Wt(),o=Ls();return g.useEffect(()=>{o||(i(ube(t)),i(dbe({width:r,height:n})),i(cbe(s)))},[i,o,t,r,n,s]),null}function L9(e){var t=Wt();return g.useEffect(()=>{t(gTe(e))},[t,e]),null}var jTe=["children"];function kTe(e,t){if(e==null)return{};var r,n,s=STe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function STe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vb(){return vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vb.apply(null,arguments)}var NTe={width:"100%",height:"100%"},CTe=g.forwardRef((e,t)=>{var r=kE(),n=SE(),s=u1();if(!eh(r)||!eh(n))return null;var{children:i,otherAttributes:o,title:a,desc:l}=e,c,u;return typeof o.tabIndex=="number"?c=o.tabIndex:c=s?0:void 0,typeof o.role=="string"?u=o.role:u=s?"application":void 0,g.createElement(XC,vb({},o,{title:a,desc:l,role:u,tabIndex:c,width:r,height:n,style:NTe,ref:t}),i)}),ETe=e=>{var{children:t}=e,r=Me(Xx);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return g.createElement(XC,{width:n,height:s,x:o,y:i},t)},RM=g.forwardRef((e,t)=>{var{children:r}=e,n=kTe(e,jTe),s=Ls();return s?g.createElement(ETe,null,r):g.createElement(CTe,vb({ref:t},n),r)});function TTe(){var e=Wt(),[t,r]=g.useState(null),n=Me($be);return g.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;vi(i)&&i!==n&&e(hbe(i))}},[t,e,n]),r}function DM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ATe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DM(Object(r),!0).forEach(function(n){OTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OTe(e,t,r){return(t=PTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PTe(e){var t=RTe(e,"string");return typeof t=="symbol"?t:t+""}function RTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DTe=g.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:p,onTouchMove:v,onTouchStart:m,style:b,width:x}=e,w=Wt(),[_,j]=g.useState(null),[k,S]=g.useState(null);NSe();var E=TTe(),C=g.useCallback(te=>{E(te),typeof t=="function"&&t(te),j(te),S(te)},[E,t,j,S]),T=g.useCallback(te=>{w(S9(te)),w(ps({handler:i,reactEvent:te}))},[w,i]),O=g.useCallback(te=>{w(ES(te)),w(ps({handler:c,reactEvent:te}))},[w,c]),P=g.useCallback(te=>{w(u7()),w(ps({handler:u,reactEvent:te}))},[w,u]),D=g.useCallback(te=>{w(ES(te)),w(ps({handler:h,reactEvent:te}))},[w,h]),R=g.useCallback(()=>{w(O9())},[w]),$=g.useCallback(te=>{w(A9(te.key))},[w]),F=g.useCallback(te=>{w(ps({handler:o,reactEvent:te}))},[w,o]),V=g.useCallback(te=>{w(ps({handler:a,reactEvent:te}))},[w,a]),q=g.useCallback(te=>{w(ps({handler:l,reactEvent:te}))},[w,l]),K=g.useCallback(te=>{w(ps({handler:f,reactEvent:te}))},[w,f]),Y=g.useCallback(te=>{w(ps({handler:m,reactEvent:te}))},[w,m]),L=g.useCallback(te=>{w(R9(te)),w(ps({handler:v,reactEvent:te}))},[w,v]),X=g.useCallback(te=>{w(ps({handler:p,reactEvent:te}))},[w,p]);return g.createElement(C7.Provider,{value:_},g.createElement($U.Provider,{value:k},g.createElement("div",{className:st("recharts-wrapper",n),style:ATe({position:"relative",cursor:"default",width:x,height:s},b),onClick:T,onContextMenu:F,onDoubleClick:V,onFocus:R,onKeyDown:$,onMouseDown:q,onMouseEnter:O,onMouseLeave:P,onMouseMove:D,onMouseUp:K,onTouchEnd:X,onTouchMove:L,onTouchStart:Y,ref:C},r)))}),MTe=["children","className","width","height","style","compact","title","desc"];function ITe(e,t){if(e==null)return{};var r,n,s=LTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function LTe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var F9=g.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:a,title:l,desc:c}=e,u=ITe(e,MTe),h=_l(u);return a?g.createElement(RM,{otherAttributes:h,title:l,desc:c},r):g.createElement(DTe,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(RM,{otherAttributes:h,title:l,desc:c,ref:t},g.createElement(_Ce,null,r)))}),FTe=["width","height"];function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TS.apply(null,arguments)}function $Te(e,t){if(e==null)return{};var r,n,s=zTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zTe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var UTe={top:5,right:5,bottom:5,left:5},qTe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:UTe,reverseStackOrder:!1,syncMethod:"index"},BTe=g.forwardRef(function(e,t){var r,n=Fs(e.categoricalChartProps,qTe),{width:s,height:i}=n,o=$Te(n,FTe);if(!eh(s)||!eh(i))return null;var{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:h}=e,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return g.createElement(M9,{preloadedState:{options:f},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:a},g.createElement(l9,{chartData:h.data}),g.createElement(I9,{width:s,height:i,layout:n.layout,margin:n.margin}),g.createElement(L9,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),g.createElement(F9,TS({},o,{width:s,height:i,ref:t})))}),WTe=["axis"],VTe=g.forwardRef((e,t)=>g.createElement(BTe,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:WTe,tooltipPayloadSearcher:A7,categoricalChartProps:e,ref:t}));function HTe(e){var t=Wt();return g.useEffect(()=>{t(yTe(e))},[t,e]),null}var KTe=["width","height","layout"];function AS(){return AS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AS.apply(null,arguments)}function YTe(e,t){if(e==null)return{};var r,n,s=GTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function GTe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZTe={top:5,right:5,bottom:5,left:5},JTe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ZTe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},QTe=g.forwardRef(function(e,t){var r,n=Fs(e.categoricalChartProps,JTe),{width:s,height:i,layout:o}=n,a=YTe(n,KTe);if(!eh(s)||!eh(i))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return g.createElement(M9,{preloadedState:{options:f},reduxStoreName:(r=n.id)!==null&&r!==void 0?r:l},g.createElement(l9,{chartData:n.data}),g.createElement(I9,{width:s,height:i,layout:o,margin:n.margin}),g.createElement(L9,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),g.createElement(HTe,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),g.createElement(F9,AS({width:s,height:i},a,{ref:t})))}),XTe=["item"],eAe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},tAe=g.forwardRef((e,t)=>{var r=Fs(e,eAe);return g.createElement(QTe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:XTe,tooltipPayloadSearcher:A7,categoricalChartProps:r,ref:t})});const rAe=async()=>{const{count:e}=await le.from("profiles").select("id",{count:"exact",head:!0}),{count:t}=await le.from("subscriptions").select("id",{count:"exact",head:!0}).eq("status","active"),{data:r,error:n}=await le.from("pages").select("view_count"),{data:s,error:i}=await le.from("purchases").select("price_id");(n||i)&&console.error("Error fetching key metrics:",{viewsError:n,revenueError:i});const o=(r==null?void 0:r.reduce((l,c)=>l+(c.view_count||0),0))||0,a=((s==null?void 0:s.length)||0)*10;return{totalUsers:e||0,activeSubscribers:t||0,totalRevenue:a,totalViews:o}},nAe=async()=>{const e=new Date;e.setDate(e.getDate()-30);const{data:t,error:r}=await le.from("profiles").select("created_at").gte("created_at",e.toISOString());if(r)throw new Error(r.message);const n=t.reduce((s,i)=>{const o=new Date(i.created_at).toISOString().split("T")[0];return s[o]=(s[o]||0)+1,s},{});return Object.entries(n).map(([s,i])=>({date:s,count:i})).sort((s,i)=>new Date(s.date).getTime()-new Date(i.date).getTime())},sAe=async()=>{const{data:e,error:t}=await le.from("subscriptions").select("status");if(t)throw new Error(t.message);const r=e.reduce((n,s)=>{const i=s.status||"unknown";return n[i]=(n[i]||0)+1,n},{});return Object.entries(r).map(([n,s])=>({name:n,value:s}))},iAe=async()=>{const{data:e,error:t}=await le.from("detailed_audit_log").select("*").order("created_at",{ascending:!1}).limit(5);if(t)throw new Error(t.message);return e},yy=({title:e,value:t,icon:r,color:n})=>d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 flex items-center space-x-4 hover:border-blue-500/50 transition-colors",children:[d.jsx("div",{className:`p-3 rounded-lg bg-${n}-500/20 text-${n}-400`,children:d.jsx(r,{className:"w-6 h-6"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-400",children:e}),d.jsx("p",{className:"text-2xl font-bold text-white",children:t})]})]}),MM=({title:e,children:t,icon:r})=>d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(r,{className:"w-5 h-5 mr-2 text-gray-400"}),d.jsx("h3",{className:"text-lg font-semibold text-white",children:e})]}),d.jsx("div",{className:"h-72",children:t})]}),Q_=()=>d.jsx("div",{className:"flex justify-center items-center h-full",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400"})}),X_=({message:e})=>d.jsxs("div",{className:"flex justify-center items-center h-full text-red-400",children:[d.jsx($i,{className:"w-6 h-6 mr-2"}),d.jsxs("p",{children:["Error loading data: ",e]})]}),IM=({message:e,icon:t=Xee})=>d.jsxs("div",{className:"flex flex-col justify-center items-center h-full text-gray-500",children:[d.jsx(t,{className:"w-12 h-12 mb-4"}),d.jsx("p",{className:"font-semibold",children:"No Data Available"}),d.jsx("p",{className:"text-sm",children:e})]}),oAe=()=>{const{data:e,isLoading:t}=hr({queryKey:["keyMetrics"],queryFn:rAe}),{data:r,isLoading:n,error:s}=hr({queryKey:["usersOverTime"],queryFn:nAe}),{data:i,isLoading:o,error:a}=hr({queryKey:["subscriptionStatus"],queryFn:sAe}),{data:l,isLoading:c,error:u}=hr({queryKey:["recentActivity"],queryFn:iAe}),h=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("header",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Dashboard"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"An overview of your website's performance."})]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:t?d.jsx("p",{className:"text-gray-900 dark:text-white",children:"Loading metrics..."}):d.jsxs(d.Fragment,{children:[d.jsx(yy,{title:"Total Users",value:e==null?void 0:e.totalUsers.toLocaleString(),icon:mv,color:"blue"}),d.jsx(yy,{title:"Active Subscribers",value:e==null?void 0:e.activeSubscribers.toLocaleString(),icon:ute,color:"green"}),d.jsx(yy,{title:"Total Revenue",value:`$${e==null?void 0:e.totalRevenue.toLocaleString()}`,icon:Gee,color:"yellow"}),d.jsx(yy,{title:"Total Page Views",value:e==null?void 0:e.totalViews.toLocaleString(),icon:Tm,color:"purple"})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsx(MM,{title:"New Users (Last 30 Days)",icon:rte,children:n?d.jsx(Q_,{}):s?d.jsx(X_,{message:s.message}):r&&r.length>0?d.jsx(Y3,{width:"100%",height:"100%",children:d.jsxs(VTe,{data:r,children:[d.jsx(f9,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(KT,{dataKey:"date",stroke:"#A0AEC0",tick:{fontSize:12}}),d.jsx(YT,{stroke:"#A0AEC0",tick:{fontSize:12}}),d.jsx(H3,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(Kp,{wrapperStyle:{fontSize:14}}),d.jsx(x9,{type:"monotone",dataKey:"count",name:"New Users",stroke:"#3B82F6",strokeWidth:2,dot:{r:4},activeDot:{r:8}})]})}):d.jsx(IM,{message:"No new user data to display for this period."})}),d.jsx(MM,{title:"Subscription Status",icon:lte,children:o?d.jsx(Q_,{}):a?d.jsx(X_,{message:a.message}):i&&i.length>0?d.jsx(Y3,{width:"100%",height:"100%",children:d.jsxs(tAe,{children:[d.jsx(i9,{data:i,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",labelLine:!1,label:({name:f,percent:p})=>`${f}: ${(p*100).toFixed(0)}%`,children:i==null?void 0:i.map((f,p)=>d.jsx(pw,{fill:h[p%h.length]},`cell-${p}`))}),d.jsx(H3,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(Kp,{wrapperStyle:{fontSize:14}})]})}):d.jsx(IM,{message:"No subscription data available."})})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(nte,{className:"w-5 h-5 mr-2 text-gray-600 dark:text-gray-300"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"})]}),d.jsx("div",{className:"space-y-4",children:c?d.jsx(Q_,{}):u?d.jsx(X_,{message:u.message}):l&&l.length>0?l.map(f=>{var p;return d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[d.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:f.actor_display_name||f.actor_username||"A user"})," ",(p=f.action)==null?void 0:p.toLowerCase(),"."]}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:new Date(f.created_at).toLocaleString()})]},f.id)}):d.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No recent activity found."})})]})]})};let aAe={data:""},lAe=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||aAe,cAe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,uAe=/\/\*[^]*?\*\/|  +/g,LM=/\n+/g,Wa=(e,t)=>{let r="",n="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?Wa(o,i):i+"{"+Wa(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=Wa(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Wa.p?Wa.p(i,o):i+":"+o+";")}return r+(t&&s?t+"{"+s+"}":s)+n},jo={},$9=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+$9(e[r]);return t}return e},dAe=(e,t,r,n,s)=>{let i=$9(e),o=jo[i]||(jo[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!jo[o]){let l=i!==e?e:(c=>{let u,h,f=[{}];for(;u=cAe.exec(c.replace(uAe,""));)u[4]?f.shift():u[3]?(h=u[3].replace(LM," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(LM," ").trim();return f[0]})(e);jo[o]=Wa(s?{["@keyframes "+o]:l}:l,r?"":"."+o)}let a=r&&jo.g?jo.g:null;return r&&(jo.g=jo[o]),((l,c,u,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(jo[o],t,n,a),o},hAe=(e,t,r)=>e.reduce((n,s,i)=>{let o=t[i];if(o&&o.call){let a=o(r),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Wa(a,""):a===!1?"":a}return n+s+(o??"")},"");function gw(e){let t=this||{},r=e.call?e(t.p):e;return dAe(r.unshift?r.raw?hAe(r,[].slice.call(arguments,1),t.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):r,lAe(t.target),t.g,t.o,t.k)}let z9,OS,PS;gw.bind({g:1});let na=gw.bind({k:1});function fAe(e,t,r,n){Wa.p=t,z9=e,OS=r,PS=n}function Tl(e,t){let r=this||{};return function(){let n=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;r.p=Object.assign({theme:OS&&OS()},a),r.o=/ *go\d+/.test(l),a.className=gw.apply(r,n)+(l?" "+l:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),PS&&c[0]&&PS(a),z9(c,a)}return s}}var pAe=e=>typeof e=="function",bb=(e,t)=>pAe(e)?e(t):e,mAe=(()=>{let e=0;return()=>(++e).toString()})(),U9=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),gAe=20,QT="default",q9=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return q9(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Yy=[],B9={toasts:[],pausedAt:void 0,settings:{toastLimit:gAe}},Hi={},W9=(e,t=QT)=>{Hi[t]=q9(Hi[t]||B9,e),Yy.forEach(([r,n])=>{r===t&&n(Hi[t])})},V9=e=>Object.keys(Hi).forEach(t=>W9(e,t)),yAe=e=>Object.keys(Hi).find(t=>Hi[t].toasts.some(r=>r.id===e)),yw=(e=QT)=>t=>{W9(t,e)},vAe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bAe=(e={},t=QT)=>{let[r,n]=g.useState(Hi[t]||B9),s=g.useRef(Hi[t]);g.useEffect(()=>(s.current!==Hi[t]&&n(Hi[t]),Yy.push([t,n]),()=>{let o=Yy.findIndex(([a])=>a===t);o>-1&&Yy.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var a,l,c;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||vAe[o.type],style:{...e.style,...(c=e[o.type])==null?void 0:c.style,...o.style}}});return{...r,toasts:i}},xAe=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||mAe()}),Jm=e=>(t,r)=>{let n=xAe(t,e,r);return yw(n.toasterId||yAe(n.id))({type:2,toast:n}),n.id},er=(e,t)=>Jm("blank")(e,t);er.error=Jm("error");er.success=Jm("success");er.loading=Jm("loading");er.custom=Jm("custom");er.dismiss=(e,t)=>{let r={type:3,toastId:e};t?yw(t)(r):V9(r)};er.dismissAll=e=>er.dismiss(void 0,e);er.remove=(e,t)=>{let r={type:4,toastId:e};t?yw(t)(r):V9(r)};er.removeAll=e=>er.remove(void 0,e);er.promise=(e,t,r)=>{let n=er.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?bb(t.success,s):void 0;return i?er.success(i,{id:n,...r,...r==null?void 0:r.success}):er.dismiss(n),s}).catch(s=>{let i=t.error?bb(t.error,s):void 0;i?er.error(i,{id:n,...r,...r==null?void 0:r.error}):er.dismiss(n)}),e};var wAe=1e3,_Ae=(e,t="default")=>{let{toasts:r,pausedAt:n}=bAe(e,t),s=g.useRef(new Map).current,i=g.useCallback((h,f=wAe)=>{if(s.has(h))return;let p=setTimeout(()=>{s.delete(h),o({type:4,toastId:h})},f);s.set(h,p)},[]);g.useEffect(()=>{if(n)return;let h=Date.now(),f=r.map(p=>{if(p.duration===1/0)return;let v=(p.duration||0)+p.pauseDuration-(h-p.createdAt);if(v<0){p.visible&&er.dismiss(p.id);return}return setTimeout(()=>er.dismiss(p.id,t),v)});return()=>{f.forEach(p=>p&&clearTimeout(p))}},[r,n,t]);let o=g.useCallback(yw(t),[t]),a=g.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=g.useCallback((h,f)=>{o({type:1,toast:{id:h,height:f}})},[o]),c=g.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=g.useCallback((h,f)=>{let{reverseOrder:p=!1,gutter:v=8,defaultPosition:m}=f||{},b=r.filter(_=>(_.position||m)===(h.position||m)&&_.height),x=b.findIndex(_=>_.id===h.id),w=b.filter((_,j)=>j<x&&_.visible).length;return b.filter(_=>_.visible).slice(...p?[w+1]:[0,w]).reduce((_,j)=>_+(j.height||0)+v,0)},[r]);return g.useEffect(()=>{r.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let f=s.get(h.id);f&&(clearTimeout(f),s.delete(h.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},jAe=na`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,kAe=na`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,SAe=na`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,NAe=Tl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jAe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${kAe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${SAe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,CAe=na`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,EAe=Tl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${CAe} 1s linear infinite;
`,TAe=na`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,AAe=na`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,OAe=Tl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TAe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${AAe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,PAe=Tl("div")`
  position: absolute;
`,RAe=Tl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,DAe=na`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,MAe=Tl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${DAe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,IAe=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?g.createElement(MAe,null,t):t:r==="blank"?null:g.createElement(RAe,null,g.createElement(EAe,{...n}),r!=="loading"&&g.createElement(PAe,null,r==="error"?g.createElement(NAe,{...n}):g.createElement(OAe,{...n})))},LAe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,FAe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,$Ae="0%{opacity:0;} 100%{opacity:1;}",zAe="0%{opacity:1;} 100%{opacity:0;}",UAe=Tl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qAe=Tl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,BAe=(e,t)=>{let r=e.includes("top")?1:-1,[n,s]=U9()?[$Ae,zAe]:[LAe(r),FAe(r)];return{animation:t?`${na(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${na(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},WAe=g.memo(({toast:e,position:t,style:r,children:n})=>{let s=e.height?BAe(e.position||t||"top-center",e.visible):{opacity:0},i=g.createElement(IAe,{toast:e}),o=g.createElement(qAe,{...e.ariaProps},bb(e.message,e));return g.createElement(UAe,{className:e.className,style:{...s,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):g.createElement(g.Fragment,null,i,o))});fAe(g.createElement);var VAe=({id:e,className:t,style:r,onHeightUpdate:n,children:s})=>{let i=g.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;n(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return g.createElement("div",{ref:i,className:t,style:r},s)},HAe=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:U9()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...s}},KAe=gw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,vy=16,YAe=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=_Ae(r,i);return g.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:vy,left:vy,right:vy,bottom:vy,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let h=u.position||t,f=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),p=HAe(h,f);return g.createElement(VAe,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?KAe:"",style:p},u.type==="custom"?bb(u.message,u):s?s(u):g.createElement(WAe,{toast:u,position:h}))}))},Li=er;function GAe(){return{toast:({title:e,description:t,variant:r})=>{r==="destructive"?er.error(e,{id:e,duration:5e3,style:{background:"#fee2e2",color:"#ef4444",border:"1px solid #fca5a5"},iconTheme:{primary:"#ef4444",secondary:"#fee2e2"}}):er.success(e,{id:e,duration:3e3,style:{background:"#dcfce7",color:"#22c55e",border:"1px solid #86efac"},iconTheme:{primary:"#22c55e",secondary:"#dcfce7"}})}}}const en=GAe(),ZAe=async()=>{const{data:e,error:t}=await le.from("homepage_content").select("*");if(t)throw new Error(t.message);return e},JAe=async e=>{const{id:t,...r}=e,{data:n,error:s}=await le.from("homepage_content").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},QAe=async e=>{const{data:t,error:r}=await le.from("homepage_content").insert(e).select();if(r)throw new Error(r.message);return t[0]},XAe=async()=>{const{data:e,error:t}=await le.from("news_items").select("*").order("date",{ascending:!1});if(t)throw new Error(t.message);return e},eOe=async e=>{const{data:t,error:r}=await le.from("news_items").insert(e).select();if(r)throw new Error(r.message);return t[0]},tOe=async e=>{const{data:t,error:r}=await le.from("news_items").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},rOe=async e=>{const{error:t}=await le.from("news_items").delete().eq("id",e);if(t)throw new Error(t.message)},nOe=async()=>{const{data:e,error:t}=await le.from("release_items").select("*").order("release_date",{ascending:!1});if(t)throw new Error(t.message);return e},sOe=async e=>{const{data:t,error:r}=await le.from("release_items").insert(e).select();if(r)throw new Error(r.message);return t[0]},iOe=async e=>{const{data:t,error:r}=await le.from("release_items").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},oOe=async e=>{const{error:t}=await le.from("release_items").delete().eq("id",e);if(t)throw new Error(t.message)},aOe=()=>{var e,t,r,n,s,i,o,a;const l=ua(),{data:c,isLoading:u,isError:h,error:f}=hr({queryKey:["homepageContent"],queryFn:ZAe}),{data:p,isLoading:v,isError:m,error:b}=hr({queryKey:["newsItems"],queryFn:XAe}),{data:x,isLoading:w,isError:_,error:j}=hr({queryKey:["releaseItems"],queryFn:nOe}),k=Gt({mutationFn:JAe,onSuccess:()=>{l.invalidateQueries({queryKey:["homepageContent"]}),en.toast({title:"Content updated successfully!",variant:"default"})},onError:z=>{en.toast({title:`Error updating content: ${z.message}`,variant:"destructive"})}}),S=Gt({mutationFn:QAe,onSuccess:()=>{l.invalidateQueries({queryKey:["homepageContent"]}),en.toast({title:"Content created successfully!",variant:"default"})},onError:z=>{en.toast({title:`Error creating content: ${z.message}`,variant:"destructive"})}}),E=Gt({mutationFn:eOe,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),en.toast({title:"News item added successfully!",variant:"default"}),G()},onError:z=>{en.toast({title:`Error adding news item: ${z.message}`,variant:"destructive"})}}),C=Gt({mutationFn:tOe,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),en.toast({title:"News item updated successfully!",variant:"default"}),G()},onError:z=>{en.toast({title:`Error updating news item: ${z.message}`,variant:"destructive"})}}),T=Gt({mutationFn:rOe,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),en.toast({title:"News item deleted successfully!",variant:"default"})},onError:z=>{en.toast({title:`Error deleting news item: ${z.message}`,variant:"destructive"})}}),O=Gt({mutationFn:sOe,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),en.toast({title:"Release item added successfully!",variant:"default"}),W()},onError:z=>{en.toast({title:`Error adding release item: ${z.message}`,variant:"destructive"})}}),P=Gt({mutationFn:iOe,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),en.toast({title:"Release item updated successfully!",variant:"default"}),W()},onError:z=>{en.toast({title:`Error updating release item: ${z.message}`,variant:"destructive"})}}),D=Gt({mutationFn:oOe,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),en.toast({title:"Release item deleted successfully!",variant:"default"})},onError:z=>{en.toast({title:`Error deleting release item: ${z.message}`,variant:"destructive"})}}),[R,$]=g.useState(!1),[F,V]=g.useState(null),[q,K]=g.useState(!1),[Y,L]=g.useState(null),X=z=>c==null?void 0:c.find(ke=>ke.section===z),te=async z=>{z.preventDefault();const ke=z.target,Pe=ke.heroTitle.value,Ge=ke.heroDescription.value,Ye=ke.heroButtonText.value,ft=ke.heroButtonLink.value,Vt=[{section:"hero_title",content:Pe},{section:"hero_description",content:Ge},{section:"hero_button_text",content:Ye},{section:"hero_button_link",content:ft}];for(const M of Vt){const B=X(M.section);B?k.mutate({...B,content:M.content}):S.mutate(M)}},ve=async z=>{z.preventDefault();const ke=z.target,Pe=ke.wordsWritten.value,Ge=ke.betaReaders.value,Ye=ke.averageRating.value,ft=ke.booksPublished.value,Vt=[{section:"stat_words_written",content:Pe},{section:"stat_beta_readers",content:Ge},{section:"stat_average_rating",content:Ye},{section:"stat_books_published",content:ft}];for(const M of Vt){const B=X(M.section);B?k.mutate({...B,content:M.content}):S.mutate(M)}},H=(z=null)=>{V(z),$(!0)},G=()=>{V(null),$(!1)},he=z=>{z.preventDefault();const ke=z.target,Pe=ke.newsTitle.value,Ge=ke.newsContent.value,Ye=ke.newsStatus.value,ft=ke.newsDate.value,Vt={title:Pe,content:Ge,status:Ye,date:ft};F?C.mutate({...F,...Vt}):E.mutate(Vt)},fe=z=>{window.confirm("Are you sure you want to delete this news item?")&&T.mutate(z)},_e=(z=null)=>{L(z),K(!0)},W=()=>{L(null),K(!1)},J=z=>{z.preventDefault();const ke=z.target,Pe=ke.releaseTitle.value,Ge=ke.releaseType.value,Ye=ke.releaseStatus.value,ft=ke.releaseDescription.value,Vt=ke.releaseDate.value,M=ke.purchaseLink.value,B={title:Pe,type:Ge,status:Ye,description:ft,release_date:Vt,purchase_link:M};Y?P.mutate({...Y,...B}):O.mutate(B)},ae=z=>{window.confirm("Are you sure you want to delete this release item?")&&D.mutate(z)};return u||v||w?d.jsx("div",{className:"text-center py-8",children:"Loading homepage content manager..."}):h?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error: ",f==null?void 0:f.message]}):m?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading news: ",b==null?void 0:b.message]}):_?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading releases: ",j==null?void 0:j.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-4",role:"alert",children:[d.jsx("strong",{children:"Note:"})," Changes made here will be reflected on your homepage immediately after saving."]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Hero Section"}),d.jsx("div",{className:"p-6",children:d.jsxs("form",{onSubmit:te,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Main Title"}),d.jsx("input",{type:"text",id:"heroTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((e=X("hero_title"))==null?void 0:e.content)||""})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroDescription",className:"block text-gray-700 text-sm font-bold mb-2",children:"Subtitle/Description"}),d.jsx("textarea",{id:"heroDescription",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-32 resize-y",defaultValue:((t=X("hero_description"))==null?void 0:t.content)||""})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroButtonText",className:"block text-gray-700 text-sm font-bold mb-2",children:"Button Text"}),d.jsx("input",{type:"text",id:"heroButtonText",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((r=X("hero_button_text"))==null?void 0:r.content)||""})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{htmlFor:"heroButtonLink",className:"block text-gray-700 text-sm font-bold mb-2",children:"Button Link"}),d.jsx("input",{type:"url",id:"heroButtonLink",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((n=X("hero_button_link"))==null?void 0:n.content)||""})]}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Hero Section"})]})})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Statistics"}),d.jsx("div",{className:"p-6",children:d.jsxs("form",{onSubmit:ve,children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"wordsWritten",className:"block text-gray-700 text-sm font-bold mb-2",children:"Words Written"}),d.jsx("input",{type:"text",id:"wordsWritten",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((s=X("stat_words_written"))==null?void 0:s.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"betaReaders",className:"block text-gray-700 text-sm font-bold mb-2",children:"Beta Readers"}),d.jsx("input",{type:"text",id:"betaReaders",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((i=X("stat_beta_readers"))==null?void 0:i.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"averageRating",className:"block text-gray-700 text-sm font-bold mb-2",children:"Average Rating"}),d.jsx("input",{type:"text",id:"averageRating",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((o=X("stat_average_rating"))==null?void 0:o.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"booksPublished",className:"block text-gray-700 text-sm font-bold mb-2",children:"Books Published"}),d.jsx("input",{type:"text",id:"booksPublished",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((a=X("stat_books_published"))==null?void 0:a.content)||""})]})]}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Statistics"})]})})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Latest News & Updates"}),d.jsxs("div",{className:"p-6",children:[d.jsx("button",{onClick:()=>H(),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-4",children:"+ Add New Update"}),p==null?void 0:p.map(z=>d.jsxs("div",{className:"bg-gray-100 p-4 rounded-md mb-2 relative",children:[d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsx("button",{onClick:()=>H(z),className:"bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"Edit"}),d.jsx("button",{onClick:()=>fe(z.id),className:"bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Delete"})]}),d.jsx("h3",{className:"font-bold text-lg mb-1",children:z.title}),d.jsx("p",{className:"text-gray-700 text-sm",children:z.content}),d.jsxs("small",{className:"text-gray-500",children:["Status: ",z.status," | Date: ",z.date]})]},z.id))]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Latest Releases"}),d.jsxs("div",{className:"p-6",children:[d.jsx("button",{onClick:()=>_e(),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-4",children:"+ Add New Release"}),x==null?void 0:x.map(z=>d.jsxs("div",{className:"bg-gray-100 p-4 rounded-md mb-2 relative",children:[d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsx("button",{onClick:()=>_e(z),className:"bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"Edit"}),d.jsx("button",{onClick:()=>ae(z.id),className:"bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Delete"})]}),d.jsx("h3",{className:"font-bold text-lg mb-1",children:z.title}),d.jsxs("p",{className:"text-gray-700 text-sm",children:[d.jsx("strong",{children:"Type:"})," ",z.type," | ",d.jsx("strong",{children:"Status:"})," ",z.status]}),d.jsxs("small",{className:"text-gray-500",children:["Released: ",z.release_date]})]},z.id))]})]}),R&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:F?"Edit Update":"Add New Update"}),d.jsx("button",{onClick:G,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),d.jsxs("form",{onSubmit:he,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newsTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),d.jsx("input",{type:"text",id:"newsTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(F==null?void 0:F.title)||"",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newsContent",className:"block text-gray-700 text-sm font-bold mb-2",children:"Content"}),d.jsx("textarea",{id:"newsContent",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 resize-y",defaultValue:(F==null?void 0:F.content)||"",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newsStatus",className:"block text-gray-700 text-sm font-bold mb-2",children:"Status"}),d.jsxs("select",{id:"newsStatus",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(F==null?void 0:F.status)||"draft",children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newsDate",className:"block text-gray-700 text-sm font-bold mb-2",children:"Date"}),d.jsx("input",{type:"date",id:"newsDate",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(F==null?void 0:F.date)||new Date().toISOString().split("T")[0],required:!0})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:G,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Update"})]})]})]})}),q&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:Y?"Edit Release":"Add New Release"}),d.jsx("button",{onClick:W,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),d.jsxs("form",{onSubmit:J,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"releaseTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),d.jsx("input",{type:"text",id:"releaseTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(Y==null?void 0:Y.title)||"",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseType",className:"block text-gray-700 text-sm font-bold mb-2",children:"Type"}),d.jsxs("select",{id:"releaseType",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(Y==null?void 0:Y.type)||"issue",children:[d.jsx("option",{value:"issue",children:"Issue"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"volume",children:"Volume"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseStatus",className:"block text-gray-700 text-sm font-bold mb-2",children:"Status"}),d.jsxs("select",{id:"releaseStatus",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(Y==null?void 0:Y.status)||"available",children:[d.jsx("option",{value:"available",children:"Available"}),d.jsx("option",{value:"coming-soon",children:"Coming Soon"}),d.jsx("option",{value:"pre-order",children:"Pre-order"})]})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"releaseDescription",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),d.jsx("textarea",{id:"releaseDescription",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 resize-y",defaultValue:(Y==null?void 0:Y.description)||""})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseDate",className:"block text-gray-700 text-sm font-bold mb-2",children:"Release Date"}),d.jsx("input",{type:"date",id:"releaseDate",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(Y==null?void 0:Y.release_date)||new Date().toISOString().split("T")[0],required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"purchaseLink",className:"block text-gray-700 text-sm font-bold mb-2",children:"Purchase Link"}),d.jsx("input",{type:"url",id:"purchaseLink",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(Y==null?void 0:Y.purchase_link)||""})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:W,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Release"})]})]})]})})]})};var H9=typeof global=="object"&&global&&global.Object===Object&&global,lOe=typeof self=="object"&&self&&self.Object===Object&&self,po=H9||lOe||Function("return this")(),ml=po.Symbol,K9=Object.prototype,cOe=K9.hasOwnProperty,uOe=K9.toString,Ef=ml?ml.toStringTag:void 0;function dOe(e){var t=cOe.call(e,Ef),r=e[Ef];try{e[Ef]=void 0;var n=!0}catch{}var s=uOe.call(e);return n&&(t?e[Ef]=r:delete e[Ef]),s}var hOe=Object.prototype,fOe=hOe.toString;function pOe(e){return fOe.call(e)}var mOe="[object Null]",gOe="[object Undefined]",FM=ml?ml.toStringTag:void 0;function $h(e){return e==null?e===void 0?gOe:mOe:FM&&FM in Object(e)?dOe(e):pOe(e)}function sa(e){return e!=null&&typeof e=="object"}var Yc=Array.isArray;function Al(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Y9(e){return e}var yOe="[object AsyncFunction]",vOe="[object Function]",bOe="[object GeneratorFunction]",xOe="[object Proxy]";function XT(e){if(!Al(e))return!1;var t=$h(e);return t==vOe||t==bOe||t==yOe||t==xOe}var ej=po["__core-js_shared__"],$M=function(){var e=/[^.]+$/.exec(ej&&ej.keys&&ej.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function wOe(e){return!!$M&&$M in e}var _Oe=Function.prototype,jOe=_Oe.toString;function cu(e){if(e!=null){try{return jOe.call(e)}catch{}try{return e+""}catch{}}return""}var kOe=/[\\^$.*+?()[\]{}|]/g,SOe=/^\[object .+?Constructor\]$/,NOe=Function.prototype,COe=Object.prototype,EOe=NOe.toString,TOe=COe.hasOwnProperty,AOe=RegExp("^"+EOe.call(TOe).replace(kOe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function OOe(e){if(!Al(e)||wOe(e))return!1;var t=XT(e)?AOe:SOe;return t.test(cu(e))}function POe(e,t){return e==null?void 0:e[t]}function uu(e,t){var r=POe(e,t);return OOe(r)?r:void 0}var RS=uu(po,"WeakMap"),zM=Object.create,ROe=function(){function e(){}return function(t){if(!Al(t))return{};if(zM)return zM(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function DOe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function MOe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var IOe=800,LOe=16,FOe=Date.now;function $Oe(e){var t=0,r=0;return function(){var n=FOe(),s=LOe-(n-r);if(r=n,s>0){if(++t>=IOe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function zOe(e){return function(){return e}}var xb=function(){try{var e=uu(Object,"defineProperty");return e({},"",{}),e}catch{}}(),UOe=xb?function(e,t){return xb(e,"toString",{configurable:!0,enumerable:!1,value:zOe(t),writable:!0})}:Y9,qOe=$Oe(UOe);function BOe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var WOe=9007199254740991,VOe=/^(?:0|[1-9]\d*)$/;function G9(e,t){var r=typeof e;return t=t??WOe,!!t&&(r=="number"||r!="symbol"&&VOe.test(e))&&e>-1&&e%1==0&&e<t}function eA(e,t,r){t=="__proto__"&&xb?xb(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Qm(e,t){return e===t||e!==e&&t!==t}var HOe=Object.prototype,KOe=HOe.hasOwnProperty;function Z9(e,t,r){var n=e[t];(!(KOe.call(e,t)&&Qm(n,r))||r===void 0&&!(t in e))&&eA(e,t,r)}function YOe(e,t,r,n){var s=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],l=void 0;l===void 0&&(l=e[a]),s?eA(r,a,l):Z9(r,a,l)}return r}var UM=Math.max;function GOe(e,t,r){return t=UM(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=UM(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=r(o),DOe(e,this,a)}}function ZOe(e,t){return qOe(GOe(e,t,Y9),e+"")}var JOe=9007199254740991;function J9(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=JOe}function vw(e){return e!=null&&J9(e.length)&&!XT(e)}function QOe(e,t,r){if(!Al(r))return!1;var n=typeof t;return(n=="number"?vw(r)&&G9(t,r.length):n=="string"&&t in r)?Qm(r[t],e):!1}function XOe(e){return ZOe(function(t,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(s--,i):void 0,o&&QOe(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var a=r[n];a&&e(t,a,n,i)}return t})}var ePe=Object.prototype;function tA(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ePe;return e===r}function tPe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var rPe="[object Arguments]";function qM(e){return sa(e)&&$h(e)==rPe}var Q9=Object.prototype,nPe=Q9.hasOwnProperty,sPe=Q9.propertyIsEnumerable,DS=qM(function(){return arguments}())?qM:function(e){return sa(e)&&nPe.call(e,"callee")&&!sPe.call(e,"callee")};function iPe(){return!1}var X9=typeof exports=="object"&&exports&&!exports.nodeType&&exports,BM=X9&&typeof module=="object"&&module&&!module.nodeType&&module,oPe=BM&&BM.exports===X9,WM=oPe?po.Buffer:void 0,aPe=WM?WM.isBuffer:void 0,tm=aPe||iPe,lPe="[object Arguments]",cPe="[object Array]",uPe="[object Boolean]",dPe="[object Date]",hPe="[object Error]",fPe="[object Function]",pPe="[object Map]",mPe="[object Number]",gPe="[object Object]",yPe="[object RegExp]",vPe="[object Set]",bPe="[object String]",xPe="[object WeakMap]",wPe="[object ArrayBuffer]",_Pe="[object DataView]",jPe="[object Float32Array]",kPe="[object Float64Array]",SPe="[object Int8Array]",NPe="[object Int16Array]",CPe="[object Int32Array]",EPe="[object Uint8Array]",TPe="[object Uint8ClampedArray]",APe="[object Uint16Array]",OPe="[object Uint32Array]",Ct={};Ct[jPe]=Ct[kPe]=Ct[SPe]=Ct[NPe]=Ct[CPe]=Ct[EPe]=Ct[TPe]=Ct[APe]=Ct[OPe]=!0;Ct[lPe]=Ct[cPe]=Ct[wPe]=Ct[uPe]=Ct[_Pe]=Ct[dPe]=Ct[hPe]=Ct[fPe]=Ct[pPe]=Ct[mPe]=Ct[gPe]=Ct[yPe]=Ct[vPe]=Ct[bPe]=Ct[xPe]=!1;function PPe(e){return sa(e)&&J9(e.length)&&!!Ct[$h(e)]}function rA(e){return function(t){return e(t)}}var eW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yp=eW&&typeof module=="object"&&module&&!module.nodeType&&module,RPe=yp&&yp.exports===eW,tj=RPe&&H9.process,oh=function(){try{var e=yp&&yp.require&&yp.require("util").types;return e||tj&&tj.binding&&tj.binding("util")}catch{}}(),VM=oh&&oh.isTypedArray,nA=VM?rA(VM):PPe,DPe=Object.prototype,MPe=DPe.hasOwnProperty;function tW(e,t){var r=Yc(e),n=!r&&DS(e),s=!r&&!n&&tm(e),i=!r&&!n&&!s&&nA(e),o=r||n||s||i,a=o?tPe(e.length,String):[],l=a.length;for(var c in e)(t||MPe.call(e,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||G9(c,l)))&&a.push(c);return a}function rW(e,t){return function(r){return e(t(r))}}var IPe=rW(Object.keys,Object),LPe=Object.prototype,FPe=LPe.hasOwnProperty;function $Pe(e){if(!tA(e))return IPe(e);var t=[];for(var r in Object(e))FPe.call(e,r)&&r!="constructor"&&t.push(r);return t}function zPe(e){return vw(e)?tW(e):$Pe(e)}function UPe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var qPe=Object.prototype,BPe=qPe.hasOwnProperty;function WPe(e){if(!Al(e))return UPe(e);var t=tA(e),r=[];for(var n in e)n=="constructor"&&(t||!BPe.call(e,n))||r.push(n);return r}function nW(e){return vw(e)?tW(e,!0):WPe(e)}var rm=uu(Object,"create");function VPe(){this.__data__=rm?rm(null):{},this.size=0}function HPe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var KPe="__lodash_hash_undefined__",YPe=Object.prototype,GPe=YPe.hasOwnProperty;function ZPe(e){var t=this.__data__;if(rm){var r=t[e];return r===KPe?void 0:r}return GPe.call(t,e)?t[e]:void 0}var JPe=Object.prototype,QPe=JPe.hasOwnProperty;function XPe(e){var t=this.__data__;return rm?t[e]!==void 0:QPe.call(t,e)}var e4e="__lodash_hash_undefined__";function t4e(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rm&&t===void 0?e4e:t,this}function Gc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Gc.prototype.clear=VPe;Gc.prototype.delete=HPe;Gc.prototype.get=ZPe;Gc.prototype.has=XPe;Gc.prototype.set=t4e;function r4e(){this.__data__=[],this.size=0}function bw(e,t){for(var r=e.length;r--;)if(Qm(e[r][0],t))return r;return-1}var n4e=Array.prototype,s4e=n4e.splice;function i4e(e){var t=this.__data__,r=bw(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():s4e.call(t,r,1),--this.size,!0}function o4e(e){var t=this.__data__,r=bw(t,e);return r<0?void 0:t[r][1]}function a4e(e){return bw(this.__data__,e)>-1}function l4e(e,t){var r=this.__data__,n=bw(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ga(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ga.prototype.clear=r4e;ga.prototype.delete=i4e;ga.prototype.get=o4e;ga.prototype.has=a4e;ga.prototype.set=l4e;var nm=uu(po,"Map");function c4e(){this.size=0,this.__data__={hash:new Gc,map:new(nm||ga),string:new Gc}}function u4e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function xw(e,t){var r=e.__data__;return u4e(t)?r[typeof t=="string"?"string":"hash"]:r.map}function d4e(e){var t=xw(this,e).delete(e);return this.size-=t?1:0,t}function h4e(e){return xw(this,e).get(e)}function f4e(e){return xw(this,e).has(e)}function p4e(e,t){var r=xw(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function du(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}du.prototype.clear=c4e;du.prototype.delete=d4e;du.prototype.get=h4e;du.prototype.has=f4e;du.prototype.set=p4e;function m4e(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var sW=rW(Object.getPrototypeOf,Object),g4e="[object Object]",y4e=Function.prototype,v4e=Object.prototype,iW=y4e.toString,b4e=v4e.hasOwnProperty,x4e=iW.call(Object);function w4e(e){if(!sa(e)||$h(e)!=g4e)return!1;var t=sW(e);if(t===null)return!0;var r=b4e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&iW.call(r)==x4e}function _4e(){this.__data__=new ga,this.size=0}function j4e(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function k4e(e){return this.__data__.get(e)}function S4e(e){return this.__data__.has(e)}var N4e=200;function C4e(e,t){var r=this.__data__;if(r instanceof ga){var n=r.__data__;if(!nm||n.length<N4e-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new du(n)}return r.set(e,t),this.size=r.size,this}function Qi(e){var t=this.__data__=new ga(e);this.size=t.size}Qi.prototype.clear=_4e;Qi.prototype.delete=j4e;Qi.prototype.get=k4e;Qi.prototype.has=S4e;Qi.prototype.set=C4e;var oW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,HM=oW&&typeof module=="object"&&module&&!module.nodeType&&module,E4e=HM&&HM.exports===oW,KM=E4e?po.Buffer:void 0,YM=KM?KM.allocUnsafe:void 0;function aW(e,t){if(t)return e.slice();var r=e.length,n=YM?YM(r):new e.constructor(r);return e.copy(n),n}function T4e(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}function A4e(){return[]}var O4e=Object.prototype,P4e=O4e.propertyIsEnumerable,GM=Object.getOwnPropertySymbols,R4e=GM?function(e){return e==null?[]:(e=Object(e),T4e(GM(e),function(t){return P4e.call(e,t)}))}:A4e;function D4e(e,t,r){var n=t(e);return Yc(e)?n:m4e(n,r(e))}function MS(e){return D4e(e,zPe,R4e)}var IS=uu(po,"DataView"),LS=uu(po,"Promise"),FS=uu(po,"Set"),ZM="[object Map]",M4e="[object Object]",JM="[object Promise]",QM="[object Set]",XM="[object WeakMap]",eI="[object DataView]",I4e=cu(IS),L4e=cu(nm),F4e=cu(LS),$4e=cu(FS),z4e=cu(RS),oi=$h;(IS&&oi(new IS(new ArrayBuffer(1)))!=eI||nm&&oi(new nm)!=ZM||LS&&oi(LS.resolve())!=JM||FS&&oi(new FS)!=QM||RS&&oi(new RS)!=XM)&&(oi=function(e){var t=$h(e),r=t==M4e?e.constructor:void 0,n=r?cu(r):"";if(n)switch(n){case I4e:return eI;case L4e:return ZM;case F4e:return JM;case $4e:return QM;case z4e:return XM}return t});var U4e=Object.prototype,q4e=U4e.hasOwnProperty;function B4e(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&q4e.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var wb=po.Uint8Array;function sA(e){var t=new e.constructor(e.byteLength);return new wb(t).set(new wb(e)),t}function W4e(e,t){var r=sA(e.buffer);return new e.constructor(r,e.byteOffset,e.byteLength)}var V4e=/\w*$/;function H4e(e){var t=new e.constructor(e.source,V4e.exec(e));return t.lastIndex=e.lastIndex,t}var tI=ml?ml.prototype:void 0,rI=tI?tI.valueOf:void 0;function K4e(e){return rI?Object(rI.call(e)):{}}function lW(e,t){var r=t?sA(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Y4e="[object Boolean]",G4e="[object Date]",Z4e="[object Map]",J4e="[object Number]",Q4e="[object RegExp]",X4e="[object Set]",eRe="[object String]",tRe="[object Symbol]",rRe="[object ArrayBuffer]",nRe="[object DataView]",sRe="[object Float32Array]",iRe="[object Float64Array]",oRe="[object Int8Array]",aRe="[object Int16Array]",lRe="[object Int32Array]",cRe="[object Uint8Array]",uRe="[object Uint8ClampedArray]",dRe="[object Uint16Array]",hRe="[object Uint32Array]";function fRe(e,t,r){var n=e.constructor;switch(t){case rRe:return sA(e);case Y4e:case G4e:return new n(+e);case nRe:return W4e(e);case sRe:case iRe:case oRe:case aRe:case lRe:case cRe:case uRe:case dRe:case hRe:return lW(e,r);case Z4e:return new n;case J4e:case eRe:return new n(e);case Q4e:return H4e(e);case X4e:return new n;case tRe:return K4e(e)}}function cW(e){return typeof e.constructor=="function"&&!tA(e)?ROe(sW(e)):{}}var pRe="[object Map]";function mRe(e){return sa(e)&&oi(e)==pRe}var nI=oh&&oh.isMap,gRe=nI?rA(nI):mRe,yRe="[object Set]";function vRe(e){return sa(e)&&oi(e)==yRe}var sI=oh&&oh.isSet,bRe=sI?rA(sI):vRe,xRe=1,uW="[object Arguments]",wRe="[object Array]",_Re="[object Boolean]",jRe="[object Date]",kRe="[object Error]",dW="[object Function]",SRe="[object GeneratorFunction]",NRe="[object Map]",CRe="[object Number]",hW="[object Object]",ERe="[object RegExp]",TRe="[object Set]",ARe="[object String]",ORe="[object Symbol]",PRe="[object WeakMap]",RRe="[object ArrayBuffer]",DRe="[object DataView]",MRe="[object Float32Array]",IRe="[object Float64Array]",LRe="[object Int8Array]",FRe="[object Int16Array]",$Re="[object Int32Array]",zRe="[object Uint8Array]",URe="[object Uint8ClampedArray]",qRe="[object Uint16Array]",BRe="[object Uint32Array]",kt={};kt[uW]=kt[wRe]=kt[RRe]=kt[DRe]=kt[_Re]=kt[jRe]=kt[MRe]=kt[IRe]=kt[LRe]=kt[FRe]=kt[$Re]=kt[NRe]=kt[CRe]=kt[hW]=kt[ERe]=kt[TRe]=kt[ARe]=kt[ORe]=kt[zRe]=kt[URe]=kt[qRe]=kt[BRe]=!0;kt[kRe]=kt[dW]=kt[PRe]=!1;function Gy(e,t,r,n,s,i){var o,a=t&xRe;if(o!==void 0)return o;if(!Al(e))return e;var l=Yc(e);if(l)o=B4e(e);else{var c=oi(e),u=c==dW||c==SRe;if(tm(e))return aW(e,a);if(c==hW||c==uW||u&&!s)o=u?{}:cW(e);else{if(!kt[c])return s?e:{};o=fRe(e,c,a)}}i||(i=new Qi);var h=i.get(e);if(h)return h;i.set(e,o),bRe(e)?e.forEach(function(v){o.add(Gy(v,t,r,v,e,i))}):gRe(e)&&e.forEach(function(v,m){o.set(m,Gy(v,t,r,m,e,i))});var f=MS,p=l?void 0:f(e);return BOe(p||e,function(v,m){p&&(m=v,v=e[m]),Z9(o,m,Gy(v,t,r,m,e,i))}),o}var WRe=1,VRe=4;function jd(e){return Gy(e,WRe|VRe)}var HRe="__lodash_hash_undefined__";function KRe(e){return this.__data__.set(e,HRe),this}function YRe(e){return this.__data__.has(e)}function _b(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new du;++t<r;)this.add(e[t])}_b.prototype.add=_b.prototype.push=KRe;_b.prototype.has=YRe;function GRe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function ZRe(e,t){return e.has(t)}var JRe=1,QRe=2;function fW(e,t,r,n,s,i){var o=r&JRe,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var h=-1,f=!0,p=r&QRe?new _b:void 0;for(i.set(e,t),i.set(t,e);++h<a;){var v=e[h],m=t[h];if(n)var b=o?n(m,v,h,t,e,i):n(v,m,h,e,t,i);if(b!==void 0){if(b)continue;f=!1;break}if(p){if(!GRe(t,function(x,w){if(!ZRe(p,w)&&(v===x||s(v,x,r,n,i)))return p.push(w)})){f=!1;break}}else if(!(v===m||s(v,m,r,n,i))){f=!1;break}}return i.delete(e),i.delete(t),f}function XRe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}function eDe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var tDe=1,rDe=2,nDe="[object Boolean]",sDe="[object Date]",iDe="[object Error]",oDe="[object Map]",aDe="[object Number]",lDe="[object RegExp]",cDe="[object Set]",uDe="[object String]",dDe="[object Symbol]",hDe="[object ArrayBuffer]",fDe="[object DataView]",iI=ml?ml.prototype:void 0,rj=iI?iI.valueOf:void 0;function pDe(e,t,r,n,s,i,o){switch(r){case fDe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case hDe:return!(e.byteLength!=t.byteLength||!i(new wb(e),new wb(t)));case nDe:case sDe:case aDe:return Qm(+e,+t);case iDe:return e.name==t.name&&e.message==t.message;case lDe:case uDe:return e==t+"";case oDe:var a=XRe;case cDe:var l=n&tDe;if(a||(a=eDe),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=rDe,o.set(e,t);var u=fW(a(e),a(t),n,s,i,o);return o.delete(e),u;case dDe:if(rj)return rj.call(e)==rj.call(t)}return!1}var mDe=1,gDe=Object.prototype,yDe=gDe.hasOwnProperty;function vDe(e,t,r,n,s,i){var o=r&mDe,a=MS(e),l=a.length,c=MS(t),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in t:yDe.call(t,f)))return!1}var p=i.get(e),v=i.get(t);if(p&&v)return p==t&&v==e;var m=!0;i.set(e,t),i.set(t,e);for(var b=o;++h<l;){f=a[h];var x=e[f],w=t[f];if(n)var _=o?n(w,x,f,t,e,i):n(x,w,f,e,t,i);if(!(_===void 0?x===w||s(x,w,r,n,i):_)){m=!1;break}b||(b=f=="constructor")}if(m&&!b){var j=e.constructor,k=t.constructor;j!=k&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof k=="function"&&k instanceof k)&&(m=!1)}return i.delete(e),i.delete(t),m}var bDe=1,oI="[object Arguments]",aI="[object Array]",by="[object Object]",xDe=Object.prototype,lI=xDe.hasOwnProperty;function wDe(e,t,r,n,s,i){var o=Yc(e),a=Yc(t),l=o?aI:oi(e),c=a?aI:oi(t);l=l==oI?by:l,c=c==oI?by:c;var u=l==by,h=c==by,f=l==c;if(f&&tm(e)){if(!tm(t))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new Qi),o||nA(e)?fW(e,t,r,n,s,i):pDe(e,t,l,r,n,s,i);if(!(r&bDe)){var p=u&&lI.call(e,"__wrapped__"),v=h&&lI.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,b=v?t.value():t;return i||(i=new Qi),s(m,b,r,n,i)}}return f?(i||(i=new Qi),vDe(e,t,r,n,s,i)):!1}function pW(e,t,r,n,s){return e===t?!0:e==null||t==null||!sa(e)&&!sa(t)?e!==e&&t!==t:wDe(e,t,r,n,pW,s)}function _De(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),a=o.length;a--;){var l=o[++s];if(r(i[l],l,i)===!1)break}return t}}var jDe=_De();function $S(e,t,r){(r!==void 0&&!Qm(e[t],r)||r===void 0&&!(t in e))&&eA(e,t,r)}function kDe(e){return sa(e)&&vw(e)}function zS(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function SDe(e){return YOe(e,nW(e))}function NDe(e,t,r,n,s,i,o){var a=zS(e,r),l=zS(t,r),c=o.get(l);if(c){$S(e,r,c);return}var u=i?i(a,l,r+"",e,t,o):void 0,h=u===void 0;if(h){var f=Yc(l),p=!f&&tm(l),v=!f&&!p&&nA(l);u=l,f||p||v?Yc(a)?u=a:kDe(a)?u=MOe(a):p?(h=!1,u=aW(l,!0)):v?(h=!1,u=lW(l,!0)):u=[]:w4e(l)||DS(l)?(u=a,DS(a)?u=SDe(a):(!Al(a)||XT(a))&&(u=cW(l))):h=!1}h&&(o.set(l,u),s(u,l,n,i,o),o.delete(l)),$S(e,r,u)}function mW(e,t,r,n,s){e!==t&&jDe(t,function(i,o){if(s||(s=new Qi),Al(i))NDe(e,t,o,r,mW,n,s);else{var a=n?n(zS(e,o),i,o+"",e,t,s):void 0;a===void 0&&(a=i),$S(e,o,a)}},nW)}function Va(e,t){return pW(e,t)}var il=XOe(function(e,t,r){mW(e,t,r)}),Oe=(e=>(e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY",e))(Oe||{});class oo{constructor(t,r,n={}){this.attrName=t,this.keyName=r;const s=Oe.TYPE&Oe.ATTRIBUTE;this.scope=n.scope!=null?n.scope&Oe.LEVEL|s:Oe.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map(r=>r.name)}add(t,r){return this.canAdd(t,r)?(t.setAttribute(this.keyName,r),!0):!1}canAdd(t,r){return this.whitelist==null?!0:typeof r=="string"?this.whitelist.indexOf(r.replace(/["']/g,""))>-1:this.whitelist.indexOf(r)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const r=t.getAttribute(this.keyName);return this.canAdd(t,r)&&r?r:""}}class kd extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const gW=class US{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,r=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(r){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,r)}return null}create(t,r,n){const s=this.query(r);if(s==null)throw new kd(`Unable to create ${r} blot`);const i=s,o=r instanceof Node||r.nodeType===Node.TEXT_NODE?r:i.create(n),a=new i(t,o,n);return US.blots.set(a.domNode,a),a}find(t,r=!1){return US.find(t,r)}query(t,r=Oe.ANY){let n;return typeof t=="string"?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:typeof t=="number"?t&Oe.LEVEL&Oe.BLOCK?n=this.types.block:t&Oe.LEVEL&Oe.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(s=>(n=this.classes[s],!!n)),n=n||this.tags[t.tagName]),n==null?null:"scope"in n&&r&Oe.LEVEL&n.scope&&r&Oe.TYPE&n.scope?n:null}register(...t){return t.map(r=>{const n="blotName"in r,s="attrName"in r;if(!n&&!s)throw new kd("Invalid definition");if(n&&r.blotName==="abstract")throw new kd("Cannot register abstract class");const i=n?r.blotName:s?r.attrName:void 0;return this.types[i]=r,s?typeof r.keyName=="string"&&(this.attributes[r.keyName]=r):n&&(r.className&&(this.classes[r.className]=r),r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map(o=>o.toUpperCase()):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach(o=>{(this.tags[o]==null||r.className==null)&&(this.tags[o]=r)}))),r})}};gW.blots=new WeakMap;let ah=gW;function cI(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(r=>r.indexOf(`${t}-`)===0)}class CDe extends oo{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(r=>r.split("-").slice(0,-1).join("-"))}add(t,r){return this.canAdd(t,r)?(this.remove(t),t.classList.add(`${this.keyName}-${r}`),!0):!1}remove(t){cI(t,this.keyName).forEach(r=>{t.classList.remove(r)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const r=(cI(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,r)?r:""}}const Si=CDe;function nj(e){const t=e.split("-"),r=t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return t[0]+r}class EDe extends oo{static keys(t){return(t.getAttribute("style")||"").split(";").map(r=>r.split(":")[0].trim())}add(t,r){return this.canAdd(t,r)?(t.style[nj(this.keyName)]=r,!0):!1}remove(t){t.style[nj(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const r=t.style[nj(this.keyName)];return this.canAdd(t,r)?r:""}}const Ol=EDe;class TDe{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,r){r?t.add(this.domNode,r)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=ah.find(this.domNode);if(t==null)return;const r=oo.keys(this.domNode),n=Si.keys(this.domNode),s=Ol.keys(this.domNode);r.concat(n).concat(s).forEach(i=>{const o=t.scroll.query(i,Oe.ATTRIBUTE);o instanceof oo&&(this.attributes[o.attrName]=o)})}copy(t){Object.keys(this.attributes).forEach(r=>{const n=this.attributes[r].value(this.domNode);t.format(r,n)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(r=>{this.attributes[r].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,r)=>(t[r]=this.attributes[r].value(this.domNode),t),{})}}const ww=TDe,yW=class{constructor(e,t){this.scroll=e,this.domNode=t,ah.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new kd("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),ah.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,n){const s=this.isolate(e,t);if(this.scroll.query(r,Oe.BLOT)!=null&&n)s.wrap(r,n);else if(this.scroll.query(r,Oe.ATTRIBUTE)!=null){const i=this.scroll.create(this.statics.scope);s.wrap(i),i.format(r,n)}}insertAt(e,t,r){const n=r==null?this.scroll.create("text",t):this.scroll.create(t,r),s=this.split(e);this.parent.insertBefore(n,s||void 0)}isolate(e,t){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new kd(`Cannot wrap ${e}`);return r.appendChild(this),r}};yW.blotName="abstract";let vW=yW;const bW=class extends vW{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};bW.scope=Oe.INLINE_BLOT;let ADe=bW;const an=ADe;class ODe{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const r=t.slice(1);this.append(...r)}}at(t){const r=this.iterator();let n=r();for(;n&&t>0;)t-=1,n=r();return n}contains(t){const r=this.iterator();let n=r();for(;n;){if(n===t)return!0;n=r()}return!1}indexOf(t){const r=this.iterator();let n=r(),s=0;for(;n;){if(n===t)return s;s+=1,n=r()}return-1}insertBefore(t,r){t!=null&&(this.remove(t),t.next=r,r!=null?(t.prev=r.prev,r.prev!=null&&(r.prev.next=t),r.prev=t,r===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let r=0,n=this.head;for(;n!=null;){if(n===t)return r;r+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const r=t;return t!=null&&(t=t.next),r}}find(t,r=!1){const n=this.iterator();let s=n();for(;s;){const i=s.length();if(t<i||r&&t===i&&(s.next==null||s.next.length()!==0))return[s,t];t-=i,s=n()}return[null,0]}forEach(t){const r=this.iterator();let n=r();for(;n;)t(n),n=r()}forEachAt(t,r,n){if(r<=0)return;const[s,i]=this.find(t);let o=t-i;const a=this.iterator(s);let l=a();for(;l&&o<t+r;){const c=l.length();t>o?n(l,t-o,Math.min(r,o+c-t)):n(l,0,Math.min(c,t+r-o)),o+=c,l=a()}}map(t){return this.reduce((r,n)=>(r.push(t(n)),r),[])}reduce(t,r){const n=this.iterator();let s=n();for(;s;)r=t(r,s),s=n();return r}}function uI(e,t){const r=t.find(e);if(r)return r;try{return t.create(e)}catch{const n=t.create(Oe.INLINE);return Array.from(e.childNodes).forEach(s=>{n.domNode.appendChild(s)}),e.parentNode&&e.parentNode.replaceChild(n.domNode,e),n.attach(),n}}const xW=class Ia extends vW{constructor(t,r){super(t,r),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,Ia.uiClass&&this.uiNode.classList.add(Ia.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new ODe,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const r=uI(t,this.scroll);this.insertBefore(r,this.children.head||void 0)}catch(r){if(r instanceof kd)return;throw r}})}deleteAt(t,r){if(t===0&&r===this.length())return this.remove();this.children.forEachAt(t,r,(n,s,i)=>{n.deleteAt(s,i)})}descendant(t,r=0){const[n,s]=this.children.find(r);return t.blotName==null&&t(n)||t.blotName!=null&&n instanceof t?[n,s]:n instanceof Ia?n.descendant(t,s):[null,-1]}descendants(t,r=0,n=Number.MAX_VALUE){let s=[],i=n;return this.children.forEachAt(r,n,(o,a,l)=>{(t.blotName==null&&t(o)||t.blotName!=null&&o instanceof t)&&s.push(o),o instanceof Ia&&(s=s.concat(o.descendants(t,a,i))),i-=l}),s}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(r=>{t||this.statics.allowedChildren.some(n=>r instanceof n)||(r.statics.scope===Oe.BLOCK_BLOT?(r.next!=null&&this.splitAfter(r),r.prev!=null&&this.splitAfter(r.prev),r.parent.unwrap(),t=!0):r instanceof Ia?r.unwrap():r.remove())})}formatAt(t,r,n,s){this.children.forEachAt(t,r,(i,o,a)=>{i.formatAt(o,a,n,s)})}insertAt(t,r,n){const[s,i]=this.children.find(t);if(s)s.insertAt(i,r,n);else{const o=n==null?this.scroll.create("text",r):this.scroll.create(r,n);this.appendChild(o)}}insertBefore(t,r){t.parent!=null&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,r||null),t.parent=this,r!=null&&(n=r.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce((t,r)=>t+r.length(),0)}moveChildren(t,r){this.children.forEach(n=>{t.insertBefore(n,r)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const r=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(r)}else this.remove()}path(t,r=!1){const[n,s]=this.children.find(t,r),i=[[this,t]];return n instanceof Ia?i.concat(n.path(s,r)):(n!=null&&i.push([n,s]),i)}removeChild(t){this.children.remove(t)}replaceWith(t,r){const n=typeof t=="string"?this.scroll.create(t,r):t;return n instanceof Ia&&this.moveChildren(n),super.replaceWith(n)}split(t,r=!1){if(!r){if(t===0)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(s,i,o)=>{const a=s.split(i,r);a!=null&&n.appendChild(a)}),n}splitAfter(t){const r=this.clone();for(;t.next!=null;)r.appendChild(t.next);return this.parent&&this.parent.insertBefore(r,this.next||void 0),r}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,r){const n=[],s=[];t.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(n.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(i);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),n.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,o)=>i===o?0:i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let o=null;i.nextSibling!=null&&(o=this.scroll.find(i.nextSibling));const a=uI(i,this.scroll);(a.next!==o||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};xW.uiClass="";let PDe=xW;const hi=PDe;function RDe(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}const Ku=class Yu extends hi{static create(t){return super.create(t)}static formats(t,r){const n=r.query(Yu.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,r){super(t,r),this.attributes=new ww(this.domNode)}format(t,r){if(t===this.statics.blotName&&!r)this.children.forEach(n=>{n instanceof Yu||(n=n.wrap(Yu.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{const n=this.scroll.query(t,Oe.INLINE);if(n==null)return;n instanceof oo?this.attributes.attribute(n,r):r&&(t!==this.statics.blotName||this.formats()[t]!==r)&&this.replaceWith(t,r)}}formats(){const t=this.attributes.values(),r=this.statics.formats(this.domNode,this.scroll);return r!=null&&(t[this.statics.blotName]=r),t}formatAt(t,r,n,s){this.formats()[n]!=null||this.scroll.query(n,Oe.ATTRIBUTE)?this.isolate(t,r).format(n,s):super.formatAt(t,r,n,s)}optimize(t){super.optimize(t);const r=this.formats();if(Object.keys(r).length===0)return this.unwrap();const n=this.next;n instanceof Yu&&n.prev===this&&RDe(r,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,r){const n=super.replaceWith(t,r);return this.attributes.copy(n),n}update(t,r){super.update(t,r),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(t,r){const n=super.wrap(t,r);return n instanceof Yu&&this.attributes.move(n),n}};Ku.allowedChildren=[Ku,an],Ku.blotName="inline",Ku.scope=Oe.INLINE_BLOT,Ku.tagName="SPAN";let DDe=Ku;const iA=DDe,Gu=class qS extends hi{static create(t){return super.create(t)}static formats(t,r){const n=r.query(qS.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,r){super(t,r),this.attributes=new ww(this.domNode)}format(t,r){const n=this.scroll.query(t,Oe.BLOCK);n!=null&&(n instanceof oo?this.attributes.attribute(n,r):t===this.statics.blotName&&!r?this.replaceWith(qS.blotName):r&&(t!==this.statics.blotName||this.formats()[t]!==r)&&this.replaceWith(t,r))}formats(){const t=this.attributes.values(),r=this.statics.formats(this.domNode,this.scroll);return r!=null&&(t[this.statics.blotName]=r),t}formatAt(t,r,n,s){this.scroll.query(n,Oe.BLOCK)!=null?this.format(n,s):super.formatAt(t,r,n,s)}insertAt(t,r,n){if(n==null||this.scroll.query(r,Oe.INLINE)!=null)super.insertAt(t,r,n);else{const s=this.split(t);if(s!=null){const i=this.scroll.create(r,n);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,r){const n=super.replaceWith(t,r);return this.attributes.copy(n),n}update(t,r){super.update(t,r),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};Gu.blotName="block",Gu.scope=Oe.BLOCK_BLOT,Gu.tagName="P",Gu.allowedChildren=[iA,Gu,an];let MDe=Gu;const sm=MDe,BS=class extends hi{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,n){super.formatAt(e,t,r,n),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};BS.blotName="container",BS.scope=Oe.BLOCK_BLOT;let IDe=BS;const _w=IDe;class LDe extends an{static formats(t,r){}format(t,r){super.formatAt(0,this.length(),t,r)}formatAt(t,r,n,s){t===0&&r===this.length()?this.format(n,s):super.formatAt(t,r,n,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const as=LDe,FDe={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},$De=100,Zu=class extends hi{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,FDe),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=Oe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,n){this.update(),super.formatAt(e,t,r,n)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let n=Array.from(this.observer.takeRecords());for(;n.length>0;)e.push(n.pop());const s=(a,l=!0)=>{a==null||a===this||a.domNode.parentNode!=null&&(r.has(a.domNode)||r.set(a.domNode,[]),l&&s(a.parent))},i=a=>{r.has(a.domNode)&&(a instanceof hi&&a.children.forEach(i),r.delete(a.domNode),a.optimize(t))};let o=e;for(let a=0;o.length>0;a+=1){if(a>=$De)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(l=>{const c=this.find(l.target,!0);c!=null&&(c.domNode===l.target&&(l.type==="childList"?(s(this.find(l.previousSibling,!1)),Array.from(l.addedNodes).forEach(u=>{const h=this.find(u,!1);s(h,!1),h instanceof hi&&h.children.forEach(f=>{s(f,!1)})})):l.type==="attributes"&&s(c.prev)),s(c))}),this.children.forEach(i),o=Array.from(this.observer.takeRecords()),n=o.slice();n.length>0;)e.push(n.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(n=>{const s=this.find(n.target,!0);return s==null?null:r.has(s.domNode)?(r.get(s.domNode).push(n),null):(r.set(s.domNode,[n]),s)}).forEach(n=>{n!=null&&n!==this&&r.has(n.domNode)&&n.update(r.get(n.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};Zu.blotName="scroll",Zu.defaultChild=sm,Zu.allowedChildren=[sm,_w],Zu.scope=Oe.BLOCK_BLOT,Zu.tagName="DIV";let zDe=Zu;const oA=zDe,WS=class wW extends an{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,r){super(t,r),this.text=this.statics.value(this.domNode)}deleteAt(t,r){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+r)}index(t,r){return this.domNode===t?r:-1}insertAt(t,r,n){n==null?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,r,n)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof wW&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,r=!1){return[this.domNode,t]}split(t,r=!1){if(!r){if(t===0)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,r){t.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};WS.blotName="text",WS.scope=Oe.INLINE_BLOT;let UDe=WS;const jb=UDe,qDe=Object.freeze(Object.defineProperty({__proto__:null,Attributor:oo,AttributorStore:ww,BlockBlot:sm,ClassAttributor:Si,ContainerBlot:_w,EmbedBlot:as,InlineBlot:iA,LeafBlot:an,ParentBlot:hi,Registry:ah,Scope:Oe,ScrollBlot:oA,StyleAttributor:Ol,TextBlot:jb},Symbol.toStringTag,{value:"Module"}));var VS={exports:{}},ts=-1,kn=1,Nr=0;function im(e,t,r,n,s){if(e===t)return e?[[Nr,e]]:[];if(r!=null){var i=JDe(e,t,r);if(i)return i}var o=aA(e,t),a=e.substring(0,o);e=e.substring(o),t=t.substring(o),o=jw(e,t);var l=e.substring(e.length-o);e=e.substring(0,e.length-o),t=t.substring(0,t.length-o);var c=BDe(e,t);return a&&c.unshift([Nr,a]),l&&c.push([Nr,l]),lA(c,s),n&&HDe(c),c}function BDe(e,t){var r;if(!e)return[[kn,t]];if(!t)return[[ts,e]];var n=e.length>t.length?e:t,s=e.length>t.length?t:e,i=n.indexOf(s);if(i!==-1)return r=[[kn,n.substring(0,i)],[Nr,s],[kn,n.substring(i+s.length)]],e.length>t.length&&(r[0][0]=r[2][0]=ts),r;if(s.length===1)return[[ts,e],[kn,t]];var o=VDe(e,t);if(o){var a=o[0],l=o[1],c=o[2],u=o[3],h=o[4],f=im(a,c),p=im(l,u);return f.concat([[Nr,h]],p)}return WDe(e,t)}function WDe(e,t){for(var r=e.length,n=t.length,s=Math.ceil((r+n)/2),i=s,o=2*s,a=new Array(o),l=new Array(o),c=0;c<o;c++)a[c]=-1,l[c]=-1;a[i+1]=0,l[i+1]=0;for(var u=r-n,h=u%2!==0,f=0,p=0,v=0,m=0,b=0;b<s;b++){for(var x=-b+f;x<=b-p;x+=2){var w=i+x,_;x===-b||x!==b&&a[w-1]<a[w+1]?_=a[w+1]:_=a[w-1]+1;for(var j=_-x;_<r&&j<n&&e.charAt(_)===t.charAt(j);)_++,j++;if(a[w]=_,_>r)p+=2;else if(j>n)f+=2;else if(h){var k=i+u-x;if(k>=0&&k<o&&l[k]!==-1){var S=r-l[k];if(_>=S)return dI(e,t,_,j)}}}for(var E=-b+v;E<=b-m;E+=2){var k=i+E,S;E===-b||E!==b&&l[k-1]<l[k+1]?S=l[k+1]:S=l[k-1]+1;for(var C=S-E;S<r&&C<n&&e.charAt(r-S-1)===t.charAt(n-C-1);)S++,C++;if(l[k]=S,S>r)m+=2;else if(C>n)v+=2;else if(!h){var w=i+u-E;if(w>=0&&w<o&&a[w]!==-1){var _=a[w],j=i+_-w;if(S=r-S,_>=S)return dI(e,t,_,j)}}}}return[[ts,e],[kn,t]]}function dI(e,t,r,n){var s=e.substring(0,r),i=t.substring(0,n),o=e.substring(r),a=t.substring(n),l=im(s,i),c=im(o,a);return l.concat(c)}function aA(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,i=0;r<s;)e.substring(i,s)==t.substring(i,s)?(r=s,i=r):n=s,s=Math.floor((n-r)/2+r);return _W(e.charCodeAt(s-1))&&s--,s}function hI(e,t){var r=e.length,n=t.length;if(r==0||n==0)return 0;r>n?e=e.substring(r-n):r<n&&(t=t.substring(0,r));var s=Math.min(r,n);if(e==t)return s;for(var i=0,o=1;;){var a=e.substring(s-o),l=t.indexOf(a);if(l==-1)return i;o+=l,(l==0||e.substring(s-o)==t.substring(0,o))&&(i=o,o++)}}function jw(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,i=0;r<s;)e.substring(e.length-s,e.length-i)==t.substring(t.length-s,t.length-i)?(r=s,i=r):n=s,s=Math.floor((n-r)/2+r);return jW(e.charCodeAt(e.length-s))&&s--,s}function VDe(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||n.length*2<r.length)return null;function s(p,v,m){for(var b=p.substring(m,m+Math.floor(p.length/4)),x=-1,w="",_,j,k,S;(x=v.indexOf(b,x+1))!==-1;){var E=aA(p.substring(m),v.substring(x)),C=jw(p.substring(0,m),v.substring(0,x));w.length<C+E&&(w=v.substring(x-C,x)+v.substring(x,x+E),_=p.substring(0,m-C),j=p.substring(m+E),k=v.substring(0,x-C),S=v.substring(x+E))}return w.length*2>=p.length?[_,j,k,S,w]:null}var i=s(r,n,Math.ceil(r.length/4)),o=s(r,n,Math.ceil(r.length/2)),a;if(!i&&!o)return null;o?i?a=i[4].length>o[4].length?i:o:a=o:a=i;var l,c,u,h;e.length>t.length?(l=a[0],c=a[1],u=a[2],h=a[3]):(u=a[0],h=a[1],l=a[2],c=a[3]);var f=a[4];return[l,c,u,h,f]}function HDe(e){for(var t=!1,r=[],n=0,s=null,i=0,o=0,a=0,l=0,c=0;i<e.length;)e[i][0]==Nr?(r[n++]=i,o=l,a=c,l=0,c=0,s=e[i][1]):(e[i][0]==kn?l+=e[i][1].length:c+=e[i][1].length,s&&s.length<=Math.max(o,a)&&s.length<=Math.max(l,c)&&(e.splice(r[n-1],0,[ts,s]),e[r[n-1]+1][0]=kn,n--,n--,i=n>0?r[n-1]:-1,o=0,a=0,l=0,c=0,s=null,t=!0)),i++;for(t&&lA(e),GDe(e),i=1;i<e.length;){if(e[i-1][0]==ts&&e[i][0]==kn){var u=e[i-1][1],h=e[i][1],f=hI(u,h),p=hI(h,u);f>=p?(f>=u.length/2||f>=h.length/2)&&(e.splice(i,0,[Nr,h.substring(0,f)]),e[i-1][1]=u.substring(0,u.length-f),e[i+1][1]=h.substring(f),i++):(p>=u.length/2||p>=h.length/2)&&(e.splice(i,0,[Nr,u.substring(0,p)]),e[i-1][0]=kn,e[i-1][1]=h.substring(0,h.length-p),e[i+1][0]=ts,e[i+1][1]=u.substring(p),i++),i++}i++}}var fI=/[^a-zA-Z0-9]/,pI=/\s/,mI=/[\r\n]/,KDe=/\n\r?\n$/,YDe=/^\r?\n\r?\n/;function GDe(e){function t(p,v){if(!p||!v)return 6;var m=p.charAt(p.length-1),b=v.charAt(0),x=m.match(fI),w=b.match(fI),_=x&&m.match(pI),j=w&&b.match(pI),k=_&&m.match(mI),S=j&&b.match(mI),E=k&&p.match(KDe),C=S&&v.match(YDe);return E||C?5:k||S?4:x&&!_&&j?3:_||j?2:x||w?1:0}for(var r=1;r<e.length-1;){if(e[r-1][0]==Nr&&e[r+1][0]==Nr){var n=e[r-1][1],s=e[r][1],i=e[r+1][1],o=jw(n,s);if(o){var a=s.substring(s.length-o);n=n.substring(0,n.length-o),s=a+s.substring(0,s.length-o),i=a+i}for(var l=n,c=s,u=i,h=t(n,s)+t(s,i);s.charAt(0)===i.charAt(0);){n+=s.charAt(0),s=s.substring(1)+i.charAt(0),i=i.substring(1);var f=t(n,s)+t(s,i);f>=h&&(h=f,l=n,c=s,u=i)}e[r-1][1]!=l&&(l?e[r-1][1]=l:(e.splice(r-1,1),r--),e[r][1]=c,u?e[r+1][1]=u:(e.splice(r+1,1),r--))}r++}}function lA(e,t){e.push([Nr,""]);for(var r=0,n=0,s=0,i="",o="",a;r<e.length;){if(r<e.length-1&&!e[r][1]){e.splice(r,1);continue}switch(e[r][0]){case kn:s++,o+=e[r][1],r++;break;case ts:n++,i+=e[r][1],r++;break;case Nr:var l=r-s-n-1;if(t){if(l>=0&&SW(e[l][1])){var c=e[l][1].slice(-1);if(e[l][1]=e[l][1].slice(0,-1),i=c+i,o=c+o,!e[l][1]){e.splice(l,1),r--;var u=l-1;e[u]&&e[u][0]===kn&&(s++,o=e[u][1]+o,u--),e[u]&&e[u][0]===ts&&(n++,i=e[u][1]+i,u--),l=u}}if(kW(e[r][1])){var c=e[r][1].charAt(0);e[r][1]=e[r][1].slice(1),i+=c,o+=c}}if(r<e.length-1&&!e[r][1]){e.splice(r,1);break}if(i.length>0||o.length>0){i.length>0&&o.length>0&&(a=aA(o,i),a!==0&&(l>=0?e[l][1]+=o.substring(0,a):(e.splice(0,0,[Nr,o.substring(0,a)]),r++),o=o.substring(a),i=i.substring(a)),a=jw(o,i),a!==0&&(e[r][1]=o.substring(o.length-a)+e[r][1],o=o.substring(0,o.length-a),i=i.substring(0,i.length-a)));var h=s+n;i.length===0&&o.length===0?(e.splice(r-h,h),r=r-h):i.length===0?(e.splice(r-h,h,[kn,o]),r=r-h+1):o.length===0?(e.splice(r-h,h,[ts,i]),r=r-h+1):(e.splice(r-h,h,[ts,i],[kn,o]),r=r-h+2)}r!==0&&e[r-1][0]===Nr?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,s=0,n=0,i="",o="";break}}e[e.length-1][1]===""&&e.pop();var f=!1;for(r=1;r<e.length-1;)e[r-1][0]===Nr&&e[r+1][0]===Nr&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)===e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),f=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),f=!0)),r++;f&&lA(e,t)}function _W(e){return e>=55296&&e<=56319}function jW(e){return e>=56320&&e<=57343}function kW(e){return jW(e.charCodeAt(0))}function SW(e){return _W(e.charCodeAt(e.length-1))}function ZDe(e){for(var t=[],r=0;r<e.length;r++)e[r][1].length>0&&t.push(e[r]);return t}function sj(e,t,r,n){return SW(e)||kW(n)?null:ZDe([[Nr,e],[ts,t],[kn,r],[Nr,n]])}function JDe(e,t,r){var n=typeof r=="number"?{index:r,length:0}:r.oldRange,s=typeof r=="number"?null:r.newRange,i=e.length,o=t.length;if(n.length===0&&(s===null||s.length===0)){var a=n.index,l=e.slice(0,a),c=e.slice(a),u=s?s.index:null;e:{var h=a+o-i;if(u!==null&&u!==h||h<0||h>o)break e;var f=t.slice(0,h),p=t.slice(h);if(p!==c)break e;var v=Math.min(a,h),m=l.slice(0,v),b=f.slice(0,v);if(m!==b)break e;var x=l.slice(v),w=f.slice(v);return sj(m,x,w,c)}e:{if(u!==null&&u!==a)break e;var _=a,f=t.slice(0,_),p=t.slice(_);if(f!==l)break e;var j=Math.min(i-_,o-_),k=c.slice(c.length-j),S=p.slice(p.length-j);if(k!==S)break e;var x=c.slice(0,c.length-j),w=p.slice(0,p.length-j);return sj(l,x,w,k)}}if(n.length>0&&s&&s.length===0)e:{var m=e.slice(0,n.index),k=e.slice(n.index+n.length),v=m.length,j=k.length;if(o<v+j)break e;var b=t.slice(0,v),S=t.slice(o-j);if(m!==b||k!==S)break e;var x=e.slice(v,i-j),w=t.slice(v,o-j);return sj(m,x,w,k)}return null}function kw(e,t,r,n){return im(e,t,r,n,!0)}kw.INSERT=kn;kw.DELETE=ts;kw.EQUAL=Nr;var QDe=kw,kb={exports:{}};kb.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",h="[object GeneratorFunction]",f="[object Map]",p="[object Number]",v="[object Object]",m="[object Promise]",b="[object RegExp]",x="[object Set]",w="[object String]",_="[object Symbol]",j="[object WeakMap]",k="[object ArrayBuffer]",S="[object DataView]",E="[object Float32Array]",C="[object Float64Array]",T="[object Int8Array]",O="[object Int16Array]",P="[object Int32Array]",D="[object Uint8Array]",R="[object Uint8ClampedArray]",$="[object Uint16Array]",F="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,q=/\w*$/,K=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,L={};L[i]=L[o]=L[k]=L[S]=L[a]=L[l]=L[E]=L[C]=L[T]=L[O]=L[P]=L[f]=L[p]=L[v]=L[b]=L[x]=L[w]=L[_]=L[D]=L[R]=L[$]=L[F]=!0,L[c]=L[u]=L[j]=!1;var X=typeof dr=="object"&&dr&&dr.Object===Object&&dr,te=typeof self=="object"&&self&&self.Object===Object&&self,ve=X||te||Function("return this")(),H=t&&!t.nodeType&&t,G=H&&!0&&e&&!e.nodeType&&e,he=G&&G.exports===H;function fe(N,A){return N.set(A[0],A[1]),N}function _e(N,A){return N.add(A),N}function W(N,A){for(var I=-1,ee=N?N.length:0;++I<ee&&A(N[I],I,N)!==!1;);return N}function J(N,A){for(var I=-1,ee=A.length,Be=N.length;++I<ee;)N[Be+I]=A[I];return N}function ae(N,A,I,ee){for(var Be=-1,Le=N?N.length:0;++Be<Le;)I=A(I,N[Be],Be,N);return I}function z(N,A){for(var I=-1,ee=Array(N);++I<N;)ee[I]=A(I);return ee}function ke(N,A){return N==null?void 0:N[A]}function Pe(N){var A=!1;if(N!=null&&typeof N.toString!="function")try{A=!!(N+"")}catch{}return A}function Ge(N){var A=-1,I=Array(N.size);return N.forEach(function(ee,Be){I[++A]=[Be,ee]}),I}function Ye(N,A){return function(I){return N(A(I))}}function ft(N){var A=-1,I=Array(N.size);return N.forEach(function(ee){I[++A]=ee}),I}var Vt=Array.prototype,M=Function.prototype,B=Object.prototype,Q=ve["__core-js_shared__"],me=function(){var N=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),de=M.toString,ce=B.hasOwnProperty,we=B.toString,Xe=RegExp("^"+de.call(ce).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=he?ve.Buffer:void 0,vt=ve.Symbol,Zr=ve.Uint8Array,$t=Ye(Object.getPrototypeOf,Object),zs=Object.create,Ti=B.propertyIsEnumerable,mo=Vt.splice,Ai=Object.getOwnPropertySymbols,Oi=Ue?Ue.isBuffer:void 0,go=Ye(Object.keys,Object),Jr=Vs(ve,"DataView"),ls=Vs(ve,"Map"),fn=Vs(ve,"Promise"),Us=Vs(ve,"Set"),Il=Vs(ve,"WeakMap"),qs=Vs(Object,"create"),Ll=pn(Jr),Bs=pn(ls),Fl=pn(fn),yo=pn(Us),$l=pn(Il),cs=vt?vt.prototype:void 0,gu=cs?cs.valueOf:void 0;function Ws(N){var A=-1,I=N?N.length:0;for(this.clear();++A<I;){var ee=N[A];this.set(ee[0],ee[1])}}function Kh(){this.__data__=qs?qs(null):{}}function Yh(N){return this.has(N)&&delete this.__data__[N]}function ba(N){var A=this.__data__;if(qs){var I=A[N];return I===n?void 0:I}return ce.call(A,N)?A[N]:void 0}function xa(N){var A=this.__data__;return qs?A[N]!==void 0:ce.call(A,N)}function zl(N,A){var I=this.__data__;return I[N]=qs&&A===void 0?n:A,this}Ws.prototype.clear=Kh,Ws.prototype.delete=Yh,Ws.prototype.get=ba,Ws.prototype.has=xa,Ws.prototype.set=zl;function re(N){var A=-1,I=N?N.length:0;for(this.clear();++A<I;){var ee=N[A];this.set(ee[0],ee[1])}}function De(){this.__data__=[]}function et(N){var A=this.__data__,I=vu(A,N);if(I<0)return!1;var ee=A.length-1;return I==ee?A.pop():mo.call(A,I,1),!0}function ar(N){var A=this.__data__,I=vu(A,N);return I<0?void 0:A[I][1]}function Cn(N){return vu(this.__data__,N)>-1}function En(N,A){var I=this.__data__,ee=vu(I,N);return ee<0?I.push([N,A]):I[ee][1]=A,this}re.prototype.clear=De,re.prototype.delete=et,re.prototype.get=ar,re.prototype.has=Cn,re.prototype.set=En;function Ot(N){var A=-1,I=N?N.length:0;for(this.clear();++A<I;){var ee=N[A];this.set(ee[0],ee[1])}}function Zw(){this.__data__={hash:new Ws,map:new(ls||re),string:new Ws}}function Jw(N){return ql(this,N).delete(N)}function Qw(N){return ql(this,N).get(N)}function Xw(N){return ql(this,N).has(N)}function e0(N,A){return ql(this,N).set(N,A),this}Ot.prototype.clear=Zw,Ot.prototype.delete=Jw,Ot.prototype.get=Qw,Ot.prototype.has=Xw,Ot.prototype.set=e0;function Tn(N){this.__data__=new re(N)}function t0(){this.__data__=new re}function r0(N){return this.__data__.delete(N)}function n0(N){return this.__data__.get(N)}function s0(N){return this.__data__.has(N)}function i0(N,A){var I=this.__data__;if(I instanceof re){var ee=I.__data__;if(!ls||ee.length<r-1)return ee.push([N,A]),this;I=this.__data__=new Ot(ee)}return I.set(N,A),this}Tn.prototype.clear=t0,Tn.prototype.delete=r0,Tn.prototype.get=n0,Tn.prototype.has=s0,Tn.prototype.set=i0;function yu(N,A){var I=Qh(N)||xu(N)?z(N.length,String):[],ee=I.length,Be=!!ee;for(var Le in N)ce.call(N,Le)&&!(Be&&(Le=="length"||b0(Le,ee)))&&I.push(Le);return I}function mg(N,A,I){var ee=N[A];(!(ce.call(N,A)&&xg(ee,I))||I===void 0&&!(A in N))&&(N[A]=I)}function vu(N,A){for(var I=N.length;I--;)if(xg(N[I][0],A))return I;return-1}function Pi(N,A){return N&&Jh(A,ef(A),N)}function Gh(N,A,I,ee,Be,Le,at){var it;if(ee&&(it=Le?ee(N,Be,Le,at):ee(N)),it!==void 0)return it;if(!Di(N))return N;var lr=Qh(N);if(lr){if(it=y0(N),!A)return p0(N,it)}else{var dt=bo(N),Qr=dt==u||dt==h;if(wg(N))return bu(N,A);if(dt==v||dt==i||Qr&&!Le){if(Pe(N))return Le?N:{};if(it=Ri(Qr?{}:N),!A)return m0(N,Pi(it,N))}else{if(!L[dt])return Le?N:{};it=v0(N,dt,Gh,A)}}at||(at=new Tn);var An=at.get(N);if(An)return An;if(at.set(N,it),!lr)var br=I?g0(N):ef(N);return W(br||N,function(Xr,qr){br&&(qr=Xr,Xr=N[qr]),mg(it,qr,Gh(Xr,A,I,ee,qr,N,at))}),it}function o0(N){return Di(N)?zs(N):{}}function a0(N,A,I){var ee=A(N);return Qh(N)?ee:J(ee,I(N))}function l0(N){return we.call(N)}function c0(N){if(!Di(N)||w0(N))return!1;var A=Xh(N)||Pe(N)?Xe:K;return A.test(pn(N))}function u0(N){if(!vg(N))return go(N);var A=[];for(var I in Object(N))ce.call(N,I)&&I!="constructor"&&A.push(I);return A}function bu(N,A){if(A)return N.slice();var I=new N.constructor(N.length);return N.copy(I),I}function Zh(N){var A=new N.constructor(N.byteLength);return new Zr(A).set(new Zr(N)),A}function Ul(N,A){var I=A?Zh(N.buffer):N.buffer;return new N.constructor(I,N.byteOffset,N.byteLength)}function gg(N,A,I){var ee=A?I(Ge(N),!0):Ge(N);return ae(ee,fe,new N.constructor)}function yg(N){var A=new N.constructor(N.source,q.exec(N));return A.lastIndex=N.lastIndex,A}function d0(N,A,I){var ee=A?I(ft(N),!0):ft(N);return ae(ee,_e,new N.constructor)}function h0(N){return gu?Object(gu.call(N)):{}}function f0(N,A){var I=A?Zh(N.buffer):N.buffer;return new N.constructor(I,N.byteOffset,N.length)}function p0(N,A){var I=-1,ee=N.length;for(A||(A=Array(ee));++I<ee;)A[I]=N[I];return A}function Jh(N,A,I,ee){I||(I={});for(var Be=-1,Le=A.length;++Be<Le;){var at=A[Be],it=void 0;mg(I,at,it===void 0?N[at]:it)}return I}function m0(N,A){return Jh(N,vo(N),A)}function g0(N){return a0(N,ef,vo)}function ql(N,A){var I=N.__data__;return x0(A)?I[typeof A=="string"?"string":"hash"]:I.map}function Vs(N,A){var I=ke(N,A);return c0(I)?I:void 0}var vo=Ai?Ye(Ai,Object):j0,bo=l0;(Jr&&bo(new Jr(new ArrayBuffer(1)))!=S||ls&&bo(new ls)!=f||fn&&bo(fn.resolve())!=m||Us&&bo(new Us)!=x||Il&&bo(new Il)!=j)&&(bo=function(N){var A=we.call(N),I=A==v?N.constructor:void 0,ee=I?pn(I):void 0;if(ee)switch(ee){case Ll:return S;case Bs:return f;case Fl:return m;case yo:return x;case $l:return j}return A});function y0(N){var A=N.length,I=N.constructor(A);return A&&typeof N[0]=="string"&&ce.call(N,"index")&&(I.index=N.index,I.input=N.input),I}function Ri(N){return typeof N.constructor=="function"&&!vg(N)?o0($t(N)):{}}function v0(N,A,I,ee){var Be=N.constructor;switch(A){case k:return Zh(N);case a:case l:return new Be(+N);case S:return Ul(N,ee);case E:case C:case T:case O:case P:case D:case R:case $:case F:return f0(N,ee);case f:return gg(N,ee,I);case p:case w:return new Be(N);case b:return yg(N);case x:return d0(N,ee,I);case _:return h0(N)}}function b0(N,A){return A=A??s,!!A&&(typeof N=="number"||Y.test(N))&&N>-1&&N%1==0&&N<A}function x0(N){var A=typeof N;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?N!=="__proto__":N===null}function w0(N){return!!me&&me in N}function vg(N){var A=N&&N.constructor,I=typeof A=="function"&&A.prototype||B;return N===I}function pn(N){if(N!=null){try{return de.call(N)}catch{}try{return N+""}catch{}}return""}function bg(N){return Gh(N,!0,!0)}function xg(N,A){return N===A||N!==N&&A!==A}function xu(N){return _0(N)&&ce.call(N,"callee")&&(!Ti.call(N,"callee")||we.call(N)==i)}var Qh=Array.isArray;function wu(N){return N!=null&&_g(N.length)&&!Xh(N)}function _0(N){return jg(N)&&wu(N)}var wg=Oi||k0;function Xh(N){var A=Di(N)?we.call(N):"";return A==u||A==h}function _g(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=s}function Di(N){var A=typeof N;return!!N&&(A=="object"||A=="function")}function jg(N){return!!N&&typeof N=="object"}function ef(N){return wu(N)?yu(N):u0(N)}function j0(){return[]}function k0(){return!1}e.exports=bg})(kb,kb.exports);var NW=kb.exports,Sb={exports:{}};Sb.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",s=1,i=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",f="[object Error]",p="[object Function]",v="[object GeneratorFunction]",m="[object Map]",b="[object Number]",x="[object Null]",w="[object Object]",_="[object Promise]",j="[object Proxy]",k="[object RegExp]",S="[object Set]",E="[object String]",C="[object Symbol]",T="[object Undefined]",O="[object WeakMap]",P="[object ArrayBuffer]",D="[object DataView]",R="[object Float32Array]",$="[object Float64Array]",F="[object Int8Array]",V="[object Int16Array]",q="[object Int32Array]",K="[object Uint8Array]",Y="[object Uint8ClampedArray]",L="[object Uint16Array]",X="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,ve=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,G={};G[R]=G[$]=G[F]=G[V]=G[q]=G[K]=G[Y]=G[L]=G[X]=!0,G[a]=G[l]=G[P]=G[u]=G[D]=G[h]=G[f]=G[p]=G[m]=G[b]=G[w]=G[k]=G[S]=G[E]=G[O]=!1;var he=typeof dr=="object"&&dr&&dr.Object===Object&&dr,fe=typeof self=="object"&&self&&self.Object===Object&&self,_e=he||fe||Function("return this")(),W=t&&!t.nodeType&&t,J=W&&!0&&e&&!e.nodeType&&e,ae=J&&J.exports===W,z=ae&&he.process,ke=function(){try{return z&&z.binding&&z.binding("util")}catch{}}(),Pe=ke&&ke.isTypedArray;function Ge(N,A){for(var I=-1,ee=N==null?0:N.length,Be=0,Le=[];++I<ee;){var at=N[I];A(at,I,N)&&(Le[Be++]=at)}return Le}function Ye(N,A){for(var I=-1,ee=A.length,Be=N.length;++I<ee;)N[Be+I]=A[I];return N}function ft(N,A){for(var I=-1,ee=N==null?0:N.length;++I<ee;)if(A(N[I],I,N))return!0;return!1}function Vt(N,A){for(var I=-1,ee=Array(N);++I<N;)ee[I]=A(I);return ee}function M(N){return function(A){return N(A)}}function B(N,A){return N.has(A)}function Q(N,A){return N==null?void 0:N[A]}function me(N){var A=-1,I=Array(N.size);return N.forEach(function(ee,Be){I[++A]=[Be,ee]}),I}function de(N,A){return function(I){return N(A(I))}}function ce(N){var A=-1,I=Array(N.size);return N.forEach(function(ee){I[++A]=ee}),I}var we=Array.prototype,Xe=Function.prototype,Ue=Object.prototype,vt=_e["__core-js_shared__"],Zr=Xe.toString,$t=Ue.hasOwnProperty,zs=function(){var N=/[^.]+$/.exec(vt&&vt.keys&&vt.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),Ti=Ue.toString,mo=RegExp("^"+Zr.call($t).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ai=ae?_e.Buffer:void 0,Oi=_e.Symbol,go=_e.Uint8Array,Jr=Ue.propertyIsEnumerable,ls=we.splice,fn=Oi?Oi.toStringTag:void 0,Us=Object.getOwnPropertySymbols,Il=Ai?Ai.isBuffer:void 0,qs=de(Object.keys,Object),Ll=vo(_e,"DataView"),Bs=vo(_e,"Map"),Fl=vo(_e,"Promise"),yo=vo(_e,"Set"),$l=vo(_e,"WeakMap"),cs=vo(Object,"create"),gu=pn(Ll),Ws=pn(Bs),Kh=pn(Fl),Yh=pn(yo),ba=pn($l),xa=Oi?Oi.prototype:void 0,zl=xa?xa.valueOf:void 0;function re(N){var A=-1,I=N==null?0:N.length;for(this.clear();++A<I;){var ee=N[A];this.set(ee[0],ee[1])}}function De(){this.__data__=cs?cs(null):{},this.size=0}function et(N){var A=this.has(N)&&delete this.__data__[N];return this.size-=A?1:0,A}function ar(N){var A=this.__data__;if(cs){var I=A[N];return I===n?void 0:I}return $t.call(A,N)?A[N]:void 0}function Cn(N){var A=this.__data__;return cs?A[N]!==void 0:$t.call(A,N)}function En(N,A){var I=this.__data__;return this.size+=this.has(N)?0:1,I[N]=cs&&A===void 0?n:A,this}re.prototype.clear=De,re.prototype.delete=et,re.prototype.get=ar,re.prototype.has=Cn,re.prototype.set=En;function Ot(N){var A=-1,I=N==null?0:N.length;for(this.clear();++A<I;){var ee=N[A];this.set(ee[0],ee[1])}}function Zw(){this.__data__=[],this.size=0}function Jw(N){var A=this.__data__,I=bu(A,N);if(I<0)return!1;var ee=A.length-1;return I==ee?A.pop():ls.call(A,I,1),--this.size,!0}function Qw(N){var A=this.__data__,I=bu(A,N);return I<0?void 0:A[I][1]}function Xw(N){return bu(this.__data__,N)>-1}function e0(N,A){var I=this.__data__,ee=bu(I,N);return ee<0?(++this.size,I.push([N,A])):I[ee][1]=A,this}Ot.prototype.clear=Zw,Ot.prototype.delete=Jw,Ot.prototype.get=Qw,Ot.prototype.has=Xw,Ot.prototype.set=e0;function Tn(N){var A=-1,I=N==null?0:N.length;for(this.clear();++A<I;){var ee=N[A];this.set(ee[0],ee[1])}}function t0(){this.size=0,this.__data__={hash:new re,map:new(Bs||Ot),string:new re}}function r0(N){var A=Vs(this,N).delete(N);return this.size-=A?1:0,A}function n0(N){return Vs(this,N).get(N)}function s0(N){return Vs(this,N).has(N)}function i0(N,A){var I=Vs(this,N),ee=I.size;return I.set(N,A),this.size+=I.size==ee?0:1,this}Tn.prototype.clear=t0,Tn.prototype.delete=r0,Tn.prototype.get=n0,Tn.prototype.has=s0,Tn.prototype.set=i0;function yu(N){var A=-1,I=N==null?0:N.length;for(this.__data__=new Tn;++A<I;)this.add(N[A])}function mg(N){return this.__data__.set(N,n),this}function vu(N){return this.__data__.has(N)}yu.prototype.add=yu.prototype.push=mg,yu.prototype.has=vu;function Pi(N){var A=this.__data__=new Ot(N);this.size=A.size}function Gh(){this.__data__=new Ot,this.size=0}function o0(N){var A=this.__data__,I=A.delete(N);return this.size=A.size,I}function a0(N){return this.__data__.get(N)}function l0(N){return this.__data__.has(N)}function c0(N,A){var I=this.__data__;if(I instanceof Ot){var ee=I.__data__;if(!Bs||ee.length<r-1)return ee.push([N,A]),this.size=++I.size,this;I=this.__data__=new Tn(ee)}return I.set(N,A),this.size=I.size,this}Pi.prototype.clear=Gh,Pi.prototype.delete=o0,Pi.prototype.get=a0,Pi.prototype.has=l0,Pi.prototype.set=c0;function u0(N,A){var I=xu(N),ee=!I&&xg(N),Be=!I&&!ee&&wu(N),Le=!I&&!ee&&!Be&&jg(N),at=I||ee||Be||Le,it=at?Vt(N.length,String):[],lr=it.length;for(var dt in N)$t.call(N,dt)&&!(at&&(dt=="length"||Be&&(dt=="offset"||dt=="parent")||Le&&(dt=="buffer"||dt=="byteLength"||dt=="byteOffset")||v0(dt,lr)))&&it.push(dt);return it}function bu(N,A){for(var I=N.length;I--;)if(bg(N[I][0],A))return I;return-1}function Zh(N,A,I){var ee=A(N);return xu(N)?ee:Ye(ee,I(N))}function Ul(N){return N==null?N===void 0?T:x:fn&&fn in Object(N)?bo(N):vg(N)}function gg(N){return Di(N)&&Ul(N)==a}function yg(N,A,I,ee,Be){return N===A?!0:N==null||A==null||!Di(N)&&!Di(A)?N!==N&&A!==A:d0(N,A,I,ee,yg,Be)}function d0(N,A,I,ee,Be,Le){var at=xu(N),it=xu(A),lr=at?l:Ri(N),dt=it?l:Ri(A);lr=lr==a?w:lr,dt=dt==a?w:dt;var Qr=lr==w,An=dt==w,br=lr==dt;if(br&&wu(N)){if(!wu(A))return!1;at=!0,Qr=!1}if(br&&!Qr)return Le||(Le=new Pi),at||jg(N)?Jh(N,A,I,ee,Be,Le):m0(N,A,lr,I,ee,Be,Le);if(!(I&s)){var Xr=Qr&&$t.call(N,"__wrapped__"),qr=An&&$t.call(A,"__wrapped__");if(Xr||qr){var wa=Xr?N.value():N,xo=qr?A.value():A;return Le||(Le=new Pi),Be(wa,xo,I,ee,Le)}}return br?(Le||(Le=new Pi),g0(N,A,I,ee,Be,Le)):!1}function h0(N){if(!_g(N)||x0(N))return!1;var A=wg(N)?mo:ve;return A.test(pn(N))}function f0(N){return Di(N)&&Xh(N.length)&&!!G[Ul(N)]}function p0(N){if(!w0(N))return qs(N);var A=[];for(var I in Object(N))$t.call(N,I)&&I!="constructor"&&A.push(I);return A}function Jh(N,A,I,ee,Be,Le){var at=I&s,it=N.length,lr=A.length;if(it!=lr&&!(at&&lr>it))return!1;var dt=Le.get(N);if(dt&&Le.get(A))return dt==A;var Qr=-1,An=!0,br=I&i?new yu:void 0;for(Le.set(N,A),Le.set(A,N);++Qr<it;){var Xr=N[Qr],qr=A[Qr];if(ee)var wa=at?ee(qr,Xr,Qr,A,N,Le):ee(Xr,qr,Qr,N,A,Le);if(wa!==void 0){if(wa)continue;An=!1;break}if(br){if(!ft(A,function(xo,Bl){if(!B(br,Bl)&&(Xr===xo||Be(Xr,xo,I,ee,Le)))return br.push(Bl)})){An=!1;break}}else if(!(Xr===qr||Be(Xr,qr,I,ee,Le))){An=!1;break}}return Le.delete(N),Le.delete(A),An}function m0(N,A,I,ee,Be,Le,at){switch(I){case D:if(N.byteLength!=A.byteLength||N.byteOffset!=A.byteOffset)return!1;N=N.buffer,A=A.buffer;case P:return!(N.byteLength!=A.byteLength||!Le(new go(N),new go(A)));case u:case h:case b:return bg(+N,+A);case f:return N.name==A.name&&N.message==A.message;case k:case E:return N==A+"";case m:var it=me;case S:var lr=ee&s;if(it||(it=ce),N.size!=A.size&&!lr)return!1;var dt=at.get(N);if(dt)return dt==A;ee|=i,at.set(N,A);var Qr=Jh(it(N),it(A),ee,Be,Le,at);return at.delete(N),Qr;case C:if(zl)return zl.call(N)==zl.call(A)}return!1}function g0(N,A,I,ee,Be,Le){var at=I&s,it=ql(N),lr=it.length,dt=ql(A),Qr=dt.length;if(lr!=Qr&&!at)return!1;for(var An=lr;An--;){var br=it[An];if(!(at?br in A:$t.call(A,br)))return!1}var Xr=Le.get(N);if(Xr&&Le.get(A))return Xr==A;var qr=!0;Le.set(N,A),Le.set(A,N);for(var wa=at;++An<lr;){br=it[An];var xo=N[br],Bl=A[br];if(ee)var iO=at?ee(Bl,xo,br,A,N,Le):ee(xo,Bl,br,N,A,Le);if(!(iO===void 0?xo===Bl||Be(xo,Bl,I,ee,Le):iO)){qr=!1;break}wa||(wa=br=="constructor")}if(qr&&!wa){var kg=N.constructor,Sg=A.constructor;kg!=Sg&&"constructor"in N&&"constructor"in A&&!(typeof kg=="function"&&kg instanceof kg&&typeof Sg=="function"&&Sg instanceof Sg)&&(qr=!1)}return Le.delete(N),Le.delete(A),qr}function ql(N){return Zh(N,ef,y0)}function Vs(N,A){var I=N.__data__;return b0(A)?I[typeof A=="string"?"string":"hash"]:I.map}function vo(N,A){var I=Q(N,A);return h0(I)?I:void 0}function bo(N){var A=$t.call(N,fn),I=N[fn];try{N[fn]=void 0;var ee=!0}catch{}var Be=Ti.call(N);return ee&&(A?N[fn]=I:delete N[fn]),Be}var y0=Us?function(N){return N==null?[]:(N=Object(N),Ge(Us(N),function(A){return Jr.call(N,A)}))}:j0,Ri=Ul;(Ll&&Ri(new Ll(new ArrayBuffer(1)))!=D||Bs&&Ri(new Bs)!=m||Fl&&Ri(Fl.resolve())!=_||yo&&Ri(new yo)!=S||$l&&Ri(new $l)!=O)&&(Ri=function(N){var A=Ul(N),I=A==w?N.constructor:void 0,ee=I?pn(I):"";if(ee)switch(ee){case gu:return D;case Ws:return m;case Kh:return _;case Yh:return S;case ba:return O}return A});function v0(N,A){return A=A??o,!!A&&(typeof N=="number"||H.test(N))&&N>-1&&N%1==0&&N<A}function b0(N){var A=typeof N;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?N!=="__proto__":N===null}function x0(N){return!!zs&&zs in N}function w0(N){var A=N&&N.constructor,I=typeof A=="function"&&A.prototype||Ue;return N===I}function vg(N){return Ti.call(N)}function pn(N){if(N!=null){try{return Zr.call(N)}catch{}try{return N+""}catch{}}return""}function bg(N,A){return N===A||N!==N&&A!==A}var xg=gg(function(){return arguments}())?gg:function(N){return Di(N)&&$t.call(N,"callee")&&!Jr.call(N,"callee")},xu=Array.isArray;function Qh(N){return N!=null&&Xh(N.length)&&!wg(N)}var wu=Il||k0;function _0(N,A){return yg(N,A)}function wg(N){if(!_g(N))return!1;var A=Ul(N);return A==p||A==v||A==c||A==j}function Xh(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=o}function _g(N){var A=typeof N;return N!=null&&(A=="object"||A=="function")}function Di(N){return N!=null&&typeof N=="object"}var jg=Pe?M(Pe):f0;function ef(N){return Qh(N)?u0(N):p0(N)}function j0(){return[]}function k0(){return!1}e.exports=_0})(Sb,Sb.exports);var CW=Sb.exports,cA={};Object.defineProperty(cA,"__esModule",{value:!0});const XDe=NW,e3e=CW;var HS;(function(e){function t(i={},o={},a=!1){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});let l=XDe(o);a||(l=Object.keys(l).reduce((c,u)=>(l[u]!=null&&(c[u]=l[u]),c),{}));for(const c in i)i[c]!==void 0&&o[c]===void 0&&(l[c]=i[c]);return Object.keys(l).length>0?l:void 0}e.compose=t;function r(i={},o={}){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});const a=Object.keys(i).concat(Object.keys(o)).reduce((l,c)=>(e3e(i[c],o[c])||(l[c]=o[c]===void 0?null:o[c]),l),{});return Object.keys(a).length>0?a:void 0}e.diff=r;function n(i={},o={}){i=i||{};const a=Object.keys(o).reduce((l,c)=>(o[c]!==i[c]&&i[c]!==void 0&&(l[c]=o[c]),l),{});return Object.keys(i).reduce((l,c)=>(i[c]!==o[c]&&o[c]===void 0&&(l[c]=null),l),a)}e.invert=n;function s(i,o,a=!1){if(typeof i!="object")return o;if(typeof o!="object")return;if(!a)return o;const l=Object.keys(o).reduce((c,u)=>(i[u]===void 0&&(c[u]=o[u]),c),{});return Object.keys(l).length>0?l:void 0}e.transform=s})(HS||(HS={}));cA.default=HS;var Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});var KS;(function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t})(KS||(KS={}));Sw.default=KS;var uA={};Object.defineProperty(uA,"__esModule",{value:!0});const gI=Sw;class t3e{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const r=this.ops[this.index];if(r){const n=this.offset,s=gI.default.length(r);if(t>=s-n?(t=s-n,this.index+=1,this.offset=0):this.offset+=t,typeof r.delete=="number")return{delete:t};{const i={};return r.attributes&&(i.attributes=r.attributes),typeof r.retain=="number"?i.retain=t:typeof r.retain=="object"&&r.retain!==null?i.retain=r.retain:typeof r.insert=="string"?i.insert=r.insert.substr(n,t):i.insert=r.insert,i}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?gI.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const t=this.offset,r=this.index,n=this.next(),s=this.ops.slice(this.index);return this.offset=t,this.index=r,[n].concat(s)}}else return[]}}uA.default=t3e;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const r=QDe,n=NW,s=CW,i=cA;t.AttributeMap=i.default;const o=Sw;t.Op=o.default;const a=uA;t.OpIterator=a.default;const l="\0",c=(h,f)=>{if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);const p=Object.keys(h)[0];if(!p||p!==Object.keys(f)[0])throw new Error(`embed types not matched: ${p} != ${Object.keys(f)[0]}`);return[p,h[p],f[p]]};class u{constructor(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]}static registerEmbed(f,p){this.handlers[f]=p}static unregisterEmbed(f){delete this.handlers[f]}static getHandler(f){const p=this.handlers[f];if(!p)throw new Error(`no handlers for embed type "${f}"`);return p}insert(f,p){const v={};return typeof f=="string"&&f.length===0?this:(v.insert=f,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(v.attributes=p),this.push(v))}delete(f){return f<=0?this:this.push({delete:f})}retain(f,p){if(typeof f=="number"&&f<=0)return this;const v={retain:f};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(v.attributes=p),this.push(v)}push(f){let p=this.ops.length,v=this.ops[p-1];if(f=n(f),typeof v=="object"){if(typeof f.delete=="number"&&typeof v.delete=="number")return this.ops[p-1]={delete:v.delete+f.delete},this;if(typeof v.delete=="number"&&f.insert!=null&&(p-=1,v=this.ops[p-1],typeof v!="object"))return this.ops.unshift(f),this;if(s(f.attributes,v.attributes)){if(typeof f.insert=="string"&&typeof v.insert=="string")return this.ops[p-1]={insert:v.insert+f.insert},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof v.retain=="number")return this.ops[p-1]={retain:v.retain+f.retain},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this}}return p===this.ops.length?this.ops.push(f):this.ops.splice(p,0,f),this}chop(){const f=this.ops[this.ops.length-1];return f&&typeof f.retain=="number"&&!f.attributes&&this.ops.pop(),this}filter(f){return this.ops.filter(f)}forEach(f){this.ops.forEach(f)}map(f){return this.ops.map(f)}partition(f){const p=[],v=[];return this.forEach(m=>{(f(m)?p:v).push(m)}),[p,v]}reduce(f,p){return this.ops.reduce(f,p)}changeLength(){return this.reduce((f,p)=>p.insert?f+o.default.length(p):p.delete?f-p.delete:f,0)}length(){return this.reduce((f,p)=>f+o.default.length(p),0)}slice(f=0,p=1/0){const v=[],m=new a.default(this.ops);let b=0;for(;b<p&&m.hasNext();){let x;b<f?x=m.next(f-b):(x=m.next(p-b),v.push(x)),b+=o.default.length(x)}return new u(v)}compose(f){const p=new a.default(this.ops),v=new a.default(f.ops),m=[],b=v.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){let w=b.retain;for(;p.peekType()==="insert"&&p.peekLength()<=w;)w-=p.peekLength(),m.push(p.next());b.retain-w>0&&v.next(b.retain-w)}const x=new u(m);for(;p.hasNext()||v.hasNext();)if(v.peekType()==="insert")x.push(v.next());else if(p.peekType()==="delete")x.push(p.next());else{const w=Math.min(p.peekLength(),v.peekLength()),_=p.next(w),j=v.next(w);if(j.retain){const k={};if(typeof _.retain=="number")k.retain=typeof j.retain=="number"?w:j.retain;else if(typeof j.retain=="number")_.retain==null?k.insert=_.insert:k.retain=_.retain;else{const E=_.retain==null?"insert":"retain",[C,T,O]=c(_[E],j.retain),P=u.getHandler(C);k[E]={[C]:P.compose(T,O,E==="retain")}}const S=i.default.compose(_.attributes,j.attributes,typeof _.retain=="number");if(S&&(k.attributes=S),x.push(k),!v.hasNext()&&s(x.ops[x.ops.length-1],k)){const E=new u(p.rest());return x.concat(E).chop()}}else typeof j.delete=="number"&&(typeof _.retain=="number"||typeof _.retain=="object"&&_.retain!==null)&&x.push(j)}return x.chop()}concat(f){const p=new u(this.ops.slice());return f.ops.length>0&&(p.push(f.ops[0]),p.ops=p.ops.concat(f.ops.slice(1))),p}diff(f,p){if(this.ops===f.ops)return new u;const v=[this,f].map(_=>_.map(j=>{if(j.insert!=null)return typeof j.insert=="string"?j.insert:l;const k=_===f?"on":"with";throw new Error("diff() called "+k+" non-document")}).join("")),m=new u,b=r(v[0],v[1],p,!0),x=new a.default(this.ops),w=new a.default(f.ops);return b.forEach(_=>{let j=_[1].length;for(;j>0;){let k=0;switch(_[0]){case r.INSERT:k=Math.min(w.peekLength(),j),m.push(w.next(k));break;case r.DELETE:k=Math.min(j,x.peekLength()),x.next(k),m.delete(k);break;case r.EQUAL:k=Math.min(x.peekLength(),w.peekLength(),j);const S=x.next(k),E=w.next(k);s(S.insert,E.insert)?m.retain(k,i.default.diff(S.attributes,E.attributes)):m.push(E).delete(k);break}j-=k}}),m.chop()}eachLine(f,p=`
`){const v=new a.default(this.ops);let m=new u,b=0;for(;v.hasNext();){if(v.peekType()!=="insert")return;const x=v.peek(),w=o.default.length(x)-v.peekLength(),_=typeof x.insert=="string"?x.insert.indexOf(p,w)-w:-1;if(_<0)m.push(v.next());else if(_>0)m.push(v.next(_));else{if(f(m,v.next(1).attributes||{},b)===!1)return;b+=1,m=new u}}m.length()>0&&f(m,{},b)}invert(f){const p=new u;return this.reduce((v,m)=>{if(m.insert)p.delete(o.default.length(m));else{if(typeof m.retain=="number"&&m.attributes==null)return p.retain(m.retain),v+m.retain;if(m.delete||typeof m.retain=="number"){const b=m.delete||m.retain;return f.slice(v,v+b).forEach(x=>{m.delete?p.push(x):m.retain&&m.attributes&&p.retain(o.default.length(x),i.default.invert(m.attributes,x.attributes))}),v+b}else if(typeof m.retain=="object"&&m.retain!==null){const b=f.slice(v,v+1),x=new a.default(b.ops).next(),[w,_,j]=c(m.retain,x.insert),k=u.getHandler(w);return p.retain({[w]:k.invert(_,j)},i.default.invert(m.attributes,x.attributes)),v+1}}return v},0),p.chop()}transform(f,p=!1){if(p=!!p,typeof f=="number")return this.transformPosition(f,p);const v=f,m=new a.default(this.ops),b=new a.default(v.ops),x=new u;for(;m.hasNext()||b.hasNext();)if(m.peekType()==="insert"&&(p||b.peekType()!=="insert"))x.retain(o.default.length(m.next()));else if(b.peekType()==="insert")x.push(b.next());else{const w=Math.min(m.peekLength(),b.peekLength()),_=m.next(w),j=b.next(w);if(_.delete)continue;if(j.delete)x.push(j);else{const k=_.retain,S=j.retain;let E=typeof S=="object"&&S!==null?S:w;if(typeof k=="object"&&k!==null&&typeof S=="object"&&S!==null){const C=Object.keys(k)[0];if(C===Object.keys(S)[0]){const T=u.getHandler(C);T&&(E={[C]:T.transform(k[C],S[C],p)})}}x.retain(E,i.default.transform(_.attributes,j.attributes,p))}}return x.chop()}transformPosition(f,p=!1){p=!!p;const v=new a.default(this.ops);let m=0;for(;v.hasNext()&&m<=f;){const b=v.peekLength(),x=v.peekType();if(v.next(),x==="delete"){f-=Math.min(b,f-m);continue}else x==="insert"&&(m<f||!p)&&(f+=b);m+=b}return f}}u.Op=o.default,u.OpIterator=a.default,u.AttributeMap=i.default,u.handlers={},t.default=u,e.exports=u,e.exports.default=u})(VS,VS.exports);var Ss=VS.exports;const Ae=wi(Ss);class Ni extends as{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Ni.blotName="break";Ni.tagName="BR";let bi=class extends jb{};const r3e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Nw(e){return e.replace(/[&<>"']/g,t=>r3e[t])}const Zy=class Ju extends iA{static compare(t,r){const n=Ju.order.indexOf(t),s=Ju.order.indexOf(r);return n>=0||s>=0?n-s:t===r?0:t<r?-1:1}formatAt(t,r,n,s){if(Ju.compare(this.statics.blotName,n)<0&&this.scroll.query(n,Oe.BLOT)){const i=this.isolate(t,r);s&&i.wrap(n,s)}else super.formatAt(t,r,n,s)}optimize(t){if(super.optimize(t),this.parent instanceof Ju&&Ju.compare(this.statics.blotName,this.parent.statics.blotName)>0){const r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}};be(Zy,"allowedChildren",[Zy,Ni,as,bi]),be(Zy,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let Pl=Zy;const yI=1;class Gr extends sm{constructor(){super(...arguments),be(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=EW(this)),this.cache.delta}deleteAt(t,r){super.deleteAt(t,r),this.cache={}}formatAt(t,r,n,s){r<=0||(this.scroll.query(n,Oe.BLOCK)?t+r===this.length()&&this.format(n,s):super.formatAt(t,Math.min(r,this.length()-t-1),n,s),this.cache={})}insertAt(t,r,n){if(n!=null){super.insertAt(t,r,n),this.cache={};return}if(r.length===0)return;const s=r.split(`
`),i=s.shift();i.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});let o=this;s.reduce((a,l)=>(o=o.split(a,!0),o.insertAt(0,l),l.length),t+i.length)}insertBefore(t,r){const{head:n}=this.children;super.insertBefore(t,r),n instanceof Ni&&n.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+yI),this.cache.length}moveChildren(t,r){super.moveChildren(t,r),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(t===0||t>=this.length()-yI)){const s=this.clone();return t===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const n=super.split(t,r);return this.cache={},n}}Gr.blotName="block";Gr.tagName="P";Gr.defaultChild=Ni;Gr.allowedChildren=[Ni,Pl,as,bi];class Ns extends as{attach(){super.attach(),this.attributes=new ww(this.domNode)}delta(){return new Ae().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,r){const n=this.scroll.query(t,Oe.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,r)}formatAt(t,r,n,s){this.format(n,s)}insertAt(t,r,n){if(n!=null){super.insertAt(t,r,n);return}const s=r.split(`
`),i=s.pop(),o=s.map(l=>{const c=this.scroll.create(Gr.blotName);return c.insertAt(0,l),c}),a=this.split(t);o.forEach(l=>{this.parent.insertBefore(l,a)}),i&&this.parent.insertBefore(this.scroll.create("text",i),a)}}Ns.scope=Oe.BLOCK_BLOT;function EW(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.descendants(an).reduce((r,n)=>n.length()===0?r:r.insert(n.value(),_s(n,{},t)),new Ae).insert(`
`,_s(e))}function _s(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e==null||("formats"in e&&typeof e.formats=="function"&&(t={...t,...e.formats()},r&&delete t["code-token"]),e.parent==null||e.parent.statics.blotName==="scroll"||e.parent.statics.scope!==e.statics.scope)?t:_s(e.parent,t,r)}const Hf=class cc extends as{static value(){}constructor(t,r,n){super(t,r),this.selection=n,this.textNode=document.createTextNode(cc.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,r){if(this.savedLength!==0){super.format(t,r);return}let n=this,s=0;for(;n!=null&&n.statics.scope!==Oe.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=cc.CONTENTS.length,n.optimize(),n.formatAt(s,cc.CONTENTS.length,t,r),this.savedLength=0)}index(t,r){return t===this.textNode?0:super.index(t,r)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const r=this.prev instanceof bi?this.prev:null,n=r?r.length():0,s=this.next instanceof bi?this.next:null,i=s?s.text:"",{textNode:o}=this,a=o.data.split(cc.CONTENTS).join("");o.data=cc.CONTENTS;let l;if(r)l=r,(a||s)&&(r.insertAt(r.length(),a+i),s&&s.remove());else if(s)l=s,s.insertAt(0,a);else{const c=document.createTextNode(a);l=this.scroll.create(c),this.parent.insertBefore(l,this)}if(this.remove(),t){const c=(f,p)=>r&&f===r.domNode?p:f===o?n+p-1:s&&f===s.domNode?n+a.length+p:null,u=c(t.start.node,t.start.offset),h=c(t.end.node,t.end.offset);if(u!==null&&h!==null)return{startNode:l.domNode,startOffset:u,endNode:l.domNode,endOffset:h}}return null}update(t,r){if(t.some(n=>n.type==="characterData"&&n.target===this.textNode)){const n=this.restore();n&&(r.range=n)}}optimize(t){super.optimize(t);let{parent:r}=this;for(;r;){if(r.domNode.tagName==="A"){this.savedLength=cc.CONTENTS.length,r.isolate(this.offset(r),this.length()).unwrap(),this.savedLength=0;break}r=r.parent}}value(){return""}};be(Hf,"blotName","cursor"),be(Hf,"className","ql-cursor"),be(Hf,"tagName","span"),be(Hf,"CONTENTS","\uFEFF");let Cw=Hf;const YS=new WeakMap,GS=["error","warn","log","info"];let ZS="warn";function TW(e){if(ZS&&GS.indexOf(e)<=GS.indexOf(ZS)){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console[e](...r)}}function ya(e){return GS.reduce((t,r)=>(t[r]=TW.bind(console,r,e),t),{})}ya.level=e=>{ZS=e};TW.level=ya.level;const ij=ya("quill:events"),n3e=["selectionchange","mousedown","mouseup","click"];n3e.forEach(e=>{document.addEventListener(e,function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=YS.get(s);i&&i.emitter&&i.emitter.handleDOM(...r)})})});class Ce extends T7{constructor(){super(),this.domListeners={},this.on("error",ij.error)}emit(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ij.log.call(ij,...r),super.emit(...r)}handleDOM(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach(i=>{let{node:o,handler:a}=i;(t.target===o||o.contains(t.target))&&a(t,...n)})}listenDOM(t,r,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:r,handler:n})}}be(Ce,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),be(Ce,"sources",{API:"api",SILENT:"silent",USER:"user"});const oj=ya("quill:selection");let Zc=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}};class s3e{constructor(t,r){this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Zc(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ce.sources.USER),1)}),this.emitter.on(Ce.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once(Ce.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const o=i.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(o?Ce.sources.SILENT:s)}catch{}})}),this.emitter.on(Ce.events.SCROLL_OPTIMIZE,(n,s)=>{if(s.range){const{startNode:i,startOffset:o,endNode:a,endOffset:l}=s.range;this.setNativeRange(i,o,a,l),this.update(Ce.sources.SILENT)}}),this.update(Ce.sources.SILENT)}handleComposition(){this.emitter.on(Ce.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ce.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ce.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,r){this.scroll.update();const n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(t,Oe.BLOCK))){if(n.start.node!==this.cursor.textNode){const s=this.scroll.find(n.start.node,!1);if(s==null)return;if(s instanceof an){const i=s.split(n.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,r),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=this.scroll.length();t=Math.min(t,n-1),r=Math.min(t+r,n-1)-t;let s,[i,o]=this.scroll.leaf(t);if(i==null)return null;if(r>0&&o===i.length()){const[u]=this.scroll.leaf(t+1);if(u){const[h]=this.scroll.line(t),[f]=this.scroll.line(t+1);h===f&&(i=u,o=0)}}[s,o]=i.position(o,!0);const a=document.createRange();if(r>0)return a.setStart(s,o),[i,o]=this.scroll.leaf(t+r),i==null?null:([s,o]=i.position(o,!0),a.setEnd(s,o),a.getBoundingClientRect());let l="left",c;if(s instanceof Text){if(!s.data.length)return null;o<s.data.length?(a.setStart(s,o),a.setEnd(s,o+1)):(a.setStart(s,o-1),a.setEnd(s,o),l="right"),c=a.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;c=i.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const r=t.getRangeAt(0);if(r==null)return null;const n=this.normalizeNative(r);return oj.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const r=this.getNativeRange();return r==null?[null,null]:[this.normalizedToRange(r),r]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&aj(this.root,document.activeElement)}normalizedToRange(t){const r=[[t.start.node,t.start.offset]];t.native.collapsed||r.push([t.end.node,t.end.offset]);const n=r.map(o=>{const[a,l]=o,c=this.scroll.find(a,!0),u=c.offset(this.scroll);return l===0?u:c instanceof an?u+c.index(a,l):u+c.length()}),s=Math.min(Math.max(...n),this.scroll.length()-1),i=Math.min(s,...n);return new Zc(i,s-i)}normalizeNative(t){if(!aj(this.root,t.startContainer)||!t.collapsed&&!aj(this.root,t.endContainer))return null;const r={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[r.start,r.end].forEach(n=>{let{node:s,offset:i}=n;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;n.node=s,n.offset=i}),r}rangeToNative(t){const r=this.scroll.length(),n=(s,i)=>{s=Math.min(r-1,s);const[o,a]=this.scroll.leaf(s);return o?o.position(a,i):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(oj.info("setNativeRange",t,r,n,s),t!=null&&(this.root.parentNode==null||t.parentNode==null||n.parentNode==null))return;const o=document.getSelection();if(o!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(a==null||i||t!==a.startContainer||r!==a.startOffset||n!==a.endContainer||s!==a.endOffset){t instanceof Element&&t.tagName==="BR"&&(r=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&n.tagName==="BR"&&(s=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const l=document.createRange();l.setStart(t,r),l.setEnd(n,s),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;if(typeof r=="string"&&(n=r,r=!1),oj.info("setRange",t),t!=null){const s=this.rangeToNative(t);this.setNativeRange(...s,r)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const r=this.lastRange,[n,s]=this.getRange();if(this.lastRange=n,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!Va(r,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const i=[Ce.events.SELECTION_CHANGE,jd(this.lastRange),jd(r),t];this.emitter.emit(Ce.events.EDITOR_CHANGE,...i),t!==Ce.sources.SILENT&&this.emitter.emit(...i)}}}function aj(e,t){try{t.parentNode}catch{return!1}return e.contains(t)}const i3e=/^[ -~]*$/;class o3e{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let r=this.scroll.length();this.scroll.batchStart();const n=vI(t),s=new Ae;return l3e(n.ops.slice()).reduce((i,o)=>{const a=Ss.Op.length(o);let l=o.attributes||{},c=!1,u=!1;if(o.insert!=null){if(s.retain(a),typeof o.insert=="string"){const p=o.insert;u=!p.endsWith(`
`)&&(r<=i||!!this.scroll.descendant(Ns,i)[0]),this.scroll.insertAt(i,p);const[v,m]=this.scroll.line(i);let b=il({},_s(v));if(v instanceof Gr){const[x]=v.descendant(an,m);x&&(b=il(b,_s(x)))}l=Ss.AttributeMap.diff(b,l)||{}}else if(typeof o.insert=="object"){const p=Object.keys(o.insert)[0];if(p==null)return i;const v=this.scroll.query(p,Oe.INLINE)!=null;if(v)(r<=i||this.scroll.descendant(Ns,i)[0])&&(u=!0);else if(i>0){const[m,b]=this.scroll.descendant(an,i-1);m instanceof bi?m.value()[b]!==`
`&&(c=!0):m instanceof as&&m.statics.scope===Oe.INLINE_BLOT&&(c=!0)}if(this.scroll.insertAt(i,p,o.insert[p]),v){const[m]=this.scroll.descendant(an,i);if(m){const b=il({},_s(m));l=Ss.AttributeMap.diff(b,l)||{}}}}r+=a}else if(s.push(o),o.retain!==null&&typeof o.retain=="object"){const p=Object.keys(o.retain)[0];if(p==null)return i;this.scroll.updateEmbedAt(i,p,o.retain[p])}Object.keys(l).forEach(p=>{this.scroll.formatAt(i,a,p,l[p])});const h=c?1:0,f=u?1:0;return r+=h+f,s.retain(h),s.delete(f),i+a+h+f},0),s.reduce((i,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(i,o.delete),i):i+Ss.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,r){return this.scroll.deleteAt(t,r),this.update(new Ae().retain(t).delete(r))}formatLine(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(i=>{this.scroll.lines(t,Math.max(r,1)).forEach(o=>{o.format(i,n[i])})}),this.scroll.optimize();const s=new Ae().retain(t).retain(r,jd(n));return this.update(s)}formatText(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(i=>{this.scroll.formatAt(t,r,i,n[i])});const s=new Ae().retain(t).retain(r,jd(n));return this.update(s)}getContents(t,r){return this.delta.slice(t,t+r)}getDelta(){return this.scroll.lines().reduce((t,r)=>t.concat(r.delta()),new Ae)}getFormat(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],s=[];r===0?this.scroll.path(t).forEach(a=>{const[l]=a;l instanceof Gr?n.push(l):l instanceof an&&s.push(l)}):(n=this.scroll.lines(t,r),s=this.scroll.descendants(an,t,r));const[i,o]=[n,s].map(a=>{const l=a.shift();if(l==null)return{};let c=_s(l);for(;Object.keys(c).length>0;){const u=a.shift();if(u==null)return c;c=a3e(_s(u),c)}return c});return{...i,...o}}getHTML(t,r){const[n,s]=this.scroll.line(t);if(n){const i=n.length();return n.length()>=s+r&&!(s===0&&r===i)?om(n,s,r,!0):om(this.scroll,t,r,!0)}return""}getText(t,r){return this.getContents(t,r).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(t,r){const n=vI(r),s=new Ae().retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(s)}insertEmbed(t,r,n){return this.scroll.insertAt(t,r,n),this.update(new Ae().retain(t).insert({[r]:n}))}insertText(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r=r.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,r),Object.keys(n).forEach(s=>{this.scroll.formatAt(t,r.length,s,n[s])}),this.update(new Ae().retain(t).insert(r,jd(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==Gr.blotName)return!1;const r=t;return r.children.length>1?!1:r.children.head instanceof Ni}removeFormat(t,r){const n=this.getText(t,r),[s,i]=this.scroll.line(t+r);let o=0,a=new Ae;s!=null&&(o=s.length()-i,a=s.delta().slice(i,i+o-1).insert(`
`));const l=this.getContents(t,r+o).diff(new Ae().insert(n).concat(a)),c=new Ae().retain(t).concat(l);return this.applyDelta(c)}update(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(r.length===1&&r[0].type==="characterData"&&r[0].target.data.match(i3e)&&this.scroll.find(r[0].target)){const i=this.scroll.find(r[0].target),o=_s(i),a=i.offset(this.scroll),l=r[0].oldValue.replace(Cw.CONTENTS,""),c=new Ae().insert(l),u=new Ae().insert(i.value()),h=n&&{oldRange:bI(n.oldRange,-a),newRange:bI(n.newRange,-a)};t=new Ae().retain(a).concat(c.diff(u,h)).reduce((f,p)=>p.insert?f.insert(p.insert,o):f.push(p),new Ae),this.delta=s.compose(t)}else this.delta=this.getDelta(),(!t||!Va(s.compose(t),this.delta))&&(t=s.diff(this.delta,n));return t}}function Qu(e,t,r){if(e.length===0){const[p]=lj(r.pop());return t<=0?`</li></${p}>`:`</li></${p}>${Qu([],t-1,r)}`}const[{child:n,offset:s,length:i,indent:o,type:a},...l]=e,[c,u]=lj(a);if(o>t)return r.push(a),o===t+1?`<${c}><li${u}>${om(n,s,i)}${Qu(l,o,r)}`:`<${c}><li>${Qu(e,t+1,r)}`;const h=r[r.length-1];if(o===t&&a===h)return`</li><li${u}>${om(n,s,i)}${Qu(l,o,r)}`;const[f]=lj(r.pop());return`</li></${f}>${Qu(e,t-1,r)}`}function om(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in e&&typeof e.html=="function")return e.html(t,r);if(e instanceof bi)return Nw(e.value().slice(t,t+r)).replaceAll(" ","&nbsp;");if(e instanceof hi){if(e.statics.blotName==="list-container"){const c=[];return e.children.forEachAt(t,r,(u,h,f)=>{const p="formats"in u&&typeof u.formats=="function"?u.formats():{};c.push({child:u,offset:h,length:f,indent:p.indent||0,type:p.list})}),Qu(c,-1,[])}const s=[];if(e.children.forEachAt(t,r,(c,u,h)=>{s.push(om(c,u,h))}),n||e.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:o}=e.domNode,[a,l]=i.split(`>${o}<`);return a==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${l}`:`${a}>${s.join("")}<${l}`}return e.domNode instanceof Element?e.domNode.outerHTML:""}function a3e(e,t){return Object.keys(t).reduce((r,n)=>{if(e[n]==null)return r;const s=t[n];return s===e[n]?r[n]=s:Array.isArray(s)?s.indexOf(e[n])<0?r[n]=s.concat([e[n]]):r[n]=s:r[n]=[s,e[n]],r},{})}function lj(e){const t=e==="ordered"?"ol":"ul";switch(e){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function vI(e){return e.reduce((t,r)=>{if(typeof r.insert=="string"){const n=r.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(n,r.attributes)}return t.push(r)},new Ae)}function bI(e,t){let{index:r,length:n}=e;return new Zc(r+t,n)}function l3e(e){const t=[];return e.forEach(r=>{typeof r.insert=="string"?r.insert.split(`
`).forEach((n,s)=>{s&&t.push({insert:`
`,attributes:r.attributes}),n&&t.push({insert:n,attributes:r.attributes})}):t.push(r)}),t}class Ci{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=r}}be(Ci,"DEFAULTS",{});const xy="\uFEFF";class dA extends as{constructor(t,r){super(t,r),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(xy),this.rightGuard=document.createTextNode(xy),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,r){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,r)}restore(t){let r=null,n;const s=t.data.split(xy).join("");if(t===this.leftGuard)if(this.prev instanceof bi){const i=this.prev.length();this.prev.insertAt(i,s),r={startNode:this.prev.domNode,startOffset:i+s.length}}else n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this),r={startNode:n,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof bi?(this.next.insertAt(0,s),r={startNode:this.next.domNode,startOffset:s.length}):(n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this.next),r={startNode:n,startOffset:s.length}));return t.data=xy,r}update(t,r){t.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){const s=this.restore(n.target);s&&(r.range=s)}})}}class c3e{constructor(t,r){be(this,"isComposing",!1),this.scroll=t,this.emitter=r,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const r=t.target instanceof Node?this.scroll.find(t.target,!0):null;r&&!(r instanceof dA)&&(this.emitter.emit(Ce.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Ce.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Ce.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Ce.events.COMPOSITION_END,t),this.isComposing=!1}}const Jy=class{constructor(t,r){be(this,"modules",{}),this.quill=t,this.options=r}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const r=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new r(this.quill,this.options.modules[t]||{}),this.modules[t]}};be(Jy,"DEFAULTS",{modules:{}}),be(Jy,"themes",{default:Jy});let Ew=Jy;const u3e=e=>e.parentElement||e.getRootNode().host||null,d3e=e=>{const t=e.getBoundingClientRect(),r="offsetWidth"in e&&Math.abs(t.width)/e.offsetWidth||1,n="offsetHeight"in e&&Math.abs(t.height)/e.offsetHeight||1;return{top:t.top,right:t.left+e.clientWidth*r,bottom:t.top+e.clientHeight*n,left:t.left}},wy=e=>{const t=parseInt(e,10);return Number.isNaN(t)?0:t},xI=(e,t,r,n,s,i)=>e<r&&t>n?0:e<r?-(r-e+s):t>n?t-e>n-r?e+s-r:t-n+i:0,h3e=(e,t)=>{var r,n,s;const i=e.ownerDocument;let o=t,a=e;for(;a;){const l=a===i.body,c=l?{top:0,right:((r=window.visualViewport)==null?void 0:r.width)??i.documentElement.clientWidth,bottom:((n=window.visualViewport)==null?void 0:n.height)??i.documentElement.clientHeight,left:0}:d3e(a),u=getComputedStyle(a),h=xI(o.left,o.right,c.left,c.right,wy(u.scrollPaddingLeft),wy(u.scrollPaddingRight)),f=xI(o.top,o.bottom,c.top,c.bottom,wy(u.scrollPaddingTop),wy(u.scrollPaddingBottom));if(h||f)if(l)(s=i.defaultView)==null||s.scrollBy(h,f);else{const{scrollLeft:p,scrollTop:v}=a;f&&(a.scrollTop+=f),h&&(a.scrollLeft+=h);const m=a.scrollLeft-p,b=a.scrollTop-v;o={left:o.left-m,top:o.top-b,right:o.right-m,bottom:o.bottom-b}}a=l||u.position==="fixed"?null:u3e(a)}},f3e=100,p3e=["block","break","cursor","inline","scroll","text"],m3e=(e,t,r)=>{const n=new ah;return p3e.forEach(s=>{const i=t.query(s);i&&n.register(i)}),e.forEach(s=>{let i=t.query(s);i||r.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;i;)if(n.register(i),i="blotName"in i?i.requiredContainer??null:null,o+=1,o>f3e){r.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),n},Sd=ya("quill"),Qy=new ah;hi.uiClass="ql-ui";const Xu=class Kf{static debug(t){t===!0&&(t="log"),ya.level(t)}static find(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return YS.get(t)||Qy.find(t,r)}static import(t){return this.imports[t]==null&&Sd.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],r=!!(!(arguments.length<=1)&&arguments[1]),n="attrName"in t?t.attrName:t.blotName;typeof n=="string"?this.register(`formats/${n}`,t,r):Object.keys(t).forEach(s=>{this.register(s,t[s],r)})}else{const t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!n&&Sd.warn(`Overwriting ${t} with`,r),this.imports[t]=r,(t.startsWith("blots/")||t.startsWith("formats/"))&&r&&typeof r!="boolean"&&r.blotName!=="abstract"&&Qy.register(r),typeof r.register=="function"&&r.register(Qy)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=g3e(t,r),this.container=this.options.container,this.container==null){Sd.error("Invalid Quill container",t);return}this.options.debug&&Kf.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",YS.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ce;const s=oA.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new o3e(this.scroll),this.selection=new s3e(this.scroll,this.emitter),this.composition=new c3e(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ce.events.EDITOR_CHANGE,o=>{o===Ce.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ce.events.SCROLL_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Hs.call(this,()=>this.editor.update(null,a,u),o)}),this.emitter.on(Ce.events.SCROLL_EMBED_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Hs.call(this,()=>{const h=new Ae().retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(h,[],u)},Kf.sources.USER)}),n){const o=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const n=t;t=document.createElement("div"),t.classList.add(n)}return this.container.insertBefore(t,r),t}blur(){this.selection.setRange(null)}deleteText(t,r,n){return[t,r,,n]=ko(t,r,n),Hs.call(this,()=>this.editor.deleteText(t,r),n,t,-1*r)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const r=t();return this.allowReadOnlyEdits=!1,r}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;return Hs.call(this,()=>{const s=this.getSelection(!0);let i=new Ae;if(s==null)return i;if(this.scroll.query(t,Oe.BLOCK))i=this.editor.formatLine(s.index,s.length,{[t]:r});else{if(s.length===0)return this.selection.format(t,r),i;i=this.editor.formatText(s.index,s.length,{[t]:r})}return this.setSelection(s,Ce.sources.SILENT),i},n)}formatLine(t,r,n,s,i){let o;return[t,r,o,i]=ko(t,r,n,s,i),Hs.call(this,()=>this.editor.formatLine(t,r,o),i,t,0)}formatText(t,r,n,s,i){let o;return[t,r,o,i]=ko(t,r,n,s,i),Hs.call(this,()=>this.editor.formatText(t,r,o),i,t,0)}getBounds(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof t=="number"?n=this.selection.getBounds(t,r):n=this.selection.getBounds(t.index,t.length),!n)return null;const s=this.container.getBoundingClientRect();return{bottom:n.bottom-s.top,height:n.height,left:n.left-s.left,right:n.right-s.left,top:n.top-s.top,width:n.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,r]=ko(t,r),this.editor.getContents(t,r)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,r):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,r)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(r=r??this.getLength()-t),[t,r]=ko(t,r),this.editor.getHTML(t,r)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(r=r??this.getLength()-t),[t,r]=ko(t,r),this.editor.getText(t,r)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Kf.sources.API;return Hs.call(this,()=>this.editor.insertEmbed(t,r,n),s,t)}insertText(t,r,n,s,i){let o;return[t,,o,i]=ko(t,0,n,s,i),Hs.call(this,()=>this.editor.insertText(t,r,o),i,t,r.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,r,n){return[t,r,,n]=ko(t,r,n),Hs.call(this,()=>this.editor.removeFormat(t,r),n,t)}scrollRectIntoView(t){h3e(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,r=t&&this.selection.getBounds(t.index,t.length);r&&this.scrollRectIntoView(r)}setContents(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Hs.call(this,()=>{t=new Ae(t);const n=this.getLength(),s=this.editor.deleteText(0,n),i=this.editor.insertContents(0,t),o=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(o)},r)}setSelection(t,r,n){t==null?this.selection.setRange(null,r||Kf.sources.API):([t,r,,n]=ko(t,r,n),this.selection.setRange(new Zc(Math.max(0,t),r),n),n!==Ce.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;const n=new Ae().insert(t);return this.setContents(n,r)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const r=this.scroll.update(t);return this.selection.update(t),r}updateContents(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Hs.call(this,()=>(t=new Ae(t),this.editor.applyDelta(t)),r,!0)}};be(Xu,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Qy,theme:"default"}),be(Xu,"events",Ce.events),be(Xu,"sources",Ce.sources),be(Xu,"version","2.0.3"),be(Xu,"imports",{delta:Ae,parchment:qDe,"core/module":Ci,"core/theme":Ew});let ne=Xu;function wI(e){return typeof e=="string"?document.querySelector(e):e}function cj(e){return Object.entries(e??{}).reduce((t,r)=>{let[n,s]=r;return{...t,[n]:s===!0?{}:s}},{})}function _I(e){return Object.fromEntries(Object.entries(e).filter(t=>t[1]!==void 0))}function g3e(e,t){const r=wI(e);if(!r)throw new Error("Invalid Quill container");const n=!t.theme||t.theme===ne.DEFAULTS.theme?Ew:ne.import(`themes/${t.theme}`);if(!n)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:s,...i}=ne.DEFAULTS,{modules:o,...a}=n.DEFAULTS;let l=cj(t.modules);l!=null&&l.toolbar&&l.toolbar.constructor!==Object&&(l={...l,toolbar:{container:l.toolbar}});const c=il({},cj(s),cj(o),l),u={...i,..._I(a),..._I(t)};let h=t.registry;return h?t.formats&&Sd.warn('Ignoring "formats" option because "registry" is specified'):h=t.formats?m3e(t.formats,u.registry,Sd):u.registry,{...u,registry:h,container:r,theme:n,modules:Object.entries(c).reduce((f,p)=>{let[v,m]=p;if(!m)return f;const b=ne.import(`modules/${v}`);return b==null?(Sd.error(`Cannot load ${v} module. Are you sure you registered it?`),f):{...f,[v]:il({},b.DEFAULTS||{},m)}},{}),bounds:wI(u.bounds)}}function Hs(e,t,r,n){if(!this.isEnabled()&&t===Ce.sources.USER&&!this.allowReadOnlyEdits)return new Ae;let s=r==null?null:this.getSelection();const i=this.editor.delta,o=e();if(s!=null&&(r===!0&&(r=s.index),n==null?s=jI(s,o,t):n!==0&&(s=jI(s,r,n,t)),this.setSelection(s,Ce.sources.SILENT)),o.length()>0){const a=[Ce.events.TEXT_CHANGE,o,i,t];this.emitter.emit(Ce.events.EDITOR_CHANGE,...a),t!==Ce.sources.SILENT&&this.emitter.emit(...a)}return o}function ko(e,t,r,n,s){let i={};return typeof e.index=="number"&&typeof e.length=="number"?typeof t!="number"?(s=n,n=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):typeof t!="number"&&(s=n,n=r,r=t,t=0),typeof r=="object"?(i=r,s=n):typeof r=="string"&&(n!=null?i[r]=n:s=r),s=s||Ce.sources.API,[e,t,i,s]}function jI(e,t,r,n){const s=typeof r=="number"?r:0;if(e==null)return null;let i,o;return t&&typeof t.transformPosition=="function"?[i,o]=[e.index,e.index+e.length].map(a=>t.transformPosition(a,n!==Ce.sources.USER)):[i,o]=[e.index,e.index+e.length].map(a=>a<t||a===t&&n===Ce.sources.USER?a:s>=0?a+s:Math.max(t,a+s)),new Zc(i,o-i)}class hu extends _w{}function kI(e){return e instanceof Gr||e instanceof Ns}function SI(e){return typeof e.updateContent=="function"}class ed extends oA{constructor(t,r,n){let{emitter:s}=n;super(t,r),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Ce.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Ce.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,r){this.emitter.emit(Ce.events.SCROLL_EMBED_UPDATE,t,r)}deleteAt(t,r){const[n,s]=this.line(t),[i]=this.line(t+r);if(super.deleteAt(t,r),i!=null&&n!==i&&s>0){if(n instanceof Ns||i instanceof Ns){this.optimize();return}const o=i.children.head instanceof Ni?null:i.children.head;n.moveChildren(i,o),n.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,r,n,s){super.formatAt(t,r,n,s),this.optimize()}insertAt(t,r,n){if(t>=this.length())if(n==null||this.scroll.query(r,Oe.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),n==null&&r.endsWith(`
`)?s.insertAt(0,r.slice(0,-1),n):s.insertAt(0,r,n)}else{const s=this.scroll.create(r,n);this.appendChild(s)}else super.insertAt(t,r,n);this.optimize()}insertBefore(t,r){if(t.statics.scope===Oe.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,r)}else super.insertBefore(t,r)}insertContents(t,r){const n=this.deltaToRenderBlocks(r.concat(new Ae().insert(`
`))),s=n.pop();if(s==null)return;this.batchStart();const i=n.shift();if(i){const l=i.type==="block"&&(i.delta.length()===0||!this.descendant(Ns,t)[0]&&t<this.length()),c=i.type==="block"?i.delta:new Ae().insert({[i.key]:i.value});uj(this,t,c);const u=i.type==="block"?1:0,h=t+c.length()+u;l&&this.insertAt(h-1,`
`);const f=_s(this.line(t)[0]),p=Ss.AttributeMap.diff(f,i.attributes)||{};Object.keys(p).forEach(v=>{this.formatAt(h-1,1,v,p[v])}),t=h}let[o,a]=this.children.find(t);if(n.length&&(o&&(o=o.split(a),a=0),n.forEach(l=>{if(l.type==="block"){const c=this.createBlock(l.attributes,o||void 0);uj(c,0,l.delta)}else{const c=this.create(l.key,l.value);this.insertBefore(c,o||void 0),Object.keys(l.attributes).forEach(u=>{c.format(u,l.attributes[u])})}})),s.type==="block"&&s.delta.length()){const l=o?o.offset(o.scroll)+a:this.length();uj(this,l,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const r=this.path(t).pop();if(!r)return[null,-1];const[n,s]=r;return n instanceof an?[n,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(kI,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const n=(s,i,o)=>{let a=[],l=o;return s.children.forEachAt(i,o,(c,u,h)=>{kI(c)?a.push(c):c instanceof _w&&(a=a.concat(n(c,u,l))),l-=h}),a};return n(this,t,r)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,r),t.length>0&&this.emitter.emit(Ce.events.SCROLL_OPTIMIZE,t,r))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let r=Ce.sources.USER;typeof t=="string"&&(r=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(n=>{let{target:s}=n;const i=this.find(s,!0);return i&&!SI(i)}),t.length>0&&this.emitter.emit(Ce.events.SCROLL_BEFORE_UPDATE,r,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Ce.events.SCROLL_UPDATE,r,t)}updateEmbedAt(t,r,n){const[s]=this.descendant(i=>i instanceof Ns,t);s&&s.statics.blotName===r&&SI(s)&&s.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const r=[];let n=new Ae;return t.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const o=i.split(`
`);o.slice(0,-1).forEach(l=>{n.insert(l,s.attributes),r.push({type:"block",delta:n,attributes:s.attributes??{}}),n=new Ae});const a=o[o.length-1];a&&n.insert(a,s.attributes)}else{const o=Object.keys(i)[0];if(!o)return;this.query(o,Oe.INLINE)?n.push(s):(n.length()&&r.push({type:"block",delta:n,attributes:{}}),n=new Ae,r.push({type:"blockEmbed",key:o,value:i[o],attributes:s.attributes??{}}))}}),n.length()&&r.push({type:"block",delta:n,attributes:{}}),r}createBlock(t,r){let n;const s={};Object.entries(t).forEach(a=>{let[l,c]=a;this.query(l,Oe.BLOCK&Oe.BLOT)!=null?n=l:s[l]=c});const i=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(i,r||void 0);const o=i.length();return Object.entries(s).forEach(a=>{let[l,c]=a;i.formatAt(0,o,l,c)}),i}}be(ed,"blotName","scroll"),be(ed,"className","ql-editor"),be(ed,"tagName","DIV"),be(ed,"defaultChild",Gr),be(ed,"allowedChildren",[Gr,Ns,hu]);function uj(e,t,r){r.reduce((n,s)=>{const i=Ss.Op.length(s);let o=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const a=s.insert;e.insertAt(n,a);const[l]=e.descendant(an,n),c=_s(l);o=Ss.AttributeMap.diff(c,o)||{}}else if(typeof s.insert=="object"){const a=Object.keys(s.insert)[0];if(a==null)return n;if(e.insertAt(n,a,s.insert[a]),e.scroll.query(a,Oe.INLINE)!=null){const[l]=e.descendant(an,n),c=_s(l);o=Ss.AttributeMap.diff(c,o)||{}}}}return Object.keys(o).forEach(a=>{e.formatAt(n,i,a,o[a])}),n+i},t)}const hA={scope:Oe.BLOCK,whitelist:["right","center","justify"]},y3e=new oo("align","align",hA),AW=new Si("align","ql-align",hA),OW=new Ol("align","text-align",hA);class PW extends Ol{value(t){let r=super.value(t);return r.startsWith("rgb(")?(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${r.split(",").map(n=>`00${parseInt(n,10).toString(16)}`.slice(-2)).join("")}`):r}}const v3e=new Si("color","ql-color",{scope:Oe.INLINE}),fA=new PW("color","color",{scope:Oe.INLINE}),b3e=new Si("background","ql-bg",{scope:Oe.INLINE}),pA=new PW("background","background-color",{scope:Oe.INLINE});class fu extends hu{static create(t){const r=super.create(t);return r.setAttribute("spellcheck","false"),r}code(t,r){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(t,t+r)}html(t,r){return`<pre>
${Nw(this.code(t,r))}
</pre>`}}class dn extends Gr{static register(){ne.register(fu)}}be(dn,"TAB","  ");class mA extends Pl{}mA.blotName="code";mA.tagName="CODE";dn.blotName="code-block";dn.className="ql-code-block";dn.tagName="DIV";fu.blotName="code-block-container";fu.className="ql-code-block-container";fu.tagName="DIV";fu.allowedChildren=[dn];dn.allowedChildren=[bi,Ni,Cw];dn.requiredContainer=fu;const gA={scope:Oe.BLOCK,whitelist:["rtl"]},RW=new oo("direction","dir",gA),DW=new Si("direction","ql-direction",gA),MW=new Ol("direction","direction",gA),IW={scope:Oe.INLINE,whitelist:["serif","monospace"]},LW=new Si("font","ql-font",IW);class x3e extends Ol{value(t){return super.value(t).replace(/["']/g,"")}}const FW=new x3e("font","font-family",IW),$W=new Si("size","ql-size",{scope:Oe.INLINE,whitelist:["small","large","huge"]}),zW=new Ol("size","font-size",{scope:Oe.INLINE,whitelist:["10px","18px","32px"]}),w3e=ya("quill:keyboard"),_3e=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Tw extends Ci{static match(t,r){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!r[n]!==t[n]&&r[n]!==null)?!1:r.key===t.key||r.key===t.which}constructor(t,r){super(t,r),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=k3e(t);if(s==null){w3e.warn("Attempted to add invalid keyboard binding",s);return}typeof r=="function"&&(r={handler:r}),typeof n=="function"&&(n={handler:n}),(Array.isArray(s.key)?s.key:[s.key]).forEach(i=>{const o={...s,key:i,...r,...n};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const r=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(v=>Tw.match(t,v));if(r.length===0)return;const n=ne.find(t.target,!0);if(n&&n.scroll!==this.quill.scroll)return;const s=this.quill.getSelection();if(s==null||!this.quill.hasFocus())return;const[i,o]=this.quill.getLine(s.index),[a,l]=this.quill.getLeaf(s.index),[c,u]=s.length===0?[a,l]:this.quill.getLeaf(s.index+s.length),h=a instanceof jb?a.value().slice(0,l):"",f=c instanceof jb?c.value().slice(u):"",p={collapsed:s.length===0,empty:s.length===0&&i.length()<=1,format:this.quill.getFormat(s),line:i,offset:o,prefix:h,suffix:f,event:t};r.some(v=>{if(v.collapsed!=null&&v.collapsed!==p.collapsed||v.empty!=null&&v.empty!==p.empty||v.offset!=null&&v.offset!==p.offset)return!1;if(Array.isArray(v.format)){if(v.format.every(m=>p.format[m]==null))return!1}else if(typeof v.format=="object"&&!Object.keys(v.format).every(m=>v.format[m]===!0?p.format[m]!=null:v.format[m]===!1?p.format[m]==null:Va(v.format[m],p.format[m])))return!1;return v.prefix!=null&&!v.prefix.test(p.prefix)||v.suffix!=null&&!v.suffix.test(p.suffix)?!1:v.handler.call(this,s,p,v)!==!0})&&t.preventDefault()})}handleBackspace(t,r){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(r.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(t.index);let o=new Ae().retain(t.index-n).delete(n);if(r.offset===0){const[a]=this.quill.getLine(t.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){const l=i.formats(),c=this.quill.getFormat(t.index-1,1);if(s=Ss.AttributeMap.diff(l,c)||{},Object.keys(s).length>0){const u=new Ae().retain(t.index+i.length()-2).retain(1,s);o=o.compose(u)}}}this.quill.updateContents(o,ne.sources.USER),this.quill.focus()}handleDelete(t,r){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(r.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let s={};const[i]=this.quill.getLine(t.index);let o=new Ae().retain(t.index).delete(n);if(r.offset>=i.length()-1){const[a]=this.quill.getLine(t.index+1);if(a){const l=i.formats(),c=this.quill.getFormat(t.index,1);s=Ss.AttributeMap.diff(l,c)||{},Object.keys(s).length>0&&(o=o.retain(a.length()-1).retain(1,s))}}this.quill.updateContents(o,ne.sources.USER),this.quill.focus()}handleDeleteRange(t){yA({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,r){const n=Object.keys(r.format).reduce((i,o)=>(this.quill.scroll.query(o,Oe.BLOCK)&&!Array.isArray(r.format[o])&&(i[o]=r.format[o]),i),{}),s=new Ae().retain(t.index).delete(t.length).insert(`
`,n);this.quill.updateContents(s,ne.sources.USER),this.quill.setSelection(t.index+1,ne.sources.SILENT),this.quill.focus()}}const j3e={bindings:{bold:dj("bold"),italic:dj("italic"),underline:dj("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",ne.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",ne.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(e,t){t.format.indent!=null?this.quill.format("indent","-1",ne.sources.USER):t.format.list!=null&&this.quill.format("list",!1,ne.sources.USER)}},"indent code-block":NI(!0),"outdent code-block":NI(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(e){this.quill.deleteText(e.index-1,1,ne.sources.USER)}},tab:{key:"Tab",handler(e,t){if(t.format.table)return!0;this.quill.history.cutoff();const r=new Ae().retain(e.index).delete(e.length).insert("	");return this.quill.updateContents(r,ne.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,ne.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,ne.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(e,t){const r={list:!1};t.format.indent&&(r.indent=!1),this.quill.formatLine(e.index,e.length,r,ne.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(e){const[t,r]=this.quill.getLine(e.index),n={...t.formats(),list:"checked"},s=new Ae().retain(e.index).insert(`
`,n).retain(t.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,ne.sources.USER),this.quill.setSelection(e.index+1,ne.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(e,t){const[r,n]=this.quill.getLine(e.index),s=new Ae().retain(e.index).insert(`
`,t.format).retain(r.length()-n-1).retain(1,{header:null});this.quill.updateContents(s,ne.sources.USER),this.quill.setSelection(e.index+1,ne.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(e){const t=this.quill.getModule("table");if(t){const[r,n,s,i]=t.getTable(e),o=S3e(r,n,s,i);if(o==null)return;let a=r.offset();if(o<0){const l=new Ae().retain(a).insert(`
`);this.quill.updateContents(l,ne.sources.USER),this.quill.setSelection(e.index+1,e.length,ne.sources.SILENT)}else if(o>0){a+=r.length();const l=new Ae().retain(a).insert(`
`);this.quill.updateContents(l,ne.sources.USER),this.quill.setSelection(a,ne.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(e,t){const{event:r,line:n}=t,s=n.offset(this.quill.scroll);r.shiftKey?this.quill.setSelection(s-1,ne.sources.USER):this.quill.setSelection(s+n.length(),ne.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query("list")==null)return!0;const{length:r}=t.prefix,[n,s]=this.quill.getLine(e.index);if(s>r)return!0;let i;switch(t.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(e.index," ",ne.sources.USER),this.quill.history.cutoff();const o=new Ae().retain(e.index-s).delete(r+1).retain(n.length()-2-s).retain(1,{list:i});return this.quill.updateContents(o,ne.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,ne.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(e){const[t,r]=this.quill.getLine(e.index);let n=2,s=t;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,n-=1,n<=0){const i=new Ae().retain(e.index+t.length()-r-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,ne.sources.USER),this.quill.setSelection(e.index-1,ne.sources.SILENT),!1}return!0}},"embed left":_y("ArrowLeft",!1),"embed left shift":_y("ArrowLeft",!0),"embed right":_y("ArrowRight",!1),"embed right shift":_y("ArrowRight",!0),"table down":CI(!1),"table up":CI(!0)}};Tw.DEFAULTS=j3e;function NI(e){return{key:"Tab",shiftKey:!e,format:{"code-block":!0},handler(t,r){let{event:n}=r;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(t.length===0&&!n.shiftKey){this.quill.insertText(t.index,i,ne.sources.USER),this.quill.setSelection(t.index+i.length,ne.sources.SILENT);return}const o=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:a,length:l}=t;o.forEach((c,u)=>{e?(c.insertAt(0,i),u===0?a+=i.length:l+=i.length):c.domNode.textContent.startsWith(i)&&(c.deleteAt(0,i.length),u===0?a-=i.length:l-=i.length)}),this.quill.update(ne.sources.USER),this.quill.setSelection(a,l,ne.sources.SILENT)}}}function _y(e,t){return{key:e,shiftKey:t,altKey:null,[e==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:n}=r;e==="ArrowRight"&&(n+=r.length+1);const[s]=this.quill.getLeaf(n);return s instanceof as?(e==="ArrowLeft"?t?this.quill.setSelection(r.index-1,r.length+1,ne.sources.USER):this.quill.setSelection(r.index-1,ne.sources.USER):t?this.quill.setSelection(r.index,r.length+1,ne.sources.USER):this.quill.setSelection(r.index+r.length+1,ne.sources.USER),!1):!0}}}function dj(e){return{key:e[0],shortKey:!0,handler(t,r){this.quill.format(e,!r.format[e],ne.sources.USER)}}}function CI(e){return{key:e?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,r){const n=e?"prev":"next",s=r.line,i=s.parent[n];if(i!=null){if(i.statics.blotName==="table-row"){let o=i.children.head,a=s;for(;a.prev!=null;)a=a.prev,o=o.next;const l=o.offset(this.quill.scroll)+Math.min(r.offset,o.length()-1);this.quill.setSelection(l,0,ne.sources.USER)}}else{const o=s.table()[n];o!=null&&(e?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,ne.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,ne.sources.USER))}return!1}}}function k3e(e){if(typeof e=="string"||typeof e=="number")e={key:e};else if(typeof e=="object")e=jd(e);else return null;return e.shortKey&&(e[_3e]=e.shortKey,delete e.shortKey),e}function yA(e){let{quill:t,range:r}=e;const n=t.getLines(r);let s={};if(n.length>1){const i=n[0].formats(),o=n[n.length-1].formats();s=Ss.AttributeMap.diff(o,i)||{}}t.deleteText(r,ne.sources.USER),Object.keys(s).length>0&&t.formatLine(r.index,1,s,ne.sources.USER),t.setSelection(r.index,ne.sources.SILENT)}function S3e(e,t,r,n){return t.prev==null&&t.next==null?r.prev==null&&r.next==null?n===0?-1:1:r.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const N3e=/font-weight:\s*normal/,C3e=["P","OL","UL"],EI=e=>e&&C3e.includes(e.tagName),E3e=e=>{Array.from(e.querySelectorAll("br")).filter(t=>EI(t.previousElementSibling)&&EI(t.nextElementSibling)).forEach(t=>{var r;(r=t.parentNode)==null||r.removeChild(t)})},T3e=e=>{Array.from(e.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var r;return(r=t.getAttribute("style"))==null?void 0:r.match(N3e)}).forEach(t=>{var r;const n=e.createDocumentFragment();n.append(...t.childNodes),(r=t.parentNode)==null||r.replaceChild(n,t)})};function A3e(e){e.querySelector('[id^="docs-internal-guid-"]')&&(T3e(e),E3e(e))}const O3e=/\bmso-list:[^;]*ignore/i,P3e=/\bmso-list:[^;]*\bl(\d+)/i,R3e=/\bmso-list:[^;]*\blevel(\d+)/i,D3e=(e,t)=>{const r=e.getAttribute("style"),n=r==null?void 0:r.match(P3e);if(!n)return null;const s=Number(n[1]),i=r==null?void 0:r.match(R3e),o=i?Number(i[1]):1,a=new RegExp(`@list l${s}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=t.match(a),c=l&&l[1]==="bullet"?"bullet":"ordered";return{id:s,indent:o,type:c,element:e}},M3e=e=>{var t,r;const n=Array.from(e.querySelectorAll("[style*=mso-list]")),s=[],i=[];n.forEach(l=>{(l.getAttribute("style")||"").match(O3e)?s.push(l):i.push(l)}),s.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)});const o=e.documentElement.innerHTML,a=i.map(l=>D3e(l,o)).filter(l=>l);for(;a.length;){const l=[];let c=a.shift();for(;c;)l.push(c),c=a.length&&((t=a[0])==null?void 0:t.element)===c.element.nextElementSibling&&a[0].id===c.id?a.shift():null;const u=document.createElement("ul");l.forEach(p=>{const v=document.createElement("li");v.setAttribute("data-list",p.type),p.indent>1&&v.setAttribute("class",`ql-indent-${p.indent-1}`),v.innerHTML=p.element.innerHTML,u.appendChild(v)});const h=(r=l[0])==null?void 0:r.element,{parentNode:f}=h??{};h&&(f==null||f.replaceChild(u,h)),l.slice(1).forEach(p=>{let{element:v}=p;f==null||f.removeChild(v)})}};function I3e(e){e.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&M3e(e)}const L3e=[I3e,A3e],F3e=e=>{e.documentElement&&L3e.forEach(t=>{t(e)})},$3e=ya("quill:clipboard"),z3e=[[Node.TEXT_NODE,Q3e],[Node.TEXT_NODE,AI],["br",V3e],[Node.ELEMENT_NODE,AI],[Node.ELEMENT_NODE,W3e],[Node.ELEMENT_NODE,B3e],[Node.ELEMENT_NODE,Z3e],["li",Y3e],["ol, ul",G3e],["pre",H3e],["tr",J3e],["b",hj("bold")],["i",hj("italic")],["strike",hj("strike")],["style",K3e]],U3e=[y3e,RW].reduce((e,t)=>(e[t.keyName]=t,e),{}),TI=[OW,pA,fA,MW,FW,zW].reduce((e,t)=>(e[t.keyName]=t,e),{});class UW extends Ci{constructor(t,r){super(t,r),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],z3e.concat(this.options.matchers??[]).forEach(n=>{let[s,i]=n;this.addMatcher(s,i)})}addMatcher(t,r){this.matchers.push([t,r])}convert(t){let{html:r,text:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[dn.blotName])return new Ae().insert(n||"",{[dn.blotName]:s[dn.blotName]});if(!r)return new Ae().insert(n||"",s);const i=this.convertHTML(r);return Xm(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new Ae().retain(i.length()-1).delete(1)):i}normalizeHTML(t){F3e(t)}convertHTML(t){const r=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(r);const n=r.body,s=new WeakMap,[i,o]=this.prepareMatching(n,s);return vA(this.quill.scroll,n,i,o,s)}dangerouslyPasteHTML(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ne.sources.API;if(typeof t=="string"){const s=this.convert({html:t,text:""});this.quill.setContents(s,r),this.quill.setSelection(0,ne.sources.SILENT)}else{const s=this.convert({html:r,text:""});this.quill.updateContents(new Ae().retain(t).concat(s),n),this.quill.setSelection(t+s.length(),ne.sources.SILENT)}}onCaptureCopy(t){var r,n;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[i]=this.quill.selection.getRange();if(i==null)return;const{html:o,text:a}=this.onCopy(i,s);(r=t.clipboardData)==null||r.setData("text/plain",a),(n=t.clipboardData)==null||n.setData("text/html",o),s&&yA({range:i,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(r=>r[0]!=="#").join(`
`)}onCapturePaste(t){var r,n,s,i,o;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const a=this.quill.getSelection(!0);if(a==null)return;const l=(r=t.clipboardData)==null?void 0:r.getData("text/html");let c=(n=t.clipboardData)==null?void 0:n.getData("text/plain");if(!l&&!c){const h=(s=t.clipboardData)==null?void 0:s.getData("text/uri-list");h&&(c=this.normalizeURIList(h))}const u=Array.from(((i=t.clipboardData)==null?void 0:i.files)||[]);if(!l&&u.length>0){this.quill.uploader.upload(a,u);return}if(l&&u.length>0){const h=new DOMParser().parseFromString(l,"text/html");if(h.body.childElementCount===1&&((o=h.body.firstElementChild)==null?void 0:o.tagName)==="IMG"){this.quill.uploader.upload(a,u);return}}this.onPaste(a,{html:l,text:c})}onCopy(t){const r=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:r}}onPaste(t,r){let{text:n,html:s}=r;const i=this.quill.getFormat(t.index),o=this.convert({text:n,html:s},i);$3e.log("onPaste",o,{text:n,html:s});const a=new Ae().retain(t.index).delete(t.length).concat(o);this.quill.updateContents(a,ne.sources.USER),this.quill.setSelection(a.length()-t.length,ne.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,r){const n=[],s=[];return this.matchers.forEach(i=>{const[o,a]=i;switch(o){case Node.TEXT_NODE:s.push(a);break;case Node.ELEMENT_NODE:n.push(a);break;default:Array.from(t.querySelectorAll(o)).forEach(l=>{if(r.has(l)){const c=r.get(l);c==null||c.push(a)}else r.set(l,[a])});break}}),[n,s]}}be(UW,"DEFAULTS",{matchers:[]});function pu(e,t,r,n){return n.query(t)?e.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[t])return s.push(i);const o=r?{[t]:r}:{};return s.insert(i.insert,{...o,...i.attributes})},new Ae):e}function Xm(e,t){let r="";for(let n=e.ops.length-1;n>=0&&r.length<t.length;--n){const s=e.ops[n];if(typeof s.insert!="string")break;r=s.insert+r}return r.slice(-1*t.length)===t}function el(e,t){if(!(e instanceof Element))return!1;const r=t.query(e);return r&&r.prototype instanceof as?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(e.tagName.toLowerCase())}function q3e(e,t){return e.previousElementSibling&&e.nextElementSibling&&!el(e.previousElementSibling,t)&&!el(e.nextElementSibling,t)}const jy=new WeakMap;function qW(e){return e==null?!1:(jy.has(e)||(e.tagName==="PRE"?jy.set(e,!0):jy.set(e,qW(e.parentNode))),jy.get(e))}function vA(e,t,r,n,s){return t.nodeType===t.TEXT_NODE?n.reduce((i,o)=>o(t,i,e),new Ae):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((i,o)=>{let a=vA(e,o,r,n,s);return o.nodeType===t.ELEMENT_NODE&&(a=r.reduce((l,c)=>c(o,l,e),a),a=(s.get(o)||[]).reduce((l,c)=>c(o,l,e),a)),i.concat(a)},new Ae):new Ae}function hj(e){return(t,r,n)=>pu(r,e,!0,n)}function B3e(e,t,r){const n=oo.keys(e),s=Si.keys(e),i=Ol.keys(e),o={};return n.concat(s).concat(i).forEach(a=>{let l=r.query(a,Oe.ATTRIBUTE);l!=null&&(o[l.attrName]=l.value(e),o[l.attrName])||(l=U3e[a],l!=null&&(l.attrName===a||l.keyName===a)&&(o[l.attrName]=l.value(e)||void 0),l=TI[a],l!=null&&(l.attrName===a||l.keyName===a)&&(l=TI[a],o[l.attrName]=l.value(e)||void 0))}),Object.entries(o).reduce((a,l)=>{let[c,u]=l;return pu(a,c,u,r)},t)}function W3e(e,t,r){const n=r.query(e);if(n==null)return t;if(n.prototype instanceof as){const s={},i=n.value(e);if(i!=null)return s[n.blotName]=i,new Ae().insert(s,n.formats(e,r))}else if(n.prototype instanceof sm&&!Xm(t,`
`)&&t.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return pu(t,n.blotName,n.formats(e,r),r);return t}function V3e(e,t){return Xm(t,`
`)||t.insert(`
`),t}function H3e(e,t,r){const n=r.query("code-block"),s=n&&"formats"in n&&typeof n.formats=="function"?n.formats(e,r):!0;return pu(t,"code-block",s,r)}function K3e(){return new Ae}function Y3e(e,t,r){const n=r.query(e);if(n==null||n.blotName!=="list"||!Xm(t,`
`))return t;let s=-1,i=e.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?t:t.reduce((o,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?o.push(a):o.insert(a.insert,{indent:s,...a.attributes||{}}):o,new Ae)}function G3e(e,t,r){const n=e;let s=n.tagName==="OL"?"ordered":"bullet";const i=n.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),pu(t,"list",s,r)}function AI(e,t,r){if(!Xm(t,`
`)){if(el(e,r)&&(e.childNodes.length>0||e instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&e.nextSibling){let n=e.nextSibling;for(;n!=null;){if(el(n,r))return t.insert(`
`);const s=r.query(n);if(s&&s.prototype instanceof Ns)return t.insert(`
`);n=n.firstChild}}}return t}function Z3e(e,t,r){var n;const s={},i=e.style||{};return i.fontStyle==="italic"&&(s.italic=!0),i.textDecoration==="underline"&&(s.underline=!0),i.textDecoration==="line-through"&&(s.strike=!0),((n=i.fontWeight)!=null&&n.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(s.bold=!0),t=Object.entries(s).reduce((o,a)=>{let[l,c]=a;return pu(o,l,c,r)},t),parseFloat(i.textIndent||0)>0?new Ae().insert("	").concat(t):t}function J3e(e,t,r){var n,s;const i=((n=e.parentElement)==null?void 0:n.tagName)==="TABLE"?e.parentElement:(s=e.parentElement)==null?void 0:s.parentElement;if(i!=null){const o=Array.from(i.querySelectorAll("tr")).indexOf(e)+1;return pu(t,"table",o,r)}return t}function Q3e(e,t,r){var n;let s=e.data;if(((n=e.parentElement)==null?void 0:n.tagName)==="O:P")return t.insert(s.trim());if(!qW(e)){if(s.trim().length===0&&s.includes(`
`)&&!q3e(e,r))return t;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(e.previousSibling==null&&e.parentElement!=null&&el(e.parentElement,r)||e.previousSibling instanceof Element&&el(e.previousSibling,r))&&(s=s.replace(/^ /,"")),(e.nextSibling==null&&e.parentElement!=null&&el(e.parentElement,r)||e.nextSibling instanceof Element&&el(e.nextSibling,r))&&(s=s.replace(/ $/,"")),s=s.replaceAll(" "," ")}return t.insert(s)}class BW extends Ci{constructor(t,r){super(t,r),be(this,"lastRecorded",0),be(this,"ignoreChange",!1),be(this,"stack",{undo:[],redo:[]}),be(this,"currentRange",null),this.quill.on(ne.events.EDITOR_CHANGE,(n,s,i,o)=>{n===ne.events.SELECTION_CHANGE?s&&o!==ne.sources.SILENT&&(this.currentRange=s):n===ne.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===ne.sources.USER?this.record(s,i):this.transform(s)),this.currentRange=JS(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",n=>{n.inputType==="historyUndo"?(this.undo(),n.preventDefault()):n.inputType==="historyRedo"&&(this.redo(),n.preventDefault())})}change(t,r){if(this.stack[t].length===0)return;const n=this.stack[t].pop();if(!n)return;const s=this.quill.getContents(),i=n.delta.invert(s);this.stack[r].push({delta:i,range:JS(n.range,i)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,ne.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,r){if(t.ops.length===0)return;this.stack.redo=[];let n=t.invert(r),s=this.currentRange;const i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(n=n.compose(o.delta),s=o.range)}else this.lastRecorded=i;n.length()!==0&&(this.stack.undo.push({delta:n,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){OI(this.stack.undo,t),OI(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,ne.sources.USER);else{const r=eMe(this.quill.scroll,t.delta);this.quill.setSelection(r,ne.sources.USER)}}}be(BW,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function OI(e,t){let r=t;for(let n=e.length-1;n>=0;n-=1){const s=e[n];e[n]={delta:r.transform(s.delta,!0),range:s.range&&JS(s.range,r)},r=s.delta.transform(r),e[n].delta.length()===0&&e.splice(n,1)}}function X3e(e,t){const r=t.ops[t.ops.length-1];return r==null?!1:r.insert!=null?typeof r.insert=="string"&&r.insert.endsWith(`
`):r.attributes!=null?Object.keys(r.attributes).some(n=>e.query(n,Oe.BLOCK)!=null):!1}function eMe(e,t){const r=t.reduce((s,i)=>s+(i.delete||0),0);let n=t.length()-r;return X3e(e,t)&&(n-=1),n}function JS(e,t){if(!e)return e;const r=t.transformPosition(e.index),n=t.transformPosition(e.index+e.length);return{index:r,length:n-r}}class WW extends Ci{constructor(t,r){super(t,r),t.root.addEventListener("drop",n=>{var s;n.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){const a=document.caretPositionFromPoint(n.clientX,n.clientY);i=document.createRange(),i.setStart(a.offsetNode,a.offset),i.setEnd(a.offsetNode,a.offset)}const o=i&&t.selection.normalizeNative(i);if(o){const a=t.selection.normalizedToRange(o);(s=n.dataTransfer)!=null&&s.files&&this.upload(a,n.dataTransfer.files)}})}upload(t,r){const n=[];Array.from(r).forEach(s=>{var i;s&&(i=this.options.mimetypes)!=null&&i.includes(s.type)&&n.push(s)}),n.length>0&&this.options.handler.call(this,t,n)}}WW.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(e,t){if(!this.quill.scroll.query("image"))return;const r=t.map(n=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(n)}));Promise.all(r).then(n=>{const s=n.reduce((i,o)=>i.insert({image:o}),new Ae().retain(e.index).delete(e.length));this.quill.updateContents(s,Ce.sources.USER),this.quill.setSelection(e.index+n.length,Ce.sources.SILENT)})}};const tMe=["insertText","insertReplacementText"];class rMe extends Ci{constructor(t,r){super(t,r),t.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||t.on(ne.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){yA({range:t,quill:this.quill})}replaceText(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(r){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new Ae().retain(t.index).insert(r,n),ne.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+r.length,0,ne.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!tMe.includes(t.inputType))return;const r=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!r||r.collapsed===!0)return;const n=nMe(t);if(n==null)return;const s=this.quill.selection.normalizeNative(r),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function nMe(e){var t;return typeof e.data=="string"?e.data:(t=e.dataTransfer)!=null&&t.types.includes("text/plain")?e.dataTransfer.getData("text/plain"):null}const sMe=/Mac/i.test(navigator.platform),iMe=100,oMe=e=>!!(e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="Home"||sMe&&e.key==="a"&&e.ctrlKey===!0);class aMe extends Ci{constructor(t,r){super(t,r),be(this,"isListening",!1),be(this,"selectionChangeDeadline",0),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,r){let{line:n,event:s}=r;if(!(n instanceof hi)||!n.uiNode)return!0;const i=getComputedStyle(n.domNode).direction==="rtl";return i&&s.key!=="ArrowRight"||!i&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(s.shiftKey?1:0),ne.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&oMe(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+iMe,this.isListening)return;this.isListening=!0;const t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const r=t.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const n=this.quill.scroll.find(r.startContainer);if(!(n instanceof hi)||!n.uiNode)return;const s=document.createRange();s.setStartAfter(n.uiNode),s.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(s)}}ne.register({"blots/block":Gr,"blots/block/embed":Ns,"blots/break":Ni,"blots/container":hu,"blots/cursor":Cw,"blots/embed":dA,"blots/inline":Pl,"blots/scroll":ed,"blots/text":bi,"modules/clipboard":UW,"modules/history":BW,"modules/keyboard":Tw,"modules/uploader":WW,"modules/input":rMe,"modules/uiNode":aMe});class lMe extends Si{add(t,r){let n=0;if(r==="+1"||r==="-1"){const s=this.value(t)||0;n=r==="+1"?s+1:s-1}else typeof r=="number"&&(n=r);return n===0?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,r){return super.canAdd(t,r)||super.canAdd(t,parseInt(r,10))}value(t){return parseInt(super.value(t),10)||void 0}}const cMe=new lMe("indent","ql-indent",{scope:Oe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class QS extends Gr{}be(QS,"blotName","blockquote"),be(QS,"tagName","blockquote");class XS extends Gr{static formats(t){return this.tagName.indexOf(t.tagName)+1}}be(XS,"blotName","header"),be(XS,"tagName",["H1","H2","H3","H4","H5","H6"]);class eg extends hu{}eg.blotName="list-container";eg.tagName="OL";class tg extends Gr{static create(t){const r=super.create();return r.setAttribute("data-list",t),r}static formats(t){return t.getAttribute("data-list")||void 0}static register(){ne.register(eg)}constructor(t,r){super(t,r);const n=r.ownerDocument.createElement("span"),s=i=>{if(!t.isEnabled())return;const o=this.statics.formats(r,t);o==="checked"?(this.format("list","unchecked"),i.preventDefault()):o==="unchecked"&&(this.format("list","checked"),i.preventDefault())};n.addEventListener("mousedown",s),n.addEventListener("touchstart",s),this.attachUI(n)}format(t,r){t===this.statics.blotName&&r?this.domNode.setAttribute("data-list",r):super.format(t,r)}}tg.blotName="list";tg.tagName="LI";eg.allowedChildren=[tg];tg.requiredContainer=eg;class am extends Pl{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}be(am,"blotName","bold"),be(am,"tagName",["STRONG","B"]);class eN extends am{}be(eN,"blotName","italic"),be(eN,"tagName",["EM","I"]);class tl extends Pl{static create(t){const r=super.create(t);return r.setAttribute("href",this.sanitize(t)),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}static formats(t){return t.getAttribute("href")}static sanitize(t){return VW(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,r){t!==this.statics.blotName||!r?super.format(t,r):this.domNode.setAttribute("href",this.constructor.sanitize(r))}}be(tl,"blotName","link"),be(tl,"tagName","A"),be(tl,"SANITIZED_URL","about:blank"),be(tl,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function VW(e,t){const r=document.createElement("a");r.href=e;const n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}class tN extends Pl{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}be(tN,"blotName","script"),be(tN,"tagName",["SUB","SUP"]);class rN extends am{}be(rN,"blotName","strike"),be(rN,"tagName",["S","STRIKE"]);class nN extends Pl{}be(nN,"blotName","underline"),be(nN,"tagName","U");class Xy extends dA{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const r=super.create(t);return typeof t=="string"&&(window.katex.render(t,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",t)),r}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}be(Xy,"blotName","formula"),be(Xy,"className","ql-formula"),be(Xy,"tagName","SPAN");const PI=["alt","height","width"];class sN extends as{static create(t){const r=super.create(t);return typeof t=="string"&&r.setAttribute("src",this.sanitize(t)),r}static formats(t){return PI.reduce((r,n)=>(t.hasAttribute(n)&&(r[n]=t.getAttribute(n)),r),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return VW(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,r){PI.indexOf(t)>-1?r?this.domNode.setAttribute(t,r):this.domNode.removeAttribute(t):super.format(t,r)}}be(sN,"blotName","image"),be(sN,"tagName","IMG");const RI=["height","width"];class ev extends Ns{static create(t){const r=super.create(t);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen","true"),r.setAttribute("src",this.sanitize(t)),r}static formats(t){return RI.reduce((r,n)=>(t.hasAttribute(n)&&(r[n]=t.getAttribute(n)),r),{})}static sanitize(t){return tl.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,r){RI.indexOf(t)>-1?r?this.domNode.setAttribute(t,r):this.domNode.removeAttribute(t):super.format(t,r)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}be(ev,"blotName","video"),be(ev,"className","ql-video"),be(ev,"tagName","IFRAME");const Yf=new Si("code-token","hljs",{scope:Oe.INLINE});class ia extends Pl{static formats(t,r){for(;t!=null&&t!==r.domNode;){if(t.classList&&t.classList.contains(dn.className))return super.formats(t,r);t=t.parentNode}}constructor(t,r,n){super(t,r,n),Yf.add(this.domNode,n)}format(t,r){t!==ia.blotName?super.format(t,r):r?Yf.add(this.domNode,r):(Yf.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Yf.value(this.domNode)||this.unwrap()}}ia.blotName="code-token";ia.className="ql-token";class js extends dn{static create(t){const r=super.create(t);return typeof t=="string"&&r.setAttribute("data-language",t),r}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,r){t===this.statics.blotName&&r?this.domNode.setAttribute("data-language",r):super.format(t,r)}replaceWith(t,r){return this.formatAt(0,this.length(),ia.blotName,!1),super.replaceWith(t,r)}}class vp extends fu{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,r){t===js.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(t,r)}))}formatAt(t,r,n,s){n===js.blotName&&(this.forceNext=!0),super.formatAt(t,r,n,s)}highlight(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const n=`${Array.from(this.domNode.childNodes).filter(i=>i!==this.uiNode).map(i=>i.textContent).join(`
`)}
`,s=js.formats(this.children.head.domNode);if(r||this.forceNext||this.cachedText!==n){if(n.trim().length>0||this.cachedText==null){const i=this.children.reduce((a,l)=>a.concat(EW(l,!1)),new Ae),o=t(n,s);i.diff(o).reduce((a,l)=>{let{retain:c,attributes:u}=l;return c?(u&&Object.keys(u).forEach(h=>{[js.blotName,ia.blotName].includes(h)&&this.formatAt(a,c,h,u[h])}),a+c):a},0)}this.cachedText=n,this.forceNext=!1}}html(t,r){const[n]=this.children.find(t);return`<pre data-language="${n?js.formats(n.domNode):"plain"}">
${Nw(this.code(t,r))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const r=js.formats(this.children.head.domNode);r!==this.uiNode.value&&(this.uiNode.value=r)}}}vp.allowedChildren=[js];js.requiredContainer=vp;js.allowedChildren=[ia,Cw,bi,Ni];const uMe=(e,t,r)=>{if(typeof e.versionString=="string"){const n=e.versionString.split(".")[0];if(parseInt(n,10)>=11)return e.highlight(r,{language:t}).value}return e.highlight(t,r).value};class HW extends Ci{static register(){ne.register(ia,!0),ne.register(js,!0),ne.register(vp,!0)}constructor(t,r){if(super(t,r),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,s)=>{let{key:i}=s;return n[i]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(ne.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof vp))return;const r=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:s,label:i}=n;const o=r.ownerDocument.createElement("option");o.textContent=i,o.setAttribute("value",s),r.appendChild(o)}),r.addEventListener("change",()=>{t.format(js.blotName,r.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(r),t.children.head&&(r.value=js.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(ne.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(ne.sources.USER);const n=this.quill.getSelection();(t==null?this.quill.scroll.descendants(vp):[t]).forEach(s=>{s.highlight(this.highlightBlot,r)}),this.quill.update(ne.sources.SILENT),n!=null&&this.quill.setSelection(n,ne.sources.SILENT)}highlightBlot(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(r=this.languages[r]?r:"plain",r==="plain")return Nw(t).split(`
`).reduce((s,i,o)=>(o!==0&&s.insert(`
`,{[dn.blotName]:r}),s.insert(i)),new Ae);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(dn.className),n.innerHTML=uMe(this.options.hljs,r,t),vA(this.quill.scroll,n,[(s,i)=>{const o=Yf.value(s);return o?i.compose(new Ae().retain(i.length(),{[ia.blotName]:o})):i}],[(s,i)=>s.data.split(`
`).reduce((o,a,l)=>(l!==0&&o.insert(`
`,{[dn.blotName]:r}),o.insert(a)),i)],new WeakMap)}}HW.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const iN=class KW extends Gr{static create(t){const r=super.create();return t?r.setAttribute("data-row",t):r.setAttribute("data-row",bA()),r}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,r){t===KW.blotName&&r?this.domNode.setAttribute("data-row",r):super.format(t,r)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};be(iN,"blotName","table"),be(iN,"tagName","TD");let Fo=iN;class oa extends hu{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),r=this.children.tail.formats(),n=this.next.children.head.formats(),s=this.next.children.tail.formats();return t.table===r.table&&t.table===n.table&&t.table===s.table}return!1}optimize(t){super.optimize(t),this.children.forEach(r=>{if(r.next==null)return;const n=r.formats(),s=r.next.formats();if(n.table!==s.table){const i=this.splitAfter(r);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}be(oa,"blotName","table-row"),be(oa,"tagName","TR");class Xi extends hu{}be(Xi,"blotName","table-body"),be(Xi,"tagName","TBODY");class lh extends hu{balanceCells(){const t=this.descendants(oa),r=t.reduce((n,s)=>Math.max(s.children.length,n),0);t.forEach(n=>{new Array(r-n.children.length).fill(0).forEach(()=>{let s;n.children.head!=null&&(s=Fo.formats(n.children.head.domNode));const i=this.scroll.create(Fo.blotName,s);n.appendChild(i),i.optimize()})})}cells(t){return this.rows().map(r=>r.children.at(t))}deleteColumn(t){const[r]=this.descendant(Xi);r==null||r.children.head==null||r.children.forEach(n=>{const s=n.children.at(t);s!=null&&s.remove()})}insertColumn(t){const[r]=this.descendant(Xi);r==null||r.children.head==null||r.children.forEach(n=>{const s=n.children.at(t),i=Fo.formats(n.children.head.domNode),o=this.scroll.create(Fo.blotName,i);n.insertBefore(o,s)})}insertRow(t){const[r]=this.descendant(Xi);if(r==null||r.children.head==null)return;const n=bA(),s=this.scroll.create(oa.blotName);r.children.head.children.forEach(()=>{const o=this.scroll.create(Fo.blotName,n);s.appendChild(o)});const i=r.children.at(t);r.insertBefore(s,i)}rows(){const t=this.children.head;return t==null?[]:t.children.map(r=>r)}}be(lh,"blotName","table-container"),be(lh,"tagName","TABLE");lh.allowedChildren=[Xi];Xi.requiredContainer=lh;Xi.allowedChildren=[oa];oa.requiredContainer=Xi;oa.allowedChildren=[Fo];Fo.requiredContainer=oa;function bA(){return`row-${Math.random().toString(36).slice(2,6)}`}class dMe extends Ci{static register(){ne.register(Fo),ne.register(oa),ne.register(Xi),ne.register(lh)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(lh).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,r]=this.getTable();r!=null&&(t.deleteColumn(r.cellOffset()),this.quill.update(ne.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(ne.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const r=t.offset();t.remove(),this.quill.update(ne.sources.USER),this.quill.setSelection(r,ne.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[r,n]=this.quill.getLine(t.index);if(r==null||r.statics.blotName!==Fo.blotName)return[null,null,null,-1];const s=r.parent;return[s.parent.parent,s,r,n]}insertColumn(t){const r=this.quill.getSelection();if(!r)return;const[n,s,i]=this.getTable(r);if(i==null)return;const o=i.cellOffset();n.insertColumn(o+t),this.quill.update(ne.sources.USER);let a=s.rowOffset();t===0&&(a+=1),this.quill.setSelection(r.index+a,r.length,ne.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const r=this.quill.getSelection();if(!r)return;const[n,s,i]=this.getTable(r);if(i==null)return;const o=s.rowOffset();n.insertRow(o+t),this.quill.update(ne.sources.USER),t>0?this.quill.setSelection(r,ne.sources.SILENT):this.quill.setSelection(r.index+s.children.length,r.length,ne.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,r){const n=this.quill.getSelection();if(n==null)return;const s=new Array(t).fill(0).reduce(i=>{const o=new Array(r).fill(`
`).join("");return i.insert(o,{table:bA()})},new Ae().retain(n.index));this.quill.updateContents(s,ne.sources.USER),this.quill.setSelection(n.index,ne.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(ne.events.SCROLL_OPTIMIZE,t=>{t.some(r=>["TD","TR","TBODY","TABLE"].includes(r.target.tagName)?(this.quill.once(ne.events.TEXT_CHANGE,(n,s,i)=>{i===ne.sources.USER&&this.balanceTables()}),!0):!1)})}}const DI=ya("quill:toolbar");class xA extends Ci{constructor(t,r){var n,s;if(super(t,r),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),hMe(i,this.options.container),(s=(n=t.container)==null?void 0:n.parentNode)==null||s.insertBefore(i,t.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){DI.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var o;const a=(o=this.options.handlers)==null?void 0:o[i];a&&this.addHandler(i,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(ne.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(t,r){this.handlers[t]=r}attach(t){let r=Array.from(t.classList).find(s=>s.indexOf("ql-")===0);if(!r)return;if(r=r.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[r]==null&&this.quill.scroll.query(r)==null){DI.warn("ignoring attaching to nonexistent format",r,t);return}const n=t.tagName==="SELECT"?"change":"click";t.addEventListener(n,s=>{let i;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const a=t.options[t.selectedIndex];a.hasAttribute("selected")?i=!1:i=a.value||!1}else t.classList.contains("ql-active")?i=!1:i=t.value||!t.hasAttribute("value"),s.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[r]!=null)this.handlers[r].call(this,i);else if(this.quill.scroll.query(r).prototype instanceof as){if(i=prompt(`Enter ${r}`),!i)return;this.quill.updateContents(new Ae().retain(o.index).delete(o.length).insert({[r]:i}),ne.sources.USER)}else this.quill.format(r,i,ne.sources.USER);this.update(o)}),this.controls.push([r,t])}update(t){const r=t==null?{}:this.quill.getFormat(t);this.controls.forEach(n=>{const[s,i]=n;if(i.tagName==="SELECT"){let o=null;if(t==null)o=null;else if(r[s]==null)o=i.querySelector("option[selected]");else if(!Array.isArray(r[s])){let a=r[s];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),o=i.querySelector(`option[value="${a}"]`)}o==null?(i.value="",i.selectedIndex=-1):o.selected=!0}else if(t==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const o=r[s],a=o===i.getAttribute("value")||o!=null&&o.toString()===i.getAttribute("value")||o==null&&!i.getAttribute("value");i.classList.toggle("ql-active",a),i.setAttribute("aria-pressed",a.toString())}else{const o=r[s]!=null;i.classList.toggle("ql-active",o),i.setAttribute("aria-pressed",o.toString())}})}}xA.DEFAULTS={};function MI(e,t,r){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${t}`),n.setAttribute("aria-pressed","false"),r!=null?(n.value=r,n.setAttribute("aria-label",`${t}: ${r}`)):n.setAttribute("aria-label",t),e.appendChild(n)}function hMe(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(r=>{const n=document.createElement("span");n.classList.add("ql-formats"),r.forEach(s=>{if(typeof s=="string")MI(n,s);else{const i=Object.keys(s)[0],o=s[i];Array.isArray(o)?fMe(n,i,o):MI(n,i,o)}}),e.appendChild(n)})}function fMe(e,t,r){const n=document.createElement("select");n.classList.add(`ql-${t}`),r.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),n.appendChild(i)}),e.appendChild(n)}xA.DEFAULTS={container:null,handlers:{clean(){const e=this.quill.getSelection();if(e!=null)if(e.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(r=>{this.quill.scroll.query(r,Oe.INLINE)!=null&&this.quill.format(r,!1,ne.sources.USER)})}else this.quill.removeFormat(e.index,e.length,ne.sources.USER)},direction(e){const{align:t}=this.quill.getFormat();e==="rtl"&&t==null?this.quill.format("align","right",ne.sources.USER):!e&&t==="right"&&this.quill.format("align",!1,ne.sources.USER),this.quill.format("direction",e,ne.sources.USER)},indent(e){const t=this.quill.getSelection(),r=this.quill.getFormat(t),n=parseInt(r.indent||0,10);if(e==="+1"||e==="-1"){let s=e==="+1"?1:-1;r.direction==="rtl"&&(s*=-1),this.quill.format("indent",n+s,ne.sources.USER)}},link(e){e===!0&&(e=prompt("Enter link URL:")),this.quill.format("link",e,ne.sources.USER)},list(e){const t=this.quill.getSelection(),r=this.quill.getFormat(t);e==="check"?r.list==="checked"||r.list==="unchecked"?this.quill.format("list",!1,ne.sources.USER):this.quill.format("list","unchecked",ne.sources.USER):this.quill.format("list",e,ne.sources.USER)}}};const pMe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',mMe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',gMe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',yMe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',vMe='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',bMe='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',xMe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',wMe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',II='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',_Me='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',jMe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',kMe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',SMe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',NMe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',CMe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',EMe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',TMe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',AMe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',OMe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',PMe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',RMe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',DMe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',MMe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',IMe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',LMe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',FMe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',$Me='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',zMe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',UMe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',qMe='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',BMe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',WMe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',VMe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',lm={align:{"":pMe,center:mMe,right:gMe,justify:yMe},background:vMe,blockquote:bMe,bold:xMe,clean:wMe,code:II,"code-block":II,color:_Me,direction:{"":jMe,rtl:kMe},formula:SMe,header:{1:NMe,2:CMe,3:EMe,4:TMe,5:AMe,6:OMe},italic:PMe,image:RMe,indent:{"+1":DMe,"-1":MMe},link:IMe,list:{bullet:LMe,check:FMe,ordered:$Me},script:{sub:zMe,super:UMe},strike:qMe,table:BMe,underline:WMe,video:VMe},HMe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let LI=0;function FI(e,t){e.setAttribute(t,`${e.getAttribute(t)!=="true"}`)}class Aw{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",r=>{switch(r.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),r.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),FI(this.label,"aria-expanded"),FI(this.options,"aria-hidden")}buildItem(t){const r=document.createElement("span");r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&r.setAttribute("data-value",n),t.textContent&&r.setAttribute("data-label",t.textContent),r.addEventListener("click",()=>{this.selectItem(r,!0)}),r.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(r,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),r}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=HMe,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${LI}`,LI+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(r=>{const n=this.buildItem(r);t.appendChild(n),r.selected===!0&&this.selectItem(n)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.container.querySelector(".ql-selected");t!==n&&(n!=null&&n.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),r&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const r=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}class YW extends Aw{constructor(t,r){super(t),this.label.innerHTML=r,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(t){const r=super.buildItem(t);return r.style.backgroundColor=t.getAttribute("value")||"",r}selectItem(t,r){super.selectItem(t,r);const n=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=s:n.style.fill=s)}}class GW extends Aw{constructor(t,r){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=r[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,r){super.selectItem(t,r);const n=t||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}}const KMe=e=>{const{overflowY:t}=getComputedStyle(e,null);return t!=="visible"&&t!=="clip"};class ZW{constructor(t,r){this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,KMe(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const r=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${r}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let o=0;if(i.right>s.right&&(o=s.right-i.right,this.root.style.left=`${r+o}px`),i.left<s.left&&(o=s.left-i.left,this.root.style.left=`${r+o}px`),i.bottom>s.bottom){const a=i.bottom-i.top,l=t.bottom-t.top+a;this.root.style.top=`${n-l}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const YMe=[!1,"center","right","justify"],GMe=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],ZMe=[!1,"serif","monospace"],JMe=["1","2","3",!1],QMe=["small",!1,"large","huge"];class rg extends Ew{constructor(t,r){super(t,r);const n=s=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};t.emitter.listenDOM("click",document.body,n)}addModule(t){const r=super.addModule(t);return t==="toolbar"&&this.extendToolbar(r),r}buildButtons(t,r){Array.from(t).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),r[s]!=null))if(s==="direction")n.innerHTML=r[s][""]+r[s].rtl;else if(typeof r[s]=="string")n.innerHTML=r[s];else{const i=n.value||"";i!=null&&r[s][i]&&(n.innerHTML=r[s][i])}})})}buildPickers(t,r){this.pickers=Array.from(t).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&Tf(s,YMe),typeof r.align=="object"))return new GW(s,r.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&Tf(s,GMe,i==="background"?"#ffffff":"#000000"),new YW(s,r[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?Tf(s,ZMe):s.classList.contains("ql-header")?Tf(s,JMe):s.classList.contains("ql-size")&&Tf(s,QMe)),new Aw(s)});const n=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(Ce.events.EDITOR_CHANGE,n)}}rg.DEFAULTS=il({},Ew.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let e=this.container.querySelector("input.ql-image[type=file]");e==null&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),e.classList.add("ql-image"),e.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,e.files),e.value=""}),this.container.appendChild(e)),e.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class JW extends ZW{constructor(t,r){super(t,r),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;r!=null?this.textbox.value=r:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:r}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Ce.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Ce.sources.USER)),this.quill.root.scrollTop=r;break}case"video":t=XMe(t);case"formula":{if(!t)break;const r=this.quill.getSelection(!0);if(r!=null){const n=r.index+r.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,Ce.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",Ce.sources.USER),this.quill.setSelection(n+2,Ce.sources.USER)}break}}this.textbox.value="",this.hide()}}function XMe(e){let t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:e}function Tf(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(n=>{const s=document.createElement("option");n===r?s.setAttribute("selected","selected"):s.setAttribute("value",String(n)),e.appendChild(s)})}const eIe=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class QW extends JW{constructor(t,r){super(t,r),this.quill.on(Ce.events.EDITOR_CHANGE,(n,s,i,o)=>{if(n===Ce.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&o===Ce.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const a=this.quill.getLines(s.index,s.length);if(a.length===1){const l=this.quill.getBounds(s);l!=null&&this.position(l)}else{const l=a[a.length-1],c=this.quill.getIndex(l),u=Math.min(l.length()-1,s.index+s.length-c),h=this.quill.getBounds(new Zc(c,u));h!=null&&this.position(h)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ce.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const r=this.quill.getBounds(t);r!=null&&this.position(r)}},1)})}cancel(){this.show()}position(t){const r=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",r!==0&&(n.style.marginLeft=`${-1*r-n.offsetWidth/2}px`),r}}be(QW,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class XW extends rg{constructor(t,r){r.modules.toolbar!=null&&r.modules.toolbar.container==null&&(r.modules.toolbar.container=eIe),super(t,r),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new QW(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),lm),this.buildPickers(t.container.querySelectorAll("select"),lm))}}XW.DEFAULTS=il({},rg.DEFAULTS,{modules:{toolbar:{handlers:{link(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1,ne.sources.USER)}}}}});const tIe=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class eV extends JW{constructor(){super(...arguments),be(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,Ce.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(Ce.events.SELECTION_CHANGE,(t,r,n)=>{if(t!=null){if(t.length===0&&n===Ce.sources.USER){const[s,i]=this.quill.scroll.descendant(tl,t.index);if(s!=null){this.linkRange=new Zc(t.index-i,s.length());const o=tl.formats(s.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}be(eV,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class tV extends rg{constructor(t,r){r.modules.toolbar!=null&&r.modules.toolbar.container==null&&(r.modules.toolbar.container=tIe),super(t,r),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),lm),this.buildPickers(t.container.querySelectorAll("select"),lm),this.tooltip=new eV(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(r,n)=>{t.handlers.link.call(t,!n.format.link)}))}}tV.DEFAULTS=il({},rg.DEFAULTS,{modules:{toolbar:{handlers:{link(e){if(e){const t=this.quill.getSelection();if(t==null||t.length===0)return;let r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&r.indexOf("mailto:")!==0&&(r=`mailto:${r}`);const{tooltip:n}=this.quill.theme;n.edit("link",r)}else this.quill.format("link",!1,ne.sources.USER)}}}}});ne.register({"attributors/attribute/direction":RW,"attributors/class/align":AW,"attributors/class/background":b3e,"attributors/class/color":v3e,"attributors/class/direction":DW,"attributors/class/font":LW,"attributors/class/size":$W,"attributors/style/align":OW,"attributors/style/background":pA,"attributors/style/color":fA,"attributors/style/direction":MW,"attributors/style/font":FW,"attributors/style/size":zW},!0);ne.register({"formats/align":AW,"formats/direction":DW,"formats/indent":cMe,"formats/background":pA,"formats/color":fA,"formats/font":LW,"formats/size":$W,"formats/blockquote":QS,"formats/code-block":dn,"formats/header":XS,"formats/list":tg,"formats/bold":am,"formats/code":mA,"formats/italic":eN,"formats/link":tl,"formats/script":tN,"formats/strike":rN,"formats/underline":nN,"formats/formula":Xy,"formats/image":sN,"formats/video":ev,"modules/syntax":HW,"modules/table":dMe,"modules/toolbar":xA,"themes/bubble":XW,"themes/snow":tV,"ui/icons":lm,"ui/picker":Aw,"ui/icon-picker":GW,"ui/color-picker":YW,"ui/tooltip":ZW},!0);class ng extends ue.Component{constructor(t){super(t),this.editingAreaRef=g.createRef(),this.containerRef=g.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(n,s,i,o)=>{var a,l;n==="text-change"?(a=this.onEditorChangeText)==null||a.call(this,this.editor.root.innerHTML,s,o,this.unprivilegedEditor):n==="selection-change"&&((l=this.onEditorChangeSelection)==null||l.call(this,s,o,this.unprivilegedEditor))};const r=this.isControlled()?t.value:t.defaultValue;this.value=r??""}validateProps(t){if(ue.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ue.Children.count(t.children)){const r=ue.Children.only(t.children);if((r==null?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(t,r){if(this.validateProps(t),!this.editor||this.state.generation!==r.generation)return!0;if("value"in t){const n=this.getEditorContents(),s=t.value??"";this.isEqualValue(s,n)||this.setEditorContents(this.editor,s)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),[...this.cleanProps,...this.dirtyProps].some(n=>!Va(t[n],this.props[n]))}shouldComponentRegenerate(t){return this.dirtyProps.some(r=>!Va(t[r],this.props[r]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(t,r){if(this.editor&&this.shouldComponentRegenerate(t)){const n=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){const{delta:n,selection:s}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const i=this.editor;i.setContents(n),$I(()=>this.setEditorSelection(i,s))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){var t,r;if(!this.editor)return;this.unhookEditor(this.editor);const n=(t=this.props.modules)==null?void 0:t.toolbar;if(!(typeof n=="object"&&n&&"container"in n&&typeof n.container=="string"||typeof n=="string")){const s=(r=this.containerRef.current)==null?void 0:r.querySelector(".ql-toolbar");s&&s.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(t,r){const n=new ne(t,r);return r.tabIndex!=null&&this.setEditorTabIndex(n,r.tabIndex),this.hookEditor(n),n}hookEditor(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)}unhookEditor(t){t.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(t){return t&&t.ops}isEqualValue(t,r){return this.isDelta(t)&&this.isDelta(r)?Va(t.ops,r.ops):Va(t,r)}setEditorContents(t,r){this.value=r;const n=this.getEditorSelection();typeof r=="string"?t.setContents(t.clipboard.convert({html:r})):t.setContents(r),$I(()=>this.setEditorSelection(t,n))}setEditorSelection(t,r){if(this.selection=r,r){const n=t.getLength();r.index=Math.max(0,Math.min(r.index,n-1)),r.length=Math.max(0,Math.min(r.length,n-1-r.index)),t.setSelection(r)}}setEditorTabIndex(t,r){var n;(n=t==null?void 0:t.scroll)!=null&&n.domNode&&(t.scroll.domNode.tabIndex=r)}setEditorReadOnly(t,r){r?t.disable():t.enable()}makeUnprivilegedEditor(t){const r=t;return{getHTML:()=>r.root.innerHTML,getSemanticHTML:r.getSemanticHTML.bind(r),getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}}getEditingArea(){const t=this.editingAreaRef.current;if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t}renderEditingArea(){const{children:t,preserveWhitespace:r}=this.props,{generation:n}=this.state,s={key:n,ref:this.editingAreaRef};return ue.Children.count(t)?ue.cloneElement(ue.Children.only(t),s):r?ue.createElement("pre",{...s}):ue.createElement("div",{...s})}render(){return ue.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(t,r,n,s){var i,o;if(!this.editor)return;const a=this.isDelta(this.value)?s.getContents():s.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=a,(o=(i=this.props).onChange)==null||o.call(i,t,r,n,s))}onEditorChangeSelection(t,r,n){var s,i,o,a,l,c;if(!this.editor)return;const u=this.getEditorSelection(),h=!u&&t,f=u&&!t;Va(t,u)||(this.selection=t,(i=(s=this.props).onChangeSelection)==null||i.call(s,t,r,n),h?(a=(o=this.props).onFocus)==null||a.call(o,t,r,n):f&&((c=(l=this.props).onBlur)==null||c.call(l,u,r,n)))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}ng.displayName="React Quill";ng.Quill=ne;ng.defaultProps={theme:"snow",modules:{},readOnly:!1};function $I(e){Promise.resolve().then(e)}const rIe=async()=>{const{data:e,error:t}=await le.from("posts").select("*");if(t)throw new Error(t.message);return e},nIe=async e=>{const{data:{user:t},error:r}=await le.auth.getUser();if(r)throw new Error(r.message);if(!t)throw new Error("User not authenticated.");console.log("Attempting to create post with data:",{...e,author_id:t.id});const{data:n,error:s}=await le.from("posts").insert({...e,author_id:t.id}).select();if(s)throw new Error(s.message);if(!n||n.length===0)throw new Error("Failed to create post: No data returned.");return n[0]},sIe=async e=>{const{data:t,error:r}=await le.from("posts").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},iIe=async e=>{const{error:t}=await le.from("posts").delete().eq("id",e);if(t)throw new Error(t.message)},oIe=({post:e,onSave:t,onCancel:r})=>{const[n,s]=g.useState({title:(e==null?void 0:e.title)||"",content:(e==null?void 0:e.content)||"",status:(e==null?void 0:e.status)||"draft",slug:(e==null?void 0:e.slug)||""}),i=()=>{if(!n.title.trim()){Li.error("Title cannot be empty.");return}if(!n.slug.trim()){Li.error("Slug cannot be empty.");return}const o=e?{...e,...n}:n;t(o)};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Post":"Create New Post"}),d.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-gray-700",children:d.jsx(cl,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:n.title,onChange:o=>s({...n,title:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter post title...",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug"}),d.jsx("input",{type:"text",value:n.slug,onChange:o=>s({...n,slug:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"post-url-slug"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),d.jsx(ng,{theme:"snow",value:n.content,onChange:o=>s({...n,content:o}),className:"h-64 mb-12"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:n.status,onChange:o=>s({...n,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"archived",children:"Archived"})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsxs("button",{type:"button",onClick:i,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(z2,{className:"w-4 h-4"}),"Save Post"]}),d.jsx("button",{type:"button",onClick:r,className:"flex items-center gap-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},aIe=()=>{const e=ua(),[t,r]=g.useState(!1),[n,s]=g.useState(null),[i,o]=g.useState(""),[a,l]=g.useState("all"),{data:c,isLoading:u,isError:h,error:f}=hr({queryKey:["posts"],queryFn:rIe}),p=Gt({mutationFn:nIe,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]}),r(!1),s(null)}}),v=Gt({mutationFn:sIe,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]}),r(!1),s(null)}}),m=Gt({mutationFn:iIe,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]})}}),b=_=>{if(n)v.mutate(_);else{const{...j}=_;p.mutate(j)}},x=_=>{window.confirm("Are you sure you want to delete this post?")&&m.mutate(_)},w=(c==null?void 0:c.filter(_=>{const j=_.title.toLowerCase().includes(i.toLowerCase()),k=a==="all"||_.status===a;return j&&k}))||[];return u?d.jsx("div",{children:"Loading posts..."}):h?d.jsxs("div",{children:["Error loading posts: ",f==null?void 0:f.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(oIe,{post:n,onSave:b,onCancel:()=>{r(!1),s(null)}}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Posts"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(ro,{className:"w-4 h-4"}),"New Post"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(nu,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:_=>o(_.target.value),placeholder:"Search posts...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsxs("select",{value:a,onChange:_=>l(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"archived",children:"Archived"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Status"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Author"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Date"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Views"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:w.map(_=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:_.title})}),d.jsx("td",{className:"py-4 px-6",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.status==="published"?"bg-green-100 text-green-800":_.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:_.status})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:_.author_id}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:new Date(_.created_at).toLocaleDateString()}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:_.views}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(_),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(cx,{className:"w-4 h-4"})}),d.jsx("button",{className:"p-1 text-gray-500 hover:text-green-600",children:d.jsx(Tm,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>x(_.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(su,{className:"w-4 h-4"})})]})})]},_.id))})]})})]})})};function lIe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cIe=lIe(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const rV=g.createContext(null);function uIe(e,t){return{getTheme:function(){return t??null}}}function zh(){const e=g.useContext(rV);return e==null&&cIe(8),e}function dIe(e){return{}}const wA={},hIe={},nV={},Lc={},Nd={},Nb={},Cd={},_A={},oN={},cm={},um={},rl={},jA={},kA={},fIe={},sV={},pIe={},iV={},mIe={},oV={},aV={},Cb={},gIe={},lV={},cV={},uV={},yIe={},vIe={},bIe={},zI={},dV={},xIe={},hV={},fV={},wIe={},Ow={},SA={},aN={},_Ie={},jIe={},ky={},Sy={},kIe={},SIe={},NIe={},Ei=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,CIe=Ei&&"documentMode"in document?document.documentMode:null,Ys=Ei&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),ol=Ei&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Eb=!(!Ei||!("InputEvent"in window)||CIe)&&"getTargetRanges"in new window.InputEvent("input"),NA=Ei&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Pw=Ei&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,EIe=Ei&&/Android/.test(navigator.userAgent),pV=Ei&&/^(?=.*Chrome).*/i.test(navigator.userAgent),TIe=Ei&&EIe&&pV,CA=Ei&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!pV,sg=1,Rl=3,Jc=0,mV=1,ch=2,AIe=0,OIe=1,PIe=2,Tb=4,Ab=8,EA=128,RIe=112|(3|Tb|Ab)|EA,TA=1,AA=2,OA=3,PA=4,RA=5,DA=6,Rw=NA||Pw||CA?" ":"​",aa=`

`,DIe=ol?" ":Rw,gV="֑-߿יִ-﷽ﹰ-ﻼ",yV="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",MIe=new RegExp("^[^"+yV+"]*["+gV+"]"),IIe=new RegExp("^[^"+gV+"]*["+yV+"]"),Qc={bold:1,code:16,highlight:EA,italic:2,strikethrough:Tb,subscript:32,superscript:64,underline:Ab},LIe={directionless:1,unmergeable:2},UI={center:AA,end:DA,justify:PA,left:TA,right:OA,start:RA},FIe={[AA]:"center",[DA]:"end",[PA]:"justify",[TA]:"left",[OA]:"right",[RA]:"start"},$Ie={normal:0,segmented:2,token:1},zIe={[AIe]:"normal",[PIe]:"segmented",[OIe]:"token"};function UIe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xe=UIe(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function Ob(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const qIe=100;let lN=!1,MA=0;function BIe(e){MA=e.timeStamp}function fj(e,t,r){return t.__lexicalLineBreak===e||e[`__lexicalKey_${r._key}`]!==void 0}function WIe(e,t,r){const n=lo(r._window);let s=null,i=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,i=n.focusOffset);const o=e.nodeValue;o!==null&&$A(t,o,s,i,!1)}function VIe(e,t,r){if(pe(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return t.nodeType===Rl&&r.isAttached()}function vV(e,t,r){lN=!0;const n=performance.now()-MA>qIe;try{es(e,()=>{const s=Ie()||function(f){return f.getEditorState().read(()=>{const p=Ie();return p!==null?p.clone():null})}(e),i=new Map,o=e.getRootElement(),a=e._editorState,l=e._blockCursorElement;let c=!1,u="";for(let f=0;f<t.length;f++){const p=t[f],v=p.type,m=p.target;let b=Xc(m,a);if(!(b===null&&m!==o||At(b))){if(v==="characterData")n&&ye(b)&&VIe(s,m,b)&&WIe(m,b,e);else if(v==="childList"){c=!0;const x=p.addedNodes;for(let j=0;j<x.length;j++){const k=x[j],S=jV(k),E=k.parentNode;if(E!=null&&k!==l&&S===null&&(k.nodeName!=="BR"||!fj(k,E,e))){if(ol){const C=k.innerText||k.nodeValue;C&&(u+=C)}E.removeChild(k)}}const w=p.removedNodes,_=w.length;if(_>0){let j=0;for(let k=0;k<_;k++){const S=w[k];(S.nodeName==="BR"&&fj(S,m,e)||l===S)&&(m.appendChild(S),j++)}_!==j&&(m===o&&(b=SV(a)),i.set(m,b))}}}}if(i.size>0)for(const[f,p]of i)if(ie(p)){const v=p.getChildrenKeys();let m=f.firstChild;for(let b=0;b<v.length;b++){const x=v[b],w=e.getElementByKey(x);w!==null&&(m==null?(f.appendChild(w),m=w):m!==w&&f.replaceChild(w,m),m=m.nextSibling)}}else ye(p)&&p.markDirty();const h=r.takeRecords();if(h.length>0){for(let f=0;f<h.length;f++){const p=h[f],v=p.addedNodes,m=p.target;for(let b=0;b<v.length;b++){const x=v[b],w=x.parentNode;w==null||x.nodeName!=="BR"||fj(x,m,e)||w.removeChild(x)}}r.takeRecords()}s!==null&&(c&&(s.dirty=!0,ao(s)),ol&&TV(e)&&s.insertRawText(u))})}finally{lN=!1}}function bV(e){const t=e._observer;t!==null&&vV(e,t.takeRecords(),t)}function xV(e){(function(t){MA===0&&Iw(t).addEventListener("textInput",BIe,!0)})(e),e._observer=new MutationObserver((t,r)=>{vV(e,t,r)})}function qI(e,t){const r=e.__mode,n=e.__format,s=e.__style,i=t.__mode,o=t.__format,a=t.__style;return!(r!==null&&r!==i||n!==null&&n!==o||s!==null&&s!==a)}function BI(e,t){const r=e.mergeWithSibling(t),n=nr()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function WI(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&ye(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(qI(t,n)){n=BI(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&ye(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(qI(n,r)){n=BI(n,r);break}break}r.remove()}}else n.remove()}function wV(e){return VI(e.anchor),VI(e.focus),e}function VI(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),ye(n)){e.set(n.__key,s?n.getTextContentSize():0,"text");break}if(!ie(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element")}}let HIe=1;const KIe=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function IA(e){const t=document.activeElement;if(t===null)return!1;const r=t.nodeName;return At(Xc(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&t.__lexicalEditor==null)}function ig(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!IA(t)&&_V(t)===e}catch{return!1}}function _V(e){let t=e;for(;t!=null;){const r=t.__lexicalEditor;if(r!=null)return r;t=Mw(t)}return null}function td(e){return e.isToken()||e.isSegmented()}function YIe(e){return e.nodeType===Rl}function Pb(e){let t=e;for(;t!=null;){if(YIe(t))return t;t=t.firstChild}return null}function cN(e,t,r){const n=Qc[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"&&(s&=-33),s}function GIe(e,t){if(t!=null)return void(e.__key=t);Ln(),GV();const r=nr(),n=va(),s=""+HIe++;n._nodeMap.set(s,e),ie(e)?r._dirtyElements.set(s,!0):r._dirtyLeaves.add(s),r._cloneNotNeeded.add(s),r._dirtyType=mV,e.__key=s}function Fc(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),i=e.getNextSibling();if(s===null)if(i!==null){const o=i.getWritable();n.__first=i.__key,o.__prev=null}else n.__first=null;else{const o=s.getWritable();if(i!==null){const a=i.getWritable();a.__prev=o.__key,o.__next=a.__key}else o.__next=null;r.__prev=null}if(i===null)if(s!==null){const o=s.getWritable();n.__last=s.__key,o.__next=null}else n.__last=null;else{const o=i.getWritable();if(s!==null){const a=s.getWritable();a.__next=o.__key,o.__prev=a.__key}else o.__prev=null;r.__next=null}n.__size--,r.__parent=null}}function Rb(e){GV();const t=e.getLatest(),r=t.__parent,n=va(),s=nr(),i=n._nodeMap,o=s._dirtyElements;r!==null&&function(l,c,u){let h=l;for(;h!==null;){if(u.has(h))return;const f=c.get(h);if(f===void 0)break;u.set(h,!1),h=f.__parent}}(r,i,o);const a=t.__key;s._dirtyType=mV,ie(e)?o.set(a,!0):s._dirtyLeaves.add(a)}function Hr(e){Ln();const t=nr(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=wn(r);n!==null&&n.getWritable()}if(e!==null){const n=wn(e);n!==null&&n.getWritable()}}}function nl(){return ug()?null:nr()._compositionKey}function wn(e,t){const r=(t||va())._nodeMap.get(e);return r===void 0?null:r}function jV(e,t){const r=e[`__lexicalKey_${nr()._key}`];return r!==void 0?wn(r,t):null}function Xc(e,t){let r=e;for(;r!=null;){const n=jV(r,t);if(n!==null)return n;r=Mw(r)}return null}function kV(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function HI(e){return e.read(()=>gr().getTextContent())}function gr(){return SV(va())}function SV(e){return e._nodeMap.get("root")}function ao(e){Ln();const t=va();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function pd(e){const t=nr(),r=function(n,s){let i=n;for(;i!=null;){const o=i[`__lexicalKey_${s._key}`];if(o!==void 0)return o;i=Mw(i)}return null}(e,t);return r===null?e===t.getRootElement()?wn("root"):null:wn(r)}function KI(e,t){return t?e.getTextContentSize():0}function NV(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function LA(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function CV(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function EV(e){return e.nodeType===Rl?e.nodeValue:null}function FA(e,t,r){const n=lo(t._window);if(n===null)return;const s=n.anchorNode;let{anchorOffset:i,focusOffset:o}=n;if(s!==null){let a=EV(s);const l=Xc(s);if(a!==null&&ye(l)){if(a===Rw&&r){const c=r.length;a=r,i=c,o=c}a!==null&&$A(l,a,i,o,e)}}}function $A(e,t,r,n,s){let i=e;if(i.isAttached()&&(s||!i.isDirty())){const o=i.isComposing();let a=t;(o||s)&&t[t.length-1]===Rw&&(a=t.slice(0,-1));const l=i.getTextContent();if(s||a!==l){if(a===""){if(Hr(null),NA||Pw||CA)i.remove();else{const m=nr();setTimeout(()=>{m.update(()=>{i.isAttached()&&i.remove()})},20)}return}const c=i.getParent(),u=cg(),h=i.getTextContentSize(),f=nl(),p=i.getKey();if(i.isToken()||f!==null&&p===f&&!o||pe(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===e.__key&&u.anchor.offset===0&&!i.canInsertTextBefore()&&!o||u.focus.key===e.__key&&u.focus.offset===h&&!i.canInsertTextAfter()&&!o))return void i.markDirty();const v=Ie();if(!pe(v)||r===null||n===null)return void i.setTextContent(a);if(v.setTextNodeRange(i,r,i,n),i.isSegmented()){const m=nn(i.getTextContent());i.replace(m),i=m}i.setTextContent(a)}}}function ZIe(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;const r=e.anchor.offset,n=t.getParentOrThrow(),s=t.isToken();return r===0?!t.canInsertTextBefore()||!n.canInsertTextBefore()&&!t.isComposing()||s||function(i){const o=i.getPreviousSibling();return(ye(o)||ie(o)&&o.isInline())&&!o.canInsertTextAfter()}(t):r===t.getTextContentSize()&&(!t.canInsertTextAfter()||!n.canInsertTextAfter()&&!t.isComposing()||s)}function YI(e){return e==="ArrowLeft"}function GI(e){return e==="ArrowRight"}function Gf(e,t){return Ys?e:t}function ZI(e){return e==="Enter"}function Af(e){return e==="Backspace"}function Of(e){return e==="Delete"}function JI(e,t,r){return e.toLowerCase()==="a"&&Gf(t,r)}function JIe(){const e=gr();ao(wV(e.select(0,e.getChildrenSize())))}function bp(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const i=Ob(s);return r[t]=i,i}return s}function zA(e,t,r,n,s){if(r.size===0)return;const i=n.__type,o=n.__key,a=t.get(i);a===void 0&&xe(33,i);const l=a.klass;let c=e.get(l);c===void 0&&(c=new Map,e.set(l,c));const u=c.get(o),h=u==="destroyed"&&s==="created";(u===void 0||h)&&c.set(o,h?"updated":s)}function QI(e,t,r){const n=e.getParent();let s=r,i=e;return n!==null&&(t&&r===0?(s=i.getIndexWithinParent(),i=n):t||r!==i.getChildrenSize()||(s=i.getIndexWithinParent()+1,i=n)),i.getChildAtIndex(t?s-1:s)}function dm(e,t){const r=e.offset;if(e.type==="element")return QI(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?QI(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function TV(e){const t=Iw(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function je(e,t,r){return ZV(e,t,r)}function Dw(e){return!un(e)&&!e.isLastChild()&&!e.isInline()}function Db(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&xe(75,t),r}function Mw(e){const t=e.assignedSlot||e.parentElement;return t!==null&&t.nodeType===11?t.host:t}function uN(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function Iw(e){const t=e._window;return t===null&&xe(78),t}function QIe(e){let t=e.getParentOrThrow();for(;t!==null;){if(Uh(t))return t;t=t.getParentOrThrow()}return t}function Uh(e){return un(e)||ie(e)&&e.isShadowRoot()}function Lw(e){const t=nr(),r=e.constructor.getType(),n=t._nodes.get(r);n===void 0&&xe(97);const s=n.replace;if(s!==null){const i=s(e);return i instanceof e.constructor||xe(98),i}return e}function pj(e,t){!un(e.getParent())||ie(t)||At(t)||xe(99)}function mj(e){return(At(e)||ie(e)&&!e.canBeEmpty())&&!e.isInline()}function UA(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function XIe(e,t,r){let n=e._blockCursorElement;if(pe(r)&&r.isCollapsed()&&r.anchor.type==="element"&&t.contains(document.activeElement)){const s=r.anchor,i=s.getNode(),o=s.offset;let a=!1,l=null;if(o===i.getChildrenSize())mj(i.getChildAtIndex(o-1))&&(a=!0);else{const c=i.getChildAtIndex(o);if(mj(c)){const u=c.getPreviousSibling();(u===null||mj(u))&&(a=!0,l=e.getElementByKey(c.__key))}}if(a){const c=e.getElementByKey(i.__key);return n===null&&(e._blockCursorElement=n=function(u){const h=u.theme,f=document.createElement("div");f.contentEditable="false",f.setAttribute("data-lexical-cursor","true");let p=h.blockCursor;if(p!==void 0){if(typeof p=="string"){const v=Ob(p);p=h.blockCursor=v}p!==void 0&&f.classList.add(...p)}return f}(e._config)),t.style.caretColor="transparent",void(l===null?c.appendChild(n):c.insertBefore(n,l))}}n!==null&&UA(n,e,t)}function lo(e){return Ei?(e||window).getSelection():null}function qA(e){return e.nodeType===1}function e5e(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function t5e(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function rd(e){if(un(e)||At(e)&&!e.isInline())return!0;if(!ie(e)||Uh(e))return!1;const t=e.getFirstChild(),r=t===null||_p(t)||ye(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function gj(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function AV(e,t,r,n,s,i){let o=e.getFirstChild();for(;o!==null;){const a=o.__key;o.__parent===t&&(ie(o)&&AV(o,a,r,n,s,i),r.has(a)||i.delete(a),s.push(a)),o=o.getNextSibling()}}let gl,Nn,hm,Fw,dN,hN,eu,fi,fN,fm,Cr="",Sn="",Js=null,Po="",OV=!1,$w=!1,tv=null;function Mb(e,t){const r=eu.get(e);if(t!==null){const n=gN(e);n.parentNode===t&&t.removeChild(n)}if(fi.has(e)||Nn._keyToDOMMap.delete(e),ie(r)){const n=Lb(r,eu);pN(n,0,n.length-1,null)}r!==void 0&&zA(fm,hm,Fw,r,"destroyed")}function pN(e,t,r,n){let s=t;for(;s<=r;++s){const i=e[s];i!==void 0&&Mb(i,n)}}function ec(e,t){e.setProperty("text-align",t)}const r5e="40px";function PV(e,t){const r=gl.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||r5e;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function RV(e,t){const r=e.style;t===0?ec(r,""):t===TA?ec(r,"left"):t===AA?ec(r,"center"):t===OA?ec(r,"right"):t===PA?ec(r,"justify"):t===RA?ec(r,"start"):t===DA&&ec(r,"end")}function Ib(e,t,r){const n=fi.get(e);n===void 0&&xe(60);const s=n.createDOM(gl,Nn);if(function(i,o,a){const l=a._keyToDOMMap;o["__lexicalKey_"+a._key]=i,l.set(i,o)}(e,s,Nn),ye(n)?s.setAttribute("data-lexical-text","true"):At(n)&&s.setAttribute("data-lexical-decorator","true"),ie(n)){const i=n.__indent,o=n.__size;if(i!==0&&PV(s,i),o!==0){const l=o-1;(function(c,u,h,f){const p=Sn;Sn="",mN(c,h,0,u,f,null),MV(h,f),Sn=p})(Lb(n,fi),l,n,s)}const a=n.__format;a!==0&&RV(s,a),n.isInline()||DV(null,n,s),Dw(n)&&(Cr+=aa,Po+=aa)}else{const i=n.getTextContent();if(At(n)){const o=n.decorate(Nn,gl);o!==null&&IV(e,o),s.contentEditable="false"}else ye(n)&&(n.isDirectionless()||(Sn+=i));Cr+=i,Po+=i}if(t!==null)if(r!=null)t.insertBefore(s,r);else{const i=t.__lexicalLineBreak;i!=null?t.insertBefore(s,i):t.appendChild(s)}return zA(fm,hm,Fw,n,"created"),s}function mN(e,t,r,n,s,i){const o=Cr;Cr="";let a=r;for(;a<=n;++a){Ib(e[a],s,i);const l=fi.get(e[a]);l!==null&&Js===null&&ye(l)&&(Js=l.getFormat())}Dw(t)&&(Cr+=aa),s.__lexicalTextContent=Cr,Cr=o+Cr}function XI(e,t){const r=t.get(e);return _p(r)||At(r)&&r.isInline()}function DV(e,t,r){const n=e!==null&&(e.__size===0||XI(e.__last,eu)),s=t.__size===0||XI(t.__last,fi);if(n){if(!s){const i=r.__lexicalLineBreak;i!=null&&r.removeChild(i),r.__lexicalLineBreak=null}}else if(s){const i=document.createElement("br");r.__lexicalLineBreak=i,r.appendChild(i)}}function MV(e,t){const r=t.__lexicalDirTextContent,n=t.__lexicalDir;if(r!==Sn||n!==tv){const i=Sn==="",o=i?tv:(s=Sn,MIe.test(s)?"rtl":IIe.test(s)?"ltr":null);if(o!==n){const a=t.classList,l=gl.theme;let c=n!==null?l[n]:void 0,u=o!==null?l[o]:void 0;if(c!==void 0){if(typeof c=="string"){const h=Ob(c);c=l[n]=h}a.remove(...c)}if(o===null||i&&o==="ltr")t.removeAttribute("dir");else{if(u!==void 0){if(typeof u=="string"){const h=Ob(u);u=l[o]=h}u!==void 0&&a.add(...u)}t.dir=o}$w||(e.getWritable().__dir=o)}tv=o,t.__lexicalDirTextContent=Sn,t.__lexicalDir=o}var s}function n5e(e,t,r){const n=Sn;var s;Sn="",Js=null,function(i,o,a){const l=Cr,c=i.__size,u=o.__size;if(Cr="",c===1&&u===1){const h=i.__first,f=o.__first;if(h===f)Zf(h,a);else{const v=gN(h),m=Ib(f,null,null);a.replaceChild(m,v),Mb(h,null)}const p=fi.get(f);Js===null&&ye(p)&&(Js=p.getFormat())}else{const h=Lb(i,eu),f=Lb(o,fi);if(c===0)u!==0&&mN(f,o,0,u-1,a,null);else if(u===0){if(c!==0){const p=a.__lexicalLineBreak==null;pN(h,0,c-1,p?null:a),p&&(a.textContent="")}}else(function(p,v,m,b,x,w){const _=b-1,j=x-1;let k,S,E=(O=w,O.firstChild),C=0,T=0;for(var O;C<=_&&T<=j;){const R=v[C],$=m[T];if(R===$)E=yj(Zf($,w)),C++,T++;else{k===void 0&&(k=new Set(v)),S===void 0&&(S=new Set(m));const V=S.has(R),q=k.has($);if(V)if(q){const K=Db(Nn,$);K===E?E=yj(Zf($,w)):(E!=null?w.insertBefore(K,E):w.appendChild(K),Zf($,w)),C++,T++}else Ib($,w,E),T++;else E=yj(gN(R)),Mb(R,w),C++}const F=fi.get($);F!==null&&Js===null&&ye(F)&&(Js=F.getFormat())}const P=C>_,D=T>j;if(P&&!D){const R=m[j+1];mN(m,p,T,j,w,R===void 0?null:Nn.getElementByKey(R))}else D&&!P&&pN(v,C,_,w)})(o,h,f,c,u,a)}Dw(o)&&(Cr+=aa),a.__lexicalTextContent=Cr,Cr=l+Cr}(e,t,r),MV(t,r),dh(s=t)&&Js!=null&&Js!==s.__textFormat&&!$w&&s.setTextFormat(Js),Sn=n,Js=null}function Lb(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&xe(101),r.push(n),n=s.__next}return r}function Zf(e,t){const r=eu.get(e);let n=fi.get(e);r!==void 0&&n!==void 0||xe(61);const s=OV||hN.has(e)||dN.has(e),i=Db(Nn,e);if(r===n&&!s){if(ie(r)){const o=i.__lexicalTextContent;o!==void 0&&(Cr+=o,Po+=o);const a=i.__lexicalDirTextContent;a!==void 0&&(Sn+=a)}else{const o=r.getTextContent();ye(r)&&!r.isDirectionless()&&(Sn+=o),Po+=o,Cr+=o}return i}if(r!==n&&s&&zA(fm,hm,Fw,n,"updated"),n.updateDOM(r,i,gl)){const o=Ib(e,null,null);return t===null&&xe(62),t.replaceChild(o,i),Mb(e,null),o}if(ie(r)&&ie(n)){const o=n.__indent;o!==r.__indent&&PV(i,o);const a=n.__format;a!==r.__format&&RV(i,a),s&&(n5e(r,n,i),un(n)||n.isInline()||DV(r,n,i)),Dw(n)&&(Cr+=aa,Po+=aa)}else{const o=n.getTextContent();if(At(n)){const a=n.decorate(Nn,gl);a!==null&&IV(e,a)}else ye(n)&&!n.isDirectionless()&&(Sn+=o);Cr+=o,Po+=o}if(!$w&&un(n)&&n.__cachedText!==Po){const o=n.getWritable();o.__cachedText=Po,n=o}return i}function IV(e,t){let r=Nn._pendingDecorators;const n=Nn._decorators;if(r===null){if(n[e]===t)return;r=kV(Nn)}r[e]=t}function yj(e){let t=e.nextSibling;return t!==null&&t===Nn._blockCursorElement&&(t=t.nextSibling),t}function s5e(e,t,r,n,s,i){Cr="",Po="",Sn="",OV=n===ch,tv=null,Nn=r,gl=r._config,hm=r._nodes,Fw=Nn._listeners.mutation,dN=s,hN=i,eu=e._nodeMap,fi=t._nodeMap,$w=t._readOnly,fN=new Map(r._keyToDOMMap);const o=new Map;return fm=o,Zf("root",null),Nn=void 0,hm=void 0,dN=void 0,hN=void 0,eu=void 0,fi=void 0,gl=void 0,fN=void 0,fm=void 0,o}function gN(e){const t=fN.get(e);return t===void 0&&xe(75,e),t}const So=Object.freeze({}),yN=30,vN=[["keydown",function(e,t){if(xp=e.timeStamp,LV=e.key,t.isComposing())return;const{key:r,shiftKey:n,ctrlKey:s,metaKey:i,altKey:o}=e;je(t,fIe,e)||r!=null&&(function(a,l,c,u){return GI(a)&&!l&&!u&&!c}(r,s,o,i)?je(t,sV,e):function(a,l,c,u,h){return GI(a)&&!u&&!c&&(l||h)}(r,s,n,o,i)?je(t,pIe,e):function(a,l,c,u){return YI(a)&&!l&&!u&&!c}(r,s,o,i)?je(t,iV,e):function(a,l,c,u,h){return YI(a)&&!u&&!c&&(l||h)}(r,s,n,o,i)?je(t,mIe,e):function(a,l,c){return function(u){return u==="ArrowUp"}(a)&&!l&&!c}(r,s,i)?je(t,oV,e):function(a,l,c){return function(u){return u==="ArrowDown"}(a)&&!l&&!c}(r,s,i)?je(t,aV,e):function(a,l){return ZI(a)&&l}(r,n)?(wp=!0,je(t,Cb,e)):function(a){return a===" "}(r)?je(t,gIe,e):function(a,l){return Ys&&l&&a.toLowerCase()==="o"}(r,s)?(e.preventDefault(),wp=!0,je(t,Nd,!0)):function(a,l){return ZI(a)&&!l}(r,n)?(wp=!1,je(t,Cb,e)):function(a,l,c,u){return Ys?!l&&!c&&(Af(a)||a.toLowerCase()==="h"&&u):!(u||l||c)&&Af(a)}(r,o,i,s)?Af(r)?je(t,lV,e):(e.preventDefault(),je(t,Lc,!0)):function(a){return a==="Escape"}(r)?je(t,cV,e):function(a,l,c,u,h){return Ys?!(c||u||h)&&(Of(a)||a.toLowerCase()==="d"&&l):!(l||u||h)&&Of(a)}(r,s,n,o,i)?Of(r)?je(t,uV,e):(e.preventDefault(),je(t,Lc,!1)):function(a,l,c){return Af(a)&&(Ys?l:c)}(r,o,s)?(e.preventDefault(),je(t,cm,!0)):function(a,l,c){return Of(a)&&(Ys?l:c)}(r,o,s)?(e.preventDefault(),je(t,cm,!1)):function(a,l){return Ys&&l&&Af(a)}(r,i)?(e.preventDefault(),je(t,um,!0)):function(a,l){return Ys&&l&&Of(a)}(r,i)?(e.preventDefault(),je(t,um,!1)):function(a,l,c,u){return a.toLowerCase()==="b"&&!l&&Gf(c,u)}(r,o,i,s)?(e.preventDefault(),je(t,rl,"bold")):function(a,l,c,u){return a.toLowerCase()==="u"&&!l&&Gf(c,u)}(r,o,i,s)?(e.preventDefault(),je(t,rl,"underline")):function(a,l,c,u){return a.toLowerCase()==="i"&&!l&&Gf(c,u)}(r,o,i,s)?(e.preventDefault(),je(t,rl,"italic")):function(a,l,c,u){return a==="Tab"&&!l&&!c&&!u}(r,o,s,i)?je(t,yIe,e):function(a,l,c,u){return a.toLowerCase()==="z"&&!l&&Gf(c,u)}(r,n,i,s)?(e.preventDefault(),je(t,jA,void 0)):function(a,l,c,u){return Ys?a.toLowerCase()==="z"&&c&&l:a.toLowerCase()==="y"&&u||a.toLowerCase()==="z"&&u&&l}(r,n,i,s)?(e.preventDefault(),je(t,kA,void 0)):ni(t._editorState._selection)?function(a,l,c,u){return!l&&a.toLowerCase()==="c"&&(Ys?c:u)}(r,n,i,s)?(e.preventDefault(),je(t,Ow,e)):function(a,l,c,u){return!l&&a.toLowerCase()==="x"&&(Ys?c:u)}(r,n,i,s)?(e.preventDefault(),je(t,SA,e)):JI(r,i,s)&&(e.preventDefault(),je(t,aN,e)):!ol&&JI(r,i,s)&&(e.preventDefault(),je(t,aN,e)),function(a,l,c,u){return a||l||c||u}(s,n,o,i)&&je(t,NIe,e))}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;r instanceof Node&&n!=="touch"&&es(t,()=>{At(Xc(r))||(xN=!0)})}],["compositionstart",function(e,t){es(t,()=>{const r=Ie();if(pe(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();Hr(n.key),(e.timeStamp<xp+yN||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||ye(s)&&s.getStyle()!==r.style)&&je(t,Cd,DIe)}})}],["compositionend",function(e,t){ol?Pf=!0:es(t,()=>{vj(t,e.data)})}],["input",function(e,t){e.stopPropagation(),es(t,()=>{const r=Ie(),n=e.data,s=UV(e);if(n!=null&&pe(r)&&zV(r,s,n,e.timeStamp,!1)){Pf&&(vj(t,n),Pf=!1);const i=r.anchor.getNode(),o=lo(t._window);if(o===null)return;const a=r.isBackward(),l=a?r.anchor.offset:r.focus.offset,c=a?r.focus.offset:r.anchor.offset;Eb&&!r.isCollapsed()&&ye(i)&&o.anchorNode!==null&&i.getTextContent().slice(0,l)+n+i.getTextContent().slice(l+c)===EV(o.anchorNode)||je(t,Cd,n);const u=n.length;ol&&u>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=u),NA||Pw||CA||!t.isComposing()||(xp=0,Hr(null))}else FA(!1,t,n!==null?n:void 0),Pf&&(vj(t,n||void 0),Pf=!1);Ln(),bV(nr())}),nd=null}],["click",function(e,t){es(t,()=>{const r=Ie(),n=lo(t._window),s=cg();if(n){if(pe(r)){const i=r.anchor,o=i.getNode();i.type==="element"&&i.offset===0&&r.isCollapsed()&&!un(o)&&gr().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s)?(n.removeAllRanges(),r.dirty=!0):e.detail===3&&!r.isCollapsed()&&o!==r.focus.getNode()&&(ie(o)?o.select(0):o.getParentOrThrow().select(0))}else if(e.pointerType==="touch"){const i=n.anchorNode;if(i!==null){const o=i.nodeType;(o===sg||o===Rl)&&ao(WA(s,n,t,e))}}}je(t,nV,e)})}],["cut",So],["copy",So],["dragstart",So],["dragover",So],["dragend",So],["paste",So],["focus",So],["blur",So],["drop",So]];Eb&&vN.push(["beforeinput",(e,t)=>function(r,n){const s=r.inputType,i=UV(r);s==="deleteCompositionText"||ol&&TV(n)||s!=="insertCompositionText"&&es(n,()=>{const o=Ie();if(s==="deleteContentBackward"){if(o===null){const p=cg();if(!pe(p))return;ao(p.clone())}if(pe(o)){const p=o.anchor.key===o.focus.key;if(a=r.timeStamp,LV==="MediaLast"&&a<xp+yN&&n.isComposing()&&p){if(Hr(null),xp=0,setTimeout(()=>{es(n,()=>{Hr(null)})},yN),pe(o)){const v=o.anchor.getNode();v.markDirty(),o.format=v.getFormat(),ye(v)||xe(142),o.style=v.getStyle()}}else{Hr(null),r.preventDefault();const v=o.anchor.getNode().getTextContent(),m=o.anchor.offset===0&&o.focus.offset===v.length;TIe&&p&&!m||je(n,Lc,!0)}return}}var a;if(!pe(o))return;const l=r.data;nd!==null&&FA(!1,n,nd),o.dirty&&nd===null||!o.isCollapsed()||un(o.anchor.getNode())||i===null||o.applyDOMRange(i),nd=null;const c=o.anchor,u=o.focus,h=c.getNode(),f=u.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":je(n,Cd,r);break;case"insertFromComposition":Hr(null),je(n,Cd,r);break;case"insertLineBreak":Hr(null),je(n,Nd,!1);break;case"insertParagraph":Hr(null),wp&&!Pw?(wp=!1,je(n,Nd,!1)):je(n,Nb,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":je(n,_A,r);break;case"deleteByComposition":(function(p,v){return p!==v||ie(p)||ie(v)||!p.isToken()||!v.isToken()})(h,f)&&je(n,oN,r);break;case"deleteByDrag":case"deleteByCut":je(n,oN,r);break;case"deleteContent":je(n,Lc,!1);break;case"deleteWordBackward":je(n,cm,!0);break;case"deleteWordForward":je(n,cm,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":je(n,um,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":je(n,um,!1);break;case"formatStrikeThrough":je(n,rl,"strikethrough");break;case"formatBold":je(n,rl,"bold");break;case"formatItalic":je(n,rl,"italic");break;case"formatUnderline":je(n,rl,"underline");break;case"historyUndo":je(n,jA,void 0);break;case"historyRedo":je(n,kA,void 0)}else{if(l===`
`)r.preventDefault(),je(n,Nd,!1);else if(l===aa)r.preventDefault(),je(n,Nb,void 0);else if(l==null&&r.dataTransfer){const p=r.dataTransfer.getData("text/plain");r.preventDefault(),o.insertRawText(p)}else l!=null&&zV(o,i,l,r.timeStamp,!0)?(r.preventDefault(),je(n,Cd,l)):nd=l;FV=r.timeStamp}})}(e,t)]);let xp=0,LV=null,FV=0,nd=null;const Fb=new WeakMap;let bN=!1,xN=!1,wp=!1,Pf=!1,$V=[0,"",0,"root",0];function zV(e,t,r,n,s){const i=e.anchor,o=e.focus,a=i.getNode(),l=nr(),c=lo(l._window),u=c!==null?c.anchorNode:null,h=i.key,f=l.getElementByKey(h),p=r.length;return h!==o.key||!ye(a)||(!s&&(!Eb||FV<n+50)||a.isDirty()&&p<2||NV(r))&&i.offset!==o.offset&&!a.isComposing()||td(a)||a.isDirty()&&p>1||(s||!Eb)&&f!==null&&!a.isComposing()&&u!==Pb(f)||c!==null&&t!==null&&(!t.collapsed||t.startContainer!==c.anchorNode||t.startOffset!==c.anchorOffset)||a.getFormat()!==e.format||a.getStyle()!==e.style||ZIe(e,a)}function e5(e,t){return e!==null&&e.nodeValue!==null&&e.nodeType===Rl&&t!==0&&t!==e.nodeValue.length}function t5(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:o}=e;bN&&(bN=!1,e5(n,s)&&e5(i,o))||es(t,()=>{if(!r)return void ao(null);if(!ig(t,n,i))return;const a=Ie();if(pe(a)){const l=a.anchor,c=l.getNode();if(a.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(a.dirty=!0);const u=Iw(t).event,h=u?u.timeStamp:performance.now(),[f,p,v,m,b]=$V,x=gr(),w=t.isComposing()===!1&&x.getTextContent()==="";if(h<b+200&&l.offset===v&&l.key===m)a.format=f,a.style=p;else if(l.type==="text")ye(c)||xe(141),a.format=c.getFormat(),a.style=c.getStyle();else if(l.type==="element"&&!w){const _=l.getNode();_ instanceof Bh&&_.getChildrenSize()===0?a.format=_.getTextFormat():a.format=0,a.style=""}}else{const u=l.key,h=a.focus.key,f=a.getNodes(),p=f.length,v=a.isBackward(),m=v?o:s,b=v?s:o,x=v?h:u,w=v?u:h;let _=RIe,j=!1;for(let k=0;k<p;k++){const S=f[k],E=S.getTextContentSize();if(ye(S)&&E!==0&&!(k===0&&S.__key===x&&m===E||k===p-1&&S.__key===w&&b===0)&&(j=!0,_&=S.getFormat(),_===0))break}a.format=j?_:0}}je(t,wA,void 0)})}function UV(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function vj(e,t){const r=e._compositionKey;if(Hr(null),r!==null&&t!=null){if(t===""){const n=wn(r),s=Pb(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&ye(n)&&$A(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=Ie();if(pe(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void je(e,Cb,null)}}}FA(!0,e,t)}function qV(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Ed=new Map;function BV(e){const t=e.target,r=lo(t==null?null:t.nodeType===9?t.defaultView:t.ownerDocument.defaultView);if(r===null)return;const n=_V(r.anchorNode);if(n===null)return;xN&&(xN=!1,es(n,()=>{const c=cg(),u=r.anchorNode;if(u===null)return;const h=u.nodeType;h!==sg&&h!==Rl||ao(WA(c,r,n,e))}));const s=LA(n),i=s[s.length-1],o=i._key,a=Ed.get(o),l=a||i;l!==n&&t5(r,l,!1),t5(r,n,!0),n!==i?Ed.set(o,n):a&&Ed.delete(o)}function r5(e){e._lexicalHandled=!0}function n5(e){return e._lexicalHandled===!0}function i5e(e){const t=e.ownerDocument,r=Fb.get(t);r===void 0&&xe(162);const n=r-1;n>=0||xe(164),Fb.set(t,n),n===0&&t.removeEventListener("selectionchange",BV);const s=e.__lexicalEditor;s!=null&&(function(o){if(o._parentEditor!==null){const a=LA(o),l=a[a.length-1]._key;Ed.get(l)===o&&Ed.delete(l)}else Ed.delete(o._key)}(s),e.__lexicalEditor=null);const i=qV(e);for(let o=0;o<i.length;o++)i[o]();e.__lexicalEventHandles=[]}function wN(e,t,r){Ln();const n=e.__key,s=e.getParent();if(s===null)return;const i=function(a){const l=Ie();if(!pe(l)||!ie(a))return l;const{anchor:c,focus:u}=l,h=c.getNode(),f=u.getNode();return uN(h,a)&&c.set(a.__key,0,"element"),uN(f,a)&&u.set(a.__key,0,"element"),l}(e);let o=!1;if(pe(i)&&t){const a=i.anchor,l=i.focus;a.key===n&&(zb(a,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0),l.key===n&&(zb(l,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0)}else ni(i)&&t&&e.isSelected()&&e.selectPrevious();if(pe(i)&&t&&!o){const a=e.getIndexWithinParent();Fc(e),$b(i,s,a,-1)}else Fc(e);r||Uh(s)||s.canBeEmpty()||!s.isEmpty()||wN(s,t),t&&un(s)&&s.isEmpty()&&s.selectEnd()}class zw{static getType(){xe(64,this.name)}static clone(t){xe(65,this.name)}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,GIe(this,t)}getType(){return this.__type}isInline(){xe(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=wn(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||Ie();if(r==null)return!1;const n=r.getNodes().some(s=>s.__key===this.__key);return(ye(this)||!pe(r)||r.anchor.type!=="element"||r.focus.type!=="element"||r.anchor.key!==r.focus.key||r.anchor.offset!==r.focus.offset)&&n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:wn(t)}getParentOrThrow(){const t=this.getParent();return t===null&&xe(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if(Uh(r))return ie(t)||xe(138),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&xe(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:wn(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:wn(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=this.getParents(),n=t.getParents();ie(this)&&r.unshift(this),ie(t)&&n.unshift(t);const s=r.length,i=n.length;if(s===0||i===0||r[s-1]!==n[i-1])return null;const o=new Set(n);for(let a=0;a<s;a++){const l=r[a];if(o.has(l))return l}return null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){if(this===t)return!1;if(t.isParentOf(this))return!0;if(this.isParentOf(t))return!1;const r=this.getCommonAncestor(t);let n=0,s=0,i=this;for(;;){const o=i.getParentOrThrow();if(o===r){n=i.getIndexWithinParent();break}i=o}for(i=t;;){const o=i.getParentOrThrow();if(o===r){s=i.getIndexWithinParent();break}i=o}return n<s}isParentOf(t){const r=this.__key;if(r===t.__key)return!1;let n=t;for(;n!==null;){if(n.__key===r)return!0;n=n.getParent()}return!1}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let i=this;for(;i!==null;){const o=i.__key;if(s.has(o)||(s.add(o),n.push(i)),i===t)break;const a=ie(i)?r?i.getFirstChild():i.getLastChild():null;if(a!==null){i=a;continue}const l=r?i.getNextSibling():i.getPreviousSibling();if(l!==null){i=l;continue}const c=i.getParentOrThrow();if(s.has(c.__key)||n.push(c),c===t)break;let u=null,h=c;do{if(h===null&&xe(68),u=r?h.getNextSibling():h.getPreviousSibling(),h=h.getParent(),h===null)break;u!==null||s.has(h.__key)||n.push(h)}while(u===null);i=u}return r||n.reverse(),n}isDirty(){const t=nr()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=wn(this.__key);return t===null&&xe(113),t}getWritable(){Ln();const t=va(),r=nr(),n=t._nodeMap,s=this.__key,i=this.getLatest(),o=i.__parent,a=r._cloneNotNeeded,l=Ie();if(l!==null&&l.setCachedNodes(null),a.has(s))return Rb(i),i;const c=i.constructor.clone(i);return c.__parent=o,c.__next=i.__next,c.__prev=i.__prev,ie(i)&&ie(c)?(dh(i)&&dh(c)&&(c.__textFormat=i.__textFormat),c.__first=i.__first,c.__last=i.__last,c.__size=i.__size,c.__indent=i.__indent,c.__format=i.__format,c.__dir=i.__dir):ye(i)&&ye(c)&&(c.__format=i.__format,c.__style=i.__style,c.__mode=i.__mode,c.__detail=i.__detail),a.add(s),c.__key=s,Rb(c),n.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){xe(70)}updateDOM(t,r,n){xe(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){xe(72)}static importJSON(t){xe(18,this.name)}static transform(){return null}remove(t){wN(this,!0,t)}replace(t,r){Ln();let n=Ie();n!==null&&(n=n.clone()),pj(this,t);const s=this.getLatest(),i=this.__key,o=t.__key,a=t.getWritable(),l=this.getParentOrThrow().getWritable(),c=l.__size;Fc(a);const u=s.getPreviousSibling(),h=s.getNextSibling(),f=s.__prev,p=s.__next,v=s.__parent;if(wN(s,!1,!0),u===null?l.__first=o:u.getWritable().__next=o,a.__prev=f,h===null?l.__last=o:h.getWritable().__prev=o,a.__next=p,a.__parent=v,l.__size=c,r&&(ie(this)&&ie(a)||xe(139),this.getChildren().forEach(m=>{a.append(m)})),pe(n)){ao(n);const m=n.anchor,b=n.focus;m.key===i&&l5(m,a),b.key===i&&l5(b,a)}return nl()===i&&Hr(o),a}insertAfter(t,r=!0){Ln(),pj(this,t);const n=this.getWritable(),s=t.getWritable(),i=s.getParent(),o=Ie();let a=!1,l=!1;if(i!==null){const p=t.getIndexWithinParent();if(Fc(s),pe(o)){const v=i.__key,m=o.anchor,b=o.focus;a=m.type==="element"&&m.key===v&&m.offset===p+1,l=b.type==="element"&&b.key===v&&b.offset===p+1}}const c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),h=s.__key,f=n.__next;if(c===null?u.__last=h:c.getWritable().__prev=h,u.__size++,n.__next=h,s.__next=f,s.__prev=n.__key,s.__parent=n.__parent,r&&pe(o)){const p=this.getIndexWithinParent();$b(o,u,p+1);const v=u.__key;a&&o.anchor.set(v,p+2,"element"),l&&o.focus.set(v,p+2,"element")}return t}insertBefore(t,r=!0){Ln(),pj(this,t);const n=this.getWritable(),s=t.getWritable(),i=s.__key;Fc(s);const o=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),l=n.__prev,c=this.getIndexWithinParent();o===null?a.__first=i:o.getWritable().__next=i,a.__size++,n.__prev=i,s.__prev=l,s.__next=n.__key,s.__parent=n.__parent;const u=Ie();return r&&pe(u)&&$b(u,this.getParentOrThrow(),c),t}isParentRequired(){return!1}createParentElementNode(){return eo()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){Ln();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(ie(n))return n.select();if(!ye(n)){const i=n.getIndexWithinParent()+1;return s.select(i,i)}return n.select(t,r)}selectNext(t,r){Ln();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(ie(n))return n.select(0,0);if(!ye(n)){const i=n.getIndexWithinParent();return s.select(i,i)}return n.select(t,r)}markDirty(){this.getWritable()}}class og extends zw{static getType(){return"linebreak"}static clone(t){return new og(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:t=>function(r){const n=r.parentElement;if(n!==null){const s=n.firstChild;if(s===r||s.nextSibling===r&&s5(s)){const i=n.lastChild;if(i===r||i.previousSibling===r&&s5(i))return!0}}return!1}(t)?null:{conversion:o5e,priority:0}}}static importJSON(t){return uh()}exportJSON(){return{type:"linebreak",version:1}}}function o5e(e){return{node:uh()}}function uh(){return Lw(new og)}function _p(e){return e instanceof og}function s5(e){return e.nodeType===Rl&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function bj(e,t){return 16&t?"code":t&EA?"mark":32&t?"sub":64&t?"sup":null}function xj(e,t){return 1&t?"strong":2&t?"em":"span"}function WV(e,t,r,n,s){const i=n.classList;let o=bp(s,"base");o!==void 0&&i.add(...o),o=bp(s,"underlineStrikethrough");let a=!1;const l=t&Ab&&t&Tb;o!==void 0&&(r&Ab&&r&Tb?(a=!0,l||i.add(...o)):l&&i.remove(...o));for(const c in Qc){const u=Qc[c];if(o=bp(s,c),o!==void 0)if(r&u){if(a&&(c==="underline"||c==="strikethrough")){t&u&&i.remove(...o);continue}t&u&&(!l||c!=="underline")&&c!=="strikethrough"||i.add(...o)}else t&u&&i.remove(...o)}}function VV(e,t,r){const n=t.firstChild,s=r.isComposing(),i=e+(s?Rw:"");if(n==null)t.textContent=i;else{const o=n.nodeValue;if(o!==i)if(s||ol){const[a,l,c]=function(u,h){const f=u.length,p=h.length;let v=0,m=0;for(;v<f&&v<p&&u[v]===h[v];)v++;for(;m+v<f&&m+v<p&&u[f-m-1]===h[p-m-1];)m++;return[v,f-v-m,h.slice(v,p-m)]}(o,i);l!==0&&n.deleteData(a,l),n.insertData(a,c)}else n.nodeValue=i}}function i5(e,t,r,n,s,i){VV(s,e,t);const o=i.theme.text;o!==void 0&&WV(0,0,n,e,o)}function Ny(e,t){const r=document.createElement(t);return r.appendChild(e),r}class qh extends zw{static getType(){return"text"}static clone(t){return new qh(t.__text,t.__key)}constructor(t,r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return zIe[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===nl()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=Qc[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return cN(this.getLatest().__format,t,r)}canHaveFormat(){return!0}createDOM(t,r){const n=this.__format,s=bj(0,n),i=xj(0,n),o=s===null?i:s,a=document.createElement(o);let l=a;this.hasFormat("code")&&a.setAttribute("spellcheck","false"),s!==null&&(l=document.createElement(i),a.appendChild(l)),i5(l,this,0,n,this.__text,t);const c=this.__style;return c!==""&&(a.style.cssText=c),a}updateDOM(t,r,n){const s=this.__text,i=t.__format,o=this.__format,a=bj(0,i),l=bj(0,o),c=xj(0,i),u=xj(0,o);if((a===null?c:a)!==(l===null?u:l))return!0;if(a===l&&c!==u){const m=r.firstChild;m==null&&xe(48);const b=document.createElement(u);return i5(b,this,0,o,s,n),r.replaceChild(b,m),!1}let h=r;l!==null&&a!==null&&(h=r.firstChild,h==null&&xe(49)),VV(s,h,this);const f=n.theme.text;f!==void 0&&i!==o&&WV(0,i,o,h,f);const p=t.__style,v=this.__style;return p!==v&&(r.style.cssText=v),!1}static importDOM(){return{"#text":()=>({conversion:u5e,priority:0}),b:()=>({conversion:l5e,priority:0}),code:()=>({conversion:Aa,priority:0}),em:()=>({conversion:Aa,priority:0}),i:()=>({conversion:Aa,priority:0}),s:()=>({conversion:Aa,priority:0}),span:()=>({conversion:a5e,priority:0}),strong:()=>({conversion:Aa,priority:0}),sub:()=>({conversion:Aa,priority:0}),sup:()=>({conversion:Aa,priority:0}),u:()=>({conversion:Aa,priority:0})}}static importJSON(t){const r=nn(t.text);return r.setFormat(t.format),r.setDetail(t.detail),r.setMode(t.mode),r.setStyle(t.style),r}exportDOM(t){let{element:r}=super.exportDOM(t);return r!==null&&qA(r)||xe(132),r.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(r=Ny(r,"b")),this.hasFormat("italic")&&(r=Ny(r,"i")),this.hasFormat("strikethrough")&&(r=Ny(r,"s")),this.hasFormat("underline")&&(r=Ny(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?Qc[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?LIe[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=cN(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=$Ie[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){Ln();let n=t,s=r;const i=Ie(),o=this.getTextContent(),a=this.__key;if(typeof o=="string"){const l=o.length;n===void 0&&(n=l),s===void 0&&(s=l)}else n=0,s=0;if(!pe(i))return YV(a,n,a,s,"text","text");{const l=nl();l!==i.anchor.key&&l!==i.focus.key||Hr(a),i.setTextNodeRange(this,n,this,s)}return i}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const i=this.getWritable(),o=i.__text,a=n.length;let l=t;l<0&&(l=a+l,l<0&&(l=0));const c=Ie();if(s&&pe(c)){const h=t+a;c.setTextNodeRange(i,h,i,h)}const u=o.slice(0,l)+n+o.slice(l+r);return i.__text=u,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Ln();const r=this.getLatest(),n=r.getTextContent(),s=r.__key,i=nl(),o=new Set(t),a=[],l=n.length;let c="";for(let E=0;E<l;E++)c!==""&&o.has(E)&&(a.push(c),c=""),c+=n[E];c!==""&&a.push(c);const u=a.length;if(u===0)return[];if(a[0]===n)return[r];const h=a[0],f=r.getParentOrThrow();let p;const v=r.getFormat(),m=r.getStyle(),b=r.__detail;let x=!1;r.isSegmented()?(p=nn(h),p.__format=v,p.__style=m,p.__detail=b,x=!0):(p=r.getWritable(),p.__text=h);const w=Ie(),_=[p];let j=h.length;for(let E=1;E<u;E++){const C=a[E],T=C.length,O=nn(C).getWritable();O.__format=v,O.__style=m,O.__detail=b;const P=O.__key,D=j+T;if(pe(w)){const R=w.anchor,$=w.focus;R.key===s&&R.type==="text"&&R.offset>j&&R.offset<=D&&(R.key=P,R.offset-=j,w.dirty=!0),$.key===s&&$.type==="text"&&$.offset>j&&$.offset<=D&&($.key=P,$.offset-=j,w.dirty=!0)}i===s&&Hr(P),j=D,_.push(O)}(function(E){const C=E.getPreviousSibling(),T=E.getNextSibling();C!==null&&Rb(C),T!==null&&Rb(T)})(this);const k=f.getWritable(),S=this.getIndexWithinParent();return x?(k.splice(S,0,_),this.remove()):k.splice(S,1,_),pe(w)&&$b(w,f,S,u-1),_}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||xe(50);const n=this.__key,s=t.__key,i=this.__text,o=i.length;nl()===s&&Hr(n);const a=Ie();if(pe(a)){const h=a.anchor,f=a.focus;h!==null&&h.key===s&&(m5(h,r,n,t,o),a.dirty=!0),f!==null&&f.key===s&&(m5(f,r,n,t,o),a.dirty=!0)}const l=t.__text,c=r?l+i:i+l;this.setTextContent(c);const u=this.getWritable();return t.remove(),u}isTextEntity(){return!1}}function a5e(e){return{forChild:BA(e.style),node:null}}function l5e(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:BA(t.style,r?void 0:"bold"),node:null}}const o5=new WeakMap;function c5e(e){return e.nodeName==="PRE"||e.nodeType===sg&&e.style!==void 0&&e.style.whiteSpace!==void 0&&e.style.whiteSpace.startsWith("pre")}function u5e(e){const t=e;e.parentElement===null&&xe(129);let r=t.textContent||"";if(function(n){let s,i=n.parentNode;const o=[n];for(;i!==null&&(s=o5.get(i))===void 0&&!c5e(i);)o.push(i),i=i.parentNode;const a=s===void 0?i:s;for(let l=0;l<o.length;l++)o5.set(o[l],a);return a}(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],i=n.length;for(let o=0;o<i;o++){const a=n[o];a===`
`||a===`\r
`?s.push(uh()):a==="	"?s.push(lg()):a!==""&&s.push(nn(a))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=a5(n,!1))!==null;){const i=n.textContent||"";if(i.length>0){/[ \t\n]$/.test(i)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=a5(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:nn(r)}}function a5(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const i=r.parentElement;if(i===null)return null;r=i}if(r=n,r.nodeType===sg){const i=r.style.display;if(i===""&&!e5e(r)||i!==""&&!i.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(r.nodeType===Rl)return r;if(r.nodeName==="BR")return null}}const d5e={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Aa(e){const t=d5e[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:BA(e.style,t),node:null}}function nn(e=""){return Lw(new qh(e))}function ye(e){return e instanceof qh}function BA(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",i=n.includes("line-through"),o=e.fontStyle==="italic",a=n.includes("underline"),l=e.verticalAlign;return c=>(ye(c)&&(s&&!c.hasFormat("bold")&&c.toggleFormat("bold"),i&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),o&&!c.hasFormat("italic")&&c.toggleFormat("italic"),a&&!c.hasFormat("underline")&&c.toggleFormat("underline"),l!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),l!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),t&&!c.hasFormat(t)&&c.toggleFormat(t)),c)}class ag extends qh{static getType(){return"tab"}static clone(t){const r=new ag(t.__key);return r.__text=t.__text,r.__format=t.__format,r.__style=t.__style,r}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}static importJSON(t){const r=lg();return r.setFormat(t.format),r.setStyle(t.style),r}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(t){xe(126)}setDetail(t){xe(127)}setMode(t){xe(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function lg(){return Lw(new ag)}function h5e(e){return e instanceof ag}class f5e{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){let r=this.getNode(),n=t.getNode();const s=this.offset,i=t.offset;return ie(r)&&(r=r.getDescendantByIndex(s)??r),ie(n)&&(n=n.getDescendantByIndex(i)??n),r===n?s<i:r.isBefore(n)}getNode(){const t=wn(this.key);return t===null&&xe(20),t}set(t,r,n){const s=this._selection,i=this.key;this.key=t,this.offset=r,this.type=n,ug()||(nl()===i&&Hr(t),s!==null&&(s.setCachedNodes(null),s.dirty=!0))}}function co(e,t,r){return new f5e(e,t,r)}function wj(e,t){let r=t.__key,n=e.offset,s="element";if(ye(t)){s="text";const i=t.getTextContentSize();n>i&&(n=i)}else if(!ie(t)){const i=t.getNextSibling();if(ye(i))r=i.__key,n=0,s="text";else{const o=t.getParent();o&&(r=o.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function l5(e,t){if(ie(t)){const r=t.getLastDescendant();ie(r)||ye(r)?wj(e,r):wj(e,t)}else wj(e,t)}function za(e,t,r,n){e.key=t,e.offset=r,e.type=n}class Uw{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!ni(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every(s=>n.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new Uw(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let i;if(ye(s))i=s.select();else{const o=s.getIndexWithinParent()+1;i=s.getParentOrThrow().select(o,o)}i.insertNodes(t);for(let o=0;o<n;o++)r[o].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const i=wn(s);i!==null&&n.push(i)}return ug()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}}function pe(e){return e instanceof Dl}class Dl{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!pe(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this.anchor,n=this.focus,s=r.isBefore(n),i=s?r:n,o=s?n:r;let a=i.getNode(),l=o.getNode();const c=i.offset,u=o.offset;if(ie(a)&&(a=a.getDescendantByIndex(c)??a),ie(l)){let f=l.getDescendantByIndex(u);f!==null&&f!==a&&l.getChildAtIndex(u)===f&&(f=f.getPreviousSibling()),l=f??l}let h;return h=a.is(l)?ie(a)&&a.getChildrenSize()>0?[]:[a]:a.getNodesBetween(l),ug()||(this._cachedNodes=h),h}setTextNodeRange(t,r,n,s){za(this.anchor,t.__key,r,"text"),za(this.focus,n.__key,s,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,i=this.focus,o=s.isBefore(i),[a,l]=_N(this);let c="",u=!0;for(let h=0;h<t.length;h++){const f=t[h];if(ie(f)&&!f.isInline())u||(c+=`
`),u=!f.isEmpty();else if(u=!1,ye(f)){let p=f.getTextContent();f===r?f===n?s.type==="element"&&i.type==="element"&&i.offset!==s.offset||(p=a<l?p.slice(a,l):p.slice(l,a)):p=o?p.slice(a):p.slice(l):f===n&&(p=o?p.slice(0,l):p.slice(0,a)),c+=p}else!At(f)&&!_p(f)||f===n&&this.isCollapsed()||(c+=f.getTextContent())}return c}applyDOMRange(t){const r=nr(),n=r.getEditorState()._selection,s=KV(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[i,o]=s;za(this.anchor,i.key,i.offset,i.type),za(this.focus,o.key,o.offset,o.type),this._cachedNodes=null}clone(){const t=this.anchor,r=this.focus;return new Dl(co(t.key,t.offset,t.type),co(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=cN(this.format,t,null),this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=Qc[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let i=0;i<s;i++){const o=r[i];o===`
`||o===`\r
`?n.push(uh()):o==="	"?n.push(lg()):n.push(nn(o))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,i=this.style;let o=r,a=n;!this.isCollapsed()&&n.isBefore(r)&&(o=n,a=r),o.type==="element"&&function(b,x,w,_){const j=b.getNode(),k=j.getChildAtIndex(b.offset),S=nn(),E=un(j)?eo().append(S):S;S.setFormat(w),S.setStyle(_),k===null?j.append(E):k.insertBefore(E),b.is(x)&&x.set(S.__key,0,"text"),b.set(S.__key,0,"text")}(o,a,s,i);const l=o.offset;let c=a.offset;const u=this.getNodes(),h=u.length;let f=u[0];ye(f)||xe(26);const p=f.getTextContent().length,v=f.getParentOrThrow();let m=u[h-1];if(h===1&&a.type==="element"&&(c=p,a.set(o.key,c,"text")),this.isCollapsed()&&l===p&&(f.isSegmented()||f.isToken()||!f.canInsertTextAfter()||!v.canInsertTextAfter()&&f.getNextSibling()===null)){let b=f.getNextSibling();if(ye(b)&&b.canInsertTextBefore()&&!td(b)||(b=nn(),b.setFormat(s),b.setStyle(i),v.canInsertTextAfter()?f.insertAfter(b):v.insertAfter(b)),b.select(0,0),f=b,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(f.isSegmented()||f.isToken()||!f.canInsertTextBefore()||!v.canInsertTextBefore()&&f.getPreviousSibling()===null)){let b=f.getPreviousSibling();if(ye(b)&&!td(b)||(b=nn(),b.setFormat(s),v.canInsertTextBefore()?f.insertBefore(b):v.insertBefore(b)),b.select(),f=b,t!=="")return void this.insertText(t)}else if(f.isSegmented()&&l!==p){const b=nn(f.getTextContent());b.setFormat(s),f.replace(b),f=b}else if(!this.isCollapsed()&&t!==""){const b=m.getParent();if(!v.canInsertTextBefore()||!v.canInsertTextAfter()||ie(b)&&(!b.canInsertTextBefore()||!b.canInsertTextAfter()))return this.insertText(""),HV(this.anchor,this.focus,null),void this.insertText(t)}if(h===1){if(f.isToken()){const _=nn(t);return _.select(),void f.replace(_)}const b=f.getFormat(),x=f.getStyle();if(l!==c||b===s&&x===i){if(h5e(f)){const _=nn(t);return _.setFormat(s),_.setStyle(i),_.select(),void f.replace(_)}}else{if(f.getTextContent()!==""){const _=nn(t);if(_.setFormat(s),_.setStyle(i),_.select(),l===0)f.insertBefore(_,!1);else{const[j]=f.splitText(l);j.insertAfter(_,!1)}return void(_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}f.setFormat(s),f.setStyle(i)}const w=c-l;f=f.spliceText(l,w,t,!0),f.getTextContent()===""?f.remove():this.anchor.type==="text"&&(f.isComposing()?this.anchor.offset-=t.length:(this.format=b,this.style=x))}else{const b=new Set([...f.getParentKeys(),...m.getParentKeys()]),x=ie(f)?f:f.getParentOrThrow();let w=ie(m)?m:m.getParentOrThrow(),_=m;if(!x.is(w)&&w.isInline())do _=w,w=w.getParentOrThrow();while(w.isInline());if(a.type==="text"&&(c!==0||m.getTextContent()==="")||a.type==="element"&&m.getIndexWithinParent()<c)if(ye(m)&&!m.isToken()&&c!==m.getTextContentSize()){if(m.isSegmented()){const C=nn(m.getTextContent());m.replace(C),m=C}un(a.getNode())||a.type!=="text"||(m=m.spliceText(0,c,"")),b.add(m.__key)}else{const C=m.getParentOrThrow();C.canBeEmpty()||C.getChildrenSize()!==1?m.remove():C.remove()}else b.add(m.__key);const j=w.getChildren(),k=new Set(u),S=x.is(w),E=x.isInline()&&f.getNextSibling()===null?x:f;for(let C=j.length-1;C>=0;C--){const T=j[C];if(T.is(f)||ie(T)&&T.isParentOf(f))break;T.isAttached()&&(!k.has(T)||T.is(_)?S||E.insertAfter(T,!1):T.remove())}if(!S){let C=w,T=null;for(;C!==null;){const O=C.getChildren(),P=O.length;(P===0||O[P-1].is(T))&&(b.delete(C.__key),T=C),C=C.getParent()}}if(f.isToken())if(l===p)f.select();else{const C=nn(t);C.select(),f.replace(C)}else f=f.spliceText(l,p-l,t,!0),f.getTextContent()===""?f.remove():f.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let C=1;C<h;C++){const T=u[C],O=T.__key;b.has(O)||T.remove()}}}removeText(){this.insertText("")}formatText(t){if(this.isCollapsed())return this.toggleFormat(t),void Hr(null);const r=this.getNodes(),n=[];for(const w of r)ye(w)&&n.push(w);const s=n.length;if(s===0)return this.toggleFormat(t),void Hr(null);const i=this.anchor,o=this.focus,a=this.isBackward(),l=a?o:i,c=a?i:o;let u=0,h=n[0],f=l.type==="element"?0:l.offset;if(l.type==="text"&&f===h.getTextContentSize()&&(u=1,h=n[1],f=0),h==null)return;const p=h.getFormatFlags(t,null),v=s-1;let m=n[v];const b=c.type==="text"?c.offset:m.getTextContentSize();if(h.is(m)){if(f===b)return;if(td(h)||f===0&&b===h.getTextContentSize())h.setFormat(p);else{const w=h.splitText(f,b),_=f===0?w[0]:w[1];_.setFormat(p),l.type==="text"&&l.set(_.__key,0,"text"),c.type==="text"&&c.set(_.__key,b-f,"text")}return void(this.format=p)}f===0||td(h)||([,h]=h.splitText(f),f=0),h.setFormat(p);const x=m.getFormatFlags(t,p);b>0&&(b===m.getTextContentSize()||td(m)||([m]=m.splitText(b)),m.setFormat(x));for(let w=u+1;w<v;w++){const _=n[w],j=_.getFormatFlags(t,x);_.setFormat(j)}l.type==="text"&&l.set(h.__key,f,"text"),c.type==="text"&&c.set(m.__key,b,"text"),this.format=p|x}insertNodes(t){if(t.length===0)return;if(this.anchor.key==="root"){this.insertParagraph();const v=Ie();return pe(v)||xe(134),v.insertNodes(t)}const r=gj((this.isBackward()?this.focus:this.anchor).getNode(),rd),n=t[t.length-1];if("__language"in r&&ie(r)){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const v=_j(this);r.splice(v,0,t),n.selectEnd()}return}if(!t.some(v=>(ie(v)||At(v))&&!v.isInline())){ie(r)||xe(135);const v=_j(this);return r.splice(v,0,t),void n.selectEnd()}const s=function(v){const m=eo();let b=null;for(let x=0;x<v.length;x++){const w=v[x],_=_p(w);if(_||At(w)&&w.isInline()||ie(w)&&w.isInline()||ye(w)||w.isParentRequired()){if(b===null&&(b=w.createParentElementNode(),m.append(b),_))continue;b!==null&&b.append(w)}else m.append(w),b=null}return m}(t),i=s.getLastDescendant(),o=s.getChildren(),a=v=>"__value"in v&&"__checked"in v,l=!ie(r)||!r.isEmpty()?this.insertParagraph():null,c=o[o.length-1];let u=o[0];var h;ie(h=u)&&rd(h)&&!h.isEmpty()&&ie(r)&&(!r.isEmpty()||a(r))&&(ie(r)||xe(135),r.append(...u.getChildren()),u=o[1]),u&&function(v,m,b){const x=m.getParentOrThrow().getLastChild();let w=m;const _=[m];for(;w!==x;)w.getNextSibling()||xe(140),w=w.getNextSibling(),_.push(w);let j=v;for(const k of _)j=j.insertAfter(k)}(r,u);const f=gj(i,rd);l&&ie(f)&&(a(l)||rd(c))&&(f.append(...l.getChildren()),l.remove()),ie(r)&&r.isEmpty()&&r.remove(),i.selectEnd();const p=ie(r)?r.getLastChild():null;_p(p)&&f!==r&&p.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=eo();return gr().splice(this.anchor.offset,0,[o]),o.select(),o}const t=_j(this),r=gj(this.anchor.getNode(),rd);ie(r)||xe(136);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],i=r.insertNewAfter(this,!1);return i?(i.append(...s),i.selectStart(),i):null}insertLineBreak(t){const r=uh();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,i=this.focus;let o=t[0],a=t[n];const[l,c]=_N(this);if(r===0)return[];if(r===1){if(ye(o)&&!this.isCollapsed()){const h=l>c?c:l,f=l>c?l:c,p=o.splitText(h,f),v=h===0?p[0]:p[1];return v!=null?[v]:[]}return[o]}const u=s.isBefore(i);if(ye(o)){const h=u?l:c;h===o.getTextContentSize()?t.shift():h!==0&&([,o]=o.splitText(h),t[0]=o)}if(ye(a)){const h=a.getTextContent().length,f=u?c:l;f===0?t.pop():f!==h&&([a]=a.splitText(f),t[n]=a)}return t}modify(t,r,n){const s=this.focus,i=this.anchor,o=t==="move",a=dm(s,r);if(At(a)&&!a.isIsolated()){if(o&&a.isKeyboardSelectable()){const p=f5();return p.add(a.__key),void ao(p)}const f=r?a.getPreviousSibling():a.getNextSibling();if(ye(f)){const p=f.__key,v=r?f.getTextContent().length:0;return s.set(p,v,"text"),void(o&&i.set(p,v,"text"))}{const p=a.getParentOrThrow();let v,m;return ie(f)?(m=f.__key,v=r?f.getChildrenSize():0):(v=a.getIndexWithinParent(),m=p.__key,r||v++),s.set(m,v,"element"),void(o&&i.set(m,v,"element"))}}const l=nr(),c=lo(l._window);if(!c)return;const u=l._blockCursorElement,h=l._rootElement;if(h===null||u===null||!ie(a)||a.isInline()||a.canBeEmpty()||UA(u,l,h),function(f,p,v,m){f.modify(p,v,m)}(c,t,r?"backward":"forward",n),c.rangeCount>0){const f=c.getRangeAt(0),p=this.anchor.getNode(),v=un(p)?p:QIe(p);if(this.applyDOMRange(f),this.dirty=!0,!o){const m=this.getNodes(),b=[];let x=!1;for(let w=0;w<m.length;w++){const _=m[w];uN(_,v)?b.push(_):x=!0}if(x&&b.length>0)if(r){const w=b[0];ie(w)?w.selectStart():w.getParentOrThrow().selectStart()}else{const w=b[b.length-1];ie(w)?w.selectEnd():w.getParentOrThrow().selectEnd()}c.anchorNode===f.startContainer&&c.anchorOffset===f.startOffset||function(w){const _=w.focus,j=w.anchor,k=j.key,S=j.offset,E=j.type;za(j,_.key,_.offset,_.type),za(_,k,S,E),w._cachedNodes=null}(this)}}}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&ie(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),i=r.getNextSibling()||(s===null?null:s.getNextSibling());if(ie(i)&&i.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const i=this.focus,o=dm(i,t);if(At(o)&&!o.isIsolated()){if(o.isKeyboardSelectable()&&ie(s)&&s.getChildrenSize()===0){s.remove();const a=f5();a.add(o.__key),ao(a)}else o.remove(),nr().dispatchCommand(wA,void 0);return}if(!t&&ie(o)&&ie(s)&&s.isEmpty())return s.remove(),void o.selectStart();if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&(n.type==="element"?n.getNode():n.getNode().getParentOrThrow()).collapseAtStart(this))return}else{const a=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,a!==null&&a.isSegmented()){const l=i.offset,c=a.getTextContentSize();if(a.is(s)||t&&l!==c||!t&&l!==0)return void u5(a,t,l)}else if(s!==null&&s.isSegmented()){const l=n.offset,c=s.getTextContentSize();if(s.is(a)||t&&l!==0||!t&&l!==c)return void u5(s,t,l)}(function(l,c){const u=l.anchor,h=l.focus,f=u.getNode(),p=h.getNode();if(f===p&&u.type==="text"&&h.type==="text"){const v=u.offset,m=h.offset,b=v<m,x=b?v:m,w=b?m:v,_=w-1;x!==_&&(NV(f.getTextContent().slice(x,w))||(c?h.offset=_:u.offset=_))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&un(n.getParent())&&n.getIndexWithinParent()===0&&n.collapseAtStart(this)}}deleteLine(t){if(this.isCollapsed()){const r=this.anchor.type==="element";if(r&&this.insertText(" "),this.modify("extend",t,"lineboundary"),(t?this.focus:this.anchor).offset===0&&this.modify("extend",t,"character"),r){const n=t?this.anchor:this.focus;n.set(n.key,n.offset+1,n.type)}}this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function ni(e){return e instanceof Uw}function c5(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function _N(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[c5(r),c5(n)]}function u5(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),i=s.length;let o=0,a=0;for(let c=0;c<i;c++){const u=c===i-1;if(a=o,o+=s[c].length,t&&o===r||o>r||u){s.splice(c,1),u&&(a=void 0);break}}const l=s.join("").trim();l===""?n.remove():(n.setTextContent(l),n.select(a,a))}function d5(e,t,r,n){let s,i=t;if(e.nodeType===sg){let o=!1;const a=e.childNodes,l=a.length,c=n._blockCursorElement;i===l&&(o=!0,i=l-1);let u=a[i],h=!1;if(u===c)u=a[i+1],h=!0;else if(c!==null){const f=c.parentNode;e===f&&t>Array.prototype.indexOf.call(f.children,c)&&i--}if(s=pd(u),ye(s))i=KI(s,o);else{let f=pd(e);if(f===null)return null;if(ie(f)){i=Math.min(f.getChildrenSize(),i);let p=f.getChildAtIndex(i);if(ie(p)&&function(v,m,b){const x=v.getParent();return b===null||x===null||!x.canBeEmpty()||x!==b.getNode()}(p,0,r)){const v=o?p.getLastDescendant():p.getFirstDescendant();v===null?f=p:(p=v,f=ie(p)?p:p.getParentOrThrow()),i=0}ye(p)?(s=p,f=null,i=KI(p,o)):p!==f&&o&&!h&&i++}else{const p=f.getIndexWithinParent();i=t===0&&At(f)&&pd(e)===f?p:p+1,f=f.getParentOrThrow()}if(ie(f))return co(f.__key,i,"element")}}else s=pd(e);return ye(s)?co(s.__key,i,"text"):null}function h5(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const i=s.getPreviousSibling(),o=s.getParent();if(t){if((r||!t)&&i===null&&ie(o)&&o.isInline()){const a=o.getPreviousSibling();ye(a)&&(e.key=a.__key,e.offset=a.getTextContent().length)}}else ie(i)&&!r&&i.isInline()?(e.key=i.__key,e.offset=i.getChildrenSize(),e.type="element"):ye(i)&&(e.key=i.__key,e.offset=i.getTextContent().length)}else if(n===s.getTextContent().length){const i=s.getNextSibling(),o=s.getParent();if(t&&ie(i)&&i.isInline())e.key=i.__key,e.offset=0,e.type="element";else if((r||t)&&i===null&&ie(o)&&o.isInline()&&!o.canInsertTextAfter()){const a=o.getNextSibling();ye(a)&&(e.key=a.__key,e.offset=0)}}}function HV(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);h5(e,n,s),h5(t,!n,s),s&&(t.key=e.key,t.offset=e.offset,t.type=e.type);const i=nr();if(i.isComposing()&&i._compositionKey!==e.key&&pe(r)){const o=r.anchor,a=r.focus;za(e,o.key,o.offset,o.type),za(t,a.key,a.offset,a.type)}}}function KV(e,t,r,n,s,i){if(e===null||r===null||!ig(s,e,r))return null;const o=d5(e,t,pe(i)?i.anchor:null,s);if(o===null)return null;const a=d5(r,n,pe(i)?i.focus:null,s);if(a===null)return null;if(o.type==="element"&&a.type==="element"){const l=pd(e),c=pd(r);if(At(l)&&At(c))return null}return HV(o,a,i),[o,a]}function jN(e){return ie(e)&&!e.isInline()}function YV(e,t,r,n,s,i){const o=va(),a=new Dl(co(e,t,s),co(r,n,i),0,"");return a.dirty=!0,o._selection=a,a}function p5e(){const e=co("root",0,"element"),t=co("root",0,"element");return new Dl(e,t,0,"")}function f5(){return new Uw(new Set)}function WA(e,t,r,n){const s=r._window;if(s===null)return null;const i=n||s.event,o=i?i.type:void 0,a=o==="selectionchange",l=!lN&&(a||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&i&&i.detail===3||o==="drop"||o===void 0);let c,u,h,f;if(pe(e)&&!l)return e.clone();if(t===null)return null;if(c=t.anchorNode,u=t.focusNode,h=t.anchorOffset,f=t.focusOffset,a&&pe(e)&&!ig(r,c,u))return e.clone();const p=KV(c,h,u,f,r,e);if(p===null)return null;const[v,m]=p;return new Dl(v,m,pe(e)?e.format:0,pe(e)?e.style:"")}function Ie(){return va()._selection}function cg(){return nr()._editorState._selection}function $b(e,t,r,n=1){const s=e.anchor,i=e.focus,o=s.getNode(),a=i.getNode();if(!t.is(o)&&!t.is(a))return;const l=t.__key;if(e.isCollapsed()){const c=s.offset;if(r<=c&&n>0||r<c&&n<0){const u=Math.max(0,c+n);s.set(l,u,"element"),i.set(l,u,"element"),p5(e)}}else{const c=e.isBackward(),u=c?i:s,h=u.getNode(),f=c?s:i,p=f.getNode();if(t.is(h)){const v=u.offset;(r<=v&&n>0||r<v&&n<0)&&u.set(l,Math.max(0,v+n),"element")}if(t.is(p)){const v=f.offset;(r<=v&&n>0||r<v&&n<0)&&f.set(l,Math.max(0,v+n),"element")}}p5(e)}function p5(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,i=t.getNode(),o=n.getNode();if(e.isCollapsed()){if(!ie(i))return;const a=i.getChildrenSize(),l=r>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(r);if(ye(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,"text"),n.set(c.__key,u,"text")}}else{if(ie(i)){const a=i.getChildrenSize(),l=r>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(r);if(ye(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,"text")}}if(ie(o)){const a=o.getChildrenSize(),l=s>=a,c=l?o.getChildAtIndex(a-1):o.getChildAtIndex(s);if(ye(c)){let u=0;l&&(u=c.getTextContentSize()),n.set(c.__key,u,"text")}}}}function zb(e,t,r,n,s){let i=null,o=0,a=null;n!==null?(i=n.__key,ye(n)?(o=n.getTextContentSize(),a="text"):ie(n)&&(o=n.getChildrenSize(),a="element")):s!==null&&(i=s.__key,ye(s)?a="text":ie(s)&&(a="element")),i!==null&&a!==null?e.set(i,o,a):(o=t.getIndexWithinParent(),o===-1&&(o=r.getChildrenSize()),e.set(r.__key,o,"element"))}function m5(e,t,r,n,s){e.type==="text"?(e.key=r,t||(e.offset+=s)):e.offset>n.getIndexWithinParent()&&(e.offset-=1)}function m5e(e,t,r,n,s,i,o){const a=n.anchorNode,l=n.focusNode,c=n.anchorOffset,u=n.focusOffset,h=document.activeElement;if(s.has("collaboration")&&h!==i||h!==null&&IA(h))return;if(!pe(t))return void(e!==null&&ig(r,a,l)&&n.removeAllRanges());const f=t.anchor,p=t.focus,v=f.key,m=p.key,b=Db(r,v),x=Db(r,m),w=f.offset,_=p.offset,j=t.format,k=t.style,S=t.isCollapsed();let E=b,C=x,T=!1;if(f.type==="text"){E=Pb(b);const F=f.getNode();T=F.getFormat()!==j||F.getStyle()!==k}else pe(e)&&e.anchor.type==="text"&&(T=!0);var O,P,D,R,$;if(p.type==="text"&&(C=Pb(x)),E!==null&&C!==null&&(S&&(e===null||T||pe(e)&&(e.format!==j||e.style!==k))&&(O=j,P=k,D=w,R=v,$=performance.now(),$V=[O,P,D,R,$]),c!==w||u!==_||a!==E||l!==C||n.type==="Range"&&S||(h!==null&&i.contains(h)||i.focus({preventScroll:!0}),f.type==="element"))){try{n.setBaseAndExtent(E,w,C,_)}catch{}if(!s.has("skip-scroll-into-view")&&t.isCollapsed()&&i!==null&&i===document.activeElement){const F=t instanceof Dl&&t.anchor.type==="element"?E.childNodes[w]||null:n.rangeCount>0?n.getRangeAt(0):null;if(F!==null){let V;if(F instanceof Text){const q=document.createRange();q.selectNode(F),V=q.getBoundingClientRect()}else V=F.getBoundingClientRect();(function(q,K,Y){const L=Y.ownerDocument,X=L.defaultView;if(X===null)return;let{top:te,bottom:ve}=K,H=0,G=0,he=Y;for(;he!==null;){const fe=he===L.body;if(fe)H=0,G=Iw(q).innerHeight;else{const W=he.getBoundingClientRect();H=W.top,G=W.bottom}let _e=0;if(te<H?_e=-(H-te):ve>G&&(_e=ve-G),_e!==0)if(fe)X.scrollBy(0,_e);else{const W=he.scrollTop;he.scrollTop+=_e;const J=he.scrollTop-W;te-=J,ve-=J}if(fe)break;he=Mw(he)}})(r,V,i)}}bN=!0}}function g5e(e){let t=Ie()||cg();t===null&&(t=gr().selectEnd()),t.insertNodes(e)}function _j(e){let t=e;e.isCollapsed()||t.removeText();const r=Ie();pe(r)&&(t=r),pe(t)||xe(161);const n=t.anchor;let s=n.getNode(),i=n.offset;for(;!rd(s);)[s,i]=y5e(s,i);return i}function y5e(e,t){const r=e.getParent();if(!r){const s=eo();return gr().append(s),s.select(),[gr(),0]}if(ye(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const i=t===0?0:1;return[r,s[0].getIndexWithinParent()+i]}if(!ie(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new Dl(co(e.__key,t,"element"),co(e.__key,t,"element"),0,""),i=e.insertNewAfter(s);i&&i.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}let Ir=null,Lr=null,Un=!1,jj=!1,rv=0;const g5={characterData:!0,childList:!0,subtree:!0};function ug(){return Un||Ir!==null&&Ir._readOnly}function Ln(){Un&&xe(13)}function GV(){rv>99&&xe(14)}function va(){return Ir===null&&xe(15),Ir}function nr(){return Lr===null&&xe(16),Lr}function v5e(){return Lr}function y5(e,t,r){const n=t.__type,s=function(a,l){const c=a._nodes.get(l);return c===void 0&&xe(30,l),c}(e,n);let i=r.get(n);i===void 0&&(i=Array.from(s.transforms),r.set(n,i));const o=i.length;for(let a=0;a<o&&(i[a](t),t.isAttached());a++);}function v5(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function b5e(e){return VA(e,nr()._nodes)}function VA(e,t){const r=e.type,n=t.get(r);n===void 0&&xe(17,r);const s=n.klass;e.type!==s.getType()&&xe(18,s.name);const i=s.importJSON(e),o=e.children;if(ie(i)&&Array.isArray(o))for(let a=0;a<o.length;a++){const l=VA(o[a],t);i.append(l)}return i}function b5(e,t){const r=Ir,n=Un,s=Lr;Ir=e,Un=!0,Lr=null;try{return t()}finally{Ir=r,Un=n,Lr=s}}function $c(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const i=e._editorState,o=i._selection,a=r._selection,l=e._dirtyType!==Jc,c=Ir,u=Un,h=Lr,f=e._updating,p=e._observer;let v=null;if(e._pendingEditorState=null,e._editorState=r,!s&&l&&p!==null){Lr=e,Ir=r,Un=!1,e._updating=!0;try{const S=e._dirtyType,E=e._dirtyElements,C=e._dirtyLeaves;p.disconnect(),v=s5e(i,r,e,S,E,C)}catch(S){if(S instanceof Error&&e._onError(S),jj)throw S;return XV(e,null,n,r),xV(e),e._dirtyType=ch,jj=!0,$c(e,i),void(jj=!1)}finally{p.observe(n,g5),e._updating=f,Ir=c,Un=u,Lr=h}}r._readOnly||(r._readOnly=!0);const m=e._dirtyLeaves,b=e._dirtyElements,x=e._normalizedNodes,w=e._updateTags,_=e._deferred;l&&(e._dirtyType=Jc,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(S,E){const C=S._decorators;let T=S._pendingDecorators||C;const O=E._nodeMap;let P;for(P in T)O.has(P)||(T===C&&(T=kV(S)),delete T[P])}(e,r);const j=s?null:lo(e._window);if(e._editable&&j!==null&&(l||a===null||a.dirty)){Lr=e,Ir=r;try{if(p!==null&&p.disconnect(),l||a===null||a.dirty){const S=e._blockCursorElement;S!==null&&UA(S,e,n),m5e(o,a,e,j,w,n)}XIe(e,n,a),p!==null&&p.observe(n,g5)}finally{Lr=h,Ir=c}}v!==null&&function(S,E,C,T,O){const P=Array.from(S._listeners.mutation),D=P.length;for(let R=0;R<D;R++){const[$,F]=P[R],V=E.get(F);V!==void 0&&$(V,{dirtyLeaves:T,prevEditorState:O,updateTags:C})}}(e,v,w,m,i),pe(a)||a===null||o!==null&&o.is(a)||e.dispatchCommand(wA,void 0);const k=e._pendingDecorators;k!==null&&(e._decorators=k,e._pendingDecorators=null,jp("decorator",e,!0,k)),function(S,E,C){const T=HI(E),O=HI(C);T!==O&&jp("textcontent",S,!0,O)}(e,t||i,r),jp("update",e,!0,{dirtyElements:b,dirtyLeaves:m,editorState:r,normalizedNodes:x,prevEditorState:t||i,tags:w}),function(S,E){if(S._deferred=[],E.length!==0){const C=S._updating;S._updating=!0;try{for(let T=0;T<E.length;T++)E[T]()}finally{S._updating=C}}}(e,_),function(S){const E=S._updates;if(E.length!==0){const C=E.shift();if(C){const[T,O]=C;JV(S,T,O)}}}(e)}function jp(e,t,r,...n){const s=t._updating;t._updating=r;try{const i=Array.from(t._listeners[e]);for(let o=0;o<i.length;o++)i[o].apply(null,n)}finally{t._updating=s}}function ZV(e,t,r){if(e._updating===!1||Lr!==e){let s=!1;return e.update(()=>{s=ZV(e,t,r)}),s}const n=LA(e);for(let s=4;s>=0;s--)for(let i=0;i<n.length;i++){const o=n[i]._commands.get(t);if(o!==void 0){const a=o[s];if(a!==void 0){const l=Array.from(a),c=l.length;for(let u=0;u<c;u++)if(l[u](r,e)===!0)return!0}}}return!1}function x5(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[i,o]=s;let a,l;o!==void 0&&(a=o.onUpdate,l=o.tag,o.skipTransforms&&(n=!0),a&&e._deferred.push(a),l&&e._updateTags.add(l)),i()}}return n}function JV(e,t,r){const n=e._updateTags;let s,i,o=!1,a=!1;r!==void 0&&(s=r.onUpdate,i=r.tag,i!=null&&n.add(i),o=r.skipTransforms||!1,a=r.discrete||!1),s&&e._deferred.push(s);const l=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=new Bw(new Map((c||l)._nodeMap)),u=!0),c._flushSync=a;const h=Ir,f=Un,p=Lr,v=e._updating;Ir=c,Un=!1,e._updating=!0,Lr=e;try{u&&(e._headless?l._selection!==null&&(c._selection=l._selection.clone()):c._selection=function(x){const w=x.getEditorState()._selection,_=lo(x._window);return pe(w)||w==null?WA(w,_,x,null):w.clone()}(e));const m=e._compositionKey;t(),o=x5(e,o),function(x,w){const _=w.getEditorState()._selection,j=x._selection;if(pe(j)){const k=j.anchor,S=j.focus;let E;if(k.type==="text"&&(E=k.getNode(),E.selectionTransform(_,j)),S.type==="text"){const C=S.getNode();E!==C&&C.selectionTransform(_,j)}}}(c,e),e._dirtyType!==Jc&&(o?function(x,w){const _=w._dirtyLeaves,j=x._nodeMap;for(const k of _){const S=j.get(k);ye(S)&&S.isAttached()&&S.isSimpleText()&&!S.isUnmergeable()&&WI(S)}}(c,e):function(x,w){const _=w._dirtyLeaves,j=w._dirtyElements,k=x._nodeMap,S=nl(),E=new Map;let C=_,T=C.size,O=j,P=O.size;for(;T>0||P>0;){if(T>0){w._dirtyLeaves=new Set;for(const D of C){const R=k.get(D);ye(R)&&R.isAttached()&&R.isSimpleText()&&!R.isUnmergeable()&&WI(R),R!==void 0&&v5(R,S)&&y5(w,R,E),_.add(D)}if(C=w._dirtyLeaves,T=C.size,T>0){rv++;continue}}w._dirtyLeaves=new Set,w._dirtyElements=new Map;for(const D of O){const R=D[0],$=D[1];if(R!=="root"&&!$)continue;const F=k.get(R);F!==void 0&&v5(F,S)&&y5(w,F,E),j.set(R,$)}C=w._dirtyLeaves,T=C.size,O=w._dirtyElements,P=O.size,rv++}w._dirtyLeaves=_,w._dirtyElements=j}(c,e),x5(e),function(x,w,_,j){const k=x._nodeMap,S=w._nodeMap,E=[];for(const[C]of j){const T=S.get(C);T!==void 0&&(T.isAttached()||(ie(T)&&AV(T,C,k,S,E,j),k.has(C)||j.delete(C),E.push(C)))}for(const C of E)S.delete(C);for(const C of _){const T=S.get(C);T===void 0||T.isAttached()||(k.has(C)||_.delete(C),S.delete(C))}}(l,c,e._dirtyLeaves,e._dirtyElements)),m!==e._compositionKey&&(c._flushSync=!0);const b=c._selection;if(pe(b)){const x=c._nodeMap,w=b.anchor.key,_=b.focus.key;x.get(w)!==void 0&&x.get(_)!==void 0||xe(19)}else ni(b)&&b._nodes.size===0&&(c._selection=null)}catch(m){return m instanceof Error&&e._onError(m),e._pendingEditorState=l,e._dirtyType=ch,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void $c(e)}finally{Ir=h,Un=f,Lr=p,e._updating=v,rv=0}e._dirtyType!==Jc||function(m,b){const x=b.getEditorState()._selection,w=m._selection;if(w!==null){if(w.dirty||!w.is(x))return!0}else if(x!==null)return!0;return!1}(c,e)?c._flushSync?(c._flushSync=!1,$c(e)):u&&KIe(()=>{$c(e)}):(c._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function es(e,t,r){e._updating?e._updates.push([t,r]):JV(e,t,r)}class qw extends zw{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__indent=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return FIe[t]||""}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=nr()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(ye(r)&&t.push(r),ie(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;ie(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;ie(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const i=r[n-1];return ie(i)&&i.getLastDescendant()||i||null}const s=r[t];return ie(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:wn(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&xe(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:wn(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&xe(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const i=r[s];t+=i.getTextContent(),ie(i)&&s!==n-1&&!i.isInline()&&(t+=aa)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const i=r[s];t+=i.getTextContentSize(),ie(i)&&s!==n-1&&!i.isInline()&&(t+=aa.length)}return t}getDirection(){return this.getLatest().__dir}hasFormat(t){if(t!==""){const r=UI[t];return!!(this.getFormat()&r)}return!1}select(t,r){Ln();const n=Ie();let s=t,i=r;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const l=this.getFirstChild();if(ye(l)||ie(l))return l.select(0,0)}else if(!(t!==void 0&&t!==o||r!==void 0&&r!==o)){const l=this.getLastChild();if(ye(l)||ie(l))return l.select()}}s===void 0&&(s=o),i===void 0&&(i=o);const a=this.__key;return pe(n)?(n.anchor.set(a,s,"element"),n.focus.set(a,i,"element"),n.dirty=!0,n):YV(a,s,a,i,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(r=>r.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?UI[t]:0,this}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,i=this.getChildrenSize(),o=this.getWritable(),a=o.__key,l=[],c=[],u=this.getChildAtIndex(t+r);let h=null,f=i-r+s;if(t!==0)if(t===i)h=this.getLastChild();else{const v=this.getChildAtIndex(t);v!==null&&(h=v.getPreviousSibling())}if(r>0){let v=h===null?this.getFirstChild():h.getNextSibling();for(let m=0;m<r;m++){v===null&&xe(100);const b=v.getNextSibling(),x=v.__key;Fc(v.getWritable()),c.push(x),v=b}}let p=h;for(let v=0;v<s;v++){const m=n[v];p!==null&&m.is(p)&&(h=p=p.getPreviousSibling());const b=m.getWritable();b.__parent===a&&f--,Fc(b);const x=m.__key;if(p===null)o.__first=x,b.__prev=null;else{const w=p.getWritable();w.__next=x,b.__prev=w.__key}m.__key===a&&xe(76),b.__parent=a,l.push(x),p=m}if(t+r===i)p!==null&&(p.getWritable().__next=null,o.__last=p.__key);else if(u!==null){const v=u.getWritable();if(p!==null){const m=p.getWritable();v.__prev=p.__key,m.__next=u.__key}else v.__prev=null}if(o.__size=f,c.length){const v=Ie();if(pe(v)){const m=new Set(c),b=new Set(l),{anchor:x,focus:w}=v;w5(x,m,b)&&zb(x,x.getNode(),this,h,u),w5(w,m,b)&&zb(w,w.getNode(),this,h,u),f!==0||this.canBeEmpty()||Uh(this)||this.remove()}}return o}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}}function ie(e){return e instanceof qw}function w5(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}class x5e extends zw{constructor(t){super(t)}decorate(t,r){xe(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function At(e){return e instanceof x5e}class dg extends qw{static getType(){return"root"}static clone(){return new dg}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){xe(51)}getTextContent(){const t=this.__cachedText;return!ug()&&nr()._dirtyType!==Jc||t===null?super.getTextContent():t}remove(){xe(52)}replace(t){xe(53)}insertBefore(t){xe(54)}insertAfter(t){xe(55)}updateDOM(t,r){return!1}append(...t){for(let r=0;r<t.length;r++){const n=t[r];ie(n)||At(n)||xe(56)}return super.append(...t)}static importJSON(t){const r=gr();return r.setFormat(t.format),r.setIndent(t.indent),r.setDirection(t.direction),r}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function un(e){return e instanceof dg}function HA(){return new Bw(new Map([["root",new dg]]))}function QV(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&xe(130,r.name),ie(e)){const n=t.children;Array.isArray(n)||xe(59,r.name);const s=e.getChildren();for(let i=0;i<s.length;i++){const o=QV(s[i]);n.push(o)}}return t}class Bw{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t){return b5(this,t)}clone(t){const r=new Bw(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return b5(this,()=>({root:QV(gr())}))}}class KA extends qw{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class Bh extends qw{constructor(t){super(t),this.__textFormat=0}static getType(){return"paragraph"}getTextFormat(){return this.getLatest().__textFormat}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}hasTextFormat(t){const r=Qc[t];return!!(this.getTextFormat()&r)}static clone(t){return new Bh(t.__key)}createDOM(t){const r=document.createElement("p"),n=bp(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:w5e,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(r&&qA(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();r.style.textAlign=n;const s=this.getDirection();s&&(r.dir=s);const i=this.getIndent();i>0&&(r.style.textIndent=20*i+"px")}return{element:r}}static importJSON(t){const r=eo();return r.setFormat(t.format),r.setIndent(t.indent),r.setDirection(t.direction),r.setTextFormat(t.textFormat),r}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),type:"paragraph",version:1}}insertNewAfter(t,r){const n=eo();n.setTextFormat(t.format);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||ye(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function w5e(e){const t=eo();if(e.style){t.setFormat(e.style.textAlign);const r=parseInt(e.style.textIndent,10)/20;r>0&&t.setIndent(r)}return{node:t}}function eo(){return Lw(new Bh)}function dh(e){return e instanceof Bh}const ut=0,_5e=4;function XV(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=HA(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=Jc,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const i=e._observer;i!==null&&(i.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function j5e(e){const t=e||{},r=v5e(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,i=t.disableEvents||!1,o=HA(),a=t.namespace||(s!==null?s._config.namespace:CV()),l=t.editorState,c=[dg,qh,og,ag,Bh,KA,...t.nodes||[]],{onError:u,html:h}=t,f=t.editable===void 0||t.editable;let p;if(e===void 0&&r!==null)p=r._nodes;else{p=new Map;for(let m=0;m<c.length;m++){let b=c[m],x=null,w=null;if(typeof b!="function"){const S=b;b=S.replace,x=S.with,w=S.withKlass||null}const _=b.getType(),j=b.transform(),k=new Set;j!==null&&k.add(j),p.set(_,{exportDOM:h&&h.export?h.export.get(b):void 0,klass:b,replace:x,replaceWithKlass:w,transforms:k})}}const v=new k5e(o,s,p,{disableEvents:i,namespace:a,theme:n},u||console.error,function(m,b){const x=new Map,w=new Set,_=j=>{Object.keys(j).forEach(k=>{let S=x.get(k);S===void 0&&(S=[],x.set(k,S)),S.push(j[k])})};return m.forEach(j=>{const k=j.klass.importDOM;if(k==null||w.has(k))return;w.add(k);const S=k.call(j.klass);S!==null&&_(S)}),b&&_(b),x}(p,h?h.import:void 0),f);return l!==void 0&&(v._pendingEditorState=l,v._dirtyType=ch),v}class k5e{constructor(t,r,n,s,i,o,a){this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=Jc,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=CV(),this._onError=i,this._htmlConversions=o,this._editable=a,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&xe(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const i=s.get(t);i===void 0&&xe(36,String(t));const o=i[n];return o.add(r),()=>{o.delete(r),i.every(a=>a.size===0)&&s.delete(t)}}registerMutationListener(t,r){let n=this._nodes.get(t.getType());n===void 0&&xe(37,t.name);let s=t,i=null;for(;i=n.replaceWithKlass;)s=i,n=this._nodes.get(i.getType()),n===void 0&&xe(37,i.name);const o=this._listeners.mutation;return o.set(r,s),()=>{o.delete(r)}}registerNodeTransformToKlass(t,r){const n=t.getType(),s=this._nodes.get(n);return s===void 0&&xe(37,t.name),s.transforms.add(r),s}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],i=n.replaceWithKlass;if(i!=null){const l=this.registerNodeTransformToKlass(i,r);s.push(l)}var o,a;return o=this,a=t.getType(),es(o,()=>{const l=va();if(l.isEmpty())return;if(a==="root")return void gr().markDirty();const c=l._nodeMap;for(const[,u]of c)u.markDirty()},o._pendingEditorState===null?{tag:"history-merge"}:void 0),()=>{s.forEach(l=>l.transforms.delete(r))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return je(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=bp(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,XV(this,r,t,s),r!==null&&(this._config.disableEvents||i5e(r),n!=null&&r.classList.remove(...n)),t!==null){const i=function(a){const l=a.ownerDocument;return l&&l.defaultView||null}(t),o=t.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=i,this._dirtyType=ch,xV(this),this._updateTags.add("history-merge"),$c(this),this._config.disableEvents||function(a,l){const c=a.ownerDocument,u=Fb.get(c);(u===void 0||u<1)&&c.addEventListener("selectionchange",BV),Fb.set(c,(u||0)+1),a.__lexicalEditor=l;const h=qV(a);for(let f=0;f<vN.length;f++){const[p,v]=vN[f],m=typeof v=="function"?b=>{n5(b)||(r5(b),(l.isEditable()||p==="click")&&v(b,l))}:b=>{if(n5(b))return;r5(b);const x=l.isEditable();switch(p){case"cut":return x&&je(l,SA,b);case"copy":return je(l,Ow,b);case"paste":return x&&je(l,_A,b);case"dragstart":return x&&je(l,hV,b);case"dragover":return x&&je(l,fV,b);case"dragend":return x&&je(l,wIe,b);case"focus":return x&&je(l,kIe,b);case"blur":return x&&je(l,SIe,b);case"drop":return x&&je(l,dV,b)}};a.addEventListener(p,m),h.push(()=>{a.removeEventListener(p,m)})}}(t,this),n!=null&&t.classList.add(...n)}else this._editorState=s,this._pendingEditorState=null,this._window=null;jp("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&xe(38),bV(this);const n=this._pendingEditorState,s=this._updateTags,i=r!==void 0?r.tag:null;n===null||n.isEmpty()||(i!=null&&s.add(i),$c(this)),this._pendingEditorState=t,this._dirtyType=ch,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&s.add(i),$c(this)}parseEditorState(t,r){return function(n,s,i){const o=HA(),a=Ir,l=Un,c=Lr,u=s._dirtyElements,h=s._dirtyLeaves,f=s._cloneNotNeeded,p=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,Ir=o,Un=!1,Lr=s;try{const v=s._nodes;VA(n.root,v),i&&i(),o._readOnly=!0}catch(v){v instanceof Error&&s._onError(v)}finally{s._dirtyElements=u,s._dirtyLeaves=h,s._cloneNotNeeded=f,s._dirtyType=p,Ir=a,Un=l,Lr=c}return o}(typeof t=="string"?JSON.parse(t):t,this,r)}update(t,r){es(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),es(this,()=>{const s=Ie(),i=gr();s!==null?s.dirty=!0:i.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?i.selectStart():i.selectEnd())},{onUpdate:()=>{n.removeAttribute("autocapitalize"),t&&t()},tag:"focus"}),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=lo(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,jp("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}const eH=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,S5e=eH?g.useLayoutEffect:g.useEffect,Cy={tag:"history-merge"};function N5e({initialConfig:e,children:t}){const r=g.useMemo(()=>{const{theme:n,namespace:s,editor__DEPRECATED:i,nodes:o,onError:a,editorState:l,html:c}=e,u=uIe(null,n);let h=i||null;if(h===null){const f=j5e({editable:e.editable,html:c,namespace:s,nodes:o,onError:p=>a(p,f),theme:n});(function(p,v){if(v!==null){if(v===void 0)p.update(()=>{const m=gr();if(m.isEmpty()){const b=eo();m.append(b);const x=eH?document.activeElement:null;(Ie()!==null||x!==null&&x===p.getRootElement())&&b.select()}},Cy);else if(v!==null)switch(typeof v){case"string":{const m=p.parseEditorState(v);p.setEditorState(m,Cy);break}case"object":p.setEditorState(v,Cy);break;case"function":p.update(()=>{gr().isEmpty()&&v(p)},Cy)}}})(f,l),h=f}return[h,u]},[]);return S5e(()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)},[]),d.jsx(rV.Provider,{value:r,children:t})}const C5e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?g.useLayoutEffect:g.useEffect;function E5e(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function T5e(){return function(e){const[t]=zh(),r=g.useMemo(()=>e(t),[t,e]),n=g.useRef(r.initialValueFn()),[s,i]=g.useState(n.current);return C5e(()=>{const{initialValueFn:o,subscribe:a}=r,l=o();return n.current!==l&&(n.current=l,i(l)),a(c=>{n.current=c,i(c)})},[r,e]),s}(E5e)}function A5e(){return gr().getTextContent()}function O5e(e,t=!0){if(e)return!1;let r=A5e();return t&&(r=r.trim()),r===""}function P5e(e){if(!O5e(e,!1))return!1;const t=gr().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(At(s))return!1;if(ie(s)){if(!dh(s)||s.__indent!==0)return!1;const i=s.getChildren(),o=i.length;for(let a=0;a<o;a++){const l=i[n];if(!ye(l))return!1}}}return!0}function R5e(e){return()=>P5e(e)}function D5e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}D5e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function M5e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}M5e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const I5e=new Map;function L5e(e){const t={},r=e.split(";");for(const n of r)if(n!==""){const[s,i]=n.split(/:([^]+)/);s&&i&&(t[s.trim()]=i.trim())}return t}function tH(e){const t=e.constructor.clone(e);return t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,ie(e)&&ie(t)?(n=e,(r=t).__first=n.__first,r.__last=n.__last,r.__size=n.__size,r.__format=n.__format,r.__indent=n.__indent,r.__dir=n.__dir,r):ye(e)&&ye(t)?function(s,i){return s.__format=i.__format,s.__style=i.__style,s.__mode=i.__mode,s.__detail=i.__detail,s}(t,e):dh(e)&&dh(t)?function(s,i){return s.__textFormat=i.__textFormat,s}(t,e):t;var r,n}function rH(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&r!==null){const[n,s]=r,i=e.isBackward(),o=n.getNode(),a=s.getNode(),l=t.is(o),c=t.is(a);if(l||c){const[u,h]=_N(e),f=o.is(a),p=t.is(i?a:o),v=t.is(i?o:a);let m,b=0;return f?(b=u>h?h:u,m=u>h?u:h):p?(b=i?h:u,m=void 0):v&&(b=0,m=i?u:h),t.__text=t.__text.slice(b,m),t}}return t}function F5e(e){const t=e.getStyle(),r=L5e(t);I5e.set(t,r)}function _5(e,t){const r=dm(e.focus,t);return At(r)&&!r.isIsolated()||ie(r)&&!r.isInline()&&!r.canBeEmpty()}function $5e(e,t,r,n){e.modify(t?"extend":"move",r,n)}function z5e(e){const t=e.anchor.getNode();return(un(t)?t:t.getParentOrThrow()).getDirection()==="rtl"}function j5(e,t,r){const n=z5e(e);$5e(e,t,r?!n:n,"character")}function U5e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q5e=U5e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const nH=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,B5e=nH&&"documentMode"in document?document.documentMode:null;!(!nH||!("InputEvent"in window)||B5e)&&"getTargetRanges"in new window.InputEvent("input");function Ww(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function W5e(e){const t=YA(e,r=>ie(r)&&!r.isInline());return ie(t)||q5e(4,e.__key),t}const YA=(e,t)=>{let r=e;for(;r!==gr()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function wc(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function V5e(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const i=n.data;if(typeof i=="string"){let o;try{o=JSON.parse(i)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const a=o.payload;if(a&&a.functionId==="makeChanges"){const l=a.args;if(l){const[c,u,h,f,p,v]=l;e.update(()=>{const m=Ie();if(pe(m)){const b=m.anchor;let x=b.getNode(),w=0,_=0;if(ye(x)&&c>=0&&u>=0&&(w=c,_=c+u,m.setTextNodeRange(x,w,x,_)),w===_&&h===""||(m.insertRawText(h),x=b.getNode()),ye(x)){w=f,_=f+p;const j=x.getTextContentSize();w=w>j?j:w,_=_>j?j:_,m.setTextNodeRange(x,w,x,_)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function H5e(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let i=0;i<r.length;i++){const o=r[i];if(!iH.has(o.nodeName)){const a=oH(o,e,s,!1);a!==null&&(n=n.concat(a))}}return function(i){for(const o of i)o.getNextSibling()instanceof KA&&o.insertAfter(uh());for(const o of i){const a=o.getChildren();for(const l of a)o.insertBefore(l);o.remove()}}(s),n}function K5e(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=gr().getChildren();for(let s=0;s<n.length;s++)sH(e,n[s],r,t);return r.innerHTML}function sH(e,t,r,n=null){let s=n===null||t.isSelected(n);const i=ie(t)&&t.excludeFromCopy("html");let o=t;if(n!==null){let p=tH(t);p=ye(p)&&n!==null?rH(n,p):p,o=p}const a=ie(o)?o.getChildren():[],l=e._nodes.get(o.getType());let c;c=l&&l.exportDOM!==void 0?l.exportDOM(e,o):o.exportDOM(e);const{element:u,after:h}=c;if(!u)return!1;const f=document.createDocumentFragment();for(let p=0;p<a.length;p++){const v=a[p],m=sH(e,v,f,n);!s&&ie(t)&&m&&t.extractWithChild(v,n,"html")&&(s=!0)}if(s&&!i){if(qA(u)&&u.append(f),r.append(u),h){const p=h.call(o,u);p&&u.replaceWith(p)}}else r.append(f);return s}const iH=new Set(["STYLE","SCRIPT"]);function oH(e,t,r,n,s=new Map,i){let o=[];if(iH.has(e.nodeName))return o;let a=null;const l=function(v,m){const{nodeName:b}=v,x=m._htmlConversions.get(b.toLowerCase());let w=null;if(x!==void 0)for(const _ of x){const j=_(v);j!==null&&(w===null||(w.priority||0)<(j.priority||0))&&(w=j)}return w!==null?w.conversion:null}(e,t),c=l?l(e):null;let u=null;if(c!==null){u=c.after;const v=c.node;if(a=Array.isArray(v)?v[v.length-1]:v,a!==null){for(const[,m]of s)if(a=m(a,i),!a)break;a&&o.push(...Array.isArray(v)?v:[a])}c.forChild!=null&&s.set(e.nodeName,c.forChild)}const h=e.childNodes;let f=[];const p=(a==null||!Uh(a))&&(a!=null&&jN(a)||n);for(let v=0;v<h.length;v++)f.push(...oH(h[v],t,r,p,new Map(s),a));return u!=null&&(f=u(f)),t5e(e)&&(f=Y5e(e,f,p?()=>{const v=new KA;return r.push(v),v}:eo)),a==null?o=o.concat(f):ie(a)&&a.append(...f),o}function Y5e(e,t,r){const n=e.style.textAlign,s=[];let i=[];for(let o=0;o<t.length;o++){const a=t[o];if(jN(a))n&&!a.getFormat()&&a.setFormat(n),s.push(a);else if(i.push(a),o===t.length-1||o<t.length-1&&jN(t[o+1])){const l=r();l.setFormat(n),l.append(...i),s.push(l),i=[]}}return s}function G5e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ub=G5e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const Z5e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,aH=e=>Z5e?(e||window).getSelection():null;function J5e(e){const t=Ie();return t==null&&Ub(166),pe(t)&&t.isCollapsed()||t.getNodes().length===0?"":K5e(e,t)}function Q5e(e){const t=Ie();return t==null&&Ub(166),pe(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(X5e(e,t))}function k5(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return S5(r,eLe(o.nodes),t)}catch{}const s=e.getData("text/html");if(s)try{const o=new DOMParser().parseFromString(s,"text/html");return S5(r,H5e(r,o),t)}catch{}const i=e.getData("text/plain")||e.getData("text/uri-list");if(i!=null)if(pe(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let a=0;a<o.length;a++){const l=Ie();if(pe(l)){const c=o[a];c===`
`||c===`\r
`?l.insertParagraph():c==="	"?l.insertNodes([lg()]):l.insertText(c)}}}else t.insertRawText(i)}function S5(e,t,r){e.dispatchCommand(hIe,{nodes:t,selection:r})||r.insertNodes(t)}function lH(e,t,r,n=[]){let s=t===null||r.isSelected(t);const i=ie(r)&&r.excludeFromCopy("html");let o=r;if(t!==null){let c=tH(r);c=ye(c)&&t!==null?rH(t,c):c,o=c}const a=ie(o)?o.getChildren():[],l=function(c){const u=c.exportJSON(),h=c.constructor;if(u.type!==h.getType()&&Ub(58,h.name),ie(c)){const f=u.children;Array.isArray(f)||Ub(59,h.name)}return u}(o);if(ye(o)){const c=o.__text;c.length>0?l.text=c:s=!1}for(let c=0;c<a.length;c++){const u=a[c],h=lH(e,t,u,l.children);!s&&ie(r)&&h&&r.extractWithChild(u,t,"clone")&&(s=!0)}if(s&&!i)n.push(l);else if(Array.isArray(l.children))for(let c=0;c<l.children.length;c++){const u=l.children[c];n.push(u)}return s}function X5e(e,t){const r=[],n=gr().getChildren();for(let s=0;s<n.length;s++)lH(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function eLe(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=b5e(n);ye(s)&&F5e(s),t.push(s)}return t}let Fu=null;async function N5(e,t){if(Fu!==null)return!1;if(t!==null)return new Promise((a,l)=>{e.update(()=>{a(C5(e,t))})});const r=e.getRootElement(),n=e._window==null?window.document:e._window.document,s=aH(e._window);if(r===null||s===null)return!1;const i=n.createElement("span");i.style.cssText="position: fixed; top: -1000px;",i.append(n.createTextNode("#")),r.append(i);const o=new Range;return o.setStart(i,0),o.setEnd(i,1),s.removeAllRanges(),s.addRange(o),new Promise((a,l)=>{const c=e.registerCommand(Ow,u=>(wc(u,ClipboardEvent)&&(c(),Fu!==null&&(window.clearTimeout(Fu),Fu=null),a(C5(e,u))),!0),_5e);Fu=window.setTimeout(()=>{c(),Fu=null,a(!1)},50),n.execCommand("copy"),i.remove()})}function C5(e,t){const r=aH(e._window);if(!r)return!1;const n=r.anchorNode,s=r.focusNode;if(n!==null&&s!==null&&!ig(e,n,s))return!1;t.preventDefault();const i=t.clipboardData,o=Ie();if(i===null||o===null)return!1;const a=J5e(e),l=Q5e(e);let c="";return o!==null&&(c=o.getTextContent()),a!==null&&i.setData("text/html",a),l!==null&&i.setData("application/x-lexical-editor",l),i.setData("text/plain",c),!0}function E5(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const Wh=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,tLe=Wh&&"documentMode"in document?document.documentMode:null,rLe=!(!Wh||!("InputEvent"in window)||tLe)&&"getTargetRanges"in new window.InputEvent("input"),nLe=Wh&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),sLe=Wh&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,iLe=Wh&&/^(?=.*Chrome).*/i.test(navigator.userAgent),oLe=Wh&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!iLe,T5=dIe();function Ey(e){let t=null;if(wc(e,DragEvent)?t=e.dataTransfer:wc(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function A5(e){const t=Ie();if(!pe(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const i=n[s],o=i.getKey();if(r.has(o))continue;const a=YA(i,c=>ie(c)&&!c.isInline());if(a===null)continue;const l=a.getKey();a.canIndent()&&!r.has(l)&&(r.add(l),e(a))}return r.size>0}function Ty(e){const t=Xc(e);return At(t)}function aLe(e){return Ww(e.registerCommand(nV,t=>{const r=Ie();return!!ni(r)&&(r.clear(),!0)},0),e.registerCommand(Lc,t=>{const r=Ie();return!!pe(r)&&(r.deleteCharacter(t),!0)},ut),e.registerCommand(cm,t=>{const r=Ie();return!!pe(r)&&(r.deleteWord(t),!0)},ut),e.registerCommand(um,t=>{const r=Ie();return!!pe(r)&&(r.deleteLine(t),!0)},ut),e.registerCommand(Cd,t=>{const r=Ie();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)k5(n,r,e);else if(pe(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0},ut),e.registerCommand(oN,()=>{const t=Ie();return!!pe(t)&&(t.removeText(),!0)},ut),e.registerCommand(rl,t=>{const r=Ie();return!!pe(r)&&(r.formatText(t),!0)},ut),e.registerCommand(xIe,t=>{const r=Ie();if(!pe(r)&&!ni(r))return!1;const n=r.getNodes();for(const s of n){const i=YA(s,o=>ie(o)&&!o.isInline());i!==null&&i.setFormat(t)}return!0},ut),e.registerCommand(Nd,t=>{const r=Ie();return!!pe(r)&&(r.insertLineBreak(t),!0)},ut),e.registerCommand(Nb,()=>{const t=Ie();return!!pe(t)&&(t.insertParagraph(),!0)},ut),e.registerCommand(vIe,()=>(g5e([lg()]),!0),ut),e.registerCommand(bIe,()=>A5(t=>{const r=t.getIndent();t.setIndent(r+1)}),ut),e.registerCommand(zI,()=>A5(t=>{const r=t.getIndent();r>0&&t.setIndent(r-1)}),ut),e.registerCommand(oV,t=>{const r=Ie();if(ni(r)&&!Ty(t.target)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(pe(r)){const n=dm(r.focus,!0);if(!t.shiftKey&&At(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1},ut),e.registerCommand(aV,t=>{const r=Ie();if(ni(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(pe(r)){if(function(s){const i=s.focus;return i.key==="root"&&i.offset===gr().getChildrenSize()}(r))return t.preventDefault(),!0;const n=dm(r.focus,!1);if(!t.shiftKey&&At(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1},ut),e.registerCommand(iV,t=>{const r=Ie();if(ni(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectPrevious(),!0}if(!pe(r))return!1;if(_5(r,!0)){const n=t.shiftKey;return t.preventDefault(),j5(r,n,!0),!0}return!1},ut),e.registerCommand(sV,t=>{const r=Ie();if(ni(r)&&!Ty(t.target)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),s[0].selectNext(0,0),!0}if(!pe(r))return!1;const n=t.shiftKey;return!!_5(r,!1)&&(t.preventDefault(),j5(r,n,!1),!0)},ut),e.registerCommand(lV,t=>{if(Ty(t.target))return!1;const r=Ie();if(!pe(r))return!1;t.preventDefault();const{anchor:n}=r,s=n.getNode();return r.isCollapsed()&&n.offset===0&&!un(s)&&W5e(s).getIndent()>0?e.dispatchCommand(zI,void 0):e.dispatchCommand(Lc,!0)},ut),e.registerCommand(uV,t=>{if(Ty(t.target))return!1;const r=Ie();return!!pe(r)&&(t.preventDefault(),e.dispatchCommand(Lc,!1))},ut),e.registerCommand(Cb,t=>{const r=Ie();if(!pe(r))return!1;if(t!==null){if((sLe||nLe||oLe)&&rLe)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(Nd,!1)}return e.dispatchCommand(Nb,void 0)},ut),e.registerCommand(cV,()=>{const t=Ie();return!!pe(t)&&(e.blur(),!0)},ut),e.registerCommand(dV,t=>{const[,r]=Ey(t);if(r.length>0){const s=E5(t.clientX,t.clientY);if(s!==null){const{offset:i,node:o}=s,a=Xc(o);if(a!==null){const l=p5e();if(ye(a))l.anchor.set(a.getKey(),i,"text"),l.focus.set(a.getKey(),i,"text");else{const u=a.getParentOrThrow().getKey(),h=a.getIndexWithinParent()+1;l.anchor.set(u,h,"element"),l.focus.set(u,h,"element")}const c=wV(l);ao(c)}e.dispatchCommand(T5,r)}return t.preventDefault(),!0}const n=Ie();return!!pe(n)},ut),e.registerCommand(hV,t=>{const[r]=Ey(t),n=Ie();return!(r&&!pe(n))},ut),e.registerCommand(fV,t=>{const[r]=Ey(t),n=Ie();if(r&&!pe(n))return!1;const s=E5(t.clientX,t.clientY);if(s!==null){const i=Xc(s.node);At(i)&&t.preventDefault()}return!0},ut),e.registerCommand(aN,()=>(JIe(),!0),ut),e.registerCommand(Ow,t=>(N5(e,wc(t,ClipboardEvent)?t:null),!0),ut),e.registerCommand(SA,t=>(async function(r,n){await N5(n,wc(r,ClipboardEvent)?r:null),n.update(()=>{const s=Ie();pe(s)?s.removeText():ni(s)&&s.getNodes().forEach(i=>i.remove())})}(t,e),!0),ut),e.registerCommand(_A,t=>{const[,r,n]=Ey(t);return r.length>0&&!n?(e.dispatchCommand(T5,r),!0):IA(t.target)?!1:Ie()!==null&&(function(s,i){s.preventDefault(),i.update(()=>{const o=Ie(),a=wc(s,InputEvent)||wc(s,KeyboardEvent)?null:s.clipboardData;a!=null&&o!==null&&k5(a,o,i)},{tag:"paste"})}(t,e),!0)},ut))}const kN=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?g.useLayoutEffect:g.useEffect;function O5(e){return e.getEditorState().read(R5e(e.isComposing()))}function lLe({contentEditable:e,placeholder:t,ErrorBoundary:r}){const[n]=zh(),s=function(i,o){const[a,l]=g.useState(()=>i.getDecorators());return kN(()=>i.registerDecoratorListener(c=>{to.flushSync(()=>{l(c)})}),[i]),g.useEffect(()=>{l(i.getDecorators())},[i]),g.useMemo(()=>{const c=[],u=Object.keys(a);for(let h=0;h<u.length;h++){const f=u[h],p=d.jsx(o,{onError:m=>i._onError(m),children:d.jsx(g.Suspense,{fallback:null,children:a[f]})}),v=i.getElementByKey(f);v!==null&&c.push(to.createPortal(p,v,f))}return c},[o,a,i])}(n,r);return function(i){kN(()=>Ww(aLe(i),V5e(i)),[i])}(n),d.jsxs(d.Fragment,{children:[e,d.jsx(cLe,{content:t}),s]})}function cLe({content:e}){const[t]=zh(),r=function(s){const[i,o]=g.useState(()=>O5(s));return kN(()=>{function a(){const l=O5(s);o(l)}return a(),Ww(s.registerUpdateListener(()=>{a()}),s.registerEditableListener(()=>{a()}))},[s]),i}(t),n=T5e();return r?typeof e=="function"?e(n):e:null}const uLe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?g.useLayoutEffect:g.useEffect;function dLe({ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:r,ariaDescribedBy:n,ariaExpanded:s,ariaLabel:i,ariaLabelledBy:o,ariaMultiline:a,ariaOwns:l,ariaRequired:c,autoCapitalize:u,className:h,id:f,role:p="textbox",spellCheck:v=!0,style:m,tabIndex:b,"data-testid":x,...w}){const[_]=zh(),[j,k]=g.useState(!1),S=g.useCallback(E=>{E&&E.ownerDocument&&E.ownerDocument.defaultView&&_.setRootElement(E)},[_]);return uLe(()=>(k(_.isEditable()),_.registerEditableListener(E=>{k(E)})),[_]),d.jsx("div",{...w,"aria-activedescendant":j?e:void 0,"aria-autocomplete":j?t:"none","aria-controls":j?r:void 0,"aria-describedby":n,"aria-expanded":j&&p==="combobox"?!!s:void 0,"aria-label":i,"aria-labelledby":o,"aria-multiline":a,"aria-owns":j?l:void 0,"aria-readonly":!j||void 0,"aria-required":c,autoCapitalize:u,className:h,contentEditable:j,"data-testid":x,id:f,ref:S,role:p,spellCheck:v,style:m,tabIndex:b})}const kj=0,SN=1,NN=2,Qs=0,hLe=1,P5=2,fLe=3,pLe=4;function mLe(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return Qs;const i=t._selection,o=e._selection;if(s)return hLe;if(!(pe(i)&&pe(o)&&o.isCollapsed()&&i.isCollapsed()))return Qs;const a=function(x,w,_){const j=x._nodeMap,k=[];for(const S of w){const E=j.get(S);E!==void 0&&k.push(E)}for(const[S,E]of _){if(!E)continue;const C=j.get(S);C===void 0||un(C)||k.push(C)}return k}(t,r,n);if(a.length===0)return Qs;if(a.length>1){const x=t._nodeMap,w=x.get(i.anchor.key),_=x.get(o.anchor.key);return w&&_&&!e._nodeMap.has(w.__key)&&ye(w)&&w.__text.length===1&&i.anchor.offset===1?P5:Qs}const l=a[0],c=e._nodeMap.get(l.__key);if(!ye(c)||!ye(l)||c.__mode!==l.__mode)return Qs;const u=c.__text,h=l.__text;if(u===h)return Qs;const f=i.anchor,p=o.anchor;if(f.key!==p.key||f.type!=="text")return Qs;const v=f.offset,m=p.offset,b=h.length-u.length;return b===1&&m===v-1?P5:b===-1&&m===v+1?fLe:b===-1&&m===v?pLe:Qs}function gLe(e,t){let r=Date.now(),n=Qs;return(s,i,o,a,l,c)=>{const u=Date.now();if(c.has("historic"))return n=Qs,r=u,NN;const h=mLe(s,i,a,l,e.isComposing()),f=(()=>{const p=o===null||o.editor===e,v=c.has("history-push");if(!v&&p&&c.has("history-merge"))return kj;if(s===null)return SN;const m=i._selection;return a.size>0||l.size>0?v===!1&&h!==Qs&&h===n&&u<r+t&&p||a.size===1&&function(b,x,w){const _=x._nodeMap.get(b),j=w._nodeMap.get(b),k=x._selection,S=w._selection;let E=!1;return pe(k)&&pe(S)&&(E=k.anchor.type==="element"&&k.focus.type==="element"&&S.anchor.type==="text"&&S.focus.type==="text"),!(E||!ye(_)||!ye(j))&&_.__type===j.__type&&_.__text===j.__text&&_.__mode===j.__mode&&_.__detail===j.__detail&&_.__style===j.__style&&_.__format===j.__format&&_.__parent===j.__parent}(Array.from(a)[0],s,i)?kj:SN:m!==null?kj:NN})();return r=u,n=h,f}}function R5(e){e.undoStack=[],e.redoStack=[],e.current=null}function yLe(e,t,r){const n=gLe(e,r);return Ww(e.registerCommand(jA,()=>(function(s,i){const o=i.redoStack,a=i.undoStack;if(a.length!==0){const l=i.current,c=a.pop();l!==null&&(o.push(l),s.dispatchCommand(ky,!0)),a.length===0&&s.dispatchCommand(Sy,!1),i.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:"historic"})}}(e,t),!0),ut),e.registerCommand(kA,()=>(function(s,i){const o=i.redoStack,a=i.undoStack;if(o.length!==0){const l=i.current;l!==null&&(a.push(l),s.dispatchCommand(Sy,!0));const c=o.pop();o.length===0&&s.dispatchCommand(ky,!1),i.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:"historic"})}}(e,t),!0),ut),e.registerCommand(_Ie,()=>(R5(t),!1),ut),e.registerCommand(jIe,()=>(R5(t),e.dispatchCommand(ky,!1),e.dispatchCommand(Sy,!1),!0),ut),e.registerUpdateListener(({editorState:s,prevEditorState:i,dirtyLeaves:o,dirtyElements:a,tags:l})=>{const c=t.current,u=t.redoStack,h=t.undoStack,f=c===null?null:c.editorState;if(c!==null&&s===f)return;const p=n(i,s,c,o,a,l);if(p===SN)u.length!==0&&(t.redoStack=[],e.dispatchCommand(ky,!1)),c!==null&&(h.push({...c}),e.dispatchCommand(Sy,!0));else if(p===NN)return;t.current={editor:e,editorState:s}}))}function vLe(){return{current:null,redoStack:[],undoStack:[]}}function bLe({externalHistoryState:e}){const[t]=zh();return function(r,n,s=1e3){const i=g.useMemo(()=>n||vLe(),[n]);g.useEffect(()=>yLe(r,i,s),[s,r,i])}(t,e),null}function xLe({defaultSelection:e}){const[t]=zh();return g.useEffect(()=>{t.focus(()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})},{defaultSelection:e})},[e,t]),null}function CN(e,t){return CN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},CN(e,t)}var D5={error:null},wLe=function(e){var t,r;function n(){for(var i,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(i=e.call.apply(e,[this].concat(a))||this).state=D5,i.resetErrorBoundary=function(){for(var c,u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];i.props.onReset==null||(c=i.props).onReset.apply(c,h),i.reset()},i}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,CN(t,r),n.getDerivedStateFromError=function(i){return{error:i}};var s=n.prototype;return s.reset=function(){this.setState(D5)},s.componentDidCatch=function(i,o){var a,l;(a=(l=this.props).onError)==null||a.call(l,i,o)},s.componentDidUpdate=function(i,o){var a,l,c,u,h=this.state.error,f=this.props.resetKeys;h!==null&&o.error!==null&&((c=i.resetKeys)===void 0&&(c=[]),(u=f)===void 0&&(u=[]),c.length!==u.length||c.some(function(p,v){return!Object.is(p,u[v])}))&&((a=(l=this.props).onResetKeysChange)==null||a.call(l,i.resetKeys,f),this.reset())},s.render=function(){var i=this.state.error,o=this.props,a=o.fallbackRender,l=o.FallbackComponent,c=o.fallback;if(i!==null){var u={error:i,resetErrorBoundary:this.resetErrorBoundary};if(g.isValidElement(c))return c;if(typeof a=="function")return a(u);if(l)return g.createElement(l,u);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n}(g.Component);function _Le({children:e,onError:t}){return d.jsx(wLe,{fallback:d.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}function jLe({item:e,contentType:t,onSave:r,onCancel:n}){const[s,i]=g.useState(l()),[o,a]=g.useState({});function l(){if(e){const{id:m,created_at:b,updated_at:x,created_by:w,..._}=e;return _}return(()=>{switch(t){case"posts":case"pages":return{status:"draft",title:"",content:"",slug:"",author_id:void 0,excerpt:void 0,featured_image:void 0,tags:[],category_id:void 0};case"storeItems":return{status:"active",name:"",description:"",price:0,category:"digital",image_url:void 0,stock_quantity:0,sku:void 0};case"libraryItems":return{status:"draft",title:"",description:"",file_url:"",file_type:void 0,file_size:0,category:"tutorial",thumbnail_url:void 0};case"characters":return{status:"draft",name:"",description:"",role:"",backstory:"",image_url:"",birth_date:void 0,death_date:void 0,species:void 0,occupation:void 0,relationships:void 0};case"timelineEvents":return{status:"draft",title:"",date:"",era:"ancient",description:"",is_published:!1,details:null,background_image:null,nested_events:[]};case"betaUsers":return{status:"pending",name:"",email:"",message:""};default:throw new Error(`Unsupported content type: ${t}`)}})()}const c=g.useCallback(()=>{const m=e?{...e,...s}:s;r(m)},[s,e,r]),u={namespace:"MyEditor",theme:{},onError(m){console.error(m)}},h=g.useCallback(m=>b=>{const x=b.target.value;i(w=>({...w,[m]:x}))},[]),f=g.useCallback(m=>b=>{const x=parseFloat(b.target.value);i(w=>({...w,[m]:x}))},[]),p=g.useCallback(m=>b=>{const x=b.target.value;i(w=>({...w,[m]:x}))},[]),v=()=>{switch(t){case"posts":case"pages":const m=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:m.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter title...",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug"}),d.jsx("input",{type:"text",value:m.slug,onChange:k=>i(S=>({...S,slug:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"my-awesome-post"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"URL-friendly version of the title. e.g., 'my-awesome-post'"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),d.jsx("div",{className:"editor-container",children:d.jsxs(N5e,{initialConfig:u,children:[d.jsx(lLe,{contentEditable:d.jsx(dLe,{className:"editor-input"}),placeholder:d.jsx("div",{className:"editor-placeholder",children:"Enter your content..."}),ErrorBoundary:_Le}),d.jsx(bLe,{}),d.jsx(xLe,{})]})})]})]});case"storeItems":const b=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name"}),d.jsx("input",{type:"text",value:b.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price"}),d.jsx("input",{type:"number",step:"0.01",value:b.price,onChange:f("price"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),d.jsxs("select",{value:b.category,onChange:p("category"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"digital",children:"Digital"}),d.jsx("option",{value:"physical",children:"Physical"}),d.jsx("option",{value:"subscription",children:"Subscription"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:b.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product description..."})]})]});case"libraryItems":const x=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:x.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resource title..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),d.jsxs("select",{value:x.category,onChange:p("category"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"tutorial",children:"Tutorial"}),d.jsx("option",{value:"resources",children:"Resources"}),d.jsx("option",{value:"template",children:"Template"}),d.jsx("option",{value:"guide",children:"Guide"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File URL"}),d.jsx("input",{type:"url",value:x.file_url,onChange:h("file_url"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:x.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resource description..."})]})]});case"characters":const w=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Character Name"}),d.jsx("input",{type:"text",value:w.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),d.jsxs("select",{value:w.role,onChange:p("role"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"protagonist",children:"Protagonist"}),d.jsx("option",{value:"antagonist",children:"Antagonist"}),d.jsx("option",{value:"mentor",children:"Mentor"}),d.jsx("option",{value:"ally",children:"Ally"}),d.jsx("option",{value:"neutral",children:"Neutral"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:w.description,onChange:h("description"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character description..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backstory"}),d.jsx("textarea",{value:w.backstory,onChange:h("backstory"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character backstory..."})]})]});case"timelineEvents":const _=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title"}),d.jsx("input",{type:"text",value:_.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event title..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),d.jsx("input",{type:"date",value:_.date,onChange:h("date"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Era"}),d.jsxs("select",{value:_.era,onChange:p("era"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"ancient",children:"Ancient"}),d.jsx("option",{value:"medieval",children:"Medieval"}),d.jsx("option",{value:"modern",children:"Modern"}),d.jsx("option",{value:"future",children:"Future"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:_.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event description..."})]})]});case"betaUsers":const j=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),d.jsx("input",{type:"text",value:j.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"User name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),d.jsx("input",{type:"email",value:j.email,onChange:h("email"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"user@example.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),d.jsx("textarea",{value:j.message,onChange:h("message"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"User message/notes..."})]})]});default:return null}};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?`Edit ${t}`:`Create New ${t}`}),d.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700",children:d.jsx(cl,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[v(),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:s.status,onChange:m=>i({...s,status:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t==="posts"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"archived",children:"Archived"})]}),t==="pages"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="storeItems"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]}),t==="libraryItems"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="characters"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="timelineEvents"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="betaUsers"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsxs("button",{type:"button",onClick:c,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(z2,{className:"w-4 h-4"}),"Save"]}),d.jsx("button",{type:"button",onClick:n,className:"flex items-center gap-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}const kLe=({contentType:e,items:t,title:r,columns:n,createActionLabel:s,onEdit:i,onDelete:o,onCreateNew:a})=>{const[l,c]=g.useState(""),[u,h]=g.useState("all"),f=t.filter(p=>{const v=Object.values(p).some(b=>b&&b.toString().toLowerCase().includes(l.toLowerCase())),m=u==="all"||p.status===u;return v&&m});return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r}),d.jsxs("button",{onClick:a,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(ro,{className:"w-4 h-4"}),s]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(nu,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),placeholder:`Search ${r.toLowerCase()}...`,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsxs("select",{value:u,onChange:p=>h(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"}),d.jsx("option",{value:"pending",children:"Pending"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[n.map(p=>d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:p.label},p.key)),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:f.map(p=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[n.map(v=>d.jsx("td",{className:"py-4 px-6",children:v.render?v.render(p):d.jsx("div",{className:v.key===n[0].key?"font-medium text-gray-900":"text-sm text-gray-500",children:p[v.key]})},v.key)),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>i(p),className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(cx,{className:"w-4 h-4"})}),d.jsx("button",{className:"p-1 text-gray-500 hover:text-green-600",children:d.jsx(Tm,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>o(p.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(su,{className:"w-4 h-4"})})]})})]},p.id))})]})})]})},SLe=async()=>{const{data:e,error:t}=await le.from("pages").select("*");if(t)throw new Error(t.message);return e},NLe=async e=>{const{data:t,error:r}=await le.from("pages").insert(e).select();if(r)throw new Error(r.message);return t[0]},CLe=async e=>{const{data:t,error:r}=await le.from("pages").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},ELe=async e=>{const{error:t}=await le.from("pages").delete().eq("id",e);if(t)throw new Error(t.message)},TLe=()=>{const e=ua(),[t,r]=g.useState(!1),[n,s]=g.useState(null),{data:i,isLoading:o,isError:a,error:l}=hr({queryKey:["pages"],queryFn:SLe}),c=Gt({mutationFn:NLe,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]}),r(!1),s(null)}}),u=Gt({mutationFn:CLe,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]}),r(!1),s(null)}}),h=Gt({mutationFn:ELe,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]})}}),f=m=>{n?u.mutate(m):c.mutate(m)},p=m=>{window.confirm("Are you sure you want to delete this page?")&&h.mutate(m)},v=[{key:"title",label:"Page Title"},{key:"slug",label:"URL Slug"},{key:"status",label:"Status",render:m=>d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m.status==="published"?"bg-green-100 text-green-800":m.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:m.status})},{key:"created_at",label:"Created At",render:m=>new Date(m.created_at).toLocaleDateString()},{key:"updated_at",label:"Last Updated",render:m=>new Date(m.updated_at).toLocaleDateString()}];return o?d.jsx("div",{children:"Loading pages..."}):a?d.jsxs("div",{children:["Error loading pages: ",l==null?void 0:l.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(jLe,{item:n,contentType:"pages",onSave:f,onCancel:()=>{r(!1),s(null)}}):d.jsx(kLe,{contentType:"pages",items:i||[],title:"Website Pages",columns:v,createActionLabel:"New Page",onEdit:m=>{s(m),r(!0)},onDelete:p,onCreateNew:()=>{s(null),r(!0)}})})},ALe=async()=>{const{data:e,error:t}=await le.from("characters").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},OLe=async e=>{const{data:t,error:r}=await le.from("characters").insert(e).select();if(r)throw new Error(r.message);return t[0]},PLe=async e=>{const{id:t,...r}=e,{data:n,error:s}=await le.from("characters").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},RLe=async e=>{const{error:t}=await le.from("characters").delete().eq("id",e);if(t)throw new Error(t.message)},DLe=({character:e,onSave:t,onCancel:r})=>{const[n,s]=g.useState({name:(e==null?void 0:e.name)||"",title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",traits:(e==null?void 0:e.traits.join(", "))||"",image_url:(e==null?void 0:e.image_url)||"",silhouette_url:(e==null?void 0:e.silhouette_url)||""}),i=()=>{const o={...n,traits:n.traits.split(",").map(a=>a.trim()).filter(a=>a!=="")};t({...e,...o,id:e==null?void 0:e.id})};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e?"Edit Character":"Create New Character"}),d.jsxs("form",{onSubmit:o=>{o.preventDefault(),i()},children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),d.jsx("input",{type:"text",value:n.name,onChange:o=>s({...n,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:n.title,onChange:o=>s({...n,title:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:n.description,onChange:o=>s({...n,description:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Traits (comma-separated)"}),d.jsx("input",{type:"text",value:n.traits,onChange:o=>s({...n,traits:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),d.jsx("input",{type:"url",value:n.image_url,onChange:o=>s({...n,image_url:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Silhouette URL (Optional)"}),d.jsx("input",{type:"url",value:n.silhouette_url,onChange:o=>s({...n,silhouette_url:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Save Character"}),d.jsx("button",{type:"button",onClick:r,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},MLe=()=>{const e=ua(),[t,r]=g.useState(!1),[n,s]=g.useState(null),[i,o]=g.useState(""),{data:a,isLoading:l,isError:c,error:u}=hr({queryKey:["characters"],queryFn:ALe}),h=Gt({mutationFn:OLe,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]}),r(!1),s(null)}}),f=Gt({mutationFn:PLe,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]}),r(!1),s(null)}}),p=Gt({mutationFn:RLe,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]})}}),v=x=>{n?f.mutate(x):h.mutate(x)},m=x=>{window.confirm("Are you sure you want to delete this character?")&&p.mutate(x)},b=(a==null?void 0:a.filter(x=>x.name.toLowerCase().includes(i.toLowerCase())))||[];return l?d.jsx("div",{children:"Loading characters..."}):c?d.jsxs("div",{children:["Error loading characters: ",u==null?void 0:u.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(DLe,{character:n,onSave:v,onCancel:()=>{r(!1),s(null)}}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Characters"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(ro,{className:"w-4 h-4"}),"New Character"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:d.jsxs("div",{className:"relative",children:[d.jsx(nu,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),placeholder:"Search characters...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Name"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Traits"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:b.map(x=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:x.name})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:x.title}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:x.traits.join(", ")}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(x),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(cx,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>m(x.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(su,{className:"w-4 h-4"})})]})})]},x.id))})]})})]})})},ILe=async()=>{const{data:e,error:t}=await le.from("works").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},LLe=async e=>{const{data:t,error:r}=await le.from("works").insert(e).select();if(r)throw new Error(r.message);return t[0]},FLe=async e=>{const{id:t,...r}=e,{data:n,error:s}=await le.from("works").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},$Le=async e=>{const{error:t}=await le.from("works").delete().eq("id",e);if(t)throw new Error(t.message)},zLe=({work:e,onSave:t,onCancel:r,allWorks:n})=>{const[s,i]=g.useState({title:(e==null?void 0:e.title)||"",type:(e==null?void 0:e.type)||"book",parent_id:(e==null?void 0:e.parent_id)||"",order_in_parent:(e==null?void 0:e.order_in_parent)||"",description:(e==null?void 0:e.description)||"",status:(e==null?void 0:e.status)||"planning",progress_percentage:(e==null?void 0:e.progress_percentage)||0,release_date:(e==null?void 0:e.release_date)||"",estimated_release:(e==null?void 0:e.estimated_release)||"",cover_image_url:(e==null?void 0:e.cover_image_url)||"",sample_content:(e==null?void 0:e.sample_content)||"",is_purchasable:(e==null?void 0:e.is_purchasable)??!0,is_featured:(e==null?void 0:e.is_featured)??!1,word_count:(e==null?void 0:e.word_count)||"",target_word_count:(e==null?void 0:e.target_word_count)||""}),o=()=>{t({...e,...s,parent_id:s.parent_id===""?null:s.parent_id,order_in_parent:s.order_in_parent?Number(s.order_in_parent):void 0,progress_percentage:s.progress_percentage?Number(s.progress_percentage):void 0,word_count:s.word_count?Number(s.word_count):void 0,target_word_count:s.target_word_count?Number(s.target_word_count):void 0,id:e==null?void 0:e.id})},a=n.filter(l=>l.id!==(e==null?void 0:e.id));return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e?"Edit Work":"Create New Work"}),d.jsxs("form",{onSubmit:l=>{l.preventDefault(),o()},children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:s.title,onChange:l=>i({...s,title:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),d.jsxs("select",{value:s.type,onChange:l=>i({...s,type:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"issue",children:"Issue"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent Work (for nesting)"}),d.jsxs("select",{value:s.parent_id,onChange:l=>i({...s,parent_id:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"None"}),a.map(l=>d.jsxs("option",{value:l.id,children:[l.title," (",l.type,")"]},l.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order in Parent"}),d.jsx("input",{type:"number",value:s.order_in_parent,onChange:l=>i({...s,order_in_parent:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:s.description,onChange:l=>i({...s,description:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:s.status,onChange:l=>i({...s,status:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"planning",children:"Planning"}),d.jsx("option",{value:"writing",children:"Writing"}),d.jsx("option",{value:"editing",children:"Editing"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"on_hold",children:"On Hold"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress Percentage (0-100)"}),d.jsx("input",{type:"number",value:s.progress_percentage,onChange:l=>i({...s,progress_percentage:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"100"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Date"}),d.jsx("input",{type:"date",value:s.release_date,onChange:l=>i({...s,release_date:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Release (e.g., Q2 2024)"}),d.jsx("input",{type:"text",value:s.estimated_release,onChange:l=>i({...s,estimated_release:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Image URL"}),d.jsx("input",{type:"url",value:s.cover_image_url,onChange:l=>i({...s,cover_image_url:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sample Content"}),d.jsx("textarea",{value:s.sample_content,onChange:l=>i({...s,sample_content:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-48"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Word Count"}),d.jsx("input",{type:"number",value:s.word_count,onChange:l=>i({...s,word_count:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Word Count"}),d.jsx("input",{type:"number",value:s.target_word_count,onChange:l=>i({...s,target_word_count:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isPurchasable",checked:s.is_purchasable,onChange:l=>i({...s,is_purchasable:l.target.checked}),className:"mr-2"}),d.jsx("label",{htmlFor:"isPurchasable",className:"text-sm font-medium text-gray-700",children:"Is Purchasable"})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isFeatured",checked:s.is_featured,onChange:l=>i({...s,is_featured:l.target.checked}),className:"mr-2"}),d.jsx("label",{htmlFor:"isFeatured",className:"text-sm font-medium text-gray-700",children:"Is Featured"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Save Work"}),d.jsx("button",{type:"button",onClick:r,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},ULe=()=>{const e=ua(),[t,r]=g.useState(!1),[n,s]=g.useState(null),[i,o]=g.useState(""),[a,l]=g.useState("all"),[c,u]=g.useState("all"),{data:h,isLoading:f,isError:p,error:v}=hr({queryKey:["works"],queryFn:ILe}),m=Gt({mutationFn:LLe,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]}),r(!1),s(null)},onError:k=>{alert(`Error creating work: ${k.message}`)}}),b=Gt({mutationFn:FLe,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]}),r(!1),s(null)},onError:k=>{alert(`Error updating work: ${k.message}`)}}),x=Gt({mutationFn:$Le,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]})}}),w=k=>{n?b.mutate(k):m.mutate(k)},_=k=>{window.confirm("Are you sure you want to delete this work?")&&x.mutate(k)},j=(h==null?void 0:h.filter(k=>{const S=k.title.toLowerCase().includes(i.toLowerCase()),E=a==="all"||k.type===a,C=c==="all"||k.status===c;return S&&E&&C}))||[];return f?d.jsx("div",{children:"Loading works..."}):p?d.jsxs("div",{children:["Error loading works: ",v==null?void 0:v.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(zLe,{work:n,onSave:w,onCancel:()=>{r(!1),s(null)},allWorks:h||[]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Works Management"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(ro,{className:"w-4 h-4"}),"New Work"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(nu,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:k=>o(k.target.value),placeholder:"Search works...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("select",{value:a,onChange:k=>l(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"issue",children:"Issue"})]}),d.jsxs("select",{value:c,onChange:k=>u(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"planning",children:"Planning"}),d.jsx("option",{value:"writing",children:"Writing"}),d.jsx("option",{value:"editing",children:"Editing"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"on_hold",children:"On Hold"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Type"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Status"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Parent"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Release Date"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:j.map(k=>{var S;return d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:k.title})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:k.type}),d.jsx("td",{className:"py-4 px-6",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.status==="published"?"bg-green-100 text-green-800":k.status==="planning"?"bg-blue-100 text-blue-800":k.status==="writing"?"bg-yellow-100 text-yellow-800":k.status==="editing"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:k.status})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:((S=h==null?void 0:h.find(E=>E.id===k.parent_id))==null?void 0:S.title)||"N/A"}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:k.release_date||k.estimated_release||"N/A"}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(k),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(cx,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>_(k.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(su,{className:"w-4 h-4"})})]})})]},k.id)})})]})})]})})},qLe=()=>{const[e,t]=g.useState(""),[r,n]=g.useState("chapter"),[s,i]=g.useState(""),[o,a]=g.useState(""),[l,c]=g.useState(""),[u,h]=g.useState(null),[f,p]=g.useState(null),[v,m]=g.useState(null),[b,x]=g.useState(""),[w,_]=g.useState(""),[j,k]=g.useState(!1),[S,E]=g.useState([]),[C,T]=g.useState(!0),[O,P]=g.useState(null),[D,R]=g.useState(!1),[$,F]=g.useState(null),[V,q]=g.useState(""),[K,Y]=g.useState(!1),[L,X]=g.useState(""),[te,ve]=g.useState(""),H=async()=>{T(!0),P(null);try{const{data:{session:W}}=await le.auth.getSession();if(!W){P("User not authenticated."),T(!1);return}const J=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${W.access_token}`}});if(!J.ok){const z=await J.json();throw new Error(z.error||"Failed to fetch users.")}const ae=await J.json();E(ae.users)}catch(W){console.error("Error fetching users:",W instanceof Error?W.message:W),P("Failed to load users: "+(W instanceof Error?W.message:"Unknown error"))}finally{T(!1)}};g.useEffect(()=>{H()},[]);const G=async W=>{W.preventDefault(),x(""),_(""),k(!0);const J=new FormData;J.append("title",e),J.append("type",r),J.append("description",s),J.append("release_date",o),J.append("cover_image_url",l),u&&J.append("epub_file",u),f&&J.append("pdf_file",f),v&&J.append("mobi_file",v);try{const ae="YOUR_ADMIN_USER_ID";if(ae==="YOUR_ADMIN_USER_ID"){_("Please replace 'YOUR_ADMIN_USER_ID' with an actual admin user's ID in AdminUploadPage.jsx"),k(!1);return}const z=await fetch("http://localhost:3001/api/admin/works",{method:"POST",headers:{"x-user-id":ae},body:J}),ke=await z.json();z.ok?(x("Work uploaded successfully!"),t(""),n("chapter"),i(""),a(""),c(""),h(null),p(null),m(null),document.getElementById("epubFileInput").value="",document.getElementById("pdfFileInput").value="",document.getElementById("mobiFileInput").value=""):_(ke.message||"Failed to upload work.")}catch(ae){console.error("Error uploading work:",ae),_("An error occurred while uploading the work. Check console for details.")}finally{k(!1)}},he=W=>{F(W);const J=W.subscriptions.find(ae=>ae.status==="active"||ae.status==="trialing");J?(q(J.subscription_type),Y(J.status==="active"||J.status==="trialing"),X(J.start_date?J.start_date.split("T")[0]:""),ve(J.current_period_end?J.current_period_end.split("T")[0]:"")):(q(""),Y(!1),X(new Date().toISOString().split("T")[0]),ve("")),R(!0)},fe=()=>{R(!1),F(null)},_e=async W=>{if(W.preventDefault(),!!$)try{const{data:{session:J}}=await le.auth.getSession();if(!J){alert("You must be logged in to manage subscriptions.");return}const ae=await fetch(`/api/admin/users/${$.id}/subscription`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J.access_token}`},body:JSON.stringify({subscription_type:V,status:K?"active":"canceled",start_date:L,current_period_end:te||null})});if(!ae.ok){const z=await ae.json();throw new Error(z.error||"Failed to update subscription.")}alert("Subscription updated successfully!"),fe(),H()}catch(J){console.error("Error updating subscription:",J instanceof Error?J.message:J),alert("Error updating subscription: "+(J instanceof Error?J.message:"Unknown error"))}};return d.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"auto",fontFamily:"Arial, sans-serif"},children:[d.jsx("h1",{style:{textAlign:"center",marginBottom:"30px"},children:"Admin Dashboard"}),d.jsxs("div",{style:{marginBottom:"50px",border:"1px solid #ccc",padding:"20px",borderRadius:"8px"},children:[d.jsx("h2",{children:"Upload New Work (Chapter/Issue)"}),b&&d.jsx("p",{style:{color:"green",fontWeight:"bold"},children:b}),w&&d.jsx("p",{style:{color:"red",fontWeight:"bold"},children:w}),d.jsxs("form",{onSubmit:G,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Title:"}),d.jsx("input",{type:"text",value:e,onChange:W=>t(W.target.value),required:!0,style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Type:"}),d.jsxs("select",{value:r,onChange:W=>n(W.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box"},children:[d.jsx("option",{value:"chapter",children:"Chapter"}),d.jsx("option",{value:"issue",children:"Issue"}),d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Description:"}),d.jsx("textarea",{value:s,onChange:W=>i(W.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box",minHeight:"80px"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Release Date:"}),d.jsx("input",{type:"date",value:o,onChange:W=>a(W.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Cover Image URL:"}),d.jsx("input",{type:"text",value:l,onChange:W=>c(W.target.value),placeholder:"e.g., https://example.com/cover.jpg",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"EPUB File:"}),d.jsx("input",{type:"file",id:"epubFileInput",onChange:W=>h(W.target.files[0]),accept:".epub",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"PDF File:"}),d.jsx("input",{type:"file",id:"pdfFileInput",onChange:W=>p(W.target.files[0]),accept:".pdf",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"MOBI File:"}),d.jsx("input",{type:"file",id:"mobiFileInput",onChange:W=>m(W.target.files[0]),accept:".mobi",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsx("button",{type:"submit",disabled:j,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:j?"not-allowed":"pointer",fontSize:"16px"},children:j?"Uploading...":"Upload Work"})]})]}),d.jsxs("div",{style:{border:"1px solid #ccc",padding:"20px",borderRadius:"8px"},children:[d.jsx("h2",{children:"User Management"}),C&&d.jsx("p",{children:"Loading users..."}),O&&d.jsx("p",{style:{color:"red"},children:O}),!C&&!O&&d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{backgroundColor:"#f2f2f2"},children:[d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Email"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Display Name"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Role"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Subscription Status"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Actions"})]})}),d.jsx("tbody",{children:S.map(W=>{var J,ae;return d.jsxs("tr",{children:[d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:W.email}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:((J=W.profile)==null?void 0:J.display_name)||"N/A"}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:((ae=W.profile)==null?void 0:ae.role)||"user"}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:W.subscriptions.length>0&&W.subscriptions.some(z=>z.status==="active"||z.status==="trialing")?"Active":"Inactive"}),d.jsxs("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[d.jsx("button",{style:{marginRight:"5px",padding:"5px 10px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},onClick:()=>he(W),children:"Manage Subscription"}),d.jsx("button",{style:{padding:"5px 10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Manage Entitlements"})]})]},W.id)})})]})]}),D&&$&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center"},children:d.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",width:"500px",color:"black"},children:[d.jsxs("h3",{style:{marginBottom:"15px"},children:["Manage Subscription for ",$.email]}),d.jsxs("form",{onSubmit:_e,style:{display:"flex",flexDirection:"column",gap:"10px"},children:[d.jsxs("div",{children:[d.jsx("label",{children:"Subscription Type:"}),d.jsx("input",{type:"text",value:V,onChange:W=>q(W.target.value),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"Is Active:"}),d.jsx("input",{type:"checkbox",checked:K,onChange:W=>Y(W.target.checked),style:{marginLeft:"10px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"Start Date:"}),d.jsx("input",{type:"date",value:L,onChange:W=>X(W.target.value),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"End Date:"}),d.jsx("input",{type:"date",value:te,onChange:W=>ve(W.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[d.jsx("button",{type:"button",onClick:fe,style:{padding:"8px 15px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),d.jsx("button",{type:"submit",style:{padding:"8px 15px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save"})]})]})]})})]})},BLe=()=>{var e;const[t,r]=g.useState([]),[n,s]=g.useState(!0),[i,o]=g.useState(null),[a,l]=g.useState(!1),[c,u]=g.useState(!1),[h,f]=g.useState(!1),[p,v]=g.useState(!1),[m,b]=g.useState(null),[x,w]=g.useState(null),[_,j]=g.useState(null),[k,S]=g.useState(""),[E,C]=g.useState("active"),[T,O]=g.useState(""),[P,D]=g.useState(""),[R,$]=g.useState(""),[F,V]=g.useState(""),[q,K]=g.useState(!1),[Y,L]=g.useState(!1),[X,te]=g.useState(""),[ve,H]=g.useState(""),[G,he]=g.useState(""),[fe,_e]=g.useState(""),[W,J]=g.useState("user"),[ae,z]=g.useState(!1),[ke,Pe]=g.useState(""),[Ge,Ye]=g.useState(""),[ft,Vt]=g.useState(""),[M,B]=g.useState(""),[Q,me]=g.useState(""),[de,ce]=g.useState("created_at"),[we,Xe]=g.useState("desc"),[Ue,vt]=g.useState(1),[Zr,$t]=g.useState(10);function zs(re){return!re.subscriptions||re.subscriptions.length===0?"No Subscription":re.subscriptions.some(De=>De.status==="active"||De.status==="trialing")?"Active":"Inactive"}function Ti(re){switch(re){case"Active":return d.jsx(qa,{className:"w-4 h-4 text-green-500"});case"Inactive":return d.jsx($2,{className:"w-4 h-4 text-red-500"});default:return d.jsx($i,{className:"w-4 h-4 text-gray-400"})}}function mo(re){switch(re){case"admin":return"bg-purple-100 text-purple-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}function Ai(re){if(!re)return"—";const De=new Date(re);return Number.isNaN(De.getTime())?"—":De.toLocaleString()}const[Oi,go]=g.useState(!1),Jr=g.useCallback(async()=>{s(!0),o(null);try{const{data:{session:re}}=await le.auth.getSession();if(!re){o("User not authenticated."),s(!1);return}const De=await fetch("/api/admin/users",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${re.access_token}`}});if(!De.ok){const ar=await De.json();throw new Error(ar.error||"Failed to fetch users.")}const et=await De.json();r(et),et.length>0&&(et[0].role==="admin"||et[0].role==="super_admin")?go(!0):go(!1)}catch(re){console.error("Error fetching users or checking admin status:",re),o((re instanceof Error?re.message:String(re))||"An unexpected error occurred.")}finally{s(!1)}},[]);g.useEffect(()=>{Jr()},[Jr]);const ls=g.useMemo(()=>{const re=t.filter(De=>{var et;const ar=De.email.toLowerCase().includes(ft.toLowerCase())||(((et=De.profile)==null?void 0:et.display_name)||"").toLowerCase().includes(ft.toLowerCase()),Cn=!M||De.role===M,En=zs(De);return ar&&Cn&&(!Q||En===Q)});return re.sort((De,et)=>{var ar,Cn;let En=De[de],Ot=et[de];return de==="display_name"&&(En=((ar=De.profile)==null?void 0:ar.display_name)||"",Ot=((Cn=et.profile)==null?void 0:Cn.display_name)||""),(de==="created_at"||de==="last_sign_in")&&(En=new Date(En),Ot=new Date(Ot)),En<Ot?we==="asc"?-1:1:En>Ot?we==="asc"?1:-1:0}),re},[t,ft,M,Q,de,we]),fn=g.useMemo(()=>{const re=(Ue-1)*Zr;return ls.slice(re,re+Zr)},[ls,Ue,Zr]),Us=Math.ceil(ls.length/Zr)||1,Il=()=>{he(""),_e(""),J("user"),Pe(""),Ye(""),f(!0)},qs=()=>{f(!1)},Ll=re=>{var De;b(re);const et=(De=re.subscriptions)==null?void 0:De.find(ar=>ar.is_active);et?(S(et.plan_id||""),C(et.status),O(et.current_period_start?new Date(et.current_period_start).toISOString().split("T")[0]:""),D(et.current_period_end?new Date(et.current_period_end).toISOString().split("T")[0]:"")):(S(""),C("active"),O(new Date().toISOString().split("T")[0]),D("")),$(""),V(""),l(!0)},Bs=()=>{l(!1),b(null),K(!1)},Fl=re=>{w(re),te(""),H(""),u(!0)},yo=()=>{u(!1),w(null),L(!1)},$l=re=>{j(re),v(!0)},cs=()=>{v(!1),j(null)},gu=async re=>{re.preventDefault(),z(!0),Pe(""),Ye("");try{if(!G||!/\S+@\S+\.\S+/.test(G))throw new Error("Please enter a valid email address.");if(t.some(Cn=>Cn.email.toLowerCase()===G.toLowerCase()))throw new Error("A user with this email already exists in the list.");const De={action:"addProfile",data:{username:fe||G.split("@")[0],email:G,role:W}},et=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await le.auth.getSession()).data.session.access_token}`},body:JSON.stringify(De)}),ar=await et.json();if(!et.ok)throw new Error(ar.error||"Failed to add user profile via Edge Function");Pe("User profile added successfully! Full user creation (auth.users) might require backend."),Jr(),setTimeout(()=>{qs()},600)}catch(De){console.error("Error adding user:",De),Ye((De instanceof Error?De.message:String(De))||"An unexpected error occurred while adding user.")}finally{z(!1)}},Ws=async re=>{if(re.preventDefault(),!!m){K(!0),$(""),V("");try{if(T&&P&&new Date(T)>=new Date(P))throw new Error("End date must be after start date.");const De={action:"updateSubscription",userId:m.id,data:{plan_id:k,status:E,current_period_start:T?new Date(T).toISOString():null,current_period_end:P?new Date(P).toISOString():null}},et=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await le.auth.getSession()).data.session.access_token}`},body:JSON.stringify(De)}),ar=await et.json();if(!et.ok)throw new Error(ar.error||"Failed to update subscription via Edge Function");$("Subscription updated successfully!"),Jr(),setTimeout(()=>{Bs()},600)}catch(De){console.error("Error managing subscription:",De),V((De instanceof Error?De.message:String(De))||"An unexpected error occurred while managing subscription.")}finally{K(!1)}}},Kh=async re=>{if(re.preventDefault(),!!x){L(!0),te(""),H("");try{const De=new FormData(re.target),et=De.get("displayName"),ar=De.get("role"),Cn={action:"changeRole",targetUserId:x.id,newRole:ar,data:{display_name:et}},En=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await le.auth.getSession()).data.session.access_token}`},body:JSON.stringify(Cn)}),Ot=await En.json();if(!En.ok)throw new Error(Ot.error||"Failed to update user details via Edge Function");te("User details updated successfully!"),Jr(),setTimeout(()=>{yo()},600)}catch(De){console.error("Error updating user details:",De),H((De instanceof Error?De.message:String(De))||"An unexpected error occurred while updating user details.")}finally{L(!1)}}},Yh=async()=>{if(_)try{const re={action:"deleteUser",targetUserId:_.id},De=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await le.auth.getSession()).data.session.access_token}`},body:JSON.stringify(re)}),et=await De.json();if(!De.ok)throw new Error(et.error||"Failed to delete user via Edge Function");r(ar=>ar.filter(Cn=>Cn.id!==_.id)),cs(),fn.length===1&&Ue>1&&vt(Ue-1),alert(`User ${_.email} deleted successfully.`)}catch(re){console.error("Error deleting user:",re),alert(`Failed to delete user: ${re instanceof Error?re.message:String(re)}`)}},ba=re=>{de===re?Xe(we==="asc"?"desc":"asc"):(ce(re),Xe("asc")),vt(1)},xa=re=>{re<1||re>Us||vt(re)},zl=re=>{$t(re),vt(1)};return n?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),d.jsx("span",{className:"text-gray-600",children:"Loading users and plans..."})]})}):i?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-red-600 mb-2",children:[d.jsx($i,{className:"w-5 h-5"}),d.jsx("span",{className:"font-semibold",children:"Error"})]}),d.jsx("p",{className:"text-red-700",children:i}),d.jsx("button",{onClick:Jr,className:"mt-4 px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),d.jsx("p",{className:"text-gray-600",children:"Manage users, subscriptions, and account details"})]}),d.jsx("div",{className:"mt-4 sm:mt-0",children:d.jsxs("button",{onClick:Il,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[d.jsx(gte,{className:"w-4 h-4 mr-2"}),"Add User"]})})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(V0,{className:"w-8 h-8 text-blue-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(qa,{className:"w-8 h-8 text-green-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Subscriptions"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(re=>zs(re)==="Active").length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Op,{className:"w-8 h-8 text-purple-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Admin Users"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(re=>re.role==="admin").length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx($i,{className:"w-8 h-8 text-gray-400"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"No Subscription"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(re=>zs(re)==="No Subscription").length})]})]})})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(nu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),d.jsx("input",{type:"text",placeholder:"Search users...",value:ft,onChange:re=>{Vt(re.target.value),vt(1)},className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("select",{value:M,onChange:re=>{B(re.target.value),vt(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"All Roles"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"user",children:"User"})]}),d.jsxs("select",{value:Q,onChange:re=>{me(re.target.value),vt(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"All Statuses"}),d.jsx("option",{value:"Active",children:"Active"}),d.jsx("option",{value:"Inactive",children:"Inactive"}),d.jsx("option",{value:"No Subscription",children:"No Subscription"})]}),d.jsxs("select",{value:Zr,onChange:re=>zl(Number(re.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:5,children:"5 per page"}),d.jsx("option",{value:10,children:"10 per page"}),d.jsx("option",{value:25,children:"25 per page"}),d.jsx("option",{value:50,children:"50 per page"})]}),d.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[d.jsx(Jee,{className:"w-4 h-4 mr-2"}),ls.length," of ",t.length," users"]})]})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ba("email"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(KF,{className:"w-4 h-4"}),d.jsx("span",{children:"Email"}),de==="email"&&d.jsx("span",{className:"text-blue-500",children:we==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ba("display_name"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(V0,{className:"w-4 h-4"}),d.jsx("span",{children:"Display Name"}),de==="display_name"&&d.jsx("span",{className:"text-blue-500",children:we==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(Op,{className:"w-4 h-4"}),d.jsx("span",{children:"Role"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ba("created_at"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(BF,{className:"w-4 h-4"}),d.jsx("span",{children:"Created At"}),de==="created_at"&&d.jsx("span",{className:"text-blue-500",children:we==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ba("last_sign_in"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(VF,{className:"w-4 h-4"}),d.jsx("span",{children:"Last Sign In"}),de==="last_sign_in"&&d.jsx("span",{className:"text-blue-500",children:we==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[fn.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-sm text-gray-500",children:"No users found."})}),fn.map(re=>{var De;const et=zs(re);return d.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:d.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:d.jsx(V0,{className:"w-4 h-4 text-gray-500"})})}),d.jsx("div",{className:"ml-3",children:d.jsx("div",{className:"text-sm font-medium text-gray-900",children:re.email})})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((De=re.profile)==null?void 0:De.display_name)||"—"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${mo(re.role)}`,children:re.role})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[Ti(et),d.jsx("span",{className:"text-gray-900",children:et})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ai(re.created_at)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:re.last_sign_in?Ai(re.last_sign_in):"Never"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:()=>Fl(re),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50",title:"Edit Details",children:[d.jsx(ote,{className:"w-4 h-4 mr-1"}),"Edit"]}),d.jsxs("button",{onClick:()=>Ll(re),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50",title:"Manage Subscription",children:[d.jsx(Tm,{className:"w-4 h-4 mr-1"}),"Subscription"]}),d.jsxs("button",{onClick:()=>$l(re),className:"inline-flex items-center px-2.5 py-1.5 border border-red-300 text-red-700 rounded-md hover:bg-red-50",title:"Delete User",children:[d.jsx(su,{className:"w-4 h-4 mr-1"}),"Delete"]})]})})]},re.id)})]})]})}),d.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",Ue," of ",Us]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>xa(Ue-1),disabled:Ue===1,className:"px-3 py-1.5 text-sm border rounded-md disabled:opacity-50",children:"Previous"}),Array.from({length:Us}).map((re,De)=>d.jsx("button",{onClick:()=>xa(De+1),className:`px-3 py-1.5 text-sm border rounded-md ${Ue===De+1?"bg-blue-600 text-white border-blue-600":"hover:bg-gray-50"}`,children:De+1},De)),d.jsx("button",{onClick:()=>xa(Ue+1),disabled:Ue===Us,className:"px-3 py-1.5 text-sm border rounded-md disabled:opacity-50",children:"Next"})]})]})]})]}),h&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:qs}),d.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New User"}),d.jsxs("form",{onSubmit:gu,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",value:G,onChange:re=>he(re.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"user@example.com",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name (optional)"}),d.jsx("input",{type:"text",value:fe,onChange:re=>_e(re.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jane Doe"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:W,onChange:re=>J(re.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"user",children:"User"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),Ge&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx($i,{className:"w-4 h-4"}),Ge]}),ke&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(qa,{className:"w-4 h-4"}),ke]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:qs,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:ae,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:ae?"Adding…":"Add User"})]})]})]})]}),a&&m&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:Bs}),d.jsxs("div",{className:"relative bg-white w-full max-w-xl rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Manage Subscription"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:m.email}),d.jsxs("form",{onSubmit:Ws,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan"}),d.jsxs("select",{value:k,onChange:re=>S(re.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"— Select a plan —"}),d.jsx("option",{value:"Monthly",children:"Monthly"}),d.jsx("option",{value:"Yearly",children:"Yearly"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),d.jsxs("select",{value:E,onChange:re=>C(re.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"active",children:"active"}),d.jsx("option",{value:"trialing",children:"trialing"}),d.jsx("option",{value:"canceled",children:"canceled"}),d.jsx("option",{value:"paused",children:"paused"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),d.jsx("input",{type:"date",value:T,onChange:re=>O(re.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),d.jsx("input",{type:"date",value:P,onChange:re=>D(re.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),F&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx($i,{className:"w-4 h-4"}),F]}),R&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(qa,{className:"w-4 h-4"}),R]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:Bs,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:q,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:q?"Saving…":"Save Changes"})]})]})]})]}),c&&x&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:yo}),d.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit User Details"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:x.email}),d.jsxs("form",{onSubmit:Kh,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),d.jsx("input",{name:"displayName",type:"text",defaultValue:((e=x.profile)==null?void 0:e.display_name)||"",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jane Doe"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{name:"role",defaultValue:x.role,className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"user",children:"User"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),ve&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx($i,{className:"w-4 h-4"}),ve]}),X&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(qa,{className:"w-4 h-4"}),X]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:yo,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:Y,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:Y?"Saving…":"Save Changes"})]})]})]})]}),p&&_&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:cs}),d.jsxs("div",{className:"relative bg-white w-full max-w-md rounded-lg shadow-lg p-6",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"shrink-0 mt-1",children:d.jsx($i,{className:"w-6 h-6 text-red-600"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Delete user?"}),d.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["This will permanently remove ",d.jsx("span",{className:"font-mono",children:_.email})," and their subscriptions from the local list."]})]})]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 mt-6",children:[d.jsx("button",{onClick:cs,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{onClick:Yh,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})]})]})},WLe=()=>{const e=g.useRef(null);return g.useEffect(()=>{const t=e.current;if(!t)return;const r=50,n=()=>{const i=document.createElement("div");i.className="star absolute bg-ink rounded-full",i.style.left=Math.random()*100+"%",i.style.top=Math.random()*100+"%";const o=Math.random()*3+1;i.style.width=i.style.height=o+"px",i.style.animationDelay=Math.random()*3+"s",i.style.animationDuration=Math.random()*2+2+"s",t.appendChild(i)};t.innerHTML="";for(let i=0;i<r;i++)n();const s=()=>{const i=window.pageYOffset*-.1;t&&(t.style.transform=`translateY(${i}px)`)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[]),d.jsx("div",{ref:e,className:"stars fixed top-0 left-0 w-full h-full pointer-events-none -z-10",children:" "})},VLe=async()=>{const{data:e,error:t}=await le.from("works").select("id, title");if(t)throw new Error(t.message);return e},HLe=async e=>{const{data:t,error:r}=await le.from("works").insert({title:e,type:"book"}).select();if(r)throw new Error(r.message);return t[0]},KLe=()=>{const e=ua(),[t,r]=g.useState(null),[n,s]=g.useState(""),[i,o]=g.useState(1),[a,l]=g.useState(""),[c,u]=g.useState(""),[h,f]=g.useState(!1),[p,v]=g.useState(!1),{data:m,isLoading:b,isError:x,error:w}=hr({queryKey:["books"],queryFn:VLe}),_=Gt({mutationFn:HLe,onSuccess:S=>{e.invalidateQueries({queryKey:["books"]}),l(S.id),u(""),Li.success(`Book "${S.title}" created successfully!`)},onError:S=>{Li.error(`Error creating book: ${S.message}`)}}),j=S=>{S.target.files&&S.target.files[0]&&r(S.target.files[0])},k=async S=>{if(S.preventDefault(),!t||!n||!i){Li.error("Please fill in all required chapter fields and select a file.");return}let E=a;if(c){if(_.isPending){Li.error("Book creation is already in progress. Please wait.");return}try{E=(await _.mutateAsync(c)).id}catch{return}}if(!E){Li.error("Please select an existing book or create a new one.");return}v(!0);const C=new FormData;C.append("file",t),C.append("title",n),C.append("chapter_number",i.toString()),C.append("book_id",E),C.append("is_published",h.toString());try{const{data:{session:T},error:O}=await le.auth.getSession();if(O||!T){Li.error("User session not found. Please log in."),v(!1);return}const P=await fetch("/api/chapters/upload",{method:"POST",body:C,headers:{Authorization:`Bearer ${T.access_token}`}});if(!P.ok){const D=await P.json();throw new Error(D.message||D.error||"Failed to upload chapter.")}await P.json(),Li.success("Chapter uploaded successfully!"),r(null),s(""),o(1),l(""),u(""),f(!1),S.target instanceof HTMLFormElement&&S.target.reset()}catch(T){console.error("Upload error:",T),Li.error(T.message||"An error occurred during upload.")}finally{v(!1)}};return b?d.jsx("div",{className:"text-center py-8",children:"Loading books..."}):x?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading books: ",w==null?void 0:w.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx(YAe,{}),d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Upload New Chapter"}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:d.jsxs("form",{onSubmit:k,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"file",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter File (PDF, DOCX, TXT, HTML)"}),d.jsx("input",{type:"file",id:"file",onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",accept:".pdf,.docx,.txt,.html",required:!0}),t&&d.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Selected file: ",t.name]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"chapterTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter Title"}),d.jsx("input",{type:"text",id:"chapterTitle",value:n,onChange:S=>s(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"chapterNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter Number"}),d.jsx("input",{type:"number",id:"chapterNumber",value:i,onChange:S=>o(parseInt(S.target.value)||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,min:"1"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"bookId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Existing Book"}),d.jsxs("select",{id:"bookId",value:a,onChange:S=>l(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"-- Select a Book --"}),m==null?void 0:m.map(S=>d.jsx("option",{value:S.id,children:S.title},S.id))]})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("span",{className:"text-gray-500 mr-2",children:"OR"}),d.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newBookTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Create New Book"}),d.jsx("input",{type:"text",id:"newBookTitle",value:c,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new book title"})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isPublished",checked:h,onChange:S=>f(S.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),d.jsx("label",{htmlFor:"isPublished",className:"text-sm font-medium text-gray-700",children:"Publish Immediately"})]}),d.jsx("button",{type:"submit",className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:p||_.isPending,children:p?d.jsxs(d.Fragment,{children:[d.jsx(Kee,{className:"w-4 h-4 animate-pulse"}),"Uploading Chapter..."]}):_.isPending?d.jsxs(d.Fragment,{children:[d.jsx(Wee,{className:"w-4 h-4 animate-pulse"}),"Creating Book..."]}):d.jsxs(d.Fragment,{children:[d.jsx(ro,{className:"w-4 h-4"}),"Upload Chapter"]})})]})})]})},nv=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Tr("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));nv.displayName="Card";const sv=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Tr("flex flex-col space-y-1.5 p-6",e),...t}));sv.displayName="CardHeader";const EN=g.forwardRef(({className:e,...t},r)=>d.jsx("h3",{ref:r,className:Tr("text-2xl font-semibold leading-none tracking-tight",e),...t}));EN.displayName="CardTitle";const YLe=g.forwardRef(({className:e,...t},r)=>d.jsx("p",{ref:r,className:Tr("text-sm text-muted-foreground",e),...t}));YLe.displayName="CardDescription";const iv=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Tr("p-6 pt-0",e),...t}));iv.displayName="CardContent";const GLe=g.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Tr("flex items-center p-6 pt-0",e),...t}));GLe.displayName="CardFooter";const ZLe=Zb("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary/10 text-primary hover:bg-primary/20",secondary:"border-transparent bg-secondary/10 text-secondary-foreground hover:bg-secondary/20",destructive:"border-transparent bg-destructive/10 text-destructive hover:bg-destructive/20",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function M5({className:e,variant:t,...r}){return d.jsx("div",{className:Tr(ZLe({variant:t}),e),...r})}const TN=g.forwardRef(({value:e,onChange:t,theme:r="snow",modules:n={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},formats:s=["header","bold","italic","underline","strike","list","bullet","link","image"],...i},o)=>{const a=l=>{try{t&&t(l)}catch(c){console.error("Error in handleChange:",c)}};return d.jsx("div",{className:"mt-4",children:d.jsx(ng,{ref:o,theme:r,value:e,onChange:a,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","link","image"],...i})})});TN.displayName="QuillEditor";function AN({id:e,onUpdatePage:t,initialData:r}){const{id:n}=ax(),s=ca(),[i,o]=g.useState(!!e),[a,l]=g.useState(!1),[c,u]=g.useState([]),[h,f]=g.useState(""),[p,v]=g.useState(!1),[m,b]=g.useState(null),[x,w]=g.useState(""),[_,j]=g.useState(!1),[k,S]=g.useState(()=>r?{...r,category:r.category||null,user:r.user||null}:{id:"",title:"",slug:"",excerpt:null,content:"",seo_title:null,seo_description:null,seo_keywords:[],sections:[],category_id:null,is_published:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:null,folder_id:null,view_count:null,category:null,user:null}),[E,C]=g.useState("");g.useEffect(()=>{const H=e||n;T(),H?O(H):o(!1)},[e,n]);const T=async()=>{try{console.log("Fetching categories...");const H=await rJ();u(H||[]),(!H||H.length===0)&&(console.warn("No categories found in the database"),qe.warning("No categories found. Please create categories first."))}catch(H){console.error("Error in fetchCategories:",H),qe.error("Failed to load categories. Check console for details.")}},O=async H=>{try{const G=await tJ(H);if(G){const he={...G,sections:G.sections||[]};S(he),G.category&&b(G.category)}else throw new Error("Wiki page not found.")}catch(G){console.error("Error fetching wiki page:",G),qe.error("Failed to load wiki page")}finally{o(!1)}},P=H=>{const{name:G,value:he}=H.target;S(fe=>({...fe,[G]:he}))},D=H=>{const G={id:`section-${Date.now()}`,title:"New Section",content:"",type:H||"paragraph"};S(he=>({...he,sections:[...he.sections,G]}))},R=(H,G)=>{S(he=>({...he,sections:he.sections.map(fe=>fe.id===H?{...fe,...G}:fe)}))},$=H=>{if(k.sections.length<=1){qe.error("You must have at least one section");return}S(G=>({...G,sections:G.sections.filter(he=>he.id!==H)}))},F=H=>{b(H),S(G=>({...G,category_id:H.id})),v(!1)},V=()=>{b(null),S(H=>({...H,category_id:null}))},q=H=>H.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").trim(),K=H=>{const G=H.target.value;S(he=>({...he,title:G,slug:q(G),seo_title:he.seo_title||G}))},Y=async()=>{var H,G;l(!0);try{if(!((H=k==null?void 0:k.title)!=null&&H.trim())){qe.error("Title is required"),l(!1);return}if(!((G=k.slug)!=null&&G.trim())){qe.error("Slug is required"),l(!1);return}const{data:{user:he},error:fe}=await le.auth.getUser();if(fe||!he){qe.error("You must be signed in to save changes."),l(!1);return}const _e={title:k.title.trim(),slug:k.slug.trim(),category_id:k.category_id||null,is_published:k.is_published,updated_at:new Date().toISOString()};let W=null;if(e){const{data:J,error:ae}=await le.from("wiki_pages").update(_e).eq("id",e).select().single();if(ae)throw ae;if(J)W=J;else throw new Error("Page data not found after update.");qe.success("Wiki page updated successfully");const{error:z}=await le.from("wiki_content_blocks").delete().eq("page_id",W.id);if(z)throw console.error("Error deleting old content blocks:",z),new Error("Failed to update content blocks")}else{const{data:J,error:ae}=await le.from("wiki_pages").insert([{..._e,created_by:he.id,created_at:new Date().toISOString(),view_count:0}]).select("*, user:profiles(*), category:wiki_categories(*)").single();if(ae)throw ae;if(J)W=J;else throw new Error("Page data not found after creation.");qe.success("Wiki page created successfully")}if(W&&k.sections&&k.sections.length>0){const J=k.sections.map((z,ke)=>({page_id:W.id,type:z.type,content:z.content,position:ke,created_by:he.id})),{error:ae}=await le.from("wiki_content_blocks").insert(J);if(ae)throw console.error("Error saving content blocks:",ae),new Error("Failed to save content blocks")}if(W){let J=null;W.user&&typeof W.user=="object"&&!("error"in W.user)&&(J=W.user);const ae={...W,title:k.title,slug:k.slug,excerpt:k.excerpt||null,is_published:k.is_published,category_id:k.category_id||null,category:m||null,sections:k.sections||[],created_at:W.created_at||new Date().toISOString(),updated_at:new Date().toISOString(),user:J};t&&t(ae),e||s(`/account/admin/wiki/page/${W.id}`)}}catch(he){throw console.error("Error saving wiki page:",he),he.code==="23505"?qe.error("A page with this slug already exists"):he.code==="42501"?qe.error("You do not have permission to perform this action"):qe.error(`Failed to save wiki page: ${(he instanceof Error?he.message:String(he))||"Unknown error"}`),he}finally{l(!1)}},L=async()=>{const H=!k.is_published;if(S(G=>({...G,is_published:H})),e)try{const{error:G}=await le.from("wiki_pages").update({is_published:H,published_at:H?new Date().toISOString():null}).eq("id",e);if(G)throw G;qe.success(`Page ${H?"published":"unpublished"} successfully`)}catch(G){console.error("Error updating publish status:",G),qe.error(`Failed to update page status: ${G instanceof Error?G.message:String(G)}`),S(he=>({...he,is_published:!H}))}},X=async()=>{if(!x.trim()){qe.error("Category name cannot be empty");return}try{const{data:{user:H}}=await le.auth.getUser();if(!H){qe.error("You must be logged in to create categories");return}const{data:G,error:he}=await le.from("wiki_categories").insert([{name:x.trim(),slug:x.trim().toLowerCase().replace(/\s+/g,"-"),created_by:H.id,is_active:!0}]).select().single();if(he)throw console.error("Error creating category:",he),new Error("Failed to create category");if(G===null){console.error("No data returned after creating category, but no error was thrown."),qe.error("Failed to create category: No data received.");return}const fe=G;u(_e=>[..._e,fe]),F(fe),w(""),j(!1),qe.success("Category created successfully")}catch(H){console.error("Error creating category:",H),qe.error("Failed to create category")}},te=()=>d.jsxs("div",{className:"space-y-2",children:[d.jsx(xs,{children:"Category"}),m?d.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(M5,{className:"h-4 w-4 mr-2 text-muted-foreground"}),d.jsx("span",{children:m.name})]}),d.jsx(lt,{type:"button",variant:"ghost",size:"sm",onClick:V,children:d.jsx(cl,{className:"h-4 w-4"})})]}):_?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(ci,{placeholder:"Enter category name",value:x,onChange:H=>w(H.target.value),autoFocus:!0}),d.jsx(lt,{type:"button",onClick:X,disabled:!x.trim(),children:"Add"})]}),d.jsx(lt,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(!1),children:"Cancel"})]}):d.jsxs("div",{className:"space-y-2",children:[d.jsxs(lt,{type:"button",variant:"outline",className:"w-full justify-start",onClick:()=>v(!0),children:[d.jsx(M5,{className:"h-4 w-4 mr-2"}),"Select a category"]}),d.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["or"," ",d.jsx("button",{type:"button",className:"text-primary hover:underline",onClick:()=>j(!0),children:"create a new category"})]})]})]}),ve=H=>{const G=he=>{R(H.id,{content:he})};switch(H.type){case"heading_1":case"heading_2":case"heading_3":case"paragraph":case"bullet_list":case"ordered_list":return d.jsx("div",{className:"mt-4",children:d.jsx(TN,{value:H.content||"",onChange:G,placeholder:"Start writing..."})});case"quote":return d.jsx("div",{className:"mt-4 border-l-4 border-gray-300 pl-4 italic",children:d.jsx(TN,{value:H.content||"",onChange:G,placeholder:"Start writing..."})});case"code":return d.jsx("div",{className:"mt-4 bg-gray-100 p-4 rounded-md font-mono text-sm",children:d.jsx(sC,{value:H.content||"",onChange:he=>R(H.id,{content:he.target.value}),placeholder:"Enter code...",rows:6,className:"font-mono"})});case"divider":return d.jsx("div",{className:"my-6 border-t border-gray-200"});case"image":return d.jsxs("div",{className:"mt-4",children:[d.jsx(ci,{type:"text",value:H.content||"",onChange:he=>R(H.id,{content:he.target.value}),placeholder:"Enter image URL..."}),H.content&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:H.content,alt:"Section content",className:"max-w-full h-auto rounded-md"})})]});default:return d.jsxs("div",{className:"mt-4 text-gray-500 italic",children:["Unsupported section type: ",H.type]})}};return i?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx(Hd,{className:"h-8 w-8 animate-spin"})}):(h&&c.filter(H=>H.name.toLowerCase().includes(h.toLowerCase())),d.jsx("div",{className:"container mx-auto p-6",children:d.jsxs("form",{onSubmit:H=>H.preventDefault(),children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs(lt,{type:"button",variant:"outline",size:"sm",onClick:()=>s("/account/admin/wiki"),children:[d.jsx(qF,{className:"mr-2 h-4 w-4"})," Back to Wiki"]}),d.jsx("h1",{className:"text-2xl font-bold",children:e?"Edit Wiki Page":"Create New Wiki Page"})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(xs,{htmlFor:"is_published",children:"Publish"}),d.jsx(Tv,{id:"is_published",checked:k.is_published,onCheckedChange:L})]}),d.jsx(lt,{type:"button",disabled:a,onClick:Y,children:a?d.jsxs(d.Fragment,{children:[d.jsx(Hd,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):d.jsxs(d.Fragment,{children:[d.jsx(z2,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2 space-y-6",children:d.jsxs(nv,{children:[d.jsx(sv,{children:d.jsx(EN,{children:"Page Content"})}),d.jsxs(iv,{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(xs,{htmlFor:"title",children:"Title *"}),d.jsx(ci,{id:"title",name:"title",value:k.title,onChange:K,placeholder:"Enter page title",required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(xs,{htmlFor:"slug",children:"URL Slug *"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:`${window.location.origin}/wiki/${k.slug||"your-page-slug"}`})]}),d.jsx(ci,{id:"slug",name:"slug",value:k.slug,onChange:P,placeholder:"page-slug",required:!0})]}),te(),d.jsxs("div",{className:"space-y-2",children:[d.jsx(xs,{children:"Sections"}),k.sections.map((H,G)=>d.jsxs(nv,{className:"mb-4",children:[d.jsx(sv,{children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(ci,{value:H.title,onChange:he=>R(H.id,{title:he.target.value}),placeholder:"Section Title",className:"text-xl font-bold"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("select",{value:H.type,onChange:he=>R(H.id,{type:he.target.value}),className:"text-sm p-1 border rounded",children:[d.jsx("option",{value:"paragraph",children:"Paragraph"}),d.jsx("option",{value:"heading_1",children:"Heading 1"}),d.jsx("option",{value:"heading_2",children:"Heading 2"}),d.jsx("option",{value:"heading_3",children:"Heading 3"}),d.jsx("option",{value:"bullet_list",children:"Bullet List"}),d.jsx("option",{value:"ordered_list",children:"Ordered List"}),d.jsx("option",{value:"image",children:"Image"}),d.jsx("option",{value:"table",children:"Table"}),d.jsx("option",{value:"quote",children:"Quote"}),d.jsx("option",{value:"code",children:"Code"}),d.jsx("option",{value:"divider",children:"Divider"})]}),d.jsx(lt,{variant:"ghost",size:"icon",type:"button",onClick:()=>$(H.id),disabled:k.sections.length<=1,children:d.jsx(cl,{className:"h-4 w-4"})})]})]})}),d.jsx(iv,{children:ve(H)})]},H.id))]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.jsx(lt,{type:"button",variant:"outline",onClick:()=>D("paragraph"),children:"Add Paragraph"}),d.jsx(lt,{type:"button",variant:"outline",onClick:()=>D("heading_1"),children:"Add Heading 1"}),d.jsx(lt,{type:"button",variant:"outline",onClick:()=>D("quote"),children:"Add Quote"})]})]})]})}),d.jsx("div",{className:"space-y-6",children:d.jsxs(nv,{children:[d.jsx(sv,{children:d.jsx(EN,{children:"Publishing"})}),d.jsxs(iv,{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Status"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:k.is_published?"Published":"Draft"})]}),d.jsx(Tv,{checked:k.is_published,onCheckedChange:L})]}),e&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-medium",children:"URL"}),d.jsx("div",{className:"flex items-center",children:d.jsxs("a",{href:`/wiki/${k.slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center",children:["View page ",d.jsx(Tm,{className:"ml-1 h-3 w-3"})]})})]})]})]})})]})]})}))}function JLe({folders:e,pages:t,selectedFolder:r,selectedPage:n,onSelect:s,onPageSelect:i,onDeleteFolder:o,onEditFolder:a,onDeletePage:l,onEditPage:c}){const u=g.useMemo(()=>{const f=new Map,p=[];e.forEach(m=>{const b={...m,children:[],pages:[],type:"folder"};f.set(m.id,b)}),e.forEach(m=>{const b=f.get(m.id);if(b&&m.parent_id&&f.has(m.parent_id)){const x=f.get(m.parent_id);x&&x.children.push(b)}else b&&p.push(b)});const v=[];return t.forEach(m=>{const b={id:m.id,title:m.title,slug:m.slug,folder_id:m.folder_id,category_id:m.category_id,created_at:m.created_at,updated_at:m.updated_at,created_by:m.created_by,is_published:m.is_published||!1,excerpt:m.excerpt||null,view_count:m.view_count||0,type:"page",content:m.content};if(m.folder_id&&f.has(m.folder_id)){const x=f.get(m.folder_id);x&&x.pages.push(b)}else m.folder_id||v.push(b)}),[...p,...v]},[e,t]),h=(f,p=0)=>f?f.type==="page"?d.jsxs("div",{className:Tr("flex items-center px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-800",n===f.id&&"bg-blue-50 dark:bg-blue-900/30"),onClick:()=>i(f.id),children:[d.jsx(fv,{className:"h-4 w-4 mr-2 text-gray-500"}),d.jsx("span",{className:"truncate",children:f.title})]},f.id):d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:Tr("flex items-center justify-between p-2 rounded-md cursor-pointer",r===f.id?"bg-blue-50 dark:bg-blue-900/30":"hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:()=>s(f.id),children:[d.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[d.jsx(pv,{className:"h-4 w-4 text-blue-500"}),d.jsx("span",{className:"truncate",children:f.name})]}),d.jsxs("div",{className:"flex space-x-1",children:[d.jsx(lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:v=>{v.stopPropagation(),a(f)},children:d.jsx(dte,{className:"h-3.5 w-3.5"})}),d.jsx(lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500 hover:text-red-600",onClick:v=>{v.stopPropagation(),o(f.id)},children:d.jsx(su,{className:"h-3.5 w-3.5"})})]})]}),f.children.length>0&&d.jsx("div",{className:"pl-4 border-l border-gray-200 dark:border-gray-700",children:f.children.map(v=>h(v,p+1))}),f.pages.length>0&&d.jsx("div",{className:"pl-4",children:f.pages.map(v=>h(v,p+1))})]},f.id):null;return d.jsx("div",{className:"space-y-1",children:u.map(f=>d.jsx("div",{children:h(f,0)},f.id))})}function I5(){const{folderId:e}=ax(),t=ca(),[r,n]=g.useState([]),[s,i]=g.useState([]),[o,a]=g.useState(""),[l,c]=g.useState(""),[u,h]=g.useState(!1),[f,p]=g.useState(!1),[v,m]=g.useState(null),[b,x]=g.useState(null),[w,_]=g.useState(null),[j,k]=g.useState(""),[S,E]=g.useState(!0);g.useEffect(()=>{(async()=>{try{E(!0);const{data:L,error:X}=await le.from("wiki_folders").select("*").order("name");if(X)throw X;const{data:te,error:ve}=await le.from("wiki_pages").select(`
            *,
            sections:wiki_sections(*)
          `);if(ve)throw ve;const H=(te||[]).map(G=>({...G,sections:(G.sections||[]).map(he=>({...he,content:he.content||""}))}));n(L||[]),i(H)}catch(L){console.error("Error fetching wiki data:",L),qe.error("Failed to load wiki content")}finally{E(!1)}})()},[]);const C=async()=>{if(o.trim())try{const L=(await le.auth.getUser()).data.user;if(!L){qe.error("You must be logged in to create a folder");return}const{data:X,error:te}=await le.from("wiki_folders").insert([{name:o.trim(),slug:o.trim().toLowerCase().replace(/\s+/g,"-"),parent_id:e||null,created_by:L.id}]).select().single();if(te)throw te;n(ve=>[...ve,X]),a(""),h(!1),t(`/account/admin/wiki/folder/${X.id}`),qe.success("Folder created successfully")}catch(L){console.error("Error creating folder:",L),qe.error(L instanceof Error?L.message:"Failed to create folder")}},T=async L=>{try{const X=(await le.auth.getUser()).data.user;if(!X){qe.error("You must be logged in to create a page");return}const{data:te,error:ve}=await le.from("wiki_pages").insert([{title:"New Page",content:"",folder_id:L||null,is_published:!1,created_by:X.id,excerpt:"",slug:"new-page-"+Date.now(),seo_title:"New Page",seo_description:"",seo_keywords:[],view_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),category_id:null}]).select("*").single();if(ve)throw ve;i(H=>[...H,{...te,sections:[]}]),te&&(m(te.id),x(te.id)),c(""),p(!1),qe.success("Page created successfully")}catch(X){console.error("Error creating page:",X),qe.error(X instanceof Error?X.message:"Failed to create page")}},O=L=>{x(L.id),m(L.id)},P=async L=>{if(confirm("Are you sure you want to delete this page? This action cannot be undone."))try{E(!0);const{error:X}=await le.from("wiki_content_blocks").delete().eq("page_id",L);if(X)throw X;const{error:te}=await le.from("wiki_pages").delete().eq("id",L);if(te)throw te;i(ve=>ve.filter(H=>H.id!==L)),v===L&&(m(null),x(null)),qe.success("Page deleted successfully")}catch(X){console.error("Error deleting page:",X),qe.error("Failed to delete page")}finally{E(!1)}},D=async L=>{var X;try{const{data:te,error:ve}=await le.from("wiki_pages").upsert({...L,updated_at:new Date().toISOString(),updated_by:(X=(await le.auth.getUser()).data.user)==null?void 0:X.id}).select().single();if(ve)throw ve;return i(H=>H.map(G=>G.id===te.id?{...G,...te}:G)),qe.success("Page saved successfully"),te}catch(te){throw console.error("Error saving page:",te),qe.error("Failed to save page"),te}},R=L=>{_(L),k(L.name)},$=async()=>{if(!(!w||!j.trim()))try{const{data:L,error:X}=await le.from("wiki_folders").update({name:j.trim(),slug:j.trim().toLowerCase().replace(/\s+/g,"-")}).eq("id",w.id).select().single();if(X)throw X;n(te=>te.map(ve=>ve.id===L.id?L:ve)),_(null),k(""),qe.success("Folder updated successfully")}catch(L){console.error("Error updating folder:",L),qe.error("Failed to update folder")}},F=async L=>{var X;if(confirm("Are you sure you want to delete this folder and all its contents? This action cannot be undone."))try{E(!0);const{error:te}=await le.from("wiki_folders").delete().eq("id",L);if(te)throw te;const ve=(H,G)=>H.reduce((he,fe)=>fe.id===G||fe.parent_id===G?he:[...he,fe],[]);if(n(H=>ve(H,L)),L===L||r.some(H=>H.parent_id===L&&H.id===L)){const H=(X=r.find(G=>G.id===L))==null?void 0:X.parent_id;t(H?`/account/admin/wiki/folder/${H}`:"/account/admin/wiki")}qe.success("Folder and its contents deleted successfully")}catch(te){console.error("Error deleting folder:",te),qe.error("Failed to delete folder. Please try again.")}finally{E(!1)}},V=async(L,X)=>{try{if(r.some(te=>te.id===L)){const{error:te}=await le.from("wiki_folders").update({parent_id:X}).eq("id",L);if(te)throw te;n(ve=>ve.map(H=>H.id===L?{...H,parent_id:X}:H))}else{const{error:te}=await le.from("wiki_pages").update({folder_id:X}).eq("id",L);if(te)throw te;i(ve=>ve.map(H=>H.id===L?{...H,folder_id:X}:H))}qe.success("Item moved successfully")}catch(te){console.error("Error moving item:",te),qe.error("Failed to move item")}},q=L=>{m(null),x(null),t(`/account/admin/wiki/folder/${L}`)};g.useMemo(()=>{const L=new Map,X=[];r.forEach(H=>{L.set(H.id,{...H,children:[]})}),r.forEach(H=>{const G=L.get(H.id);if(G)if(H.parent_id&&L.has(H.parent_id)){const he=L.get(H.parent_id);he&&he.children.push(G)}else X.push(G)});const te=H=>[...H].sort((G,he)=>{var fe,_e;return(((fe=G.data)==null?void 0:fe.order_index)??0)-(((_e=he.data)==null?void 0:_e.order_index)??0)}),ve=H=>te(H).map(G=>({...G,children:G.children?ve(G.children):[]}));return ve(X)},[r,e]);const K=r.find(L=>L.id===e),Y=s.find(L=>L.id===v);return d.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[d.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Wiki Manager"}),d.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-2 overflow-x-auto",children:[d.jsx("button",{onClick:()=>t("/account/admin/wiki"),className:"hover:text-blue-600 dark:hover:text-blue-400",children:"Home"}),K&&d.jsxs(d.Fragment,{children:[d.jsx(F2,{className:"h-4 w-4 mx-1"}),d.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:K.name})]})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[d.jsxs("div",{className:"space-y-2 mb-4",children:[d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs(lt,{variant:"outline",size:"sm",className:"flex-1 justify-center bg-white dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>T(e),children:[d.jsx(ro,{size:14,className:"mr-2"}),"New Page"]}),d.jsxs(lt,{variant:"outline",size:"sm",className:"flex-1 justify-center bg-white dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>h(!u),children:[d.jsx(pv,{size:14,className:"mr-2"}),"New Folder"]})]}),u&&d.jsxs("div",{className:"flex space-x-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700",children:[d.jsx(ci,{autoFocus:!0,value:o,onChange:L=>a(L.target.value),onKeyDown:L=>L.key==="Enter"&&C(),placeholder:"Folder name",className:"h-8 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.jsx(lt,{size:"sm",onClick:C,disabled:!o.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add"})]}),f&&d.jsxs("div",{className:"flex space-x-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700",children:[d.jsx(ci,{autoFocus:!0,value:l,onChange:L=>c(L.target.value),onKeyDown:L=>{L.key==="Enter"&&T(e)},placeholder:"Page title",className:"h-8 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.jsx(lt,{size:"sm",onClick:()=>T(e),disabled:!l.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add"})]})]}),d.jsx("div",{className:"mt-2",children:S?d.jsx("div",{className:"flex justify-center py-4",children:d.jsx(Hd,{className:"h-4 w-4 animate-spin text-gray-700 dark:text-gray-300"})}):d.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:d.jsx(JLe,{folders:r,pages:s,selectedFolder:e,selectedPage:v,onSelect:q,onPageSelect:L=>{m(L),x(L)},onDeleteFolder:F,onEditFolder:R,onDeletePage:P,onEditPage:O,onMoveItem:V})})})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Y?d.jsx(AN,{id:Y.id,onUpdatePage:D}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[d.jsx(fv,{className:"h-16 w-16 text-gray-400 mb-4"}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:K?`No pages in ${K.name}`:"No page selected"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:K?"Create a new page in this folder using the sidebar.":"Select a page from the sidebar or create a new one."}),d.jsxs(lt,{onClick:()=>T(e),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[d.jsx(ro,{className:"h-4 w-4 mr-2"}),"New Page"]})]})}),w&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-96",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Folder"}),d.jsx(ci,{autoFocus:!0,value:j,onChange:L=>k(L.target.value),onKeyDown:L=>L.key==="Enter"&&$(),placeholder:"Folder name",className:"mb-4"}),d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx(lt,{variant:"outline",onClick:()=>{_(null),k("")},children:"Cancel"}),d.jsx(lt,{onClick:$,disabled:!j.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Save Changes"})]})]})})]})}const L5=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Timelines"})}),QLe={"Stage 1":{title:"Basic Information & Pre-Screening",description:"Initial qualification and basic details",auto_disqualify:!0,min_score_required:15,max_possible_score:30,questions:[{id:"reading_frequency",type:"multiple_choice",question:"How many books do you typically read per year?",options:[{text:"0-5 books",score:1},{text:"6-11 books",score:3},{text:"12-24 books",score:5},{text:"25-49 books",score:7},{text:"50+ books",score:10}],weight:.33,required:!0},{id:"genre_familiarity",type:"multiple_choice",question:"How familiar are you with [YOUR GENRE] fiction?",options:[{text:"Never read it",score:1},{text:"Read a few books",score:3},{text:"Read occasionally",score:5},{text:"Read regularly",score:7},{text:"Expert knowledge",score:10}],weight:.33,required:!0},{id:"time_commitment",type:"multiple_choice",question:"How many hours per week can you dedicate to beta reading?",options:[{text:"1-2 hours",score:2},{text:"3-5 hours",score:5},{text:"6-9 hours",score:7},{text:"10-14 hours",score:9},{text:"15+ hours",score:10}],weight:.34,required:!0}]},"Stage 2":{title:"Experience & Skills Assessment",description:"Detailed evaluation of reading and feedback experience",conditional_display:!0,min_score_required:25,max_possible_score:40,questions:[{id:"beta_experience",type:"multiple_choice",question:"How many beta reading projects have you completed?",options:[{text:"None",score:2},{text:"1 project",score:4},{text:"2-4 projects",score:6},{text:"5-9 projects",score:8},{text:"10+ projects",score:10}],weight:.25,required:!0},{id:"feedback_strengths",type:"checkbox_multiple",question:"What are your strongest areas for providing feedback? (Select all that apply)",options:[{text:"Plot structure and pacing",score:3},{text:"Character development",score:3},{text:"Dialogue authenticity",score:2},{text:"World-building consistency",score:2},{text:"Grammar and style",score:2},{text:"Emotional impact",score:2}],weight:.3,max_selections:4,required:!0},{id:"writing_background",type:"multiple_choice",question:"What best describes your writing/editing background?",options:[{text:"No writing experience",score:2},{text:"Casual writer",score:4},{text:"Serious writer (unpublished)",score:6},{text:"Published author",score:8},{text:"Professional editor/reviewer",score:10}],weight:.25,required:!0},{id:"reading_speed",type:"slider",question:"Approximately how many pages can you read per hour?",min:10,max:100,step:5,scoring_formula:"Math.min(10, Math.floor(value / 10))",weight:.2,required:!0}]},"Stage 3":{title:"Sample Feedback Analysis",description:"Evaluate analytical skills through sample text review",min_score_required:30,max_possible_score:50,questions:[{id:"excerpt_analysis",type:"textarea",question:"Read this excerpt and identify what works well (100-300 words):",sample_text:"The obsidian gates groaned, not with the weight of stone, but with the sorrow of ages. Kaelen watched from the shadows, his breath a ghost in the frigid air, as the sigil on the archway pulsed with a faint, sickly green light. It was a warning. It was an invitation.",scoring_criteria:[{aspect:"Identifies specific literary techniques",max_score:3},{aspect:"Provides concrete examples from text",max_score:3},{aspect:"Shows genre awareness",max_score:2},{aspect:"Demonstrates emotional engagement",max_score:2}],min_words:100,max_words:300,weight:.3,required:!0},{id:"problem_identification",type:"textarea",question:"What, if anything, was confusing or unclear? How could it be improved? (100-300 words)",scoring_criteria:[{aspect:"Identifies genuine readability issues",max_score:3},{aspect:"Distinguishes objective vs subjective concerns",max_score:3},{aspect:"Explains reasoning clearly",max_score:2},{aspect:"Provides constructive context",max_score:2}],min_words:100,max_words:300,weight:.3,required:!0},{id:"actionable_suggestion",type:"textarea",question:"Provide one specific, actionable suggestion to enhance this scene (60-200 words)",scoring_criteria:[{aspect:"Offers specific, implementable solution",max_score:4},{aspect:"Shows understanding of author's intent",max_score:3},{aspect:"Suggests enhancement rather than just fixes",max_score:3}],min_words:60,max_words:200,weight:.4,required:!0}]},"Stage 4":{title:"Final Assessment & Preferences",description:"Communication style and final compatibility check",min_score_required:20,max_possible_score:30,questions:[{id:"communication_style",type:"multiple_choice",question:"How would you describe your feedback style?",options:[{text:"Direct and detailed",score:8},{text:"Gentle but thorough",score:10},{text:"Focused on major issues",score:6},{text:"Encouraging with suggestions",score:9},{text:"Technical and analytical",score:7}],weight:.4,required:!0},{id:"availability_window",type:"date_range",question:"What is your availability window for this project?",scoring_criteria:[{aspect:"Matches project timeline",max_score:5},{aspect:"Provides realistic timeframe",max_score:3},{aspect:"Shows flexibility",max_score:2}],weight:.3,required:!0},{id:"motivation",type:"textarea",question:"Why do you want to be a beta reader for this project? (50-150 words)",scoring_criteria:[{aspect:"Shows genuine interest in the work",max_score:4},{aspect:"Demonstrates understanding of role",max_score:3},{aspect:"Articulates value they can provide",max_score:3}],min_words:50,max_words:150,weight:.3,required:!0}]}},XLe={overall_thresholds:{auto_accept:90,strong_candidate:75,interview_required:60}},e6e={application_stages:QLe,scoring_system:XLe},F5=e6e,Sj=()=>{const[e,t]=g.useState(0),[r,n]=g.useState({}),[s,i]=g.useState({}),[o,a]=g.useState({}),[l,c]=g.useState(!0),[u,h]=g.useState(!1),[f,p]=g.useState(""),[v,m]=g.useState(0),b=Object.values(F5.application_stages),x=b[e],w=b.length;g.useEffect(()=>{const R={};b.forEach($=>{$.questions.forEach(F=>{F.type==="checkbox_multiple"||F.type==="date_range"?R[F.id]=[]:(F.type==="multiple_choice"||F.type==="slider"||F.type==="textarea")&&(R[F.id]="")})}),n(R)},[]);const _=R=>{const{name:$,value:F,type:V,checked:q}=R.target;n(K=>({...K,[$]:V==="checkbox"?q:F})),i(K=>({...K,[$]:void 0}))},j=R=>R.trim().split(/\s+/).filter($=>$.length>0).length,k=()=>{let R={},$=!0;return x.questions.forEach(F=>{if(F.required){const V=r[F.id];if(!V||Array.isArray(V)&&V.length===0)R[F.id]="This field is required.",$=!1;else if(F.type==="textarea"){const q=j(V);F.min_words&&q<F.min_words&&(R[F.id]=`Minimum ${F.min_words} words required.`,$=!1),F.max_words&&q>F.max_words&&(R[F.id]=`Maximum ${F.max_words} words allowed.`,$=!1)}}F.type==="checkbox_multiple"&&F.max_selections&&r[F.id]&&r[F.id].length>F.max_selections&&(R[F.id]=`You can select a maximum of ${F.max_selections} options.`,$=!1)}),i(R),$},S=(R,$)=>{let F=0;if(R.type==="multiple_choice"&&R.options){const V=R.options.find(q=>q.text===$);F=V?V.score:0}else R.type==="checkbox_multiple"&&R.options&&Array.isArray($)?F=$.reduce((V,q)=>{var K;const Y=(K=R.options)==null?void 0:K.find(L=>L.text===q);return V+(Y?Y.score:0)},0):R.type==="slider"&&$?F=Math.min(10,Math.floor(parseInt($)/10)):R.type==="textarea"&&(F=$&&j($)>0?5:0);return F*R.weight},E=R=>{let $=0;return R.questions.forEach(F=>{$+=S(F,r[F.id])}),Math.round($*(R.max_possible_score/10))},C=()=>{if(k()){const R=E(x);if(a($=>({...$,[e]:R})),x.min_score_required&&R<x.min_score_required){c(!1),h(!0);return}e<w-1?t($=>$+1):P()}},T=()=>{e>0&&t(R=>R-1)},O=R=>{const $=F5.scoring_system.overall_thresholds;return R>=$.auto_accept?"auto_accept":R>=$.strong_candidate?"strong_candidate":R>=$.interview_required?"interview_required":"auto_reject"},P=()=>{let R=Object.values(o).reduce(($,F)=>$+F,0);m(R),p(O(R)),h(!0)},D=R=>{var $,F;const V=r[R.id],q=s[R.id];switch(R.type){case"multiple_choice":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{className:"block text-lg font-semibold text-textLight mb-2",children:[R.question," ",R.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),($=R.options)==null?void 0:$.map(K=>d.jsxs("label",{className:"radio-option",children:[d.jsx("input",{type:"radio",name:R.id,value:K.text,checked:V===K.text,onChange:_}),d.jsx("span",{className:"radio-custom"}),d.jsx("span",{className:"option-text",children:K.text})]},K.text)),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},R.id);case"checkbox_multiple":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{className:"block text-lg font-semibold text-textLight mb-2",children:[R.question," ",R.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),(F=R.options)==null?void 0:F.map(K=>d.jsxs("label",{className:"checkbox-option",children:[d.jsx("input",{type:"checkbox",name:R.id,value:K.text,checked:Array.isArray(V)&&V.includes(K.text),onChange:_}),d.jsx("span",{className:"checkbox-custom"}),d.jsx("span",{className:"option-text",children:K.text})]},K.text)),R.max_selections&&d.jsxs("p",{className:"text-sm text-grayDark mt-1",children:["Select up to ",R.max_selections]}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},R.id);case"textarea":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{htmlFor:R.id,className:"block text-lg font-semibold text-textLight mb-2",children:[R.question," ",R.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),R.sample_text&&d.jsx("p",{className:"text-grayDark text-base mb-2 italic",children:R.sample_text}),d.jsx("textarea",{id:R.id,name:R.id,value:V||"",onChange:_,rows:6,className:"mt-1 block w-full border border-borderColorLight rounded-md shadow-sm p-2 focus:border-primary focus:ring-primary"}),R.min_words&&R.max_words&&d.jsxs("p",{className:"text-xs text-grayDark mt-1",children:["Words: ",j(V||"")," / ",R.max_words," (min: ",R.min_words,")"]}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},R.id);case"slider":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{htmlFor:R.id,className:"block text-lg font-semibold text-textLight mb-2",children:[R.question," ",R.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),d.jsx("input",{type:"range",id:R.id,name:R.id,min:R.min,max:R.max,step:R.step,value:V||R.min||0,onChange:_,className:"w-full h-2 bg-grayMedium rounded-lg appearance-none cursor-pointer accent-primary"}),d.jsxs("div",{className:"flex justify-between text-sm text-grayDark mt-1",children:[d.jsx("span",{children:R.min}),d.jsx("span",{children:V||R.min||0}),d.jsx("span",{children:R.max})]}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},R.id);case"date_range":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{htmlFor:R.id,className:"block text-lg font-semibold text-textLight mb-2",children:[R.question," ",R.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),d.jsx("p",{className:"text-base text-grayDark",children:"Date range selection not fully implemented in this example."}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},R.id);default:return d.jsxs("p",{className:"text-errorRed",children:["Unknown question type: ",R.type]},R.id)}};if(u)if(l){const R={auto_accept:"Congratulations! You have been automatically accepted into our beta reader program.",strong_candidate:"Excellent! You are a strong candidate. We will contact you within 48 hours.",interview_required:"Thank you for applying. We would like to schedule a brief interview with you.",auto_reject:"Thank you for your interest. Unfortunately, you do not meet our current requirements."};return d.jsxs("div",{className:"container mx-auto p-4 text-center text-textLight rounded-lg shadow-lg my-8 card-glow",children:[d.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Application Complete"}),d.jsxs("div",{className:"p-6 rounded-lg shadow-md mb-6 card-glow",children:[d.jsxs("h2",{className:"text-3xl font-semibold mb-2",children:["Your Score: ",v]}),d.jsx("p",{className:"text-lg",children:R[f]})]}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out",children:"Apply Again"})]})}else return d.jsxs("div",{className:"container mx-auto p-4 text-center text-textLight rounded-lg shadow-lg my-8 card-glow",children:[d.jsx("h1",{className:"text-4xl font-bold mb-4 text-errorRed",children:"Application Not Qualified"}),d.jsx("p",{className:"text-lg mb-4 text-grayDark",children:"Thank you for your interest in our beta reader program."}),d.jsx("p",{className:"text-md mb-6 text-grayDark",children:"Unfortunately, you do not meet the minimum requirements for this stage. We encourage you to gain more reading experience and apply again in the future."}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out",children:"Start Over"})]});return d.jsxs("div",{className:"container mx-auto p-4 bg-background-light text-textLight rounded-lg shadow-lg my-8",children:[d.jsx("h1",{className:"text-4xl font-bold mb-6 text-primary text-center hero-title-glow",children:"Beta Program Application"}),d.jsx("div",{className:"w-full bg-grayMedium rounded-full h-2.5 mb-4",children:d.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500 ease-in-out",style:{width:`${(e+1)/w*100}%`}})}),d.jsxs("p",{className:"text-center text-base text-grayDark mb-6",children:["Stage ",e+1," of ",w,": ",x.title]}),d.jsxs("form",{onSubmit:R=>{R.preventDefault(),C()},className:"space-y-6",children:[d.jsxs("section",{className:"p-6 bg-background-light rounded-lg shadow-md border border-borderColorLight",children:[d.jsx("h2",{className:"text-3xl font-semibold mb-4 text-textLight",children:x.title}),d.jsx("p",{className:"text-lg text-grayDark mb-4",children:x.description}),x.questions.map(D)]}),d.jsxs("div",{className:"flex justify-between mt-6",children:[e>0&&d.jsx("button",{type:"button",onClick:T,className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out",children:"Previous"}),d.jsx("button",{type:"submit",className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out ml-auto",children:e===w-1?"Submit Application":"Next"})]})]})]})},t6e=({product:e,onPurchase:t,showCheckout:r=!1})=>{const[n,s]=g.useState(!1),[i,o]=g.useState(!1),[a,l]=g.useState(null),{addItem:c,isInCart:u}=b6(),h=e.prices&&e.prices.length>0?{id:e.prices[0].id,unit_amount:e.prices[0].unit_amount,currency:e.prices[0].currency,interval:e.prices[0].interval||void 0,trial_days:e.prices[0].trial_days||void 0}:null,f=(w,_)=>new Intl.NumberFormat("en-US",{style:"currency",currency:_.toUpperCase()}).format(w/100),p=w=>{l(w),s(!0)},v=()=>{h&&c({id:e.id,title:e.name,price:h.unit_amount/100,currency:h.currency,format:"digital"})},m=w=>{s(!1),t&&t(e.id),console.log("Purchase successful:",w)},b=()=>{s(!1)};if(!h)return null;const x=u(e.id);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-background-light/30 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-300 product-card-hover glass-effect border border-border/30",children:[d.jsxs("div",{className:"relative h-64 bg-gradient-to-br from-primary/30 via-secondary/30 to-accent/30",children:[d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx(Op,{className:"w-16 h-16 text-secondary mx-auto mb-2"}),d.jsx("p",{className:"text-text-light/60 text-sm font-medium",children:e.name})]})}),e.active&&d.jsx("div",{className:"absolute top-4 right-4 bg-success text-white px-3 py-1 rounded-full text-xs font-medium shadow-lg",children:"Available"}),e.product_type==="bundle"&&d.jsx("div",{className:"absolute top-4 left-4 bg-secondary text-background px-3 py-1 rounded-full text-xs font-medium shadow-lg",children:"Bundle"}),(e.product_type==="chapter_pass"||e.product_type==="arc_pass")&&d.jsx("div",{className:"absolute top-4 left-4 bg-accent text-white px-3 py-1 rounded-full text-xs font-medium shadow-lg",children:"Subscription"})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("h3",{className:"text-xl font-bold text-text-light mb-3 line-clamp-2",children:e.name}),d.jsx("p",{className:"text-text-light/70 text-sm mb-4 line-clamp-3 leading-relaxed",children:e.description}),d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"text-3xl font-bold text-secondary mb-2",children:f(h.unit_amount,h.currency)}),(e.product_type==="chapter_pass"||e.product_type==="arc_pass")&&d.jsx("div",{className:"text-text-light/70 text-sm",children:"per month"}),!(e.product_type==="chapter_pass"||e.product_type==="arc_pass")&&d.jsx("div",{className:"text-text-light/70 text-sm",children:"One-time purchase"})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("button",{onClick:v,disabled:x,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${x?"bg-success text-white cursor-not-allowed":"bg-secondary text-background hover:bg-secondary-dark focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:ring-offset-2 focus:ring-offset-background-light shadow-lg hover:shadow-xl"}`,children:x?d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"✓"}),d.jsx("span",{children:"Added to Cart"})]}):d.jsxs(d.Fragment,{children:[d.jsx(ro,{className:"w-5 h-5"}),d.jsx("span",{children:"Add to Cart"})]})}),d.jsxs("button",{onClick:()=>p(h),className:"w-full bg-primary text-white py-3 px-4 rounded-xl font-medium hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary/50 focus:ring-offset-2 focus:ring-offset-background-light transition-all duration-200 flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl",children:[d.jsx(YF,{className:"w-5 h-5"}),d.jsx("span",{children:e.product_type==="chapter_pass"||e.product_type==="arc_pass"?"Start Subscription":"Buy Now"})]})]}),d.jsx("div",{className:"mt-6 pt-4 border-t border-border/30",children:d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-text-dark",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-text-light",children:"Published:"}),d.jsx("br",{}),new Date(e.created_at).toLocaleDateString()]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-text-light",children:"Type:"}),d.jsx("br",{}),e.product_type==="bundle"?"Bundle":e.product_type==="chapter_pass"||e.product_type==="arc_pass"?"Subscription":"Single Issue"]})]})})]})]}),n&&a&&d.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-background-light rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto glass-effect border border-border/30",children:[d.jsx("div",{className:"p-6 border-b border-border/30",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-medium text-text-light",children:"Complete Purchase"}),d.jsxs("button",{onClick:()=>s(!1),className:"text-text-dark hover:text-text-light transition-colors p-1 rounded-lg hover:bg-background/30",children:[d.jsx("span",{className:"sr-only",children:"Close"}),d.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})}),d.jsx(ez,{product:{id:e.id,name:e.name,price:a.unit_amount,currency:a.currency,interval:a.interval,trial_period_days:a.trial_days,is_subscription:e.product_type==="chapter_pass"||e.product_type==="arc_pass"},onSuccess:m,onCancel:b})]})})]})},r6e={default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent",outline:"text-foreground border border-input hover:bg-accent hover:text-accent-foreground",success:"bg-green-500 text-white hover:bg-green-600 border-transparent"},n6e=g.forwardRef(({className:e,variant:t="default",...r},n)=>d.jsx("div",{ref:n,className:Ke("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",r6e[t],e),...r}));n6e.displayName="Badge";const s6e=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gh(async()=>{const{default:n}=await Promise.resolve().then(()=>Vh);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class GA extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class i6e extends GA{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $5 extends GA{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class z5 extends GA{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ON;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ON||(ON={}));var o6e=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class a6e{constructor(t,{headers:r={},customFetch:n,region:s=ON.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=s6e(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return o6e(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(m=>{throw new i6e(m)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new $5(h);if(!h.ok)throw new z5(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield h.json():p==="application/octet-stream"?v=yield h.blob():p==="text/event-stream"?v=h:p==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof z5||s instanceof $5?s.context:void 0}}})}}var Fn={},ZA={},Vw={},hg={},Hw={},Kw={},l6e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},hh=l6e();const c6e=hh.fetch,cH=hh.fetch.bind(hh),uH=hh.Headers,u6e=hh.Request,d6e=hh.Response,Vh=Object.freeze(Object.defineProperty({__proto__:null,Headers:uH,Request:u6e,Response:d6e,default:cH,fetch:c6e},Symbol.toStringTag,{value:"Module"})),h6e=XH(Vh);var Yw={};Object.defineProperty(Yw,"__esModule",{value:!0});let f6e=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Yw.default=f6e;var dH=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kw,"__esModule",{value:!0});const p6e=dH(h6e),m6e=dH(Yw);let g6e=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=p6e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,c;let u=null,h=null,f=null,p=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=w:h=JSON.parse(w))}const b=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),x=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(h=[],u=null,p=200,v="OK")}catch{i.status===404&&b===""?(p=204,v="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,p=200,v="OK"),u&&this.shouldThrowOnError)throw new m6e.default(u)}return{error:u,data:h,count:f,status:p,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Kw.default=g6e;var y6e=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hw,"__esModule",{value:!0});const v6e=y6e(Kw);let b6e=class extends v6e.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Hw.default=b6e;var x6e=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hg,"__esModule",{value:!0});const w6e=x6e(Hw);let _6e=class extends w6e.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};hg.default=_6e;var j6e=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vw,"__esModule",{value:!0});const Rf=j6e(hg);let k6e=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Rf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Rf.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Rf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Rf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Rf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Vw.default=k6e;var hH=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ZA,"__esModule",{value:!0});const S6e=hH(Vw),N6e=hH(hg);let C6e=class fH{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new S6e.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new fH(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new N6e.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};ZA.default=C6e;var Hh=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.PostgrestError=Fn.PostgrestBuilder=Fn.PostgrestTransformBuilder=Fn.PostgrestFilterBuilder=Fn.PostgrestQueryBuilder=Fn.PostgrestClient=void 0;const pH=Hh(ZA);Fn.PostgrestClient=pH.default;const mH=Hh(Vw);Fn.PostgrestQueryBuilder=mH.default;const gH=Hh(hg);Fn.PostgrestFilterBuilder=gH.default;const yH=Hh(Hw);Fn.PostgrestTransformBuilder=yH.default;const vH=Hh(Kw);Fn.PostgrestBuilder=vH.default;const bH=Hh(Yw);Fn.PostgrestError=bH.default;var E6e=Fn.default={PostgrestClient:pH.default,PostgrestQueryBuilder:mH.default,PostgrestFilterBuilder:gH.default,PostgrestTransformBuilder:yH.default,PostgrestBuilder:vH.default,PostgrestError:bH.default};const{PostgrestClient:T6e,PostgrestQueryBuilder:Lze,PostgrestFilterBuilder:Fze,PostgrestTransformBuilder:$ze,PostgrestBuilder:zze,PostgrestError:Uze}=E6e;class A6e{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const O6e="2.15.1",P6e=`realtime-js/${O6e}`,R6e="1.0.0",PN=1e4,D6e=1e3,M6e=100;var kp;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(kp||(kp={}));var jr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(jr||(jr={}));var si;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(si||(si={}));var RN;(function(e){e.websocket="websocket"})(RN||(RN={}));var hc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(hc||(hc={}));class I6e{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+s));o=o+s;const l=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class xH{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(jt||(jt={}));const U5=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=L6e(o,e,t,s),i),{})},L6e=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?wH(i,o):DN(o)},wH=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return U6e(t,r)}switch(e){case jt.bool:return F6e(t);case jt.float4:case jt.float8:case jt.int2:case jt.int4:case jt.int8:case jt.numeric:case jt.oid:return $6e(t);case jt.json:case jt.jsonb:return z6e(t);case jt.timestamp:return q6e(t);case jt.abstime:case jt.date:case jt.daterange:case jt.int4range:case jt.int8range:case jt.money:case jt.reltime:case jt.text:case jt.time:case jt.timestamptz:case jt.timetz:case jt.tsrange:case jt.tstzrange:return DN(t);default:return DN(t)}},DN=e=>e,F6e=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},$6e=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},z6e=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},U6e=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>wH(t,a))}return e},q6e=e=>typeof e=="string"?e.replace(" ","T"):e,_H=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Nj{constructor(t,r,n={},s=PN){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var q5;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(q5||(q5={}));class Sp{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sp.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Sp.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Sp.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),v=u.filter(b=>p.indexOf(b.presence_ref)<0),m=h.filter(b=>f.indexOf(b.presence_ref)<0);v.length>0&&(a[c]=v),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var B5;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(B5||(B5={}));var Np;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Np||(Np={}));var Oo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Oo||(Oo={}));class JA{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=jr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Nj(this,si.join,this.params,this.timeout),this.rejoinTimer=new xH(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=jr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=jr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(si.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Sp(this),this.broadcastEndpointURL=_H(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==jr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Np.PRESENCE]&&this.bindings[Np.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Oo.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Oo.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t==null||t(Oo.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,m=(p=v==null?void 0:v.length)!==null&&p!==void 0?p:0,b=[];for(let x=0;x<m;x++){const w=v[x],{filter:{event:_,schema:j,table:k,filter:S}}=w,E=f&&f[x];if(E&&E.event===_&&E.schema===j&&E.table===k&&E.filter===S)b.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=jr.errored,t==null||t(Oo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Oo.SUBSCRIBED);return}}).receive("error",f=>{this.state=jr.errored,t==null||t(Oo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Oo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===jr.joined&&t===Np.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=jr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(si.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Nj(this,si.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Nj(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>M6e){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=si;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,m,b;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(m=p.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,m,b,x,w,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const j=p.id,k=(v=p.filter)===null||v===void 0?void 0:v.event;return j&&((m=r.ids)===null||m===void 0?void 0:m.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(w=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return j==="*"||j===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:m,table:b,commit_timestamp:x,type:w,errors:_}=v;f=Object.assign(Object.assign({},{schema:m,table:b,commit_timestamp:x,eventType:w,new:{},old:{},errors:_}),this._getPayloadRecords(v))}p.callback(f,n)})}_isClosed(){return this.state===jr.closed}_isJoined(){return this.state===jr.joined}_isJoining(){return this.state===jr.joining}_isLeaving(){return this.state===jr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&JA.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(si.close,{},t)}_onError(t){this._on(si.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=U5(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=U5(t.columns,t.old_record)),r}}const W5=()=>{},Ay={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},B6e=[1e3,2e3,5e3,1e4],W6e=1e4,V6e=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class H6e{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=PN,this.transport=null,this.heartbeatIntervalMs=Ay.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=W5,this.ref=0,this.reconnectTimer=null,this.logger=W5,this.conn=null,this.sendBuffer=[],this.serializer=new I6e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>gh(async()=>{const{default:a}=await Promise.resolve().then(()=>Vh);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${RN.websocket}`,this.httpEndpoint=_H(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=A6e.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:R6e}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case kp.connecting:return hc.Connecting;case kp.open:return hc.Open;case kp.closing:return hc.Closing;default:return hc.Closed}}isConnected(){return this.connectionState()===hc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new JA(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(D6e,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ay.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(si.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([V6e],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:P6e};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(si.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new xH(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ay.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:PN,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Ay.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t==null?void 0:t.reconnectAfterMs)!==null&&a!==void 0?a:u=>B6e[u-1]||W6e,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(u,h)=>h(JSON.stringify(u)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class QA extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Sr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class K6e extends QA{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class MN extends QA{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Y6e=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const jH=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gh(async()=>{const{default:n}=await Promise.resolve().then(()=>Vh);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},G6e=()=>Y6e(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gh(()=>Promise.resolve().then(()=>Vh),void 0)).Response:Response}),IN=e=>{if(Array.isArray(e))return e.map(r=>IN(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=IN(n)}),t},Z6e=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var mu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const Cj=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),J6e=(e,t,r)=>mu(void 0,void 0,void 0,function*(){const n=yield G6e();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new K6e(Cj(s),i,o))}).catch(s=>{t(new MN(Cj(s),s))}):t(new MN(Cj(e),e))}),Q6e=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(Z6e(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function fg(e,t,r,n,s,i){return mu(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,Q6e(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>J6e(l,a,n))})})}function qb(e,t,r,n){return mu(this,void 0,void 0,function*(){return fg(e,"GET",t,r,n)})}function Fi(e,t,r,n,s){return mu(this,void 0,void 0,function*(){return fg(e,"POST",t,n,s,r)})}function LN(e,t,r,n,s){return mu(this,void 0,void 0,function*(){return fg(e,"PUT",t,n,s,r)})}function X6e(e,t,r,n){return mu(this,void 0,void 0,function*(){return fg(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function kH(e,t,r,n,s){return mu(this,void 0,void 0,function*(){return fg(e,"DELETE",t,n,s,r)})}var gn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const eFe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},V5={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tFe{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=jH(s)}uploadOrUpdate(t,r,n,s){return gn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},V5),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(t=="PUT"?LN:Fi)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Sr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return gn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return gn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:V5.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield LN(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(Sr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return gn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Fi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new QA("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(Sr(n))return{data:null,error:n};throw n}})}update(t,r,n){return gn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return gn(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Sr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return gn(this,void 0,void 0,function*(){try{return{data:{path:(yield Fi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Sr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return gn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Fi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Sr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return gn(this,void 0,void 0,function*(){try{const s=yield Fi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Sr(s))return{data:null,error:s};throw s}})}download(t,r){return gn(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield qb(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Sr(a))return{data:null,error:a};throw a}})}info(t){return gn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield qb(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:IN(n),error:null}}catch(n){if(Sr(n))return{data:null,error:n};throw n}})}exists(t){return gn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield X6e(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Sr(n)&&n instanceof MN){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return gn(this,void 0,void 0,function*(){try{return{data:yield kH(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Sr(r))return{data:null,error:r};throw r}})}list(t,r,n){return gn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},eFe),r),{prefix:t||""});return{data:yield Fi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Sr(s))return{data:null,error:s};throw s}})}listV2(t,r){return gn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Fi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Sr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const rFe="2.11.0",nFe={"X-Client-Info":`storage-js/${rFe}`};var $u=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class sFe{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},nFe),r),this.fetch=jH(n)}listBuckets(){return $u(this,void 0,void 0,function*(){try{return{data:yield qb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Sr(t))return{data:null,error:t};throw t}})}getBucket(t){return $u(this,void 0,void 0,function*(){try{return{data:yield qb(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Sr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return $u(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Sr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return $u(this,void 0,void 0,function*(){try{return{data:yield LN(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Sr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return $u(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Sr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $u(this,void 0,void 0,function*(){try{return{data:yield kH(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Sr(r))return{data:null,error:r};throw r}})}}class iFe extends sFe{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new tFe(this.url,this.headers,t,this.fetch)}}const oFe="2.56.0";let Jf="";typeof Deno<"u"?Jf="deno":typeof document<"u"?Jf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jf="react-native":Jf="node";const aFe={"X-Client-Info":`supabase-js-${Jf}/${oFe}`},lFe={headers:aFe},cFe={schema:"public"},uFe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dFe={};var hFe=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const fFe=e=>{let t;return e?t=e:typeof fetch>"u"?t=cH:t=fetch,(...r)=>t(...r)},pFe=()=>typeof Headers>"u"?uH:Headers,mFe=(e,t,r)=>{const n=fFe(r),s=pFe();return(i,o)=>hFe(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var gFe=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function yFe(e){return e.endsWith("/")?e:e+"/"}function vFe(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>gFe(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const SH="2.71.1",sd=30*1e3,FN=3,Ej=FN*sd,bFe="http://localhost:9999",xFe="supabase.auth.token",wFe={"X-Client-Info":`gotrue-js/${SH}`},$N="X-Supabase-Api-Version",NH={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_Fe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jFe=10*60*1e3;class XA extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ve(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class kFe extends XA{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function SFe(e){return Ve(e)&&e.name==="AuthApiError"}class CH extends XA{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ml extends XA{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class La extends Ml{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function NFe(e){return Ve(e)&&e.name==="AuthSessionMissingError"}class Oy extends Ml{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Py extends Ml{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ry extends Ml{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CFe(e){return Ve(e)&&e.name==="AuthImplicitGrantRedirectError"}class H5 extends Ml{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zN extends Ml{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Tj(e){return Ve(e)&&e.name==="AuthRetryableFetchError"}class K5 extends Ml{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class UN extends Ml{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Y5=` 	
\r=`.split(""),EFe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Y5.length;t+=1)e[Y5[t].charCodeAt(0)]=-2;for(let t=0;t<Bb.length;t+=1)e[Bb[t].charCodeAt(0)]=t;return e})();function G5(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Bb[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Bb[n]),t.queuedBits-=6}}function EH(e,t,r){const n=EFe[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Z5(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{OFe(o,n,r)};for(let o=0;o<e.length;o+=1)EH(e.charCodeAt(o),s,i);return t.join("")}function TFe(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function AFe(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}TFe(n,t)}}function OFe(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function PFe(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)EH(e.charCodeAt(s),r,n);return new Uint8Array(t)}function RFe(e){const t=[];return AFe(e,r=>t.push(r)),new Uint8Array(t)}function DFe(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>G5(s,r,n)),G5(null,r,n),t.join("")}function MFe(e){return Math.round(Date.now()/1e3)+e}function IFe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Gs=()=>typeof window<"u"&&typeof document<"u",tc={tested:!1,writable:!1},TH=()=>{if(!Gs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tc.tested)return tc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tc.tested=!0,tc.writable=!0}catch{tc.tested=!0,tc.writable=!1}return tc.writable};function LFe(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const AH=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gh(async()=>{const{default:n}=await Promise.resolve().then(()=>Vh);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},FFe=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",id=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},rc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Oa=async(e,t)=>{await e.removeItem(t)};class Gw{constructor(){this.promise=new Gw.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Gw.promiseConstructor=Promise;function Aj(e){const t=e.split(".");if(t.length!==3)throw new UN("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!_Fe.test(t[n]))throw new UN("JWT not in base64url format");return{header:JSON.parse(Z5(t[0])),payload:JSON.parse(Z5(t[1])),signature:PFe(t[2]),raw:{header:t[0],payload:t[1]}}}async function $Fe(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function zFe(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function UFe(e){return("0"+e.toString(16)).substr(-2)}function qFe(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,UFe).join("")}async function BFe(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function WFe(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await BFe(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zu(e,t,r=!1){const n=qFe();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await id(e,`${t}-code-verifier`,s);const i=await WFe(n);return[i,n===i?"plain":"s256"]}const VFe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function HFe(e){const t=e.headers.get($N);if(!t||!t.match(VFe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function KFe(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function YFe(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const GFe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Uu(e){if(!GFe.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Oj(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function J5(e){return JSON.parse(JSON.stringify(e))}var ZFe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const uc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),JFe=[502,503,504];async function Q5(e){var t;if(!FFe(e))throw new zN(uc(e),0);if(JFe.includes(e.status))throw new zN(uc(e),e.status);let r;try{r=await e.json()}catch(i){throw new CH(uc(i),i)}let n;const s=HFe(e);if(s&&s.getTime()>=NH["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new K5(uc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new La}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new K5(uc(r),e.status,r.weak_password.reasons);throw new kFe(uc(r),e.status||500,n)}const QFe=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Je(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[$N]||(i[$N]=NH["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await XFe(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function XFe(e,t,r,n,s,i){const o=QFe(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new zN(uc(l),0)}if(a.ok||await Q5(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Q5(l)}}function Co(e){var t;let r=null;n$e(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=MFe(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function X5(e){const t=Co(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ha(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function e$e(e){return{data:e,error:null}}function t$e(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=ZFe(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function r$e(e){return e}function n$e(e){return e.access_token&&e.refresh_token&&e.expires_in}const Pj=["global","local","others"];var s$e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class i$e{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=AH(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Pj[0]){if(Pj.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pj.join(", ")}`);try{return await Je(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Je(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ha})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=s$e(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:t$e,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ve(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Je(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ha})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:r$e});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Ve(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Uu(t);try{return await Je(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ha})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Uu(t);try{return await Je(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ha})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Uu(t);try{return await Je(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ha})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Uu(t.userId);try{const{data:r,error:n}=await Je(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Uu(t.userId),Uu(t.id);try{return{data:await Je(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}}function eL(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function o$e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qu={debug:!!(globalThis&&TH()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class OH extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class a$e extends OH{}async function l$e(e,t,r){qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),qu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new a$e(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(qu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}o$e();const c$e={url:bFe,storageKey:xFe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wFe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function tL(e,t,r){return await r()}const Bu={};class pm{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pm.nextInstanceID,pm.nextInstanceID+=1,this.instanceID>0&&Gs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},c$e),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new i$e({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=AH(s.fetch),this.lock=s.lock||tL,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Gs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=l$e:this.lock=tL,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:TH()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eL(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=eL(this.memoryStorage)),Gs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Bu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Bu[this.storageKey]=Object.assign(Object.assign({},Bu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Bu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Bu[this.storageKey]=Object.assign(Object.assign({},Bu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${SH}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=LFe(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Gs()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),CFe(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ve(r)?{error:r}:{error:new CH("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Co}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ve(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await zu(this.storage,this.storageKey)),i=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:Co})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Co})}else throw new Py("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ve(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await Je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:X5})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await Je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:X5})}else throw new Py("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Oy}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,a,l,c,u,h,f,p;let v,m;if("message"in t)v=t.message,m=t.signature;else{const{chain:b,wallet:x,statement:w,options:_}=t;let j;if(Gs())if(typeof x=="object")j=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const k=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=S}}try{const{data:b,error:x}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:DFe(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Co});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Oy}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(Ve(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await rc(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Co});if(await Oa(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Oy}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ve(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await Je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Co}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Oy}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await zu(this.storage,this.storageKey));const{error:h}=await Je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await Je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Py("You must provide either an email or phone number.")}catch(a){if(Ve(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await Je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Co});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await zu(this.storage,this.storageKey)),await Je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:e$e})}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new La;const{error:s}=await Je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ve(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await Je(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await Je(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Py("You must provide either an email or phone number and a type")}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await rc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ej:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await rc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Oj()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ha}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new La}:await Je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ha})})}catch(r){if(Ve(r))return NFe(r)&&(await this._removeSession(),await Oa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new La;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await zu(this.storage,this.storageKey));const{data:c,error:u}=await Je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ha});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new La;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Aj(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Ve(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new La;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Gs())throw new Ry("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ry(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new H5("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ry("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new H5("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new Ry("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=sd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=f-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:m,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(Ve(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await rc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(SFe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Oa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=IFe(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await zu(this.storage,this.storageKey,!0));try{return await Je(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Je(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Gs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ve(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await Je(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await zFe(async s=>(s>0&&await $Fe(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Co})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Tj(i)&&Date.now()+o-n<sd})}catch(n){if(this._debug(r,"error",n),Ve(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Gs()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await rc(this.storage,this.storageKey);if(s&&this.userStorage){let o=await rc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await id(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Oj()}else if(s&&!s.user&&!s.user){const o=await rc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Oa(this.storage,this.storageKey+"-user"),await id(this.storage,this.storageKey,s)):s.user=Oj()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ej;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ej}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Tj(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new La;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Gw;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new La;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Ve(i)){const o={session:null,error:i};return Tj(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await id(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=J5(s);await id(this.storage,this.storageKey,i)}else{const s=J5(r);await id(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Oa(this.storage,this.storageKey),await Oa(this.storage,this.storageKey+"-code-verifier"),await Oa(this.storage,this.storageKey+"-user"),this.userStorage&&await Oa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Gs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),sd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/sd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${sd}ms, refresh threshold is ${FN} ticks`),s<=FN&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof OH)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await zu(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Je(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await Je(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await Je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Aj(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+jFe>s)return n;const{data:i,error:o}=await Je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Aj(n);r!=null&&r.allowExpired||KFe(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=YFe(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,RFe(`${a}.${l}`)))throw new UN("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}}pm.nextInstanceID=0;const u$e=pm;class d$e extends u$e{constructor(t){super(t)}}var h$e=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class f$e{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=yFe(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:cFe,realtime:dFe,auth:Object.assign(Object.assign({},uFe),{storageKey:c}),global:lFe},h=vFe(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=mFe(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new T6e(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new iFe(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new a6e(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return h$e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d$e({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new H6e(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const PH=(e,t,r)=>new f$e(e,t,r);function p$e(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}p$e()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var RH={VITE_SUPABASE_URL:"https://opukvvmumyegtkukqint.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s"};const rL=typeof window<"u",m$e=RH.VITE_SUPABASE_URL,g$e=RH.VITE_SUPABASE_ANON_KEY;console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set");let tr;try{tr=PH(m$e,g$e,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:rL?window.localStorage:void 0}});const e=typeof process<"u"&&!1}catch(e){throw console.error("Error initializing Supabase client:",e),e}const DH=g.createContext(void 0),MH=({children:e})=>{const[t,r]=g.useState(null),[n,s]=g.useState(null),[i,o]=g.useState(null),[a,l]=g.useState(!1),[c,u]=g.useState(!1),[h,f]=g.useState(!0);return g.useEffect(()=>{const{data:p}=tr.auth.onAuthStateChange(async(v,m)=>{s(m),r((m==null?void 0:m.user)||null),f(!1)});return tr.auth.getSession().then(({data:{session:v}})=>{s(v),r((v==null?void 0:v.user)||null),f(!1)}),()=>{p.subscription.unsubscribe()}},[]),g.useEffect(()=>{const p=async v=>{try{const{data:m,error:b}=await tr.from("profiles").select("*").eq("id",v).single();if(b)throw b;o(m),l((m==null?void 0:m.role)==="admin"||(m==null?void 0:m.role)==="super_admin")}catch(m){console.error("Error fetching user profile:",m),o(null),l(!1)}};t!=null&&t.id?(p(t.id),u(!0)):(o(null),l(!1),u(!1))},[t]),y.jsx(DH.Provider,{value:{user:t,session:n,userProfile:i,isAdmin:a,isAuthenticated:c,isLoading:h},children:e})},IH=()=>{const e=g.useContext(DH);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},LH={items:[],total:0,itemCount:0},y$e=(e,t)=>{switch(t.type){case"ADD_ITEM":if(e.items.find(n=>n.id===t.payload.id)){const n=e.items.map(o=>o.id===t.payload.id?{...o,quantity:o.quantity+t.payload.quantity}:o),s=n.reduce((o,a)=>o+a.price*a.quantity,0),i=n.reduce((o,a)=>o+a.quantity,0);return{...e,items:n,total:s,itemCount:i}}else{const n=[...e.items,t.payload],s=n.reduce((o,a)=>o+a.price*a.quantity,0),i=n.reduce((o,a)=>o+a.quantity,0);return{...e,items:n,total:s,itemCount:i}}case"REMOVE_ITEM":{const r=e.items.filter(i=>i.id!==t.payload),n=r.reduce((i,o)=>i+o.price*o.quantity,0),s=r.reduce((i,o)=>i+o.quantity,0);return{...e,items:r,total:n,itemCount:s}}case"UPDATE_QUANTITY":{const r=e.items.map(i=>i.id===t.payload.id?{...i,quantity:t.payload.quantity}:i),n=r.reduce((i,o)=>i+o.price*o.quantity,0),s=r.reduce((i,o)=>i+o.quantity,0);return{...e,items:r,total:n,itemCount:s}}case"CLEAR_CART":return LH;case"LOAD_CART":{const r=t.payload.reduce((s,i)=>s+i.price*i.quantity,0),n=t.payload.reduce((s,i)=>s+i.quantity,0);return{...e,items:t.payload,total:r,itemCount:n}}default:return e}},v$e=g.createContext(void 0),b$e=({children:e})=>{const[t,r]=g.useReducer(y$e,LH),n=c=>{r({type:"ADD_ITEM",payload:{...c,quantity:1}})},s=c=>{r({type:"REMOVE_ITEM",payload:c})},l={state:t,addItem:n,removeItem:s,updateQuantity:(c,u)=>{u<=0?s(c):r({type:"UPDATE_QUANTITY",payload:{id:c,quantity:u}})},clearCart:()=>{r({type:"CLEAR_CART"})},isInCart:c=>t.items.some(u=>u.id===c)};return y.jsx(v$e.Provider,{value:l,children:e})},x$e=async e=>{const{data:t,error:r}=await tr.from("subscriptions").select("*").eq("user_id",e).single();return r?(console.error("Error fetching subscription:",r),null):t},w$e=async e=>{const t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),r=tr.from("wiki_pages").select(`
      id, created_at, created_by, title, slug, excerpt, is_published, category_id, folder_id, updated_at, view_count,
      content, seo_title, seo_description, seo_keywords,
      category(*),
      user(*)
    `).eq(t?"id":"slug",e),{data:n,error:s}=await r.single();if(s)return console.error("Error fetching wiki page:",s),null;if(n){n.user&&typeof n.user=="object"&&"error"in n.user&&(n.user=null),n.category&&typeof n.category=="object"&&"error"in n.category&&(n.category=null);const{data:i,error:o}=await tr.from("wiki_content_blocks").select("id, type, content, position").eq("page_id",n.id).order("position");if(o)throw console.error("Error fetching wiki content:",o),new Error("Failed to fetch wiki content");const a=(i==null?void 0:i.map(c=>({id:c.id,type:c.type,content:c.content,title:""})))||[];return await tr.rpc("increment_wiki_page_views",{page_id:n.id}),{...n,sections:a,content:n.content||"",seo_title:n.seo_title||"",seo_description:n.seo_description||"",seo_keywords:n.seo_keywords||[],category:n.category,user:n.user}}return null},_$e=async e=>{const t={books_read:0,reading_hours:0,achievements:0,currently_reading:"None"},{data:r,error:n}=await tr.from("user_stats").upsert({user_id:e,...t},{onConflict:"user_id"}).select("*").single();if(n)throw console.error("Error initializing user stats:",n),n;return r},j$e=async e=>{try{const{data:t,error:r}=await tr.from("user_stats").select("*").eq("user_id",e).maybeSingle();if(!t&&(!r||r.code==="PGRST116"))return _$e(e);if(r)throw r;return t}catch(t){throw console.error("Error fetching user stats:",t),t}},nL=({children:e})=>{const{user:t,isLoading:r}=IH();return r?y.jsx("div",{children:"Loading..."}):t?y.jsx(y.Fragment,{children:e}):y.jsx(ZK,{to:"/login",replace:!0})},k$e=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[s,i]=g.useState(null),[o,a]=g.useState(null),[l,c]=g.useState(!1);g.useEffect(()=>{(async()=>{n(!0);const{data:m,error:b}=await tr.from("beta_applications").select("*");b?(console.error("Error fetching beta applications:",b),i(b.message)):t(m||[]),n(!1)})()},[]);const u=async(v,m,b)=>{const{error:x}=await tr.from("beta_applications").update({status:m,admin_notes:b}).eq("id",v);if(x){console.error("Error updating application status:",x),alert("Failed to update application status.");return}const{data:w,error:_}=await tr.from("beta_applications").select("user_id").eq("id",v).single();if(_||!w){console.error("Error fetching application user_id:",_),alert("Failed to fetch application user for profile update.");return}const j=m==="approved"?"approved":"rejected",{error:k}=await tr.from("profiles").update({beta_reader_status:j}).eq("id",w.user_id);if(k){console.error("Error updating user profile beta_reader_status:",k),alert("Failed to update user's beta reader status in profile.");return}t(S=>S.map(E=>E.id===v?{...E,status:m,admin_notes:b}:E)),alert(`Application ${m} and user profile updated successfully!`)},h=v=>{a(v),c(!0)},f=()=>{a(null),c(!1)},p=async(v,m)=>{const{error:b}=await tr.from("beta_applications").update({admin_notes:m}).eq("id",v);b?(console.error("Error updating admin notes:",b),alert("Failed to update admin notes.")):(t(x=>x.map(w=>w.id===v?{...w,admin_notes:m}:w)),o&&o.id===v&&a(x=>x?{...x,admin_notes:m}:null),alert("Admin notes updated successfully!"))};return r?y.jsx("div",{className:"text-gray-100",children:"Loading applications..."}):s?y.jsxs("div",{className:"text-red-400",children:["Error: ",s]}):y.jsxs("div",{className:"admin-beta-applications-manager",children:[y.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"Manage Beta Applications"}),e.length===0?y.jsx("p",{className:"text-gray-400",children:"No beta applications submitted yet."}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(v=>y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:v.full_name}),y.jsx("p",{className:"text-gray-400 text-sm",children:v.email}),y.jsxs("p",{className:"text-gray-400 text-sm",children:["Status: ",y.jsx("span",{className:`font-medium ${v.status==="pending"?"text-yellow-400":v.status==="approved"?"text-green-400":"text-red-400"}`,children:v.status.toUpperCase()})]}),y.jsxs("p",{className:"text-gray-400 text-sm",children:["Composite Score: ",v.composite_score,"/100"]}),y.jsxs("div",{className:"mt-4 space-y-2",children:[y.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 1 Score: ",v.stage1_raw_score,"/100"]}),y.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 2 Score: ",v.stage2_raw_score,"/60"]}),y.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 3 Score: ",v.stage3_raw_score,"/40"]}),y.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 4 Score: ",v.stage4_raw_score,"/60"]})]}),v.admin_notes&&y.jsxs("div",{className:"mt-4 p-3 bg-gray-700/50 rounded-lg text-gray-300 text-sm",children:[y.jsx("strong",{children:"Admin Notes:"})," ",v.admin_notes]}),y.jsxs("div",{className:"mt-6 flex space-x-3",children:[v.status==="pending"&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>u(v.id,"approved",prompt("Add admin notes for approval:")||""),className:"px-4 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Approve"}),y.jsx("button",{onClick:()=>u(v.id,"denied",prompt("Add admin notes for denial:")||""),className:"px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-sm font-medium",children:"Deny"})]}),y.jsx("button",{onClick:()=>h(v),className:"px-4 py-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors text-sm font-medium",children:"View Details"})]})]},v.id))}),l&&o&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-gray-800/90 rounded-lg p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-gray-700 relative",children:[y.jsx("button",{onClick:f,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:"×"}),y.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["Application Details: ",o.full_name]}),y.jsxs("div",{className:"space-y-4 text-gray-300",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Applicant Information"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Email:"})," ",o.email]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Time Zone:"})," ",o.time_zone]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Country:"})," ",o.country||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Goodreads:"})," ",o.goodreads||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Applied On:"})," ",new Date(o.created_at).toLocaleString()]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Current Status:"})," ",o.status.toUpperCase()]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Composite Score:"})," ",o.composite_score,"/100"]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Admin Notes"}),y.jsx("textarea",{className:"w-full p-2 rounded bg-gray-700 border border-gray-600 text-white",rows:4,value:o.admin_notes||"",onChange:v=>a(m=>m?{...m,admin_notes:v.target.value}:null)}),y.jsx("button",{onClick:()=>p(o.id,o.admin_notes||""),className:"mt-2 px-4 py-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors text-sm font-medium",children:"Save Notes"})]}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 1: Application Form (Score: ",o.stage1_raw_score,"/100)"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Beta Commitment:"})," ",o.beta_commitment]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Hours Per Week:"})," ",o.hours_per_week]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Portal Use:"})," ",o.portal_use]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Recent Reads:"})," ",o.recent_reads||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Interest Statement:"})," ",o.interest_statement]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Prior Beta Experience:"})," ",o.prior_beta||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Feedback Philosophy:"})," ",o.feedback_philosophy]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Track Record:"})," ",o.track_record||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Communication:"})," ",o.communication]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Devices:"})," ",o.devices.join(", ")||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Access Needs:"})," ",o.access_needs||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Demographics:"})," ",o.demographics||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passed Stage 1:"})," ",o.stage1_passed?"Yes":"No"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Auto Fail:"})," ",o.stage1_auto_fail?"Yes":"No"]})]}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 2: Comprehension Test (Score: ",o.stage2_raw_score,"/60)"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Q1 Answer:"})," ",o.q1||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Q2 Answer:"})," ",o.q2||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Clarity Feedback:"})," ",o.clarity_feedback||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Pacing Analysis:"})," ",o.pacing_analysis||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Taste Alignment:"})," ",o.taste_alignment||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passed Stage 2:"})," ",o.stage2_passed?"Yes":"No"]})]}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 3: Calibration Test (Score: ",o.stage3_raw_score,"/40)"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Worse Passage:"})," ",o.worse_passage||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passage A Analysis:"})," ",o.passage_a_analysis||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passage B Analysis:"})," ",o.passage_b_analysis||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Priority Fix:"})," ",o.priority_fix||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passed Stage 3:"})," ",o.stage3_passed?"Yes":"No"]})]}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 4: Timed Trial (Score: ",o.stage4_raw_score,"/60)"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Overall Assessment:"})," ",o.overall_assessment||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Chapter Summary:"})," ",o.chapter_summary||"N/A"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Passed Stage 4:"})," ",o.stage4_passed?"Yes":"No"]})]}),y.jsxs("div",{className:"mt-6",children:[y.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Change Application Status"}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsx("button",{onClick:()=>u(o.id,"approved",prompt("Add admin notes for approval:")||o.admin_notes||""),className:"px-4 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Approve"}),y.jsx("button",{onClick:()=>u(o.id,"denied",prompt("Add admin notes for denial:")||o.admin_notes||""),className:"px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-sm font-medium",children:"Deny"})]})]})]})]})})]})},S$e="_timeline_1x8m9_1",N$e="_milestone_1x8m9_20",C$e="_dot_1x8m9_57",E$e="_content_1x8m9_76",T$e="_date_1x8m9_88",A$e="_expandedContent_1x8m9_108",O$e="_detailsText_1x8m9_114",P$e="_miniTimeline_1x8m9_120",R$e="_miniMilestone_1x8m9_126",D$e="_miniDot_1x8m9_131",M$e="_miniContent_1x8m9_141",I$e="_miniDate_1x8m9_145",ms={timeline:S$e,milestone:N$e,dot:C$e,content:E$e,date:T$e,expandedContent:A$e,detailsText:O$e,miniTimeline:P$e,miniMilestone:R$e,miniDot:D$e,miniContent:M$e,miniDate:I$e},L$e="https://opukvvmumyegtkukqint.supabase.co",F$e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s",$$e=PH(L$e,F$e),z$e=async()=>{const{data:e,error:t}=await $$e.from("timeline_events").select(`
      *,
      timeline_nested_events (
        id,
        date,
        title,
        description,
        "order"
      )
    `).eq("is_published",!0).order("order",{ascending:!0});return t?(console.error("Error fetching timeline events:",t),[]):e},U$e=({date:e,title:t,description:r,details:n,nested_events:s=[],background_image:i})=>{const[o,a]=g.useState(!1),l=()=>{a(!o)},c=i?{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${i})`,backgroundSize:"cover",backgroundPosition:"center",color:"white",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}:{};return y.jsxs("div",{className:ms.milestone,style:c,children:[y.jsx("div",{className:ms.dot}),y.jsxs("div",{className:ms.content,onClick:l,children:[y.jsx("span",{className:ms.date,children:e}),y.jsx("h3",{children:t}),y.jsx("p",{children:r}),o&&y.jsxs("div",{className:ms.expandedContent,children:[n&&y.jsx("p",{className:ms.detailsText,children:n}),s&&s.length>0&&y.jsx("div",{className:ms.miniTimeline,children:s.map((u,h)=>y.jsxs("div",{className:ms.miniMilestone,children:[y.jsx("div",{className:ms.miniDot}),y.jsxs("div",{className:ms.miniContent,children:[y.jsx("span",{className:ms.miniDate,children:u.date}),y.jsx("h4",{children:u.title}),y.jsx("p",{children:u.description})]})]},h))})]})]})]})},q$e=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[s,i]=g.useState(null);return g.useEffect(()=>{(async()=>{try{n(!0);const a=await z$e();t(a)}catch(a){console.error("Failed to load timeline events:",a),i("Failed to load timeline. Please try again later.")}finally{n(!1)}})()},[]),r?y.jsx("div",{className:"flex justify-center items-center h-screen",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s?y.jsx("div",{className:"container mx-auto p-4",children:y.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Error: "}),y.jsx("span",{className:"block sm:inline",children:s})]})}):e.length===0?y.jsx("div",{className:"container mx-auto p-4",children:y.jsxs("div",{className:"text-center py-12",children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Timeline Events Found"}),y.jsx("p",{className:"text-gray-600",children:"Check back later for updates to the timeline."})]})}):y.jsx("section",{className:`${ms.timeline} py-12`,children:y.jsxs("div",{className:"container mx-auto px-4",children:[y.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"Zoroastrian Timeline"}),e.map(o=>y.jsx(U$e,{date:o.date,title:o.title,description:o.description,details:o.details,nested_events:o.nested_events,background_image:o.background_image},o.id))]})})},B$e=()=>{var j,k,S,E;const[e,t]=g.useState(1),[r,n]=g.useState({}),[s,i]=g.useState(1),[o,a]=g.useState(48*60*60),l=[{label:"Application"},{label:"Comprehension"},{label:"Calibration"},{label:"Trial Task"}],c=({state:C})=>{const T=C==="done"?"#10B981":C==="current"?"#60A5FA":"#6B7280",O=C==="upcoming"?"#9CA3AF":"#E5E7EB";return y.jsxs("svg",{viewBox:"0 0 64 40",width:"36",height:"24",className:`mountain-icon ${C}`,"aria-hidden":!0,children:[y.jsx("path",{d:"M2 38 L20 12 L28 22 L40 4 L62 38 Z",fill:T,stroke:T,strokeWidth:"1.5"}),y.jsx("path",{d:"M20 12 L24 18 L16 18 Z",fill:O}),y.jsx("path",{d:"M40 4 L44 12 L36 12 Z",fill:O})]})},u=({done:C})=>y.jsx("div",{className:`connector ${C?"done":""}`}),h=()=>y.jsxs("div",{className:"mountain-stepper",children:[y.jsx(u,{done:e>0}),l.map((C,T)=>{const O=T+1,P=O<e?"done":O===e?"current":"upcoming";return y.jsxs(ue.Fragment,{children:[y.jsxs("div",{className:"mountain-step-container",onClick:()=>f(),children:[y.jsx(c,{state:P}),y.jsx("span",{className:`mountain-label ${P}`,children:C.label})]}),y.jsx(u,{done:O<e})]},C.label)})]}),f=C=>{t(6)},p=(C,T,O,P)=>{const D=document.getElementById(C),R=document.getElementById(T);if(D&&R){const $=D.value.trim().split(/\s+/).filter(F=>F.length>0).length;R.textContent=`${$}/${P} words`,R.className="word-count",$<O?R.classList.add("error"):$>P*.9&&R.classList.add("warning")}};g.useEffect(()=>{p("interestStatement","interestWordCount",150,250),p("taste_response","tasteWordCount",0,100),p("overall_assessment","assessmentWordCount",200,300)},[e]),g.useEffect(()=>{let C;return e===4&&(C=setInterval(()=>{a(T=>T<=0?(clearInterval(C),alert("Time expired! Your submission may be marked as late."),0):T-1)},1e3)),()=>clearInterval(C)},[e]);const v=C=>{const T=Math.floor(C/3600),O=Math.floor(C%3600/60),P=C%60;return`${T.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`},m=C=>{C.preventDefault();const T=new FormData(C.target),O=Object.fromEntries(T.entries()),P=Array.from(document.querySelectorAll('input[name="devices"]:checked')).map(H=>H.value);O.devices=P;let D=0,R=!1;D+={weekly_deadlines:10,commit_with_extensions:6,prefer_flexible:3,no_commitment:0}[O.betaCommitment]||0,O.betaCommitment==="no_commitment"&&(R=!0),D+={"5_plus":5,"3_4":3,under_3:0}[O.hoursPerWeek]||0,D+={yes_comfortable:5,yes_unsure:2,no:0}[O.portalUse]||0,O.portalUse==="no"&&(R=!0),D=Math.min(D,20);let q=0;O.recentReads.length>0&&O.interestStatement.length>0&&(q=10),D+=q;let K=0;O.priorBeta.length>0&&O.feedbackPhilosophy.length>0&&(K=10),D+=K;let Y=0;O.trackRecord.length>0&&O.communication.length>0&&(Y=10),D+=Y;let L=0;const X=P.length;X===3?L+=6:X===2?L+=4:X===1&&(L+=2),L=Math.min(L,20),D+=L;let ve=D>=50&&!R;n(H=>({...H,stage1:{...O,rawScore:D,passed:ve,autoFail:R}})),f()},b=C=>{C.preventDefault();const T=new FormData(C.target),O=Object.fromEntries(T.entries());let P=0;const D=38;O.q1==="b"&&(P+=20),O.clarity_feedback.length>0&&O.pacing_feedback.length>0&&(P+=15),O.taste_response.length>0&&(P+=5);let R=P>=D;n($=>({...$,stage2:{...O,rawScore:P,passed:R}})),f()},x=C=>{C.preventDefault();const T=new FormData(C.target),O=Object.fromEntries(T.entries());let P=0;const D=26;O.worse_passage==="a"&&(P+=15),O.passage_a_analysis.length>0&&O.passage_b_analysis.length>0&&O.priority_fix.length>0&&(P+=5);let R=P>=D;n($=>({...$,stage3:{...O,rawScore:P,passed:R}})),f()},w=async C=>{var Y;C.preventDefault();const T=new FormData(C.target),O=Object.fromEntries(T.entries());let P=0;const D=40;o>0?P+=10:P+=0;const R=document.querySelectorAll(".inline-comment");O.overall_assessment.length>0&&O.chapter_summary.length>0&&R.length>=8?P+=10:O.overall_assessment.length>0&&O.chapter_summary.length>0&&R.length>=4&&(P+=5),R.length>0&&(P+=10),O.chapter_summary.length>0&&(P+=10);let $=P>=D;n(L=>({...L,stage4:{...O,rawScore:P,passed:$}}));const F={stage1:.2,stage2:.25,stage3:.2,stage4:.35},V=r.stage1.rawScore/100*(F.stage1*100)+r.stage2.rawScore/60*(F.stage2*100)+r.stage3.rawScore/40*(F.stage3*100)+r.stage4.rawScore/60*(F.stage4*100);n(L=>({...L,compositeScore:Math.round(V*10)/10})),t(6);const q={user_id:(Y=(await tr.auth.getUser()).data.user)==null?void 0:Y.id,full_name:r.stage1.fullName,email:r.stage1.email,time_zone:r.stage1.timeZone,country:r.stage1.country,goodreads:r.stage1.goodreads,beta_commitment:r.stage1.betaCommitment,hours_per_week:r.stage1.hoursPerWeek,portal_use:r.stage1.portalUse,recent_reads:r.stage1.recentReads,interest_statement:r.stage1.interestStatement,prior_beta:r.stage1.priorBeta,feedback_philosophy:r.stage1.feedbackPhilosophy,track_record:r.stage1.trackRecord,communication:r.stage1.communication,devices:r.stage1.devices,access_needs:r.stage1.accessNeeds,demographics:r.stage1.demographics,stage1_raw_score:r.stage1.rawScore,stage1_passed:r.stage1.passed,stage1_auto_fail:r.stage1.autoFail,q1:r.stage2.q1,q2:r.stage2.q2,clarity_feedback:r.stage2.clarity_feedback,pacing_analysis:r.stage2.pacing_feedback,taste_alignment:r.stage2.taste_response,stage2_raw_score:r.stage2.rawScore,stage2_passed:r.stage2.passed,worse_passage:r.stage3.worse_passage,passage_a_analysis:r.stage3.passage_a_analysis,passage_b_analysis:r.stage3.passage_b_analysis,priority_fix:r.stage3.priority_fix,stage3_raw_score:r.stage3.rawScore,stage3_passed:r.stage3.passed,overall_assessment:r.stage4.overall_assessment,chapter_summary:r.stage4.chapter_summary,stage4_raw_score:r.stage4.rawScore,stage4_passed:r.stage4.passed,composite_score:r.compositeScore},{error:K}=await tr.from("beta_applications").insert([q]);K?(console.error("Error saving beta application:",K),alert("There was an error saving your application. Please try again.")):console.log("Beta application saved successfully!")},_=()=>{i(C=>C+1)};return y.jsxs("div",{className:"beta-app-container",children:[y.jsxs("div",{className:"beta-app-header",children:[y.jsx("h1",{children:"Zangar/Spandam Beta Reader Program"}),y.jsx("p",{children:"Join our exclusive beta reading community for epic sci-fi/fantasy"})]}),h(),e===1&&y.jsx("div",{id:"stage1",className:"stage-content",children:y.jsxs("form",{onSubmit:m,children:[y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Contact Information"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"fullName",children:"Full Name *"}),y.jsx("input",{type:"text",id:"fullName",name:"fullName",className:"form-control",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",children:"Email Address *"}),y.jsx("input",{type:"email",id:"email",name:"email",className:"form-control",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"timeZone",children:"Time Zone *"}),y.jsxs("select",{id:"timeZone",name:"timeZone",className:"form-control",required:!0,children:[y.jsx("option",{value:"",children:"Select your time zone"}),y.jsx("option",{value:"America/New_York",children:"Eastern Time (UTC-5/-4)"}),y.jsx("option",{value:"America/Chicago",children:"Central Time (UTC-6/-5)"}),y.jsx("option",{value:"America/Denver",children:"Mountain Time (UTC-7/-6)"}),y.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (UTC-8/-7)"}),y.jsx("option",{value:"Europe/London",children:"GMT/BST (UTC+0/+1)"}),y.jsx("option",{value:"Europe/Paris",children:"CET/CEST (UTC+1/+2)"}),y.jsx("option",{value:"Asia/Tokyo",children:"JST (UTC+9)"}),y.jsx("option",{value:"Australia/Sydney",children:"AEST/AEDT (UTC+10/+11)"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"country",children:"Country"}),y.jsx("input",{type:"text",id:"country",name:"country",className:"form-control"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"goodreads",children:"Goodreads Profile (optional)"}),y.jsx("input",{type:"text",id:"goodreads",name:"goodreads",className:"form-control",placeholder:"https://goodreads.com/user/..."})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Commitment & Availability (Max 20 pts)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"betaCommitment",children:"Beta Window Commitment (6-8 weeks) *"}),y.jsxs("select",{id:"betaCommitment",name:"betaCommitment",className:"form-control",required:!0,children:[y.jsx("option",{value:"",children:"Select your commitment level"}),y.jsx("option",{value:"weekly_deadlines",children:"I can commit to weekly deadlines (10 pts)"}),y.jsx("option",{value:"commit_with_extensions",children:"I can commit but may need 1+ extensions (6 pts)"}),y.jsx("option",{value:"prefer_flexible",children:"I prefer flexible deadlines (3 pts)"}),y.jsx("option",{value:"no_commitment",children:"I cannot commit to deadlines (0 pts)"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"hoursPerWeek",children:"Time Budget per Week *"}),y.jsxs("select",{id:"hoursPerWeek",name:"hoursPerWeek",className:"form-control",required:!0,children:[y.jsx("option",{value:"",children:"Select your time availability"}),y.jsx("option",{value:"5_plus",children:"5+ hours per week (5 pts)"}),y.jsx("option",{value:"3_4",children:"3-4 hours per week (3 pts)"}),y.jsx("option",{value:"under_3",children:"Less than 3 hours (0 pts)"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"portalUse",children:"Website Portal Usage *"}),y.jsxs("select",{id:"portalUse",name:"portalUse",className:"form-control",required:!0,children:[y.jsx("option",{value:"",children:"Select your comfort level"}),y.jsx("option",{value:"yes_comfortable",children:"Yes, I'm comfortable using web tools (5 pts)"}),y.jsx("option",{value:"yes_unsure",children:"Yes, but I'm unsure about tech (2 pts)"}),y.jsx("option",{value:"no",children:"No, I prefer other methods (0 pts)"})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Genre/Series Alignment (Max 20 pts)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"recentReads",children:"Recent Relevant Reads"}),y.jsx("textarea",{id:"recentReads",name:"recentReads",className:"form-control",placeholder:"List 3-5 books you've read in the last 12 months that relate to epic sci-fi/fantasy, Persian/Zoroastrian themes, or big-idea worldbuilding..."})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"interestStatement",children:"Why This Series? (150-250 words) *"}),y.jsx("textarea",{id:"interestStatement",name:"interestStatement",className:"form-control",placeholder:"What specifically interests you about the Zangar/Spandam series? Mention themes like empire vs. kinship, oath/fate dynamics, cliffside megastructures, etc.",required:!0}),y.jsx("div",{className:"word-count",id:"interestWordCount",children:"0/250 words"})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Feedback Experience & Philosophy (Max 20 pts)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"priorBeta",children:"Prior Beta/Critique Experience"}),y.jsx("textarea",{id:"priorBeta",name:"priorBeta",className:"form-control",placeholder:"Describe your experience with beta reading, manuscript critiques, or writing groups. Include specific examples and outcomes..."})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"feedbackPhilosophy",children:"Feedback Philosophy *"}),y.jsx("textarea",{id:"feedbackPhilosophy",name:"feedbackPhilosophy",className:"form-control",placeholder:"How do you approach giving feedback? How do you balance honesty with kindness? Describe your method for providing actionable, specific suggestions...",required:!0})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Reliability Signals (Max 20 pts)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"trackRecord",children:"Deadline Track Record"}),y.jsx("textarea",{id:"trackRecord",name:"trackRecord",className:"form-control",placeholder:"Provide examples of meeting deadlines in work, volunteer, or creative contexts. Include any verifiable references or public profiles..."})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"communication",children:"Communication Style *"}),y.jsx("textarea",{id:"communication",name:"communication",className:"form-control",placeholder:"How do you handle check-ins and communication? What would you do if you encountered a blocker or needed to request an extension?",required:!0})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Diversity & Coverage (Max 20 pts)"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Reading Devices/Platforms *"}),y.jsxs("div",{className:"checkbox-group",children:[y.jsxs("div",{className:"checkbox-item",children:[y.jsx("input",{type:"checkbox",id:"desktop",name:"devices",value:"desktop"}),y.jsx("label",{htmlFor:"desktop",children:"Desktop/Laptop"})]}),y.jsxs("div",{className:"checkbox-item",children:[y.jsx("input",{type:"checkbox",id:"mobile",name:"devices",value:"mobile"}),y.jsx("label",{htmlFor:"mobile",children:"Mobile/Tablet"})]}),y.jsxs("div",{className:"checkbox-item",children:[y.jsx("input",{type:"checkbox",id:"ereader",name:"devices",value:"ereader"}),y.jsx("label",{htmlFor:"ereader",children:"E-reader (Kindle, etc.)"})]})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"accessNeeds",children:"Access Needs & Unique Perspectives"}),y.jsx("textarea",{id:"accessNeeds",name:"accessNeeds",className:"form-control",placeholder:"Do you have any access needs, cultural backgrounds (especially Persian/Middle Eastern), military experience, or other perspectives that would add value to our beta program?"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"demographics",children:"Additional Diversity Information"}),y.jsx("textarea",{id:"demographics",name:"demographics",className:"form-control",placeholder:"Any other demographic or experience diversity you'd like to share that would improve our beta reader representation?"})]})]}),y.jsxs("div",{className:"navigation",children:[y.jsx("div",{}),y.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Application"})]})]})}),e===6&&y.jsx("div",{id:"stage2",className:"stage-content",children:y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Stage 2: Reading Comprehension & Taste Fit"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Instructions:"})," Read the excerpt below and answer the questions. This tests your ability to parse complex worldbuilding and provide specific feedback."]}),y.jsxs("div",{className:"excerpt-container",children:[y.jsx("h4",{children:"Sample Excerpt (800 words)"}),y.jsx("p",{className:"excerpt-text",children:"The Vənāsō winds carried more than salt and storm-promise tonight. Hooran felt the weight of unspoken oaths pressing against her temples as she stood upon the Cliffside Sanctum, watching the fires of Spandam flicker like dying stars across the chasm. Each flame represented a choice—empire or kinship, the Saoshyant's path or the old ways of her mothers."}),y.jsx("p",{className:"excerpt-text",children:'"The Zangar expect answers by dawn," Cyrus said, his voice cutting through the wind-song. His ceremonial armor caught moonlight like captured ice, each plate inscribed with binding-runes that pulsed faintly blue. "The Great Assembly grows restless."'}),y.jsx("p",{className:"excerpt-text",children:"Hooran's fingers traced the oath-scar on her palm—the mark that bound her to choices not yet made. Below, the megastructure of Spandam stretched into darkness, its bio-luminescent veins carrying information like blood through stone arteries. Somewhere in those depths, her brother Darius worked the Deep Forges, unaware that his sister's decision would reshape not just their family's fate, but the balance between the Seven Domains."}),y.jsx("p",{className:"excerpt-text",children:`"The winds know," she whispered, tasting copper and ozone. "They've always known."`})]}),y.jsxs("form",{onSubmit:b,children:[y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Question 1:"})," What is the primary source of tension in this scene?"]}),y.jsxs("select",{className:"form-control",name:"q1",required:!0,children:[y.jsx("option",{value:"",children:"Choose the best answer"}),y.jsx("option",{value:"a",children:"Weather conditions threatening the characters"}),y.jsx("option",{value:"b",children:"Hooran must choose between competing loyalties by dawn"}),y.jsx("option",{value:"c",children:"Cyrus is pressuring Hooran to attack Spandam"}),y.jsx("option",{value:"d",children:"The bio-luminescent technology is failing"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Question 2:"}),' What role do the "Vənāsō winds" serve in this passage?']}),y.jsx("textarea",{className:"form-control",name:"q2",placeholder:"Explain in 2-3 sentences...",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Feedback Task:"})," Identify one clarity issue and suggest a specific improvement"]}),y.jsx("textarea",{className:"form-control",name:"clarity_feedback",placeholder:"Point to specific lines and explain what's unclear, then suggest how to fix it...",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Pacing Analysis:"})," How does the pacing work in this excerpt?"]}),y.jsx("textarea",{className:"form-control",name:"pacing_feedback",placeholder:"Analyze the rhythm and flow, citing specific examples...",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Taste Alignment (100 words):"})," What about this excerpt most engages or loses you?"]}),y.jsx("textarea",{id:"taste_response",className:"form-control",name:"taste_response",placeholder:"Be specific about what works or doesn't work for you as a reader...",required:!0}),y.jsx("div",{className:"word-count",id:"tasteWordCount",children:"0/100 words"})]}),y.jsxs("div",{className:"navigation",children:[y.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Application"}),y.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Stage 2"})]})]})]})}),e===3&&y.jsx("div",{id:"stage3",className:"stage-content",children:y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Stage 3: Calibration Test"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Instructions:"})," Compare these two passages and rank which needs more revision. Explain your reasoning."]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"25px",margin:"25px 0"},children:[y.jsxs("div",{className:"excerpt-container",style:{background:"linear-gradient(145deg, #f0f8f0 0%, #e8f4e8 100%)",borderColor:"#90ee90"},children:[y.jsx("h4",{style:{color:"#228b22"},children:"Passage A"}),y.jsx("p",{className:"excerpt-text",children:"The battle raged across the crystalline plains. Warriors fought with determination. Magic crackled through the air as spells were cast by the mages. It was a significant moment in the war. Many would die. The outcome would affect everyone. The protagonist felt conflicted about their role in the violence."})]}),y.jsxs("div",{className:"excerpt-container",style:{background:"linear-gradient(145deg, #fff8dc 0%, #f5f5dc 100%)",borderColor:"#daa520"},children:[y.jsx("h4",{style:{color:"#b8860b"},children:"Passage B"}),y.jsx("p",{className:"excerpt-text",children:"Kara's blade sang against Varek's shield, the impact reverberating through her bones. Around them, the Shattered Fields erupted in cascades of amber light—each spell-strike from the War-Mages above sending hairline fractures racing through the crystalline ground. She could taste copper and ozone, hear the wet snap of breaking bone somewhere to her left. This was the moment Sehran had warned her about: when ideology met steel, and someone had to choose what they were willing to break."})]})]}),y.jsxs("form",{onSubmit:x,children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:y.jsx("strong",{children:"Which passage needs more revision?"})}),y.jsxs("select",{className:"form-control",name:"worse_passage",required:!0,children:[y.jsx("option",{value:"",children:"Choose one"}),y.jsx("option",{value:"a",children:"Passage A"}),y.jsx("option",{value:"b",children:"Passage B"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Analysis of Passage A:"})," Identify strengths and weaknesses"]}),y.jsx("textarea",{className:"form-control",name:"passage_a_analysis",placeholder:"What works and what doesn't? Be specific...",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Analysis of Passage B:"})," Identify strengths and weaknesses"]}),y.jsx("textarea",{className:"form-control",name:"passage_b_analysis",placeholder:"What works and what doesn't? Be specific...",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx("strong",{children:"Top Priority Fix:"})," What's the most important issue to address?"]}),y.jsx("textarea",{className:"form-control",name:"priority_fix",placeholder:"Choose the highest-impact problem and suggest a concrete solution...",required:!0})]}),y.jsxs("div",{className:"navigation",children:[y.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Stage 2"}),y.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Stage 3"})]})]})]})}),e===4&&y.jsx("div",{id:"stage4",className:"stage-content",children:y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Stage 4: Timed Trial Task"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Deadline:"})," You have 48 hours from now to complete this task."]}),y.jsxs("div",{id:"timer",style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a52)",color:"white",padding:"20px",borderRadius:"15px",textAlign:"center",margin:"20px 0",fontSize:"1.5em",fontWeight:"bold"},children:["Time Remaining: ",y.jsx("span",{id:"countdown",children:v(o)})]}),y.jsxs("div",{className:"excerpt-container",children:[y.jsx("h4",{children:"Chapter Excerpt (2,500 words - Sample)"}),y.jsx("p",{children:y.jsx("em",{children:"Read the full chapter and provide detailed feedback using the form below..."})}),y.jsx("div",{style:{height:"350px",overflowY:"auto",background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",padding:"20px",border:"1px solid #d4c5a9",fontStyle:"italic",lineHeight:"1.8",color:"#3c2415"},children:"[Full chapter content would be provided here - this is a placeholder showing the format. The actual implementation would include the complete text with line numbers for reference. Each paragraph would be numbered for easy reference in feedback.]"})]}),y.jsxs("form",{onSubmit:w,children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:y.jsx("strong",{children:"Overall Assessment (200-300 words):"})}),y.jsx("textarea",{id:"overall_assessment",className:"form-control",name:"overall_assessment",placeholder:"Provide a comprehensive overview focusing on the top 3 issues that need attention...",required:!0,style:{minHeight:"150px"}}),y.jsx("div",{className:"word-count",id:"assessmentWordCount",children:"0/300 words"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:y.jsx("strong",{children:"Inline Comments (minimum 8):"})}),y.jsx("div",{id:"inline-comments",children:Array.from({length:s}).map((C,T)=>y.jsxs("div",{className:"inline-comment",style:{background:"white",padding:"15px",borderRadius:"8px",marginBottom:"15px",borderLeft:"3px solid #667eea"},children:[y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"15px"},children:[y.jsxs("div",{children:[y.jsx("label",{children:"Line/Section Reference:"}),y.jsx("input",{type:"text",className:"form-control",name:`comment_ref_${T+1}`,placeholder:"e.g., Line 45, Paragraph 3"})]}),y.jsxs("div",{children:[y.jsx("label",{children:"Issue Type:"}),y.jsxs("select",{className:"form-control",name:`comment_type_${T+1}`,children:[y.jsx("option",{value:"",children:"Select type"}),y.jsx("option",{value:"clarity",children:"Clarity"}),y.jsx("option",{value:"pacing",children:"Pacing"}),y.jsx("option",{value:"continuity",children:"Continuity"}),y.jsx("option",{value:"voice",children:"Voice"}),y.jsx("option",{value:"logic",children:"Logic"}),y.jsx("option",{value:"worldbuilding",children:"Worldbuilding"}),y.jsx("option",{value:"stakes",children:"Stakes/Tension"})]})]})]}),y.jsxs("div",{style:{marginTop:"10px"},children:[y.jsx("label",{children:"Comment & Suggestion:"}),y.jsx("textarea",{className:"form-control",name:`comment_text_${T+1}`,placeholder:"Describe the issue and provide a specific suggestion for improvement..."})]}),T>0&&y.jsx("button",{type:"button",onClick:()=>i(O=>O-1),className:"btn btn-secondary",style:{marginTop:"10px",fontSize:"0.8em",padding:"8px 15px"},children:"Remove Comment"})]},T))}),y.jsx("button",{type:"button",onClick:_,className:"btn btn-secondary",style:{marginTop:"15px"},children:"Add Another Comment"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:y.jsx("strong",{children:"Chapter Summary & Recommendations:"})}),y.jsx("textarea",{className:"form-control",name:"chapter_summary",placeholder:"Summarize your overall thoughts and provide 3 key recommendations for improvement...",required:!0,style:{minHeight:"120px"}})]}),y.jsxs("div",{className:"navigation",children:[y.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Stage 3"}),y.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Final Stage"})]})]})]})}),e===5&&y.jsx("div",{id:"admin",className:"stage-content",children:y.jsxs("div",{className:"admin-panel",children:[y.jsx("h3",{className:"section-title",children:"Admin Panel - Beta Reader Applications"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[y.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[y.jsx("h4",{children:"Total Applications"}),y.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#8b4513"},children:"127"})]}),y.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[y.jsx("h4",{children:"Passed Stage 1"}),y.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#228b22"},children:"89"})]}),y.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[y.jsx("h4",{children:"Final Selections"}),y.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#8b4513"},children:"37"})]}),y.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[y.jsx("h4",{children:"Waitlist"}),y.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#b8860b"},children:"15"})]})]}),y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Report generated!"),children:"Generate Final Report"}),y.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Data exported!"),children:"Export Data"}),y.jsx("button",{className:"btn btn-secondary",onClick:()=>{window.confirm("Send selection emails to all applicants? This cannot be undone.")&&alert("Emails sent!")},children:"Send Selection Emails"})]}),y.jsxs("div",{className:"applicant-list",id:"applicantList",children:[y.jsxs("div",{className:"applicant-card",children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Sarah Chen"}),y.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"sarah.chen @email.com | GMT+8"})]}),y.jsx("span",{className:"status-badge status-passed",children:"Selected"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 1:"})," 87/100"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 2:"})," 52/60"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 3:"})," 34/40"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 4:"})," 55/60"]})]}),y.jsxs("div",{style:{background:"rgba(139, 69, 19, 0.1)",padding:"10px",borderLeft:"3px solid #8b4513"},children:[y.jsx("strong",{children:"Composite Score: 92.1"})," | Strengths: Genre expertise, reliable communication, mobile testing"]})]}),y.jsxs("div",{className:"applicant-card",children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Marcus Rodriguez"}),y.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"m.rodriguez @email.com | EST"})]}),y.jsx("span",{className:"status-badge status-pending",children:"Waitlist"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 1:"})," 79/100"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 2:"})," 48/60"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 3:"})," 31/40"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 4:"})," 48/60"]})]}),y.jsxs("div",{style:{background:"rgba(218, 165, 32, 0.1)",padding:"10px",borderLeft:"3px solid #daa520"},children:[y.jsx("strong",{children:"Composite Score: 83.7"})," | Strengths: Military background, Persian cultural knowledge"]})]}),y.jsxs("div",{className:"applicant-card",children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Jennifer Walsh"}),y.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"jen.walsh @email.com | GMT"})]}),y.jsx("span",{className:"status-badge status-failed",children:"Not Selected"})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 1:"})," 71/100"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 2:"})," 33/60"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 3:"})," —"]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Stage 4:"})," —"]})]}),y.jsxs("div",{style:{background:"rgba(220, 20, 60, 0.1)",padding:"10px",borderLeft:"3px solid #dc143c"},children:[y.jsx("strong",{children:"Composite Score: 45.2"})," | Issues: Failed Stage 2 comprehension, generic feedback"]})]})]})]})}),"            ",e===6&&y.jsxs("div",{className:"score-display",children:["                    ",y.jsx("h2",{style:{marginBottom:"20px"},children:"Application Complete!"}),"                    ",y.jsxs("div",{className:"score-breakdown",children:["                        ",y.jsxs("div",{className:"score-item",children:["                            ",y.jsx("h4",{children:"Stage 1"}),"                            ",y.jsxs("p",{children:[((j=r.stage1)==null?void 0:j.rawScore)||0,"/100"]}),"                        "]}),"                        ",y.jsxs("div",{className:"score-item",children:["                            ",y.jsx("h4",{children:"Stage 2"}),"                            ",y.jsxs("p",{children:[((k=r.stage2)==null?void 0:k.rawScore)||0,"/60"]}),"                        "]}),"                        ",y.jsxs("div",{className:"score-item",children:["                            ",y.jsx("h4",{children:"Stage 3"}),"                            ",y.jsxs("p",{children:[((S=r.stage3)==null?void 0:S.rawScore)||0,"/40"]}),"                        "]}),"                        ",y.jsxs("div",{className:"score-item",children:["                            ",y.jsx("h4",{children:"Stage 4"}),"                            ",y.jsxs("p",{children:[((E=r.stage4)==null?void 0:E.rawScore)||0,"/60"]}),"                        "]}),"                    "]}),"                    ",y.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.3)"},children:["                        ",y.jsxs("h3",{children:["Final Composite Score: ",r.compositeScore||0,"/100"]}),"                        ",y.jsx("p",{style:{marginTop:"15px"},children:"Thank you for your application! We\\'ll be in touch within 1-2 weeks with our decision."}),"                    "]}),"                    ","                    ",y.jsxs("div",{className:"submitted-data",style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.3)"},children:["                        ",y.jsx("h3",{children:"Submitted Application Data for Review"}),"                        ","                        ",r.stage1&&y.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",y.jsx("h4",{children:"Stage 1: Application Form"}),"                                ",Object.entries(r.stage1).map(([C,T])=>y.jsxs("p",{children:[y.jsxs("strong",{children:[C,":"]})," ",JSON.stringify(T)]},C)),"                            "]}),"                        ","                        ",r.stage2&&y.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",y.jsx("h4",{children:"Stage 2: Comprehension Test"}),"                                ",Object.entries(r.stage2).map(([C,T])=>y.jsxs("p",{children:[y.jsxs("strong",{children:[C,":"]})," ",JSON.stringify(T)]},C)),"                            "]}),"                        ","                        ",r.stage3&&y.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",y.jsx("h4",{children:"Stage 3: Calibration Test"}),"                                ",Object.entries(r.stage3).map(([C,T])=>y.jsxs("p",{children:[y.jsxs("strong",{children:[C,":"]})," ",JSON.stringify(T)]},C)),"                            "]}),"                        ","                        ",r.stage4&&y.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",y.jsx("h4",{children:"Stage 4: Timed Trial Task"}),"                                ",Object.entries(r.stage4).map(([C,T])=>y.jsxs("p",{children:[y.jsxs("strong",{children:[C,":"]})," ",JSON.stringify(T)]},C)),"                            "]}),"                    "]}),"                "]})]})};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FH=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V$e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$e=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>g.createElement("svg",{ref:l,...V$e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:FH("lucide",s),...a},[...o.map(([c,u])=>g.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=(e,t)=>{const r=g.forwardRef(({className:n,...s},i)=>g.createElement(H$e,{ref:i,iconNode:t,className:FH(`lucide-${W$e(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=vr("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=vr("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=vr("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$e=vr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$e=vr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$e=vr("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=vr("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=vr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=vr("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$e=vr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$e=vr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$e=vr("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$e=vr("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8e=vr("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8e=vr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=vr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8e=vr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=vr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8e=vr("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=vr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),s8e=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[s,i]=g.useState(""),[o,a]=g.useState("all"),[l,c]=g.useState("all"),[u,h]=g.useState([0,50]),[f,p]=g.useState("grid"),[v,m]=g.useState("newest"),[b,x]=g.useState(!1);g.useEffect(()=>{(async()=>{try{const S=await fetch("/api/products");if(!S.ok)throw new Error(`HTTP error! status: ${S.status}`);const E=await S.json();t(E.products)}catch(S){console.error("Error fetching products:",S)}})()},[]),g.useEffect(()=>{let k=e.filter(S=>{const E=S.name.toLowerCase().includes(s.toLowerCase())||S.description&&S.description.toLowerCase().includes(s.toLowerCase()),C=o==="all"||o==="bundles"&&S.product_type==="bundle"||o==="subscriptions"&&(S.product_type==="chapter_pass"||S.product_type==="arc_pass")||o==="single"&&S.product_type==="single_issue",T=l==="all",O=S.prices&&S.prices.length>0?S.prices[0].unit_amount/100:0,P=O>=u[0]&&O<=u[1];return E&&C&&T&&P});k.sort((S,E)=>{switch(v){case"newest":return new Date(E.created_at).getTime()-new Date(S.created_at).getTime();case"oldest":return new Date(S.created_at).getTime()-new Date(E.created_at).getTime();case"price-low":const C=S.prices&&S.prices.length>0?S.prices[0].unit_amount:0,T=E.prices&&E.prices.length>0?E.prices[0].unit_amount:0;return C-T;case"price-high":const O=S.prices&&S.prices.length>0?S.prices[0].unit_amount:0;return(E.prices&&E.prices.length>0?E.prices[0].unit_amount:0)-O;case"title":return S.name.localeCompare(E.name);default:return 0}}),n(k)},[e,s,o,l,u,v]);const w=k=>{console.log("Product purchased:",k)},_=[{id:"all",name:"All Products",count:e.length},{id:"single",name:"Single Issues",count:e.filter(k=>k.product_type==="single_issue").length},{id:"bundles",name:"Bundles",count:e.filter(k=>k.product_type==="bundle").length},{id:"subscriptions",name:"Subscriptions",count:e.filter(k=>k.product_type==="chapter_pass"||k.product_type==="arc_pass").length}],j=[{id:"all",name:"All Formats",count:e.length}];return y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background",children:[y.jsxs("div",{className:"relative overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-secondary/20"}),y.jsxs("div",{className:"relative z-10 container mx-auto px-4 py-16 text-center",children:[y.jsxs("h1",{className:"text-5xl md:text-6xl font-heading text-text-light mb-6",children:[y.jsx("span",{className:"text-secondary",children:"Zoroasterverse"})," Store"]}),y.jsx("p",{className:"text-xl text-text-light/80 max-w-3xl mx-auto leading-relaxed",children:"Discover epic tales of magic, technology, and cosmic adventure. From single volumes to complete collections, your journey awaits."}),y.jsx("div",{className:"mt-8 flex justify-center",children:y.jsxs("div",{className:"flex items-center space-x-4 text-text-light/60",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(zH,{className:"w-5 h-5 text-secondary"}),y.jsx("span",{children:"Premium Content"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Z$e,{className:"w-5 h-5 text-accent"}),y.jsx("span",{children:"Multiple Formats"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(n8e,{className:"w-5 h-5 text-secondary"}),y.jsx("span",{children:"Exclusive Bundles"})]})]})})]})]}),y.jsxs("div",{className:"container mx-auto px-4 pb-16",children:[y.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-border/30",children:[y.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center",children:[y.jsxs("div",{className:"flex-1 relative",children:[y.jsx(iL,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-dark w-5 h-5"}),y.jsx("input",{type:"text",placeholder:"Search for books, series, or authors...",value:s,onChange:k=>i(k.target.value),className:"w-full pl-10 pr-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all"})]}),y.jsxs("div",{className:"flex items-center space-x-2 bg-background/50 rounded-xl p-1 border border-border/30",children:[y.jsx("button",{onClick:()=>p("grid"),className:`p-2 rounded-lg transition-all ${f==="grid"?"bg-secondary text-background":"text-text-light hover:text-secondary"}`,children:y.jsx(Q$e,{className:"w-5 h-5"})}),y.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded-lg transition-all ${f==="list"?"bg-secondary text-background":"text-text-light hover:text-secondary"}`,children:y.jsx(e8e,{className:"w-5 h-5"})})]}),y.jsxs("select",{value:v,onChange:k=>m(k.target.value),className:"px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",children:[y.jsx("option",{value:"newest",children:"Newest First"}),y.jsx("option",{value:"oldest",children:"Oldest First"}),y.jsx("option",{value:"price-low",children:"Price: Low to High"}),y.jsx("option",{value:"price-high",children:"Price: High to Low"}),y.jsx("option",{value:"title",children:"Alphabetical"})]}),y.jsxs("button",{onClick:()=>x(!b),className:"px-4 py-3 bg-primary/20 hover:bg-primary/30 border border-primary/30 rounded-xl text-text-light transition-all flex items-center space-x-2",children:[y.jsx(J$e,{className:"w-5 h-5"}),y.jsx("span",{children:"Filters"}),b?y.jsx(G$e,{className:"w-4 h-4"}):y.jsx(K$e,{className:"w-4 h-4"})]})]}),b&&y.jsx("div",{className:"mt-6 pt-6 border-t border-border/30",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-text-light mb-3",children:"Categories"}),y.jsx("div",{className:"space-y-2",children:_.map(k=>y.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[y.jsx("input",{type:"radio",name:"category",value:k.id,checked:o===k.id,onChange:S=>a(S.target.value),className:"text-secondary focus:ring-secondary"}),y.jsx("span",{className:"text-text-light",children:k.name}),y.jsxs("span",{className:"text-text-dark text-sm",children:["(",k.count,")"]})]},k.id))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-text-light mb-3",children:"Formats"}),y.jsx("div",{className:"space-y-2",children:j.map(k=>y.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[y.jsx("input",{type:"radio",name:"format",value:k.id,checked:l===k.id,onChange:S=>c(S.target.value),className:"text-secondary focus:ring-secondary"}),y.jsx("span",{className:"text-text-light",children:k.name}),y.jsxs("span",{className:"text-text-dark text-sm",children:["(",k.count,")"]})]},k.id))})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-text-light mb-3",children:["Price Range: $",u[0]," - $",u[1]]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("input",{type:"range",min:"0",max:"50",value:u[1],onChange:k=>h([u[0],parseInt(k.target.value)]),className:"w-full h-2 bg-background/50 rounded-lg appearance-none cursor-pointer slider"}),y.jsxs("div",{className:"flex justify-between text-sm text-text-dark",children:[y.jsx("span",{children:"$0"}),y.jsxs("span",{children:["$",u[1]]})]})]})]})]})})]}),y.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[y.jsxs("p",{className:"text-text-light",children:["Showing ",y.jsx("span",{className:"text-secondary font-medium",children:r.length})," of"," ",y.jsx("span",{className:"text-text-light",children:e.length})," products"]}),s&&y.jsx("button",{onClick:()=>i(""),className:"text-text-dark hover:text-text-light transition-colors",children:"Clear search"})]}),r.length>0?y.jsx("div",{className:f==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:r.map(k=>y.jsx("div",{className:f==="list"?"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30":"",children:y.jsx(t6e,{product:k,onPurchase:w,showCheckout:!0})},k.id))}):y.jsxs("div",{className:"text-center py-16",children:[y.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-background-light/30 rounded-full flex items-center justify-center",children:y.jsx(iL,{className:"w-12 h-12 text-text-dark"})}),y.jsx("h3",{className:"text-2xl font-heading text-text-light mb-2",children:"No products found"}),y.jsx("p",{className:"text-text-dark mb-6",children:"Try adjusting your search terms or filters to find what you're looking for."}),y.jsx("button",{onClick:()=>{i(""),a("all"),c("all"),h([0,50])},className:"px-6 py-3 bg-secondary text-background rounded-xl hover:bg-secondary-dark transition-colors",children:"Clear all filters"})]})]})]})};var pg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tu=typeof window>"u"||"Deno"in globalThis;function Mn(){}function i8e(e,t){return typeof e=="function"?e(t):e}function BN(e){return typeof e=="number"&&e>=0&&e!==1/0}function qH(e,t){return Math.max(e+(t||0)-Date.now(),0)}function al(e,t){return typeof e=="function"?e(t):e}function bs(e,t){return typeof e=="function"?e(t):e}function oL(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o){if(n){if(t.queryHash!==tO(o,t.options))return!1}else if(!gm(t.queryKey,o))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function aL(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(mm(t.options.mutationKey)!==mm(i))return!1}else if(!gm(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function tO(e,t){return((t==null?void 0:t.queryKeyHashFn)||mm)(e)}function mm(e){return JSON.stringify(e,(t,r)=>VN(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function gm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>gm(e[r],t[r])):!1}function BH(e,t){if(e===t)return e;const r=lL(e)&&lL(t);if(r||VN(e)&&VN(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),o=i.length,a=r?[]:{},l=new Set(n);let c=0;for(let u=0;u<o;u++){const h=r?u:i[u];(!r&&l.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(a[h]=void 0,c++):(a[h]=BH(e[h],t[h]),a[h]===e[h]&&e[h]!==void 0&&c++)}return s===o&&c===s?e:a}return t}function WN(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function lL(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function VN(e){if(!cL(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!cL(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function cL(e){return Object.prototype.toString.call(e)==="[object Object]"}function o8e(e){return new Promise(t=>{setTimeout(t,e)})}function HN(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?BH(e,t):t}function a8e(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function l8e(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var rO=Symbol();function WH(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===rO?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function c8e(e,t){return typeof e=="function"?e(...t):!!e}var _c,Ka,Ad,mL,u8e=(mL=class extends pg{constructor(){super();Fe(this,_c);Fe(this,Ka);Fe(this,Ad);Ne(this,Ad,t=>{if(!tu&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){U(this,Ka)||this.setEventListener(U(this,Ad))}onUnsubscribe(){var t;this.hasListeners()||((t=U(this,Ka))==null||t.call(this),Ne(this,Ka,void 0))}setEventListener(t){var r;Ne(this,Ad,t),(r=U(this,Ka))==null||r.call(this),Ne(this,Ka,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){U(this,_c)!==t&&(Ne(this,_c,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof U(this,_c)=="boolean"?U(this,_c):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},_c=new WeakMap,Ka=new WeakMap,Ad=new WeakMap,mL),nO=new u8e,Od,Ya,Pd,gL,d8e=(gL=class extends pg{constructor(){super();Fe(this,Od,!0);Fe(this,Ya);Fe(this,Pd);Ne(this,Pd,t=>{if(!tu&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){U(this,Ya)||this.setEventListener(U(this,Pd))}onUnsubscribe(){var t;this.hasListeners()||((t=U(this,Ya))==null||t.call(this),Ne(this,Ya,void 0))}setEventListener(t){var r;Ne(this,Pd,t),(r=U(this,Ya))==null||r.call(this),Ne(this,Ya,t(this.setOnline.bind(this)))}setOnline(t){U(this,Od)!==t&&(Ne(this,Od,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return U(this,Od)}},Od=new WeakMap,Ya=new WeakMap,Pd=new WeakMap,gL),Vb=new d8e;function KN(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function h8e(e){return Math.min(1e3*2**e,3e4)}function VH(e){return(e??"online")==="online"?Vb.isOnline():!0}var HH=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function KH(e){let t=!1,r=0,n;const s=KN(),i=()=>s.status!=="pending",o=m=>{var b;i()||(f(new HH(m)),(b=e.abort)==null||b.call(e))},a=()=>{t=!0},l=()=>{t=!1},c=()=>nO.isFocused()&&(e.networkMode==="always"||Vb.isOnline())&&e.canRun(),u=()=>VH(e.networkMode)&&e.canRun(),h=m=>{i()||(n==null||n(),s.resolve(m))},f=m=>{i()||(n==null||n(),s.reject(m))},p=()=>new Promise(m=>{var b;n=x=>{(i()||c())&&m(x)},(b=e.onPause)==null||b.call(e)}).then(()=>{var m;n=void 0,i()||(m=e.onContinue)==null||m.call(e)}),v=()=>{if(i())return;let m;const b=r===0?e.initialPromise:void 0;try{m=b??e.fn()}catch(x){m=Promise.reject(x)}Promise.resolve(m).then(h).catch(x=>{var S;if(i())return;const w=e.retry??(tu?0:3),_=e.retryDelay??h8e,j=typeof _=="function"?_(r,x):_,k=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,x);if(t||!k){f(x);return}r++,(S=e.onFail)==null||S.call(e,r,x),o8e(j).then(()=>c()?void 0:p()).then(()=>{t?f(x):v()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?v():p().then(v),s)}}var f8e=e=>setTimeout(e,0);function p8e(){let e=[],t=0,r=a=>{a()},n=a=>{a()},s=f8e;const i=a=>{t?e.push(a):s(()=>{r(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var Kr=p8e(),jc,yL,YH=(yL=class{constructor(){Fe(this,jc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),BN(this.gcTime)&&Ne(this,jc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(tu?1/0:5*60*1e3))}clearGcTimeout(){U(this,jc)&&(clearTimeout(U(this,jc)),Ne(this,jc,void 0))}},jc=new WeakMap,yL),Rd,Dd,vs,kc,Dr,vm,Sc,Xs,Eo,vL,m8e=(vL=class extends YH{constructor(t){super();Fe(this,Xs);Fe(this,Rd);Fe(this,Dd);Fe(this,vs);Fe(this,kc);Fe(this,Dr);Fe(this,vm);Fe(this,Sc);Ne(this,Sc,!1),Ne(this,vm,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ne(this,kc,t.client),Ne(this,vs,U(this,kc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ne(this,Rd,g8e(this.options)),this.state=t.state??U(this,Rd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=U(this,Dr))==null?void 0:t.promise}setOptions(t){this.options={...U(this,vm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,vs).remove(this)}setData(t,r){const n=HN(this.state.data,t,this.options);return tt(this,Xs,Eo).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){tt(this,Xs,Eo).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=U(this,Dr))==null?void 0:n.promise;return(s=U(this,Dr))==null||s.cancel(t),r?r.then(Mn).catch(Mn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,Rd))}isActive(){return this.observers.some(t=>bs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===rO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>al(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!qH(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=U(this,Dr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=U(this,Dr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),U(this,vs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(U(this,Dr)&&(U(this,Sc)?U(this,Dr).cancel({revert:!0}):U(this,Dr).cancelRetry()),this.scheduleGc()),U(this,vs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||tt(this,Xs,Eo).call(this,{type:"invalidate"})}async fetch(t,r){var l,c,u,h,f,p,v,m,b,x,w,_;if(this.state.fetchStatus!=="idle"&&((l=U(this,Dr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(U(this,Dr))return U(this,Dr).continueRetry(),U(this,Dr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(k=>k.options.queryFn);j&&this.setOptions(j.options)}const n=new AbortController,s=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(Ne(this,Sc,!0),n.signal)})},i=()=>{const j=WH(this.options,r),S=(()=>{const E={client:U(this,kc),queryKey:this.queryKey,meta:this.meta};return s(E),E})();return Ne(this,Sc,!1),this.options.persister?this.options.persister(j,S,this):j(S)},a=(()=>{const j={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:U(this,kc),state:this.state,fetchFn:i};return s(j),j})();(c=this.options.behavior)==null||c.onFetch(a,this),Ne(this,Dd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&tt(this,Xs,Eo).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),Ne(this,Dr,KH({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onFail:(j,k)=>{tt(this,Xs,Eo).call(this,{type:"failed",failureCount:j,error:k})},onPause:()=>{tt(this,Xs,Eo).call(this,{type:"pause"})},onContinue:()=>{tt(this,Xs,Eo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const j=await U(this,Dr).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(p=(f=U(this,vs).config).onSuccess)==null||p.call(f,j,this),(m=(v=U(this,vs).config).onSettled)==null||m.call(v,j,this.state.error,this),j}catch(j){if(j instanceof HH){if(j.silent)return U(this,Dr).promise;if(j.revert){if(this.setState({...U(this,Dd),fetchStatus:"idle"}),this.state.data===void 0)throw j;return this.state.data}}throw tt(this,Xs,Eo).call(this,{type:"error",error:j}),(x=(b=U(this,vs).config).onError)==null||x.call(b,j,this),(_=(w=U(this,vs).config).onSettled)==null||_.call(w,this.state.data,j,this),j}finally{this.scheduleGc()}}},Rd=new WeakMap,Dd=new WeakMap,vs=new WeakMap,kc=new WeakMap,Dr=new WeakMap,vm=new WeakMap,Sc=new WeakMap,Xs=new WeakSet,Eo=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...GH(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ne(this,Dd,t.manual?s:void 0),s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Kr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),U(this,vs).notify({query:this,type:"updated",action:t})})},vL);function GH(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:VH(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function g8e(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var zi,bL,y8e=(bL=class extends pg{constructor(t={}){super();Fe(this,zi);this.config=t,Ne(this,zi,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??tO(s,r);let o=this.get(i);return o||(o=new m8e({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){U(this,zi).has(t.queryHash)||(U(this,zi).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=U(this,zi).get(t.queryHash);r&&(t.destroy(),r===t&&U(this,zi).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Kr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return U(this,zi).get(t)}getAll(){return[...U(this,zi).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>oL(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>oL(t,n)):r}notify(t){Kr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Kr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Kr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},zi=new WeakMap,bL),Ui,yn,Nc,qi,Fa,xL,v8e=(xL=class extends YH{constructor(t){super();Fe(this,qi);Fe(this,Ui);Fe(this,yn);Fe(this,Nc);this.mutationId=t.mutationId,Ne(this,yn,t.mutationCache),Ne(this,Ui,[]),this.state=t.state||b8e(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){U(this,Ui).includes(t)||(U(this,Ui).push(t),this.clearGcTimeout(),U(this,yn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ne(this,Ui,U(this,Ui).filter(r=>r!==t)),this.scheduleGc(),U(this,yn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){U(this,Ui).length||(this.state.status==="pending"?this.scheduleGc():U(this,yn).remove(this))}continue(){var t;return((t=U(this,Nc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,a,l,c,u,h,f,p,v,m,b,x,w,_,j,k,S,E,C;const r=()=>{tt(this,qi,Fa).call(this,{type:"continue"})};Ne(this,Nc,KH({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(T,O)=>{tt(this,qi,Fa).call(this,{type:"failed",failureCount:T,error:O})},onPause:()=>{tt(this,qi,Fa).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,yn).canRun(this)}));const n=this.state.status==="pending",s=!U(this,Nc).canStart();try{if(n)r();else{tt(this,qi,Fa).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(i=U(this,yn).config).onMutate)==null?void 0:o.call(i,t,this));const O=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));O!==this.state.context&&tt(this,qi,Fa).call(this,{type:"pending",context:O,variables:t,isPaused:s})}const T=await U(this,Nc).start();return await((u=(c=U(this,yn).config).onSuccess)==null?void 0:u.call(c,T,t,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,T,t,this.state.context)),await((v=(p=U(this,yn).config).onSettled)==null?void 0:v.call(p,T,null,this.state.variables,this.state.context,this)),await((b=(m=this.options).onSettled)==null?void 0:b.call(m,T,null,t,this.state.context)),tt(this,qi,Fa).call(this,{type:"success",data:T}),T}catch(T){try{throw await((w=(x=U(this,yn).config).onError)==null?void 0:w.call(x,T,t,this.state.context,this)),await((j=(_=this.options).onError)==null?void 0:j.call(_,T,t,this.state.context)),await((S=(k=U(this,yn).config).onSettled)==null?void 0:S.call(k,void 0,T,this.state.variables,this.state.context,this)),await((C=(E=this.options).onSettled)==null?void 0:C.call(E,void 0,T,t,this.state.context)),T}finally{tt(this,qi,Fa).call(this,{type:"error",error:T})}}finally{U(this,yn).runNext(this)}}},Ui=new WeakMap,yn=new WeakMap,Nc=new WeakMap,qi=new WeakSet,Fa=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Kr.batch(()=>{U(this,Ui).forEach(n=>{n.onMutationUpdate(t)}),U(this,yn).notify({mutation:this,type:"updated",action:t})})},xL);function b8e(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ro,ei,bm,wL,x8e=(wL=class extends pg{constructor(t={}){super();Fe(this,Ro);Fe(this,ei);Fe(this,bm);this.config=t,Ne(this,Ro,new Set),Ne(this,ei,new Map),Ne(this,bm,0)}build(t,r,n){const s=new v8e({mutationCache:this,mutationId:++Ng(this,bm)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){U(this,Ro).add(t);const r=Dy(t);if(typeof r=="string"){const n=U(this,ei).get(r);n?n.push(t):U(this,ei).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(U(this,Ro).delete(t)){const r=Dy(t);if(typeof r=="string"){const n=U(this,ei).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&U(this,ei).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Dy(t);if(typeof r=="string"){const n=U(this,ei).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=Dy(t);if(typeof r=="string"){const s=(n=U(this,ei).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Kr.batch(()=>{U(this,Ro).forEach(t=>{this.notify({type:"removed",mutation:t})}),U(this,Ro).clear(),U(this,ei).clear()})}getAll(){return Array.from(U(this,Ro))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>aL(r,n))}findAll(t={}){return this.getAll().filter(r=>aL(t,r))}notify(t){Kr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Kr.batch(()=>Promise.all(t.map(r=>r.continue().catch(Mn))))}},Ro=new WeakMap,ei=new WeakMap,bm=new WeakMap,wL);function Dy(e){var t;return(t=e.options.scope)==null?void 0:t.id}function uL(e){return{onFetch:(t,r)=>{var u,h,f,p,v;const n=t.options,s=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const b=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},x=WH(t.options,t.fetchOptions),w=async(_,j,k)=>{if(m)return Promise.reject();if(j==null&&_.pages.length)return Promise.resolve(_);const E=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};return b(P),P})(),C=await x(E),{maxPages:T}=t.options,O=k?l8e:a8e;return{pages:O(_.pages,C,T),pageParams:O(_.pageParams,j,T)}};if(s&&i.length){const _=s==="backward",j=_?w8e:dL,k={pages:i,pageParams:o},S=j(n,k);a=await w(k,S,_)}else{const _=e??i.length;do{const j=l===0?o[0]??n.initialPageParam:dL(n,a);if(l>0&&j==null)break;a=await w(a,j),l++}while(l<_)}return a};t.options.persister?t.fetchFn=()=>{var m,b;return(b=(m=t.options).persister)==null?void 0:b.call(m,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function dL(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function w8e(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Ht,Ga,Za,Md,Id,Ja,Ld,Fd,_L,_8e=(_L=class{constructor(e={}){Fe(this,Ht);Fe(this,Ga);Fe(this,Za);Fe(this,Md);Fe(this,Id);Fe(this,Ja);Fe(this,Ld);Fe(this,Fd);Ne(this,Ht,e.queryCache||new y8e),Ne(this,Ga,e.mutationCache||new x8e),Ne(this,Za,e.defaultOptions||{}),Ne(this,Md,new Map),Ne(this,Id,new Map),Ne(this,Ja,0)}mount(){Ng(this,Ja)._++,U(this,Ja)===1&&(Ne(this,Ld,nO.subscribe(async e=>{e&&(await this.resumePausedMutations(),U(this,Ht).onFocus())})),Ne(this,Fd,Vb.subscribe(async e=>{e&&(await this.resumePausedMutations(),U(this,Ht).onOnline())})))}unmount(){var e,t;Ng(this,Ja)._--,U(this,Ja)===0&&((e=U(this,Ld))==null||e.call(this),Ne(this,Ld,void 0),(t=U(this,Fd))==null||t.call(this),Ne(this,Fd,void 0))}isFetching(e){return U(this,Ht).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return U(this,Ga).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=U(this,Ht).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=U(this,Ht).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(al(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return U(this,Ht).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=U(this,Ht).get(n.queryHash),i=s==null?void 0:s.state.data,o=i8e(t,i);if(o!==void 0)return U(this,Ht).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Kr.batch(()=>U(this,Ht).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=U(this,Ht).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=U(this,Ht);Kr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=U(this,Ht);return Kr.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Kr.batch(()=>U(this,Ht).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Mn).catch(Mn)}invalidateQueries(e,t={}){return Kr.batch(()=>(U(this,Ht).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Kr.batch(()=>U(this,Ht).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Mn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Mn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=U(this,Ht).build(this,t);return r.isStaleByTime(al(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Mn).catch(Mn)}fetchInfiniteQuery(e){return e.behavior=uL(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Mn).catch(Mn)}ensureInfiniteQueryData(e){return e.behavior=uL(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Vb.isOnline()?U(this,Ga).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,Ht)}getMutationCache(){return U(this,Ga)}getDefaultOptions(){return U(this,Za)}setDefaultOptions(e){Ne(this,Za,e)}setQueryDefaults(e,t){U(this,Md).set(mm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...U(this,Md).values()],r={};return t.forEach(n=>{gm(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){U(this,Id).set(mm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...U(this,Id).values()],r={};return t.forEach(n=>{gm(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...U(this,Za).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=tO(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===rO&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...U(this,Za).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){U(this,Ht).clear(),U(this,Ga).clear()}},Ht=new WeakMap,Ga=new WeakMap,Za=new WeakMap,Md=new WeakMap,Id=new WeakMap,Ja=new WeakMap,Ld=new WeakMap,Fd=new WeakMap,_L),Pn,rt,xm,vn,Cc,$d,Do,Qa,wm,zd,Ud,Ec,Tc,Xa,qd,ht,Qf,YN,GN,ZN,JN,QN,XN,e2,ZH,jL,j8e=(jL=class extends pg{constructor(t,r){super();Fe(this,ht);Fe(this,Pn);Fe(this,rt);Fe(this,xm);Fe(this,vn);Fe(this,Cc);Fe(this,$d);Fe(this,Do);Fe(this,Qa);Fe(this,wm);Fe(this,zd);Fe(this,Ud);Fe(this,Ec);Fe(this,Tc);Fe(this,Xa);Fe(this,qd,new Set);this.options=r,Ne(this,Pn,t),Ne(this,Qa,null),Ne(this,Do,KN()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(U(this,rt).addObserver(this),hL(U(this,rt),this.options)?tt(this,ht,Qf).call(this):this.updateResult(),tt(this,ht,JN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return t2(U(this,rt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return t2(U(this,rt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,tt(this,ht,QN).call(this),tt(this,ht,XN).call(this),U(this,rt).removeObserver(this)}setOptions(t){const r=this.options,n=U(this,rt);if(this.options=U(this,Pn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof bs(this.options.enabled,U(this,rt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");tt(this,ht,e2).call(this),U(this,rt).setOptions(this.options),r._defaulted&&!WN(this.options,r)&&U(this,Pn).getQueryCache().notify({type:"observerOptionsUpdated",query:U(this,rt),observer:this});const s=this.hasListeners();s&&fL(U(this,rt),n,this.options,r)&&tt(this,ht,Qf).call(this),this.updateResult(),s&&(U(this,rt)!==n||bs(this.options.enabled,U(this,rt))!==bs(r.enabled,U(this,rt))||al(this.options.staleTime,U(this,rt))!==al(r.staleTime,U(this,rt)))&&tt(this,ht,YN).call(this);const i=tt(this,ht,GN).call(this);s&&(U(this,rt)!==n||bs(this.options.enabled,U(this,rt))!==bs(r.enabled,U(this,rt))||i!==U(this,Xa))&&tt(this,ht,ZN).call(this,i)}getOptimisticResult(t){const r=U(this,Pn).getQueryCache().build(U(this,Pn),t),n=this.createResult(r,t);return S8e(this,n)&&(Ne(this,vn,n),Ne(this,$d,this.options),Ne(this,Cc,U(this,rt).state)),n}getCurrentResult(){return U(this,vn)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),s==="promise"&&!this.options.experimental_prefetchInRender&&U(this,Do).status==="pending"&&U(this,Do).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,s))})}trackProp(t){U(this,qd).add(t)}getCurrentQuery(){return U(this,rt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=U(this,Pn).defaultQueryOptions(t),n=U(this,Pn).getQueryCache().build(U(this,Pn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return tt(this,ht,Qf).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),U(this,vn)))}createResult(t,r){var T;const n=U(this,rt),s=this.options,i=U(this,vn),o=U(this,Cc),a=U(this,$d),c=t!==n?t.state:U(this,xm),{state:u}=t;let h={...u},f=!1,p;if(r._optimisticResults){const O=this.hasListeners(),P=!O&&hL(t,r),D=O&&fL(t,n,r,s);(P||D)&&(h={...h,...GH(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:m,status:b}=h;p=h.data;let x=!1;if(r.placeholderData!==void 0&&p===void 0&&b==="pending"){let O;i!=null&&i.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,x=!0):O=typeof r.placeholderData=="function"?r.placeholderData((T=U(this,Ud))==null?void 0:T.state.data,U(this,Ud)):r.placeholderData,O!==void 0&&(b="success",p=HN(i==null?void 0:i.data,O,r),f=!0)}if(r.select&&p!==void 0&&!x)if(i&&p===(o==null?void 0:o.data)&&r.select===U(this,wm))p=U(this,zd);else try{Ne(this,wm,r.select),p=r.select(p),p=HN(i==null?void 0:i.data,p,r),Ne(this,zd,p),Ne(this,Qa,null)}catch(O){Ne(this,Qa,O)}U(this,Qa)&&(v=U(this,Qa),p=U(this,zd),m=Date.now(),b="error");const w=h.fetchStatus==="fetching",_=b==="pending",j=b==="error",k=_&&w,S=p!==void 0,C={status:b,fetchStatus:h.fetchStatus,isPending:_,isSuccess:b==="success",isError:j,isInitialLoading:k,isLoading:k,data:p,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:m,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!_,isLoadingError:j&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&S,isStale:sO(t,r),refetch:this.refetch,promise:U(this,Do),isEnabled:bs(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const O=R=>{C.status==="error"?R.reject(C.error):C.data!==void 0&&R.resolve(C.data)},P=()=>{const R=Ne(this,Do,C.promise=KN());O(R)},D=U(this,Do);switch(D.status){case"pending":t.queryHash===n.queryHash&&O(D);break;case"fulfilled":(C.status==="error"||C.data!==D.value)&&P();break;case"rejected":(C.status!=="error"||C.error!==D.reason)&&P();break}}return C}updateResult(){const t=U(this,vn),r=this.createResult(U(this,rt),this.options);if(Ne(this,Cc,U(this,rt).state),Ne(this,$d,this.options),U(this,Cc).data!==void 0&&Ne(this,Ud,U(this,rt)),WN(r,t))return;Ne(this,vn,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!U(this,qd).size)return!0;const o=new Set(i??U(this,qd));return this.options.throwOnError&&o.add("error"),Object.keys(U(this,vn)).some(a=>{const l=a;return U(this,vn)[l]!==t[l]&&o.has(l)})};tt(this,ht,ZH).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&tt(this,ht,JN).call(this)}},Pn=new WeakMap,rt=new WeakMap,xm=new WeakMap,vn=new WeakMap,Cc=new WeakMap,$d=new WeakMap,Do=new WeakMap,Qa=new WeakMap,wm=new WeakMap,zd=new WeakMap,Ud=new WeakMap,Ec=new WeakMap,Tc=new WeakMap,Xa=new WeakMap,qd=new WeakMap,ht=new WeakSet,Qf=function(t){tt(this,ht,e2).call(this);let r=U(this,rt).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Mn)),r},YN=function(){tt(this,ht,QN).call(this);const t=al(this.options.staleTime,U(this,rt));if(tu||U(this,vn).isStale||!BN(t))return;const n=qH(U(this,vn).dataUpdatedAt,t)+1;Ne(this,Ec,setTimeout(()=>{U(this,vn).isStale||this.updateResult()},n))},GN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(U(this,rt)):this.options.refetchInterval)??!1},ZN=function(t){tt(this,ht,XN).call(this),Ne(this,Xa,t),!(tu||bs(this.options.enabled,U(this,rt))===!1||!BN(U(this,Xa))||U(this,Xa)===0)&&Ne(this,Tc,setInterval(()=>{(this.options.refetchIntervalInBackground||nO.isFocused())&&tt(this,ht,Qf).call(this)},U(this,Xa)))},JN=function(){tt(this,ht,YN).call(this),tt(this,ht,ZN).call(this,tt(this,ht,GN).call(this))},QN=function(){U(this,Ec)&&(clearTimeout(U(this,Ec)),Ne(this,Ec,void 0))},XN=function(){U(this,Tc)&&(clearInterval(U(this,Tc)),Ne(this,Tc,void 0))},e2=function(){const t=U(this,Pn).getQueryCache().build(U(this,Pn),this.options);if(t===U(this,rt))return;const r=U(this,rt);Ne(this,rt,t),Ne(this,xm,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},ZH=function(t){Kr.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(U(this,vn))}),U(this,Pn).getQueryCache().notify({query:U(this,rt),type:"observerResultsUpdated"})})},jL);function k8e(e,t){return bs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function hL(e,t){return k8e(e,t)||e.state.data!==void 0&&t2(e,t,t.refetchOnMount)}function t2(e,t,r){if(bs(t.enabled,e)!==!1&&al(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&sO(e,t)}return!1}function fL(e,t,r,n){return(e!==t||bs(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&sO(e,r)}function sO(e,t){return bs(t.enabled,e)!==!1&&e.isStaleByTime(al(t.staleTime,e))}function S8e(e,t){return!WN(e.getCurrentResult(),t)}var JH=g.createContext(void 0),N8e=e=>{const t=g.useContext(JH);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},C8e=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),y.jsx(JH.Provider,{value:e,children:t})),QH=g.createContext(!1),E8e=()=>g.useContext(QH);QH.Provider;function T8e(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var A8e=g.createContext(T8e()),O8e=()=>g.useContext(A8e),P8e=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},R8e=e=>{g.useEffect(()=>{e.clearReset()},[e])},D8e=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||c8e(r,[e.error,n])),M8e=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},I8e=(e,t)=>e.isLoading&&e.isFetching&&!t,L8e=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,pL=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function F8e(e,t,r){var h,f,p,v,m;const n=E8e(),s=O8e(),i=N8e(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",M8e(o),P8e(o,s),R8e(s);const a=!i.getQueryCache().get(o.queryHash),[l]=g.useState(()=>new t(i,o)),c=l.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(b=>{const x=u?l.subscribe(Kr.batchCalls(b)):Mn;return l.updateResult(),x},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),g.useEffect(()=>{l.setOptions(o)},[o,l]),L8e(o,c))throw pL(o,l,s);if(D8e({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((v=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,o,c),o.experimental_prefetchInRender&&!tu&&I8e(c,n)){const b=a?pL(o,l,s):(m=i.getQueryCache().get(o.queryHash))==null?void 0:m.promise;b==null||b.catch(Mn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function ym(e,t){return F8e(e,j8e)}const $8e=async e=>{const{data:t,error:r}=await tr.from("posts").select("*").eq("slug",e).eq("status","published").single();if(r&&r.code!=="PGRST116")throw new Error(r.message);return t},z8e=()=>{const{slug:e}=o2(),{data:t,isLoading:r,isError:n,error:s}=ym({queryKey:["blogPost",e],queryFn:()=>e?$8e(e):Promise.resolve(null),enabled:!!e});if(r)return y.jsx("div",{className:"text-center py-8 text-gray-300",children:"Loading post..."});if(n)return y.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading post: ",s==null?void 0:s.message]});if(!t)return y.jsx("div",{className:"text-center py-8 text-gray-400",children:"Post not found or not published."});const i=t.content.length>150?t.content.substring(0,150)+"...":t.content;return y.jsx("div",{className:"container mx-auto px-4 py-8 max-w-3xl relative z-20",children:y.jsxs("article",{className:"blog-post relative overflow-hidden transition-transform duration-300 ease-in-out hover:translate-y-[-5px] hover:shadow-lg-custom",children:[y.jsx("div",{className:"absolute top-0 left-0 right-0 h-[3px] bg-gradient-to-r from-[#d4af37] via-[#b8860b] to-[#d4af37]"}),y.jsxs("div",{className:"post-meta flex justify-between items-center mb-8 pb-4 border-b border-gold-300-opacity flex-wrap gap-4",children:[y.jsx("span",{className:"post-date text-[#d4af37] font-semibold text-sm tracking-wider",children:new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),y.jsx("span",{className:"post-category bg-gradient-to-br from-[#d4af37] to-[#b8860b] text-[#1a1a2e] px-4 py-2 rounded-full text-xs font-semibold uppercase tracking-wider",children:"World Building"})]}),y.jsx("h1",{className:"post-title font-cinzel text-4xl text-[#f0f0f0] mb-6 leading-tight text-shadow-md",children:t.title}),y.jsx("div",{className:"post-excerpt text-lg text-[#c0c0c0] mb-8 italic border-l-4 border-[#d4af37] pl-6",dangerouslySetInnerHTML:{__html:i}}),y.jsx("div",{className:"post-content text-lg leading-relaxed text-[#e8e8e8] prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:t.content}}),y.jsxs("div",{className:"post-footer mt-12 pt-8 border-t border-gold-300-opacity flex justify-between items-center flex-wrap gap-4",children:[y.jsxs("div",{className:"post-tags flex gap-2 flex-wrap",children:[y.jsx("span",{className:"tag bg-gold-300-opacity-20 text-[#d4af37] px-3 py-1 rounded-full text-sm border border-gold-300-opacity-30 transition-all duration-300 hover:bg-gold-300-opacity-30 hover:scale-105",children:"#Magic"}),y.jsx("span",{className:"tag bg-gold-300-opacity-20 text-[#d4af37] px-3 py-1 rounded-full text-sm border border-gold-300-opacity-30 transition-all duration-300 hover:bg-gold-300-opacity-30 hover:scale-105",children:"#WorldBuilding"})]}),y.jsxs("div",{className:"social-share flex gap-4",children:[y.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"📱"}),y.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"📘"}),y.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"🔗"})]})]})]})})},U8e=async e=>{const{data:t,error:r}=await tr.from("pages").select("*").eq("slug",e).eq("status","published").single();if(r&&r.code!=="PGRST116")throw new Error(r.message);return t},q8e=()=>{const{slug:e}=o2(),{data:t,isLoading:r,isError:n,error:s}=ym({queryKey:["genericPage",e],queryFn:()=>e?U8e(e):Promise.resolve(null),enabled:!!e});return r?y.jsx("div",{className:"text-center py-8",children:"Loading page..."}):n?y.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading page: ",s==null?void 0:s.message]}):t?y.jsx("div",{className:"container mx-auto px-4 py-8",children:y.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:t.title}),y.jsx("div",{className:"prose lg:prose-lg max-w-none text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:t.content}})]})}):y.jsx("div",{className:"text-center py-8 text-gray-600",children:"Page not found or not published."})},B8e=({userId:e,isSubscribed:t,subscriptionTier:r="free",betaReaderStatus:n,subscriptionEndDate:s,booksRead:i,readingHours:o,currentlyReading:a,achievements:l,username:c,onSignOut:u})=>{const{data:h,isLoading:f,isError:p}=ym({queryKey:["userActivities",e],queryFn:async()=>{const{data:j,error:k}=await tr.from("user_activities").select("*").eq("user_id",e).order("timestamp",{ascending:!1}).limit(5);if(k)throw k;return j},enabled:!!e});if(f)return y.jsx("div",{className:"text-gray-100",children:"Loading activities..."});if(p)return y.jsx("div",{className:"text-red-400",children:"Error loading activities."});const v=[{label:"Books Read",value:i,icon:y.jsx(Td,{size:20,className:"text-indigo-400"})},{label:"Reading Hours",value:`${o}h`,icon:y.jsx(qN,{size:20,className:"text-green-400"})},{label:"Currently Reading",value:a||"None",icon:y.jsx($H,{size:20,className:"text-blue-400"})},{label:"Achievements",value:l,icon:y.jsx(eO,{size:20,className:"text-yellow-400"})}],m=s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,x=(j=>{switch(j){case"premium":return{name:"Premium",color:"bg-blue-500"};case"patron":return{name:"Patron",color:"bg-purple-500"};default:return{name:"Free",color:"bg-gray-500"}}})(r),_=(j=>{switch(j){case"approved":return{text:"Beta Reader",color:"bg-green-500",icon:y.jsx(sL,{size:16})};case"pending":return{text:"Application Pending",color:"bg-yellow-500",icon:y.jsx(qN,{size:16})};case"rejected":return{text:"Application Rejected",color:"bg-red-500",icon:y.jsx(UH,{size:16})};default:return{text:"Not Applied",color:"bg-gray-500",icon:y.jsx(Wb,{size:16})}}})(n);return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Account Dashboard"}),y.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",c||"User"]})]}),y.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:[y.jsx(t8e,{size:16}),"Sign Out"]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:"Subscription Status"}),y.jsxs("div",{className:"flex items-center mt-2",children:[y.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${x.color}`}),y.jsxs("span",{className:"text-white",children:[x.name," Tier"]})]}),t&&s&&y.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Renews on ",m]})]}),y.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:y.jsx(zH,{size:24,className:"text-yellow-400"})})]}),!t&&y.jsx("button",{className:"mt-4 w-full py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium",children:"Upgrade Plan"})]}),y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:"Beta Reader Program"}),y.jsxs("div",{className:"flex items-center mt-2",children:[y.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${_.color}`}),y.jsx("span",{className:"text-white",children:_.text})]}),n==="not_applied"&&y.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Apply to get early access to new content"}),n==="pending"&&y.jsx("p",{className:"text-sm text-yellow-400 mt-1",children:"We'll review your application soon"})]}),y.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:_.icon})]}),n==="approved"?y.jsxs(av,{to:"/beta/portal",className:"mt-4 w-full py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[y.jsx(Td,{size:16}),"Go to Beta Portal"]}):y.jsx(av,{to:n==="not_applied"?"/beta/application":"/beta/status",className:"mt-4 w-full block text-center py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium",children:n==="not_applied"?"Apply Now":"View Application Status"})]})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map((j,k)=>y.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-2xl font-bold text-white",children:j.value}),y.jsx("p",{className:"text-sm text-gray-400 mt-1",children:j.label})]}),y.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:j.icon})]})},k))}),y.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl border border-gray-800 overflow-hidden",children:y.jsxs("div",{className:"p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Recent Activity"}),y.jsx("div",{className:"space-y-4",children:h&&h.length>0?h.map(j=>y.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-800/50 rounded-lg transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[j.cover_image_url?y.jsx("img",{src:j.cover_image_url,alt:j.item_title,className:"w-12 h-12 object-cover rounded-lg"}):y.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${j.status==="completed"?"bg-green-600/20":"bg-indigo-600/20"}`,children:j.status==="completed"?y.jsx(sL,{className:"w-6 h-6 text-green-400"}):y.jsx(Td,{className:"w-6 h-6 text-indigo-400"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-medium text-white",children:j.item_title}),y.jsx("p",{className:"text-sm text-gray-400",children:j.status==="completed"?"Completed":"In Progress"})]})]}),j.status!=="completed"&&y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:y.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:`${j.progress/(j.total_progress||100)*100}%`}})}),y.jsx("button",{className:"text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:"Resume"})]})]},j.id)):y.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent activity"})})]})})]})},W8e=()=>{const[e,t]=g.useState({fullName:"",bio:"",location:"",website:""}),r=s=>{const{name:i,value:o}=s.target;t(a=>({...a,[i]:o}))},n=s=>{s.preventDefault(),console.log("Profile updated:",e)};return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Profile Settings"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your personal information and account settings."})]}),y.jsxs("form",{onSubmit:n,className:"space-y-6",children:[y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 space-y-6",children:[y.jsxs("div",{className:"flex items-center space-x-6",children:[y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:y.jsx(Wb,{className:"w-12 h-12 text-gray-400"})}),y.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-primary rounded-full p-2 shadow-lg transform translate-y-1/3 group-hover:translate-y-0 transition-transform duration-200",children:y.jsxs("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white",children:"Profile Photo"}),y.jsx("p",{className:"text-sm text-gray-400",children:"JPG, GIF or PNG. Max size of 2MB"})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Full Name"}),y.jsx("input",{type:"text",id:"fullName",name:"fullName",value:e.fullName,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Enter your full name"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-300 mb-1",children:"Location"}),y.jsx("input",{type:"text",id:"location",name:"location",value:e.location,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Your location"})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-300 mb-1",children:"Website"}),y.jsx("input",{type:"url",id:"website",name:"website",value:e.website,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"https://yourwebsite.com"})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-300 mb-1",children:"Bio"}),y.jsx("textarea",{id:"bio",name:"bio",rows:4,value:e.bio,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Tell us about yourself..."})]})]})]}),y.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[y.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-600 rounded-lg text-white hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),y.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors duration-200 font-medium",children:"Save Changes"})]})]})]})},V8e=[{id:1,title:"The Gathas of Zarathushtra",author:"Zarathushtra",cover:"/covers/gathas.jpg",progress:75,lastRead:"2 days ago",totalPages:320,currentPage:240,category:"Religious Text"},{id:2,title:"The Denkard",author:"Various Authors",cover:"/covers/denkard.jpg",progress:30,lastRead:"1 week ago",totalPages:450,currentPage:135,category:"Religious Text"},{id:3,title:"Zoroastrianism: An Introduction",author:"Jenny Rose",cover:"/covers/zoroastrianism-intro.jpg",progress:100,lastRead:"3 weeks ago",totalPages:280,currentPage:280,category:"Non-Fiction"}],H8e=()=>{const[e,t]=g.useState("all"),r=V8e.filter(n=>e==="all"?!0:e==="reading"?n.progress<100:n.progress===100);return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reading History"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Track your reading progress and history."})]}),y.jsx("div",{className:"flex space-x-2 mb-6 p-1 bg-gray-800/50 rounded-lg",children:[{id:"all",label:"All Books"},{id:"reading",label:"Currently Reading"},{id:"completed",label:"Completed"}].map(n=>y.jsx("button",{onClick:()=>t(n.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===n.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:n.label},n.id))}),y.jsx("div",{className:"space-y-6",children:r.length>0?r.map(n=>y.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:y.jsx("div",{className:"p-6",children:y.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[y.jsx("div",{className:"w-full md:w-32 flex-shrink-0",children:y.jsx("div",{className:"aspect-[2/3] bg-gray-700 rounded-lg overflow-hidden",children:y.jsx("img",{src:n.cover,alt:n.title,className:"w-full h-full object-cover",onError:s=>{const i=s.target;i.src="https://via.placeholder.com/150x225?text=No+Cover"}})})}),y.jsx("div",{className:"flex-1",children:y.jsxs("div",{className:"flex flex-col h-full",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-white",children:n.title}),y.jsx("p",{className:"text-gray-400",children:n.author})]}),y.jsx("span",{className:"px-3 py-1 text-xs bg-gray-700 text-gray-300 rounded-full",children:n.category})]}),y.jsxs("div",{className:"mt-4",children:[y.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[y.jsxs("span",{children:["Progress: ",n.progress,"%"]}),y.jsxs("span",{children:["Page ",n.currentPage," of ",n.totalPages]})]}),y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:y.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${n.progress}%`}})})]})]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex items-center justify-between",children:[y.jsxs("span",{className:"text-sm text-gray-400",children:["Last read ",n.lastRead]}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-primary/10 hover:bg-primary/20 rounded-lg transition-colors",children:n.progress<100?"Continue Reading":"Read Again"}),y.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})})})]})]})]})})]})})},n.id)):y.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[y.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:y.jsx(Td,{className:"w-8 h-8 text-gray-500"})}),y.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"No books found"}),y.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:e==="all"?"You haven't added any books to your library yet.":e==="reading"?"You don't have any books in progress.":"You haven't completed any books yet."}),y.jsx("button",{className:"mt-4 px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-lg transition-colors",children:"Browse Library"})]})})]})},Rj=[{id:1,title:"First Steps",description:"Complete your first reading session",icon:"🏆",progress:100,unlocked:!0,date:"2023-10-15",rarity:"common"},{id:2,title:"Book Worm",description:"Read for 10 hours",icon:"📚",progress:75,unlocked:!1,date:null,rarity:"uncommon"},{id:3,title:"Zoroastrian Scholar",description:"Read all core Zoroastrian texts",icon:"📜",progress:30,unlocked:!1,date:null,rarity:"rare"},{id:4,title:"Daily Devotee",description:"Read for 7 days in a row",icon:"🔥",progress:42,unlocked:!1,date:null,rarity:"uncommon"},{id:5,title:"Knowledge Seeker",description:"Complete 50 reading sessions",icon:"🔍",progress:100,unlocked:!0,date:"2023-11-02",rarity:"rare"},{id:6,title:"Wisdom Keeper",description:"Achieve 100% completion on any text",icon:"🧠",progress:0,unlocked:!1,date:null,rarity:"epic"}],K8e=e=>{switch(e){case"common":return"bg-gray-500/20 border-gray-500";case"uncommon":return"bg-emerald-500/20 border-emerald-500";case"rare":return"bg-blue-500/20 border-blue-500";case"epic":return"bg-purple-500/20 border-purple-500";case"legendary":return"bg-amber-500/20 border-amber-500";default:return"bg-gray-500/20 border-gray-500"}},Y8e=()=>{const[e,t]=g.useState("all"),r=Rj.filter(o=>e==="all"?!0:e==="unlocked"?o.unlocked:!o.unlocked),n=Rj.filter(o=>o.unlocked).length,s=Rj.length,i=Math.round(n/s*100);return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Achievements"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Track your progress and unlock new milestones."})]}),y.jsx("div",{className:"bg-gray-800/50 rounded-xl p-6",children:y.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("h3",{className:"text-lg font-medium text-white",children:"Achievement Progress"}),y.jsxs("p",{className:"text-gray-400",children:[n," of ",s," achievements unlocked"]})]}),y.jsxs("div",{className:"w-full md:w-64",children:[y.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/70 rounded-full transition-all duration-1000",style:{width:`${i}%`}})}),y.jsxs("p",{className:"text-sm text-right text-gray-400 mt-1",children:[i,"% Complete"]})]})]})}),y.jsx("div",{className:"flex space-x-2 p-1 bg-gray-800/50 rounded-lg",children:[{id:"all",label:"All Achievements"},{id:"unlocked",label:"Unlocked"},{id:"locked",label:"Locked"}].map(o=>y.jsx("button",{onClick:()=>t(o.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===o.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:o.label},o.id))}),r.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(o=>y.jsxs("div",{className:`relative p-5 rounded-xl border-2 transition-all duration-200 ${o.unlocked?K8e(o.rarity):"bg-gray-800/30 border-gray-700 opacity-60"}`,children:[y.jsxs("div",{className:"flex items-start space-x-4",children:[y.jsx("div",{className:"flex-shrink-0 w-14 h-14 rounded-full bg-gray-700 flex items-center justify-center text-2xl",children:o.icon}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h3",{className:`text-lg font-semibold ${o.unlocked?"text-white":"text-gray-400"}`,children:o.title}),y.jsx("p",{className:"text-sm text-gray-400 mt-1",children:o.description}),!o.unlocked&&y.jsxs("div",{className:"mt-2",children:[y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:y.jsx("div",{className:"bg-primary h-1.5 rounded-full",style:{width:`${o.progress}%`}})}),y.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[o.progress,"% complete"]})]})]})]}),o.unlocked&&o.date&&y.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700",children:y.jsxs("p",{className:"text-xs text-gray-400",children:["Unlocked on ",new Date(o.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})}),o.unlocked&&y.jsx("div",{className:"absolute top-3 right-3",children:y.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:y.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]},o.id))}):y.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[y.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:y.jsx(eO,{className:"w-8 h-8 text-gray-500"})}),y.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:e==="unlocked"?"You haven't unlocked any achievements yet":"No locked achievements found"}),y.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:e==="unlocked"?"Start reading and completing texts to unlock achievements!":"You've unlocked all available achievements! More coming soon."})]})]})},G8e=()=>{const[e,t]=g.useState({theme:"dark",fontSize:"medium",notifications:!0,emailNotifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,readingMode:"paginated",autoSave:!0,showProgress:!0,showWordCount:!0}),r=a=>{const{name:l,value:c,type:u}=a.target,h=a.target.checked;t(f=>({...f,[l]:u==="checkbox"?h:c}))},n=a=>{a.preventDefault(),console.log("Saving settings:",e)},s=()=>{window.confirm("Are you sure you want to reset all preferences to default?")&&t({theme:"dark",fontSize:"medium",notifications:!0,emailNotifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,readingMode:"paginated",autoSave:!0,showProgress:!0,showWordCount:!0})},i=({title:a,children:l})=>y.jsxs("div",{className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-medium text-white",children:a}),y.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-gray-700",children:l})]}),o=({label:a,description:l,children:c})=>y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 py-3 border-b border-gray-700/50 last:border-0",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"text-sm font-medium text-white",children:a}),l&&y.jsx("p",{className:"text-xs text-gray-400 mt-1",children:l})]}),y.jsx("div",{className:"sm:w-48",children:c})]});return y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Preferences"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Customize your experience on our platform."})]}),y.jsxs("form",{onSubmit:n,className:"space-y-8",children:[y.jsxs(i,{title:"Appearance",children:[y.jsx(o,{label:"Theme",description:"Choose between light and dark themes",children:y.jsxs("select",{name:"theme",value:e.theme,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[y.jsx("option",{value:"light",children:"Light"}),y.jsx("option",{value:"dark",children:"Dark"}),y.jsx("option",{value:"system",children:"System Default"})]})}),y.jsx(o,{label:"Font Size",description:"Adjust the text size across the application",children:y.jsxs("select",{name:"fontSize",value:e.fontSize,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[y.jsx("option",{value:"small",children:"Small"}),y.jsx("option",{value:"medium",children:"Medium"}),y.jsx("option",{value:"large",children:"Large"})]})})]}),y.jsxs(i,{title:"Notifications",children:[y.jsx(o,{label:"Enable Notifications",description:"Receive browser notifications",children:y.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[y.jsx("input",{type:"checkbox",name:"notifications",id:"notifications",checked:e.notifications,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),y.jsx("label",{htmlFor:"notifications",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.notifications?"bg-primary":"bg-gray-600"}`})]})}),y.jsx(o,{label:"Email Notifications",description:"Receive notifications via email",children:y.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[y.jsx("input",{type:"checkbox",name:"emailNotifications",id:"emailNotifications",checked:e.emailNotifications,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),y.jsx("label",{htmlFor:"emailNotifications",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.emailNotifications?"bg-primary":"bg-gray-600"}`})]})})]}),y.jsxs(i,{title:"Reading",children:[y.jsx(o,{label:"Reading Mode",description:"Choose how content is displayed",children:y.jsxs("select",{name:"readingMode",value:e.readingMode,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[y.jsx("option",{value:"paginated",children:"Paginated"}),y.jsx("option",{value:"scrolling",children:"Scrolling"})]})}),y.jsx(o,{label:"Auto-save Progress",description:"Automatically save your reading progress",children:y.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[y.jsx("input",{type:"checkbox",name:"autoSave",id:"autoSave",checked:e.autoSave,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),y.jsx("label",{htmlFor:"autoSave",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.autoSave?"bg-primary":"bg-gray-600"}`})]})}),y.jsx(o,{label:"Show Reading Progress",description:"Display progress indicators while reading",children:y.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[y.jsx("input",{type:"checkbox",name:"showProgress",id:"showProgress",checked:e.showProgress,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),y.jsx("label",{htmlFor:"showProgress",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.showProgress?"bg-primary":"bg-gray-600"}`})]})}),y.jsx(o,{label:"Show Word Count",description:"Display word count for texts",children:y.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[y.jsx("input",{type:"checkbox",name:"showWordCount",id:"showWordCount",checked:e.showWordCount,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),y.jsx("label",{htmlFor:"showWordCount",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.showWordCount?"bg-primary":"bg-gray-600"}`})]})})]}),y.jsxs(i,{title:"Language & Region",children:[y.jsx(o,{label:"Language",description:"Select your preferred language",children:y.jsxs("select",{name:"language",value:e.language,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[y.jsx("option",{value:"en",children:"English"}),y.jsx("option",{value:"es",children:"Español"}),y.jsx("option",{value:"fr",children:"Français"}),y.jsx("option",{value:"de",children:"Deutsch"}),y.jsx("option",{value:"fa",children:"فارسی"}),y.jsx("option",{value:"gu",children:"ગુજરાતી"})]})}),y.jsx(o,{label:"Time Zone",description:"Set your local time zone",children:y.jsxs("select",{name:"timezone",value:e.timezone,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[y.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),y.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),y.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),y.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),y.jsx("option",{value:"Europe/London",children:"London (GMT)"}),y.jsx("option",{value:"Europe/Paris",children:"Paris (CET)"}),y.jsx("option",{value:"Asia/Tehran",children:"Tehran (IRST)"}),y.jsx("option",{value:"Asia/Kolkata",children:"Mumbai (IST)"})]})})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 pt-6 border-t border-gray-700",children:[y.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:"Reset to Defaults"}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium border border-gray-600 text-gray-300 hover:bg-gray-700/50 rounded-lg transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-lg transition-colors",children:"Save Changes"})]})]})]}),y.jsx("style",{children:`
        .toggle-checkbox:checked {
          right: 0;
          border-color: #68D391;
        }
        .toggle-checkbox:checked + .toggle-label {
          background-color: #68D391;
        }
      `})]})},Z8e=()=>{const[e,t]=g.useState("overview"),[r,n]=g.useState(""),[s,i]=g.useState(""),[o,a]=g.useState(""),[l,c]=g.useState(!1),[u,h]=g.useState([]),[f,p]=g.useState(!1),[v,m]=g.useState(!1),[b,x]=g.useState(""),[w,_]=g.useState(""),j=[{id:"1",device:"Windows 10, Chrome",location:"New York, US",ip:"192.168.1.1",lastActive:"2 hours ago",current:!0},{id:"2",device:"iPhone 13, Safari",location:"San Francisco, US",ip:"203.0.113.1",lastActive:"1 week ago",current:!1},{id:"3",device:"MacBook Pro, Safari",location:"London, UK",ip:"198.51.100.1",lastActive:"2 weeks ago",current:!1}],k=[{id:"1",type:"login",description:"Successful login from New York, US",device:"Windows 10, Chrome",ip:"192.168.1.1",timestamp:"2023-11-15T14:30:00Z",status:"success"},{id:"2",type:"password_change",description:"Password changed",device:"iPhone 13, Safari",ip:"203.0.113.1",timestamp:"2023-11-10T09:15:00Z",status:"info"},{id:"3",type:"failed_login",description:"Failed login attempt",device:"Unknown",ip:"198.51.100.1",timestamp:"2023-11-05T18:45:00Z",status:"warning"}],S=async P=>{if(P.preventDefault(),x(""),_(""),s!==o){x("New passwords do not match");return}if(s.length<8){x("Password must be at least 8 characters long");return}m(!0);try{await new Promise(D=>setTimeout(D,1e3)),_("Password changed successfully"),n(""),i(""),a("")}catch{x("Failed to change password. Please try again.")}finally{m(!1)}},E=async()=>{m(!0);try{await new Promise(D=>setTimeout(D,1e3)),c(!0);const P=Array.from({length:10},()=>Math.random().toString(36).substring(2,8).toUpperCase());h(P),p(!0),_("Two-factor authentication has been enabled")}catch{x("Failed to enable two-factor authentication")}finally{m(!1)}},C=async()=>{if(window.confirm("Are you sure you want to disable two-factor authentication? This will make your account less secure.")){m(!0);try{await new Promise(P=>setTimeout(P,1e3)),c(!1),h([]),_("Two-factor authentication has been disabled")}catch{x("Failed to disable two-factor authentication")}finally{m(!1)}}},T=async()=>{if(window.confirm("Are you sure you want to revoke this session?")){m(!0);try{await new Promise(P=>setTimeout(P,800)),_("Session has been revoked")}catch{x("Failed to revoke session")}finally{m(!1)}}},O=P=>new Date(P).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[y.jsx("h1",{className:"text-2xl font-bold text-white",children:"Security Settings"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your account security and privacy settings."})]}),y.jsx("div",{className:"flex space-x-2 p-1 bg-gray-800/50 rounded-lg",children:[{id:"overview",label:"Overview"},{id:"sessions",label:"Active Sessions"},{id:"activity",label:"Security Activity"}].map(P=>y.jsx("button",{onClick:()=>t(P.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===P.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:P.label},P.id))}),b&&y.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 text-red-300 rounded-lg",children:b}),w&&y.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/30 text-green-300 rounded-lg",children:w}),f&&y.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:"Save Your Backup Codes"}),y.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),y.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Save these backup codes in a safe place. You can use them to access your account if you lose access to your authenticator app."}),y.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:u.map((P,D)=>y.jsx("div",{className:"bg-gray-700/50 p-2 rounded text-center font-mono",children:P},D))}),y.jsx("div",{className:"flex justify-end",children:y.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"I've saved my codes"})})]})}),e==="overview"&&y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[y.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Change Password"}),y.jsxs("form",{onSubmit:S,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),y.jsx("input",{type:"password",id:"currentPassword",value:r,onChange:P=>n(P.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),y.jsx("input",{type:"password",id:"newPassword",value:s,onChange:P=>i(P.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),y.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:P=>a(P.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),y.jsx("div",{className:"pt-2",children:y.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:v?"Updating...":"Update Password"})})]})]}),y.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-white",children:"Two-Factor Authentication"}),y.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l?"Two-factor authentication is currently enabled.":"Add an extra layer of security to your account."})]}),l?y.jsx("button",{onClick:C,disabled:v,className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors disabled:opacity-50",children:v?"Disabling...":"Disable 2FA"}):y.jsx("button",{onClick:E,disabled:v,className:"px-4 py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors disabled:opacity-50",children:v?"Enabling...":"Enable 2FA"})]}),l&&u.length>0&&y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:y.jsx("button",{onClick:()=>p(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"View Backup Codes"})})]}),y.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6",children:[y.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-3",children:"Security Tips"}),y.jsxs("ul",{className:"space-y-3 text-sm text-blue-200",children:[y.jsxs("li",{className:"flex items-start",children:[y.jsx("span",{className:"mr-2",children:"🔒"}),y.jsx("span",{children:"Use a strong, unique password that you don't use elsewhere."})]}),y.jsxs("li",{className:"flex items-start",children:[y.jsx("span",{className:"mr-2",children:"🔑"}),y.jsx("span",{children:"Enable two-factor authentication for added security."})]}),y.jsxs("li",{className:"flex items-start",children:[y.jsx("span",{className:"mr-2",children:"👀"}),y.jsx("span",{children:"Regularly review your active sessions and revoke any that look suspicious."})]}),y.jsxs("li",{className:"flex items-start",children:[y.jsx("span",{className:"mr-2",children:"📧"}),y.jsx("span",{children:"Make sure your email account is secure, as it can be used to reset your password."})]})]})]})]}),e==="sessions"&&y.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:y.jsxs("div",{className:"p-6",children:[y.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Active Sessions"}),y.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"This is a list of devices that have logged into your account. Revoke any sessions that you don't recognize."}),y.jsx("div",{className:"space-y-4",children:j.map(P=>y.jsx("div",{className:`p-4 rounded-lg ${P.current?"bg-primary/10 border border-primary/30":"bg-gray-700/50"}`,children:y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"font-medium text-white",children:P.device}),P.current&&y.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-primary/20 text-primary rounded-full",children:"Current Session"})]}),y.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[P.location," • ",P.ip]}),y.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last active: ",P.lastActive]})]}),!P.current&&y.jsx("button",{onClick:T,disabled:v,className:"px-3 py-1 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors disabled:opacity-50",children:"Revoke"})]})},P.id))})]})}),e==="activity"&&y.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:y.jsxs("div",{className:"p-6",children:[y.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Security Activity"}),y.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Review recent security events related to your account."}),y.jsx("div",{className:"space-y-4",children:k.map(P=>y.jsx("div",{className:"p-4 bg-gray-700/30 rounded-lg",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${P.status==="success"?"bg-green-500":P.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),y.jsxs("div",{className:"ml-4 flex-1",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsx("h4",{className:"font-medium text-white",children:P.description}),y.jsx("span",{className:"text-xs text-gray-500",children:O(P.timestamp)})]}),y.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[P.device," • ",P.ip]})]})]})},P.id))}),y.jsx("div",{className:"mt-6 text-center",children:y.jsx("button",{className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"View All Activity"})})]})})]})},J8e=()=>y.jsxs("div",{className:"text-gray-100",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Admin Dashboard"}),y.jsx("p",{children:"Admin specific content and tools."})]}),Q8e=()=>{var w;const e=i2(),t=la(),[r,n]=g.useState("overview"),{user:s,userProfile:i,isAdmin:o,isLoading:a,isAuthenticated:l}=IH(),[c,u]=g.useState({isSubscribed:!1,subscriptionTier:"free",betaReaderStatus:"not_applied",subscriptionEndDate:void 0,booksRead:0,readingHours:0,currentlyReading:"",achievements:0,username:"User"});g.useEffect(()=>{!a&&!l&&e("/login")},[a,l,e]),g.useEffect(()=>{const _=t.pathname.split("/").pop()||"overview";n(_==="account"?"overview":_)},[t]);const h=[{id:"overview",name:"Overview",icon:y.jsx(X$e,{size:18}),path:"/account"},{id:"profile",name:"Profile",icon:y.jsx(Wb,{size:18}),path:"/account/profile"},{id:"reading",name:"Reading",icon:y.jsx(Td,{size:18}),path:"/account/reading"},{id:"achievements",name:"Achievements",icon:y.jsx(eO,{size:18}),path:"/account/achievements"},{id:"preferences",name:"Preferences",icon:y.jsx(r8e,{size:18}),path:"/account/preferences"},{id:"security",name:"Security",icon:y.jsx(UH,{size:18}),path:"/account/security"}],f=g.useMemo(()=>[...h],[]),{data:p,isLoading:v}=ym({queryKey:["userStats",s==null?void 0:s.id],queryFn:()=>j$e(s.id),enabled:!!(s!=null&&s.id)}),{data:m,isLoading:b}=ym({queryKey:["subscription",s==null?void 0:s.id],queryFn:()=>x$e(s.id),enabled:!!(s!=null&&s.id)});g.useEffect(()=>{i&&u(_=>{var j;return{..._,username:i.username||((j=s==null?void 0:s.email)==null?void 0:j.split("@")[0])||"User",betaReaderStatus:i.beta_reader_status||"not_applied"}}),p&&u(_=>({..._,booksRead:p.books_read||0,readingHours:p.reading_hours||0,currentlyReading:p.currently_reading||"",achievements:p.achievements||0})),m&&u(_=>({..._,isSubscribed:!0,subscriptionTier:m.plan_id,subscriptionEndDate:m.current_period_end}))},[s,i,p,m]);const x=async()=>{await tr.auth.signOut(),e("/login")};return a||l&&(!i||v||b)?y.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-background-darker flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),y.jsx("p",{className:"mt-4 text-gray-400",children:"Loading your profile..."})]})}):!l||!s?null:y.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-background-darker text-text-light",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:y.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[y.jsxs("aside",{className:"w-full lg:w-64 flex-shrink-0",children:[y.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl overflow-hidden border border-gray-800",children:[y.jsxs("div",{className:"p-6 text-center border-b border-gray-800",children:[y.jsxs("div",{className:"relative inline-block",children:[y.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-4xl font-bold text-white",children:(w=s==null?void 0:s.email)==null?void 0:w.charAt(0).toUpperCase()}),y.jsx("button",{className:"absolute -bottom-1 -right-1 bg-primary w-8 h-8 rounded-full flex items-center justify-center text-white hover:bg-primary/90 transition-colors",children:y.jsx(Wb,{size:16})})]}),y.jsx("h2",{className:"mt-4 text-xl font-semibold text-white",children:(i==null?void 0:i.display_name)||(i==null?void 0:i.username)}),y.jsx("p",{className:"text-sm text-gray-400",children:o?"Admin":"Member"})]}),y.jsx("nav",{className:"p-2",children:y.jsx("ul",{className:"space-y-1",children:f.map(_=>y.jsx("li",{children:y.jsxs(qL,{to:_.path,end:_.path==="/account",className:({isActive:j})=>`flex items-center justify-between px-4 py-3 rounded-lg transition-colors duration-200 ${j?"bg-primary/10 text-primary":"text-gray-300 hover:bg-gray-800/50 hover:text-white"}`,children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-3",children:_.icon}),_.name]}),y.jsx(Y$e,{size:16,className:"text-gray-500"})]})},_.id))})})]}),r==="overview"&&y.jsxs("div",{className:"mt-6 bg-background-light/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-4",children:"YOUR STATS"}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-indigo-500/10 flex items-center justify-center text-indigo-400",children:y.jsx(Td,{size:16})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Books Read"}),y.jsx("p",{className:"text-lg font-semibold text-white",children:c.booksRead})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center text-green-400",children:y.jsx(qN,{size:16})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Reading Hours"}),y.jsxs("p",{className:"text-lg font-semibold text-white",children:[c.readingHours,"h"]})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-400",children:y.jsx($H,{size:16})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Currently Reading"}),y.jsx("p",{className:"text-lg font-semibold text-white",children:c.currentlyReading||"None"})]})]})]})]})]}),y.jsx("main",{className:"flex-1",children:y.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl border border-gray-800 overflow-hidden",children:y.jsxs("div",{className:"p-6",children:[y.jsxs(LL,{children:[y.jsx(Te,{path:"/",element:y.jsx(B8e,{userId:s.id,isSubscribed:c.isSubscribed,subscriptionTier:c.subscriptionTier,betaReaderStatus:c.betaReaderStatus,subscriptionEndDate:c.subscriptionEndDate,booksRead:c.booksRead,readingHours:c.readingHours,currentlyReading:c.currentlyReading,achievements:c.achievements,username:c.username,onSignOut:x})}),y.jsx(Te,{path:"profile",element:y.jsx(W8e,{})}),y.jsx(Te,{path:"reading",element:y.jsx(H8e,{})}),y.jsx(Te,{path:"achievements",element:y.jsx(Y8e,{})}),y.jsx(Te,{path:"preferences",element:y.jsx(G8e,{})}),y.jsx(Te,{path:"security",element:y.jsx(Z8e,{})}),o&&y.jsx(Te,{path:"admin/*",element:y.jsx(J8e,{})})]}),y.jsx(JK,{})]})})})]})})})},X8e=()=>{const e=g.useRef(null),t=g.useRef({}),r=g.useRef({}),[n,s]=g.useState({fullName:"",preferredName:"",email:"",timezone:"",country:"",portfolioLinks:"",specialties:[],tools:[],availability:"",startDate:"",commitment:"",bestPieces:"",makingOfNotes:"",visualInfluences:"",worldVisualization:"",feedbackProcess:"",colorGrading:"",references:"",turnaround:"",revisionPolicy:"",revenueShareWilling:"",preferredTrack:"",taxConstraints:"",projectPortal:!1,ndaAcceptance:!1,originalityConfirm:!1,rightsConfirm:!1,signature:"",signatureDate:new Date().toISOString().split("T")[0]}),i=f=>{const{name:p,value:v,type:m,checked:b}=f.target;s(m==="checkbox"?x=>{const w=x[p]||[];return b?{...x,[p]:[...w,v]}:{...x,[p]:w.filter(_=>_!==v)}}:m==="radio"?x=>({...x,[p]:v}):x=>({...x,[p]:v}))},o=(f,p)=>{const v=f.target.files;s(m=>({...m,[p]:v})),a(f.target)},a=(f,p)=>{const v=f.closest(".file-upload");if(!v)return;const m=f.files?f.files.length:0,b=v.querySelector("p");b&&(m>0?(b.innerHTML=`${m} file(s) selected<br><small>Ready to upload</small>`,v.style.backgroundColor="#e8f5e8"):(b.innerHTML="Drop files here or click to browse<br><small>JPG/PNG, max 5MB per file</small>",v.style.backgroundColor="white"))},l=f=>{f.preventDefault(),f.currentTarget.style.backgroundColor="#f0f8ff"},c=f=>{f.preventDefault(),f.currentTarget.style.backgroundColor="white"},u=(f,p)=>{f.preventDefault(),f.currentTarget.style.backgroundColor="#e8f5e8";const v=f.dataTransfer.files;t.current[p]&&(t.current[p].files=v,s(m=>({...m,[p]:v})),a(t.current[p]))},h=f=>{f.preventDefault(),console.log("Application data:",n),alert("Thank you for your application! We'll review your submission and get back to you within 1-2 weeks.")};return g.useEffect(()=>{var p,v,m;const f=(p=document.getElementById("preferredTrack"))==null?void 0:p.closest(".form-group");f&&(n.revenueShareWilling==="yes"?(f.style.display="block",(v=document.getElementById("preferredTrack"))==null||v.setAttribute("required","required")):(f.style.display="none",(m=document.getElementById("preferredTrack"))==null||m.removeAttribute("required"),s(b=>({...b,preferredTrack:""}))))},[n.revenueShareWilling]),g.useEffect(()=>{Object.entries(r.current).forEach(([f,p])=>{var v;if(p){const m=parseInt(p.getAttribute("data-maxlength")||"1000");let b=p.nextElementSibling;(!b||!b.classList.contains("char-counter"))&&(b=document.createElement("small"),b.classList.add("char-counter"),b.style.display="block",b.style.textAlign="right",b.style.color="var(--muted-foreground)",b.style.marginTop="0.25rem",(v=p.parentNode)==null||v.insertBefore(b,p.nextSibling));const x=()=>{const w=p.value.length;b.textContent=`${w}/${m} characters`,w>m*.9?b.style.color="var(--destructive)":w>m*.7?b.style.color="var(--accent)":b.style.color="var(--muted-foreground)"};return p.addEventListener("input",x),x(),()=>{p.removeEventListener("input",x)}}})},[n]),g.useEffect(()=>{var b;const f=document.createElement("div");f.style.cssText=`
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--border); /* Using CSS variable */
            z-index: 1000;
            transition: all 0.3s ease;
        `;const p=document.createElement("div");p.style.cssText=`
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%); /* Using CSS variables */
            width: 0%;
            transition: width 0.3s ease;
        `,f.appendChild(p),document.body.prepend(f);const v=()=>{if(!e.current)return;const x=Array.from(e.current.querySelectorAll("[required]")),w=x.filter(k=>k.type==="checkbox"||k.type==="radio"?k.checked:k.value.trim()!=="").length,_=x.length,j=_>0?w/_*100:0;p.style.width=`${j}%`},m=(b=e.current)==null?void 0:b.querySelectorAll("input, select, textarea");return m==null||m.forEach(x=>{x.addEventListener("input",v),x.addEventListener("change",v)}),v(),()=>{f.remove(),m==null||m.forEach(x=>{x.removeEventListener("input",v),x.removeEventListener("change",v)})}},[]),y.jsxs("div",{className:"max-w-7xl mx-auto bg-card shadow-lg rounded-xl overflow-hidden my-8",children:[" ",y.jsxs("div",{className:"relative p-12 text-center text-white bg-gradient-to-br from-gray-800 to-gray-900 overflow-hidden",children:[" ",y.jsx("div",{className:"absolute inset-0",style:{background:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.08)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>') repeat`,opacity:.3}}),y.jsx("h1",{className:"text-4xl font-bold mb-2 relative z-10",children:"Artist Collaboration Program"})," ",y.jsx("p",{className:"text-lg opacity-90 relative z-10",children:"Shape the visual identity of the Zangar/Spandam Series"})," "]}),y.jsxs("div",{className:"p-12",children:[" ",y.jsxs("div",{className:"bg-background p-8 rounded-lg mb-12 border-l-4 border-primary",children:[" ",y.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Join Our Creative Vision"})," ",y.jsxs("p",{className:"text-lg mb-4",children:["We're seeking ",y.jsx("strong",{children:"1-2 talented artists"}),' to collaborate on bringing to life a world of cliffside megacities, sky-splitting space elevators, and civilizations locked in "soft war." This is a unique revenue-share collaboration opportunity where your creative vision helps shape an entire series.']})," ",y.jsx("p",{className:"text-lg mb-4",children:"No upfront payment required - you'll earn meaningful percentages of book revenue with transparent reporting and fair compensation structures designed to reward your contribution over time."})," "]}),y.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent text-white p-6 rounded-lg my-8",children:[" ",y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"What We're Looking For"})," ",y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 my-8",children:[" ",y.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[" ",y.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Cover Art"})," ",y.jsx("p",{children:"Stunning key art that captures the epic scope and Persian/Zoroastrian-influenced aesthetic of our megastructures"})]}),y.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[y.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Interior Illustrations"}),y.jsx("p",{children:"6-12 atmospheric pieces that enhance key scenes and world-building moments"})]}),y.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[y.jsx("h4",{className:"text-xl font-semibold mb-2",children:"World Design"}),y.jsx("p",{children:"Clan sigils, glyphs, UI ornaments, and visual motifs that define our world's identity"})]}),y.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[y.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Marketing Assets"}),y.jsx("p",{children:"Website heroes, social banners, and promotional materials that drive engagement"})]})]})]}),y.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Fair Compensation Structure"}),y.jsx("p",{className:"text-lg mb-4",children:"Choose the track that works best for your situation:"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 my-8",children:[" ",y.jsxs("div",{className:"bg-card border-2 border-border rounded-lg p-6 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-xl hover:border-primary",children:[" ",y.jsx("h4",{className:"text-xl font-semibold text-primary mb-4",children:"Track A: Higher Percentage, Shorter Term"})," ",y.jsxs("ul",{className:"list-disc list-inside text-foreground",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Primary Cover:"})," 5% net revenue for 12 months (cap: $7,500)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Secondary/Marketing Art:"})," 2.5% for 12 months (cap: $3,500)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Interior Pack (6-12 images):"})," 1.5% for 12 months (cap: $2,000)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Motifs/UI Package:"})," 1.0% for 12 months (cap: $1,200)"]})]})]}),y.jsxs("div",{className:"bg-card border-2 border-border rounded-lg p-6 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-xl hover:border-primary",children:[y.jsx("h4",{className:"text-xl font-semibold text-primary mb-4",children:"Track B: Lower Percentage, Longer Term"}),y.jsxs("ul",{className:"list-disc list-inside text-foreground",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Primary Cover:"})," 3% net revenue for 24 months (cap: $7,500)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Secondary/Marketing Art:"})," 1.5% for 24 months (cap: $3,500)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Interior Pack:"})," 1.0% for 24 months (cap: $2,000)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Motifs/UI:"})," 0.75% for 24 months (cap: $1,200)"]})]})]})]}),y.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent text-white p-6 rounded-lg my-8",children:[" ",y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Transparency & Trust"}),y.jsxs("p",{className:"mb-2",children:[y.jsx("strong",{children:"Quarterly financial statements"})," with itemized revenue calculations"]}),y.jsxs("p",{className:"mb-2",children:[y.jsx("strong",{children:"Payment within 30 days"})," of each quarter end"]}),y.jsxs("p",{className:"mb-2",children:[y.jsx("strong",{children:"Right to audit"})," statements once per year"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Milestone bonuses"})," if the book crosses $50,000 in net revenue"]})]}),y.jsxs("div",{className:"bg-background p-8 rounded-lg mt-12",children:[" ",y.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Application Form"}),y.jsxs("form",{ref:e,onSubmit:h,children:[y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[" ",y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Identity & Contact"]})," ",y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[" ",y.jsxs("div",{className:"mb-4",children:[" ",y.jsxs("label",{htmlFor:"fullName",className:"block mb-2 font-semibold text-muted-foreground",children:["Full Name",y.jsx("span",{className:"text-destructive",children:" *"})]})," ",y.jsx("input",{type:"text",id:"fullName",name:"fullName",required:!0,value:n.fullName,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})," "]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"preferredName",className:"block mb-2 font-semibold text-muted-foreground",children:"Preferred Name/Alias"}),y.jsx("input",{type:"text",id:"preferredName",name:"preferredName",value:n.preferredName,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"email",className:"block mb-2 font-semibold text-muted-foreground",children:["Email",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:n.email,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"timezone",className:"block mb-2 font-semibold text-muted-foreground",children:["Time Zone",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsxs("select",{id:"timezone",name:"timezone",required:!0,value:n.timezone,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[y.jsx("option",{value:"",children:"Select your timezone"}),y.jsx("option",{value:"UTC-12",children:"UTC-12 (Baker Island)"}),y.jsx("option",{value:"UTC-11",children:"UTC-11 (Hawaii)"}),y.jsx("option",{value:"UTC-10",children:"UTC-10 (Alaska)"}),y.jsx("option",{value:"UTC-9",children:"UTC-9 (Pacific)"}),y.jsx("option",{value:"UTC-8",children:"UTC-8 (Mountain)"}),y.jsx("option",{value:"UTC-7",children:"UTC-7 (Central)"}),y.jsx("option",{value:"UTC-6",children:"UTC-6 (Eastern)"}),y.jsx("option",{value:"UTC-5",children:"UTC-5 (Atlantic)"}),y.jsx("option",{value:"UTC+0",children:"UTC+0 (London)"}),y.jsx("option",{value:"UTC+1",children:"UTC+1 (Central Europe)"}),y.jsx("option",{value:"UTC+2",children:"UTC+2 (Eastern Europe)"}),y.jsx("option",{value:"UTC+8",children:"UTC+8 (China/Singapore)"}),y.jsx("option",{value:"UTC+9",children:"UTC+9 (Japan)"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"country",className:"block mb-2 font-semibold text-muted-foreground",children:["Country",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"text",id:"country",name:"country",required:!0,value:n.country,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"portfolioLinks",className:"block mb-2 font-semibold text-muted-foreground",children:["Portfolio Links",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("textarea",{id:"portfolioLinks",name:"portfolioLinks",placeholder:"Please provide links to your portfolio (ArtStation, Behance, personal website, Instagram, etc.)",required:!0,value:n.portfolioLinks,onChange:i,ref:f=>{r.current.portfolioLinks=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Art Focus & Availability"]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-2 font-semibold text-muted-foreground",children:"Primary Specialties (check all that apply)"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2",children:[" ",y.jsxs("div",{className:"flex items-center",children:[" ",y.jsx("input",{type:"checkbox",id:"coverIll",name:"specialties",value:"cover-illustration",onChange:i,checked:n.specialties.includes("cover-illustration"),className:"w-auto mr-2"})," ",y.jsx("label",{htmlFor:"coverIll",children:"Cover Illustration"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"charDesign",name:"specialties",value:"character-design",onChange:i,checked:n.specialties.includes("character-design"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"charDesign",children:"Character Design"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"environment",name:"specialties",value:"environment",onChange:i,checked:n.specialties.includes("environment"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"environment",children:"Environment Art"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"uiMotifs",name:"specialties",value:"ui-motifs",onChange:i,checked:n.specialties.includes("ui-motifs"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"uiMotifs",children:"UI/Sigil Design"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"typography",name:"specialties",value:"typography",onChange:i,checked:n.specialties.includes("typography"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"typography",children:"Typography"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"marketing",name:"specialties",value:"marketing",onChange:i,checked:n.specialties.includes("marketing"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"marketing",children:"Marketing Visuals"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block mb-2 font-semibold text-muted-foreground",children:"Tools/Software (check all that apply)"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"photoshop",name:"tools",value:"photoshop",onChange:i,checked:n.tools.includes("photoshop"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"photoshop",children:"Photoshop"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"procreate",name:"tools",value:"procreate",onChange:i,checked:n.tools.includes("procreate"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"procreate",children:"Procreate"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"clipstudio",name:"tools",value:"clip-studio",onChange:i,checked:n.tools.includes("clip-studio"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"clipstudio",children:"Clip Studio"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"blender",name:"tools",value:"blender",onChange:i,checked:n.tools.includes("blender"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"blender",children:"Blender"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"illustrator",name:"tools",value:"illustrator",onChange:i,checked:n.tools.includes("illustrator"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"illustrator",children:"Illustrator"})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"other",name:"tools",value:"other",onChange:i,checked:n.tools.includes("other"),className:"w-auto mr-2"}),y.jsx("label",{htmlFor:"other",children:"Other"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"availability",className:"block mb-2 font-semibold text-muted-foreground",children:["Weekly Availability",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsxs("select",{id:"availability",name:"availability",required:!0,value:n.availability,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[y.jsx("option",{value:"",children:"Select availability"}),y.jsx("option",{value:"10-15",children:"10-15 hours/week"}),y.jsx("option",{value:"15-25",children:"15-25 hours/week"}),y.jsx("option",{value:"25+",children:"25+ hours/week"}),y.jsx("option",{value:"project-sprints",children:"Project-only sprints"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"startDate",className:"block mb-2 font-semibold text-muted-foreground",children:["Earliest Start Date",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"date",id:"startDate",name:"startDate",required:!0,value:n.startDate,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"commitment",className:"block mb-2 font-semibold text-muted-foreground",children:"Time Commitment Window"}),y.jsx("input",{type:"text",id:"commitment",name:"commitment",placeholder:"e.g., 'I can commit for 3 months' or 'Available through Q2 2025'",value:n.commitment,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Portfolio & Samples"]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"portfolioUpload",className:"block mb-2 font-semibold text-muted-foreground",children:"Portfolio Upload (3-6 images, optional)"}),y.jsxs("div",{className:"file-upload border-2 border-dashed border-primary rounded-lg p-8 text-center bg-card transition-colors duration-300 ease-in-out hover:bg-blue-50",onDragOver:l,onDragLeave:c,onDrop:f=>u(f,"portfolioUpload"),children:[" ",y.jsx("input",{type:"file",id:"portfolioUpload",name:"portfolioUpload",multiple:!0,accept:"image/*",onChange:f=>o(f,"portfolioUpload"),ref:f=>{t.current.portfolioUpload=f},className:"hidden"})," ",y.jsxs("p",{className:"text-muted-foreground",children:["Drop files here or ",y.jsx("span",{className:"text-primary cursor-pointer",onClick:()=>{var f;return(f=t.current.portfolioUpload)==null?void 0:f.click()},children:"click to browse"}),y.jsx("br",{}),y.jsx("small",{children:"JPG/PNG, max 5MB per file"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"bestPieces",className:"block mb-2 font-semibold text-muted-foreground",children:["Direct Links to 3-5 Best Pieces",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("textarea",{id:"bestPieces",name:"bestPieces",placeholder:"Please provide direct links to your best work that showcases your style and skill",required:!0,value:n.bestPieces,onChange:i,ref:f=>{r.current.bestPieces=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"customSample",className:"block mb-2 font-semibold text-muted-foreground",children:"Custom Sample for This Project (optional)"}),y.jsxs("div",{className:"file-upload border-2 border-dashed border-primary rounded-lg p-8 text-center bg-card transition-colors duration-300 ease-in-out hover:bg-blue-50",children:[y.jsx("input",{type:"file",id:"customSample",name:"customSample",accept:"image/*",onChange:f=>o(f,"customSample"),ref:f=>{t.current.customSample=f},className:"hidden"}),y.jsxs("p",{className:"text-muted-foreground",children:["Upload a custom piece based on our world concept",y.jsx("br",{}),y.jsx("small",{children:"Not required but highly encouraged"})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"makingOfNotes",className:"block mb-2 font-semibold text-muted-foreground",children:"Brief Making-of Notes (optional)"}),y.jsx("textarea",{id:"makingOfNotes",name:"makingOfNotes",placeholder:"Describe your approach, tools, or references used (50-150 words)",value:n.makingOfNotes,onChange:i,ref:f=>{r.current.makingOfNotes=f},"data-maxlength":"150",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Style & Fit Questions"]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"visualInfluences",className:"block mb-2 font-semibold text-muted-foreground",children:["Visual Influences for This Project",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("textarea",{id:"visualInfluences",name:"visualInfluences",placeholder:"What visual influences, artists, or styles do you think overlap with this Persian/Zoroastrian-influenced sci-fi world? (100-200 words)",required:!0,value:n.visualInfluences,onChange:i,ref:f=>{r.current.visualInfluences=f},"data-maxlength":"200",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"worldVisualization",className:"block mb-2 font-semibold text-muted-foreground",children:["World Visualization",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("textarea",{id:"worldVisualization",name:"worldVisualization",placeholder:"Describe how you'd visualize: cliffside megacity Vənāsō, space elevator, 'soft war' sky, oath-bound warrior (Hooran) (150-250 words)",required:!0,value:n.worldVisualization,onChange:i,ref:f=>{r.current.worldVisualization=f},"data-maxlength":"250",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"feedbackProcess",className:"block mb-2 font-semibold text-muted-foreground",children:["Feedback & Revision Process",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("textarea",{id:"feedbackProcess",name:"feedbackProcess",placeholder:"How do you handle feedback and revisions? What's your typical process? (100-200 words)",required:!0,value:n.feedbackProcess,onChange:i,ref:f=>{r.current.feedbackProcess=f},"data-maxlength":"200",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"colorGrading",className:"block mb-2 font-semibold text-muted-foreground",children:"Preferred Color Grading"}),y.jsx("input",{type:"text",id:"colorGrading",name:"colorGrading",placeholder:"e.g., 'Cool teals/slates with warm amber accents' or 'Muted earth tones with electric blues'",value:n.colorGrading,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Process & Reliability"]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"references",className:"block mb-2 font-semibold text-muted-foreground",children:"Past Client References or Shipped Work"}),y.jsx("textarea",{id:"references",name:"references",placeholder:"Links to published work, client testimonials, or references (optional)",value:n.references,onChange:i,ref:f=>{r.current.references=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"turnaround",className:"block mb-2 font-semibold text-muted-foreground",children:["Typical Turnaround for Single Finished Piece",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsxs("select",{id:"turnaround",name:"turnaround",required:!0,value:n.turnaround,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[y.jsx("option",{value:"",children:"Select timeframe"}),y.jsx("option",{value:"3-5-days",children:"3-5 days"}),y.jsx("option",{value:"1-2-weeks",children:"1-2 weeks"}),y.jsx("option",{value:"2-4-weeks",children:"2-4 weeks"}),y.jsx("option",{value:">4-weeks",children:"More than 4 weeks"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"revisionPolicy",className:"block mb-2 font-semibold text-muted-foreground",children:["Revision Policy",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"text",id:"revisionPolicy",name:"revisionPolicy",placeholder:"e.g., '2 rounds of revisions included, additional rounds at hourly rate'",required:!0,value:n.revisionPolicy,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Compensation Preferences"]}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"radio",name:"revenueShareWilling",value:"yes",required:!0,onChange:i,checked:n.revenueShareWilling==="yes",className:"w-auto mr-2"}),"Yes, I'm willing to work for revenue share until sales begin"]})}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"radio",name:"revenueShareWilling",value:"no",required:!0,onChange:i,checked:n.revenueShareWilling==="no",className:"w-auto mr-2"}),"No, I prefer upfront payment"]})}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"preferredTrack",className:"block mb-2 font-semibold text-muted-foreground",children:"If yes to revenue share, preferred track:"}),y.jsxs("select",{id:"preferredTrack",name:"preferredTrack",value:n.preferredTrack,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[y.jsx("option",{value:"",children:"Select preferred track"}),y.jsx("option",{value:"track-a",children:"Track A: Higher percentage, 12 months"}),y.jsx("option",{value:"track-b",children:"Track B: Lower percentage, 24 months"}),y.jsx("option",{value:"flexible",children:"Flexible/Open to discussion"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"taxConstraints",className:"block mb-2 font-semibold text-muted-foreground",children:"Tax or Invoicing Constraints"}),y.jsx("input",{type:"text",id:"taxConstraints",name:"taxConstraints",placeholder:"Any specific requirements for your country/region? (optional)",value:n.taxConstraints,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),y.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[y.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[y.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Legal & Agreements"]}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"checkbox",name:"projectPortal",required:!0,onChange:i,checked:n.projectPortal,className:"w-auto mr-2"}),"I consent to using the project portal/workflow system"]})}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"checkbox",name:"ndaAcceptance",required:!0,onChange:i,checked:n.ndaAcceptance,className:"w-auto mr-2"}),"I accept NDA/Confidentiality requirements"]})}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"checkbox",name:"originalityConfirm",required:!0,onChange:i,checked:n.originalityConfirm,className:"w-auto mr-2"}),"I confirm originality of my work and ability to grant licensing rights"]})}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[y.jsx("input",{type:"checkbox",name:"rightsConfirm",required:!0,onChange:i,checked:n.rightsConfirm,className:"w-auto mr-2"}),"I confirm my ability to grant project-specific rights as outlined"]})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"signature",className:"block mb-2 font-semibold text-muted-foreground",children:["Digital Signature",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"text",id:"signature",name:"signature",placeholder:"Type your full name",required:!0,value:n.signature,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{htmlFor:"signatureDate",className:"block mb-2 font-semibold text-muted-foreground",children:["Date",y.jsx("span",{className:"text-destructive",children:" *"})]}),y.jsx("input",{type:"date",id:"signatureDate",name:"signatureDate",required:!0,value:n.signatureDate,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]})]}),y.jsx("button",{type:"submit",className:"w-full py-4 px-8 bg-gradient-to-br from-primary to-accent text-white font-semibold text-lg rounded-lg border-none cursor-pointer transition-all duration-300 ease-in-out mt-8 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-primary/50",children:"Apply to Collaborate"})," "]})]})]})]})},eze=()=>{const[e,t]=ue.useState(null),r=o2();return ue.useEffect(()=>{r.pageSlug&&w$e(r.pageSlug).then(t)},[r.pageSlug]),y.jsx(b$e,{children:y.jsx(MH,{children:y.jsxs(wY,{children:[y.jsx(WLe,{}),y.jsxs(LL,{children:[y.jsx(Te,{path:"/login",element:y.jsx(zee,{})}),y.jsxs(Te,{element:y.jsx(Wte,{}),children:[y.jsx(Te,{path:"/",element:y.jsx(Wre,{})}),y.jsx(Te,{path:"/store",element:y.jsx(s8e,{})}),y.jsx(Te,{path:"/checkout",element:y.jsx(Fge,{})}),y.jsx(Te,{path:"/library",element:y.jsx(fde,{})}),y.jsx(Te,{path:"/subscriptions",element:y.jsx(jge,{})}),y.jsx(Te,{path:"/subscription-success",element:y.jsx(kge,{})}),y.jsxs(Te,{path:"/wiki",children:[y.jsx(Te,{index:!0,element:e?y.jsx(E_,{page:e}):y.jsx("div",{children:"Loading..."})}),y.jsx(Te,{path:":folderSlug",element:e?y.jsx(E_,{page:e}):y.jsx("div",{children:"Loading..."})}),y.jsx(Te,{path:":folderSlug/:pageSlug",element:e?y.jsx(E_,{page:e}):y.jsx("div",{children:"Loading..."})})]}),y.jsx(Te,{path:"/timelines",element:y.jsx(q$e,{})}),y.jsx(Te,{path:"/characters",element:y.jsx(Ege,{})}),y.jsx(Te,{path:"/locations",element:y.jsx(Tge,{})}),y.jsx(Te,{path:"/glossary",element:y.jsx(Age,{})}),y.jsx(Te,{path:"/reviews",element:y.jsx(Oge,{})}),y.jsx(Te,{path:"/account/*",element:y.jsx(Q8e,{})}),y.jsx(Te,{path:"/blog",element:y.jsx(Rge,{})}),y.jsx(Te,{path:"/blog/:slug",element:y.jsx(z8e,{})}),y.jsx(Te,{path:"/beta/application",element:y.jsx(nL,{children:y.jsx(B$e,{})})}),y.jsx(Te,{path:"/artist-collaboration",element:y.jsx(X8e,{})}),y.jsx(Te,{path:"/read/:workId",element:y.jsx(Lge,{})}),y.jsx(Te,{path:"/beta/status",element:y.jsx(Ige,{})}),y.jsx(Te,{path:"/beta/handbook",element:y.jsx(Sj,{})}),y.jsx(Te,{path:"/beta/timeline",element:y.jsx(L5,{})}),y.jsx(Te,{path:"/beta/nda",element:y.jsx(Sj,{})}),y.jsx(Te,{path:"/beta/feedback",element:y.jsx(Sj,{})}),y.jsx(Te,{path:"/beta/portal",element:y.jsx(nL,{children:y.jsx(Mge,{})})}),y.jsx(Te,{path:"/:slug",element:y.jsx(q8e,{})}),y.jsx(Te,{path:"*",element:y.jsx(Dge,{})})]}),y.jsxs(Te,{path:"/account/admin",element:y.jsx(xte,{children:y.jsx(bte,{})}),children:[y.jsx(Te,{index:!0,element:y.jsx(oAe,{})}),y.jsx(Te,{path:"homepage-content",element:y.jsx(aOe,{})}),y.jsx(Te,{path:"posts",element:y.jsx(aIe,{})}),y.jsx(Te,{path:"pages",element:y.jsx(TLe,{})}),y.jsx(Te,{path:"characters",element:y.jsx(MLe,{})}),y.jsx(Te,{path:"works",element:y.jsx(ULe,{})}),y.jsx(Te,{path:"upload-work",element:y.jsx(qLe,{})}),y.jsx(Te,{path:"upload-chapter",element:y.jsx(KLe,{})}),y.jsx(Te,{path:"users",element:y.jsx(BLe,{})}),y.jsx(Te,{path:"beta-applications",element:y.jsx(k$e,{})}),y.jsx(Te,{path:"wiki",element:y.jsx(I5,{})}),y.jsx(Te,{path:"wiki/folder/:folderId",element:y.jsx(I5,{})}),y.jsx(Te,{path:"wiki/new",element:y.jsx(AN,{})}),y.jsx(Te,{path:"wiki/edit/:id",element:y.jsx(AN,{})}),y.jsx(Te,{path:"timeline/events",element:y.jsx(L5,{})}),y.jsx(Te,{path:"store",element:y.jsx(ade,{})}),y.jsx(Te,{path:"library",element:y.jsx("div",{children:"Library Management Coming Soon!"})}),y.jsx(Te,{path:"characters",element:y.jsx("div",{children:"Characters Management Coming Soon!"})}),y.jsx(Te,{path:"beta-program",element:y.jsx("div",{children:"Beta Program Management Coming Soon!"})}),y.jsx(Te,{path:"media",element:y.jsx("div",{children:"Media Management Coming Soon!"})}),y.jsx(Te,{path:"settings",element:y.jsx("div",{children:"Settings Coming Soon!"})})]})]})]})})})},tze=new _8e;Dj.createRoot(document.getElementById("root")).render(y.jsx(ue.StrictMode,{children:y.jsx(C8e,{client:tze,children:y.jsx(MH,{children:y.jsx(eze,{})})})}));export{sc as C,$f as E,U8 as J,Wue as M,Uf as N,z8 as X,$8 as Z,xs as a,ci as b,Uy as c,lt as d,Hu as e,zf as j,qf as k,d as u};
