var Pd=t=>{throw TypeError(t)};var Ia=(t,e,r)=>e.has(t)||Pd("Cannot "+r);var S=(t,e,r)=>(Ia(t,e,"read from private field"),r?r.call(t):e.get(t)),Z=(t,e,r)=>e.has(t)?Pd("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),U=(t,e,r,s)=>(Ia(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),te=(t,e,r)=>(Ia(t,e,"access private method"),r);var Wi=(t,e,r,s)=>({set _(n){U(t,e,n,r)},get _(){return S(t,e,s)}});import{r as g,a as Pb,g as vm,c as Je,R as Go}from"./react-B6114-rA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var bm={exports:{}},da={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb=g,Nb=Symbol.for("react.element"),Cb=Symbol.for("react.fragment"),Ab=Object.prototype.hasOwnProperty,Ob=Eb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rb={key:!0,ref:!0,__self:!0,__source:!0};function xm(t,e,r){var s,n={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)Ab.call(e,s)&&!Rb.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:Nb,type:t,key:o,ref:a,props:n,_owner:Ob.current}}da.Fragment=Cb;da.jsx=xm;da.jsxs=xm;bm.exports=da;var i=bm.exports,Yl={},Ed=Pb;Yl.createRoot=Ed.createRoot,Yl.hydrateRoot=Ed.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Nd="popstate";function Ib(t={}){function e(s,n){let{pathname:o,search:a,hash:l}=s.location;return Kl("",{pathname:o,search:a,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:ci(n)}return Mb(e,r,null,t)}function ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $b(){return Math.random().toString(36).substring(2,10)}function Cd(t,e){return{usr:t.state,key:t.key,idx:e}}function Kl(t,e,r=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ln(e):e,state:r,key:e&&e.key||s||$b()}}function ci({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ln(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function Mb(t,e,r,s={}){let{window:n=document.defaultView,v5Compat:o=!1}=s,a=n.history,l="POP",c=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function h(){l="POP";let y=d(),x=y==null?null:y-u;u=y,c&&c({action:l,location:b.location,delta:x})}function f(y,x){l="PUSH";let j=Kl(b.location,y,x);u=d()+1;let v=Cd(j,u),w=b.createHref(j);try{a.pushState(v,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;n.location.assign(w)}o&&c&&c({action:l,location:b.location,delta:1})}function p(y,x){l="REPLACE";let j=Kl(b.location,y,x);u=d();let v=Cd(j,u),w=b.createHref(j);a.replaceState(v,"",w),o&&c&&c({action:l,location:b.location,delta:0})}function m(y){return Db(y)}let b={get action(){return l},get location(){return t(n,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Nd,h),c=y,()=>{n.removeEventListener(Nd,h),c=null}},createHref(y){return e(n,y)},createURL:m,encodeLocation(y){let x=m(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(y){return a.go(y)}};return b}function Db(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ge(r,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:ci(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function wm(t,e,r="/"){return Lb(t,e,r,!1)}function Lb(t,e,r,s){let n=typeof e=="string"?ln(e):e,o=Vt(n.pathname||"/",r);if(o==null)return null;let a=_m(t);Fb(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=Kb(o);l=Zb(a[c],u,s)}return l}function _m(t,e=[],r=[],s="",n=!1){let o=(a,l,c=n,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(s)&&c)return;ge(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length)}let h=Ut([s,d.relativePath]),f=r.concat(d);a.children&&a.children.length>0&&(ge(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),_m(a.children,e,f,h,c)),!(a.path==null&&!a.index)&&e.push({path:h,score:Wb(h,a.index),routesMeta:f})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))o(a,l);else for(let u of jm(a.path))o(a,l,!0,u)}),e}function jm(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,n=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let a=jm(s.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),n&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Fb(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Hb(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var zb=/^:[\w-]+$/,Ub=3,Bb=2,Vb=1,qb=10,Gb=-2,Ad=t=>t==="*";function Wb(t,e){let r=t.split("/"),s=r.length;return r.some(Ad)&&(s+=Gb),e&&(s+=Bb),r.filter(n=>!Ad(n)).reduce((n,o)=>n+(zb.test(o)?Ub:o===""?Vb:qb),s)}function Hb(t,e){return t.length===e.length&&t.slice(0,-1).every((s,n)=>s===e[n])?t[t.length-1]-e[e.length-1]:0}function Zb(t,e,r=!1){let{routesMeta:s}=t,n={},o="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=o==="/"?e:e.slice(o.length)||"/",h=Wo({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!s[s.length-1].route.index&&(h=Wo({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(n,h.params),a.push({params:n,pathname:Ut([o,h.pathname]),pathnameBase:ex(Ut([o,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(o=Ut([o,h.pathnameBase]))}return a}function Wo(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=Yb(t.path,t.caseSensitive,t.end),n=e.match(r);if(!n)return null;let o=n[0],a=o.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((u,{paramName:d,isOptional:h},f)=>{if(d==="*"){let m=l[f]||"";a=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const p=l[f];return h&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:t}}function Yb(t,e=!1,r=!0){mt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function Kb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Vt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function Jb(t,e="/"){let{pathname:r,search:s="",hash:n=""}=typeof t=="string"?ln(t):t;return{pathname:r?r.startsWith("/")?r:Qb(r,e):e,search:tx(s),hash:rx(n)}}function Qb(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function $a(t,e,r,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Xb(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function nu(t){let e=Xb(t);return e.map((r,s)=>s===e.length-1?r.pathname:r.pathnameBase)}function iu(t,e,r,s=!1){let n;typeof t=="string"?n=ln(t):(n={...t},ge(!n.pathname||!n.pathname.includes("?"),$a("?","pathname","search",n)),ge(!n.pathname||!n.pathname.includes("#"),$a("#","pathname","hash",n)),ge(!n.search||!n.search.includes("#"),$a("#","search","hash",n)));let o=t===""||n.pathname==="",a=o?"/":n.pathname,l;if(a==null)l=r;else{let h=e.length-1;if(!s&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;n.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=Jb(n,l),u=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Ut=t=>t.join("/").replace(/\/\/+/g,"/"),ex=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function sx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Sm=["POST","PUT","PATCH","DELETE"];new Set(Sm);var nx=["GET",...Sm];new Set(nx);var cn=g.createContext(null);cn.displayName="DataRouter";var ha=g.createContext(null);ha.displayName="DataRouterState";g.createContext(!1);var km=g.createContext({isTransitioning:!1});km.displayName="ViewTransition";var ix=g.createContext(new Map);ix.displayName="Fetchers";var ox=g.createContext(null);ox.displayName="Await";var gt=g.createContext(null);gt.displayName="Navigation";var Ei=g.createContext(null);Ei.displayName="Location";var at=g.createContext({outlet:null,matches:[],isDataRoute:!1});at.displayName="Route";var ou=g.createContext(null);ou.displayName="RouteError";function ax(t,{relative:e}={}){ge(un(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=g.useContext(gt),{hash:n,pathname:o,search:a}=Ci(t,{relative:e}),l=o;return r!=="/"&&(l=o==="/"?r:Ut([r,o])),s.createHref({pathname:l,search:a,hash:n})}function un(){return g.useContext(Ei)!=null}function Ot(){return ge(un(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Ei).location}var Tm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Pm(t){g.useContext(gt).static||g.useLayoutEffect(t)}function Ni(){let{isDataRoute:t}=g.useContext(at);return t?jx():lx()}function lx(){ge(un(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(cn),{basename:e,navigator:r}=g.useContext(gt),{matches:s}=g.useContext(at),{pathname:n}=Ot(),o=JSON.stringify(nu(s)),a=g.useRef(!1);return Pm(()=>{a.current=!0}),g.useCallback((c,u={})=>{if(mt(a.current,Tm),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=iu(c,JSON.parse(o),n,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ut([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,n,t])}var cx=g.createContext(null);function ux(t){let e=g.useContext(at).outlet;return e&&g.createElement(cx.Provider,{value:t},e)}function dx(){let{matches:t}=g.useContext(at),e=t[t.length-1];return e?e.params:{}}function Ci(t,{relative:e}={}){let{matches:r}=g.useContext(at),{pathname:s}=Ot(),n=JSON.stringify(nu(r));return g.useMemo(()=>iu(t,JSON.parse(n),s,e==="path"),[t,n,s,e])}function hx(t,e){return Em(t,e)}function Em(t,e,r,s,n){var j;ge(un(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=g.useContext(gt),{matches:a}=g.useContext(at),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let v=h&&h.path||"";Nm(u,!h||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let f=Ot(),p;if(e){let v=typeof e=="string"?ln(e):e;ge(d==="/"||((j=v.pathname)==null?void 0:j.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${v.pathname}" was given in the \`location\` prop.`),p=v}else p=f;let m=p.pathname||"/",b=m;if(d!=="/"){let v=d.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=wm(t,{pathname:b});mt(h||y!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),mt(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=yx(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:Ut([d,o.encodeLocation?o.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:Ut([d,o.encodeLocation?o.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,s,n);return e&&x?g.createElement(Ei.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function fx(){let t=_x(),e=sx(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=g.createElement(g.Fragment,null,g.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:o},"ErrorBoundary")," or"," ",g.createElement("code",{style:o},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),r?g.createElement("pre",{style:n},r):null,a)}var px=g.createElement(fx,null),mx=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?g.createElement(at.Provider,{value:this.props.routeContext},g.createElement(ou.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gx({routeContext:t,match:e,children:r}){let s=g.useContext(cn);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),g.createElement(at.Provider,{value:t},r)}function yx(t,e=[],r=null,s=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=r==null?void 0:r.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);ge(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(r)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=r,p=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,m=null,b=null;r&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||px,l&&(c<0&&h===0?(Nm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,b=null):c===h&&(p=!0,b=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),x=()=>{let j;return f?j=m:p?j=b:d.route.Component?j=g.createElement(d.route.Component,null):d.route.element?j=d.route.element:j=u,g.createElement(gx,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:r!=null},children:j})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?g.createElement(mx,{location:r.location,revalidation:r.revalidation,component:m,error:f,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0},unstable_onError:s}):x()},null)}function au(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vx(t){let e=g.useContext(cn);return ge(e,au(t)),e}function bx(t){let e=g.useContext(ha);return ge(e,au(t)),e}function xx(t){let e=g.useContext(at);return ge(e,au(t)),e}function lu(t){let e=xx(t),r=e.matches[e.matches.length-1];return ge(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function wx(){return lu("useRouteId")}function _x(){var s;let t=g.useContext(ou),e=bx("useRouteError"),r=lu("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[r]}function jx(){let{router:t}=vx("useNavigate"),e=lu("useNavigate"),r=g.useRef(!1);return Pm(()=>{r.current=!0}),g.useCallback(async(n,o={})=>{mt(r.current,Tm),r.current&&(typeof n=="number"?t.navigate(n):await t.navigate(n,{fromRouteId:e,...o}))},[t,e])}var Od={};function Nm(t,e,r){!e&&!Od[t]&&(Od[t]=!0,mt(!1,r))}g.memo(Sx);function Sx({routes:t,future:e,state:r,unstable_onError:s}){return Em(t,void 0,r,s,e)}function Jl({to:t,replace:e,state:r,relative:s}){ge(un(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=g.useContext(gt);mt(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=g.useContext(at),{pathname:a}=Ot(),l=Ni(),c=iu(t,nu(o),a,s==="path"),u=JSON.stringify(c);return g.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:s})},[l,u,s,e,r]),null}function cu(t){return ux(t.context)}function q(t){ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kx({basename:t="/",children:e=null,location:r,navigationType:s="POP",navigator:n,static:o=!1}){ge(!un(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:a,navigator:n,static:o,future:{}}),[a,n,o]);typeof r=="string"&&(r=ln(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:f="default"}=r,p=g.useMemo(()=>{let m=Vt(c,a);return m==null?null:{location:{pathname:m,search:u,hash:d,state:h,key:f},navigationType:s}},[a,c,u,d,h,f,s]);return mt(p!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:g.createElement(gt.Provider,{value:l},g.createElement(Ei.Provider,{children:e,value:p}))}function Ql({children:t,location:e}){return hx(Xl(t),e)}function Xl(t,e=[]){let r=[];return g.Children.forEach(t,(s,n)=>{if(!g.isValidElement(s))return;let o=[...e,n];if(s.type===g.Fragment){r.push.apply(r,Xl(s.props.children,o));return}ge(s.type===q,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ge(!s.props.index||!s.props.children,"An index route cannot have child routes.");let a={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Xl(s.props.children,o)),r.push(a)}),r}var Ro="get",Io="application/x-www-form-urlencoded";function fa(t){return t!=null&&typeof t.tagName=="string"}function Tx(t){return fa(t)&&t.tagName.toLowerCase()==="button"}function Px(t){return fa(t)&&t.tagName.toLowerCase()==="form"}function Ex(t){return fa(t)&&t.tagName.toLowerCase()==="input"}function Nx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Cx(t,e){return t.button===0&&(!e||e==="_self")&&!Nx(t)}var Hi=null;function Ax(){if(Hi===null)try{new FormData(document.createElement("form"),0),Hi=!1}catch{Hi=!0}return Hi}var Ox=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ma(t){return t!=null&&!Ox.has(t)?(mt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Io}"`),null):t}function Rx(t,e){let r,s,n,o,a;if(Px(t)){let l=t.getAttribute("action");s=l?Vt(l,e):null,r=t.getAttribute("method")||Ro,n=Ma(t.getAttribute("enctype"))||Io,o=new FormData(t)}else if(Tx(t)||Ex(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(s=c?Vt(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||Ro,n=Ma(t.getAttribute("formenctype"))||Ma(l.getAttribute("enctype"))||Io,o=new FormData(l,t),!Ax()){let{name:u,type:d,value:h}=t;if(d==="image"){let f=u?`${u}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else u&&o.append(u,h)}}else{if(fa(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ro,s=null,n=Io,a=t}return o&&n==="text/plain"&&(a=o,o=void 0),{action:s,method:r.toLowerCase(),encType:n,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uu(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ix(t,e,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${r}`:e&&Vt(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function $x(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Mx(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Dx(t,e,r){let s=await Promise.all(t.map(async n=>{let o=e.routes[n.route.id];if(o){let a=await $x(o,r);return a.links?a.links():[]}return[]}));return Ux(s.flat(1).filter(Mx).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function Rd(t,e,r,s,n,o){let a=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,u)=>a(c,u)||l(c,u)):o==="data"?e.filter((c,u)=>{var h;let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Lx(t,e,{includeHydrateFallback:r}={}){return Fx(t.map(s=>{let n=e.routes[s.route.id];if(!n)return[];let o=[n.module];return n.clientActionModule&&(o=o.concat(n.clientActionModule)),n.clientLoaderModule&&(o=o.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(o=o.concat(n.hydrateFallbackModule)),n.imports&&(o=o.concat(n.imports)),o}).flat(1))}function Fx(t){return[...new Set(t)]}function zx(t){let e={},r=Object.keys(t).sort();for(let s of r)e[s]=t[s];return e}function Ux(t,e){let r=new Set;return new Set(e),t.reduce((s,n)=>{let o=JSON.stringify(zx(n));return r.has(o)||(r.add(o),s.push({key:o,link:n})),s},[])}function Cm(){let t=g.useContext(cn);return uu(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Bx(){let t=g.useContext(ha);return uu(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var du=g.createContext(void 0);du.displayName="FrameworkContext";function Am(){let t=g.useContext(du);return uu(t,"You must render this element inside a <HydratedRouter> element"),t}function Vx(t,e){let r=g.useContext(du),[s,n]=g.useState(!1),[o,a]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=e,f=g.useRef(null);g.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let b=x=>{x.forEach(j=>{a(j.isIntersecting)})},y=new IntersectionObserver(b,{threshold:.5});return f.current&&y.observe(f.current),()=>{y.disconnect()}}},[t]),g.useEffect(()=>{if(s){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[s]);let p=()=>{n(!0)},m=()=>{n(!1),a(!1)};return r?t!=="intent"?[o,f,{}]:[o,f,{onFocus:wn(l,p),onBlur:wn(c,m),onMouseEnter:wn(u,p),onMouseLeave:wn(d,m),onTouchStart:wn(h,p)}]:[!1,f,{}]}function wn(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function qx({page:t,...e}){let{router:r}=Cm(),s=g.useMemo(()=>wm(r.routes,t,r.basename),[r.routes,t,r.basename]);return s?g.createElement(Wx,{page:t,matches:s,...e}):null}function Gx(t){let{manifest:e,routeModules:r}=Am(),[s,n]=g.useState([]);return g.useEffect(()=>{let o=!1;return Dx(t,e,r).then(a=>{o||n(a)}),()=>{o=!0}},[t,e,r]),s}function Wx({page:t,matches:e,...r}){let s=Ot(),{manifest:n,routeModules:o}=Am(),{basename:a}=Cm(),{loaderData:l,matches:c}=Bx(),u=g.useMemo(()=>Rd(t,e,c,n,s,"data"),[t,e,c,n,s]),d=g.useMemo(()=>Rd(t,e,c,n,s,"assets"),[t,e,c,n,s]),h=g.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let m=new Set,b=!1;if(e.forEach(x=>{var v;let j=n.routes[x.route.id];!j||!j.hasLoader||(!u.some(w=>w.route.id===x.route.id)&&x.route.id in l&&((v=o[x.route.id])!=null&&v.shouldRevalidate)||j.hasClientLoader?b=!0:m.add(x.route.id))}),m.size===0)return[];let y=Ix(t,a,"data");return b&&m.size>0&&y.searchParams.set("_routes",e.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[y.pathname+y.search]},[a,l,s,n,u,e,t,o]),f=g.useMemo(()=>Lx(d,n),[d,n]),p=Gx(d);return g.createElement(g.Fragment,null,h.map(m=>g.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),f.map(m=>g.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),p.map(({key:m,link:b})=>g.createElement("link",{key:m,nonce:r.nonce,...b})))}function Hx(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Om=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Om&&(window.__reactRouterVersion="7.8.2")}catch{}function Zx({basename:t,children:e,window:r}){let s=g.useRef();s.current==null&&(s.current=Ib({window:r,v5Compat:!0}));let n=s.current,[o,a]=g.useState({action:n.action,location:n.location}),l=g.useCallback(c=>{g.startTransition(()=>a(c))},[a]);return g.useLayoutEffect(()=>n.listen(l),[n,l]),g.createElement(kx,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:n})}var Rm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vr=g.forwardRef(function({onClick:e,discover:r="render",prefetch:s="none",relative:n,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h,...f},p){let{basename:m}=g.useContext(gt),b=typeof u=="string"&&Rm.test(u),y,x=!1;if(typeof u=="string"&&b&&(y=u,Om))try{let k=new URL(window.location.href),R=u.startsWith("//")?new URL(k.protocol+u):new URL(u),T=Vt(R.pathname,m);R.origin===k.origin&&T!=null?u=T+R.search+R.hash:x=!0}catch{mt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=ax(u,{relative:n}),[v,w,E]=Vx(s,f),O=Jx(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:n,viewTransition:h});function $(k){e&&e(k),k.defaultPrevented||O(k)}let N=g.createElement("a",{...f,...E,href:y||j,onClick:x||o?e:$,ref:Hx(p,w),target:c,"data-discover":!b&&r==="render"?"true":void 0});return v&&!b?g.createElement(g.Fragment,null,N,g.createElement(qx,{page:j})):N});vr.displayName="Link";var $s=g.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:s="",end:n=!1,style:o,to:a,viewTransition:l,children:c,...u},d){let h=Ci(a,{relative:u.relative}),f=Ot(),p=g.useContext(ha),{navigator:m,basename:b}=g.useContext(gt),y=p!=null&&r0(h)&&l===!0,x=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,j=f.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(j=j.toLowerCase(),v=v?v.toLowerCase():null,x=x.toLowerCase()),v&&b&&(v=Vt(v,b)||v);const w=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let E=j===x||!n&&j.startsWith(x)&&j.charAt(w)==="/",O=v!=null&&(v===x||!n&&v.startsWith(x)&&v.charAt(x.length)==="/"),$={isActive:E,isPending:O,isTransitioning:y},N=E?e:void 0,k;typeof s=="function"?k=s($):k=[s,E?"active":null,O?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o($):o;return g.createElement(vr,{...u,"aria-current":N,className:k,ref:d,style:R,to:a,viewTransition:l},typeof c=="function"?c($):c)});$s.displayName="NavLink";var Yx=g.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:s,replace:n,state:o,method:a=Ro,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...f},p)=>{let m=e0(),b=t0(l,{relative:u}),y=a.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&Rm.test(l),j=v=>{if(c&&c(v),v.defaultPrevented)return;v.preventDefault();let w=v.nativeEvent.submitter,E=(w==null?void 0:w.getAttribute("formmethod"))||a;m(w||v.currentTarget,{fetcherKey:e,method:E,navigate:r,replace:n,state:o,relative:u,preventScrollReset:d,viewTransition:h})};return g.createElement("form",{ref:p,method:y,action:b,onSubmit:s?c:j,...f,"data-discover":!x&&t==="render"?"true":void 0})});Yx.displayName="Form";function Kx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Im(t){let e=g.useContext(cn);return ge(e,Kx(t)),e}function Jx(t,{target:e,replace:r,state:s,preventScrollReset:n,relative:o,viewTransition:a}={}){let l=Ni(),c=Ot(),u=Ci(t,{relative:o});return g.useCallback(d=>{if(Cx(d,e)){d.preventDefault();let h=r!==void 0?r:ci(c)===ci(u);l(t,{replace:h,state:s,preventScrollReset:n,relative:o,viewTransition:a})}},[c,l,u,r,s,e,t,n,o,a])}var Qx=0,Xx=()=>`__${String(++Qx)}__`;function e0(){let{router:t}=Im("useSubmit"),{basename:e}=g.useContext(gt),r=wx();return g.useCallback(async(s,n={})=>{let{action:o,method:a,encType:l,formData:c,body:u}=Rx(s,e);if(n.navigate===!1){let d=n.fetcherKey||Xx();await t.fetch(d,r,n.action||o,{preventScrollReset:n.preventScrollReset,formData:c,body:u,formMethod:n.method||a,formEncType:n.encType||l,flushSync:n.flushSync})}else await t.navigate(n.action||o,{preventScrollReset:n.preventScrollReset,formData:c,body:u,formMethod:n.method||a,formEncType:n.encType||l,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[t,e,r])}function t0(t,{relative:e}={}){let{basename:r}=g.useContext(gt),s=g.useContext(at);ge(s,"useFormAction must be used inside a RouteContext");let[n]=s.matches.slice(-1),o={...Ci(t||".",{relative:e})},a=Ot();if(t==null){o.search=a.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();o.search=d?`?${d}`:""}}return(!t||t===".")&&n.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:Ut([r,o.pathname])),ci(o)}function r0(t,{relative:e}={}){let r=g.useContext(km);ge(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Im("useViewTransitionState"),n=Ci(t,{relative:e});if(!r.isTransitioning)return!1;let o=Vt(r.currentLocation.pathname,s)||r.currentLocation.pathname,a=Vt(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Wo(n.pathname,a)!=null||Wo(n.pathname,o)!=null}function $m(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(r=$m(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function hu(){for(var t,e,r=0,s="",n=arguments.length;r<n;r++)(t=arguments[r])&&(e=$m(t))&&(s&&(s+=" "),s+=e);return s}const fu="-",s0=t=>{const e=i0(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:a=>{const l=a.split(fu);return l[0]===""&&l.length!==1&&l.shift(),Mm(l,e)||n0(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},Mm=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],s=e.nextPart.get(r),n=s?Mm(t.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const o=t.join(fu);return(a=e.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},Id=/^\[(.+)\]$/,n0=t=>{if(Id.test(t)){const e=Id.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},i0=t=>{const{theme:e,prefix:r}=t,s={nextPart:new Map,validators:[]};return a0(Object.entries(t.classGroups),r).forEach(([o,a])=>{ec(a,s,o,e)}),s},ec=(t,e,r,s)=>{t.forEach(n=>{if(typeof n=="string"){const o=n===""?e:$d(e,n);o.classGroupId=r;return}if(typeof n=="function"){if(o0(n)){ec(n(s),e,r,s);return}e.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([o,a])=>{ec(a,$d(e,o),r,s)})})},$d=(t,e)=>{let r=t;return e.split(fu).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},o0=t=>t.isThemeGetter,a0=(t,e)=>e?t.map(([r,s])=>{const n=s.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[e+a,l])):o);return[r,n]}):t,l0=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,s=new Map;const n=(o,a)=>{r.set(o,a),e++,e>t&&(e=0,s=r,r=new Map)};return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=s.get(o))!==void 0)return n(o,a),a},set(o,a){r.has(o)?r.set(o,a):n(o,a)}}},Dm="!",c0=t=>{const{separator:e,experimentalParseClassName:r}=t,s=e.length===1,n=e[0],o=e.length,a=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let x=l[y];if(u===0){if(x===n&&(s||l.slice(y,y+o)===e)){c.push(l.slice(d,y)),d=y+o;continue}if(x==="/"){h=y;continue}}x==="["?u++:x==="]"&&u--}const f=c.length===0?l:l.substring(d),p=f.startsWith(Dm),m=p?f.substring(1):f,b=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:b}};return r?l=>r({className:l,parseClassName:a}):a},u0=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(s=>{s[0]==="["?(e.push(...r.sort(),s),r=[]):r.push(s)}),e.push(...r.sort()),e},d0=t=>({cache:l0(t.cacheSize),parseClassName:c0(t),...s0(t)}),h0=/\s+/,f0=(t,e)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:n}=e,o=[],a=t.trim().split(h0);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=r(u);let m=!!p,b=s(m?f.substring(0,p):f);if(!b){if(!m){l=u+(l.length>0?" "+l:l);continue}if(b=s(f),!b){l=u+(l.length>0?" "+l:l);continue}m=!1}const y=u0(d).join(":"),x=h?y+Dm:y,j=x+b;if(o.includes(j))continue;o.push(j);const v=n(b,m);for(let w=0;w<v.length;++w){const E=v[w];o.push(x+E)}l=u+(l.length>0?" "+l:l)}return l};function p0(){let t=0,e,r,s="";for(;t<arguments.length;)(e=arguments[t++])&&(r=Lm(e))&&(s&&(s+=" "),s+=r);return s}const Lm=t=>{if(typeof t=="string")return t;let e,r="";for(let s=0;s<t.length;s++)t[s]&&(e=Lm(t[s]))&&(r&&(r+=" "),r+=e);return r};function m0(t,...e){let r,s,n,o=a;function a(c){const u=e.reduce((d,h)=>h(d),t());return r=d0(u),s=r.cache.get,n=r.cache.set,o=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=f0(c,r);return n(c,d),d}return function(){return o(p0.apply(null,arguments))}}const he=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},Fm=/^\[(?:([a-z-]+):)?(.+)\]$/i,g0=/^\d+\/\d+$/,y0=new Set(["px","full","screen"]),v0=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,b0=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,x0=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,w0=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_0=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rt=t=>Ms(t)||y0.has(t)||g0.test(t),Wt=t=>dn(t,"length",C0),Ms=t=>!!t&&!Number.isNaN(Number(t)),Da=t=>dn(t,"number",Ms),_n=t=>!!t&&Number.isInteger(Number(t)),j0=t=>t.endsWith("%")&&Ms(t.slice(0,-1)),Q=t=>Fm.test(t),Ht=t=>v0.test(t),S0=new Set(["length","size","percentage"]),k0=t=>dn(t,S0,zm),T0=t=>dn(t,"position",zm),P0=new Set(["image","url"]),E0=t=>dn(t,P0,O0),N0=t=>dn(t,"",A0),jn=()=>!0,dn=(t,e,r)=>{const s=Fm.exec(t);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):r(s[2]):!1},C0=t=>b0.test(t)&&!x0.test(t),zm=()=>!1,A0=t=>w0.test(t),O0=t=>_0.test(t),R0=()=>{const t=he("colors"),e=he("spacing"),r=he("blur"),s=he("brightness"),n=he("borderColor"),o=he("borderRadius"),a=he("borderSpacing"),l=he("borderWidth"),c=he("contrast"),u=he("grayscale"),d=he("hueRotate"),h=he("invert"),f=he("gap"),p=he("gradientColorStops"),m=he("gradientColorStopPositions"),b=he("inset"),y=he("margin"),x=he("opacity"),j=he("padding"),v=he("saturate"),w=he("scale"),E=he("sepia"),O=he("skew"),$=he("space"),N=he("translate"),k=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",Q,e],M=()=>[Q,e],J=()=>["",Rt,Wt],F=()=>["auto",Ms,Q],C=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Q],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>[Ms,Q];return{cacheSize:500,separator:":",theme:{colors:[jn],spacing:[Rt,Wt],blur:["none","",Ht,Q],brightness:le(),borderColor:[t],borderRadius:["none","","full",Ht,Q],borderSpacing:M(),borderWidth:J(),contrast:le(),grayscale:H(),hueRotate:le(),invert:H(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[j0,Wt],inset:T(),margin:T(),opacity:le(),padding:M(),saturate:le(),scale:le(),sepia:H(),skew:le(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Q]}],container:["container"],columns:[{columns:[Ht]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...C(),Q]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_n,Q]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Q]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",_n,Q]}],"grid-cols":[{"grid-cols":[jn]}],"col-start-end":[{col:["auto",{span:["full",_n,Q]},Q]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[jn]}],"row-start-end":[{row:["auto",{span:[_n,Q]},Q]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Q]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Q]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Q,e]}],"min-w":[{"min-w":[Q,e,"min","max","fit"]}],"max-w":[{"max-w":[Q,e,"none","full","min","max","fit","prose",{screen:[Ht]},Ht]}],h:[{h:[Q,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Q,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Q,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Q,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ht,Wt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Da]}],"font-family":[{font:[jn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Q]}],"line-clamp":[{"line-clamp":["none",Ms,Da]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rt,Q]}],"list-image":[{"list-image":["none",Q]}],"list-style-type":[{list:["none","disc","decimal",Q]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Rt,Wt]}],"underline-offset":[{"underline-offset":["auto",Rt,Q]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...C(),T0]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",k0]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},E0]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:L()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[Rt,Q]}],"outline-w":[{outline:[Rt,Wt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Rt,Wt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ht,N0]}],"shadow-color":[{shadow:[jn]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ht,Q]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Q]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",Q]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",Q]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[_n,Q]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Q]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Q]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Q]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Rt,Wt,Da]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Um=m0(R0);function Xe(...t){return Um(hu(t))}const Bm=g.createContext(void 0),I0=({children:t,supabaseClient:e})=>{const[r,s]=g.useState(null),[n,o]=g.useState(null),[a,l]=g.useState(null),[c,u]=g.useState(!1),[d,h]=g.useState(!1),[f,p]=g.useState(!0),[m,b]=g.useState(!1);return g.useEffect(()=>{const{data:y}=e.auth.onAuthStateChange(async(x,j)=>{o(j),s((j==null?void 0:j.user)||null),p(!1)});return e.auth.getSession().then(({data:{session:x}})=>{o(x),s((x==null?void 0:x.user)||null),p(!1)}),()=>{y.subscription.unsubscribe()}},[e]),g.useEffect(()=>{const y=async j=>{try{const{data:v,error:w}=await e.from("profiles").select("*").eq("id",j).single();if(w){if(w.code==="PGRST116"){await x(j);return}throw w}l(v),u((v==null?void 0:v.role)==="admin"||(v==null?void 0:v.role)==="super_admin");const{data:E,error:O}=await e.rpc("get_user_active_subscription",{user_uuid:j});if(O)throw O;b(!!E)}catch(v){console.error("Error fetching user profile or subscription:",v),l(null),u(!1),b(!1)}},x=async j=>{var v,w,E;try{const{data:{user:O},error:$}=await e.auth.getUser();if($||!O){console.error("Error getting user info for profile creation:",$);return}const{data:N,error:k}=await e.from("profiles").insert({id:j,username:((v=O.email)==null?void 0:v.split("@")[0])||null,display_name:((w=O.user_metadata)==null?void 0:w.full_name)||((E=O.email)==null?void 0:E.split("@")[0])||"User",email:O.email,role:"user",subscription_status:"inactive",beta_reader_status:"none"}).select().single();k?(console.error("Error creating user profile:",k),l(null),u(!1)):(l(N),u((N==null?void 0:N.role)==="admin"||(N==null?void 0:N.role)==="super_admin"))}catch(O){console.error("Error in createUserProfile:",O),l(null),u(!1)}};r!=null&&r.id?(y(r.id),h(!0)):(l(null),u(!1),b(!1),h(!1))},[r,e]),i.jsx(Bm.Provider,{value:{user:r,session:n,userProfile:a,isAdmin:c,isAuthenticated:d,isLoading:f,isSubscribed:m,supabaseClient:e},children:t})},Ai=()=>{const t=g.useContext(Bm);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},$0="modulepreload",M0=function(t){return"/"+t},Md={},Oi=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(r.map(c=>{if(c=M0(c),c in Md)return;Md[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":$0,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return n.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},D0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Oi(async()=>{const{default:s}=await Promise.resolve().then(()=>hn);return{default:s}},[]).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class pu extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class L0 extends pu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Dd extends pu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ld extends pu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(tc||(tc={}));var F0=function(t,e,r,s){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class z0{constructor(e,{headers:r={},customFetch:s,region:n=tc.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=D0(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return F0(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:a}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:d}).catch(b=>{throw new L0(b)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Dd(h);if(!h.ok)throw new Ld(h);let p=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield h.json():p==="application/octet-stream"?m=yield h.blob():p==="text/event-stream"?m=h:p==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof Ld||n instanceof Dd?n.context:void 0}}})}}var Ye={},mu={},pa={},Ri={},ma={},ga={},U0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Xs=U0();const B0=Xs.fetch,Vm=Xs.fetch.bind(Xs),qm=Xs.Headers,V0=Xs.Request,q0=Xs.Response,hn=Object.freeze(Object.defineProperty({__proto__:null,Headers:qm,Request:V0,Response:q0,default:Vm,fetch:B0},Symbol.toStringTag,{value:"Module"})),G0=vm(hn);var ya={};Object.defineProperty(ya,"__esModule",{value:!0});let W0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ya.default=W0;var Gm=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ga,"__esModule",{value:!0});const H0=Gm(G0),Z0=Gm(ya);let Y0=class{constructor(e){var r,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=H0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var a,l,c,u;let d=null,h=null,f=null,p=o.status,m=o.statusText;if(o.ok){if(this.method!=="HEAD"){const j=await o.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=j:h=JSON.parse(j))}const y=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");y&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,m="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await o.text();try{d=JSON.parse(y),Array.isArray(d)&&o.status===404&&(h=[],d=null,p=200,m="OK")}catch{o.status===404&&y===""?(p=204,m="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new Z0.default(d)}return{error:d,data:h,count:f,status:p,statusText:m}});return this.shouldThrowOnError||(n=n.catch(o=>{var a,l,c;return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,r)}returns(){return this}overrideTypes(){return this}};ga.default=Y0;var K0=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ma,"__esModule",{value:!0});const J0=K0(ga);let Q0=class extends J0.default{select(e){let r=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:n,referencedTable:o=n}={}){const a=o?`${o}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:n=s}={}){const o=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(a,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:o=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};ma.default=Q0;var X0=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ri,"__esModule",{value:!0});const ew=X0(ma);let tw=class extends ew.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${o}fts${a}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}};Ri.default=tw;var rw=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pa,"__esModule",{value:!0});const Sn=rw(Ri);let sw=class{constructor(e,{headers:r={},schema:s,fetch:n}){this.url=e,this.headers=new Headers(r),this.schema=s,this.fetch=n}select(e,{head:r=!1,count:s}={}){const n=r?"HEAD":"GET";let o=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new Sn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:s=!0}={}){var n;const o="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Sn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:o=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),n&&this.headers.append("Prefer",`count=${n}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Sn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:r}={}){var s;const n="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Sn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var r;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Sn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};pa.default=sw;var Wm=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mu,"__esModule",{value:!0});const nw=Wm(pa),iw=Wm(Ri);let ow=class Hm{constructor(e,{headers:r={},schema:s,fetch:n}={}){this.url=e,this.headers=new Headers(r),this.schemaName=s,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new nw.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Hm(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:n=!1,count:o}={}){var a;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;s||n?(l=s?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=r);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new iw.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};mu.default=ow;var fn=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.PostgrestError=Ye.PostgrestBuilder=Ye.PostgrestTransformBuilder=Ye.PostgrestFilterBuilder=Ye.PostgrestQueryBuilder=Ye.PostgrestClient=void 0;const Zm=fn(mu);Ye.PostgrestClient=Zm.default;const Ym=fn(pa);Ye.PostgrestQueryBuilder=Ym.default;const Km=fn(Ri);Ye.PostgrestFilterBuilder=Km.default;const Jm=fn(ma);Ye.PostgrestTransformBuilder=Jm.default;const Qm=fn(ga);Ye.PostgrestBuilder=Qm.default;const Xm=fn(ya);Ye.PostgrestError=Xm.default;var aw=Ye.default={PostgrestClient:Zm.default,PostgrestQueryBuilder:Ym.default,PostgrestFilterBuilder:Km.default,PostgrestTransformBuilder:Jm.default,PostgrestBuilder:Qm.default,PostgrestError:Xm.default};const{PostgrestClient:lw,PostgrestQueryBuilder:SL,PostgrestFilterBuilder:kL,PostgrestTransformBuilder:TL,PostgrestBuilder:PL,PostgrestError:EL}=aw;class cw{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const uw="2.15.1",dw=`realtime-js/${uw}`,hw="1.0.0",rc=1e4,fw=1e3,pw=100;var Kn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Kn||(Kn={}));var Ce;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ce||(Ce={}));var pt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(pt||(pt={}));var sc;(function(t){t.websocket="websocket"})(sc||(sc={}));var zr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(zr||(zr={}));class mw{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const n=r.getUint8(1),o=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=s.decode(e.slice(a,a+n));a=a+n;const c=s.decode(e.slice(a,a+o));a=a+o;const u=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class eg{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ce;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ce||(ce={}));const Fd=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((o,a)=>(o[a]=gw(a,t,e,n),o),{})},gw=(t,e,r,s)=>{const n=e.find(l=>l.name===t),o=n==null?void 0:n.type,a=r[t];return o&&!s.includes(o)?tg(o,a):nc(a)},tg=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return xw(e,r)}switch(t){case ce.bool:return yw(e);case ce.float4:case ce.float8:case ce.int2:case ce.int4:case ce.int8:case ce.numeric:case ce.oid:return vw(e);case ce.json:case ce.jsonb:return bw(e);case ce.timestamp:return ww(e);case ce.abstime:case ce.date:case ce.daterange:case ce.int4range:case ce.int8range:case ce.money:case ce.reltime:case ce.text:case ce.time:case ce.timestamptz:case ce.timetz:case ce.tsrange:case ce.tstzrange:return nc(e);default:return nc(e)}},nc=t=>t,yw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},vw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},bw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},xw=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let o;const a=t.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>tg(e,l))}return t},ww=t=>typeof t=="string"?t.replace(" ","T"):t,rg=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class La{constructor(e,r,s={},n=rc){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(zd||(zd={}));class Jn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jn.syncState(this.state,n,o,a),this.pendingDiffs.forEach(c=>{this.state=Jn.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Jn.syncDiff(this.state,n,o,a),l())}),this.onJoin((n,o,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:a})}),this.onLeave((n,o,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const o=this.cloneDeep(e),a=this.transformState(r),l={},c={};return this.map(o,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=o[u];if(h){const f=d.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),m=d.filter(y=>p.indexOf(y.presence_ref)<0),b=h.filter(y=>f.indexOf(y.presence_ref)<0);m.length>0&&(l[u]=m),b.length>0&&(c[u]=b)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},s,n)}static syncDiff(e,r,s,n){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...f)}s(l,d,c)}),this.map(a,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,n(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ud;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ud||(Ud={}));var Qn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Qn||(Qn={}));var Dt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Dt||(Dt={}));class gu{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new La(this,pt.join,this.params,this.timeout),this.rejoinTimer=new eg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ce.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pt.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new Jn(this),this.broadcastEndpointURL=rg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==Ce.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[Qn.PRESENCE]&&this.bindings[Qn.PRESENCE].length>0,d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Dt.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Dt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){e==null||e(Dt.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,b=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,y=[];for(let x=0;x<b;x++){const j=m[x],{filter:{event:v,schema:w,table:E,filter:O}}=j,$=f&&f[x];if($&&$.event===v&&$.schema===w&&$.table===E&&$.filter===O)y.push(Object.assign(Object.assign({},j),{id:$.id}));else{this.unsubscribe(),this.state=Ce.errored,e==null||e(Dt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Dt.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ce.errored,e==null||e(Dt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Dt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===Ce.joined&&e===Qn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ce.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new La(this,pt.leave,{},e),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ce.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const n=new AbortController,o=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(o),a}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new La(this,e,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>pw){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,o;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=pt;if(s&&[l,c,u,d].indexOf(a)>=0&&s!==this._joinRef())return;let f=this._onMessage(a,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var m,b,y;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(b=p.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(p=>p.callback(f,s)):(o=this.bindings[a])===null||o===void 0||o.filter(p=>{var m,b,y,x,j,v;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const w=p.id,E=(m=p.filter)===null||m===void 0?void 0:m.event;return w&&((b=r.ids)===null||b===void 0?void 0:b.includes(w))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const w=(j=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return w==="*"||w===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:b,table:y,commit_timestamp:x,type:j,errors:v}=m;f=Object.assign(Object.assign({},{schema:b,table:y,commit_timestamp:x,eventType:j,new:{},old:{},errors:v}),this._getPayloadRecords(m))}p.callback(f,s)})}_isClosed(){return this.state===Ce.closed}_isJoined(){return this.state===Ce.joined}_isJoining(){return this.state===Ce.joining}_isLeaving(){return this.state===Ce.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),o={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&gu.isEqual(n.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pt.close,{},e)}_onError(e){this._on(pt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ce.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Fd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Fd(e.columns,e.old_record)),r}}const Bd=()=>{},Zi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_w=[1e3,2e3,5e3,1e4],jw=1e4,Sw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kw{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=rc,this.transport=null,this.heartbeatIntervalMs=Zi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bd,this.ref=0,this.reconnectTimer=null,this.logger=Bd,this.conn=null,this.sendBuffer=[],this.serializer=new mw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...a)=>Oi(async()=>{const{default:l}=await Promise.resolve().then(()=>hn);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...a)=>o(...a)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${sc.websocket}`,this.httpEndpoint=rg(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=cw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hw}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Kn.connecting:return zr.Connecting;case Kn.open:return zr.Open;case Kn.closing:return zr.Closing;default:return zr.Closed}}isConnected(){return this.connectionState()===zr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(o=>o.topic===s);if(n)return n;{const o=new gu(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:s,payload:n,ref:o}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${o})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(fw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Zi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:o,ref:a}=r,l=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${s} ${n} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(n,o,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(pt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([Sw],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const n={access_token:r,version:dw};r&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(pt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new eg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,n,o,a,l,c,u;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:rc,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:Zi.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>_w[d-1]||jw,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class yu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Oe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Tw extends yu{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ic extends yu{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Pw=function(t,e,r,s){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const sg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Oi(async()=>{const{default:s}=await Promise.resolve().then(()=>hn);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Ew=()=>Pw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Oi(()=>Promise.resolve().then(()=>hn),void 0)).Response:Response}),oc=t=>{if(Array.isArray(t))return t.map(r=>oc(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[n]=oc(s)}),e},Nw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var as=function(t,e,r,s){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Fa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Cw=(t,e,r)=>as(void 0,void 0,void 0,function*(){const s=yield Ew();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const o=t.status||500,a=(n==null?void 0:n.statusCode)||o+"";e(new Tw(Fa(n),o,a))}).catch(n=>{e(new ic(Fa(n),n))}):e(new ic(Fa(t),t))}),Aw=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?n:(Nw(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),r))};function Ii(t,e,r,s,n,o){return as(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(r,Aw(e,s,n,o)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Cw(c,l,s))})})}function Ho(t,e,r,s){return as(this,void 0,void 0,function*(){return Ii(t,"GET",e,r,s)})}function wt(t,e,r,s,n){return as(this,void 0,void 0,function*(){return Ii(t,"POST",e,s,n,r)})}function ac(t,e,r,s,n){return as(this,void 0,void 0,function*(){return Ii(t,"PUT",e,s,n,r)})}function Ow(t,e,r,s){return as(this,void 0,void 0,function*(){return Ii(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function ng(t,e,r,s,n){return as(this,void 0,void 0,function*(){return Ii(t,"DELETE",e,s,n,r)})}var ze=function(t,e,r,s){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Rw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Iw{constructor(e,r={},s,n){this.url=e,this.headers=r,this.bucketId=s,this.fetch=sg(n)}uploadOrUpdate(e,r,s,n){return ze(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},Vd),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=s,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(e=="PUT"?ac:wt)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(Oe(o))return{data:null,error:o};throw o}})}upload(e,r,s){return ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,n){return ze(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Vd.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield ac(this.fetch,l.toString(),c,{headers:d});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(Oe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const o=yield wt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new yu("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}update(e,r,s){return ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return ze(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}copy(e,r,s){return ze(this,void 0,void 0,function*(){try{return{data:{path:(yield wt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}createSignedUrl(e,r,s){return ze(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),o=yield wt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,r,s){return ze(this,void 0,void 0,function*(){try{const n=yield wt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}download(e,r){return ze(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=o?`?${o}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ho(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Oe(l))return{data:null,error:l};throw l}})}info(e){return ze(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Ho(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:oc(s),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}exists(e){return ze(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Ow(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Oe(s)&&s instanceof ic){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),n=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&n.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return ze(this,void 0,void 0,function*(){try{return{data:yield ng(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}list(e,r,s){return ze(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Rw),r),{prefix:e||""});return{data:yield wt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}listV2(e,r){return ze(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield wt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const $w="2.11.0",Mw={"X-Client-Info":`storage-js/${$w}`};var cs=function(t,e,r,s){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class Dw{constructor(e,r={},s,n){const o=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},Mw),r),this.fetch=sg(s)}listBuckets(){return cs(this,void 0,void 0,function*(){try{return{data:yield Ho(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Oe(e))return{data:null,error:e};throw e}})}getBucket(e){return cs(this,void 0,void 0,function*(){try{return{data:yield Ho(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return cs(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return cs(this,void 0,void 0,function*(){try{return{data:yield ac(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}emptyBucket(e){return cs(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return cs(this,void 0,void 0,function*(){try{return{data:yield ng(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}}class Lw extends Dw{constructor(e,r={},s,n){super(e,r,s,n)}from(e){return new Iw(this.url,this.headers,e,this.fetch)}}const Fw="2.56.0";let Hn="";typeof Deno<"u"?Hn="deno":typeof document<"u"?Hn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hn="react-native":Hn="node";const zw={"X-Client-Info":`supabase-js-${Hn}/${Fw}`},Uw={headers:zw},Bw={schema:"public"},Vw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qw={};var Gw=function(t,e,r,s){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Ww=t=>{let e;return t?e=t:typeof fetch>"u"?e=Vm:e=fetch,(...r)=>e(...r)},Hw=()=>typeof Headers>"u"?qm:Headers,Zw=(t,e,r)=>{const s=Ww(r),n=Hw();return(o,a)=>Gw(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new n(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(o,Object.assign(Object.assign({},a),{headers:u}))})};var Yw=function(t,e,r,s){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};function Kw(t){return t.endsWith("/")?t:t+"/"}function Jw(t,e){var r,s;const{db:n,auth:o,realtime:a,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Yw(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const ig="2.71.1",Ss=30*1e3,lc=3,za=lc*Ss,Qw="http://localhost:9999",Xw="supabase.auth.token",e_={"X-Client-Info":`gotrue-js/${ig}`},cc="X-Supabase-Api-Version",og={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},t_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,r_=10*60*1e3;class vu extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function K(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class s_ extends vu{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function n_(t){return K(t)&&t.name==="AuthApiError"}class ag extends vu{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Sr extends vu{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}}class er extends Sr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function i_(t){return K(t)&&t.name==="AuthSessionMissingError"}class Yi extends Sr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ki extends Sr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ji extends Sr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function o_(t){return K(t)&&t.name==="AuthImplicitGrantRedirectError"}class qd extends Sr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uc extends Sr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Ua(t){return K(t)&&t.name==="AuthRetryableFetchError"}class Gd extends Sr{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class dc extends Sr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wd=` 	
\r=`.split(""),a_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Wd.length;e+=1)t[Wd[e].charCodeAt(0)]=-2;for(let e=0;e<Zo.length;e+=1)t[Zo[e].charCodeAt(0)]=e;return t})();function Hd(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Zo[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Zo[s]),e.queuedBits-=6}}function lg(t,e,r){const s=a_[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Zd(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=a=>{u_(a,s,r)};for(let a=0;a<t.length;a+=1)lg(t.charCodeAt(a),n,o);return e.join("")}function l_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function c_(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}l_(s,e)}}function u_(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function d_(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)lg(t.charCodeAt(n),r,s);return new Uint8Array(e)}function h_(t){const e=[];return c_(t,r=>e.push(r)),new Uint8Array(e)}function f_(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};return t.forEach(n=>Hd(n,r,s)),Hd(null,r,s),e.join("")}function p_(t){return Math.round(Date.now()/1e3)+t}function m_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ut=()=>typeof window<"u"&&typeof document<"u",Nr={tested:!1,writable:!1},cg=()=>{if(!ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Nr.tested)return Nr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Nr.tested=!0,Nr.writable=!0}catch{Nr.tested=!0,Nr.writable=!1}return Nr.writable};function g_(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,o)=>{e[o]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const ug=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Oi(async()=>{const{default:s}=await Promise.resolve().then(()=>hn);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},y_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ks=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Cr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Zt=async(t,e)=>{await t.removeItem(e)};class va{constructor(){this.promise=new va.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}va.promiseConstructor=Promise;function Ba(t){const e=t.split(".");if(e.length!==3)throw new dc("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!t_.test(e[s]))throw new dc("JWT not in base64url format");return{header:JSON.parse(Zd(e[0])),payload:JSON.parse(Zd(e[1])),signature:d_(e[2]),raw:{header:e[0],payload:e[1]}}}async function v_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function b_(t,e){return new Promise((s,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){s(a);return}}catch(a){if(!e(o,a)){n(a);return}}})()})}function x_(t){return("0"+t.toString(16)).substr(-2)}function w_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let o=0;o<56;o++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,x_).join("")}async function __(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function j_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await __(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function us(t,e,r=!1){const s=w_();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await ks(t,`${e}-code-verifier`,n);const o=await j_(s);return[o,s===o?"plain":"s256"]}const S_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function k_(t){const e=t.headers.get(cc);if(!e||!e.match(S_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function T_(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function P_(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const E_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ds(t){if(!E_.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Va(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Yd(t){return JSON.parse(JSON.stringify(t))}var N_=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};const Lr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),C_=[502,503,504];async function Kd(t){var e;if(!y_(t))throw new uc(Lr(t),0);if(C_.includes(t.status))throw new uc(Lr(t),t.status);let r;try{r=await t.json()}catch(o){throw new ag(Lr(o),o)}let s;const n=k_(t);if(n&&n.getTime()>=og["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Gd(Lr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new er}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Gd(Lr(r),t.status,r.weak_password.reasons);throw new s_(Lr(r),t.status||500,s)}const A_=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function ee(t,e,r,s){var n;const o=Object.assign({},s==null?void 0:s.headers);o[cc]||(o[cc]=og["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await O_(t,e,r+l,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function O_(t,e,r,s,n,o){const a=A_(e,s,n,o);let l;try{l=await t(r,Object.assign({},a))}catch(c){throw console.error(c),new uc(Lr(c),0)}if(l.ok||await Kd(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await Kd(c)}}function $t(t){var e;let r=null;M_(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=p_(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function Jd(t){const e=$t(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function nr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function R_(t){return{data:t,error:null}}function I_(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:o}=t,a=N_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function $_(t){return t}function M_(t){return t.access_token&&t.refresh_token&&t.expires_in}const qa=["global","local","others"];var D_=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};class L_{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=ug(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=qa[0]){if(qa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qa.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:nr})}catch(s){if(K(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=D_(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:I_,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(K(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:nr})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:$_});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const b=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);u[`${y}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(K(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ds(e);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:nr})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ds(e);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:nr})}catch(s){if(K(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){ds(e);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:nr})}catch(s){if(K(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ds(e.userId);try{const{data:r,error:s}=await ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(K(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ds(e.userId),ds(e.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}}function Qd(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function F_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const hs={debug:!!(globalThis&&cg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class z_ extends dg{}async function U_(t,e,r){hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),hs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new z_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(hs.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}F_();const B_={url:Qw,storageKey:Xw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:e_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Xd(t,e,r){return await r()}const fs={};class ui{constructor(e){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ui.nextInstanceID,ui.nextInstanceID+=1,this.instanceID>0&&ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},B_),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new L_({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ug(n.fetch),this.lock=n.lock||Xd,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ut()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=U_:this.lock=Xd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:cg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=fs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){fs[this.storageKey]=Object.assign(Object.assign({},fs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=fs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){fs[this.storageKey]=Object.assign(Object.assign({},fs[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ig}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=g_(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),ut()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:o}=await this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),o_(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return K(r)?{error:r}:{error:new ag("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{const o=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:$t}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(K(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var r,s,n;try{let o;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await us(this.storage,this.storageKey)),o=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:$t})}else if("phone"in e){const{phone:d,password:h,options:f}=e;o=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:$t})}else throw new Ki("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(K(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:a,options:l}=e;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Jd})}else if("phone"in e){const{phone:o,password:a,options:l}=e;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Jd})}else throw new Ki("You must provide either an email or phone number and a password");const{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Yi}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,n,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,s,n,o,a,l,c,u,d,h,f,p;let m,b;if("message"in e)m=e.message,b=e.signature;else{const{chain:y,wallet:x,statement:j,options:v}=e;let w;if(ut())if(typeof x=="object")w=x;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))w=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const E=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const O=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),j?{statement:j}:null));let $;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")$=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)$=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)m=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),b=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${E.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(n=(s=v==null?void 0:v.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const O=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=O}}try{const{data:y,error:x}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:f_(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:$t});if(x)throw x;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Yi}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:x})}catch(y){if(K(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const r=await Cr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{const{data:o,error:a}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:$t});if(await Zt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Yi}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:a})}catch(o){if(K(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:r,provider:s,token:n,access_token:o,nonce:a}=e,l=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:$t}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Yi}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,n,o,a;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await us(this.storage,this.storageKey));const{error:h}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ki("You must provide either an email or phone number.")}catch(l){if(K(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,s;try{let n,o;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:l}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:$t});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(K(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var r,s,n;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await us(this.storage,this.storageKey)),await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:R_})}catch(o){if(K(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new er;const{error:n}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(K(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:o}=e,{error:a}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:o}=e,{data:a,error:l}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Ki("You must provide either an email or phone number and a type")}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Cr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<za:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const a=await Cr(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Va()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:nr}):await this._useSession(async r=>{var s,n,o;const{data:a,error:l}=r;if(l)throw l;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new er}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:nr})})}catch(r){if(K(r))return i_(r)&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:o}=s;if(o)throw o;if(!n.session)throw new er;const a=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await us(this.storage,this.storageKey));const{data:u,error:d}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:nr});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(K(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new er;const r=Date.now()/1e3;let s=r,n=!0,o=null;const{payload:a}=Ba(e.access_token);if(a.exp&&(s=a.exp,n=s<=r),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(K(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:a,error:l}=r;if(l)throw l;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new er;const{session:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!ut())throw new Ji("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ji(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new qd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ji("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qd("No code detected.");const{data:j,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!o||!l||!a||!u)throw new Ji("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Ss&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:b,error:y}=await this._getUser(o);if(y)throw y;const x={provider_token:s,provider_refresh_token:n,access_token:o,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(s){if(K(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Cr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:o}=r;if(o)return{error:o};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(n_(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=m_(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:o},error:a}=r;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await us(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(K(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:n}=await this._useSession(async o=>{var a,l,c,u,d;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return ut()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(K(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:o,error:a}=r;if(a)throw a;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await b_(async n=>(n>0&&await v_(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$t})),(n,o)=>{const a=200*Math.pow(2,n);return o&&Ua(o)&&Date.now()+a-s<Ss})}catch(s){if(this._debug(r,"error",s),K(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),ut()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Cr(this.storage,this.storageKey);if(n&&this.userStorage){let a=await Cr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:n.user},await ks(this.userStorage,this.storageKey+"-user",a)),n.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Va()}else if(n&&!n.user&&!n.user){const a=await Cr(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(n.user=a.user,await Zt(this.storage,this.storageKey+"-user"),await ks(this.storage,this.storageKey,n)):n.user=Va()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const o=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<za;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${za}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Ua(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(n.access_token);!l&&(a!=null&&a.user)?(n.user=a.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(s,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new va;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new er;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(n,"error",o),K(o)){const a={session:null,error:o};return Ua(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await ks(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const o=Yd(n);await ks(this.storage,this.storageKey,o)}else{const n=Yd(r);await ks(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Zt(this.storage,this.storageKey),await Zt(this.storage,this.storageKey+"-code-verifier"),await Zt(this.storage,this.storageKey+"-user"),this.userStorage&&await Zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ss);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Ss);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ss}ms, refresh threshold is ${lc} ticks`),n<=lc&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,a]=await us(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);n.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:o}=r;return o?{data:null,error:o}:await ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:o,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:o}=r;if(o)return{data:null,error:o};const{data:a,error:l}=await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(K(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:o}=r;return o?{data:null,error:o}:await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(K(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:n},error:o}=e;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ba(n.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(l=>l.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+r_>n)return s;const{data:o,error:a}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,s=o.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};s=p.session.access_token}const{header:n,payload:o,signature:a,raw:{header:l,payload:c}}=Ba(s);r!=null&&r.allowExpired||T_(o.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:o,header:n,signature:a},error:null}}const d=P_(n.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,h_(`${l}.${c}`)))throw new dc("Invalid JWT signature");return{data:{claims:o,header:n,signature:a},error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}}}ui.nextInstanceID=0;const V_=ui;class q_ extends V_{constructor(e){super(e)}}var G_=function(t,e,r,s){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class W_{constructor(e,r,s){var n,o,a;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Kw(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Bw,realtime:qw,auth:Object.assign(Object.assign({},Vw),{storageKey:u}),global:Uw},h=Jw(s??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=Zw(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new lw(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Lw(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new z0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return G_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,storageKey:o,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new q_({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new kw(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const H_=(t,e,r)=>new W_(t,e,r);function Z_(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Z_()&&console.warn("âš ï¸  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ga={};var Y_={};const eh=typeof window<"u",hg="https://opukvvmumyegtkukqint.supabase.co",fg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",hg);console.log("DEBUG: supabaseAnonKey (raw):",fg);((Ga==null?void 0:Ga.VITE_DEBUG)==="true"||Y_.VITE_DEBUG==="true")&&(console.log("Supabase URL:","âœ… Set"),console.log("Supabase Anon Key:","âœ… Set"));let pe;try{pe=H_(hg,fg,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:eh?window.localStorage:void 0}});const t=typeof process<"u"&&!1}catch(t){throw console.error("Error initializing Supabase client:",t),t}/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pg=(...t)=>t.filter((e,r,s)=>!!e&&s.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var J_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:n="",children:o,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...J_,width:e,height:e,stroke:t,strokeWidth:s?Number(r)*24/Number(e):r,className:pg("lucide",n),...l},[...a.map(([u,d])=>g.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=(t,e)=>{const r=g.forwardRef(({className:s,...n},o)=>g.createElement(Q_,{ref:o,iconNode:e,className:pg(`lucide-${K_(t)}`,s),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=G("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=G("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=G("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=G("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=G("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=G("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=G("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=G("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=G("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=G("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=G("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=G("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=G("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=G("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=G("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=G("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=G("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=G("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=G("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=G("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=G("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=G("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=G("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=G("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=G("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=G("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=G("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=G("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=G("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=G("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=G("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=G("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=G("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=G("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=G("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=G("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=G("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xg=g.createContext(void 0),wg=()=>{const t=g.useContext(xg);if(!t)throw new Error("useAdminSideNav must be used within AdminSideNavProvider");return t},g1=({children:t})=>{const[e,r]=g.useState(!1),s=()=>{console.log("AdminSideNav: toggle called, current state:",e),r(!e)},n=()=>{console.log("AdminSideNav: close called, current state:",e),r(!1)};return i.jsx(xg.Provider,{value:{isOpen:e,toggle:s,close:n},children:t})},y1=[{name:"Dashboard",href:"/account/admin",icon:l1},{name:"Products",href:"/account/admin/products",icon:Qr},{name:"Orders",href:"/account/admin/orders",icon:fi},{name:"Inventory",href:"/account/admin/inventory",icon:e1},{name:"Analytics",href:"/account/admin/analytics",icon:$o},{name:"Posts",href:"/account/admin/posts",icon:br},{name:"Works",href:"/account/admin/works",icon:Et},{name:"Timeline",href:"/account/admin/timeline/events",icon:xu},{name:"Users",href:"/account/admin/users",icon:Yo},{name:"Beta Applications",href:"/account/admin/beta-applications",icon:Yo},{name:"Webhooks",href:"/account/admin/webhooks",icon:m1},{name:"Media",href:"/account/admin/media",icon:ir},{name:"Settings",href:"/account/admin/settings",icon:ba}],v1=()=>{const{isOpen:t,toggle:e}=wg();return t?null:i.jsx("button",{onClick:e,className:"fixed top-4 left-4 z-[10000] p-3 rounded-lg bg-slate-800 border border-amber-500/50 shadow-xl hover:bg-slate-700 hover:border-amber-400 text-amber-300 hover:text-amber-200 transition-all duration-300 group","aria-label":"Toggle navigation menu",children:i.jsx(u1,{size:20,className:"transition-transform duration-200 group-hover:scale-110"})})},b1=()=>{var l,c;const{isOpen:t,close:e}=wg(),r=Ni(),{user:s,userProfile:n}=Ai(),o=async()=>{await pe.auth.signOut(),r("/")},a=()=>{console.log("AdminSideNav: handleLinkClick called"),e()};return g.useEffect(()=>{const u=d=>{d.key==="Escape"&&t&&(console.log("AdminSideNav: Escape key pressed"),e())};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[t,e]),t?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9998]",onClick:e}),i.jsx("aside",{className:"fixed top-0 left-0 z-[9999] h-screen w-80 border-r border-amber-500 shadow-2xl animate-in slide-in-from-left duration-300",style:{backgroundColor:"#0f172a",backdropFilter:"none"},children:i.jsxs("div",{className:"h-full flex flex-col relative",style:{backgroundColor:"#0f172a",backdropFilter:"none"},children:[i.jsx("div",{className:"absolute inset-y-0 right-0 w-1 bg-gradient-to-b from-amber-400 via-yellow-500 to-amber-600"}),i.jsx("div",{className:"p-6 border-b border-amber-500",style:{backgroundColor:"#1e293b",backdropFilter:"none"},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-yellow-600 rounded-lg flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"text-slate-900 font-bold text-lg",children:"Z"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-amber-300",children:"Zoroaster"}),i.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Admin Panel"})]})]}),i.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-slate-700/50 text-slate-400 hover:text-amber-300 transition-colors duration-200","aria-label":"Close menu",children:i.jsx(gr,{size:20,className:"transition-transform duration-200 hover:rotate-90"})})]})}),i.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3",style:{backgroundColor:"#0f172a",backdropFilter:"none"},children:i.jsx("ul",{className:"space-y-2",children:y1.map(u=>i.jsx("li",{children:i.jsx($s,{to:u.href,end:u.href==="/account/admin",onClick:a,className:({isActive:d})=>Xe("group flex items-center p-3 rounded-xl transition-all duration-200 relative overflow-hidden space-x-3",d?"bg-amber-600 text-amber-100 border border-amber-500 shadow-md":"text-slate-300 hover:bg-slate-700 hover:text-amber-200 border border-transparent hover:border-amber-500"),children:({isActive:d})=>i.jsxs(i.Fragment,{children:[d&&i.jsx("div",{className:"absolute left-0 top-0 h-full w-1 bg-gradient-to-b from-amber-400 to-yellow-500 rounded-r"}),i.jsx(u.icon,{size:20,className:Xe("flex-shrink-0 transition-all duration-200",d?"text-amber-400 drop-shadow-sm":"group-hover:text-amber-300")}),i.jsx("span",{className:Xe("font-medium transition-all duration-200",d?"text-amber-200":"group-hover:text-amber-200"),children:u.name})]})})},u.name))})}),i.jsx("div",{className:"p-4 border-t border-amber-500",style:{backgroundColor:"#1e293b",backdropFilter:"none"},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-yellow-500 flex items-center justify-center text-slate-900 font-bold shadow-lg ring-2 ring-amber-400/30",children:((l=n==null?void 0:n.display_name)==null?void 0:l.charAt(0))||((c=s==null?void 0:s.email)==null?void 0:c.charAt(0).toUpperCase())}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-amber-200 truncate max-w-[160px]",children:(n==null?void 0:n.display_name)||"Admin User"}),i.jsx("p",{className:"text-xs text-slate-400 truncate max-w-[160px]",children:s==null?void 0:s.email})]})]}),i.jsx("button",{onClick:o,className:"p-2 rounded-lg hover:bg-gradient-to-r hover:from-red-500/20 hover:to-red-600/10 text-slate-400 hover:text-red-300 transition-all duration-200 border border-transparent hover:border-red-500/30",title:"Sign out",children:i.jsx(yg,{size:18})})]})})]})})]}):null},x1=({children:t})=>{var a,l;const[e,r]=g.useState(!0),[s,n]=g.useState({isAuthenticated:!1,isAdmin:!1}),o=Ot();return g.useEffect(()=>{(async()=>{console.log("â³ [AdminProtectedRoute] Checking session and admin status...");const{data:{session:u},error:d}=await pe.auth.getSession();if(d||!u){console.log("ðŸ”’ [AdminProtectedRoute] No authenticated session found."),n({isAuthenticated:!1,isAdmin:!1}),r(!1);return}console.log("âœ… [AdminProtectedRoute] Session found. User:",u.user.email);const{data:h,error:f}=await pe.rpc("is_admin");f&&console.error("âŒ [AdminProtectedRoute] Error calling is_admin RPC:",f);const m={isAuthenticated:!0,isAdmin:h===!0,user:u.user};console.log("âœ… [AdminProtectedRoute] Final auth state:",m),n(m),r(!1)})()},[]),e?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto"}),i.jsx("p",{className:"mt-4",children:"Verifying Admin Privileges..."})]})}):s.isAuthenticated?s.isAdmin?i.jsx(i.Fragment,{children:t}):(console.log("âŒ [AdminProtectedRoute] Access Denied. User is not an admin."),i.jsx("div",{className:"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8 text-white",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs("div",{className:"bg-gray-800 shadow-lg rounded-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-red-600 p-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Access Denied"}),i.jsx("p",{className:"text-red-100",children:"You do not have the necessary permissions to view this page."})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx("p",{children:"The page you are trying to access is restricted to administrators only."}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-medium text-gray-300 mb-2",children:"Your Account Details"}),i.jsxs("dl",{className:"bg-gray-700/50 rounded-lg p-4 space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("dt",{className:"text-gray-400",children:"User ID"}),i.jsx("dd",{className:"font-mono",children:((a=s.user)==null?void 0:a.id)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("dt",{className:"text-gray-400",children:"Email"}),i.jsx("dd",{children:((l=s.user)==null?void 0:l.email)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("dt",{className:"text-gray-400",children:"Admin Status"}),i.jsx("dd",{className:"font-semibold text-red-400",children:"Not an Admin"})]})]})]}),i.jsx("p",{children:"If you believe this is an error, please contact support."}),i.jsx("div",{className:"pt-4",children:i.jsx("a",{href:"/",className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Go to Homepage"})})]})]})})})):(console.log("ðŸ›‘ [AdminProtectedRoute] Not authenticated, redirecting to login."),i.jsx(Jl,{to:"/login",state:{from:o},replace:!0}))},Ar=({title:t,value:e,icon:r,color:s,trend:n})=>i.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),n&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n})]}),i.jsx("div",{className:`p-3 rounded-lg bg-${s}-100 dark:bg-${s}-900/20`,children:i.jsx(r,{className:`w-6 h-6 text-${s}-600 dark:text-${s}-400`})})]})}),It=({title:t,description:e,icon:r,href:s,color:n})=>i.jsx("a",{href:s,className:"block bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all hover:border-blue-300 dark:hover:border-blue-600 group",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:`p-3 rounded-lg bg-${n}-100 dark:bg-${n}-900/20 group-hover:bg-${n}-200 dark:group-hover:bg-${n}-900/40 transition-colors`,children:i.jsx(r,{className:`w-6 h-6 text-${n}-600 dark:text-${n}-400`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e})]})]})}),w1=()=>{const[t,e]=g.useState(null),[r,s]=g.useState(!0),[n,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{const[{count:l},{count:c},{data:u},{data:d},{count:h},{count:f},{count:p}]=await Promise.all([pe.from("profiles").select("id",{count:"exact",head:!0}),pe.from("subscriptions").select("id",{count:"exact",head:!0}).eq("status","active"),pe.from("pages").select("view_count"),pe.from("orders").select("total_amount, status").eq("status","completed"),pe.from("products").select("id",{count:"exact",head:!0}).eq("active",!0),pe.from("orders").select("id",{count:"exact",head:!0}),pe.from("orders").select("id",{count:"exact",head:!0}).eq("status","pending")]),m=(u==null?void 0:u.reduce((y,x)=>y+(x.view_count||0),0))||0,b=(d==null?void 0:d.reduce((y,x)=>y+x.total_amount,0))||0;e({totalUsers:l||0,activeSubscribers:c||0,totalRevenue:b,totalViews:m,totalProducts:h||0,totalOrders:f||0,pendingOrders:p||0})}catch(l){o(l instanceof Error?l.message:"Failed to fetch dashboard metrics")}finally{s(!1)}})()},[]),r?i.jsx("div",{className:"p-6 space-y-6",children:i.jsxs("div",{className:"animate-pulse space-y-6",children:[i.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((a,l)=>i.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-xl"},l))})]})}):n?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(di,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error Loading Dashboard"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:n})]})]})})}):i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Welcome to Zoroasterverse Admin"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage your worldbuilding platform with powerful admin tools"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Ar,{title:"Total Users",value:(t==null?void 0:t.totalUsers.toLocaleString())??"0",icon:Yo,color:"blue",trend:"â†‘ Growing community"}),i.jsx(Ar,{title:"Active Subscribers",value:(t==null?void 0:t.activeSubscribers.toLocaleString())??"0",icon:nh,color:"green",trend:"Premium members"}),i.jsx(Ar,{title:"Total Revenue",value:`$${(t==null?void 0:t.totalRevenue.toFixed(2))??"0.00"}`,icon:wu,color:"yellow",trend:"All-time earnings"}),i.jsx(Ar,{title:"Page Views",value:(t==null?void 0:t.totalViews.toLocaleString())??"0",icon:ns,color:"purple",trend:"Content engagement"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[i.jsx(Ar,{title:"Active Products",value:(t==null?void 0:t.totalProducts.toLocaleString())??"0",icon:Qr,color:"indigo",trend:"Available for sale"}),i.jsx(Ar,{title:"Total Orders",value:(t==null?void 0:t.totalOrders.toLocaleString())??"0",icon:fi,color:"green",trend:"All-time orders"}),i.jsx(Ar,{title:"Pending Orders",value:(t==null?void 0:t.pendingOrders.toLocaleString())??"0",icon:di,color:"orange",trend:"Requires attention"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(It,{title:"Manage Users",description:"View, edit, and manage user accounts",icon:Yo,href:"/account/admin/users",color:"blue"}),i.jsx(It,{title:"Content Management",description:"Create and manage posts and pages",icon:br,href:"/account/admin/posts",color:"green"}),i.jsx(It,{title:"Product Catalog",description:"Manage your store products",icon:Qr,href:"/account/admin/products",color:"purple"}),i.jsx(It,{title:"Order Processing",description:"View and process customer orders",icon:fi,href:"/account/admin/orders",color:"orange"}),i.jsx(It,{title:"Beta Applications",description:"Review beta reader applications",icon:nh,href:"/account/admin/beta-applications",color:"indigo"}),i.jsx(It,{title:"Timeline Events",description:"Manage worldbuilding timeline",icon:xu,href:"/account/admin/timeline/events",color:"red"}),i.jsx(It,{title:"Works & Chapters",description:"Manage your literary works",icon:Et,href:"/account/admin/works",color:"teal"}),i.jsx(It,{title:"Analytics",description:"View detailed performance metrics",icon:Ps,href:"/account/admin/analytics",color:"pink"}),i.jsx(It,{title:"Settings",description:"Configure admin preferences",icon:ba,href:"/account/admin/settings",color:"gray"})]})]})]})},_1="_zoroHeader_6lzsp_2",j1="_logo_6lzsp_16",S1="_navbar_6lzsp_23",k1="_navMenu_6lzsp_27",T1="_navLink_6lzsp_39",P1="_dropdownMenu_6lzsp_53",E1="_dropdownMenuItem_6lzsp_73",N1="_dropdown_6lzsp_53",C1="_headerControls_6lzsp_96",A1="_searchForm_6lzsp_121",O1="_themeToggle_6lzsp_165",R1="_icon_6lzsp_186",I1="_iconSun_6lzsp_197",$1="_iconMoon_6lzsp_203",Le={zoroHeader:_1,logo:j1,navbar:S1,navMenu:k1,navLink:T1,dropdownMenu:P1,dropdownMenuItem:E1,dropdown:N1,headerControls:C1,searchForm:A1,themeToggle:O1,icon:R1,iconSun:I1,iconMoon:$1},oh="zoro-theme",M1=()=>{const[t,e]=g.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem(oh),n=window.matchMedia("(prefers-color-scheme: dark)").matches;return s??(n?"dark":"light")}return"dark"});g.useEffect(()=>{const s=window.document.documentElement;s.setAttribute("data-theme",t),localStorage.setItem(oh,t),t==="dark"?(s.classList.add("dark"),s.classList.remove("light")):(s.classList.add("light"),s.classList.remove("dark"))},[t]);const r=()=>{e(s=>s==="dark"?"light":"dark")};return i.jsxs("button",{id:"theme-toggle",className:Le.themeToggle,"aria-label":"Toggle dark mode","aria-pressed":t==="dark"?"true":"false",title:t==="dark"?"Switch to light mode":"Switch to dark mode",onClick:r,children:[i.jsxs("svg",{className:`${Le.icon} ${Le.iconSun}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:[i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),i.jsxs("g",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"5"}),i.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),i.jsx("line",{x1:"2",y1:"12",x2:"5",y2:"12"}),i.jsx("line",{x1:"19",y1:"12",x2:"22",y2:"12"}),i.jsx("line",{x1:"4.2",y1:"4.2",x2:"6.3",y2:"6.3"}),i.jsx("line",{x1:"17.7",y1:"17.7",x2:"19.8",y2:"19.8"}),i.jsx("line",{x1:"4.2",y1:"19.8",x2:"6.3",y2:"17.7"}),i.jsx("line",{x1:"17.7",y1:"6.3",x2:"19.8",y2:"4.2"})]})]}),i.jsx("svg",{className:`${Le.icon} ${Le.iconMoon}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:i.jsx("path",{d:`M21 14.5a9 9 0 1 1-8.5-12
                 a8 8 0 0 0 8.5 12z`,fill:"currentColor"})})]})},D1=({isAuthenticated:t=!1,betaApplicationStatus:e="none",onLogout:r})=>{const[s,n]=g.useState(!1),o=()=>{r&&r()},a=[{name:"Home",path:"/"},{name:"Explore",path:"#",children:[{name:"Library",path:"/library"},{name:"Wiki",path:"/wiki"},{name:"Timelines",path:"/timelines"},{name:"Characters",path:"/characters"},{name:"Blog",path:"/blog"}]},{name:"Beta Program",path:"/beta/application"}];if(t){const l=[];l.push({name:"Store",path:"/store"}),l.push({name:"Subscriptions",path:"/subscriptions"}),e==="accepted"&&l.push({name:"Beta Portal",path:"/beta/portal"}),l.push({name:"My Account",path:"/account"}),a.push({name:"Account",path:"#",children:l}),a.push({name:"Logout",path:"#",onClick:o})}else a.push({name:"Login",path:"/login"});return i.jsxs("header",{className:Le.zoroHeader,children:[i.jsx("div",{className:Le.logo,children:i.jsx($s,{to:"/",children:i.jsx("h1",{children:"Zoroasterverse"})})}),i.jsxs("div",{className:Le.headerControls,children:[i.jsxs("form",{className:Le.searchForm,children:[i.jsx("input",{type:"text",placeholder:"Search..."}),i.jsx("button",{type:"submit",children:i.jsx(pn,{})})]}),i.jsx(M1,{})]}),i.jsx("nav",{className:Le.navbar,children:i.jsx("ul",{className:Le.navMenu,children:a.map(l=>i.jsxs("li",{className:l.children?Le.dropdown:"",children:[l.onClick?i.jsx("button",{onClick:l.onClick,className:Le.navLink,children:l.name}):i.jsxs($s,{to:l.path,className:Le.navLink,children:[l.name," ",l.children?"â–¾":""]}),l.children&&i.jsx("ul",{className:Le.dropdownMenu,children:l.children.map(c=>i.jsx("li",{children:i.jsx($s,{to:c.path,className:Le.dropdownMenuItem,children:c.name})},c.name))})]},l.name))})})]})},L1="_zoroFooter_8qpog_1",F1="_footerContent_8qpog_8",z1="_footerColumns_8qpog_13",U1="_column_8qpog_20",B1="_socialIcons_8qpog_50",V1="_footerQuote_8qpog_59",Yt={zoroFooter:L1,footerContent:F1,footerColumns:z1,column:U1,socialIcons:B1,footerQuote:V1},q1=()=>i.jsx("footer",{className:Yt.zoroFooter,children:i.jsxs("div",{className:Yt.footerContent,children:[i.jsxs("div",{className:Yt.footerColumns,children:[i.jsxs("div",{className:Yt.column,children:[i.jsx("h4",{children:"Zoroasterverse"}),i.jsx("p",{children:"â€œTruth is the architect of happiness.â€"}),i.jsxs("p",{children:["Â© ",new Date().getFullYear()," Zoroasterverse. All rights reserved."]})]}),i.jsxs("div",{className:Yt.column,children:[i.jsx("h4",{children:"Explore"}),i.jsxs("ul",{children:[i.jsx("li",{children:i.jsx("a",{href:"/about",children:"About"})}),i.jsx("li",{children:i.jsx("a",{href:"/books",children:"Books"})}),i.jsx("li",{children:i.jsx("a",{href:"/collaborate",children:"Artist Collaboration"})}),i.jsx("li",{children:i.jsx("a",{href:"/contact",children:"Contact"})})]})]}),i.jsxs("div",{className:Yt.column,children:[i.jsx("h4",{children:"Connect"}),i.jsxs("ul",{className:Yt.socialIcons,children:[i.jsx("li",{children:i.jsx("a",{href:"#",children:i.jsx(f1,{})})}),i.jsx("li",{children:i.jsx("a",{href:"#",children:i.jsx(a1,{})})}),i.jsx("li",{children:i.jsx("a",{href:"#",children:i.jsx(c1,{})})})]})]})]}),i.jsx("div",{className:Yt.footerQuote,children:i.jsx("em",{children:"â€œLet your conscience be the altar where right intention dwells.â€"})})]})}),G1=({isAuthenticated:t=!1,betaApplicationStatus:e="none",onLogout:r})=>i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(D1,{isAuthenticated:t,betaApplicationStatus:e,onLogout:r}),i.jsx("main",{className:"flex-1",children:i.jsx(cu,{})}),i.jsx(q1,{})]}),W1="_zrHero_14v3a_1",H1="_parchmentCard_14v3a_12",Z1="_zrHeroContent_14v3a_70",Y1="_zrTitle_14v3a_74",K1="_zrQuote_14v3a_88",J1="_zrIntro_14v3a_97",Q1="_zrCta_14v3a_105",X1="_zrHeroArt_14v3a_123",ej="_videoFire_14v3a_156",tj="_prophecyMask_14v3a_168",rj="_prophecyReel_14v3a_183",sj="_prophecyItem_14v3a_193",nj="_englishText_14v3a_203",ij="_spinsIndicator_14v3a_212",oj="_spinDot_14v3a_221",aj="_spinDotActive_14v3a_230",lj="_zrSection_14v3a_237",cj="_zrH2_14v3a_243",oe={zrHero:W1,parchmentCard:H1,zrHeroContent:Z1,zrTitle:Y1,zrQuote:K1,zrIntro:J1,zrCta:Q1,zrHeroArt:X1,videoFire:ej,prophecyMask:tj,prophecyReel:rj,prophecyItem:sj,englishText:nj,spinsIndicator:ij,spinDot:oj,spinDotActive:aj,zrSection:lj,zrH2:cj},uj=({spinsLeft:t,setSpinsLeft:e,onSpin:r})=>{const s=g.useRef(null),[n,o]=g.useState(!1),a=150,l=[{english:"Your heart is a compass that always points toward loveâ€”trust it, follow it, honor it."},{english:"You are not who you were yesterday unless you choose to beâ€”each day offers the gift of becoming."},{english:"The friend of truth shall be the friend of my spirit, O Ahura Mazda. (Yasna 46.2)"},{english:"Every moment is sacred when approached with reverence, every task holy when performed with love."},{english:"The mind aligned with truth thinks God's thoughts after Him, sees with divine eyes, loves with cosmic heart."},{english:"May the beneficent spirit help us to speak truth and act righteously. (Yasna 47.6)"},{english:"Hope is the thing with feathers that perches in the soul and sings without words."},{english:"Self-knowledge is the beginning of wisdom, self-acceptance the foundation of growth."},{english:"Grant me, O Truth, the rewards of good thinking that bring joy and satisfaction. (Yasna 50.4)"},{english:"The sacred fire burns brightest in the heart that chooses truth over comfort. Let your conscience be the altar where right intention dwells."},{english:"Truth without compassion is cruelty; compassion without truth is sentimentalityâ€”balance both."},{english:"I praise You as the greatest and best, as the most beautiful, O Mazda Ahura. (Yasna 43.16)"},{english:"Truth is the architect of happiness, the foundation of peace, the cornerstone of wisdom. Build your life upon this rock."},{english:"The weight of moral choice is the proof of human dignityâ€”angels don't choose, demons can't choose, but you can."},{english:"Plant seeds of hope in winter and trust them to bloom when spring returns to your life."},{english:"Appreciation is the highest form of prayerâ€”seeing the divine in every blessing."},{english:"The future is not predetermined but is being written by every choice you make right now."},{english:"When shadows of doubt gather, kindle the inner flame of discernment. Fire purifies not by destroying, but by revealing what is true."},{english:"Begin each day as if it were your firstâ€”with wonder. End each day as if it were your lastâ€”with gratitude."},{english:"Morning brings the gift of choice renewed. Stand at the crossroads of thought and deedâ€”which path serves the light?"},{english:"We invoke good thinking, truth, and the beneficent spirit of Ahura Mazda. (Yasna 37.4)"},{english:"Where truth flourishes, freedom follows; where freedom is genuine, truth is honored."},{english:"The divine dwells not only in temples but in every heart that welcomes it, every life that serves it."},{english:"The sacred fire asks no permission to burn, needs no fuel but truth, casts no shadow but illumination."},{english:"May we be instruments of peace, servants of truth, children of light. (Benediction)"},{english:"Let the fire within you remember the spark of dawnâ€”every choice a new horizon to the world's unfolding. Walk in watchfulness, and the light of Good Mind will not fail you."},{english:"Devotion asks not what you can receive but what you can give, not what you deserve but what you can serve."},{english:"Freedom is not the absence of constraints but the presence of meaningful options."},{english:"Through the beneficent spirit, may we overcome all obstacles to righteousness. (Prayer)"},{english:"The light of understanding grows not by accumulating facts but by illuminating connections."},{english:"The peaceful heart creates peaceful surroundings; the harmonious soul attracts harmonious relationships."},{english:"I take refuge in good thinking, truth, and Your lordship, Mazda, from whom comes the most beneficent spirit. (Yasna 33.5)"},{english:"Rational thought and intuitive wisdom are not opposites but partners in the dance of understanding."},{english:"When you have the power to help and choose not to, you become complicit in the suffering you could have prevented."},{english:"Like a candle lights a thousand candles without diminishing, share your inner light freely with all."},{english:"You are both the author and the main character of your life storyâ€”write it well."},{english:"The good mind is not the mind that knows everything but the mind that remains open to learning."},{english:"The stranger is just a friend you haven't met yet, a teacher you haven't learned from yet, a gift you haven't unwrapped yet."},{english:"Those who seek to destroy my family and clan, Mazda, I put them in Your hands through good thinking and truth. (Yasna 48.8)"},{english:"I pray to You with outstretched hands, O Mazda, seeking Your help through the beneficent spirit. (Yasna 50.8)"},{english:"Every decision is a seed planted in the soil of time. What kind of forest are you growing?"},{english:"Devotion is gratitude in action, love expressing itself through loyal service."},{english:"The fire of truth burns away all that is false in you, leaving only what is real and precious."},{english:"The unexamined life scatters like leaves in the wind; the examined life grows deep roots in truth."},{english:"The arc of justice bends only when people like you choose to bend itâ€”be a force for righteousness."},{english:"Choose as if your choice matters to everyone who will ever liveâ€”because it does."},{english:"When Good Mind came to me, I first learned to proclaim Your words, O Mazda. (Yasna 43.15)"},{english:"To You, the beneficent ones shall come for refuge, Mazda, not to the followers of falsehood. (Yasna 48.4)"},{english:"Understanding comes not from standing above others but from standing with them in shared humanity."},{english:"The doorway to wisdom opens inwardâ€”the journey begins when you stop looking outside and start looking within."},{english:"May we be worthy of Your friendship through righteous actions, O Mazda. (Yasna 46.6)"},{english:"This I ask You: tell me truly, Ahuraâ€”what craftsman created light and darkness? (Yasna 44.5)"},{english:"Harmony does not require uniformityâ€”an orchestra creates beauty through coordinated differences."},{english:"May Ahura Mazda be praised! May the beneficent spirit be glorified! (Traditional praise)"},{english:"Wisdom whispers while foolishness shoutsâ€”train your ear to hear the quiet voice of truth."},{english:"The measure of a society is how it treats those who cannot defend themselves."},{english:"What doesn't challenge you doesn't change you; what doesn't stretch you doesn't strengthen you."},{english:"Fair is not everyone getting the same thing; fair is everyone getting what they need to thrive."},{english:"Through Your fire, show me the rewards that come through truth for both partiesâ€”those who uphold righteousness and those who do not. (Yasna 31.3)"},{english:"The world is changed not by those who point out what's wrong but by those who do what's right."},{english:"Service is love made visible, compassion made practical, faith made fruitful."},{english:"I have recognized You as beneficent through truth and good thinking, O Mazda. (Yasna 49.5)"},{english:"The holy is not somewhere else or some time else but here and now, in this place, at this moment."},{english:"Let your presence be a sanctuary where others can find rest from the storms of life."},{english:"Friendship is truth telling and burden sharing, celebration and consolation, walking together toward the light."},{english:"Small daily improvements lead to stunning yearly resultsâ€”be consistent rather than dramatic."},{english:"The mind that dwells in truth becomes a sanctuary where peace is always available."},{english:"Your life is a sacred text written one choice at a timeâ€”make it a beautiful story."},{english:"Blessed is he who brings happiness to others through truth and good deeds. (Traditional blessing)"},{english:"You are the protector of the righteous, O Mazda, through Your beneficent spirit. (Yasna 47.3)"},{english:"This I ask You: tell me truly, Ahuraâ€”who established the path of the sun and stars? (Yasna 44.5)"},{english:"At the crossroads of decision, remember: you are always choosing not just for yourself but for all who will follow."},{english:"I approach You, O Mazda, with good thinking, so that You may grant me both the blessings of this existence and that of the spirit. (Yasna 28.4)"},{english:"Your life is your offeringâ€”what will you place on the altar of existence?"},{english:"Learning from others shortens your path to wisdom; teaching others deepens your own understanding."},{english:"Pure thoughts birth noble words; noble words inspire righteous deeds; righteous deeds purify thoughts in return."},{english:"Every meal is communion when shared with gratitude, every conversation prayer when spoken with love."},{english:"The freedom to choose your response to any situation is the last of human freedomsâ€”exercise it wisely."},{english:"Your conscience is your connection to cosmic justiceâ€”honor it by living in alignment with its guidance."},{english:"Every sunrise is nature's way of saying, 'Try again'â€”accept the invitation with gratitude."},{english:"Truth is patient but not passive, gentle but not weak, humble but not uncertain of its worth."},{english:"Action without reflection is blind; reflection without action is empty; but action guided by reflection is transformative."},{english:"Righteousness is the best good. Happiness to him who is righteous for the sake of righteousness alone. (Ashem Vohu variation)"},{english:"Community is not a place but a relationship, not a location but a connection."},{english:"Good thinking leads to good feeling, good feeling leads to good willing, good willing leads to good living."},{english:"Every crossroads is a classroom, every decision a teacher, every consequence a lesson."},{english:"The present moment is the only moment over which you have powerâ€”make it count."},{english:"Hope is not naive optimism but courageous commitment to work for what ought to be."},{english:"Every mistake is a teacher in disguise, every failure a step toward success, every setback a setup for comeback."},{english:"The inner fire burns brightest not when fed by passion but when fueled by principle."},{english:"Your privilege is not your fault, but your responsibility. Use whatever advantages you have to lift others."},{english:"Through Your radiant fire, assign the destiny of the righteous and the unrighteous, O Mazda, that our teaching may spread among the living. (Yasna 31.19)"},{english:"Knowledge builds walls to separate us from ignorance; wisdom builds bridges to connect us with all beings."},{english:"As long as I have strength and power, I shall teach people to seek truth. (Yasna 45.4)"},{english:"The beneficent spirit manifests wherever love meets action. Be the hands and heart through which goodness enters the world."},{english:"The bounteous mentality sees abundance everywhereâ€”in every sunrise, every breath, every opportunity to serve the good."},{english:"The mind illuminated by truth sees possibilities where others see only problems. Think with hope, and hope becomes reality."},{english:"Peace begins with each person choosing to be peaceful, harmony starts with each individual choosing to be harmonious."},{english:"Let gratitude be your first thought at dawn, your last thought at dusk, your constant companion throughout the day."},{english:"I realized You, Mazda, to be beneficent when I was encircled by Good Mind, when he taught me to proclaim: 'Let not men seek to please the followers of falsehood.' (Yasna 43.11)"},{english:"Compassion is not feeling sorry for others but feeling with them, sharing their burden until it becomes lighter."},{english:"Count your blessings, not your problems; focus on your gains, not your losses; see your progress, not your perfection."},{english:"Compassion is not pity from above but solidarity from withinâ€”suffer with, celebrate with, grow with."},{english:"At every moment you are choosing who you are becomingâ€”choose the highest version of yourself."},{english:"Evening reflection is the mirror of morning intention. End as mindfully as you began."},{english:"True knowledge transforms the knower. If you remain unchanged by what you learn, you have learned nothing."},{english:"The paradox of freedom: you are most free when you choose to serve something greater than yourself."},{english:"The ripple effects of your actions extend far beyond what you can seeâ€”act as if the future depends on you."},{english:"The fire of wisdom burns without consuming. Feed it with honest reflection, and it will illumine your path forever."},{english:"Let your thoughts be seeds of kindness, your words be rain of encouragement, your deeds be sunshine of hope."},{english:"For whom did You create this earth and sky? Who made the luminaries and the darkness? (Yasna 29.1)"},{english:"Your presence in the world matters more than you knowâ€”show up fully, authentically, lovingly."},{english:"When the world seems broken beyond repair, remember that you are part of the repair."},{english:"The darkness is never permanent, the light is never extinguished completely. Keep the vigil."},{english:"To help the world progress, O Mazda, we have sought You through good thinking. (Yasna 30.6)"},{english:"Let your spirit be a fountain, not a drain. Pour out blessing upon blessing, and watch the desert of despair bloom."},{english:"Loneliness is the human condition; connection is the human choice. Choose connection."},{english:"For a wise Lord I knew You to be, Mazda, when Good Mind came to me and asked: 'Who are you? To whom do you belong?' (Yasna 43.7)"},{english:"True strength is not in never falling but in how gracefully you rise each time you fall."},{english:"Disorder is not the opposite of truth but its absenceâ€”fill the void with authentic being."},{english:"The path of wisdom begins with a single step: the decision to begin walking."},{english:"True justice considers not only what is legal but what is right, not only what is permitted but what is beneficial."},{english:"Grant me, O Mazda, through Your most beneficent spirit, through truth, the rewards of good thinking, through which I may bring joy to my supporters. (Yasna 28.11)"},{english:"The fire of Ahura Mazda brings light to the righteous and terror to the wicked. (Fire prayer)"},{english:"Your choices are your prayersâ€”they reveal what you truly worship, what you genuinely value."},{english:"The false teacher leads people astray from the path of good thinking and truth. (Yasna 32.3)"},{english:"The phoenix rises not in spite of the ashes but because of themâ€”let your failures fuel your renewal."},{english:"Forgiveness is not condoning what was wrong but choosing to be free from the burden of carrying resentment."},{english:"I praise good thoughts, good words, good deeds, and the good religion. (Fravarane prayer)"},{english:"The greatest among you will be your servantâ€”greatness is measured by how much you give, not how much you get."},{english:"The morning star reminds us: even in the darkest hour, light is already on its way."},{english:"Where differences divide, find common ground; where similarities unite, celebrate diversity."},{english:"You who are Mazda, through Your spirit and fire, through truth and good thinking, grant me integrity and strength. (Yasna 28.7)"},{english:"In the garden of the heart, plant seeds of truthful speech. Words watered with wisdom bloom into lasting peace."},{english:"Your daily habits are votes for the type of person you wish to becomeâ€”vote wisely."},{english:"May we receive the promised reward, the joy that comes from truth, O Mazda. (Yasna 33.11)"},{english:"Hope plants seeds in winter, trusting in the promise of spring."},{english:"You are not just in the community; the community is in youâ€”you carry it wherever you go."},{english:"Your presence is often more healing than your words, your listening more valuable than your advice."},{english:"You are a unique note in the symphony of existenceâ€”play your part beautifully and boldly."},{english:"Bridge-builders are more valuable than wall-builders, peacemakers more needed than warriors."},{english:"Growth requires leaving your comfort zone regularlyâ€”comfort and growth cannot coexist."},{english:"But the righteous man chooses truth and good thinking as his allies. (Yasna 32.2)"},{english:"The threefold path begins in the silence of right thinking, flows through the beauty of truthful speech, and culminates in the power of loving action."},{english:"Truth needs no defense, only expression. Speak it simply and let its power do the rest."},{english:"Through good deeds may we come to You, O Mazda, with joy and gladness. (Yasna 50.10)"},{english:"I beheld You clearly in my mind's eye as the first one at the birth of life, when You made actions have consequencesâ€”evil for the evil, good reward for the good. (Yasna 43.5)"},{english:"Inner peace is not a luxury but a necessity, not a retreat from the world but preparation for effective engagement."},{english:"The wise heart holds both confidence and humility, certainty and openness, in perfect balance."},{english:"Your breath connects you to every living beingâ€”breathe consciously, live connectedly."},{english:"Whoever upholds truth most, whether man or woman, O Mazda Ahura, is most dear to You. (Yasna 46.11)"},{english:"Yes, there are two fundamental spirits, twins, renowned to be in conflict. In thought and word, in action, they are two: the good and the bad. Between these two, the beneficent have correctly chosen. (Yasna 30.3)"},{english:"Transformation happens not when you try to become someone else but when you become more fully yourself."},{english:"Where injustice flourishes, it is not enough to be personally righteous. Stand up, speak out, act decisively."},{english:"Then spoke Ahura Mazda: We have no pastor here who is both knowing and holy. (Yasna 29.6)"},{english:"The practice of gratitude transforms ordinary moments into sacred experiences."},{english:"Truth is like the sunâ€”you cannot look directly at it for long, but it lights everything else."},{english:"I shall serve You with good thinking, with truth and righteous action, so that You may grant me that which leads to the straight path. (Yasna 28.5)"},{english:"May good thinking and truth dwell in our house forever, O Ahura Mazda. (Yasna 60.6)"},{english:"Look within with the same honesty you demand from others, the same compassion you show to friends."},{english:"The healing the world needs begins with the healing you give yourselfâ€”be gentle, be patient, be kind."},{english:"Hope is not a feeling but a decisionâ€”decide to hope and then live as if your hope is justified."},{english:"One chooses that rule of good thinking allied with truth in order to serve the beneficent spirit. (Yasna 51.18)"},{english:"The good mind is a gift that grows with giving. Share your wisdom freely, and watch understanding multiply among all beings."},{english:"When thought, word, and deed align like three rivers meeting, their combined power can move mountains of indifference."},{english:"The music of the spheres plays onâ€”attune your heart to hear the cosmic symphony of love."},{english:"We rise by lifting others, we succeed by serving others, we find ourselves by losing ourselves in love."},{english:"The truth you speak has a pastâ€”it comes from your experience. Make sure that past is worthy of the truth."},{english:"The beneficent spirit breathes in every act of kindness. When you lift another's burden, you lighten the world."},{english:"Your talents are gifts to be shared, not treasures to be hoardedâ€”invest them in making the world better."},{english:"The grateful heart attracts more to be grateful forâ€”appreciation is the magnet for abundance."},{english:"The person who knows their weaknesses is stronger than the person who denies them."},{english:"May good fortune come through truth to those who proclaim these teachings, O Mazda. (Yasna 51.16)"},{english:"Meditation is the art of listening to the still small voice that whispers your deepest truth."},{english:"The most important choice you make each day is who you choose to become in that day."},{english:"Order emerges not from control but from harmonyâ€”the willing cooperation of free beings choosing good."},{english:"True intelligence is not the ability to solve problems but to see the connections between all things."},{english:"Thus speaks the maiden: 'You are the support of good thinking, of truth, and of the lordship desired by Mazda.' (Yasna 53.3)"},{english:"The spiral of growth means you will revisit the same lessons at deeper levelsâ€”embrace the journey."},{english:"When you choose increase over decrease, healing over harm, you align with the progressive spirit of creation itself."},{english:"When someone trusts you with their vulnerability, you hold sacred ground. Tread carefully and gratefully."},{english:"Renewal comes not from changing everything at once but from changing one thing completely."},{english:"When will the noble warriors come who shall drive out from here the thirst of the wicked? (Yasna 32.1)"},{english:"The sacred space is wherever you are when you remember who you really are and why you are here."},{english:"Good thinking, good words, and good deedsâ€”these three bring a person to paradise, the best existence, light, and all good things. (Traditional summary)"},{english:"The progressive spirit never asks 'Why me?' but always 'How can I help?' Be an answer to someone's prayer today."},{english:"Then shall I recognize You as mighty, Mazda, when through good thinking You shall grant the blessings that the truthful and untruthful seek. (Yasna 45.8)"},{english:"I know You to be the first and the last, O Ahura Mazdaâ€”You are father of good thinking, creator of truth, judge of our actions. (Yasna 31.8)"},{english:"Wisdom is not knowing all the answers but asking better questions. Begin with: How can I serve?"},{english:"Conscience is the ember of the divine fire planted in every human heartâ€”tend it carefully."},{english:"By Your beneficent spirit and by fire, O Mazda, show me truth and good thinking, through whose work one goes to Your abode. (Yasna 31.20)"},{english:"Come to my help, O Mazda, grant me strength through truth and good thinking. (Yasna 33.6)"},{english:"Through good deeds and righteous words, may we please Your spirit, O Mazda. (Yasna 49.10)"},{english:"Through truth we serve the Lord of Wisdom with good mind and beneficial action. (Summary verse)"},{english:"Service is not about being needed but about being useful, not about being thanked but about being trustworthy."},{english:"I who shall serve You with good thinking... may I thus bring solace to the soul of Earth. (Yasna 28.2)"},{english:"Holiness is not about being perfect but about being present, not about being pure but about being real."},{english:"May we be guides for those who seek the path of truth and righteousness. (Yasna 31.22)"},{english:"Wisdom is like waterâ€”it takes the shape of whatever vessel contains it, yet never loses its essence."},{english:"The enlightened mind is like clear waterâ€”it reflects perfectly what is, without adding or subtracting anything."},{english:"A thankful heart is a magnet for miracles, drawing goodness from the infinite storehouse of grace."},{english:"The pattern that connects all things is love expressing itself as truth, truth expressing itself as justice."},{english:"We are all connectedâ€”what helps one helps all, what harms one harms all."},{english:"Both bridegroom and bride, bring your minds into agreement for the practice of the best thoughts. (Yasna 53.4)"},{english:"The questions you ask shape the life you liveâ€”ask better questions, live a better life."},{english:"May the light of good thinking shine in our hearts forever. (Prayer verse)"},{english:"True self-knowledge includes knowing not just what you are but what you could become."},{english:"I know You to be mighty when You help me with good thinking, O Mazda Ahura. (Yasna 31.5)"},{english:"Justice is not revenge but restorationâ€”making right what has been wrong, healing what has been harmed."},{english:"The sun rises not because you need it but because it is the nature of the sun to shineâ€”be like the sun."},{english:"Justice is love applied to systems, compassion embodied in institutions, kindness made structural."},{english:"Grant victory to those who speak truth and live righteously, O Ahura Mazda. (Yasna 48.12)"},{english:"The journey inward is the most courageous journeyâ€”it requires facing yourself without flinching."},{english:"I have realized You as beneficent, Mazda Ahura, when You came to me with good thinking and asked: 'Who are you willing to please?' (Yasna 49.3)"},{english:"Each choice carves a channel for future choices to follow. Choose wisely what river you dig for tomorrow."},{english:"Therefore may we be among those who make this world fresh and new! (Yasna 30.9)"},{english:"Truth is the gravity of the moral universeâ€”what goes up in lies must come down in consequences."},{english:"The weight of choice is the price of consciousness. Bear it gladly, for it makes you a partner in creation's unfolding."},{english:"This I ask You: Which is the first and which the last? (Yasna 44.6)"},{english:"Thank the sunrise for its faithfulness, the earth for its generosity, life for its infinite possibilities."},{english:"The sacred is not separate from the ordinary but hidden within it, waiting to be discovered."},{english:"Reflect with a clear mindâ€”each person for themselvesâ€”before the Great Event of Choices. Awaken to this doctrine: there is no compromise between right and wrong. (Yasna 30.2)"},{english:"Your choices reveal your values more accurately than your wordsâ€”choose as if your character depends on it."},{english:"You are not just in the world; the world is in youâ€”take care of both."},{english:"Time is the canvas, your choices the paint, your life the masterpieceâ€”create something beautiful."},{english:"I entrust my soul to You, O Mazda, seeking Your protection through good thinking. (Yasna 48.9)"},{english:"The isolated tree falls in the storm; a forest of trees stands strong together."},{english:"Sacred living means recognizing the extraordinary within the ordinary, the eternal within the temporal."},{english:"The arc of the moral universe bends toward justice only when conscious beings like you and me choose to bend it."},{english:"The cosmic order is written in every sunrise, every heartbeat, every act of genuine kindness."},{english:"This I ask You: Who holds up the earth below and keeps the sky from falling? (Yasna 44.4)"},{english:"Let the fire within purify your motives, clarify your vision, energize your compassion."},{english:"The strength of the individual is the community; the strength of the community is the individual."},{english:"The hands that heal are holier than the hands that pray without helping."},{english:"The grateful heart sees abundance everywhere; the ungrateful heart finds scarcity in plenty."},{english:"This I ask You: tell me truly, Ahuraâ€”how shall I drive deceit far from us who seek to promote truth in the world? (Yasna 51.4)"},{english:"Every ending contains a beginning; every death, a birth; every loss, an opportunity for growth."},{english:"Know yourself not to become self-absorbed but to become self-aware, not to focus inward but to focus clearly."},{english:"When these two spirits came together in the beginning, they established life and not-life, and how at the end the worst existence shall be for the followers of falsehood, but the best mind for the truthful. (Yasna 30.4)"},{english:"Wisdom is the art of living skillfully, the science of choosing well, the practice of loving wisely."},{english:"In the morning, set your mind like a compass toward truth; let all your steps follow this direction."},{english:"May Your fire shine forth to help the supporter of truth, O Mazda. (Yasna 34.4)"},{english:"The curious mind stays young, the learning heart stays open, the growing soul stays alive."},{english:"The bridge between what is and what could be is built with the materials of hope and hard work."},{english:"The mirror of self-reflection shows not what you want to see but what you need to see."},{english:"Let truth be our guide, good thinking our companion, right action our path. (Summary)"},{english:"The universe conspires to help those who help themselves and othersâ€”be part of the conspiracy of good."},{english:"Every act of love is a victory over the forces that diminish lifeâ€”love boldly, love widely, love deeply."},{english:"The paradox of wisdom: the more you truly know, the more you realize how much you don't know."},{english:"Each day offers lessons if you are willing to be a student, opportunities if you are willing to try."},{english:"Justice is not just a destination but a journeyâ€”walk it one step at a time, one choice at a time."},{english:"The beginner's mind sees possibilities everywhere; the expert mind sees problems in everything."},{english:"Every choice is a prayer, every decision a vote for the kind of world you want to live in."},{english:"Justice delayed is often justice denied, but justice rushed is sometimes injustice accomplished. Seek the balanced way."},{english:"To what land to flee? Where shall I go to flee? They exclude me from family and clan. (Yasna 46.1)"},{english:"You are the one who rewards both the truthful and the untruthful according to their deeds. (Yasna 43.12)"},{english:"Who, Mazda, is the faithful friend of Your spirit? Let him teach me the straight paths of good thinking and of truth. (Yasna 47.4)"},{english:"With outstretched hands I pray to You, O Mazda, first of all through truth. (Yasna 28.1)"},{english:"Self-reflection without self-compassion becomes self-criticism; self-compassion without self-reflection becomes self-deception."},{english:"May good thinking reign supreme, may truth be established in the world. (Yasna 45.10)"},{english:"True belonging doesn't require you to change who you are; it requires you to be who you are."},{english:"When you light the lamp of compassion, you illuminate your own path as well as others'."},{english:"The order of existence rewards those who align with it, not to punish those who don't, but to heal what is broken."},{english:"The good mind seeks first to understand, then to be understood; first to serve, then to be served."},{english:"The trinity of human goodnessâ€”think well, speak well, act wellâ€”echoes the divine harmony that sustains all worlds."},{english:"Freedom is not the absence of consequences but the power to choose which consequences you will embrace."},{english:"Every moment is a fresh beginning, every breath a new chance, every choice a sacred opportunity."},{english:"Begin each day by asking: How can I make today better than yesterday? End each day by answering: How did I succeed?"},{english:"Through Your most beneficent spirit, O Mazda, I seek to do Your will. (Yasna 47.1)"},{english:"The greatest sermon is a life well-lived in service to truth, beauty, and goodness."},{english:"The deepest truth is often the most simple: be kind, be honest, be helpful, be present."},{english:"Peace is not the absence of conflict but the presence of justice, not the silence of oppression but the harmony of mutual respect."},{english:"The darkest night produces the brightest starsâ€”your current darkness may be developing your greatest light."},{english:"Connection is the energy that exists between people when they feel seen, heard, and valued."},{english:"Like fire transforms wood to light, let your choices transform the world from what it is to what it should be."},{english:"Through good thinking, truth, and the spirit's power, they shall overcome the violence of the deceitful. (Yasna 32.16)"},{english:"The day unfolds like a scroll waiting to be written. What story will your choices tell?"},{english:"The gift of choice is also the burden of choiceâ€”embrace both aspects with equal courage."},{english:"The scales of justice are balanced not by equal punishment but by proportional restoration."},{english:"The seeds of tomorrow are planted in the soil of todayâ€”plant wisely."},{english:"Good thinking is the bridge between knowing and acting. Cross it with courage, and find yourself in the land of fulfillment."},{english:"I approach You, Mazda, with hands outstretched, with good thinking, with truth, hoping to please Your spirit with righteous actions. (Yasna 50.5)"},{english:"The heart that has been broken and healed is stronger than one that has never been tested."},{english:"Thanksgiving is not just a day but a way of lifeâ€”live thankfully and you will have much to be thankful for."},{english:"Begin each day by asking: How shall I increase the good in the world through my being here?"},{english:"The wise person learns from everyone, teaches everyone, and judges no one harshly."},{english:"Each breath is a gift, each heartbeat a blessing, each moment an opportunity for thankfulness."},{english:"Like a lighthouse guides ships safely home, let your conscience guide you through moral storms to peaceful harbors."},{english:"Your legacy is not what you leave behind but what you build in others while you are here."},{english:"The growing edge is always uncomfortableâ€”that's how you know you're growing."},{english:"We seek Your blessing through fire, through truth, through good thinking. (Yasna 36.3)"},{english:"This I ask You: tell me truly, Ahuraâ€”who was the first father of truth by begetting? (Yasna 44.3)"},{english:"Morning is creation's invitation to begin again. Accept it with gratitude and intentional presence."},{english:"Your conscience is the hearth of heavenâ€”tend it with thoughts of justice, words of compassion, deeds of righteousness."},{english:"Your life may be a drop in the ocean, but without your drop the ocean would be less."},{english:"When moral darkness surrounds you, be the flame that others can navigate by."},{english:"Grant us, O Mazda, the straight paths of good thinking and truth. (Yasna 33.5)"},{english:"Your conscience is the sacred fire that never sleeps, never lies, never abandons you in darkness."},{english:"Your work in the world is your worshipâ€”do it with the reverence you would bring to the most sacred task."},{english:"True leadership is not about being served but about serving, not about having followers but about creating leaders."},{english:"Renewal comes not from changing your circumstances but from changing your relationship to your circumstances."},{english:"Speak to me as friend speaks to friend! Show me the supports on which both worlds rest. (Yasna 31.3)"},{english:"The light you seek is the light you areâ€”stop looking for it and start being it."},{english:"Honesty is telling the truth to other people; integrity is telling the truth to yourself."},{english:"The wise person is not one who has never erred but one who learns from every mistake."},{english:"When the mind is clear like mountain water, right decisions flow naturally. Still the turbulent thoughts and find your center."},{english:"Through the beneficent spirit, Mazda, give me strength for good thinking, that I may find the straight paths of life. (Yasna 47.2)"},{english:"May we be among those who make this world progress, who are the healers of this world, O Mazda and You, O Truth. (Yasna 30.9)"},{english:"The wise Lord rewards those who serve truth with sincerity and devotion. (Teaching verse)"},{english:"The divine spark within you knows the difference between right and wrongâ€”trust it, follow it, serve it."},{english:"The inner flame burns brightest when fed by deeds of righteousness, words of truth, thoughts of love."},{english:"The deepest wisdom is often the simplest truth, lived with complete sincerity."},{english:"Every person you meet is fighting a battle you know nothing aboutâ€”be kind, be patient, be present."},{english:"The man of good life speaks to him of ill life: 'May your conscience torment you continuously!' (Yasna 46.11)"},{english:"The flame that burns for justice never consumes the just, only the injustice they oppose."},{english:"We approach You, O Ahura Mazda, with good thinking and truth, seeking Your blessing. (Yasna 34.1)"},{english:"Personal evolution is not about perfection but about progression, not about arrival but about journey."},{english:"Gratitude is the memory of the heartâ€”it never forgets a kindness received or given."},{english:"I shall worship You with good thinking, O Mazda Ahura, so that You may teach me truth through Your spirit. (Yasna 45.6)"},{english:"Each dawn brings the covenant renewed: to think with clarity, speak with truth, act with love."},{english:"Kindness is the universal language that the deaf can hear and the blind can see."},{english:"Even in the darkest times, remember: you are here for a reason, at this time, in this place."},{english:"The phoenix is not reborn from ashes but through themâ€”transformation requires embracing the fire."},{english:"As the first, O Mazda, You gave bodies and breath to the corporeal world through Your thought. (Yasna 31.11)"},{english:"Your inner fire is not yours aloneâ€”it is borrowed from the eternal flame that lights all worlds."},{english:"The river that moves you also moves through youâ€”you are not separate from the flow of life."},{english:"The ultimate measure of your life is not what you accomplish but who you become."},{english:"The most precious gift you can give another person is your full, undivided, loving attention."},{english:"Truth is not a destination but a way of walking. Each step in harmony with what is right brings the world closer to wholeness."},{english:"May Ahura Mazda grant us that good which we seek through truth and good thinking. (Yasna 60.12)"},{english:"Gratitude turns what we have into enough, transforms ordinary days into thanksgivings, routine jobs into joy."},{english:"Love is the recognition that the other person's happiness is as important as your ownâ€”maybe more important."},{english:"Every person you meet is your teacherâ€”some teach by example, others by cautionary tale."},{english:"Through righteousness may we attain that world of good thinking. (Yasna 34.15)"},{english:"The deceitful one chose to bring to realization the worst things. But the very beneficent spirit chose truth, and so shall those who satisfy the Wise Lord continuously with true actions. (Yasna 30.5)"},{english:"Each breath is a chance to choose life over death, hope over despair, love over fear."},{english:"True understanding comes not from accumulating facts but from seeing the patterns that connect all things."},{english:"Every act of service is a prayer, every moment of helpfulness a hymn, every gesture of kindness a blessing."},{english:"Where truth blooms, falsehood cannot take root. Cultivate the garden of your life with seeds of honesty and integrity."},{english:"The future is not fixed because you are still choosingâ€”make your next choice count."},{english:"The most powerful force in the universe is a human being living in alignment with their highest truth."},{english:"When you see injustice and do nothing, you become part of the injusticeâ€”speak up, stand up, act up."},{english:"As rivers seek the sea, let your thoughts flow toward truth. In the silence of right action, wisdom speaks without words."},{english:"Your daily work is your temple, your loving relationships your prayer, your kind actions your worship."},{english:"The true order of existence is good; the most-good existence it is; desire it! Wish it! Happiness, bliss, enlightenment it is for that existence which is the true order of existence. (Ashem Vohu)"},{english:"The heart that has known pain is the heart most capable of healing others' pain."},{english:"Conflict is often the birth-pain of greater understandingâ€”do not avoid it, but engage it constructively."},{english:"Clear thinking leads to clear speaking, which leads to clear acting. Begin each day by clarifying your deepest intentions."},{english:"The order of existence reveals itself to those who seek with sincere hearts. Look closelyâ€”truth hides in plain sight."},{english:"Let the actions of good thinking come to fruition for the man who teaches truth to Zarathustra. (Yasna 28.6)"},{english:"The loving man who brings help to the truthful, whether kinsman or fellow-member of the community, is in good accord with truth. (Yasna 46.2)"},{english:"When shall I know that You have power over those who cause harm to me, O Mazda? Let fire accompanied by good thinking make this known to me through truth. (Yasna 48.7)"},{english:"Clarity comes not from having all the answers but from asking the right questions."},{english:"Wisdom is knowing what to do; virtue is doing it; integrity is being consistent in both."},{english:"And when punishment comes to the wicked, then shall Your power be revealed to all, O Mazda. (Yasna 30.8)"},{english:"Your network is not about who can help you but who you can help, not who you know but who knows they can count on you."},{english:"Every ending is a new beginning in disguiseâ€”look for the hidden gift in every goodbye."},{english:"Through truth I complete my worship and my praise with actions, O Mazda Ahura. (Yasna 50.11)"},{english:"Where shall the righteous man find refuge when the wicked overwhelm the land? (Yasna 46.1)"},{english:"Like a river finds its course, truth finds its way through every obstacle. Be the clear channel through which it flows."},{english:"Every moment offers the great choice: will you add to the world's burden or its blessing? Choose consciously."},{english:"The rhythm of sunrise and sunset teaches the sacred pace of effort and rest, engagement and reflection."},{english:"Your fire, strong through truth, is a visible help to Your supporter, but visible harm to Your enemy, O Ahura Mazda. (Yasna 34.4)"},{english:"The soul of the earth cries out: For whom did You fashion me? Who created me? (Yasna 29.1)"},{english:"Service is the rent we pay for living on this planetâ€”pay it gladly and generously."}],c=5,u=l.length,d=[];for(let p=0;p<c;p++)d.push(...l);const h=[...d.slice(d.length-u),...d,...d.slice(0,u)],f=async()=>{if(n||!s.current||t<=0){console.log("No spins left or already spinning.");return}console.log("handleSpin called");try{new Audio("/gear-click-351962.mp3").play().catch(x=>console.error("Error playing sound:",x))}catch(y){console.error("Error creating Audio object:",y)}if(o(!0),e(y=>y-1),r)try{await r(3-t+1)}catch(y){console.error("Error updating spin count:",y)}const p=Math.floor(Math.random()*l.length),b=(u+p+l.length*Math.floor(c/2))*a;s.current.classList.add("prophecy-reel-spinning"),s.current.style.transform=`translateY(-${b}px)`,setTimeout(()=>{if(!s.current)return;s.current.classList.remove("prophecy-reel-spinning"),s.current.style.transition="none";const y=p*a;s.current.style.transform=`translateY(-${y}px)`,s.current.offsetHeight,s.current.style.transition="transform 1.5s cubic-bezier(0.25, 1, 0.5, 1)",o(!1)},1600)};return i.jsx(i.Fragment,{children:i.jsx("div",{className:oe.prophecyMask,onClick:f,children:i.jsx("div",{ref:s,className:oe.prophecyReel,children:h.map((p,m)=>i.jsx("div",{className:oe.prophecyItem,children:i.jsx("span",{className:oe.englishText,children:p.english})},m))})})})},dj=({contentMap:t,spinsLeft:e,setSpinsLeft:r,onSpin:s})=>{var l,c,u;const n=((l=t.get("hero_title"))==null?void 0:l.content)||"Zoroasterverse",o=((c=t.get("hero_quote"))==null?void 0:c.content)||"â€œHappiness comes to them who bring happiness to others.â€",a=((u=t.get("hero_description"))==null?void 0:u.content)||"Learn about the teachings of the prophet Zarathustra, the history of one of the worldâ€™s oldest religions, and the principles of Good Thoughts, Good Words, and Good Deeds.";return i.jsxs("section",{id:"home",className:oe.zrHero,children:[i.jsxs("div",{className:oe.zrHeroContent,children:[i.jsx("h1",{className:oe.zrTitle,children:n}),i.jsx("p",{className:oe.zrQuote,children:o}),i.jsx("p",{className:oe.zrIntro,children:a}),i.jsx(vr,{className:oe.zrCta,to:"/blog/about",children:"Learn More"})]}),i.jsxs("figure",{className:oe.zrHeroArt,"aria-labelledby":"art-caption",children:[i.jsx("video",{src:"/200716-913538378.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:oe.videoFire}),i.jsx("div",{className:oe.spinsIndicator,children:[...Array(3)].map((d,h)=>i.jsx("div",{className:`${oe.spinDot} ${h<e?oe.spinDotActive:""}`},h))}),i.jsx(uj,{spinsLeft:e,setSpinsLeft:r,onSpin:s}),i.jsx("figcaption",{id:"art-caption",className:"sr-only",children:"A stylized winged figure above a sacred fire."})]})]})},hj=({posts:t})=>i.jsxs("section",{className:oe.zrSection,children:[i.jsx("h2",{className:oe.zrH2,children:"Latest News & Updates"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map(e=>{const r=e.content.length>100?e.content.substring(0,100)+"...":e.content;return i.jsxs("div",{className:oe.parchmentCard,children:[i.jsx("h3",{children:e.title}),i.jsx("p",{className:"mt-2",dangerouslySetInnerHTML:{__html:r}}),i.jsx(vr,{to:`/blog/${e.slug}`,className:"mt-4 inline-block",children:"Read More"})]},e.id)})})]}),fj=({releases:t})=>i.jsxs("section",{className:oe.zrSection,children:[i.jsx("h2",{className:oe.zrH2,children:"Latest Releases"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map(e=>i.jsxs("div",{className:oe.parchmentCard,children:[i.jsx("h3",{children:e.title}),i.jsxs("p",{className:"mt-2",children:["Type: ",e.type]}),i.jsx("a",{href:e.link||"#",className:"mt-4 inline-block",children:"View Details / Purchase"})]},e.id))})]}),pj=({homepageData:t=[],latestPosts:e=[],releaseData:r=[],spinsLeft:s=0,isLoading:n=!1,isError:o=!1,onSpin:a})=>{var d,h,f,p;const[l,c]=g.useState(s);if(n)return i.jsx("div",{className:"text-center py-8",children:"Loading homepage content..."});if(o)return i.jsx("div",{className:"text-center py-8 text-red-400",children:"Error loading homepage content."});const u=new Map(t==null?void 0:t.map(m=>[m.section,m]));return i.jsxs("div",{children:[i.jsx(dj,{contentMap:u,spinsLeft:l,setSpinsLeft:c,onSpin:a}),i.jsxs("section",{className:oe.zrSection,children:[i.jsx("h2",{className:oe.zrH2,children:"Our Progress"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[i.jsxs("div",{className:oe.parchmentCard,children:[i.jsx("h3",{className:"text-4xl font-bold text-primary",children:((d=u.get("statistics_words_written"))==null?void 0:d.content)||"0"}),i.jsx("p",{className:"text-muted-foreground",children:"Words Written"})]}),i.jsxs("div",{className:oe.parchmentCard,children:[i.jsx("h3",{className:"text-4xl font-bold text-primary",children:((h=u.get("statistics_beta_readers"))==null?void 0:h.content)||"0"}),i.jsx("p",{className:"text-muted-foreground",children:"Beta Readers"})]}),i.jsxs("div",{className:oe.parchmentCard,children:[i.jsx("h3",{className:"text-4xl font-bold text-primary",children:((f=u.get("statistics_average_rating"))==null?void 0:f.content)||"0"}),i.jsx("p",{className:"text-muted-foreground",children:"Average Rating"})]}),i.jsxs("div",{className:oe.parchmentCard,children:[i.jsx("h3",{className:"text-4xl font-bold text-primary",children:((p=u.get("statistics_books_published"))==null?void 0:p.content)||"0"}),i.jsx("p",{className:"text-muted-foreground",children:"Books Published"})]})]})]}),i.jsx(hj,{posts:e||[]}),i.jsx(fj,{releases:r||[]}),i.jsxs("section",{className:oe.zrSection,children:[i.jsx("h2",{className:oe.zrH2,children:"Artist Collaboration"}),i.jsxs("div",{className:"relative rounded-lg shadow-lg overflow-hidden w-full",children:[i.jsx("img",{src:"/images/invite_to_Colab_card.png",alt:"Artist Collaboration Invitation",className:"w-full h-full object-contain"}),i.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-8",children:[i.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-shadow-md",children:"Join Our Creative Team!"}),i.jsx("p",{className:"text-white mb-6 text-shadow-sm",children:"We're looking for talented artists to help shape the visual identity of the Zangar/Spandam Series. Explore revenue-share opportunities and bring your vision to life."}),i.jsx(vr,{to:"/artist-collaboration",className:"inline-block bg-primary hover:bg-primary-dark text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:"Apply Now"})]})]})]})]})};function mj(...t){return Um(hu(t))}const gj=({count:t=4,viewMode:e="grid",className:r})=>{const s=Array.from({length:t},(n,o)=>i.jsxs("div",{className:`${e==="grid"?"bg-background-light/30 backdrop-blur-sm rounded-2xl border border-border/30 overflow-hidden":"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30"}`,children:[i.jsx("div",{className:"h-64 bg-gradient-to-r from-border/20 to-border/40 skeleton"}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"h-6 bg-border/20 rounded skeleton mb-3"}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsx("div",{className:"h-4 bg-border/20 rounded skeleton"}),i.jsx("div",{className:"h-4 bg-border/20 rounded skeleton w-3/4"}),i.jsx("div",{className:"h-4 bg-border/20 rounded skeleton w-1/2"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"h-4 bg-border/20 rounded skeleton w-24 mb-2"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("div",{className:"h-6 bg-border/20 rounded-full skeleton w-16"}),i.jsx("div",{className:"h-6 bg-border/20 rounded-full skeleton w-20"})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"h-8 bg-border/20 rounded skeleton w-20 mb-2"}),i.jsx("div",{className:"h-4 bg-border/20 rounded skeleton w-32"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"h-12 bg-border/20 rounded-xl skeleton"}),i.jsx("div",{className:"h-10 bg-border/20 rounded-xl skeleton"})]})]})]},o));return i.jsx("div",{className:mj(e==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",r),children:s})},yj=()=>{const t=g.useRef(null);return g.useEffect(()=>{const e=t.current;if(!e)return;const r=50,s=()=>{const o=document.createElement("div");o.className="star",o.style.position="absolute",o.style.backgroundColor="#ffffff",o.style.borderRadius="50%",o.style.left=Math.random()*100+"%",o.style.top=Math.random()*100+"%";const a=Math.random()*3+1;o.style.width=o.style.height=a+"px",o.style.animationDelay=Math.random()*3+"s",o.style.animationDuration=Math.random()*2+2+"s",o.style.pointerEvents="none",e.appendChild(o)};e.innerHTML="";for(let o=0;o<r;o++)s();const n=()=>{const a=window.pageYOffset*-.1;e&&(e.style.transform=`translateY(${a}px)`)};return window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}},[]),i.jsx("div",{ref:t,className:"stars fixed top-0 left-0 w-full h-full pointer-events-none -z-10",children:" "})},_g={items:[],total:0,itemCount:0},vj=(t,e)=>{switch(e.type){case"ADD_ITEM":if(t.items.find(s=>s.id===e.payload.id)){const s=t.items.map(a=>a.id===e.payload.id?{...a,quantity:a.quantity+e.payload.quantity}:a),n=s.reduce((a,l)=>a+l.price*l.quantity,0),o=s.reduce((a,l)=>a+l.quantity,0);return{...t,items:s,total:n,itemCount:o}}else{const s=[...t.items,e.payload],n=s.reduce((a,l)=>a+l.price*l.quantity,0),o=s.reduce((a,l)=>a+l.quantity,0);return{...t,items:s,total:n,itemCount:o}}case"REMOVE_ITEM":{const r=t.items.filter(o=>o.id!==e.payload),s=r.reduce((o,a)=>o+a.price*a.quantity,0),n=r.reduce((o,a)=>o+a.quantity,0);return{...t,items:r,total:s,itemCount:n}}case"UPDATE_QUANTITY":{const r=t.items.map(o=>o.id===e.payload.id?{...o,quantity:e.payload.quantity}:o),s=r.reduce((o,a)=>o+a.price*a.quantity,0),n=r.reduce((o,a)=>o+a.quantity,0);return{...t,items:r,total:s,itemCount:n}}case"CLEAR_CART":return _g;case"LOAD_CART":{const r=e.payload.reduce((n,o)=>n+o.price*o.quantity,0),s=e.payload.reduce((n,o)=>n+o.quantity,0);return{...t,items:e.payload,total:r,itemCount:s}}default:return t}},bj=g.createContext(void 0),xj=({children:t})=>{const[e,r]=g.useReducer(vj,_g),s=u=>{r({type:"ADD_ITEM",payload:{...u,quantity:1}})},n=u=>{r({type:"REMOVE_ITEM",payload:u})},c={state:e,addItem:s,removeItem:n,updateQuantity:(u,d)=>{d<=0?n(u):r({type:"UPDATE_QUANTITY",payload:{id:u,quantity:d}})},clearCart:()=>{r({type:"CLEAR_CART"})},isInCart:u=>e.items.some(d=>d.id===u)};return i.jsx(bj.Provider,{value:c,children:t})},wj=async t=>{const{data:e,error:r}=await pe.from("subscriptions").select("*").eq("user_id",t).single();return r?(console.error("Error fetching subscription:",r),null):e},_j=async t=>{const e=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t),r=pe.from("wiki_pages").select(`
      id, created_at, created_by, title, slug, excerpt, is_published, category_id, folder_id, updated_at, view_count,
      content, seo_title, seo_description, seo_keywords,
      category(*),
      user(*)
    `).eq(e?"id":"slug",t),{data:s,error:n}=await r.single();if(n)return console.error("Error fetching wiki page:",n),null;if(s){s.user&&typeof s.user=="object"&&"error"in s.user&&(s.user=null),s.category&&typeof s.category=="object"&&"error"in s.category&&(s.category=null);const{data:o,error:a}=await pe.from("wiki_content_blocks").select("id, type, content, position").eq("page_id",s.id).order("position");if(a)throw console.error("Error fetching wiki content:",a),new Error("Failed to fetch wiki content");const l=(o==null?void 0:o.map(u=>({id:u.id,type:u.type,content:u.content,title:""})))||[];return await pe.rpc("increment_wiki_page_views",{page_id:s.id}),{...s,sections:l,content:s.content||"",seo_title:s.seo_title||"",seo_description:s.seo_description||"",seo_keywords:s.seo_keywords||[],category:s.category,user:s.user}}return null},jj=async t=>{const e={books_read:0,reading_hours:0,achievements:0,currently_reading:"None"},{data:r,error:s}=await pe.from("user_stats").upsert({user_id:t,...e},{onConflict:"user_id"}).select("*").single();if(s)throw console.error("Error initializing user stats:",s),s;return r},Sj=async t=>{try{const{data:e,error:r}=await pe.from("user_stats").select("*").eq("user_id",t).maybeSingle();if(!e&&(!r||r.code==="PGRST116"))return jj(t);if(r)throw r;return e}catch(e){throw console.error("Error fetching user stats:",e),e}};var tn;(function(t){t.UNAUTHORIZED="UNAUTHORIZED",t.FORBIDDEN="FORBIDDEN",t.INVALID_TOKEN="INVALID_TOKEN",t.INSUFFICIENT_PERMISSIONS="INSUFFICIENT_PERMISSIONS",t.VALIDATION_ERROR="VALIDATION_ERROR",t.INVALID_INPUT="INVALID_INPUT",t.MISSING_REQUIRED_FIELD="MISSING_REQUIRED_FIELD",t.BUSINESS_RULE_VIOLATION="BUSINESS_RULE_VIOLATION",t.SUBSCRIPTION_LIMIT_EXCEEDED="SUBSCRIPTION_LIMIT_EXCEEDED",t.CONTENT_ACCESS_DENIED="CONTENT_ACCESS_DENIED",t.PRICING_ERROR="PRICING_ERROR",t.RESOURCE_NOT_FOUND="RESOURCE_NOT_FOUND",t.DUPLICATE_RESOURCE="DUPLICATE_RESOURCE",t.DATA_INTEGRITY_ERROR="DATA_INTEGRITY_ERROR",t.PAYMENT_PROCESSING_ERROR="PAYMENT_PROCESSING_ERROR",t.EMAIL_SERVICE_ERROR="EMAIL_SERVICE_ERROR",t.STORAGE_SERVICE_ERROR="STORAGE_SERVICE_ERROR",t.DATABASE_ERROR="DATABASE_ERROR",t.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",t.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",t.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED"})(tn||(tn={}));class xa extends Error{constructor(e,r,s,n=!0,o){super(e),this.name=this.constructor.name,this.code=r,this.statusCode=s,this.isOperational=n,this.context=o,Error.captureStackTrace(this,this.constructor)}}class ps extends xa{constructor(e,r){super(e,tn.VALIDATION_ERROR,400,!0,r)}}class kn extends xa{constructor(e,r){super(e,tn.BUSINESS_RULE_VIOLATION,422,!0,r)}}class Kt extends xa{constructor(e,r,s){const n=r?`${e} with ID '${r}' not found`:`${e} not found`;super(n,tn.RESOURCE_NOT_FOUND,404,!0,s)}}class Te extends xa{constructor(e,r){super(e,tn.DATABASE_ERROR,500,!1,r)}}function A(t,e,r){function s(l,c){var u;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(u=l._zod).traits??(u.traits=new Set),l._zod.traits.add(t),e(l,c);for(const d in a.prototype)d in l||Object.defineProperty(l,d,{value:a.prototype[d].bind(l)});l._zod.constr=a,l._zod.def=c}const n=(r==null?void 0:r.Parent)??Object;class o extends n{}Object.defineProperty(o,"name",{value:t});function a(l){var c;const u=r!=null&&r.Parent?new o:this;s(u,l),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(a,"init",{value:s}),Object.defineProperty(a,Symbol.hasInstance,{value:l=>{var c,u;return r!=null&&r.Parent&&l instanceof r.Parent?!0:(u=(c=l==null?void 0:l._zod)==null?void 0:c.traits)==null?void 0:u.has(t)}}),Object.defineProperty(a,"name",{value:t}),a}class Ds extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class jg extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const Sg={};function xr(t){return Sg}function kj(t){const e=Object.values(t).filter(s=>typeof s=="number");return Object.entries(t).filter(([s,n])=>e.indexOf(+s)===-1).map(([s,n])=>n)}function hc(t,e){return typeof e=="bigint"?e.toString():e}function ju(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Su(t){return t==null}function ku(t){const e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function Tj(t,e){const r=(t.toString().split(".")[1]||"").length,s=e.toString();let n=(s.split(".")[1]||"").length;if(n===0&&/\d?e-\d?/.test(s)){const c=s.match(/\d?e-(\d?)/);c!=null&&c[1]&&(n=Number.parseInt(c[1]))}const o=r>n?r:n,a=Number.parseInt(t.toFixed(o).replace(".","")),l=Number.parseInt(e.toFixed(o).replace(".",""));return a%l/10**o}const ah=Symbol("evaluating");function ue(t,e,r){let s;Object.defineProperty(t,e,{get(){if(s!==ah)return s===void 0&&(s=ah,s=r()),s},set(n){Object.defineProperty(t,e,{value:n})},configurable:!0})}function Pj(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}function kr(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function mn(...t){const e={};for(const r of t){const s=Object.getOwnPropertyDescriptors(r);Object.assign(e,s)}return Object.defineProperties({},e)}function lh(t){return JSON.stringify(t)}const kg="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Ko(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Ej=ju(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function rn(t){if(Ko(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(Ko(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Tg(t){return rn(t)?{...t}:t}const Nj=new Set(["string","number","symbol"]);function wa(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Tr(t,e,r){const s=new t._zod.constr(e??t._zod.def);return(!e||r!=null&&r.parent)&&(s._zod.parent=t),s}function W(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Cj(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const Aj={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Oj(t,e){const r=t._zod.def,s=mn(t._zod.def,{get shape(){const n={};for(const o in e){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(n[o]=r.shape[o])}return kr(this,"shape",n),n},checks:[]});return Tr(t,s)}function Rj(t,e){const r=t._zod.def,s=mn(t._zod.def,{get shape(){const n={...t._zod.def.shape};for(const o in e){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete n[o]}return kr(this,"shape",n),n},checks:[]});return Tr(t,s)}function Ij(t,e){if(!rn(e))throw new Error("Invalid input to extend: expected a plain object");const r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const n=mn(t._zod.def,{get shape(){const o={...t._zod.def.shape,...e};return kr(this,"shape",o),o},checks:[]});return Tr(t,n)}function $j(t,e){if(!rn(e))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...t._zod.def,get shape(){const s={...t._zod.def.shape,...e};return kr(this,"shape",s),s},checks:t._zod.def.checks};return Tr(t,r)}function Mj(t,e){const r=mn(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e._zod.def.shape};return kr(this,"shape",s),s},get catchall(){return e._zod.def.catchall},checks:[]});return Tr(t,r)}function Dj(t,e,r){const s=mn(e._zod.def,{get shape(){const n=e._zod.def.shape,o={...n};if(r)for(const a in r){if(!(a in n))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(o[a]=t?new t({type:"optional",innerType:n[a]}):n[a])}else for(const a in n)o[a]=t?new t({type:"optional",innerType:n[a]}):n[a];return kr(this,"shape",o),o},checks:[]});return Tr(e,s)}function Lj(t,e,r){const s=mn(e._zod.def,{get shape(){const n=e._zod.def.shape,o={...n};if(r)for(const a in r){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(o[a]=new t({type:"nonoptional",innerType:n[a]}))}else for(const a in n)o[a]=new t({type:"nonoptional",innerType:n[a]});return kr(this,"shape",o),o},checks:[]});return Tr(e,s)}function Es(t,e=0){var r;if(t.aborted===!0)return!0;for(let s=e;s<t.issues.length;s++)if(((r=t.issues[s])==null?void 0:r.continue)!==!0)return!0;return!1}function Ns(t,e){return e.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(t),r})}function to(t){return typeof t=="string"?t:t==null?void 0:t.message}function wr(t,e,r){var n,o,a,l,c,u;const s={...t,path:t.path??[]};if(!t.message){const d=to((a=(o=(n=t.inst)==null?void 0:n._zod.def)==null?void 0:o.error)==null?void 0:a.call(o,t))??to((l=e==null?void 0:e.error)==null?void 0:l.call(e,t))??to((c=r.customError)==null?void 0:c.call(r,t))??to((u=r.localeError)==null?void 0:u.call(r,t))??"Invalid input";s.message=d}return delete s.inst,delete s.continue,e!=null&&e.reportInput||delete s.input,s}function Tu(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function pi(...t){const[e,r,s]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:s}:{...e}}const Pg=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,hc,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Eg=A("$ZodError",Pg),Ng=A("$ZodError",Pg,{Parent:Error});function Fj(t,e=r=>r.message){const r={},s=[];for(const n of t.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:r}}function zj(t,e){const r=e||function(o){return o.message},s={_errors:[]},n=o=>{for(const a of o.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>n({issues:l}));else if(a.code==="invalid_key")n({issues:a.issues});else if(a.code==="invalid_element")n({issues:a.issues});else if(a.path.length===0)s._errors.push(r(a));else{let l=s,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return n(t),s}const Pu=t=>(e,r,s,n)=>{const o=s?Object.assign(s,{async:!1}):{async:!1},a=e._zod.run({value:r,issues:[]},o);if(a instanceof Promise)throw new Ds;if(a.issues.length){const l=new((n==null?void 0:n.Err)??t)(a.issues.map(c=>wr(c,o,xr())));throw kg(l,n==null?void 0:n.callee),l}return a.value},Eu=t=>async(e,r,s,n)=>{const o=s?Object.assign(s,{async:!0}):{async:!0};let a=e._zod.run({value:r,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){const l=new((n==null?void 0:n.Err)??t)(a.issues.map(c=>wr(c,o,xr())));throw kg(l,n==null?void 0:n.callee),l}return a.value},_a=t=>(e,r,s)=>{const n=s?{...s,async:!1}:{async:!1},o=e._zod.run({value:r,issues:[]},n);if(o instanceof Promise)throw new Ds;return o.issues.length?{success:!1,error:new(t??Eg)(o.issues.map(a=>wr(a,n,xr())))}:{success:!0,data:o.value}},Uj=_a(Ng),ja=t=>async(e,r,s)=>{const n=s?Object.assign(s,{async:!0}):{async:!0};let o=e._zod.run({value:r,issues:[]},n);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(a=>wr(a,n,xr())))}:{success:!0,data:o.value}},Bj=ja(Ng),Vj=t=>(e,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Pu(t)(e,r,n)},qj=t=>(e,r,s)=>Pu(t)(e,r,s),Gj=t=>async(e,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Eu(t)(e,r,n)},Wj=t=>async(e,r,s)=>Eu(t)(e,r,s),Hj=t=>(e,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return _a(t)(e,r,n)},Zj=t=>(e,r,s)=>_a(t)(e,r,s),Yj=t=>async(e,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return ja(t)(e,r,n)},Kj=t=>async(e,r,s)=>ja(t)(e,r,s),Jj=/^[cC][^\s-]{8,}$/,Qj=/^[0-9a-z]+$/,Xj=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,eS=/^[0-9a-vA-V]{20}$/,tS=/^[A-Za-z0-9]{27}$/,rS=/^[a-zA-Z0-9_-]{21}$/,sS=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,nS=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ch=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,iS=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,oS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function aS(){return new RegExp(oS,"u")}const lS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cS=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,uS=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,dS=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,hS=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Cg=/^[A-Za-z0-9_-]*$/,fS=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,pS=/^\+(?:[0-9]){6,14}[0-9]$/,Ag="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",mS=new RegExp(`^${Ag}$`);function Og(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function gS(t){return new RegExp(`^${Og(t)}$`)}function yS(t){const e=Og({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${e}(?:${r.join("|")})`;return new RegExp(`^${Ag}T(?:${s})$`)}const vS=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},bS=/^\d+$/,xS=/^-?\d+(?:\.\d+)?/i,wS=/true|false/i,_S=/^[^A-Z]*$/,jS=/^[^a-z]*$/,Qe=A("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),Rg={number:"number",bigint:"bigint",object:"date"},Ig=A("$ZodCheckLessThan",(t,e)=>{Qe.init(t,e);const r=Rg[typeof e.value];t._zod.onattach.push(s=>{const n=s._zod.bag,o=(e.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?n.maximum=e.value:n.exclusiveMaximum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value<=e.value:s.value<e.value)||s.issues.push({origin:r,code:"too_big",maximum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),$g=A("$ZodCheckGreaterThan",(t,e)=>{Qe.init(t,e);const r=Rg[typeof e.value];t._zod.onattach.push(s=>{const n=s._zod.bag,o=(e.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?n.minimum=e.value:n.exclusiveMinimum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value>=e.value:s.value>e.value)||s.issues.push({origin:r,code:"too_small",minimum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),SS=A("$ZodCheckMultipleOf",(t,e)=>{Qe.init(t,e),t._zod.onattach.push(r=>{var s;(s=r._zod.bag).multipleOf??(s.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):Tj(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),kS=A("$ZodCheckNumberFormat",(t,e)=>{var a;Qe.init(t,e),e.format=e.format||"float64";const r=(a=e.format)==null?void 0:a.includes("int"),s=r?"int":"number",[n,o]=Aj[e.format];t._zod.onattach.push(l=>{const c=l._zod.bag;c.format=e.format,c.minimum=n,c.maximum=o,r&&(c.pattern=bS)}),t._zod.check=l=>{const c=l.value;if(r){if(!Number.isInteger(c)){l.issues.push({expected:s,format:e.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort});return}}c<n&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:n,inclusive:!0,inst:t,continue:!e.abort}),c>o&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inst:t})}}),TS=A("$ZodCheckMaxLength",(t,e)=>{var r;Qe.init(t,e),(r=t._zod.def).when??(r.when=s=>{const n=s.value;return!Su(n)&&n.length!==void 0}),t._zod.onattach.push(s=>{const n=s._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<n&&(s._zod.bag.maximum=e.maximum)}),t._zod.check=s=>{const n=s.value;if(n.length<=e.maximum)return;const a=Tu(n);s.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),PS=A("$ZodCheckMinLength",(t,e)=>{var r;Qe.init(t,e),(r=t._zod.def).when??(r.when=s=>{const n=s.value;return!Su(n)&&n.length!==void 0}),t._zod.onattach.push(s=>{const n=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>n&&(s._zod.bag.minimum=e.minimum)}),t._zod.check=s=>{const n=s.value;if(n.length>=e.minimum)return;const a=Tu(n);s.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),ES=A("$ZodCheckLengthEquals",(t,e)=>{var r;Qe.init(t,e),(r=t._zod.def).when??(r.when=s=>{const n=s.value;return!Su(n)&&n.length!==void 0}),t._zod.onattach.push(s=>{const n=s._zod.bag;n.minimum=e.length,n.maximum=e.length,n.length=e.length}),t._zod.check=s=>{const n=s.value,o=n.length;if(o===e.length)return;const a=Tu(n),l=o>e.length;s.issues.push({origin:a,...l?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:s.value,inst:t,continue:!e.abort})}}),Sa=A("$ZodCheckStringFormat",(t,e)=>{var r,s;Qe.init(t,e),t._zod.onattach.push(n=>{const o=n._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:e.format,input:n.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(s=t._zod).check??(s.check=()=>{})}),NS=A("$ZodCheckRegex",(t,e)=>{Sa.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),CS=A("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=_S),Sa.init(t,e)}),AS=A("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=jS),Sa.init(t,e)}),OS=A("$ZodCheckIncludes",(t,e)=>{Qe.init(t,e);const r=wa(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=s,t._zod.onattach.push(n=>{const o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(s)}),t._zod.check=n=>{n.value.includes(e.includes,e.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:n.value,inst:t,continue:!e.abort})}}),RS=A("$ZodCheckStartsWith",(t,e)=>{Qe.init(t,e);const r=new RegExp(`^${wa(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(s=>{const n=s._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),t._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:t,continue:!e.abort})}}),IS=A("$ZodCheckEndsWith",(t,e)=>{Qe.init(t,e);const r=new RegExp(`.*${wa(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(s=>{const n=s._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),t._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:t,continue:!e.abort})}}),$S=A("$ZodCheckOverwrite",(t,e)=>{Qe.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});class MS{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(a=>a),n=Math.min(...s.map(a=>a.length-a.trimStart().length)),o=s.map(a=>a.slice(n)).map(a=>" ".repeat(this.indent*2)+a);for(const a of o)this.content.push(a)}compile(){const e=Function,r=this==null?void 0:this.args,n=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new e(...r,n.join(`
`))}}const DS={major:4,minor:1,patch:3},be=A("$ZodType",(t,e)=>{var n;var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=DS;const s=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&s.unshift(t);for(const o of s)for(const a of o._zod.onattach)a(t);if(s.length===0)(r=t._zod).deferred??(r.deferred=[]),(n=t._zod.deferred)==null||n.push(()=>{t._zod.run=t._zod.parse});else{const o=(l,c,u)=>{let d=Es(l),h;for(const f of c){if(f._zod.def.when){if(!f._zod.def.when(l))continue}else if(d)continue;const p=l.issues.length,m=f._zod.check(l);if(m instanceof Promise&&(u==null?void 0:u.async)===!1)throw new Ds;if(h||m instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await m,l.issues.length!==p&&(d||(d=Es(l,p)))});else{if(l.issues.length===p)continue;d||(d=Es(l,p))}}return h?h.then(()=>l):l},a=(l,c,u)=>{if(Es(l))return l.aborted=!0,l;const d=o(c,s,u);if(d instanceof Promise){if(u.async===!1)throw new Ds;return d.then(h=>t._zod.parse(h,u))}return t._zod.parse(d,u)};t._zod.run=(l,c)=>{if(c.skipChecks)return t._zod.parse(l,c);if(c.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(h=>a(h,l,c)):a(d,l,c)}const u=t._zod.parse(l,c);if(u instanceof Promise){if(c.async===!1)throw new Ds;return u.then(d=>o(d,s,c))}return o(u,s,c)}}t["~standard"]={validate:o=>{var a;try{const l=Uj(t,o);return l.success?{value:l.data}:{issues:(a=l.error)==null?void 0:a.issues}}catch{return Bj(t,o).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),Nu=A("$ZodString",(t,e)=>{var r;be.init(t,e),t._zod.pattern=[...((r=t==null?void 0:t._zod.bag)==null?void 0:r.patterns)??[]].pop()??vS(t._zod.bag),t._zod.parse=(s,n)=>{if(e.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:t}),s}}),ye=A("$ZodStringFormat",(t,e)=>{Sa.init(t,e),Nu.init(t,e)}),LS=A("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=nS),ye.init(t,e)}),FS=A("$ZodUUID",(t,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=ch(s))}else e.pattern??(e.pattern=ch());ye.init(t,e)}),zS=A("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=iS),ye.init(t,e)}),US=A("$ZodURL",(t,e)=>{ye.init(t,e),t._zod.check=r=>{try{const s=r.value.trim(),n=new URL(s);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:fS.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=n.href:r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),BS=A("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=aS()),ye.init(t,e)}),VS=A("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=rS),ye.init(t,e)}),qS=A("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=Jj),ye.init(t,e)}),GS=A("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Qj),ye.init(t,e)}),WS=A("$ZodULID",(t,e)=>{e.pattern??(e.pattern=Xj),ye.init(t,e)}),HS=A("$ZodXID",(t,e)=>{e.pattern??(e.pattern=eS),ye.init(t,e)}),ZS=A("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=tS),ye.init(t,e)}),YS=A("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=yS(e)),ye.init(t,e)}),KS=A("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=mS),ye.init(t,e)}),JS=A("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=gS(e)),ye.init(t,e)}),QS=A("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=sS),ye.init(t,e)}),XS=A("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=lS),ye.init(t,e),t._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv4"})}),ek=A("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=cS),ye.init(t,e),t._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv6"}),t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),tk=A("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=uS),ye.init(t,e)}),rk=A("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=dS),ye.init(t,e),t._zod.check=r=>{const[s,n]=r.value.split("/");try{if(!n)throw new Error;const o=Number(n);if(`${o}`!==n)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function Mg(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const sk=A("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=hS),ye.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),t._zod.check=r=>{Mg(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function nk(t){if(!Cg.test(t))return!1;const e=t.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return Mg(r)}const ik=A("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Cg),ye.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),t._zod.check=r=>{nk(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),ok=A("$ZodE164",(t,e)=>{e.pattern??(e.pattern=pS),ye.init(t,e)});function ak(t,e=null){try{const r=t.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const n=JSON.parse(atob(s));return!("typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||e&&(!("alg"in n)||n.alg!==e))}catch{return!1}}const lk=A("$ZodJWT",(t,e)=>{ye.init(t,e),t._zod.check=r=>{ak(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),Dg=A("$ZodNumber",(t,e)=>{be.init(t,e),t._zod.pattern=t._zod.bag.pattern??xS,t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}const n=r.value;if(typeof n=="number"&&!Number.isNaN(n)&&Number.isFinite(n))return r;const o=typeof n=="number"?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:n,inst:t,...o?{received:o}:{}}),r}}),ck=A("$ZodNumber",(t,e)=>{kS.init(t,e),Dg.init(t,e)}),uk=A("$ZodBoolean",(t,e)=>{be.init(t,e),t._zod.pattern=wS,t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=!!r.value}catch{}const n=r.value;return typeof n=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:t}),r}}),dk=A("$ZodAny",(t,e)=>{be.init(t,e),t._zod.parse=r=>r}),hk=A("$ZodUnknown",(t,e)=>{be.init(t,e),t._zod.parse=r=>r}),fk=A("$ZodNever",(t,e)=>{be.init(t,e),t._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)});function uh(t,e,r){t.issues.length&&e.issues.push(...Ns(r,t.issues)),e.value[r]=t.value}const pk=A("$ZodArray",(t,e)=>{be.init(t,e),t._zod.parse=(r,s)=>{const n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:t}),r;r.value=Array(n.length);const o=[];for(let a=0;a<n.length;a++){const l=n[a],c=e.element._zod.run({value:l,issues:[]},s);c instanceof Promise?o.push(c.then(u=>uh(u,r,a))):uh(c,r,a)}return o.length?Promise.all(o).then(()=>r):r}});function Jo(t,e,r,s){t.issues.length&&e.issues.push(...Ns(r,t.issues)),t.value===void 0?r in s&&(e.value[r]=void 0):e.value[r]=t.value}function Lg(t){const e=Object.keys(t.shape);for(const s of e)if(!t.shape[s]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const r=Cj(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}function Fg(t,e,r,s,n,o){const a=[],l=n.keySet,c=n.catchall._zod,u=c.def.type;for(const d of Object.keys(e)){if(l.has(d))continue;if(u==="never"){a.push(d);continue}const h=c.run({value:e[d],issues:[]},s);h instanceof Promise?t.push(h.then(f=>Jo(f,r,d,e))):Jo(h,r,d,e)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:o}),t.length?Promise.all(t).then(()=>r):r}const mk=A("$ZodObject",(t,e)=>{be.init(t,e);const r=ju(()=>Lg(e));ue(t._zod,"propValues",()=>{const a=e.shape,l={};for(const c in a){const u=a[c]._zod;if(u.values){l[c]??(l[c]=new Set);for(const d of u.values)l[c].add(d)}}return l});const s=Ko,n=e.catchall;let o;t._zod.parse=(a,l)=>{o??(o=r.value);const c=a.value;if(!s(c))return a.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),a;a.value={};const u=[],d=o.shape;for(const h of o.keys){const p=d[h]._zod.run({value:c[h],issues:[]},l);p instanceof Promise?u.push(p.then(m=>Jo(m,a,h,c))):Jo(p,a,h,c)}return n?Fg(u,c,a,l,r.value,t):u.length?Promise.all(u).then(()=>a):a}}),gk=A("$ZodObjectJIT",(t,e)=>{mk.init(t,e);const r=t._zod.parse,s=ju(()=>Lg(e)),n=f=>{const p=new MS(["shape","payload","ctx"]),m=s.value,b=v=>{const w=lh(v);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};p.write("const input = payload.value;");const y=Object.create(null);let x=0;for(const v of m.keys)y[v]=`key_${x++}`;p.write("const newResult = {}");for(const v of m.keys){const w=y[v],E=lh(v);p.write(`const ${w} = ${b(v)};`),p.write(`
        if (${w}.issues.length) {
          payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${E}, ...iss.path] : [${E}]
          })));
        }
        
        if (${w}.value === undefined) {
          if (${E} in input) {
            newResult[${E}] = undefined;
          }
        } else {
          newResult[${E}] = ${w}.value;
        }
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const j=p.compile();return(v,w)=>j(f,v,w)};let o;const a=Ko,l=!Sg.jitless,u=l&&Ej.value,d=e.catchall;let h;t._zod.parse=(f,p)=>{h??(h=s.value);const m=f.value;return a(m)?l&&u&&(p==null?void 0:p.async)===!1&&p.jitless!==!0?(o||(o=n(e.shape)),f=o(f,p),d?Fg([],m,f,p,h,t):f):r(f,p):(f.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),f)}});function dh(t,e,r,s){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const n=t.filter(o=>!Es(o));return n.length===1?(e.value=n[0].value,n[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(o=>o.issues.map(a=>wr(a,s,xr())))}),e)}const yk=A("$ZodUnion",(t,e)=>{be.init(t,e),ue(t._zod,"optin",()=>e.options.some(n=>n._zod.optin==="optional")?"optional":void 0),ue(t._zod,"optout",()=>e.options.some(n=>n._zod.optout==="optional")?"optional":void 0),ue(t._zod,"values",()=>{if(e.options.every(n=>n._zod.values))return new Set(e.options.flatMap(n=>Array.from(n._zod.values)))}),ue(t._zod,"pattern",()=>{if(e.options.every(n=>n._zod.pattern)){const n=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${n.map(o=>ku(o.source)).join("|")})$`)}});const r=e.options.length===1,s=e.options[0]._zod.run;t._zod.parse=(n,o)=>{if(r)return s(n,o);let a=!1;const l=[];for(const c of e.options){const u=c._zod.run({value:n.value,issues:[]},o);if(u instanceof Promise)l.push(u),a=!0;else{if(u.issues.length===0)return u;l.push(u)}}return a?Promise.all(l).then(c=>dh(c,n,t,o)):dh(l,n,t,o)}}),vk=A("$ZodIntersection",(t,e)=>{be.init(t,e),t._zod.parse=(r,s)=>{const n=r.value,o=e.left._zod.run({value:n,issues:[]},s),a=e.right._zod.run({value:n,issues:[]},s);return o instanceof Promise||a instanceof Promise?Promise.all([o,a]).then(([c,u])=>hh(r,c,u)):hh(r,o,a)}});function fc(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(rn(t)&&rn(e)){const r=Object.keys(e),s=Object.keys(t).filter(o=>r.indexOf(o)!==-1),n={...t,...e};for(const o of s){const a=fc(t[o],e[o]);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};n[o]=a.data}return{valid:!0,data:n}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<t.length;s++){const n=t[s],o=e[s],a=fc(n,o);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function hh(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),Es(t))return t;const s=fc(e.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return t.value=s.data,t}const bk=A("$ZodRecord",(t,e)=>{be.init(t,e),t._zod.parse=(r,s)=>{const n=r.value;if(!rn(n))return r.issues.push({expected:"record",code:"invalid_type",input:n,inst:t}),r;const o=[];if(e.keyType._zod.values){const a=e.keyType._zod.values;r.value={};for(const c of a)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){const u=e.valueType._zod.run({value:n[c],issues:[]},s);u instanceof Promise?o.push(u.then(d=>{d.issues.length&&r.issues.push(...Ns(c,d.issues)),r.value[c]=d.value})):(u.issues.length&&r.issues.push(...Ns(c,u.issues)),r.value[c]=u.value)}let l;for(const c in n)a.has(c)||(l=l??[],l.push(c));l&&l.length>0&&r.issues.push({code:"unrecognized_keys",input:n,inst:t,keys:l})}else{r.value={};for(const a of Reflect.ownKeys(n)){if(a==="__proto__")continue;const l=e.keyType._zod.run({value:a,issues:[]},s);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(u=>wr(u,s,xr())),input:a,path:[a],inst:t}),r.value[l.value]=l.value;continue}const c=e.valueType._zod.run({value:n[a],issues:[]},s);c instanceof Promise?o.push(c.then(u=>{u.issues.length&&r.issues.push(...Ns(a,u.issues)),r.value[l.value]=u.value})):(c.issues.length&&r.issues.push(...Ns(a,c.issues)),r.value[l.value]=c.value)}}return o.length?Promise.all(o).then(()=>r):r}}),xk=A("$ZodEnum",(t,e)=>{be.init(t,e);const r=kj(e.entries),s=new Set(r);t._zod.values=s,t._zod.pattern=new RegExp(`^(${r.filter(n=>Nj.has(typeof n)).map(n=>typeof n=="string"?wa(n):n.toString()).join("|")})$`),t._zod.parse=(n,o)=>{const a=n.value;return s.has(a)||n.issues.push({code:"invalid_value",values:r,input:a,inst:t}),n}}),wk=A("$ZodTransform",(t,e)=>{be.init(t,e),t._zod.parse=(r,s)=>{if(s.direction==="backward")throw new jg(t.constructor.name);const n=e.transform(r.value,r);if(s.async)return(n instanceof Promise?n:Promise.resolve(n)).then(a=>(r.value=a,r));if(n instanceof Promise)throw new Ds;return r.value=n,r}});function fh(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const _k=A("$ZodOptional",(t,e)=>{be.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ue(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ue(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${ku(r.source)})?$`):void 0}),t._zod.parse=(r,s)=>{if(e.innerType._zod.optin==="optional"){const n=e.innerType._zod.run(r,s);return n instanceof Promise?n.then(o=>fh(o,r.value)):fh(n,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,s)}}),jk=A("$ZodNullable",(t,e)=>{be.init(t,e),ue(t._zod,"optin",()=>e.innerType._zod.optin),ue(t._zod,"optout",()=>e.innerType._zod.optout),ue(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${ku(r.source)}|null)$`):void 0}),ue(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,s)=>r.value===null?r:e.innerType._zod.run(r,s)}),Sk=A("$ZodDefault",(t,e)=>{be.init(t,e),t._zod.optin="optional",ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,s)=>{if(s.direction==="backward")return e.innerType._zod.run(r,s);if(r.value===void 0)return r.value=e.defaultValue,r;const n=e.innerType._zod.run(r,s);return n instanceof Promise?n.then(o=>ph(o,e)):ph(n,e)}});function ph(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const kk=A("$ZodPrefault",(t,e)=>{be.init(t,e),t._zod.optin="optional",ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,s)=>(s.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,s))}),Tk=A("$ZodNonOptional",(t,e)=>{be.init(t,e),ue(t._zod,"values",()=>{const r=e.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),t._zod.parse=(r,s)=>{const n=e.innerType._zod.run(r,s);return n instanceof Promise?n.then(o=>mh(o,t)):mh(n,t)}});function mh(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const Pk=A("$ZodCatch",(t,e)=>{be.init(t,e),ue(t._zod,"optin",()=>e.innerType._zod.optin),ue(t._zod,"optout",()=>e.innerType._zod.optout),ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,s)=>{if(s.direction==="backward")return e.innerType._zod.run(r,s);const n=e.innerType._zod.run(r,s);return n instanceof Promise?n.then(o=>(r.value=o.value,o.issues.length&&(r.value=e.catchValue({...r,error:{issues:o.issues.map(a=>wr(a,s,xr()))},input:r.value}),r.issues=[]),r)):(r.value=n.value,n.issues.length&&(r.value=e.catchValue({...r,error:{issues:n.issues.map(o=>wr(o,s,xr()))},input:r.value}),r.issues=[]),r)}}),Ek=A("$ZodPipe",(t,e)=>{be.init(t,e),ue(t._zod,"values",()=>e.in._zod.values),ue(t._zod,"optin",()=>e.in._zod.optin),ue(t._zod,"optout",()=>e.out._zod.optout),ue(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,s)=>{if(s.direction==="backward"){const o=e.out._zod.run(r,s);return o instanceof Promise?o.then(a=>ro(a,e.in,s)):ro(o,e.in,s)}const n=e.in._zod.run(r,s);return n instanceof Promise?n.then(o=>ro(o,e.out,s)):ro(n,e.out,s)}});function ro(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}const Nk=A("$ZodReadonly",(t,e)=>{be.init(t,e),ue(t._zod,"propValues",()=>e.innerType._zod.propValues),ue(t._zod,"values",()=>e.innerType._zod.values),ue(t._zod,"optin",()=>e.innerType._zod.optin),ue(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(r,s)=>{if(s.direction==="backward")return e.innerType._zod.run(r,s);const n=e.innerType._zod.run(r,s);return n instanceof Promise?n.then(gh):gh(n)}});function gh(t){return t.value=Object.freeze(t.value),t}const Ck=A("$ZodCustom",(t,e)=>{Qe.init(t,e),be.init(t,e),t._zod.parse=(r,s)=>r,t._zod.check=r=>{const s=r.value,n=e.fn(s);if(n instanceof Promise)return n.then(o=>yh(o,r,s,t));yh(n,r,s,t)}});function yh(t,e,r,s){if(!t){const n={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(n.params=s._zod.def.params),e.issues.push(pi(n))}}class Ak{constructor(){this._map=new Map,this._idmap=new Map}add(e,...r){const s=r[0];if(this._map.set(e,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){const r=e._zod.parent;if(r){const s={...this.get(r)??{}};delete s.id;const n={...s,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Ok(){return new Ak}const so=Ok();function Rk(t,e){return new t({type:"string",...W(e)})}function Ik(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...W(e)})}function vh(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...W(e)})}function $k(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...W(e)})}function Mk(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...W(e)})}function Dk(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...W(e)})}function Lk(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...W(e)})}function Fk(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...W(e)})}function zk(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...W(e)})}function Uk(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...W(e)})}function Bk(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...W(e)})}function Vk(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...W(e)})}function qk(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...W(e)})}function Gk(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...W(e)})}function Wk(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...W(e)})}function Hk(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...W(e)})}function Zk(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...W(e)})}function Yk(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...W(e)})}function Kk(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...W(e)})}function Jk(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...W(e)})}function Qk(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...W(e)})}function Xk(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...W(e)})}function eT(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...W(e)})}function tT(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...W(e)})}function rT(t,e){return new t({type:"string",format:"date",check:"string_format",...W(e)})}function sT(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...W(e)})}function nT(t,e){return new t({type:"string",format:"duration",check:"string_format",...W(e)})}function iT(t,e){return new t({type:"number",checks:[],...W(e)})}function oT(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...W(e)})}function aT(t,e){return new t({type:"boolean",...W(e)})}function lT(t){return new t({type:"any"})}function cT(t){return new t({type:"unknown"})}function uT(t,e){return new t({type:"never",...W(e)})}function bh(t,e){return new Ig({check:"less_than",...W(e),value:t,inclusive:!1})}function Wa(t,e){return new Ig({check:"less_than",...W(e),value:t,inclusive:!0})}function xh(t,e){return new $g({check:"greater_than",...W(e),value:t,inclusive:!1})}function Ha(t,e){return new $g({check:"greater_than",...W(e),value:t,inclusive:!0})}function wh(t,e){return new SS({check:"multiple_of",...W(e),value:t})}function zg(t,e){return new TS({check:"max_length",...W(e),maximum:t})}function Qo(t,e){return new PS({check:"min_length",...W(e),minimum:t})}function Ug(t,e){return new ES({check:"length_equals",...W(e),length:t})}function dT(t,e){return new NS({check:"string_format",format:"regex",...W(e),pattern:t})}function hT(t){return new CS({check:"string_format",format:"lowercase",...W(t)})}function fT(t){return new AS({check:"string_format",format:"uppercase",...W(t)})}function pT(t,e){return new OS({check:"string_format",format:"includes",...W(e),includes:t})}function mT(t,e){return new RS({check:"string_format",format:"starts_with",...W(e),prefix:t})}function gT(t,e){return new IS({check:"string_format",format:"ends_with",...W(e),suffix:t})}function Mi(t){return new $S({check:"overwrite",tx:t})}function yT(t){return Mi(e=>e.normalize(t))}function vT(){return Mi(t=>t.trim())}function bT(){return Mi(t=>t.toLowerCase())}function xT(){return Mi(t=>t.toUpperCase())}function wT(t,e,r){return new t({type:"array",element:e,...W(r)})}function _T(t,e,r){return new t({type:"custom",check:"custom",fn:e,...W(r)})}function jT(t){const e=ST(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(pi(s,r.value,e._zod.def));else{const n=s;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=e),n.continue??(n.continue=!e._zod.def.abort),r.issues.push(pi(n))}},t(r.value,r)));return e}function ST(t,e){const r=new Qe({check:"custom",...W(e)});return r._zod.check=t,r}const kT=A("ZodISODateTime",(t,e)=>{YS.init(t,e),xe.init(t,e)});function TT(t){return tT(kT,t)}const PT=A("ZodISODate",(t,e)=>{KS.init(t,e),xe.init(t,e)});function ET(t){return rT(PT,t)}const NT=A("ZodISOTime",(t,e)=>{JS.init(t,e),xe.init(t,e)});function CT(t){return sT(NT,t)}const AT=A("ZodISODuration",(t,e)=>{QS.init(t,e),xe.init(t,e)});function OT(t){return nT(AT,t)}const RT=(t,e)=>{Eg.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>zj(t,r)},flatten:{value:r=>Fj(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,hc,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,hc,2)}},isEmpty:{get(){return t.issues.length===0}}})},lt=A("ZodError",RT,{Parent:Error}),IT=Pu(lt),$T=Eu(lt),MT=_a(lt),DT=ja(lt),LT=Vj(lt),FT=qj(lt),zT=Gj(lt),UT=Wj(lt),BT=Hj(lt),VT=Zj(lt),qT=Yj(lt),GT=Kj(lt),ke=A("ZodType",(t,e)=>(be.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone({...e,checks:[...e.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),t.clone=(r,s)=>Tr(t,r,s),t.brand=()=>t,t.register=(r,s)=>(r.add(t,s),t),t.parse=(r,s)=>IT(t,r,s,{callee:t.parse}),t.safeParse=(r,s)=>MT(t,r,s),t.parseAsync=async(r,s)=>$T(t,r,s,{callee:t.parseAsync}),t.safeParseAsync=async(r,s)=>DT(t,r,s),t.spa=t.safeParseAsync,t.encode=(r,s)=>LT(t,r,s),t.decode=(r,s)=>FT(t,r,s),t.encodeAsync=async(r,s)=>zT(t,r,s),t.decodeAsync=async(r,s)=>UT(t,r,s),t.safeEncode=(r,s)=>BT(t,r,s),t.safeDecode=(r,s)=>VT(t,r,s),t.safeEncodeAsync=async(r,s)=>qT(t,r,s),t.safeDecodeAsync=async(r,s)=>GT(t,r,s),t.refine=(r,s)=>t.check(DP(r,s)),t.superRefine=r=>t.check(LP(r)),t.overwrite=r=>t.check(Mi(r)),t.optional=()=>kh(t),t.nullable=()=>Th(t),t.nullish=()=>kh(Th(t)),t.nonoptional=r=>CP(t,r),t.array=()=>Ou(t),t.or=r=>bP([t,r]),t.and=r=>wP(t,r),t.transform=r=>Ph(t,SP(r)),t.default=r=>PP(t,r),t.prefault=r=>NP(t,r),t.catch=r=>OP(t,r),t.pipe=r=>Ph(t,r),t.readonly=()=>$P(t),t.describe=r=>{const s=t.clone();return so.add(s,{description:r}),s},Object.defineProperty(t,"description",{get(){var r;return(r=so.get(t))==null?void 0:r.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return so.get(t);const s=t.clone();return so.add(s,r[0]),s},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Bg=A("_ZodString",(t,e)=>{Nu.init(t,e),ke.init(t,e);const r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...s)=>t.check(dT(...s)),t.includes=(...s)=>t.check(pT(...s)),t.startsWith=(...s)=>t.check(mT(...s)),t.endsWith=(...s)=>t.check(gT(...s)),t.min=(...s)=>t.check(Qo(...s)),t.max=(...s)=>t.check(zg(...s)),t.length=(...s)=>t.check(Ug(...s)),t.nonempty=(...s)=>t.check(Qo(1,...s)),t.lowercase=s=>t.check(hT(s)),t.uppercase=s=>t.check(fT(s)),t.trim=()=>t.check(vT()),t.normalize=(...s)=>t.check(yT(...s)),t.toLowerCase=()=>t.check(bT()),t.toUpperCase=()=>t.check(xT())}),WT=A("ZodString",(t,e)=>{Nu.init(t,e),Bg.init(t,e),t.email=r=>t.check(Ik(HT,r)),t.url=r=>t.check(Fk(ZT,r)),t.jwt=r=>t.check(eT(cP,r)),t.emoji=r=>t.check(zk(YT,r)),t.guid=r=>t.check(vh(_h,r)),t.uuid=r=>t.check($k(no,r)),t.uuidv4=r=>t.check(Mk(no,r)),t.uuidv6=r=>t.check(Dk(no,r)),t.uuidv7=r=>t.check(Lk(no,r)),t.nanoid=r=>t.check(Uk(KT,r)),t.guid=r=>t.check(vh(_h,r)),t.cuid=r=>t.check(Bk(JT,r)),t.cuid2=r=>t.check(Vk(QT,r)),t.ulid=r=>t.check(qk(XT,r)),t.base64=r=>t.check(Jk(oP,r)),t.base64url=r=>t.check(Qk(aP,r)),t.xid=r=>t.check(Gk(eP,r)),t.ksuid=r=>t.check(Wk(tP,r)),t.ipv4=r=>t.check(Hk(rP,r)),t.ipv6=r=>t.check(Zk(sP,r)),t.cidrv4=r=>t.check(Yk(nP,r)),t.cidrv6=r=>t.check(Kk(iP,r)),t.e164=r=>t.check(Xk(lP,r)),t.datetime=r=>t.check(TT(r)),t.date=r=>t.check(ET(r)),t.time=r=>t.check(CT(r)),t.duration=r=>t.check(OT(r))});function D(t){return Rk(WT,t)}const xe=A("ZodStringFormat",(t,e)=>{ye.init(t,e),Bg.init(t,e)}),HT=A("ZodEmail",(t,e)=>{zS.init(t,e),xe.init(t,e)}),_h=A("ZodGUID",(t,e)=>{LS.init(t,e),xe.init(t,e)}),no=A("ZodUUID",(t,e)=>{FS.init(t,e),xe.init(t,e)}),ZT=A("ZodURL",(t,e)=>{US.init(t,e),xe.init(t,e)}),YT=A("ZodEmoji",(t,e)=>{BS.init(t,e),xe.init(t,e)}),KT=A("ZodNanoID",(t,e)=>{VS.init(t,e),xe.init(t,e)}),JT=A("ZodCUID",(t,e)=>{qS.init(t,e),xe.init(t,e)}),QT=A("ZodCUID2",(t,e)=>{GS.init(t,e),xe.init(t,e)}),XT=A("ZodULID",(t,e)=>{WS.init(t,e),xe.init(t,e)}),eP=A("ZodXID",(t,e)=>{HS.init(t,e),xe.init(t,e)}),tP=A("ZodKSUID",(t,e)=>{ZS.init(t,e),xe.init(t,e)}),rP=A("ZodIPv4",(t,e)=>{XS.init(t,e),xe.init(t,e)}),sP=A("ZodIPv6",(t,e)=>{ek.init(t,e),xe.init(t,e)}),nP=A("ZodCIDRv4",(t,e)=>{tk.init(t,e),xe.init(t,e)}),iP=A("ZodCIDRv6",(t,e)=>{rk.init(t,e),xe.init(t,e)}),oP=A("ZodBase64",(t,e)=>{sk.init(t,e),xe.init(t,e)}),aP=A("ZodBase64URL",(t,e)=>{ik.init(t,e),xe.init(t,e)}),lP=A("ZodE164",(t,e)=>{ok.init(t,e),xe.init(t,e)}),cP=A("ZodJWT",(t,e)=>{lk.init(t,e),xe.init(t,e)}),Vg=A("ZodNumber",(t,e)=>{Dg.init(t,e),ke.init(t,e),t.gt=(s,n)=>t.check(xh(s,n)),t.gte=(s,n)=>t.check(Ha(s,n)),t.min=(s,n)=>t.check(Ha(s,n)),t.lt=(s,n)=>t.check(bh(s,n)),t.lte=(s,n)=>t.check(Wa(s,n)),t.max=(s,n)=>t.check(Wa(s,n)),t.int=s=>t.check(jh(s)),t.safe=s=>t.check(jh(s)),t.positive=s=>t.check(xh(0,s)),t.nonnegative=s=>t.check(Ha(0,s)),t.negative=s=>t.check(bh(0,s)),t.nonpositive=s=>t.check(Wa(0,s)),t.multipleOf=(s,n)=>t.check(wh(s,n)),t.step=(s,n)=>t.check(wh(s,n)),t.finite=()=>t;const r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function Bt(t){return iT(Vg,t)}const uP=A("ZodNumberFormat",(t,e)=>{ck.init(t,e),Vg.init(t,e)});function jh(t){return oT(uP,t)}const dP=A("ZodBoolean",(t,e)=>{uk.init(t,e),ke.init(t,e)});function Cu(t){return aT(dP,t)}const hP=A("ZodAny",(t,e)=>{dk.init(t,e),ke.init(t,e)});function Au(){return lT(hP)}const fP=A("ZodUnknown",(t,e)=>{hk.init(t,e),ke.init(t,e)});function Sh(){return cT(fP)}const pP=A("ZodNever",(t,e)=>{fk.init(t,e),ke.init(t,e)});function mP(t){return uT(pP,t)}const gP=A("ZodArray",(t,e)=>{pk.init(t,e),ke.init(t,e),t.element=e.element,t.min=(r,s)=>t.check(Qo(r,s)),t.nonempty=r=>t.check(Qo(1,r)),t.max=(r,s)=>t.check(zg(r,s)),t.length=(r,s)=>t.check(Ug(r,s)),t.unwrap=()=>t.element});function Ou(t,e){return wT(gP,t,e)}const yP=A("ZodObject",(t,e)=>{gk.init(t,e),ke.init(t,e),ue(t,"shape",()=>e.shape),t.keyof=()=>de(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Sh()}),t.loose=()=>t.clone({...t._zod.def,catchall:Sh()}),t.strict=()=>t.clone({...t._zod.def,catchall:mP()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>Ij(t,r),t.safeExtend=r=>$j(t,r),t.merge=r=>Mj(t,r),t.pick=r=>Oj(t,r),t.omit=r=>Rj(t,r),t.partial=(...r)=>Dj(qg,t,r[0]),t.required=(...r)=>Lj(Gg,t,r[0])});function Ge(t,e){const r={type:"object",get shape(){return kr(this,"shape",t?Pj(t):{}),this.shape},...W(e)};return new yP(r)}const vP=A("ZodUnion",(t,e)=>{yk.init(t,e),ke.init(t,e),t.options=e.options});function bP(t,e){return new vP({type:"union",options:t,...W(e)})}const xP=A("ZodIntersection",(t,e)=>{vk.init(t,e),ke.init(t,e)});function wP(t,e){return new xP({type:"intersection",left:t,right:e})}const _P=A("ZodRecord",(t,e)=>{bk.init(t,e),ke.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function gn(t,e,r){return new _P({type:"record",keyType:t,valueType:e,...W(r)})}const pc=A("ZodEnum",(t,e)=>{xk.init(t,e),ke.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const r=new Set(Object.keys(e.entries));t.extract=(s,n)=>{const o={};for(const a of s)if(r.has(a))o[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new pc({...e,checks:[],...W(n),entries:o})},t.exclude=(s,n)=>{const o={...e.entries};for(const a of s)if(r.has(a))delete o[a];else throw new Error(`Key ${a} not found in enum`);return new pc({...e,checks:[],...W(n),entries:o})}});function de(t,e){const r=Array.isArray(t)?Object.fromEntries(t.map(s=>[s,s])):t;return new pc({type:"enum",entries:r,...W(e)})}const jP=A("ZodTransform",(t,e)=>{wk.init(t,e),ke.init(t,e),t._zod.parse=(r,s)=>{if(s.direction==="backward")throw new jg(t.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(pi(o,r.value,e));else{const a=o;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),r.issues.push(pi(a))}};const n=e.transform(r.value,r);return n instanceof Promise?n.then(o=>(r.value=o,r)):(r.value=n,r)}});function SP(t){return new jP({type:"transform",transform:t})}const qg=A("ZodOptional",(t,e)=>{_k.init(t,e),ke.init(t,e),t.unwrap=()=>t._zod.def.innerType});function kh(t){return new qg({type:"optional",innerType:t})}const kP=A("ZodNullable",(t,e)=>{jk.init(t,e),ke.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Th(t){return new kP({type:"nullable",innerType:t})}const TP=A("ZodDefault",(t,e)=>{Sk.init(t,e),ke.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function PP(t,e){return new TP({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():Tg(e)}})}const EP=A("ZodPrefault",(t,e)=>{kk.init(t,e),ke.init(t,e),t.unwrap=()=>t._zod.def.innerType});function NP(t,e){return new EP({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():Tg(e)}})}const Gg=A("ZodNonOptional",(t,e)=>{Tk.init(t,e),ke.init(t,e),t.unwrap=()=>t._zod.def.innerType});function CP(t,e){return new Gg({type:"nonoptional",innerType:t,...W(e)})}const AP=A("ZodCatch",(t,e)=>{Pk.init(t,e),ke.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function OP(t,e){return new AP({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const RP=A("ZodPipe",(t,e)=>{Ek.init(t,e),ke.init(t,e),t.in=e.in,t.out=e.out});function Ph(t,e){return new RP({type:"pipe",in:t,out:e})}const IP=A("ZodReadonly",(t,e)=>{Nk.init(t,e),ke.init(t,e),t.unwrap=()=>t._zod.def.innerType});function $P(t){return new IP({type:"readonly",innerType:t})}const MP=A("ZodCustom",(t,e)=>{Ck.init(t,e),ke.init(t,e)});function DP(t,e={}){return _T(MP,t,e)}function LP(t){return jT(t)}const Wg=Ge({id:D().uuid().optional(),name:D().min(1,"Product name is required").max(255,"Product name must be less than 255 characters").trim(),description:D().max(2e3,"Description must be less than 2000 characters").optional().nullable(),product_type:de(["single_issue","bundle","chapter_pass","arc_pass"]).default("single_issue"),active:Cu().default(!0),work_id:D().uuid().optional().nullable(),content_grants:gn(D(),Au()).optional().nullable(),created_at:D().datetime().optional(),updated_at:D().datetime().optional()}),FP=Ge({id:D().uuid().optional(),product_id:D().uuid(),currency:D().length(3,"Currency must be a 3-letter ISO code").toUpperCase(),unit_amount:Bt().min(0,"Price cannot be negative").max(999999,"Price cannot exceed $9,999.99"),interval:de(["one_time","month","year"]).optional().nullable(),nickname:D().max(100,"Nickname must be less than 100 characters").optional().nullable(),trial_days:Bt().min(0,"Trial days cannot be negative").max(365,"Trial period cannot exceed 365 days").optional().nullable(),active:Cu().default(!0),created_at:D().datetime().optional(),updated_at:D().datetime().optional()});Wg.omit({id:!0,created_at:!0,updated_at:!0}).extend({prices:Ou(FP.omit({id:!0,product_id:!0,created_at:!0,updated_at:!0})).min(1,"At least one price is required")});Wg.partial().omit({id:!0,created_at:!0});Ge({active:de(["true","false"]).optional(),product_type:de(["single_issue","bundle","chapter_pass","arc_pass"]).optional(),limit:D().transform(t=>parseInt(t)).refine(t=>t>0&&t<=100,"Limit must be between 1 and 100").default(50),offset:D().transform(t=>parseInt(t)).refine(t=>t>=0,"Offset must be non-negative").default(0),search:D().max(100).optional(),sort_by:de(["created_at","name","price","updated_at"]).default("created_at"),sort_order:de(["asc","desc"]).default("desc")});const zP=Ge({id:D().uuid(),username:D().min(3,"Username must be at least 3 characters").max(30,"Username must be less than 30 characters").regex(/^[a-zA-Z0-9_-]+$/,"Username can only contain letters, numbers, underscores, and hyphens").optional().nullable(),display_name:D().min(1,"Display name is required").max(100,"Display name must be less than 100 characters").trim().optional().nullable(),avatar_url:D().url("Invalid avatar URL").optional().nullable(),website:D().url("Invalid website URL").optional().nullable(),role:de(["admin","support","accountant","user","super_admin"]).default("user"),beta_reader_status:de(["not_applied","pending","approved","rejected"]).default("not_applied"),created_at:D().datetime().optional(),updated_at:D().datetime().optional()});Ge({user_id:D().uuid(),books_read:Bt().min(0,"Books read cannot be negative").default(0),reading_hours:Bt().min(0,"Reading hours cannot be negative").default(0),achievements:Bt().min(0,"Achievements cannot be negative").default(0),currently_reading:D().max(255).default("")});Ge({id:D().uuid().optional(),user_id:D().uuid().optional().nullable(),email:D().email("Invalid email address"),full_name:D().min(2,"Full name must be at least 2 characters").max(100,"Full name must be less than 100 characters").trim(),time_zone:D().min(1,"Time zone is required").max(50,"Time zone must be less than 50 characters"),country:D().max(100,"Country must be less than 100 characters").optional().nullable(),devices:Ou(D()).optional().nullable(),hours_per_week:D().min(1,"Hours per week is required"),communication:D().min(10,"Communication preference must be at least 10 characters").max(500,"Communication preference must be less than 500 characters"),portal_use:D().min(10,"Portal use description must be at least 10 characters").max(500,"Portal use description must be less than 500 characters"),beta_commitment:D().min(20,"Beta commitment must be at least 20 characters").max(1e3,"Beta commitment must be less than 1000 characters"),interest_statement:D().min(50,"Interest statement must be at least 50 characters").max(2e3,"Interest statement must be less than 2000 characters"),feedback_philosophy:D().min(50,"Feedback philosophy must be at least 50 characters").max(2e3,"Feedback philosophy must be less than 2000 characters"),recent_reads:D().max(1e3,"Recent reads must be less than 1000 characters").optional().nullable(),prior_beta:D().max(1e3,"Prior beta experience must be less than 1000 characters").optional().nullable(),goodreads:D().url("Invalid Goodreads URL").optional().nullable(),demographics:D().max(500,"Demographics must be less than 500 characters").optional().nullable(),access_needs:D().max(500,"Access needs must be less than 500 characters").optional().nullable(),status:de(["pending","approved","denied"]).default("pending"),created_at:D().datetime().optional()});zP.partial().omit({id:!0,created_at:!0,role:!0});Ge({user_id:D().uuid(),role:de(["admin","support","accountant","user","super_admin"]),granted_by:D().uuid()});Ge({role:de(["admin","support","accountant","user","super_admin"]).optional(),beta_reader_status:de(["not_applied","pending","approved","rejected"]).optional(),limit:D().transform(t=>parseInt(t)).refine(t=>t>0&&t<=100,"Limit must be between 1 and 100").default(50),offset:D().transform(t=>parseInt(t)).refine(t=>t>=0,"Offset must be non-negative").default(0),search:D().max(100).optional(),sort_by:de(["created_at","username","display_name","role"]).default("created_at"),sort_order:de(["asc","desc"]).default("desc")});Ge({priceId:D().min(1,"Price ID is required"),successUrl:D().url("Invalid success URL"),cancelUrl:D().url("Invalid cancel URL"),customerEmail:D().email("Invalid customer email").optional(),productSlug:D().min(1,"Product slug is required").optional(),userId:D().uuid().optional(),quantity:Bt().min(1,"Quantity must be at least 1").max(10,"Quantity cannot exceed 10").default(1),metadata:gn(D(),D()).optional()});const Hg=Ge({id:D().uuid().optional(),user_id:D().uuid(),plan_id:D().min(1,"Plan ID is required"),status:de(["incomplete","incomplete_expired","trialing","active","past_due","canceled","unpaid","paused"]).default("active"),current_period_start:D().datetime().optional().nullable(),current_period_end:D().datetime().optional().nullable(),trial_start:D().datetime().optional().nullable(),trial_end:D().datetime().optional().nullable(),cancel_at_period_end:Cu().default(!1),metadata:gn(D(),Au()).optional().nullable(),created_at:D().datetime().optional(),updated_at:D().datetime().optional()});Ge({amount:Bt().min(50,"Amount must be at least $0.50"),currency:D().length(3,"Currency must be a 3-letter ISO code"),paymentMethodId:D().optional(),customerId:D().optional(),metadata:gn(D(),D()).optional()});Ge({paymentIntentId:D().min(1,"Payment intent ID is required"),amount:Bt().min(1,"Refund amount must be positive").optional(),reason:de(["duplicate","fraudulent","requested_by_customer","expired_uncaptured_charge"]).default("requested_by_customer"),metadata:gn(D(),D()).optional()});Ge({id:D().uuid().optional(),user_id:D().uuid().optional().nullable(),product_id:D().uuid(),price_id:D().uuid(),status:de(["pending","completed","failed","refunded","canceled"]).default("pending"),amount_cents:Bt().min(0,"Amount cannot be negative"),currency:D().length(3,"Currency must be a 3-letter ISO code"),customer_email:D().email("Invalid customer email").optional().nullable(),provider:de(["stripe","paypal"]).default("stripe"),provider_session_id:D().optional().nullable(),provider_payment_intent_id:D().optional().nullable(),metadata:gn(D(),Au()).optional().nullable(),created_at:D().datetime().optional(),updated_at:D().datetime().optional()});Hg.omit({id:!0,created_at:!0,updated_at:!0});Hg.partial().omit({id:!0,user_id:!0,created_at:!0});Ge({status:de(["pending","completed","failed","refunded","canceled"]).optional(),provider:de(["stripe","paypal"]).optional(),user_id:D().uuid().optional(),start_date:D().datetime().optional(),end_date:D().datetime().optional(),limit:D().transform(t=>parseInt(t)).refine(t=>t>0&&t<=100,"Limit must be between 1 and 100").default(50),offset:D().transform(t=>parseInt(t)).refine(t=>t>=0,"Offset must be non-negative").default(0),sort_by:de(["created_at","amount_cents","status"]).default("created_at"),sort_order:de(["asc","desc"]).default("desc")});Ge({status:de(["incomplete","incomplete_expired","trialing","active","past_due","canceled","unpaid","paused"]).optional(),user_id:D().uuid().optional(),plan_id:D().optional(),limit:D().transform(t=>parseInt(t)).refine(t=>t>0&&t<=100,"Limit must be between 1 and 100").default(50),offset:D().transform(t=>parseInt(t)).refine(t=>t>=0,"Offset must be non-negative").default(0),sort_by:de(["created_at","current_period_end","status"]).default("created_at"),sort_order:de(["asc","desc"]).default("desc")});class it{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,r,s,n,o,a,l,c){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){const e=new TypeError(it.TIMEOUT_ERROR_CODE);return e.code=it.TIMEOUT_ERROR_CODE,e}}it.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];it.TIMEOUT_ERROR_CODE="ETIMEDOUT";class Zg{constructor(e,r){this._statusCode=e,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}class Xo extends it{constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=Xo.makeFetchWithAbortTimeout(e):this._fetchFn=Xo.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(r,s,n)=>{let o;const a=new Promise((c,u)=>{o=setTimeout(()=>{o=null,u(it.makeTimeoutError())},n)}),l=e(r,s);return Promise.race([l,a]).finally(()=>{o&&clearTimeout(o)})}}static makeFetchWithAbortTimeout(e){return async(r,s,n)=>{const o=new AbortController;let a=setTimeout(()=>{a=null,o.abort(it.makeTimeoutError())},n);try{return await e(r,Object.assign(Object.assign({},s),{signal:o.signal}))}catch(l){throw l.name==="AbortError"?it.makeTimeoutError():l}finally{a&&clearTimeout(a)}}}getClientName(){return"fetch"}async makeRequest(e,r,s,n,o,a,l,c){const u=l==="http",d=new URL(s,`${u?"http":"https"}://${e}`);d.port=r;const h=n=="POST"||n=="PUT"||n=="PATCH",f=a||(h?"":void 0),p=await this._fetchFn(d.toString(),{method:n,headers:o,body:f},c);return new Ru(p)}}class Ru extends Zg{constructor(e){super(e.status,Ru._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){const r={};for(const s of e){if(!Array.isArray(s)||s.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[s[0]]=s[1]}return r}}class Yg{computeHMACSignature(e,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,r){throw new Error("computeHMACSignatureAsync not implemented.")}}class Kg extends Error{}class UP extends Yg{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,r){throw new Kg("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,r){const s=new TextEncoder,n=await this.subtleCrypto.importKey("raw",s.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),o=await this.subtleCrypto.sign("hmac",n,s.encode(e)),a=new Uint8Array(o),l=new Array(a.length);for(let c=0;c<a.length;c++)l[c]=mc[a[c]];return l.join("")}}const mc=new Array(256);for(let t=0;t<mc.length;t++)mc[t]=t.toString(16).padStart(2,"0");class BP{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}secureCompare(e,r){if(e.length!==r.length)return!1;const s=e.length;let n=0;for(let o=0;o<s;++o)n|=e.charCodeAt(o)^r.charCodeAt(o);return n===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new Xo(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new UP(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}class VP extends Event{constructor(e,r){super(e),this.data=r}}class qP{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(e,r){const s=n=>{r(n.data)};return this.listenerMapping.set(r,s),this.eventTarget.addEventListener(e,s)}removeListener(e,r){const s=this.listenerMapping.get(r);return this.listenerMapping.delete(r),this.eventTarget.removeEventListener(e,s)}once(e,r){const s=n=>{r(n.data)};return this.listenerMapping.set(r,s),this.eventTarget.addEventListener(e,s,{once:!0})}emit(e,r){return this.eventTarget.dispatchEvent(new VP(e,r))}}class GP extends BP{getUname(){return Promise.resolve(null)}createEmitter(){return new qP}tryBufferData(e){if(e.file.data instanceof ReadableStream)throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(e)}createNodeHttpClient(){throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}const Jg=t=>{switch(t.type){case"card_error":return new Qg(t);case"invalid_request_error":return new Xg(t);case"api_error":return new Iu(t);case"authentication_error":return new $u(t);case"rate_limit_error":return new Mu(t);case"idempotency_error":return new ry(t);case"invalid_grant":return new sy(t);default:return new ny(t)}};class We extends Error{constructor(e={},r=null){super(e.message),this.type=r||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}We.generate=Jg;class Qg extends We{constructor(e={}){super(e,"StripeCardError")}}class Xg extends We{constructor(e={}){super(e,"StripeInvalidRequestError")}}class Iu extends We{constructor(e={}){super(e,"StripeAPIError")}}class $u extends We{constructor(e={}){super(e,"StripeAuthenticationError")}}class ey extends We{constructor(e={}){super(e,"StripePermissionError")}}class Mu extends We{constructor(e={}){super(e,"StripeRateLimitError")}}class ty extends We{constructor(e={}){super(e,"StripeConnectionError")}}class tr extends We{constructor(e,r,s={}){super(s,"StripeSignatureVerificationError"),this.header=e,this.payload=r}}class ry extends We{constructor(e={}){super(e,"StripeIdempotencyError")}}class sy extends We{constructor(e={}){super(e,"StripeInvalidGrantError")}}class ny extends We{constructor(e={}){super(e,"StripeUnknownError")}}const Eh=Object.freeze(Object.defineProperty({__proto__:null,StripeAPIError:Iu,StripeAuthenticationError:$u,StripeCardError:Qg,StripeConnectionError:ty,StripeError:We,StripeIdempotencyError:ry,StripeInvalidGrantError:sy,StripeInvalidRequestError:Xg,StripePermissionError:ey,StripeRateLimitError:Mu,StripeSignatureVerificationError:tr,StripeUnknownError:ny,generate:Jg},Symbol.toStringTag,{value:"Module"})),WP="2023-10-16";function HP(t,e){for(const r in e){const s=r[0].toLowerCase()+r.substring(1),n=new e[r](t);this[s]=n}}function Ne(t,e){return function(r){return new HP(r,e)}}var yn=TypeError;const ZP={},YP=Object.freeze(Object.defineProperty({__proto__:null,default:ZP},Symbol.toStringTag,{value:"Module"})),KP=vm(YP);var Du=typeof Map=="function"&&Map.prototype,Za=Object.getOwnPropertyDescriptor&&Du?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ea=Du&&Za&&typeof Za.get=="function"?Za.get:null,Nh=Du&&Map.prototype.forEach,Lu=typeof Set=="function"&&Set.prototype,Ya=Object.getOwnPropertyDescriptor&&Lu?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ta=Lu&&Ya&&typeof Ya.get=="function"?Ya.get:null,Ch=Lu&&Set.prototype.forEach,JP=typeof WeakMap=="function"&&WeakMap.prototype,Xn=JP?WeakMap.prototype.has:null,QP=typeof WeakSet=="function"&&WeakSet.prototype,ei=QP?WeakSet.prototype.has:null,XP=typeof WeakRef=="function"&&WeakRef.prototype,Ah=XP?WeakRef.prototype.deref:null,eE=Boolean.prototype.valueOf,tE=Object.prototype.toString,rE=Function.prototype.toString,sE=String.prototype.match,Fu=String.prototype.slice,mr=String.prototype.replace,nE=String.prototype.toUpperCase,Oh=String.prototype.toLowerCase,iy=RegExp.prototype.test,Rh=Array.prototype.concat,Tt=Array.prototype.join,iE=Array.prototype.slice,Ih=Math.floor,gc=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ka=Object.getOwnPropertySymbols,yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,sn=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ti=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===sn||!0)?Symbol.toStringTag:null,oy=Object.prototype.propertyIsEnumerable,$h=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Mh(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||iy.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var s=t<0?-Ih(-t):Ih(t);if(s!==t){var n=String(s),o=Fu.call(e,n.length+1);return mr.call(n,r,"$&_")+"."+mr.call(mr.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return mr.call(e,r,"$&_")}var vc=KP,Dh=vc.custom,Lh=cy(Dh)?Dh:null,ay={__proto__:null,double:'"',single:"'"},oE={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},ka=function t(e,r,s,n){var o=r||{};if(Lt(o,"quoteStyle")&&!Lt(ay,o.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Lt(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Lt(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Lt(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Lt(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return dy(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return l?Mh(e,c):c}if(typeof e=="bigint"){var u=String(e)+"n";return l?Mh(e,u):u}var d=typeof o.depth>"u"?5:o.depth;if(typeof s>"u"&&(s=0),s>=d&&d>0&&typeof e=="object")return bc(e)?"[Array]":"[Object]";var h=SE(o,s);if(typeof n>"u")n=[];else if(uy(n,e)>=0)return"[Circular]";function f(J,F,C){if(F&&(n=iE.call(n),n.push(F)),C){var L={depth:o.depth};return Lt(o,"quoteStyle")&&(L.quoteStyle=o.quoteStyle),t(J,L,s+1,n)}return t(J,o,s+1,n)}if(typeof e=="function"&&!Fh(e)){var p=mE(e),m=io(e,f);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+Tt.call(m,", ")+" }":"")}if(cy(e)){var b=sn?mr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):yc.call(e);return typeof e=="object"&&!sn?Tn(b):b}if(wE(e)){for(var y="<"+Oh.call(String(e.nodeName)),x=e.attributes||[],j=0;j<x.length;j++)y+=" "+x[j].name+"="+ly(aE(x[j].value),"double",o);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+Oh.call(String(e.nodeName))+">",y}if(bc(e)){if(e.length===0)return"[]";var v=io(e,f);return h&&!jE(v)?"["+xc(v,h)+"]":"[ "+Tt.call(v,", ")+" ]"}if(cE(e)){var w=io(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!oy.call(e,"cause")?"{ ["+String(e)+"] "+Tt.call(Rh.call("[cause]: "+f(e.cause),w),", ")+" }":w.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Tt.call(w,", ")+" }"}if(typeof e=="object"&&a){if(Lh&&typeof e[Lh]=="function"&&vc)return vc(e,{depth:d-s});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(gE(e)){var E=[];return Nh&&Nh.call(e,function(J,F){E.push(f(F,e,!0)+" => "+f(J,e))}),zh("Map",ea.call(e),E,h)}if(bE(e)){var O=[];return Ch&&Ch.call(e,function(J){O.push(f(J,e))}),zh("Set",ta.call(e),O,h)}if(yE(e))return Ja("WeakMap");if(xE(e))return Ja("WeakSet");if(vE(e))return Ja("WeakRef");if(dE(e))return Tn(f(Number(e)));if(fE(e))return Tn(f(gc.call(e)));if(hE(e))return Tn(eE.call(e));if(uE(e))return Tn(f(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Je<"u"&&e===Je)return"{ [object globalThis] }";if(!lE(e)&&!Fh(e)){var $=io(e,f),N=$h?$h(e)===Object.prototype:e instanceof Object||e.constructor===Object,k=e instanceof Object?"":"null prototype",R=!N&&ti&&Object(e)===e&&ti in e?Fu.call(Pr(e),8,-1):k?"Object":"",T=N||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",M=T+(R||k?"["+Tt.call(Rh.call([],R||[],k||[]),": ")+"] ":"");return $.length===0?M+"{}":h?M+"{"+xc($,h)+"}":M+"{ "+Tt.call($,", ")+" }"}return String(e)};function ly(t,e,r){var s=r.quoteStyle||e,n=ay[s];return n+t+n}function aE(t){return mr.call(String(t),/"/g,"&quot;")}function ls(t){return!ti||!(typeof t=="object"&&(ti in t||typeof t[ti]<"u"))}function bc(t){return Pr(t)==="[object Array]"&&ls(t)}function lE(t){return Pr(t)==="[object Date]"&&ls(t)}function Fh(t){return Pr(t)==="[object RegExp]"&&ls(t)}function cE(t){return Pr(t)==="[object Error]"&&ls(t)}function uE(t){return Pr(t)==="[object String]"&&ls(t)}function dE(t){return Pr(t)==="[object Number]"&&ls(t)}function hE(t){return Pr(t)==="[object Boolean]"&&ls(t)}function cy(t){if(sn)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!yc)return!1;try{return yc.call(t),!0}catch{}return!1}function fE(t){if(!t||typeof t!="object"||!gc)return!1;try{return gc.call(t),!0}catch{}return!1}var pE=Object.prototype.hasOwnProperty||function(t){return t in this};function Lt(t,e){return pE.call(t,e)}function Pr(t){return tE.call(t)}function mE(t){if(t.name)return t.name;var e=sE.call(rE.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function uy(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,s=t.length;r<s;r++)if(t[r]===e)return r;return-1}function gE(t){if(!ea||!t||typeof t!="object")return!1;try{ea.call(t);try{ta.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function yE(t){if(!Xn||!t||typeof t!="object")return!1;try{Xn.call(t,Xn);try{ei.call(t,ei)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function vE(t){if(!Ah||!t||typeof t!="object")return!1;try{return Ah.call(t),!0}catch{}return!1}function bE(t){if(!ta||!t||typeof t!="object")return!1;try{ta.call(t);try{ea.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function xE(t){if(!ei||!t||typeof t!="object")return!1;try{ei.call(t,ei);try{Xn.call(t,Xn)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function wE(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function dy(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,s="... "+r+" more character"+(r>1?"s":"");return dy(Fu.call(t,0,e.maxStringLength),e)+s}var n=oE[e.quoteStyle||"single"];n.lastIndex=0;var o=mr.call(mr.call(t,n,"\\$1"),/[\x00-\x1f]/g,_E);return ly(o,"single",e)}function _E(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+nE.call(e.toString(16))}function Tn(t){return"Object("+t+")"}function Ja(t){return t+" { ? }"}function zh(t,e,r,s){var n=s?xc(r,s):Tt.call(r,", ");return t+" ("+e+") {"+n+"}"}function jE(t){for(var e=0;e<t.length;e++)if(uy(t[e],`
`)>=0)return!1;return!0}function SE(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Tt.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Tt.call(Array(e+1),r)}}function xc(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Tt.call(t,","+r)+`
`+e.prev}function io(t,e){var r=bc(t),s=[];if(r){s.length=t.length;for(var n=0;n<t.length;n++)s[n]=Lt(t,n)?e(t[n],t):""}var o=typeof Ka=="function"?Ka(t):[],a;if(sn){a={};for(var l=0;l<o.length;l++)a["$"+o[l]]=o[l]}for(var c in t)Lt(t,c)&&(r&&String(Number(c))===c&&c<t.length||sn&&a["$"+c]instanceof Symbol||(iy.call(/[^\w$]/,c)?s.push(e(c,t)+": "+e(t[c],t)):s.push(c+": "+e(t[c],t))));if(typeof Ka=="function")for(var u=0;u<o.length;u++)oy.call(t,o[u])&&s.push("["+e(o[u])+"]: "+e(t[o[u]],t));return s}var kE=ka,TE=yn,Ta=function(t,e,r){for(var s=t,n;(n=s.next)!=null;s=n)if(n.key===e)return s.next=n.next,r||(n.next=t.next,t.next=n),n},PE=function(t,e){if(t){var r=Ta(t,e);return r&&r.value}},EE=function(t,e,r){var s=Ta(t,e);s?s.value=r:t.next={key:e,next:t.next,value:r}},NE=function(t,e){return t?!!Ta(t,e):!1},CE=function(t,e){if(t)return Ta(t,e,!0)},AE=function(){var e,r={assert:function(s){if(!r.has(s))throw new TE("Side channel does not contain "+kE(s))},delete:function(s){var n=e&&e.next,o=CE(e,s);return o&&n&&n===o&&(e=void 0),!!o},get:function(s){return PE(e,s)},has:function(s){return NE(e,s)},set:function(s,n){e||(e={next:void 0}),EE(e,s,n)}};return r},hy=Object,OE=Error,RE=EvalError,IE=RangeError,$E=ReferenceError,ME=SyntaxError,DE=URIError,LE=Math.abs,FE=Math.floor,zE=Math.max,UE=Math.min,BE=Math.pow,VE=Math.round,qE=Number.isNaN||function(e){return e!==e},GE=qE,WE=function(e){return GE(e)||e===0?e:e<0?-1:1},HE=Object.getOwnPropertyDescriptor,Lo=HE;if(Lo)try{Lo([],"length")}catch{Lo=null}var fy=Lo,Fo=Object.defineProperty||!1;if(Fo)try{Fo({},"a",{value:1})}catch{Fo=!1}var ZE=Fo,Qa,Uh;function YE(){return Uh||(Uh=1,Qa=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),s=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var n=42;e[r]=n;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,r);if(l.value!==n||l.enumerable!==!0)return!1}return!0}),Qa}var Xa,Bh;function KE(){if(Bh)return Xa;Bh=1;var t=typeof Symbol<"u"&&Symbol,e=YE();return Xa=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Xa}var el,Vh;function py(){return Vh||(Vh=1,el=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),el}var tl,qh;function my(){if(qh)return tl;qh=1;var t=hy;return tl=t.getPrototypeOf||null,tl}var rl,Gh;function JE(){if(Gh)return rl;Gh=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,s="[object Function]",n=function(c,u){for(var d=[],h=0;h<c.length;h+=1)d[h]=c[h];for(var f=0;f<u.length;f+=1)d[f+c.length]=u[f];return d},o=function(c,u){for(var d=[],h=u,f=0;h<c.length;h+=1,f+=1)d[f]=c[h];return d},a=function(l,c){for(var u="",d=0;d<l.length;d+=1)u+=l[d],d+1<l.length&&(u+=c);return u};return rl=function(c){var u=this;if(typeof u!="function"||e.apply(u)!==s)throw new TypeError(t+u);for(var d=o(arguments,1),h,f=function(){if(this instanceof h){var x=u.apply(this,n(d,arguments));return Object(x)===x?x:this}return u.apply(c,n(d,arguments))},p=r(0,u.length-d.length),m=[],b=0;b<p;b++)m[b]="$"+b;if(h=Function("binder","return function ("+a(m,",")+"){ return binder.apply(this,arguments); }")(f),u.prototype){var y=function(){};y.prototype=u.prototype,h.prototype=new y,y.prototype=null}return h},rl}var sl,Wh;function Pa(){if(Wh)return sl;Wh=1;var t=JE();return sl=Function.prototype.bind||t,sl}var nl,Hh;function zu(){return Hh||(Hh=1,nl=Function.prototype.call),nl}var il,Zh;function gy(){return Zh||(Zh=1,il=Function.prototype.apply),il}var QE=typeof Reflect<"u"&&Reflect&&Reflect.apply,XE=Pa(),eN=gy(),tN=zu(),rN=QE,sN=rN||XE.call(tN,eN),nN=Pa(),iN=yn,oN=zu(),aN=sN,yy=function(e){if(e.length<1||typeof e[0]!="function")throw new iN("a function is required");return aN(nN,oN,e)},ol,Yh;function lN(){if(Yh)return ol;Yh=1;var t=yy,e=fy,r;try{r=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var s=!!r&&e&&e(Object.prototype,"__proto__"),n=Object,o=n.getPrototypeOf;return ol=s&&typeof s.get=="function"?t([s.get]):typeof o=="function"?function(l){return o(l==null?l:n(l))}:!1,ol}var al,Kh;function cN(){if(Kh)return al;Kh=1;var t=py(),e=my(),r=lN();return al=t?function(n){return t(n)}:e?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return e(n)}:r?function(n){return r(n)}:null,al}var ll,Jh;function uN(){if(Jh)return ll;Jh=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=Pa();return ll=r.call(t,e),ll}var X,dN=hy,hN=OE,fN=RE,pN=IE,mN=$E,nn=ME,Ls=yn,gN=DE,yN=LE,vN=FE,bN=zE,xN=UE,wN=BE,_N=VE,jN=WE,vy=Function,cl=function(t){try{return vy('"use strict"; return ('+t+").constructor;")()}catch{}},mi=fy,SN=ZE,ul=function(){throw new Ls},kN=mi?function(){try{return arguments.callee,ul}catch{try{return mi(arguments,"callee").get}catch{return ul}}}():ul,ms=KE()(),$e=cN(),TN=my(),PN=py(),by=gy(),Di=zu(),Ts={},EN=typeof Uint8Array>"u"||!$e?X:$e(Uint8Array),Xr={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?X:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?X:ArrayBuffer,"%ArrayIteratorPrototype%":ms&&$e?$e([][Symbol.iterator]()):X,"%AsyncFromSyncIteratorPrototype%":X,"%AsyncFunction%":Ts,"%AsyncGenerator%":Ts,"%AsyncGeneratorFunction%":Ts,"%AsyncIteratorPrototype%":Ts,"%Atomics%":typeof Atomics>"u"?X:Atomics,"%BigInt%":typeof BigInt>"u"?X:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?X:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?X:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?X:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":hN,"%eval%":eval,"%EvalError%":fN,"%Float16Array%":typeof Float16Array>"u"?X:Float16Array,"%Float32Array%":typeof Float32Array>"u"?X:Float32Array,"%Float64Array%":typeof Float64Array>"u"?X:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?X:FinalizationRegistry,"%Function%":vy,"%GeneratorFunction%":Ts,"%Int8Array%":typeof Int8Array>"u"?X:Int8Array,"%Int16Array%":typeof Int16Array>"u"?X:Int16Array,"%Int32Array%":typeof Int32Array>"u"?X:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ms&&$e?$e($e([][Symbol.iterator]())):X,"%JSON%":typeof JSON=="object"?JSON:X,"%Map%":typeof Map>"u"?X:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ms||!$e?X:$e(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":dN,"%Object.getOwnPropertyDescriptor%":mi,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?X:Promise,"%Proxy%":typeof Proxy>"u"?X:Proxy,"%RangeError%":pN,"%ReferenceError%":mN,"%Reflect%":typeof Reflect>"u"?X:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?X:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ms||!$e?X:$e(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?X:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ms&&$e?$e(""[Symbol.iterator]()):X,"%Symbol%":ms?Symbol:X,"%SyntaxError%":nn,"%ThrowTypeError%":kN,"%TypedArray%":EN,"%TypeError%":Ls,"%Uint8Array%":typeof Uint8Array>"u"?X:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?X:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?X:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?X:Uint32Array,"%URIError%":gN,"%WeakMap%":typeof WeakMap>"u"?X:WeakMap,"%WeakRef%":typeof WeakRef>"u"?X:WeakRef,"%WeakSet%":typeof WeakSet>"u"?X:WeakSet,"%Function.prototype.call%":Di,"%Function.prototype.apply%":by,"%Object.defineProperty%":SN,"%Object.getPrototypeOf%":TN,"%Math.abs%":yN,"%Math.floor%":vN,"%Math.max%":bN,"%Math.min%":xN,"%Math.pow%":wN,"%Math.round%":_N,"%Math.sign%":jN,"%Reflect.getPrototypeOf%":PN};if($e)try{null.error}catch(t){var NN=$e($e(t));Xr["%Error.prototype%"]=NN}var CN=function t(e){var r;if(e==="%AsyncFunction%")r=cl("async function () {}");else if(e==="%GeneratorFunction%")r=cl("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=cl("async function* () {}");else if(e==="%AsyncGenerator%"){var s=t("%AsyncGeneratorFunction%");s&&(r=s.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=t("%AsyncGenerator%");n&&$e&&(r=$e(n.prototype))}return Xr[e]=r,r},Qh={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Li=Pa(),ra=uN(),AN=Li.call(Di,Array.prototype.concat),ON=Li.call(by,Array.prototype.splice),Xh=Li.call(Di,String.prototype.replace),sa=Li.call(Di,String.prototype.slice),RN=Li.call(Di,RegExp.prototype.exec),IN=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$N=/\\(\\)?/g,MN=function(e){var r=sa(e,0,1),s=sa(e,-1);if(r==="%"&&s!=="%")throw new nn("invalid intrinsic syntax, expected closing `%`");if(s==="%"&&r!=="%")throw new nn("invalid intrinsic syntax, expected opening `%`");var n=[];return Xh(e,IN,function(o,a,l,c){n[n.length]=l?Xh(c,$N,"$1"):a||o}),n},DN=function(e,r){var s=e,n;if(ra(Qh,s)&&(n=Qh[s],s="%"+n[0]+"%"),ra(Xr,s)){var o=Xr[s];if(o===Ts&&(o=CN(s)),typeof o>"u"&&!r)throw new Ls("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:s,value:o}}throw new nn("intrinsic "+e+" does not exist!")},Uu=function(e,r){if(typeof e!="string"||e.length===0)throw new Ls("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ls('"allowMissing" argument must be a boolean');if(RN(/^%?[^%]*%?$/,e)===null)throw new nn("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=MN(e),n=s.length>0?s[0]:"",o=DN("%"+n+"%",r),a=o.name,l=o.value,c=!1,u=o.alias;u&&(n=u[0],ON(s,AN([0,1],u)));for(var d=1,h=!0;d<s.length;d+=1){var f=s[d],p=sa(f,0,1),m=sa(f,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new nn("property names with quotes must have matching quotes");if((f==="constructor"||!h)&&(c=!0),n+="."+f,a="%"+n+"%",ra(Xr,a))l=Xr[a];else if(l!=null){if(!(f in l)){if(!r)throw new Ls("base intrinsic for "+e+" exists, but the property is not available.");return}if(mi&&d+1>=s.length){var b=mi(l,f);h=!!b,h&&"get"in b&&!("originalValue"in b.get)?l=b.get:l=l[f]}else h=ra(l,f),l=l[f];h&&!c&&(Xr[a]=l)}}return l},xy=Uu,wy=yy,LN=wy([xy("%String.prototype.indexOf%")]),_y=function(e,r){var s=xy(e,!!r);return typeof s=="function"&&LN(e,".prototype.")>-1?wy([s]):s},FN=Uu,Fi=_y,zN=ka,UN=yn,ef=FN("%Map%",!0),BN=Fi("Map.prototype.get",!0),VN=Fi("Map.prototype.set",!0),qN=Fi("Map.prototype.has",!0),GN=Fi("Map.prototype.delete",!0),WN=Fi("Map.prototype.size",!0),jy=!!ef&&function(){var e,r={assert:function(s){if(!r.has(s))throw new UN("Side channel does not contain "+zN(s))},delete:function(s){if(e){var n=GN(e,s);return WN(e)===0&&(e=void 0),n}return!1},get:function(s){if(e)return BN(e,s)},has:function(s){return e?qN(e,s):!1},set:function(s,n){e||(e=new ef),VN(e,s,n)}};return r},HN=Uu,Ea=_y,ZN=ka,oo=jy,YN=yn,gs=HN("%WeakMap%",!0),KN=Ea("WeakMap.prototype.get",!0),JN=Ea("WeakMap.prototype.set",!0),QN=Ea("WeakMap.prototype.has",!0),XN=Ea("WeakMap.prototype.delete",!0),e2=gs?function(){var e,r,s={assert:function(n){if(!s.has(n))throw new YN("Side channel does not contain "+ZN(n))},delete:function(n){if(gs&&n&&(typeof n=="object"||typeof n=="function")){if(e)return XN(e,n)}else if(oo&&r)return r.delete(n);return!1},get:function(n){return gs&&n&&(typeof n=="object"||typeof n=="function")&&e?KN(e,n):r&&r.get(n)},has:function(n){return gs&&n&&(typeof n=="object"||typeof n=="function")&&e?QN(e,n):!!r&&r.has(n)},set:function(n,o){gs&&n&&(typeof n=="object"||typeof n=="function")?(e||(e=new gs),JN(e,n,o)):oo&&(r||(r=oo()),r.set(n,o))}};return s}:oo,t2=yn,r2=ka,s2=AE,n2=jy,i2=e2,o2=i2||n2||s2,a2=function(){var e,r={assert:function(s){if(!r.has(s))throw new t2("Side channel does not contain "+r2(s))},delete:function(s){return!!e&&e.delete(s)},get:function(s){return e&&e.get(s)},has:function(s){return!!e&&e.has(s)},set:function(s,n){e||(e=o2()),e.set(s,n)}};return r},l2=String.prototype.replace,c2=/%20/g,dl={RFC1738:"RFC1738",RFC3986:"RFC3986"},Bu={default:dl.RFC3986,formatters:{RFC1738:function(t){return l2.call(t,c2,"+")},RFC3986:function(t){return String(t)}},RFC1738:dl.RFC1738,RFC3986:dl.RFC3986},u2=Bu,hl=Object.prototype.hasOwnProperty,Ur=Array.isArray,yt=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),d2=function(e){for(;e.length>1;){var r=e.pop(),s=r.obj[r.prop];if(Ur(s)){for(var n=[],o=0;o<s.length;++o)typeof s[o]<"u"&&n.push(s[o]);r.obj[r.prop]=n}}},Sy=function(e,r){for(var s=r&&r.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)typeof e[n]<"u"&&(s[n]=e[n]);return s},h2=function t(e,r,s){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(Ur(e))e.push(r);else if(e&&typeof e=="object")(s&&(s.plainObjects||s.allowPrototypes)||!hl.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var n=e;return Ur(e)&&!Ur(r)&&(n=Sy(e,s)),Ur(e)&&Ur(r)?(r.forEach(function(o,a){if(hl.call(e,a)){var l=e[a];l&&typeof l=="object"&&o&&typeof o=="object"?e[a]=t(l,o,s):e.push(o)}else e[a]=o}),e):Object.keys(r).reduce(function(o,a){var l=r[a];return hl.call(o,a)?o[a]=t(o[a],l,s):o[a]=l,o},n)},f2=function(e,r){return Object.keys(r).reduce(function(s,n){return s[n]=r[n],s},e)},p2=function(t,e,r){var s=t.replace(/\+/g," ");if(r==="iso-8859-1")return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch{return s}},fl=1024,m2=function(e,r,s,n,o){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),s==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});for(var l="",c=0;c<a.length;c+=fl){for(var u=a.length>=fl?a.slice(c,c+fl):a,d=[],h=0;h<u.length;++h){var f=u.charCodeAt(h);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||o===u2.RFC1738&&(f===40||f===41)){d[d.length]=u.charAt(h);continue}if(f<128){d[d.length]=yt[f];continue}if(f<2048){d[d.length]=yt[192|f>>6]+yt[128|f&63];continue}if(f<55296||f>=57344){d[d.length]=yt[224|f>>12]+yt[128|f>>6&63]+yt[128|f&63];continue}h+=1,f=65536+((f&1023)<<10|u.charCodeAt(h)&1023),d[d.length]=yt[240|f>>18]+yt[128|f>>12&63]+yt[128|f>>6&63]+yt[128|f&63]}l+=d.join("")}return l},g2=function(e){for(var r=[{obj:{o:e},prop:"o"}],s=[],n=0;n<r.length;++n)for(var o=r[n],a=o.obj[o.prop],l=Object.keys(a),c=0;c<l.length;++c){var u=l[c],d=a[u];typeof d=="object"&&d!==null&&s.indexOf(d)===-1&&(r.push({obj:a,prop:u}),s.push(d))}return d2(r),e},y2=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},v2=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},b2=function(e,r){return[].concat(e,r)},x2=function(e,r){if(Ur(e)){for(var s=[],n=0;n<e.length;n+=1)s.push(r(e[n]));return s}return r(e)},ky={arrayToObject:Sy,assign:f2,combine:b2,compact:g2,decode:p2,encode:m2,isBuffer:v2,isRegExp:y2,maybeMap:x2,merge:h2},Ty=a2,zo=ky,ri=Bu,w2=Object.prototype.hasOwnProperty,Py={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},_t=Array.isArray,_2=Array.prototype.push,Ey=function(t,e){_2.apply(t,_t(e)?e:[e])},j2=Date.prototype.toISOString,tf=ri.default,Ae={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:zo.encode,encodeValuesOnly:!1,filter:void 0,format:tf,formatter:ri.formatters[tf],indices:!1,serializeDate:function(e){return j2.call(e)},skipNulls:!1,strictNullHandling:!1},S2=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},pl={},k2=function t(e,r,s,n,o,a,l,c,u,d,h,f,p,m,b,y,x,j){for(var v=e,w=j,E=0,O=!1;(w=w.get(pl))!==void 0&&!O;){var $=w.get(e);if(E+=1,typeof $<"u"){if($===E)throw new RangeError("Cyclic object value");O=!0}typeof w.get(pl)>"u"&&(E=0)}if(typeof d=="function"?v=d(r,v):v instanceof Date?v=p(v):s==="comma"&&_t(v)&&(v=zo.maybeMap(v,function(se){return se instanceof Date?p(se):se})),v===null){if(a)return u&&!y?u(r,Ae.encoder,x,"key",m):r;v=""}if(S2(v)||zo.isBuffer(v)){if(u){var N=y?r:u(r,Ae.encoder,x,"key",m);return[b(N)+"="+b(u(v,Ae.encoder,x,"value",m))]}return[b(r)+"="+b(String(v))]}var k=[];if(typeof v>"u")return k;var R;if(s==="comma"&&_t(v))y&&u&&(v=zo.maybeMap(v,u)),R=[{value:v.length>0?v.join(",")||null:void 0}];else if(_t(d))R=d;else{var T=Object.keys(v);R=h?T.sort(h):T}var M=c?String(r).replace(/\./g,"%2E"):String(r),J=n&&_t(v)&&v.length===1?M+"[]":M;if(o&&_t(v)&&v.length===0)return J+"[]";for(var F=0;F<R.length;++F){var C=R[F],L=typeof C=="object"&&C&&typeof C.value<"u"?C.value:v[C];if(!(l&&L===null)){var z=f&&c?String(C).replace(/\./g,"%2E"):String(C),V=_t(v)?typeof s=="function"?s(J,z):J:J+(f?"."+z:"["+z+"]");j.set(e,E);var H=Ty();H.set(pl,j),Ey(k,t(L,V,s,n,o,a,l,c,s==="comma"&&y&&_t(v)?null:u,d,h,f,p,m,b,y,x,H))}}return k},T2=function(e){if(!e)return Ae;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Ae.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=ri.default;if(typeof e.format<"u"){if(!w2.call(ri.formatters,e.format))throw new TypeError("Unknown format option provided.");s=e.format}var n=ri.formatters[s],o=Ae.filter;(typeof e.filter=="function"||_t(e.filter))&&(o=e.filter);var a;if(e.arrayFormat in Py?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=Ae.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Ae.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ae.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ae.allowEmptyArrays,arrayFormat:a,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ae.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Ae.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ae.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Ae.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Ae.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ae.encodeValuesOnly,filter:o,format:s,formatter:n,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ae.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ae.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ae.strictNullHandling}},P2=function(t,e){var r=t,s=T2(e),n,o;typeof s.filter=="function"?(o=s.filter,r=o("",r)):_t(s.filter)&&(o=s.filter,n=o);var a=[];if(typeof r!="object"||r===null)return"";var l=Py[s.arrayFormat],c=l==="comma"&&s.commaRoundTrip;n||(n=Object.keys(r)),s.sort&&n.sort(s.sort);for(var u=Ty(),d=0;d<n.length;++d){var h=n[d],f=r[h];s.skipNulls&&f===null||Ey(a,k2(f,h,l,c,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,u))}var p=a.join(s.delimiter),m=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),p.length>0?m+p:""},is=ky,wc=Object.prototype.hasOwnProperty,rf=Array.isArray,_e={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:is.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},E2=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Ny=function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},N2="utf8=%26%2310003%3B",C2="utf8=%E2%9C%93",A2=function(e,r){var s={__proto__:null},n=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=r.parameterLimit===1/0?void 0:r.parameterLimit,a=n.split(r.delimiter,r.throwOnLimitExceeded?o+1:o);if(r.throwOnLimitExceeded&&a.length>o)throw new RangeError("Parameter limit exceeded. Only "+o+" parameter"+(o===1?"":"s")+" allowed.");var l=-1,c,u=r.charset;if(r.charsetSentinel)for(c=0;c<a.length;++c)a[c].indexOf("utf8=")===0&&(a[c]===C2?u="utf-8":a[c]===N2&&(u="iso-8859-1"),l=c,c=a.length);for(c=0;c<a.length;++c)if(c!==l){var d=a[c],h=d.indexOf("]="),f=h===-1?d.indexOf("="):h+1,p,m;f===-1?(p=r.decoder(d,_e.decoder,u,"key"),m=r.strictNullHandling?null:""):(p=r.decoder(d.slice(0,f),_e.decoder,u,"key"),m=is.maybeMap(Ny(d.slice(f+1),r,rf(s[p])?s[p].length:0),function(y){return r.decoder(y,_e.decoder,u,"value")})),m&&r.interpretNumericEntities&&u==="iso-8859-1"&&(m=E2(String(m))),d.indexOf("[]=")>-1&&(m=rf(m)?[m]:m);var b=wc.call(s,p);b&&r.duplicates==="combine"?s[p]=is.combine(s[p],m):(!b||r.duplicates==="last")&&(s[p]=m)}return s},O2=function(t,e,r,s){var n=0;if(t.length>0&&t[t.length-1]==="[]"){var o=t.slice(0,-1).join("");n=Array.isArray(e)&&e[o]?e[o].length:0}for(var a=s?e:Ny(e,r,n),l=t.length-1;l>=0;--l){var c,u=t[l];if(u==="[]"&&r.parseArrays)c=r.allowEmptyArrays&&(a===""||r.strictNullHandling&&a===null)?[]:is.combine([],a);else{c=r.plainObjects?{__proto__:null}:{};var d=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,h=r.decodeDotInKeys?d.replace(/%2E/g,"."):d,f=parseInt(h,10);!r.parseArrays&&h===""?c={0:a}:!isNaN(f)&&u!==h&&String(f)===h&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(c=[],c[f]=a):h!=="__proto__"&&(c[h]=a)}a=c}return a},R2=function(e,r,s,n){if(e){var o=s.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,c=s.depth>0&&a.exec(o),u=c?o.slice(0,c.index):o,d=[];if(u){if(!s.plainObjects&&wc.call(Object.prototype,u)&&!s.allowPrototypes)return;d.push(u)}for(var h=0;s.depth>0&&(c=l.exec(o))!==null&&h<s.depth;){if(h+=1,!s.plainObjects&&wc.call(Object.prototype,c[1].slice(1,-1))&&!s.allowPrototypes)return;d.push(c[1])}if(c){if(s.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+s.depth+" and strictDepth is true");d.push("["+o.slice(c.index)+"]")}return O2(d,r,s,n)}},I2=function(e){if(!e)return _e;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?_e.charset:e.charset,s=typeof e.duplicates>"u"?_e.duplicates:e.duplicates;if(s!=="combine"&&s!=="first"&&s!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var n=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:_e.allowDots:!!e.allowDots;return{allowDots:n,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:_e.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:_e.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:_e.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:_e.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:_e.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:_e.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:_e.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:_e.decoder,delimiter:typeof e.delimiter=="string"||is.isRegExp(e.delimiter)?e.delimiter:_e.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:_e.depth,duplicates:s,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:_e.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:_e.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:_e.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:_e.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:_e.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},$2=function(t,e){var r=I2(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var s=typeof t=="string"?A2(t,r):t,n=r.plainObjects?{__proto__:null}:{},o=Object.keys(s),a=0;a<o.length;++a){var l=o[a],c=R2(l,s[l],r,typeof t=="string");n=is.merge(n,c,r)}return r.allowSparse===!0?n:is.compact(n)},M2=P2,D2=$2,L2=Bu,F2={formats:L2,parse:D2,stringify:M2};const Vu=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host"];function Cy(t){return t&&typeof t=="object"&&Vu.some(e=>Object.prototype.hasOwnProperty.call(t,e))}function Na(t){return F2.stringify(t,{serializeDate:e=>Math.floor(e.getTime()/1e3).toString()}).replace(/%5B/g,"[").replace(/%5D/g,"]")}const _c=(()=>{const t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{const r=e.replace(/["\n\r\u2028\u2029]/g,s=>t[s]);return s=>r.replace(/\{([\s\S]+?)\}/g,(n,o)=>encodeURIComponent(s[o]||""))}})();function z2(t){const e=t.match(/\{\w+\}/g);return e?e.map(r=>r.replace(/[{}]/g,"")):[]}function Ay(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!Cy(t[0]))return t.shift();const e=Object.keys(t[0]),r=e.filter(s=>Vu.includes(s));return r.length>0&&r.length!==e.length&&na(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function U2(t){const e={auth:null,host:null,headers:{},settings:{}};if(t.length>0){const r=t[t.length-1];if(typeof r=="string")e.auth=t.pop();else if(Cy(r)){const s=Object.assign({},t.pop()),n=Object.keys(s).filter(o=>!Vu.includes(o));n.length&&na(`Invalid options found (${n.join(", ")}); ignoring.`),s.apiKey&&(e.auth=s.apiKey),s.idempotencyKey&&(e.headers["Idempotency-Key"]=s.idempotencyKey),s.stripeAccount&&(e.headers["Stripe-Account"]=s.stripeAccount),s.apiVersion&&(e.headers["Stripe-Version"]=s.apiVersion),Number.isInteger(s.maxNetworkRetries)&&(e.settings.maxNetworkRetries=s.maxNetworkRetries),Number.isInteger(s.timeout)&&(e.settings.timeout=s.timeout),s.host&&(e.host=s.host)}}return e}function B2(t){const e=this,r=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...s){e.apply(this,s)};return Object.assign(r,e),r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t),r}function ml(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,r)=>(t[r]!=null&&(e[r]=t[r]),e),{})}function V2(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,r)=>(e[q2(r)]=t[r],e),{}):t}function q2(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function qu(t,e){return e?t.then(r=>{setTimeout(()=>{e(null,r)},0)},r=>{setTimeout(()=>{e(r,null)},0)}):t}function G2(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}function na(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}function W2(t){const e=typeof t;return(e==="function"||e==="object")&&!!t}function H2(t){const e={},r=(s,n)=>{Object.keys(s).forEach(o=>{const a=s[o],l=n?`${n}[${o}]`:o;if(W2(a)){if(!(a instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(a,"data"))return r(a,l);e[l]=a}else e[l]=String(a)})};return r(t,null),e}function gl(t,e,r){if(!Number.isInteger(e)){if(r!==void 0)return r;throw new Error(`${t} must be an integer`)}return e}function Z2(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}class Oy{constructor(e,r,s,n){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=s,this.stripeResource=n}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");const r=Ry(this.requestArgs);if(this.index<e.data.length){const s=r?e.data.length-1-this.index:this.index,n=e.data[s];return this.index+=1,{value:n,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);const s=await this.pagePromise;return this.iterate(s)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;const e=(async()=>{const r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=e,e}}class Y2 extends Oy{getNextPage(e){const r=Ry(this.requestArgs),s=tC(e,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:s})}}class K2 extends Oy{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}const J2=(t,e,r,s)=>r.methodType==="search"?sf(new K2(s,e,r,t)):r.methodType==="list"?sf(new Y2(s,e,r,t)):null,sf=t=>{const e=rC((...n)=>t.next(...n)),r=sC(e),s={autoPagingEach:e,autoPagingToArray:r,next:()=>t.next(),return:()=>({}),[Q2()]:()=>s};return s};function Q2(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function X2(t){if(t.length<2)return null;const e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function eC(t){if(t.length===0)return;const e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return function(s,n){const o=e(s);n(o)}}function tC(t,e){const r=e?0:t.data.length-1,s=t.data[r],n=s&&s.id;if(!n)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return n}function rC(t){return function(){const r=[].slice.call(arguments),s=eC(r),n=X2(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);const o=nC(t,s);return qu(o,n)}}function sC(t){return function(r,s){const n=r&&r.limit;if(!n)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(n>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");const o=new Promise((a,l)=>{const c=[];t(u=>{if(c.push(u),c.length>=n)return!1}).then(()=>{a(c)}).catch(l)});return qu(o,s)}}function nC(t,e){return new Promise((r,s)=>{function n(o){if(o.done){r();return}const a=o.value;return new Promise(l=>{e(a,l)}).then(l=>l===!1?n({done:!0,value:void 0}):t().then(n))}t().then(n).catch(s)})}function Ry(t){const e=[].slice.call(t);return!!Ay(e).ending_before}function iC(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){const r=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=z2(t.fullPath||this.createResourcePathWithSymbols(t.path||""));const s=qu(this._makeRequest(e,t,{}),r);return Object.assign(s,J2(this,e,t,s)),s}}_.extend=B2;_.method=iC;_.MAX_BUFFERED_REQUEST_METRICS=100;function _(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=_c(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=_c(this.path),this.initialize(...arguments)}_.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){const r=[this.basePath(e),this.path(e)];if(typeof t=="function"){const s=t(e);s&&r.push(s)}else r.push(t);return this._joinUrlParts(r)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,r){const s=(e.method||"GET").toUpperCase(),n=e.usage||[],o=e.urlParams||[],a=e.encode||(O=>O),l=!!e.fullPath,c=_c(l?e.fullPath:e.path||""),u=l?e.fullPath:this.createResourcePathWithSymbols(e.path),d=[].slice.call(t),h=o.reduce((O,$)=>{const N=d.shift();if(typeof N!="string")throw new Error(`Stripe: Argument "${$}" must be a string, but got: ${N} (on API request to \`${s} ${u}\`)`);return O[$]=N,O},{}),f=Ay(d),p=a(Object.assign({},f,r)),m=U2(d),b=m.host||e.host,y=!!e.streaming;if(d.filter(O=>O!=null).length)throw new Error(`Stripe: Unknown arguments (${d}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${s} \`${u}\`)`);const x=l?c(h):this.createFullPath(c,h),j=Object.assign(m.headers,e.headers);e.validator&&e.validator(p,{headers:j});const v=e.method==="GET"||e.method==="DELETE";return{requestMethod:s,requestPath:x,bodyData:v?{}:p,queryData:v?p:{},auth:m.auth,headers:j,host:b??null,streaming:y,settings:m.settings,usage:n}},_makeRequest(t,e,r){return new Promise((s,n)=>{var o;let a;try{a=this._getRequestOpts(t,e,r)}catch(f){n(f);return}function l(f,p){f?n(f):s(e.transformResponseData?e.transformResponseData(p):p)}const c=Object.keys(a.queryData).length===0,u=[a.requestPath,c?"":"?",Na(a.queryData)].join(""),{headers:d,settings:h}=a;this._stripe._requestSender._request(a.requestMethod,a.host,u,a.bodyData,a.auth,{headers:d,settings:h,streaming:a.streaming},a.usage,l,(o=this.requestDataProcessor)===null||o===void 0?void 0:o.bind(this))})}};const Or=_.method,oC=_.extend({retrieve:Or({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:Or({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:Or({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:Or({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:Or({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:Or({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:Or({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),nf=_.method,aC=_.extend({retrieve:nf({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:nf({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),Pn=_.method,lC=_.extend({create:Pn({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:Pn({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:Pn({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),increment:Pn({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),reverse:Pn({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),En=_.method,cC=_.extend({retrieve:En({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:En({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:En({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:En({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:En({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),of=_.method,uC=_.extend({create:of({method:"POST",fullPath:"/v1/tax/calculations"}),listLineItems:of({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),ao=_.method,dC=_.extend({create:ao({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:ao({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:ao({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:ao({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),lo=_.method,hC=_.extend({deliverCard:lo({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:lo({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:lo({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:lo({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"})}),co=_.method,fC=_.extend({create:co({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:co({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:co({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:co({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),uo=_.method,pC=_.extend({create:uo({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:uo({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:uo({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:uo({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),Nn=_.method,mC=_.extend({create:Nn({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:Nn({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:Nn({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:Nn({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:Nn({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),gC=_.method,yC=_.extend({create:gC({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),vC=_.method,bC=_.extend({create:vC({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),yl=_.method,xC=_.extend({create:yl({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:yl({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:yl({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),wC=_.method,_C=_.extend({fundCashBalance:wC({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),vl=_.method,jC=_.extend({create:vl({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:vl({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:vl({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),Cn=_.method,SC=_.extend({create:Cn({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:Cn({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:Cn({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:Cn({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:Cn({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),af=_.method,kC=_.extend({retrieve:af({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:af({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),ho=_.method,TC=_.extend({create:ho({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:ho({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:ho({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:ho({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),ys=_.method,PC=_.extend({create:ys({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:ys({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:ys({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:ys({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),retrieveFeatures:ys({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:ys({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),bl=_.method,EC=_.extend({fail:bl({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:bl({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:bl({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),fo=_.method,NC=_.extend({create:fo({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:fo({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:fo({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:fo({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),An=_.method,CC=_.extend({create:An({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:An({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:An({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:An({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:An({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),AC=_.method,OC=_.extend({create:AC({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),RC=_.method,IC=_.extend({create:RC({method:"POST",fullPath:"/v1/billing/meter_events"})}),Rr=_.method,$C=_.extend({create:Rr({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:Rr({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:Rr({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:Rr({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:Rr({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:Rr({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:Rr({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),On=_.method,MC=_.extend({create:On({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:On({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:On({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:On({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:On({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),xl=_.method,DC=_.extend({fail:xl({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:xl({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:xl({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),po=_.method,LC=_.extend({create:po({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:po({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:po({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:po({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),wl=_.method,FC=_.extend({fail:wl({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:wl({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:wl({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),mo=_.method,zC=_.extend({create:mo({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:mo({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:mo({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:mo({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),_l=_.method,UC=_.extend({activate:_l({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:_l({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:_l({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),go=_.method,BC=_.extend({create:go({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:go({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:go({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:go({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),lf=_.method,VC=_.extend({retrieve:lf({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:lf({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),cf=_.method,qC=_.extend({retrieve:cf({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:cf({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),GC=_.method,WC=_.extend({presentPaymentMethod:GC({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})}),vt=_.method,HC=_.extend({create:vt({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:vt({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:vt({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:vt({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:vt({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:vt({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:vt({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:vt({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:vt({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:vt({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),ZC=_.method,YC=_.extend({create:ZC({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),uf=_.method,KC=_.extend({retrieve:uf({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:uf({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),JC=_.method,QC=_.extend({create:JC({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),df=_.method,XC=_.extend({retrieve:df({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:df({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),eA=_.method,tA=_.extend({expire:eA({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),yo=_.method,rA=_.extend({create:yo({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:yo({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:yo({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:yo({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),jl=_.method,sA=_.extend({create:jl({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:jl({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:jl({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),hf=_.method,nA=_.extend({retrieve:hf({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:hf({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),Sl=_.method,iA=_.extend({create:Sl({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:Sl({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:Sl({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),ff=_.method,oA=_.extend({retrieve:ff({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:ff({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),vo=_.method,aA=_.extend({create:vo({method:"POST",fullPath:"/v1/apps/secrets"}),list:vo({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:vo({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:vo({method:"GET",fullPath:"/v1/apps/secrets/find"})}),lA=_.method,cA=_.extend({create:lA({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),Rn=_.method,uA=_.extend({create:Rn({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:Rn({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),list:Rn({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:Rn({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:Rn({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),pf=_.method,dA=_.extend({create:pf({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:pf({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),mf=_.method,hA=_.extend({retrieve:mf({method:"GET",fullPath:"/v1/tax/settings"}),update:mf({method:"POST",fullPath:"/v1/tax/settings"})}),gf=_.method,fA=_.extend({retrieve:gf({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:gf({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),In=_.method,pA=_.extend({create:In({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:In({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:In({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:In({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:In({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),kl=_.method,mA=_.extend({retrieve:kl({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:kl({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:kl({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),yf=_.method,gA=_.extend({retrieve:yf({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:yf({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),Tl=_.method,yA=_.extend({createForceCapture:Tl({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:Tl({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:Tl({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),vf=_.method,vA=_.extend({retrieve:vf({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:vf({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),Pl=_.method,bA=_.extend({retrieve:Pl({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:Pl({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:Pl({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),bo=_.method,xA=_.extend({retrieve:bo({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:bo({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:bo({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:bo({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),bf=_.method,wA=_.extend({retrieve:bf({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:bf({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),xo=_.method,_A=_.extend({create:xo({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:xo({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:xo({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:xo({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),$n=_.method,jA=_.extend({create:$n({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:$n({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:$n({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:$n({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:$n({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),xf=_.method,SA=_.extend({retrieve:xf({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:xf({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),vs=_.method,kA=_.extend({create:vs({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:vs({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:vs({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:vs({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:vs({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:vs({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),we=_.method,wf=_.extend({create:we({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?we({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),we({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:we({method:"POST",fullPath:"/v1/accounts/{account}"}),list:we({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:we({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:we({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:we({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:we({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:we({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:we({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:we({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:we({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:we({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:we({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:we({method:"GET",fullPath:"/v1/account"}),retrieveCapability:we({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:we({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:we({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:we({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:we({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:we({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),TA=_.method,PA=_.extend({create:TA({method:"POST",fullPath:"/v1/account_links"})}),EA=_.method,NA=_.extend({create:EA({method:"POST",fullPath:"/v1/account_sessions"})}),wo=_.method,CA=_.extend({create:wo({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:wo({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:wo({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:wo({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),bs=_.method,AA=_.extend({retrieve:bs({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:bs({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:bs({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:bs({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:bs({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:bs({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),OA=_.method,RA=_.extend({retrieve:OA({method:"GET",fullPath:"/v1/balance"})}),_f=_.method,IA=_.extend({retrieve:_f({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:_f({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),xs=_.method,$A=_.extend({create:xs({method:"POST",fullPath:"/v1/charges"}),retrieve:xs({method:"GET",fullPath:"/v1/charges/{charge}"}),update:xs({method:"POST",fullPath:"/v1/charges/{charge}"}),list:xs({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:xs({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:xs({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),MA=_.method,DA=_.extend({retrieve:MA({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),jf=_.method,LA=_.extend({retrieve:jf({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:jf({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),Mn=_.method,FA=_.extend({create:Mn({method:"POST",fullPath:"/v1/coupons"}),retrieve:Mn({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:Mn({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:Mn({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:Mn({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),Jt=_.method,zA=_.extend({create:Jt({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:Jt({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:Jt({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:Jt({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:Jt({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:Jt({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:Jt({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:Jt({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),UA=_.method,BA=_.extend({create:UA({method:"POST",fullPath:"/v1/customer_sessions"})}),ae=_.method,VA=_.extend({create:ae({method:"POST",fullPath:"/v1/customers"}),retrieve:ae({method:"GET",fullPath:"/v1/customers/{customer}"}),update:ae({method:"POST",fullPath:"/v1/customers/{customer}"}),list:ae({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:ae({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:ae({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:ae({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:ae({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:ae({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:ae({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:ae({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:ae({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:ae({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:ae({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:ae({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:ae({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:ae({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:ae({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:ae({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:ae({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:ae({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:ae({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:ae({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:ae({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:ae({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:ae({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:ae({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:ae({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),_o=_.method,qA=_.extend({retrieve:_o({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:_o({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:_o({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:_o({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),Sf=_.method,GA=_.extend({create:Sf({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:Sf({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),kf=_.method,WA=_.extend({retrieve:kf({method:"GET",fullPath:"/v1/events/{id}"}),list:kf({method:"GET",fullPath:"/v1/events",methodType:"list"})}),Tf=_.method,HA=_.extend({retrieve:Tf({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:Tf({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),jo=_.method,ZA=_.extend({create:jo({method:"POST",fullPath:"/v1/file_links"}),retrieve:jo({method:"GET",fullPath:"/v1/file_links/{link}"}),update:jo({method:"POST",fullPath:"/v1/file_links/{link}"}),list:jo({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),YA=(t,e,r)=>{const s=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${s}`;const n=new TextEncoder;let o=new Uint8Array(0);const a=n.encode(`\r
`);function l(d){const h=o,f=d instanceof Uint8Array?d:new Uint8Array(n.encode(d));o=new Uint8Array(h.length+f.length+2),o.set(h),o.set(f,h.length),o.set(a,o.length-2)}function c(d){return`"${d.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}const u=H2(e);for(const d in u){const h=u[d];if(l(`--${s}`),Object.prototype.hasOwnProperty.call(h,"data")){const f=h;l(`Content-Disposition: form-data; name=${c(d)}; filename=${c(f.name||"blob")}`),l(`Content-Type: ${f.type||"application/octet-stream"}`),l(""),l(f.data)}else l(`Content-Disposition: form-data; name=${c(d)}`),l(""),l(h)}return l(`--${s}--`),o};function KA(t,e,r,s){if(e=e||{},t!=="POST")return s(null,Na(e));this._stripe._platformFunctions.tryBufferData(e).then(n=>{const o=YA(t,n,r);return s(null,o)}).catch(n=>s(n,null))}const El=_.method,JA=_.extend({create:El({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:El({method:"GET",fullPath:"/v1/files/{file}"}),list:El({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:KA}),Dn=_.method,QA=_.extend({create:Dn({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:Dn({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:Dn({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:Dn({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:Dn({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),Ue=_.method,XA=_.extend({create:Ue({method:"POST",fullPath:"/v1/invoices"}),retrieve:Ue({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:Ue({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:Ue({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:Ue({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),finalizeInvoice:Ue({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:Ue({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:Ue({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:Ue({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:Ue({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),retrieveUpcoming:Ue({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:Ue({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:Ue({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLineItem:Ue({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:Ue({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),eO=_.method,tO=_.extend({retrieve:eO({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),Pf=_.method,Nl="connect.stripe.com",rO=_.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let r="oauth/authorize";return e.express&&(r=`express/${r}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${Nl}/${r}?${Na(t)}`},token:Pf({method:"POST",path:"oauth/token",host:Nl}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),Pf({method:"POST",path:"oauth/deauthorize",host:Nl}).apply(this,[t,...e])}}),ct=_.method,sO=_.extend({create:ct({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:ct({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:ct({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:ct({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:ct({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:ct({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:ct({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:ct({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:ct({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:ct({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:ct({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),Ln=_.method,nO=_.extend({create:Ln({method:"POST",fullPath:"/v1/payment_links"}),retrieve:Ln({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:Ln({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:Ln({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:Ln({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),So=_.method,iO=_.extend({create:So({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:So({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:So({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:So({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),Fn=_.method,oO=_.extend({create:Fn({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:Fn({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:Fn({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:Fn({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:Fn({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),ws=_.method,aO=_.extend({create:ws({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:ws({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:ws({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:ws({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:ws({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:ws({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),_s=_.method,lO=_.extend({create:_s({method:"POST",fullPath:"/v1/payouts"}),retrieve:_s({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:_s({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:_s({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:_s({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:_s({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),zn=_.method,cO=_.extend({create:zn({method:"POST",fullPath:"/v1/plans"}),retrieve:zn({method:"GET",fullPath:"/v1/plans/{plan}"}),update:zn({method:"POST",fullPath:"/v1/plans/{plan}"}),list:zn({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:zn({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),Un=_.method,uO=_.extend({create:Un({method:"POST",fullPath:"/v1/prices"}),retrieve:Un({method:"GET",fullPath:"/v1/prices/{price}"}),update:Un({method:"POST",fullPath:"/v1/prices/{price}"}),list:Un({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:Un({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),bt=_.method,dO=_.extend({create:bt({method:"POST",fullPath:"/v1/products"}),retrieve:bt({method:"GET",fullPath:"/v1/products/{id}"}),update:bt({method:"POST",fullPath:"/v1/products/{id}"}),list:bt({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:bt({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:bt({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:bt({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:bt({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:bt({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:bt({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),ko=_.method,hO=_.extend({create:ko({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:ko({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:ko({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:ko({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),xt=_.method,fO=_.extend({create:xt({method:"POST",fullPath:"/v1/quotes"}),retrieve:xt({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:xt({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:xt({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:xt({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:xt({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:xt({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:xt({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:xt({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:xt({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),Bn=_.method,pO=_.extend({create:Bn({method:"POST",fullPath:"/v1/refunds"}),retrieve:Bn({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:Bn({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:Bn({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:Bn({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),Cl=_.method,mO=_.extend({retrieve:Cl({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Cl({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Cl({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),gO=_.method,yO=_.extend({list:gO({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),Ir=_.method,vO=_.extend({create:Ir({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:Ir({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:Ir({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:Ir({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:Ir({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:Ir({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:Ir({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),To=_.method,bO=_.extend({create:To({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:To({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:To({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:To({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),Vn=_.method,xO=_.extend({create:Vn({method:"POST",fullPath:"/v1/sources"}),retrieve:Vn({method:"GET",fullPath:"/v1/sources/{source}"}),update:Vn({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:Vn({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:Vn({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),$r=_.method,wO=_.extend({create:$r({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:$r({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:$r({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:$r({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:$r({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:$r({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:$r({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})}),js=_.method,_O=_.extend({create:js({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:js({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:js({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:js({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:js({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:js({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),Qt=_.method,jO=_.extend({create:Qt({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:Qt({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:Qt({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:Qt({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:Qt({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:Qt({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:Qt({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:Qt({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),Ef=_.method,SO=_.extend({retrieve:Ef({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:Ef({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),Po=_.method,kO=_.extend({create:Po({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:Po({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:Po({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:Po({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),Eo=_.method,TO=_.extend({create:Eo({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Eo({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Eo({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Eo({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),Nf=_.method,PO=_.extend({create:Nf({method:"POST",fullPath:"/v1/tokens"}),retrieve:Nf({method:"GET",fullPath:"/v1/tokens/{token}"})}),qn=_.method,EO=_.extend({create:qn({method:"POST",fullPath:"/v1/topups"}),retrieve:qn({method:"GET",fullPath:"/v1/topups/{topup}"}),update:qn({method:"POST",fullPath:"/v1/topups/{topup}"}),list:qn({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:qn({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),Xt=_.method,NO=_.extend({create:Xt({method:"POST",fullPath:"/v1/transfers"}),retrieve:Xt({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:Xt({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:Xt({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:Xt({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:Xt({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:Xt({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:Xt({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),Gn=_.method,CO=_.extend({create:Gn({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:Gn({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:Gn({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:Gn({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:Gn({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),AO=Ne("apps",{Secrets:aA}),OO=Ne("billing",{MeterEventAdjustments:OC,MeterEvents:IC,Meters:$C}),RO=Ne("billingPortal",{Configurations:pC,Sessions:cA}),IO=Ne("checkout",{Sessions:uA}),$O=Ne("climate",{Orders:MC,Products:qC,Suppliers:fA}),MO=Ne("entitlements",{ActiveEntitlements:aC,Features:TC}),DO=Ne("financialConnections",{Accounts:oC,Sessions:dA,Transactions:vA}),LO=Ne("forwarding",{Requests:iA}),FO=Ne("identity",{VerificationReports:SA,VerificationSessions:kA}),zO=Ne("issuing",{Authorizations:cC,Cardholders:dC,Cards:fC,Disputes:SC,PersonalizationDesigns:BC,PhysicalBundles:VC,Tokens:mA,Transactions:bA}),UO=Ne("radar",{EarlyFraudWarnings:kC,ValueListItems:_A,ValueLists:jA}),BO=Ne("reporting",{ReportRuns:sA,ReportTypes:nA}),VO=Ne("sigma",{ScheduledQueryRuns:oA}),qO=Ne("tax",{Calculations:uC,Registrations:rA,Settings:hA,Transactions:xA}),GO=Ne("terminal",{Configurations:mC,ConnectionTokens:bC,Locations:CC,Readers:HC}),WO=Ne("testHelpers",{ConfirmationTokens:yC,Customers:_C,Refunds:tA,TestClocks:pA,Issuing:Ne("issuing",{Authorizations:lC,Cards:hC,PersonalizationDesigns:UC,Transactions:yA}),Terminal:Ne("terminal",{Readers:WC}),Treasury:Ne("treasury",{InboundTransfers:EC,OutboundPayments:DC,OutboundTransfers:FC,ReceivedCredits:YC,ReceivedDebits:QC})}),HO=Ne("treasury",{CreditReversals:xC,DebitReversals:jC,FinancialAccounts:PC,InboundTransfers:NC,OutboundPayments:LC,OutboundTransfers:zC,ReceivedCredits:KC,ReceivedDebits:XC,TransactionEntries:gA,Transactions:wA}),Al=Object.freeze(Object.defineProperty({__proto__:null,Account:wf,AccountLinks:PA,AccountSessions:NA,Accounts:wf,ApplePayDomains:CA,ApplicationFees:AA,Apps:AO,Balance:RA,BalanceTransactions:IA,Billing:OO,BillingPortal:RO,Charges:$A,Checkout:IO,Climate:$O,ConfirmationTokens:DA,CountrySpecs:LA,Coupons:FA,CreditNotes:zA,CustomerSessions:BA,Customers:VA,Disputes:qA,Entitlements:MO,EphemeralKeys:GA,Events:WA,ExchangeRates:HA,FileLinks:ZA,Files:JA,FinancialConnections:DO,Forwarding:LO,Identity:FO,InvoiceItems:QA,Invoices:XA,Issuing:zO,Mandates:tO,OAuth:rO,PaymentIntents:sO,PaymentLinks:nO,PaymentMethodConfigurations:iO,PaymentMethodDomains:oO,PaymentMethods:aO,Payouts:lO,Plans:cO,Prices:uO,Products:dO,PromotionCodes:hO,Quotes:fO,Radar:UO,Refunds:pO,Reporting:BO,Reviews:mO,SetupAttempts:yO,SetupIntents:vO,ShippingRates:bO,Sigma:VO,Sources:xO,SubscriptionItems:wO,SubscriptionSchedules:_O,Subscriptions:jO,Tax:qO,TaxCodes:SO,TaxIds:kO,TaxRates:TO,Terminal:GO,TestHelpers:WO,Tokens:PO,Topups:EO,Transfers:NO,Treasury:HO,WebhookEndpoints:CO},Symbol.toStringTag,{value:"Module"})),ZO=60;class si{constructor(e,r){this._stripe=e,this._maxBufferedRequestMetric=r}_addHeadersDirectlyToObject(e,r){e.requestId=r["request-id"],e.stripeAccount=e.stripeAccount||r["stripe-account"],e.apiVersion=e.apiVersion||r["stripe-version"],e.idempotencyKey=e.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(e,r,s){const n=Date.now(),o=n-e.request_start_time;return ml({api_version:s["stripe-version"],account:s["stripe-account"],idempotency_key:s["idempotency-key"],method:e.method,path:e.path,status:r,request_id:this._getRequestId(s),elapsed:o,request_start_time:e.request_start_time,request_end_time:n})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,r,s){return n=>{const o=n.getHeaders(),a=()=>{const c=this._makeResponseEvent(e,n.getStatusCode(),o);this._stripe._emitter.emit("response",c),this._recordRequestMetrics(this._getRequestId(o),c.elapsed,r)},l=n.toStream(a);return this._addHeadersDirectlyToObject(l,o),s(null,l)}}_jsonResponseHandler(e,r,s){return n=>{const o=n.getHeaders(),a=this._getRequestId(o),l=n.getStatusCode(),c=this._makeResponseEvent(e,l,o);this._stripe._emitter.emit("response",c),n.toJSON().then(u=>{if(u.error){let d;throw typeof u.error=="string"&&(u.error={type:u.error,message:u.error_description}),u.error.headers=o,u.error.statusCode=l,u.error.requestId=a,l===401?d=new $u(u.error):l===403?d=new ey(u.error):l===429?d=new Mu(u.error):d=We.generate(u.error),d}return u},u=>{throw new Iu({message:"Invalid JSON received from the Stripe API",exception:u,requestId:o["request-id"]})}).then(u=>{this._recordRequestMetrics(a,c.elapsed,r);const d=n.getRawResponse();this._addHeadersDirectlyToObject(d,o),Object.defineProperty(u,"lastResponse",{enumerable:!1,writable:!1,value:d}),s(null,u)},u=>s(u,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,r,s,n){return n&&r===0&&it.CONNECTION_CLOSED_ERROR_CODES.includes(n.code)?!0:r>=s?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,r=null){const s=this._stripe.getInitialNetworkRetryDelay(),n=this._stripe.getMaxNetworkRetryDelay();let o=Math.min(s*Math.pow(e-1,2),n);return o*=.5*(1+Math.random()),o=Math.max(s,o),Number.isInteger(r)&&r<=ZO&&(o=Math.max(o,r)),o*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,r){const s=this._getMaxNetworkRetries(r);return e==="POST"&&s>0?`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`:null}_makeHeaders(e,r,s,n,o,a,l){const c={Authorization:e?`Bearer ${e}`:this._stripe.getApiField("auth"),Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","User-Agent":this._getUserAgentString(),"X-Stripe-Client-User-Agent":n,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":s,"Stripe-Account":this._stripe.getApiField("stripeAccount"),"Idempotency-Key":this._defaultIdempotencyKey(o,l)},u=o=="POST"||o=="PUT"||o=="PATCH";return(u||r)&&(u||na(`${o} method had non-zero contentLength but no payload is expected for this verb`),c["Content-Length"]=r),Object.assign(ml(c),V2(a))}_getUserAgentString(){const e=this._stripe.getConstant("PACKAGE_VERSION"),r=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/v1 NodeBindings/${e} ${r}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){const e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,r,s){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)na("Request metrics buffer is full, dropping telemetry message.");else{const n={request_id:e,request_duration_ms:r};s&&s.length>0&&(n.usage=s),this._stripe._prevRequestMetrics.push(n)}}_request(e,r,s,n,o,a={},l=[],c,u=null){let d;const h=(m,b,y,x,j)=>setTimeout(m,this._getSleepTimeInMS(x,j),b,y,x+1),f=(m,b,y)=>{const x=a.settings&&a.settings.timeout&&Number.isInteger(a.settings.timeout)&&a.settings.timeout>=0?a.settings.timeout:this._stripe.getApiField("timeout"),j=this._stripe.getApiField("httpClient").makeRequest(r||this._stripe.getApiField("host"),this._stripe.getApiField("port"),s,e,b,d,this._stripe.getApiField("protocol"),x),v=Date.now(),w=ml({api_version:m,account:b["Stripe-Account"],idempotency_key:b["Idempotency-Key"],method:e,path:s,request_start_time:v}),E=y||0,O=this._getMaxNetworkRetries(a.settings||{});this._stripe._emitter.emit("request",w),j.then($=>si._shouldRetry($,E,O)?h(f,m,b,E,$.getHeaders()["retry-after"]):a.streaming&&$.getStatusCode()<400?this._streamingResponseHandler(w,l,c)($):this._jsonResponseHandler(w,l,c)($)).catch($=>{if(si._shouldRetry(null,E,O,$))return h(f,m,b,E,null);{const N=$.code&&$.code===it.TIMEOUT_ERROR_CODE;return c(new ty({message:N?`Request aborted due to timeout being reached (${x}ms)`:si._generateConnectionErrorMessage(E),detail:$}))}})},p=(m,b)=>{if(m)return c(m);d=b,this._stripe.getClientUserAgent(y=>{var x,j;const v=this._stripe.getApiField("version"),w=this._makeHeaders(o,d.length,v,y,e,(x=a.headers)!==null&&x!==void 0?x:null,(j=a.settings)!==null&&j!==void 0?j:{});f(v,w,0)})};u?u(e,n,a.headers,p):p(null,Na(n||{}))}}function Cf(t){const e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(u,d,h,f,p,m){try{this.signature.verifyHeader(u,d,h,f||e.DEFAULT_TOLERANCE,p,m)}catch(y){throw y instanceof Kg&&(y.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),y}return u instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(u)):JSON.parse(u)},async constructEventAsync(u,d,h,f,p,m){return await this.signature.verifyHeaderAsync(u,d,h,f||e.DEFAULT_TOLERANCE,p,m),u instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(u)):JSON.parse(u)},generateTestHeaderString:function(u){if(!u)throw new We({message:"Options are required"});return u.timestamp=Math.floor(u.timestamp)||Math.floor(Date.now()/1e3),u.scheme=u.scheme||r.EXPECTED_SCHEME,u.cryptoProvider=u.cryptoProvider||c(),u.signature=u.signature||u.cryptoProvider.computeHMACSignature(u.timestamp+"."+u.payload,u.secret),["t="+u.timestamp,u.scheme+"="+u.signature].join(",")}},r={EXPECTED_SCHEME:"v1",verifyHeader(u,d,h,f,p,m){const{decodedHeader:b,decodedPayload:y,details:x,suspectPayloadType:j}=n(u,d,this.EXPECTED_SCHEME),v=/\s/.test(h);p=p||c();const w=p.computeHMACSignature(s(y,x),h);return o(y,b,x,w,f,j,v,m),!0},async verifyHeaderAsync(u,d,h,f,p,m){const{decodedHeader:b,decodedPayload:y,details:x,suspectPayloadType:j}=n(u,d,this.EXPECTED_SCHEME),v=/\s/.test(h);p=p||c();const w=await p.computeHMACSignatureAsync(s(y,x),h);return o(y,b,x,w,f,j,v,m)}};function s(u,d){return`${d.timestamp}.${u}`}function n(u,d,h){if(!u)throw new tr(d,u,{message:"No webhook payload was provided."});const f=typeof u!="string"&&!(u instanceof Uint8Array),p=new TextDecoder("utf8"),m=u instanceof Uint8Array?p.decode(u):u;if(Array.isArray(d))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(d==null||d=="")throw new tr(d,u,{message:"No stripe-signature header value was provided."});const b=d instanceof Uint8Array?p.decode(d):d,y=a(b,h);if(!y||y.timestamp===-1)throw new tr(b,m,{message:"Unable to extract timestamp and signatures from header"});if(!y.signatures.length)throw new tr(b,m,{message:"No signatures found with expected scheme"});return{decodedPayload:m,decodedHeader:b,details:y,suspectPayloadType:f}}function o(u,d,h,f,p,m,b,y){const x=!!h.signatures.filter(t.secureCompare.bind(t,f)).length,j=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://github.com/stripe/stripe-node#webhook-signing`,v=b?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!x)throw m?new tr(d,u,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+j+`
`+v}):new tr(d,u,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+j+`
`+v});const w=Math.floor((typeof y=="number"?y:Date.now())/1e3)-h.timestamp;if(p>0&&w>p)throw new tr(d,u,{message:"Timestamp outside the tolerance zone"});return!0}function a(u,d){return typeof u!="string"?null:u.split(",").reduce((h,f)=>{const p=f.split("=");return p[0]==="t"&&(h.timestamp=parseInt(p[1],10)),p[0]===d&&h.signatures.push(p[1]),h},{timestamp:-1,signatures:[]})}let l=null;function c(){return l||(l=t.createDefaultCryptoProvider()),l}return e.signature=r,e}const Af="api.stripe.com",Of="443",Rf="/v1/",If=WP,$f=8e4,Mf=2,Df=.5,YO=["name","version","url","partner_id"],Lf=["apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount"],KO=t=>new si(t,_.MAX_BUFFERED_REQUEST_METRICS);function JO(t,e=KO){s.PACKAGE_VERSION="14.25.0",s.USER_AGENT=Object.assign({bindings_version:s.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},Z2()),s.StripeResource=_,s.resources=Al,s.HttpClient=it,s.HttpClientResponse=Zg,s.CryptoProvider=Yg;function r(n=t){return Cf(n)}s.webhooks=Object.assign(r,Cf(t));function s(n,o={}){if(!(this instanceof s))return new s(n,o);const a=this._getPropsFromConfig(o);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=s.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);const l=a.httpAgent||null;this._api={auth:null,host:a.host||Af,port:a.port||Of,protocol:a.protocol||"https",basePath:Rf,version:a.apiVersion||If,timeout:gl("timeout",a.timeout,$f),maxNetworkRetries:gl("maxNetworkRetries",a.maxNetworkRetries,1),agent:l,httpClient:a.httpClient||(l?this._platformFunctions.createNodeHttpClient(l):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:a.stripeAccount||null};const c=a.typescript||!1;c!==s.USER_AGENT.typescript&&(s.USER_AGENT.typescript=c),a.appInfo&&this._setAppInfo(a.appInfo),this._prepResources(),this._setApiKey(n),this.errors=Eh,this.webhooks=r(),this._prevRequestMetrics=[],this._enableTelemetry=a.telemetry!==!1,this._requestSender=e(this),this.StripeResource=s.StripeResource}return s.errors=Eh,s.createNodeHttpClient=t.createNodeHttpClient,s.createFetchHttpClient=t.createFetchHttpClient,s.createNodeCryptoProvider=t.createNodeCryptoProvider,s.createSubtleCryptoProvider=t.createSubtleCryptoProvider,s.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,_setApiKey(n){n&&this._setApiField("auth",`Bearer ${n}`)},_setAppInfo(n){if(n&&typeof n!="object")throw new Error("AppInfo must be an object.");if(n&&!n.name)throw new Error("AppInfo.name is required");n=n||{},this._appInfo=YO.reduce((o,a)=>(typeof n[a]=="string"&&(o=o||{},o[a]=n[a]),o),void 0)},_setApiField(n,o){this._api[n]=o},getApiField(n){return this._api[n]},setClientId(n){this._clientId=n},getClientId(){return this._clientId},getConstant:n=>{switch(n){case"DEFAULT_HOST":return Af;case"DEFAULT_PORT":return Of;case"DEFAULT_BASE_PATH":return Rf;case"DEFAULT_API_VERSION":return If;case"DEFAULT_TIMEOUT":return $f;case"MAX_NETWORK_RETRY_DELAY_SEC":return Mf;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return Df}return s[n]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(n,o,a){const l=gl(n,o,a);this._setApiField(n,l)},getMaxNetworkRetryDelay(){return Mf},getInitialNetworkRetryDelay(){return Df},getClientUserAgent(n){return this.getClientUserAgentSeeded(s.USER_AGENT,n)},getClientUserAgentSeeded(n,o){this._platformFunctions.getUname().then(a=>{var l;const c={};for(const d in n)c[d]=encodeURIComponent((l=n[d])!==null&&l!==void 0?l:"null");c.uname=encodeURIComponent(a||"UNKNOWN");const u=this.getApiField("httpClient");u&&(c.httplib=encodeURIComponent(u.getClientName())),this._appInfo&&(c.application=this._appInfo),o(JSON.stringify(c))})},getAppInfoAsString(){if(!this._appInfo)return"";let n=this._appInfo.name;return this._appInfo.version&&(n+=`/${this._appInfo.version}`),this._appInfo.url&&(n+=` (${this._appInfo.url})`),n},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(const n in Al)this[G2(n)]=new Al[n](this)},_getPropsFromConfig(n){if(!n)return{};const o=typeof n=="string";if(!(n===Object(n)&&!Array.isArray(n))&&!o)throw new Error("Config must either be an object or a string");if(o)return{apiVersion:n};if(Object.keys(n).filter(c=>!Lf.includes(c)).length>0)throw new Error(`Config object may only contain the following: ${Lf.join(", ")}`);return n}},s}const QO=JO(new GP);class XO{constructor(e,r){this.supabase=e,this.stripe=new QO(r,{apiVersion:"2023-10-16"})}async createProductWithStripe(e,r){try{if(!e.name||!e.variants||e.variants.length===0)throw new ps("Product name and at least one variant required");const s=await this.stripe.products.create({name:e.name,description:e.description||void 0,images:e.images||[],metadata:{created_via:"zoroasterverse_admin",created_by:r,product_type:e.product_type}}),{data:n,error:o}=await this.supabase.rpc("create_product_with_variants",{p_product_data:{name:e.name,description:e.description,product_type:e.product_type,category_id:e.category_id,images:e.images||[],track_inventory:e.track_inventory||!1,active:e.active!==!1,work_id:e.work_id,content_grants:e.content_grants||[]},p_variants_data:e.variants});if(o||!n)throw await this.stripe.products.del(s.id),new Te("Failed to create product in database",{supabaseError:o});const a=n.product_id,l=n.variant_ids;await this.supabase.from("products").update({stripe_product_id:s.id}).eq("id",a);const c=await Promise.all(e.variants.map(async(u,d)=>{const h=l[d],f={product:s.id,currency:u.currency||"usd",unit_amount:u.unit_amount,metadata:{supabase_variant_id:h,sku:u.sku||"",variant_name:u.name||"Standard"}};u.recurring_interval&&(f.recurring={interval:u.recurring_interval,interval_count:u.recurring_interval_count||1});const p=await this.stripe.prices.create(f);return await this.supabase.from("product_variants").update({stripe_price_id:p.id}).eq("id",h),{variant_id:h,stripe_price_id:p.id,unit_amount:u.unit_amount}}));return{product_id:a,stripe_product_id:s.id,variants:c}}catch(s){throw console.error("Error creating product with Stripe:",s),s instanceof ps||s instanceof Te?s:new Te("Unexpected error creating product with Stripe")}}async attachStripeProduct(e){try{const r=await this.stripe.products.retrieve(e.stripe_product_id);if(!r)throw new ps("Stripe product not found");const{data:s,error:n}=await this.supabase.from("products").select("*").eq("id",e.product_id).single();if(n||!s)throw new Kt("Product",e.product_id);const{data:o}=await this.supabase.from("products").select("id, name").eq("stripe_product_id",e.stripe_product_id).single();if(o&&o.id!==e.product_id)throw new kn(`Stripe product ${e.stripe_product_id} is already linked to product: ${o.name}`);return await this.supabase.from("products").update({stripe_product_id:e.stripe_product_id,name:r.name,description:r.description||s.description,images:r.images||s.images,active:r.active&&s.active,updated_at:new Date().toISOString()}).eq("id",e.product_id),e.sync_variants&&await this.syncStripeVariants(e.stripe_product_id,e.product_id),{product_id:e.product_id,stripe_product_id:e.stripe_product_id,synced_at:new Date().toISOString()}}catch(r){throw console.error("Error attaching Stripe product:",r),r instanceof ps||r instanceof Kt||r instanceof kn?r:new Te("Unexpected error attaching Stripe product")}}async attachStripePrice(e){var r,s;try{const n=await this.stripe.prices.retrieve(e.stripe_price_id);if(!n)throw new ps("Stripe price not found");const{data:o,error:a}=await this.supabase.from("product_variants").select("*, products!inner(*)").eq("id",e.variant_id).single();if(a||!o)throw new Kt("Product variant",e.variant_id);const{data:l}=await this.supabase.from("product_variants").select("id, name, products!inner(name)").eq("stripe_price_id",e.stripe_price_id).single();if(l&&l.id!==e.variant_id)throw new kn(`Stripe price ${e.stripe_price_id} is already linked to variant: ${l.name} (${l.products.name})`);const c=o.products.stripe_product_id;if(c&&n.product!==c)throw new kn("Stripe price does not belong to the linked Stripe product");return await this.supabase.from("product_variants").update({stripe_price_id:e.stripe_price_id,unit_amount:n.unit_amount||o.unit_amount,currency:n.currency,recurring_interval:((r=n.recurring)==null?void 0:r.interval)||null,recurring_interval_count:((s=n.recurring)==null?void 0:s.interval_count)||null,active:n.active&&o.active,updated_at:new Date().toISOString()}).eq("id",e.variant_id),{variant_id:e.variant_id,stripe_price_id:e.stripe_price_id,unit_amount:n.unit_amount,currency:n.currency,synced_at:new Date().toISOString()}}catch(n){throw console.error("Error attaching Stripe price:",n),n instanceof ps||n instanceof Kt||n instanceof kn?n:new Te("Unexpected error attaching Stripe price")}}async syncStripeVariants(e,r){var s,n;try{const o=await this.stripe.prices.list({product:e,limit:100});for(const a of o.data){const{data:l}=await this.supabase.from("product_variants").select("id").eq("stripe_price_id",a.id).single();if(!l){const c={product_id:r,stripe_price_id:a.id,name:a.nickname||"Standard",currency:a.currency,unit_amount:a.unit_amount||0,recurring_interval:((s=a.recurring)==null?void 0:s.interval)||null,recurring_interval_count:((n=a.recurring)==null?void 0:n.interval_count)||null,active:a.active,is_default:o.data.indexOf(a)===0};await this.supabase.from("product_variants").insert(c)}}}catch(o){throw console.error("Error syncing Stripe variants:",o),o}}async importFromStripe(e={}){try{const{limit:r=100,created_after:s,active_only:n=!0,default_category_id:o}=e,{data:a,error:l}=await this.supabase.from("stripe_sync_logs").insert({sync_type:"products",status:"processing",started_at:new Date().toISOString()}).select("id").single();if(l)throw new Te("Failed to create sync log");let c=0,u=0,d=0;try{const h=await this.stripe.products.list({limit:r,active:n,created:s?{gte:s}:void 0});for(const p of h.data)try{c++,await this.syncProductFromStripe(p,o),u++}catch(m){console.error(`Failed to sync product ${p.id}:`,m),d++}const f=await this.stripe.prices.list({limit:r,active:n,created:s?{gte:s}:void 0,expand:["data.product"]});for(const p of f.data)try{typeof p.product=="object"&&p.product.id&&await this.syncPriceFromStripe(p)}catch(m){console.error(`Failed to sync price ${p.id}:`,m),d++}return await this.supabase.from("stripe_sync_logs").update({status:d>0?"partial":"success",completed_at:new Date().toISOString(),items_processed:c,items_synced:u,items_failed:d,result:{products_imported:h.data.length,prices_imported:f.data.length}}).eq("id",a.id),{products_synced:u,items_failed:d,sync_log_id:a.id}}catch(h){throw await this.supabase.from("stripe_sync_logs").update({status:"error",completed_at:new Date().toISOString(),error_details:h instanceof Error?h.message:"Unknown error",items_processed:c,items_synced:u,items_failed:d}).eq("id",a.id),h}}catch(r){throw console.error("Stripe import error:",r),new Te("Failed to import from Stripe")}}async syncProductFromStripe(e,r){var s;try{const{data:n}=await this.supabase.from("products").select("id").eq("stripe_product_id",e.id).single(),o={name:e.name,description:e.description||null,images:e.images||[],active:e.active,stripe_product_id:e.id,slug:this.generateSlug(e.name),product_type:((s=e.metadata)==null?void 0:s.product_type)||"single_issue"};n?await this.supabase.from("products").update({...o,updated_at:new Date().toISOString()}).eq("id",n.id):await this.supabase.from("products").insert(o)}catch(n){throw console.error(`Error syncing product ${e.id}:`,n),n}}async syncPriceFromStripe(e){var r,s,n;try{const o=typeof e.product=="string"?e.product:(r=e.product)==null?void 0:r.id;if(!o)throw new Error("Price has no associated product");const{data:a}=await this.supabase.from("products").select("id").eq("stripe_product_id",o).single();if(!a){console.warn(`Local product not found for Stripe product ${o}, skipping price sync`);return}const{data:l}=await this.supabase.from("product_variants").select("id").eq("stripe_price_id",e.id).single(),c={product_id:a.id,stripe_price_id:e.id,name:e.nickname||"Standard",currency:e.currency,unit_amount:e.unit_amount||0,recurring_interval:((s=e.recurring)==null?void 0:s.interval)||null,recurring_interval_count:((n=e.recurring)==null?void 0:n.interval_count)||null,active:e.active};l?await this.supabase.from("product_variants").update({...c,updated_at:new Date().toISOString()}).eq("id",l.id):await this.supabase.from("product_variants").insert(c)}catch(o){throw console.error(`Error syncing price ${e.id}:`,o),o}}async updateStripeProduct(e,r){try{const{data:s,error:n}=await this.supabase.from("products").select("stripe_product_id, name, description, images").eq("id",e).single();if(n||!(s!=null&&s.stripe_product_id))throw new Kt("Product or Stripe product ID",e);const o=await this.stripe.products.update(s.stripe_product_id,{name:r.name||s.name,description:r.description||s.description,images:r.images||s.images,...r});return await this.supabase.from("products").update({name:o.name,description:o.description,images:o.images||[],active:o.active,updated_at:new Date().toISOString()}).eq("id",e),o}catch(s){throw console.error("Error updating Stripe product:",s),new Te("Failed to update Stripe product")}}async createNewPrice(e,r){var s,n,o;try{const{data:a,error:l}=await this.supabase.from("product_variants").select(`
          id,
          stripe_price_id,
          products!inner(stripe_product_id, name)
        `).eq("id",e).single();if(l||!((s=a==null?void 0:a.products)!=null&&s.stripe_product_id))throw new Kt("Variant or linked Stripe product",e);const c=await this.stripe.prices.create({...r,product:a.products.stripe_product_id,metadata:{...r.metadata,supabase_variant_id:e,replaced_price_id:a.stripe_price_id}});return a.stripe_price_id&&await this.stripe.prices.update(a.stripe_price_id,{active:!1}),await this.supabase.from("product_variants").update({stripe_price_id:c.id,unit_amount:c.unit_amount||0,currency:c.currency,recurring_interval:((n=c.recurring)==null?void 0:n.interval)||null,recurring_interval_count:((o=c.recurring)==null?void 0:o.interval_count)||null,updated_at:new Date().toISOString()}).eq("id",e),c}catch(a){throw console.error("Error creating new price:",a),new Te("Failed to create new price")}}async getProductCatalog(e={}){try{const{category_id:r,active_only:s=!0,with_variants:n=!0,limit:o=50,offset:a=0}=e;let l=this.supabase.from("products").select("*");s&&(l=l.eq("active",!0));const{data:c,error:u}=await l.order("created_at",{ascending:!1}).range(a,a+o-1);if(u)throw new Te("Failed to fetch product catalog",{supabaseError:u});if(!n||!c||c.length===0)return c||[];const d=c.map(m=>m.id),{data:h,error:f}=await this.supabase.from("product_variants").select("*").in("product_id",d).eq("active",!0).order("is_default",{ascending:!1}).order("unit_amount",{ascending:!0});if(f)throw new Te("Failed to fetch product variants");const p=(h||[]).reduce((m,b)=>(m[b.product_id]||(m[b.product_id]=[]),m[b.product_id].push(b),m),{});return c.map(m=>({...m,variants:p[m.id]||[]}))}catch(r){throw console.error("Error fetching product catalog:",r),r instanceof Te?r:new Te("Unexpected error fetching product catalog")}}async getLowStockAlerts(){try{const{data:e,error:r}=await this.supabase.from("product_variants").select(`
          id, name, sku, inventory_quantity,
          products!inner(id, name, active)
        `).eq("active",!0).eq("products.active",!0).not("inventory_quantity","is",null).lte("inventory_quantity",10);if(r)throw new Te("Failed to fetch low stock alerts");return e||[]}catch(e){throw console.error("Error getting low stock alerts:",e),new Te("Failed to get low stock alerts")}}async updateInventory(e,r,s,n,o,a){try{const{data:l,error:c}=await this.supabase.rpc("update_inventory",{p_variant_id:e,p_quantity_change:r,p_movement_type:r>0?"in":"out",p_reason:s,p_reference_type:n,p_reference_id:o,p_user_id:a});if(c)throw new Te("Failed to update inventory",{supabaseError:c});return l}catch(l){throw console.error("Error updating inventory:",l),l instanceof Te?l:new Te("Unexpected error updating inventory")}}async getInventoryMovements(e,r=50){try{const{data:s,error:n}=await this.supabase.from("inventory_movements").select(`
          *,
          created_by_profile:profiles!created_by(username, display_name)
        `).eq("variant_id",e).order("created_at",{ascending:!1}).limit(r);if(n)throw new Te("Failed to fetch inventory movements");return s||[]}catch(s){throw console.error("Error fetching inventory movements:",s),new Te("Failed to fetch inventory movements")}}generateSlug(e){return e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}async validateStripeIntegration(e){var r;try{const{data:s,error:n}=await this.supabase.from("products").select(`
          id, name, stripe_product_id,
          product_variants(id, name, stripe_price_id, active)
        `).eq("id",e).single();if(n||!s)throw new Kt("Product",e);const o=[];s.stripe_product_id||o.push("Product not linked to Stripe product");const a=((r=s.product_variants)==null?void 0:r.filter(c=>c.active))||[],l=a.filter(c=>!c.stripe_price_id);if(l.length>0&&o.push(`${l.length} active variants missing Stripe price IDs`),s.stripe_product_id)try{await this.stripe.products.retrieve(s.stripe_product_id)}catch{o.push("Linked Stripe product not found")}return{is_valid:o.length===0,issues:o,product_name:s.name,stripe_product_id:s.stripe_product_id,variants_count:a.length,mapped_variants:a.length-l.length}}catch(s){throw console.error("Error validating Stripe integration:",s),s instanceof Kt?s:new Te("Failed to validate Stripe integration")}}}const eR=()=>{const[t,e]=g.useState("login"),[r,s]=g.useState(null),[n,o]=g.useState(!1),[a,l]=g.useState(""),[c,u]=g.useState(""),[d,h]=g.useState(""),[f,p]=g.useState(""),[m,b]=g.useState(""),[y,x]=g.useState(""),[j,v]=g.useState(null),w=Ni(),E=(k,R="info")=>{s({text:k,type:R});const T=setTimeout(()=>s(null),6e3);return()=>clearTimeout(T)},O=async k=>{if(k.preventDefault(),!a||!c){E("Please enter both email and password","error");return}o(!0);try{const{error:R}=await pe.auth.signInWithPassword({email:a,password:c});if(R)throw R;E("Login successful! Redirecting...","success"),w("/")}catch(R){const T=R instanceof Error?R.message:"Failed to sign in";E(T,"error")}finally{o(!1)}},$=async k=>{if(k.preventDefault(),f!==y){E("Passwords do not match","error");return}o(!0);try{const{error:R}=await pe.auth.signUp({email:d,password:f,options:{data:{display_name:m}}});if(R)throw R;E("Account created! Please check your email to confirm your account.","success"),e("login")}catch(R){R instanceof Error&&R.message}finally{o(!1)}},N=k=>{if(!k){v(null);return}let R=0;k.length>=8&&R++,/[A-Z]/.test(k)&&R++,/[a-z]/.test(k)&&R++,/[0-9]/.test(k)&&R++,/[^A-Za-z0-9]/.test(k)&&R++,k.length>=12&&R++;const T=[{text:"Weak",className:"weak"},{text:"Fair",className:"fair"},{text:"Good",className:"good"},{text:"Strong",className:"strong"},{text:"Very Strong",className:"very-strong"}],M=Math.min(R,T.length-1);v(T[M])};return i.jsx("div",{className:"auth-page",children:i.jsxs("div",{className:"auth-container",children:[i.jsxs("div",{className:"auth-header",children:[i.jsx("h1",{children:"Zoroasterverse"}),i.jsx("p",{children:"Join our community of readers and writers"})]}),r&&i.jsx("div",{className:`message ${r.type}`,children:r.text}),i.jsxs("div",{className:"tabs",children:[i.jsx("button",{className:`tab ${t==="login"?"active":""}`,onClick:()=>e("login"),type:"button",children:"Sign In"}),i.jsx("button",{className:`tab ${t==="signup"?"active":""}`,onClick:()=>e("signup"),type:"button",children:"Create Account"})]}),t==="login"&&i.jsxs("form",{onSubmit:O,className:"auth-form",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"loginEmail",children:"Email Address"}),i.jsx("input",{type:"email",id:"loginEmail",value:a,onChange:k=>l(k.target.value),placeholder:"your@email.com",required:!0,disabled:n})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"loginPassword",children:"Password"}),i.jsx("input",{type:"password",id:"loginPassword",value:c,onChange:k=>u(k.target.value),placeholder:"Enter your password",required:!0,disabled:n})]}),i.jsx("button",{type:"submit",className:"btn primary",disabled:n,children:n?"Signing in...":"Sign In"}),i.jsx("div",{className:"form-footer",children:i.jsx(vr,{to:"/forgot-password",children:"Forgot your password?"})})]}),t==="signup"&&i.jsxs("form",{onSubmit:$,className:"auth-form",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"signupDisplayName",children:"Display Name"}),i.jsx("input",{type:"text",id:"signupDisplayName",value:m,onChange:k=>b(k.target.value),placeholder:"Your name",required:!0,disabled:n})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"signupEmail",children:"Email Address"}),i.jsx("input",{type:"email",id:"signupEmail",value:d,onChange:k=>h(k.target.value),placeholder:"your@email.com",required:!0,disabled:n})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"signupPassword",children:"Password"}),i.jsx("input",{type:"password",id:"signupPassword",value:f,onChange:k=>{p(k.target.value),N(k.target.value)},placeholder:"Create a password",required:!0,disabled:n}),j&&i.jsxs("div",{className:`password-strength ${j.className}`,children:["Password strength: ",j.text]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),i.jsx("input",{type:"password",id:"confirmPassword",value:y,onChange:k=>x(k.target.value),placeholder:"Confirm your password",required:!0,disabled:n})]}),i.jsx("button",{type:"submit",className:"btn primary",disabled:n,children:n?"Creating account...":"Create Account"})]}),i.jsx("div",{className:"auth-divider",children:"or continue with"}),i.jsxs("div",{className:"social-logins",children:[i.jsx("button",{className:"btn social",onClick:()=>E("Google sign-in will be available soon","info"),disabled:n,children:"Google"}),i.jsx("button",{className:"btn social",onClick:()=>E("GitHub sign-in will be available soon","info"),disabled:n,children:"GitHub"})]}),i.jsx("div",{className:"auth-footer",children:"By signing up, you agree to our terms of service and privacy policy."})]})})},tR=()=>{const[t,e]=g.useState([]),[r,s]=g.useState(!0),[n,o]=g.useState(null),[a,l]=g.useState(""),[c,u]=g.useState("all"),[d,h]=g.useState(!1),[f,p]=g.useState(null),[m,b]=g.useState({name:"",title:"",description:"",product_type:"book",cover_image_url:"",active:!0,status:"draft"}),[y,x]=g.useState({amount:"",currency:"USD",interval:"",nickname:"",trial_period_days:0}),j=async()=>{try{s(!0);const T=await fetch("/api/products?include_prices=true");if(!T.ok)throw new Error("Failed to fetch products");const M=await T.json();e(M.products||[])}catch(T){o(T instanceof Error?T.message:"Failed to fetch products")}finally{s(!1)}};g.useEffect(()=>{j()},[]);const v=t.filter(T=>{const M=T.name.toLowerCase().includes(a.toLowerCase())||T.title.toLowerCase().includes(a.toLowerCase()),J=c==="all"||T.product_type===c;return M&&J}),w=async T=>{T.preventDefault();try{const M=f?`/api/products/${f.id}`:"/api/products",F=await fetch(M,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!F.ok){const C=await F.json();throw new Error(C.message||"Failed to save product")}await j(),$(),h(!1)}catch(M){o(M instanceof Error?M.message:"Failed to save product")}},E=async T=>{if(confirm(`Are you sure you want to delete "${T.name}"? This will deactivate it in Stripe but not permanently delete it.`))try{if(!(await fetch(`/api/products/${T.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete product");await j()}catch(M){o(M instanceof Error?M.message:"Failed to delete product")}},O=async T=>{try{if(!(await fetch(`/api/products/${T.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!T.active})})).ok)throw new Error("Failed to update product");await j()}catch(M){o(M instanceof Error?M.message:"Failed to update product")}},$=()=>{b({name:"",title:"",description:"",product_type:"book",cover_image_url:"",active:!0,status:"draft"}),p(null)},N=T=>{p(T),b({name:T.name,title:T.title,description:T.description,product_type:T.product_type,cover_image_url:T.cover_image_url||"",active:T.active,status:T.status}),h(!0)},k=T=>{switch(T){case"book":return i.jsx(fr,{className:"w-4 h-4"});case"subscription":return i.jsx(ss,{className:"w-4 h-4"});case"bundle":return i.jsx(Qr,{className:"w-4 h-4"});default:return i.jsx(br,{className:"w-4 h-4"})}},R=(T,M)=>new Intl.NumberFormat("en-US",{style:"currency",currency:M.toUpperCase()}).format(T/100);return r?i.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[i.jsx(Pt,{className:"w-8 h-8 animate-spin text-primary"}),i.jsx("span",{className:"ml-3 text-lg",children:"Loading products..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[i.jsx(Qr,{className:"w-8 h-8 text-primary"}),"Product Management"]}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your books, subscriptions, and bundles with integrated Stripe pricing"})]}),i.jsxs("button",{onClick:()=>{$(),h(!0)},className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[i.jsx(hi,{className:"w-5 h-5"}),"Add Product"]})]}),n&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3",children:[i.jsx(di,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsx("span",{className:"text-red-700 dark:text-red-400",children:n}),i.jsx("button",{onClick:()=>o(null),className:"ml-auto text-red-500 hover:text-red-600",children:i.jsx(gr,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(pn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search products...",value:a,onChange:T=>l(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),i.jsxs("div",{className:"relative",children:[i.jsx($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),i.jsxs("select",{value:c,onChange:T=>u(T.target.value),className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"all",children:"All Types"}),i.jsx("option",{value:"book",children:"Books"}),i.jsx("option",{value:"subscription",children:"Subscriptions"}),i.jsx("option",{value:"bundle",children:"Bundles"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(T=>i.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-lg transition-shadow",children:[i.jsx("div",{className:"aspect-[3/4] bg-gray-100 dark:bg-gray-800 rounded-lg mb-4 overflow-hidden",children:T.cover_image_url?i.jsx("img",{src:T.cover_image_url,alt:T.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:k(T.product_type)})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-foreground line-clamp-2",children:T.title}),i.jsxs("p",{className:"text-sm text-muted-foreground capitalize flex items-center gap-2 mt-1",children:[k(T.product_type),T.product_type]})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:()=>O(T),className:`p-1.5 rounded-lg transition-colors ${T.active?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,title:T.active?"Active":"Inactive",children:T.active?i.jsx(ns,{className:"w-4 h-4"}):i.jsx(gg,{className:"w-4 h-4"})})})]}),i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:T.description||"No description available"}),i.jsxs("div",{className:"space-y-2",children:[T.prices&&T.prices.length>0?T.prices.slice(0,2).map(M=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:[M.nickname||"Standard",M.interval&&` (${M.interval}ly)`]}),i.jsx("span",{className:"font-medium text-foreground",children:R(M.amount_cents,M.currency)})]},M.id)):i.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No prices set"}),T.prices&&T.prices.length>2&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",T.prices.length-2," more prices"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T.status==="published"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":T.status==="draft"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:T.status}),i.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(T.updated_at).toLocaleDateString()})]}),i.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[i.jsxs("button",{onClick:()=>N(T),className:"text-primary hover:text-primary-dark flex items-center gap-2 text-sm font-medium",children:[i.jsx(Mo,{className:"w-4 h-4"}),"Edit"]}),i.jsxs("button",{onClick:()=>E(T),className:"text-red-500 hover:text-red-600 flex items-center gap-2 text-sm font-medium",children:[i.jsx(_u,{className:"w-4 h-4"}),"Delete"]})]})]})]},T.id))}),v.length===0&&!r&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Qr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No products found"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:a||c!=="all"?"Try adjusting your search or filters":"Get started by creating your first product"}),i.jsx("button",{onClick:()=>{$(),h(!0)},className:"bg-primary text-white px-6 py-2 rounded-xl font-medium hover:bg-primary-dark transition-colors",children:"Create Product"})]}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-background rounded-xl shadow-xl border border-border max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[i.jsx("h2",{className:"text-xl font-semibold text-foreground",children:f?"Edit Product":"Create Product"}),i.jsx("button",{onClick:()=>{h(!1),$()},className:"text-muted-foreground hover:text-foreground",children:i.jsx(gr,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Product Name *"}),i.jsx("input",{type:"text",required:!0,value:m.name,onChange:T=>b({...m,name:T.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"Internal product name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Display Title *"}),i.jsx("input",{type:"text",required:!0,value:m.title,onChange:T=>b({...m,title:T.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"Public display title"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description"}),i.jsx("textarea",{value:m.description,onChange:T=>b({...m,description:T.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"Product description..."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Product Type"}),i.jsxs("select",{value:m.product_type,onChange:T=>b({...m,product_type:T.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"book",children:"Book (One-time purchase)"}),i.jsx("option",{value:"subscription",children:"Subscription"}),i.jsx("option",{value:"bundle",children:"Bundle"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Status"}),i.jsxs("select",{value:m.status,onChange:T=>b({...m,status:T.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"archived",children:"Archived"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Cover Image URL"}),i.jsx("input",{type:"url",value:m.cover_image_url,onChange:T=>b({...m,cover_image_url:T.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"https://example.com/cover.jpg"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"active",checked:m.active,onChange:T=>b({...m,active:T.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),i.jsx("label",{htmlFor:"active",className:"ml-2 text-sm font-medium text-foreground",children:"Product is active (visible to customers)"})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-border",children:[i.jsx("button",{type:"button",onClick:()=>{h(!1),$()},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium",children:"Cancel"}),i.jsxs("button",{type:"submit",className:"bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[i.jsx(vg,{className:"w-4 h-4"}),f?"Update Product":"Create Product"]})]})]})]})})]})},rR=()=>{const[t,e]=g.useState("orders"),[r,s]=g.useState([]),[n,o]=g.useState([]),[a,l]=g.useState(!0),[c,u]=g.useState(null),[d,h]=g.useState(""),[f,p]=g.useState("all"),[m,b]=g.useState("all"),[y,x]=g.useState(null),[j,v]=g.useState(null),w=async()=>{try{const C=await fetch("/api/admin/orders?include_details=true");if(!C.ok)throw new Error("Failed to fetch orders");const L=await C.json();s(L.orders||[])}catch(C){u(C instanceof Error?C.message:"Failed to fetch orders")}},E=async()=>{try{const C=await fetch("/api/admin/subscriptions?include_details=true");if(!C.ok)throw new Error("Failed to fetch subscriptions");const L=await C.json();o(L.subscriptions||[])}catch(C){u(C instanceof Error?C.message:"Failed to fetch subscriptions")}},O=async()=>{try{l(!0),u(null),await Promise.all([w(),E()])}catch{u("Failed to fetch data")}finally{l(!1)}};g.useEffect(()=>{O()},[]);const $=r.filter(C=>{var V,H,se,le,I;const L=C.id.toLowerCase().includes(d.toLowerCase())||((V=C.customer_email)==null?void 0:V.toLowerCase().includes(d.toLowerCase()))||((se=(H=C.user)==null?void 0:H.email)==null?void 0:se.toLowerCase().includes(d.toLowerCase()))||((I=(le=C.product)==null?void 0:le.title)==null?void 0:I.toLowerCase().includes(d.toLowerCase())),z=f==="all"||C.status===f;return L&&z}),N=n.filter(C=>{var V,H;const L=C.id.toLowerCase().includes(d.toLowerCase())||C.provider_subscription_id.toLowerCase().includes(d.toLowerCase())||((H=(V=C.user)==null?void 0:V.email)==null?void 0:H.toLowerCase().includes(d.toLowerCase())),z=m==="all"||C.status===m;return L&&z}),k=(C,L="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:L.toUpperCase()}).format(C/100),R=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=C=>{switch(C){case"completed":return{color:"text-green-600",bg:"bg-green-100 dark:bg-green-900/20",icon:rs};case"pending":return{color:"text-yellow-600",bg:"bg-yellow-100 dark:bg-yellow-900/20",icon:pr};case"failed":return{color:"text-red-600",bg:"bg-red-100 dark:bg-red-900/20",icon:Qi};case"cancelled":return{color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-900/20",icon:Qi};case"expired":return{color:"text-orange-600",bg:"bg-orange-100 dark:bg-orange-900/20",icon:Do};default:return{color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-900/20",icon:pr}}},M=C=>{switch(C){case"active":return{color:"text-green-600",bg:"bg-green-100 dark:bg-green-900/20",icon:rs};case"trialing":return{color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/20",icon:pr};case"past_due":return{color:"text-orange-600",bg:"bg-orange-100 dark:bg-orange-900/20",icon:Do};case"canceled":return{color:"text-red-600",bg:"bg-red-100 dark:bg-red-900/20",icon:Qi};default:return{color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-900/20",icon:pr}}},J=async C=>{if(confirm("Are you sure you want to issue a refund for this order?"))try{if(!(await fetch(`/api/admin/orders/${C}/refund`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to process refund");await w(),x(null)}catch(L){u(L instanceof Error?L.message:"Failed to process refund")}},F=async C=>{if(confirm("Are you sure you want to cancel this subscription?"))try{if(!(await fetch(`/api/admin/subscriptions/${C}/cancel`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to cancel subscription");await E(),v(null)}catch(L){u(L instanceof Error?L.message:"Failed to cancel subscription")}};return a?i.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[i.jsx(Pt,{className:"w-8 h-8 animate-spin text-primary"}),i.jsx("span",{className:"ml-3 text-lg",children:"Loading orders and subscriptions..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[i.jsx(fi,{className:"w-8 h-8 text-primary"}),"Order Management"]}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"Track and manage customer orders, subscriptions, and payments"})]}),i.jsxs("button",{onClick:O,className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[i.jsx(Pt,{className:"w-5 h-5"}),"Refresh"]})]}),c&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3",children:[i.jsx(Do,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsx("span",{className:"text-red-700 dark:text-red-400",children:c})]}),i.jsx("div",{className:"border-b border-border",children:i.jsxs("nav",{className:"-mb-px flex space-x-8",children:[i.jsxs("button",{onClick:()=>e("orders"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="orders"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Orders (",r.length,")"]}),i.jsxs("button",{onClick:()=>e("subscriptions"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="subscriptions"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Subscriptions (",n.length,")"]})]})}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(pn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),i.jsx("input",{type:"text",placeholder:`Search ${t}...`,value:d,onChange:C=>h(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),i.jsxs("div",{className:"relative",children:[i.jsx($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),i.jsxs("select",{value:t==="orders"?f:m,onChange:C=>{t==="orders"?p(C.target.value):b(C.target.value)},className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"all",children:"All Status"}),t==="orders"?i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"failed",children:"Failed"}),i.jsx("option",{value:"cancelled",children:"Cancelled"}),i.jsx("option",{value:"expired",children:"Expired"})]}):i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"trialing",children:"Trialing"}),i.jsx("option",{value:"past_due",children:"Past Due"}),i.jsx("option",{value:"canceled",children:"Canceled"})]})]})]})]}),t==="orders"&&i.jsx("div",{className:"space-y-4",children:$.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(fi,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No orders found"}),i.jsx("p",{className:"text-muted-foreground",children:d||f!=="all"?"Try adjusting your search or filters":"Orders will appear here when customers make purchases"})]}):i.jsx("div",{className:"grid gap-4",children:$.map(C=>{var V,H;const L=T(C.status),z=L.icon;return i.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-md transition-shadow",children:i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{className:"flex-1 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Order #",C.id.slice(-8)]}),i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.bg} ${L.color}`,children:[i.jsx(z,{className:"w-3 h-3 mr-1"}),C.status]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-lg font-bold text-foreground",children:k(C.amount_cents,C.currency)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:R(C.created_at)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(en,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{className:"text-foreground",children:C.customer_email||((V=C.user)==null?void 0:V.email)||"No email"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Qr,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{className:"text-foreground",children:((H=C.product)==null?void 0:H.title)||"Unknown Product"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(th,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{className:"text-foreground capitalize",children:[C.provider," Payment"]})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>x(C),className:"text-primary hover:text-primary-dark flex items-center gap-2 text-sm font-medium",children:[i.jsx(ns,{className:"w-4 h-4"}),"View Details"]}),C.status==="completed"&&i.jsxs("button",{onClick:()=>J(C.id),className:"text-orange-600 hover:text-orange-700 flex items-center gap-2 text-sm font-medium",children:[i.jsx(wu,{className:"w-4 h-4"}),"Refund"]})]}),C.provider_payment_intent_id&&i.jsxs("button",{onClick:()=>window.open(`https://dashboard.stripe.com/payments/${C.provider_payment_intent_id}`,"_blank"),className:"text-muted-foreground hover:text-foreground flex items-center gap-2 text-sm",children:[i.jsx(rh,{className:"w-4 h-4"}),"View in Stripe"]})]})]})})},C.id)})})}),t==="subscriptions"&&i.jsx("div",{className:"space-y-4",children:N.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ss,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No subscriptions found"}),i.jsx("p",{className:"text-muted-foreground",children:d||m!=="all"?"Try adjusting your search or filters":"Subscriptions will appear here when customers subscribe"})]}):i.jsx("div",{className:"grid gap-4",children:N.map(C=>{var V,H;const L=M(C.status),z=L.icon;return i.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-md transition-shadow",children:i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{className:"flex-1 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("h3",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[i.jsx(ss,{className:"w-5 h-5 text-primary"}),"Subscription #",C.id.slice(-8)]}),i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.bg} ${L.color}`,children:[i.jsx(z,{className:"w-3 h-3 mr-1"}),C.status]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created ",R(C.created_at)]}),C.current_period_end&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Next billing: ",R(C.current_period_end)]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(en,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{className:"text-foreground",children:((V=C.user)==null?void 0:V.email)||"No email"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(xu,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{className:"text-foreground",children:[((H=C.plan)==null?void 0:H.interval)||"Unknown"," billing"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(th,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("span",{className:"text-foreground capitalize",children:[C.provider," Subscription"]})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>v(C),className:"text-primary hover:text-primary-dark flex items-center gap-2 text-sm font-medium",children:[i.jsx(ns,{className:"w-4 h-4"}),"View Details"]}),C.status==="active"&&!C.cancel_at_period_end&&i.jsxs("button",{onClick:()=>F(C.id),className:"text-red-600 hover:text-red-700 flex items-center gap-2 text-sm font-medium",children:[i.jsx(Qi,{className:"w-4 h-4"}),"Cancel"]})]}),C.provider_subscription_id&&i.jsxs("button",{onClick:()=>window.open(`https://dashboard.stripe.com/subscriptions/${C.provider_subscription_id}`,"_blank"),className:"text-muted-foreground hover:text-foreground flex items-center gap-2 text-sm",children:[i.jsx(rh,{className:"w-4 h-4"}),"View in Stripe"]})]})]})})},C.id)})})})]})},sR=()=>{const[t,e]=g.useState([]),[r,s]=g.useState(null),[n,o]=g.useState(!0),[a,l]=g.useState(null),[c,u]=g.useState(""),[d,h]=g.useState("all"),[f,p]=g.useState("sales"),[m,b]=g.useState("desc"),y=async()=>{try{const k=await fetch("/api/admin/inventory");if(!k.ok)throw new Error("Failed to fetch inventory data");const R=await k.json();e(R.inventory||[])}catch(k){l(k instanceof Error?k.message:"Failed to fetch inventory")}},x=async()=>{try{const k=await fetch("/api/admin/metrics");if(!k.ok)throw new Error("Failed to fetch metrics");const R=await k.json();s(R.metrics)}catch(k){l(k instanceof Error?k.message:"Failed to fetch metrics")}},j=async()=>{try{o(!0),l(null),await Promise.all([y(),x()])}catch{l("Failed to fetch data")}finally{o(!1)}};g.useEffect(()=>{j()},[]);const v=t.filter(k=>{const R=k.product.name.toLowerCase().includes(c.toLowerCase())||k.product.title.toLowerCase().includes(c.toLowerCase()),T=d==="all"||k.product.product_type===d;return R&&T}).sort((k,R)=>{let T,M;switch(f){case"name":T=k.product.title.toLowerCase(),M=R.product.title.toLowerCase();break;case"sales":T=k.total_sales,M=R.total_sales;break;case"revenue":T=k.revenue,M=R.revenue;break;case"recent_activity":T=k.last_sale?new Date(k.last_sale).getTime():0,M=R.last_sale?new Date(R.last_sale).getTime():0;break;default:T=k.total_sales,M=R.total_sales}return m==="asc"?T>M?1:-1:T<M?1:-1}),w=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(k),E=k=>`${k>=0?"+":""}${k.toFixed(1)}%`,O=k=>new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),$=k=>{switch(k){case"book":return i.jsx(fr,{className:"w-4 h-4"});case"subscription":return i.jsx(ss,{className:"w-4 h-4"});case"bundle":return i.jsx(Xi,{className:"w-4 h-4"});default:return i.jsx(br,{className:"w-4 h-4"})}},N=(k,R)=>{const T=R>0?(k-R)/R*100:0;return T>10?{icon:Ps,color:"text-green-600",bg:"bg-green-100"}:T<-10?{icon:eo,color:"text-red-600",bg:"bg-red-100"}:{icon:$o,color:"text-yellow-600",bg:"bg-yellow-100"}};return n?i.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[i.jsx(Pt,{className:"w-8 h-8 animate-spin text-primary"}),i.jsx("span",{className:"ml-3 text-lg",children:"Loading inventory data..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[i.jsx(Xi,{className:"w-8 h-8 text-primary"}),"Inventory Management"]}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"Track digital product performance, sales analytics, and inventory metrics"})]}),i.jsxs("button",{onClick:j,className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[i.jsx(Pt,{className:"w-5 h-5"}),"Refresh Data"]})]}),a&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3",children:[i.jsx(Do,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsx("span",{className:"text-red-700 dark:text-red-400",children:a})]}),r&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),i.jsx("p",{className:"text-2xl font-bold text-foreground",children:w(r.total_revenue)}),i.jsxs("p",{className:`text-sm flex items-center gap-1 mt-1 ${r.revenue_growth>=0?"text-green-600":"text-red-600"}`,children:[r.revenue_growth>=0?i.jsx(Ps,{className:"w-4 h-4"}):i.jsx(eo,{className:"w-4 h-4"}),E(r.revenue_growth)," this month"]})]}),i.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:i.jsx(wu,{className:"w-6 h-6 text-green-600"})})]})}),i.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Sales"}),i.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.total_sales.toLocaleString()}),i.jsxs("p",{className:`text-sm flex items-center gap-1 mt-1 ${r.sales_growth>=0?"text-green-600":"text-red-600"}`,children:[r.sales_growth>=0?i.jsx(Ps,{className:"w-4 h-4"}):i.jsx(eo,{className:"w-4 h-4"}),E(r.sales_growth)," this month"]})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:i.jsx($o,{className:"w-6 h-6 text-blue-600"})})]})}),i.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Subscriptions"}),i.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.active_subscriptions.toLocaleString()}),i.jsxs("p",{className:`text-sm flex items-center gap-1 mt-1 ${r.subscription_growth>=0?"text-green-600":"text-red-600"}`,children:[r.subscription_growth>=0?i.jsx(Ps,{className:"w-4 h-4"}):i.jsx(eo,{className:"w-4 h-4"}),E(r.subscription_growth)," this month"]})]}),i.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:i.jsx(ss,{className:"w-6 h-6 text-purple-600"})})]})}),i.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Products"}),i.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.total_products}),i.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[r.total_books," books, ",r.total_subscriptions," subscriptions"]})]}),i.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:i.jsx(Xi,{className:"w-6 h-6 text-orange-600"})})]})})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(pn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:k=>u(k.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),i.jsxs("select",{value:d,onChange:k=>h(k.target.value),className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"all",children:"All Types"}),i.jsx("option",{value:"book",children:"Books"}),i.jsx("option",{value:"subscription",children:"Subscriptions"}),i.jsx("option",{value:"bundle",children:"Bundles"})]})]}),i.jsxs("select",{value:`${f}-${m}`,onChange:k=>{const[R,T]=k.target.value.split("-");p(R),b(T)},className:"px-3 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"sales-desc",children:"Sales (High to Low)"}),i.jsx("option",{value:"sales-asc",children:"Sales (Low to High)"}),i.jsx("option",{value:"revenue-desc",children:"Revenue (High to Low)"}),i.jsx("option",{value:"revenue-asc",children:"Revenue (Low to High)"}),i.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),i.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),i.jsx("option",{value:"recent_activity-desc",children:"Most Recent Activity"})]})]})]}),i.jsx("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-muted/50 border-b border-border",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Product"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Type"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total Sales"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Recent Sales (30d)"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Revenue"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Performance"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Last Sale"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-border",children:v.length===0?i.jsx("tr",{children:i.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[i.jsx(Xi,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-1",children:"No products found"}),i.jsx("p",{className:"text-muted-foreground",children:c||d!=="all"?"Try adjusting your search or filters":"Products will appear here once they have sales data"})]})}):v.map(k=>{const R=N(k.recent_sales,k.total_sales-k.recent_sales),T=R.icon;return i.jsxs("tr",{className:"hover:bg-muted/30",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"flex items-center",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-foreground",children:k.product.title}),i.jsx("div",{className:"text-sm text-muted-foreground",children:k.product.name})]})})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[$(k.product.product_type),i.jsx("span",{className:"text-sm text-foreground capitalize",children:k.product.product_type})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"text-sm font-medium text-foreground",children:k.total_sales.toLocaleString()})}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("div",{className:"text-sm font-medium text-foreground",children:k.recent_sales.toLocaleString()}),k.downloads&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:[k.downloads.toLocaleString()," downloads"]})]}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("div",{className:"text-sm font-medium text-foreground",children:w(k.revenue)}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[w(k.revenue_recent)," recent"]})]}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.bg} ${R.color}`,children:[i.jsx(T,{className:"w-3 h-3 mr-1"}),k.recent_sales>k.total_sales-k.recent_sales?"Growing":k.recent_sales<(k.total_sales-k.recent_sales)/2?"Declining":"Stable"]}),k.active_subscriptions!==void 0&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[k.active_subscriptions," active subs"]})]}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"text-sm text-foreground",children:k.last_sale?O(k.last_sale):"Never"})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"text-primary hover:text-primary-dark p-1",children:i.jsx(ns,{className:"w-4 h-4"})}),i.jsx("button",{className:"text-muted-foreground hover:text-foreground p-1",children:i.jsx($o,{className:"w-4 h-4"})})]})})]},k.id)})})]})})})]})},nR=()=>{const[t,e]=g.useState([]),[r,s]=g.useState([]),[n,o]=g.useState(!0),[a,l]=g.useState(null),[c,u]=g.useState("works"),[d,h]=g.useState(""),[f,p]=g.useState("all"),[m,b]=g.useState("all"),[y,x]=g.useState(!1),[j,v]=g.useState(null),[w,E]=g.useState(null),[O,$]=g.useState(!1),[N,k]=g.useState({title:"",type:"book",description:"",status:"planning",progress_percentage:0,release_date:"",estimated_release:"",cover_image_url:"",is_featured:!1,is_premium:!1,is_free:!0,target_word_count:void 0}),R=async()=>{try{const P=await fetch("/api/admin/works?include_stats=true");if(!P.ok)throw new Error("Failed to fetch works");const B=await P.json();e(B.works||[])}catch(P){l(P instanceof Error?P.message:"Failed to fetch works")}},T=async P=>{try{const B=P?`/api/admin/chapters?work_id=${P}`:"/api/admin/chapters",ne=await fetch(B);if(!ne.ok)throw new Error("Failed to fetch chapters");const Re=await ne.json();s(Re.chapters||[])}catch(B){l(B instanceof Error?B.message:"Failed to fetch chapters")}};g.useEffect(()=>{(async()=>{o(!0),l(null);try{await Promise.all([R(),T()])}catch{l("Failed to load data")}finally{o(!1)}})()},[]);const M=t.filter(P=>{var et;const B=P.title.toLowerCase().includes(d.toLowerCase())||((et=P.description)==null?void 0:et.toLowerCase().includes(d.toLowerCase())),ne=f==="all"||P.status===f,Re=m==="all"||P.type===m;return B&&ne&&Re}),J=w?r.filter(P=>P.work_id===w.id):r,F=async P=>{P.preventDefault();try{const B=j?`/api/admin/works/${j.id}`:"/api/admin/works",Re=await fetch(B,{method:j?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...N,progress_percentage:N.progress_percentage||0,target_word_count:N.target_word_count||null})});if(!Re.ok){const et=await Re.json();throw new Error(et.message||"Failed to save work")}await R(),C(),x(!1)}catch(B){l(B instanceof Error?B.message:"Failed to save work")}},C=()=>{k({title:"",type:"book",description:"",status:"planning",progress_percentage:0,release_date:"",estimated_release:"",cover_image_url:"",is_featured:!1,is_premium:!1,is_free:!0,target_word_count:void 0}),v(null)},L=P=>{v(P),k({title:P.title,type:P.type,parent_id:P.parent_id,description:P.description||"",status:P.status,progress_percentage:P.progress_percentage||0,release_date:P.release_date||"",estimated_release:P.estimated_release||"",cover_image_url:P.cover_image_url||"",is_featured:P.is_featured,is_premium:P.is_premium,is_free:P.is_free,target_word_count:P.target_word_count}),x(!0)},z=async P=>{if(confirm(`Are you sure you want to delete "${P.title}"? This will also delete all associated chapters.`))try{if(!(await fetch(`/api/admin/works/${P.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete work");await R(),(w==null?void 0:w.id)===P.id&&E(null)}catch(B){l(B instanceof Error?B.message:"Failed to delete work")}},V=async(P,B)=>{try{if(!(await fetch(`/api/admin/works/${P.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({[B]:!P[B]})})).ok)throw new Error("Failed to update work");await R()}catch(ne){l(ne instanceof Error?ne.message:"Failed to update work")}},H=async P=>{try{if(!(await fetch(`/api/admin/chapters/${P.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_published:!P.is_published})})).ok)throw new Error("Failed to update chapter");await T(w==null?void 0:w.id)}catch(B){l(B instanceof Error?B.message:"Failed to update chapter")}},se=P=>{switch(P){case"published":return{color:"text-green-600",bg:"bg-green-100 dark:bg-green-900/20",icon:rs};case"writing":return{color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/20",icon:Mo};case"editing":return{color:"text-yellow-600",bg:"bg-yellow-100 dark:bg-yellow-900/20",icon:ba};case"planning":return{color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/20",icon:h1};case"on_hold":return{color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-900/20",icon:r1};default:return{color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-900/20",icon:pr}}},le=P=>{switch(P){case"book":return i.jsx(fr,{className:"w-4 h-4"});case"volume":return i.jsx(Et,{className:"w-4 h-4"});case"saga":return i.jsx(X_,{className:"w-4 h-4"});case"arc":return i.jsx(Ps,{className:"w-4 h-4"});case"issue":return i.jsx(br,{className:"w-4 h-4"});default:return i.jsx(fr,{className:"w-4 h-4"})}},I=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return n?i.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[i.jsx(Pt,{className:"w-8 h-8 animate-spin text-primary"}),i.jsx("span",{className:"ml-3 text-lg",children:"Loading works and chapters..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[i.jsx(fr,{className:"w-8 h-8 text-primary"}),"Works Management"]}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"Create and manage your literary works, upload chapters for subscribers, and showcase in library"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>$(!0),className:"bg-secondary text-white px-6 py-3 rounded-xl font-medium hover:bg-secondary-dark transition-colors flex items-center gap-2",children:[i.jsx(ir,{className:"w-5 h-5"}),"Upload Chapter"]}),i.jsxs("button",{onClick:()=>{C(),x(!0)},className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[i.jsx(hi,{className:"w-5 h-5"}),"New Work"]})]})]}),a&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3",children:[i.jsx(di,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsx("span",{className:"text-red-700 dark:text-red-400",children:a}),i.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-500 hover:text-red-600",children:i.jsx(gr,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"border-b border-border",children:i.jsxs("nav",{className:"-mb-px flex space-x-8",children:[i.jsxs("button",{onClick:()=>{u("works"),E(null)},className:`py-2 px-1 border-b-2 font-medium text-sm ${c==="works"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Works (",t.length,")"]}),i.jsxs("button",{onClick:()=>u("chapters"),className:`py-2 px-1 border-b-2 font-medium text-sm ${c==="chapters"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Chapters (",r.length,")"]})]})}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(pn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),i.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:d,onChange:P=>h(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),c==="works"&&i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),i.jsxs("select",{value:f,onChange:P=>p(P.target.value),className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"planning",children:"Planning"}),i.jsx("option",{value:"writing",children:"Writing"}),i.jsx("option",{value:"editing",children:"Editing"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"on_hold",children:"On Hold"})]})]}),i.jsxs("select",{value:m,onChange:P=>b(P.target.value),className:"px-3 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"all",children:"All Types"}),i.jsx("option",{value:"book",children:"Books"}),i.jsx("option",{value:"volume",children:"Volumes"}),i.jsx("option",{value:"saga",children:"Sagas"}),i.jsx("option",{value:"arc",children:"Arcs"}),i.jsx("option",{value:"issue",children:"Issues"})]})]})]}),c==="works"&&i.jsx("div",{className:"space-y-4",children:M.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(fr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No works found"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:d||f!=="all"||m!=="all"?"Try adjusting your search or filters":"Create your first work to get started"}),i.jsx("button",{onClick:()=>{C(),x(!0)},className:"bg-primary text-white px-6 py-2 rounded-xl font-medium hover:bg-primary-dark transition-colors",children:"Create First Work"})]}):i.jsx("div",{className:"grid gap-4",children:M.map(P=>{const B=se(P.status),ne=B.icon;return i.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[le(P.type),i.jsx("h3",{className:"text-lg font-semibold text-foreground",children:P.title})]}),i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B.bg} ${B.color}`,children:[i.jsx(ne,{className:"w-3 h-3 mr-1"}),P.status]}),P.is_featured&&i.jsx(ih,{className:"w-4 h-4 text-yellow-500 fill-current"})]}),i.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Updated ",I(P.updated_at)]}),P.chapters_count&&i.jsxs("p",{children:[P.published_chapters,"/",P.chapters_count," chapters published"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Type:"}),i.jsx("span",{className:"ml-2 text-foreground capitalize",children:P.type})]}),P.progress_percentage!==void 0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Progress:"}),i.jsxs("span",{className:"ml-2 text-foreground",children:[P.progress_percentage,"%"]})]}),P.word_count&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Words:"}),i.jsxs("span",{className:"ml-2 text-foreground",children:[P.word_count.toLocaleString(),P.target_word_count&&` / ${P.target_word_count.toLocaleString()}`]})]}),P.rating&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Rating:"}),i.jsxs("span",{className:"ml-2 text-foreground",children:[P.rating.toFixed(1)," â­ (",P.reviews_count,")"]})]})]}),P.description&&i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:P.description}),i.jsxs("div",{className:"flex gap-6 text-sm",children:[P.release_date&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Released:"}),i.jsx("span",{className:"ml-2 text-foreground",children:I(P.release_date)})]}),P.estimated_release&&!P.release_date&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Est. Release:"}),i.jsx("span",{className:"ml-2 text-foreground",children:P.estimated_release})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>V(P,"is_featured"),className:`flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-medium transition-colors ${P.is_featured?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:[i.jsx(ih,{className:"w-3 h-3"}),"Featured"]}),i.jsx("button",{onClick:()=>V(P,"is_premium"),className:`flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-medium transition-colors ${P.is_premium?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:"Premium"}),i.jsx("button",{onClick:()=>V(P,"is_free"),className:`flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-medium transition-colors ${P.is_free?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:"Free"})]}),i.jsx("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>L(P),className:"text-primary hover:text-primary-dark flex items-center gap-2 text-sm font-medium",children:[i.jsx(Mo,{className:"w-4 h-4"}),"Edit"]}),i.jsxs("button",{onClick:()=>{E(P),u("chapters"),T(P.id)},className:"text-blue-600 hover:text-blue-700 flex items-center gap-2 text-sm font-medium",children:[i.jsx(Et,{className:"w-4 h-4"}),"Chapters (",P.chapters_count||0,")"]}),i.jsxs("button",{onClick:()=>z(P),className:"text-red-500 hover:text-red-600 flex items-center gap-2 text-sm font-medium",children:[i.jsx(_u,{className:"w-4 h-4"}),"Delete"]})]})})]}),P.cover_image_url&&i.jsx("div",{className:"ml-4 flex-shrink-0",children:i.jsx("img",{src:P.cover_image_url,alt:P.title,className:"w-16 h-20 object-cover rounded-lg border border-border"})})]})},P.id)})})}),c==="chapters"&&i.jsxs("div",{className:"space-y-4",children:[w&&i.jsx("div",{className:"bg-primary/5 border border-primary/20 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-foreground",children:["Chapters for: ",w.title]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[J.length," chapters â€¢ ",J.filter(P=>P.is_published).length," published"]})]}),i.jsxs("button",{onClick:()=>$(!0),className:"bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[i.jsx(hi,{className:"w-4 h-4"}),"Add Chapter"]})]})}),J.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(br,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No chapters found"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:w?`No chapters uploaded for "${w.title}" yet`:"Select a work to view its chapters or upload new content"})]}):i.jsx("div",{className:"grid gap-3",children:J.sort((P,B)=>P.chapter_number-B.chapter_number).map(P=>i.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:["Ch. ",P.chapter_number]}),i.jsx("h4",{className:"font-medium text-foreground",children:P.title}),i.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${P.is_published?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-900/20 dark:text-gray-400"}`,children:P.is_published?"Published":"Draft"})]}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[i.jsxs("span",{children:["Updated ",I(P.updated_at)]}),P.word_count&&i.jsxs("span",{children:[P.word_count.toLocaleString()," words"]}),P.estimated_read_time&&i.jsxs("span",{children:[P.estimated_read_time," min read"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>H(P),className:`p-2 rounded-lg transition-colors ${P.is_published?"text-green-600 hover:bg-green-100 dark:hover:bg-green-900/20":"text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800"}`,title:P.is_published?"Unpublish chapter":"Publish chapter",children:P.is_published?i.jsx(ns,{className:"w-4 h-4"}):i.jsx(gg,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-primary hover:bg-primary/10 rounded-lg",children:i.jsx(Mo,{className:"w-4 h-4"})})]})]},P.id))})]}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-background rounded-xl shadow-xl border border-border max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[i.jsx("h2",{className:"text-xl font-semibold text-foreground",children:j?"Edit Work":"Create New Work"}),i.jsx("button",{onClick:()=>{x(!1),C()},className:"text-muted-foreground hover:text-foreground",children:i.jsx(gr,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:F,className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Title *"}),i.jsx("input",{type:"text",required:!0,value:N.title,onChange:P=>k({...N,title:P.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Type"}),i.jsxs("select",{value:N.type,onChange:P=>k({...N,type:P.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"book",children:"Book"}),i.jsx("option",{value:"volume",children:"Volume"}),i.jsx("option",{value:"saga",children:"Saga"}),i.jsx("option",{value:"arc",children:"Arc"}),i.jsx("option",{value:"issue",children:"Issue"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description"}),i.jsx("textarea",{value:N.description,onChange:P=>k({...N,description:P.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Status"}),i.jsxs("select",{value:N.status,onChange:P=>k({...N,status:P.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"planning",children:"Planning"}),i.jsx("option",{value:"writing",children:"Writing"}),i.jsx("option",{value:"editing",children:"Editing"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"on_hold",children:"On Hold"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Progress %"}),i.jsx("input",{type:"number",min:"0",max:"100",value:N.progress_percentage,onChange:P=>k({...N,progress_percentage:parseInt(P.target.value)||0}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Release Date"}),i.jsx("input",{type:"date",value:N.release_date,onChange:P=>k({...N,release_date:P.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Estimated Release"}),i.jsx("input",{type:"text",value:N.estimated_release,onChange:P=>k({...N,estimated_release:P.target.value}),placeholder:"e.g., Spring 2024",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Cover Image URL"}),i.jsx("input",{type:"url",value:N.cover_image_url,onChange:P=>k({...N,cover_image_url:P.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Target Word Count"}),i.jsx("input",{type:"number",value:N.target_word_count||"",onChange:P=>k({...N,target_word_count:P.target.value?parseInt(P.target.value):void 0}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"is_featured",checked:N.is_featured,onChange:P=>k({...N,is_featured:P.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),i.jsx("label",{htmlFor:"is_featured",className:"ml-2 text-sm font-medium text-foreground",children:"Featured (highlight in library)"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"is_premium",checked:N.is_premium,onChange:P=>k({...N,is_premium:P.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),i.jsx("label",{htmlFor:"is_premium",className:"ml-2 text-sm font-medium text-foreground",children:"Premium content (requires subscription/purchase)"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"is_free",checked:N.is_free,onChange:P=>k({...N,is_free:P.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),i.jsx("label",{htmlFor:"is_free",className:"ml-2 text-sm font-medium text-foreground",children:"Free to read (no subscription required)"})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-border",children:[i.jsx("button",{type:"button",onClick:()=>{x(!1),C()},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium",children:"Cancel"}),i.jsxs("button",{type:"submit",className:"bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[i.jsx(vg,{className:"w-4 h-4"}),j?"Update Work":"Create Work"]})]})]})]})}),O&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-background rounded-xl shadow-xl border border-border max-w-md w-full",children:i.jsxs("div",{className:"p-6 text-center",children:[i.jsx(ir,{className:"w-16 h-16 text-primary mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Chapter Upload"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Use the existing Chapter Upload page or integrate the upload functionality here."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{$(!1),window.open("/account/admin/media","_blank")},className:"flex-1 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors",children:"Go to Upload Page"}),i.jsx("button",{onClick:()=>$(!1),className:"flex-1 bg-gray-200 dark:bg-gray-700 text-foreground px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"})]})]})})})]})},iR=()=>{const[t,e]=g.useState("upload"),[r,s]=g.useState("chapter"),[n,o]=g.useState([]),[a,l]=g.useState([]),[c,u]=g.useState(!1),[d,h]=g.useState(null),[f,p]=g.useState(null),[m,b]=g.useState(""),[y,x]=g.useState("all"),[j,v]=g.useState(null),[w,E]=g.useState(!1),[O,$]=g.useState({}),[N,k]=g.useState({work_id:"",chapter_title:"",chapter_number:1,is_published:!1});g.useEffect(()=>{R(),T()},[]);const R=async()=>{try{const I=await fetch("/api/admin/works");if(I.ok){const P=await I.json();o(P.works||[])}}catch(I){console.error("Failed to fetch works:",I)}},T=async()=>{try{u(!0);const I=await fetch("/api/admin/media");if(I.ok){const P=await I.json();l(P.files||[])}}catch{h("Failed to fetch media files")}finally{u(!1)}},M=I=>{I.target.files&&v(I.target.files)},J=I=>{I.preventDefault(),I.stopPropagation(),I.type==="dragenter"||I.type==="dragover"?E(!0):I.type==="dragleave"&&E(!1)},F=I=>{I.preventDefault(),I.stopPropagation(),E(!1),I.dataTransfer.files&&I.dataTransfer.files[0]&&v(I.dataTransfer.files)},C=async()=>{var I,P;if(!j||j.length===0){h("Please select a file to upload");return}if(!N.work_id||!N.chapter_title){h("Please fill in all required chapter information");return}u(!0),h(null),p(null);try{const B=new FormData;B.append("file",j[0]),B.append("title",N.chapter_title),B.append("chapter_number",N.chapter_number.toString()),B.append("book_id",N.work_id),B.append("is_published",N.is_published.toString());const{data:{session:ne},error:Re}=await((P=(I=window.supabase)==null?void 0:I.auth)==null?void 0:P.getSession());if(Re||!ne)throw new Error("User session not found. Please log in.");const et=await fetch("/api/chapters/upload",{method:"POST",body:B,headers:{Authorization:`Bearer ${ne.access_token}`}});if(!et.ok){const Gi=await et.json();throw new Error(Gi.message||Gi.error||"Failed to upload chapter.")}const Tb=await et.json();p(`Chapter "${N.chapter_title}" uploaded successfully!`),v(null),k({work_id:"",chapter_title:"",chapter_number:1,is_published:!1}),await T()}catch(B){h(B instanceof Error?B.message:"Failed to upload chapter")}finally{u(!1)}},L=async()=>{if(!j||j.length===0){h("Please select files to upload");return}u(!0),h(null),p(null);try{const I=Array.from(j).map(async(P,B)=>{const ne=new FormData;ne.append("file",P),ne.append("type","media");const Re=await fetch("/api/admin/media/upload",{method:"POST",body:ne});if(!Re.ok)throw new Error(`Failed to upload ${P.name}`);return Re.json()});await Promise.all(I),p(`Successfully uploaded ${j.length} file(s)`),v(null),await T()}catch(I){h(I instanceof Error?I.message:"Failed to upload files")}finally{u(!1)}},z=async I=>{if(confirm("Are you sure you want to delete this file?"))try{if(!(await fetch(`/api/admin/media/${I}`,{method:"DELETE"})).ok)throw new Error("Failed to delete file");p("File deleted successfully"),await T()}catch(P){h(P instanceof Error?P.message:"Failed to delete file")}},V=a.filter(I=>{var ne;const P=I.filename.toLowerCase().includes(m.toLowerCase())||((ne=I.chapter_title)==null?void 0:ne.toLowerCase().includes(m.toLowerCase()));let B=!0;if(y!=="all")switch(y){case"chapter":B=!!(I.work_id&&I.chapter_number);break;case"image":B=I.file_type.startsWith("image/");break;case"video":B=I.file_type.startsWith("video/");break;case"audio":B=I.file_type.startsWith("audio/");break;case"document":B=I.file_type.includes("pdf")||I.file_type.includes("document")||I.file_type.includes("text");break}return P&&B}),H=I=>I.work_id&&I.chapter_number?i.jsx(fr,{className:"w-5 h-5 text-blue-600"}):I.file_type.startsWith("image/")?i.jsx(sh,{className:"w-5 h-5 text-green-600"}):I.file_type.startsWith("video/")?i.jsx(p1,{className:"w-5 h-5 text-purple-600"}):I.file_type.startsWith("audio/")?i.jsx(d1,{className:"w-5 h-5 text-pink-600"}):i.jsx(br,{className:"w-5 h-5 text-gray-600"}),se=I=>{if(I===0)return"0 Bytes";const P=1024,B=["Bytes","KB","MB","GB"],ne=Math.floor(Math.log(I)/Math.log(P));return parseFloat((I/Math.pow(P,ne)).toFixed(2))+" "+B[ne]},le=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[i.jsx(ir,{className:"w-8 h-8 text-primary"}),"Media Upload"]}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"Upload chapters for subscribers and manage media files for your website"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>e("upload"),className:`px-6 py-3 rounded-xl font-medium transition-colors ${t==="upload"?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-foreground hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Upload Files"}),i.jsx("button",{onClick:()=>e("library"),className:`px-6 py-3 rounded-xl font-medium transition-colors ${t==="library"?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-foreground hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Media Library"})]})]}),f&&i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4 flex items-center gap-3",children:[i.jsx(rs,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),i.jsx("span",{className:"text-green-700 dark:text-green-400",children:f}),i.jsx("button",{onClick:()=>p(null),className:"ml-auto text-green-500 hover:text-green-600",children:i.jsx(gr,{className:"w-5 h-5"})})]}),d&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3",children:[i.jsx(di,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsx("span",{className:"text-red-700 dark:text-red-400",children:d}),i.jsx("button",{onClick:()=>h(null),className:"ml-auto text-red-500 hover:text-red-600",children:i.jsx(gr,{className:"w-5 h-5"})})]}),t==="upload"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex gap-4 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl",children:[i.jsxs("button",{onClick:()=>s("chapter"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${r==="chapter"?"bg-white dark:bg-gray-700 text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[i.jsx(fr,{className:"w-4 h-4 inline mr-2"}),"Chapter Upload"]}),i.jsxs("button",{onClick:()=>s("media"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${r==="media"?"bg-white dark:bg-gray-700 text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[i.jsx(sh,{className:"w-4 h-4 inline mr-2"}),"Media Upload"]})]}),r==="chapter"&&i.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Upload New Chapter"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Select Work *"}),i.jsxs("select",{value:N.work_id,onChange:I=>k({...N,work_id:I.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0,children:[i.jsx("option",{value:"",children:"-- Select a Work --"}),n.map(I=>i.jsxs("option",{value:I.id,children:[I.title," (",I.type,")"]},I.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Chapter Number *"}),i.jsx("input",{type:"number",min:"1",value:N.chapter_number,onChange:I=>k({...N,chapter_number:parseInt(I.target.value)||1}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Chapter Title *"}),i.jsx("input",{type:"text",value:N.chapter_title,onChange:I=>k({...N,chapter_title:I.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"Enter chapter title",required:!0})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"is_published",checked:N.is_published,onChange:I=>k({...N,is_published:I.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),i.jsx("label",{htmlFor:"is_published",className:"ml-2 text-sm font-medium text-foreground",children:"Publish immediately (subscribers will get access)"})]})}),i.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-colors ${w?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600 hover:border-primary hover:bg-primary/5"}`,onDragEnter:J,onDragLeave:J,onDragOver:J,onDrop:F,children:[i.jsx(ir,{className:"w-12 h-12 text-primary mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Drop chapter file here or click to browse"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Supported formats: PDF, DOCX, TXT, HTML"}),i.jsx("input",{type:"file",onChange:M,accept:".pdf,.docx,.txt,.html",className:"hidden",id:"chapter-file-input"}),i.jsxs("label",{htmlFor:"chapter-file-input",className:"bg-primary text-white px-6 py-2 rounded-lg cursor-pointer hover:bg-primary-dark transition-colors inline-flex items-center gap-2",children:[i.jsx(hi,{className:"w-4 h-4"}),"Choose File"]})]}),j&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Selected File:"}),Array.from(j).map((I,P)=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(br,{className:"w-4 h-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium",children:I.name}),i.jsx("span",{className:"text-xs text-muted-foreground",children:se(I.size)})]}),i.jsx("button",{onClick:()=>v(null),className:"text-red-500 hover:text-red-600",children:i.jsx(gr,{className:"w-4 h-4"})})]},P))]}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx("button",{onClick:C,disabled:c||!j||!N.work_id||!N.chapter_title,className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Pt,{className:"w-4 h-4 animate-spin"}),"Uploading Chapter..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ir,{className:"w-4 h-4"}),"Upload Chapter"]})})})]}),r==="media"&&i.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Upload Media Files"}),i.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-colors ${w?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600 hover:border-primary hover:bg-primary/5"}`,onDragEnter:J,onDragLeave:J,onDragOver:J,onDrop:F,children:[i.jsx(ir,{className:"w-12 h-12 text-primary mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Drop files here or click to browse"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Images, videos, documents, and other media files"}),i.jsx("input",{type:"file",onChange:M,multiple:!0,className:"hidden",id:"media-file-input"}),i.jsxs("label",{htmlFor:"media-file-input",className:"bg-primary text-white px-6 py-2 rounded-lg cursor-pointer hover:bg-primary-dark transition-colors inline-flex items-center gap-2",children:[i.jsx(hi,{className:"w-4 h-4"}),"Choose Files"]})]}),j&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("h4",{className:"font-medium text-foreground mb-2",children:["Selected Files (",j.length,"):"]}),i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Array.from(j).map((I,P)=>i.jsx("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(n1,{className:"w-4 h-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium",children:I.name}),i.jsx("span",{className:"text-xs text-muted-foreground",children:se(I.size)})]})},P))})]}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx("button",{onClick:L,disabled:c||!j,className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Pt,{className:"w-4 h-4 animate-spin"}),"Uploading Files..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ir,{className:"w-4 h-4"}),"Upload Files"]})})})]})]}),t==="library"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(pn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Search files...",value:m,onChange:I=>b(I.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),i.jsxs("div",{className:"relative",children:[i.jsx($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),i.jsxs("select",{value:y,onChange:I=>x(I.target.value),className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[i.jsx("option",{value:"all",children:"All Files"}),i.jsx("option",{value:"chapter",children:"Chapters"}),i.jsx("option",{value:"image",children:"Images"}),i.jsx("option",{value:"video",children:"Videos"}),i.jsx("option",{value:"audio",children:"Audio"}),i.jsx("option",{value:"document",children:"Documents"})]})]}),i.jsx("button",{onClick:T,className:"bg-primary text-white px-4 py-3 rounded-xl hover:bg-primary-dark transition-colors",children:i.jsx(Pt,{className:"w-4 h-4"})})]}),c?i.jsxs("div",{className:"flex items-center justify-center py-12",children:[i.jsx(Pt,{className:"w-8 h-8 animate-spin text-primary"}),i.jsx("span",{className:"ml-3",children:"Loading files..."})]}):V.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(i1,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No files found"}),i.jsx("p",{className:"text-muted-foreground",children:m||y!=="all"?"Try adjusting your search or filters":"Upload your first file to get started"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(I=>{var P;return i.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 hover:shadow-md transition-shadow",children:[i.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg mb-4 flex items-center justify-center",children:I.thumbnail_url?i.jsx("img",{src:I.thumbnail_url,alt:I.filename,className:"w-full h-full object-cover rounded-lg"}):i.jsxs("div",{className:"text-center",children:[H(I),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:(P=I.file_type.split("/")[1])==null?void 0:P.toUpperCase()})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-medium text-foreground truncate",title:I.filename,children:I.filename}),I.work_id&&I.chapter_number&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Chapter ",I.chapter_number,": ",I.chapter_title]}),i.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${I.is_published?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-900/20 dark:text-gray-400"}`,children:I.is_published?"Published":"Draft"})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[i.jsx("span",{children:se(I.file_size)}),i.jsx("span",{children:le(I.upload_date)})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[I.file_url&&i.jsx("button",{onClick:()=>window.open(I.file_url,"_blank"),className:"p-1.5 text-primary hover:bg-primary/10 rounded-lg transition-colors",title:"View file",children:i.jsx(ns,{className:"w-4 h-4"})}),I.file_url&&i.jsx("button",{onClick:()=>{const B=document.createElement("a");B.href=I.file_url,B.download=I.filename,B.click()},className:"p-1.5 text-blue-600 hover:bg-blue-600/10 rounded-lg transition-colors",title:"Download file",children:i.jsx(s1,{className:"w-4 h-4"})})]}),i.jsx("button",{onClick:()=>z(I.id),className:"p-1.5 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete file",children:i.jsx(_u,{className:"w-4 h-4"})})]})]},I.id)})})]})]})},Iy=g.createContext({});function oR(t){const e=g.useRef(null);return e.current===null&&(e.current=t()),e.current}const Gu=typeof window<"u",aR=Gu?g.useLayoutEffect:g.useEffect,Wu=g.createContext(null);function Hu(t,e){t.indexOf(e)===-1&&t.push(e)}function Zu(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const qt=(t,e,r)=>r>e?e:r<t?t:r;let Yu=()=>{};const Gt={},$y=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function My(t){return typeof t=="object"&&t!==null}const Dy=t=>/^0[^.\s]+$/u.test(t);function Ku(t){let e;return()=>(e===void 0&&(e=t()),e)}const ot=t=>t,lR=(t,e)=>r=>e(t(r)),zi=(...t)=>t.reduce(lR),gi=(t,e,r)=>{const s=e-t;return s===0?1:(r-t)/s};class Ju{constructor(){this.subscriptions=[]}add(e){return Hu(this.subscriptions,e),()=>Zu(this.subscriptions,e)}notify(e,r,s){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](e,r,s);else for(let o=0;o<n;o++){const a=this.subscriptions[o];a&&a(e,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Nt=t=>t*1e3,Ct=t=>t/1e3;function Ly(t,e){return e?t*(1e3/e):0}const Fy=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,cR=1e-7,uR=12;function dR(t,e,r,s,n){let o,a,l=0;do a=e+(r-e)/2,o=Fy(a,s,n)-t,o>0?r=a:e=a;while(Math.abs(o)>cR&&++l<uR);return a}function Ui(t,e,r,s){if(t===e&&r===s)return ot;const n=o=>dR(o,0,1,t,r);return o=>o===0||o===1?o:Fy(n(o),e,s)}const zy=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Uy=t=>e=>1-t(1-e),By=Ui(.33,1.53,.69,.99),Qu=Uy(By),Vy=zy(Qu),qy=t=>(t*=2)<1?.5*Qu(t):.5*(2-Math.pow(2,-10*(t-1))),Xu=t=>1-Math.sin(Math.acos(t)),Gy=Uy(Xu),Wy=zy(Xu),hR=Ui(.42,0,1,1),fR=Ui(0,0,.58,1),Hy=Ui(.42,0,.58,1),pR=t=>Array.isArray(t)&&typeof t[0]!="number",Zy=t=>Array.isArray(t)&&typeof t[0]=="number",mR={linear:ot,easeIn:hR,easeInOut:Hy,easeOut:fR,circIn:Xu,circInOut:Wy,circOut:Gy,backIn:Qu,backInOut:Vy,backOut:By,anticipate:qy},gR=t=>typeof t=="string",Ff=t=>{if(Zy(t)){Yu(t.length===4);const[e,r,s,n]=t;return Ui(e,r,s,n)}else if(gR(t))return mR[t];return t},No=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function yR(t,e){let r=new Set,s=new Set,n=!1,o=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){a.has(d)&&(u.schedule(d),t()),d(l)}const u={schedule:(d,h=!1,f=!1)=>{const m=f&&n?r:s;return h&&a.add(d),m.has(d)||m.add(d),d},cancel:d=>{s.delete(d),a.delete(d)},process:d=>{if(l=d,n){o=!0;return}n=!0,[r,s]=[s,r],r.forEach(c),r.clear(),n=!1,o&&(o=!1,u.process(d))}};return u}const vR=40;function Yy(t,e){let r=!1,s=!0;const n={delta:0,timestamp:0,isProcessing:!1},o=()=>r=!0,a=No.reduce((v,w)=>(v[w]=yR(o),v),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:p,postRender:m}=a,b=()=>{const v=Gt.useManualTiming?n.timestamp:performance.now();r=!1,Gt.useManualTiming||(n.delta=s?1e3/60:Math.max(Math.min(v-n.timestamp,vR),1)),n.timestamp=v,n.isProcessing=!0,l.process(n),c.process(n),u.process(n),d.process(n),h.process(n),f.process(n),p.process(n),m.process(n),n.isProcessing=!1,r&&e&&(s=!1,t(b))},y=()=>{r=!0,s=!0,n.isProcessing||t(b)};return{schedule:No.reduce((v,w)=>{const E=a[w];return v[w]=(O,$=!1,N=!1)=>(r||y(),E.schedule(O,$,N)),v},{}),cancel:v=>{for(let w=0;w<No.length;w++)a[No[w]].cancel(v)},state:n,steps:a}}const{schedule:me,cancel:_r,state:Me,steps:Ol}=Yy(typeof requestAnimationFrame<"u"?requestAnimationFrame:ot,!0);let Uo;function bR(){Uo=void 0}const Ke={now:()=>(Uo===void 0&&Ke.set(Me.isProcessing||Gt.useManualTiming?Me.timestamp:performance.now()),Uo),set:t=>{Uo=t,queueMicrotask(bR)}},Ky=t=>e=>typeof e=="string"&&e.startsWith(t),ed=Ky("--"),xR=Ky("var(--"),td=t=>xR(t)?wR.test(t.split("/*")[0].trim()):!1,wR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,vn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yi={...vn,transform:t=>qt(0,1,t)},Co={...vn,default:1},ni=t=>Math.round(t*1e5)/1e5,rd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _R(t){return t==null}const jR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sd=(t,e)=>r=>!!(typeof r=="string"&&jR.test(r)&&r.startsWith(t)||e&&!_R(r)&&Object.prototype.hasOwnProperty.call(r,e)),Jy=(t,e,r)=>s=>{if(typeof s!="string")return s;const[n,o,a,l]=s.match(rd);return{[t]:parseFloat(n),[e]:parseFloat(o),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},SR=t=>qt(0,255,t),Rl={...vn,transform:t=>Math.round(SR(t))},Br={test:sd("rgb","red"),parse:Jy("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:s=1})=>"rgba("+Rl.transform(t)+", "+Rl.transform(e)+", "+Rl.transform(r)+", "+ni(yi.transform(s))+")"};function kR(t){let e="",r="",s="",n="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),s=t.substring(5,7),n=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),s=t.substring(3,4),n=t.substring(4,5),e+=e,r+=r,s+=s,n+=n),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:n?parseInt(n,16)/255:1}}const jc={test:sd("#"),parse:kR,transform:Br.transform},Bi=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),rr=Bi("deg"),At=Bi("%"),Y=Bi("px"),TR=Bi("vh"),PR=Bi("vw"),zf={...At,parse:t=>At.parse(t)/100,transform:t=>At.transform(t*100)},Cs={test:sd("hsl","hue"),parse:Jy("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:s=1})=>"hsla("+Math.round(t)+", "+At.transform(ni(e))+", "+At.transform(ni(r))+", "+ni(yi.transform(s))+")"},Ee={test:t=>Br.test(t)||jc.test(t)||Cs.test(t),parse:t=>Br.test(t)?Br.parse(t):Cs.test(t)?Cs.parse(t):jc.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Br.transform(t):Cs.transform(t),getAnimatableNone:t=>{const e=Ee.parse(t);return e.alpha=0,Ee.transform(e)}},ER=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NR(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(rd))==null?void 0:e.length)||0)+(((r=t.match(ER))==null?void 0:r.length)||0)>0}const Qy="number",Xy="color",CR="var",AR="var(",Uf="${}",OR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vi(t){const e=t.toString(),r=[],s={color:[],number:[],var:[]},n=[];let o=0;const l=e.replace(OR,c=>(Ee.test(c)?(s.color.push(o),n.push(Xy),r.push(Ee.parse(c))):c.startsWith(AR)?(s.var.push(o),n.push(CR),r.push(c)):(s.number.push(o),n.push(Qy),r.push(parseFloat(c))),++o,Uf)).split(Uf);return{values:r,split:l,indexes:s,types:n}}function ev(t){return vi(t).values}function tv(t){const{split:e,types:r}=vi(t),s=e.length;return n=>{let o="";for(let a=0;a<s;a++)if(o+=e[a],n[a]!==void 0){const l=r[a];l===Qy?o+=ni(n[a]):l===Xy?o+=Ee.transform(n[a]):o+=n[a]}return o}}const RR=t=>typeof t=="number"?0:Ee.test(t)?Ee.getAnimatableNone(t):t;function IR(t){const e=ev(t);return tv(t)(e.map(RR))}const jr={test:NR,parse:ev,createTransformer:tv,getAnimatableNone:IR};function Il(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function $R({hue:t,saturation:e,lightness:r,alpha:s}){t/=360,e/=100,r/=100;let n=0,o=0,a=0;if(!e)n=o=a=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;n=Il(c,l,t+1/3),o=Il(c,l,t),a=Il(c,l,t-1/3)}return{red:Math.round(n*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:s}}function ia(t,e){return r=>r>0?e:t}const ve=(t,e,r)=>t+(e-t)*r,$l=(t,e,r)=>{const s=t*t,n=r*(e*e-s)+s;return n<0?0:Math.sqrt(n)},MR=[jc,Br,Cs],DR=t=>MR.find(e=>e.test(t));function Bf(t){const e=DR(t);if(!e)return!1;let r=e.parse(t);return e===Cs&&(r=$R(r)),r}const Vf=(t,e)=>{const r=Bf(t),s=Bf(e);if(!r||!s)return ia(t,e);const n={...r};return o=>(n.red=$l(r.red,s.red,o),n.green=$l(r.green,s.green,o),n.blue=$l(r.blue,s.blue,o),n.alpha=ve(r.alpha,s.alpha,o),Br.transform(n))},Sc=new Set(["none","hidden"]);function LR(t,e){return Sc.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function FR(t,e){return r=>ve(t,e,r)}function nd(t){return typeof t=="number"?FR:typeof t=="string"?td(t)?ia:Ee.test(t)?Vf:BR:Array.isArray(t)?rv:typeof t=="object"?Ee.test(t)?Vf:zR:ia}function rv(t,e){const r=[...t],s=r.length,n=t.map((o,a)=>nd(o)(o,e[a]));return o=>{for(let a=0;a<s;a++)r[a]=n[a](o);return r}}function zR(t,e){const r={...t,...e},s={};for(const n in r)t[n]!==void 0&&e[n]!==void 0&&(s[n]=nd(t[n])(t[n],e[n]));return n=>{for(const o in s)r[o]=s[o](n);return r}}function UR(t,e){const r=[],s={color:0,var:0,number:0};for(let n=0;n<e.values.length;n++){const o=e.types[n],a=t.indexes[o][s[o]],l=t.values[a]??0;r[n]=l,s[o]++}return r}const BR=(t,e)=>{const r=jr.createTransformer(e),s=vi(t),n=vi(e);return s.indexes.var.length===n.indexes.var.length&&s.indexes.color.length===n.indexes.color.length&&s.indexes.number.length>=n.indexes.number.length?Sc.has(t)&&!n.values.length||Sc.has(e)&&!s.values.length?LR(t,e):zi(rv(UR(s,n),n.values),r):ia(t,e)};function sv(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?ve(t,e,r):nd(t)(t,e)}const VR=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>me.update(e,r),stop:()=>_r(e),now:()=>Me.isProcessing?Me.timestamp:Ke.now()}},nv=(t,e,r=10)=>{let s="";const n=Math.max(Math.round(e/r),2);for(let o=0;o<n;o++)s+=Math.round(t(o/(n-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},oa=2e4;function id(t){let e=0;const r=50;let s=t.next(e);for(;!s.done&&e<oa;)e+=r,s=t.next(e);return e>=oa?1/0:e}function qR(t,e=100,r){const s=r({...t,keyframes:[0,e]}),n=Math.min(id(s),oa);return{type:"keyframes",ease:o=>s.next(n*o).value/e,duration:Ct(n)}}const GR=5;function iv(t,e,r){const s=Math.max(e-GR,0);return Ly(r-t(s),e-s)}const Se={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ml=.001;function WR({duration:t=Se.duration,bounce:e=Se.bounce,velocity:r=Se.velocity,mass:s=Se.mass}){let n,o,a=1-e;a=qt(Se.minDamping,Se.maxDamping,a),t=qt(Se.minDuration,Se.maxDuration,Ct(t)),a<1?(n=u=>{const d=u*a,h=d*t,f=d-r,p=kc(u,a),m=Math.exp(-h);return Ml-f/p*m},o=u=>{const h=u*a*t,f=h*r+r,p=Math.pow(a,2)*Math.pow(u,2)*t,m=Math.exp(-h),b=kc(Math.pow(u,2),a);return(-n(u)+Ml>0?-1:1)*((f-p)*m)/b}):(n=u=>{const d=Math.exp(-u*t),h=(u-r)*t+1;return-Ml+d*h},o=u=>{const d=Math.exp(-u*t),h=(r-u)*(t*t);return d*h});const l=5/t,c=ZR(n,o,l);if(t=Nt(t),isNaN(c))return{stiffness:Se.stiffness,damping:Se.damping,duration:t};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:a*2*Math.sqrt(s*u),duration:t}}}const HR=12;function ZR(t,e,r){let s=r;for(let n=1;n<HR;n++)s=s-t(s)/e(s);return s}function kc(t,e){return t*Math.sqrt(1-e*e)}const YR=["duration","bounce"],KR=["stiffness","damping","mass"];function qf(t,e){return e.some(r=>t[r]!==void 0)}function JR(t){let e={velocity:Se.velocity,stiffness:Se.stiffness,damping:Se.damping,mass:Se.mass,isResolvedFromDuration:!1,...t};if(!qf(t,KR)&&qf(t,YR))if(t.visualDuration){const r=t.visualDuration,s=2*Math.PI/(r*1.2),n=s*s,o=2*qt(.05,1,1-(t.bounce||0))*Math.sqrt(n);e={...e,mass:Se.mass,stiffness:n,damping:o}}else{const r=WR(t);e={...e,...r,mass:Se.mass},e.isResolvedFromDuration=!0}return e}function aa(t=Se.visualDuration,e=Se.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:n}=r;const o=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=JR({...r,velocity:-Ct(r.velocity||0)}),m=f||0,b=u/(2*Math.sqrt(c*d)),y=a-o,x=Ct(Math.sqrt(c/d)),j=Math.abs(y)<5;s||(s=j?Se.restSpeed.granular:Se.restSpeed.default),n||(n=j?Se.restDelta.granular:Se.restDelta.default);let v;if(b<1){const E=kc(x,b);v=O=>{const $=Math.exp(-b*x*O);return a-$*((m+b*x*y)/E*Math.sin(E*O)+y*Math.cos(E*O))}}else if(b===1)v=E=>a-Math.exp(-x*E)*(y+(m+x*y)*E);else{const E=x*Math.sqrt(b*b-1);v=O=>{const $=Math.exp(-b*x*O),N=Math.min(E*O,300);return a-$*((m+b*x*y)*Math.sinh(N)+E*y*Math.cosh(N))/E}}const w={calculatedDuration:p&&h||null,next:E=>{const O=v(E);if(p)l.done=E>=h;else{let $=E===0?m:0;b<1&&($=E===0?Nt(m):iv(v,E,O));const N=Math.abs($)<=s,k=Math.abs(a-O)<=n;l.done=N&&k}return l.value=l.done?a:O,l},toString:()=>{const E=Math.min(id(w),oa),O=nv($=>w.next(E*$).value,E,30);return E+"ms "+O},toTransition:()=>{}};return w}aa.applyToOptions=t=>{const e=qR(t,100,aa);return t.ease=e.ease,t.duration=Nt(e.duration),t.type="keyframes",t};function Tc({keyframes:t,velocity:e=0,power:r=.8,timeConstant:s=325,bounceDamping:n=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},p=N=>l!==void 0&&N<l||c!==void 0&&N>c,m=N=>l===void 0?c:c===void 0||Math.abs(l-N)<Math.abs(c-N)?l:c;let b=r*e;const y=h+b,x=a===void 0?y:a(y);x!==y&&(b=x-h);const j=N=>-b*Math.exp(-N/s),v=N=>x+j(N),w=N=>{const k=j(N),R=v(N);f.done=Math.abs(k)<=u,f.value=f.done?x:R};let E,O;const $=N=>{p(f.value)&&(E=N,O=aa({keyframes:[f.value,m(f.value)],velocity:iv(v,N,f.value),damping:n,stiffness:o,restDelta:u,restSpeed:d}))};return $(0),{calculatedDuration:null,next:N=>{let k=!1;return!O&&E===void 0&&(k=!0,w(N),$(N)),E!==void 0&&N>=E?O.next(N-E):(!k&&w(N),f)}}}function QR(t,e,r){const s=[],n=r||Gt.mix||sv,o=t.length-1;for(let a=0;a<o;a++){let l=n(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||ot:e;l=zi(c,l)}s.push(l)}return s}function XR(t,e,{clamp:r=!0,ease:s,mixer:n}={}){const o=t.length;if(Yu(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=QR(e,s,n),c=l.length,u=d=>{if(a&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=gi(t[h],t[h+1],d);return l[h](f)};return r?d=>u(qt(t[0],t[o-1],d)):u}function eI(t,e){const r=t[t.length-1];for(let s=1;s<=e;s++){const n=gi(0,e,s);t.push(ve(r,1,n))}}function tI(t){const e=[0];return eI(e,t.length-1),e}function rI(t,e){return t.map(r=>r*e)}function sI(t,e){return t.map(()=>e||Hy).splice(0,t.length-1)}function ii({duration:t=300,keyframes:e,times:r,ease:s="easeInOut"}){const n=pR(s)?s.map(Ff):Ff(s),o={done:!1,value:e[0]},a=rI(r&&r.length===e.length?r:tI(e),t),l=XR(a,e,{ease:Array.isArray(n)?n:sI(e,n)});return{calculatedDuration:t,next:c=>(o.value=l(c),o.done=c>=t,o)}}const nI=t=>t!==null;function od(t,{repeat:e,repeatType:r="loop"},s,n=1){const o=t.filter(nI),l=n<0||e&&r!=="loop"&&e%2===1?0:o.length-1;return!l||s===void 0?o[l]:s}const iI={decay:Tc,inertia:Tc,tween:ii,keyframes:ii,spring:aa};function ov(t){typeof t.type=="string"&&(t.type=iI[t.type])}class ad{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const oI=t=>t/100;class ld extends ad{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,n;const{motionValue:r}=this.options;r&&r.updatedAt!==Ke.now()&&this.tick(Ke.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(s=this.options).onStop)==null||n.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ov(e);const{type:r=ii,repeat:s=0,repeatDelay:n=0,repeatType:o,velocity:a=0}=e;let{keyframes:l}=e;const c=r||ii;c!==ii&&typeof l[0]!="number"&&(this.mixKeyframes=zi(oI,sv(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=id(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+n,this.totalDuration=this.resolvedDuration*(s+1)-n,this.generator=u}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:s,totalDuration:n,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return s.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:m,onUpdate:b,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),j=this.playbackSpeed>=0?x<0:x>n;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let v=this.currentTime,w=s;if(h){const N=Math.min(this.currentTime,n)/l;let k=Math.floor(N),R=N%1;!R&&N>=1&&(R=1),R===1&&k--,k=Math.min(k,h+1),!!(k%2)&&(f==="reverse"?(R=1-R,p&&(R-=p/l)):f==="mirror"&&(w=a)),v=qt(0,1,R)*l}const E=j?{done:!1,value:d[0]}:w.next(v);o&&(E.value=o(E.value));let{done:O}=E;!j&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return $&&m!==Tc&&(E.value=od(d,this.options,y,this.speed)),b&&b(E.value),$&&this.finish(),E}then(e,r){return this.finished.then(e,r)}get duration(){return Ct(this.calculatedDuration)}get time(){return Ct(this.currentTime)}set time(e){var r;e=Nt(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ke.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=Ct(this.currentTime))}play(){var n,o;if(this.isStopped)return;const{driver:e=VR,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(o=(n=this.options).onPlay)==null||o.call(n);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=r??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ke.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function aI(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Vr=t=>t*180/Math.PI,Pc=t=>{const e=Vr(Math.atan2(t[1],t[0]));return Ec(e)},lI={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Pc,rotateZ:Pc,skewX:t=>Vr(Math.atan(t[1])),skewY:t=>Vr(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Ec=t=>(t=t%360,t<0&&(t+=360),t),Gf=Pc,Wf=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Hf=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),cI={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Wf,scaleY:Hf,scale:t=>(Wf(t)+Hf(t))/2,rotateX:t=>Ec(Vr(Math.atan2(t[6],t[5]))),rotateY:t=>Ec(Vr(Math.atan2(-t[2],t[0]))),rotateZ:Gf,rotate:Gf,skewX:t=>Vr(Math.atan(t[4])),skewY:t=>Vr(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Nc(t){return t.includes("scale")?1:0}function Cc(t,e){if(!t||t==="none")return Nc(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,n;if(r)s=cI,n=r;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=lI,n=l}if(!n)return Nc(e);const o=s[e],a=n[1].split(",").map(dI);return typeof o=="function"?o(a):a[o]}const uI=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return Cc(r,e)};function dI(t){return parseFloat(t.trim())}const bn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xn=new Set(bn),Zf=t=>t===vn||t===Y,hI=new Set(["x","y","z"]),fI=bn.filter(t=>!hI.has(t));function pI(t){const e=[];return fI.forEach(r=>{const s=t.getValue(r);s!==void 0&&(e.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),e}const es={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Cc(e,"x"),y:(t,{transform:e})=>Cc(e,"y")};es.translateX=es.x;es.translateY=es.y;const ts=new Set;let Ac=!1,Oc=!1,Rc=!1;function av(){if(Oc){const t=Array.from(ts).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),r=new Map;e.forEach(s=>{const n=pI(s);n.length&&(r.set(s,n),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const n=r.get(s);n&&n.forEach(([o,a])=>{var l;(l=s.getValue(o))==null||l.set(a)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Oc=!1,Ac=!1,ts.forEach(t=>t.complete(Rc)),ts.clear()}function lv(){ts.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Oc=!0)})}function mI(){Rc=!0,lv(),av(),Rc=!1}class cd{constructor(e,r,s,n,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=s,this.motionValue=n,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(ts.add(this),Ac||(Ac=!0,me.read(lv),me.resolveKeyframes(av))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:s,motionValue:n}=this;if(e[0]===null){const o=n==null?void 0:n.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(s&&r){const l=s.readValue(r,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),n&&o===void 0&&n.set(e[0])}aI(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ts.delete(this)}cancel(){this.state==="scheduled"&&(ts.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const gI=t=>t.startsWith("--");function yI(t,e,r){gI(e)?t.style.setProperty(e,r):t.style[e]=r}const vI=Ku(()=>window.ScrollTimeline!==void 0),bI={};function xI(t,e){const r=Ku(t);return()=>bI[e]??r()}const cv=xI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zn=([t,e,r,s])=>`cubic-bezier(${t}, ${e}, ${r}, ${s})`,Yf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zn([0,.65,.55,1]),circOut:Zn([.55,0,1,.45]),backIn:Zn([.31,.01,.66,-.59]),backOut:Zn([.33,1.53,.69,.99])};function uv(t,e){if(t)return typeof t=="function"?cv()?nv(t,e):"ease-out":Zy(t)?Zn(t):Array.isArray(t)?t.map(r=>uv(r,e)||Yf.easeOut):Yf[t]}function wI(t,e,r,{delay:s=0,duration:n=300,repeat:o=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:r};c&&(d.offset=c);const h=uv(l,n);Array.isArray(h)&&(d.easing=h);const f={delay:s,duration:n,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function dv(t){return typeof t=="function"&&"applyToOptions"in t}function _I({type:t,...e}){return dv(t)&&cv()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class jI extends ad{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:s,keyframes:n,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e,Yu(typeof e.type!="string");const u=_I(e);this.animation=wI(r,s,n,u,o),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const d=od(n,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):yI(r,s,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,s;const e=((s=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:s.call(r).duration)||0;return Ct(Number(e))}get time(){return Ct(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Nt(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&vI()?(this.animation.timeline=e,ot):r(this)}}const hv={anticipate:qy,backInOut:Vy,circInOut:Wy};function SI(t){return t in hv}function kI(t){typeof t.ease=="string"&&SI(t.ease)&&(t.ease=hv[t.ease])}const Kf=10;class TI extends jI{constructor(e){kI(e),ov(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:s,onComplete:n,element:o,...a}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const l=new ld({...a,autoplay:!1}),c=Nt(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-Kf).value,l.sample(c).value,Kf),l.stop()}}const Jf=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(jr.test(t)||t==="0")&&!t.startsWith("url("));function PI(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function EI(t,e,r,s){const n=t[0];if(n===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=Jf(n,e),l=Jf(o,e);return!a||!l?!1:PI(t)||(r==="spring"||dv(r))&&s}function Ic(t){t.duration=0,t.type}const NI=new Set(["opacity","clipPath","filter","transform"]),CI=Ku(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function AI(t){var d;const{motionValue:e,name:r,repeatDelay:s,repeatType:n,damping:o,type:a}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return CI()&&r&&NI.has(r)&&(r!=="transform"||!u)&&!c&&!s&&n!=="mirror"&&o!==0&&a!=="inertia"}const OI=40;class RI extends ad{constructor({autoplay:e=!0,delay:r=0,type:s="keyframes",repeat:n=0,repeatDelay:o=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var m;super(),this.stop=()=>{var b,y;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=Ke.now();const f={autoplay:e,delay:r,type:s,repeat:n,repeatDelay:o,repeatType:a,name:c,motionValue:u,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||cd;this.keyframeResolver=new p(l,(b,y,x)=>this.onKeyframesResolved(b,y,f,!x),c,u,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,r,s,n){this.keyframeResolver=void 0;const{name:o,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:d}=s;this.resolvedAt=Ke.now(),EI(e,o,a,l)||((Gt.instantAnimations||!c)&&(d==null||d(od(e,s,r))),e[0]=e[e.length-1],Ic(s),s.repeat=0);const f={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>OI?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...s,keyframes:e},p=!u&&AI(f)?new TI({...f,element:f.motionValue.owner.current}):new ld(f);p.finished.then(()=>this.notifyFinished()).catch(ot),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),mI()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const II=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $I(t){const e=II.exec(t);if(!e)return[,];const[,r,s,n]=e;return[`--${r??s}`,n]}function fv(t,e,r=1){const[s,n]=$I(t);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const a=o.trim();return $y(a)?parseFloat(a):a}return td(n)?fv(n,e,r+1):n}function ud(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const pv=new Set(["width","height","top","left","right","bottom",...bn]),MI={test:t=>t==="auto",parse:t=>t},mv=t=>e=>e.test(t),gv=[vn,Y,At,rr,PR,TR,MI],Qf=t=>gv.find(mv(t));function DI(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Dy(t):!0}const LI=new Set(["brightness","contrast","saturate","opacity"]);function FI(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=r.match(rd)||[];if(!s)return t;const n=r.replace(s,"");let o=LI.has(e)?1:0;return s!==r&&(o*=100),e+"("+o+n+")"}const zI=/\b([a-z-]*)\(.*?\)/gu,$c={...jr,getAnimatableNone:t=>{const e=t.match(zI);return e?e.map(FI).join(" "):t}},Xf={...vn,transform:Math.round},UI={rotate:rr,rotateX:rr,rotateY:rr,rotateZ:rr,scale:Co,scaleX:Co,scaleY:Co,scaleZ:Co,skew:rr,skewX:rr,skewY:rr,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:yi,originX:zf,originY:zf,originZ:Y},dd={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,backgroundPositionX:Y,backgroundPositionY:Y,...UI,zIndex:Xf,fillOpacity:yi,strokeOpacity:yi,numOctaves:Xf},BI={...dd,color:Ee,backgroundColor:Ee,outlineColor:Ee,fill:Ee,stroke:Ee,borderColor:Ee,borderTopColor:Ee,borderRightColor:Ee,borderBottomColor:Ee,borderLeftColor:Ee,filter:$c,WebkitFilter:$c},yv=t=>BI[t];function vv(t,e){let r=yv(t);return r!==$c&&(r=jr),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const VI=new Set(["auto","none","0"]);function qI(t,e,r){let s=0,n;for(;s<t.length&&!n;){const o=t[s];typeof o=="string"&&!VI.has(o)&&vi(o).values.length&&(n=t[s]),s++}if(n&&r)for(const o of e)t[o]=vv(r,n)}class GI extends cd{constructor(e,r,s,n,o){super(e,r,s,n,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:s}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),td(u))){const d=fv(u,r.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!pv.has(s)||e.length!==2)return;const[n,o]=e,a=Qf(n),l=Qf(o);if(a!==l)if(Zf(a)&&Zf(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else es[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,s=[];for(let n=0;n<e.length;n++)(e[n]===null||DI(e[n]))&&s.push(n);s.length&&qI(e,s,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=es[s](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const n=r[r.length-1];n!==void 0&&e.getValue(s,n).jump(n,!1)}measureEndState(){var l;const{element:e,name:r,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const n=e.getValue(r);n&&n.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=es[r](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function WI(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const n=(r==null?void 0:r[t])??s.querySelectorAll(t);return n?Array.from(n):[]}return Array.from(t)}const bv=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function HI(t){return My(t)&&"offsetHeight"in t}const ep=30,ZI=t=>!isNaN(parseFloat(t));class YI{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var o;const n=Ke.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Ke.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZI(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Ju);const s=this.events[e].add(r);return e==="change"?()=>{s(),me.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,s){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ke.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ep)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,ep);return Ly(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function on(t,e){return new YI(t,e)}const{schedule:hd}=Yy(queueMicrotask,!1),dt={x:!1,y:!1};function xv(){return dt.x||dt.y}function KI(t){return t==="x"||t==="y"?dt[t]?null:(dt[t]=!0,()=>{dt[t]=!1}):dt.x||dt.y?null:(dt.x=dt.y=!0,()=>{dt.x=dt.y=!1})}function wv(t,e){const r=WI(t),s=new AbortController,n={passive:!0,...e,signal:s.signal};return[r,n,()=>s.abort()]}function tp(t){return!(t.pointerType==="touch"||xv())}function JI(t,e,r={}){const[s,n,o]=wv(t,r),a=l=>{if(!tp(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const d=h=>{tp(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,n)};return s.forEach(l=>{l.addEventListener("pointerenter",a,n)}),o}const _v=(t,e)=>e?t===e?!0:_v(t,e.parentElement):!1,fd=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,QI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function XI(t){return QI.has(t.tagName)||t.tabIndex!==-1}const Bo=new WeakSet;function rp(t){return e=>{e.key==="Enter"&&t(e)}}function Dl(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const e$=(t,e)=>{const r=t.currentTarget;if(!r)return;const s=rp(()=>{if(Bo.has(r))return;Dl(r,"down");const n=rp(()=>{Dl(r,"up")}),o=()=>Dl(r,"cancel");r.addEventListener("keyup",n,e),r.addEventListener("blur",o,e)});r.addEventListener("keydown",s,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",s),e)};function sp(t){return fd(t)&&!xv()}function t$(t,e,r={}){const[s,n,o]=wv(t,r),a=l=>{const c=l.currentTarget;if(!sp(l))return;Bo.add(c);const u=e(c,l),d=(p,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Bo.has(c)&&Bo.delete(c),sp(p)&&typeof u=="function"&&u(p,{success:m})},h=p=>{d(p,c===window||c===document||r.useGlobalTarget||_v(c,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,n),window.addEventListener("pointercancel",f,n)};return s.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",a,n),HI(l)&&(l.addEventListener("focus",u=>e$(u,n)),!XI(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function jv(t){return My(t)&&"ownerSVGElement"in t}function r$(t){return jv(t)&&t.tagName==="svg"}const Fe=t=>!!(t&&t.getVelocity),s$=[...gv,Ee,jr],n$=t=>s$.find(mv(t)),Sv=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function i$(t=!0){const e=g.useContext(Wu);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:s,register:n}=e,o=g.useId();g.useEffect(()=>{if(t)return n(o)},[t]);const a=g.useCallback(()=>t&&s&&s(o),[o,s,t]);return!r&&s?[!1,a]:[!0]}const kv=g.createContext({strict:!1}),np={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},an={};for(const t in np)an[t]={isEnabled:e=>np[t].some(r=>!!e[r])};function o$(t){for(const e in t)an[e]={...an[e],...t[e]}}const a$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function la(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||a$.has(t)}let Tv=t=>!la(t);function l$(t){typeof t=="function"&&(Tv=e=>e.startsWith("on")?!la(e):t(e))}try{l$(require("@emotion/is-prop-valid").default)}catch{}function c$(t,e,r){const s={};for(const n in t)n==="values"&&typeof t.values=="object"||(Tv(n)||r===!0&&la(n)||!e&&!la(n)||t.draggable&&n.startsWith("onDrag"))&&(s[n]=t[n]);return s}const Ca=g.createContext({});function Aa(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function bi(t){return typeof t=="string"||Array.isArray(t)}const pd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],md=["initial",...pd];function Oa(t){return Aa(t.animate)||md.some(e=>bi(t[e]))}function Pv(t){return!!(Oa(t)||t.variants)}function u$(t,e){if(Oa(t)){const{initial:r,animate:s}=t;return{initial:r===!1||bi(r)?r:void 0,animate:bi(s)?s:void 0}}return t.inherit!==!1?e:{}}function d$(t){const{initial:e,animate:r}=u$(t,g.useContext(Ca));return g.useMemo(()=>({initial:e,animate:r}),[ip(e),ip(r)])}function ip(t){return Array.isArray(t)?t.join(" "):t}const xi={};function h$(t){for(const e in t)xi[e]=t[e],ed(e)&&(xi[e].isCSSVariable=!0)}function Ev(t,{layout:e,layoutId:r}){return xn.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!xi[t]||t==="opacity")}const f$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},p$=bn.length;function m$(t,e,r){let s="",n=!0;for(let o=0;o<p$;o++){const a=bn[o],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=bv(l,dd[a]);if(!c){n=!1;const d=f$[a]||a;s+=`${d}(${u}) `}r&&(e[a]=u)}}return s=s.trim(),r?s=r(e,n?"":s):n&&(s="none"),s}function gd(t,e,r){const{style:s,vars:n,transformOrigin:o}=t;let a=!1,l=!1;for(const c in e){const u=e[c];if(xn.has(c)){a=!0;continue}else if(ed(c)){n[c]=u;continue}else{const d=bv(u,dd[c]);c.startsWith("origin")?(l=!0,o[c]=d):s[c]=d}}if(e.transform||(a||r?s.transform=m$(e,t.transform,r):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=o;s.transformOrigin=`${c} ${u} ${d}`}}const yd=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Nv(t,e,r){for(const s in e)!Fe(e[s])&&!Ev(s,r)&&(t[s]=e[s])}function g$({transformTemplate:t},e){return g.useMemo(()=>{const r=yd();return gd(r,e,t),Object.assign({},r.vars,r.style)},[e])}function y$(t,e){const r=t.style||{},s={};return Nv(s,r,t),Object.assign(s,g$(t,e)),s}function v$(t,e){const r={},s=y$(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const b$={offset:"stroke-dashoffset",array:"stroke-dasharray"},x$={offset:"strokeDashoffset",array:"strokeDasharray"};function w$(t,e,r=1,s=0,n=!0){t.pathLength=1;const o=n?b$:x$;t[o.offset]=Y.transform(-s);const a=Y.transform(e),l=Y.transform(r);t[o.array]=`${a} ${l}`}function Cv(t,{attrX:e,attrY:r,attrScale:s,pathLength:n,pathSpacing:o=1,pathOffset:a=0,...l},c,u,d){if(gd(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),r!==void 0&&(h.y=r),s!==void 0&&(h.scale=s),n!==void 0&&w$(h,n,o,a,!1)}const Av=()=>({...yd(),attrs:{}}),Ov=t=>typeof t=="string"&&t.toLowerCase()==="svg";function _$(t,e,r,s){const n=g.useMemo(()=>{const o=Av();return Cv(o,e,Ov(s),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};Nv(o,t.style,t),n.style={...o,...n.style}}return n}const j$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vd(t){return typeof t!="string"||t.includes("-")?!1:!!(j$.indexOf(t)>-1||/[A-Z]/u.test(t))}function S$(t,e,r,{latestValues:s},n,o=!1){const l=(vd(t)?_$:v$)(e,s,n,t),c=c$(e,typeof t=="string",o),u=t!==g.Fragment?{...c,...l,ref:r}:{},{children:d}=e,h=g.useMemo(()=>Fe(d)?d.get():d,[d]);return g.createElement(t,{...u,children:h})}function op(t){const e=[{},{}];return t==null||t.values.forEach((r,s)=>{e[0][s]=r.get(),e[1][s]=r.getVelocity()}),e}function bd(t,e,r,s){if(typeof e=="function"){const[n,o]=op(s);e=e(r!==void 0?r:t.custom,n,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[n,o]=op(s);e=e(r!==void 0?r:t.custom,n,o)}return e}function Vo(t){return Fe(t)?t.get():t}function k$({scrapeMotionValuesFromProps:t,createRenderState:e},r,s,n){return{latestValues:T$(r,s,n,t),renderState:e()}}function T$(t,e,r,s){const n={},o=s(t,{});for(const f in o)n[f]=Vo(o[f]);let{initial:a,animate:l}=t;const c=Oa(t),u=Pv(t);e&&u&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const h=d?l:a;if(h&&typeof h!="boolean"&&!Aa(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const m=bd(t,f[p]);if(m){const{transitionEnd:b,transition:y,...x}=m;for(const j in x){let v=x[j];if(Array.isArray(v)){const w=d?v.length-1:0;v=v[w]}v!==null&&(n[j]=v)}for(const j in b)n[j]=b[j]}}}return n}const Rv=t=>(e,r)=>{const s=g.useContext(Ca),n=g.useContext(Wu),o=()=>k$(t,e,s,n);return r?o():oR(o)};function xd(t,e,r){var o;const{style:s}=t,n={};for(const a in s)(Fe(s[a])||e.style&&Fe(e.style[a])||Ev(a,t)||((o=r==null?void 0:r.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(n[a]=s[a]);return n}const P$=Rv({scrapeMotionValuesFromProps:xd,createRenderState:yd});function Iv(t,e,r){const s=xd(t,e,r);for(const n in t)if(Fe(t[n])||Fe(e[n])){const o=bn.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[o]=t[n]}return s}const E$=Rv({scrapeMotionValuesFromProps:Iv,createRenderState:Av}),N$=Symbol.for("motionComponentSymbol");function As(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function C$(t,e,r){return g.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),r&&(typeof r=="function"?r(s):As(r)&&(r.current=s))},[e])}const wd=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),A$="framerAppearId",$v="data-"+wd(A$),Mv=g.createContext({});function O$(t,e,r,s,n){var b,y;const{visualElement:o}=g.useContext(Ca),a=g.useContext(kv),l=g.useContext(Wu),c=g.useContext(Sv).reducedMotion,u=g.useRef(null);s=s||a.renderer,!u.current&&s&&(u.current=s(t,{visualState:e,parent:o,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=g.useContext(Mv);d&&!d.projection&&n&&(d.type==="html"||d.type==="svg")&&R$(u.current,r,n,h);const f=g.useRef(!1);g.useInsertionEffect(()=>{d&&f.current&&d.update(r,l)});const p=r[$v],m=g.useRef(!!p&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,p))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,p)));return aR(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),g.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,p)}),m.current=!1),d.enteringChildren=void 0)}),d}function R$(t,e,r,s){const{layoutId:n,layout:o,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:Dv(t.parent)),t.projection.setOptions({layoutId:n,layout:o,alwaysMeasureLayout:!!a||l&&As(l),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:c,layoutRoot:u})}function Dv(t){if(t)return t.options.allowProjection!==!1?t.projection:Dv(t.parent)}function Ll(t,{forwardMotionProps:e=!1}={},r,s){r&&o$(r);const n=vd(t)?E$:P$;function o(l,c){let u;const d={...g.useContext(Sv),...l,layoutId:I$(l)},{isStatic:h}=d,f=d$(l),p=n(l,h);if(!h&&Gu){$$();const m=M$(d);u=m.MeasureLayout,f.visualElement=O$(t,p,d,s,m.ProjectionNode)}return i.jsxs(Ca.Provider,{value:f,children:[u&&f.visualElement?i.jsx(u,{visualElement:f.visualElement,...d}):null,S$(t,l,C$(p,f.visualElement,c),p,h,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=g.forwardRef(o);return a[N$]=t,a}function I$({layoutId:t}){const e=g.useContext(Iy).id;return e&&t!==void 0?e+"-"+t:t}function $$(t,e){g.useContext(kv).strict}function M$(t){const{drag:e,layout:r}=an;if(!e&&!r)return{};const s={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function D$(t,e){if(typeof Proxy>"u")return Ll;const r=new Map,s=(o,a)=>Ll(o,a,t,e),n=(o,a)=>s(o,a);return new Proxy(n,{get:(o,a)=>a==="create"?s:(r.has(a)||r.set(a,Ll(a,void 0,t,e)),r.get(a))})}function Lv({top:t,left:e,right:r,bottom:s}){return{x:{min:e,max:r},y:{min:t,max:s}}}function L$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function F$(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function Fl(t){return t===void 0||t===1}function Mc({scale:t,scaleX:e,scaleY:r}){return!Fl(t)||!Fl(e)||!Fl(r)}function Fr(t){return Mc(t)||Fv(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Fv(t){return ap(t.x)||ap(t.y)}function ap(t){return t&&t!=="0%"}function ca(t,e,r){const s=t-r,n=e*s;return r+n}function lp(t,e,r,s,n){return n!==void 0&&(t=ca(t,n,s)),ca(t,r,s)+e}function Dc(t,e=0,r=1,s,n){t.min=lp(t.min,e,r,s,n),t.max=lp(t.max,e,r,s,n)}function zv(t,{x:e,y:r}){Dc(t.x,e.translate,e.scale,e.originPoint),Dc(t.y,r.translate,r.scale,r.originPoint)}const cp=.999999999999,up=1.0000000000001;function z$(t,e,r,s=!1){const n=r.length;if(!n)return;e.x=e.y=1;let o,a;for(let l=0;l<n;l++){o=r[l],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Rs(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,zv(t,a)),s&&Fr(o.latestValues)&&Rs(t,o.latestValues))}e.x<up&&e.x>cp&&(e.x=1),e.y<up&&e.y>cp&&(e.y=1)}function Os(t,e){t.min=t.min+e,t.max=t.max+e}function dp(t,e,r,s,n=.5){const o=ve(t.min,t.max,n);Dc(t,e,r,o,s)}function Rs(t,e){dp(t.x,e.x,e.scaleX,e.scale,e.originX),dp(t.y,e.y,e.scaleY,e.scale,e.originY)}function Uv(t,e){return Lv(F$(t.getBoundingClientRect(),e))}function U$(t,e,r){const s=Uv(t,r),{scroll:n}=e;return n&&(Os(s.x,n.offset.x),Os(s.y,n.offset.y)),s}const hp=()=>({translate:0,scale:1,origin:0,originPoint:0}),Is=()=>({x:hp(),y:hp()}),fp=()=>({min:0,max:0}),Pe=()=>({x:fp(),y:fp()}),Lc={current:null},Bv={current:!1};function B$(){if(Bv.current=!0,!!Gu)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Lc.current=t.matches;t.addEventListener("change",e),e()}else Lc.current=!1}const V$=new WeakMap;function q$(t,e,r){for(const s in e){const n=e[s],o=r[s];if(Fe(n))t.addValue(s,n);else if(Fe(o))t.addValue(s,on(n,{owner:t}));else if(o!==n)if(t.hasValue(s)){const a=t.getValue(s);a.liveStyle===!0?a.jump(n):a.hasAnimated||a.set(n)}else{const a=t.getStaticValue(s);t.addValue(s,on(a!==void 0?a:n,{owner:t}))}}for(const s in r)e[s]===void 0&&t.removeValue(s);return e}const pp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class G${scrapeMotionValuesFromProps(e,r,s){return{}}constructor({parent:e,props:r,presenceContext:s,reducedMotionConfig:n,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Ke.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,me.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=Oa(r),this.isVariantNode=Pv(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const p=h[f];c[f]!==void 0&&Fe(p)&&p.set(c[f])}}mount(e){var r;this.current=e,V$.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Bv.current||B$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Lc.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),_r(this.notifyUpdate),_r(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const s=this.features[r];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=xn.has(e);s&&this.onBindTransform&&this.onBindTransform();const n=r.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&me.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{n(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in an){const r=an[e];if(!r)continue;const{isEnabled:s,Feature:n}=r;if(!this.features[e]&&n&&s(this.props)&&(this.features[e]=new n(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<pp.length;s++){const n=pp[s];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const o="on"+n,a=e[o];a&&(this.propEventSubscriptions[n]=this.on(n,a))}this.prevMotionValues=q$(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const s=this.values.get(e);r!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&r!==void 0&&(s=on(r===null?void 0:r,{owner:this}),this.addValue(e,s)),s}readValue(e,r){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&($y(s)||Dy(s))?s=parseFloat(s):!n$(s)&&jr.test(r)&&(s=vv(e,r)),this.setBaseTarget(e,Fe(s)?s.get():s)),Fe(s)?s.get():s}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var o;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const a=bd(this.props,r,(o=this.presenceContext)==null?void 0:o.custom);a&&(s=a[e])}if(r&&s!==void 0)return s;const n=this.getBaseTargetFromProps(this.props,e);return n!==void 0&&!Fe(n)?n:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Ju),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){hd.render(this.render)}}class Vv extends G${constructor(){super(...arguments),this.KeyframeResolver=GI}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:s}){delete r[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fe(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function qv(t,{style:e,vars:r},s,n){const o=t.style;let a;for(a in e)o[a]=e[a];n==null||n.applyProjectionStyles(o,s);for(a in r)o.setProperty(a,r[a])}function W$(t){return window.getComputedStyle(t)}class H$ extends Vv{constructor(){super(...arguments),this.type="html",this.renderInstance=qv}readValueFromInstance(e,r){var s;if(xn.has(r))return(s=this.projection)!=null&&s.isProjecting?Nc(r):uI(e,r);{const n=W$(e),o=(ed(r)?n.getPropertyValue(r):n[r])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Uv(e,r)}build(e,r,s){gd(e,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,r,s){return xd(e,r,s)}}const Gv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Z$(t,e,r,s){qv(t,e,void 0,s);for(const n in e.attrs)t.setAttribute(Gv.has(n)?n:wd(n),e.attrs[n])}class Y$ extends Vv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pe}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(xn.has(r)){const s=yv(r);return s&&s.default||0}return r=Gv.has(r)?r:wd(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,s){return Iv(e,r,s)}build(e,r,s){Cv(e,r,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,r,s,n){Z$(e,r,s,n)}mount(e){this.isSVGTag=Ov(e.tagName),super.mount(e)}}const K$=(t,e)=>vd(t)?new Y$(e):new H$(e,{allowProjection:t!==g.Fragment});function Fs(t,e,r){const s=t.getProps();return bd(s,e,r!==void 0?r:s.custom,t)}const Fc=t=>Array.isArray(t);function J$(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,on(r))}function Q$(t){return Fc(t)?t[t.length-1]||0:t}function X$(t,e){const r=Fs(t,e);let{transitionEnd:s={},transition:n={},...o}=r||{};o={...o,...s};for(const a in o){const l=Q$(o[a]);J$(t,a,l)}}function eM(t){return!!(Fe(t)&&t.add)}function zc(t,e){const r=t.getValue("willChange");if(eM(r))return r.add(e);if(!r&&Gt.WillChange){const s=new Gt.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function Wv(t){return t.props[$v]}const tM=t=>t!==null;function rM(t,{repeat:e,repeatType:r="loop"},s){const n=t.filter(tM),o=e&&r!=="loop"&&e%2===1?0:n.length-1;return n[o]}const sM={type:"spring",stiffness:500,damping:25,restSpeed:10},nM=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),iM={type:"keyframes",duration:.8},oM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aM=(t,{keyframes:e})=>e.length>2?iM:xn.has(t)?t.startsWith("scale")?nM(e[1]):sM:oM;function lM({when:t,delay:e,delayChildren:r,staggerChildren:s,staggerDirection:n,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const _d=(t,e,r,s={},n,o)=>a=>{const l=ud(s,t)||{},c=l.delay||s.delay||0;let{elapsed:u=0}=s;u=u-Nt(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:o?void 0:n};lM(l)||Object.assign(d,aM(t,d)),d.duration&&(d.duration=Nt(d.duration)),d.repeatDelay&&(d.repeatDelay=Nt(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Ic(d),d.delay===0&&(h=!0)),(Gt.instantAnimations||Gt.skipAnimations)&&(h=!0,Ic(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!o&&e.get()!==void 0){const f=rM(d.keyframes,l);if(f!==void 0){me.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new ld(d):new RI(d)};function cM({protectedKeys:t,needsAnimating:e},r){const s=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,s}function Hv(t,e,{delay:r=0,transitionOverride:s,type:n}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;s&&(o=s);const c=[],u=n&&t.animationState&&t.animationState.getState()[n];for(const d in l){const h=t.getValue(d,t.latestValues[d]??null),f=l[d];if(f===void 0||u&&cM(u,d))continue;const p={delay:r,...ud(o||{},d)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===m&&!p.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const x=Wv(t);if(x){const j=window.MotionHandoffAnimation(x,d,me);j!==null&&(p.startTime=j,b=!0)}}zc(t,d),h.start(_d(d,h,f,t.shouldReduceMotion&&pv.has(d)?{type:!1}:p,t,b));const y=h.animation;y&&c.push(y)}return a&&Promise.all(c).then(()=>{me.update(()=>{a&&X$(t,a)})}),c}function Zv(t,e,r,s=0,n=1){const o=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),a=t.size,l=(a-1)*s;return typeof r=="function"?r(o,a):n===1?o*s:l-o*s}function Uc(t,e,r={}){var c;const s=Fs(t,e,r.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:n=t.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(n=r.transitionOverride);const o=s?()=>Promise.all(Hv(t,s,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=n;return uM(t,e,u,d,h,f,r)}:()=>Promise.resolve(),{when:l}=n;if(l){const[u,d]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>d())}else return Promise.all([o(),a(r.delay)])}function uM(t,e,r=0,s=0,n=0,o=1,a){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Uc(c,e,{...a,delay:r+(typeof s=="function"?0:s)+Zv(t.variantChildren,c,s,n,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function dM(t,e,r={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const n=e.map(o=>Uc(t,o,r));s=Promise.all(n)}else if(typeof e=="string")s=Uc(t,e,r);else{const n=typeof e=="function"?Fs(t,e,r.custom):e;s=Promise.all(Hv(t,n,r))}return s.then(()=>{t.notify("AnimationComplete",e)})}function Yv(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let s=0;s<r;s++)if(e[s]!==t[s])return!1;return!0}const hM=md.length;function Kv(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?Kv(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<hM;r++){const s=md[r],n=t.props[s];(bi(n)||n===!1)&&(e[s]=n)}return e}const fM=[...pd].reverse(),pM=pd.length;function mM(t){return e=>Promise.all(e.map(({animation:r,options:s})=>dM(t,r,s)))}function gM(t){let e=mM(t),r=mp(),s=!0;const n=c=>(u,d)=>{var f;const h=Fs(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:m,...b}=h;u={...u,...b,...m}}return u};function o(c){e=c(t)}function a(c){const{props:u}=t,d=Kv(t.parent)||{},h=[],f=new Set;let p={},m=1/0;for(let y=0;y<pM;y++){const x=fM[y],j=r[x],v=u[x]!==void 0?u[x]:d[x],w=bi(v),E=x===c?j.isActive:null;E===!1&&(m=y);let O=v===d[x]&&v!==u[x]&&w;if(O&&s&&t.manuallyAnimateOnMount&&(O=!1),j.protectedKeys={...p},!j.isActive&&E===null||!v&&!j.prevProp||Aa(v)||typeof v=="boolean")continue;const $=yM(j.prevProp,v);let N=$||x===c&&j.isActive&&!O&&w||y>m&&w,k=!1;const R=Array.isArray(v)?v:[v];let T=R.reduce(n(x),{});E===!1&&(T={});const{prevResolvedValues:M={}}=j,J={...M,...T},F=z=>{N=!0,f.has(z)&&(k=!0,f.delete(z)),j.needsAnimating[z]=!0;const V=t.getValue(z);V&&(V.liveStyle=!1)};for(const z in J){const V=T[z],H=M[z];if(p.hasOwnProperty(z))continue;let se=!1;Fc(V)&&Fc(H)?se=!Yv(V,H):se=V!==H,se?V!=null?F(z):f.add(z):V!==void 0&&f.has(z)?F(z):j.protectedKeys[z]=!0}j.prevProp=v,j.prevResolvedValues=T,j.isActive&&(p={...p,...T}),s&&t.blockInitialAnimation&&(N=!1);const C=O&&$;N&&(!C||k)&&h.push(...R.map(z=>{const V={type:x};if(typeof z=="string"&&s&&!C&&t.manuallyAnimateOnMount&&t.parent){const{parent:H}=t,se=Fs(H,z);if(H.enteringChildren&&se){const{delayChildren:le}=se.transition||{};V.delay=Zv(H.enteringChildren,t,le)}}return{animation:z,options:V}}))}if(f.size){const y={};if(typeof u.initial!="boolean"){const x=Fs(t,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(y.transition=x.transition)}f.forEach(x=>{const j=t.getBaseTarget(x),v=t.getValue(x);v&&(v.liveStyle=!0),y[x]=j??null}),h.push({animation:y})}let b=!!h.length;return s&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(b=!1),s=!1,b?e(h):Promise.resolve()}function l(c,u){var h;if(r[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(c,u)}),r[c].isActive=u;const d=a(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>r,reset:()=>{r=mp(),s=!0}}}function yM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Yv(e,t):!1}function Mr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mp(){return{animate:Mr(!0),whileInView:Mr(),whileHover:Mr(),whileTap:Mr(),whileDrag:Mr(),whileFocus:Mr(),exit:Mr()}}class Er{constructor(e){this.isMounted=!1,this.node=e}update(){}}class vM extends Er{constructor(e){super(e),e.animationState||(e.animationState=gM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Aa(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let bM=0;class xM extends Er{constructor(){super(...arguments),this.id=bM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const n=this.node.animationState.setActive("exit",!e);r&&!e&&n.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const wM={animation:{Feature:vM},exit:{Feature:xM}};function wi(t,e,r,s={passive:!0}){return t.addEventListener(e,r,s),()=>t.removeEventListener(e,r)}function Vi(t){return{point:{x:t.pageX,y:t.pageY}}}const _M=t=>e=>fd(e)&&t(e,Vi(e));function oi(t,e,r,s){return wi(t,e,_M(r),s)}const Jv=1e-4,jM=1-Jv,SM=1+Jv,Qv=.01,kM=0-Qv,TM=0+Qv;function qe(t){return t.max-t.min}function PM(t,e,r){return Math.abs(t-e)<=r}function gp(t,e,r,s=.5){t.origin=s,t.originPoint=ve(e.min,e.max,t.origin),t.scale=qe(r)/qe(e),t.translate=ve(r.min,r.max,t.origin)-t.originPoint,(t.scale>=jM&&t.scale<=SM||isNaN(t.scale))&&(t.scale=1),(t.translate>=kM&&t.translate<=TM||isNaN(t.translate))&&(t.translate=0)}function ai(t,e,r,s){gp(t.x,e.x,r.x,s?s.originX:void 0),gp(t.y,e.y,r.y,s?s.originY:void 0)}function yp(t,e,r){t.min=r.min+e.min,t.max=t.min+qe(e)}function EM(t,e,r){yp(t.x,e.x,r.x),yp(t.y,e.y,r.y)}function vp(t,e,r){t.min=e.min-r.min,t.max=t.min+qe(e)}function li(t,e,r){vp(t.x,e.x,r.x),vp(t.y,e.y,r.y)}function rt(t){return[t("x"),t("y")]}const Xv=({current:t})=>t?t.ownerDocument.defaultView:null,bp=(t,e)=>Math.abs(t-e);function NM(t,e){const r=bp(t.x,e.x),s=bp(t.y,e.y);return Math.sqrt(r**2+s**2)}class eb{constructor(e,r,{transformPagePoint:s,contextWindow:n=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Ul(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=NM(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:b}=f,{timestamp:y}=Me;this.history.push({...b,timestamp:y});const{onStart:x,onMove:j}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=zl(p,this.transformPagePoint),me.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:b,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ul(f.type==="pointercancel"?this.lastMoveEventInfo:zl(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,x),b&&b(f,x)},!fd(e))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=s,this.distanceThreshold=a,this.contextWindow=n||window;const l=Vi(e),c=zl(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=Me;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=r;h&&h(e,Ul(c,this.history)),this.removeListeners=zi(oi(this.contextWindow,"pointermove",this.handlePointerMove),oi(this.contextWindow,"pointerup",this.handlePointerUp),oi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_r(this.updatePoint)}}function zl(t,e){return e?{point:e(t.point)}:t}function xp(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ul({point:t},e){return{point:t,delta:xp(t,tb(e)),offset:xp(t,CM(e)),velocity:AM(e,.1)}}function CM(t){return t[0]}function tb(t){return t[t.length-1]}function AM(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,s=null;const n=tb(t);for(;r>=0&&(s=t[r],!(n.timestamp-s.timestamp>Nt(e)));)r--;if(!s)return{x:0,y:0};const o=Ct(n.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const a={x:(n.x-s.x)/o,y:(n.y-s.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function OM(t,{min:e,max:r},s){return e!==void 0&&t<e?t=s?ve(e,t,s.min):Math.max(t,e):r!==void 0&&t>r&&(t=s?ve(r,t,s.max):Math.min(t,r)),t}function wp(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function RM(t,{top:e,left:r,bottom:s,right:n}){return{x:wp(t.x,r,n),y:wp(t.y,e,s)}}function _p(t,e){let r=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,s]=[s,r]),{min:r,max:s}}function IM(t,e){return{x:_p(t.x,e.x),y:_p(t.y,e.y)}}function $M(t,e){let r=.5;const s=qe(t),n=qe(e);return n>s?r=gi(e.min,e.max-s,t.min):s>n&&(r=gi(t.min,t.max-n,e.min)),qt(0,1,r)}function MM(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Bc=.35;function DM(t=Bc){return t===!1?t=0:t===!0&&(t=Bc),{x:jp(t,"left","right"),y:jp(t,"top","bottom")}}function jp(t,e,r){return{min:Sp(t,e),max:Sp(t,r)}}function Sp(t,e){return typeof t=="number"?t:t[e]||0}const LM=new WeakMap;class FM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pe(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:s}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const o=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Vi(h).point)},a=(h,f)=>{const{drag:p,dragPropagation:m,onDragStart:b}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=KI(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rt(x=>{let j=this.getAxisMotionValue(x).get()||0;if(At.test(j)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[x];w&&(j=qe(w)*(parseFloat(j)/100))}}this.originPoint[x]=j}),b&&me.postRender(()=>b(h,f)),zc(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:b,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=f;if(m&&this.currentDirection===null){this.currentDirection=zM(x),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),y&&y(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>rt(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new eb(e,{onSessionStart:o,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:s,contextWindow:Xv(this.visualElement)})}stop(e,r){const s=e||this.latestPointerEvent,n=r||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!n||!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&me.postRender(()=>l(s,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,s){const{drag:n}=this.getProps();if(!s||!Ao(e,n,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=OM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,n=this.constraints;e&&As(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=RM(s.layoutBox,e):this.constraints=!1,this.elastic=DM(r),n!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&rt(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=MM(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!As(e))return!1;const s=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const o=U$(s,n.root,this.visualElement.getTransformPagePoint());let a=IM(n.layout.layoutBox,o);if(r){const l=r(L$(a));this.hasMutatedConstraints=!!l,l&&(a=Lv(l))}return a}startAnimation(e){const{drag:r,dragMomentum:s,dragElastic:n,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=rt(d=>{if(!Ao(d,r,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=n?200:1e6,p=n?40:1e7,m={type:"inertia",velocity:s?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(l)}startAxisValueAnimation(e,r){const s=this.getAxisMotionValue(e);return zc(this.visualElement,e),s.start(_d(e,s,0,r,this.visualElement,!1))}stopAnimation(){rt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){rt(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),n=s[r];return n||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){rt(r=>{const{drag:s}=this.getProps();if(!Ao(r,s,this.currentDirection))return;const{projection:n}=this.visualElement,o=this.getAxisMotionValue(r);if(n&&n.layout){const{min:a,max:l}=n.layout.layoutBox[r];o.set(e[r]-ve(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!As(r)||!s||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};rt(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();n[a]=$M({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),rt(a=>{if(!Ao(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(ve(c,u,n[a]))})}addListeners(){if(!this.visualElement.current)return;LM.set(this.visualElement,this);const e=this.visualElement.current,r=oi(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();As(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,o=n.addEventListener("measure",s);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),me.read(s);const a=wi(window,"resize",()=>this.scalePositionWithinConstraints()),l=n.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(rt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),r(),o(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:n=!1,dragConstraints:o=!1,dragElastic:a=Bc,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:s,dragPropagation:n,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function Ao(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function zM(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class UM extends Er{constructor(e){super(e),this.removeGroupControls=ot,this.removeListeners=ot,this.controls=new FM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ot}unmount(){this.removeGroupControls(),this.removeListeners()}}const kp=t=>(e,r)=>{t&&me.postRender(()=>t(e,r))};class BM extends Er{constructor(){super(...arguments),this.removePointerDownListener=ot}onPointerDown(e){this.session=new eb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Xv(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:s,onPanEnd:n}=this.node.getProps();return{onSessionStart:kp(e),onStart:kp(r),onMove:s,onEnd:(o,a)=>{delete this.session,n&&me.postRender(()=>n(o,a))}}}mount(){this.removePointerDownListener=oi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const qo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Tp(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Wn={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Y.test(t))t=parseFloat(t);else return t;const r=Tp(t,e.target.x),s=Tp(t,e.target.y);return`${r}% ${s}%`}},VM={correct:(t,{treeScale:e,projectionDelta:r})=>{const s=t,n=jr.parse(t);if(n.length>5)return s;const o=jr.createTransformer(t),a=typeof n[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;n[0+a]/=l,n[1+a]/=c;const u=ve(l,c,.5);return typeof n[2+a]=="number"&&(n[2+a]/=u),typeof n[3+a]=="number"&&(n[3+a]/=u),o(n)}};let Bl=!1;class qM extends g.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:s,layoutId:n}=this.props,{projection:o}=e;h$(GM),o&&(r.group&&r.group.add(o),s&&s.register&&n&&s.register(o),Bl&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),qo.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:s,drag:n,isPresent:o}=this.props,{projection:a}=s;return a&&(a.isPresent=o,Bl=!0,n||e.layoutDependency!==r||r===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||me.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),hd.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:n}=e;Bl=!0,n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),s&&s.deregister&&s.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function rb(t){const[e,r]=i$(),s=g.useContext(Iy);return i.jsx(qM,{...t,layoutGroup:s,switchLayoutGroup:g.useContext(Mv),isPresent:e,safeToRemove:r})}const GM={borderRadius:{...Wn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wn,borderTopRightRadius:Wn,borderBottomLeftRadius:Wn,borderBottomRightRadius:Wn,boxShadow:VM};function WM(t,e,r){const s=Fe(t)?t:on(t);return s.start(_d("",s,e,r)),s.animation}const HM=(t,e)=>t.depth-e.depth;class ZM{constructor(){this.children=[],this.isDirty=!1}add(e){Hu(this.children,e),this.isDirty=!0}remove(e){Zu(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(HM),this.isDirty=!1,this.children.forEach(e)}}function YM(t,e){const r=Ke.now(),s=({timestamp:n})=>{const o=n-r;o>=e&&(_r(s),t(o-e))};return me.setup(s,!0),()=>_r(s)}const sb=["TopLeft","TopRight","BottomLeft","BottomRight"],KM=sb.length,Pp=t=>typeof t=="string"?parseFloat(t):t,Ep=t=>typeof t=="number"||Y.test(t);function JM(t,e,r,s,n,o){n?(t.opacity=ve(0,r.opacity??1,QM(s)),t.opacityExit=ve(e.opacity??1,0,XM(s))):o&&(t.opacity=ve(e.opacity??1,r.opacity??1,s));for(let a=0;a<KM;a++){const l=`border${sb[a]}Radius`;let c=Np(e,l),u=Np(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Ep(c)===Ep(u)?(t[l]=Math.max(ve(Pp(c),Pp(u),s),0),(At.test(u)||At.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||r.rotate)&&(t.rotate=ve(e.rotate||0,r.rotate||0,s))}function Np(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const QM=nb(0,.5,Gy),XM=nb(.5,.95,ot);function nb(t,e,r){return s=>s<t?0:s>e?1:r(gi(t,e,s))}function Cp(t,e){t.min=e.min,t.max=e.max}function tt(t,e){Cp(t.x,e.x),Cp(t.y,e.y)}function Ap(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Op(t,e,r,s,n){return t-=e,t=ca(t,1/r,s),n!==void 0&&(t=ca(t,1/n,s)),t}function eD(t,e=0,r=1,s=.5,n,o=t,a=t){if(At.test(e)&&(e=parseFloat(e),e=ve(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=ve(o.min,o.max,s);t===o&&(l-=e),t.min=Op(t.min,e,r,l,n),t.max=Op(t.max,e,r,l,n)}function Rp(t,e,[r,s,n],o,a){eD(t,e[r],e[s],e[n],e.scale,o,a)}const tD=["x","scaleX","originX"],rD=["y","scaleY","originY"];function Ip(t,e,r,s){Rp(t.x,e,tD,r?r.x:void 0,s?s.x:void 0),Rp(t.y,e,rD,r?r.y:void 0,s?s.y:void 0)}function $p(t){return t.translate===0&&t.scale===1}function ib(t){return $p(t.x)&&$p(t.y)}function Mp(t,e){return t.min===e.min&&t.max===e.max}function sD(t,e){return Mp(t.x,e.x)&&Mp(t.y,e.y)}function Dp(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ob(t,e){return Dp(t.x,e.x)&&Dp(t.y,e.y)}function Lp(t){return qe(t.x)/qe(t.y)}function Fp(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class nD{constructor(){this.members=[]}add(e){Hu(this.members,e),e.scheduleRender()}remove(e){if(Zu(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(n=>e===n);if(r===0)return!1;let s;for(let n=r;n>=0;n--){const o=this.members[n];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,r){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,r&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;n===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:s}=e;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iD(t,e,r){let s="";const n=t.x.translate/e.x,o=t.y.translate/e.y,a=(r==null?void 0:r.z)||0;if((n||o||a)&&(s=`translate3d(${n}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:m}=r;u&&(s=`perspective(${u}px) ${s}`),d&&(s+=`rotate(${d}deg) `),h&&(s+=`rotateX(${h}deg) `),f&&(s+=`rotateY(${f}deg) `),p&&(s+=`skewX(${p}deg) `),m&&(s+=`skewY(${m}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const Vl=["","X","Y","Z"],oD=1e3;let aD=0;function ql(t,e,r,s){const{latestValues:n}=e;n[t]&&(r[t]=n[t],e.setStaticValue(t,0),s&&(s[t]=0))}function ab(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=Wv(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:n,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",me,!(n||o))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&ab(s)}function lb({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:s,resetTransform:n}){return class{constructor(a={},l=e==null?void 0:e()){this.id=aD++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(uD),this.nodes.forEach(pD),this.nodes.forEach(mD),this.nodes.forEach(dD)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZM)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Ju),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=jv(a)&&!r$(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;me.read(()=>{h=window.innerWidth}),t(a,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=YM(f,250),qo.hasAnimatedSinceResize&&(qo.hasAnimatedSinceResize=!1,this.nodes.forEach(Bp)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||xD,{onLayoutAnimationStart:b,onLayoutAnimationComplete:y}=u.getProps(),x=!this.targetLayout||!ob(this.targetLayout,p),j=!h&&f;if(this.options.layoutRoot||this.resumeFrom||j||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...ud(m,"layout"),onPlay:b,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(d,j)}else h||Bp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_r(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gD),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ab(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zp);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Up);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(fD),this.nodes.forEach(lD),this.nodes.forEach(cD)):this.nodes.forEach(Up),this.clearAllSnapshots();const l=Ke.now();Me.delta=qt(0,1e3/60,l-Me.timestamp),Me.timestamp=l,Me.isProcessing=!0,Ol.update.process(Me),Ol.preRender.process(Me),Ol.render.process(Me),Me.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hD),this.sharedNodes.forEach(yD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qe(this.snapshot.measuredBox.x)&&!qe(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!n)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!ib(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||Fr(this.latestValues)||d)&&(n(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),wD(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return Pe();const l=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(_D))){const{scroll:d}=this.root;d&&(Os(l.x,d.offset.x),Os(l.y,d.offset.y))}return l}removeElementScroll(a){var c;const l=Pe();if(tt(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&tt(l,a),Os(l.x,h.offset.x),Os(l.y,h.offset.y))}return l}applyTransform(a,l=!1){const c=Pe();tt(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Rs(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Fr(d.latestValues)&&Rs(c,d.latestValues)}return Fr(this.latestValues)&&Rs(c,this.latestValues),c}removeTransform(a){const l=Pe();tt(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Fr(u.latestValues))continue;Mc(u.latestValues)&&u.updateSnapshot();const d=Pe(),h=u.measurePageBox();tt(d,h),Ip(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Fr(this.latestValues)&&Ip(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Me.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Me.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pe(),this.relativeTargetOrigin=Pe(),li(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),tt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pe(),this.targetWithTransforms=Pe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),EM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tt(this.target,this.layout.layoutBox),zv(this.target,this.targetDelta)):tt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pe(),this.relativeTargetOrigin=Pe(),li(this.relativeTargetOrigin,this.target,p.target),tt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Mc(this.parent.latestValues)||Fv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Me.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;tt(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;z$(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Pe());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ap(this.prevProjectionDelta.x,this.projectionDelta.x),Ap(this.prevProjectionDelta.y,this.projectionDelta.y)),ai(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Fp(this.projectionDelta.x,this.prevProjectionDelta.x)||!Fp(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Is(),this.projectionDelta=Is(),this.projectionDeltaWithTransform=Is()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Is();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Pe(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,b=p!==m,y=this.getStack(),x=!y||y.members.length<=1,j=!!(b&&!x&&this.options.crossfade===!0&&!this.path.some(bD));this.animationProgress=0;let v;this.mixTargetDelta=w=>{const E=w/1e3;Vp(h.x,a.x,E),Vp(h.y,a.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(li(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vD(this.relativeTarget,this.relativeTargetOrigin,f,E),v&&sD(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Pe()),tt(v,this.relativeTarget)),b&&(this.animationValues=d,JM(d,u,this.latestValues,E,j,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(_r(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=me.update(()=>{qo.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=on(0)),this.currentAnimation=WM(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&cb(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Pe();const h=qe(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=qe(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}tt(l,c),Rs(l,d),ai(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new nD),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&ql("z",a,u,this.animationValues);for(let d=0;d<Vl.length;d++)ql(`rotate${Vl[d]}`,a,u,this.animationValues),ql(`skew${Vl[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Vo(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Vo(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Fr(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=iD(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),a.transform=h;const{x:f,y:p}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in xi){if(d[m]===void 0)continue;const{correct:b,applyTo:y,isCSSVariable:x}=xi[m],j=h==="none"?d[m]:b(d[m],u);if(y){const v=y.length;for(let w=0;w<v;w++)a[y[w]]=j}else x?this.options.visualElement.renderState.vars[m]=j:a[m]=j}this.options.layoutId&&(a.pointerEvents=u===this?Vo(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(zp),this.root.sharedNodes.clear()}}}function lD(t){t.updateLayout()}function cD(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:n}=t.layout,{animationType:o}=t.options,a=e.source!==t.layout.source;o==="size"?rt(h=>{const f=a?e.measuredBox[h]:e.layoutBox[h],p=qe(f);f.min=s[h].min,f.max=f.min+p}):cb(o,e.layoutBox,s)&&rt(h=>{const f=a?e.measuredBox[h]:e.layoutBox[h],p=qe(s[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const l=Is();ai(l,s,e.layoutBox);const c=Is();a?ai(c,t.applyTransform(n,!0),e.measuredBox):ai(c,s,e.layoutBox);const u=!ib(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const m=Pe();li(m,e.layoutBox,f.layoutBox);const b=Pe();li(b,s,p.layoutBox),ob(m,b)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=m,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function uD(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function dD(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function hD(t){t.clearSnapshot()}function zp(t){t.clearMeasurements()}function Up(t){t.isLayoutDirty=!1}function fD(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Bp(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function pD(t){t.resolveTargetDelta()}function mD(t){t.calcProjection()}function gD(t){t.resetSkewAndRotation()}function yD(t){t.removeLeadSnapshot()}function Vp(t,e,r){t.translate=ve(e.translate,0,r),t.scale=ve(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function qp(t,e,r,s){t.min=ve(e.min,r.min,s),t.max=ve(e.max,r.max,s)}function vD(t,e,r,s){qp(t.x,e.x,r.x,s),qp(t.y,e.y,r.y,s)}function bD(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const xD={duration:.45,ease:[.4,0,.1,1]},Gp=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Wp=Gp("applewebkit/")&&!Gp("chrome/")?Math.round:ot;function Hp(t){t.min=Wp(t.min),t.max=Wp(t.max)}function wD(t){Hp(t.x),Hp(t.y)}function cb(t,e,r){return t==="position"||t==="preserve-aspect"&&!PM(Lp(e),Lp(r),.2)}function _D(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const jD=lb({attachResizeListener:(t,e)=>wi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gl={current:void 0},ub=lb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Gl.current){const t=new jD({});t.mount(window),t.setOptions({layoutScroll:!0}),Gl.current=t}return Gl.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),SD={pan:{Feature:BM},drag:{Feature:UM,ProjectionNode:ub,MeasureLayout:rb}};function Zp(t,e,r){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",r==="Start");const n="onHover"+r,o=s[n];o&&me.postRender(()=>o(e,Vi(e)))}class kD extends Er{mount(){const{current:e}=this.node;e&&(this.unmount=JI(e,(r,s)=>(Zp(this.node,s,"Start"),n=>Zp(this.node,n,"End"))))}unmount(){}}class TD extends Er{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zi(wi(this.node.current,"focus",()=>this.onFocus()),wi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yp(t,e,r){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",r==="Start");const n="onTap"+(r==="End"?"":r),o=s[n];o&&me.postRender(()=>o(e,Vi(e)))}class PD extends Er{mount(){const{current:e}=this.node;e&&(this.unmount=t$(e,(r,s)=>(Yp(this.node,s,"Start"),(n,{success:o})=>Yp(this.node,n,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vc=new WeakMap,Wl=new WeakMap,ED=t=>{const e=Vc.get(t.target);e&&e(t)},ND=t=>{t.forEach(ED)};function CD({root:t,...e}){const r=t||document;Wl.has(r)||Wl.set(r,{});const s=Wl.get(r),n=JSON.stringify(e);return s[n]||(s[n]=new IntersectionObserver(ND,{root:t,...e})),s[n]}function AD(t,e,r){const s=CD(e);return Vc.set(t,r),s.observe(t),()=>{Vc.delete(t),s.unobserve(t)}}const OD={some:0,all:1};class RD extends Er{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:s,amount:n="some",once:o}=e,a={root:r?r.current:void 0,rootMargin:s,threshold:typeof n=="number"?n:OD[n]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return AD(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(ID(e,r))&&this.startObserver()}unmount(){}}function ID({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const $D={inView:{Feature:RD},tap:{Feature:PD},focus:{Feature:TD},hover:{Feature:kD}},MD={layout:{ProjectionNode:ub,MeasureLayout:rb}},DD={...wM,...$D,...SD,...MD},Hl=D$(DD,K$),LD=()=>i.jsx("div",{className:"relative min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-blue-900 flex items-center justify-center",children:i.jsxs(Hl.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:"easeOut"},className:"text-center bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-2 border-green-400 rounded-3xl p-8 md:p-12 shadow-2xl shadow-green-500/25 max-w-2xl mx-auto",children:[i.jsx(Hl.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},className:"mx-auto w-24 h-24 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mb-6 border-4 border-green-200 dark:border-green-700",children:i.jsx(rs,{className:"w-12 h-12 text-green-600 dark:text-green-400"})}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-green-600 via-teal-600 to-green-800 bg-clip-text text-transparent mb-4",children:"Subscription Successful!"}),i.jsx("p",{className:"text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Welcome to the Zoroasterverse! You now have access to all premium content."}),i.jsx(Hl.a,{href:"/account/reading",whileHover:{scale:1.05},whileTap:{scale:.95},className:"inline-block bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg hover:shadow-xl transition-all duration-300",children:"Start Reading"})]})});function Kp(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function FD(...t){return e=>{let r=!1;const s=t.map(n=>{const o=Kp(n,e);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let n=0;n<s.length;n++){const o=s[n];typeof o=="function"?o():Kp(t[n],null)}}}}function db(t){const e=UD(t),r=g.forwardRef((s,n)=>{const{children:o,...a}=s,l=g.Children.toArray(o),c=l.find(VD);if(c){const u=c.props.children,d=l.map(h=>h===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:h);return i.jsx(e,{...a,ref:n,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return i.jsx(e,{...a,ref:n,children:o})});return r.displayName=`${t}.Slot`,r}var zD=db("Slot");function UD(t){const e=g.forwardRef((r,s)=>{const{children:n,...o}=r;if(g.isValidElement(n)){const a=GD(n),l=qD(o,n.props);return n.type!==g.Fragment&&(l.ref=s?FD(s,a):a),g.cloneElement(n,l)}return g.Children.count(n)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var BD=Symbol("radix.slottable");function VD(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===BD}function qD(t,e){const r={...e};for(const s in e){const n=t[s],o=e[s];/^on[A-Z]/.test(s)?n&&o?r[s]=(...l)=>{const c=o(...l);return n(...l),c}:n&&(r[s]=n):s==="style"?r[s]={...n,...o}:s==="className"&&(r[s]=[n,o].filter(Boolean).join(" "))}return{...t,...r}}function GD(t){var s,n;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const Jp=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Qp=hu,hb=(t,e)=>r=>{var s;if((e==null?void 0:e.variants)==null)return Qp(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:o}=e,a=Object.keys(n).map(u=>{const d=r==null?void 0:r[u],h=o==null?void 0:o[u];if(d===null)return null;const f=Jp(d)||Jp(h);return n[u][f]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(m=>{let[b,y]=m;return Array.isArray(y)?y.includes({...o,...l}[b]):{...o,...l}[b]===y})?[...u,h,f]:u},[]);return Qp(t,a,c,r==null?void 0:r.class,r==null?void 0:r.className)},WD=hb("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),HD=g.forwardRef(({className:t,variant:e,size:r,asChild:s=!1,...n},o)=>{const a=s?zD:"button";return i.jsx(a,{className:Xe(WD({variant:e,size:r,className:t})),ref:o,...n})});HD.displayName="Button";const ZD=g.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Xe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ZD.displayName="Card";const YD=g.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Xe("flex flex-col space-y-1.5 p-6",t),...e}));YD.displayName="CardHeader";const KD=g.forwardRef(({className:t,...e},r)=>i.jsx("h3",{ref:r,className:Xe("text-2xl font-semibold leading-none tracking-tight",t),...e}));KD.displayName="CardTitle";const JD=g.forwardRef(({className:t,...e},r)=>i.jsx("p",{ref:r,className:Xe("text-sm text-muted-foreground",t),...e}));JD.displayName="CardDescription";const QD=g.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Xe("p-6 pt-0",t),...e}));QD.displayName="CardContent";const XD=g.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:Xe("flex items-center p-6 pt-0",t),...e}));XD.displayName="CardFooter";const e4=g.forwardRef(({className:t,type:e,...r},s)=>i.jsx("input",{type:e,className:Xe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r}));e4.displayName="Input";var t4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],r4=t4.reduce((t,e)=>{const r=db(`Primitive.${e}`),s=g.forwardRef((n,o)=>{const{asChild:a,...l}=n,c=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{}),s4="Label",fb=g.forwardRef((t,e)=>i.jsx(r4.label,{...t,ref:e,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=t.onMouseDown)==null||n.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));fb.displayName=s4;var pb=fb;const n4=hb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i4=g.forwardRef(({className:t,...e},r)=>i.jsx(pb,{ref:r,className:Xe(n4(),t),...e}));i4.displayName=pb.displayName;const o4={default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent",outline:"text-foreground border border-input hover:bg-accent hover:text-accent-foreground",success:"bg-green-500 text-white hover:bg-green-600 border-transparent"},a4=g.forwardRef(({className:t,variant:e="default",...r},s)=>i.jsx("div",{ref:s,className:Xe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",o4[e],t),...r}));a4.displayName="Badge";const Xp=({supabaseClient:t,user:e})=>{var R,T,M,J;const[r,s]=g.useState(1),[n,o]=g.useState({}),[a,l]=g.useState(1),[c,u]=g.useState(48*60*60),[d,h]=g.useState(null),[f,p]=g.useState(!0);g.useEffect(()=>{(async()=>{if(e){const{data:C,error:L}=await t.from("beta_applications").select("*").eq("user_id",e.id).single();C&&h(C)}p(!1)})()},[e,t]);const m=[{label:"Application"},{label:"Comprehension"},{label:"Calibration"},{label:"Trial Task"}],b=({state:F})=>{const C=F==="done"?"#10B981":F==="current"?"#60A5FA":"#6B7280",L=F==="upcoming"?"#9CA3AF":"#E5E7EB";return i.jsxs("svg",{viewBox:"0 0 64 40",width:"36",height:"24",className:`mountain-icon ${F}`,"aria-hidden":!0,children:[i.jsx("path",{d:"M2 38 L20 12 L28 22 L40 4 L62 38 Z",fill:C,stroke:C,strokeWidth:"1.5"}),i.jsx("path",{d:"M20 12 L24 18 L16 18 Z",fill:L}),i.jsx("path",{d:"M40 4 L44 12 L36 12 Z",fill:L})]})},y=({done:F})=>i.jsx("div",{className:`connector ${F?"done":""}`}),x=()=>i.jsxs("div",{className:"mountain-stepper",children:[i.jsx(y,{done:r>0}),m.map((F,C)=>{const L=C+1,z=L<r?"done":L===r?"current":"upcoming";return i.jsxs(Go.Fragment,{children:[i.jsxs("div",{className:"mountain-step-container",onClick:()=>j(),children:[i.jsx(b,{state:z}),i.jsx("span",{className:`mountain-label ${z}`,children:F.label})]}),i.jsx(y,{done:L<r})]},F.label)})]}),j=F=>{s(6)},v=(F,C,L,z)=>{const V=document.getElementById(F),H=document.getElementById(C);if(V&&H){const se=V.value.trim().split(/\s+/).filter(le=>le.length>0).length;H.textContent=`${se}/${z} words`,H.className="word-count",se<L?H.classList.add("error"):se>z*.9&&H.classList.add("warning")}};g.useEffect(()=>{v("interestStatement","interestWordCount",150,250),v("taste_response","tasteWordCount",0,100),v("overall_assessment","assessmentWordCount",200,300)},[r]),g.useEffect(()=>{let F;return r===4&&(F=setInterval(()=>{u(C=>C<=0?(clearInterval(F),alert("Time expired! Your submission may be marked as late."),0):C-1)},1e3)),()=>clearInterval(F)},[r]);const w=F=>{const C=Math.floor(F/3600),L=Math.floor(F%3600/60),z=F%60;return`${C.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}`},E=F=>{F.preventDefault();const C=new FormData(F.target),L=Object.fromEntries(C.entries()),z=Array.from(document.querySelectorAll('input[name="devices"]:checked')).map(Ra=>Ra.value);L.devices=z;let V=0,H=!1;V+={weekly_deadlines:10,commit_with_extensions:6,prefer_flexible:3,no_commitment:0}[L.betaCommitment]||0,L.betaCommitment==="no_commitment"&&(H=!0),V+={"5_plus":5,"3_4":3,under_3:0}[L.hoursPerWeek]||0,V+={yes_comfortable:5,yes_unsure:2,no:0}[L.portalUse]||0,L.portalUse==="no"&&(H=!0),V=Math.min(V,20);let P=0;L.recentReads.length>0&&L.interestStatement.length>0&&(P=10),V+=P;let B=0;L.priorBeta.length>0&&L.feedbackPhilosophy.length>0&&(B=10),V+=B;let ne=0;L.trackRecord.length>0&&L.communication.length>0&&(ne=10),V+=ne;let Re=0;const et=z.length;et===3?Re+=6:et===2?Re+=4:et===1&&(Re+=2),Re=Math.min(Re,20),V+=Re;let Gi=V>=50&&!H;o(Ra=>({...Ra,stage1:{...L,rawScore:V,passed:Gi,autoFail:H}})),j()},O=F=>{F.preventDefault();const C=new FormData(F.target),L=Object.fromEntries(C.entries());let z=0;const V=38;L.q1==="b"&&(z+=20),L.clarity_feedback.length>0&&L.pacing_feedback.length>0&&(z+=15),L.taste_response.length>0&&(z+=5);let H=z>=V;o(se=>({...se,stage2:{...L,rawScore:z,passed:H}})),j()},$=F=>{F.preventDefault();const C=new FormData(F.target),L=Object.fromEntries(C.entries());let z=0;const V=26;L.worse_passage==="a"&&(z+=15),L.passage_a_analysis.length>0&&L.passage_b_analysis.length>0&&L.priority_fix.length>0&&(z+=5);let H=z>=V;o(se=>({...se,stage3:{...L,rawScore:z,passed:H}})),j()},N=async F=>{F.preventDefault();const C=new FormData(F.target),L=Object.fromEntries(C.entries());let z=0;const V=40;c>0?z+=10:z+=0;const H=document.querySelectorAll(".inline-comment");L.overall_assessment.length>0&&L.chapter_summary.length>0&&H.length>=8?z+=10:L.overall_assessment.length>0&&L.chapter_summary.length>0&&H.length>=4&&(z+=5),H.length>0&&(z+=10),L.chapter_summary.length>0&&(z+=10);let se=z>=V;o(ne=>({...ne,stage4:{...L,rawScore:z,passed:se}}));const le={stage1:.2,stage2:.25,stage3:.2,stage4:.35},I=n.stage1.rawScore/100*(le.stage1*100)+n.stage2.rawScore/60*(le.stage2*100)+n.stage3.rawScore/40*(le.stage3*100)+n.stage4.rawScore/60*(le.stage4*100);o(ne=>({...ne,compositeScore:Math.round(I*10)/10})),s(6);const P={user_id:e==null?void 0:e.id,full_name:n.stage1.fullName,email:n.stage1.email,time_zone:n.stage1.timeZone,country:n.stage1.country,goodreads:n.stage1.goodreads,beta_commitment:n.stage1.betaCommitment,hours_per_week:n.stage1.hoursPerWeek,portal_use:n.stage1.portalUse,recent_reads:n.stage1.recentReads,interest_statement:n.stage1.interestStatement,prior_beta:n.stage1.priorBeta,feedback_philosophy:n.stage1.feedbackPhilosophy,track_record:n.stage1.trackRecord,communication:n.stage1.communication,devices:n.stage1.devices,access_needs:n.stage1.accessNeeds,demographics:n.stage1.demographics,stage1_raw_score:n.stage1.rawScore,stage1_passed:n.stage1.passed,stage1_auto_fail:n.stage1.autoFail,q1:n.stage2.q1,q2:n.stage2.q2,clarity_feedback:n.stage2.clarity_feedback,pacing_analysis:n.stage2.pacing_feedback,taste_alignment:n.stage2.taste_response,stage2_raw_score:n.stage2.rawScore,stage2_passed:n.stage2.passed,worse_passage:n.stage3.worse_passage,passage_a_analysis:n.stage3.passage_a_analysis,passage_b_analysis:n.stage3.passage_b_analysis,priority_fix:n.stage3.priority_fix,stage3_raw_score:n.stage3.rawScore,stage3_passed:n.stage3.passed,overall_assessment:n.stage4.overall_assessment,chapter_summary:n.stage4.chapter_summary,stage4_raw_score:n.stage4.rawScore,stage4_passed:n.stage4.passed,composite_score:n.compositeScore},{error:B}=await t.from("beta_applications").insert([P]);B?(console.error("Error saving beta application:",B),alert("There was an error saving your application. Please try again.")):console.log("Beta application saved successfully!")},k=()=>{l(F=>F+1)};return f?i.jsx("div",{children:"Loading..."}):d?i.jsxs("div",{children:[i.jsx("h2",{children:"Application Status"}),i.jsx("p",{children:"Your application has been submitted."}),i.jsx("pre",{children:JSON.stringify(d,null,2)})]}):i.jsxs("div",{className:"beta-app-container",children:[i.jsxs("div",{className:"beta-app-header",children:[i.jsx("h1",{children:"Zangar/Spandam Beta Reader Program"}),i.jsx("p",{children:"Join our exclusive beta reading community for epic sci-fi/fantasy"})]}),x(),r===1&&i.jsx("div",{id:"stage1",className:"stage-content",children:i.jsxs("form",{onSubmit:E,children:[i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Contact Information"}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"fullName",children:"Full Name *"}),i.jsx("input",{type:"text",id:"fullName",name:"fullName",className:"form-control",required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",children:"Email Address *"}),i.jsx("input",{type:"email",id:"email",name:"email",className:"form-control",required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"timeZone",children:"Time Zone *"}),i.jsxs("select",{id:"timeZone",name:"timeZone",className:"form-control",required:!0,children:[i.jsx("option",{value:"",children:"Select your time zone"}),i.jsx("option",{value:"America/New_York",children:"Eastern Time (UTC-5/-4)"}),i.jsx("option",{value:"America/Chicago",children:"Central Time (UTC-6/-5)"}),i.jsx("option",{value:"America/Denver",children:"Mountain Time (UTC-7/-6)"}),i.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (UTC-8/-7)"}),i.jsx("option",{value:"Europe/London",children:"GMT/BST (UTC+0/+1)"}),i.jsx("option",{value:"Europe/Paris",children:"CET/CEST (UTC+1/+2)"}),i.jsx("option",{value:"Asia/Tokyo",children:"JST (UTC+9)"}),i.jsx("option",{value:"Australia/Sydney",children:"AEST/AEDT (UTC+10/+11)"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",children:"Country"}),i.jsx("input",{type:"text",id:"country",name:"country",className:"form-control"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"goodreads",children:"Goodreads Profile (optional)"}),i.jsx("input",{type:"text",id:"goodreads",name:"goodreads",className:"form-control",placeholder:"https://goodreads.com/user/..."})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Commitment & Availability (Max 20 pts)"}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"betaCommitment",children:"Beta Window Commitment (6-8 weeks) *"}),i.jsxs("select",{id:"betaCommitment",name:"betaCommitment",className:"form-control",required:!0,children:[i.jsx("option",{value:"",children:"Select your commitment level"}),i.jsx("option",{value:"weekly_deadlines",children:"I can commit to weekly deadlines (10 pts)"}),i.jsx("option",{value:"commit_with_extensions",children:"I can commit but may need 1+ extensions (6 pts)"}),i.jsx("option",{value:"prefer_flexible",children:"I prefer flexible deadlines (3 pts)"}),i.jsx("option",{value:"no_commitment",children:"I cannot commit to deadlines (0 pts)"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"hoursPerWeek",children:"Time Budget per Week *"}),i.jsxs("select",{id:"hoursPerWeek",name:"hoursPerWeek",className:"form-control",required:!0,children:[i.jsx("option",{value:"",children:"Select your time availability"}),i.jsx("option",{value:"5_plus",children:"5+ hours per week (5 pts)"}),i.jsx("option",{value:"3_4",children:"3-4 hours per week (3 pts)"}),i.jsx("option",{value:"under_3",children:"Less than 3 hours (0 pts)"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"portalUse",children:"Website Portal Usage *"}),i.jsxs("select",{id:"portalUse",name:"portalUse",className:"form-control",required:!0,children:[i.jsx("option",{value:"",children:"Select your comfort level"}),i.jsx("option",{value:"yes_comfortable",children:"Yes, I'm comfortable using web tools (5 pts)"}),i.jsx("option",{value:"yes_unsure",children:"Yes, but I'm unsure about tech (2 pts)"}),i.jsx("option",{value:"no",children:"No, I prefer other methods (0 pts)"})]})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Genre/Series Alignment (Max 20 pts)"}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"recentReads",children:"Recent Relevant Reads"}),i.jsx("textarea",{id:"recentReads",name:"recentReads",className:"form-control",placeholder:"List 3-5 books you've read in the last 12 months that relate to epic sci-fi/fantasy, Persian/Zoroastrian themes, or big-idea worldbuilding..."})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"interestStatement",children:"Why This Series? (150-250 words) *"}),i.jsx("textarea",{id:"interestStatement",name:"interestStatement",className:"form-control",placeholder:"What specifically interests you about the Zangar/Spandam series? Mention themes like empire vs. kinship, oath/fate dynamics, cliffside megastructures, etc.",required:!0}),i.jsx("div",{className:"word-count",id:"interestWordCount",children:"0/250 words"})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Feedback Experience & Philosophy (Max 20 pts)"}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"priorBeta",children:"Prior Beta/Critique Experience"}),i.jsx("textarea",{id:"priorBeta",name:"priorBeta",className:"form-control",placeholder:"Describe your experience with beta reading, manuscript critiques, or writing groups. Include specific examples and outcomes..."})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"feedbackPhilosophy",children:"Feedback Philosophy *"}),i.jsx("textarea",{id:"feedbackPhilosophy",name:"feedbackPhilosophy",className:"form-control",placeholder:"How do you approach giving feedback? How do you balance honesty with kindness? Describe your method for providing actionable, specific suggestions...",required:!0})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Reliability Signals (Max 20 pts)"}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"trackRecord",children:"Deadline Track Record"}),i.jsx("textarea",{id:"trackRecord",name:"trackRecord",className:"form-control",placeholder:"Provide examples of meeting deadlines in work, volunteer, or creative contexts. Include any verifiable references or public profiles..."})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"communication",children:"Communication Style *"}),i.jsx("textarea",{id:"communication",name:"communication",className:"form-control",placeholder:"How do you handle check-ins and communication? What would you do if you encountered a blocker or needed to request an extension?",required:!0})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Diversity & Coverage (Max 20 pts)"}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Reading Devices/Platforms *"}),i.jsxs("div",{className:"checkbox-group",children:[i.jsxs("div",{className:"checkbox-item",children:[i.jsx("input",{type:"checkbox",id:"desktop",name:"devices",value:"desktop"}),i.jsx("label",{htmlFor:"desktop",children:"Desktop/Laptop"})]}),i.jsxs("div",{className:"checkbox-item",children:[i.jsx("input",{type:"checkbox",id:"mobile",name:"devices",value:"mobile"}),i.jsx("label",{htmlFor:"mobile",children:"Mobile/Tablet"})]}),i.jsxs("div",{className:"checkbox-item",children:[i.jsx("input",{type:"checkbox",id:"ereader",name:"devices",value:"ereader"}),i.jsx("label",{htmlFor:"ereader",children:"E-reader (Kindle, etc.)"})]})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"accessNeeds",children:"Access Needs & Unique Perspectives"}),i.jsx("textarea",{id:"accessNeeds",name:"accessNeeds",className:"form-control",placeholder:"Do you have any access needs, cultural backgrounds (especially Persian/Middle Eastern), military experience, or other perspectives that would add value to our beta program?"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"demographics",children:"Additional Diversity Information"}),i.jsx("textarea",{id:"demographics",name:"demographics",className:"form-control",placeholder:"Any other demographic or experience diversity you'd like to share that would improve our beta reader representation?"})]})]}),i.jsxs("div",{className:"navigation",children:[i.jsx("div",{}),i.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Application"})]})]})}),r===6&&i.jsx("div",{id:"stage2",className:"stage-content",children:i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Stage 2: Reading Comprehension & Taste Fit"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Instructions:"})," Read the excerpt below and answer the questions. This tests your ability to parse complex worldbuilding and provide specific feedback."]}),i.jsxs("div",{className:"excerpt-container",children:[i.jsx("h4",{children:"Sample Excerpt (800 words)"}),i.jsx("p",{className:"excerpt-text",children:"The VÉ™nÄsÅ winds carried more than salt and storm-promise tonight. Hooran felt the weight of unspoken oaths pressing against her temples as she stood upon the Cliffside Sanctum, watching the fires of Spandam flicker like dying stars across the chasm. Each flame represented a choiceâ€”empire or kinship, the Saoshyant's path or the old ways of her mothers."}),i.jsx("p",{className:"excerpt-text",children:'"The Zangar expect answers by dawn," Cyrus said, his voice cutting through the wind-song. His ceremonial armor caught moonlight like captured ice, each plate inscribed with binding-runes that pulsed faintly blue. "The Great Assembly grows restless."'}),i.jsx("p",{className:"excerpt-text",children:"Hooran's fingers traced the oath-scar on her palmâ€”the mark that bound her to choices not yet made. Below, the megastructure of Spandam stretched into darkness, its bio-luminescent veins carrying information like blood through stone arteries. Somewhere in those depths, her brother Darius worked the Deep Forges, unaware that his sister's decision would reshape not just their family's fate, but the balance between the Seven Domains."}),i.jsx("p",{className:"excerpt-text",children:`"The winds know," she whispered, tasting copper and ozone. "They've always known."`})]}),i.jsxs("form",{onSubmit:O,children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx("strong",{children:"Question 1:"})," What is the primary source of tension in this scene?"]}),i.jsxs("select",{className:"form-control",name:"q1",required:!0,children:[i.jsx("option",{value:"",children:"Choose the best answer"}),i.jsx("option",{value:"a",children:"Weather conditions threatening the characters"}),i.jsx("option",{value:"b",children:"Hooran must choose between competing loyalties by dawn"}),i.jsx("option",{value:"c",children:"Cyrus is pressuring Hooran to attack Spandam"}),i.jsx("option",{value:"d",children:"The bio-luminescent technology is failing"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx("strong",{children:"Question 2:"}),' What role do the "VÉ™nÄsÅ winds" serve in this passage?']}),i.jsx("textarea",{className:"form-control",name:"q2",placeholder:"Explain in 2-3 sentences...",required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx("strong",{children:"Feedback Task:"})," Identify one clarity issue and suggest a specific improvement"]}),i.jsx("textarea",{className:"form-control",name:"clarity_feedback",placeholder:"Point to specific lines and explain what's unclear, then suggest how to fix it...",required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx("strong",{children:"Pacing Analysis:"})," How does the pacing work in this excerpt?"]}),i.jsx("textarea",{className:"form-control",name:"pacing_feedback",placeholder:"Analyze the rhythm and flow, citing specific examples...",required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx("strong",{children:"Taste Alignment (100 words):"})," What about this excerpt most engages or loses you?"]}),i.jsx("textarea",{id:"taste_response",className:"form-control",name:"taste_response",placeholder:"Be specific about what works or doesn't work for you as a reader...",required:!0}),i.jsx("div",{className:"word-count",id:"tasteWordCount",children:"0/100 words"})]}),i.jsxs("div",{className:"navigation",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>j(),children:"Back to Application"}),i.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Stage 2"})]})]})]})}),r===3&&i.jsx("div",{id:"stage3",className:"stage-content",children:i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Stage 3: Calibration Test"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Instructions:"})," Compare these two passages and rank which needs more revision. Explain your reasoning."]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"25px",margin:"25px 0"},children:[i.jsxs("div",{className:"excerpt-container",style:{background:"linear-gradient(145deg, #f0f8f0 0%, #e8f4e8 100%)",borderColor:"#90ee90"},children:[i.jsx("h4",{style:{color:"#228b22"},children:"Passage A"}),i.jsx("p",{className:"excerpt-text",children:"The battle raged across the crystalline plains. Warriors fought with determination. Magic crackled through the air as spells were cast by the mages. It was a significant moment in the war. Many would die. The outcome would affect everyone. The protagonist felt conflicted about their role in the violence."})]}),i.jsxs("div",{className:"excerpt-container",style:{background:"linear-gradient(145deg, #fff8dc 0%, #f5f5dc 100%)",borderColor:"#daa520"},children:[i.jsx("h4",{style:{color:"#b8860b"},children:"Passage B"}),i.jsx("p",{className:"excerpt-text",children:"Kara's blade sang against Varek's shield, the impact reverberating through her bones. Around them, the Shattered Fields erupted in cascades of amber lightâ€”each spell-strike from the War-Mages above sending hairline fractures racing through the crystalline ground. She could taste copper and ozone, hear the wet snap of breaking bone somewhere to her left. This was the moment Sehran had warned her about: when ideology met steel, and someone had to choose what they were willing to break."})]})]}),i.jsxs("form",{onSubmit:$,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:i.jsx("strong",{children:"Which passage needs more revision?"})}),i.jsxs("select",{className:"form-control",name:"worse_passage",required:!0,children:[i.jsx("option",{value:"",children:"Choose one"}),i.jsx("option",{value:"a",children:"Passage A"}),i.jsx("option",{value:"b",children:"Passage B"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx("strong",{children:"Analysis of Passage A:"})," Identify strengths and weaknesses"]}),i.jsx("textarea",{className:"form-control",name:"passage_a_analysis",placeholder:"What works and what doesn't? Be specific...",required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx("strong",{children:"Analysis of Passage B:"})," Identify strengths and weaknesses"]}),i.jsx("textarea",{className:"form-control",name:"passage_b_analysis",placeholder:"What works and what doesn't? Be specific...",required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx("strong",{children:"Top Priority Fix:"})," What's the most important issue to address?"]}),i.jsx("textarea",{className:"form-control",name:"priority_fix",placeholder:"Choose the highest-impact problem and suggest a concrete solution...",required:!0})]}),i.jsxs("div",{className:"navigation",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>j(),children:"Back to Stage 2"}),i.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Stage 3"})]})]})]})}),r===4&&i.jsx("div",{id:"stage4",className:"stage-content",children:i.jsxs("div",{className:"form-section",children:[i.jsx("h3",{className:"section-title",children:"Stage 4: Timed Trial Task"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Deadline:"})," You have 48 hours from now to complete this task."]}),i.jsxs("div",{id:"timer",style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a52)",color:"white",padding:"20px",borderRadius:"15px",textAlign:"center",margin:"20px 0",fontSize:"1.5em",fontWeight:"bold"},children:["Time Remaining: ",i.jsx("span",{id:"countdown",children:w(c)})]}),i.jsxs("div",{className:"excerpt-container",children:[i.jsx("h4",{children:"Chapter Excerpt (2,500 words - Sample)"}),i.jsx("p",{children:i.jsx("em",{children:"Read the full chapter and provide detailed feedback using the form below..."})}),i.jsx("div",{style:{height:"350px",overflowY:"auto",background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",padding:"20px",border:"1px solid #d4c5a9",fontStyle:"italic",lineHeight:"1.8",color:"#3c2415"},children:"[Full chapter content would be provided here - this is a placeholder showing the format. The actual implementation would include the complete text with line numbers for reference. Each paragraph would be numbered for easy reference in feedback.]"})]}),i.jsxs("form",{onSubmit:N,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:i.jsx("strong",{children:"Overall Assessment (200-300 words):"})}),i.jsx("textarea",{id:"overall_assessment",className:"form-control",name:"overall_assessment",placeholder:"Provide a comprehensive overview focusing on the top 3 issues that need attention...",required:!0,style:{minHeight:"150px"}}),i.jsx("div",{className:"word-count",id:"assessmentWordCount",children:"0/300 words"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:i.jsx("strong",{children:"Inline Comments (minimum 8):"})}),i.jsx("div",{id:"inline-comments",children:Array.from({length:a}).map((F,C)=>i.jsxs("div",{className:"inline-comment",style:{background:"white",padding:"15px",borderRadius:"8px",marginBottom:"15px",borderLeft:"3px solid #667eea"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"15px"},children:[i.jsxs("div",{children:[i.jsx("label",{children:"Line/Section Reference:"}),i.jsx("input",{type:"text",className:"form-control",name:`comment_ref_${C+1}`,placeholder:"e.g., Line 45, Paragraph 3"})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Issue Type:"}),i.jsxs("select",{className:"form-control",name:`comment_type_${C+1}`,children:[i.jsx("option",{value:"",children:"Select type"}),i.jsx("option",{value:"clarity",children:"Clarity"}),i.jsx("option",{value:"pacing",children:"Pacing"}),i.jsx("option",{value:"continuity",children:"Continuity"}),i.jsx("option",{value:"voice",children:"Voice"}),i.jsx("option",{value:"logic",children:"Logic"}),i.jsx("option",{value:"worldbuilding",children:"Worldbuilding"}),i.jsx("option",{value:"stakes",children:"Stakes/Tension"})]})]})]}),i.jsxs("div",{style:{marginTop:"10px"},children:[i.jsx("label",{children:"Comment & Suggestion:"}),i.jsx("textarea",{className:"form-control",name:`comment_text_${C+1}`,placeholder:"Describe the issue and provide a specific suggestion for improvement..."})]}),C>0&&i.jsx("button",{type:"button",onClick:()=>l(L=>L-1),className:"btn btn-secondary",style:{marginTop:"10px",fontSize:"0.8em",padding:"8px 15px"},children:"Remove Comment"})]},C))}),i.jsx("button",{type:"button",onClick:k,className:"btn btn-secondary",style:{marginTop:"15px"},children:"Add Another Comment"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:i.jsx("strong",{children:"Chapter Summary & Recommendations:"})}),i.jsx("textarea",{className:"form-control",name:"chapter_summary",placeholder:"Summarize your overall thoughts and provide 3 key recommendations for improvement...",required:!0,style:{minHeight:"120px"}})]}),i.jsxs("div",{className:"navigation",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>j(),children:"Back to Stage 3"}),i.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Final Stage"})]})]})]})}),r===5&&i.jsx("div",{id:"admin",className:"stage-content",children:i.jsxs("div",{className:"admin-panel",children:[i.jsx("h3",{className:"section-title",children:"Admin Panel - Beta Reader Applications"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[i.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[i.jsx("h4",{children:"Total Applications"}),i.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#8b4513"},children:"127"})]}),i.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[i.jsx("h4",{children:"Passed Stage 1"}),i.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#228b22"},children:"89"})]}),i.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[i.jsx("h4",{children:"Final Selections"}),i.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#8b4513"},children:"37"})]}),i.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[i.jsx("h4",{children:"Waitlist"}),i.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#b8860b"},children:"15"})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Report generated!"),children:"Generate Final Report"}),i.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Data exported!"),children:"Export Data"}),i.jsx("button",{className:"btn btn-secondary",onClick:()=>{window.confirm("Send selection emails to all applicants? This cannot be undone.")&&alert("Emails sent!")},children:"Send Selection Emails"})]}),i.jsxs("div",{className:"applicant-list",id:"applicantList",children:[i.jsxs("div",{className:"applicant-card",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[i.jsxs("div",{children:[i.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Sarah Chen"}),i.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"sarah.chen @email.com | GMT+8"})]}),i.jsx("span",{className:"status-badge status-passed",children:"Selected"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 1:"})," 87/100"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 2:"})," 52/60"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 3:"})," 34/40"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 4:"})," 55/60"]})]}),i.jsxs("div",{style:{background:"rgba(139, 69, 19, 0.1)",padding:"10px",borderLeft:"3px solid #8b4513"},children:[i.jsx("strong",{children:"Composite Score: 92.1"})," | Strengths: Genre expertise, reliable communication, mobile testing"]})]}),i.jsxs("div",{className:"applicant-card",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[i.jsxs("div",{children:[i.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Marcus Rodriguez"}),i.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"m.rodriguez @email.com | EST"})]}),i.jsx("span",{className:"status-badge status-pending",children:"Waitlist"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 1:"})," 79/100"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 2:"})," 48/60"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 3:"})," 31/40"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 4:"})," 48/60"]})]}),i.jsxs("div",{style:{background:"rgba(218, 165, 32, 0.1)",padding:"10px",borderLeft:"3px solid #daa520"},children:[i.jsx("strong",{children:"Composite Score: 83.7"})," | Strengths: Military background, Persian cultural knowledge"]})]}),i.jsxs("div",{className:"applicant-card",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[i.jsxs("div",{children:[i.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Jennifer Walsh"}),i.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"jen.walsh @email.com | GMT"})]}),i.jsx("span",{className:"status-badge status-failed",children:"Not Selected"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 1:"})," 71/100"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 2:"})," 33/60"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 3:"})," â€”"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stage 4:"})," â€”"]})]}),i.jsxs("div",{style:{background:"rgba(220, 20, 60, 0.1)",padding:"10px",borderLeft:"3px solid #dc143c"},children:[i.jsx("strong",{children:"Composite Score: 45.2"})," | Issues: Failed Stage 2 comprehension, generic feedback"]})]})]})]})}),"            ",r===6&&i.jsxs("div",{className:"score-display",children:["                    ",i.jsx("h2",{style:{marginBottom:"20px"},children:"Application Complete!"}),"                    ",i.jsxs("div",{className:"score-breakdown",children:["                        ",i.jsxs("div",{className:"score-item",children:["                            ",i.jsx("h4",{children:"Stage 1"}),"                            ",i.jsxs("p",{children:[((R=n.stage1)==null?void 0:R.rawScore)||0,"/100"]}),"                        "]}),"                        ",i.jsxs("div",{className:"score-item",children:["                            ",i.jsx("h4",{children:"Stage 2"}),"                            ",i.jsxs("p",{children:[((T=n.stage2)==null?void 0:T.rawScore)||0,"/60"]}),"                        "]}),"                        ",i.jsxs("div",{className:"score-item",children:["                            ",i.jsx("h4",{children:"Stage 3"}),"                            ",i.jsxs("p",{children:[((M=n.stage3)==null?void 0:M.rawScore)||0,"/40"]}),"                        "]}),"                        ",i.jsxs("div",{className:"score-item",children:["                            ",i.jsx("h4",{children:"Stage 4"}),"                            ",i.jsxs("p",{children:[((J=n.stage4)==null?void 0:J.rawScore)||0,"/60"]}),"                        "]}),"                    "]}),"                    ",i.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.3)"},children:["                        ",i.jsxs("h3",{children:["Final Composite Score: ",n.compositeScore||0,"/100"]}),"                        ",i.jsx("p",{style:{marginTop:"15px"},children:"Thank you for your application! We\\'ll be in touch within 1-2 weeks with our decision."}),"                    "]}),"                    ","                    ",i.jsxs("div",{className:"submitted-data",style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.3)"},children:["                        ",i.jsx("h3",{children:"Submitted Application Data for Review"}),"                        ","                        ",n.stage1&&i.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",i.jsx("h4",{children:"Stage 1: Application Form"}),"                                ",Object.entries(n.stage1).map(([F,C])=>i.jsxs("p",{children:[i.jsxs("strong",{children:[F,":"]})," ",JSON.stringify(C)]},F)),"                            "]}),"                        ","                        ",n.stage2&&i.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",i.jsx("h4",{children:"Stage 2: Comprehension Test"}),"                                ",Object.entries(n.stage2).map(([F,C])=>i.jsxs("p",{children:[i.jsxs("strong",{children:[F,":"]})," ",JSON.stringify(C)]},F)),"                            "]}),"                        ","                        ",n.stage3&&i.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",i.jsx("h4",{children:"Stage 3: Calibration Test"}),"                                ",Object.entries(n.stage3).map(([F,C])=>i.jsxs("p",{children:[i.jsxs("strong",{children:[F,":"]})," ",JSON.stringify(C)]},F)),"                            "]}),"                        ","                        ",n.stage4&&i.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",i.jsx("h4",{children:"Stage 4: Timed Trial Task"}),"                                ",Object.entries(n.stage4).map(([F,C])=>i.jsxs("p",{children:[i.jsxs("strong",{children:[F,":"]})," ",JSON.stringify(C)]},F)),"                            "]}),"                    "]}),"                "]})]})},l4=({requireSubscription:t=!1})=>{const{isAuthenticated:e,isSubscribed:r,isLoading:s}=Ai();return s?i.jsx("div",{children:"Loading..."}):e?t&&!r?i.jsx(Jl,{to:"/subscriptions"}):i.jsx(cu,{}):i.jsx(Jl,{to:"/login"})};var qi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},os=typeof window>"u"||"Deno"in globalThis;function Ze(){}function c4(t,e){return typeof t=="function"?t(e):t}function qc(t){return typeof t=="number"&&t>=0&&t!==1/0}function mb(t,e){return Math.max(t+(e||0)-Date.now(),0)}function yr(t,e){return typeof t=="function"?t(e):t}function nt(t,e){return typeof t=="function"?t(e):t}function em(t,e){const{type:r="all",exact:s,fetchStatus:n,predicate:o,queryKey:a,stale:l}=t;if(a){if(s){if(e.queryHash!==jd(a,e.options))return!1}else if(!ji(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||n&&n!==e.state.fetchStatus||o&&!o(e))}function tm(t,e){const{exact:r,status:s,predicate:n,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(_i(e.options.mutationKey)!==_i(o))return!1}else if(!ji(e.options.mutationKey,o))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function jd(t,e){return((e==null?void 0:e.queryKeyHashFn)||_i)(t)}function _i(t){return JSON.stringify(t,(e,r)=>Wc(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function ji(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>ji(t[r],e[r])):!1}function gb(t,e){if(t===e)return t;const r=rm(t)&&rm(e);if(r||Wc(t)&&Wc(e)){const s=r?t:Object.keys(t),n=s.length,o=r?e:Object.keys(e),a=o.length,l=r?[]:{},c=new Set(s);let u=0;for(let d=0;d<a;d++){const h=r?d:o[d];(!r&&c.has(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=gb(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return n===a&&u===n?t:l}return e}function Gc(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function rm(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Wc(t){if(!sm(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!sm(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function sm(t){return Object.prototype.toString.call(t)==="[object Object]"}function u4(t){return new Promise(e=>{setTimeout(e,t)})}function Hc(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?gb(t,e):e}function d4(t,e,r=0){const s=[...t,e];return r&&s.length>r?s.slice(1):s}function h4(t,e,r=0){const s=[e,...t];return r&&s.length>r?s.slice(0,-1):s}var Sd=Symbol();function yb(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Sd?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function f4(t,e){return typeof t=="function"?t(...e):!!t}var qr,or,zs,cm,p4=(cm=class extends qi{constructor(){super();Z(this,qr);Z(this,or);Z(this,zs);U(this,zs,e=>{if(!os&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){S(this,or)||this.setEventListener(S(this,zs))}onUnsubscribe(){var e;this.hasListeners()||((e=S(this,or))==null||e.call(this),U(this,or,void 0))}setEventListener(e){var r;U(this,zs,e),(r=S(this,or))==null||r.call(this),U(this,or,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){S(this,qr)!==e&&(U(this,qr,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof S(this,qr)=="boolean"?S(this,qr):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qr=new WeakMap,or=new WeakMap,zs=new WeakMap,cm),kd=new p4,Us,ar,Bs,um,m4=(um=class extends qi{constructor(){super();Z(this,Us,!0);Z(this,ar);Z(this,Bs);U(this,Bs,e=>{if(!os&&window.addEventListener){const r=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){S(this,ar)||this.setEventListener(S(this,Bs))}onUnsubscribe(){var e;this.hasListeners()||((e=S(this,ar))==null||e.call(this),U(this,ar,void 0))}setEventListener(e){var r;U(this,Bs,e),(r=S(this,ar))==null||r.call(this),U(this,ar,e(this.setOnline.bind(this)))}setOnline(e){S(this,Us)!==e&&(U(this,Us,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return S(this,Us)}},Us=new WeakMap,ar=new WeakMap,Bs=new WeakMap,um),ua=new m4;function Zc(){let t,e;const r=new Promise((n,o)=>{t=n,e=o});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),t(n)},r.reject=n=>{s({status:"rejected",reason:n}),e(n)},r}function g4(t){return Math.min(1e3*2**t,3e4)}function vb(t){return(t??"online")==="online"?ua.isOnline():!0}var bb=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function xb(t){let e=!1,r=0,s;const n=Zc(),o=()=>n.status!=="pending",a=b=>{var y;o()||(f(new bb(b)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>kd.isFocused()&&(t.networkMode==="always"||ua.isOnline())&&t.canRun(),d=()=>vb(t.networkMode)&&t.canRun(),h=b=>{o()||(s==null||s(),n.resolve(b))},f=b=>{o()||(s==null||s(),n.reject(b))},p=()=>new Promise(b=>{var y;s=x=>{(o()||u())&&b(x)},(y=t.onPause)==null||y.call(t)}).then(()=>{var b;s=void 0,o()||(b=t.onContinue)==null||b.call(t)}),m=()=>{if(o())return;let b;const y=r===0?t.initialPromise:void 0;try{b=y??t.fn()}catch(x){b=Promise.reject(x)}Promise.resolve(b).then(h).catch(x=>{var O;if(o())return;const j=t.retry??(os?0:3),v=t.retryDelay??g4,w=typeof v=="function"?v(r,x):v,E=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,x);if(e||!E){f(x);return}r++,(O=t.onFail)==null||O.call(t,r,x),u4(w).then(()=>u()?void 0:p()).then(()=>{e?f(x):m()})})};return{promise:n,status:()=>n.status,cancel:a,continue:()=>(s==null||s(),n),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?m():p().then(m),n)}}var y4=t=>setTimeout(t,0);function v4(){let t=[],e=0,r=l=>{l()},s=l=>{l()},n=y4;const o=l=>{e?t.push(l):n(()=>{r(l)})},a=()=>{const l=t;t=[],l.length&&n(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var De=v4(),Gr,dm,wb=(dm=class{constructor(){Z(this,Gr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qc(this.gcTime)&&U(this,Gr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(os?1/0:5*60*1e3))}clearGcTimeout(){S(this,Gr)&&(clearTimeout(S(this,Gr)),U(this,Gr,void 0))}},Gr=new WeakMap,dm),Vs,qs,st,Wr,Ie,Si,Hr,ht,Mt,hm,b4=(hm=class extends wb{constructor(e){super();Z(this,ht);Z(this,Vs);Z(this,qs);Z(this,st);Z(this,Wr);Z(this,Ie);Z(this,Si);Z(this,Hr);U(this,Hr,!1),U(this,Si,e.defaultOptions),this.setOptions(e.options),this.observers=[],U(this,Wr,e.client),U(this,st,S(this,Wr).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,U(this,Vs,x4(this.options)),this.state=e.state??S(this,Vs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=S(this,Ie))==null?void 0:e.promise}setOptions(e){this.options={...S(this,Si),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,st).remove(this)}setData(e,r){const s=Hc(this.state.data,e,this.options);return te(this,ht,Mt).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(e,r){te(this,ht,Mt).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var s,n;const r=(s=S(this,Ie))==null?void 0:s.promise;return(n=S(this,Ie))==null||n.cancel(e),r?r.then(Ze).catch(Ze):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,Vs))}isActive(){return this.observers.some(e=>nt(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>yr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!mb(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=S(this,Ie))==null||r.continue()}onOnline(){var r;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=S(this,Ie))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),S(this,st).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(S(this,Ie)&&(S(this,Hr)?S(this,Ie).cancel({revert:!0}):S(this,Ie).cancelRetry()),this.scheduleGc()),S(this,st).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||te(this,ht,Mt).call(this,{type:"invalidate"})}async fetch(e,r){var c,u,d,h,f,p,m,b,y,x,j,v;if(this.state.fetchStatus!=="idle"&&((c=S(this,Ie))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(S(this,Ie))return S(this,Ie).continueRetry(),S(this,Ie).promise}if(e&&this.setOptions(e),!this.options.queryFn){const w=this.observers.find(E=>E.options.queryFn);w&&this.setOptions(w.options)}const s=new AbortController,n=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(U(this,Hr,!0),s.signal)})},o=()=>{const w=yb(this.options,r),O=(()=>{const $={client:S(this,Wr),queryKey:this.queryKey,meta:this.meta};return n($),$})();return U(this,Hr,!1),this.options.persister?this.options.persister(w,O,this):w(O)},l=(()=>{const w={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:S(this,Wr),state:this.state,fetchFn:o};return n(w),w})();(u=this.options.behavior)==null||u.onFetch(l,this),U(this,qs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&te(this,ht,Mt).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),U(this,Ie,xb({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onFail:(w,E)=>{te(this,ht,Mt).call(this,{type:"failed",failureCount:w,error:E})},onPause:()=>{te(this,ht,Mt).call(this,{type:"pause"})},onContinue:()=>{te(this,ht,Mt).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const w=await S(this,Ie).start();if(w===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(w),(p=(f=S(this,st).config).onSuccess)==null||p.call(f,w,this),(b=(m=S(this,st).config).onSettled)==null||b.call(m,w,this.state.error,this),w}catch(w){if(w instanceof bb){if(w.silent)return S(this,Ie).promise;if(w.revert){if(this.setState({...S(this,qs),fetchStatus:"idle"}),this.state.data===void 0)throw w;return this.state.data}}throw te(this,ht,Mt).call(this,{type:"error",error:w}),(x=(y=S(this,st).config).onError)==null||x.call(y,w,this),(v=(j=S(this,st).config).onSettled)==null||v.call(j,this.state.data,w,this),w}finally{this.scheduleGc()}}},Vs=new WeakMap,qs=new WeakMap,st=new WeakMap,Wr=new WeakMap,Ie=new WeakMap,Si=new WeakMap,Hr=new WeakMap,ht=new WeakSet,Mt=function(e){const r=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,..._b(s.data,this.options),fetchMeta:e.meta??null};case"success":const n={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return U(this,qs,e.manual?n:void 0),n;case"error":const o=e.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=r(this.state),De.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),S(this,st).notify({query:this,type:"updated",action:e})})},hm);function _b(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function x4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,s=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var jt,fm,w4=(fm=class extends qi{constructor(e={}){super();Z(this,jt);this.config=e,U(this,jt,new Map)}build(e,r,s){const n=r.queryKey,o=r.queryHash??jd(n,r);let a=this.get(o);return a||(a=new b4({client:e,queryKey:n,queryHash:o,options:e.defaultQueryOptions(r),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){S(this,jt).has(e.queryHash)||(S(this,jt).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=S(this,jt).get(e.queryHash);r&&(e.destroy(),r===e&&S(this,jt).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){De.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return S(this,jt).get(e)}getAll(){return[...S(this,jt).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(s=>em(r,s))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(s=>em(e,s)):r}notify(e){De.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){De.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){De.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},jt=new WeakMap,fm),St,Be,Zr,kt,sr,pm,_4=(pm=class extends wb{constructor(e){super();Z(this,kt);Z(this,St);Z(this,Be);Z(this,Zr);this.mutationId=e.mutationId,U(this,Be,e.mutationCache),U(this,St,[]),this.state=e.state||j4(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){S(this,St).includes(e)||(S(this,St).push(e),this.clearGcTimeout(),S(this,Be).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){U(this,St,S(this,St).filter(r=>r!==e)),this.scheduleGc(),S(this,Be).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){S(this,St).length||(this.state.status==="pending"?this.scheduleGc():S(this,Be).remove(this))}continue(){var e;return((e=S(this,Zr))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,u,d,h,f,p,m,b,y,x,j,v,w,E,O,$,N;const r=()=>{te(this,kt,sr).call(this,{type:"continue"})};U(this,Zr,xb({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,R)=>{te(this,kt,sr).call(this,{type:"failed",failureCount:k,error:R})},onPause:()=>{te(this,kt,sr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,Be).canRun(this)}));const s=this.state.status==="pending",n=!S(this,Zr).canStart();try{if(s)r();else{te(this,kt,sr).call(this,{type:"pending",variables:e,isPaused:n}),await((a=(o=S(this,Be).config).onMutate)==null?void 0:a.call(o,e,this));const R=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));R!==this.state.context&&te(this,kt,sr).call(this,{type:"pending",context:R,variables:e,isPaused:n})}const k=await S(this,Zr).start();return await((d=(u=S(this,Be).config).onSuccess)==null?void 0:d.call(u,k,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,k,e,this.state.context)),await((m=(p=S(this,Be).config).onSettled)==null?void 0:m.call(p,k,null,this.state.variables,this.state.context,this)),await((y=(b=this.options).onSettled)==null?void 0:y.call(b,k,null,e,this.state.context)),te(this,kt,sr).call(this,{type:"success",data:k}),k}catch(k){try{throw await((j=(x=S(this,Be).config).onError)==null?void 0:j.call(x,k,e,this.state.context,this)),await((w=(v=this.options).onError)==null?void 0:w.call(v,k,e,this.state.context)),await((O=(E=S(this,Be).config).onSettled)==null?void 0:O.call(E,void 0,k,this.state.variables,this.state.context,this)),await((N=($=this.options).onSettled)==null?void 0:N.call($,void 0,k,e,this.state.context)),k}finally{te(this,kt,sr).call(this,{type:"error",error:k})}}finally{S(this,Be).runNext(this)}}},St=new WeakMap,Be=new WeakMap,Zr=new WeakMap,kt=new WeakSet,sr=function(e){const r=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),De.batch(()=>{S(this,St).forEach(s=>{s.onMutationUpdate(e)}),S(this,Be).notify({mutation:this,type:"updated",action:e})})},pm);function j4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ft,ft,ki,mm,S4=(mm=class extends qi{constructor(e={}){super();Z(this,Ft);Z(this,ft);Z(this,ki);this.config=e,U(this,Ft,new Set),U(this,ft,new Map),U(this,ki,0)}build(e,r,s){const n=new _4({mutationCache:this,mutationId:++Wi(this,ki)._,options:e.defaultMutationOptions(r),state:s});return this.add(n),n}add(e){S(this,Ft).add(e);const r=Oo(e);if(typeof r=="string"){const s=S(this,ft).get(r);s?s.push(e):S(this,ft).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(S(this,Ft).delete(e)){const r=Oo(e);if(typeof r=="string"){const s=S(this,ft).get(r);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&S(this,ft).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Oo(e);if(typeof r=="string"){const s=S(this,ft).get(r),n=s==null?void 0:s.find(o=>o.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const r=Oo(e);if(typeof r=="string"){const n=(s=S(this,ft).get(r))==null?void 0:s.find(o=>o!==e&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){De.batch(()=>{S(this,Ft).forEach(e=>{this.notify({type:"removed",mutation:e})}),S(this,Ft).clear(),S(this,ft).clear()})}getAll(){return Array.from(S(this,Ft))}find(e){const r={exact:!0,...e};return this.getAll().find(s=>tm(r,s))}findAll(e={}){return this.getAll().filter(r=>tm(e,r))}notify(e){De.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return De.batch(()=>Promise.all(e.map(r=>r.continue().catch(Ze))))}},Ft=new WeakMap,ft=new WeakMap,ki=new WeakMap,mm);function Oo(t){var e;return(e=t.options.scope)==null?void 0:e.id}function nm(t){return{onFetch:(e,r)=>{var d,h,f,p,m;const s=e.options,n=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,o=((p=e.state.data)==null?void 0:p.pages)||[],a=((m=e.state.data)==null?void 0:m.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let b=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},x=yb(e.options,e.fetchOptions),j=async(v,w,E)=>{if(b)return Promise.reject();if(w==null&&v.pages.length)return Promise.resolve(v);const $=(()=>{const T={client:e.client,queryKey:e.queryKey,pageParam:w,direction:E?"backward":"forward",meta:e.options.meta};return y(T),T})(),N=await x($),{maxPages:k}=e.options,R=E?h4:d4;return{pages:R(v.pages,N,k),pageParams:R(v.pageParams,w,k)}};if(n&&o.length){const v=n==="backward",w=v?k4:im,E={pages:o,pageParams:a},O=w(s,E);l=await j(E,O,v)}else{const v=t??o.length;do{const w=c===0?a[0]??s.initialPageParam:im(s,l);if(c>0&&w==null)break;l=await j(l,w),c++}while(c<v)}return l};e.options.persister?e.fetchFn=()=>{var b,y;return(y=(b=e.options).persister)==null?void 0:y.call(b,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function im(t,{pages:e,pageParams:r}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,r[s],r):void 0}function k4(t,{pages:e,pageParams:r}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,r[0],r):void 0}var je,lr,cr,Gs,Ws,ur,Hs,Zs,gm,T4=(gm=class{constructor(t={}){Z(this,je);Z(this,lr);Z(this,cr);Z(this,Gs);Z(this,Ws);Z(this,ur);Z(this,Hs);Z(this,Zs);U(this,je,t.queryCache||new w4),U(this,lr,t.mutationCache||new S4),U(this,cr,t.defaultOptions||{}),U(this,Gs,new Map),U(this,Ws,new Map),U(this,ur,0)}mount(){Wi(this,ur)._++,S(this,ur)===1&&(U(this,Hs,kd.subscribe(async t=>{t&&(await this.resumePausedMutations(),S(this,je).onFocus())})),U(this,Zs,ua.subscribe(async t=>{t&&(await this.resumePausedMutations(),S(this,je).onOnline())})))}unmount(){var t,e;Wi(this,ur)._--,S(this,ur)===0&&((t=S(this,Hs))==null||t.call(this),U(this,Hs,void 0),(e=S(this,Zs))==null||e.call(this),U(this,Zs,void 0))}isFetching(t){return S(this,je).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return S(this,lr).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=S(this,je).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=S(this,je).build(this,e),s=r.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(yr(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return S(this,je).findAll(t).map(({queryKey:e,state:r})=>{const s=r.data;return[e,s]})}setQueryData(t,e,r){const s=this.defaultQueryOptions({queryKey:t}),n=S(this,je).get(s.queryHash),o=n==null?void 0:n.state.data,a=c4(e,o);if(a!==void 0)return S(this,je).build(this,s).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return De.batch(()=>S(this,je).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=S(this,je).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=S(this,je);De.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=S(this,je);return De.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},s=De.batch(()=>S(this,je).findAll(t).map(n=>n.cancel(r)));return Promise.all(s).then(Ze).catch(Ze)}invalidateQueries(t,e={}){return De.batch(()=>(S(this,je).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},s=De.batch(()=>S(this,je).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,r);return r.throwOnError||(o=o.catch(Ze)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Ze)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=S(this,je).build(this,e);return r.isStaleByTime(yr(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ze).catch(Ze)}fetchInfiniteQuery(t){return t.behavior=nm(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ze).catch(Ze)}ensureInfiniteQueryData(t){return t.behavior=nm(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ua.isOnline()?S(this,lr).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,je)}getMutationCache(){return S(this,lr)}getDefaultOptions(){return S(this,cr)}setDefaultOptions(t){U(this,cr,t)}setQueryDefaults(t,e){S(this,Gs).set(_i(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...S(this,Gs).values()],r={};return e.forEach(s=>{ji(t,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(t,e){S(this,Ws).set(_i(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...S(this,Ws).values()],r={};return e.forEach(s=>{ji(t,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...S(this,cr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=jd(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Sd&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...S(this,cr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){S(this,je).clear(),S(this,lr).clear()}},je=new WeakMap,lr=new WeakMap,cr=new WeakMap,Gs=new WeakMap,Ws=new WeakMap,ur=new WeakMap,Hs=new WeakMap,Zs=new WeakMap,gm),He,re,Ti,Ve,Yr,Ys,zt,dr,Pi,Ks,Js,Kr,Jr,hr,Qs,ie,Yn,Yc,Kc,Jc,Qc,Xc,eu,tu,jb,ym,P4=(ym=class extends qi{constructor(e,r){super();Z(this,ie);Z(this,He);Z(this,re);Z(this,Ti);Z(this,Ve);Z(this,Yr);Z(this,Ys);Z(this,zt);Z(this,dr);Z(this,Pi);Z(this,Ks);Z(this,Js);Z(this,Kr);Z(this,Jr);Z(this,hr);Z(this,Qs,new Set);this.options=r,U(this,He,e),U(this,dr,null),U(this,zt,Zc()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(S(this,re).addObserver(this),om(S(this,re),this.options)?te(this,ie,Yn).call(this):this.updateResult(),te(this,ie,Qc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ru(S(this,re),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ru(S(this,re),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,te(this,ie,Xc).call(this),te(this,ie,eu).call(this),S(this,re).removeObserver(this)}setOptions(e){const r=this.options,s=S(this,re);if(this.options=S(this,He).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof nt(this.options.enabled,S(this,re))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");te(this,ie,tu).call(this),S(this,re).setOptions(this.options),r._defaulted&&!Gc(this.options,r)&&S(this,He).getQueryCache().notify({type:"observerOptionsUpdated",query:S(this,re),observer:this});const n=this.hasListeners();n&&am(S(this,re),s,this.options,r)&&te(this,ie,Yn).call(this),this.updateResult(),n&&(S(this,re)!==s||nt(this.options.enabled,S(this,re))!==nt(r.enabled,S(this,re))||yr(this.options.staleTime,S(this,re))!==yr(r.staleTime,S(this,re)))&&te(this,ie,Yc).call(this);const o=te(this,ie,Kc).call(this);n&&(S(this,re)!==s||nt(this.options.enabled,S(this,re))!==nt(r.enabled,S(this,re))||o!==S(this,hr))&&te(this,ie,Jc).call(this,o)}getOptimisticResult(e){const r=S(this,He).getQueryCache().build(S(this,He),e),s=this.createResult(r,e);return N4(this,s)&&(U(this,Ve,s),U(this,Ys,this.options),U(this,Yr,S(this,re).state)),s}getCurrentResult(){return S(this,Ve)}trackResult(e,r){return new Proxy(e,{get:(s,n)=>(this.trackProp(n),r==null||r(n),n==="promise"&&!this.options.experimental_prefetchInRender&&S(this,zt).status==="pending"&&S(this,zt).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(s,n))})}trackProp(e){S(this,Qs).add(e)}getCurrentQuery(){return S(this,re)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=S(this,He).defaultQueryOptions(e),s=S(this,He).getQueryCache().build(S(this,He),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(e){return te(this,ie,Yn).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),S(this,Ve)))}createResult(e,r){var k;const s=S(this,re),n=this.options,o=S(this,Ve),a=S(this,Yr),l=S(this,Ys),u=e!==s?e.state:S(this,Ti),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const R=this.hasListeners(),T=!R&&om(e,r),M=R&&am(e,s,r,n);(T||M)&&(h={...h,..._b(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:b,status:y}=h;p=h.data;let x=!1;if(r.placeholderData!==void 0&&p===void 0&&y==="pending"){let R;o!=null&&o.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(R=o.data,x=!0):R=typeof r.placeholderData=="function"?r.placeholderData((k=S(this,Js))==null?void 0:k.state.data,S(this,Js)):r.placeholderData,R!==void 0&&(y="success",p=Hc(o==null?void 0:o.data,R,r),f=!0)}if(r.select&&p!==void 0&&!x)if(o&&p===(a==null?void 0:a.data)&&r.select===S(this,Pi))p=S(this,Ks);else try{U(this,Pi,r.select),p=r.select(p),p=Hc(o==null?void 0:o.data,p,r),U(this,Ks,p),U(this,dr,null)}catch(R){U(this,dr,R)}S(this,dr)&&(m=S(this,dr),p=S(this,Ks),b=Date.now(),y="error");const j=h.fetchStatus==="fetching",v=y==="pending",w=y==="error",E=v&&j,O=p!==void 0,N={status:y,fetchStatus:h.fetchStatus,isPending:v,isSuccess:y==="success",isError:w,isInitialLoading:E,isLoading:E,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:b,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:j,isRefetching:j&&!v,isLoadingError:w&&!O,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:w&&O,isStale:Td(e,r),refetch:this.refetch,promise:S(this,zt),isEnabled:nt(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const R=J=>{N.status==="error"?J.reject(N.error):N.data!==void 0&&J.resolve(N.data)},T=()=>{const J=U(this,zt,N.promise=Zc());R(J)},M=S(this,zt);switch(M.status){case"pending":e.queryHash===s.queryHash&&R(M);break;case"fulfilled":(N.status==="error"||N.data!==M.value)&&T();break;case"rejected":(N.status!=="error"||N.error!==M.reason)&&T();break}}return N}updateResult(){const e=S(this,Ve),r=this.createResult(S(this,re),this.options);if(U(this,Yr,S(this,re).state),U(this,Ys,this.options),S(this,Yr).data!==void 0&&U(this,Js,S(this,re)),Gc(r,e))return;U(this,Ve,r);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,o=typeof n=="function"?n():n;if(o==="all"||!o&&!S(this,Qs).size)return!0;const a=new Set(o??S(this,Qs));return this.options.throwOnError&&a.add("error"),Object.keys(S(this,Ve)).some(l=>{const c=l;return S(this,Ve)[c]!==e[c]&&a.has(c)})};te(this,ie,jb).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&te(this,ie,Qc).call(this)}},He=new WeakMap,re=new WeakMap,Ti=new WeakMap,Ve=new WeakMap,Yr=new WeakMap,Ys=new WeakMap,zt=new WeakMap,dr=new WeakMap,Pi=new WeakMap,Ks=new WeakMap,Js=new WeakMap,Kr=new WeakMap,Jr=new WeakMap,hr=new WeakMap,Qs=new WeakMap,ie=new WeakSet,Yn=function(e){te(this,ie,tu).call(this);let r=S(this,re).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Ze)),r},Yc=function(){te(this,ie,Xc).call(this);const e=yr(this.options.staleTime,S(this,re));if(os||S(this,Ve).isStale||!qc(e))return;const s=mb(S(this,Ve).dataUpdatedAt,e)+1;U(this,Kr,setTimeout(()=>{S(this,Ve).isStale||this.updateResult()},s))},Kc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(S(this,re)):this.options.refetchInterval)??!1},Jc=function(e){te(this,ie,eu).call(this),U(this,hr,e),!(os||nt(this.options.enabled,S(this,re))===!1||!qc(S(this,hr))||S(this,hr)===0)&&U(this,Jr,setInterval(()=>{(this.options.refetchIntervalInBackground||kd.isFocused())&&te(this,ie,Yn).call(this)},S(this,hr)))},Qc=function(){te(this,ie,Yc).call(this),te(this,ie,Jc).call(this,te(this,ie,Kc).call(this))},Xc=function(){S(this,Kr)&&(clearTimeout(S(this,Kr)),U(this,Kr,void 0))},eu=function(){S(this,Jr)&&(clearInterval(S(this,Jr)),U(this,Jr,void 0))},tu=function(){const e=S(this,He).getQueryCache().build(S(this,He),this.options);if(e===S(this,re))return;const r=S(this,re);U(this,re,e),U(this,Ti,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},jb=function(e){De.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(S(this,Ve))}),S(this,He).getQueryCache().notify({query:S(this,re),type:"observerResultsUpdated"})})},ym);function E4(t,e){return nt(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function om(t,e){return E4(t,e)||t.state.data!==void 0&&ru(t,e,e.refetchOnMount)}function ru(t,e,r){if(nt(e.enabled,t)!==!1&&yr(e.staleTime,t)!=="static"){const s=typeof r=="function"?r(t):r;return s==="always"||s!==!1&&Td(t,e)}return!1}function am(t,e,r,s){return(t!==e||nt(s.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Td(t,r)}function Td(t,e){return nt(e.enabled,t)!==!1&&t.isStaleByTime(yr(e.staleTime,t))}function N4(t,e){return!Gc(t.getCurrentResult(),e)}var Sb=g.createContext(void 0),C4=t=>{const e=g.useContext(Sb);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},A4=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(Sb.Provider,{value:t,children:e})),kb=g.createContext(!1),O4=()=>g.useContext(kb);kb.Provider;function R4(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var I4=g.createContext(R4()),$4=()=>g.useContext(I4),M4=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},D4=t=>{g.useEffect(()=>{t.clearReset()},[t])},L4=({result:t,errorResetBoundary:e,throwOnError:r,query:s,suspense:n})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(n&&t.data===void 0||f4(r,[t.error,s])),F4=t=>{if(t.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>e(r(...s)):e(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},z4=(t,e)=>t.isLoading&&t.isFetching&&!e,U4=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,lm=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function B4(t,e,r){var h,f,p,m,b;const s=O4(),n=$4(),o=C4(),a=o.defaultQueryOptions(t);(f=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,a),a._optimisticResults=s?"isRestoring":"optimistic",F4(a),M4(a,n),D4(n);const l=!o.getQueryCache().get(a.queryHash),[c]=g.useState(()=>new e(o,a)),u=c.getOptimisticResult(a),d=!s&&t.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(y=>{const x=d?c.subscribe(De.batchCalls(y)):Ze;return c.updateResult(),x},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),g.useEffect(()=>{c.setOptions(a)},[a,c]),U4(a,u))throw lm(a,c,n);if(L4({result:u,errorResetBoundary:n,throwOnError:a.throwOnError,query:o.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((m=(p=o.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,a,u),a.experimental_prefetchInRender&&!os&&z4(u,s)){const y=l?lm(a,c,n):(b=o.getQueryCache().get(a.queryHash))==null?void 0:b.promise;y==null||y.catch(Ze).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function su(t,e){return B4(t,P4)}const V4=({userId:t,isSubscribed:e,subscriptionTier:r="free",betaReaderStatus:s,subscriptionEndDate:n,booksRead:o,readingHours:a,currentlyReading:l,achievements:c,username:u,onSignOut:d})=>{const{data:h,isLoading:f,isError:p}=su({queryKey:["userActivities",t],queryFn:async()=>{const{data:w,error:E}=await pe.from("user_activities").select("*").eq("user_id",t).order("timestamp",{ascending:!1}).limit(5);if(E)throw E;return w},enabled:!!t});if(f)return i.jsx("div",{className:"text-gray-100",children:"Loading activities..."});if(p)return i.jsx("div",{className:"text-red-400",children:"Error loading activities."});const m=[{label:"Books Read",value:o,icon:i.jsx(Et,{size:20,className:"text-indigo-400"})},{label:"Reading Hours",value:`${a}h`,icon:i.jsx(pr,{size:20,className:"text-green-400"})},{label:"Currently Reading",value:l||"None",icon:i.jsx(mg,{size:20,className:"text-blue-400"})},{label:"Achievements",value:c,icon:i.jsx(bu,{size:20,className:"text-yellow-400"})}],b=n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,x=(w=>{switch(w){case"premium":return{name:"Premium",color:"bg-blue-500"};case"patron":return{name:"Patron",color:"bg-purple-500"};default:return{name:"Free",color:"bg-gray-500"}}})(r),v=(w=>{switch(w){case"approved":return{text:"Beta Reader",color:"bg-green-500",icon:i.jsx(rs,{size:16})};case"pending":return{text:"Application Pending",color:"bg-yellow-500",icon:i.jsx(pr,{size:16})};case"rejected":return{text:"Application Rejected",color:"bg-red-500",icon:i.jsx(bg,{size:16})};default:return{text:"Not Applied",color:"bg-gray-500",icon:i.jsx(en,{size:16})}}})(s);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Account Dashboard"}),i.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",u||"User"]})]}),i.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:[i.jsx(yg,{size:16}),"Sign Out"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Subscription Status"}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${x.color}`}),i.jsxs("span",{className:"text-white",children:[x.name," Tier"]})]}),e&&n&&i.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Renews on ",b]})]}),i.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:i.jsx(ss,{size:24,className:"text-yellow-400"})})]}),!e&&i.jsx("button",{className:"mt-4 w-full py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium",children:"Upgrade Plan"})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Beta Reader Program"}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${v.color}`}),i.jsx("span",{className:"text-white",children:v.text})]}),s==="not_applied"&&i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Apply to get early access to new content"}),s==="pending"&&i.jsx("p",{className:"text-sm text-yellow-400 mt-1",children:"We'll review your application soon"})]}),i.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:v.icon})]}),s==="approved"?i.jsxs(vr,{to:"/beta/portal",className:"mt-4 w-full py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[i.jsx(Et,{size:16}),"Go to Beta Portal"]}):i.jsx(vr,{to:s==="not_applied"?"/beta/application":"/beta/status",className:"mt-4 w-full block text-center py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium",children:s==="not_applied"?"Apply Now":"View Application Status"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:m.map((w,E)=>i.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:w.value}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:w.label})]}),i.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:w.icon})]})},E))}),i.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl border border-gray-800 overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Recent Activity"}),i.jsx("div",{className:"space-y-4",children:h&&h.length>0?h.map(w=>i.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-800/50 rounded-lg transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[w.cover_image_url?i.jsx("img",{src:w.cover_image_url,alt:w.item_title,className:"w-12 h-12 object-cover rounded-lg"}):i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${w.status==="completed"?"bg-green-600/20":"bg-indigo-600/20"}`,children:w.status==="completed"?i.jsx(rs,{className:"w-6 h-6 text-green-400"}):i.jsx(Et,{className:"w-6 h-6 text-indigo-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white",children:w.item_title}),i.jsx("p",{className:"text-sm text-gray-400",children:w.status==="completed"?"Completed":"In Progress"})]})]}),w.status!=="completed"&&i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:`${w.progress/(w.total_progress||100)*100}%`}})}),i.jsx("button",{className:"text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:"Resume"})]})]},w.id)):i.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent activity"})})]})})]})},q4=()=>{const[t,e]=g.useState({fullName:"",bio:"",location:"",website:""}),r=n=>{const{name:o,value:a}=n.target;e(l=>({...l,[o]:a}))},s=n=>{n.preventDefault(),console.log("Profile updated:",t)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Profile Settings"}),i.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your personal information and account settings."})]}),i.jsxs("form",{onSubmit:s,className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:i.jsx(en,{className:"w-12 h-12 text-gray-400"})}),i.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-primary rounded-full p-2 shadow-lg transform translate-y-1/3 group-hover:translate-y-0 transition-transform duration-200",children:i.jsxs("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-white",children:"Profile Photo"}),i.jsx("p",{className:"text-sm text-gray-400",children:"JPG, GIF or PNG. Max size of 2MB"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Full Name"}),i.jsx("input",{type:"text",id:"fullName",name:"fullName",value:t.fullName,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Enter your full name"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-300 mb-1",children:"Location"}),i.jsx("input",{type:"text",id:"location",name:"location",value:t.location,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Your location"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-300 mb-1",children:"Website"}),i.jsx("input",{type:"url",id:"website",name:"website",value:t.website,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"https://yourwebsite.com"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-300 mb-1",children:"Bio"}),i.jsx("textarea",{id:"bio",name:"bio",rows:4,value:t.bio,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Tell us about yourself..."})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-600 rounded-lg text-white hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors duration-200 font-medium",children:"Save Changes"})]})]})]})},G4=[{id:1,title:"The Gathas of Zarathushtra",author:"Zarathushtra",cover:"/covers/gathas.jpg",progress:75,lastRead:"2 days ago",totalPages:320,currentPage:240,category:"Religious Text"},{id:2,title:"The Denkard",author:"Various Authors",cover:"/covers/denkard.jpg",progress:30,lastRead:"1 week ago",totalPages:450,currentPage:135,category:"Religious Text"},{id:3,title:"Zoroastrianism: An Introduction",author:"Jenny Rose",cover:"/covers/zoroastrianism-intro.jpg",progress:100,lastRead:"3 weeks ago",totalPages:280,currentPage:280,category:"Non-Fiction"}],W4=()=>{const[t,e]=g.useState("all"),r=G4.filter(s=>t==="all"?!0:t==="reading"?s.progress<100:s.progress===100);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reading History"}),i.jsx("p",{className:"text-gray-400 mt-1",children:"Track your reading progress and history."})]}),i.jsx("div",{className:"flex space-x-2 mb-6 p-1 bg-gray-800/50 rounded-lg",children:[{id:"all",label:"All Books"},{id:"reading",label:"Currently Reading"},{id:"completed",label:"Completed"}].map(s=>i.jsx("button",{onClick:()=>e(s.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${t===s.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:s.label},s.id))}),i.jsx("div",{className:"space-y-6",children:r.length>0?r.map(s=>i.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[i.jsx("div",{className:"w-full md:w-32 flex-shrink-0",children:i.jsx("div",{className:"aspect-[2/3] bg-gray-700 rounded-lg overflow-hidden",children:i.jsx("img",{src:s.cover,alt:s.title,className:"w-full h-full object-cover",onError:n=>{const o=n.target;o.src="https://via.placeholder.com/150x225?text=No+Cover"}})})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:s.title}),i.jsx("p",{className:"text-gray-400",children:s.author})]}),i.jsx("span",{className:"px-3 py-1 text-xs bg-gray-700 text-gray-300 rounded-full",children:s.category})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[i.jsxs("span",{children:["Progress: ",s.progress,"%"]}),i.jsxs("span",{children:["Page ",s.currentPage," of ",s.totalPages]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${s.progress}%`}})})]})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-400",children:["Last read ",s.lastRead]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-primary/10 hover:bg-primary/20 rounded-lg transition-colors",children:s.progress<100?"Continue Reading":"Read Again"}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})})})]})]})]})})]})})},s.id)):i.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[i.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:i.jsx(Et,{className:"w-8 h-8 text-gray-500"})}),i.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"No books found"}),i.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:t==="all"?"You haven't added any books to your library yet.":t==="reading"?"You don't have any books in progress.":"You haven't completed any books yet."}),i.jsx("button",{className:"mt-4 px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-lg transition-colors",children:"Browse Library"})]})})]})},Zl=[{id:1,title:"First Steps",description:"Complete your first reading session",icon:"ðŸ†",progress:100,unlocked:!0,date:"2023-10-15",rarity:"common"},{id:2,title:"Book Worm",description:"Read for 10 hours",icon:"ðŸ“š",progress:75,unlocked:!1,date:null,rarity:"uncommon"},{id:3,title:"Zoroastrian Scholar",description:"Read all core Zoroastrian texts",icon:"ðŸ“œ",progress:30,unlocked:!1,date:null,rarity:"rare"},{id:4,title:"Daily Devotee",description:"Read for 7 days in a row",icon:"ðŸ”¥",progress:42,unlocked:!1,date:null,rarity:"uncommon"},{id:5,title:"Knowledge Seeker",description:"Complete 50 reading sessions",icon:"ðŸ”",progress:100,unlocked:!0,date:"2023-11-02",rarity:"rare"},{id:6,title:"Wisdom Keeper",description:"Achieve 100% completion on any text",icon:"ðŸ§ ",progress:0,unlocked:!1,date:null,rarity:"epic"}],H4=t=>{switch(t){case"common":return"bg-gray-500/20 border-gray-500";case"uncommon":return"bg-emerald-500/20 border-emerald-500";case"rare":return"bg-blue-500/20 border-blue-500";case"epic":return"bg-purple-500/20 border-purple-500";case"legendary":return"bg-amber-500/20 border-amber-500";default:return"bg-gray-500/20 border-gray-500"}},Z4=()=>{const[t,e]=g.useState("all"),r=Zl.filter(a=>t==="all"?!0:t==="unlocked"?a.unlocked:!a.unlocked),s=Zl.filter(a=>a.unlocked).length,n=Zl.length,o=Math.round(s/n*100);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Achievements"}),i.jsx("p",{className:"text-gray-400 mt-1",children:"Track your progress and unlock new milestones."})]}),i.jsx("div",{className:"bg-gray-800/50 rounded-xl p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("h3",{className:"text-lg font-medium text-white",children:"Achievement Progress"}),i.jsxs("p",{className:"text-gray-400",children:[s," of ",n," achievements unlocked"]})]}),i.jsxs("div",{className:"w-full md:w-64",children:[i.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/70 rounded-full transition-all duration-1000",style:{width:`${o}%`}})}),i.jsxs("p",{className:"text-sm text-right text-gray-400 mt-1",children:[o,"% Complete"]})]})]})}),i.jsx("div",{className:"flex space-x-2 p-1 bg-gray-800/50 rounded-lg",children:[{id:"all",label:"All Achievements"},{id:"unlocked",label:"Unlocked"},{id:"locked",label:"Locked"}].map(a=>i.jsx("button",{onClick:()=>e(a.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${t===a.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:a.label},a.id))}),r.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(a=>i.jsxs("div",{className:`relative p-5 rounded-xl border-2 transition-all duration-200 ${a.unlocked?H4(a.rarity):"bg-gray-800/30 border-gray-700 opacity-60"}`,children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"flex-shrink-0 w-14 h-14 rounded-full bg-gray-700 flex items-center justify-center text-2xl",children:a.icon}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:`text-lg font-semibold ${a.unlocked?"text-white":"text-gray-400"}`,children:a.title}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:a.description}),!a.unlocked&&i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:i.jsx("div",{className:"bg-primary h-1.5 rounded-full",style:{width:`${a.progress}%`}})}),i.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[a.progress,"% complete"]})]})]})]}),a.unlocked&&a.date&&i.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700",children:i.jsxs("p",{className:"text-xs text-gray-400",children:["Unlocked on ",new Date(a.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})}),a.unlocked&&i.jsx("div",{className:"absolute top-3 right-3",children:i.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]},a.id))}):i.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[i.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:i.jsx(bu,{className:"w-8 h-8 text-gray-500"})}),i.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:t==="unlocked"?"You haven't unlocked any achievements yet":"No locked achievements found"}),i.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:t==="unlocked"?"Start reading and completing texts to unlock achievements!":"You've unlocked all available achievements! More coming soon."})]})]})},Y4=()=>{const[t,e]=g.useState({theme:"dark",fontSize:"medium",notifications:!0,emailNotifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,readingMode:"paginated",autoSave:!0,showProgress:!0,showWordCount:!0}),r=l=>{const{name:c,value:u,type:d}=l.target,h=l.target.checked;e(f=>({...f,[c]:d==="checkbox"?h:u}))},s=l=>{l.preventDefault(),console.log("Saving settings:",t)},n=()=>{window.confirm("Are you sure you want to reset all preferences to default?")&&e({theme:"dark",fontSize:"medium",notifications:!0,emailNotifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,readingMode:"paginated",autoSave:!0,showProgress:!0,showWordCount:!0})},o=({title:l,children:c})=>i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-white",children:l}),i.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-gray-700",children:c})]}),a=({label:l,description:c,children:u})=>i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 py-3 border-b border-gray-700/50 last:border-0",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-sm font-medium text-white",children:l}),c&&i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:c})]}),i.jsx("div",{className:"sm:w-48",children:u})]});return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Preferences"}),i.jsx("p",{className:"text-gray-400 mt-1",children:"Customize your experience on our platform."})]}),i.jsxs("form",{onSubmit:s,className:"space-y-8",children:[i.jsxs(o,{title:"Appearance",children:[i.jsx(a,{label:"Theme",description:"Choose between light and dark themes",children:i.jsxs("select",{name:"theme",value:t.theme,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[i.jsx("option",{value:"light",children:"Light"}),i.jsx("option",{value:"dark",children:"Dark"}),i.jsx("option",{value:"system",children:"System Default"})]})}),i.jsx(a,{label:"Font Size",description:"Adjust the text size across the application",children:i.jsxs("select",{name:"fontSize",value:t.fontSize,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[i.jsx("option",{value:"small",children:"Small"}),i.jsx("option",{value:"medium",children:"Medium"}),i.jsx("option",{value:"large",children:"Large"})]})})]}),i.jsxs(o,{title:"Notifications",children:[i.jsx(a,{label:"Enable Notifications",description:"Receive browser notifications",children:i.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[i.jsx("input",{type:"checkbox",name:"notifications",id:"notifications",checked:t.notifications,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),i.jsx("label",{htmlFor:"notifications",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${t.notifications?"bg-primary":"bg-gray-600"}`})]})}),i.jsx(a,{label:"Email Notifications",description:"Receive notifications via email",children:i.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[i.jsx("input",{type:"checkbox",name:"emailNotifications",id:"emailNotifications",checked:t.emailNotifications,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),i.jsx("label",{htmlFor:"emailNotifications",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${t.emailNotifications?"bg-primary":"bg-gray-600"}`})]})})]}),i.jsxs(o,{title:"Reading",children:[i.jsx(a,{label:"Reading Mode",description:"Choose how content is displayed",children:i.jsxs("select",{name:"readingMode",value:t.readingMode,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[i.jsx("option",{value:"paginated",children:"Paginated"}),i.jsx("option",{value:"scrolling",children:"Scrolling"})]})}),i.jsx(a,{label:"Auto-save Progress",description:"Automatically save your reading progress",children:i.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[i.jsx("input",{type:"checkbox",name:"autoSave",id:"autoSave",checked:t.autoSave,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),i.jsx("label",{htmlFor:"autoSave",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${t.autoSave?"bg-primary":"bg-gray-600"}`})]})}),i.jsx(a,{label:"Show Reading Progress",description:"Display progress indicators while reading",children:i.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[i.jsx("input",{type:"checkbox",name:"showProgress",id:"showProgress",checked:t.showProgress,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),i.jsx("label",{htmlFor:"showProgress",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${t.showProgress?"bg-primary":"bg-gray-600"}`})]})}),i.jsx(a,{label:"Show Word Count",description:"Display word count for texts",children:i.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[i.jsx("input",{type:"checkbox",name:"showWordCount",id:"showWordCount",checked:t.showWordCount,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),i.jsx("label",{htmlFor:"showWordCount",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${t.showWordCount?"bg-primary":"bg-gray-600"}`})]})})]}),i.jsxs(o,{title:"Language & Region",children:[i.jsx(a,{label:"Language",description:"Select your preferred language",children:i.jsxs("select",{name:"language",value:t.language,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[i.jsx("option",{value:"en",children:"English"}),i.jsx("option",{value:"es",children:"EspaÃ±ol"}),i.jsx("option",{value:"fr",children:"FranÃ§ais"}),i.jsx("option",{value:"de",children:"Deutsch"}),i.jsx("option",{value:"fa",children:"ÙØ§Ø±Ø³ÛŒ"}),i.jsx("option",{value:"gu",children:"àª—à«àªœàª°àª¾àª¤à«€"})]})}),i.jsx(a,{label:"Time Zone",description:"Set your local time zone",children:i.jsxs("select",{name:"timezone",value:t.timezone,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[i.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),i.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),i.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),i.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),i.jsx("option",{value:"Europe/London",children:"London (GMT)"}),i.jsx("option",{value:"Europe/Paris",children:"Paris (CET)"}),i.jsx("option",{value:"Asia/Tehran",children:"Tehran (IRST)"}),i.jsx("option",{value:"Asia/Kolkata",children:"Mumbai (IST)"})]})})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 pt-6 border-t border-gray-700",children:[i.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:"Reset to Defaults"}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium border border-gray-600 text-gray-300 hover:bg-gray-700/50 rounded-lg transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-lg transition-colors",children:"Save Changes"})]})]})]}),i.jsx("style",{children:`
        .toggle-checkbox:checked {
          right: 0;
          border-color: #68D391;
        }
        .toggle-checkbox:checked + .toggle-label {
          background-color: #68D391;
        }
      `})]})},K4=()=>{const[t,e]=g.useState("overview"),[r,s]=g.useState(""),[n,o]=g.useState(""),[a,l]=g.useState(""),[c,u]=g.useState(!1),[d,h]=g.useState([]),[f,p]=g.useState(!1),[m,b]=g.useState(!1),[y,x]=g.useState(""),[j,v]=g.useState(""),w=[{id:"1",device:"Windows 10, Chrome",location:"New York, US",ip:"192.168.1.1",lastActive:"2 hours ago",current:!0},{id:"2",device:"iPhone 13, Safari",location:"San Francisco, US",ip:"203.0.113.1",lastActive:"1 week ago",current:!1},{id:"3",device:"MacBook Pro, Safari",location:"London, UK",ip:"198.51.100.1",lastActive:"2 weeks ago",current:!1}],E=[{id:"1",type:"login",description:"Successful login from New York, US",device:"Windows 10, Chrome",ip:"192.168.1.1",timestamp:"2023-11-15T14:30:00Z",status:"success"},{id:"2",type:"password_change",description:"Password changed",device:"iPhone 13, Safari",ip:"203.0.113.1",timestamp:"2023-11-10T09:15:00Z",status:"info"},{id:"3",type:"failed_login",description:"Failed login attempt",device:"Unknown",ip:"198.51.100.1",timestamp:"2023-11-05T18:45:00Z",status:"warning"}],O=async T=>{if(T.preventDefault(),x(""),v(""),n!==a){x("New passwords do not match");return}if(n.length<8){x("Password must be at least 8 characters long");return}b(!0);try{await new Promise(M=>setTimeout(M,1e3)),v("Password changed successfully"),s(""),o(""),l("")}catch{x("Failed to change password. Please try again.")}finally{b(!1)}},$=async()=>{b(!0);try{await new Promise(M=>setTimeout(M,1e3)),u(!0);const T=Array.from({length:10},()=>Math.random().toString(36).substring(2,8).toUpperCase());h(T),p(!0),v("Two-factor authentication has been enabled")}catch{x("Failed to enable two-factor authentication")}finally{b(!1)}},N=async()=>{if(window.confirm("Are you sure you want to disable two-factor authentication? This will make your account less secure.")){b(!0);try{await new Promise(T=>setTimeout(T,1e3)),u(!1),h([]),v("Two-factor authentication has been disabled")}catch{x("Failed to disable two-factor authentication")}finally{b(!1)}}},k=async()=>{if(window.confirm("Are you sure you want to revoke this session?")){b(!0);try{await new Promise(T=>setTimeout(T,800)),v("Session has been revoked")}catch{x("Failed to revoke session")}finally{b(!1)}}},R=T=>new Date(T).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Security Settings"}),i.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your account security and privacy settings."})]}),i.jsx("div",{className:"flex space-x-2 p-1 bg-gray-800/50 rounded-lg",children:[{id:"overview",label:"Overview"},{id:"sessions",label:"Active Sessions"},{id:"activity",label:"Security Activity"}].map(T=>i.jsx("button",{onClick:()=>e(T.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${t===T.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:T.label},T.id))}),y&&i.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 text-red-300 rounded-lg",children:y}),j&&i.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/30 text-green-300 rounded-lg",children:j}),f&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Save Your Backup Codes"}),i.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white",children:"âœ•"})]}),i.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Save these backup codes in a safe place. You can use them to access your account if you lose access to your authenticator app."}),i.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:d.map((T,M)=>i.jsx("div",{className:"bg-gray-700/50 p-2 rounded text-center font-mono",children:T},M))}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"I've saved my codes"})})]})}),t==="overview"&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Change Password"}),i.jsxs("form",{onSubmit:O,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),i.jsx("input",{type:"password",id:"currentPassword",value:r,onChange:T=>s(T.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),i.jsx("input",{type:"password",id:"newPassword",value:n,onChange:T=>o(T.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),i.jsx("input",{type:"password",id:"confirmPassword",value:a,onChange:T=>l(T.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),i.jsx("div",{className:"pt-2",children:i.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:m?"Updating...":"Update Password"})})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Two-Factor Authentication"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:c?"Two-factor authentication is currently enabled.":"Add an extra layer of security to your account."})]}),c?i.jsx("button",{onClick:N,disabled:m,className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors disabled:opacity-50",children:m?"Disabling...":"Disable 2FA"}):i.jsx("button",{onClick:$,disabled:m,className:"px-4 py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors disabled:opacity-50",children:m?"Enabling...":"Enable 2FA"})]}),c&&d.length>0&&i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:i.jsx("button",{onClick:()=>p(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"View Backup Codes"})})]}),i.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-3",children:"Security Tips"}),i.jsxs("ul",{className:"space-y-3 text-sm text-blue-200",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"mr-2",children:"ðŸ”’"}),i.jsx("span",{children:"Use a strong, unique password that you don't use elsewhere."})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"mr-2",children:"ðŸ”‘"}),i.jsx("span",{children:"Enable two-factor authentication for added security."})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"mr-2",children:"ðŸ‘€"}),i.jsx("span",{children:"Regularly review your active sessions and revoke any that look suspicious."})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"mr-2",children:"ðŸ“§"}),i.jsx("span",{children:"Make sure your email account is secure, as it can be used to reset your password."})]})]})]})]}),t==="sessions"&&i.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Active Sessions"}),i.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"This is a list of devices that have logged into your account. Revoke any sessions that you don't recognize."}),i.jsx("div",{className:"space-y-4",children:w.map(T=>i.jsx("div",{className:`p-4 rounded-lg ${T.current?"bg-primary/10 border border-primary/30":"bg-gray-700/50"}`,children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"font-medium text-white",children:T.device}),T.current&&i.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-primary/20 text-primary rounded-full",children:"Current Session"})]}),i.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[T.location," â€¢ ",T.ip]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last active: ",T.lastActive]})]}),!T.current&&i.jsx("button",{onClick:k,disabled:m,className:"px-3 py-1 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors disabled:opacity-50",children:"Revoke"})]})},T.id))})]})}),t==="activity"&&i.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Security Activity"}),i.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Review recent security events related to your account."}),i.jsx("div",{className:"space-y-4",children:E.map(T=>i.jsx("div",{className:"p-4 bg-gray-700/30 rounded-lg",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${T.status==="success"?"bg-green-500":T.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h4",{className:"font-medium text-white",children:T.description}),i.jsx("span",{className:"text-xs text-gray-500",children:R(T.timestamp)})]}),i.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[T.device," â€¢ ",T.ip]})]})]})},T.id))}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("button",{className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"View All Activity"})})]})})]})},J4=()=>i.jsxs("div",{className:"text-gray-100",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Admin Dashboard"}),i.jsx("p",{children:"Admin specific content and tools."})]}),Q4=()=>{var v;const t=Ni(),e=Ot(),[r,s]=g.useState("overview"),{user:n,userProfile:o,isAdmin:a,isLoading:l,isAuthenticated:c}=Ai(),[u,d]=g.useState({isSubscribed:!1,subscriptionTier:"free",betaReaderStatus:"not_applied",subscriptionEndDate:void 0,booksRead:0,readingHours:0,currentlyReading:"",achievements:0,username:"User"});g.useEffect(()=>{!l&&!c&&t("/login")},[l,c,t]),g.useEffect(()=>{const w=e.pathname.split("/").pop()||"overview";s(w==="account"?"overview":w)},[e]);const h=[{id:"overview",name:"Overview",icon:i.jsx(o1,{size:18}),path:"/account"},{id:"profile",name:"Profile",icon:i.jsx(en,{size:18}),path:"/account/profile"},{id:"reading",name:"Reading",icon:i.jsx(Et,{size:18}),path:"/account/reading"},{id:"achievements",name:"Achievements",icon:i.jsx(bu,{size:18}),path:"/account/achievements"},{id:"preferences",name:"Preferences",icon:i.jsx(ba,{size:18}),path:"/account/preferences"},{id:"security",name:"Security",icon:i.jsx(bg,{size:18}),path:"/account/security"}],f=a?[{id:"admin",name:"Admin Control Panel",icon:i.jsx(ss,{size:18}),path:"/account/admin"}]:[],p=g.useMemo(()=>[...h,...f],[a]),{data:m,isLoading:b}=su({queryKey:["userStats",n==null?void 0:n.id],queryFn:()=>Sj(n.id),enabled:!!(n!=null&&n.id)}),{data:y,isLoading:x}=su({queryKey:["subscription",n==null?void 0:n.id],queryFn:()=>wj(n.id),enabled:!!(n!=null&&n.id)});g.useEffect(()=>{o&&d(w=>{var E;return{...w,username:o.username||((E=n==null?void 0:n.email)==null?void 0:E.split("@")[0])||"User",betaReaderStatus:o.beta_reader_status||"not_applied"}}),m&&d(w=>({...w,booksRead:m.books_read||0,readingHours:m.reading_hours||0,currentlyReading:m.currently_reading||"",achievements:m.achievements||0})),y&&d(w=>({...w,isSubscribed:!0,subscriptionTier:y.plan_id,subscriptionEndDate:y.current_period_end}))},[n,o,m,y]);const j=async()=>{await pe.auth.signOut(),t("/login")};return l||c&&(!o||b||x)?i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-background-darker flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-400",children:"Loading your profile..."})]})}):!c||!n?null:i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-background-darker text-text-light",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[i.jsxs("aside",{className:"w-full lg:w-64 flex-shrink-0",children:[i.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl overflow-hidden border border-gray-800",children:[i.jsxs("div",{className:"p-6 text-center border-b border-gray-800",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-4xl font-bold text-white",children:(v=n==null?void 0:n.email)==null?void 0:v.charAt(0).toUpperCase()}),i.jsx("button",{className:"absolute -bottom-1 -right-1 bg-primary w-8 h-8 rounded-full flex items-center justify-center text-white hover:bg-primary/90 transition-colors",children:i.jsx(en,{size:16})})]}),i.jsx("h2",{className:"mt-4 text-xl font-semibold text-white",children:(o==null?void 0:o.display_name)||(o==null?void 0:o.username)}),i.jsx("p",{className:"text-sm text-gray-400",children:a?"Admin":"Member"})]}),i.jsx("nav",{className:"p-2",children:i.jsx("ul",{className:"space-y-1",children:p.map(w=>i.jsx("li",{children:i.jsxs($s,{to:w.path,end:w.path==="/account",className:({isActive:E})=>`flex items-center justify-between px-4 py-3 rounded-lg transition-colors duration-200 ${E?"bg-primary/10 text-primary":"text-gray-300 hover:bg-gray-800/50 hover:text-white"}`,children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"mr-3",children:w.icon}),w.name]}),i.jsx(t1,{size:16,className:"text-gray-500"})]})},w.id))})})]}),r==="overview"&&i.jsxs("div",{className:"mt-6 bg-background-light/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-4",children:"YOUR STATS"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-indigo-500/10 flex items-center justify-center text-indigo-400",children:i.jsx(Et,{size:16})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Books Read"}),i.jsx("p",{className:"text-lg font-semibold text-white",children:u.booksRead})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center text-green-400",children:i.jsx(pr,{size:16})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Reading Hours"}),i.jsxs("p",{className:"text-lg font-semibold text-white",children:[u.readingHours,"h"]})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-400",children:i.jsx(mg,{size:16})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Currently Reading"}),i.jsx("p",{className:"text-lg font-semibold text-white",children:u.currentlyReading||"None"})]})]})]})]})]}),i.jsx("main",{className:"flex-1",children:i.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl border border-gray-800 overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsxs(Ql,{children:[i.jsx(q,{path:"/",element:i.jsx(V4,{userId:n.id,isSubscribed:u.isSubscribed,subscriptionTier:u.subscriptionTier,betaReaderStatus:u.betaReaderStatus,subscriptionEndDate:u.subscriptionEndDate,booksRead:u.booksRead,readingHours:u.readingHours,currentlyReading:u.currentlyReading,achievements:u.achievements,username:u.username,onSignOut:j})}),i.jsx(q,{path:"profile",element:i.jsx(q4,{})}),i.jsx(q,{element:i.jsx(l4,{requireSubscription:!0}),children:i.jsx(q,{path:"reading",element:i.jsx(W4,{})})}),i.jsx(q,{path:"achievements",element:i.jsx(Z4,{})}),i.jsx(q,{path:"preferences",element:i.jsx(Y4,{})}),i.jsx(q,{path:"security",element:i.jsx(K4,{})}),a&&i.jsx(q,{path:"admin/*",element:i.jsx(J4,{})})]}),i.jsx(cu,{})]})})})]})})})};var X4={};const eL=()=>{const{supabaseClient:t}=Ai(),[e,r]=g.useState([]),[s,n]=g.useState(!0);return g.useEffect(()=>{(async()=>{if(t){const a=new XO(t,X4.STRIPE_SECRET_KEY);try{const l=await a.getProductCatalog({with_variants:!0});r(l)}catch(l){console.error("Error fetching product catalog:",l)}}n(!1)})()},[t]),s?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Subscription Management"}),i.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Product"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Variants"}),i.jsx("th",{scope:"col",className:"relative px-6 py-3",children:i.jsx("span",{className:"sr-only",children:"Edit"})})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(o=>{var a,l;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:i.jsx("img",{className:"h-10 w-10 rounded-full",src:(a=o.images)==null?void 0:a[0],alt:""})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.name}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:o.description})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.active?i.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Active"}):i.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Inactive"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:((l=o.variants)==null?void 0:l.length)||0}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("a",{href:"#",className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Edit"})})]},o.id)})})]})})]})},fe=({title:t})=>i.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:t}),i.jsx("p",{className:"text-gray-600",children:"This page is under construction."})]}),Dr=({title:t})=>i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:t}),i.jsx("p",{className:"text-gray-600",children:"This admin page is under construction."})]}),tL=()=>i.jsx(fe,{title:"Library"}),rL=()=>i.jsx(fe,{title:"Characters"}),sL=()=>i.jsx(fe,{title:"Locations"}),nL=()=>i.jsx(fe,{title:"Glossary"}),iL=()=>i.jsx(fe,{title:"Reviews"}),oL=()=>i.jsx(fe,{title:"Blog"}),aL=()=>i.jsx(fe,{title:"Page Not Found"}),lL=()=>i.jsx(fe,{title:"Beta Portal"}),cL=()=>i.jsx(fe,{title:"Work Reader"}),uL=()=>i.jsx(fe,{title:"Beta Reader Handbook"}),dL=()=>i.jsx(fe,{title:"Operational Timeline"}),hL=()=>i.jsx(fe,{title:"NDA"}),fL=()=>i.jsx(fe,{title:"Beta Feedback"}),pL=()=>{const[t,e]=g.useState(!1),[r,s]=g.useState("none"),[n,o]=g.useState(!0);g.useEffect(()=>{pe.auth.getSession().then(({data:{session:c}})=>{e(!!c),o(!1)});const{data:{subscription:l}}=pe.auth.onAuthStateChange((c,u)=>{e(!!u),o(!1)});return()=>l.unsubscribe()},[]);const a=async()=>{await pe.auth.signOut(),e(!1)};return n?i.jsx(gj,{}):i.jsxs(i.Fragment,{children:[i.jsx(yj,{}),i.jsx(G1,{isAuthenticated:t,betaApplicationStatus:r,onLogout:a})]})},mL=()=>{const[t,e]=Go.useState(null),r=dx(),{supabaseClient:s,user:n}=Ai();return Go.useEffect(()=>{r.pageSlug&&_j(r.pageSlug).then(e)},[r.pageSlug]),i.jsx(xj,{className:"bg-red-500",children:i.jsxs(Ql,{children:[i.jsx(q,{path:"/login",element:i.jsx(eR,{})}),i.jsxs(q,{element:i.jsx(pL,{}),children:[i.jsx(q,{path:"/",element:i.jsx(pj,{})}),i.jsx(q,{path:"/store",element:i.jsx(fe,{title:"Store"})}),i.jsx(q,{path:"/checkout",element:i.jsx(fe,{title:"Checkout"})}),i.jsx(q,{path:"/library",element:i.jsx(tL,{})}),i.jsx(q,{path:"/subscriptions",element:i.jsx(fe,{title:"Subscriptions"})}),i.jsx(q,{path:"/subscription-success",element:i.jsx(LD,{})}),i.jsx(q,{path:"/stripe-test",element:i.jsx(fe,{title:"Stripe Test"})}),i.jsxs(q,{path:"/wiki",children:[i.jsx(q,{index:!0,element:i.jsx(fe,{title:"Wiki"})}),i.jsx(q,{path:":folderSlug",element:i.jsx(fe,{title:"Wiki Folder"})}),i.jsx(q,{path:":folderSlug/:pageSlug",element:i.jsx(fe,{title:"Wiki Page"})})]}),i.jsx(q,{path:"/timelines",element:i.jsx(fe,{title:"Timelines"})}),i.jsx(q,{path:"/characters",element:i.jsx(rL,{})}),i.jsx(q,{path:"/locations",element:i.jsx(sL,{})}),i.jsx(q,{path:"/glossary",element:i.jsx(nL,{})}),i.jsx(q,{path:"/reviews",element:i.jsx(iL,{})}),i.jsx(q,{path:"/about",element:i.jsx(fe,{title:"About"})}),i.jsx(q,{path:"/account/*",element:i.jsx(Q4,{})}),i.jsx(q,{path:"/blog",element:i.jsx(oL,{})}),i.jsx(q,{path:"/blog/:slug",element:i.jsx(fe,{title:"Blog Post"})}),i.jsx(q,{path:"/beta/application",element:i.jsx(Xp,{supabaseClient:s,user:n})}),i.jsx(q,{path:"/artist-collaboration",element:i.jsx(fe,{title:"Artist Collaboration"})}),i.jsx(q,{path:"/read/:workId",element:i.jsx(cL,{})}),i.jsx(q,{path:"/beta/status",element:i.jsx(Xp,{supabaseClient:s,user:n})}),i.jsx(q,{path:"/beta/handbook",element:i.jsx(uL,{})}),i.jsx(q,{path:"/beta/timeline",element:i.jsx(dL,{})}),i.jsx(q,{path:"/beta/nda",element:i.jsx(hL,{})}),i.jsx(q,{path:"/beta/feedback",element:i.jsx(fL,{})}),i.jsx(q,{path:"/beta/portal",element:i.jsx(lL,{})}),i.jsx(q,{path:"/:slug",element:i.jsx(fe,{title:"Page"})}),i.jsx(q,{path:"*",element:i.jsx(aL,{})})]}),i.jsx(q,{path:"/account/admin/*",element:i.jsx(x1,{children:i.jsxs(g1,{children:[i.jsx(v1,{}),i.jsx(b1,{}),i.jsxs(Ql,{children:[i.jsx(q,{index:!0,element:i.jsx(w1,{})}),i.jsx(q,{path:"beta-applications",element:i.jsx(Dr,{title:"Beta Applications Management"})}),i.jsx(q,{path:"users",element:i.jsx(Dr,{title:"User Management"})}),i.jsx(q,{path:"posts",element:i.jsx(Dr,{title:"Posts Management"})}),i.jsx(q,{path:"works",element:i.jsx(nR,{})}),i.jsx(q,{path:"media",element:i.jsx(iR,{})}),i.jsx(q,{path:"products",element:i.jsx(tR,{})}),i.jsx(q,{path:"subscriptions",element:i.jsx(eL,{})}),i.jsx(q,{path:"orders",element:i.jsx(rR,{})}),i.jsx(q,{path:"inventory",element:i.jsx(sR,{})}),i.jsx(q,{path:"analytics",element:i.jsx(Dr,{title:"Analytics"})}),i.jsx(q,{path:"timeline/events",element:i.jsx(Dr,{title:"Timeline Events"})}),i.jsx(q,{path:"webhooks",element:i.jsx(Dr,{title:"Webhook Management"})}),i.jsx(q,{path:"settings",element:i.jsx(Dr,{title:"Admin Settings"})})]})]})})})]})})},gL=new T4;Yl.createRoot(document.getElementById("root")).render(i.jsxs(Go.StrictMode,{children:[i.jsxs(Zx,{children:[" ",i.jsx(A4,{client:gL,children:i.jsx(I0,{supabaseClient:pe,children:i.jsx(mL,{})})})]})," "]}));
