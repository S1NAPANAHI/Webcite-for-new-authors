# Entity-Relationship Diagram (ERD) - Conceptual Model

## Primary Entities

### Core User Entities
- **User**: System users (authors, readers, administrators)
- **Profile**: Extended user information and preferences
- **Follow**: User following relationships

### Content Entities
- **Book**: Published books in the system
- **Chapter**: Individual chapters within books
- **BlogPost**: Blog articles and posts
- **Asset**: Media files (images, documents, etc.)

### Engagement Entities
- **Comment**: User comments on various content
- **Reaction**: User reactions (likes, hearts, etc.)
- **Progress**: User reading progress tracking

### System Entities
- **TimelineEvent**: Activity feed events
- **Achievement**: User accomplishments and badges
- **Notification**: System notifications to users
- **Tag**: Content categorization and labeling

## Entity Relationships and Cardinalities

### User-Related Relationships

```
User (1) ←→ (1) Profile
- One user has exactly one profile
- One profile belongs to exactly one user

User (1) ←→ (M) Book
- One user can author multiple books
- One book is authored by one user

User (1) ←→ (M) BlogPost
- One user can write multiple blog posts
- One blog post is written by one user

User (1) ←→ (M) Comment
- One user can make multiple comments
- One comment is made by one user

User (1) ←→ (M) Reaction
- One user can make multiple reactions
- One reaction is made by one user

User (1) ←→ (M) Progress
- One user can have multiple progress records
- One progress record belongs to one user

User (1) ←→ (M) Achievement
- One user can earn multiple achievements
- One achievement instance belongs to one user

User (1) ←→ (M) Notification
- One user can receive multiple notifications
- One notification is sent to one user

User (1) ←→ (M) TimelineEvent
- One user can generate multiple timeline events
- One timeline event is generated by one user

Follow (M) ←→ (1) User [as Follower]
Follow (M) ←→ (1) User [as Following]
- Many follow relationships can exist for one user as follower
- Many follow relationships can exist for one user being followed
- Creates many-to-many relationship between users
```

### Content-Related Relationships

```
Book (1) ←→ (M) Chapter
- One book contains multiple chapters
- One chapter belongs to one book

Book (M) ←→ (M) Tag
- One book can have multiple tags
- One tag can be applied to multiple books

BlogPost (M) ←→ (M) Tag
- One blog post can have multiple tags
- One tag can be applied to multiple blog posts

Book (1) ←→ (M) Asset
- One book can have multiple assets
- One asset belongs to one book

BlogPost (1) ←→ (M) Asset
- One blog post can have multiple assets
- One asset belongs to one blog post

Chapter (1) ←→ (M) Asset
- One chapter can have multiple assets
- One asset belongs to one chapter
```

### Engagement-Related Relationships

```
Comment (M) ←→ (1) Book
Comment (M) ←→ (1) Chapter
Comment (M) ←→ (1) BlogPost
- Comments can be made on books, chapters, or blog posts
- Multiple comments can exist for each content item

Reaction (M) ←→ (1) Book
Reaction (M) ←→ (1) Chapter
Reaction (M) ←→ (1) BlogPost
Reaction (M) ←→ (1) Comment
- Reactions can be made on books, chapters, blog posts, or comments
- Multiple reactions can exist for each content item

Progress (M) ←→ (1) Book
Progress (M) ←→ (1) Chapter
- Progress tracking for books and chapters
- Multiple progress records can exist for each content item
```

### System Activity Relationships

```
TimelineEvent (M) ←→ (1) Book
TimelineEvent (M) ←→ (1) Chapter
TimelineEvent (M) ←→ (1) BlogPost
TimelineEvent (M) ←→ (1) Comment
TimelineEvent (M) ←→ (1) Follow
- Timeline events are generated from various activities
- Multiple events can reference the same entity

Notification (M) ←→ (1) Book
Notification (M) ←→ (1) Chapter
Notification (M) ←→ (1) BlogPost
Notification (M) ←→ (1) Comment
Notification (M) ←→ (1) Follow
Notification (M) ←→ (1) Achievement
- Notifications can be triggered by various entities
- Multiple notifications can reference the same entity
```

## Entity Relationship Summary

| Entity | Primary Relationships | Key Cardinalities |
|--------|----------------------|-------------------|
| User | Profile, Book, BlogPost, Comment, Reaction, Progress, Achievement, Notification, TimelineEvent, Follow | 1:1 with Profile, 1:M with most others |
| Profile | User | 1:1 |
| Book | User, Chapter, Tag, Asset, Comment, Reaction, Progress, TimelineEvent, Notification | 1:M with chapters, M:M with tags |
| Chapter | Book, Asset, Comment, Reaction, Progress, TimelineEvent, Notification | M:1 with Book |
| BlogPost | User, Tag, Asset, Comment, Reaction, TimelineEvent, Notification | M:1 with User, M:M with Tags |
| Comment | User, Book/Chapter/BlogPost, Reaction, TimelineEvent, Notification | M:1 with content entities |
| Reaction | User, Book/Chapter/BlogPost/Comment | M:1 relationships |
| Progress | User, Book/Chapter | M:1 relationships |
| Achievement | User | M:1 with User |
| Follow | User (follower), User (following), TimelineEvent, Notification | Creates M:M user relationships |
| Notification | User, various content entities | M:1 relationships |
| TimelineEvent | User, various content entities | M:1 relationships |
| Tag | Book, BlogPost | M:M relationships |
| Asset | Book, Chapter, BlogPost | M:1 relationships |

## Validation Questions for Stakeholders

1. **User-Profile Relationship**: Is the 1:1 relationship between User and Profile correct, or should users be able to have multiple profiles?

2. **Content Authorship**: Should books and blog posts support co-authorship (multiple authors), changing the User-Book/BlogPost relationship to M:M?

3. **Comment Threading**: Should comments support replies/threading (Comment-to-Comment relationships)?

4. **Asset Sharing**: Can assets be shared across multiple content items, or should each asset belong to only one entity?

5. **Achievement Types**: Should there be an AchievementType entity to define different types of achievements?

6. **Tag Hierarchy**: Do tags need hierarchical relationships (parent-child tags)?

7. **Progress Granularity**: Is progress tracking at both book and chapter levels necessary, or should it be simplified?

8. **Notification Preferences**: Should user notification preferences be part of the Profile entity?

9. **Timeline Privacy**: Should timeline events have privacy settings or user-specific visibility?

10. **Content Status**: Do books, chapters, and blog posts need status fields (draft, published, archived)?

Please review this conceptual model and provide feedback on the entity relationships and cardinalities before proceeding with detailed schema design.
