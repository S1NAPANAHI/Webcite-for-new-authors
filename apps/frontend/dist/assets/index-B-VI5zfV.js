const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PriceManager-8nclNyEg-Bj3c3Ss4.js","assets/react-_Wphq3sh.js"])))=>i.map(i=>d[i]);
var HA=e=>{throw TypeError(e)};var g0=(e,t,r)=>t.has(e)||HA("Cannot "+r);var F=(e,t,r)=>(g0(e,t,"read from private field"),r?r.call(e):t.get(e)),$e=(e,t,r)=>t.has(e)?HA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),je=(e,t,r,n)=>(g0(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ye=(e,t,r)=>(g0(e,t,"access private method"),r);var xg=(e,t,r,n)=>({set _(s){je(e,t,s,r)},get _(){return F(e,t,n)}});import{r as v,a as ro,g as hK,c as Ps,e as xM,R as de,j as wM}from"./react-_Wphq3sh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var _M={exports:{}},$b={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fK=v,pK=Symbol.for("react.element"),mK=Symbol.for("react.fragment"),gK=Object.prototype.hasOwnProperty,yK=fK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vK={key:!0,ref:!0,__self:!0,__source:!0};function jM(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)gK.call(t,n)&&!vK.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:pK,type:e,key:i,ref:o,props:s,_owner:yK.current}}$b.Fragment=mK;$b.jsx=jM;$b.jsxs=jM;_M.exports=$b;var g=_M.exports,vj={},KA=ro;vj.createRoot=KA.createRoot,vj.hydrateRoot=KA.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ZA="popstate";function bK(e={}){function t(n,s){let{pathname:i,search:o,hash:a}=n.location;return bj("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Sp(s)}return wK(t,r,null,e)}function Ft(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Rs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xK(){return Math.random().toString(36).substring(2,10)}function GA(e,t){return{usr:e.state,key:e.key,idx:t}}function bj(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?yh(t):t,state:r,key:t&&t.key||n||xK()}}function Sp({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yh(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function wK(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let b=u(),x=b==null?null:b-c;c=b,l&&l({action:a,location:m.location,delta:x})}function f(b,x){a="PUSH";let w=bj(m.location,b,x);c=u()+1;let _=GA(w,c),j=m.createHref(w);try{o.pushState(_,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(j)}i&&l&&l({action:a,location:m.location,delta:1})}function p(b,x){a="REPLACE";let w=bj(m.location,b,x);c=u();let _=GA(w,c),j=m.createHref(w);o.replaceState(_,"",j),i&&l&&l({action:a,location:m.location,delta:0})}function y(b){return _K(b)}let m={get action(){return a},get location(){return e(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ZA,h),l=b,()=>{s.removeEventListener(ZA,h),l=null}},createHref(b){return t(s,b)},createURL:y,encodeLocation(b){let x=y(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(b){return o.go(b)}};return m}function _K(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ft(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Sp(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function kM(e,t,r="/"){return jK(e,t,r,!1)}function jK(e,t,r,n){let s=typeof t=="string"?yh(t):t,i=Zo(s.pathname||"/",r);if(i==null)return null;let o=NM(e);kK(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=DK(i);a=RK(o[l],c,n)}return a}function NM(e,t=[],r=[],n="",s=!1){let i=(o,a,l=s,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;Ft(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=Bo([n,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(Ft(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),NM(o.children,t,f,h,l)),!(o.path==null&&!o.index)&&t.push({path:h,score:OK(h,o.index),routesMeta:f})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of SM(o.path))i(o,a,!0,c)}),t}function SM(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=SM(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function kK(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:PK(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var NK=/^:[\w-]+$/,SK=3,EK=2,CK=1,TK=10,AK=-2,YA=e=>e==="*";function OK(e,t){let r=e.split("/"),n=r.length;return r.some(YA)&&(n+=AK),t&&(n+=EK),r.filter(s=>!YA(s)).reduce((s,i)=>s+(NK.test(i)?SK:i===""?CK:TK),n)}function PK(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function RK(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=Qy({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=Qy({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Bo([i,h.pathname]),pathnameBase:FK(Bo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Bo([i,h.pathnameBase]))}return o}function Qy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=IK(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:h},f)=>{if(u==="*"){let y=a[f]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function IK(e,t=!1,r=!0){Rs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function DK(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Zo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function LK(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?yh(e):e;return{pathname:r?r.startsWith("/")?r:MK(r,t):t,search:$K(n),hash:UK(s)}}function MK(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function y0(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zK(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function BS(e){let t=zK(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function VS(e,t,r,n=!1){let s;typeof e=="string"?s=yh(e):(s={...e},Ft(!s.pathname||!s.pathname.includes("?"),y0("?","pathname","search",s)),Ft(!s.pathname||!s.pathname.includes("#"),y0("#","pathname","hash",s)),Ft(!s.search||!s.search.includes("#"),y0("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?t[h]:"/"}let l=LK(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Bo=e=>e.join("/").replace(/\/\/+/g,"/"),FK=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$K=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,UK=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qK(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var EM=["POST","PUT","PATCH","DELETE"];new Set(EM);var BK=["GET",...EM];new Set(BK);var vh=v.createContext(null);vh.displayName="DataRouter";var Ub=v.createContext(null);Ub.displayName="DataRouterState";v.createContext(!1);var CM=v.createContext({isTransitioning:!1});CM.displayName="ViewTransition";var VK=v.createContext(new Map);VK.displayName="Fetchers";var WK=v.createContext(null);WK.displayName="Await";var _i=v.createContext(null);_i.displayName="Navigation";var vm=v.createContext(null);vm.displayName="Location";var zs=v.createContext({outlet:null,matches:[],isDataRoute:!1});zs.displayName="Route";var WS=v.createContext(null);WS.displayName="RouteError";function HK(e,{relative:t}={}){Ft(bh(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(_i),{hash:s,pathname:i,search:o}=bm(e,{relative:t}),a=i;return r!=="/"&&(a=i==="/"?r:Bo([r,i])),n.createHref({pathname:a,search:o,hash:s})}function bh(){return v.useContext(vm)!=null}function Fs(){return Ft(bh(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(vm).location}var TM="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function AM(e){v.useContext(_i).static||v.useLayoutEffect(e)}function uo(){let{isDataRoute:e}=v.useContext(zs);return e?aZ():KK()}function KK(){Ft(bh(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(vh),{basename:t,navigator:r}=v.useContext(_i),{matches:n}=v.useContext(zs),{pathname:s}=Fs(),i=JSON.stringify(BS(n)),o=v.useRef(!1);return AM(()=>{o.current=!0}),v.useCallback((l,c={})=>{if(Rs(o.current,TM),!o.current)return;if(typeof l=="number"){r.go(l);return}let u=VS(l,JSON.parse(i),s,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Bo([t,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[t,r,i,s,e])}var ZK=v.createContext(null);function GK(e){let t=v.useContext(zs).outlet;return t&&v.createElement(ZK.Provider,{value:e},t)}function nu(){let{matches:e}=v.useContext(zs),t=e[e.length-1];return t?t.params:{}}function bm(e,{relative:t}={}){let{matches:r}=v.useContext(zs),{pathname:n}=Fs(),s=JSON.stringify(BS(r));return v.useMemo(()=>VS(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function YK(e,t){return OM(e,t)}function OM(e,t,r,n,s){var w;Ft(bh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(_i),{matches:o}=v.useContext(zs),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";PM(c,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=Fs(),p;if(t){let _=typeof t=="string"?yh(t):t;Ft(u==="/"||((w=_.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=f;let y=p.pathname||"/",m=y;if(u!=="/"){let _=u.replace(/^\//,"").split("/");m="/"+y.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=kM(e,{pathname:m});Rs(h||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Rs(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=tZ(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Bo([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Bo([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,r,n,s);return t&&x?v.createElement(vm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function JK(){let e=oZ(),t=qK(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,o)}var XK=v.createElement(JK,null),QK=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(zs.Provider,{value:this.props.routeContext},v.createElement(WS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function eZ({routeContext:e,match:t,children:r}){let n=v.useContext(vh);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(zs.Provider,{value:e},r)}function tZ(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let c=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Ft(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,l=-1;if(r)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:f}=r,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,u,h)=>{let f,p=!1,y=null,m=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,y=u.route.errorElement||XK,a&&(l<0&&h===0?(PM("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,m=null):l===h&&(p=!0,m=u.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,h+1)),x=()=>{let w;return f?w=y:p?w=m:u.route.Component?w=v.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=c,v.createElement(eZ,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?v.createElement(QK,{location:r.location,revalidation:r.revalidation,component:y,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):x()},null)}function HS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rZ(e){let t=v.useContext(vh);return Ft(t,HS(e)),t}function nZ(e){let t=v.useContext(Ub);return Ft(t,HS(e)),t}function sZ(e){let t=v.useContext(zs);return Ft(t,HS(e)),t}function KS(e){let t=sZ(e),r=t.matches[t.matches.length-1];return Ft(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function iZ(){return KS("useRouteId")}function oZ(){var n;let e=v.useContext(WS),t=nZ("useRouteError"),r=KS("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function aZ(){let{router:e}=rZ("useNavigate"),t=KS("useNavigate"),r=v.useRef(!1);return AM(()=>{r.current=!0}),v.useCallback(async(s,i={})=>{Rs(r.current,TM),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var JA={};function PM(e,t,r){!t&&!JA[e]&&(JA[e]=!0,Rs(!1,r))}v.memo(lZ);function lZ({routes:e,future:t,state:r,unstable_onError:n}){return OM(e,void 0,r,n,t)}function RM({to:e,replace:t,state:r,relative:n}){Ft(bh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(_i);Rs(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(zs),{pathname:o}=Fs(),a=uo(),l=VS(e,BS(i),o,n==="path"),c=JSON.stringify(l);return v.useEffect(()=>{a(JSON.parse(c),{replace:t,state:r,relative:n})},[a,c,n,t,r]),null}function ZS(e){return GK(e.context)}function Te(e){Ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cZ({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Ft(!bh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=v.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=yh(r));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:f="default"}=r,p=v.useMemo(()=>{let y=Zo(l,o);return y==null?null:{location:{pathname:y,search:c,hash:u,state:h,key:f},navigationType:n}},[o,l,c,u,h,f,n]);return Rs(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:v.createElement(_i.Provider,{value:a},v.createElement(vm.Provider,{children:t,value:p}))}function IM({children:e,location:t}){return YK(xj(e),t)}function xj(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,xj(n.props.children,i));return}Ft(n.type===Te,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ft(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=xj(n.props.children,i)),r.push(o)}),r}var Ty="get",Ay="application/x-www-form-urlencoded";function qb(e){return e!=null&&typeof e.tagName=="string"}function uZ(e){return qb(e)&&e.tagName.toLowerCase()==="button"}function dZ(e){return qb(e)&&e.tagName.toLowerCase()==="form"}function hZ(e){return qb(e)&&e.tagName.toLowerCase()==="input"}function fZ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function pZ(e,t){return e.button===0&&(!t||t==="_self")&&!fZ(e)}function wj(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function mZ(e,t){let r=wj(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var wg=null;function gZ(){if(wg===null)try{new FormData(document.createElement("form"),0),wg=!1}catch{wg=!0}return wg}var yZ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function v0(e){return e!=null&&!yZ.has(e)?(Rs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ay}"`),null):e}function vZ(e,t){let r,n,s,i,o;if(dZ(e)){let a=e.getAttribute("action");n=a?Zo(a,t):null,r=e.getAttribute("method")||Ty,s=v0(e.getAttribute("enctype"))||Ay,i=new FormData(e)}else if(uZ(e)||hZ(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?Zo(l,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||Ty,s=v0(e.getAttribute("formenctype"))||v0(a.getAttribute("enctype"))||Ay,i=new FormData(a,e),!gZ()){let{name:c,type:u,value:h}=e;if(u==="image"){let f=c?`${c}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else c&&i.append(c,h)}}else{if(qb(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ty,n=null,s=Ay,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function GS(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bZ(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Zo(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function xZ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wZ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function _Z(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await xZ(i,r);return o.links?o.links():[]}return[]}));return SZ(n.flat(1).filter(wZ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function XA(e,t,r,n,s,i){let o=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,a=(l,c)=>{var u;return r[c].pathname!==l.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?t.filter((l,c)=>{var h;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function jZ(e,t,{includeHydrateFallback:r}={}){return kZ(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function kZ(e){return[...new Set(e)]}function NZ(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function SZ(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(NZ(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function DM(){let e=v.useContext(vh);return GS(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function EZ(){let e=v.useContext(Ub);return GS(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var YS=v.createContext(void 0);YS.displayName="FrameworkContext";function LM(){let e=v.useContext(YS);return GS(e,"You must render this element inside a <HydratedRouter> element"),e}function CZ(e,t){let r=v.useContext(YS),[n,s]=v.useState(!1),[i,o]=v.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=t,f=v.useRef(null);v.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=x=>{x.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(m,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[e]),v.useEffect(()=>{if(n){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[n]);let p=()=>{s(!0)},y=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:uf(a,p),onBlur:uf(l,y),onMouseEnter:uf(c,p),onMouseLeave:uf(u,y),onTouchStart:uf(h,p)}]:[!1,f,{}]}function uf(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function TZ({page:e,...t}){let{router:r}=DM(),n=v.useMemo(()=>kM(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(OZ,{page:e,matches:n,...t}):null}function AZ(e){let{manifest:t,routeModules:r}=LM(),[n,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return _Z(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function OZ({page:e,matches:t,...r}){let n=Fs(),{manifest:s,routeModules:i}=LM(),{basename:o}=DM(),{loaderData:a,matches:l}=EZ(),c=v.useMemo(()=>XA(e,t,l,s,n,"data"),[e,t,l,s,n]),u=v.useMemo(()=>XA(e,t,l,s,n,"assets"),[e,t,l,s,n]),h=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let y=new Set,m=!1;if(t.forEach(x=>{var _;let w=s.routes[x.route.id];!w||!w.hasLoader||(!c.some(j=>j.route.id===x.route.id)&&x.route.id in a&&((_=i[x.route.id])!=null&&_.shouldRevalidate)||w.hasClientLoader?m=!0:y.add(x.route.id))}),y.size===0)return[];let b=bZ(e,o,"data");return m&&y.size>0&&b.searchParams.set("_routes",t.filter(x=>y.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[o,a,n,s,c,t,e,i]),f=v.useMemo(()=>jZ(u,s),[u,s]),p=AZ(u);return v.createElement(v.Fragment,null,h.map(y=>v.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),f.map(y=>v.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),p.map(({key:y,link:m})=>v.createElement("link",{key:y,nonce:r.nonce,...m})))}function PZ(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var MM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MM&&(window.__reactRouterVersion="7.8.2")}catch{}function RZ({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=bK({window:r,v5Compat:!0}));let s=n.current,[i,o]=v.useState({action:s.action,location:s.location}),a=v.useCallback(l=>{v.startTransition(()=>o(l))},[o]);return v.useLayoutEffect(()=>s.listen(a),[s,a]),v.createElement(cZ,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var zM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rr=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h,...f},p){let{basename:y}=v.useContext(_i),m=typeof c=="string"&&zM.test(c),b,x=!1;if(typeof c=="string"&&m&&(b=c,MM))try{let T=new URL(window.location.href),R=c.startsWith("//")?new URL(T.protocol+c):new URL(c),O=Zo(R.pathname,y);R.origin===T.origin&&O!=null?c=O+R.search+R.hash:x=!0}catch{Rs(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=HK(c,{relative:s}),[_,j,k]=CZ(n,f),S=LZ(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function C(T){t&&t(T),T.defaultPrevented||S(T)}let E=v.createElement("a",{...f,...k,href:b||w,onClick:x||i?t:C,ref:PZ(p,j),target:l,"data-discover":!m&&r==="render"?"true":void 0});return _&&!m?v.createElement(v.Fragment,null,E,v.createElement(TZ,{page:w})):E});Rr.displayName="Link";var md=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let h=bm(o,{relative:c.relative}),f=Fs(),p=v.useContext(Ub),{navigator:y,basename:m}=v.useContext(_i),b=p!=null&&qZ(h)&&a===!0,x=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,w=f.pathname,_=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(w=w.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&m&&(_=Zo(_,m)||_);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let k=w===x||!s&&w.startsWith(x)&&w.charAt(j)==="/",S=_!=null&&(_===x||!s&&_.startsWith(x)&&_.charAt(x.length)==="/"),C={isActive:k,isPending:S,isTransitioning:b},E=k?t:void 0,T;typeof n=="function"?T=n(C):T=[n,k?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(C):i;return v.createElement(Rr,{...c,"aria-current":E,className:T,ref:u,style:R,to:o,viewTransition:a},typeof l=="function"?l(C):l)});md.displayName="NavLink";var IZ=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=Ty,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...f},p)=>{let y=$Z(),m=UZ(a,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&zM.test(a),w=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let j=_.nativeEvent.submitter,k=(j==null?void 0:j.getAttribute("formmethod"))||o;y(j||_.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:h})};return v.createElement("form",{ref:p,method:b,action:m,onSubmit:n?l:w,...f,"data-discover":!x&&e==="render"?"true":void 0})});IZ.displayName="Form";function DZ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FM(e){let t=v.useContext(vh);return Ft(t,DZ(e)),t}function LZ(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=uo(),l=Fs(),c=bm(e,{relative:i});return v.useCallback(u=>{if(pZ(u,t)){u.preventDefault();let h=r!==void 0?r:Sp(l)===Sp(c);a(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,r,n,t,e,s,i,o])}function MZ(e){Rs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(wj(e)),r=v.useRef(!1),n=Fs(),s=v.useMemo(()=>mZ(n.search,r.current?null:t.current),[n.search]),i=uo(),o=v.useCallback((a,l)=>{const c=wj(typeof a=="function"?a(new URLSearchParams(s)):a);r.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var zZ=0,FZ=()=>`__${String(++zZ)}__`;function $Z(){let{router:e}=FM("useSubmit"),{basename:t}=v.useContext(_i),r=iZ();return v.useCallback(async(n,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=vZ(n,t);if(s.navigate===!1){let u=s.fetcherKey||FZ();await e.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function UZ(e,{relative:t}={}){let{basename:r}=v.useContext(_i),n=v.useContext(zs);Ft(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...bm(e||".",{relative:t})},o=Fs();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let u=a.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Bo([r,i.pathname])),Sp(i)}function qZ(e,{relative:t}={}){let r=v.useContext(CM);Ft(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=FM("useViewTransitionState"),s=bm(e,{relative:t});if(!r.isTransitioning)return!1;let i=Zo(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Zo(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Qy(s.pathname,o)!=null||Qy(s.pathname,i)!=null}const BZ="modulepreload",VZ=function(e){return"/"+e},QA={},xh=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=VZ(l),l in QA)return;QA[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":BZ,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},WZ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xh(async()=>{const{default:n}=await Promise.resolve().then(()=>wh);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class JS extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class HZ extends JS{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class eO extends JS{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class tO extends JS{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var _j;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(_j||(_j={}));var KZ=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class ZZ{constructor(t,{headers:r={},customFetch:n,region:s=_j.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=WZ(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return KZ(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(m=>{throw new HZ(m)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new eO(h);if(!h.ok)throw new tO(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield h.json():p==="application/octet-stream"?y=yield h.blob():p==="text/event-stream"?y=h:p==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof tO||s instanceof eO?s.context:void 0}}})}}var $n={},XS={},Bb={},xm={},Vb={},Wb={},GZ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hd=GZ();const YZ=Hd.fetch,$M=Hd.fetch.bind(Hd),UM=Hd.Headers,JZ=Hd.Request,XZ=Hd.Response,wh=Object.freeze(Object.defineProperty({__proto__:null,Headers:UM,Request:JZ,Response:XZ,default:$M,fetch:YZ},Symbol.toStringTag,{value:"Module"})),QZ=hK(wh);var Hb={};Object.defineProperty(Hb,"__esModule",{value:!0});let eG=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Hb.default=eG;var qM=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wb,"__esModule",{value:!0});const tG=qM(QZ),rG=qM(Hb);let nG=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=tG.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,c;let u=null,h=null,f=null,p=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=w:h=JSON.parse(w))}const b=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),x=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(h=[],u=null,p=200,y="OK")}catch{i.status===404&&b===""?(p=204,y="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,p=200,y="OK"),u&&this.shouldThrowOnError)throw new rG.default(u)}return{error:u,data:h,count:f,status:p,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Wb.default=nG;var sG=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vb,"__esModule",{value:!0});const iG=sG(Wb);let oG=class extends iG.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Vb.default=oG;var aG=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xm,"__esModule",{value:!0});const lG=aG(Vb);let cG=class extends lG.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};xm.default=cG;var uG=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bb,"__esModule",{value:!0});const df=uG(xm);let dG=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new df.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new df.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new df.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new df.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new df.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Bb.default=dG;var BM=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(XS,"__esModule",{value:!0});const hG=BM(Bb),fG=BM(xm);let pG=class VM{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new hG.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new VM(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new fG.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};XS.default=pG;var _h=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($n,"__esModule",{value:!0});$n.PostgrestError=$n.PostgrestBuilder=$n.PostgrestTransformBuilder=$n.PostgrestFilterBuilder=$n.PostgrestQueryBuilder=$n.PostgrestClient=void 0;const WM=_h(XS);$n.PostgrestClient=WM.default;const HM=_h(Bb);$n.PostgrestQueryBuilder=HM.default;const KM=_h(xm);$n.PostgrestFilterBuilder=KM.default;const ZM=_h(Vb);$n.PostgrestTransformBuilder=ZM.default;const GM=_h(Wb);$n.PostgrestBuilder=GM.default;const YM=_h(Hb);$n.PostgrestError=YM.default;var mG=$n.default={PostgrestClient:WM.default,PostgrestQueryBuilder:HM.default,PostgrestFilterBuilder:KM.default,PostgrestTransformBuilder:ZM.default,PostgrestBuilder:GM.default,PostgrestError:YM.default};const{PostgrestClient:gG,PostgrestQueryBuilder:kqe,PostgrestFilterBuilder:Nqe,PostgrestTransformBuilder:Sqe,PostgrestBuilder:Eqe,PostgrestError:Cqe}=mG;class yG{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const vG="2.15.1",bG=`realtime-js/${vG}`,xG="1.0.0",jj=1e4,wG=1e3,_G=100;var ep;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ep||(ep={}));var Nr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Nr||(Nr={}));var oi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(oi||(oi={}));var kj;(function(e){e.websocket="websocket"})(kj||(kj={}));var dc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(dc||(dc={}));class jG{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+s));o=o+s;const l=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class JM{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_t||(_t={}));const rO=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=kG(o,e,t,s),i),{})},kG=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?XM(i,o):Nj(o)},XM=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return CG(t,r)}switch(e){case _t.bool:return NG(t);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return SG(t);case _t.json:case _t.jsonb:return EG(t);case _t.timestamp:return TG(t);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return Nj(t);default:return Nj(t)}},Nj=e=>e,NG=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},SG=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},EG=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},CG=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>XM(t,a))}return e},TG=e=>typeof e=="string"?e.replace(" ","T"):e,QM=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class b0{constructor(t,r,n={},s=jj){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var nO;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(nO||(nO={}));class tp{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tp.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=tp.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=tp.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),y=u.filter(b=>p.indexOf(b.presence_ref)<0),m=h.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(a[c]=y),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sO;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(sO||(sO={}));var rp;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(rp||(rp={}));var Ao;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ao||(Ao={}));class QS{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Nr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new b0(this,oi.join,this.params,this.timeout),this.rejoinTimer=new JM(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Nr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Nr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(oi.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new tp(this),this.broadcastEndpointURL=QM(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Nr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[rp.PRESENCE]&&this.bindings[rp.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Ao.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Ao.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t==null||t(Ao.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,m=(p=y==null?void 0:y.length)!==null&&p!==void 0?p:0,b=[];for(let x=0;x<m;x++){const w=y[x],{filter:{event:_,schema:j,table:k,filter:S}}=w,C=f&&f[x];if(C&&C.event===_&&C.schema===j&&C.table===k&&C.filter===S)b.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=Nr.errored,t==null||t(Ao.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Ao.SUBSCRIBED);return}}).receive("error",f=>{this.state=Nr.errored,t==null||t(Ao.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ao.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Nr.joined&&t===rp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Nr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(oi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new b0(this,oi.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new b0(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>_G){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=oi;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,m,b;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(m=p.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var y,m,b,x,w,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const j=p.id,k=(y=p.filter)===null||y===void 0?void 0:y.event;return j&&((m=r.ids)===null||m===void 0?void 0:m.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(w=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return j==="*"||j===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:m,table:b,commit_timestamp:x,type:w,errors:_}=y;f=Object.assign(Object.assign({},{schema:m,table:b,commit_timestamp:x,eventType:w,new:{},old:{},errors:_}),this._getPayloadRecords(y))}p.callback(f,n)})}_isClosed(){return this.state===Nr.closed}_isJoined(){return this.state===Nr.joined}_isJoining(){return this.state===Nr.joining}_isLeaving(){return this.state===Nr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&QS.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(oi.close,{},t)}_onError(t){this._on(oi.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=rO(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=rO(t.columns,t.old_record)),r}}const iO=()=>{},_g={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AG=[1e3,2e3,5e3,1e4],OG=1e4,PG=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RG{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jj,this.transport=null,this.heartbeatIntervalMs=_g.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=iO,this.ref=0,this.reconnectTimer=null,this.logger=iO,this.conn=null,this.sendBuffer=[],this.serializer=new jG,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>xh(async()=>{const{default:a}=await Promise.resolve().then(()=>wh);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${kj.websocket}`,this.httpEndpoint=QM(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yG.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xG}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ep.connecting:return dc.Connecting;case ep.open:return dc.Open;case ep.closing:return dc.Closing;default:return dc.Closed}}isConnected(){return this.connectionState()===dc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new QS(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(wG,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},_g.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(oi.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([PG],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:bG};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(oi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new JM(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_g.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:jj,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:_g.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t==null?void 0:t.reconnectAfterMs)!==null&&a!==void 0?a:u=>AG[u-1]||OG,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(u,h)=>h(JSON.stringify(u)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class eE extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Cr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class IG extends eE{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Sj extends eE{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var DG=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const e6=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xh(async()=>{const{default:n}=await Promise.resolve().then(()=>wh);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},LG=()=>DG(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xh(()=>Promise.resolve().then(()=>wh),void 0)).Response:Response}),Ej=e=>{if(Array.isArray(e))return e.map(r=>Ej(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ej(n)}),t},MG=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var su=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const x0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),zG=(e,t,r)=>su(void 0,void 0,void 0,function*(){const n=yield LG();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new IG(x0(s),i,o))}).catch(s=>{t(new Sj(x0(s),s))}):t(new Sj(x0(e),e))}),FG=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(MG(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function wm(e,t,r,n,s,i){return su(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,FG(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>zG(l,a,n))})})}function ev(e,t,r,n){return su(this,void 0,void 0,function*(){return wm(e,"GET",t,r,n)})}function Mi(e,t,r,n,s){return su(this,void 0,void 0,function*(){return wm(e,"POST",t,n,s,r)})}function Cj(e,t,r,n,s){return su(this,void 0,void 0,function*(){return wm(e,"PUT",t,n,s,r)})}function $G(e,t,r,n){return su(this,void 0,void 0,function*(){return wm(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function t6(e,t,r,n,s){return su(this,void 0,void 0,function*(){return wm(e,"DELETE",t,n,s,r)})}var vn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const UG={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qG{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=e6(s)}uploadOrUpdate(t,r,n,s){return vn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},oO),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(t=="PUT"?Cj:Mi)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Cr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return vn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return vn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:oO.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield Cj(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(Cr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return vn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Mi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new eE("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}})}update(t,r,n){return vn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return vn(this,void 0,void 0,function*(){try{return{data:yield Mi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Cr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return vn(this,void 0,void 0,function*(){try{return{data:{path:(yield Mi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Cr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return vn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Mi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Cr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return vn(this,void 0,void 0,function*(){try{const s=yield Mi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Cr(s))return{data:null,error:s};throw s}})}download(t,r){return vn(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield ev(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Cr(a))return{data:null,error:a};throw a}})}info(t){return vn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ev(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ej(n),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}})}exists(t){return vn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield $G(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Cr(n)&&n instanceof Sj){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return vn(this,void 0,void 0,function*(){try{return{data:yield t6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}})}list(t,r,n){return vn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},UG),r),{prefix:t||""});return{data:yield Mi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Cr(s))return{data:null,error:s};throw s}})}listV2(t,r){return vn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Mi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const BG="2.11.0",VG={"X-Client-Info":`storage-js/${BG}`};var ku=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class WG{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},VG),r),this.fetch=e6(n)}listBuckets(){return ku(this,void 0,void 0,function*(){try{return{data:yield ev(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Cr(t))return{data:null,error:t};throw t}})}getBucket(t){return ku(this,void 0,void 0,function*(){try{return{data:yield ev(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ku(this,void 0,void 0,function*(){try{return{data:yield Mi(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ku(this,void 0,void 0,function*(){try{return{data:yield Cj(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ku(this,void 0,void 0,function*(){try{return{data:yield Mi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ku(this,void 0,void 0,function*(){try{return{data:yield t6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}})}}class HG extends WG{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new qG(this.url,this.headers,t,this.fetch)}}const KG="2.56.0";let Df="";typeof Deno<"u"?Df="deno":typeof document<"u"?Df="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Df="react-native":Df="node";const ZG={"X-Client-Info":`supabase-js-${Df}/${KG}`},GG={headers:ZG},YG={schema:"public"},JG={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},XG={};var QG=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const eY=e=>{let t;return e?t=e:typeof fetch>"u"?t=$M:t=fetch,(...r)=>t(...r)},tY=()=>typeof Headers>"u"?UM:Headers,rY=(e,t,r)=>{const n=eY(r),s=tY();return(i,o)=>QG(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var nY=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function sY(e){return e.endsWith("/")?e:e+"/"}function iY(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>nY(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const r6="2.71.1",qu=30*1e3,Tj=3,w0=Tj*qu,oY="http://localhost:9999",aY="supabase.auth.token",lY={"X-Client-Info":`gotrue-js/${r6}`},Aj="X-Supabase-Api-Version",n6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cY=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uY=10*60*1e3;class tE extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function He(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class dY extends tE{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function hY(e){return He(e)&&e.name==="AuthApiError"}class s6 extends tE{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class _l extends tE{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ia extends _l{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fY(e){return He(e)&&e.name==="AuthSessionMissingError"}class jg extends _l{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class kg extends _l{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ng extends _l{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function pY(e){return He(e)&&e.name==="AuthImplicitGrantRedirectError"}class aO extends _l{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Oj extends _l{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function _0(e){return He(e)&&e.name==="AuthRetryableFetchError"}class lO extends _l{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Pj extends _l{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const tv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cO=` 	
\r=`.split(""),mY=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<cO.length;t+=1)e[cO[t].charCodeAt(0)]=-2;for(let t=0;t<tv.length;t+=1)e[tv[t].charCodeAt(0)]=t;return e})();function uO(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(tv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(tv[n]),t.queuedBits-=6}}function i6(e,t,r){const n=mY[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function dO(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{vY(o,n,r)};for(let o=0;o<e.length;o+=1)i6(e.charCodeAt(o),s,i);return t.join("")}function gY(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function yY(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}gY(n,t)}}function vY(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function bY(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)i6(e.charCodeAt(s),r,n);return new Uint8Array(t)}function xY(e){const t=[];return yY(e,r=>t.push(r)),new Uint8Array(t)}function wY(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>uO(s,r,n)),uO(null,r,n),t.join("")}function _Y(e){return Math.round(Date.now()/1e3)+e}function jY(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Xs=()=>typeof window<"u"&&typeof document<"u",Jl={tested:!1,writable:!1},o6=()=>{if(!Xs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jl.tested)return Jl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Jl.tested=!0,Jl.writable=!0}catch{Jl.tested=!0,Jl.writable=!1}return Jl.writable};function kY(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const a6=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xh(async()=>{const{default:n}=await Promise.resolve().then(()=>wh);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},NY=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Bu=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Xl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ka=async(e,t)=>{await e.removeItem(t)};class Kb{constructor(){this.promise=new Kb.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Kb.promiseConstructor=Promise;function j0(e){const t=e.split(".");if(t.length!==3)throw new Pj("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!cY.test(t[n]))throw new Pj("JWT not in base64url format");return{header:JSON.parse(dO(t[0])),payload:JSON.parse(dO(t[1])),signature:bY(t[2]),raw:{header:t[0],payload:t[1]}}}async function SY(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function EY(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function CY(e){return("0"+e.toString(16)).substr(-2)}function TY(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,CY).join("")}async function AY(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function OY(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await AY(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nu(e,t,r=!1){const n=TY();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Bu(e,`${t}-code-verifier`,s);const i=await OY(n);return[i,n===i?"plain":"s256"]}const PY=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function RY(e){const t=e.headers.get(Aj);if(!t||!t.match(PY))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function IY(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function DY(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const LY=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Su(e){if(!LY.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function k0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hO(e){return JSON.parse(JSON.stringify(e))}var MY=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const nc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),zY=[502,503,504];async function fO(e){var t;if(!NY(e))throw new Oj(nc(e),0);if(zY.includes(e.status))throw new Oj(nc(e),e.status);let r;try{r=await e.json()}catch(i){throw new s6(nc(i),i)}let n;const s=RY(e);if(s&&s.getTime()>=n6["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new lO(nc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ia}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new lO(nc(r),e.status,r.weak_password.reasons);throw new dY(nc(r),e.status||500,n)}const FY=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function et(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Aj]||(i[Aj]=n6["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await $Y(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function $Y(e,t,r,n,s,i){const o=FY(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new Oj(nc(l),0)}if(a.ok||await fO(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await fO(l)}}function Eo(e){var t;let r=null;VY(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=_Y(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function pO(e){const t=Eo(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ba(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function UY(e){return{data:e,error:null}}function qY(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=MY(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function BY(e){return e}function VY(e){return e.access_token&&e.refresh_token&&e.expires_in}const N0=["global","local","others"];var WY=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class HY{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=a6(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=N0[0]){if(N0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${N0.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ba})}catch(n){if(He(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=WY(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:qY,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(He(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ba})}catch(r){if(He(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:BY});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const m=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(He(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Su(t);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ba})}catch(r){if(He(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Su(t);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ba})}catch(n){if(He(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Su(t);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ba})}catch(n){if(He(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Su(t.userId);try{const{data:r,error:n}=await et(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(He(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Su(t.userId),Su(t.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}}}function mO(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function KY(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Eu={debug:!!(globalThis&&o6()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class l6 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ZY extends l6{}async function GY(e,t,r){Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ZY(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Eu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}KY();const YY={url:oY,storageKey:aY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lY,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gO(e,t,r){return await r()}const Cu={};class Ep{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ep.nextInstanceID,Ep.nextInstanceID+=1,this.instanceID>0&&Xs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},YY),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new HY({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=a6(s.fetch),this.lock=s.lock||gO,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Xs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=GY:this.lock=gO,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:o6()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mO(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=mO(this.memoryStorage)),Xs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Cu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Cu[this.storageKey]=Object.assign(Object.assign({},Cu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Cu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Cu[this.storageKey]=Object.assign(Object.assign({},Cu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${r6}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=kY(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Xs()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),pY(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return He(r)?{error:r}:{error:new s6("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Eo}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(He(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Nu(this.storage,this.storageKey)),i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:Eo})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Eo})}else throw new kg("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(He(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pO})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pO})}else throw new kg("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new jg}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(He(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,a,l,c,u,h,f,p;let y,m;if("message"in t)y=t.message,m=t.signature;else{const{chain:b,wallet:x,statement:w,options:_}=t;let j;if(Xs())if(typeof x=="object")j=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const k=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let C;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")C=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)C=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),m=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=S}}try{const{data:b,error:x}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:wY(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Eo});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new jg}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(He(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await Xl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Eo});if(await ka(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new jg}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(He(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Eo}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new jg}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(He(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Nu(this.storage,this.storageKey));const{error:h}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new kg("You must provide either an email or phone number.")}catch(a){if(He(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Eo});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(He(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Nu(this.storage,this.storageKey)),await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:UY})}catch(i){if(He(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ia;const{error:s}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(He(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await et(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await et(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new kg("You must provide either an email or phone number and a type")}catch(r){if(He(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Xl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<w0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Xl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=k0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ba}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ia}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ba})})}catch(r){if(He(r))return fY(r)&&(await this._removeSession(),await ka(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ia;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Nu(this.storage,this.storageKey));const{data:c,error:u}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ba});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(He(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ia;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=j0(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(He(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ia;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(He(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Xs())throw new Ng("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ng(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new aO("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ng("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new aO("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new Ng("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=qu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=f-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,u);const{data:m,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(He(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Xl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(hY(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await ka(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=jY(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Nu(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(He(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Xs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(He(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(He(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await EY(async s=>(s>0&&await SY(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Eo})),(s,i)=>{const o=200*Math.pow(2,s);return i&&_0(i)&&Date.now()+o-n<qu})}catch(n){if(this._debug(r,"error",n),He(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Xs()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Xl(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Xl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Bu(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:k0()}else if(s&&!s.user&&!s.user){const o=await Xl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await ka(this.storage,this.storageKey+"-user"),await Bu(this.storage,this.storageKey,s)):s.user=k0()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<w0;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${w0}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),_0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ia;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Kb;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ia;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),He(i)){const o={session:null,error:i};return _0(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Bu(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=hO(s);await Bu(this.storage,this.storageKey,i)}else{const s=hO(r);await Bu(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ka(this.storage,this.storageKey),await ka(this.storage,this.storageKey+"-code-verifier"),await ka(this.storage,this.storageKey+"-user"),this.userStorage&&await ka(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Xs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),qu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/qu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${qu}ms, refresh threshold is ${Tj} ticks`),s<=Tj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof l6)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Nu(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await et(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(He(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await et(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(He(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(He(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(He(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=j0(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+uY>s)return n;const{data:i,error:o}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=j0(n);r!=null&&r.allowExpired||IY(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=DY(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,xY(`${a}.${l}`)))throw new Pj("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}}}Ep.nextInstanceID=0;const JY=Ep;class XY extends JY{constructor(t){super(t)}}var QY=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class eJ{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=sY(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:YG,realtime:XG,auth:Object.assign(Object.assign({},JG),{storageKey:c}),global:GG},h=iY(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=rY(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new gG(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new HG(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new ZZ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return QY(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XY({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new RG(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const c6=(e,t,r)=>new eJ(e,t,r);function tJ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}tJ()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const yO=typeof window<"u",u6="https://opukvvmumyegtkukqint.supabase.co",d6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",u6);console.log("DEBUG: supabaseAnonKey (raw):",d6);console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set");let le;try{le=c6(u6,d6,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:yO?window.localStorage:void 0}});const e=typeof process<"u"&&!1}catch(e){throw console.error("Error initializing Supabase client:",e),e}const h6=v.createContext(void 0),rJ=({children:e,supabaseClient:t})=>{const[r,n]=v.useState(null),[s,i]=v.useState(null),[o,a]=v.useState(null),[l,c]=v.useState(!1),[u,h]=v.useState(!1),[f,p]=v.useState(!0);return v.useEffect(()=>{const{data:y}=t.auth.onAuthStateChange(async(m,b)=>{i(b),n((b==null?void 0:b.user)||null),p(!1)});return t.auth.getSession().then(({data:{session:m}})=>{i(m),n((m==null?void 0:m.user)||null),p(!1)}),()=>{y.subscription.unsubscribe()}},[t]),v.useEffect(()=>{const y=async b=>{try{const{data:x,error:w}=await t.from("profiles").select("*").eq("id",b).single();if(w){if(w.code==="PGRST116"){console.log("Profile not found, creating new profile for user:",b),await m(b);return}throw w}a(x),c((x==null?void 0:x.role)==="admin"||(x==null?void 0:x.role)==="super_admin")}catch(x){console.error("Error fetching user profile:",x),a(null),c(!1)}},m=async b=>{var x,w,_;try{const{data:{user:j},error:k}=await t.auth.getUser();if(k||!j){console.error("Error getting user info for profile creation:",k);return}const{data:S,error:C}=await t.from("profiles").insert({id:b,username:((x=j.email)==null?void 0:x.split("@")[0])||null,display_name:((w=j.user_metadata)==null?void 0:w.full_name)||((_=j.email)==null?void 0:_.split("@")[0])||"User",email:j.email,role:"user",subscription_status:"inactive",beta_reader_status:"none"}).select().single();C?(console.error("Error creating user profile:",C),a(null),c(!1)):(console.log("Successfully created user profile:",S),a(S),c((S==null?void 0:S.role)==="admin"||(S==null?void 0:S.role)==="super_admin"))}catch(j){console.error("Error in createUserProfile:",j),a(null),c(!1)}};r!=null&&r.id?(y(r.id),h(!0)):(a(null),c(!1),h(!1))},[r,t]),g.jsx(h6.Provider,{value:{user:r,session:s,userProfile:o,isAdmin:l,isAuthenticated:u,isLoading:f},children:e})},jh=()=>{const e=v.useContext(h6);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},f6={items:[],total:0,itemCount:0},nJ=(e,t)=>{switch(t.type){case"ADD_ITEM":if(e.items.find(n=>n.id===t.payload.id)){const n=e.items.map(o=>o.id===t.payload.id?{...o,quantity:o.quantity+t.payload.quantity}:o),s=n.reduce((o,a)=>o+a.price*a.quantity,0),i=n.reduce((o,a)=>o+a.quantity,0);return{...e,items:n,total:s,itemCount:i}}else{const n=[...e.items,t.payload],s=n.reduce((o,a)=>o+a.price*a.quantity,0),i=n.reduce((o,a)=>o+a.quantity,0);return{...e,items:n,total:s,itemCount:i}}case"REMOVE_ITEM":{const r=e.items.filter(i=>i.id!==t.payload),n=r.reduce((i,o)=>i+o.price*o.quantity,0),s=r.reduce((i,o)=>i+o.quantity,0);return{...e,items:r,total:n,itemCount:s}}case"UPDATE_QUANTITY":{const r=e.items.map(i=>i.id===t.payload.id?{...i,quantity:t.payload.quantity}:i),n=r.reduce((i,o)=>i+o.price*o.quantity,0),s=r.reduce((i,o)=>i+o.quantity,0);return{...e,items:r,total:n,itemCount:s}}case"CLEAR_CART":return f6;case"LOAD_CART":{const r=t.payload.reduce((s,i)=>s+i.price*i.quantity,0),n=t.payload.reduce((s,i)=>s+i.quantity,0);return{...e,items:t.payload,total:r,itemCount:n}}default:return e}},p6=v.createContext(void 0),sJ=()=>{const e=v.useContext(p6);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e},iJ=({children:e})=>{const[t,r]=v.useReducer(nJ,f6),n=c=>{r({type:"ADD_ITEM",payload:{...c,quantity:1}})},s=c=>{r({type:"REMOVE_ITEM",payload:c})},l={state:t,addItem:n,removeItem:s,updateQuantity:(c,u)=>{u<=0?s(c):r({type:"UPDATE_QUANTITY",payload:{id:c,quantity:u}})},clearCart:()=>{r({type:"CLEAR_CART"})},isInCart:c=>t.items.some(u=>u.id===c)};return g.jsx(p6.Provider,{value:l,children:e})},oJ=async e=>{const{data:t,error:r}=await le.from("subscriptions").select("*").eq("user_id",e).single();return r?(console.error("Error fetching subscription:",r),null):t},m6=async e=>{const t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),r=le.from("wiki_pages").select(`
      id, created_at, created_by, title, slug, excerpt, is_published, category_id, folder_id, updated_at, view_count,
      content, seo_title, seo_description, seo_keywords,
      category(*),
      user(*)
    `).eq(t?"id":"slug",e),{data:n,error:s}=await r.single();if(s)return console.error("Error fetching wiki page:",s),null;if(n){n.user&&typeof n.user=="object"&&"error"in n.user&&(n.user=null),n.category&&typeof n.category=="object"&&"error"in n.category&&(n.category=null);const{data:i,error:o}=await le.from("wiki_content_blocks").select("id, type, content, position").eq("page_id",n.id).order("position");if(o)throw console.error("Error fetching wiki content:",o),new Error("Failed to fetch wiki content");const a=(i==null?void 0:i.map(c=>({id:c.id,type:c.type,content:c.content,title:""})))||[];return await le.rpc("increment_wiki_page_views",{page_id:n.id}),{...n,sections:a,content:n.content||"",seo_title:n.seo_title||"",seo_description:n.seo_description||"",seo_keywords:n.seo_keywords||[],category:n.category,user:n.user}}return null},aJ=async()=>{const{data:e,error:t}=await le.from("wiki_categories").select("*").order("name",{ascending:!0});if(t)throw console.error("Error fetching categories:",t),new Error("Failed to fetch categories");return e||[]},lJ=async e=>{const t={books_read:0,reading_hours:0,achievements:0,currently_reading:"None"},{data:r,error:n}=await le.from("user_stats").upsert({user_id:e,...t},{onConflict:"user_id"}).select("*").single();if(n)throw console.error("Error initializing user stats:",n),n;return r},cJ=async e=>{try{const{data:t,error:r}=await le.from("user_stats").select("*").eq("user_id",e).maybeSingle();if(!t&&(!r||r.code==="PGRST116"))return lJ(e);if(r)throw r;return t}catch(t){throw console.error("Error fetching user stats:",t),t}};function g6(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=g6(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function uJ(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=g6(e))&&(n&&(n+=" "),n+=t);return n}const rE="-",dJ=e=>{const t=fJ(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const a=o.split(rE);return a[0]===""&&a.length!==1&&a.shift(),y6(a,t)||hJ(o)},getConflictingClassGroupIds:(o,a)=>{const l=r[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},y6=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?y6(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(rE);return(o=t.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},vO=/^\[(.+)\]$/,hJ=e=>{if(vO.test(e)){const t=vO.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},fJ=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return mJ(Object.entries(e.classGroups),r).forEach(([i,o])=>{Rj(o,n,i,t)}),n},Rj=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:bO(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(pJ(s)){Rj(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{Rj(o,bO(t,i),r,n)})})},bO=(e,t)=>{let r=e;return t.split(rE).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},pJ=e=>e.isThemeGetter,mJ=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[t+o,a])):i);return[r,s]}):e,gJ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},v6="!",yJ=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,o=a=>{const l=[];let c=0,u=0,h;for(let b=0;b<a.length;b++){let x=a[b];if(c===0){if(x===s&&(n||a.slice(b,b+i)===t)){l.push(a.slice(u,b)),u=b+i;continue}if(x==="/"){h=b;continue}}x==="["?c++:x==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(v6),y=p?f.substring(1):f,m=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:m}};return r?a=>r({className:a,parseClassName:o}):o},vJ=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},bJ=e=>({cache:gJ(e.cacheSize),parseClassName:yJ(e),...dJ(e)}),xJ=/\s+/,wJ=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split(xJ);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=r(c);let y=!!p,m=n(y?f.substring(0,p):f);if(!m){if(!y){a=c+(a.length>0?" "+a:a);continue}if(m=n(f),!m){a=c+(a.length>0?" "+a:a);continue}y=!1}const b=vJ(u).join(":"),x=h?b+v6:b,w=x+m;if(i.includes(w))continue;i.push(w);const _=s(m,y);for(let j=0;j<_.length;++j){const k=_[j];i.push(x+k)}a=c+(a.length>0?" "+a:a)}return a};function _J(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=b6(t))&&(n&&(n+=" "),n+=r);return n}const b6=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=b6(e[n]))&&(r&&(r+=" "),r+=t);return r};function jJ(e,...t){let r,n,s,i=o;function o(l){const c=t.reduce((u,h)=>h(u),e());return r=bJ(c),n=r.cache.get,s=r.cache.set,i=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=wJ(l,r);return s(l,u),u}return function(){return i(_J.apply(null,arguments))}}const Ct=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},x6=/^\[(?:([a-z-]+):)?(.+)\]$/i,kJ=/^\d+\/\d+$/,NJ=new Set(["px","full","screen"]),SJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,EJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,CJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,TJ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,AJ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wo=e=>gd(e)||NJ.has(e)||kJ.test(e),Na=e=>kh(e,"length",zJ),gd=e=>!!e&&!Number.isNaN(Number(e)),S0=e=>kh(e,"number",gd),hf=e=>!!e&&Number.isInteger(Number(e)),OJ=e=>e.endsWith("%")&&gd(e.slice(0,-1)),Ze=e=>x6.test(e),Sa=e=>SJ.test(e),PJ=new Set(["length","size","percentage"]),RJ=e=>kh(e,PJ,w6),IJ=e=>kh(e,"position",w6),DJ=new Set(["image","url"]),LJ=e=>kh(e,DJ,$J),MJ=e=>kh(e,"",FJ),ff=()=>!0,kh=(e,t,r)=>{const n=x6.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},zJ=e=>EJ.test(e)&&!CJ.test(e),w6=()=>!1,FJ=e=>TJ.test(e),$J=e=>AJ.test(e),UJ=()=>{const e=Ct("colors"),t=Ct("spacing"),r=Ct("blur"),n=Ct("brightness"),s=Ct("borderColor"),i=Ct("borderRadius"),o=Ct("borderSpacing"),a=Ct("borderWidth"),l=Ct("contrast"),c=Ct("grayscale"),u=Ct("hueRotate"),h=Ct("invert"),f=Ct("gap"),p=Ct("gradientColorStops"),y=Ct("gradientColorStopPositions"),m=Ct("inset"),b=Ct("margin"),x=Ct("opacity"),w=Ct("padding"),_=Ct("saturate"),j=Ct("scale"),k=Ct("sepia"),S=Ct("skew"),C=Ct("space"),E=Ct("translate"),T=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Ze,t],I=()=>[Ze,t],P=()=>["",wo,Na],D=()=>["auto",gd,Ze],L=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Ze],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[gd,Ze];return{cacheSize:500,separator:":",theme:{colors:[ff],spacing:[wo,Na],blur:["none","",Sa,Ze],brightness:J(),borderColor:[e],borderRadius:["none","","full",Sa,Ze],borderSpacing:I(),borderWidth:P(),contrast:J(),grayscale:H(),hueRotate:J(),invert:H(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[OJ,Na],inset:O(),margin:O(),opacity:J(),padding:I(),saturate:J(),scale:J(),sepia:H(),skew:J(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Ze]}],container:["container"],columns:[{columns:[Sa]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...L(),Ze]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",hf,Ze]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ze]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",hf,Ze]}],"grid-cols":[{"grid-cols":[ff]}],"col-start-end":[{col:["auto",{span:["full",hf,Ze]},Ze]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[ff]}],"row-start-end":[{row:["auto",{span:[hf,Ze]},Ze]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ze]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ze,t]}],"min-w":[{"min-w":[Ze,t,"min","max","fit"]}],"max-w":[{"max-w":[Ze,t,"none","full","min","max","fit","prose",{screen:[Sa]},Sa]}],h:[{h:[Ze,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ze,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ze,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ze,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Sa,Na]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",S0]}],"font-family":[{font:[ff]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ze]}],"line-clamp":[{"line-clamp":["none",gd,S0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wo,Ze]}],"list-image":[{"list-image":["none",Ze]}],"list-style-type":[{list:["none","disc","decimal",Ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wo,Na]}],"underline-offset":[{"underline-offset":["auto",wo,Ze]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...L(),IJ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",RJ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},LJ]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[wo,Ze]}],"outline-w":[{outline:[wo,Na]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[wo,Na]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Sa,MJ]}],"shadow-color":[{shadow:[ff]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Sa,Ze]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ze]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Ze]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[hf,Ze]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ze]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ze]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ze]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[wo,Na,S0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qJ=jJ(UJ);function Je(...e){return qJ(uJ(e))}var xO;(function(e){e.UNAUTHORIZED="UNAUTHORIZED",e.FORBIDDEN="FORBIDDEN",e.INVALID_TOKEN="INVALID_TOKEN",e.INSUFFICIENT_PERMISSIONS="INSUFFICIENT_PERMISSIONS",e.VALIDATION_ERROR="VALIDATION_ERROR",e.INVALID_INPUT="INVALID_INPUT",e.MISSING_REQUIRED_FIELD="MISSING_REQUIRED_FIELD",e.BUSINESS_RULE_VIOLATION="BUSINESS_RULE_VIOLATION",e.SUBSCRIPTION_LIMIT_EXCEEDED="SUBSCRIPTION_LIMIT_EXCEEDED",e.CONTENT_ACCESS_DENIED="CONTENT_ACCESS_DENIED",e.PRICING_ERROR="PRICING_ERROR",e.RESOURCE_NOT_FOUND="RESOURCE_NOT_FOUND",e.DUPLICATE_RESOURCE="DUPLICATE_RESOURCE",e.DATA_INTEGRITY_ERROR="DATA_INTEGRITY_ERROR",e.PAYMENT_PROCESSING_ERROR="PAYMENT_PROCESSING_ERROR",e.EMAIL_SERVICE_ERROR="EMAIL_SERVICE_ERROR",e.STORAGE_SERVICE_ERROR="STORAGE_SERVICE_ERROR",e.DATABASE_ERROR="DATABASE_ERROR",e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED"})(xO||(xO={}));function re(e,t,r){function n(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in o.prototype)u in a||Object.defineProperty(a,u,{value:o.prototype[u].bind(a)});a._zod.constr=o,a._zod.def=l}const s=(r==null?void 0:r.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:e});function o(a){var l;const c=r!=null&&r.Parent?new i:this;n(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var l,c;return r!=null&&r.Parent&&a instanceof r.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class yd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class _6 extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const j6={};function hl(e){return j6}function BJ(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,s])=>t.indexOf(+n)===-1).map(([n,s])=>s)}function Ij(e,t){return typeof t=="bigint"?t.toString():t}function nE(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function sE(e){return e==null}function iE(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function VJ(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let s=(n.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(n)){const l=n.match(/\d?e-(\d?)/);l!=null&&l[1]&&(s=Number.parseInt(l[1]))}const i=r>s?r:s,o=Number.parseInt(e.toFixed(i).replace(".","")),a=Number.parseInt(t.toFixed(i).replace(".",""));return o%a/10**i}const wO=Symbol("evaluating");function Nt(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==wO)return n===void 0&&(n=wO,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function WJ(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function jl(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Nh(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function _O(e){return JSON.stringify(e)}const k6="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function rv(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const HJ=nE(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Kd(e){if(rv(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(rv(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function N6(e){return Kd(e)?{...e}:e}const KJ=new Set(["string","number","symbol"]);function Zb(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function kl(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function Fe(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function ZJ(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const GJ={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function YJ(e,t){const r=e._zod.def,n=Nh(e._zod.def,{get shape(){const s={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(s[i]=r.shape[i])}return jl(this,"shape",s),s},checks:[]});return kl(e,n)}function JJ(e,t){const r=e._zod.def,n=Nh(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete s[i]}return jl(this,"shape",s),s},checks:[]});return kl(e,n)}function XJ(e,t){if(!Kd(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=Nh(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t};return jl(this,"shape",i),i},checks:[]});return kl(e,s)}function QJ(e,t){if(!Kd(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return jl(this,"shape",n),n},checks:e._zod.def.checks};return kl(e,r)}function eX(e,t){const r=Nh(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return jl(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return kl(e,r)}function tX(e,t,r){const n=Nh(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)i[o]=e?new e({type:"optional",innerType:s[o]}):s[o];return jl(this,"shape",i),i},checks:[]});return kl(t,n)}function rX(e,t,r){const n=Nh(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:s[o]}))}else for(const o in s)i[o]=new e({type:"nonoptional",innerType:s[o]});return jl(this,"shape",i),i},checks:[]});return kl(t,n)}function sd(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function id(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Sg(e){return typeof e=="string"?e:e==null?void 0:e.message}function fl(e,t,r){var s,i,o,a,l,c;const n={...e,path:e.path??[]};if(!e.message){const u=Sg((o=(i=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??Sg((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??Sg((l=r.customError)==null?void 0:l.call(r,e))??Sg((c=r.localeError)==null?void 0:c.call(r,e))??"Invalid input";n.message=u}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function oE(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Cp(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const S6=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Ij,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},E6=re("$ZodError",S6),C6=re("$ZodError",S6,{Parent:Error});function nX(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function sX(e,t){const r=t||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(e),n}const aE=e=>(t,r,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new yd;if(o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>fl(l,i,hl())));throw k6(a,s==null?void 0:s.callee),a}return o.value},lE=e=>async(t,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>fl(l,i,hl())));throw k6(a,s==null?void 0:s.callee),a}return o.value},Gb=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new yd;return i.issues.length?{success:!1,error:new(e??E6)(i.issues.map(o=>fl(o,s,hl())))}:{success:!0,data:i.value}},iX=Gb(C6),Yb=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>fl(o,s,hl())))}:{success:!0,data:i.value}},oX=Yb(C6),aX=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return aE(e)(t,r,s)},lX=e=>(t,r,n)=>aE(e)(t,r,n),cX=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return lE(e)(t,r,s)},uX=e=>async(t,r,n)=>lE(e)(t,r,n),dX=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Gb(e)(t,r,s)},hX=e=>(t,r,n)=>Gb(e)(t,r,n),fX=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Yb(e)(t,r,s)},pX=e=>async(t,r,n)=>Yb(e)(t,r,n),mX=/^[cC][^\s-]{8,}$/,gX=/^[0-9a-z]+$/,yX=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,vX=/^[0-9a-vA-V]{20}$/,bX=/^[A-Za-z0-9]{27}$/,xX=/^[a-zA-Z0-9_-]{21}$/,wX=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,_X=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,jO=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,jX=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,kX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function NX(){return new RegExp(kX,"u")}const SX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,EX=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,CX=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,TX=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,AX=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,T6=/^[A-Za-z0-9_-]*$/,OX=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,PX=/^\+(?:[0-9]){6,14}[0-9]$/,A6="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",RX=new RegExp(`^${A6}$`);function O6(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function IX(e){return new RegExp(`^${O6(e)}$`)}function DX(e){const t=O6({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${A6}T(?:${n})$`)}const LX=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},MX=/^\d+$/,zX=/^-?\d+(?:\.\d+)?/i,FX=/true|false/i,$X=/^[^A-Z]*$/,UX=/^[^a-z]*$/,Zn=re("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),P6={number:"number",bigint:"bigint",object:"date"},R6=re("$ZodCheckLessThan",(e,t)=>{Zn.init(e,t);const r=P6[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,i=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),I6=re("$ZodCheckGreaterThan",(e,t)=>{Zn.init(e,t);const r=P6[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,i=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),qX=re("$ZodCheckMultipleOf",(e,t)=>{Zn.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):VJ(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),BX=re("$ZodCheckNumberFormat",(e,t)=>{var o;Zn.init(e,t),t.format=t.format||"float64";const r=(o=t.format)==null?void 0:o.includes("int"),n=r?"int":"number",[s,i]=GJ[t.format];e._zod.onattach.push(a=>{const l=a._zod.bag;l.format=t.format,l.minimum=s,l.maximum=i,r&&(l.pattern=MX)}),e._zod.check=a=>{const l=a.value;if(r){if(!Number.isInteger(l)){a.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?a.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):a.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}l<s&&a.issues.push({origin:"number",input:l,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),l>i&&a.issues.push({origin:"number",input:l,code:"too_big",maximum:i,inst:e})}}),VX=re("$ZodCheckMaxLength",(e,t)=>{var r;Zn.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!sE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const o=oE(s);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),WX=re("$ZodCheckMinLength",(e,t)=>{var r;Zn.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!sE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const o=oE(s);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),HX=re("$ZodCheckLengthEquals",(e,t)=>{var r;Zn.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!sE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,i=s.length;if(i===t.length)return;const o=oE(s),a=i>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Jb=re("$ZodCheckStringFormat",(e,t)=>{var r,n;Zn.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),KX=re("$ZodCheckRegex",(e,t)=>{Jb.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),ZX=re("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=$X),Jb.init(e,t)}),GX=re("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=UX),Jb.init(e,t)}),YX=re("$ZodCheckIncludes",(e,t)=>{Zn.init(e,t);const r=Zb(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),JX=re("$ZodCheckStartsWith",(e,t)=>{Zn.init(e,t);const r=new RegExp(`^${Zb(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),XX=re("$ZodCheckEndsWith",(e,t)=>{Zn.init(e,t);const r=new RegExp(`.*${Zb(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),QX=re("$ZodCheckOverwrite",(e,t)=>{Zn.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class eQ{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(o=>o),s=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,r=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...r,s.join(`
`))}}const tQ={major:4,minor:1,patch:3},Zt=re("$ZodType",(e,t)=>{var s;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=tQ;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const i of n)for(const o of i._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const i=(a,l,c)=>{let u=sd(a),h;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(u)continue;const p=a.issues.length,y=f._zod.check(a);if(y instanceof Promise&&(c==null?void 0:c.async)===!1)throw new yd;if(h||y instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await y,a.issues.length!==p&&(u||(u=sd(a,p)))});else{if(a.issues.length===p)continue;u||(u=sd(a,p))}}return h?h.then(()=>a):a},o=(a,l,c)=>{if(sd(a))return a.aborted=!0,a;const u=i(l,n,c);if(u instanceof Promise){if(c.async===!1)throw new yd;return u.then(h=>e._zod.parse(h,c))}return e._zod.parse(u,c)};e._zod.run=(a,l)=>{if(l.skipChecks)return e._zod.parse(a,l);if(l.direction==="backward"){const u=e._zod.parse({value:a.value,issues:[]},{...l,skipChecks:!0});return u instanceof Promise?u.then(h=>o(h,a,l)):o(u,a,l)}const c=e._zod.parse(a,l);if(c instanceof Promise){if(l.async===!1)throw new yd;return c.then(u=>i(u,n,l))}return i(c,n,l)}}e["~standard"]={validate:i=>{var o;try{const a=iX(e,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return oX(e,i).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),cE=re("$ZodString",(e,t)=>{var r;Zt.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??LX(e._zod.bag),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),$t=re("$ZodStringFormat",(e,t)=>{Jb.init(e,t),cE.init(e,t)}),rQ=re("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=_X),$t.init(e,t)}),nQ=re("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=jO(n))}else t.pattern??(t.pattern=jO());$t.init(e,t)}),sQ=re("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=jX),$t.init(e,t)}),iQ=re("$ZodURL",(e,t)=>{$t.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:OX.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),oQ=re("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=NX()),$t.init(e,t)}),aQ=re("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=xX),$t.init(e,t)}),lQ=re("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=mX),$t.init(e,t)}),cQ=re("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=gX),$t.init(e,t)}),uQ=re("$ZodULID",(e,t)=>{t.pattern??(t.pattern=yX),$t.init(e,t)}),dQ=re("$ZodXID",(e,t)=>{t.pattern??(t.pattern=vX),$t.init(e,t)}),hQ=re("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=bX),$t.init(e,t)}),fQ=re("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=DX(t)),$t.init(e,t)}),pQ=re("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=RX),$t.init(e,t)}),mQ=re("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=IX(t)),$t.init(e,t)}),gQ=re("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=wX),$t.init(e,t)}),yQ=re("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=SX),$t.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),vQ=re("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=EX),$t.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),bQ=re("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=CX),$t.init(e,t)}),xQ=re("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=TX),$t.init(e,t),e._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function D6(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const wQ=re("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=AX),$t.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{D6(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function _Q(e){if(!T6.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return D6(r)}const jQ=re("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=T6),$t.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{_Q(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),kQ=re("$ZodE164",(e,t)=>{t.pattern??(t.pattern=PX),$t.init(e,t)});function NQ(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const SQ=re("$ZodJWT",(e,t)=>{$t.init(e,t),e._zod.check=r=>{NQ(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),L6=re("$ZodNumber",(e,t)=>{Zt.init(e,t),e._zod.pattern=e._zod.bag.pattern??zX,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...i?{received:i}:{}}),r}}),EQ=re("$ZodNumber",(e,t)=>{BX.init(e,t),L6.init(e,t)}),CQ=re("$ZodBoolean",(e,t)=>{Zt.init(e,t),e._zod.pattern=FX,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),TQ=re("$ZodAny",(e,t)=>{Zt.init(e,t),e._zod.parse=r=>r}),AQ=re("$ZodUnknown",(e,t)=>{Zt.init(e,t),e._zod.parse=r=>r}),OQ=re("$ZodNever",(e,t)=>{Zt.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function kO(e,t,r){e.issues.length&&t.issues.push(...id(r,e.issues)),t.value[r]=e.value}const PQ=re("$ZodArray",(e,t)=>{Zt.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=t.element._zod.run({value:a,issues:[]},n);l instanceof Promise?i.push(l.then(c=>kO(c,r,o))):kO(l,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function nv(e,t,r,n){e.issues.length&&t.issues.push(...id(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function M6(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape[n]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const r=ZJ(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function z6(e,t,r,n,s,i){const o=[],a=s.keySet,l=s.catchall._zod,c=l.def.type;for(const u of Object.keys(t)){if(a.has(u))continue;if(c==="never"){o.push(u);continue}const h=l.run({value:t[u],issues:[]},n);h instanceof Promise?e.push(h.then(f=>nv(f,r,u,t))):nv(h,r,u,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const RQ=re("$ZodObject",(e,t)=>{Zt.init(e,t);const r=nE(()=>M6(t));Nt(e._zod,"propValues",()=>{const o=t.shape,a={};for(const l in o){const c=o[l]._zod;if(c.values){a[l]??(a[l]=new Set);for(const u of c.values)a[l].add(u)}}return a});const n=rv,s=t.catchall;let i;e._zod.parse=(o,a)=>{i??(i=r.value);const l=o.value;if(!n(l))return o.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),o;o.value={};const c=[],u=i.shape;for(const h of i.keys){const p=u[h]._zod.run({value:l[h],issues:[]},a);p instanceof Promise?c.push(p.then(y=>nv(y,o,h,l))):nv(p,o,h,l)}return s?z6(c,l,o,a,r.value,e):c.length?Promise.all(c).then(()=>o):o}}),IQ=re("$ZodObjectJIT",(e,t)=>{RQ.init(e,t);const r=e._zod.parse,n=nE(()=>M6(t)),s=f=>{const p=new eQ(["shape","payload","ctx"]),y=n.value,m=_=>{const j=_O(_);return`shape[${j}]._zod.run({ value: input[${j}], issues: [] }, ctx)`};p.write("const input = payload.value;");const b=Object.create(null);let x=0;for(const _ of y.keys)b[_]=`key_${x++}`;p.write("const newResult = {}");for(const _ of y.keys){const j=b[_],k=_O(_);p.write(`const ${j} = ${m(_)};`),p.write(`
        if (${j}.issues.length) {
          payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${k}, ...iss.path] : [${k}]
          })));
        }
        
        if (${j}.value === undefined) {
          if (${k} in input) {
            newResult[${k}] = undefined;
          }
        } else {
          newResult[${k}] = ${j}.value;
        }
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const w=p.compile();return(_,j)=>w(f,_,j)};let i;const o=rv,a=!j6.jitless,c=a&&HJ.value,u=t.catchall;let h;e._zod.parse=(f,p)=>{h??(h=n.value);const y=f.value;return o(y)?a&&c&&(p==null?void 0:p.async)===!1&&p.jitless!==!0?(i||(i=s(t.shape)),f=i(f,p),u?z6([],y,f,p,h,e):f):r(f,p):(f.issues.push({expected:"object",code:"invalid_type",input:y,inst:e}),f)}});function NO(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const s=e.filter(i=>!sd(i));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>fl(o,n,hl())))}),t)}const DQ=re("$ZodUnion",(e,t)=>{Zt.init(e,t),Nt(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Nt(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Nt(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),Nt(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>iE(i.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const l of t.options){const c=l._zod.run({value:s.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>NO(l,s,e,i)):NO(a,s,e,i)}}),LQ=re("$ZodIntersection",(e,t)=>{Zt.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,i=t.left._zod.run({value:s,issues:[]},n),o=t.right._zod.run({value:s,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([l,c])=>SO(r,l,c)):SO(r,i,o)}});function Dj(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Kd(e)&&Kd(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),s={...e,...t};for(const i of n){const o=Dj(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],i=t[n],o=Dj(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function SO(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),sd(e))return e;const n=Dj(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const MQ=re("$ZodRecord",(e,t)=>{Zt.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Kd(s))return r.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),r;const i=[];if(t.keyType._zod.values){const o=t.keyType._zod.values;r.value={};for(const l of o)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=t.valueType._zod.run({value:s[l],issues:[]},n);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&r.issues.push(...id(l,u.issues)),r.value[l]=u.value})):(c.issues.length&&r.issues.push(...id(l,c.issues)),r.value[l]=c.value)}let a;for(const l in s)o.has(l)||(a=a??[],a.push(l));a&&a.length>0&&r.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:a})}else{r.value={};for(const o of Reflect.ownKeys(s)){if(o==="__proto__")continue;const a=t.keyType._zod.run({value:o,issues:[]},n);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(c=>fl(c,n,hl())),input:o,path:[o],inst:e}),r.value[a.value]=a.value;continue}const l=t.valueType._zod.run({value:s[o],issues:[]},n);l instanceof Promise?i.push(l.then(c=>{c.issues.length&&r.issues.push(...id(o,c.issues)),r.value[a.value]=c.value})):(l.issues.length&&r.issues.push(...id(o,l.issues)),r.value[a.value]=l.value)}}return i.length?Promise.all(i).then(()=>r):r}}),zQ=re("$ZodEnum",(e,t)=>{Zt.init(e,t);const r=BJ(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>KJ.has(typeof s)).map(s=>typeof s=="string"?Zb(s):s.toString()).join("|")})$`),e._zod.parse=(s,i)=>{const o=s.value;return n.has(o)||s.issues.push({code:"invalid_value",values:r,input:o,inst:e}),s}}),FQ=re("$ZodTransform",(e,t)=>{Zt.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new _6(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(r.value=o,r));if(s instanceof Promise)throw new yd;return r.value=s,r}});function EO(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const $Q=re("$ZodOptional",(e,t)=>{Zt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Nt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Nt(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${iE(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>EO(i,r.value)):EO(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),UQ=re("$ZodNullable",(e,t)=>{Zt.init(e,t),Nt(e._zod,"optin",()=>t.innerType._zod.optin),Nt(e._zod,"optout",()=>t.innerType._zod.optout),Nt(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${iE(r.source)}|null)$`):void 0}),Nt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),qQ=re("$ZodDefault",(e,t)=>{Zt.init(e,t),e._zod.optin="optional",Nt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>CO(i,t)):CO(s,t)}});function CO(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const BQ=re("$ZodPrefault",(e,t)=>{Zt.init(e,t),e._zod.optin="optional",Nt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),VQ=re("$ZodNonOptional",(e,t)=>{Zt.init(e,t),Nt(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>TO(i,e)):TO(s,e)}});function TO(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const WQ=re("$ZodCatch",(e,t)=>{Zt.init(e,t),Nt(e._zod,"optin",()=>t.innerType._zod.optin),Nt(e._zod,"optout",()=>t.innerType._zod.optout),Nt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>fl(o,n,hl()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(i=>fl(i,n,hl()))},input:r.value}),r.issues=[]),r)}}),HQ=re("$ZodPipe",(e,t)=>{Zt.init(e,t),Nt(e._zod,"values",()=>t.in._zod.values),Nt(e._zod,"optin",()=>t.in._zod.optin),Nt(e._zod,"optout",()=>t.out._zod.optout),Nt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=t.out._zod.run(r,n);return i instanceof Promise?i.then(o=>Eg(o,t.in,n)):Eg(i,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(i=>Eg(i,t.out,n)):Eg(s,t.out,n)}});function Eg(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const KQ=re("$ZodReadonly",(e,t)=>{Zt.init(e,t),Nt(e._zod,"propValues",()=>t.innerType._zod.propValues),Nt(e._zod,"values",()=>t.innerType._zod.values),Nt(e._zod,"optin",()=>t.innerType._zod.optin),Nt(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(AO):AO(s)}});function AO(e){return e.value=Object.freeze(e.value),e}const ZQ=re("$ZodCustom",(e,t)=>{Zn.init(e,t),Zt.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(i=>OO(i,r,n,e));OO(s,r,n,e)}});function OO(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(Cp(s))}}class GQ{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function YQ(){return new GQ}const Cg=YQ();function JQ(e,t){return new e({type:"string",...Fe(t)})}function XQ(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Fe(t)})}function PO(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Fe(t)})}function QQ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Fe(t)})}function eee(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Fe(t)})}function tee(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Fe(t)})}function ree(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Fe(t)})}function nee(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Fe(t)})}function see(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Fe(t)})}function iee(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Fe(t)})}function oee(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Fe(t)})}function aee(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Fe(t)})}function lee(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Fe(t)})}function cee(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Fe(t)})}function uee(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Fe(t)})}function dee(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Fe(t)})}function hee(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Fe(t)})}function fee(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Fe(t)})}function pee(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Fe(t)})}function mee(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Fe(t)})}function gee(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Fe(t)})}function yee(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Fe(t)})}function vee(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Fe(t)})}function bee(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Fe(t)})}function xee(e,t){return new e({type:"string",format:"date",check:"string_format",...Fe(t)})}function wee(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Fe(t)})}function _ee(e,t){return new e({type:"string",format:"duration",check:"string_format",...Fe(t)})}function jee(e,t){return new e({type:"number",checks:[],...Fe(t)})}function kee(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Fe(t)})}function Nee(e,t){return new e({type:"boolean",...Fe(t)})}function See(e){return new e({type:"any"})}function Eee(e){return new e({type:"unknown"})}function Cee(e,t){return new e({type:"never",...Fe(t)})}function RO(e,t){return new R6({check:"less_than",...Fe(t),value:e,inclusive:!1})}function E0(e,t){return new R6({check:"less_than",...Fe(t),value:e,inclusive:!0})}function IO(e,t){return new I6({check:"greater_than",...Fe(t),value:e,inclusive:!1})}function C0(e,t){return new I6({check:"greater_than",...Fe(t),value:e,inclusive:!0})}function DO(e,t){return new qX({check:"multiple_of",...Fe(t),value:e})}function F6(e,t){return new VX({check:"max_length",...Fe(t),maximum:e})}function sv(e,t){return new WX({check:"min_length",...Fe(t),minimum:e})}function $6(e,t){return new HX({check:"length_equals",...Fe(t),length:e})}function Tee(e,t){return new KX({check:"string_format",format:"regex",...Fe(t),pattern:e})}function Aee(e){return new ZX({check:"string_format",format:"lowercase",...Fe(e)})}function Oee(e){return new GX({check:"string_format",format:"uppercase",...Fe(e)})}function Pee(e,t){return new YX({check:"string_format",format:"includes",...Fe(t),includes:e})}function Ree(e,t){return new JX({check:"string_format",format:"starts_with",...Fe(t),prefix:e})}function Iee(e,t){return new XX({check:"string_format",format:"ends_with",...Fe(t),suffix:e})}function _m(e){return new QX({check:"overwrite",tx:e})}function Dee(e){return _m(t=>t.normalize(e))}function Lee(){return _m(e=>e.trim())}function Mee(){return _m(e=>e.toLowerCase())}function zee(){return _m(e=>e.toUpperCase())}function Fee(e,t,r){return new e({type:"array",element:t,...Fe(r)})}function $ee(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Fe(r)})}function Uee(e){const t=qee(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Cp(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(Cp(s))}},e(r.value,r)));return t}function qee(e,t){const r=new Zn({check:"custom",...Fe(t)});return r._zod.check=e,r}const Bee=re("ZodISODateTime",(e,t)=>{fQ.init(e,t),Gt.init(e,t)});function Vee(e){return bee(Bee,e)}const Wee=re("ZodISODate",(e,t)=>{pQ.init(e,t),Gt.init(e,t)});function Hee(e){return xee(Wee,e)}const Kee=re("ZodISOTime",(e,t)=>{mQ.init(e,t),Gt.init(e,t)});function Zee(e){return wee(Kee,e)}const Gee=re("ZodISODuration",(e,t)=>{gQ.init(e,t),Gt.init(e,t)});function Yee(e){return _ee(Gee,e)}const Jee=(e,t)=>{E6.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>sX(e,r)},flatten:{value:r=>nX(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Ij,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Ij,2)}},isEmpty:{get(){return e.issues.length===0}}})},$s=re("ZodError",Jee,{Parent:Error}),Xee=aE($s),Qee=lE($s),ete=Gb($s),tte=Yb($s),rte=aX($s),nte=lX($s),ste=cX($s),ite=uX($s),ote=dX($s),ate=hX($s),lte=fX($s),cte=pX($s),sr=re("ZodType",(e,t)=>(Zt.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>kl(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>Xee(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>ete(e,r,n),e.parseAsync=async(r,n)=>Qee(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>tte(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>rte(e,r,n),e.decode=(r,n)=>nte(e,r,n),e.encodeAsync=async(r,n)=>ste(e,r,n),e.decodeAsync=async(r,n)=>ite(e,r,n),e.safeEncode=(r,n)=>ote(e,r,n),e.safeDecode=(r,n)=>ate(e,r,n),e.safeEncodeAsync=async(r,n)=>lte(e,r,n),e.safeDecodeAsync=async(r,n)=>cte(e,r,n),e.refine=(r,n)=>e.check(tre(r,n)),e.superRefine=r=>e.check(rre(r)),e.overwrite=r=>e.check(_m(r)),e.optional=()=>FO(e),e.nullable=()=>$O(e),e.nullish=()=>FO($O(e)),e.nonoptional=r=>Zte(e,r),e.array=()=>hE(e),e.or=r=>Mte([e,r]),e.and=r=>Fte(e,r),e.transform=r=>UO(e,qte(r)),e.default=r=>Wte(e,r),e.prefault=r=>Kte(e,r),e.catch=r=>Yte(e,r),e.pipe=r=>UO(e,r),e.readonly=()=>Qte(e),e.describe=r=>{const n=e.clone();return Cg.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=Cg.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Cg.get(e);const n=e.clone();return Cg.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),U6=re("_ZodString",(e,t)=>{cE.init(e,t),sr.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Tee(...n)),e.includes=(...n)=>e.check(Pee(...n)),e.startsWith=(...n)=>e.check(Ree(...n)),e.endsWith=(...n)=>e.check(Iee(...n)),e.min=(...n)=>e.check(sv(...n)),e.max=(...n)=>e.check(F6(...n)),e.length=(...n)=>e.check($6(...n)),e.nonempty=(...n)=>e.check(sv(1,...n)),e.lowercase=n=>e.check(Aee(n)),e.uppercase=n=>e.check(Oee(n)),e.trim=()=>e.check(Lee()),e.normalize=(...n)=>e.check(Dee(...n)),e.toLowerCase=()=>e.check(Mee()),e.toUpperCase=()=>e.check(zee())}),ute=re("ZodString",(e,t)=>{cE.init(e,t),U6.init(e,t),e.email=r=>e.check(XQ(dte,r)),e.url=r=>e.check(nee(hte,r)),e.jwt=r=>e.check(vee(Ete,r)),e.emoji=r=>e.check(see(fte,r)),e.guid=r=>e.check(PO(LO,r)),e.uuid=r=>e.check(QQ(Tg,r)),e.uuidv4=r=>e.check(eee(Tg,r)),e.uuidv6=r=>e.check(tee(Tg,r)),e.uuidv7=r=>e.check(ree(Tg,r)),e.nanoid=r=>e.check(iee(pte,r)),e.guid=r=>e.check(PO(LO,r)),e.cuid=r=>e.check(oee(mte,r)),e.cuid2=r=>e.check(aee(gte,r)),e.ulid=r=>e.check(lee(yte,r)),e.base64=r=>e.check(mee(kte,r)),e.base64url=r=>e.check(gee(Nte,r)),e.xid=r=>e.check(cee(vte,r)),e.ksuid=r=>e.check(uee(bte,r)),e.ipv4=r=>e.check(dee(xte,r)),e.ipv6=r=>e.check(hee(wte,r)),e.cidrv4=r=>e.check(fee(_te,r)),e.cidrv6=r=>e.check(pee(jte,r)),e.e164=r=>e.check(yee(Ste,r)),e.datetime=r=>e.check(Vee(r)),e.date=r=>e.check(Hee(r)),e.time=r=>e.check(Zee(r)),e.duration=r=>e.check(Yee(r))});function ue(e){return JQ(ute,e)}const Gt=re("ZodStringFormat",(e,t)=>{$t.init(e,t),U6.init(e,t)}),dte=re("ZodEmail",(e,t)=>{sQ.init(e,t),Gt.init(e,t)}),LO=re("ZodGUID",(e,t)=>{rQ.init(e,t),Gt.init(e,t)}),Tg=re("ZodUUID",(e,t)=>{nQ.init(e,t),Gt.init(e,t)}),hte=re("ZodURL",(e,t)=>{iQ.init(e,t),Gt.init(e,t)}),fte=re("ZodEmoji",(e,t)=>{oQ.init(e,t),Gt.init(e,t)}),pte=re("ZodNanoID",(e,t)=>{aQ.init(e,t),Gt.init(e,t)}),mte=re("ZodCUID",(e,t)=>{lQ.init(e,t),Gt.init(e,t)}),gte=re("ZodCUID2",(e,t)=>{cQ.init(e,t),Gt.init(e,t)}),yte=re("ZodULID",(e,t)=>{uQ.init(e,t),Gt.init(e,t)}),vte=re("ZodXID",(e,t)=>{dQ.init(e,t),Gt.init(e,t)}),bte=re("ZodKSUID",(e,t)=>{hQ.init(e,t),Gt.init(e,t)}),xte=re("ZodIPv4",(e,t)=>{yQ.init(e,t),Gt.init(e,t)}),wte=re("ZodIPv6",(e,t)=>{vQ.init(e,t),Gt.init(e,t)}),_te=re("ZodCIDRv4",(e,t)=>{bQ.init(e,t),Gt.init(e,t)}),jte=re("ZodCIDRv6",(e,t)=>{xQ.init(e,t),Gt.init(e,t)}),kte=re("ZodBase64",(e,t)=>{wQ.init(e,t),Gt.init(e,t)}),Nte=re("ZodBase64URL",(e,t)=>{jQ.init(e,t),Gt.init(e,t)}),Ste=re("ZodE164",(e,t)=>{kQ.init(e,t),Gt.init(e,t)}),Ete=re("ZodJWT",(e,t)=>{SQ.init(e,t),Gt.init(e,t)}),q6=re("ZodNumber",(e,t)=>{L6.init(e,t),sr.init(e,t),e.gt=(n,s)=>e.check(IO(n,s)),e.gte=(n,s)=>e.check(C0(n,s)),e.min=(n,s)=>e.check(C0(n,s)),e.lt=(n,s)=>e.check(RO(n,s)),e.lte=(n,s)=>e.check(E0(n,s)),e.max=(n,s)=>e.check(E0(n,s)),e.int=n=>e.check(MO(n)),e.safe=n=>e.check(MO(n)),e.positive=n=>e.check(IO(0,n)),e.nonnegative=n=>e.check(C0(0,n)),e.negative=n=>e.check(RO(0,n)),e.nonpositive=n=>e.check(E0(0,n)),e.multipleOf=(n,s)=>e.check(DO(n,s)),e.step=(n,s)=>e.check(DO(n,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Vo(e){return jee(q6,e)}const Cte=re("ZodNumberFormat",(e,t)=>{EQ.init(e,t),q6.init(e,t)});function MO(e){return kee(Cte,e)}const Tte=re("ZodBoolean",(e,t)=>{CQ.init(e,t),sr.init(e,t)});function uE(e){return Nee(Tte,e)}const Ate=re("ZodAny",(e,t)=>{TQ.init(e,t),sr.init(e,t)});function dE(){return See(Ate)}const Ote=re("ZodUnknown",(e,t)=>{AQ.init(e,t),sr.init(e,t)});function zO(){return Eee(Ote)}const Pte=re("ZodNever",(e,t)=>{OQ.init(e,t),sr.init(e,t)});function Rte(e){return Cee(Pte,e)}const Ite=re("ZodArray",(e,t)=>{PQ.init(e,t),sr.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(sv(r,n)),e.nonempty=r=>e.check(sv(1,r)),e.max=(r,n)=>e.check(F6(r,n)),e.length=(r,n)=>e.check($6(r,n)),e.unwrap=()=>e.element});function hE(e,t){return Fee(Ite,e,t)}const Dte=re("ZodObject",(e,t)=>{IQ.init(e,t),sr.init(e,t),Nt(e,"shape",()=>t.shape),e.keyof=()=>St(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:zO()}),e.loose=()=>e.clone({...e._zod.def,catchall:zO()}),e.strict=()=>e.clone({...e._zod.def,catchall:Rte()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>XJ(e,r),e.safeExtend=r=>QJ(e,r),e.merge=r=>eX(e,r),e.pick=r=>YJ(e,r),e.omit=r=>JJ(e,r),e.partial=(...r)=>tX(B6,e,r[0]),e.required=(...r)=>rX(V6,e,r[0])});function On(e,t){const r={type:"object",get shape(){return jl(this,"shape",e?WJ(e):{}),this.shape},...Fe(t)};return new Dte(r)}const Lte=re("ZodUnion",(e,t)=>{DQ.init(e,t),sr.init(e,t),e.options=t.options});function Mte(e,t){return new Lte({type:"union",options:e,...Fe(t)})}const zte=re("ZodIntersection",(e,t)=>{LQ.init(e,t),sr.init(e,t)});function Fte(e,t){return new zte({type:"intersection",left:e,right:t})}const $te=re("ZodRecord",(e,t)=>{MQ.init(e,t),sr.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Sh(e,t,r){return new $te({type:"record",keyType:e,valueType:t,...Fe(r)})}const Lj=re("ZodEnum",(e,t)=>{zQ.init(e,t),sr.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Lj({...t,checks:[],...Fe(s),entries:i})},e.exclude=(n,s)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Lj({...t,checks:[],...Fe(s),entries:i})}});function St(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Lj({type:"enum",entries:r,...Fe(t)})}const Ute=re("ZodTransform",(e,t)=>{FQ.init(e,t),sr.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new _6(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Cp(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),r.issues.push(Cp(o))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(i=>(r.value=i,r)):(r.value=s,r)}});function qte(e){return new Ute({type:"transform",transform:e})}const B6=re("ZodOptional",(e,t)=>{$Q.init(e,t),sr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function FO(e){return new B6({type:"optional",innerType:e})}const Bte=re("ZodNullable",(e,t)=>{UQ.init(e,t),sr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $O(e){return new Bte({type:"nullable",innerType:e})}const Vte=re("ZodDefault",(e,t)=>{qQ.init(e,t),sr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Wte(e,t){return new Vte({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():N6(t)}})}const Hte=re("ZodPrefault",(e,t)=>{BQ.init(e,t),sr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Kte(e,t){return new Hte({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():N6(t)}})}const V6=re("ZodNonOptional",(e,t)=>{VQ.init(e,t),sr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Zte(e,t){return new V6({type:"nonoptional",innerType:e,...Fe(t)})}const Gte=re("ZodCatch",(e,t)=>{WQ.init(e,t),sr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Yte(e,t){return new Gte({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Jte=re("ZodPipe",(e,t)=>{HQ.init(e,t),sr.init(e,t),e.in=t.in,e.out=t.out});function UO(e,t){return new Jte({type:"pipe",in:e,out:t})}const Xte=re("ZodReadonly",(e,t)=>{KQ.init(e,t),sr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Qte(e){return new Xte({type:"readonly",innerType:e})}const ere=re("ZodCustom",(e,t)=>{ZQ.init(e,t),sr.init(e,t)});function tre(e,t={}){return $ee(ere,e,t)}function rre(e){return Uee(e)}const W6=On({id:ue().uuid().optional(),name:ue().min(1,"Product name is required").max(255,"Product name must be less than 255 characters").trim(),description:ue().max(2e3,"Description must be less than 2000 characters").optional().nullable(),product_type:St(["single_issue","bundle","chapter_pass","arc_pass"]).default("single_issue"),active:uE().default(!0),work_id:ue().uuid().optional().nullable(),content_grants:Sh(ue(),dE()).optional().nullable(),created_at:ue().datetime().optional(),updated_at:ue().datetime().optional()}),nre=On({id:ue().uuid().optional(),product_id:ue().uuid(),currency:ue().length(3,"Currency must be a 3-letter ISO code").toUpperCase(),unit_amount:Vo().min(0,"Price cannot be negative").max(999999,"Price cannot exceed $9,999.99"),interval:St(["one_time","month","year"]).optional().nullable(),nickname:ue().max(100,"Nickname must be less than 100 characters").optional().nullable(),trial_days:Vo().min(0,"Trial days cannot be negative").max(365,"Trial period cannot exceed 365 days").optional().nullable(),active:uE().default(!0),created_at:ue().datetime().optional(),updated_at:ue().datetime().optional()});W6.omit({id:!0,created_at:!0,updated_at:!0}).extend({prices:hE(nre.omit({id:!0,product_id:!0,created_at:!0,updated_at:!0})).min(1,"At least one price is required")});W6.partial().omit({id:!0,created_at:!0});On({active:St(["true","false"]).optional(),product_type:St(["single_issue","bundle","chapter_pass","arc_pass"]).optional(),limit:ue().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:ue().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),search:ue().max(100).optional(),sort_by:St(["created_at","name","price","updated_at"]).default("created_at"),sort_order:St(["asc","desc"]).default("desc")});const sre=On({id:ue().uuid(),username:ue().min(3,"Username must be at least 3 characters").max(30,"Username must be less than 30 characters").regex(/^[a-zA-Z0-9_-]+$/,"Username can only contain letters, numbers, underscores, and hyphens").optional().nullable(),display_name:ue().min(1,"Display name is required").max(100,"Display name must be less than 100 characters").trim().optional().nullable(),avatar_url:ue().url("Invalid avatar URL").optional().nullable(),website:ue().url("Invalid website URL").optional().nullable(),role:St(["admin","support","accountant","user","super_admin"]).default("user"),beta_reader_status:St(["not_applied","pending","approved","rejected"]).default("not_applied"),created_at:ue().datetime().optional(),updated_at:ue().datetime().optional()});On({user_id:ue().uuid(),books_read:Vo().min(0,"Books read cannot be negative").default(0),reading_hours:Vo().min(0,"Reading hours cannot be negative").default(0),achievements:Vo().min(0,"Achievements cannot be negative").default(0),currently_reading:ue().max(255).default("")});On({id:ue().uuid().optional(),user_id:ue().uuid().optional().nullable(),email:ue().email("Invalid email address"),full_name:ue().min(2,"Full name must be at least 2 characters").max(100,"Full name must be less than 100 characters").trim(),time_zone:ue().min(1,"Time zone is required").max(50,"Time zone must be less than 50 characters"),country:ue().max(100,"Country must be less than 100 characters").optional().nullable(),devices:hE(ue()).optional().nullable(),hours_per_week:ue().min(1,"Hours per week is required"),communication:ue().min(10,"Communication preference must be at least 10 characters").max(500,"Communication preference must be less than 500 characters"),portal_use:ue().min(10,"Portal use description must be at least 10 characters").max(500,"Portal use description must be less than 500 characters"),beta_commitment:ue().min(20,"Beta commitment must be at least 20 characters").max(1e3,"Beta commitment must be less than 1000 characters"),interest_statement:ue().min(50,"Interest statement must be at least 50 characters").max(2e3,"Interest statement must be less than 2000 characters"),feedback_philosophy:ue().min(50,"Feedback philosophy must be at least 50 characters").max(2e3,"Feedback philosophy must be less than 2000 characters"),recent_reads:ue().max(1e3,"Recent reads must be less than 1000 characters").optional().nullable(),prior_beta:ue().max(1e3,"Prior beta experience must be less than 1000 characters").optional().nullable(),goodreads:ue().url("Invalid Goodreads URL").optional().nullable(),demographics:ue().max(500,"Demographics must be less than 500 characters").optional().nullable(),access_needs:ue().max(500,"Access needs must be less than 500 characters").optional().nullable(),status:St(["pending","approved","denied"]).default("pending"),created_at:ue().datetime().optional()});sre.partial().omit({id:!0,created_at:!0,role:!0});On({user_id:ue().uuid(),role:St(["admin","support","accountant","user","super_admin"]),granted_by:ue().uuid()});On({role:St(["admin","support","accountant","user","super_admin"]).optional(),beta_reader_status:St(["not_applied","pending","approved","rejected"]).optional(),limit:ue().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:ue().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),search:ue().max(100).optional(),sort_by:St(["created_at","username","display_name","role"]).default("created_at"),sort_order:St(["asc","desc"]).default("desc")});On({priceId:ue().min(1,"Price ID is required"),successUrl:ue().url("Invalid success URL"),cancelUrl:ue().url("Invalid cancel URL"),customerEmail:ue().email("Invalid customer email").optional(),productSlug:ue().min(1,"Product slug is required").optional(),userId:ue().uuid().optional(),quantity:Vo().min(1,"Quantity must be at least 1").max(10,"Quantity cannot exceed 10").default(1),metadata:Sh(ue(),ue()).optional()});const H6=On({id:ue().uuid().optional(),user_id:ue().uuid(),plan_id:ue().min(1,"Plan ID is required"),status:St(["incomplete","incomplete_expired","trialing","active","past_due","canceled","unpaid","paused"]).default("active"),current_period_start:ue().datetime().optional().nullable(),current_period_end:ue().datetime().optional().nullable(),trial_start:ue().datetime().optional().nullable(),trial_end:ue().datetime().optional().nullable(),cancel_at_period_end:uE().default(!1),metadata:Sh(ue(),dE()).optional().nullable(),created_at:ue().datetime().optional(),updated_at:ue().datetime().optional()});On({amount:Vo().min(50,"Amount must be at least $0.50"),currency:ue().length(3,"Currency must be a 3-letter ISO code"),paymentMethodId:ue().optional(),customerId:ue().optional(),metadata:Sh(ue(),ue()).optional()});On({paymentIntentId:ue().min(1,"Payment intent ID is required"),amount:Vo().min(1,"Refund amount must be positive").optional(),reason:St(["duplicate","fraudulent","requested_by_customer","expired_uncaptured_charge"]).default("requested_by_customer"),metadata:Sh(ue(),ue()).optional()});On({id:ue().uuid().optional(),user_id:ue().uuid().optional().nullable(),product_id:ue().uuid(),price_id:ue().uuid(),status:St(["pending","completed","failed","refunded","canceled"]).default("pending"),amount_cents:Vo().min(0,"Amount cannot be negative"),currency:ue().length(3,"Currency must be a 3-letter ISO code"),customer_email:ue().email("Invalid customer email").optional().nullable(),provider:St(["stripe","paypal"]).default("stripe"),provider_session_id:ue().optional().nullable(),provider_payment_intent_id:ue().optional().nullable(),metadata:Sh(ue(),dE()).optional().nullable(),created_at:ue().datetime().optional(),updated_at:ue().datetime().optional()});H6.omit({id:!0,created_at:!0,updated_at:!0});H6.partial().omit({id:!0,user_id:!0,created_at:!0});On({status:St(["pending","completed","failed","refunded","canceled"]).optional(),provider:St(["stripe","paypal"]).optional(),user_id:ue().uuid().optional(),start_date:ue().datetime().optional(),end_date:ue().datetime().optional(),limit:ue().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:ue().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),sort_by:St(["created_at","amount_cents","status"]).default("created_at"),sort_order:St(["asc","desc"]).default("desc")});On({status:St(["incomplete","incomplete_expired","trialing","active","past_due","canceled","unpaid","paused"]).optional(),user_id:ue().uuid().optional(),plan_id:ue().optional(),limit:ue().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:ue().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),sort_by:St(["created_at","current_period_end","status"]).default("created_at"),sort_order:St(["asc","desc"]).default("desc")});var Eh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$c=typeof window>"u"||"Deno"in globalThis;function _n(){}function ire(e,t){return typeof e=="function"?e(t):e}function Mj(e){return typeof e=="number"&&e>=0&&e!==1/0}function K6(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ll(e,t){return typeof e=="function"?e(t):e}function _s(e,t){return typeof e=="function"?e(t):e}function qO(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o){if(n){if(t.queryHash!==fE(o,t.options))return!1}else if(!Tp(t.queryKey,o))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function BO(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Uc(t.options.mutationKey)!==Uc(i))return!1}else if(!Tp(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function fE(e,t){return((t==null?void 0:t.queryKeyHashFn)||Uc)(e)}function Uc(e){return JSON.stringify(e,(t,r)=>zj(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Tp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Tp(e[r],t[r])):!1}function Z6(e,t){if(e===t)return e;const r=VO(e)&&VO(t);if(r||zj(e)&&zj(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),o=i.length,a=r?[]:{},l=new Set(n);let c=0;for(let u=0;u<o;u++){const h=r?u:i[u];(!r&&l.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(a[h]=void 0,c++):(a[h]=Z6(e[h],t[h]),a[h]===e[h]&&e[h]!==void 0&&c++)}return s===o&&c===s?e:a}return t}function iv(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function VO(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function zj(e){if(!WO(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!WO(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function WO(e){return Object.prototype.toString.call(e)==="[object Object]"}function ore(e){return new Promise(t=>{setTimeout(t,e)})}function Fj(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Z6(e,t):t}function are(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function lre(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var pE=Symbol();function G6(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===pE?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Y6(e,t){return typeof e=="function"?e(...t):!!e}var _c,Ga,Rd,uM,cre=(uM=class extends Eh{constructor(){super();$e(this,_c);$e(this,Ga);$e(this,Rd);je(this,Rd,t=>{if(!$c&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){F(this,Ga)||this.setEventListener(F(this,Rd))}onUnsubscribe(){var t;this.hasListeners()||((t=F(this,Ga))==null||t.call(this),je(this,Ga,void 0))}setEventListener(t){var r;je(this,Rd,t),(r=F(this,Ga))==null||r.call(this),je(this,Ga,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){F(this,_c)!==t&&(je(this,_c,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof F(this,_c)=="boolean"?F(this,_c):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},_c=new WeakMap,Ga=new WeakMap,Rd=new WeakMap,uM),mE=new cre,Id,Ya,Dd,dM,ure=(dM=class extends Eh{constructor(){super();$e(this,Id,!0);$e(this,Ya);$e(this,Dd);je(this,Dd,t=>{if(!$c&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){F(this,Ya)||this.setEventListener(F(this,Dd))}onUnsubscribe(){var t;this.hasListeners()||((t=F(this,Ya))==null||t.call(this),je(this,Ya,void 0))}setEventListener(t){var r;je(this,Dd,t),(r=F(this,Ya))==null||r.call(this),je(this,Ya,t(this.setOnline.bind(this)))}setOnline(t){F(this,Id)!==t&&(je(this,Id,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return F(this,Id)}},Id=new WeakMap,Ya=new WeakMap,Dd=new WeakMap,dM),ov=new ure;function $j(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function dre(e){return Math.min(1e3*2**e,3e4)}function J6(e){return(e??"online")==="online"?ov.isOnline():!0}var X6=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Q6(e){let t=!1,r=0,n;const s=$j(),i=()=>s.status!=="pending",o=m=>{var b;i()||(f(new X6(m)),(b=e.abort)==null||b.call(e))},a=()=>{t=!0},l=()=>{t=!1},c=()=>mE.isFocused()&&(e.networkMode==="always"||ov.isOnline())&&e.canRun(),u=()=>J6(e.networkMode)&&e.canRun(),h=m=>{i()||(n==null||n(),s.resolve(m))},f=m=>{i()||(n==null||n(),s.reject(m))},p=()=>new Promise(m=>{var b;n=x=>{(i()||c())&&m(x)},(b=e.onPause)==null||b.call(e)}).then(()=>{var m;n=void 0,i()||(m=e.onContinue)==null||m.call(e)}),y=()=>{if(i())return;let m;const b=r===0?e.initialPromise:void 0;try{m=b??e.fn()}catch(x){m=Promise.reject(x)}Promise.resolve(m).then(h).catch(x=>{var S;if(i())return;const w=e.retry??($c?0:3),_=e.retryDelay??dre,j=typeof _=="function"?_(r,x):_,k=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,x);if(t||!k){f(x);return}r++,(S=e.onFail)==null||S.call(e,r,x),ore(j).then(()=>c()?void 0:p()).then(()=>{t?f(x):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?y():p().then(y),s)}}var hre=e=>setTimeout(e,0);function fre(){let e=[],t=0,r=a=>{a()},n=a=>{a()},s=hre;const i=a=>{t?e.push(a):s(()=>{r(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var Ar=fre(),jc,hM,ez=(hM=class{constructor(){$e(this,jc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Mj(this.gcTime)&&je(this,jc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($c?1/0:5*60*1e3))}clearGcTimeout(){F(this,jc)&&(clearTimeout(F(this,jc)),je(this,jc,void 0))}},jc=new WeakMap,hM),Ld,Md,ws,kc,$r,pm,Nc,si,Co,fM,pre=(fM=class extends ez{constructor(t){super();$e(this,si);$e(this,Ld);$e(this,Md);$e(this,ws);$e(this,kc);$e(this,$r);$e(this,pm);$e(this,Nc);je(this,Nc,!1),je(this,pm,t.defaultOptions),this.setOptions(t.options),this.observers=[],je(this,kc,t.client),je(this,ws,F(this,kc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,je(this,Ld,mre(this.options)),this.state=t.state??F(this,Ld),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=F(this,$r))==null?void 0:t.promise}setOptions(t){this.options={...F(this,pm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&F(this,ws).remove(this)}setData(t,r){const n=Fj(this.state.data,t,this.options);return Ye(this,si,Co).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Ye(this,si,Co).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=F(this,$r))==null?void 0:n.promise;return(s=F(this,$r))==null||s.cancel(t),r?r.then(_n).catch(_n):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(F(this,Ld))}isActive(){return this.observers.some(t=>_s(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ll(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!K6(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=F(this,$r))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=F(this,$r))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),F(this,ws).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(F(this,$r)&&(F(this,Nc)?F(this,$r).cancel({revert:!0}):F(this,$r).cancelRetry()),this.scheduleGc()),F(this,ws).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ye(this,si,Co).call(this,{type:"invalidate"})}async fetch(t,r){var l,c,u,h,f,p,y,m,b,x,w,_;if(this.state.fetchStatus!=="idle"&&((l=F(this,$r))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(F(this,$r))return F(this,$r).continueRetry(),F(this,$r).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(k=>k.options.queryFn);j&&this.setOptions(j.options)}const n=new AbortController,s=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(je(this,Nc,!0),n.signal)})},i=()=>{const j=G6(this.options,r),S=(()=>{const C={client:F(this,kc),queryKey:this.queryKey,meta:this.meta};return s(C),C})();return je(this,Nc,!1),this.options.persister?this.options.persister(j,S,this):j(S)},a=(()=>{const j={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:F(this,kc),state:this.state,fetchFn:i};return s(j),j})();(c=this.options.behavior)==null||c.onFetch(a,this),je(this,Md,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ye(this,si,Co).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),je(this,$r,Q6({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onFail:(j,k)=>{Ye(this,si,Co).call(this,{type:"failed",failureCount:j,error:k})},onPause:()=>{Ye(this,si,Co).call(this,{type:"pause"})},onContinue:()=>{Ye(this,si,Co).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const j=await F(this,$r).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(p=(f=F(this,ws).config).onSuccess)==null||p.call(f,j,this),(m=(y=F(this,ws).config).onSettled)==null||m.call(y,j,this.state.error,this),j}catch(j){if(j instanceof X6){if(j.silent)return F(this,$r).promise;if(j.revert){if(this.setState({...F(this,Md),fetchStatus:"idle"}),this.state.data===void 0)throw j;return this.state.data}}throw Ye(this,si,Co).call(this,{type:"error",error:j}),(x=(b=F(this,ws).config).onError)==null||x.call(b,j,this),(_=(w=F(this,ws).config).onSettled)==null||_.call(w,this.state.data,j,this),j}finally{this.scheduleGc()}}},Ld=new WeakMap,Md=new WeakMap,ws=new WeakMap,kc=new WeakMap,$r=new WeakMap,pm=new WeakMap,Nc=new WeakMap,si=new WeakSet,Co=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...tz(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return je(this,Md,t.manual?s:void 0),s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Ar.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),F(this,ws).notify({query:this,type:"updated",action:t})})},fM);function tz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:J6(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function mre(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ui,pM,gre=(pM=class extends Eh{constructor(t={}){super();$e(this,Ui);this.config=t,je(this,Ui,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??fE(s,r);let o=this.get(i);return o||(o=new pre({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){F(this,Ui).has(t.queryHash)||(F(this,Ui).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=F(this,Ui).get(t.queryHash);r&&(t.destroy(),r===t&&F(this,Ui).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ar.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return F(this,Ui).get(t)}getAll(){return[...F(this,Ui).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>qO(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>qO(t,n)):r}notify(t){Ar.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ar.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ar.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ui=new WeakMap,pM),qi,xn,Sc,Bi,Da,mM,yre=(mM=class extends ez{constructor(t){super();$e(this,Bi);$e(this,qi);$e(this,xn);$e(this,Sc);this.mutationId=t.mutationId,je(this,xn,t.mutationCache),je(this,qi,[]),this.state=t.state||rz(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){F(this,qi).includes(t)||(F(this,qi).push(t),this.clearGcTimeout(),F(this,xn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){je(this,qi,F(this,qi).filter(r=>r!==t)),this.scheduleGc(),F(this,xn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){F(this,qi).length||(this.state.status==="pending"?this.scheduleGc():F(this,xn).remove(this))}continue(){var t;return((t=F(this,Sc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,a,l,c,u,h,f,p,y,m,b,x,w,_,j,k,S,C,E;const r=()=>{Ye(this,Bi,Da).call(this,{type:"continue"})};je(this,Sc,Q6({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(T,R)=>{Ye(this,Bi,Da).call(this,{type:"failed",failureCount:T,error:R})},onPause:()=>{Ye(this,Bi,Da).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>F(this,xn).canRun(this)}));const n=this.state.status==="pending",s=!F(this,Sc).canStart();try{if(n)r();else{Ye(this,Bi,Da).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(i=F(this,xn).config).onMutate)==null?void 0:o.call(i,t,this));const R=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));R!==this.state.context&&Ye(this,Bi,Da).call(this,{type:"pending",context:R,variables:t,isPaused:s})}const T=await F(this,Sc).start();return await((u=(c=F(this,xn).config).onSuccess)==null?void 0:u.call(c,T,t,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,T,t,this.state.context)),await((y=(p=F(this,xn).config).onSettled)==null?void 0:y.call(p,T,null,this.state.variables,this.state.context,this)),await((b=(m=this.options).onSettled)==null?void 0:b.call(m,T,null,t,this.state.context)),Ye(this,Bi,Da).call(this,{type:"success",data:T}),T}catch(T){try{throw await((w=(x=F(this,xn).config).onError)==null?void 0:w.call(x,T,t,this.state.context,this)),await((j=(_=this.options).onError)==null?void 0:j.call(_,T,t,this.state.context)),await((S=(k=F(this,xn).config).onSettled)==null?void 0:S.call(k,void 0,T,this.state.variables,this.state.context,this)),await((E=(C=this.options).onSettled)==null?void 0:E.call(C,void 0,T,t,this.state.context)),T}finally{Ye(this,Bi,Da).call(this,{type:"error",error:T})}}finally{F(this,xn).runNext(this)}}},qi=new WeakMap,xn=new WeakMap,Sc=new WeakMap,Bi=new WeakSet,Da=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ar.batch(()=>{F(this,qi).forEach(n=>{n.onMutationUpdate(t)}),F(this,xn).notify({mutation:this,type:"updated",action:t})})},mM);function rz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Io,ii,mm,gM,vre=(gM=class extends Eh{constructor(t={}){super();$e(this,Io);$e(this,ii);$e(this,mm);this.config=t,je(this,Io,new Set),je(this,ii,new Map),je(this,mm,0)}build(t,r,n){const s=new yre({mutationCache:this,mutationId:++xg(this,mm)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){F(this,Io).add(t);const r=Ag(t);if(typeof r=="string"){const n=F(this,ii).get(r);n?n.push(t):F(this,ii).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(F(this,Io).delete(t)){const r=Ag(t);if(typeof r=="string"){const n=F(this,ii).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&F(this,ii).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Ag(t);if(typeof r=="string"){const n=F(this,ii).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=Ag(t);if(typeof r=="string"){const s=(n=F(this,ii).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ar.batch(()=>{F(this,Io).forEach(t=>{this.notify({type:"removed",mutation:t})}),F(this,Io).clear(),F(this,ii).clear()})}getAll(){return Array.from(F(this,Io))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>BO(r,n))}findAll(t={}){return this.getAll().filter(r=>BO(t,r))}notify(t){Ar.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ar.batch(()=>Promise.all(t.map(r=>r.continue().catch(_n))))}},Io=new WeakMap,ii=new WeakMap,mm=new WeakMap,gM);function Ag(e){var t;return(t=e.options.scope)==null?void 0:t.id}function HO(e){return{onFetch:(t,r)=>{var u,h,f,p,y;const n=t.options,s=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const b=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},x=G6(t.options,t.fetchOptions),w=async(_,j,k)=>{if(m)return Promise.reject();if(j==null&&_.pages.length)return Promise.resolve(_);const C=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};return b(O),O})(),E=await x(C),{maxPages:T}=t.options,R=k?lre:are;return{pages:R(_.pages,E,T),pageParams:R(_.pageParams,j,T)}};if(s&&i.length){const _=s==="backward",j=_?bre:KO,k={pages:i,pageParams:o},S=j(n,k);a=await w(k,S,_)}else{const _=e??i.length;do{const j=l===0?o[0]??n.initialPageParam:KO(n,a);if(l>0&&j==null)break;a=await w(a,j),l++}while(l<_)}return a};t.options.persister?t.fetchFn=()=>{var m,b;return(b=(m=t.options).persister)==null?void 0:b.call(m,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function KO(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function bre(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Qt,Ja,Xa,zd,Fd,Qa,$d,Ud,yM,xre=(yM=class{constructor(e={}){$e(this,Qt);$e(this,Ja);$e(this,Xa);$e(this,zd);$e(this,Fd);$e(this,Qa);$e(this,$d);$e(this,Ud);je(this,Qt,e.queryCache||new gre),je(this,Ja,e.mutationCache||new vre),je(this,Xa,e.defaultOptions||{}),je(this,zd,new Map),je(this,Fd,new Map),je(this,Qa,0)}mount(){xg(this,Qa)._++,F(this,Qa)===1&&(je(this,$d,mE.subscribe(async e=>{e&&(await this.resumePausedMutations(),F(this,Qt).onFocus())})),je(this,Ud,ov.subscribe(async e=>{e&&(await this.resumePausedMutations(),F(this,Qt).onOnline())})))}unmount(){var e,t;xg(this,Qa)._--,F(this,Qa)===0&&((e=F(this,$d))==null||e.call(this),je(this,$d,void 0),(t=F(this,Ud))==null||t.call(this),je(this,Ud,void 0))}isFetching(e){return F(this,Qt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return F(this,Ja).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=F(this,Qt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=F(this,Qt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ll(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return F(this,Qt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=F(this,Qt).get(n.queryHash),i=s==null?void 0:s.state.data,o=ire(t,i);if(o!==void 0)return F(this,Qt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ar.batch(()=>F(this,Qt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=F(this,Qt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=F(this,Qt);Ar.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=F(this,Qt);return Ar.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ar.batch(()=>F(this,Qt).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(_n).catch(_n)}invalidateQueries(e,t={}){return Ar.batch(()=>(F(this,Qt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ar.batch(()=>F(this,Qt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(_n)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(_n)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=F(this,Qt).build(this,t);return r.isStaleByTime(ll(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(_n).catch(_n)}fetchInfiniteQuery(e){return e.behavior=HO(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(_n).catch(_n)}ensureInfiniteQueryData(e){return e.behavior=HO(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ov.isOnline()?F(this,Ja).resumePausedMutations():Promise.resolve()}getQueryCache(){return F(this,Qt)}getMutationCache(){return F(this,Ja)}getDefaultOptions(){return F(this,Xa)}setDefaultOptions(e){je(this,Xa,e)}setQueryDefaults(e,t){F(this,zd).set(Uc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...F(this,zd).values()],r={};return t.forEach(n=>{Tp(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){F(this,Fd).set(Uc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...F(this,Fd).values()],r={};return t.forEach(n=>{Tp(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...F(this,Xa).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=fE(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===pE&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...F(this,Xa).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){F(this,Qt).clear(),F(this,Ja).clear()}},Qt=new WeakMap,Ja=new WeakMap,Xa=new WeakMap,zd=new WeakMap,Fd=new WeakMap,Qa=new WeakMap,$d=new WeakMap,Ud=new WeakMap,yM),Ln,st,gm,wn,Ec,qd,Do,el,ym,Bd,Vd,Cc,Tc,tl,Wd,ft,Lf,Uj,qj,Bj,Vj,Wj,Hj,Kj,nz,vM,wre=(vM=class extends Eh{constructor(t,r){super();$e(this,ft);$e(this,Ln);$e(this,st);$e(this,gm);$e(this,wn);$e(this,Ec);$e(this,qd);$e(this,Do);$e(this,el);$e(this,ym);$e(this,Bd);$e(this,Vd);$e(this,Cc);$e(this,Tc);$e(this,tl);$e(this,Wd,new Set);this.options=r,je(this,Ln,t),je(this,el,null),je(this,Do,$j()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(F(this,st).addObserver(this),ZO(F(this,st),this.options)?Ye(this,ft,Lf).call(this):this.updateResult(),Ye(this,ft,Vj).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Zj(F(this,st),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Zj(F(this,st),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ye(this,ft,Wj).call(this),Ye(this,ft,Hj).call(this),F(this,st).removeObserver(this)}setOptions(t){const r=this.options,n=F(this,st);if(this.options=F(this,Ln).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _s(this.options.enabled,F(this,st))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ye(this,ft,Kj).call(this),F(this,st).setOptions(this.options),r._defaulted&&!iv(this.options,r)&&F(this,Ln).getQueryCache().notify({type:"observerOptionsUpdated",query:F(this,st),observer:this});const s=this.hasListeners();s&&GO(F(this,st),n,this.options,r)&&Ye(this,ft,Lf).call(this),this.updateResult(),s&&(F(this,st)!==n||_s(this.options.enabled,F(this,st))!==_s(r.enabled,F(this,st))||ll(this.options.staleTime,F(this,st))!==ll(r.staleTime,F(this,st)))&&Ye(this,ft,Uj).call(this);const i=Ye(this,ft,qj).call(this);s&&(F(this,st)!==n||_s(this.options.enabled,F(this,st))!==_s(r.enabled,F(this,st))||i!==F(this,tl))&&Ye(this,ft,Bj).call(this,i)}getOptimisticResult(t){const r=F(this,Ln).getQueryCache().build(F(this,Ln),t),n=this.createResult(r,t);return jre(this,n)&&(je(this,wn,n),je(this,qd,this.options),je(this,Ec,F(this,st).state)),n}getCurrentResult(){return F(this,wn)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),s==="promise"&&!this.options.experimental_prefetchInRender&&F(this,Do).status==="pending"&&F(this,Do).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,s))})}trackProp(t){F(this,Wd).add(t)}getCurrentQuery(){return F(this,st)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=F(this,Ln).defaultQueryOptions(t),n=F(this,Ln).getQueryCache().build(F(this,Ln),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Ye(this,ft,Lf).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),F(this,wn)))}createResult(t,r){var T;const n=F(this,st),s=this.options,i=F(this,wn),o=F(this,Ec),a=F(this,qd),c=t!==n?t.state:F(this,gm),{state:u}=t;let h={...u},f=!1,p;if(r._optimisticResults){const R=this.hasListeners(),O=!R&&ZO(t,r),I=R&&GO(t,n,r,s);(O||I)&&(h={...h,...tz(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:m,status:b}=h;p=h.data;let x=!1;if(r.placeholderData!==void 0&&p===void 0&&b==="pending"){let R;i!=null&&i.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(R=i.data,x=!0):R=typeof r.placeholderData=="function"?r.placeholderData((T=F(this,Vd))==null?void 0:T.state.data,F(this,Vd)):r.placeholderData,R!==void 0&&(b="success",p=Fj(i==null?void 0:i.data,R,r),f=!0)}if(r.select&&p!==void 0&&!x)if(i&&p===(o==null?void 0:o.data)&&r.select===F(this,ym))p=F(this,Bd);else try{je(this,ym,r.select),p=r.select(p),p=Fj(i==null?void 0:i.data,p,r),je(this,Bd,p),je(this,el,null)}catch(R){je(this,el,R)}F(this,el)&&(y=F(this,el),p=F(this,Bd),m=Date.now(),b="error");const w=h.fetchStatus==="fetching",_=b==="pending",j=b==="error",k=_&&w,S=p!==void 0,E={status:b,fetchStatus:h.fetchStatus,isPending:_,isSuccess:b==="success",isError:j,isInitialLoading:k,isLoading:k,data:p,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:m,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!_,isLoadingError:j&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&S,isStale:gE(t,r),refetch:this.refetch,promise:F(this,Do),isEnabled:_s(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=P=>{E.status==="error"?P.reject(E.error):E.data!==void 0&&P.resolve(E.data)},O=()=>{const P=je(this,Do,E.promise=$j());R(P)},I=F(this,Do);switch(I.status){case"pending":t.queryHash===n.queryHash&&R(I);break;case"fulfilled":(E.status==="error"||E.data!==I.value)&&O();break;case"rejected":(E.status!=="error"||E.error!==I.reason)&&O();break}}return E}updateResult(){const t=F(this,wn),r=this.createResult(F(this,st),this.options);if(je(this,Ec,F(this,st).state),je(this,qd,this.options),F(this,Ec).data!==void 0&&je(this,Vd,F(this,st)),iv(r,t))return;je(this,wn,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!F(this,Wd).size)return!0;const o=new Set(i??F(this,Wd));return this.options.throwOnError&&o.add("error"),Object.keys(F(this,wn)).some(a=>{const l=a;return F(this,wn)[l]!==t[l]&&o.has(l)})};Ye(this,ft,nz).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ye(this,ft,Vj).call(this)}},Ln=new WeakMap,st=new WeakMap,gm=new WeakMap,wn=new WeakMap,Ec=new WeakMap,qd=new WeakMap,Do=new WeakMap,el=new WeakMap,ym=new WeakMap,Bd=new WeakMap,Vd=new WeakMap,Cc=new WeakMap,Tc=new WeakMap,tl=new WeakMap,Wd=new WeakMap,ft=new WeakSet,Lf=function(t){Ye(this,ft,Kj).call(this);let r=F(this,st).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(_n)),r},Uj=function(){Ye(this,ft,Wj).call(this);const t=ll(this.options.staleTime,F(this,st));if($c||F(this,wn).isStale||!Mj(t))return;const n=K6(F(this,wn).dataUpdatedAt,t)+1;je(this,Cc,setTimeout(()=>{F(this,wn).isStale||this.updateResult()},n))},qj=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(F(this,st)):this.options.refetchInterval)??!1},Bj=function(t){Ye(this,ft,Hj).call(this),je(this,tl,t),!($c||_s(this.options.enabled,F(this,st))===!1||!Mj(F(this,tl))||F(this,tl)===0)&&je(this,Tc,setInterval(()=>{(this.options.refetchIntervalInBackground||mE.isFocused())&&Ye(this,ft,Lf).call(this)},F(this,tl)))},Vj=function(){Ye(this,ft,Uj).call(this),Ye(this,ft,Bj).call(this,Ye(this,ft,qj).call(this))},Wj=function(){F(this,Cc)&&(clearTimeout(F(this,Cc)),je(this,Cc,void 0))},Hj=function(){F(this,Tc)&&(clearInterval(F(this,Tc)),je(this,Tc,void 0))},Kj=function(){const t=F(this,Ln).getQueryCache().build(F(this,Ln),this.options);if(t===F(this,st))return;const r=F(this,st);je(this,st,t),je(this,gm,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},nz=function(t){Ar.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(F(this,wn))}),F(this,Ln).getQueryCache().notify({query:F(this,st),type:"observerResultsUpdated"})})},vM);function _re(e,t){return _s(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ZO(e,t){return _re(e,t)||e.state.data!==void 0&&Zj(e,t,t.refetchOnMount)}function Zj(e,t,r){if(_s(t.enabled,e)!==!1&&ll(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&gE(e,t)}return!1}function GO(e,t,r,n){return(e!==t||_s(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&gE(e,r)}function gE(e,t){return _s(t.enabled,e)!==!1&&e.isStaleByTime(ll(t.staleTime,e))}function jre(e,t){return!iv(e.getCurrentResult(),t)}var rl,nl,Mn,Lo,Ko,Oy,Gj,bM,kre=(bM=class extends Eh{constructor(r,n){super();$e(this,Ko);$e(this,rl);$e(this,nl);$e(this,Mn);$e(this,Lo);je(this,rl,r),this.setOptions(n),this.bindMethods(),Ye(this,Ko,Oy).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=F(this,rl).defaultMutationOptions(r),iv(this.options,n)||F(this,rl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:F(this,Mn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Uc(n.mutationKey)!==Uc(this.options.mutationKey)?this.reset():((s=F(this,Mn))==null?void 0:s.state.status)==="pending"&&F(this,Mn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=F(this,Mn))==null||r.removeObserver(this)}onMutationUpdate(r){Ye(this,Ko,Oy).call(this),Ye(this,Ko,Gj).call(this,r)}getCurrentResult(){return F(this,nl)}reset(){var r;(r=F(this,Mn))==null||r.removeObserver(this),je(this,Mn,void 0),Ye(this,Ko,Oy).call(this),Ye(this,Ko,Gj).call(this)}mutate(r,n){var s;return je(this,Lo,n),(s=F(this,Mn))==null||s.removeObserver(this),je(this,Mn,F(this,rl).getMutationCache().build(F(this,rl),this.options)),F(this,Mn).addObserver(this),F(this,Mn).execute(r)}},rl=new WeakMap,nl=new WeakMap,Mn=new WeakMap,Lo=new WeakMap,Ko=new WeakSet,Oy=function(){var n;const r=((n=F(this,Mn))==null?void 0:n.state)??rz();je(this,nl,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Gj=function(r){Ar.batch(()=>{var n,s,i,o,a,l,c,u;if(F(this,Lo)&&this.hasListeners()){const h=F(this,nl).variables,f=F(this,nl).context;(r==null?void 0:r.type)==="success"?((s=(n=F(this,Lo)).onSuccess)==null||s.call(n,r.data,h,f),(o=(i=F(this,Lo)).onSettled)==null||o.call(i,r.data,null,h,f)):(r==null?void 0:r.type)==="error"&&((l=(a=F(this,Lo)).onError)==null||l.call(a,r.error,h,f),(u=(c=F(this,Lo)).onSettled)==null||u.call(c,void 0,r.error,h,f))}this.listeners.forEach(h=>{h(F(this,nl))})})},bM),sz=v.createContext(void 0),ha=e=>{const t=v.useContext(sz);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Nre=({client:e,children:t})=>(v.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),g.jsx(sz.Provider,{value:e,children:t})),iz=v.createContext(!1),Sre=()=>v.useContext(iz);iz.Provider;function Ere(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Cre=v.createContext(Ere()),Tre=()=>v.useContext(Cre),Are=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Ore=e=>{v.useEffect(()=>{e.clearReset()},[e])},Pre=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||Y6(r,[e.error,n])),Rre=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ire=(e,t)=>e.isLoading&&e.isFetching&&!t,Dre=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,YO=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Lre(e,t,r){var h,f,p,y,m;const n=Sre(),s=Tre(),i=ha(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",Rre(o),Are(o,s),Ore(s);const a=!i.getQueryCache().get(o.queryHash),[l]=v.useState(()=>new t(i,o)),c=l.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(b=>{const x=u?l.subscribe(Ar.batchCalls(b)):_n;return l.updateResult(),x},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),v.useEffect(()=>{l.setOptions(o)},[o,l]),Dre(o,c))throw YO(o,l,s);if(Pre({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((y=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||y.call(p,o,c),o.experimental_prefetchInRender&&!$c&&Ire(c,n)){const b=a?YO(o,l,s):(m=i.getQueryCache().get(o.queryHash))==null?void 0:m.promise;b==null||b.catch(_n).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function It(e,t){return Lre(e,wre)}function rr(e,t){const r=ha(),[n]=v.useState(()=>new kre(r,e));v.useEffect(()=>{n.setOptions(e)},[n,e]);const s=v.useSyncExternalStore(v.useCallback(o=>n.subscribe(Ar.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=v.useCallback((o,a)=>{n.mutate(o,a).catch(_n)},[n]);if(s.error&&Y6(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var Mre={},zre=Object.defineProperty,Fre=(e,t,r)=>t in e?zre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xe=(e,t,r)=>Fre(e,typeof t!="symbol"?t+"":t,r),yr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ji(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $re(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var oz={exports:{}},pf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JO;function Ure(){if(JO)return pf;JO=1;var e=de,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},f=null,p=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)n.call(l,u)&&!i.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:t,type:a,key:f,ref:p,props:h,_owner:s.current}}return pf.Fragment=r,pf.jsx=o,pf.jsxs=o,pf}oz.exports=Ure();var d=oz.exports;function XO(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function az(...e){return t=>{let r=!1;const n=e.map(s=>{const i=XO(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():XO(e[s],null)}}}}function Hn(...e){return v.useCallback(az(...e),e)}function Ap(e){const t=Bre(e),r=v.forwardRef((n,s)=>{const{children:i,...o}=n,a=v.Children.toArray(i),l=a.find(Wre);if(l){const c=l.props.children,u=a.map(h=>h===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:h);return d.jsx(t,{...o,ref:s,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return d.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var qre=Ap("Slot");function Bre(e){const t=v.forwardRef((r,n)=>{const{children:s,...i}=r;if(v.isValidElement(s)){const o=Kre(s),a=Hre(i,s.props);return s.type!==v.Fragment&&(a.ref=n?az(n,o):o),v.cloneElement(s,a)}return v.Children.count(s)>1?v.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var lz=Symbol("radix.slottable");function Vre(e){const t=({children:r})=>d.jsx(d.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=lz,t}function Wre(e){return v.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===lz}function Hre(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...o)=>{const a=i(...o);return s(...o),a}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Kre(e){var t,r;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function cz(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=cz(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function at(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=cz(e))&&(n&&(n+=" "),n+=t);return n}const QO=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,eP=at,Xb=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return eP(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(c=>{const u=r==null?void 0:r[c],h=i==null?void 0:i[c];if(u===null)return null;const f=QO(u)||QO(h);return s[c][f]}),a=r&&Object.entries(r).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(y=>{let[m,b]=y;return Array.isArray(b)?b.includes({...i,...a}[m]):{...i,...a}[m]===b})?[...c,h,f]:c},[]);return eP(e,o,l,r==null?void 0:r.class,r==null?void 0:r.className)},Zre=Xb("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ct=v.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const o=n?qre:"button";return d.jsx(o,{className:Je(Zre({variant:t,size:r,className:e})),ref:i,...s})});ct.displayName="Button";function Gre(e,t){const r=v.createContext(t),n=i=>{const{children:o,...a}=i,l=v.useMemo(()=>a,Object.values(a));return d.jsx(r.Provider,{value:l,children:o})};n.displayName=e+"Provider";function s(i){const o=v.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function Ch(e,t=[]){let r=[];function n(i,o){const a=v.createContext(o),l=r.length;r=[...r,o];const c=h=>{var f;const{scope:p,children:y,...m}=h,b=((f=p==null?void 0:p[e])==null?void 0:f[l])||a,x=v.useMemo(()=>m,Object.values(m));return d.jsx(b.Provider,{value:x,children:y})};c.displayName=i+"Provider";function u(h,f){var p;const y=((p=f==null?void 0:f[e])==null?void 0:p[l])||a,m=v.useContext(y);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=r.map(o=>v.createContext(o));return function(o){const a=(o==null?void 0:o[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return s.scopeName=e,[n,Yre(s,...t)]}function Yre(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const i=n.reduce((o,{useScope:a,scopeName:l})=>{const c=a(s)[`__scope${l}`];return{...o,...c}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function Ir(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}var Zd=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},Jre=wM[" useId ".trim().toString()]||(()=>{}),Xre=0;function np(e){const[t,r]=v.useState(Jre());return Zd(()=>{r(n=>n??String(Xre++))},[e]),t?`radix-${t}`:""}var Qre=wM[" useInsertionEffect ".trim().toString()]||Zd;function Qb({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,o]=ene({defaultProp:t,onChange:r}),a=e!==void 0,l=a?e:s;{const u=v.useRef(e!==void 0);v.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}const c=v.useCallback(u=>{var h;if(a){const f=tne(u)?u(e):u;f!==e&&((h=o.current)==null||h.call(o,f))}else i(u)},[a,e,i,o]);return[l,c]}function ene({defaultProp:e,onChange:t}){const[r,n]=v.useState(e),s=v.useRef(r),i=v.useRef(t);return Qre(()=>{i.current=t},[t]),v.useEffect(()=>{var o;s.current!==r&&((o=i.current)==null||o.call(i,r),s.current=r)},[r,s]),[r,n,i]}function tne(e){return typeof e=="function"}var rne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vr=rne.reduce((e,t)=>{const r=Ap(`Primitive.${t}`),n=v.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(l,{...a,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function nne(e,t){e&&ro.flushSync(()=>e.dispatchEvent(t))}function Gd(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function sne(e,t=globalThis==null?void 0:globalThis.document){const r=Gd(e);v.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var ine="DismissableLayer",Yj="dismissableLayer.update",one="dismissableLayer.pointerDownOutside",ane="dismissableLayer.focusOutside",tP,uz=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dz=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=e,c=v.useContext(uz),[u,h]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=v.useState({}),y=Hn(t,C=>h(C)),m=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=m.indexOf(b),w=u?m.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,j=w>=x,k=une(C=>{const E=C.target,T=[...c.branches].some(R=>R.contains(E));!j||T||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),S=dne(C=>{const E=C.target;[...c.branches].some(T=>T.contains(E))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return sne(C=>{w===c.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),v.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(tP=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),rP(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=tP)}},[u,f,r,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),rP())},[u,c]),v.useEffect(()=>{const C=()=>p({});return document.addEventListener(Yj,C),()=>document.removeEventListener(Yj,C)},[]),d.jsx(Vr.div,{...l,ref:y,style:{pointerEvents:_?j?"auto":"none":void 0,...e.style},onFocusCapture:Ir(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Ir(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ir(e.onPointerDownCapture,k.onPointerDownCapture)})});dz.displayName=ine;var lne="DismissableLayerBranch",cne=v.forwardRef((e,t)=>{const r=v.useContext(uz),n=v.useRef(null),s=Hn(t,n);return v.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),d.jsx(Vr.div,{...e,ref:s})});cne.displayName=lne;function une(e,t=globalThis==null?void 0:globalThis.document){const r=Gd(e),n=v.useRef(!1),s=v.useRef(()=>{});return v.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){hz(one,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function dne(e,t=globalThis==null?void 0:globalThis.document){const r=Gd(e),n=v.useRef(!1);return v.useEffect(()=>{const s=i=>{i.target&&!n.current&&hz(ane,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function rP(){const e=new CustomEvent(Yj);document.dispatchEvent(e)}function hz(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?nne(s,i):s.dispatchEvent(i)}var T0="focusScope.autoFocusOnMount",A0="focusScope.autoFocusOnUnmount",nP={bubbles:!1,cancelable:!0},hne="FocusScope",fz=v.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[a,l]=v.useState(null),c=Gd(s),u=Gd(i),h=v.useRef(null),f=Hn(t,m=>l(m)),p=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(n){let m=function(_){if(p.paused||!a)return;const j=_.target;a.contains(j)?h.current=j:La(h.current,{select:!0})},b=function(_){if(p.paused||!a)return;const j=_.relatedTarget;j!==null&&(a.contains(j)||La(h.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const j of _)j.removedNodes.length>0&&La(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),w.disconnect()}}},[n,a,p.paused]),v.useEffect(()=>{if(a){iP.add(p);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(T0,nP);a.addEventListener(T0,c),a.dispatchEvent(b),b.defaultPrevented||(fne(vne(pz(a)),{select:!0}),document.activeElement===m&&La(a))}return()=>{a.removeEventListener(T0,c),setTimeout(()=>{const b=new CustomEvent(A0,nP);a.addEventListener(A0,u),a.dispatchEvent(b),b.defaultPrevented||La(m??document.body,{select:!0}),a.removeEventListener(A0,u),iP.remove(p)},0)}}},[a,c,u,p]);const y=v.useCallback(m=>{if(!r&&!n||p.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(b&&x){const w=m.currentTarget,[_,j]=pne(w);_&&j?!m.shiftKey&&x===j?(m.preventDefault(),r&&La(_,{select:!0})):m.shiftKey&&x===_&&(m.preventDefault(),r&&La(j,{select:!0})):x===w&&m.preventDefault()}},[r,n,p.paused]);return d.jsx(Vr.div,{tabIndex:-1,...o,ref:f,onKeyDown:y})});fz.displayName=hne;function fne(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(La(n,{select:t}),document.activeElement!==r)return}function pne(e){const t=pz(e),r=sP(t,e),n=sP(t.reverse(),e);return[r,n]}function pz(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function sP(e,t){for(const r of e)if(!mne(r,{upTo:t}))return r}function mne(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function gne(e){return e instanceof HTMLInputElement&&"select"in e}function La(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&gne(e)&&t&&e.select()}}var iP=yne();function yne(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=oP(e,t),e.unshift(t)},remove(t){var r;e=oP(e,t),(r=e[0])==null||r.resume()}}}function oP(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function vne(e){return e.filter(t=>t.tagName!=="A")}var bne="Portal",mz=v.forwardRef((e,t)=>{var r;const{container:n,...s}=e,[i,o]=v.useState(!1);Zd(()=>o(!0),[]);const a=n||i&&((r=globalThis==null?void 0:globalThis.document)==null?void 0:r.body);return a?xM.createPortal(d.jsx(Vr.div,{...s,ref:t}),a):null});mz.displayName=bne;function xne(e,t){return v.useReducer((r,n)=>t[r][n]??r,e)}var jm=e=>{const{present:t,children:r}=e,n=wne(t),s=typeof r=="function"?r({present:n.isPresent}):v.Children.only(r),i=Hn(n.ref,_ne(s));return typeof r=="function"||n.isPresent?v.cloneElement(s,{ref:i}):null};jm.displayName="Presence";function wne(e){const[t,r]=v.useState(),n=v.useRef(null),s=v.useRef(e),i=v.useRef("none"),o=e?"mounted":"unmounted",[a,l]=xne(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=Og(n.current);i.current=a==="mounted"?c:"none"},[a]),Zd(()=>{const c=n.current,u=s.current;if(u!==e){const h=i.current,f=Og(c);e?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),Zd(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,h=p=>{const y=Og(n.current).includes(CSS.escape(p.animationName));if(p.target===t&&y&&(l("ANIMATION_END"),!s.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},f=p=>{p.target===t&&(i.current=Og(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function Og(e){return(e==null?void 0:e.animationName)||"none"}function _ne(e){var t,r;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var O0=0;function jne(){v.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??aP()),document.body.insertAdjacentElement("beforeend",e[1]??aP()),O0++,()=>{O0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),O0--}},[])}function aP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var cn=function(){return cn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},cn.apply(this,arguments)};function yE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function gz(e,t,r){for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var sp="right-scroll-bar-position",ip="width-before-scroll-bar",kne="with-scroll-bars-hidden",Nne="--removed-body-scroll-bar-size";function P0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Sne(e,t){var r=v.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var Ene=typeof window<"u"?v.useLayoutEffect:v.useEffect,lP=new WeakMap;function yz(e,t){var r=Sne(null,function(n){return e.forEach(function(s){return P0(s,n)})});return Ene(function(){var n=lP.get(r);if(n){var s=new Set(n),i=new Set(e),o=r.current;s.forEach(function(a){i.has(a)||P0(a,null)}),i.forEach(function(a){s.has(a)||P0(a,o)})}lP.set(r,e)},[e]),r}function Cne(e){return e}function Tne(e,t){t===void 0&&(t=Cne);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(a){return i(a)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(i),o=r}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),r}}}};return s}function vz(e){e===void 0&&(e={});var t=Tne(null);return t.options=cn({async:!0,ssr:!1},e),t}var bz=function(e){var t=e.sideCar,r=yE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return v.createElement(n,cn({},r))};bz.isSideCarExport=!0;function xz(e,t){return e.useMedium(t),bz}var wz=vz(),R0=function(){},ex=v.forwardRef(function(e,t){var r=v.useRef(null),n=v.useState({onScrollCapture:R0,onWheelCapture:R0,onTouchMoveCapture:R0}),s=n[0],i=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noRelative,y=e.noIsolation,m=e.inert,b=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,_=e.gapMode,j=yE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,S=yz([r,t]),C=cn(cn({},j),s);return v.createElement(v.Fragment,null,u&&v.createElement(k,{sideCar:wz,removeScrollBar:c,shards:h,noRelative:p,noIsolation:y,inert:m,setCallbacks:i,allowPinchZoom:!!b,lockRef:r,gapMode:_}),o?v.cloneElement(v.Children.only(a),cn(cn({},C),{ref:S})):v.createElement(w,cn({},C,{className:l,ref:S}),a))});ex.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ex.classNames={fullWidth:ip,zeroRight:sp};var Ane=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function One(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ane();return t&&e.setAttribute("nonce",t),e}function Pne(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Rne(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ine=function(){var e=0,t=null;return{add:function(r){e==0&&(t=One())&&(Pne(t,r),Rne(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Dne=function(){var e=Ine();return function(t,r){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},vE=function(){var e=Dne(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},Lne={left:0,top:0,right:0,gap:0},I0=function(e){return parseInt(e||"",10)||0},Mne=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[I0(r),I0(n),I0(s)]},zne=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Lne;var t=Mne(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Fne=vE(),vd="data-scroll-locked",$ne=function(e,t,r,n){var s=e.left,i=e.top,o=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(kne,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(vd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sp,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(ip,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(sp," .").concat(sp,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ip," .").concat(ip,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(vd,`] {
    `).concat(Nne,": ").concat(a,`px;
  }
`)},cP=function(){var e=parseInt(document.body.getAttribute(vd)||"0",10);return isFinite(e)?e:0},Une=function(){v.useEffect(function(){return document.body.setAttribute(vd,(cP()+1).toString()),function(){var e=cP()-1;e<=0?document.body.removeAttribute(vd):document.body.setAttribute(vd,e.toString())}},[])},_z=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;Une();var i=v.useMemo(function(){return zne(s)},[s]);return v.createElement(Fne,{styles:$ne(i,!t,s,r?"":"!important")})},Jj=!1;if(typeof window<"u")try{var Pg=Object.defineProperty({},"passive",{get:function(){return Jj=!0,!0}});window.addEventListener("test",Pg,Pg),window.removeEventListener("test",Pg,Pg)}catch{Jj=!1}var Tu=Jj?{passive:!1}:!1,qne=function(e){return e.tagName==="TEXTAREA"},jz=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!qne(e)&&r[t]==="visible")},Bne=function(e){return jz(e,"overflowY")},Vne=function(e){return jz(e,"overflowX")},uP=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=kz(e,n);if(s){var i=Nz(e,n),o=i[1],a=i[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Wne=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Hne=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},kz=function(e,t){return e==="v"?Bne(t):Vne(t)},Nz=function(e,t){return e==="v"?Wne(t):Hne(t)},Kne=function(e,t){return e==="h"&&t==="rtl"?-1:1},Zne=function(e,t,r,n,s){var i=Kne(e,window.getComputedStyle(t).direction),o=i*n,a=r.target,l=t.contains(a),c=!1,u=o>0,h=0,f=0;do{if(!a)break;var p=Nz(e,a),y=p[0],m=p[1],b=p[2],x=m-b-i*y;(y||x)&&kz(e,a)&&(h+=x,f+=y);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Rg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},dP=function(e){return[e.deltaX,e.deltaY]},hP=function(e){return e&&"current"in e?e.current:e},Gne=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Yne=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Jne=0,Au=[];function Xne(e){var t=v.useRef([]),r=v.useRef([0,0]),n=v.useRef(),s=v.useState(Jne++)[0],i=v.useState(vE)[0],o=v.useRef(e);v.useEffect(function(){o.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=gz([e.lockRef.current],(e.shards||[]).map(hP)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=v.useCallback(function(m,b){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var x=Rg(m),w=r.current,_="deltaX"in m?m.deltaX:w[0]-x[0],j="deltaY"in m?m.deltaY:w[1]-x[1],k,S=m.target,C=Math.abs(_)>Math.abs(j)?"h":"v";if("touches"in m&&C==="h"&&S.type==="range")return!1;var E=uP(C,S);if(!E)return!0;if(E?k=C:(k=C==="v"?"h":"v",E=uP(C,S)),!E)return!1;if(!n.current&&"changedTouches"in m&&(_||j)&&(n.current=k),!k)return!0;var T=n.current||k;return Zne(T,b,m,T==="h"?_:j)},[]),l=v.useCallback(function(m){var b=m;if(!(!Au.length||Au[Au.length-1]!==i)){var x="deltaY"in b?dP(b):Rg(b),w=t.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&Gne(k.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(hP).filter(Boolean).filter(function(k){return k.contains(b.target)}),j=_.length>0?a(b,_[0]):!o.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),c=v.useCallback(function(m,b,x,w){var _={name:m,delta:b,target:x,should:w,shadowParent:Qne(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(j){return j!==_})},1)},[]),u=v.useCallback(function(m){r.current=Rg(m),n.current=void 0},[]),h=v.useCallback(function(m){c(m.type,dP(m),m.target,a(m,e.lockRef.current))},[]),f=v.useCallback(function(m){c(m.type,Rg(m),m.target,a(m,e.lockRef.current))},[]);v.useEffect(function(){return Au.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Tu),document.addEventListener("touchmove",l,Tu),document.addEventListener("touchstart",u,Tu),function(){Au=Au.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,Tu),document.removeEventListener("touchmove",l,Tu),document.removeEventListener("touchstart",u,Tu)}},[]);var p=e.removeScrollBar,y=e.inert;return v.createElement(v.Fragment,null,y?v.createElement(i,{styles:Yne(s)}):null,p?v.createElement(_z,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Qne(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ese=xz(wz,Xne);var Sz=v.forwardRef(function(e,t){return v.createElement(ex,cn({},e,{ref:t,sideCar:ese}))});Sz.classNames=ex.classNames;var tse=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ou=new WeakMap,Ig=new WeakMap,Dg={},D0=0,Ez=function(e){return e&&(e.host||Ez(e.parentNode))},rse=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Ez(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},nse=function(e,t,r,n){var s=rse(t,Array.isArray(e)?e:[e]);Dg[r]||(Dg[r]=new WeakMap);var i=Dg[r],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(n),y=p!==null&&p!=="false",m=(Ou.get(f)||0)+1,b=(i.get(f)||0)+1;Ou.set(f,m),i.set(f,b),o.push(f),m===1&&y&&Ig.set(f,!0),b===1&&f.setAttribute(r,"true"),y||f.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return u(t),a.clear(),D0++,function(){o.forEach(function(h){var f=Ou.get(h)-1,p=i.get(h)-1;Ou.set(h,f),i.set(h,p),f||(Ig.has(h)||h.removeAttribute(n),Ig.delete(h)),p||h.removeAttribute(r)}),D0--,D0||(Ou=new WeakMap,Ou=new WeakMap,Ig=new WeakMap,Dg={})}},Cz=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=tse(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),nse(n,s,r,"aria-hidden")):function(){return null}},tx="Dialog",[Tz,Az]=Ch(tx),[sse,ki]=Tz(tx),Oz=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,a=v.useRef(null),l=v.useRef(null),[c,u]=Qb({prop:n,defaultProp:s??!1,onChange:i,caller:tx});return d.jsx(sse,{scope:t,triggerRef:a,contentRef:l,contentId:np(),titleId:np(),descriptionId:np(),open:c,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};Oz.displayName=tx;var Pz="DialogTrigger",Rz=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ki(Pz,r),i=Hn(t,s.triggerRef);return d.jsx(Vr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":wE(s.open),...n,ref:i,onClick:Ir(e.onClick,s.onOpenToggle)})});Rz.displayName=Pz;var bE="DialogPortal",[ise,Iz]=Tz(bE,{forceMount:void 0}),Dz=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=ki(bE,t);return d.jsx(ise,{scope:t,forceMount:r,children:v.Children.map(n,o=>d.jsx(jm,{present:r||i.open,children:d.jsx(mz,{asChild:!0,container:s,children:o})}))})};Dz.displayName=bE;var av="DialogOverlay",Lz=v.forwardRef((e,t)=>{const r=Iz(av,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=ki(av,e.__scopeDialog);return i.modal?d.jsx(jm,{present:n||i.open,children:d.jsx(ase,{...s,ref:t})}):null});Lz.displayName=av;var ose=Ap("DialogOverlay.RemoveScroll"),ase=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ki(av,r);return d.jsx(Sz,{as:ose,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx(Vr.div,{"data-state":wE(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),qc="DialogContent",Mz=v.forwardRef((e,t)=>{const r=Iz(qc,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=ki(qc,e.__scopeDialog);return d.jsx(jm,{present:n||i.open,children:i.modal?d.jsx(lse,{...s,ref:t}):d.jsx(cse,{...s,ref:t})})});Mz.displayName=qc;var lse=v.forwardRef((e,t)=>{const r=ki(qc,e.__scopeDialog),n=v.useRef(null),s=Hn(t,r.contentRef,n);return v.useEffect(()=>{const i=n.current;if(i)return Cz(i)},[]),d.jsx(zz,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ir(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ir(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Ir(e.onFocusOutside,i=>i.preventDefault())})}),cse=v.forwardRef((e,t)=>{const r=ki(qc,e.__scopeDialog),n=v.useRef(!1),s=v.useRef(!1);return d.jsx(zz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var o,a;(o=e.onInteractOutside)==null||o.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;(a=r.triggerRef.current)!=null&&a.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),zz=v.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,a=ki(qc,r),l=v.useRef(null),c=Hn(t,l);return jne(),d.jsxs(d.Fragment,{children:[d.jsx(fz,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(dz,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":wE(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(dse,{titleId:a.titleId}),d.jsx(fse,{contentRef:l,descriptionId:a.descriptionId})]})]})}),xE="DialogTitle",Fz=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ki(xE,r);return d.jsx(Vr.h2,{id:s.titleId,...n,ref:t})});Fz.displayName=xE;var $z="DialogDescription",Uz=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ki($z,r);return d.jsx(Vr.p,{id:s.descriptionId,...n,ref:t})});Uz.displayName=$z;var qz="DialogClose",Bz=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=ki(qz,r);return d.jsx(Vr.button,{type:"button",...n,ref:t,onClick:Ir(e.onClick,()=>s.onOpenChange(!1))})});Bz.displayName=qz;function wE(e){return e?"open":"closed"}var Vz="DialogTitleWarning",[use,Wz]=Gre(Vz,{contentName:qc,titleName:xE,docsSlug:"dialog"}),dse=({titleId:e})=>{const t=Wz(Vz),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},hse="DialogDescriptionWarning",fse=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Wz(hse).contentName}}.`;return v.useEffect(()=>{var n;const s=(n=e.current)==null?void 0:n.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},pse=Oz,Hz=Rz,Kz=Dz,_E=Lz,jE=Mz,kE=Fz,NE=Uz,SE=Bz,mse="AlertDialog",[gse,Aqe]=Ch(mse,[Az]),Nl=Az(),yse="AlertDialogTrigger",vse=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Nl(r);return d.jsx(Hz,{...s,...n,ref:t})});vse.displayName=yse;var bse="AlertDialogPortal",Zz=e=>{const{__scopeAlertDialog:t,...r}=e,n=Nl(t);return d.jsx(Kz,{...n,...r})};Zz.displayName=bse;var xse="AlertDialogOverlay",Gz=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Nl(r);return d.jsx(_E,{...s,...n,ref:t})});Gz.displayName=xse;var bd="AlertDialogContent",[wse,_se]=gse(bd),jse=Vre("AlertDialogContent"),Yz=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,i=Nl(r),o=v.useRef(null),a=Hn(t,o),l=v.useRef(null);return d.jsx(use,{contentName:bd,titleName:Jz,docsSlug:"alert-dialog",children:d.jsx(wse,{scope:r,cancelRef:l,children:d.jsxs(jE,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:Ir(s.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[d.jsx(jse,{children:n}),d.jsx(Nse,{contentRef:o})]})})})});Yz.displayName=bd;var Jz="AlertDialogTitle",Xz=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Nl(r);return d.jsx(kE,{...s,...n,ref:t})});Xz.displayName=Jz;var Qz="AlertDialogDescription",e1=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Nl(r);return d.jsx(NE,{...s,...n,ref:t})});e1.displayName=Qz;var kse="AlertDialogAction",t1=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Nl(r);return d.jsx(SE,{...s,...n,ref:t})});t1.displayName=kse;var r1="AlertDialogCancel",n1=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=_se(r1,r),i=Nl(r),o=Hn(t,s);return d.jsx(SE,{...i,...n,ref:o})});n1.displayName=r1;var Nse=({contentRef:e})=>{const t=`\`${bd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${bd}\` by passing a \`${Qz}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${bd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Sse=Zz,s1=Gz,i1=Yz,o1=t1,a1=n1,l1=Xz,c1=e1;const Ese=Sse,u1=v.forwardRef(({className:e,...t},r)=>d.jsx(s1,{className:Je("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));u1.displayName=s1.displayName;const Cse=v.forwardRef(({className:e,...t},r)=>d.jsxs(Ese,{children:[d.jsx(u1,{}),d.jsx(i1,{ref:r,className:Je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Cse.displayName=i1.displayName;const Tse=v.forwardRef(({className:e,...t},r)=>d.jsx(l1,{ref:r,className:Je("text-lg font-semibold",e),...t}));Tse.displayName=l1.displayName;const Ase=v.forwardRef(({className:e,...t},r)=>d.jsx(c1,{ref:r,className:Je("text-sm text-muted-foreground",e),...t}));Ase.displayName=c1.displayName;const Ose=v.forwardRef(({className:e,...t},r)=>d.jsx(o1,{ref:r,className:Je("inline-flex h-10 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground ring-offset-background transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Ose.displayName=o1.displayName;const Pse=v.forwardRef(({className:e,...t},r)=>d.jsx(a1,{ref:r,className:Je("inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500","sm:mt-0",e),...t}));Pse.displayName=a1.displayName;const Rse=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>Th).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class EE extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Ise extends EE{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class fP extends EE{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class pP extends EE{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Xj;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Xj||(Xj={}));var Dse=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class Lse{constructor(t,{headers:r={},customFetch:n,region:s=Xj.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Rse(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Dse(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(m=>{throw new Ise(m)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new fP(h);if(!h.ok)throw new pP(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield h.json():p==="application/octet-stream"?y=yield h.blob():p==="text/event-stream"?y=h:p==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof pP||s instanceof fP?s.context:void 0}}})}}var Un={},CE={},rx={},km={},nx={},sx={},Mse=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yd=Mse();const zse=Yd.fetch,d1=Yd.fetch.bind(Yd),h1=Yd.Headers,Fse=Yd.Request,$se=Yd.Response,Th=Object.freeze(Object.defineProperty({__proto__:null,Headers:h1,Request:Fse,Response:$se,default:d1,fetch:zse},Symbol.toStringTag,{value:"Module"})),Use=$re(Th);var ix={};Object.defineProperty(ix,"__esModule",{value:!0});let qse=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ix.default=qse;var f1=yr&&yr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sx,"__esModule",{value:!0});const Bse=f1(Use),Vse=f1(ix);let Wse=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Bse.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,o,a,l;let c=null,u=null,h=null,f=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text")?u=b:u=JSON.parse(b))}const y=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&m&&m.length>1&&(h=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await s.text();try{c=JSON.parse(y),Array.isArray(c)&&s.status===404&&(u=[],c=null,f=200,p="OK")}catch{s.status===404&&y===""?(f=204,p="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows")&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new Vse.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(n=n.catch(s=>{var i,o,a;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(a=s==null?void 0:s.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};sx.default=Wse;var Hse=yr&&yr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nx,"__esModule",{value:!0});const Kse=Hse(sx);let Zse=class extends Kse.default{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};nx.default=Zse;var Gse=yr&&yr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(km,"__esModule",{value:!0});const Yse=Gse(nx);let Jse=class extends Yse.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};km.default=Jse;var Xse=yr&&yr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rx,"__esModule",{value:!0});const mf=Xse(km);let Qse=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new mf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new mf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new mf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new mf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new mf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};rx.default=Qse;var p1=yr&&yr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(CE,"__esModule",{value:!0});const eie=p1(rx),tie=p1(km);let rie=class m1{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new eie.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new m1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new tie.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};CE.default=rie;var Ah=yr&&yr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Un,"__esModule",{value:!0});Un.PostgrestError=Un.PostgrestBuilder=Un.PostgrestTransformBuilder=Un.PostgrestFilterBuilder=Un.PostgrestQueryBuilder=Un.PostgrestClient=void 0;const g1=Ah(CE);Un.PostgrestClient=g1.default;const y1=Ah(rx);Un.PostgrestQueryBuilder=y1.default;const v1=Ah(km);Un.PostgrestFilterBuilder=v1.default;const b1=Ah(nx);Un.PostgrestTransformBuilder=b1.default;const x1=Ah(sx);Un.PostgrestBuilder=x1.default;const w1=Ah(ix);Un.PostgrestError=w1.default;var nie=Un.default={PostgrestClient:g1.default,PostgrestQueryBuilder:y1.default,PostgrestFilterBuilder:v1.default,PostgrestTransformBuilder:b1.default,PostgrestBuilder:x1.default,PostgrestError:w1.default};const{PostgrestClient:sie,PostgrestQueryBuilder:Oqe,PostgrestFilterBuilder:Pqe,PostgrestTransformBuilder:Rqe,PostgrestBuilder:Iqe,PostgrestError:Dqe}=nie;class iie{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const oie="2.15.1",aie=`realtime-js/${oie}`,lie="1.0.0",Qj=1e4,cie=1e3,uie=100;var op;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(op||(op={}));var Sr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Sr||(Sr={}));var ai;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ai||(ai={}));var ek;(function(e){e.websocket="websocket"})(ek||(ek={}));var hc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(hc||(hc={}));class die{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+s));o=o+s;const l=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class _1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(jt||(jt={}));const mP=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=hie(o,e,t,s),i),{})},hie=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?j1(i,o):tk(o)},j1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return gie(t,r)}switch(e){case jt.bool:return fie(t);case jt.float4:case jt.float8:case jt.int2:case jt.int4:case jt.int8:case jt.numeric:case jt.oid:return pie(t);case jt.json:case jt.jsonb:return mie(t);case jt.timestamp:return yie(t);case jt.abstime:case jt.date:case jt.daterange:case jt.int4range:case jt.int8range:case jt.money:case jt.reltime:case jt.text:case jt.time:case jt.timestamptz:case jt.timetz:case jt.tsrange:case jt.tstzrange:return tk(t);default:return tk(t)}},tk=e=>e,fie=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},pie=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},mie=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},gie=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const i=e.slice(1,r);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(o=>j1(t,o))}return e},yie=e=>typeof e=="string"?e.replace(" ","T"):e,k1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class L0{constructor(t,r,n={},s=Qj){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gP||(gP={}));class ap{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ap.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=ap.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ap.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),y=u.filter(b=>p.indexOf(b.presence_ref)<0),m=h.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(a[c]=y),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(yP||(yP={}));var lp;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(lp||(lp={}));var Oo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Oo||(Oo={}));class TE{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Sr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new L0(this,ai.join,this.params,this.timeout),this.rejoinTimer=new _1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Sr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Sr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Sr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Sr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Sr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ai.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ap(this),this.broadcastEndpointURL=k1(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Sr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[lp.PRESENCE]&&this.bindings[lp.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Oo.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Oo.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t==null||t(Oo.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,m=(p=y==null?void 0:y.length)!==null&&p!==void 0?p:0,b=[];for(let x=0;x<m;x++){const w=y[x],{filter:{event:_,schema:j,table:k,filter:S}}=w,C=f&&f[x];if(C&&C.event===_&&C.schema===j&&C.table===k&&C.filter===S)b.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=Sr.errored,t==null||t(Oo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Oo.SUBSCRIBED);return}}).receive("error",f=>{this.state=Sr.errored,t==null||t(Oo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Oo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Sr.joined&&t===lp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Sr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ai.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new L0(this,ai.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Sr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new L0(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>uie){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ai;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,y,m;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(y=f.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,y,m,b,x,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,j=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((m=r.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const _=(x=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:y,table:m,commit_timestamp:b,type:x,errors:w}=p;h=Object.assign(Object.assign({},{schema:y,table:m,commit_timestamp:b,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(p))}f.callback(h,n)})}_isClosed(){return this.state===Sr.closed}_isJoined(){return this.state===Sr.joined}_isJoining(){return this.state===Sr.joining}_isLeaving(){return this.state===Sr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&TE.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ai.close,{},t)}_onError(t){this._on(ai.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Sr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=mP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=mP(t.columns,t.old_record)),r}}const vP=()=>{},Lg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vie=[1e3,2e3,5e3,1e4],bie=1e4,xie=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wie{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qj,this.transport=null,this.heartbeatIntervalMs=Lg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vP,this.ref=0,this.reconnectTimer=null,this.logger=vP,this.conn=null,this.sendBuffer=[],this.serializer=new die,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Promise.resolve().then(()=>Th).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${ek.websocket}`,this.httpEndpoint=k1(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iie.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lie}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case op.connecting:return hc.Connecting;case op.open:return hc.Open;case op.closing:return hc.Closing;default:return hc.Closed}}isConnected(){return this.connectionState()===hc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new TE(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(cie,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Lg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ai.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([xie],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:aie};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ai.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new _1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Lg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Qj,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Lg.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t==null?void 0:t.reconnectAfterMs)!==null&&a!==void 0?a:u=>vie[u-1]||bie,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(u,h)=>h(JSON.stringify(u)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class AE extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Tr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class _ie extends AE{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rk extends AE{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var jie=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const N1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>Th).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},kie=()=>jie(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>Th)).Response:Response}),nk=e=>{if(Array.isArray(e))return e.map(r=>nk(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=nk(n)}),t},Nie=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var iu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const M0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Sie=(e,t,r)=>iu(void 0,void 0,void 0,function*(){const n=yield kie();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new _ie(M0(s),i,o))}).catch(s=>{t(new rk(M0(s),s))}):t(new rk(M0(e),e))}),Eie=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(Nie(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Nm(e,t,r,n,s,i){return iu(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,Eie(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Sie(l,a,n))})})}function lv(e,t,r,n){return iu(this,void 0,void 0,function*(){return Nm(e,"GET",t,r,n)})}function zi(e,t,r,n,s){return iu(this,void 0,void 0,function*(){return Nm(e,"POST",t,n,s,r)})}function sk(e,t,r,n,s){return iu(this,void 0,void 0,function*(){return Nm(e,"PUT",t,n,s,r)})}function Cie(e,t,r,n){return iu(this,void 0,void 0,function*(){return Nm(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function S1(e,t,r,n,s){return iu(this,void 0,void 0,function*(){return Nm(e,"DELETE",t,n,s,r)})}var bn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const Tie={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Aie{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=N1(s)}uploadOrUpdate(t,r,n,s){return bn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},bP),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(t=="PUT"?sk:zi)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Tr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return bn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:bP.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield sk(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(Tr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return bn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield zi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new AE("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(Tr(n))return{data:null,error:n};throw n}})}update(t,r,n){return bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return bn(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return bn(this,void 0,void 0,function*(){try{return{data:{path:(yield zi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return bn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield zi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return bn(this,void 0,void 0,function*(){try{const s=yield zi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}download(t,r){return bn(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield lv(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Tr(o))return{data:null,error:o};throw o}})}info(t){return bn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield lv(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:nk(n),error:null}}catch(n){if(Tr(n))return{data:null,error:n};throw n}})}exists(t){return bn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Cie(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Tr(n)&&n instanceof rk){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});a!==""&&s.push(a);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${l}`)}}}remove(t){return bn(this,void 0,void 0,function*(){try{return{data:yield S1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}list(t,r,n){return bn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Tie),r),{prefix:t||""});return{data:yield zi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}listV2(t,r){return bn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield zi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Tr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Oie="2.11.0",Pie={"X-Client-Info":`storage-js/${Oie}`};var Pu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class Rie{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Pie),r),this.fetch=N1(n)}listBuckets(){return Pu(this,void 0,void 0,function*(){try{return{data:yield lv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Tr(t))return{data:null,error:t};throw t}})}getBucket(t){return Pu(this,void 0,void 0,function*(){try{return{data:yield lv(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Pu(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Tr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Pu(this,void 0,void 0,function*(){try{return{data:yield sk(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Tr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Pu(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Pu(this,void 0,void 0,function*(){try{return{data:yield S1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}}class Iie extends Rie{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new Aie(this.url,this.headers,t,this.fetch)}}const Die="2.56.0";let Mf="";typeof Deno<"u"?Mf="deno":typeof document<"u"?Mf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Mf="react-native":Mf="node";const Lie={"X-Client-Info":`supabase-js-${Mf}/${Die}`},Mie={headers:Lie},zie={schema:"public"},Fie={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$ie={};var Uie=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const qie=e=>{let t;return e?t=e:typeof fetch>"u"?t=d1:t=fetch,(...r)=>t(...r)},Bie=()=>typeof Headers>"u"?h1:Headers,Vie=(e,t,r)=>{const n=qie(r),s=Bie();return(i,o)=>Uie(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var Wie=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};function Hie(e){return e.endsWith("/")?e:e+"/"}function Kie(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Wie(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const E1="2.71.1",Vu=30*1e3,ik=3,z0=ik*Vu,Zie="http://localhost:9999",Gie="supabase.auth.token",Yie={"X-Client-Info":`gotrue-js/${E1}`},ok="X-Supabase-Api-Version",C1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jie=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xie=10*60*1e3;class OE extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ke(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Qie extends OE{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function eoe(e){return Ke(e)&&e.name==="AuthApiError"}class T1 extends OE{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Sl extends OE{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ma extends Sl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function toe(e){return Ke(e)&&e.name==="AuthSessionMissingError"}class Mg extends Sl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zg extends Sl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fg extends Sl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function roe(e){return Ke(e)&&e.name==="AuthImplicitGrantRedirectError"}class xP extends Sl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ak extends Sl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function F0(e){return Ke(e)&&e.name==="AuthRetryableFetchError"}class wP extends Sl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class lk extends Sl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const cv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_P=` 	
\r=`.split(""),noe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_P.length;t+=1)e[_P[t].charCodeAt(0)]=-2;for(let t=0;t<cv.length;t+=1)e[cv[t].charCodeAt(0)]=t;return e})();function jP(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(cv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(cv[n]),t.queuedBits-=6}}function A1(e,t,r){const n=noe[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function kP(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{ooe(o,n,r)};for(let o=0;o<e.length;o+=1)A1(e.charCodeAt(o),s,i);return t.join("")}function soe(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ioe(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}soe(n,t)}}function ooe(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function aoe(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)A1(e.charCodeAt(s),r,n);return new Uint8Array(t)}function loe(e){const t=[];return ioe(e,r=>t.push(r)),new Uint8Array(t)}function coe(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>jP(s,r,n)),jP(null,r,n),t.join("")}function uoe(e){return Math.round(Date.now()/1e3)+e}function doe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Qs=()=>typeof window<"u"&&typeof document<"u",Ql={tested:!1,writable:!1},O1=()=>{if(!Qs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ql.tested)return Ql.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ql.tested=!0,Ql.writable=!0}catch{Ql.tested=!0,Ql.writable=!1}return Ql.writable};function hoe(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,s)=>{t[s]=n})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const P1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>Th).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},foe=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Wu=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ec=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ea=async(e,t)=>{await e.removeItem(t)};class ox{constructor(){this.promise=new ox.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ox.promiseConstructor=Promise;function $0(e){const t=e.split(".");if(t.length!==3)throw new lk("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Jie.test(t[r]))throw new lk("JWT not in base64url format");return{header:JSON.parse(kP(t[0])),payload:JSON.parse(kP(t[1])),signature:aoe(t[2]),raw:{header:t[0],payload:t[1]}}}async function poe(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function moe(e,t){return new Promise((r,n)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await e(s);if(!t(s,null,i)){r(i);return}}catch(i){if(!t(s,i)){n(i);return}}})()})}function goe(e){return("0"+e.toString(16)).substr(-2)}function yoe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let n="";for(let s=0;s<56;s++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,goe).join("")}async function voe(e){const t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(s=>String.fromCharCode(s)).join("")}async function boe(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await voe(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ru(e,t,r=!1){const n=yoe();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Wu(e,`${t}-code-verifier`,s);const i=await boe(n);return[i,n===i?"plain":"s256"]}const xoe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function woe(e){const t=e.headers.get(ok);if(!t||!t.match(xoe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _oe(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function joe(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const koe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Iu(e){if(!koe.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function U0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function NP(e){return JSON.parse(JSON.stringify(e))}var Noe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const sc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Soe=[502,503,504];async function SP(e){var t;if(!foe(e))throw new ak(sc(e),0);if(Soe.includes(e.status))throw new ak(sc(e),e.status);let r;try{r=await e.json()}catch(i){throw new T1(sc(i),i)}let n;const s=woe(e);if(s&&s.getTime()>=C1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new wP(sc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ma}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new wP(sc(r),e.status,r.weak_password.reasons);throw new Qie(sc(r),e.status||500,n)}const Eoe=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function tt(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[ok]||(i[ok]=C1["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Coe(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Coe(e,t,r,n,s,i){const o=Eoe(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new ak(sc(l),0)}if(a.ok||await SP(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await SP(l)}}function To(e){var t;let r=null;Poe(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=uoe(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function EP(e){const t=To(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Va(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Toe(e){return{data:e,error:null}}function Aoe(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Noe(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Ooe(e){return e}function Poe(e){return e.access_token&&e.refresh_token&&e.expires_in}const q0=["global","local","others"];var Roe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Ioe{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=P1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=q0[0]){if(q0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${q0.join(", ")}`);try{return await tt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await tt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Va})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Roe(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await tt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Aoe,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ke(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await tt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Va})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await tt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ooe});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const m=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Ke(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Iu(t);try{return await tt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Va})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Iu(t);try{return await tt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Va})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Iu(t);try{return await tt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Va})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Iu(t.userId);try{const{data:r,error:n}=await tt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Iu(t.userId),Iu(t.id);try{return{data:await tt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}function CP(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Doe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Du={debug:!!(globalThis&&O1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class R1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Loe extends R1{}async function Moe(e,t,r){Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Du.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Loe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Du.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Doe();const zoe={url:Zie,storageKey:Gie,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yie,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function TP(e,t,r){return await r()}const Lu={};class Op{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Op.nextInstanceID,Op.nextInstanceID+=1,this.instanceID>0&&Qs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},zoe),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ioe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=P1(s.fetch),this.lock=s.lock||TP,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Qs()&&!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks?this.lock=Moe:this.lock=TP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:O1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=CP(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=CP(this.memoryStorage)),Qs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Lu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Lu[this.storageKey]=Object.assign(Object.assign({},Lu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Lu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Lu[this.storageKey]=Object.assign(Object.assign({},Lu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${E1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=hoe(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Qs()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),roe(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ke(r)?{error:r}:{error:new T1("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:To}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Ru(this.storage,this.storageKey)),i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:To})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:To})}else throw new zg("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:EP})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:EP})}else throw new zg("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Mg}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,a,l,c,u,h,f,p;let y,m;if("message"in t)y=t.message,m=t.signature;else{const{chain:b,wallet:x,statement:w,options:_}=t;let j;if(Qs())if(typeof x=="object")j=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const k=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let C;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")C=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)C=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),m=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=S}}try{const{data:b,error:x}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:coe(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:To});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Mg}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(Ke(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await ec(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:To});if(await Ea(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Mg}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ke(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:To}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Mg}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ru(this.storage,this.storageKey));const{error:h}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new zg("You must provide either an email or phone number.")}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await tt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:To});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ru(this.storage,this.storageKey)),await tt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Toe})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ma;const{error:s}=await tt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await tt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await tt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new zg("You must provide either an email or phone number and a type")}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ec(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<z0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await ec(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=U0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(a,l,c)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,l,c))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Va}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ma}:await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Va})})}catch(r){if(Ke(r))return toe(r)&&(await this._removeSession(),await Ea(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ma;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Ru(this.storage,this.storageKey));const{data:c,error:u}=await tt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Va});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ma;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=$0(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Ke(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ma;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Qs())throw new Fg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new xP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fg("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new xP("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new Fg("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=Vu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=f-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,u);const{data:m,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(Ke(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ec(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(eoe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Ea(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=doe(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ru(this.storage,this.storageKey,!0));try{return await tt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await tt(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Qs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ke(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await tt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await moe(async s=>(s>0&&await poe(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await tt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:To})),(s,i)=>{const o=200*Math.pow(2,s);return i&&F0(i)&&Date.now()+o-n<Vu})}catch(n){if(this._debug(r,"error",n),Ke(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Qs()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ec(this.storage,this.storageKey);if(s&&this.userStorage){let o=await ec(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Wu(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:U0()}else if(s&&!s.user&&!s.user){const o=await ec(this.storage,this.storageKey+"-user");o&&o!=null&&o.user?(s.user=o.user,await Ea(this.storage,this.storageKey+"-user"),await Wu(this.storage,this.storageKey,s)):s.user=U0()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<z0;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${z0}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),F0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&o!=null&&o.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ma;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ox;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ma;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Ke(i)){const o={session:null,error:i};return F0(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Wu(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=NP(s);await Wu(this.storage,this.storageKey,i)}else{const s=NP(r);await Wu(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Ea(this.storage,this.storageKey),await Ea(this.storage,this.storageKey+"-code-verifier"),await Ea(this.storage,this.storageKey+"-user"),this.userStorage&&await Ea(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qs()&&window!=null&&window.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Vu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Vu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Vu}ms, refresh threshold is ${ik} ticks`),s<=ik&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof R1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ru(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await tt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await tt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await tt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await tt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=$0(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+Xie>s)return n;const{data:i,error:o}=await tt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};n=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=$0(n);r!=null&&r.allowExpired||_oe(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const u=joe(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,loe(`${a}.${l}`)))throw new lk("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}Op.nextInstanceID=0;const Foe=Op;class $oe extends Foe{constructor(t){super(t)}}var Uoe=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class qoe{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=Hie(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:zie,realtime:$ie,auth:Object.assign(Object.assign({},Fie),{storageKey:c}),global:Mie},h=Kie(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Vie(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new sie(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Iie(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Lse(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Uoe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $oe({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new wie(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const I1=(e,t,r)=>new qoe(e,t,r);function Boe(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Boe()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Voe="",Woe="";console.error("Missing Supabase environment variables. Please check your .env file.");I1(Voe,Woe,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});const Hoe=()=>{const[e,t]=v.useState("login"),[r,n]=v.useState(null),[s,i]=v.useState(!1),[o,a]=v.useState(""),[l,c]=v.useState(""),[u,h]=v.useState(""),[f,p]=v.useState(""),[y,m]=v.useState(""),[b,x]=v.useState(""),[w,_]=v.useState(null),j=uo(),k=(T,R="info")=>{n({text:T,type:R});const O=setTimeout(()=>n(null),6e3);return()=>clearTimeout(O)},S=async T=>{if(T.preventDefault(),!o||!l){k("Please enter both email and password","error");return}i(!0);try{const{error:R}=await le.auth.signInWithPassword({email:o,password:l});if(R)throw R;j("/")}catch(R){const O=R instanceof Error?R.message:"Failed to sign in";k(O,"error")}finally{i(!1)}},C=async T=>{if(T.preventDefault(),f!==b){k("Passwords do not match","error");return}i(!0);try{const{error:R}=await le.auth.signUp({email:u,password:f,options:{data:{display_name:y}}});if(R)throw R;k("Account created! Please check your email to confirm your account.","success"),t("login")}catch(R){const O=R instanceof Error?R.message:"Failed to create account";k(O,"error")}finally{i(!1)}},E=T=>{if(!T){_(null);return}let R=0;T.length>=8&&R++,/[A-Z]/.test(T)&&R++,/[a-z]/.test(T)&&R++,/[0-9]/.test(T)&&R++,/[^A-Za-z0-9]/.test(T)&&R++,T.length>=12&&R++;const O=[{text:"Weak",className:"weak"},{text:"Fair",className:"fair"},{text:"Good",className:"good"},{text:"Strong",className:"strong"},{text:"Very Strong",className:"very-strong"}],I=Math.min(R,O.length-1);_(O[I])};return d.jsx("div",{className:"auth-page",children:d.jsxs("div",{className:"auth-container",children:[d.jsxs("div",{className:"auth-header",children:[d.jsx("h1",{children:e==="login"?"Welcome Back":"Create Account"}),d.jsx("p",{children:e==="login"?"Sign in to access your account":"Join our community today"})]}),r&&d.jsx("div",{className:`message ${r.type}`,children:r.text}),d.jsxs("div",{className:"tabs",children:[d.jsx("button",{className:`tab ${e==="login"?"active":""}`,onClick:()=>t("login"),type:"button",children:"Sign In"}),d.jsx("button",{className:`tab ${e==="signup"?"active":""}`,onClick:()=>t("signup"),type:"button",children:"Create Account"})]}),e==="login"?d.jsxs("form",{className:"auth-form",onSubmit:S,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"loginEmail",children:"Email"}),d.jsx("input",{type:"email",id:"loginEmail",value:o,onChange:T=>a(T.target.value),placeholder:"Enter your email",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"loginPassword",children:"Password"}),d.jsx("input",{type:"password",id:"loginPassword",value:l,onChange:T=>c(T.target.value),placeholder:"Enter your password",required:!0,disabled:s})]}),d.jsx("button",{type:"submit",className:"btn primary",disabled:s,children:s?"Signing in...":"Sign In"}),d.jsx("div",{className:"form-footer",children:d.jsx(Rr,{to:"/forgot-password",children:"Forgot password?"})})]}):d.jsxs("form",{className:"auth-form",onSubmit:C,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupDisplayName",children:"Display Name"}),d.jsx("input",{type:"text",id:"signupDisplayName",value:y,onChange:T=>m(T.target.value),placeholder:"Enter your name",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupEmail",children:"Email"}),d.jsx("input",{type:"email",id:"signupEmail",value:u,onChange:T=>h(T.target.value),placeholder:"your.email@example.com",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupPassword",children:"Password"}),d.jsx("input",{type:"password",id:"signupPassword",value:f,onChange:T=>{p(T.target.value),E(T.target.value)},placeholder:"Create a strong password",required:!0,disabled:s}),w&&d.jsxs("div",{className:`password-strength ${w.className}`,children:["Password strength: ",w.text]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),d.jsx("input",{type:"password",id:"confirmPassword",value:b,onChange:T=>x(T.target.value),placeholder:"Re-enter your password",required:!0,disabled:s})]}),d.jsx("button",{type:"submit",className:"btn primary",disabled:s,children:s?"Creating account...":"Create Account"})]}),d.jsx("div",{className:"auth-divider",children:d.jsx("span",{children:"or continue with"})}),d.jsxs("div",{className:"social-logins",children:[d.jsx("button",{type:"button",className:"btn social google",onClick:()=>k("Google login is not yet implemented","info"),disabled:s,children:"Google"}),d.jsx("button",{type:"button",className:"btn social github",onClick:()=>k("GitHub login is not yet implemented","info"),disabled:s,children:"GitHub"})]}),d.jsx("div",{className:"auth-footer",children:e==="login"?d.jsxs(d.Fragment,{children:["Don't have an account?"," ",d.jsx("button",{type:"button",className:"text-link",onClick:()=>t("signup"),children:"Sign up"})]}):d.jsxs(d.Fragment,{children:["Already have an account?"," ",d.jsx("button",{type:"button",className:"text-link",onClick:()=>t("login"),children:"Sign in"})]})})]})})};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D1=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zoe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>v.createElement("svg",{ref:l,...Zoe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:D1("lucide",s),...a},[...o.map(([c,u])=>v.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(Goe,{ref:i,iconNode:t,className:D1(`lucide-${Koe(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Ie("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=Ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=Ie("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Ie("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Ie("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=Ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=Ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=Ie("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eae=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Ie("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tae=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=Ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rae=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Ie("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nae=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Ie("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sae=Ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iae=Ie("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oae=Ie("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aae=Ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lae=Ie("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cae=Ie("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=Ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uae=Ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dae=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hae=Ie("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fae=Ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pae=Ie("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=Ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mae=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gae=Ie("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yae=Ie("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vae=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=Ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bae=Ie("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xae=Ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wae=Ie("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ae=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jae=Ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kae=Ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Nae=[{name:"Dashboard",href:"/account/admin",icon:aae},{name:"Posts",href:"/account/admin/posts",icon:rae},{name:"Media",href:"/account/admin/media",icon:_ae},{name:"Users",href:"/account/admin/users",icon:fv},{name:"Beta Applications",href:"/account/admin/beta-applications",icon:fv},{name:"Store",href:"/account/admin/store",icon:bae},{name:"Works",href:"/account/admin/works",icon:Pp},{name:"Timeline",href:"/account/admin/timeline/events",icon:M1},{name:"Settings",href:"/account/admin/settings",icon:mae}],Sae=()=>{var e,t;const[r,n]=v.useState(!1),[s,i]=v.useState(!1),o=Fs(),a=uo(),{user:l,userProfile:c}=jh();v.useEffect(()=>{i(!1)},[o]);const u=()=>{n(!r)},h=async()=>{await le.auth.signOut(),a("/login")};return d.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200 flex",children:[d.jsx("button",{onClick:u,className:Je("fixed top-4 left-0 z-50 p-2 rounded-r-lg bg-white dark:bg-gray-800 shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300",r?"translate-x-0":"translate-x-64","lg:hidden"),"aria-label":r?"Expand sidebar":"Collapse sidebar",children:r?d.jsx(PE,{size:20}):d.jsx(Joe,{size:20})}),d.jsx("aside",{className:Je("fixed top-0 left-0 z-40 h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out",r?"w-0 opacity-0":"w-64 opacity-100",s?"translate-x-0":"-translate-x-full lg:translate-x-0","lg:opacity-100"),children:d.jsxs("div",{className:"h-full flex flex-col",children:[d.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:d.jsx("h2",{className:"text-xl font-bold",children:"Admin"})}),d.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:d.jsx("ul",{className:"space-y-1",children:Nae.map(f=>d.jsx("li",{children:d.jsxs(md,{to:f.href,end:f.href==="/account/admin",className:({isActive:p})=>Je("flex items-center p-3 rounded-lg transition-colors",p?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700",r?"justify-center":"space-x-3"),children:[d.jsx(f.icon,{size:20,className:"flex-shrink-0"}),!r&&d.jsx("span",{children:f.name})]})},f.name))})}),d.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:d.jsxs("div",{className:Je("flex items-center",r?"justify-center":"justify-between"),children:[!r&&d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:((e=c==null?void 0:c.display_name)==null?void 0:e.charAt(0))||((t=l==null?void 0:l.email)==null?void 0:t.charAt(0).toUpperCase())}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium truncate max-w-[140px]",children:(c==null?void 0:c.display_name)||"Admin User"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[140px]",children:l==null?void 0:l.email})]})]}),d.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:"Sign out",children:d.jsx(dae,{size:18})})]})})]})}),d.jsx("div",{className:Je("transition-all duration-300 min-h-screen",r?"lg:ml-0":"lg:ml-64","ml-0 w-full"),children:d.jsx("div",{className:"w-full max-w-[2000px] mx-auto px-4 py-6",children:d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 md:p-6",children:d.jsx(ZS,{})})})})]})},Eae=({children:e})=>{var t,r;const[n,s]=v.useState(!0),[i,o]=v.useState({isAuthenticated:!1,isAdmin:!1}),a=Fs();return v.useEffect(()=>{(async()=>{console.log("⏳ [AdminProtectedRoute] Checking session and admin status...");const{data:{session:l},error:c}=await le.auth.getSession();if(c||!l){console.log("🔒 [AdminProtectedRoute] No authenticated session found."),o({isAuthenticated:!1,isAdmin:!1}),s(!1);return}console.log("✅ [AdminProtectedRoute] Session found. User:",l.user.email);const{data:u,error:h}=await le.rpc("is_admin");h&&console.error("❌ [AdminProtectedRoute] Error calling is_admin RPC:",h);const f={isAuthenticated:!0,isAdmin:u===!0,user:l.user};console.log("✅ [AdminProtectedRoute] Final auth state:",f),o(f),s(!1)})()},[]),n?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto"}),d.jsx("p",{className:"mt-4",children:"Verifying Admin Privileges..."})]})}):i.isAuthenticated?i.isAdmin?d.jsx(d.Fragment,{children:e}):(console.log("❌ [AdminProtectedRoute] Access Denied. User is not an admin."),d.jsx("div",{className:"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8 text-white",children:d.jsx("div",{className:"max-w-4xl mx-auto",children:d.jsxs("div",{className:"bg-gray-800 shadow-lg rounded-lg overflow-hidden",children:[d.jsxs("div",{className:"bg-red-600 p-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Access Denied"}),d.jsx("p",{className:"text-red-100",children:"You do not have the necessary permissions to view this page."})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsx("p",{children:"The page you are trying to access is restricted to administrators only."}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-medium text-gray-300 mb-2",children:"Your Account Details"}),d.jsxs("dl",{className:"bg-gray-700/50 rounded-lg p-4 space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"User ID"}),d.jsx("dd",{className:"font-mono",children:((t=i.user)==null?void 0:t.id)||"N/A"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"Email"}),d.jsx("dd",{children:((r=i.user)==null?void 0:r.email)||"N/A"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"Admin Status"}),d.jsx("dd",{className:"font-semibold text-red-400",children:"Not an Admin"})]})]})]}),d.jsx("p",{children:"If you believe this is an error, please contact support."}),d.jsx("div",{className:"pt-4",children:d.jsx("a",{href:"/",className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Go to Homepage"})})]})]})})})):(console.log("🛑 [AdminProtectedRoute] Not authenticated, redirecting to login."),d.jsx(RM,{to:"/login",state:{from:a},replace:!0}))},Cae="_zoroHeader_6lzsp_2",Tae="_logo_6lzsp_16",Aae="_navbar_6lzsp_23",Oae="_navMenu_6lzsp_27",Pae="_navLink_6lzsp_39",Rae="_dropdownMenu_6lzsp_53",Iae="_dropdownMenuItem_6lzsp_73",Dae="_dropdown_6lzsp_53",Lae="_headerControls_6lzsp_96",Mae="_searchForm_6lzsp_121",zae="_themeToggle_6lzsp_165",Fae="_icon_6lzsp_186",$ae="_iconSun_6lzsp_197",Uae="_iconMoon_6lzsp_203",sn={zoroHeader:Cae,logo:Tae,navbar:Aae,navMenu:Oae,navLink:Pae,dropdownMenu:Rae,dropdownMenuItem:Iae,dropdown:Dae,headerControls:Lae,searchForm:Mae,themeToggle:zae,icon:Fae,iconSun:$ae,iconMoon:Uae},OP="zoro-theme",qae=()=>{const[e,t]=v.useState(()=>{if(typeof window<"u"){const n=localStorage.getItem(OP),s=window.matchMedia("(prefers-color-scheme: dark)").matches;return n??(s?"dark":"light")}return"dark"});v.useEffect(()=>{const n=window.document.documentElement;n.setAttribute("data-theme",e),localStorage.setItem(OP,e),e==="dark"?(n.classList.add("dark"),n.classList.remove("light")):(n.classList.add("light"),n.classList.remove("dark"))},[e]);const r=()=>{t(n=>n==="dark"?"light":"dark")};return d.jsxs("button",{id:"theme-toggle",className:sn.themeToggle,"aria-label":"Toggle dark mode","aria-pressed":e==="dark"?"true":"false",title:e==="dark"?"Switch to light mode":"Switch to dark mode",onClick:r,children:[d.jsxs("svg",{className:`${sn.icon} ${sn.iconSun}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:[d.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),d.jsxs("g",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[d.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"5"}),d.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),d.jsx("line",{x1:"2",y1:"12",x2:"5",y2:"12"}),d.jsx("line",{x1:"19",y1:"12",x2:"22",y2:"12"}),d.jsx("line",{x1:"4.2",y1:"4.2",x2:"6.3",y2:"6.3"}),d.jsx("line",{x1:"17.7",y1:"17.7",x2:"19.8",y2:"19.8"}),d.jsx("line",{x1:"4.2",y1:"19.8",x2:"6.3",y2:"17.7"}),d.jsx("line",{x1:"17.7",y1:"6.3",x2:"19.8",y2:"4.2"})]})]}),d.jsx("svg",{className:`${sn.icon} ${sn.iconMoon}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:d.jsx("path",{d:`M21 14.5a9 9 0 1 1-8.5-12
                 a8 8 0 0 0 8.5 12z`,fill:"currentColor"})})]})},Bae=()=>{const[e,t]=v.useState(!1),[r,n]=v.useState(!1),[s,i]=v.useState("none"),o=uo();v.useEffect(()=>{(async()=>{var u,h;const{data:{session:f}}=await le.auth.getSession();n(!!f),(h=(u=f==null?void 0:f.user)==null?void 0:u.user_metadata)!=null&&h.betaApplicationStatus&&i(f.user.user_metadata.betaApplicationStatus)})();const{data:c}=le.auth.onAuthStateChange((u,h)=>{var f,p;n(!!h),(p=(f=h==null?void 0:h.user)==null?void 0:f.user_metadata)!=null&&p.betaApplicationStatus&&i(h.user.user_metadata.betaApplicationStatus)});return()=>{c.subscription.unsubscribe()}},[]);const a=async()=>{await le.auth.signOut(),o("/")},l=[{name:"Home",path:"/"},{name:"Explore",path:"#",children:[{name:"Library",path:"/library"},{name:"Wiki",path:"/wiki"},{name:"Timelines",path:"/timelines"},{name:"Characters",path:"/characters"},{name:"Blog",path:"/blog"}]},{name:"Beta Program",path:"/beta/application"}];if(r){const c=[];c.push({name:"Store",path:"/store"}),c.push({name:"Subscriptions",path:"/subscriptions"}),s==="accepted"&&c.push({name:"Beta Portal",path:"/beta/portal"}),c.push({name:"My Account",path:"/account"}),l.push({name:"Account",path:"#",children:c}),l.push({name:"Logout",path:"#",onClick:a})}else l.push({name:"Login",path:"/login"});return d.jsxs("header",{className:sn.zoroHeader,children:[d.jsx("div",{className:sn.logo,children:d.jsx(md,{to:"/",children:d.jsx("h1",{children:"Zoroasterverse"})})}),d.jsxs("div",{className:sn.headerControls,children:[" ",d.jsxs("form",{className:sn.searchForm,children:[d.jsx("input",{type:"text",placeholder:"Search..."}),d.jsxs("button",{type:"submit",children:[d.jsx(ou,{})," "]})]}),d.jsx(qae,{})," "]}),d.jsx("nav",{className:sn.navbar,children:d.jsx("ul",{className:sn.navMenu,children:l.map(c=>d.jsxs("li",{className:c.children?sn.dropdown:"",children:[c.onClick?d.jsx("button",{onClick:c.onClick,className:sn.navLink,children:c.name}):d.jsxs(md,{to:c.path,className:sn.navLink,children:[c.name," ",c.children?"▾":""]}),c.children&&d.jsx("ul",{className:sn.dropdownMenu,children:c.children.map(u=>d.jsx("li",{children:d.jsx(md,{to:u.path,className:sn.dropdownMenuItem,children:u.name})},u.name))})]},c.name))})})]})},Vae="_zoroFooter_8qpog_1",Wae="_footerContent_8qpog_8",Hae="_footerColumns_8qpog_13",Kae="_column_8qpog_20",Zae="_socialIcons_8qpog_50",Gae="_footerQuote_8qpog_59",Ca={zoroFooter:Vae,footerContent:Wae,footerColumns:Hae,column:Kae,socialIcons:Zae,footerQuote:Gae},Yae=()=>d.jsx("footer",{className:Ca.zoroFooter,children:d.jsxs("div",{className:Ca.footerContent,children:[d.jsxs("div",{className:Ca.footerColumns,children:[d.jsxs("div",{className:Ca.column,children:[d.jsx("h4",{children:"Zoroasterverse"}),d.jsx("p",{children:"“Truth is the architect of happiness.”"}),d.jsxs("p",{children:["© ",new Date().getFullYear()," Zoroasterverse. All rights reserved."]})]}),d.jsxs("div",{className:Ca.column,children:[d.jsx("h4",{children:"Explore"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx("a",{href:"/about",children:"About"})}),d.jsx("li",{children:d.jsx("a",{href:"/books",children:"Books"})}),d.jsx("li",{children:d.jsx("a",{href:"/collaborate",children:"Artist Collaboration"})}),d.jsx("li",{children:d.jsx("a",{href:"/contact",children:"Contact"})})]})]}),d.jsxs("div",{className:Ca.column,children:[d.jsx("h4",{children:"Connect"}),d.jsxs("ul",{className:Ca.socialIcons,children:[d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(wae,{})})}),d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(oae,{})})}),d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(U1,{})})})]})]})]}),d.jsx("div",{className:Ca.footerQuote,children:d.jsx("em",{children:"“Let your conscience be the altar where right intention dwells.”"})})]})}),Jae=()=>d.jsxs("div",{className:"zr-root",children:[d.jsx(Bae,{}),d.jsx("main",{children:d.jsx(ZS,{})}),d.jsx(Yae,{})]}),Xae="_zrHero_1fsok_1",Qae="_parchmentCard_1fsok_12",ele="_zrHeroContent_1fsok_70",tle="_zrTitle_1fsok_74",rle="_zrQuote_1fsok_88",nle="_zrIntro_1fsok_97",sle="_zrCta_1fsok_105",ile="_zrHeroArt_1fsok_123",ole="_videoFire_1fsok_156",ale="_prophecyMask_1fsok_168",lle="_prophecyReel_1fsok_183",cle="_prophecyReelSpinning_1fsok_189",ule="_prophecyItem_1fsok_193",dle="_englishText_1fsok_207",hle="_zrSection_1fsok_256",fle="_zrH2_1fsok_263",ple="_srOnly_1fsok_279",mle="_spinsIndicator_1fsok_286",gle="_spinDot_1fsok_295",yle="_spinDotActive_1fsok_322",ot={zrHero:Xae,parchmentCard:Qae,zrHeroContent:ele,zrTitle:tle,zrQuote:rle,zrIntro:nle,zrCta:sle,zrHeroArt:ile,videoFire:ole,prophecyMask:ale,prophecyReel:lle,prophecyReelSpinning:cle,prophecyItem:ule,englishText:dle,zrSection:hle,zrH2:fle,srOnly:ple,spinsIndicator:mle,spinDot:gle,spinDotActive:yle},vle=async()=>{const{data:e,error:t}=await le.from("homepage_content").select("*");if(t)throw new Error(t.message);return e},ble=async()=>{const{data:e,error:t}=await le.from("posts").select("id, title, slug, content, created_at").eq("status","published").order("created_at",{ascending:!1}).limit(3);if(t)throw new Error(t.message);return e},xle=async()=>{const{data:e,error:t}=await le.from("release_items").select("*").order("created_at",{ascending:!1});if(t)throw new Error(t.message);return e},wle=({spinsLeft:e,setSpinsLeft:t})=>{const r=v.useRef(null),[n,s]=v.useState(!1),i=150,o=[{english:"Your heart is a compass that always points toward love—trust it, follow it, honor it."},{english:"You are not who you were yesterday unless you choose to be—each day offers the gift of becoming."},{english:"The friend of truth shall be the friend of my spirit, O Ahura Mazda. (Yasna 46.2)"},{english:"Every moment is sacred when approached with reverence, every task holy when performed with love."},{english:"The mind aligned with truth thinks God's thoughts after Him, sees with divine eyes, loves with cosmic heart."},{english:"May the beneficent spirit help us to speak truth and act righteously. (Yasna 47.6)"},{english:"Hope is the thing with feathers that perches in the soul and sings without words."},{english:"Self-knowledge is the beginning of wisdom, self-acceptance the foundation of growth."},{english:"Grant me, O Truth, the rewards of good thinking that bring joy and satisfaction. (Yasna 50.4)"},{english:"The sacred fire burns brightest in the heart that chooses truth over comfort. Let your conscience be the altar where right intention dwells."},{english:"Truth without compassion is cruelty; compassion without truth is sentimentality—balance both."},{english:"I praise You as the greatest and best, as the most beautiful, O Mazda Ahura. (Yasna 43.16)"},{english:"Truth is the architect of happiness, the foundation of peace, the cornerstone of wisdom. Build your life upon this rock."},{english:"The weight of moral choice is the proof of human dignity—angels don't choose, demons can't choose, but you can."},{english:"Plant seeds of hope in winter and trust them to bloom when spring returns to your life."},{english:"Appreciation is the highest form of prayer—seeing the divine in every blessing."},{english:"The future is not predetermined but is being written by every choice you make right now."},{english:"When shadows of doubt gather, kindle the inner flame of discernment. Fire purifies not by destroying, but by revealing what is true."},{english:"Begin each day as if it were your first—with wonder. End each day as if it were your last—with gratitude."},{english:"Morning brings the gift of choice renewed. Stand at the crossroads of thought and deed—which path serves the light?"},{english:"We invoke good thinking, truth, and the beneficent spirit of Ahura Mazda. (Yasna 37.4)"},{english:"Where truth flourishes, freedom follows; where freedom is genuine, truth is honored."},{english:"The divine dwells not only in temples but in every heart that welcomes it, every life that serves it."},{english:"The sacred fire asks no permission to burn, needs no fuel but truth, casts no shadow but illumination."},{english:"May we be instruments of peace, servants of truth, children of light. (Benediction)"},{english:"Let the fire within you remember the spark of dawn—every choice a new horizon to the world's unfolding. Walk in watchfulness, and the light of Good Mind will not fail you."},{english:"Devotion asks not what you can receive but what you can give, not what you deserve but what you can serve."},{english:"Freedom is not the absence of constraints but the presence of meaningful options."},{english:"Through the beneficent spirit, may we overcome all obstacles to righteousness. (Prayer)"},{english:"The light of understanding grows not by accumulating facts but by illuminating connections."},{english:"The peaceful heart creates peaceful surroundings; the harmonious soul attracts harmonious relationships."},{english:"I take refuge in good thinking, truth, and Your lordship, Mazda, from whom comes the most beneficent spirit. (Yasna 33.5)"},{english:"Rational thought and intuitive wisdom are not opposites but partners in the dance of understanding."},{english:"When you have the power to help and choose not to, you become complicit in the suffering you could have prevented."},{english:"Like a candle lights a thousand candles without diminishing, share your inner light freely with all."},{english:"You are both the author and the main character of your life story—write it well."},{english:"The good mind is not the mind that knows everything but the mind that remains open to learning."},{english:"The stranger is just a friend you haven't met yet, a teacher you haven't learned from yet, a gift you haven't unwrapped yet."},{english:"Those who seek to destroy my family and clan, Mazda, I put them in Your hands through good thinking and truth. (Yasna 48.8)"},{english:"I pray to You with outstretched hands, O Mazda, seeking Your help through the beneficent spirit. (Yasna 50.8)"},{english:"Every decision is a seed planted in the soil of time. What kind of forest are you growing?"},{english:"Devotion is gratitude in action, love expressing itself through loyal service."},{english:"The fire of truth burns away all that is false in you, leaving only what is real and precious."},{english:"The unexamined life scatters like leaves in the wind; the examined life grows deep roots in truth."},{english:"The arc of justice bends only when people like you choose to bend it—be a force for righteousness."},{english:"Choose as if your choice matters to everyone who will ever live—because it does."},{english:"When Good Mind came to me, I first learned to proclaim Your words, O Mazda. (Yasna 43.15)"},{english:"To You, the beneficent ones shall come for refuge, Mazda, not to the followers of falsehood. (Yasna 48.4)"},{english:"Understanding comes not from standing above others but from standing with them in shared humanity."},{english:"The doorway to wisdom opens inward—the journey begins when you stop looking outside and start looking within."},{english:"May we be worthy of Your friendship through righteous actions, O Mazda. (Yasna 46.6)"},{english:"This I ask You: tell me truly, Ahura—what craftsman created light and darkness? (Yasna 44.5)"},{english:"Harmony does not require uniformity—an orchestra creates beauty through coordinated differences."},{english:"May Ahura Mazda be praised! May the beneficent spirit be glorified! (Traditional praise)"},{english:"Wisdom whispers while foolishness shouts—train your ear to hear the quiet voice of truth."},{english:"The measure of a society is how it treats those who cannot defend themselves."},{english:"What doesn't challenge you doesn't change you; what doesn't stretch you doesn't strengthen you."},{english:"Fair is not everyone getting the same thing; fair is everyone getting what they need to thrive."},{english:"Through Your fire, show me the rewards that come through truth for both parties—those who uphold righteousness and those who do not. (Yasna 31.3)"},{english:"The world is changed not by those who point out what's wrong but by those who do what's right."},{english:"Service is love made visible, compassion made practical, faith made fruitful."},{english:"I have recognized You as beneficent through truth and good thinking, O Mazda. (Yasna 49.5)"},{english:"The holy is not somewhere else or some time else but here and now, in this place, at this moment."},{english:"Let your presence be a sanctuary where others can find rest from the storms of life."},{english:"Friendship is truth telling and burden sharing, celebration and consolation, walking together toward the light."},{english:"Small daily improvements lead to stunning yearly results—be consistent rather than dramatic."},{english:"The mind that dwells in truth becomes a sanctuary where peace is always available."},{english:"Your life is a sacred text written one choice at a time—make it a beautiful story."},{english:"Blessed is he who brings happiness to others through truth and good deeds. (Traditional blessing)"},{english:"You are the protector of the righteous, O Mazda, through Your beneficent spirit. (Yasna 47.3)"},{english:"This I ask You: tell me truly, Ahura—who established the path of the sun and stars? (Yasna 44.5)"},{english:"At the crossroads of decision, remember: you are always choosing not just for yourself but for all who will follow."},{english:"I approach You, O Mazda, with good thinking, so that You may grant me both the blessings of this existence and that of the spirit. (Yasna 28.4)"},{english:"Your life is your offering—what will you place on the altar of existence?"},{english:"Learning from others shortens your path to wisdom; teaching others deepens your own understanding."},{english:"Pure thoughts birth noble words; noble words inspire righteous deeds; righteous deeds purify thoughts in return."},{english:"Every meal is communion when shared with gratitude, every conversation prayer when spoken with love."},{english:"The freedom to choose your response to any situation is the last of human freedoms—exercise it wisely."},{english:"Your conscience is your connection to cosmic justice—honor it by living in alignment with its guidance."},{english:"Every sunrise is nature's way of saying, 'Try again'—accept the invitation with gratitude."},{english:"Truth is patient but not passive, gentle but not weak, humble but not uncertain of its worth."},{english:"Action without reflection is blind; reflection without action is empty; but action guided by reflection is transformative."},{english:"Righteousness is the best good. Happiness to him who is righteous for the sake of righteousness alone. (Ashem Vohu variation)"},{english:"Community is not a place but a relationship, not a location but a connection."},{english:"Good thinking leads to good feeling, good feeling leads to good willing, good willing leads to good living."},{english:"Every crossroads is a classroom, every decision a teacher, every consequence a lesson."},{english:"The present moment is the only moment over which you have power—make it count."},{english:"Hope is not naive optimism but courageous commitment to work for what ought to be."},{english:"Every mistake is a teacher in disguise, every failure a step toward success, every setback a setup for comeback."},{english:"The inner fire burns brightest not when fed by passion but when fueled by principle."},{english:"Your privilege is not your fault, but your responsibility. Use whatever advantages you have to lift others."},{english:"Through Your radiant fire, assign the destiny of the righteous and the unrighteous, O Mazda, that our teaching may spread among the living. (Yasna 31.19)"},{english:"Knowledge builds walls to separate us from ignorance; wisdom builds bridges to connect us with all beings."},{english:"As long as I have strength and power, I shall teach people to seek truth. (Yasna 45.4)"},{english:"The beneficent spirit manifests wherever love meets action. Be the hands and heart through which goodness enters the world."},{english:"The bounteous mentality sees abundance everywhere—in every sunrise, every breath, every opportunity to serve the good."},{english:"The mind illuminated by truth sees possibilities where others see only problems. Think with hope, and hope becomes reality."},{english:"Peace begins with each person choosing to be peaceful, harmony starts with each individual choosing to be harmonious."},{english:"Let gratitude be your first thought at dawn, your last thought at dusk, your constant companion throughout the day."},{english:"I realized You, Mazda, to be beneficent when I was encircled by Good Mind, when he taught me to proclaim: 'Let not men seek to please the followers of falsehood.' (Yasna 43.11)"},{english:"Compassion is not feeling sorry for others but feeling with them, sharing their burden until it becomes lighter."},{english:"Count your blessings, not your problems; focus on your gains, not your losses; see your progress, not your perfection."},{english:"Compassion is not pity from above but solidarity from within—suffer with, celebrate with, grow with."},{english:"At every moment you are choosing who you are becoming—choose the highest version of yourself."},{english:"Evening reflection is the mirror of morning intention. End as mindfully as you began."},{english:"True knowledge transforms the knower. If you remain unchanged by what you learn, you have learned nothing."},{english:"The paradox of freedom: you are most free when you choose to serve something greater than yourself."},{english:"The ripple effects of your actions extend far beyond what you can see—act as if the future depends on you."},{english:"The fire of wisdom burns without consuming. Feed it with honest reflection, and it will illumine your path forever."},{english:"Let your thoughts be seeds of kindness, your words be rain of encouragement, your deeds be sunshine of hope."},{english:"For whom did You create this earth and sky? Who made the luminaries and the darkness? (Yasna 29.1)"},{english:"Your presence in the world matters more than you know—show up fully, authentically, lovingly."},{english:"When the world seems broken beyond repair, remember that you are part of the repair."},{english:"The darkness is never permanent, the light is never extinguished completely. Keep the vigil."},{english:"To help the world progress, O Mazda, we have sought You through good thinking. (Yasna 30.6)"},{english:"Let your spirit be a fountain, not a drain. Pour out blessing upon blessing, and watch the desert of despair bloom."},{english:"Loneliness is the human condition; connection is the human choice. Choose connection."},{english:"For a wise Lord I knew You to be, Mazda, when Good Mind came to me and asked: 'Who are you? To whom do you belong?' (Yasna 43.7)"},{english:"True strength is not in never falling but in how gracefully you rise each time you fall."},{english:"Disorder is not the opposite of truth but its absence—fill the void with authentic being."},{english:"The path of wisdom begins with a single step: the decision to begin walking."},{english:"True justice considers not only what is legal but what is right, not only what is permitted but what is beneficial."},{english:"Grant me, O Mazda, through Your most beneficent spirit, through truth, the rewards of good thinking, through which I may bring joy to my supporters. (Yasna 28.11)"},{english:"The fire of Ahura Mazda brings light to the righteous and terror to the wicked. (Fire prayer)"},{english:"Your choices are your prayers—they reveal what you truly worship, what you genuinely value."},{english:"The false teacher leads people astray from the path of good thinking and truth. (Yasna 32.3)"},{english:"The phoenix rises not in spite of the ashes but because of them—let your failures fuel your renewal."},{english:"Forgiveness is not condoning what was wrong but choosing to be free from the burden of carrying resentment."},{english:"I praise good thoughts, good words, good deeds, and the good religion. (Fravarane prayer)"},{english:"The greatest among you will be your servant—greatness is measured by how much you give, not how much you get."},{english:"The morning star reminds us: even in the darkest hour, light is already on its way."},{english:"Where differences divide, find common ground; where similarities unite, celebrate diversity."},{english:"You who are Mazda, through Your spirit and fire, through truth and good thinking, grant me integrity and strength. (Yasna 28.7)"},{english:"In the garden of the heart, plant seeds of truthful speech. Words watered with wisdom bloom into lasting peace."},{english:"Your daily habits are votes for the type of person you wish to become—vote wisely."},{english:"May we receive the promised reward, the joy that comes from truth, O Mazda. (Yasna 33.11)"},{english:"Hope plants seeds in winter, trusting in the promise of spring."},{english:"You are not just in the community; the community is in you—you carry it wherever you go."},{english:"Your presence is often more healing than your words, your listening more valuable than your advice."},{english:"You are a unique note in the symphony of existence—play your part beautifully and boldly."},{english:"Bridge-builders are more valuable than wall-builders, peacemakers more needed than warriors."},{english:"Growth requires leaving your comfort zone regularly—comfort and growth cannot coexist."},{english:"But the righteous man chooses truth and good thinking as his allies. (Yasna 32.2)"},{english:"The threefold path begins in the silence of right thinking, flows through the beauty of truthful speech, and culminates in the power of loving action."},{english:"Truth needs no defense, only expression. Speak it simply and let its power do the rest."},{english:"Through good deeds may we come to You, O Mazda, with joy and gladness. (Yasna 50.10)"},{english:"I beheld You clearly in my mind's eye as the first one at the birth of life, when You made actions have consequences—evil for the evil, good reward for the good. (Yasna 43.5)"},{english:"Inner peace is not a luxury but a necessity, not a retreat from the world but preparation for effective engagement."},{english:"The wise heart holds both confidence and humility, certainty and openness, in perfect balance."},{english:"Your breath connects you to every living being—breathe consciously, live connectedly."},{english:"Whoever upholds truth most, whether man or woman, O Mazda Ahura, is most dear to You. (Yasna 46.11)"},{english:"Yes, there are two fundamental spirits, twins, renowned to be in conflict. In thought and word, in action, they are two: the good and the bad. Between these two, the beneficent have correctly chosen. (Yasna 30.3)"},{english:"Transformation happens not when you try to become someone else but when you become more fully yourself."},{english:"Where injustice flourishes, it is not enough to be personally righteous. Stand up, speak out, act decisively."},{english:"Then spoke Ahura Mazda: We have no pastor here who is both knowing and holy. (Yasna 29.6)"},{english:"The practice of gratitude transforms ordinary moments into sacred experiences."},{english:"Truth is like the sun—you cannot look directly at it for long, but it lights everything else."},{english:"I shall serve You with good thinking, with truth and righteous action, so that You may grant me that which leads to the straight path. (Yasna 28.5)"},{english:"May good thinking and truth dwell in our house forever, O Ahura Mazda. (Yasna 60.6)"},{english:"Look within with the same honesty you demand from others, the same compassion you show to friends."},{english:"The healing the world needs begins with the healing you give yourself—be gentle, be patient, be kind."},{english:"Hope is not a feeling but a decision—decide to hope and then live as if your hope is justified."},{english:"One chooses that rule of good thinking allied with truth in order to serve the beneficent spirit. (Yasna 51.18)"},{english:"The good mind is a gift that grows with giving. Share your wisdom freely, and watch understanding multiply among all beings."},{english:"When thought, word, and deed align like three rivers meeting, their combined power can move mountains of indifference."},{english:"The music of the spheres plays on—attune your heart to hear the cosmic symphony of love."},{english:"We rise by lifting others, we succeed by serving others, we find ourselves by losing ourselves in love."},{english:"The truth you speak has a past—it comes from your experience. Make sure that past is worthy of the truth."},{english:"The beneficent spirit breathes in every act of kindness. When you lift another's burden, you lighten the world."},{english:"Your talents are gifts to be shared, not treasures to be hoarded—invest them in making the world better."},{english:"The grateful heart attracts more to be grateful for—appreciation is the magnet for abundance."},{english:"The person who knows their weaknesses is stronger than the person who denies them."},{english:"May good fortune come through truth to those who proclaim these teachings, O Mazda. (Yasna 51.16)"},{english:"Meditation is the art of listening to the still small voice that whispers your deepest truth."},{english:"The most important choice you make each day is who you choose to become in that day."},{english:"Order emerges not from control but from harmony—the willing cooperation of free beings choosing good."},{english:"True intelligence is not the ability to solve problems but to see the connections between all things."},{english:"Thus speaks the maiden: 'You are the support of good thinking, of truth, and of the lordship desired by Mazda.' (Yasna 53.3)"},{english:"The spiral of growth means you will revisit the same lessons at deeper levels—embrace the journey."},{english:"When you choose increase over decrease, healing over harm, you align with the progressive spirit of creation itself."},{english:"When someone trusts you with their vulnerability, you hold sacred ground. Tread carefully and gratefully."},{english:"Renewal comes not from changing everything at once but from changing one thing completely."},{english:"When will the noble warriors come who shall drive out from here the thirst of the wicked? (Yasna 32.1)"},{english:"The sacred space is wherever you are when you remember who you really are and why you are here."},{english:"Good thinking, good words, and good deeds—these three bring a person to paradise, the best existence, light, and all good things. (Traditional summary)"},{english:"The progressive spirit never asks 'Why me?' but always 'How can I help?' Be an answer to someone's prayer today."},{english:"Then shall I recognize You as mighty, Mazda, when through good thinking You shall grant the blessings that the truthful and untruthful seek. (Yasna 45.8)"},{english:"I know You to be the first and the last, O Ahura Mazda—You are father of good thinking, creator of truth, judge of our actions. (Yasna 31.8)"},{english:"Wisdom is not knowing all the answers but asking better questions. Begin with: How can I serve?"},{english:"Conscience is the ember of the divine fire planted in every human heart—tend it carefully."},{english:"By Your beneficent spirit and by fire, O Mazda, show me truth and good thinking, through whose work one goes to Your abode. (Yasna 31.20)"},{english:"Come to my help, O Mazda, grant me strength through truth and good thinking. (Yasna 33.6)"},{english:"Through good deeds and righteous words, may we please Your spirit, O Mazda. (Yasna 49.10)"},{english:"Through truth we serve the Lord of Wisdom with good mind and beneficial action. (Summary verse)"},{english:"Service is not about being needed but about being useful, not about being thanked but about being trustworthy."},{english:"I who shall serve You with good thinking... may I thus bring solace to the soul of Earth. (Yasna 28.2)"},{english:"Holiness is not about being perfect but about being present, not about being pure but about being real."},{english:"May we be guides for those who seek the path of truth and righteousness. (Yasna 31.22)"},{english:"Wisdom is like water—it takes the shape of whatever vessel contains it, yet never loses its essence."},{english:"The enlightened mind is like clear water—it reflects perfectly what is, without adding or subtracting anything."},{english:"A thankful heart is a magnet for miracles, drawing goodness from the infinite storehouse of grace."},{english:"The pattern that connects all things is love expressing itself as truth, truth expressing itself as justice."},{english:"We are all connected—what helps one helps all, what harms one harms all."},{english:"Both bridegroom and bride, bring your minds into agreement for the practice of the best thoughts. (Yasna 53.4)"},{english:"The questions you ask shape the life you live—ask better questions, live a better life."},{english:"May the light of good thinking shine in our hearts forever. (Prayer verse)"},{english:"True self-knowledge includes knowing not just what you are but what you could become."},{english:"I know You to be mighty when You help me with good thinking, O Mazda Ahura. (Yasna 31.5)"},{english:"Justice is not revenge but restoration—making right what has been wrong, healing what has been harmed."},{english:"The sun rises not because you need it but because it is the nature of the sun to shine—be like the sun."},{english:"Justice is love applied to systems, compassion embodied in institutions, kindness made structural."},{english:"Grant victory to those who speak truth and live righteously, O Ahura Mazda. (Yasna 48.12)"},{english:"The journey inward is the most courageous journey—it requires facing yourself without flinching."},{english:"I have realized You as beneficent, Mazda Ahura, when You came to me with good thinking and asked: 'Who are you willing to please?' (Yasna 49.3)"},{english:"Each choice carves a channel for future choices to follow. Choose wisely what river you dig for tomorrow."},{english:"Therefore may we be among those who make this world fresh and new! (Yasna 30.9)"},{english:"Truth is the gravity of the moral universe—what goes up in lies must come down in consequences."},{english:"The weight of choice is the price of consciousness. Bear it gladly, for it makes you a partner in creation's unfolding."},{english:"This I ask You: Which is the first and which the last? (Yasna 44.6)"},{english:"Thank the sunrise for its faithfulness, the earth for its generosity, life for its infinite possibilities."},{english:"The sacred is not separate from the ordinary but hidden within it, waiting to be discovered."},{english:"Reflect with a clear mind—each person for themselves—before the Great Event of Choices. Awaken to this doctrine: there is no compromise between right and wrong. (Yasna 30.2)"},{english:"Your choices reveal your values more accurately than your words—choose as if your character depends on it."},{english:"You are not just in the world; the world is in you—take care of both."},{english:"Time is the canvas, your choices the paint, your life the masterpiece—create something beautiful."},{english:"I entrust my soul to You, O Mazda, seeking Your protection through good thinking. (Yasna 48.9)"},{english:"The isolated tree falls in the storm; the forest of trees stands strong together."},{english:"Sacred living means recognizing the extraordinary within the ordinary, the eternal within the temporal."},{english:"The arc of the moral universe bends toward justice only when conscious beings like you and me choose to bend it."},{english:"The cosmic order is written in every sunrise, every heartbeat, every act of genuine kindness."},{english:"This I ask You: Who holds up the earth below and keeps the sky from falling? (Yasna 44.4)"},{english:"Let the fire within purify your motives, clarify your vision, energize your compassion."},{english:"The strength of the individual is the community; the strength of the community is the individual."},{english:"The hands that heal are holier than the hands that pray without helping."},{english:"The grateful heart sees abundance everywhere; the ungrateful heart finds scarcity in plenty."},{english:"This I ask You: tell me truly, Ahura—how shall I drive deceit far from us who seek to promote truth in the world? (Yasna 51.4)"},{english:"Every ending contains a beginning; every death, a birth; every loss, an opportunity for growth."},{english:"Know yourself not to become self-absorbed but to become self-aware, not to focus inward but to focus clearly."},{english:"When these two spirits came together in the beginning, they established life and not-life, and how at the end the worst existence shall be for the followers of falsehood, but the best mind for the truthful. (Yasna 30.4)"},{english:"Wisdom is the art of living skillfully, the science of choosing well, the practice of loving wisely."},{english:"In the morning, set your mind like a compass toward truth; let all your steps follow this direction."},{english:"May Your fire shine forth to help the supporter of truth, O Mazda. (Yasna 34.4)"},{english:"The curious mind stays young, the learning heart stays open, the growing soul stays alive."},{english:"The bridge between what is and what could be is built with the materials of hope and hard work."},{english:"The mirror of self-reflection shows not what you want to see but what you need to see."},{english:"Let truth be our guide, good thinking our companion, right action our path. (Summary)"},{english:"The universe conspires to help those who help themselves and others—be part of the conspiracy of good."},{english:"Every act of love is a victory over the forces that diminish life—love boldly, love widely, love deeply."},{english:"The paradox of wisdom: the more you truly know, the more you realize how much you don't know."},{english:"Each day offers lessons if you are willing to be a student, opportunities if you are willing to try."},{english:"Justice is not just a destination but a journey—walk it one step at a time, one choice at a time."},{english:"The beginner's mind sees possibilities everywhere; the expert mind sees problems in everything."},{english:"Every choice is a prayer, every decision a vote for the kind of world you want to live in."},{english:"Justice delayed is often justice denied, but justice rushed is sometimes injustice accomplished. Seek the balanced way."},{english:"To what land to flee? Where shall I go to flee? They exclude me from family and clan. (Yasna 46.1)"},{english:"You are the one who rewards both the truthful and the untruthful according to their deeds. (Yasna 43.12)"},{english:"Who, Mazda, is the faithful friend of Your spirit? Let him teach me the straight paths of good thinking and of truth. (Yasna 47.4)"},{english:"With outstretched hands I pray to You, O Mazda, first of all through truth. (Yasna 28.1)"},{english:"Self-reflection without self-compassion becomes self-criticism; self-compassion without self-reflection becomes self-deception."},{english:"May good thinking reign supreme, may truth be established in the world. (Yasna 45.10)"},{english:"True belonging doesn't require you to change who you are; it requires you to be who you are."},{english:"When you light the lamp of compassion, you illuminate your own path as well as others'."},{english:"The order of existence rewards those who align with it, not to punish those who don't, but to heal what is broken."},{english:"The good mind seeks first to understand, then to be understood; first to serve, then to be served."},{english:"The trinity of human goodness—think well, speak well, act well—echoes the divine harmony that sustains all worlds."},{english:"Freedom is not the absence of consequences but the power to choose which consequences you will embrace."},{english:"Every moment is a fresh beginning, every breath a new chance, every choice a sacred opportunity."},{english:"Begin each day by asking: How can I make today better than yesterday? End each day by answering: How did I succeed?"},{english:"Through Your most beneficent spirit, O Mazda, I seek to do Your will. (Yasna 47.1)"},{english:"The greatest sermon is a life well-lived in service to truth, beauty, and goodness."},{english:"The deepest truth is often the most simple: be kind, be honest, be helpful, be present."},{english:"Peace is not the absence of conflict but the presence of justice, not the silence of oppression but the harmony of mutual respect."},{english:"The darkest night produces the brightest stars—your current darkness may be developing your greatest light."},{english:"Connection is the energy that exists between people when they feel seen, heard, and valued."},{english:"Like fire transforms wood to light, let your choices transform the world from what it is to what it should be."},{english:"Through good thinking, truth, and the spirit's power, they shall overcome the violence of the deceitful. (Yasna 32.16)"},{english:"The day unfolds like a scroll waiting to be written. What story will your choices tell?"},{english:"The gift of choice is also the burden of choice—embrace both aspects with equal courage."},{english:"The scales of justice are balanced not by equal punishment but by proportional restoration."},{english:"The seeds of tomorrow are planted in the soil of today—plant wisely."},{english:"Good thinking is the bridge between knowing and acting. Cross it with courage, and find yourself in the land of fulfillment."},{english:"I approach You, Mazda, with hands outstretched, with good thinking, with truth, hoping to please Your spirit with righteous actions. (Yasna 50.5)"},{english:"The heart that has been broken and healed is stronger than one that has never been tested."},{english:"Thanksgiving is not just a day but a way of life—live thankfully and you will have much to be thankful for."},{english:"Begin each day by asking: How shall I increase the good in the world through my being here?"},{english:"The wise person learns from everyone, teaches everyone, and judges no one harshly."},{english:"Each breath is a gift, each heartbeat a blessing, each moment an opportunity for thankfulness."},{english:"Like a lighthouse guides ships safely home, let your conscience guide you through moral storms to peaceful harbors."},{english:"Your legacy is not what you leave behind but what you build in others while you are here."},{english:"The growing edge is always uncomfortable—that's how you know you're growing."},{english:"We seek Your blessing through fire, through truth, through good thinking. (Yasna 36.3)"},{english:"This I ask You: tell me truly, Ahura—who was the first father of truth by begetting? (Yasna 44.3)"},{english:"Morning is creation's invitation to begin again. Accept it with gratitude and intentional presence."},{english:"Your conscience is the hearth of heaven—tend it with thoughts of justice, words of compassion, deeds of righteousness."},{english:"Your life may be a drop in the ocean, but without your drop the ocean would be less."},{english:"When moral darkness surrounds you, be the flame that others can navigate by."},{english:"Grant us, O Mazda, the straight paths of good thinking and truth. (Yasna 33.5)"},{english:"Your conscience is the sacred fire that never sleeps, never lies, never abandons you in darkness."},{english:"Your work in the world is your worship—do it with the reverence you would bring to the most sacred task."},{english:"True leadership is not about being served but about serving, not about having followers but about creating leaders."},{english:"Renewal comes not from changing your circumstances but from changing your relationship to your circumstances."},{english:"Speak to me as friend speaks to friend! Show me the supports on which both worlds rest. (Yasna 31.3)"},{english:"The light you seek is the light you are—stop looking for it and start being it."},{english:"Honesty is telling the truth to other people; integrity is telling the truth to yourself."},{english:"The wise person is not one who has never erred but one who learns from every mistake."},{english:"When the mind is clear like mountain water, right decisions flow naturally. Still the turbulent thoughts and find your center."},{english:"Through the beneficent spirit, Mazda, give me strength for good thinking, that I may find the straight paths of life. (Yasna 47.2)"},{english:"May we be among those who make this world progress, who are the healers of this world, O Mazda and You, O Truth. (Yasna 30.9)"},{english:"The wise Lord rewards those who serve truth with sincerity and devotion. (Teaching verse)"},{english:"The divine spark within you knows the difference between right and wrong—trust it, follow it, serve it."},{english:"The inner flame burns brightest when fed by deeds of righteousness, words of truth, thoughts of love."},{english:"The deepest wisdom is often the simplest truth, lived with complete sincerity."},{english:"Every person you meet is fighting a battle you know nothing about—be kind, be patient, be present."},{english:"The man of good life speaks to him of ill life: 'May your conscience torment you continuously!' (Yasna 46.11)"},{english:"The flame that burns for justice never consumes the just, only the injustice they oppose."},{english:"We approach You, O Ahura Mazda, with good thinking and truth, seeking Your blessing. (Yasna 34.1)"},{english:"Personal evolution is not about perfection but about progression, not about arrival but about journey."},{english:"Gratitude is the memory of the heart—it never forgets a kindness received or given."},{english:"I shall worship You with good thinking, O Mazda Ahura, so that You may teach me truth through Your spirit. (Yasna 45.6)"},{english:"Each dawn brings the covenant renewed: to think with clarity, speak with truth, act with love."},{english:"Kindness is the universal language that the deaf can hear and the blind can see."},{english:"Even in the darkest times, remember: you are here for a reason, at this time, in this place."},{english:"The phoenix is not reborn from ashes but through them—transformation requires embracing the fire."},{english:"As the first, O Mazda, You gave bodies and breath to the corporeal world through Your thought. (Yasna 31.11)"},{english:"Your inner fire is not yours alone—it is borrowed from the eternal flame that lights all worlds."},{english:"The river that moves you also moves through you—you are not separate from the flow of life."},{english:"The ultimate measure of your life is not what you accomplish but who you become."},{english:"The most precious gift you can give another person is your full, undivided, loving attention."},{english:"Truth is not a destination but a way of walking. Each step in harmony with what is right brings the world closer to wholeness."},{english:"May Ahura Mazda grant us that good which we seek through truth and good thinking. (Yasna 60.12)"},{english:"Gratitude turns what we have into enough, transforms ordinary days into thanksgivings, routine jobs into joy."},{english:"Love is the recognition that the other person's happiness is as important as your own—maybe more important."},{english:"Every person you meet is your teacher—some teach by example, others by cautionary tale."},{english:"Through righteousness may we attain that world of good thinking. (Yasna 34.15)"},{english:"The deceitful one chose to bring to realization the worst things. But the very beneficent spirit chose truth, and so shall those who satisfy the Wise Lord continuously with true actions. (Yasna 30.5)"},{english:"Each breath is a chance to choose life over death, hope over despair, love over fear."},{english:"True understanding comes not from accumulating facts but from seeing the patterns that connect all things."},{english:"Every act of service is a prayer, every moment of helpfulness a hymn, every gesture of kindness a blessing."},{english:"Where truth blooms, falsehood cannot take root. Cultivate the garden of your life with seeds of honesty and integrity."},{english:"The future is not fixed because you are still choosing—make your next choice count."},{english:"The most powerful force in the universe is a human being living in alignment with their highest truth."},{english:"When you see injustice and do nothing, you become part of the injustice—speak up, stand up, act up."},{english:"As rivers seek the sea, let your thoughts flow toward truth. In the silence of right action, wisdom speaks without words."},{english:"Your daily work is your temple, your loving relationships your prayer, your kind actions your worship."},{english:"The true order of existence is good; the most-good existence it is; desire it! Wish it! Happiness, bliss, enlightenment it is for that existence which is the true order of existence. (Ashem Vohu)"},{english:"The heart that has known pain is the heart most capable of healing others' pain."},{english:"Conflict is often the birth-pain of greater understanding—do not avoid it, but engage it constructively."},{english:"Clear thinking leads to clear speaking, which leads to clear acting. Begin each day by clarifying your deepest intentions."},{english:"The order of existence reveals itself to those who seek with sincere hearts. Look closely—truth hides in plain sight."},{english:"Let the actions of good thinking come to fruition for the man who teaches truth to Zarathustra. (Yasna 28.6)"},{english:"The loving man who brings help to the truthful, whether kinsman or fellow-member of the community, is in good accord with truth. (Yasna 46.2)"},{english:"When shall I know that You have power over those who cause harm to me, O Mazda? Let fire accompanied by good thinking make this known to me through truth. (Yasna 48.7)"},{english:"Clarity comes not from having all the answers but from asking the right questions."},{english:"Wisdom is knowing what to do; virtue is doing it; integrity is being consistent in both."},{english:"And when punishment comes to the wicked, then shall Your power be revealed to all, O Mazda. (Yasna 30.8)"},{english:"Your network is not about who can help you but who you can help, not who you know but who knows they can count on you."},{english:"Every ending is a new beginning in disguise—look for the hidden gift in every goodbye."},{english:"Through truth I complete my worship and my praise with actions, O Mazda Ahura. (Yasna 50.11)"},{english:"Where shall the righteous man find refuge when the wicked overwhelm the land? (Yasna 46.1)"},{english:"Like a river finds its course, truth finds its way through every obstacle. Be the clear channel through which it flows."},{english:"Every moment offers the great choice: will you add to the world's burden or its blessing? Choose consciously."},{english:"The rhythm of sunrise and sunset teaches the sacred pace of effort and rest, engagement and reflection."},{english:"Your fire, strong through truth, is a visible help to Your supporter, but visible harm to Your enemy, O Ahura Mazda. (Yasna 34.4)"},{english:"The soul of the earth cries out: For whom did You fashion me? Who created me? (Yasna 29.1)"},{english:"Service is the rent we pay for living on this planet—pay it gladly and generously."}],a=5,l=o.length,c=[];for(let f=0;f<a;f++)c.push(...o);const u=[...c.slice(c.length-l),...c,...c.slice(0,l)],h=async()=>{if(n||!r.current||e<=0){console.log("No spins left or already spinning.");return}console.log("handleSpin called");try{new Audio("/gear-click-351962.mp3").play().catch(m=>console.error("Error playing sound:",m))}catch(m){console.error("Error creating Audio object:",m)}s(!0),t(m=>m-1);const{data:{user:f}}=await le.auth.getUser();if(f){const m=new Date().toISOString().slice(0,10),{error:b}=await le.from("daily_spins").upsert({user_id:f.id,spin_date:m,spin_count:3-e+1},{onConflict:"user_id, spin_date"});b&&console.error("Error updating daily spin count:",b)}const p=Math.floor(Math.random()*o.length),y=(l+p+o.length*Math.floor(a/2))*i;r.current.classList.add(ot.prophecyReelSpinning),r.current.style.transform=`translateY(-${y}px)`,setTimeout(()=>{if(!r.current)return;r.current.classList.remove(ot.prophecyReelSpinning),r.current.style.transition="none";const m=p*i;r.current.style.transform=`translateY(-${m}px)`,r.current.offsetHeight,r.current.style.transition="transform 1.5s cubic-bezier(0.25, 1, 0.5, 1)",s(!1)},1600)};return d.jsx(d.Fragment,{children:d.jsx("div",{className:`${ot.prophecyMask} ${ot.englishMask}`,onClick:h,children:d.jsx("div",{ref:r,className:ot.prophecyReel,children:u.map((f,p)=>d.jsx("div",{className:ot.prophecyItem,children:d.jsx("span",{className:ot.englishText,children:f.english})},p))})})})},_le=({contentMap:e,spinsLeft:t,setSpinsLeft:r})=>{var n,s,i;const o=((n=e.get("hero_title"))==null?void 0:n.content)||"Zoroasterverse",a=((s=e.get("hero_quote"))==null?void 0:s.content)||"“Happiness comes to them who bring happiness to others.”",l=((i=e.get("hero_description"))==null?void 0:i.content)||"Learn about the teachings of the prophet Zarathustra, the history of one of the world’s oldest religions, and the principles of Good Thoughts, Good Words, and Good Deeds.";return d.jsxs("section",{id:"home",className:ot.zrHero,children:[d.jsxs("div",{className:ot.zrHeroContent,children:[d.jsx("h1",{className:ot.zrTitle,children:o}),d.jsx("p",{className:ot.zrQuote,children:a}),d.jsx("p",{className:ot.zrIntro,children:l}),d.jsx(Rr,{className:ot.zrCta,to:"/blog/about",children:"Learn More"})]}),d.jsxs("figure",{className:ot.zrHeroArt,"aria-labelledby":"art-caption",children:[d.jsx("video",{src:"/200716-913538378.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:ot.videoFire}),d.jsx("div",{className:ot.spinsIndicator,children:[...Array(3)].map((c,u)=>d.jsx("div",{className:`${ot.spinDot} ${u<t?ot.spinDotActive:""}`},u))}),d.jsx(wle,{spinsLeft:t,setSpinsLeft:r}),d.jsx("figcaption",{id:"art-caption",className:ot.srOnly,children:"A stylized winged figure above a sacred fire."})]})]})},jle=({posts:e})=>d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Latest News & Updates"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map(t=>{const r=t.content.length>100?t.content.substring(0,100)+"...":t.content;return d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{children:t.title}),d.jsx("p",{className:"mt-2",dangerouslySetInnerHTML:{__html:r}}),d.jsx(Rr,{to:`/blog/${t.slug}`,className:"mt-4 inline-block",children:"Read More"})]},t.id)})})]}),kle=({releases:e})=>d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Latest Releases"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map(t=>d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{children:t.title}),d.jsxs("p",{className:"mt-2",children:["Type: ",t.type]}),d.jsx("a",{href:t.link||"#",className:"mt-4 inline-block",children:"View Details / Purchase"})]},t.id))})]}),Nle=()=>{var e,t,r,n;const{data:s,isLoading:i,isError:o}=It({queryKey:["homepageContent"],queryFn:vle}),{data:a,isLoading:l,isError:c}=It({queryKey:["latestPosts"],queryFn:ble}),{data:u,isLoading:h,isError:f}=It({queryKey:["releaseItems"],queryFn:xle}),[p,y]=v.useState(3),[m,b]=v.useState(null);v.useEffect(()=>{(async()=>{const{data:{user:j}}=await le.auth.getUser();if(!j){y(0);return}const k=new Date().toISOString().slice(0,10),{data:S,error:C}=await le.from("daily_spins").select("*").eq("user_id",j.id).eq("spin_date",k).single();if(C&&C.code!=="PGRST116"){console.error("Error fetching daily spins:",C),y(0);return}if(S)y(3-S.spin_count),b(S.spin_date);else{y(3),b(k);const{error:E}=await le.from("daily_spins").insert({user_id:j.id,spin_date:k,spin_count:0});E&&console.error("Error inserting new daily spin entry:",E)}})()},[]);const x=i||l||h,w=o||c||f;if(x)return d.jsx("div",{className:"text-center py-8",children:"Loading homepage content..."});if(w)return d.jsx("div",{className:"text-center py-8 text-red-400",children:"Error loading homepage content."});const _=new Map(s==null?void 0:s.map(j=>[j.section,j]));return d.jsxs("div",{children:[d.jsx(_le,{contentMap:_,spinsLeft:p,setSpinsLeft:y}),d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Our Progress"}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((e=_.get("statistics_words_written"))==null?void 0:e.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Words Written"})]}),d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((t=_.get("statistics_beta_readers"))==null?void 0:t.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Beta Readers"})]}),d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((r=_.get("statistics_average_rating"))==null?void 0:r.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Average Rating"})]}),d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((n=_.get("statistics_books_published"))==null?void 0:n.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Books Published"})]})]})]}),d.jsx(jle,{posts:a||[]}),d.jsx(kle,{releases:u||[]}),d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Artist Collaboration"}),d.jsxs("div",{className:"relative rounded-lg shadow-lg overflow-hidden w-full",children:[d.jsx("img",{src:"/images/invite_to_Colab_card.png",alt:"Artist Collaboration Invitation",className:"w-full h-full object-contain"}),d.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-8",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-shadow-md",children:"Join Our Creative Team!"}),d.jsx("p",{className:"text-white mb-6 text-shadow-sm",children:"We're looking for talented artists to help shape the visual identity of the Zangar/Spandam Series. Explore revenue-share opportunities and bring your vision to life."}),d.jsx(Rr,{to:"/artist-collaboration",className:"inline-block bg-primary hover:bg-primary-dark text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:"Apply Now"})]})]})]})]})};function Sle(e){const t=e+"CollectionProvider",[r,n]=Ch(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:b,children:x}=m,w=de.useRef(null),_=de.useRef(new Map).current;return d.jsx(s,{scope:b,itemMap:_,collectionRef:w,children:x})};o.displayName=t;const a=e+"CollectionSlot",l=Ap(a),c=de.forwardRef((m,b)=>{const{scope:x,children:w}=m,_=i(a,x),j=Hn(b,_.collectionRef);return d.jsx(l,{ref:j,children:w})});c.displayName=a;const u=e+"CollectionItemSlot",h="data-radix-collection-item",f=Ap(u),p=de.forwardRef((m,b)=>{const{scope:x,children:w,..._}=m,j=de.useRef(null),k=Hn(b,j),S=i(u,x);return de.useEffect(()=>(S.itemMap.set(j,{ref:j,..._}),()=>void S.itemMap.delete(j))),d.jsx(f,{[h]:"",ref:k,children:w})});p.displayName=u;function y(m){const b=i(e+"CollectionConsumer",m);return de.useCallback(()=>{const x=b.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((_,j)=>w.indexOf(_.ref.current)-w.indexOf(j.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},y,n]}var Ele=v.createContext(void 0);function q1(e){const t=v.useContext(Ele);return e||t||"ltr"}var V0="rovingFocusGroup.onEntryFocus",Cle={bubbles:!1,cancelable:!0},Em="RovingFocusGroup",[ck,B1,Tle]=Sle(Em),[Ale,V1]=Ch(Em,[Tle]),[Ole,Ple]=Ale(Em),W1=v.forwardRef((e,t)=>d.jsx(ck.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(ck.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(Rle,{...e,ref:t})})}));W1.displayName=Em;var Rle=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=e,f=v.useRef(null),p=Hn(t,f),y=q1(i),[m,b]=Qb({prop:o,defaultProp:a??null,onChange:l,caller:Em}),[x,w]=v.useState(!1),_=Gd(c),j=B1(r),k=v.useRef(!1),[S,C]=v.useState(0);return v.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(V0,_),()=>E.removeEventListener(V0,_)},[_]),d.jsx(Ole,{scope:r,orientation:n,dir:y,loop:s,currentTabStopId:m,onItemFocus:v.useCallback(E=>b(E),[b]),onItemShiftTab:v.useCallback(()=>w(!0),[]),onFocusableItemAdd:v.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:v.useCallback(()=>C(E=>E-1),[]),children:d.jsx(Vr.div,{tabIndex:x||S===0?-1:0,"data-orientation":n,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:Ir(e.onMouseDown,()=>{k.current=!0}),onFocus:Ir(e.onFocus,E=>{const T=!k.current;if(E.target===E.currentTarget&&T&&!x){const R=new CustomEvent(V0,Cle);if(E.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=j().filter(L=>L.focusable),I=O.find(L=>L.active),P=O.find(L=>L.id===m),D=[I,P,...O].filter(Boolean).map(L=>L.ref.current);Z1(D,u)}}k.current=!1}),onBlur:Ir(e.onBlur,()=>w(!1))})})}),H1="RovingFocusGroupItem",K1=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...a}=e,l=np(),c=i||l,u=Ple(H1,r),h=u.currentTabStopId===c,f=B1(r),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:m}=u;return v.useEffect(()=>{if(n)return p(),()=>y()},[n,p,y]),d.jsx(ck.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:d.jsx(Vr.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Ir(e.onMouseDown,b=>{n?u.onItemFocus(c):b.preventDefault()}),onFocus:Ir(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Ir(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=Lle(b,u.orientation,u.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=f().filter(_=>_.focusable).map(_=>_.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const _=w.indexOf(b.currentTarget);w=u.loop?Mle(w,_+1):w.slice(_+1)}setTimeout(()=>Z1(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:m!=null}):o})})});K1.displayName=H1;var Ile={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Dle(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Lle(e,t,r){const n=Dle(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Ile[n]}function Z1(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function Mle(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var zle=W1,Fle=K1,lx="Tabs",[$le,Lqe]=Ch(lx,[V1]),G1=V1(),[Ule,LE]=$le(lx),Y1=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=q1(a),[h,f]=Qb({prop:n,onChange:s,defaultProp:i??"",caller:lx});return d.jsx(Ule,{scope:r,baseId:np(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:l,children:d.jsx(Vr.div,{dir:u,"data-orientation":o,...c,ref:t})})});Y1.displayName=lx;var J1="TabsList",X1=v.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=LE(J1,r),o=G1(r);return d.jsx(zle,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:d.jsx(Vr.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});X1.displayName=J1;var Q1="TabsTrigger",eF=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,o=LE(Q1,r),a=G1(r),l=nF(o.baseId,n),c=sF(o.baseId,n),u=n===o.value;return d.jsx(Fle,{asChild:!0,...a,focusable:!s,active:u,children:d.jsx(Vr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:t,onMouseDown:Ir(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:Ir(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:Ir(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!s&&h&&o.onValueChange(n)})})})});eF.displayName=Q1;var tF="TabsContent",rF=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=e,a=LE(tF,r),l=nF(a.baseId,n),c=sF(a.baseId,n),u=n===a.value,h=v.useRef(u);return v.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),d.jsx(jm,{present:s||u,children:({present:f})=>d.jsx(Vr.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});rF.displayName=tF;function nF(e,t){return`${e}-trigger-${t}`}function sF(e,t){return`${e}-content-${t}`}var qle=Y1,iF=X1,oF=eF,aF=rF;const Ble=qle,lF=v.forwardRef(({className:e,...t},r)=>d.jsx(iF,{ref:r,className:Je("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));lF.displayName=iF.displayName;const zf=v.forwardRef(({className:e,...t},r)=>d.jsx(oF,{ref:r,className:Je("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));zf.displayName=oF.displayName;const Ff=v.forwardRef(({className:e,...t},r)=>d.jsx(aF,{ref:r,className:Je("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ff.displayName=aF.displayName;var Cm=e=>e.type==="checkbox",fc=e=>e instanceof Date,jn=e=>e==null;const cF=e=>typeof e=="object";var lr=e=>!jn(e)&&!Array.isArray(e)&&cF(e)&&!fc(e),uF=e=>lr(e)&&e.target?Cm(e.target)?e.target.checked:e.target.value:e,Vle=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,dF=(e,t)=>e.has(Vle(t)),Wle=e=>{const t=e.constructor&&e.constructor.prototype;return lr(t)&&t.hasOwnProperty("isPrototypeOf")},ME=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Er(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(ME&&(e instanceof Blob||n))&&(r||lr(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!Wle(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Er(e[s]));else return e;return t}var cx=e=>/^\w*$/.test(e),or=e=>e===void 0,zE=e=>Array.isArray(e)?e.filter(Boolean):[],FE=e=>zE(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ye=(e,t,r)=>{if(!t||!lr(e))return r;const n=(cx(t)?[t]:FE(t)).reduce((s,i)=>jn(s)?s:s[i],e);return or(n)||n===e?or(e[t])?r:e[t]:n},Xn=e=>typeof e=="boolean",mt=(e,t,r)=>{let n=-1;const s=cx(t)?[t]:FE(t),i=s.length,o=i-1;for(;++n<i;){const a=s[n];let l=r;if(n!==o){const c=e[a];l=lr(c)||Array.isArray(c)?c:isNaN(+s[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=l,e=e[a]}};const pv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},di={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_o={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},hF=de.createContext(null);hF.displayName="HookFormContext";const $E=()=>de.useContext(hF);var fF=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==di.all&&(t._proxyFormState[o]=!n||di.all),r&&(r[o]=!0),e[o]}});return s};const UE=typeof window<"u"?de.useLayoutEffect:de.useEffect;function Hle(e){const t=$E(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[o,a]=de.useState(r._formState),l=de.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return UE(()=>r._subscribe({name:s,formState:l.current,exact:i,callback:c=>{!n&&a({...r._formState,...c})}}),[s,n,i]),de.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),de.useMemo(()=>fF(o,r,l.current,!1),[o,r])}var Vi=e=>typeof e=="string",pF=(e,t,r,n,s)=>Vi(e)?(n&&t.watch.add(e),ye(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),ye(r,i))):(n&&(t.watchAll=!0),r),uk=e=>jn(e)||!cF(e);function Mo(e,t,r=new WeakSet){if(uk(e)||uk(t))return e===t;if(fc(e)&&fc(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=t[i];if(fc(o)&&fc(a)||lr(o)&&lr(a)||Array.isArray(o)&&Array.isArray(a)?!Mo(o,a,r):o!==a)return!1}}return!0}function Kle(e){const t=$E(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:o,compute:a}=e||{},l=de.useRef(s),c=de.useRef(a),u=de.useRef(void 0);c.current=a;const h=de.useMemo(()=>r._getWatch(n,l.current),[r,n]),[f,p]=de.useState(c.current?c.current(h):h);return UE(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:y=>{if(!i){const m=pF(n,r._names,y.values||r._formValues,!1,l.current);if(c.current){const b=c.current(m);Mo(b,u.current)||(p(b),u.current=b)}else p(m)}}}),[r,i,n,o]),de.useEffect(()=>r._removeUnmounted()),f}function Zle(e){const t=$E(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:o}=e,a=dF(s._names.array,r),l=de.useMemo(()=>ye(s._formValues,r,ye(s._defaultValues,r,o)),[s,r,o]),c=Kle({control:s,name:r,defaultValue:l,exact:!0}),u=Hle({control:s,name:r,exact:!0}),h=de.useRef(e),f=de.useRef(s.register(r,{...e.rules,value:c,...Xn(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const p=de.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ye(u.errors,r)},isDirty:{enumerable:!0,get:()=>!!ye(u.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ye(u.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ye(u.validatingFields,r)},error:{enumerable:!0,get:()=>ye(u.errors,r)}}),[u,r]),y=de.useCallback(w=>f.current.onChange({target:{value:uF(w),name:r},type:pv.CHANGE}),[r]),m=de.useCallback(()=>f.current.onBlur({target:{value:ye(s._formValues,r),name:r},type:pv.BLUR}),[r,s._formValues]),b=de.useCallback(w=>{const _=ye(s._fields,r);_&&w&&(_._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:j=>w.setCustomValidity(j),reportValidity:()=>w.reportValidity()})},[s._fields,r]),x=de.useMemo(()=>({name:r,value:c,...Xn(n)||u.disabled?{disabled:u.disabled||n}:{},onChange:y,onBlur:m,ref:b}),[r,n,u.disabled,y,m,b,c]);return de.useEffect(()=>{const w=s._options.shouldUnregister||i;s.register(r,{...h.current.rules,...Xn(h.current.disabled)?{disabled:h.current.disabled}:{}});const _=(j,k)=>{const S=ye(s._fields,j);S&&S._f&&(S._f.mount=k)};if(_(r,!0),w){const j=Er(ye(s._options.defaultValues,r));mt(s._defaultValues,r,j),or(ye(s._formValues,r))&&mt(s._formValues,r,j)}return!a&&s.register(r),()=>{(a?w&&!s._state.action:w)?s.unregister(r):_(r,!1)}},[r,s,a,i]),de.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),de.useMemo(()=>({field:x,formState:u,fieldState:p}),[x,u,p])}const W0=e=>e.render(Zle(e));var qE=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},up=e=>Array.isArray(e)?e:[e],PP=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(r=>r!==t)}}),unsubscribe:()=>{e=[]}}},zn=e=>lr(e)&&!Object.keys(e).length,BE=e=>e.type==="file",hi=e=>typeof e=="function",mv=e=>{if(!ME)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},mF=e=>e.type==="select-multiple",VE=e=>e.type==="radio",Gle=e=>VE(e)||Cm(e),H0=e=>mv(e)&&e.isConnected;function Yle(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=or(e)?n++:e[t[n++]];return e}function Jle(e){for(const t in e)if(e.hasOwnProperty(t)&&!or(e[t]))return!1;return!0}function mr(e,t){const r=Array.isArray(t)?t:cx(t)?[t]:FE(t),n=r.length===1?e:Yle(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(lr(n)&&zn(n)||Array.isArray(n)&&Jle(n))&&mr(e,r.slice(0,-1)),e}var gF=e=>{for(const t in e)if(hi(e[t]))return!0;return!1};function gv(e,t={}){const r=Array.isArray(e);if(lr(e)||r)for(const n in e)Array.isArray(e[n])||lr(e[n])&&!gF(e[n])?(t[n]=Array.isArray(e[n])?[]:{},gv(e[n],t[n])):jn(e[n])||(t[n]=!0);return t}function yF(e,t,r){const n=Array.isArray(e);if(lr(e)||n)for(const s in e)Array.isArray(e[s])||lr(e[s])&&!gF(e[s])?or(t)||uk(r[s])?r[s]=Array.isArray(e[s])?gv(e[s],[]):{...gv(e[s])}:yF(e[s],jn(t)?{}:t[s],r[s]):r[s]=!Mo(e[s],t[s]);return r}var gf=(e,t)=>yF(e,t,gv(t));const RP={value:!1,isValid:!1},IP={value:!0,isValid:!0};var vF=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!or(e[0].attributes.value)?or(e[0].value)||e[0].value===""?IP:{value:e[0].value,isValid:!0}:IP:RP}return RP},bF=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>or(e)?e:t?e===""?NaN:e&&+e:r&&Vi(e)?new Date(e):n?n(e):e;const DP={isValid:!1,value:null};var xF=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,DP):DP;function LP(e){const t=e.ref;return BE(t)?t.files:VE(t)?xF(e.refs).value:mF(t)?[...t.selectedOptions].map(({value:r})=>r):Cm(t)?vF(e.refs).value:bF(or(t.value)?e.ref.value:t.value,e)}var Xle=(e,t,r,n)=>{const s={};for(const i of e){const o=ye(t,i);o&&mt(s,i,o._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},yv=e=>e instanceof RegExp,yf=e=>or(e)?e:yv(e)?e.source:lr(e)?yv(e.value)?e.value.source:e.value:e,MP=e=>({isOnSubmit:!e||e===di.onSubmit,isOnBlur:e===di.onBlur,isOnChange:e===di.onChange,isOnAll:e===di.all,isOnTouch:e===di.onTouched});const zP="AsyncFunction";var Qle=e=>!!e&&!!e.validate&&!!(hi(e.validate)&&e.validate.constructor.name===zP||lr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===zP)),ece=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),FP=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const dp=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=ye(e,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n||o.ref&&t(o.ref,o.name)&&!n)return!0;if(dp(a,t))break}else if(lr(a)&&dp(a,t))break}}};function $P(e,t,r){const n=ye(e,r);if(n||cx(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=ye(t,i),a=ye(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:r}}var tce=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return zn(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||di.all))},rce=(e,t,r)=>!e||!t||e===t||up(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),nce=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,sce=(e,t)=>!zE(ye(e,t)).length&&mr(e,t),ice=(e,t,r)=>{const n=up(ye(e,r));return mt(n,"root",t[r]),mt(e,r,n),e},Py=e=>Vi(e);function UP(e,t,r="validate"){if(Py(e)||Array.isArray(e)&&e.every(Py)||Xn(e)&&!e)return{type:r,message:Py(e)?e:"",ref:t}}var Mu=e=>lr(e)&&!yv(e)?e:{value:e,message:""},qP=async(e,t,r,n,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:h,max:f,pattern:p,validate:y,name:m,valueAsNumber:b,mount:x}=e._f,w=ye(r,m);if(!x||t.has(m))return{};const _=a?a[0]:o,j=I=>{s&&_.reportValidity&&(_.setCustomValidity(Xn(I)?"":I||""),_.reportValidity())},k={},S=VE(o),C=Cm(o),E=S||C,T=(b||BE(o))&&or(o.value)&&or(w)||mv(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,R=qE.bind(null,m,n,k),O=(I,P,D,L=_o.maxLength,B=_o.minLength)=>{const q=I?P:D;k[m]={type:I?L:B,message:q,ref:o,...R(I?L:B,q)}};if(i?!Array.isArray(w)||!w.length:l&&(!E&&(T||jn(w))||Xn(w)&&!w||C&&!vF(a).isValid||S&&!xF(a).isValid)){const{value:I,message:P}=Py(l)?{value:!!l,message:l}:Mu(l);if(I&&(k[m]={type:_o.required,message:P,ref:_,...R(_o.required,P)},!n))return j(P),k}if(!T&&(!jn(h)||!jn(f))){let I,P;const D=Mu(f),L=Mu(h);if(!jn(w)&&!isNaN(w)){const B=o.valueAsNumber||w&&+w;jn(D.value)||(I=B>D.value),jn(L.value)||(P=B<L.value)}else{const B=o.valueAsDate||new Date(w),q=$=>new Date(new Date().toDateString()+" "+$),K=o.type=="time",H=o.type=="week";Vi(D.value)&&w&&(I=K?q(w)>q(D.value):H?w>D.value:B>new Date(D.value)),Vi(L.value)&&w&&(P=K?q(w)<q(L.value):H?w<L.value:B<new Date(L.value))}if((I||P)&&(O(!!I,D.message,L.message,_o.max,_o.min),!n))return j(k[m].message),k}if((c||u)&&!T&&(Vi(w)||i&&Array.isArray(w))){const I=Mu(c),P=Mu(u),D=!jn(I.value)&&w.length>+I.value,L=!jn(P.value)&&w.length<+P.value;if((D||L)&&(O(D,I.message,P.message),!n))return j(k[m].message),k}if(p&&!T&&Vi(w)){const{value:I,message:P}=Mu(p);if(yv(I)&&!w.match(I)&&(k[m]={type:_o.pattern,message:P,ref:o,...R(_o.pattern,P)},!n))return j(P),k}if(y){if(hi(y)){const I=await y(w,r),P=UP(I,_);if(P&&(k[m]={...P,...R(_o.validate,P.message)},!n))return j(P.message),k}else if(lr(y)){let I={};for(const P in y){if(!zn(I)&&!n)break;const D=UP(await y[P](w,r),_,P);D&&(I={...D,...R(P,D.message)},j(D.message),n&&(k[m]=I))}if(!zn(I)&&(k[m]={ref:_,...I},!n))return k}}return j(!0),k};const oce={mode:di.onSubmit,reValidateMode:di.onChange,shouldFocusError:!0};function ace(e={}){let t={...oce,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:hi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=lr(t.defaultValues)||lr(t.values)?Er(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Er(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:PP(),state:PP()},p=t.criteriaMode===di.all,y=M=>V=>{clearTimeout(c),c=setTimeout(M,V)},m=async M=>{if(!t.disabled&&(u.isValid||h.isValid||M)){const V=t.resolver?zn((await C()).errors):await T(n,!0);V!==r.isValid&&f.state.next({isValid:V})}},b=(M,V)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((M||Array.from(a.mount)).forEach(Q=>{Q&&(V?mt(r.validatingFields,Q,V):mr(r.validatingFields,Q))}),f.state.next({validatingFields:r.validatingFields,isValidating:!zn(r.validatingFields)}))},x=(M,V=[],Q,ge,he=!0,ce=!0)=>{if(ge&&Q&&!t.disabled){if(o.action=!0,ce&&Array.isArray(ye(n,M))){const _e=Q(ye(n,M),ge.argA,ge.argB);he&&mt(n,M,_e)}if(ce&&Array.isArray(ye(r.errors,M))){const _e=Q(ye(r.errors,M),ge.argA,ge.argB);he&&mt(r.errors,M,_e),sce(r.errors,M)}if((u.touchedFields||h.touchedFields)&&ce&&Array.isArray(ye(r.touchedFields,M))){const _e=Q(ye(r.touchedFields,M),ge.argA,ge.argB);he&&mt(r.touchedFields,M,_e)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=gf(s,i)),f.state.next({name:M,isDirty:O(M,V),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else mt(i,M,V)},w=(M,V)=>{mt(r.errors,M,V),f.state.next({errors:r.errors})},_=M=>{r.errors=M,f.state.next({errors:r.errors,isValid:!1})},j=(M,V,Q,ge)=>{const he=ye(n,M);if(he){const ce=ye(i,M,or(Q)?ye(s,M):Q);or(ce)||ge&&ge.defaultChecked||V?mt(i,M,V?ce:LP(he._f)):D(M,ce),o.mount&&m()}},k=(M,V,Q,ge,he)=>{let ce=!1,_e=!1;const rt={name:M};if(!t.disabled){if(!Q||ge){(u.isDirty||h.isDirty)&&(_e=r.isDirty,r.isDirty=rt.isDirty=O(),ce=_e!==rt.isDirty);const Be=Mo(ye(s,M),V);_e=!!ye(r.dirtyFields,M),Be?mr(r.dirtyFields,M):mt(r.dirtyFields,M,!0),rt.dirtyFields=r.dirtyFields,ce=ce||(u.dirtyFields||h.dirtyFields)&&_e!==!Be}if(Q){const Be=ye(r.touchedFields,M);Be||(mt(r.touchedFields,M,Q),rt.touchedFields=r.touchedFields,ce=ce||(u.touchedFields||h.touchedFields)&&Be!==Q)}ce&&he&&f.state.next(rt)}return ce?rt:{}},S=(M,V,Q,ge)=>{const he=ye(r.errors,M),ce=(u.isValid||h.isValid)&&Xn(V)&&r.isValid!==V;if(t.delayError&&Q?(l=y(()=>w(M,Q)),l(t.delayError)):(clearTimeout(c),l=null,Q?mt(r.errors,M,Q):mr(r.errors,M)),(Q?!Mo(he,Q):he)||!zn(ge)||ce){const _e={...ge,...ce&&Xn(V)?{isValid:V}:{},errors:r.errors,name:M};r={...r,..._e},f.state.next(_e)}},C=async M=>{b(M,!0);const V=await t.resolver(i,t.context,Xle(M||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(M),V},E=async M=>{const{errors:V}=await C(M);if(M)for(const Q of M){const ge=ye(V,Q);ge?mt(r.errors,Q,ge):mr(r.errors,Q)}else r.errors=V;return V},T=async(M,V,Q={valid:!0})=>{for(const ge in M){const he=M[ge];if(he){const{_f:ce,..._e}=he;if(ce){const rt=a.array.has(ce.name),Be=he._f&&Qle(he._f);Be&&u.validatingFields&&b([ge],!0);const bt=await qP(he,a.disabled,i,p,t.shouldUseNativeValidation&&!V,rt);if(Be&&u.validatingFields&&b([ge]),bt[ce.name]&&(Q.valid=!1,V))break;!V&&(ye(bt,ce.name)?rt?ice(r.errors,bt,ce.name):mt(r.errors,ce.name,bt[ce.name]):mr(r.errors,ce.name))}!zn(_e)&&await T(_e,V,Q)}}return Q.valid},R=()=>{for(const M of a.unMount){const V=ye(n,M);V&&(V._f.refs?V._f.refs.every(Q=>!H0(Q)):!H0(V._f.ref))&&pe(M)}a.unMount=new Set},O=(M,V)=>!t.disabled&&(M&&V&&mt(i,M,V),!Mo($(),s)),I=(M,V,Q)=>pF(M,a,{...o.mount?i:or(V)?s:Vi(M)?{[M]:V}:V},Q,V),P=M=>zE(ye(o.mount?i:s,M,t.shouldUnregister?ye(s,M,[]):[])),D=(M,V,Q={})=>{const ge=ye(n,M);let he=V;if(ge){const ce=ge._f;ce&&(!ce.disabled&&mt(i,M,bF(V,ce)),he=mv(ce.ref)&&jn(V)?"":V,mF(ce.ref)?[...ce.ref.options].forEach(_e=>_e.selected=he.includes(_e.value)):ce.refs?Cm(ce.ref)?ce.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(he)?_e.checked=!!he.find(rt=>rt===_e.value):_e.checked=he===_e.value||!!he)}):ce.refs.forEach(_e=>_e.checked=_e.value===he):BE(ce.ref)?ce.ref.value="":(ce.ref.value=he,ce.ref.type||f.state.next({name:M,values:Er(i)})))}(Q.shouldDirty||Q.shouldTouch)&&k(M,he,Q.shouldTouch,Q.shouldDirty,!0),Q.shouldValidate&&H(M)},L=(M,V,Q)=>{for(const ge in V){if(!V.hasOwnProperty(ge))return;const he=V[ge],ce=M+"."+ge,_e=ye(n,ce);(a.array.has(M)||lr(he)||_e&&!_e._f)&&!fc(he)?L(ce,he,Q):D(ce,he,Q)}},B=(M,V,Q={})=>{const ge=ye(n,M),he=a.array.has(M),ce=Er(V);mt(i,M,ce),he?(f.array.next({name:M,values:Er(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&Q.shouldDirty&&f.state.next({name:M,dirtyFields:gf(s,i),isDirty:O(M,ce)})):ge&&!ge._f&&!jn(ce)?L(M,ce,Q):D(M,ce,Q),FP(M,a)&&f.state.next({...r,name:M}),f.state.next({name:o.mount?M:void 0,values:Er(i)})},q=async M=>{o.mount=!0;const V=M.target;let Q=V.name,ge=!0;const he=ye(n,Q),ce=Be=>{ge=Number.isNaN(Be)||fc(Be)&&isNaN(Be.getTime())||Mo(Be,ye(i,Q,Be))},_e=MP(t.mode),rt=MP(t.reValidateMode);if(he){let Be,bt;const Qr=V.type?LP(he._f):uF(M),Vt=M.type===pv.BLUR||M.type===pv.FOCUS_OUT,Ws=!ece(he._f)&&!t.resolver&&!ye(r.errors,Q)&&!he._f.deps||nce(Vt,ye(r.touchedFields,Q),r.isSubmitted,rt,_e),Ai=FP(Q,a,Vt);mt(i,Q,Qr),Vt?(!V||!V.readOnly)&&(he._f.onBlur&&he._f.onBlur(M),l&&l(0)):he._f.onChange&&he._f.onChange(M);const mo=k(Q,Qr,Vt),Oi=!zn(mo)||Ai;if(!Vt&&f.state.next({name:Q,type:M.type,values:Er(i)}),Ws)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?Vt&&m():Vt||m()),Oi&&f.state.next({name:Q,...Ai?{}:mo});if(!Vt&&Ai&&f.state.next({...r}),t.resolver){const{errors:Pi}=await C([Q]);if(ce(Qr),ge){const go=$P(r.errors,n,Q),en=$P(Pi,n,go.name||Q);Be=en.error,Q=en.name,bt=zn(Pi)}}else b([Q],!0),Be=(await qP(he,a.disabled,i,p,t.shouldUseNativeValidation))[Q],b([Q]),ce(Qr),ge&&(Be?bt=!1:(u.isValid||h.isValid)&&(bt=await T(n,!0)));ge&&(he._f.deps&&H(he._f.deps),S(Q,bt,Be,mo))}},K=(M,V)=>{if(ye(r.errors,V)&&M.focus)return M.focus(),1},H=async(M,V={})=>{let Q,ge;const he=up(M);if(t.resolver){const ce=await E(or(M)?M:he);Q=zn(ce),ge=M?!he.some(_e=>ye(ce,_e)):Q}else M?(ge=(await Promise.all(he.map(async ce=>{const _e=ye(n,ce);return await T(_e&&_e._f?{[ce]:_e}:_e)}))).every(Boolean),!(!ge&&!r.isValid)&&m()):ge=Q=await T(n);return f.state.next({...!Vi(M)||(u.isValid||h.isValid)&&Q!==r.isValid?{}:{name:M},...t.resolver||!M?{isValid:Q}:{},errors:r.errors}),V.shouldFocus&&!ge&&dp(n,K,M?he:a.mount),ge},$=M=>{const V={...o.mount?i:s};return or(M)?V:Vi(M)?ye(V,M):M.map(Q=>ye(V,Q))},J=(M,V)=>({invalid:!!ye((V||r).errors,M),isDirty:!!ye((V||r).dirtyFields,M),error:ye((V||r).errors,M),isValidating:!!ye(r.validatingFields,M),isTouched:!!ye((V||r).touchedFields,M)}),te=M=>{M&&up(M).forEach(V=>mr(r.errors,V)),f.state.next({errors:M?r.errors:{}})},be=(M,V,Q)=>{const ge=(ye(n,M,{_f:{}})._f||{}).ref,he=ye(r.errors,M)||{},{ref:ce,message:_e,type:rt,...Be}=he;mt(r.errors,M,{...Be,...V,ref:ge}),f.state.next({name:M,errors:r.errors,isValid:!1}),Q&&Q.shouldFocus&&ge&&ge.focus&&ge.focus()},Z=(M,V)=>hi(M)?f.state.subscribe({next:Q=>"values"in Q&&M(I(void 0,V),Q)}):I(M,V,!0),G=M=>f.state.subscribe({next:V=>{rce(M.name,V.name,M.exact)&&tce(V,M.formState||u,pt,M.reRenderRoot)&&M.callback({values:{...i},...r,...V,defaultValues:s})}}).unsubscribe,fe=M=>(o.mount=!0,h={...h,...M.formState},G({...M,formState:h})),pe=(M,V={})=>{for(const Q of M?up(M):a.mount)a.mount.delete(Q),a.array.delete(Q),V.keepValue||(mr(n,Q),mr(i,Q)),!V.keepError&&mr(r.errors,Q),!V.keepDirty&&mr(r.dirtyFields,Q),!V.keepTouched&&mr(r.touchedFields,Q),!V.keepIsValidating&&mr(r.validatingFields,Q),!t.shouldUnregister&&!V.keepDefaultValue&&mr(s,Q);f.state.next({values:Er(i)}),f.state.next({...r,...V.keepDirty?{isDirty:O()}:{}}),!V.keepIsValid&&m()},ke=({disabled:M,name:V})=>{(Xn(M)&&o.mount||M||a.disabled.has(V))&&(M?a.disabled.add(V):a.disabled.delete(V))},W=(M,V={})=>{let Q=ye(n,M);const ge=Xn(V.disabled)||Xn(t.disabled);return mt(n,M,{...Q||{},_f:{...Q&&Q._f?Q._f:{ref:{name:M}},name:M,mount:!0,...V}}),a.mount.add(M),Q?ke({disabled:Xn(V.disabled)?V.disabled:t.disabled,name:M}):j(M,!0,V.value),{...ge?{disabled:V.disabled||t.disabled}:{},...t.progressive?{required:!!V.required,min:yf(V.min),max:yf(V.max),minLength:yf(V.minLength),maxLength:yf(V.maxLength),pattern:yf(V.pattern)}:{},name:M,onChange:q,onBlur:q,ref:he=>{if(he){W(M,V),Q=ye(n,M);const ce=or(he.value)&&he.querySelectorAll&&he.querySelectorAll("input,select,textarea")[0]||he,_e=Gle(ce),rt=Q._f.refs||[];if(_e?rt.find(Be=>Be===ce):ce===Q._f.ref)return;mt(n,M,{_f:{...Q._f,..._e?{refs:[...rt.filter(H0),ce,...Array.isArray(ye(s,M))?[{}]:[]],ref:{type:ce.type,name:M}}:{ref:ce}}}),j(M,!1,void 0,ce)}else Q=ye(n,M,{}),Q._f&&(Q._f.mount=!1),(t.shouldUnregister||V.shouldUnregister)&&!(dF(a.array,M)&&o.action)&&a.unMount.add(M)}}},X=()=>t.shouldFocusError&&dp(n,K,a.mount),ae=M=>{Xn(M)&&(f.state.next({disabled:M}),dp(n,(V,Q)=>{const ge=ye(n,Q);ge&&(V.disabled=ge._f.disabled||M,Array.isArray(ge._f.refs)&&ge._f.refs.forEach(he=>{he.disabled=ge._f.disabled||M}))},0,!1))},U=(M,V)=>async Q=>{let ge;Q&&(Q.preventDefault&&Q.preventDefault(),Q.persist&&Q.persist());let he=Er(i);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:ce,values:_e}=await C();r.errors=ce,he=Er(_e)}else await T(n);if(a.disabled.size)for(const ce of a.disabled)mr(he,ce);if(mr(r.errors,"root"),zn(r.errors)){f.state.next({errors:{}});try{await M(he,Q)}catch(ce){ge=ce}}else V&&await V({...r.errors},Q),X(),setTimeout(X);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:zn(r.errors)&&!ge,submitCount:r.submitCount+1,errors:r.errors}),ge)throw ge},Se=(M,V={})=>{ye(n,M)&&(or(V.defaultValue)?B(M,Er(ye(s,M))):(B(M,V.defaultValue),mt(s,M,Er(V.defaultValue))),V.keepTouched||mr(r.touchedFields,M),V.keepDirty||(mr(r.dirtyFields,M),r.isDirty=V.defaultValue?O(M,Er(ye(s,M))):O()),V.keepError||(mr(r.errors,M),u.isValid&&m()),f.state.next({...r}))},Re=(M,V={})=>{const Q=M?Er(M):s,ge=Er(Q),he=zn(M),ce=he?s:ge;if(V.keepDefaultValues||(s=Q),!V.keepValues){if(V.keepDirtyValues){const _e=new Set([...a.mount,...Object.keys(gf(s,i))]);for(const rt of Array.from(_e))ye(r.dirtyFields,rt)?mt(ce,rt,ye(i,rt)):B(rt,ye(ce,rt))}else{if(ME&&or(M))for(const _e of a.mount){const rt=ye(n,_e);if(rt&&rt._f){const Be=Array.isArray(rt._f.refs)?rt._f.refs[0]:rt._f.ref;if(mv(Be)){const bt=Be.closest("form");if(bt){bt.reset();break}}}}if(V.keepFieldsRef)for(const _e of a.mount)B(_e,ye(ce,_e));else n={}}i=t.shouldUnregister?V.keepDefaultValues?Er(s):{}:Er(ce),f.array.next({values:{...ce}}),f.state.next({values:{...ce}})}a={mount:V.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!V.keepIsValid||!!V.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:V.keepSubmitCount?r.submitCount:0,isDirty:he?!1:V.keepDirty?r.isDirty:!!(V.keepDefaultValues&&!Mo(M,s)),isSubmitted:V.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:he?{}:V.keepDirtyValues?V.keepDefaultValues&&i?gf(s,i):r.dirtyFields:V.keepDefaultValues&&M?gf(s,M):V.keepDirty?r.dirtyFields:{},touchedFields:V.keepTouched?r.touchedFields:{},errors:V.keepErrors?r.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Qe=(M,V)=>Re(hi(M)?M(i):M,V),Xe=(M,V={})=>{const Q=ye(n,M),ge=Q&&Q._f;if(ge){const he=ge.refs?ge.refs[0]:ge.ref;he.focus&&(he.focus(),V.shouldSelect&&hi(he.select)&&he.select())}},pt=M=>{r={...r,...M}},Xt={control:{register:W,unregister:pe,getFieldState:J,handleSubmit:U,setError:be,_subscribe:G,_runSchema:C,_focusError:X,_getWatch:I,_getDirty:O,_setValid:m,_setFieldArray:x,_setDisabledField:ke,_setErrors:_,_getFieldArray:P,_reset:Re,_resetDefaultValues:()=>hi(t.defaultValues)&&t.defaultValues().then(M=>{Qe(M,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:ae,_subjects:f,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(M){o=M},get _defaultValues(){return s},get _names(){return a},set _names(M){a=M},get _formState(){return r},get _options(){return t},set _options(M){t={...t,...M}}},subscribe:fe,trigger:H,register:W,handleSubmit:U,watch:Z,setValue:B,getValues:$,reset:Qe,resetField:Se,clearErrors:te,unregister:pe,setError:be,setFocus:Xe,getFieldState:J};return{...Xt,formControl:Xt}}function lce(e={}){const t=de.useRef(void 0),r=de.useRef(void 0),[n,s]=de.useState({isDirty:!1,isValidating:!1,isLoading:hi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:hi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!hi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...a}=ace(e);t.current={...a,formState:n}}const i=t.current.control;return i._options=e,UE(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),de.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),de.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),de.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),de.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),de.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),de.useEffect(()=>{e.values&&!Mo(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),de.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=fF(n,i),t.current}const BP=(e,t,r)=>{if(e&&"reportValidity"in e){const n=ye(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},dk=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?BP(n.ref,r,e):n&&n.refs&&n.refs.forEach(s=>BP(s,r,e))}},VP=(e,t)=>{t.shouldUseNativeValidation&&dk(e,t);const r={};for(const n in e){const s=ye(t.fields,n),i=Object.assign(e[n]||{},{ref:s&&s.ref});if(cce(t.names||Object.keys(e),n)){const o=Object.assign({},ye(r,n));mt(o,"root",i),mt(r,n,o)}else mt(r,n,i)}return r},cce=(e,t)=>{const r=WP(t);return e.some(n=>WP(n).match(`^${r}\\.\\d+`))};function WP(e){return e.replace(/\]|\[/g,"")}function oe(e,t,r){function n(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in o.prototype)u in a||Object.defineProperty(a,u,{value:o.prototype[u].bind(a)});a._zod.constr=o,a._zod.def=l}const s=(r==null?void 0:r.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:e});function o(a){var l;const c=r!=null&&r.Parent?new i:this;n(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var l,c;return r!=null&&r.Parent&&a instanceof r.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class xd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class wF extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const _F={};function Bc(e){return _F}function uce(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,n])=>t.indexOf(+r)===-1).map(([r,n])=>n)}function hk(e,t){return typeof t=="bigint"?t.toString():t}function WE(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function HE(e){return e==null}function KE(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}const HP=Symbol("evaluating");function Et(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==HP)return n===void 0&&(n=HP,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function dce(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function El(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Oh(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function KP(e){return JSON.stringify(e)}const jF="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function vv(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const hce=WE(()=>{var e;if(typeof navigator<"u"&&(e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Rp(e){if(vv(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(vv(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function kF(e){return Rp(e)?{...e}:e}const fce=new Set(["string","number","symbol"]);function ux(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Cl(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function qe(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function pce(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function mce(e,t){const r=e._zod.def,n=Oh(e._zod.def,{get shape(){const s={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(s[i]=r.shape[i])}return El(this,"shape",s),s},checks:[]});return Cl(e,n)}function gce(e,t){const r=e._zod.def,n=Oh(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete s[i]}return El(this,"shape",s),s},checks:[]});return Cl(e,n)}function yce(e,t){if(!Rp(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const n=Oh(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return El(this,"shape",s),s},checks:[]});return Cl(e,n)}function vce(e,t){if(!Rp(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return El(this,"shape",n),n},checks:e._zod.def.checks};return Cl(e,r)}function bce(e,t){const r=Oh(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return El(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Cl(e,r)}function xce(e,t,r){const n=Oh(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)i[o]=e?new e({type:"optional",innerType:s[o]}):s[o];return El(this,"shape",i),i},checks:[]});return Cl(t,n)}function wce(e,t,r){const n=Oh(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:s[o]}))}else for(const o in s)i[o]=new e({type:"nonoptional",innerType:s[o]});return El(this,"shape",i),i},checks:[]});return Cl(t,n)}function od(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function NF(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function $g(e){return typeof e=="string"?e:e==null?void 0:e.message}function Vc(e,t,r){var n,s,i,o,a,l;const c={...e,path:e.path??[]};if(!e.message){const u=$g((i=(s=(n=e.inst)==null?void 0:n._zod.def)==null?void 0:s.error)==null?void 0:i.call(s,e))??$g((o=t==null?void 0:t.error)==null?void 0:o.call(t,e))??$g((a=r.customError)==null?void 0:a.call(r,e))??$g((l=r.localeError)==null?void 0:l.call(r,e))??"Invalid input";c.message=u}return delete c.inst,delete c.continue,t!=null&&t.reportInput||delete c.input,c}function ZE(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Ip(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const SF=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,hk,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},GE=oe("$ZodError",SF),dx=oe("$ZodError",SF,{Parent:Error});function _ce(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function jce(e,t){const r=t||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(e),n}const hx=e=>(t,r,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new xd;if(o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>Vc(l,i,Bc())));throw jF(a,s==null?void 0:s.callee),a}return o.value},kce=hx(dx),fx=e=>async(t,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>Vc(l,i,Bc())));throw jF(a,s==null?void 0:s.callee),a}return o.value},Nce=fx(dx),px=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new xd;return i.issues.length?{success:!1,error:new(e??GE)(i.issues.map(o=>Vc(o,s,Bc())))}:{success:!0,data:i.value}},Sce=px(dx),mx=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>Vc(o,s,Bc())))}:{success:!0,data:i.value}},Ece=mx(dx),Cce=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return hx(e)(t,r,s)},Tce=e=>(t,r,n)=>hx(e)(t,r,n),Ace=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return fx(e)(t,r,s)},Oce=e=>async(t,r,n)=>fx(e)(t,r,n),Pce=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return px(e)(t,r,s)},Rce=e=>(t,r,n)=>px(e)(t,r,n),Ice=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return mx(e)(t,r,s)},Dce=e=>async(t,r,n)=>mx(e)(t,r,n),Lce=/^[cC][^\s-]{8,}$/,Mce=/^[0-9a-z]+$/,zce=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Fce=/^[0-9a-vA-V]{20}$/,$ce=/^[A-Za-z0-9]{27}$/,Uce=/^[a-zA-Z0-9_-]{21}$/,qce=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Bce=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ZP=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Vce=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Wce="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Hce(){return new RegExp(Wce,"u")}const Kce=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Zce=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Gce=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Yce=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Jce=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,EF=/^[A-Za-z0-9_-]*$/,Xce=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Qce=/^\+(?:[0-9]){6,14}[0-9]$/,CF="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",eue=new RegExp(`^${CF}$`);function TF(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function tue(e){return new RegExp(`^${TF(e)}$`)}function rue(e){const t=TF({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${CF}T(?:${n})$`)}const nue=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},sue=/true|false/i,iue=/^[^A-Z]*$/,oue=/^[^a-z]*$/,ho=oe("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),aue=oe("$ZodCheckMaxLength",(e,t)=>{var r;ho.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!HE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const i=ZE(s);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),lue=oe("$ZodCheckMinLength",(e,t)=>{var r;ho.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!HE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const i=ZE(s);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),cue=oe("$ZodCheckLengthEquals",(e,t)=>{var r;ho.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!HE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,i=s.length;if(i===t.length)return;const o=ZE(s),a=i>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),gx=oe("$ZodCheckStringFormat",(e,t)=>{var r,n;ho.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),uue=oe("$ZodCheckRegex",(e,t)=>{gx.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),due=oe("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=iue),gx.init(e,t)}),hue=oe("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=oue),gx.init(e,t)}),fue=oe("$ZodCheckIncludes",(e,t)=>{ho.init(e,t);const r=ux(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),pue=oe("$ZodCheckStartsWith",(e,t)=>{ho.init(e,t);const r=new RegExp(`^${ux(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),mue=oe("$ZodCheckEndsWith",(e,t)=>{ho.init(e,t);const r=new RegExp(`.*${ux(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),gue=oe("$ZodCheckOverwrite",(e,t)=>{ho.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class yue{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),n=Math.min(...r.map(i=>i.length-i.trimStart().length)),s=r.map(i=>i.slice(n)).map(i=>" ".repeat(this.indent*2)+i);for(const i of s)this.content.push(i)}compile(){const t=Function,r=this==null?void 0:this.args,n=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...r,n.join(`
`))}}const vue={major:4,minor:1,patch:3},_r=oe("$ZodType",(e,t)=>{var r,n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=vue;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const i of s)for(const o of i._zod.onattach)o(e);if(s.length===0)(n=e._zod).deferred??(n.deferred=[]),(r=e._zod.deferred)==null||r.push(()=>{e._zod.run=e._zod.parse});else{const i=(a,l,c)=>{let u=od(a),h;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(u)continue;const p=a.issues.length,y=f._zod.check(a);if(y instanceof Promise&&(c==null?void 0:c.async)===!1)throw new xd;if(h||y instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await y,a.issues.length!==p&&(u||(u=od(a,p)))});else{if(a.issues.length===p)continue;u||(u=od(a,p))}}return h?h.then(()=>a):a},o=(a,l,c)=>{if(od(a))return a.aborted=!0,a;const u=i(l,s,c);if(u instanceof Promise){if(c.async===!1)throw new xd;return u.then(h=>e._zod.parse(h,c))}return e._zod.parse(u,c)};e._zod.run=(a,l)=>{if(l.skipChecks)return e._zod.parse(a,l);if(l.direction==="backward"){const u=e._zod.parse({value:a.value,issues:[]},{...l,skipChecks:!0});return u instanceof Promise?u.then(h=>o(h,a,l)):o(u,a,l)}const c=e._zod.parse(a,l);if(c instanceof Promise){if(l.async===!1)throw new xd;return c.then(u=>i(u,s,l))}return i(c,s,l)}}e["~standard"]={validate:i=>{var o;try{const a=Sce(e,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return Ece(e,i).then(a=>{var l;return a.success?{value:a.data}:{issues:(l=a.error)==null?void 0:l.issues}})}},vendor:"zod",version:1}}),YE=oe("$ZodString",(e,t)=>{var r;_r.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??nue(e._zod.bag),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Ut=oe("$ZodStringFormat",(e,t)=>{gx.init(e,t),YE.init(e,t)}),bue=oe("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Bce),Ut.init(e,t)}),xue=oe("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ZP(r))}else t.pattern??(t.pattern=ZP());Ut.init(e,t)}),wue=oe("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Vce),Ut.init(e,t)}),_ue=oe("$ZodURL",(e,t)=>{Ut.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Xce.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),jue=oe("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Hce()),Ut.init(e,t)}),kue=oe("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Uce),Ut.init(e,t)}),Nue=oe("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Lce),Ut.init(e,t)}),Sue=oe("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Mce),Ut.init(e,t)}),Eue=oe("$ZodULID",(e,t)=>{t.pattern??(t.pattern=zce),Ut.init(e,t)}),Cue=oe("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Fce),Ut.init(e,t)}),Tue=oe("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=$ce),Ut.init(e,t)}),Aue=oe("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=rue(t)),Ut.init(e,t)}),Oue=oe("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=eue),Ut.init(e,t)}),Pue=oe("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=tue(t)),Ut.init(e,t)}),Rue=oe("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=qce),Ut.init(e,t)}),Iue=oe("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Kce),Ut.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Due=oe("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Zce),Ut.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Lue=oe("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Gce),Ut.init(e,t)}),Mue=oe("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Yce),Ut.init(e,t),e._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function AF(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const zue=oe("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Jce),Ut.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{AF(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function Fue(e){if(!EF.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return AF(r)}const $ue=oe("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=EF),Ut.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{Fue(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Uue=oe("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Qce),Ut.init(e,t)});function que(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const Bue=oe("$ZodJWT",(e,t)=>{Ut.init(e,t),e._zod.check=r=>{que(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Vue=oe("$ZodBoolean",(e,t)=>{_r.init(e,t),e._zod.pattern=sue,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),Wue=oe("$ZodUnknown",(e,t)=>{_r.init(e,t),e._zod.parse=r=>r}),Hue=oe("$ZodNever",(e,t)=>{_r.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function GP(e,t,r){e.issues.length&&t.issues.push(...NF(r,e.issues)),t.value[r]=e.value}const Kue=oe("$ZodArray",(e,t)=>{_r.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=t.element._zod.run({value:a,issues:[]},n);l instanceof Promise?i.push(l.then(c=>GP(c,r,o))):GP(l,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function bv(e,t,r,n){e.issues.length&&t.issues.push(...NF(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function OF(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape[n]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const r=pce(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function PF(e,t,r,n,s,i){const o=[],a=s.keySet,l=s.catchall._zod,c=l.def.type;for(const u of Object.keys(t)){if(a.has(u))continue;if(c==="never"){o.push(u);continue}const h=l.run({value:t[u],issues:[]},n);h instanceof Promise?e.push(h.then(f=>bv(f,r,u,t))):bv(h,r,u,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const Zue=oe("$ZodObject",(e,t)=>{_r.init(e,t);const r=WE(()=>OF(t));Et(e._zod,"propValues",()=>{const o=t.shape,a={};for(const l in o){const c=o[l]._zod;if(c.values){a[l]??(a[l]=new Set);for(const u of c.values)a[l].add(u)}}return a});const n=vv,s=t.catchall;let i;e._zod.parse=(o,a)=>{i??(i=r.value);const l=o.value;if(!n(l))return o.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),o;o.value={};const c=[],u=i.shape;for(const h of i.keys){const f=u[h]._zod.run({value:l[h],issues:[]},a);f instanceof Promise?c.push(f.then(p=>bv(p,o,h,l))):bv(f,o,h,l)}return s?PF(c,l,o,a,r.value,e):c.length?Promise.all(c).then(()=>o):o}}),Gue=oe("$ZodObjectJIT",(e,t)=>{Zue.init(e,t);const r=e._zod.parse,n=WE(()=>OF(t)),s=h=>{const f=new yue(["shape","payload","ctx"]),p=n.value,y=w=>{const _=KP(w);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};f.write("const input = payload.value;");const m=Object.create(null);let b=0;for(const w of p.keys)m[w]=`key_${b++}`;f.write("const newResult = {}");for(const w of p.keys){const _=m[w],j=KP(w);f.write(`const ${_} = ${y(w)};`),f.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${j}, ...iss.path] : [${j}]
          })));
        }
        
        if (${_}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${_}.value;
        }
      `)}f.write("payload.value = newResult;"),f.write("return payload;");const x=f.compile();return(w,_)=>x(h,w,_)};let i;const o=vv,a=!_F.jitless,l=a&&hce.value,c=t.catchall;let u;e._zod.parse=(h,f)=>{u??(u=n.value);const p=h.value;return o(p)?a&&l&&(f==null?void 0:f.async)===!1&&f.jitless!==!0?(i||(i=s(t.shape)),h=i(h,f),c?PF([],p,h,f,u,e):h):r(h,f):(h.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),h)}});function YP(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const s=e.filter(i=>!od(i));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>Vc(o,n,Bc())))}),t)}const Yue=oe("$ZodUnion",(e,t)=>{_r.init(e,t),Et(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Et(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Et(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),Et(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>KE(i.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const l of t.options){const c=l._zod.run({value:s.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>YP(l,s,e,i)):YP(a,s,e,i)}}),Jue=oe("$ZodIntersection",(e,t)=>{_r.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,i=t.left._zod.run({value:s,issues:[]},n),o=t.right._zod.run({value:s,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([a,l])=>JP(r,a,l)):JP(r,i,o)}});function fk(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Rp(e)&&Rp(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),s={...e,...t};for(const i of n){const o=fk(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],i=t[n],o=fk(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function JP(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),od(e))return e;const n=fk(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const Xue=oe("$ZodEnum",(e,t)=>{_r.init(e,t);const r=uce(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>fce.has(typeof s)).map(s=>typeof s=="string"?ux(s):s.toString()).join("|")})$`),e._zod.parse=(s,i)=>{const o=s.value;return n.has(o)||s.issues.push({code:"invalid_value",values:r,input:o,inst:e}),s}}),Que=oe("$ZodTransform",(e,t)=>{_r.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new wF(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(r.value=i,r));if(s instanceof Promise)throw new xd;return r.value=s,r}});function XP(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const ede=oe("$ZodOptional",(e,t)=>{_r.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Et(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Et(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${KE(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>XP(i,r.value)):XP(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),tde=oe("$ZodNullable",(e,t)=>{_r.init(e,t),Et(e._zod,"optin",()=>t.innerType._zod.optin),Et(e._zod,"optout",()=>t.innerType._zod.optout),Et(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${KE(r.source)}|null)$`):void 0}),Et(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),rde=oe("$ZodDefault",(e,t)=>{_r.init(e,t),e._zod.optin="optional",Et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>QP(i,t)):QP(s,t)}});function QP(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const nde=oe("$ZodPrefault",(e,t)=>{_r.init(e,t),e._zod.optin="optional",Et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),sde=oe("$ZodNonOptional",(e,t)=>{_r.init(e,t),Et(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>e4(i,e)):e4(s,e)}});function e4(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const ide=oe("$ZodCatch",(e,t)=>{_r.init(e,t),Et(e._zod,"optin",()=>t.innerType._zod.optin),Et(e._zod,"optout",()=>t.innerType._zod.optout),Et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>Vc(o,n,Bc()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(i=>Vc(i,n,Bc()))},input:r.value}),r.issues=[]),r)}}),ode=oe("$ZodPipe",(e,t)=>{_r.init(e,t),Et(e._zod,"values",()=>t.in._zod.values),Et(e._zod,"optin",()=>t.in._zod.optin),Et(e._zod,"optout",()=>t.out._zod.optout),Et(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=t.out._zod.run(r,n);return i instanceof Promise?i.then(o=>Ug(o,t.in,n)):Ug(i,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(i=>Ug(i,t.out,n)):Ug(s,t.out,n)}});function Ug(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const ade=oe("$ZodReadonly",(e,t)=>{_r.init(e,t),Et(e._zod,"propValues",()=>t.innerType._zod.propValues),Et(e._zod,"values",()=>t.innerType._zod.values),Et(e._zod,"optin",()=>t.innerType._zod.optin),Et(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(t4):t4(s)}});function t4(e){return e.value=Object.freeze(e.value),e}const lde=oe("$ZodCustom",(e,t)=>{ho.init(e,t),_r.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(i=>r4(i,r,n,e));r4(s,r,n,e)}});function r4(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(Ip(s))}}class cde{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function ude(){return new cde}const qg=ude();function dde(e,t){return new e({type:"string",...qe(t)})}function hde(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...qe(t)})}function n4(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...qe(t)})}function fde(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...qe(t)})}function pde(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...qe(t)})}function mde(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...qe(t)})}function gde(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...qe(t)})}function yde(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...qe(t)})}function vde(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...qe(t)})}function bde(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...qe(t)})}function xde(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...qe(t)})}function wde(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...qe(t)})}function _de(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...qe(t)})}function jde(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...qe(t)})}function kde(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...qe(t)})}function Nde(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...qe(t)})}function Sde(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...qe(t)})}function Ede(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...qe(t)})}function Cde(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...qe(t)})}function Tde(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...qe(t)})}function Ade(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...qe(t)})}function Ode(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...qe(t)})}function Pde(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...qe(t)})}function Rde(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...qe(t)})}function Ide(e,t){return new e({type:"string",format:"date",check:"string_format",...qe(t)})}function Dde(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...qe(t)})}function Lde(e,t){return new e({type:"string",format:"duration",check:"string_format",...qe(t)})}function Mde(e,t){return new e({type:"boolean",...qe(t)})}function zde(e){return new e({type:"unknown"})}function Fde(e,t){return new e({type:"never",...qe(t)})}function RF(e,t){return new aue({check:"max_length",...qe(t),maximum:e})}function xv(e,t){return new lue({check:"min_length",...qe(t),minimum:e})}function IF(e,t){return new cue({check:"length_equals",...qe(t),length:e})}function $de(e,t){return new uue({check:"string_format",format:"regex",...qe(t),pattern:e})}function Ude(e){return new due({check:"string_format",format:"lowercase",...qe(e)})}function qde(e){return new hue({check:"string_format",format:"uppercase",...qe(e)})}function Bde(e,t){return new fue({check:"string_format",format:"includes",...qe(t),includes:e})}function Vde(e,t){return new pue({check:"string_format",format:"starts_with",...qe(t),prefix:e})}function Wde(e,t){return new mue({check:"string_format",format:"ends_with",...qe(t),suffix:e})}function Tm(e){return new gue({check:"overwrite",tx:e})}function Hde(e){return Tm(t=>t.normalize(e))}function Kde(){return Tm(e=>e.trim())}function Zde(){return Tm(e=>e.toLowerCase())}function Gde(){return Tm(e=>e.toUpperCase())}function Yde(e,t,r){return new e({type:"array",element:t,...qe(r)})}function Jde(e,t,r){return new e({type:"custom",check:"custom",fn:t,...qe(r)})}function Xde(e){const t=Qde(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Ip(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(Ip(s))}},e(r.value,r)));return t}function Qde(e,t){const r=new ho({check:"custom",...qe(t)});return r._zod.check=e,r}function s4(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}function ehe(e,t){for(var r={};e.length;){var n=e[0],s=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var a=n.unionErrors[0].errors[0];r[o]={message:a.message,type:a.code}}else r[o]={message:i,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var l=r[o].types,c=l&&l[n.code];r[o]=qE(o,t,r,s,c?[].concat(c,n.message):n.message)}e.shift()}return r}function the(e,t){for(var r={};e.length;){var n=e[0],s=n.code,i=n.message,o=n.path.join(".");if(!r[o])if(n.code==="invalid_union"&&n.errors.length>0){var a=n.errors[0][0];r[o]={message:a.message,type:a.code}}else r[o]={message:i,type:s};if(n.code==="invalid_union"&&n.errors.forEach(function(u){return u.forEach(function(h){return e.push(h)})}),t){var l=r[o].types,c=l&&l[n.code];r[o]=qE(o,t,r,s,c?[].concat(c,n.message):n.message)}e.shift()}return r}function rhe(e,t,r){if(r===void 0&&(r={}),function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def}(e))return function(n,s,i){try{return Promise.resolve(s4(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(o){return i.shouldUseNativeValidation&&dk({},i),{errors:{},values:r.raw?Object.assign({},n):o}})},function(o){if(function(a){return Array.isArray(a==null?void 0:a.issues)}(o))return{values:{},errors:VP(ehe(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}};if(function(n){return"_zod"in n&&typeof n._zod=="object"}(e))return function(n,s,i){try{return Promise.resolve(s4(function(){return Promise.resolve((r.mode==="sync"?kce:Nce)(e,n,t)).then(function(o){return i.shouldUseNativeValidation&&dk({},i),{errors:{},values:r.raw?Object.assign({},n):o}})},function(o){if(function(a){return a instanceof GE}(o))return{values:{},errors:VP(the(o.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}};throw new Error("Invalid input: not a Zod schema")}const nhe=oe("ZodISODateTime",(e,t)=>{Aue.init(e,t),Yt.init(e,t)});function she(e){return Rde(nhe,e)}const ihe=oe("ZodISODate",(e,t)=>{Oue.init(e,t),Yt.init(e,t)});function ohe(e){return Ide(ihe,e)}const ahe=oe("ZodISOTime",(e,t)=>{Pue.init(e,t),Yt.init(e,t)});function lhe(e){return Dde(ahe,e)}const che=oe("ZodISODuration",(e,t)=>{Rue.init(e,t),Yt.init(e,t)});function uhe(e){return Lde(che,e)}const dhe=(e,t)=>{GE.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>jce(e,r)},flatten:{value:r=>_ce(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,hk,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,hk,2)}},isEmpty:{get(){return e.issues.length===0}}})},Us=oe("ZodError",dhe,{Parent:Error}),hhe=hx(Us),fhe=fx(Us),phe=px(Us),mhe=mx(Us),ghe=Cce(Us),yhe=Tce(Us),vhe=Ace(Us),bhe=Oce(Us),xhe=Pce(Us),whe=Rce(Us),_he=Ice(Us),jhe=Dce(Us),Lr=oe("ZodType",(e,t)=>(_r.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>Cl(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>hhe(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>phe(e,r,n),e.parseAsync=async(r,n)=>fhe(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>mhe(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>ghe(e,r,n),e.decode=(r,n)=>yhe(e,r,n),e.encodeAsync=async(r,n)=>vhe(e,r,n),e.decodeAsync=async(r,n)=>bhe(e,r,n),e.safeEncode=(r,n)=>xhe(e,r,n),e.safeDecode=(r,n)=>whe(e,r,n),e.safeEncodeAsync=async(r,n)=>_he(e,r,n),e.safeDecodeAsync=async(r,n)=>jhe(e,r,n),e.refine=(r,n)=>e.check(ffe(r,n)),e.superRefine=r=>e.check(pfe(r)),e.overwrite=r=>e.check(Tm(r)),e.optional=()=>l4(e),e.nullable=()=>c4(e),e.nullish=()=>l4(c4(e)),e.nonoptional=r=>ofe(e,r),e.array=()=>LF(e),e.or=r=>Yhe([e,r]),e.and=r=>Xhe(e,r),e.transform=r=>u4(e,efe(r)),e.default=r=>nfe(e,r),e.prefault=r=>ife(e,r),e.catch=r=>lfe(e,r),e.pipe=r=>u4(e,r),e.readonly=()=>dfe(e),e.describe=r=>{const n=e.clone();return qg.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=qg.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return qg.get(e);const n=e.clone();return qg.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),DF=oe("_ZodString",(e,t)=>{YE.init(e,t),Lr.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check($de(...n)),e.includes=(...n)=>e.check(Bde(...n)),e.startsWith=(...n)=>e.check(Vde(...n)),e.endsWith=(...n)=>e.check(Wde(...n)),e.min=(...n)=>e.check(xv(...n)),e.max=(...n)=>e.check(RF(...n)),e.length=(...n)=>e.check(IF(...n)),e.nonempty=(...n)=>e.check(xv(1,...n)),e.lowercase=n=>e.check(Ude(n)),e.uppercase=n=>e.check(qde(n)),e.trim=()=>e.check(Kde()),e.normalize=(...n)=>e.check(Hde(...n)),e.toLowerCase=()=>e.check(Zde()),e.toUpperCase=()=>e.check(Gde())}),khe=oe("ZodString",(e,t)=>{YE.init(e,t),DF.init(e,t),e.email=r=>e.check(hde(Nhe,r)),e.url=r=>e.check(yde(She,r)),e.jwt=r=>e.check(Pde(Uhe,r)),e.emoji=r=>e.check(vde(Ehe,r)),e.guid=r=>e.check(n4(i4,r)),e.uuid=r=>e.check(fde(Vg,r)),e.uuidv4=r=>e.check(pde(Vg,r)),e.uuidv6=r=>e.check(mde(Vg,r)),e.uuidv7=r=>e.check(gde(Vg,r)),e.nanoid=r=>e.check(bde(Che,r)),e.guid=r=>e.check(n4(i4,r)),e.cuid=r=>e.check(xde(The,r)),e.cuid2=r=>e.check(wde(Ahe,r)),e.ulid=r=>e.check(_de(Ohe,r)),e.base64=r=>e.check(Tde(zhe,r)),e.base64url=r=>e.check(Ade(Fhe,r)),e.xid=r=>e.check(jde(Phe,r)),e.ksuid=r=>e.check(kde(Rhe,r)),e.ipv4=r=>e.check(Nde(Ihe,r)),e.ipv6=r=>e.check(Sde(Dhe,r)),e.cidrv4=r=>e.check(Ede(Lhe,r)),e.cidrv6=r=>e.check(Cde(Mhe,r)),e.e164=r=>e.check(Ode($he,r)),e.datetime=r=>e.check(she(r)),e.date=r=>e.check(ohe(r)),e.time=r=>e.check(lhe(r)),e.duration=r=>e.check(uhe(r))});function Bg(e){return dde(khe,e)}const Yt=oe("ZodStringFormat",(e,t)=>{Ut.init(e,t),DF.init(e,t)}),Nhe=oe("ZodEmail",(e,t)=>{wue.init(e,t),Yt.init(e,t)}),i4=oe("ZodGUID",(e,t)=>{bue.init(e,t),Yt.init(e,t)}),Vg=oe("ZodUUID",(e,t)=>{xue.init(e,t),Yt.init(e,t)}),She=oe("ZodURL",(e,t)=>{_ue.init(e,t),Yt.init(e,t)}),Ehe=oe("ZodEmoji",(e,t)=>{jue.init(e,t),Yt.init(e,t)}),Che=oe("ZodNanoID",(e,t)=>{kue.init(e,t),Yt.init(e,t)}),The=oe("ZodCUID",(e,t)=>{Nue.init(e,t),Yt.init(e,t)}),Ahe=oe("ZodCUID2",(e,t)=>{Sue.init(e,t),Yt.init(e,t)}),Ohe=oe("ZodULID",(e,t)=>{Eue.init(e,t),Yt.init(e,t)}),Phe=oe("ZodXID",(e,t)=>{Cue.init(e,t),Yt.init(e,t)}),Rhe=oe("ZodKSUID",(e,t)=>{Tue.init(e,t),Yt.init(e,t)}),Ihe=oe("ZodIPv4",(e,t)=>{Iue.init(e,t),Yt.init(e,t)}),Dhe=oe("ZodIPv6",(e,t)=>{Due.init(e,t),Yt.init(e,t)}),Lhe=oe("ZodCIDRv4",(e,t)=>{Lue.init(e,t),Yt.init(e,t)}),Mhe=oe("ZodCIDRv6",(e,t)=>{Mue.init(e,t),Yt.init(e,t)}),zhe=oe("ZodBase64",(e,t)=>{zue.init(e,t),Yt.init(e,t)}),Fhe=oe("ZodBase64URL",(e,t)=>{$ue.init(e,t),Yt.init(e,t)}),$he=oe("ZodE164",(e,t)=>{Uue.init(e,t),Yt.init(e,t)}),Uhe=oe("ZodJWT",(e,t)=>{Bue.init(e,t),Yt.init(e,t)}),qhe=oe("ZodBoolean",(e,t)=>{Vue.init(e,t),Lr.init(e,t)});function Bhe(e){return Mde(qhe,e)}const Vhe=oe("ZodUnknown",(e,t)=>{Wue.init(e,t),Lr.init(e,t)});function o4(){return zde(Vhe)}const Whe=oe("ZodNever",(e,t)=>{Hue.init(e,t),Lr.init(e,t)});function Hhe(e){return Fde(Whe,e)}const Khe=oe("ZodArray",(e,t)=>{Kue.init(e,t),Lr.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(xv(r,n)),e.nonempty=r=>e.check(xv(1,r)),e.max=(r,n)=>e.check(RF(r,n)),e.length=(r,n)=>e.check(IF(r,n)),e.unwrap=()=>e.element});function LF(e,t){return Yde(Khe,e,t)}const Zhe=oe("ZodObject",(e,t)=>{Gue.init(e,t),Lr.init(e,t),Et(e,"shape",()=>t.shape),e.keyof=()=>mk(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:o4()}),e.loose=()=>e.clone({...e._zod.def,catchall:o4()}),e.strict=()=>e.clone({...e._zod.def,catchall:Hhe()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>yce(e,r),e.safeExtend=r=>vce(e,r),e.merge=r=>bce(e,r),e.pick=r=>mce(e,r),e.omit=r=>gce(e,r),e.partial=(...r)=>xce(MF,e,r[0]),e.required=(...r)=>wce(zF,e,r[0])});function a4(e,t){const r={type:"object",get shape(){return El(this,"shape",e?dce(e):{}),this.shape},...qe(t)};return new Zhe(r)}const Ghe=oe("ZodUnion",(e,t)=>{Yue.init(e,t),Lr.init(e,t),e.options=t.options});function Yhe(e,t){return new Ghe({type:"union",options:e,...qe(t)})}const Jhe=oe("ZodIntersection",(e,t)=>{Jue.init(e,t),Lr.init(e,t)});function Xhe(e,t){return new Jhe({type:"intersection",left:e,right:t})}const pk=oe("ZodEnum",(e,t)=>{Xue.init(e,t),Lr.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new pk({...t,checks:[],...qe(s),entries:i})},e.exclude=(n,s)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new pk({...t,checks:[],...qe(s),entries:i})}});function mk(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new pk({type:"enum",entries:r,...qe(t)})}const Qhe=oe("ZodTransform",(e,t)=>{Que.init(e,t),Lr.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new wF(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Ip(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),r.issues.push(Ip(o))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(i=>(r.value=i,r)):(r.value=s,r)}});function efe(e){return new Qhe({type:"transform",transform:e})}const MF=oe("ZodOptional",(e,t)=>{ede.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function l4(e){return new MF({type:"optional",innerType:e})}const tfe=oe("ZodNullable",(e,t)=>{tde.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function c4(e){return new tfe({type:"nullable",innerType:e})}const rfe=oe("ZodDefault",(e,t)=>{rde.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function nfe(e,t){return new rfe({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():kF(t)}})}const sfe=oe("ZodPrefault",(e,t)=>{nde.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ife(e,t){return new sfe({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():kF(t)}})}const zF=oe("ZodNonOptional",(e,t)=>{sde.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ofe(e,t){return new zF({type:"nonoptional",innerType:e,...qe(t)})}const afe=oe("ZodCatch",(e,t)=>{ide.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function lfe(e,t){return new afe({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const cfe=oe("ZodPipe",(e,t)=>{ode.init(e,t),Lr.init(e,t),e.in=t.in,e.out=t.out});function u4(e,t){return new cfe({type:"pipe",in:e,out:t})}const ufe=oe("ZodReadonly",(e,t)=>{ade.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function dfe(e){return new ufe({type:"readonly",innerType:e})}const hfe=oe("ZodCustom",(e,t)=>{lde.init(e,t),Lr.init(e,t)});function ffe(e,t={}){return Jde(hfe,e,t)}function pfe(e){return Xde(e)}const fi=v.forwardRef(({className:e,type:t,...r},n)=>d.jsx("input",{type:t,className:Je("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));fi.displayName="Input";var mfe="Label",FF=v.forwardRef((e,t)=>d.jsx(Vr.label,{...e,ref:t,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));FF.displayName=mfe;var $F=FF;const gfe=Xb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),js=v.forwardRef(({className:e,...t},r)=>d.jsx($F,{ref:r,className:Je(gfe(),e),...t}));js.displayName=$F.displayName;const JE=v.forwardRef(({className:e,...t},r)=>d.jsx("textarea",{className:Je("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));JE.displayName="Textarea";function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wt.apply(null,arguments)}function d4(e,[t,r]){return Math.min(r,Math.max(t,e))}function kn(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function XE(e,t=[]){let r=[];function n(i,o){const a=v.createContext(o),l=r.length;r=[...r,o];function c(h){const{scope:f,children:p,...y}=h,m=(f==null?void 0:f[e][l])||a,b=v.useMemo(()=>y,Object.values(y));return v.createElement(m.Provider,{value:b},p)}function u(h,f){const p=(f==null?void 0:f[e][l])||a,y=v.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=r.map(o=>v.createContext(o));return function(o){const a=(o==null?void 0:o[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return s.scopeName=e,[n,yfe(s,...t)]}function yfe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const i=n.reduce((o,{useScope:a,scopeName:l})=>{const c=a(s)[`__scope${l}`];return{...o,...c}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function vfe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function UF(...e){return t=>e.forEach(r=>vfe(r,t))}function Kn(...e){return v.useCallback(UF(...e),e)}const Dp=v.forwardRef((e,t)=>{const{children:r,...n}=e,s=v.Children.toArray(r),i=s.find(xfe);if(i){const o=i.props.children,a=s.map(l=>l===i?v.Children.count(o)>1?v.Children.only(null):v.isValidElement(o)?o.props.children:null:l);return v.createElement(gk,wt({},n,{ref:t}),v.isValidElement(o)?v.cloneElement(o,void 0,a):null)}return v.createElement(gk,wt({},n,{ref:t}),r)});Dp.displayName="Slot";const gk=v.forwardRef((e,t)=>{const{children:r,...n}=e;return v.isValidElement(r)?v.cloneElement(r,{...wfe(n,r.props),ref:t?UF(t,r.ref):r.ref}):v.Children.count(r)>1?v.Children.only(null):null});gk.displayName="SlotClone";const bfe=({children:e})=>v.createElement(v.Fragment,null,e);function xfe(e){return v.isValidElement(e)&&e.type===bfe}function wfe(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...o)=>{i(...o),s(...o)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function _fe(e){const t=e+"CollectionProvider",[r,n]=XE(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:m}=p,b=de.useRef(null),x=de.useRef(new Map).current;return de.createElement(s,{scope:y,itemMap:x,collectionRef:b},m)},a=e+"CollectionSlot",l=de.forwardRef((p,y)=>{const{scope:m,children:b}=p,x=i(a,m),w=Kn(y,x.collectionRef);return de.createElement(Dp,{ref:w},b)}),c=e+"CollectionItemSlot",u="data-radix-collection-item",h=de.forwardRef((p,y)=>{const{scope:m,children:b,...x}=p,w=de.useRef(null),_=Kn(y,w),j=i(c,m);return de.useEffect(()=>(j.itemMap.set(w,{ref:w,...x}),()=>void j.itemMap.delete(w))),de.createElement(Dp,{[u]:"",ref:_},b)});function f(p){const y=i(e+"CollectionConsumer",p);return de.useCallback(()=>{const m=y.collectionRef.current;if(!m)return[];const b=Array.from(m.querySelectorAll(`[${u}]`));return Array.from(y.itemMap.values()).sort((x,w)=>b.indexOf(x.ref.current)-b.indexOf(w.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},f,n]}const jfe=v.createContext(void 0);function kfe(e){const t=v.useContext(jfe);return e||t||"ltr"}const Nfe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],mn=Nfe.reduce((e,t)=>{const r=v.forwardRef((n,s)=>{const{asChild:i,...o}=n,a=i?Dp:t;return v.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),v.createElement(a,wt({},o,{ref:s}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Sfe(e,t){e&&ro.flushSync(()=>e.dispatchEvent(t))}function Yo(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function Efe(e,t=globalThis==null?void 0:globalThis.document){const r=Yo(e);v.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[r,t])}const yk="dismissableLayer.update",Cfe="dismissableLayer.pointerDownOutside",Tfe="dismissableLayer.focusOutside";let h4;const Afe=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ofe=v.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=v.useContext(Afe),[h,f]=v.useState(null),p=(r=h==null?void 0:h.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,y]=v.useState({}),m=Kn(t,E=>f(E)),b=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(x),_=h?b.indexOf(h):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,k=_>=w,S=Pfe(E=>{const T=E.target,R=[...u.branches].some(O=>O.contains(T));!k||R||(i==null||i(E),a==null||a(E),E.defaultPrevented||l==null||l())},p),C=Rfe(E=>{const T=E.target;[...u.branches].some(R=>R.contains(T))||(o==null||o(E),a==null||a(E),E.defaultPrevented||l==null||l())},p);return Efe(E=>{_===u.layers.size-1&&(s==null||s(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),v.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(h4=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),f4(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=h4)}},[h,p,n,u]),v.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),f4())},[h,u]),v.useEffect(()=>{const E=()=>y({});return document.addEventListener(yk,E),()=>document.removeEventListener(yk,E)},[]),v.createElement(mn.div,wt({},c,{ref:m,style:{pointerEvents:j?k?"auto":"none":void 0,...e.style},onFocusCapture:kn(e.onFocusCapture,C.onFocusCapture),onBlurCapture:kn(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:kn(e.onPointerDownCapture,S.onPointerDownCapture)}))});function Pfe(e,t=globalThis==null?void 0:globalThis.document){const r=Yo(e),n=v.useRef(!1),s=v.useRef(()=>{});return v.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){qF(Cfe,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Rfe(e,t=globalThis==null?void 0:globalThis.document){const r=Yo(e),n=v.useRef(!1);return v.useEffect(()=>{const s=i=>{i.target&&!n.current&&qF(Tfe,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function f4(){const e=new CustomEvent(yk);document.dispatchEvent(e)}function qF(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Sfe(s,i):s.dispatchEvent(i)}let K0=0;function Ife(){v.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:p4()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:p4()),K0++,()=>{K0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),K0--}},[])}function p4(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const Z0="focusScope.autoFocusOnMount",G0="focusScope.autoFocusOnUnmount",m4={bubbles:!1,cancelable:!0},Dfe=v.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[a,l]=v.useState(null),c=Yo(s),u=Yo(i),h=v.useRef(null),f=Kn(t,m=>l(m)),p=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(n){let m=function(_){if(p.paused||!a)return;const j=_.target;a.contains(j)?h.current=j:za(h.current,{select:!0})},b=function(_){if(p.paused||!a)return;const j=_.relatedTarget;j!==null&&(a.contains(j)||za(h.current,{select:!0}))},x=function(_){const j=document.activeElement;for(const k of _)k.removedNodes.length>0&&(a!=null&&a.contains(j)||za(a))};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),w.disconnect()}}},[n,a,p.paused]),v.useEffect(()=>{if(a){y4.add(p);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(Z0,m4);a.addEventListener(Z0,c),a.dispatchEvent(b),b.defaultPrevented||(Lfe(Ufe(BF(a)),{select:!0}),document.activeElement===m&&za(a))}return()=>{a.removeEventListener(Z0,c),setTimeout(()=>{const b=new CustomEvent(G0,m4);a.addEventListener(G0,u),a.dispatchEvent(b),b.defaultPrevented||za(m??document.body,{select:!0}),a.removeEventListener(G0,u),y4.remove(p)},0)}}},[a,c,u,p]);const y=v.useCallback(m=>{if(!r&&!n||p.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(b&&x){const w=m.currentTarget,[_,j]=Mfe(w);_&&j?!m.shiftKey&&x===j?(m.preventDefault(),r&&za(_,{select:!0})):m.shiftKey&&x===_&&(m.preventDefault(),r&&za(j,{select:!0})):x===w&&m.preventDefault()}},[r,n,p.paused]);return v.createElement(mn.div,wt({tabIndex:-1},o,{ref:f,onKeyDown:y}))});function Lfe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(za(n,{select:t}),document.activeElement!==r)return}function Mfe(e){const t=BF(e),r=g4(t,e),n=g4(t.reverse(),e);return[r,n]}function BF(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function g4(e,t){for(const r of e)if(!zfe(r,{upTo:t}))return r}function zfe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ffe(e){return e instanceof HTMLInputElement&&"select"in e}function za(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Ffe(e)&&t&&e.select()}}const y4=$fe();function $fe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=v4(e,t),e.unshift(t)},remove(t){var r;e=v4(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function v4(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Ufe(e){return e.filter(t=>t.tagName!=="A")}const Jo=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},qfe=v.useId||(()=>{});let Bfe=0;function VF(e){const[t,r]=v.useState(qfe());return Jo(()=>{r(n=>n??String(Bfe++))},[e]),t?`radix-${t}`:""}const Vfe=["top","right","bottom","left"],ml=Math.min,es=Math.max,wv=Math.round,Wg=Math.floor,Zi=e=>({x:e,y:e}),Wfe={left:"right",right:"left",bottom:"top",top:"bottom"},Hfe={start:"end",end:"start"};function vk(e,t,r){return es(e,ml(t,r))}function Xo(e,t){return typeof e=="function"?e(t):e}function Qo(e){return e.split("-")[0]}function Ph(e){return e.split("-")[1]}function QE(e){return e==="x"?"y":"x"}function e2(e){return e==="y"?"height":"width"}const Kfe=new Set(["top","bottom"]);function Wi(e){return Kfe.has(Qo(e))?"y":"x"}function t2(e){return QE(Wi(e))}function Zfe(e,t,r){r===void 0&&(r=!1);const n=Ph(e),s=t2(e),i=e2(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=_v(o)),[o,_v(o)]}function Gfe(e){const t=_v(e);return[bk(e),t,bk(t)]}function bk(e){return e.replace(/start|end/g,t=>Hfe[t])}const b4=["left","right"],x4=["right","left"],Yfe=["top","bottom"],Jfe=["bottom","top"];function Xfe(e,t,r){switch(e){case"top":case"bottom":return r?t?x4:b4:t?b4:x4;case"left":case"right":return t?Yfe:Jfe;default:return[]}}function Qfe(e,t,r,n){const s=Ph(e);let i=Xfe(Qo(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(bk)))),i}function _v(e){return e.replace(/left|right|bottom|top/g,t=>Wfe[t])}function epe(e){return{top:0,right:0,bottom:0,left:0,...e}}function WF(e){return typeof e!="number"?epe(e):{top:e,right:e,bottom:e,left:e}}function jv(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function w4(e,t,r){let{reference:n,floating:s}=e;const i=Wi(t),o=t2(t),a=e2(o),l=Qo(t),c=i==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:n.y-s.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(Ph(t)){case"start":p[o]-=f*(r&&c?-1:1);break;case"end":p[o]+=f*(r&&c?-1:1);break}return p}const tpe=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=w4(c,n,l),f=n,p={},y=0;for(let m=0;m<a.length;m++){const{name:b,fn:x}=a[m],{x:w,y:_,data:j,reset:k}=await x({x:u,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});u=w??u,h=_??h,p={...p,[b]:{...p[b],...j}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:u,y:h}=w4(c,f,l)),m=-1)}return{x:u,y:h,placement:f,strategy:s,middlewareData:p}};async function Lp(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Xo(t,e),y=WF(p),m=a[f?h==="floating"?"reference":"floating":h],b=jv(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(m)))==null||r?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=jv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(b.top-j.top+y.top)/_.y,bottom:(j.bottom-b.bottom+y.bottom)/_.y,left:(b.left-j.left+y.left)/_.x,right:(j.right-b.right+y.right)/_.x}}const rpe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Xo(e,t)||{};if(c==null)return{};const h=WF(u),f={x:r,y:n},p=t2(s),y=e2(p),m=await o.getDimensions(c),b=p==="y",x=b?"top":"left",w=b?"bottom":"right",_=b?"clientHeight":"clientWidth",j=i.reference[y]+i.reference[p]-f[p]-i.floating[y],k=f[p]-i.reference[p],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=S?S[_]:0;(!C||!await(o.isElement==null?void 0:o.isElement(S)))&&(C=a.floating[_]||i.floating[y]);const E=j/2-k/2,T=C/2-m[y]/2-1,R=ml(h[x],T),O=ml(h[w],T),I=R,P=C-m[y]-O,D=C/2-m[y]/2+E,L=vk(I,D,P),B=!l.arrow&&Ph(s)!=null&&D!==L&&i.reference[y]/2-(D<I?R:O)-m[y]/2<0,q=B?D<I?D-I:D-P:0;return{[p]:f[p]+q,data:{[p]:L,centerOffset:D-L-q,...B&&{alignmentOffset:q}},reset:B}}}),npe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...b}=Xo(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=Qo(s),w=Wi(a),_=Qo(a)===a,j=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(_||!m?[_v(a)]:Gfe(a)),S=y!=="none";!f&&S&&k.push(...Qfe(a,m,y,j));const C=[a,...k],E=await Lp(t,b),T=[];let R=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&T.push(E[x]),h){const D=Zfe(s,o,j);T.push(E[D[0]],E[D[1]])}if(R=[...R,{placement:s,overflows:T}],!T.every(D=>D<=0)){var O,I;const D=(((O=i.flip)==null?void 0:O.index)||0)+1,L=C[D];if(L&&(!(h==="alignment"&&w!==Wi(L))||R.every(q=>Wi(q.placement)===w?q.overflows[0]>0:!0)))return{data:{index:D,overflows:R},reset:{placement:L}};let B=(I=R.filter(q=>q.overflows[0]<=0).sort((q,K)=>q.overflows[1]-K.overflows[1])[0])==null?void 0:I.placement;if(!B)switch(p){case"bestFit":{var P;const q=(P=R.filter(K=>{if(S){const H=Wi(K.placement);return H===w||H==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(H=>H>0).reduce((H,$)=>H+$,0)]).sort((K,H)=>K[1]-H[1])[0])==null?void 0:P[0];q&&(B=q);break}case"initialPlacement":B=a;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function _4(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function j4(e){return Vfe.some(t=>e[t]>=0)}const spe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Xo(e,t);switch(n){case"referenceHidden":{const i=await Lp(t,{...s,elementContext:"reference"}),o=_4(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:j4(o)}}}case"escaped":{const i=await Lp(t,{...s,altBoundary:!0}),o=_4(i,r.floating);return{data:{escapedOffsets:o,escaped:j4(o)}}}default:return{}}}}},HF=new Set(["left","top"]);async function ipe(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Qo(r),a=Ph(r),l=Wi(r)==="y",c=HF.has(o)?-1:1,u=i&&l?-1:1,h=Xo(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof y=="number"&&(p=a==="end"?y*-1:y),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const ope=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:a}=t,l=await ipe(t,e);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},ape=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x,y:w}=b;return{x,y:w}}},...l}=Xo(e,t),c={x:r,y:n},u=await Lp(t,l),h=Wi(Qo(s)),f=QE(h);let p=c[f],y=c[h];if(i){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=p+u[b],_=p-u[x];p=vk(w,p,_)}if(o){const b=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=y+u[b],_=y-u[x];y=vk(w,y,_)}const m=a.fn({...t,[f]:p,[h]:y});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[f]:i,[h]:o}}}}}},lpe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Xo(e,t),u={x:r,y:n},h=Wi(s),f=QE(h);let p=u[f],y=u[h];const m=Xo(a,t),b=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const _=f==="y"?"height":"width",j=i.reference[f]-i.floating[_]+b.mainAxis,k=i.reference[f]+i.reference[_]-b.mainAxis;p<j?p=j:p>k&&(p=k)}if(c){var x,w;const _=f==="y"?"width":"height",j=HF.has(Qo(s)),k=i.reference[h]-i.floating[_]+(j&&((x=o.offset)==null?void 0:x[h])||0)+(j?0:b.crossAxis),S=i.reference[h]+i.reference[_]+(j?0:((w=o.offset)==null?void 0:w[h])||0)-(j?b.crossAxis:0);y<k?y=k:y>S&&(y=S)}return{[f]:p,[h]:y}}}},cpe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:o,elements:a}=t,{apply:l=()=>{},...c}=Xo(e,t),u=await Lp(t,c),h=Qo(s),f=Ph(s),p=Wi(s)==="y",{width:y,height:m}=i.floating;let b,x;h==="top"||h==="bottom"?(b=h,x=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=h,b=f==="end"?"top":"bottom");const w=m-u.top-u.bottom,_=y-u.left-u.right,j=ml(m-u[b],w),k=ml(y-u[x],_),S=!t.middlewareData.shift;let C=j,E=k;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(E=_),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(C=w),S&&!f){const R=es(u.left,0),O=es(u.right,0),I=es(u.top,0),P=es(u.bottom,0);p?E=y-2*(R!==0||O!==0?R+O:es(u.left,u.right)):C=m-2*(I!==0||P!==0?I+P:es(u.top,u.bottom))}await l({...t,availableWidth:E,availableHeight:C});const T=await o.getDimensions(a.floating);return y!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function yx(){return typeof window<"u"}function Rh(e){return KF(e)?(e.nodeName||"").toLowerCase():"#document"}function is(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fo(e){var t;return(t=(KF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function KF(e){return yx()?e instanceof Node||e instanceof is(e).Node:!1}function vi(e){return yx()?e instanceof Element||e instanceof is(e).Element:!1}function no(e){return yx()?e instanceof HTMLElement||e instanceof is(e).HTMLElement:!1}function k4(e){return!yx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof is(e).ShadowRoot}const upe=new Set(["inline","contents"]);function Am(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=bi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!upe.has(s)}const dpe=new Set(["table","td","th"]);function hpe(e){return dpe.has(Rh(e))}const fpe=[":popover-open",":modal"];function vx(e){return fpe.some(t=>{try{return e.matches(t)}catch{return!1}})}const ppe=["transform","translate","scale","rotate","perspective"],mpe=["transform","translate","scale","rotate","perspective","filter"],gpe=["paint","layout","strict","content"];function r2(e){const t=n2(),r=vi(e)?bi(e):e;return ppe.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||mpe.some(n=>(r.willChange||"").includes(n))||gpe.some(n=>(r.contain||"").includes(n))}function ype(e){let t=gl(e);for(;no(t)&&!Xd(t);){if(r2(t))return t;if(vx(t))return null;t=gl(t)}return null}function n2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vpe=new Set(["html","body","#document"]);function Xd(e){return vpe.has(Rh(e))}function bi(e){return is(e).getComputedStyle(e)}function bx(e){return vi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function gl(e){if(Rh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||k4(e)&&e.host||fo(e);return k4(t)?t.host:t}function ZF(e){const t=gl(e);return Xd(t)?e.ownerDocument?e.ownerDocument.body:e.body:no(t)&&Am(t)?t:ZF(t)}function Mp(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=ZF(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=is(s);if(i){const a=xk(o);return t.concat(o,o.visualViewport||[],Am(s)?s:[],a&&r?Mp(a):[])}return t.concat(s,Mp(s,[],r))}function xk(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function GF(e){const t=bi(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=no(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,a=wv(r)!==i||wv(n)!==o;return a&&(r=i,n=o),{width:r,height:n,$:a}}function s2(e){return vi(e)?e:e.contextElement}function wd(e){const t=s2(e);if(!no(t))return Zi(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=GF(t);let o=(i?wv(r.width):r.width)/n,a=(i?wv(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const bpe=Zi(0);function YF(e){const t=is(e);return!n2()||!t.visualViewport?bpe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function xpe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==is(e)?!1:t}function Wc(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=s2(e);let o=Zi(1);t&&(n?vi(n)&&(o=wd(n)):o=wd(e));const a=xpe(i,r,n)?YF(i):Zi(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const f=is(i),p=n&&vi(n)?is(n):n;let y=f,m=xk(y);for(;m&&n&&p!==y;){const b=wd(m),x=m.getBoundingClientRect(),w=bi(m),_=x.left+(m.clientLeft+parseFloat(w.paddingLeft))*b.x,j=x.top+(m.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,h*=b.y,l+=_,c+=j,y=is(m),m=xk(y)}}return jv({width:u,height:h,x:l,y:c})}function xx(e,t){const r=bx(e).scrollLeft;return t?t.left+r:Wc(fo(e)).left+r}function JF(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-xx(e,r),s=r.top+t.scrollTop;return{x:n,y:s}}function wpe(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=fo(n),a=t?vx(t.floating):!1;if(n===o||a&&i)return r;let l={scrollLeft:0,scrollTop:0},c=Zi(1);const u=Zi(0),h=no(n);if((h||!h&&!i)&&((Rh(n)!=="body"||Am(o))&&(l=bx(n)),no(n))){const p=Wc(n);c=wd(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const f=o&&!h&&!i?JF(o,l):Zi(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:r.y*c.y-l.scrollTop*c.y+u.y+f.y}}function _pe(e){return Array.from(e.getClientRects())}function jpe(e){const t=fo(e),r=bx(e),n=e.ownerDocument.body,s=es(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=es(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+xx(e);const a=-r.scrollTop;return bi(n).direction==="rtl"&&(o+=es(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}const N4=25;function kpe(e,t){const r=is(e),n=fo(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=n2();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=xx(n);if(c<=0){const u=n.ownerDocument,h=u.body,f=getComputedStyle(h),p=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,y=Math.abs(n.clientWidth-h.clientWidth-p);y<=N4&&(i-=y)}else c<=N4&&(i+=c);return{width:i,height:o,x:a,y:l}}const Npe=new Set(["absolute","fixed"]);function Spe(e,t){const r=Wc(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=no(e)?wd(e):Zi(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,l=s*i.x,c=n*i.y;return{width:o,height:a,x:l,y:c}}function S4(e,t,r){let n;if(t==="viewport")n=kpe(e,r);else if(t==="document")n=jpe(fo(e));else if(vi(t))n=Spe(t,r);else{const s=YF(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return jv(n)}function XF(e,t){const r=gl(e);return r===t||!vi(r)||Xd(r)?!1:bi(r).position==="fixed"||XF(r,t)}function Epe(e,t){const r=t.get(e);if(r)return r;let n=Mp(e,[],!1).filter(a=>vi(a)&&Rh(a)!=="body"),s=null;const i=bi(e).position==="fixed";let o=i?gl(e):e;for(;vi(o)&&!Xd(o);){const a=bi(o),l=r2(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&s&&Npe.has(s.position)||Am(o)&&!l&&XF(e,o))?n=n.filter(c=>c!==o):s=a,o=gl(o)}return t.set(e,n),n}function Cpe(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?vx(t)?[]:Epe(t,this._c):[].concat(r),n],o=i[0],a=i.reduce((l,c)=>{const u=S4(t,c,s);return l.top=es(u.top,l.top),l.right=ml(u.right,l.right),l.bottom=ml(u.bottom,l.bottom),l.left=es(u.left,l.left),l},S4(t,o,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Tpe(e){const{width:t,height:r}=GF(e);return{width:t,height:r}}function Ape(e,t,r){const n=no(t),s=fo(t),i=r==="fixed",o=Wc(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=Zi(0);function c(){l.x=xx(s)}if(n||!n&&!i)if((Rh(t)!=="body"||Am(s))&&(a=bx(t)),n){const p=Wc(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else s&&c();i&&!n&&s&&c();const u=s&&!n&&!i?JF(s,a):Zi(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function Y0(e){return bi(e).position==="static"}function E4(e,t){if(!no(e)||bi(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return fo(e)===r&&(r=r.ownerDocument.body),r}function QF(e,t){const r=is(e);if(vx(e))return r;if(!no(e)){let s=gl(e);for(;s&&!Xd(s);){if(vi(s)&&!Y0(s))return s;s=gl(s)}return r}let n=E4(e,t);for(;n&&hpe(n)&&Y0(n);)n=E4(n,t);return n&&Xd(n)&&Y0(n)&&!r2(n)?r:n||ype(e)||r}const Ope=async function(e){const t=this.getOffsetParent||QF,r=this.getDimensions,n=await r(e.floating);return{reference:Ape(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Ppe(e){return bi(e).direction==="rtl"}const Rpe={convertOffsetParentRelativeRectToViewportRelativeRect:wpe,getDocumentElement:fo,getClippingRect:Cpe,getOffsetParent:QF,getElementRects:Ope,getClientRects:_pe,getDimensions:Tpe,getScale:wd,isElement:vi,isRTL:Ppe};function e$(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ipe(e,t){let r=null,n;const s=fo(e);function i(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=c;if(a||t(),!f||!p)return;const y=Wg(h),m=Wg(s.clientWidth-(u+f)),b=Wg(s.clientHeight-(h+p)),x=Wg(u),w={rootMargin:-y+"px "+-m+"px "+-b+"px "+-x+"px",threshold:es(0,ml(1,l))||1};let _=!0;function j(k){const S=k[0].intersectionRatio;if(S!==l){if(!_)return o();S?o(!1,S):n=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!e$(c,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function Dpe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=s2(e),u=s||i?[...c?Mp(c):[],...Mp(t)]:[];u.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const h=c&&a?Ipe(c,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(x=>{let[w]=x;w&&w.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let y,m=l?Wc(e):null;l&&b();function b(){const x=Wc(e);m&&!e$(m,x)&&r(),m=x,y=requestAnimationFrame(b)}return r(),()=>{var x;u.forEach(w=>{s&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),h==null||h(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const Lpe=ope,Mpe=ape,zpe=npe,Fpe=cpe,$pe=spe,C4=rpe,Upe=lpe,qpe=(e,t,r)=>{const n=new Map,s={platform:Rpe,...r},i={...s.platform,_c:n};return tpe(e,t,{...s,platform:i})};var Bpe=typeof document<"u",Vpe=function(){},Ry=Bpe?v.useLayoutEffect:Vpe;function kv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!kv(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!kv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function t$(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function T4(e,t){const r=t$(e);return Math.round(t*r)/r}function J0(e){const t=v.useRef(e);return Ry(()=>{t.current=e}),t}function Wpe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,h]=v.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=v.useState(n);kv(f,n)||p(n);const[y,m]=v.useState(null),[b,x]=v.useState(null),w=v.useCallback(K=>{K!==S.current&&(S.current=K,m(K))},[]),_=v.useCallback(K=>{K!==C.current&&(C.current=K,x(K))},[]),j=i||y,k=o||b,S=v.useRef(null),C=v.useRef(null),E=v.useRef(u),T=l!=null,R=J0(l),O=J0(s),I=J0(c),P=v.useCallback(()=>{if(!S.current||!C.current)return;const K={placement:t,strategy:r,middleware:f};O.current&&(K.platform=O.current),qpe(S.current,C.current,K).then(H=>{const $={...H,isPositioned:I.current!==!1};D.current&&!kv(E.current,$)&&(E.current=$,ro.flushSync(()=>{h($)}))})},[f,t,r,O,I]);Ry(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[c]);const D=v.useRef(!1);Ry(()=>(D.current=!0,()=>{D.current=!1}),[]),Ry(()=>{if(j&&(S.current=j),k&&(C.current=k),j&&k){if(R.current)return R.current(j,k,P);P()}},[j,k,P,R,T]);const L=v.useMemo(()=>({reference:S,floating:C,setReference:w,setFloating:_}),[w,_]),B=v.useMemo(()=>({reference:j,floating:k}),[j,k]),q=v.useMemo(()=>{const K={position:r,left:0,top:0};if(!B.floating)return K;const H=T4(B.floating,u.x),$=T4(B.floating,u.y);return a?{...K,transform:"translate("+H+"px, "+$+"px)",...t$(B.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:$}},[r,a,B.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:P,refs:L,elements:B,floatingStyles:q}),[u,P,L,B,q])}const Hpe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?C4({element:n.current,padding:s}).fn(r):{}:n?C4({element:n,padding:s}).fn(r):{}}}},Kpe=(e,t)=>({...Lpe(e),options:[e,t]}),Zpe=(e,t)=>({...Mpe(e),options:[e,t]}),Gpe=(e,t)=>({...Upe(e),options:[e,t]}),Ype=(e,t)=>({...zpe(e),options:[e,t]}),Jpe=(e,t)=>({...Fpe(e),options:[e,t]}),Xpe=(e,t)=>({...$pe(e),options:[e,t]}),Qpe=(e,t)=>({...Hpe(e),options:[e,t]});function eme(e){const[t,r]=v.useState(void 0);return Jo(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;r({width:o,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}const r$="Popper",[n$,s$]=XE(r$),[tme,i$]=n$(r$),rme=e=>{const{__scopePopper:t,children:r}=e,[n,s]=v.useState(null);return v.createElement(tme,{scope:t,anchor:n,onAnchorChange:s},r)},nme="PopperAnchor",sme=v.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=i$(nme,r),o=v.useRef(null),a=Kn(t,o);return v.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:v.createElement(mn.div,wt({},s,{ref:a}))}),o$="PopperContent",[ime,Mqe]=n$(o$),ome=v.forwardRef((e,t)=>{var r,n,s,i,o,a,l,c;const{__scopePopper:u,side:h="bottom",sideOffset:f=0,align:p="center",alignOffset:y=0,arrowPadding:m=0,collisionBoundary:b=[],collisionPadding:x=0,sticky:w="partial",hideWhenDetached:_=!1,avoidCollisions:j=!0,onPlaced:k,...S}=e,C=i$(o$,u),[E,T]=v.useState(null),R=Kn(t,Re=>T(Re)),[O,I]=v.useState(null),P=eme(O),D=(r=P==null?void 0:P.width)!==null&&r!==void 0?r:0,L=(n=P==null?void 0:P.height)!==null&&n!==void 0?n:0,B=h+(p!=="center"?"-"+p:""),q=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},K=Array.isArray(b)?b:[b],H=K.length>0,$={padding:q,boundary:K.filter(ame),altBoundary:H},{refs:J,floatingStyles:te,placement:be,isPositioned:Z,middlewareData:G}=Wpe({strategy:"fixed",placement:B,whileElementsMounted:Dpe,elements:{reference:C.anchor},middleware:[Kpe({mainAxis:f+L,alignmentAxis:y}),j&&Zpe({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?Gpe():void 0,...$}),j&&Ype({...$}),Jpe({...$,apply:({elements:Re,rects:Qe,availableWidth:Xe,availableHeight:pt})=>{const{width:Xt,height:M}=Qe.reference,V=Re.floating.style;V.setProperty("--radix-popper-available-width",`${Xe}px`),V.setProperty("--radix-popper-available-height",`${pt}px`),V.setProperty("--radix-popper-anchor-width",`${Xt}px`),V.setProperty("--radix-popper-anchor-height",`${M}px`)}}),O&&Qpe({element:O,padding:m}),lme({arrowWidth:D,arrowHeight:L}),_&&Xpe({strategy:"referenceHidden"})]}),[fe,pe]=a$(be),ke=Yo(k);Jo(()=>{Z&&(ke==null||ke())},[Z,ke]);const W=(s=G.arrow)===null||s===void 0?void 0:s.x,X=(i=G.arrow)===null||i===void 0?void 0:i.y,ae=((o=G.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[U,Se]=v.useState();return Jo(()=>{E&&Se(window.getComputedStyle(E).zIndex)},[E]),v.createElement("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:Z?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[(a=G.transformOrigin)===null||a===void 0?void 0:a.x,(l=G.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:e.dir},v.createElement(ime,{scope:u,placedSide:fe,onArrowChange:I,arrowX:W,arrowY:X,shouldHideArrow:ae},v.createElement(mn.div,wt({"data-side":fe,"data-align":pe},S,{ref:R,style:{...S.style,animation:Z?void 0:"none",opacity:(c=G.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function ame(e){return e!==null}const lme=e=>({name:"transformOrigin",options:e,fn(t){var r,n,s,i,o;const{placement:a,rects:l,middlewareData:c}=t,u=((r=c.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,h=u?0:e.arrowWidth,f=u?0:e.arrowHeight,[p,y]=a$(a),m={start:"0%",center:"50%",end:"100%"}[y],b=((n=(s=c.arrow)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0)+h/2,x=((i=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+f/2;let w="",_="";return p==="bottom"?(w=u?m:`${b}px`,_=`${-f}px`):p==="top"?(w=u?m:`${b}px`,_=`${l.floating.height+f}px`):p==="right"?(w=`${-f}px`,_=u?m:`${x}px`):p==="left"&&(w=`${l.floating.width+f}px`,_=u?m:`${x}px`),{data:{x:w,y:_}}}});function a$(e){const[t,r="center"]=e.split("-");return[t,r]}const cme=rme,ume=sme,dme=ome,hme=v.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...s}=e;return n?xM.createPortal(v.createElement(mn.div,wt({},s,{ref:t})),n):null});function A4({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=fme({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:n,a=Yo(r),l=v.useCallback(c=>{if(i){const u=typeof c=="function"?c(e):c;u!==e&&a(u)}else s(c)},[i,e,s,a]);return[o,l]}function fme({defaultProp:e,onChange:t}){const r=v.useState(e),[n]=r,s=v.useRef(n),i=Yo(t);return v.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}function pme(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const mme=v.forwardRef((e,t)=>v.createElement(mn.span,wt({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var l$=vz(),X0=function(){},wx=v.forwardRef(function(e,t){var r=v.useRef(null),n=v.useState({onScrollCapture:X0,onWheelCapture:X0,onTouchMoveCapture:X0}),s=n[0],i=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noIsolation,y=e.inert,m=e.allowPinchZoom,b=e.as,x=b===void 0?"div":b,w=yE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),_=f,j=yz([r,t]),k=cn(cn({},w),s);return v.createElement(v.Fragment,null,u&&v.createElement(_,{sideCar:l$,removeScrollBar:c,shards:h,noIsolation:p,inert:y,setCallbacks:i,allowPinchZoom:!!m,lockRef:r}),o?v.cloneElement(v.Children.only(a),cn(cn({},k),{ref:j})):v.createElement(x,cn({},k,{className:l,ref:j}),a))});wx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wx.classNames={fullWidth:ip,zeroRight:sp};var wk=!1;if(typeof window<"u")try{var Hg=Object.defineProperty({},"passive",{get:function(){return wk=!0,!0}});window.addEventListener("test",Hg,Hg),window.removeEventListener("test",Hg,Hg)}catch{wk=!1}var zu=wk?{passive:!1}:!1,gme=function(e){return e.tagName==="TEXTAREA"},c$=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!gme(e)&&r[t]==="visible")},yme=function(e){return c$(e,"overflowY")},vme=function(e){return c$(e,"overflowX")},O4=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=u$(e,r);if(n){var s=d$(e,r),i=s[1],o=s[2];if(i>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},bme=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},xme=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},u$=function(e,t){return e==="v"?yme(t):vme(t)},d$=function(e,t){return e==="v"?bme(t):xme(t)},wme=function(e,t){return e==="h"&&t==="rtl"?-1:1},_me=function(e,t,r,n,s){var i=wme(e,window.getComputedStyle(t).direction),o=i*n,a=r.target,l=t.contains(a),c=!1,u=o>0,h=0,f=0;do{var p=d$(e,a),y=p[0],m=p[1],b=p[2],x=m-b-i*y;(y||x)&&u$(e,a)&&(h+=x,f+=y),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&h===0||!u&&f===0)&&(c=!0),c},Kg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},P4=function(e){return[e.deltaX,e.deltaY]},R4=function(e){return e&&"current"in e?e.current:e},jme=function(e,t){return e[0]===t[0]&&e[1]===t[1]},kme=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Nme=0,Fu=[];function Sme(e){var t=v.useRef([]),r=v.useRef([0,0]),n=v.useRef(),s=v.useState(Nme++)[0],i=v.useState(function(){return vE()})[0],o=v.useRef(e);v.useEffect(function(){o.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=gz([e.lockRef.current],(e.shards||[]).map(R4)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=v.useCallback(function(m,b){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var x=Kg(m),w=r.current,_="deltaX"in m?m.deltaX:w[0]-x[0],j="deltaY"in m?m.deltaY:w[1]-x[1],k,S=m.target,C=Math.abs(_)>Math.abs(j)?"h":"v";if("touches"in m&&C==="h"&&S.type==="range")return!1;var E=O4(C,S);if(!E)return!0;if(E?k=C:(k=C==="v"?"h":"v",E=O4(C,S)),!E)return!1;if(!n.current&&"changedTouches"in m&&(_||j)&&(n.current=k),!k)return!0;var T=n.current||k;return _me(T,b,m,T==="h"?_:j)},[]),l=v.useCallback(function(m){var b=m;if(!(!Fu.length||Fu[Fu.length-1]!==i)){var x="deltaY"in b?P4(b):Kg(b),w=t.current.filter(function(k){return k.name===b.type&&k.target===b.target&&jme(k.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(R4).filter(Boolean).filter(function(k){return k.contains(b.target)}),j=_.length>0?a(b,_[0]):!o.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),c=v.useCallback(function(m,b,x,w){var _={name:m,delta:b,target:x,should:w};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(j){return j!==_})},1)},[]),u=v.useCallback(function(m){r.current=Kg(m),n.current=void 0},[]),h=v.useCallback(function(m){c(m.type,P4(m),m.target,a(m,e.lockRef.current))},[]),f=v.useCallback(function(m){c(m.type,Kg(m),m.target,a(m,e.lockRef.current))},[]);v.useEffect(function(){return Fu.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,zu),document.addEventListener("touchmove",l,zu),document.addEventListener("touchstart",u,zu),function(){Fu=Fu.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,zu),document.removeEventListener("touchmove",l,zu),document.removeEventListener("touchstart",u,zu)}},[]);var p=e.removeScrollBar,y=e.inert;return v.createElement(v.Fragment,null,y?v.createElement(i,{styles:kme(s)}):null,p?v.createElement(_z,{gapMode:"margin"}):null)}const Eme=xz(l$,Sme);var h$=v.forwardRef(function(e,t){return v.createElement(wx,cn({},e,{ref:t,sideCar:Eme}))});h$.classNames=wx.classNames;const Cme=[" ","Enter","ArrowUp","ArrowDown"],Tme=[" ","Enter"],_x="Select",[jx,i2,Ame]=_fe(_x),[Ih,zqe]=XE(_x,[Ame,s$]),o2=s$(),[Ome,lu]=Ih(_x),[Pme,Rme]=Ih(_x),Ime=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:f,required:p}=e,y=o2(t),[m,b]=v.useState(null),[x,w]=v.useState(null),[_,j]=v.useState(!1),k=kfe(c),[S=!1,C]=A4({prop:n,defaultProp:s,onChange:i}),[E,T]=A4({prop:o,defaultProp:a,onChange:l}),R=v.useRef(null),O=m?!!m.closest("form"):!0,[I,P]=v.useState(new Set),D=Array.from(I).map(L=>L.props.value).join(";");return v.createElement(cme,y,v.createElement(Ome,{required:p,scope:t,trigger:m,onTriggerChange:b,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:VF(),value:E,onValueChange:T,open:S,onOpenChange:C,dir:k,triggerPointerDownPosRef:R,disabled:f},v.createElement(jx.Provider,{scope:t},v.createElement(Pme,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(L=>{P(B=>new Set(B).add(L))},[]),onNativeOptionRemove:v.useCallback(L=>{P(B=>{const q=new Set(B);return q.delete(L),q})},[])},r)),O?v.createElement(m$,{key:D,"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:E,onChange:L=>T(L.target.value),disabled:f},E===void 0?v.createElement("option",{value:""}):null,Array.from(I)):null))},Dme="SelectTrigger",Lme=v.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=o2(r),o=lu(Dme,r),a=o.disabled||n,l=Kn(t,o.onTriggerChange),c=i2(r),[u,h,f]=g$(y=>{const m=c().filter(w=>!w.disabled),b=m.find(w=>w.value===o.value),x=y$(m,y,b);x!==void 0&&o.onValueChange(x.value)}),p=()=>{a||(o.onOpenChange(!0),f())};return v.createElement(ume,wt({asChild:!0},i),v.createElement(mn.button,wt({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},s,{ref:l,onClick:kn(s.onClick,y=>{y.currentTarget.focus()}),onPointerDown:kn(s.onPointerDown,y=>{const m=y.target;m.hasPointerCapture(y.pointerId)&&m.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&(p(),o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)},y.preventDefault())}),onKeyDown:kn(s.onKeyDown,y=>{const m=u.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&h(y.key),!(m&&y.key===" ")&&Cme.includes(y.key)&&(p(),y.preventDefault())})})))}),Mme="SelectValue",zme=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o,...a}=e,l=lu(Mme,r),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,h=Kn(t,l.onValueNodeChange);return Jo(()=>{c(u)},[c,u]),v.createElement(mn.span,wt({},a,{ref:h,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:i)}),Fme=v.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return v.createElement(mn.span,wt({"aria-hidden":!0},s,{ref:t}),n||"▼")}),$me=e=>v.createElement(hme,wt({asChild:!0},e)),Qd="SelectContent",Ume=v.forwardRef((e,t)=>{const r=lu(Qd,e.__scopeSelect),[n,s]=v.useState();if(Jo(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?ro.createPortal(v.createElement(f$,{scope:e.__scopeSelect},v.createElement(jx.Slot,{scope:e.__scopeSelect},v.createElement("div",null,e.children))),i):null}return v.createElement(qme,wt({},e,{ref:t}))}),Po=10,[f$,kx]=Ih(Qd),qme=v.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:b,...x}=e,w=lu(Qd,r),[_,j]=v.useState(null),[k,S]=v.useState(null),C=Kn(t,pe=>j(pe)),[E,T]=v.useState(null),[R,O]=v.useState(null),I=i2(r),[P,D]=v.useState(!1),L=v.useRef(!1);v.useEffect(()=>{if(_)return Cz(_)},[_]),Ife();const B=v.useCallback(pe=>{const[ke,...W]=I().map(U=>U.ref.current),[X]=W.slice(-1),ae=document.activeElement;for(const U of pe)if(U===ae||(U==null||U.scrollIntoView({block:"nearest"}),U===ke&&k&&(k.scrollTop=0),U===X&&k&&(k.scrollTop=k.scrollHeight),U==null||U.focus(),document.activeElement!==ae))return},[I,k]),q=v.useCallback(()=>B([E,_]),[B,E,_]);v.useEffect(()=>{P&&q()},[P,q]);const{onOpenChange:K,triggerPointerDownPosRef:H}=w;v.useEffect(()=>{if(_){let pe={x:0,y:0};const ke=X=>{var ae,U,Se,Re;pe={x:Math.abs(Math.round(X.pageX)-((ae=(U=H.current)===null||U===void 0?void 0:U.x)!==null&&ae!==void 0?ae:0)),y:Math.abs(Math.round(X.pageY)-((Se=(Re=H.current)===null||Re===void 0?void 0:Re.y)!==null&&Se!==void 0?Se:0))}},W=X=>{pe.x<=10&&pe.y<=10?X.preventDefault():_.contains(X.target)||K(!1),document.removeEventListener("pointermove",ke),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",ke),document.addEventListener("pointerup",W,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ke),document.removeEventListener("pointerup",W,{capture:!0})}}},[_,K,H]),v.useEffect(()=>{const pe=()=>K(!1);return window.addEventListener("blur",pe),window.addEventListener("resize",pe),()=>{window.removeEventListener("blur",pe),window.removeEventListener("resize",pe)}},[K]);const[$,J]=g$(pe=>{const ke=I().filter(ae=>!ae.disabled),W=ke.find(ae=>ae.ref.current===document.activeElement),X=y$(ke,pe,W);X&&setTimeout(()=>X.ref.current.focus())}),te=v.useCallback((pe,ke,W)=>{const X=!L.current&&!W;(w.value!==void 0&&w.value===ke||X)&&(T(pe),X&&(L.current=!0))},[w.value]),be=v.useCallback(()=>_==null?void 0:_.focus(),[_]),Z=v.useCallback((pe,ke,W)=>{const X=!L.current&&!W;(w.value!==void 0&&w.value===ke||X)&&O(pe)},[w.value]),G=n==="popper"?I4:Bme,fe=G===I4?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:b}:{};return v.createElement(f$,{scope:r,content:_,viewport:k,onViewportChange:S,itemRefCallback:te,selectedItem:E,onItemLeave:be,itemTextRefCallback:Z,focusSelectedItem:q,selectedItemText:R,position:n,isPositioned:P,searchRef:$},v.createElement(h$,{as:Dp,allowPinchZoom:!0},v.createElement(Dfe,{asChild:!0,trapped:w.open,onMountAutoFocus:pe=>{pe.preventDefault()},onUnmountAutoFocus:kn(s,pe=>{var ke;(ke=w.trigger)===null||ke===void 0||ke.focus({preventScroll:!0}),pe.preventDefault()})},v.createElement(Ofe,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:pe=>pe.preventDefault(),onDismiss:()=>w.onOpenChange(!1)},v.createElement(G,wt({role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:pe=>pe.preventDefault()},x,fe,{onPlaced:()=>D(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:kn(x.onKeyDown,pe=>{const ke=pe.ctrlKey||pe.altKey||pe.metaKey;if(pe.key==="Tab"&&pe.preventDefault(),!ke&&pe.key.length===1&&J(pe.key),["ArrowUp","ArrowDown","Home","End"].includes(pe.key)){let W=I().filter(X=>!X.disabled).map(X=>X.ref.current);if(["ArrowUp","End"].includes(pe.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(pe.key)){const X=pe.target,ae=W.indexOf(X);W=W.slice(ae+1)}setTimeout(()=>B(W)),pe.preventDefault()}})}))))))}),Bme=v.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=lu(Qd,r),o=kx(Qd,r),[a,l]=v.useState(null),[c,u]=v.useState(null),h=Kn(t,C=>u(C)),f=i2(r),p=v.useRef(!1),y=v.useRef(!0),{viewport:m,selectedItem:b,selectedItemText:x,focusSelectedItem:w}=o,_=v.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&m&&b&&x){const C=i.trigger.getBoundingClientRect(),E=c.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),R=x.getBoundingClientRect();if(i.dir!=="rtl"){const X=R.left-E.left,ae=T.left-X,U=C.left-ae,Se=C.width+U,Re=Math.max(Se,E.width),Qe=window.innerWidth-Po,Xe=d4(ae,[Po,Qe-Re]);a.style.minWidth=Se+"px",a.style.left=Xe+"px"}else{const X=E.right-R.right,ae=window.innerWidth-T.right-X,U=window.innerWidth-C.right-ae,Se=C.width+U,Re=Math.max(Se,E.width),Qe=window.innerWidth-Po,Xe=d4(ae,[Po,Qe-Re]);a.style.minWidth=Se+"px",a.style.right=Xe+"px"}const O=f(),I=window.innerHeight-Po*2,P=m.scrollHeight,D=window.getComputedStyle(c),L=parseInt(D.borderTopWidth,10),B=parseInt(D.paddingTop,10),q=parseInt(D.borderBottomWidth,10),K=parseInt(D.paddingBottom,10),H=L+B+P+K+q,$=Math.min(b.offsetHeight*5,H),J=window.getComputedStyle(m),te=parseInt(J.paddingTop,10),be=parseInt(J.paddingBottom,10),Z=C.top+C.height/2-Po,G=I-Z,fe=b.offsetHeight/2,pe=b.offsetTop+fe,ke=L+B+pe,W=H-ke;if(ke<=Z){const X=b===O[O.length-1].ref.current;a.style.bottom="0px";const ae=c.clientHeight-m.offsetTop-m.offsetHeight,U=Math.max(G,fe+(X?be:0)+ae+q),Se=ke+U;a.style.height=Se+"px"}else{const X=b===O[0].ref.current;a.style.top="0px";const ae=Math.max(Z,L+m.offsetTop+(X?te:0)+fe)+W;a.style.height=ae+"px",m.scrollTop=ke-Z+m.offsetTop}a.style.margin=`${Po}px 0`,a.style.minHeight=$+"px",a.style.maxHeight=I+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,c,m,b,x,i.dir,n]);Jo(()=>_(),[_]);const[j,k]=v.useState();Jo(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const S=v.useCallback(C=>{C&&y.current===!0&&(_(),w==null||w(),y.current=!1)},[_,w]);return v.createElement(Vme,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:S},v.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},v.createElement(mn.div,wt({},s,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),I4=v.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Po,...i}=e,o=o2(r);return v.createElement(dme,wt({},o,i,{ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Vme,Wme]=Ih(Qd,{}),D4="SelectViewport",Hme=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=kx(D4,r),i=Wme(D4,r),o=Kn(t,s.onViewportChange),a=v.useRef(0);return v.createElement(v.Fragment,null,v.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),v.createElement(jx.Slot,{scope:r},v.createElement(mn.div,wt({"data-radix-select-viewport":"",role:"presentation"},n,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:kn(n.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const p=window.innerHeight-Po*2,y=parseFloat(u.style.minHeight),m=parseFloat(u.style.height),b=Math.max(y,m);if(b<p){const x=b+f,w=Math.min(p,x),_=x-w;u.style.height=w+"px",u.style.bottom==="0px"&&(c.scrollTop=_>0?_:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),Kme="SelectGroup",[Fqe,Zme]=Ih(Kme),Gme="SelectLabel",Yme=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Zme(Gme,r);return v.createElement(mn.div,wt({id:s.id},n,{ref:t}))}),_k="SelectItem",[Jme,p$]=Ih(_k),Xme=v.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=e,a=lu(_k,r),l=kx(_k,r),c=a.value===n,[u,h]=v.useState(i??""),[f,p]=v.useState(!1),y=Kn(t,x=>{var w;return(w=l.itemRefCallback)===null||w===void 0?void 0:w.call(l,x,n,s)}),m=VF(),b=()=>{s||(a.onValueChange(n),a.onOpenChange(!1))};return v.createElement(Jme,{scope:r,value:n,disabled:s,textId:m,isSelected:c,onItemTextChange:v.useCallback(x=>{h(w=>{var _;return w||((_=x==null?void 0:x.textContent)!==null&&_!==void 0?_:"").trim()})},[])},v.createElement(jx.ItemSlot,{scope:r,value:n,disabled:s,textValue:u},v.createElement(mn.div,wt({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},o,{ref:y,onFocus:kn(o.onFocus,()=>p(!0)),onBlur:kn(o.onBlur,()=>p(!1)),onPointerUp:kn(o.onPointerUp,b),onPointerMove:kn(o.onPointerMove,x=>{if(s){var w;(w=l.onItemLeave)===null||w===void 0||w.call(l)}else x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:kn(o.onPointerLeave,x=>{if(x.currentTarget===document.activeElement){var w;(w=l.onItemLeave)===null||w===void 0||w.call(l)}}),onKeyDown:kn(o.onKeyDown,x=>{var w;((w=l.searchRef)===null||w===void 0?void 0:w.current)!==""&&x.key===" "||(Tme.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})}))))}),Zg="SelectItemText",Qme=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,o=lu(Zg,r),a=kx(Zg,r),l=p$(Zg,r),c=Rme(Zg,r),[u,h]=v.useState(null),f=Kn(t,x=>h(x),l.onItemTextChange,x=>{var w;return(w=a.itemTextRefCallback)===null||w===void 0?void 0:w.call(a,x,l.value,l.disabled)}),p=u==null?void 0:u.textContent,y=v.useMemo(()=>v.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},p),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:b}=c;return Jo(()=>(m(y),()=>b(y)),[m,b,y]),v.createElement(v.Fragment,null,v.createElement(mn.span,wt({id:l.textId},i,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ro.createPortal(i.children,o.valueNode):null)}),ege="SelectItemIndicator",tge=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return p$(ege,r).isSelected?v.createElement(mn.span,wt({"aria-hidden":!0},n,{ref:t})):null}),rge=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return v.createElement(mn.div,wt({"aria-hidden":!0},n,{ref:t}))}),m$=v.forwardRef((e,t)=>{const{value:r,...n}=e,s=v.useRef(null),i=Kn(t,s),o=pme(r);return v.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==r&&c){const u=new Event("change",{bubbles:!0});c.call(a,r),a.dispatchEvent(u)}},[o,r]),v.createElement(mme,{asChild:!0},v.createElement("select",wt({},n,{ref:i,defaultValue:r})))});m$.displayName="BubbleSelect";function g$(e){const t=Yo(e),r=v.useRef(""),n=v.useRef(0),s=v.useCallback(o=>{const a=r.current+o;t(a),function l(c){r.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(a)},[t]),i=v.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function y$(e,t,r){const n=t.length>1&&Array.from(t).every(a=>a===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let i=nge(e,Math.max(s,0));n.length===1&&(i=i.filter(a=>a!==r));const o=i.find(a=>a.textValue.toLowerCase().startsWith(n.toLowerCase()));return o!==r?o:void 0}function nge(e,t){return e.map((r,n)=>e[(t+n)%e.length])}const sge=Ime,v$=Lme,ige=zme,oge=Fme,age=$me,b$=Ume,lge=Hme,x$=Yme,w$=Xme,cge=Qme,uge=tge,_$=rge,a2="-",dge=e=>{const t=fge(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:s=>{const i=s.split(a2);return i[0]===""&&i.length!==1&&i.shift(),j$(i,t)||hge(s)},getConflictingClassGroupIds:(s,i)=>{const o=r[s]||[];return i&&n[s]?[...o,...n[s]]:o}}},j$=(e,t)=>{var r;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),i=s?j$(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(a2);return(r=t.validators.find(({validator:a})=>a(o)))==null?void 0:r.classGroupId},L4=/^\[(.+)\]$/,hge=e=>{if(L4.test(e)){const t=L4.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},fge=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return mge(Object.entries(e.classGroups),r).forEach(([s,i])=>{jk(i,n,s,t)}),n},jk=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:M4(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(pge(s)){jk(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{jk(o,M4(t,i),r,n)})})},M4=(e,t)=>{let r=e;return t.split(a2).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},pge=e=>e.isThemeGetter,mge=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[t+o,a])):i);return[r,s]}):e,gge=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},k$="!",yge=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,o=a=>{const l=[];let c=0,u=0,h;for(let b=0;b<a.length;b++){let x=a[b];if(c===0){if(x===s&&(n||a.slice(b,b+i)===t)){l.push(a.slice(u,b)),u=b+i;continue}if(x==="/"){h=b;continue}}x==="["?c++:x==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(k$),y=p?f.substring(1):f,m=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:m}};return r?a=>r({className:a,parseClassName:o}):o},vge=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},bge=e=>({cache:gge(e.cacheSize),parseClassName:yge(e),...dge(e)}),xge=/\s+/,wge=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split(xge);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=r(c);let y=!!p,m=n(y?f.substring(0,p):f);if(!m){if(!y){a=c+(a.length>0?" "+a:a);continue}if(m=n(f),!m){a=c+(a.length>0?" "+a:a);continue}y=!1}const b=vge(u).join(":"),x=h?b+k$:b,w=x+m;if(i.includes(w))continue;i.push(w);const _=s(m,y);for(let j=0;j<_.length;++j){const k=_[j];i.push(x+k)}a=c+(a.length>0?" "+a:a)}return a};function _ge(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=N$(t))&&(n&&(n+=" "),n+=r);return n}const N$=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=N$(e[n]))&&(r&&(r+=" "),r+=t);return r};function jge(e,...t){let r,n,s,i=o;function o(l){const c=t.reduce((u,h)=>h(u),e());return r=bge(c),n=r.cache.get,s=r.cache.set,i=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=wge(l,r);return s(l,u),u}return function(){return i(_ge.apply(null,arguments))}}const Tt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},S$=/^\[(?:([a-z-]+):)?(.+)\]$/i,kge=/^\d+\/\d+$/,Nge=new Set(["px","full","screen"]),Sge=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ege=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Cge=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Tge=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Age=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jo=e=>_d(e)||Nge.has(e)||kge.test(e),Ta=e=>Dh(e,"length",zge),_d=e=>!!e&&!Number.isNaN(Number(e)),Q0=e=>Dh(e,"number",_d),vf=e=>!!e&&Number.isInteger(Number(e)),Oge=e=>e.endsWith("%")&&_d(e.slice(0,-1)),Ge=e=>S$.test(e),Aa=e=>Sge.test(e),Pge=new Set(["length","size","percentage"]),Rge=e=>Dh(e,Pge,E$),Ige=e=>Dh(e,"position",E$),Dge=new Set(["image","url"]),Lge=e=>Dh(e,Dge,$ge),Mge=e=>Dh(e,"",Fge),bf=()=>!0,Dh=(e,t,r)=>{const n=S$.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},zge=e=>Ege.test(e)&&!Cge.test(e),E$=()=>!1,Fge=e=>Tge.test(e),$ge=e=>Age.test(e),Uge=()=>{const e=Tt("colors"),t=Tt("spacing"),r=Tt("blur"),n=Tt("brightness"),s=Tt("borderColor"),i=Tt("borderRadius"),o=Tt("borderSpacing"),a=Tt("borderWidth"),l=Tt("contrast"),c=Tt("grayscale"),u=Tt("hueRotate"),h=Tt("invert"),f=Tt("gap"),p=Tt("gradientColorStops"),y=Tt("gradientColorStopPositions"),m=Tt("inset"),b=Tt("margin"),x=Tt("opacity"),w=Tt("padding"),_=Tt("saturate"),j=Tt("scale"),k=Tt("sepia"),S=Tt("skew"),C=Tt("space"),E=Tt("translate"),T=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Ge,t],I=()=>[Ge,t],P=()=>["",jo,Ta],D=()=>["auto",_d,Ge],L=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Ge],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[_d,Ge];return{cacheSize:500,separator:":",theme:{colors:[bf],spacing:[jo,Ta],blur:["none","",Aa,Ge],brightness:J(),borderColor:[e],borderRadius:["none","","full",Aa,Ge],borderSpacing:I(),borderWidth:P(),contrast:J(),grayscale:H(),hueRotate:J(),invert:H(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[Oge,Ta],inset:O(),margin:O(),opacity:J(),padding:I(),saturate:J(),scale:J(),sepia:H(),skew:J(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Ge]}],container:["container"],columns:[{columns:[Aa]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...L(),Ge]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vf,Ge]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ge]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",vf,Ge]}],"grid-cols":[{"grid-cols":[bf]}],"col-start-end":[{col:["auto",{span:["full",vf,Ge]},Ge]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[bf]}],"row-start-end":[{row:["auto",{span:[vf,Ge]},Ge]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ge]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ge,t]}],"min-w":[{"min-w":[Ge,t,"min","max","fit"]}],"max-w":[{"max-w":[Ge,t,"none","full","min","max","fit","prose",{screen:[Aa]},Aa]}],h:[{h:[Ge,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ge,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ge,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ge,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Aa,Ta]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Q0]}],"font-family":[{font:[bf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ge]}],"line-clamp":[{"line-clamp":["none",_d,Q0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jo,Ge]}],"list-image":[{"list-image":["none",Ge]}],"list-style-type":[{list:["none","disc","decimal",Ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jo,Ta]}],"underline-offset":[{"underline-offset":["auto",jo,Ge]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...L(),Ige]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Rge]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Lge]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[jo,Ge]}],"outline-w":[{outline:[jo,Ta]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[jo,Ta]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Aa,Mge]}],"shadow-color":[{shadow:[bf]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Aa,Ge]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ge]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Ge]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[vf,Ge]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ge]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[jo,Ta,Q0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qge=jge(Uge);function Dr(...e){return qge(at(e))}const Gg=sge,Yg=ige,$f=v.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(v$,{ref:n,className:Dr("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,d.jsx(oge,{asChild:!0,children:d.jsx(z1,{className:"h-4 w-4 opacity-50"})})]}));$f.displayName=v$.displayName;const Uf=v.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>d.jsx(age,{children:d.jsx(b$,{ref:s,className:Dr("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:duration-75",r==="popper"&&"data-[state=open]:slide-in-from-top-[60%] data-[state=closed]:slide-out-to-top-[60%] data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:d.jsx(lge,{className:Dr("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));Uf.displayName=b$.displayName;const Bge=v.forwardRef(({className:e,...t},r)=>d.jsx(x$,{ref:r,className:Dr("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Bge.displayName=x$.displayName;const Li=v.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(w$,{ref:n,className:Dr("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(uge,{children:d.jsx(z1,{className:"h-4 w-4"})})}),d.jsx(cge,{children:t})]}));Li.displayName=w$.displayName;const Vge=v.forwardRef(({className:e,...t},r)=>d.jsx(_$,{ref:r,className:Dr("-mx-1 my-1 h-px bg-muted",e),...t}));Vge.displayName=_$.displayName;function Wge(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function Hge(e){const[t,r]=v.useState(void 0);return Zd(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;r({width:o,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Nx="Switch",[Kge,$qe]=Ch(Nx),[Zge,Gge]=Kge(Nx),C$=v.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...h}=e,[f,p]=v.useState(null),y=Hn(t,_=>p(_)),m=v.useRef(!1),b=f?u||!!f.closest("form"):!0,[x,w]=Qb({prop:s,defaultProp:i??!1,onChange:c,caller:Nx});return d.jsxs(Zge,{scope:r,checked:x,disabled:a,children:[d.jsx(Vr.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":P$(x),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:y,onClick:Ir(e.onClick,_=>{w(j=>!j),b&&(m.current=_.isPropagationStopped(),m.current||_.stopPropagation())})}),b&&d.jsx(O$,{control:f,bubbles:!m.current,name:n,value:l,checked:x,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});C$.displayName=Nx;var T$="SwitchThumb",A$=v.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=Gge(T$,r);return d.jsx(Vr.span,{"data-state":P$(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});A$.displayName=T$;var Yge="SwitchBubbleInput",O$=v.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},i)=>{const o=v.useRef(null),a=Hn(o,i),l=Wge(r),c=Hge(t);return v.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&f){const p=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(p)}},[l,r,n]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});O$.displayName=Yge;function P$(e){return e?"checked":"unchecked"}var R$=C$,Jge=A$;const Nv=v.forwardRef(({className:e,...t},r)=>d.jsx(R$,{className:Je("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:d.jsx(Jge,{className:Je("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Nv.displayName=R$.displayName;const Xge=Xb("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:h-4 [&>svg]:w-4",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-emerald-500/50 text-emerald-600 dark:text-emerald-400 [&>svg]:text-emerald-600 dark:[&>svg]:text-emerald-400"}},defaultVariants:{variant:"default"}}),l2=v.forwardRef(({className:e,variant:t,...r},n)=>d.jsx("div",{ref:n,role:"alert",className:Dr(Xge({variant:t}),e),...r}));l2.displayName="Alert";const c2=v.forwardRef(({className:e,...t},r)=>d.jsx("h5",{ref:r,className:Dr("mb-1 font-medium leading-none tracking-tight",e),...t}));c2.displayName="AlertTitle";const Sv=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Dr("text-sm [&_p]:leading-relaxed",e),...t}));Sv.displayName="AlertDescription";const Qge=v.forwardRef(({className:e,variant:t="default",children:r,icon:n,...s},i)=>{const o={default:$1,destructive:RE,success:Xoe}[t]||$i;return d.jsxs(l2,{ref:i,variant:t,className:Dr("flex items-start gap-3",e),...s,children:[n||d.jsx(o,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),d.jsx("div",{children:v.Children.map(r,a=>v.isValidElement(a)&&(a.type===c2||a.type===Sv)?a:d.jsx(Sv,{children:a}))})]})});Qge.displayName="AlertWithIcon";const eye=a4({name:Bg().min(1,"Name is required").max(100,"Name is too long"),description:Bg().max(500,"Description is too long").optional(),product_type:mk(["single_issue","bundle","chapter_pass","arc_pass"]),active:Bhe(),work_id:Bg().nullable().optional(),content_grants:LF(a4({type:mk(["work","chapter"]),id:Bg().min(1,"Content ID is required")}))}),tye=({product:e,onSave:t,onCancel:r,isSubmitting:n=!1})=>{var s,i;const[o,a]=v.useState([]),[l,c]=v.useState(!0),[u,h]=v.useState(null),{control:f,register:p,handleSubmit:y,reset:m,watch:b,setValue:x,formState:{errors:w}}=lce({resolver:rhe(eye),defaultValues:{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",product_type:(e==null?void 0:e.product_type)||"single_issue",active:(e==null?void 0:e.active)??!0,work_id:(e==null?void 0:e.work_id)||null,content_grants:Array.isArray(e==null?void 0:e.content_grants)?e.content_grants:[]}}),_=b("product_type");v.useEffect(()=>{(async()=>{c(!0),h(null);try{const E=await fetch("/api/content/works");if(!E.ok)throw new Error(`Failed to fetch works: ${E.statusText}`);const T=await E.json();a(T.works||[])}catch(E){console.error("Error fetching works:",E),h("Failed to load content. Please try again later.")}finally{c(!1)}})()},[]);const j=E=>{const T={...E,work_id:E.work_id||null};t(T)},k=()=>{const E=b("content_grants")||[];x("content_grants",[...E,{type:"work",id:""}],{shouldValidate:!0})},S=E=>{const T=(b("content_grants")||[]).filter((R,O)=>O!==E);x("content_grants",T,{shouldValidate:!0})},C=(E,T,R)=>{const O=[...b("content_grants")||[]];O[E]={...O[E],[T]:R},x("content_grants",O,{shouldValidate:!0})};return l?d.jsxs("div",{className:"flex items-center justify-center p-8",children:[d.jsx(Jd,{className:"h-6 w-6 animate-spin text-primary mr-2"}),d.jsx("span",{children:"Loading form..."})]}):d.jsxs("form",{onSubmit:y(j),className:"space-y-6",children:[u&&d.jsxs(l2,{variant:"destructive",children:[d.jsx($i,{className:"h-4 w-4"}),d.jsx(c2,{children:"Error"}),d.jsx(Sv,{children:u})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{htmlFor:"name",children:"Product Name *"}),d.jsx(fi,{id:"name",placeholder:"e.g., Issue #1, Premium Bundle",...p("name"),className:w.name?"border-destructive":""}),w.name&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.name.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{htmlFor:"description",children:"Description"}),d.jsx(JE,{id:"description",placeholder:"A brief description of the product...",rows:3,...p("description"),className:w.description?"border-destructive":""}),w.description&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.description.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{htmlFor:"product_type",children:"Product Type *"}),d.jsx(W0,{name:"product_type",control:f,render:({field:E})=>d.jsxs(Gg,{onValueChange:E.onChange,value:E.value,children:[d.jsx($f,{className:"w-full",children:d.jsx(Yg,{placeholder:"Select a product type"})}),d.jsxs(Uf,{children:[d.jsx(Li,{value:"single_issue",children:"Single Issue"}),d.jsx(Li,{value:"bundle",children:"Bundle"}),d.jsx(Li,{value:"chapter_pass",children:"Chapter Pass"}),d.jsx(Li,{value:"arc_pass",children:"Arc Pass"})]})]})}),w.product_type&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.product_type.message})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(W0,{name:"active",control:f,render:({field:E})=>d.jsx(Nv,{id:"active",checked:E.value,onCheckedChange:E.onChange})}),d.jsx(js,{htmlFor:"active",children:"Active"})]}),_==="single_issue"&&d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{htmlFor:"work_id",children:"Associated Work (Issue/Book)"}),d.jsx(W0,{name:"work_id",control:f,render:({field:E})=>d.jsxs(Gg,{onValueChange:E.onChange,value:E.value||"",children:[d.jsx($f,{children:d.jsx(Yg,{placeholder:"Select an associated work"})}),d.jsxs(Uf,{children:[d.jsx(Li,{value:"",children:"None"}),o.map(T=>d.jsxs(Li,{value:T.id,children:[T.title," (",T.type,")"]},T.id))]})]})}),w.work_id&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.work_id.message})]}),(_==="bundle"||_==="chapter_pass"||_==="arc_pass")&&d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(js,{children:"Content Grants"}),d.jsxs(ct,{type:"button",variant:"outline",size:"sm",onClick:k,className:"text-sm",children:[d.jsx(Go,{className:"h-3.5 w-3.5 mr-1.5"}),"Add Grant"]})]}),d.jsxs("div",{className:"space-y-3",children:[(s=b("content_grants"))==null?void 0:s.map((E,T)=>d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-1",children:[d.jsx("div",{className:"space-y-1",children:d.jsxs(Gg,{value:E.type,onValueChange:R=>C(T,"type",R),children:[d.jsx($f,{children:d.jsx(Yg,{})}),d.jsxs(Uf,{children:[d.jsx(Li,{value:"work",children:"Work"}),d.jsx(Li,{value:"chapter",children:"Chapter"})]})]})}),d.jsx("div",{className:"space-y-1",children:d.jsxs(Gg,{value:E.id,onValueChange:R=>C(T,"id",R),children:[d.jsx($f,{children:d.jsx(Yg,{placeholder:`Select ${E.type}...`})}),d.jsxs(Uf,{children:[o.filter(R=>E.type==="work"||R.type===E.type).map(R=>d.jsxs(Li,{value:R.id,children:[R.title," (",R.type,")"]},R.id)),o.length===0&&d.jsxs("div",{className:"p-2 text-sm text-muted-foreground",children:["No ",E.type,"s found"]})]})]})})]}),d.jsxs(ct,{type:"button",variant:"ghost",size:"icon",className:"h-10 w-10 text-destructive hover:bg-destructive/10",onClick:()=>S(T),children:[d.jsx(pl,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Remove"})]})]},T)),((i=b("content_grants"))==null?void 0:i.length)===0&&d.jsx("div",{className:"rounded-md border border-dashed p-4 text-center",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:'No content grants added yet. Click "Add Grant" to get started.'})})]}),w.content_grants&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.content_grants.message||"Please check the content grants"})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[d.jsx(ct,{type:"button",variant:"outline",onClick:r,disabled:n,children:"Cancel"}),d.jsx(ct,{type:"submit",disabled:n,children:n?d.jsxs(d.Fragment,{children:[d.jsx(Jd,{className:"mr-2 h-4 w-4 animate-spin"}),e?"Updating...":"Creating..."]}):d.jsx(d.Fragment,{children:e?"Update Product":"Create Product"})})]})]})},I$=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{className:"w-full overflow-auto",children:d.jsx("table",{ref:r,className:Je("w-full caption-bottom text-sm",e),...t})}));I$.displayName="Table";const D$=v.forwardRef(({className:e,...t},r)=>d.jsx("thead",{ref:r,className:Je("[&_tr]:border-b",e),...t}));D$.displayName="TableHeader";const L$=v.forwardRef(({className:e,...t},r)=>d.jsx("tbody",{ref:r,className:Je("[&_tr:last-child]:border-0",e),...t}));L$.displayName="TableBody";const rye=v.forwardRef(({className:e,...t},r)=>d.jsx("tfoot",{ref:r,className:Je("bg-primary font-medium text-primary-foreground",e),...t}));rye.displayName="TableFooter";const Iy=v.forwardRef(({className:e,...t},r)=>d.jsx("tr",{ref:r,className:Je("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Iy.displayName="TableRow";const Hu=v.forwardRef(({className:e,...t},r)=>d.jsx("th",{ref:r,className:Je("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Hu.displayName="TableHead";const ic=v.forwardRef(({className:e,...t},r)=>d.jsx("td",{ref:r,className:Je("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ic.displayName="TableCell";const nye=v.forwardRef(({className:e,...t},r)=>d.jsx("caption",{ref:r,className:Je("mt-4 text-sm text-muted-foreground",e),...t}));nye.displayName="TableCaption";const sye=pse,iye=Hz,oye=Kz,M$=v.forwardRef(({className:e,...t},r)=>d.jsx(_E,{ref:r,className:Je("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));M$.displayName=_E.displayName;const z$=v.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(oye,{children:[d.jsx(M$,{}),d.jsxs(jE,{ref:n,className:Je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,d.jsxs(SE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(pl,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));z$.displayName=jE.displayName;const F$=({className:e,...t})=>d.jsx("div",{className:Je("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});F$.displayName="DialogHeader";const $$=v.forwardRef(({className:e,...t},r)=>d.jsx(kE,{ref:r,className:Je("text-lg font-semibold leading-none tracking-tight",e),...t}));$$.displayName=kE.displayName;const aye=v.forwardRef(({className:e,...t},r)=>d.jsx(NE,{ref:r,className:Je("text-sm text-muted-foreground",e),...t}));aye.displayName=NE.displayName;function lye(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let kk=1;class cye{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...s}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:kk++,o=this.toasts.find(l=>l.id===i),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:n}),{...l,...t,id:i,dismissible:a,title:n}):l):this.addToast({title:n,...s,dismissible:a,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const a=s.then(async c=>{if(o=["resolve",c],de.isValidElement(c))i=!1,this.create({id:n,type:"default",message:c});else if(dye(c)&&!c.ok){i=!1;const u=typeof r.error=="function"?await r.error(`HTTP error! status: ${c.status}`):r.error,h=typeof r.description=="function"?await r.description(`HTTP error! status: ${c.status}`):r.description,f=typeof u=="object"&&!de.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}else if(c instanceof Error){i=!1;const u=typeof r.error=="function"?await r.error(c):r.error,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!de.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}else if(r.success!==void 0){i=!1;const u=typeof r.success=="function"?await r.success(c):r.success,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!de.isValidElement(u)?u:{message:u};this.create({id:n,type:"success",description:h,...f})}}).catch(async c=>{if(o=["reject",c],r.error!==void 0){i=!1;const u=typeof r.error=="function"?await r.error(c):r.error,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!de.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,r)=>{const n=(r==null?void 0:r.id)||kk++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const xs=new cye,uye=(e,t)=>{const r=(t==null?void 0:t.id)||kk++;return xs.addToast({title:e,...t,id:r}),r},dye=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",hye=uye,fye=()=>xs.toasts,pye=()=>xs.getActiveToasts(),Ve=Object.assign(hye,{success:xs.success,info:xs.info,warning:xs.warning,error:xs.error,custom:xs.custom,message:xs.message,promise:xs.promise,dismiss:xs.dismiss,loading:xs.loading},{getHistory:fye,getToasts:pye});lye("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const mye=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!1),[s,i]=v.useState(!0),[o,a]=v.useState(!1),[l,c]=v.useState(null),u=async()=>{i(!0);try{const m=await fetch("/api/products");if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const b=await m.json();t(b.products),Ve.success("Products loaded successfully")}catch(m){console.error("Error fetching products:",m),Ve.error("Failed to load products")}finally{i(!1)}};v.useEffect(()=>{u()},[]);const h=async m=>{a(!0);try{let b;if(l?b=await fetch(`/api/products/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,active:m.active??!0})}):b=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,active:m.active??!0})}),!b.ok){const w=await b.json();throw new Error(w.message||"Failed to save product")}const x=await b.json();Ve.success(l?"Product updated successfully":"Product created successfully"),n(!1),c(null),await u()}catch(b){console.error("Error saving product:",b),Ve.error((b instanceof Error?b.message:String(b))||"Failed to save product")}finally{a(!1)}},f=async m=>{if(window.confirm("Are you sure you want to archive this product?"))try{const b=await fetch(`/api/products/${m}`,{method:"DELETE"});if(!b.ok){const x=await b.json();throw new Error(x.message||"Failed to delete product")}Ve.success("Product archived successfully"),await u()}catch(b){console.error("Error deleting product:",b),Ve.error((b instanceof Error?b.message:String(b))||"Failed to archive product")}},p=m=>{c(m),n(!0)},y=()=>{n(!1),c(null)};return s?d.jsxs("div",{className:"flex items-center justify-center p-8",children:[d.jsx(Jd,{className:"h-8 w-8 animate-spin text-primary"}),d.jsx("span",{className:"ml-2",children:"Loading products..."})]}):d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Products"}),d.jsxs("p",{className:"text-muted-foreground",children:[e.length," product",e.length!==1?"s":""," in your store"]})]}),d.jsxs(sye,{open:r,onOpenChange:y,children:[d.jsx(iye,{asChild:!0,children:d.jsxs(ct,{onClick:()=>n(!0),children:[d.jsx(Go,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),d.jsxs(z$,{className:"sm:max-w-[700px]",children:[d.jsx(F$,{children:d.jsx($$,{children:l?"Edit Product":"Create New Product"})}),d.jsx(tye,{product:l,onSave:h,onCancel:y,isSubmitting:o})]})]})]}),d.jsx("div",{className:"rounded-md border",children:d.jsxs(I$,{children:[d.jsx(D$,{children:d.jsxs(Iy,{children:[d.jsx(Hu,{className:"w-[300px]",children:"Name"}),d.jsx(Hu,{children:"Type"}),d.jsx(Hu,{children:"Status"}),d.jsx(Hu,{children:"Created"}),d.jsx(Hu,{className:"text-right",children:"Actions"})]})}),d.jsx(L$,{children:e.length===0?d.jsx(Iy,{children:d.jsx(ic,{colSpan:5,className:"h-24 text-center",children:"No products found."})}):e.map(m=>{var b;return d.jsxs(Iy,{children:[d.jsxs(ic,{className:"font-medium",children:[d.jsx("div",{className:"font-medium",children:m.name}),d.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2",children:m.description||"No description"})]}),d.jsx(ic,{children:d.jsx("span",{className:"inline-flex items-center rounded-full bg-secondary px-2.5 py-0.5 text-xs font-medium text-secondary-foreground capitalize",children:(b=m.product_type)==null?void 0:b.replace("_"," ")})}),d.jsx(ic,{children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`h-2.5 w-2.5 rounded-full mr-2 ${m.active?"bg-green-500":"bg-gray-300"}`}),m.active?"Active":"Inactive"]})}),d.jsx(ic,{children:new Date(m.created_at).toLocaleDateString()}),d.jsx(ic,{className:"text-right",children:d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsxs(ct,{variant:"outline",size:"sm",onClick:()=>p(m),children:[d.jsx(fae,{className:"h-4 w-4 mr-1"}),"Edit"]}),d.jsxs(ct,{variant:"outline",size:"sm",onClick:()=>f(m.id),className:"text-destructive hover:bg-destructive/10 hover:text-destructive",children:[d.jsx(au,{className:"h-4 w-4 mr-1"}),"Archive"]})]})})]},m.id)})})]})})]})};function e_({className:e,...t}){return d.jsx("div",{className:`animate-pulse bg-gray-200 dark:bg-gray-700 rounded-md ${e||""}`,...t})}const qf=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Je("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));qf.displayName="Card";const Bf=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Je("flex flex-col space-y-1.5 p-6",e),...t}));Bf.displayName="CardHeader";const Vf=v.forwardRef(({className:e,...t},r)=>d.jsx("h3",{ref:r,className:Je("text-2xl font-semibold leading-none tracking-tight",e),...t}));Vf.displayName="CardTitle";const gye=v.forwardRef(({className:e,...t},r)=>d.jsx("p",{ref:r,className:Je("text-sm text-muted-foreground",e),...t}));gye.displayName="CardDescription";const Wf=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Je("p-6 pt-0",e),...t}));Wf.displayName="CardContent";const yye=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Je("flex items-center p-6 pt-0",e),...t}));yye.displayName="CardFooter";const vye=de.lazy(()=>xh(()=>import("./PriceManager-8nclNyEg-Bj3c3Ss4.js"),__vite__mapDeps([0,1]))),bye=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(e_,{className:"h-9 w-32"}),d.jsx(e_,{className:"h-9 w-24"})]}),d.jsx("div",{className:"space-y-2",children:[...Array(5)].map((e,t)=>d.jsx(e_,{className:"h-12 w-full"},t))})]}),xye=()=>d.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Store Management"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage your store's products, pricing, and customer purchases"})]}),d.jsxs(Ble,{defaultValue:"products",className:"w-full space-y-6",children:[d.jsxs(lF,{className:"grid w-full md:w-[400px] grid-cols-2",children:[d.jsx(zf,{value:"products",children:"Products"}),d.jsx(zf,{value:"prices",children:"Pricing"}),d.jsx(zf,{value:"purchases",children:"Purchases"}),d.jsx(zf,{value:"analytics",children:"Analytics"})]}),d.jsx(Ff,{value:"products",className:"space-y-4",children:d.jsxs(qf,{children:[d.jsx(Bf,{children:d.jsx(Vf,{children:"Product Catalog"})}),d.jsx(Wf,{children:d.jsx(mye,{})})]})}),d.jsx(Ff,{value:"prices",className:"space-y-4",children:d.jsxs(qf,{children:[d.jsx(Bf,{children:d.jsx(Vf,{children:"Pricing & Plans"})}),d.jsx(Wf,{children:d.jsx(v.Suspense,{fallback:d.jsx(bye,{}),children:d.jsx(vye,{})})})]})}),d.jsx(Ff,{value:"purchases",className:"space-y-4",children:d.jsxs(qf,{children:[d.jsx(Bf,{children:d.jsx(Vf,{children:"Purchase History"})}),d.jsx(Wf,{children:d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-muted-foreground",children:[d.jsx("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}),d.jsx("path",{d:"M3 6h18"}),d.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]})}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"Purchase History"}),d.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"View and manage customer purchases, refunds, and order history."})]})})]})}),d.jsx(Ff,{value:"analytics",className:"space-y-4",children:d.jsxs(qf,{children:[d.jsx(Bf,{children:d.jsx(Vf,{children:"Store Analytics"})}),d.jsx(Wf,{children:d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-muted-foreground",children:[d.jsx("path",{d:"M3 3v18h18"}),d.jsx("path",{d:"m19 9-5 5-4-4-3 3"})]})}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sales Analytics"}),d.jsx("p",{className:"text-sm text-muted-foreground max-w-md mb-4",children:"View detailed analytics and reports about your store's performance."}),d.jsx(ct,{disabled:!0,children:"Coming Soon"})]})})]})})]})]}),wye=async()=>{const{data:e,error:t}=await le.from("works").select("*").order("order_in_parent",{ascending:!0});if(t)throw new Error(t.message);return e},_ye=async e=>{if(!e)return[];const{data:t,error:r}=await le.from("purchases").select(`
      id,
      user_id,
      product_id,
      purchased_at,
      status,
      products (
        name,
        description,
        product_type,
        work_id
      )
    `).eq("user_id",e);if(r)throw new Error(r.message);return t.map(n=>{var s,i,o,a;return{id:n.id,user_id:n.user_id,product_id:n.product_id,purchased_at:n.purchased_at,status:n.status,product_title:((s=n.products)==null?void 0:s.name)||"Unknown Product",product_description:(i=n.products)==null?void 0:i.description,product_type:((o=n.products)==null?void 0:o.product_type)||"single_issue",work_id:(a=n.products)==null?void 0:a.work_id}})},jye=async(e,t)=>{if(!e||!t)return null;const{data:r,error:n}=await le.from("user_ratings").select("rating").eq("user_id",e).eq("work_id",t).single();if(n&&n.code!=="PGRST116")throw new Error(n.message);return r?r.rating:null},kye=async(e,t,r)=>{const{data:n,error:s}=await le.from("user_ratings").upsert({user_id:e,work_id:t,rating:r},{onConflict:"user_id,work_id"}).select();if(s)throw new Error(s.message);return n[0]},Nye=({work:e,userLibraryItem:t,queryClient:r})=>{var n,s;const{user:i}=jh(),[o,a]=v.useState(null),[l,c]=v.useState(!1),[u,h]=v.useState(!1),{data:f}=It({queryKey:["userRating",i==null?void 0:i.id,e.id],queryFn:()=>jye((i==null?void 0:i.id)||"",e.id),enabled:!!(i!=null&&i.id)});v.useEffect(()=>{f!==void 0&&a(f)},[f]);const p=rr({mutationFn:({userId:x,workId:w,rating:_})=>kye(x,w,_),onSuccess:()=>{r.invalidateQueries({queryKey:["userRating",i==null?void 0:i.id,e.id]}),r.invalidateQueries({queryKey:["allWorks"]})},onError:x=>{alert(`Error submitting rating: ${x.message}`)}}),y=x=>{if(!i){alert("Please log in to submit a rating.");return}i.id&&p.mutate({userId:i.id,workId:e.id,rating:x})},m=e.word_count&&e.target_word_count?Math.min(100,Math.round(e.word_count/e.target_word_count*100)):e.progress_percentage||0,b="S. Azar";return d.jsxs("article",{className:"book-card","data-book-id":e.id,"aria-label":`Book card: ${e.title} by ${b}`,children:[d.jsxs("div",{className:"book-main",children:[d.jsx("div",{className:"cover",role:"img","aria-label":`Book cover: ${e.title} by ${b}`,style:{background:e.cover_image_url?`url(${e.cover_image_url}) center center / cover`:"var(--teal)"},children:!e.cover_image_url&&d.jsxs("div",{className:"cover-content",children:[d.jsx("div",{className:"cover-title",children:e.title}),d.jsx("div",{className:"cover-author",children:b})]})}),d.jsxs("div",{className:"details",children:[d.jsxs("div",{className:"book-header",children:[d.jsx("h3",{className:"book-title",children:e.title}),d.jsx("div",{className:"author",children:b})]}),(e.release_date||e.estimated_release)&&d.jsx("div",{className:"release-info text-sm text-muted mt-1",children:e.release_date?d.jsxs("span",{children:["Released: ",new Date(e.release_date).toLocaleDateString()]}):d.jsxs("span",{children:["Estimated Release: ",e.estimated_release]})}),(e.status==="planning"||e.status==="writing"||e.status==="editing")&&d.jsxs("div",{className:"progress","aria-label":"Author writing progress",children:[d.jsxs("div",{className:"progress-head",children:[d.jsxs("span",{children:[m,"% written"]}),d.jsxs("span",{"aria-live":"polite",children:[m,"%"]})]}),d.jsx("div",{className:"bar",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":m,"aria-label":"Author writing progress",children:d.jsx("span",{style:{width:`${m}%`}})})]}),d.jsx("p",{className:"desc",children:e.description||"No description available."}),d.jsxs("div",{className:"rating","aria-label":`Rating ${((n=e.rating)==null?void 0:n.toFixed(1))||"0.0"} out of 5 based on ${e.reviews_count||0} reviews`,children:[d.jsx("span",{className:"stars","aria-hidden":"true",children:[...Array(5)].map((x,w)=>d.jsx(DE,{className:`star ${w<(o!==null?o:Math.floor(e.rating||0))?"filled":""}`,onClick:()=>y(w+1),onMouseEnter:()=>i&&a(w+1),onMouseLeave:()=>i&&a(f!==null?f:null),style:{cursor:i?"pointer":"default"}},w))}),d.jsx("span",{children:((s=e.rating)==null?void 0:s.toFixed(1))||"0.0"}),d.jsxs("small",{children:["• ",e.reviews_count||0," reviews"]})]}),d.jsx("div",{className:"actions",children:t?d.jsx(d.Fragment,{children:d.jsx("button",{className:"btn primary",children:"Open"})}):d.jsx("button",{className:"btn primary",children:"Buy now"})}),e.sample_content&&d.jsxs("button",{className:"sample-toggle-btn",onClick:()=>c(!l),"aria-expanded":l,children:[d.jsx("span",{children:"Read Sample"}),d.jsx("svg",{className:`toggle-arrow ${l?"expanded":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d.jsx("polyline",{points:"6,9 12,15 18,9"})})]})]})]}),l&&e.sample_content&&d.jsxs("div",{className:"sample-card expanded",children:[d.jsx("div",{className:"sample-header",children:d.jsxs("h4",{children:['Sample from "',e.title,'"']})}),d.jsx("div",{className:"sample-excerpt",children:d.jsx("p",{children:e.sample_content})}),d.jsx("div",{className:"sample-actions",children:t?d.jsx("button",{className:"continue-btn",children:"Continue reading"}):d.jsx("button",{className:"buy-btn",children:"Buy now"})})]})]})},Sye=()=>{const{user:e}=jh(),t=ha(),{data:r,isLoading:n,isError:s,error:i}=It({queryKey:["allWorks"],queryFn:wye}),{data:o,isLoading:a,isError:l,error:c}=It({queryKey:["userLibraryItems",e==null?void 0:e.id],queryFn:()=>_ye((e==null?void 0:e.id)||""),enabled:!!(e!=null&&e.id)}),[u,h]=v.useState(!0),[f,p]=v.useState("All"),[y,m]=v.useState("All"),b=(r==null?void 0:r.filter(x=>{const w=f==="All"||x.type===f.toLowerCase(),_=y==="All"||x.status===y.toLowerCase();return w&&_}))||[];return n||a?d.jsx("div",{className:"text-center py-8 text-text-light",children:"Loading library..."}):s?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading works: ",i==null?void 0:i.message]}):l?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading user library: ",c==null?void 0:c.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8 bg-background-dark text-text-light min-h-screen",children:[d.jsx("h1",{className:"text-4xl font-bold text-text-light mb-6",children:"Your Library"}),u&&d.jsxs("div",{className:"bg-blue-900 bg-opacity-30 border border-blue-700 text-blue-200 p-4 rounded-md mb-6 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx($1,{size:20}),d.jsx("p",{className:"text-sm",children:"Files may include a purchaser-specific watermark. Download limits: 5 per format."})]}),d.jsx("button",{onClick:()=>h(!1),className:"text-blue-200 hover:text-white",children:d.jsx(RE,{size:20})})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.jsx("button",{onClick:()=>p("All"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="All"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"All"}),d.jsx("button",{onClick:()=>p("Book"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Book"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Books"}),d.jsx("button",{onClick:()=>p("Volume"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Volume"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Volumes"}),d.jsx("button",{onClick:()=>p("Saga"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Saga"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Sagas"}),d.jsx("button",{onClick:()=>p("Arc"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Arc"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Arcs"}),d.jsx("button",{onClick:()=>p("Issue"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Issue"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Issues"}),d.jsxs("select",{value:y,onChange:x=>m(x.target.value),className:"px-3 py-2 rounded-full text-sm font-semibold bg-gray-700 text-gray-300 hover:bg-gray-600",children:[d.jsx("option",{value:"All",children:"All Status"}),d.jsx("option",{value:"Published",children:"Published"}),d.jsx("option",{value:"Planning",children:"Planning"}),d.jsx("option",{value:"Writing",children:"Writing"}),d.jsx("option",{value:"Editing",children:"Editing"}),d.jsx("option",{value:"On_hold",children:"On Hold"})]})]}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:d.jsx("div",{className:"lg:col-span-3",children:d.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8",children:b.map(x=>{const w=o==null?void 0:o.find(_=>_.work_id===x.id);return d.jsx(Nye,{work:x,userLibraryItem:w,queryClient:t},x.id)})})})})]})};var U$="basil",Eye=function(e){return e===3?"v3":e},q$="https://js.stripe.com",Cye="".concat(q$,"/").concat(U$,"/stripe.js"),Tye=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Aye=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Oye=function(e){return Tye.test(e)||Aye.test(e)},Pye=function(){for(var e=document.querySelectorAll('script[src^="'.concat(q$,'"]')),t=0;t<e.length;t++){var r=e[t];if(Oye(r.src))return r}return null},z4=function(e){var t="",r=document.createElement("script");r.src="".concat(Cye).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},Rye=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})},xf=null,Jg=null,Xg=null,Iye=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},Dye=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Lye=function(e){return xf!==null?xf:(xf=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var n=Pye();if(!(n&&e)){if(!n)n=z4(e);else if(n&&Xg!==null&&Jg!==null){var s;n.removeEventListener("load",Xg),n.removeEventListener("error",Jg),(s=n.parentNode)===null||s===void 0||s.removeChild(n),n=z4(e)}}Xg=Dye(t,r),Jg=Iye(r),n.addEventListener("load",Xg),n.addEventListener("error",Jg)}catch(i){r(i);return}}),xf.catch(function(t){return xf=null,Promise.reject(t)}))},Mye=function(e,t,r){if(e===null)return null;var n=t[0],s=n.match(/^pk_test/),i=Eye(e.version),o=U$;s&&i!==o&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(o,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return Rye(a,r),a},Qg,B$=!1,V$=function(){return Qg||(Qg=Lye(null).catch(function(e){return Qg=null,Promise.reject(e)}),Qg)};Promise.resolve().then(function(){return V$()}).catch(function(e){B$||console.warn(e)});var zye=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];B$=!0;var n=Date.now();return V$().then(function(s){return Mye(s,t,n)})},W$={exports:{}},t_,F4;function Fye(){if(F4)return t_;F4=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return t_=e,t_}var r_,$4;function $ye(){if($4)return r_;$4=1;var e=Fye();function t(){}function r(){}return r.resetWarningCache=t,r_=function(){function n(o,a,l,c,u,h){if(h!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},r_}W$.exports=$ye()();var Uye=W$.exports;const Wt=ji(Uye);function U4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function q4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U4(Object(r),!0).forEach(function(n){H$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dy(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dy=function(t){return typeof t}:Dy=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dy(e)}function H$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qye(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Bye(e,t){if(e==null)return{};var r=qye(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vye(e,t){return Wye(e)||Hye(e,t)||Kye(e,t)||Zye()}function Wye(e){if(Array.isArray(e))return e}function Hye(e,t){var r=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(r!=null){var n=[],s=!0,i=!1,o,a;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));s=!0);}catch(l){i=!0,a=l}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw a}}return n}}function Kye(e,t){if(e){if(typeof e=="string")return B4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B4(e,t)}}function B4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Gn=function(e,t,r){var n=!!r,s=de.useRef(r);de.useEffect(function(){s.current=r},[r]),de.useEffect(function(){if(!n||!e)return function(){};var i=function(){s.current&&s.current.apply(s,arguments)};return e.on(t,i),function(){e.off(t,i)}},[n,t,e,s])},Gye=function(e){var t=de.useRef(e);return de.useEffect(function(){t.current=e},[e]),t.current},Ev=function(e){return e!==null&&Dy(e)==="object"},V4="[object Object]",Yye=function e(t,r){if(!Ev(t)||!Ev(r))return t===r;var n=Array.isArray(t),s=Array.isArray(r);if(n!==s)return!1;var i=Object.prototype.toString.call(t)===V4,o=Object.prototype.toString.call(r)===V4;if(i!==o)return!1;if(!i&&!n)return t===r;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(var c={},u=0;u<a.length;u+=1)c[a[u]]=!0;for(var h=0;h<l.length;h+=1)c[l[h]]=!0;var f=Object.keys(c);if(f.length!==a.length)return!1;var p=t,y=r,m=function(b){return e(p[b],y[b])};return f.every(m)},Jye=function(e,t,r){return Ev(e)?Object.keys(e).reduce(function(n,s){var i=!Ev(t)||!Yye(e[s],t[s]);return r.includes(s)?(i&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),n):i?q4(q4({},n||{}),{},H$({},s,e[s])):n},null):null},K$=de.createContext(null);K$.displayName="ElementsContext";var Xye=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e};Wt.any,Wt.object;Wt.func.isRequired;var Z$=de.createContext(null);Z$.displayName="CheckoutSdkContext";var Qye=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},eve=de.createContext(null);eve.displayName="CheckoutContext";Wt.any,Wt.shape({fetchClientSecret:Wt.func.isRequired,elementsOptions:Wt.object}).isRequired;var W4=function(e){var t=de.useContext(Z$),r=de.useContext(K$);if(t&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?Qye(t,e):Xye(r,e)},tve=["mode"],rve=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},ur=function(e,t){var r="".concat(rve(e),"Element"),n=function(o){var a=o.id,l=o.className,c=o.options,u=c===void 0?{}:c,h=o.onBlur,f=o.onFocus,p=o.onReady,y=o.onChange,m=o.onEscape,b=o.onClick,x=o.onLoadError,w=o.onLoaderStart,_=o.onNetworksChange,j=o.onConfirm,k=o.onCancel,S=o.onShippingAddressChange,C=o.onShippingRateChange,E=W4("mounts <".concat(r,">")),T="elements"in E?E.elements:null,R="checkoutSdk"in E?E.checkoutSdk:null,O=de.useState(null),I=Vye(O,2),P=I[0],D=I[1],L=de.useRef(null),B=de.useRef(null);Gn(P,"blur",h),Gn(P,"focus",f),Gn(P,"escape",m),Gn(P,"click",b),Gn(P,"loaderror",x),Gn(P,"loaderstart",w),Gn(P,"networkschange",_),Gn(P,"confirm",j),Gn(P,"cancel",k),Gn(P,"shippingaddresschange",S),Gn(P,"shippingratechange",C),Gn(P,"change",y);var q;p&&(e==="expressCheckout"?q=p:q=function(){p(P)}),Gn(P,"ready",q),de.useLayoutEffect(function(){if(L.current===null&&B.current!==null&&(T||R)){var H=null;if(R)switch(e){case"payment":H=R.createPaymentElement(u);break;case"address":if("mode"in u){var $=u.mode,J=Bye(u,tve);if($==="shipping")H=R.createShippingAddressElement(J);else if($==="billing")H=R.createBillingAddressElement(J);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":H=R.createExpressCheckoutElement(u);break;case"currencySelector":H=R.createCurrencySelectorElement();break;case"taxId":H=R.createTaxIdElement(u);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else T&&(H=T.create(e,u));L.current=H,D(H),H&&H.mount(B.current)}},[T,R,u]);var K=Gye(u);return de.useEffect(function(){if(L.current){var H=Jye(u,K,["paymentRequest"]);H&&"update"in L.current&&L.current.update(H)}},[u,K]),de.useLayoutEffect(function(){return function(){if(L.current&&typeof L.current.destroy=="function")try{L.current.destroy(),L.current=null}catch{}}},[]),de.createElement("div",{id:a,className:l,ref:B})},s=function(o){W4("mounts <".concat(r,">"));var a=o.id,l=o.className;return de.createElement("div",{id:a,className:l})},i=t?s:n;return i.propTypes={id:Wt.string,className:Wt.string,onChange:Wt.func,onBlur:Wt.func,onFocus:Wt.func,onReady:Wt.func,onEscape:Wt.func,onClick:Wt.func,onLoadError:Wt.func,onLoaderStart:Wt.func,onNetworksChange:Wt.func,onConfirm:Wt.func,onCancel:Wt.func,onShippingAddressChange:Wt.func,onShippingRateChange:Wt.func,options:Wt.object},i.displayName=r,i.__elementType=e,i},dr=typeof window>"u",nve=de.createContext(null);nve.displayName="EmbeddedCheckoutProviderContext";ur("auBankAccount",dr);ur("card",dr);ur("cardNumber",dr);ur("cardExpiry",dr);ur("cardCvc",dr);ur("fpxBank",dr);ur("iban",dr);ur("idealBank",dr);ur("p24Bank",dr);ur("epsBank",dr);ur("payment",dr);ur("expressCheckout",dr);ur("currencySelector",dr);ur("paymentRequestButton",dr);ur("linkAuthentication",dr);ur("address",dr);ur("shippingAddress",dr);ur("paymentMethodMessaging",dr);ur("affirmMessage",dr);ur("afterpayClearpayMessage",dr);ur("taxId",dr);zye("pk_test_your_key_here");const sve=e=>d.jsx("div",{className:"max-w-md mx-auto bg-background-light rounded-2xl p-6 border border-border/30",children:d.jsxs("div",{className:"text-center",children:[d.jsx(xae,{className:"w-16 h-16 text-warning mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-bold text-text-light mb-2",children:"Stripe Not Configured"}),d.jsx("p",{className:"text-text-dark mb-4",children:"Please configure your Stripe publishable key in the environment variables to enable checkout functionality."}),d.jsx("div",{className:"bg-background/30 p-4 rounded-xl border border-border/30",children:d.jsx("p",{className:"text-sm text-text-dark font-mono",children:"VITE_STRIPE_PUBLISHABLE_KEY=pk_test_your_actual_key_here"})}),d.jsx("button",{onClick:e.onCancel,className:"mt-4 px-6 py-2 bg-secondary text-background rounded-xl hover:bg-secondary-dark transition-colors",children:"Close"})]})}),G$=v.createContext({});function ive(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const u2=typeof window<"u",ove=u2?v.useLayoutEffect:v.useEffect,d2=v.createContext(null);function h2(e,t){e.indexOf(t)===-1&&e.push(t)}function f2(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const ea=(e,t,r)=>r>t?t:r<e?e:r;let p2=()=>{};const ta={},Y$=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function J$(e){return typeof e=="object"&&e!==null}const X$=e=>/^0[^.\s]+$/u.test(e);function m2(e){let t;return()=>(t===void 0&&(t=e()),t)}const As=e=>e,ave=(e,t)=>r=>t(e(r)),Om=(...e)=>e.reduce(ave),zp=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class g2{constructor(){this.subscriptions=[]}add(t){return h2(this.subscriptions,t),()=>f2(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gi=e=>e*1e3,Yi=e=>e/1e3;function Q$(e,t){return t?e*(1e3/t):0}const e8=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,lve=1e-7,cve=12;function uve(e,t,r,n,s){let i,o,a=0;do o=t+(r-t)/2,i=e8(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>lve&&++a<cve);return o}function Pm(e,t,r,n){if(e===t&&r===n)return As;const s=i=>uve(i,0,1,e,r);return i=>i===0||i===1?i:e8(s(i),t,n)}const t8=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,r8=e=>t=>1-e(1-t),n8=Pm(.33,1.53,.69,.99),y2=r8(n8),s8=t8(y2),i8=e=>(e*=2)<1?.5*y2(e):.5*(2-Math.pow(2,-10*(e-1))),v2=e=>1-Math.sin(Math.acos(e)),o8=r8(v2),a8=t8(v2),dve=Pm(.42,0,1,1),hve=Pm(0,0,.58,1),l8=Pm(.42,0,.58,1),fve=e=>Array.isArray(e)&&typeof e[0]!="number",c8=e=>Array.isArray(e)&&typeof e[0]=="number",pve={linear:As,easeIn:dve,easeInOut:l8,easeOut:hve,circIn:v2,circInOut:a8,circOut:o8,backIn:y2,backInOut:s8,backOut:n8,anticipate:i8},mve=e=>typeof e=="string",H4=e=>{if(c8(e)){p2(e.length===4);const[t,r,n,s]=e;return Pm(t,r,n,s)}else if(mve(e))return pve[e];return e},ey=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function gve(e,t){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),e()),u(a)}const c={schedule:(u,h=!1,f=!1)=>{const p=f&&s?r:n;return h&&o.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(a=u,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,i&&(i=!1,c.process(u))}};return c}const yve=40;function u8(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=ey.reduce((x,w)=>(x[w]=gve(i),x),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:f,render:p,postRender:y}=o,m=()=>{const x=ta.useManualTiming?s.timestamp:performance.now();r=!1,ta.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(x-s.timestamp,yve),1)),s.timestamp=x,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),h.process(s),f.process(s),p.process(s),y.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(m))},b=()=>{r=!0,n=!0,s.isProcessing||e(m)};return{schedule:ey.reduce((x,w)=>{const _=o[w];return x[w]=(j,k=!1,S=!1)=>(r||b(),_.schedule(j,k,S)),x},{}),cancel:x=>{for(let w=0;w<ey.length;w++)o[ey[w]].cancel(x)},state:s,steps:o}}const{schedule:Mt,cancel:yl,state:Gr,steps:n_}=u8(typeof requestAnimationFrame<"u"?requestAnimationFrame:As,!0);let Ly;function vve(){Ly=void 0}const Bn={now:()=>(Ly===void 0&&Bn.set(Gr.isProcessing||ta.useManualTiming?Gr.timestamp:performance.now()),Ly),set:e=>{Ly=e,queueMicrotask(vve)}},d8=e=>t=>typeof t=="string"&&t.startsWith(e),b2=d8("--"),bve=d8("var(--"),x2=e=>bve(e)?xve.test(e.split("/*")[0].trim()):!1,xve=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Lh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Fp={...Lh,transform:e=>ea(0,1,e)},ty={...Lh,default:1},hp=e=>Math.round(e*1e5)/1e5,w2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function wve(e){return e==null}const _ve=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_2=(e,t)=>r=>!!(typeof r=="string"&&_ve.test(r)&&r.startsWith(e)||t&&!wve(r)&&Object.prototype.hasOwnProperty.call(r,t)),h8=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,a]=n.match(w2);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},jve=e=>ea(0,255,e),s_={...Lh,transform:e=>Math.round(jve(e))},pc={test:_2("rgb","red"),parse:h8("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+s_.transform(e)+", "+s_.transform(t)+", "+s_.transform(r)+", "+hp(Fp.transform(n))+")"};function kve(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Nk={test:_2("#"),parse:kve,transform:pc.transform},Rm=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Fa=Rm("deg"),Ji=Rm("%"),Ue=Rm("px"),Nve=Rm("vh"),Sve=Rm("vw"),K4={...Ji,parse:e=>Ji.parse(e)/100,transform:e=>Ji.transform(e*100)},ad={test:_2("hsl","hue"),parse:h8("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ji.transform(hp(t))+", "+Ji.transform(hp(r))+", "+hp(Fp.transform(n))+")"},gr={test:e=>pc.test(e)||Nk.test(e)||ad.test(e),parse:e=>pc.test(e)?pc.parse(e):ad.test(e)?ad.parse(e):Nk.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?pc.transform(e):ad.transform(e),getAnimatableNone:e=>{const t=gr.parse(e);return t.alpha=0,gr.transform(t)}},Eve=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Cve(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(w2))==null?void 0:t.length)||0)+(((r=e.match(Eve))==null?void 0:r.length)||0)>0}const f8="number",p8="color",Tve="var",Ave="var(",Z4="${}",Ove=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $p(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const o=t.replace(Ove,a=>(gr.test(a)?(n.color.push(i),s.push(p8),r.push(gr.parse(a))):a.startsWith(Ave)?(n.var.push(i),s.push(Tve),r.push(a)):(n.number.push(i),s.push(f8),r.push(parseFloat(a))),++i,Z4)).split(Z4);return{values:r,split:o,indexes:n,types:s}}function m8(e){return $p(e).values}function g8(e){const{split:t,types:r}=$p(e),n=t.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],s[o]!==void 0){const a=r[o];a===f8?i+=hp(s[o]):a===p8?i+=gr.transform(s[o]):i+=s[o]}return i}}const Pve=e=>typeof e=="number"?0:gr.test(e)?gr.getAnimatableNone(e):e;function Rve(e){const t=m8(e);return g8(e)(t.map(Pve))}const vl={test:Cve,parse:m8,createTransformer:g8,getAnimatableNone:Rve};function i_(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Ive({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const a=r<.5?r*(1+t):r+t-r*t,l=2*r-a;s=i_(l,a,e+1/3),i=i_(l,a,e),o=i_(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Cv(e,t){return r=>r>0?t:e}const Ht=(e,t,r)=>e+(t-e)*r,o_=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},Dve=[Nk,pc,ad],Lve=e=>Dve.find(t=>t.test(e));function G4(e){const t=Lve(e);if(!t)return!1;let r=t.parse(e);return t===ad&&(r=Ive(r)),r}const Y4=(e,t)=>{const r=G4(e),n=G4(t);if(!r||!n)return Cv(e,t);const s={...r};return i=>(s.red=o_(r.red,n.red,i),s.green=o_(r.green,n.green,i),s.blue=o_(r.blue,n.blue,i),s.alpha=Ht(r.alpha,n.alpha,i),pc.transform(s))},Sk=new Set(["none","hidden"]);function Mve(e,t){return Sk.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function zve(e,t){return r=>Ht(e,t,r)}function j2(e){return typeof e=="number"?zve:typeof e=="string"?x2(e)?Cv:gr.test(e)?Y4:Uve:Array.isArray(e)?y8:typeof e=="object"?gr.test(e)?Y4:Fve:Cv}function y8(e,t){const r=[...e],n=r.length,s=e.map((i,o)=>j2(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function Fve(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=j2(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function $ve(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][n[i]],a=e.values[o]??0;r[s]=a,n[i]++}return r}const Uve=(e,t)=>{const r=vl.createTransformer(t),n=$p(e),s=$p(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Sk.has(e)&&!s.values.length||Sk.has(t)&&!n.values.length?Mve(e,t):Om(y8($ve(n,s),s.values),r):Cv(e,t)};function v8(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Ht(e,t,r):j2(e)(e,t)}const qve=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Mt.update(t,r),stop:()=>yl(t),now:()=>Gr.isProcessing?Gr.timestamp:Bn.now()}},b8=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Tv=2e4;function k2(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Tv;)t+=r,n=e.next(t);return t>=Tv?1/0:t}function Bve(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(k2(n),Tv);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:Yi(s)}}const Vve=5;function x8(e,t,r){const n=Math.max(t-Vve,0);return Q$(r-e(n),t-n)}const tr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},a_=.001;function Wve({duration:e=tr.duration,bounce:t=tr.bounce,velocity:r=tr.velocity,mass:n=tr.mass}){let s,i,o=1-t;o=ea(tr.minDamping,tr.maxDamping,o),e=ea(tr.minDuration,tr.maxDuration,Yi(e)),o<1?(s=c=>{const u=c*o,h=u*e,f=u-r,p=Ek(c,o),y=Math.exp(-h);return a_-f/p*y},i=c=>{const u=c*o*e,h=u*r+r,f=Math.pow(o,2)*Math.pow(c,2)*e,p=Math.exp(-u),y=Ek(Math.pow(c,2),o);return(-s(c)+a_>0?-1:1)*((h-f)*p)/y}):(s=c=>{const u=Math.exp(-c*e),h=(c-r)*e+1;return-a_+u*h},i=c=>{const u=Math.exp(-c*e),h=(r-c)*(e*e);return u*h});const a=5/e,l=Kve(s,i,a);if(e=Gi(e),isNaN(l))return{stiffness:tr.stiffness,damping:tr.damping,duration:e};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:e}}}const Hve=12;function Kve(e,t,r){let n=r;for(let s=1;s<Hve;s++)n=n-e(n)/t(n);return n}function Ek(e,t){return e*Math.sqrt(1-t*t)}const Zve=["duration","bounce"],Gve=["stiffness","damping","mass"];function J4(e,t){return t.some(r=>e[r]!==void 0)}function Yve(e){let t={velocity:tr.velocity,stiffness:tr.stiffness,damping:tr.damping,mass:tr.mass,isResolvedFromDuration:!1,...e};if(!J4(e,Gve)&&J4(e,Zve))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*ea(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:tr.mass,stiffness:s,damping:i}}else{const r=Wve(e);t={...t,...r,mass:tr.mass},t.isResolvedFromDuration=!0}return t}function Av(e=tr.visualDuration,t=tr.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=Yve({...r,velocity:-Yi(r.velocity||0)}),y=f||0,m=c/(2*Math.sqrt(l*u)),b=o-i,x=Yi(Math.sqrt(l/u)),w=Math.abs(b)<5;n||(n=w?tr.restSpeed.granular:tr.restSpeed.default),s||(s=w?tr.restDelta.granular:tr.restDelta.default);let _;if(m<1){const k=Ek(x,m);_=S=>{const C=Math.exp(-m*x*S);return o-C*((y+m*x*b)/k*Math.sin(k*S)+b*Math.cos(k*S))}}else if(m===1)_=k=>o-Math.exp(-x*k)*(b+(y+x*b)*k);else{const k=x*Math.sqrt(m*m-1);_=S=>{const C=Math.exp(-m*x*S),E=Math.min(k*S,300);return o-C*((y+m*x*b)*Math.sinh(E)+k*b*Math.cosh(E))/k}}const j={calculatedDuration:p&&h||null,next:k=>{const S=_(k);if(p)a.done=k>=h;else{let C=k===0?y:0;m<1&&(C=k===0?Gi(y):x8(_,k,S));const E=Math.abs(C)<=n,T=Math.abs(o-S)<=s;a.done=E&&T}return a.value=a.done?o:S,a},toString:()=>{const k=Math.min(k2(j),Tv),S=b8(C=>j.next(k*C).value,k,30);return k+"ms "+S},toTransition:()=>{}};return j}Av.applyToOptions=e=>{const t=Bve(e,100,Av);return e.ease=t.ease,e.duration=Gi(t.duration),e.type="keyframes",e};function Ck({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,y=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let m=r*t;const b=h+m,x=o===void 0?b:o(b);x!==b&&(m=x-h);const w=E=>-m*Math.exp(-E/n),_=E=>x+w(E),j=E=>{const T=w(E),R=_(E);f.done=Math.abs(T)<=c,f.value=f.done?x:R};let k,S;const C=E=>{p(f.value)&&(k=E,S=Av({keyframes:[f.value,y(f.value)],velocity:x8(_,E,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:E=>{let T=!1;return!S&&k===void 0&&(T=!0,j(E),C(E)),k!==void 0&&E>=k?S.next(E-k):(!T&&j(E),f)}}}function Jve(e,t,r){const n=[],s=r||ta.mix||v8,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||As:t;a=Om(l,a)}n.push(a)}return n}function Xve(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(p2(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=Jve(t,n,s),l=a.length,c=u=>{if(o&&u<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const f=zp(e[h],e[h+1],u);return a[h](f)};return r?u=>c(ea(e[0],e[i-1],u)):c}function Qve(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=zp(0,t,n);e.push(Ht(r,1,s))}}function ebe(e){const t=[0];return Qve(t,e.length-1),t}function tbe(e,t){return e.map(r=>r*t)}function rbe(e,t){return e.map(()=>t||l8).splice(0,e.length-1)}function fp({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=fve(n)?n.map(H4):H4(n),i={done:!1,value:t[0]},o=tbe(r&&r.length===t.length?r:ebe(t),e),a=Xve(o,t,{ease:Array.isArray(s)?s:rbe(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const nbe=e=>e!==null;function N2(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(nbe),o=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!o||n===void 0?i[o]:n}const sbe={decay:Ck,inertia:Ck,tween:fp,keyframes:fp,spring:Av};function w8(e){typeof e.type=="string"&&(e.type=sbe[e.type])}class S2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const ibe=e=>e/100;class E2 extends S2{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,n;const{motionValue:s}=this.options;s&&s.updatedAt!==Bn.now()&&this.tick(Bn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(r=this.options).onStop)==null||n.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;w8(t);const{type:r=fp,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=r||fp;l!==fp&&typeof a[0]!="number"&&(this.mixKeyframes=Om(ibe,v8(a[0],a[1])),a=[0,100]);const c=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=k2(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=c}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:c=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:p,type:y,onUpdate:m,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const x=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,j=n;if(h){const E=Math.min(this.currentTime,s)/a;let T=Math.floor(E),R=E%1;!R&&E>=1&&(R=1),R===1&&T--,T=Math.min(T,h+1),T%2&&(f==="reverse"?(R=1-R,p&&(R-=p/a)):f==="mirror"&&(j=o)),_=ea(0,1,R)*a}const k=w?{done:!1,value:u[0]}:j.next(_);i&&(k.value=i(k.value));let{done:S}=k;!w&&l!==null&&(S=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return C&&y!==Ck&&(k.value=N2(u,this.options,b,this.speed)),m&&m(k.value),C&&this.finish(),k}then(t,r){return this.finished.then(t,r)}get duration(){return Yi(this.calculatedDuration)}get time(){return Yi(this.currentTime)}set time(t){var r;t=Gi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Bn.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Yi(this.currentTime))}play(){var t,r;if(this.isStopped)return;const{driver:n=qve,startTime:s}=this.options;this.driver||(this.driver=n(o=>this.tick(o))),(r=(t=this.options).onPlay)==null||r.call(t);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=s??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Bn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function obe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const mc=e=>e*180/Math.PI,Tk=e=>{const t=mc(Math.atan2(e[1],e[0]));return Ak(t)},abe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Tk,rotateZ:Tk,skewX:e=>mc(Math.atan(e[1])),skewY:e=>mc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Ak=e=>(e=e%360,e<0&&(e+=360),e),X4=Tk,Q4=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),eR=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),lbe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Q4,scaleY:eR,scale:e=>(Q4(e)+eR(e))/2,rotateX:e=>Ak(mc(Math.atan2(e[6],e[5]))),rotateY:e=>Ak(mc(Math.atan2(-e[2],e[0]))),rotateZ:X4,rotate:X4,skewX:e=>mc(Math.atan(e[4])),skewY:e=>mc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Ok(e){return e.includes("scale")?1:0}function Pk(e,t){if(!e||e==="none")return Ok(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=lbe,s=r;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=abe,s=a}if(!s)return Ok(t);const i=n[t],o=s[1].split(",").map(ube);return typeof i=="function"?i(o):o[i]}const cbe=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Pk(r,t)};function ube(e){return parseFloat(e.trim())}const Mh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zh=new Set(Mh),tR=e=>e===Lh||e===Ue,dbe=new Set(["x","y","z"]),hbe=Mh.filter(e=>!dbe.has(e));function fbe(e){const t=[];return hbe.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Ac={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Pk(t,"x"),y:(e,{transform:t})=>Pk(t,"y")};Ac.translateX=Ac.x;Ac.translateY=Ac.y;const Oc=new Set;let Rk=!1,Ik=!1,Dk=!1;function _8(){if(Ik){const e=Array.from(Oc).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=fbe(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var a;(a=n.getValue(i))==null||a.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Ik=!1,Rk=!1,Oc.forEach(e=>e.complete(Dk)),Oc.clear()}function j8(){Oc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ik=!0)})}function pbe(){Dk=!0,j8(),_8(),Dk=!1}class C2{constructor(t,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Oc.add(this),Rk||(Rk=!0,Mt.read(j8),Mt.resolveKeyframes(_8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const a=n.readValue(r,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}obe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Oc.delete(this)}cancel(){this.state==="scheduled"&&(Oc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const mbe=e=>e.startsWith("--");function gbe(e,t,r){mbe(t)?e.style.setProperty(t,r):e.style[t]=r}const ybe=m2(()=>window.ScrollTimeline!==void 0),vbe={};function bbe(e,t){const r=m2(e);return()=>vbe[t]??r()}const k8=bbe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hf=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,rR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hf([0,.65,.55,1]),circOut:Hf([.55,0,1,.45]),backIn:Hf([.31,.01,.66,-.59]),backOut:Hf([.33,1.53,.69,.99])};function N8(e,t){if(e)return typeof e=="function"?k8()?b8(e,t):"ease-out":c8(e)?Hf(e):Array.isArray(e)?e.map(r=>N8(r,t)||rR.easeOut):rR[e]}function xbe(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[t]:r};l&&(u.offset=l);const h=N8(a,s);Array.isArray(h)&&(u.easing=h);const f={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(u,f)}function S8(e){return typeof e=="function"&&"applyToOptions"in e}function wbe({type:e,...t}){return S8(e)&&k8()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class _be extends S2{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,p2(typeof t.type!="string");const c=wbe(t);this.animation=xbe(r,n,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=N2(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):gbe(r,n,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var t,r;const n=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Yi(Number(n))}get time(){return Yi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Gi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&ybe()?(this.animation.timeline=t,As):r(this)}}const E8={anticipate:i8,backInOut:s8,circInOut:a8};function jbe(e){return e in E8}function kbe(e){typeof e.ease=="string"&&jbe(e.ease)&&(e.ease=E8[e.ease])}const nR=10;class Nbe extends _be{constructor(t){kbe(t),w8(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const a=new E2({...o,autoplay:!1}),l=Gi(this.finishedTime??this.time);r.setWithVelocity(a.sample(l-nR).value,a.sample(l).value,nR),a.stop()}}const sR=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(vl.test(e)||e==="0")&&!e.startsWith("url("));function Sbe(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function Ebe(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=sR(s,t),a=sR(i,t);return!o||!a?!1:Sbe(e)||(r==="spring"||S8(r))&&n}function Lk(e){e.duration=0,e.type}const Cbe=new Set(["opacity","clipPath","filter","transform"]),Tbe=m2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Abe(e){var t;const{motionValue:r,name:n,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!(((t=r==null?void 0:r.owner)==null?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=r.owner.getProps();return Tbe()&&n&&Cbe.has(n)&&(n!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}const Obe=40;class Pbe extends S2{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...h}){var f;super(),this.stop=()=>{var m,b;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Bn.now();const p={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:c,element:u,...h},y=(u==null?void 0:u.KeyframeResolver)||C2;this.keyframeResolver=new y(a,(m,b,x)=>this.onKeyframesResolved(m,b,p,!x),l,c,u),(f=this.keyframeResolver)==null||f.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=n;this.resolvedAt=Bn.now(),Ebe(t,i,o,a)||((ta.instantAnimations||!l)&&(u==null||u(N2(t,n,r))),t[0]=t[t.length-1],Lk(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Obe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},f=!c&&Abe(h)?new Nbe({...h,element:h.motionValue.owner.current}):new E2(h);f.finished.then(()=>this.notifyFinished()).catch(As),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),pbe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Rbe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ibe(e){const t=Rbe.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function C8(e,t,r=1){const[n,s]=Ibe(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return Y$(o)?parseFloat(o):o}return x2(s)?C8(s,t,r+1):s}function T2(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const T8=new Set(["width","height","top","left","right","bottom",...Mh]),Dbe={test:e=>e==="auto",parse:e=>e},A8=e=>t=>t.test(e),O8=[Lh,Ue,Ji,Fa,Sve,Nve,Dbe],iR=e=>O8.find(A8(e));function Lbe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||X$(e):!0}const Mbe=new Set(["brightness","contrast","saturate","opacity"]);function zbe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(w2)||[];if(!n)return e;const s=r.replace(n,"");let i=Mbe.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const Fbe=/\b([a-z-]*)\(.*?\)/gu,Mk={...vl,getAnimatableNone:e=>{const t=e.match(Fbe);return t?t.map(zbe).join(" "):e}},oR={...Lh,transform:Math.round},$be={rotate:Fa,rotateX:Fa,rotateY:Fa,rotateZ:Fa,scale:ty,scaleX:ty,scaleY:ty,scaleZ:ty,skew:Fa,skewX:Fa,skewY:Fa,distance:Ue,translateX:Ue,translateY:Ue,translateZ:Ue,x:Ue,y:Ue,z:Ue,perspective:Ue,transformPerspective:Ue,opacity:Fp,originX:K4,originY:K4,originZ:Ue},A2={borderWidth:Ue,borderTopWidth:Ue,borderRightWidth:Ue,borderBottomWidth:Ue,borderLeftWidth:Ue,borderRadius:Ue,radius:Ue,borderTopLeftRadius:Ue,borderTopRightRadius:Ue,borderBottomRightRadius:Ue,borderBottomLeftRadius:Ue,width:Ue,maxWidth:Ue,height:Ue,maxHeight:Ue,top:Ue,right:Ue,bottom:Ue,left:Ue,padding:Ue,paddingTop:Ue,paddingRight:Ue,paddingBottom:Ue,paddingLeft:Ue,margin:Ue,marginTop:Ue,marginRight:Ue,marginBottom:Ue,marginLeft:Ue,backgroundPositionX:Ue,backgroundPositionY:Ue,...$be,zIndex:oR,fillOpacity:Fp,strokeOpacity:Fp,numOctaves:oR},Ube={...A2,color:gr,backgroundColor:gr,outlineColor:gr,fill:gr,stroke:gr,borderColor:gr,borderTopColor:gr,borderRightColor:gr,borderBottomColor:gr,borderLeftColor:gr,filter:Mk,WebkitFilter:Mk},P8=e=>Ube[e];function R8(e,t){let r=P8(e);return r!==Mk&&(r=vl),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const qbe=new Set(["auto","none","0"]);function Bbe(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!qbe.has(i)&&$p(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=R8(r,s)}class Vbe extends C2{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),x2(c))){const u=C8(c,r.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!T8.has(n)||t.length!==2)return;const[s,i]=t,o=iR(s),a=iR(i);if(o!==a)if(tR(o)&&tR(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Ac[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||Lbe(t[s]))&&n.push(s);n.length&&Bbe(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ac[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Ac[n](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(t=this.removedTransforms)!=null&&t.length&&this.removedTransforms.forEach(([l,c])=>{r.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Wbe(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const I8=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Hbe(e){return J$(e)&&"offsetHeight"in e}const aR=30,Kbe=e=>!isNaN(parseFloat(e));class Zbe{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var s;const i=Bn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Bn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Kbe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new g2);const n=this.events[t].add(r);return t==="change"?()=>{n(),Mt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>aR)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,aR);return Q$(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function eh(e,t){return new Zbe(e,t)}const{schedule:O2}=u8(queueMicrotask,!1),ti={x:!1,y:!1};function D8(){return ti.x||ti.y}function Gbe(e){return e==="x"||e==="y"?ti[e]?null:(ti[e]=!0,()=>{ti[e]=!1}):ti.x||ti.y?null:(ti.x=ti.y=!0,()=>{ti.x=ti.y=!1})}function L8(e,t){const r=Wbe(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function lR(e){return!(e.pointerType==="touch"||D8())}function Ybe(e,t,r={}){const[n,s,i]=L8(e,r),o=a=>{if(!lR(a))return;const{target:l}=a,c=t(l,a);if(typeof c!="function"||!l)return;const u=h=>{lR(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return n.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const M8=(e,t)=>t?e===t?!0:M8(e,t.parentElement):!1,P2=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Jbe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Xbe(e){return Jbe.has(e.tagName)||e.tabIndex!==-1}const My=new WeakSet;function cR(e){return t=>{t.key==="Enter"&&e(t)}}function l_(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Qbe=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=cR(()=>{if(My.has(r))return;l_(r,"down");const s=cR(()=>{l_(r,"up")}),i=()=>l_(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function uR(e){return P2(e)&&!D8()}function exe(e,t,r={}){const[n,s,i]=L8(e,r),o=a=>{const l=a.currentTarget;if(!uR(a))return;My.add(l);const c=t(l,a),u=(p,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),My.has(l)&&My.delete(l),uR(p)&&typeof c=="function"&&c(p,{success:y})},h=p=>{u(p,l===window||l===document||r.useGlobalTarget||M8(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return n.forEach(a=>{(r.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),Hbe(a)&&(a.addEventListener("focus",l=>Qbe(l,s)),!Xbe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function z8(e){return J$(e)&&"ownerSVGElement"in e}function txe(e){return z8(e)&&e.tagName==="svg"}const dn=e=>!!(e&&e.getVelocity),rxe=[...O8,gr,vl],nxe=e=>rxe.find(A8(e)),F8=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function sxe(e=!0){const t=v.useContext(d2);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=v.useId();v.useEffect(()=>{if(e)return s(i)},[e]);const o=v.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const $8=v.createContext({strict:!1}),dR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},th={};for(const e in dR)th[e]={isEnabled:t=>dR[e].some(r=>!!t[r])};function ixe(e){for(const t in e)th[t]={...th[t],...e[t]}}const oxe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ov(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||oxe.has(e)}let U8=e=>!Ov(e);function axe(e){typeof e=="function"&&(U8=t=>t.startsWith("on")?!Ov(t):e(t))}try{axe(require("@emotion/is-prop-valid").default)}catch{}function lxe(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(U8(s)||r===!0&&Ov(s)||!t&&!Ov(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const Sx=v.createContext({});function Ex(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Up(e){return typeof e=="string"||Array.isArray(e)}const R2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],I2=["initial",...R2];function Cx(e){return Ex(e.animate)||I2.some(t=>Up(e[t]))}function q8(e){return!!(Cx(e)||e.variants)}function cxe(e,t){if(Cx(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Up(r)?r:void 0,animate:Up(n)?n:void 0}}return e.inherit!==!1?t:{}}function uxe(e){const{initial:t,animate:r}=cxe(e,v.useContext(Sx));return v.useMemo(()=>({initial:t,animate:r}),[hR(t),hR(r)])}function hR(e){return Array.isArray(e)?e.join(" "):e}const qp={};function dxe(e){for(const t in e)qp[t]=e[t],b2(t)&&(qp[t].isCSSVariable=!0)}function B8(e,{layout:t,layoutId:r}){return zh.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!qp[e]||e==="opacity")}const hxe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fxe=Mh.length;function pxe(e,t,r){let n="",s=!0;for(let i=0;i<fxe;i++){const o=Mh[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||r){const c=I8(a,A2[o]);if(!l){s=!1;const u=hxe[o]||o;n+=`${u}(${c}) `}r&&(t[o]=c)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function D2(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const c=t[l];if(zh.has(l)){o=!0;continue}else if(b2(l)){s[l]=c;continue}else{const u=I8(c,A2[l]);l.startsWith("origin")?(a=!0,i[l]=u):n[l]=u}}if(t.transform||(o||r?n.transform=pxe(t,e.transform,r):n.transform&&(n.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;n.transformOrigin=`${l} ${c} ${u}`}}const L2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function V8(e,t,r){for(const n in t)!dn(t[n])&&!B8(n,r)&&(e[n]=t[n])}function mxe({transformTemplate:e},t){return v.useMemo(()=>{const r=L2();return D2(r,t,e),Object.assign({},r.vars,r.style)},[t])}function gxe(e,t){const r=e.style||{},n={};return V8(n,r,e),Object.assign(n,mxe(e,t)),n}function yxe(e,t){const r={},n=gxe(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const vxe={offset:"stroke-dashoffset",array:"stroke-dasharray"},bxe={offset:"strokeDashoffset",array:"strokeDasharray"};function xxe(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?vxe:bxe;e[i.offset]=Ue.transform(-n);const o=Ue.transform(t),a=Ue.transform(r);e[i.array]=`${o} ${a}`}function W8(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,c,u){if(D2(e,a,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&xxe(h,s,i,o,!1)}const H8=()=>({...L2(),attrs:{}}),K8=e=>typeof e=="string"&&e.toLowerCase()==="svg";function wxe(e,t,r,n){const s=v.useMemo(()=>{const i=H8();return W8(i,t,K8(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};V8(i,e.style,e),s.style={...i,...s.style}}return s}const _xe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function M2(e){return typeof e!="string"||e.includes("-")?!1:!!(_xe.indexOf(e)>-1||/[A-Z]/u.test(e))}function jxe(e,t,r,{latestValues:n},s,i=!1){const o=(M2(e)?wxe:yxe)(t,n,s,e),a=lxe(t,typeof e=="string",i),l=e!==v.Fragment?{...a,...o,ref:r}:{},{children:c}=t,u=v.useMemo(()=>dn(c)?c.get():c,[c]);return v.createElement(e,{...l,children:u})}function fR(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function z2(e,t,r,n){if(typeof t=="function"){const[s,i]=fR(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=fR(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function zy(e){return dn(e)?e.get():e}function kxe({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:Nxe(r,n,s,e),renderState:t()}}function Nxe(e,t,r,n){const s={},i=n(e,{});for(const f in i)s[f]=zy(i[f]);let{initial:o,animate:a}=e;const l=Cx(e),c=q8(e);t&&c&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!Ex(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const y=z2(e,f[p]);if(y){const{transitionEnd:m,transition:b,...x}=y;for(const w in x){let _=x[w];if(Array.isArray(_)){const j=u?_.length-1:0;_=_[j]}_!==null&&(s[w]=_)}for(const w in m)s[w]=m[w]}}}return s}const Z8=e=>(t,r)=>{const n=v.useContext(Sx),s=v.useContext(d2),i=()=>kxe(e,t,n,s);return r?i():ive(i)};function F2(e,t,r){var n;const{style:s}=e,i={};for(const o in s)(dn(s[o])||t.style&&dn(t.style[o])||B8(o,e)||((n=r==null?void 0:r.getValue(o))==null?void 0:n.liveStyle)!==void 0)&&(i[o]=s[o]);return i}const Sxe=Z8({scrapeMotionValuesFromProps:F2,createRenderState:L2});function G8(e,t,r){const n=F2(e,t,r);for(const s in e)if(dn(e[s])||dn(t[s])){const i=Mh.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const Exe=Z8({scrapeMotionValuesFromProps:G8,createRenderState:H8}),Cxe=Symbol.for("motionComponentSymbol");function ld(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Txe(e,t,r){return v.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):ld(r)&&(r.current=n))},[t])}const $2=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Axe="framerAppearId",Y8="data-"+$2(Axe),J8=v.createContext({});function Oxe(e,t,r,n,s){var i,o;const{visualElement:a}=v.useContext(Sx),l=v.useContext($8),c=v.useContext(d2),u=v.useContext(F8).reducedMotion,h=v.useRef(null);n=n||l.renderer,!h.current&&n&&(h.current=n(e,{visualState:t,parent:a,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,p=v.useContext(J8);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&Pxe(h.current,r,s,p);const y=v.useRef(!1);v.useInsertionEffect(()=>{f&&y.current&&f.update(r,c)});const m=r[Y8],b=v.useRef(!!m&&!((i=window.MotionHandoffIsComplete)!=null&&i.call(window,m))&&((o=window.MotionHasOptimisedAnimation)==null?void 0:o.call(window,m)));return ove(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),v.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,m)}),b.current=!1),f.enteringChildren=void 0)}),f}function Pxe(e,t,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:X8(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&ld(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:l,layoutRoot:c})}function X8(e){if(e)return e.options.allowProjection!==!1?e.projection:X8(e.parent)}function c_(e,{forwardMotionProps:t=!1}={},r,n){r&&ixe(r);const s=M2(e)?Exe:Sxe;function i(a,l){let c;const u={...v.useContext(F8),...a,layoutId:Rxe(a)},{isStatic:h}=u,f=uxe(a),p=s(a,h);if(!h&&u2){Ixe();const y=Dxe(u);c=y.MeasureLayout,f.visualElement=Oxe(e,p,u,n,y.ProjectionNode)}return d.jsxs(Sx.Provider,{value:f,children:[c&&f.visualElement?d.jsx(c,{visualElement:f.visualElement,...u}):null,jxe(e,a,Txe(p,f.visualElement,l),p,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=v.forwardRef(i);return o[Cxe]=e,o}function Rxe({layoutId:e}){const t=v.useContext(G$).id;return t&&e!==void 0?t+"-"+e:e}function Ixe(e,t){v.useContext($8).strict}function Dxe(e){const{drag:t,layout:r}=th;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function Lxe(e,t){if(typeof Proxy>"u")return c_;const r=new Map,n=(i,o)=>c_(i,o,e,t),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,c_(o,void 0,e,t)),r.get(o))})}function Q8({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Mxe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function zxe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function u_(e){return e===void 0||e===1}function zk({scale:e,scaleX:t,scaleY:r}){return!u_(e)||!u_(t)||!u_(r)}function oc(e){return zk(e)||eU(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function eU(e){return pR(e.x)||pR(e.y)}function pR(e){return e&&e!=="0%"}function Pv(e,t,r){const n=e-r,s=t*n;return r+s}function mR(e,t,r,n,s){return s!==void 0&&(e=Pv(e,s,n)),Pv(e,r,n)+t}function Fk(e,t=0,r=1,n,s){e.min=mR(e.min,t,r,n,s),e.max=mR(e.max,t,r,n,s)}function tU(e,{x:t,y:r}){Fk(e.x,t.translate,t.scale,t.originPoint),Fk(e.y,r.translate,r.scale,r.originPoint)}const gR=.999999999999,yR=1.0000000000001;function Fxe(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ud(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,tU(e,o)),n&&oc(i.latestValues)&&ud(e,i.latestValues))}t.x<yR&&t.x>gR&&(t.x=1),t.y<yR&&t.y>gR&&(t.y=1)}function cd(e,t){e.min=e.min+t,e.max=e.max+t}function vR(e,t,r,n,s=.5){const i=Ht(e.min,e.max,s);Fk(e,t,r,i,n)}function ud(e,t){vR(e.x,t.x,t.scaleX,t.scale,t.originX),vR(e.y,t.y,t.scaleY,t.scale,t.originY)}function rU(e,t){return Q8(zxe(e.getBoundingClientRect(),t))}function $xe(e,t,r){const n=rU(e,r),{scroll:s}=t;return s&&(cd(n.x,s.offset.x),cd(n.y,s.offset.y)),n}const bR=()=>({translate:0,scale:1,origin:0,originPoint:0}),dd=()=>({x:bR(),y:bR()}),xR=()=>({min:0,max:0}),ir=()=>({x:xR(),y:xR()}),$k={current:null},nU={current:!1};function Uxe(){if(nU.current=!0,!!u2)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>$k.current=e.matches;e.addEventListener("change",t),t()}else $k.current=!1}const qxe=new WeakMap;function Bxe(e,t,r){for(const n in t){const s=t[n],i=r[n];if(dn(s))e.addValue(n,s);else if(dn(i))e.addValue(n,eh(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(n);e.addValue(n,eh(o!==void 0?o:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const wR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Vxe{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=C2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Bn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Mt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Cx(r),this.isVariantNode=q8(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&dn(p)&&p.set(l[f])}}mount(t){var r;this.current=t,qxe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),nU.current||Uxe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$k.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),yl(this.notifyUpdate),yl(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=zh.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Mt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in th){const r=th[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ir()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<wR.length;n++){const s=wR[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Bxe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=eh(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(Y$(n)||X$(n))?n=parseFloat(n):!nxe(n)&&vl.test(r)&&(n=R8(t,r)),this.setBaseTarget(t,dn(n)?n.get():n)),dn(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=z2(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);o&&(s=o[t])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!dn(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new g2),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){O2.render(this.render)}}class sU extends Vxe{constructor(){super(...arguments),this.KeyframeResolver=Vbe}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;dn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function iU(e,{style:t,vars:r},n,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function Wxe(e){return window.getComputedStyle(e)}class Hxe extends sU{constructor(){super(...arguments),this.type="html",this.renderInstance=iU}readValueFromInstance(t,r){var n;if(zh.has(r))return(n=this.projection)!=null&&n.isProjecting?Ok(r):cbe(t,r);{const s=Wxe(t),i=(b2(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return rU(t,r)}build(t,r,n){D2(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return F2(t,r,n)}}const oU=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Kxe(e,t,r,n){iU(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(oU.has(s)?s:$2(s),t.attrs[s])}class Zxe extends sU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ir}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(zh.has(r)){const n=P8(r);return n&&n.default||0}return r=oU.has(r)?r:$2(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return G8(t,r,n)}build(t,r,n){W8(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){Kxe(t,r,n,s)}mount(t){this.isSVGTag=K8(t.tagName),super.mount(t)}}const Gxe=(e,t)=>M2(e)?new Zxe(t):new Hxe(t,{allowProjection:e!==v.Fragment});function jd(e,t,r){const n=e.getProps();return z2(n,t,r!==void 0?r:n.custom,e)}const Uk=e=>Array.isArray(e);function Yxe(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,eh(r))}function Jxe(e){return Uk(e)?e[e.length-1]||0:e}function Xxe(e,t){const r=jd(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const a=Jxe(i[o]);Yxe(e,o,a)}}function Qxe(e){return!!(dn(e)&&e.add)}function qk(e,t){const r=e.getValue("willChange");if(Qxe(r))return r.add(t);if(!r&&ta.WillChange){const n=new ta.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function aU(e){return e.props[Y8]}const ewe=e=>e!==null;function twe(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(ewe),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}const rwe={type:"spring",stiffness:500,damping:25,restSpeed:10},nwe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),swe={type:"keyframes",duration:.8},iwe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},owe=(e,{keyframes:t})=>t.length>2?swe:zh.has(e)?e.startsWith("scale")?nwe(t[1]):rwe:iwe;function awe({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const U2=(e,t,r,n={},s,i)=>o=>{const a=T2(n,e)||{},l=a.delay||n.delay||0;let{elapsed:c=0}=n;c=c-Gi(l);const u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};awe(a)||Object.assign(u,owe(e,u)),u.duration&&(u.duration=Gi(u.duration)),u.repeatDelay&&(u.repeatDelay=Gi(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Lk(u),u.delay===0&&(h=!0)),(ta.instantAnimations||ta.skipAnimations)&&(h=!0,Lk(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!i&&t.get()!==void 0){const f=twe(u.keyframes,a);if(f!==void 0){Mt.update(()=>{u.onUpdate(f),u.onComplete()});return}}return a.isSync?new E2(u):new Pbe(u)};function lwe({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function lU(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;n&&(i=n);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const u in a){const h=e.getValue(u,e.latestValues[u]??null),f=a[u];if(f===void 0||c&&lwe(c,u))continue;const p={delay:r,...T2(i||{},u)},y=h.get();if(y!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===y&&!p.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const x=aU(e);if(x){const w=window.MotionHandoffAnimation(x,u,Mt);w!==null&&(p.startTime=w,m=!0)}}qk(e,u),h.start(U2(u,h,f,e.shouldReduceMotion&&T8.has(u)?{type:!1}:p,e,m));const b=h.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{Mt.update(()=>{o&&Xxe(e,o)})}),l}function cU(e,t,r,n=0,s=1){const i=Array.from(e).sort((l,c)=>l.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:a-i*n}function Bk(e,t,r={}){var n;const s=jd(e,t,r.type==="exit"?(n=e.presenceContext)==null?void 0:n.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const o=s?()=>Promise.all(lU(e,s,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=i;return cwe(e,t,c,u,h,f,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function cwe(e,t,r=0,n=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Bk(l,t,{...o,delay:r+(typeof n=="function"?0:n)+cU(e.variantChildren,l,n,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function uwe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>Bk(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=Bk(e,t,r);else{const s=typeof t=="function"?jd(e,t,r.custom):t;n=Promise.all(lU(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function uU(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const dwe=I2.length;function dU(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?dU(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<dwe;r++){const n=I2[r],s=e.props[n];(Up(s)||s===!1)&&(t[n]=s)}return t}const hwe=[...R2].reverse(),fwe=R2.length;function pwe(e){return t=>Promise.all(t.map(({animation:r,options:n})=>uwe(e,r,n)))}function mwe(e){let t=pwe(e),r=_R(),n=!0;const s=l=>(c,u)=>{var h;const f=jd(e,u,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:y,...m}=f;c={...c,...m,...y}}return c};function i(l){t=l(e)}function o(l){const{props:c}=e,u=dU(e.parent)||{},h=[],f=new Set;let p={},y=1/0;for(let b=0;b<fwe;b++){const x=hwe[b],w=r[x],_=c[x]!==void 0?c[x]:u[x],j=Up(_),k=x===l?w.isActive:null;k===!1&&(y=b);let S=_===u[x]&&_!==c[x]&&j;if(S&&n&&e.manuallyAnimateOnMount&&(S=!1),w.protectedKeys={...p},!w.isActive&&k===null||!_&&!w.prevProp||Ex(_)||typeof _=="boolean")continue;const C=gwe(w.prevProp,_);let E=C||x===l&&w.isActive&&!S&&j||b>y&&j,T=!1;const R=Array.isArray(_)?_:[_];let O=R.reduce(s(x),{});k===!1&&(O={});const{prevResolvedValues:I={}}=w,P={...I,...O},D=B=>{E=!0,f.has(B)&&(T=!0,f.delete(B)),w.needsAnimating[B]=!0;const q=e.getValue(B);q&&(q.liveStyle=!1)};for(const B in P){const q=O[B],K=I[B];if(p.hasOwnProperty(B))continue;let H=!1;Uk(q)&&Uk(K)?H=!uU(q,K):H=q!==K,H?q!=null?D(B):f.add(B):q!==void 0&&f.has(B)?D(B):w.protectedKeys[B]=!0}w.prevProp=_,w.prevResolvedValues=O,w.isActive&&(p={...p,...O}),n&&e.blockInitialAnimation&&(E=!1);const L=S&&C;E&&(!L||T)&&h.push(...R.map(B=>{const q={type:x};if(typeof B=="string"&&n&&!L&&e.manuallyAnimateOnMount&&e.parent){const{parent:K}=e,H=jd(K,B);if(K.enteringChildren&&H){const{delayChildren:$}=H.transition||{};q.delay=cU(K.enteringChildren,e,$)}}return{animation:B,options:q}}))}if(f.size){const b={};if(typeof c.initial!="boolean"){const x=jd(e,Array.isArray(c.initial)?c.initial[0]:c.initial);x&&x.transition&&(b.transition=x.transition)}f.forEach(x=>{const w=e.getBaseTarget(x),_=e.getValue(x);_&&(_.liveStyle=!0),b[x]=w??null}),h.push({animation:b})}let m=!!h.length;return n&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),n=!1,m?t(h):Promise.resolve()}function a(l,c){var u;if(r[l].isActive===c)return Promise.resolve();(u=e.variantChildren)==null||u.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),r[l].isActive=c;const h=o(l);for(const f in r)r[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>r,reset:()=>{r=_R(),n=!0}}}function gwe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!uU(t,e):!1}function tc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _R(){return{animate:tc(!0),whileInView:tc(),whileHover:tc(),whileTap:tc(),whileDrag:tc(),whileFocus:tc(),exit:tc()}}class Tl{constructor(t){this.isMounted=!1,this.node=t}update(){}}class ywe extends Tl{constructor(t){super(t),t.animationState||(t.animationState=mwe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ex(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let vwe=0;class bwe extends Tl{constructor(){super(...arguments),this.id=vwe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const xwe={animation:{Feature:ywe},exit:{Feature:bwe}};function Bp(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Im(e){return{point:{x:e.pageX,y:e.pageY}}}const wwe=e=>t=>P2(t)&&e(t,Im(t));function pp(e,t,r,n){return Bp(e,t,wwe(r),n)}const hU=1e-4,_we=1-hU,jwe=1+hU,fU=.01,kwe=0-fU,Nwe=0+fU;function Sn(e){return e.max-e.min}function Swe(e,t,r){return Math.abs(e-t)<=r}function jR(e,t,r,n=.5){e.origin=n,e.originPoint=Ht(t.min,t.max,e.origin),e.scale=Sn(r)/Sn(t),e.translate=Ht(r.min,r.max,e.origin)-e.originPoint,(e.scale>=_we&&e.scale<=jwe||isNaN(e.scale))&&(e.scale=1),(e.translate>=kwe&&e.translate<=Nwe||isNaN(e.translate))&&(e.translate=0)}function mp(e,t,r,n){jR(e.x,t.x,r.x,n?n.originX:void 0),jR(e.y,t.y,r.y,n?n.originY:void 0)}function kR(e,t,r){e.min=r.min+t.min,e.max=e.min+Sn(t)}function Ewe(e,t,r){kR(e.x,t.x,r.x),kR(e.y,t.y,r.y)}function NR(e,t,r){e.min=t.min-r.min,e.max=e.min+Sn(t)}function gp(e,t,r){NR(e.x,t.x,r.x),NR(e.y,t.y,r.y)}function bs(e){return[e("x"),e("y")]}const pU=({current:e})=>e?e.ownerDocument.defaultView:null,SR=(e,t)=>Math.abs(e-t);function Cwe(e,t){const r=SR(e.x,t.x),n=SR(e.y,t.y);return Math.sqrt(r**2+n**2)}class mU{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=h_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=Cwe(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:m}=f,{timestamp:b}=Gr;this.history.push({...m,timestamp:b});const{onStart:x,onMove:w}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=d_(p,this.transformPagePoint),Mt.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:y,onSessionEnd:m,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=h_(f.type==="pointercancel"?this.lastMoveEventInfo:d_(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,x),m&&m(f,x)},!P2(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const a=Im(t),l=d_(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Gr;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=r;h&&h(t,h_(l,this.history)),this.removeListeners=Om(pp(this.contextWindow,"pointermove",this.handlePointerMove),pp(this.contextWindow,"pointerup",this.handlePointerUp),pp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),yl(this.updatePoint)}}function d_(e,t){return t?{point:t(e.point)}:e}function ER(e,t){return{x:e.x-t.x,y:e.y-t.y}}function h_({point:e},t){return{point:e,delta:ER(e,gU(t)),offset:ER(e,Twe(t)),velocity:Awe(t,.1)}}function Twe(e){return e[0]}function gU(e){return e[e.length-1]}function Awe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=gU(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Gi(t)));)r--;if(!n)return{x:0,y:0};const i=Yi(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Owe(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ht(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ht(r,e,n.max):Math.min(e,r)),e}function CR(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Pwe(e,{top:t,left:r,bottom:n,right:s}){return{x:CR(e.x,r,s),y:CR(e.y,t,n)}}function TR(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function Rwe(e,t){return{x:TR(e.x,t.x),y:TR(e.y,t.y)}}function Iwe(e,t){let r=.5;const n=Sn(e),s=Sn(t);return s>n?r=zp(t.min,t.max-n,e.min):n>s&&(r=zp(e.min,e.max-s,t.min)),ea(0,1,r)}function Dwe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Vk=.35;function Lwe(e=Vk){return e===!1?e=0:e===!0&&(e=Vk),{x:AR(e,"left","right"),y:AR(e,"top","bottom")}}function AR(e,t,r){return{min:OR(e,t),max:OR(e,r)}}function OR(e,t){return typeof e=="number"?e:e[t]||0}const Mwe=new WeakMap;class zwe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ir(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Im(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:y,onDragStart:m}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Gbe(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bs(x=>{let w=this.getAxisMotionValue(x).get()||0;if(Ji.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const j=_.layout.layoutBox[x];j&&(w=Sn(j)*(parseFloat(w)/100))}}this.originPoint[x]=w}),m&&Mt.postRender(()=>m(h,f)),qk(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:m,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=f;if(y&&this.currentDirection===null){this.currentDirection=Fwe(x),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),b&&b(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>bs(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new mU(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:pU(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Mt.postRender(()=>a(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!ry(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=Owe(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)==null?void 0:t.layout,i=this.constraints;r&&ld(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=Pwe(s.layoutBox,r):this.constraints=!1,this.elastic=Lwe(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&bs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Dwe(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ld(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=$xe(n,s.root,this.visualElement.getTransformPagePoint());let o=Rwe(s.layout.layoutBox,i);if(r){const a=r(Mxe(o));this.hasMutatedConstraints=!!a,a&&(o=Q8(a))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=bs(u=>{if(!ry(u,r,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:n?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return qk(this.visualElement,t),n.start(U2(t,n,0,r,this.visualElement,!1))}stopAnimation(){bs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){bs(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps();return n[r]||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){bs(r=>{const{drag:n}=this.getProps();if(!ry(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[r];i.set(t[r]-Ht(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!ld(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};bs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=Iwe({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),bs(o=>{if(!ry(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ht(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;Mwe.set(this.visualElement,this);const t=this.visualElement.current,r=pp(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();ld(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Mt.read(n);const o=Bp(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(bs(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Vk,dragMomentum:a=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function ry(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Fwe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class $we extends Tl{constructor(t){super(t),this.removeGroupControls=As,this.removeListeners=As,this.controls=new zwe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||As}unmount(){this.removeGroupControls(),this.removeListeners()}}const PR=e=>(t,r)=>{e&&Mt.postRender(()=>e(t,r))};class Uwe extends Tl{constructor(){super(...arguments),this.removePointerDownListener=As}onPointerDown(t){this.session=new mU(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pU(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:PR(t),onStart:PR(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Mt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=pp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Fy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function RR(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const wf={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ue.test(e))e=parseFloat(e);else return e;const r=RR(e,t.target.x),n=RR(e,t.target.y);return`${r}% ${n}%`}},qwe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=vl.parse(e);if(s.length>5)return n;const i=vl.createTransformer(e),o=typeof s[0]!="number"?1:0,a=r.x.scale*t.x,l=r.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const c=Ht(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};let f_=!1;class Bwe extends v.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;dxe(Vwe),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),f_&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Fy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,f_=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Mt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),O2.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;f_=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function yU(e){const[t,r]=sxe(),n=v.useContext(G$);return d.jsx(Bwe,{...e,layoutGroup:n,switchLayoutGroup:v.useContext(J8),isPresent:t,safeToRemove:r})}const Vwe={borderRadius:{...wf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wf,borderTopRightRadius:wf,borderBottomLeftRadius:wf,borderBottomRightRadius:wf,boxShadow:qwe};function Wwe(e,t,r){const n=dn(e)?e:eh(e);return n.start(U2("",n,t,r)),n.animation}const Hwe=(e,t)=>e.depth-t.depth;class Kwe{constructor(){this.children=[],this.isDirty=!1}add(t){h2(this.children,t),this.isDirty=!0}remove(t){f2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Hwe),this.isDirty=!1,this.children.forEach(t)}}function Zwe(e,t){const r=Bn.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(yl(n),e(i-t))};return Mt.setup(n,!0),()=>yl(n)}const vU=["TopLeft","TopRight","BottomLeft","BottomRight"],Gwe=vU.length,IR=e=>typeof e=="string"?parseFloat(e):e,DR=e=>typeof e=="number"||Ue.test(e);function Ywe(e,t,r,n,s,i){s?(e.opacity=Ht(0,r.opacity??1,Jwe(n)),e.opacityExit=Ht(t.opacity??1,0,Xwe(n))):i&&(e.opacity=Ht(t.opacity??1,r.opacity??1,n));for(let o=0;o<Gwe;o++){const a=`border${vU[o]}Radius`;let l=LR(t,a),c=LR(r,a);l===void 0&&c===void 0||(l||(l=0),c||(c=0),l===0||c===0||DR(l)===DR(c)?(e[a]=Math.max(Ht(IR(l),IR(c),n),0),(Ji.test(c)||Ji.test(l))&&(e[a]+="%")):e[a]=c)}(t.rotate||r.rotate)&&(e.rotate=Ht(t.rotate||0,r.rotate||0,n))}function LR(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Jwe=bU(0,.5,o8),Xwe=bU(.5,.95,As);function bU(e,t,r){return n=>n<e?0:n>t?1:r(zp(e,t,n))}function MR(e,t){e.min=t.min,e.max=t.max}function fs(e,t){MR(e.x,t.x),MR(e.y,t.y)}function zR(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function FR(e,t,r,n,s){return e-=t,e=Pv(e,1/r,n),s!==void 0&&(e=Pv(e,1/s,n)),e}function Qwe(e,t=0,r=1,n=.5,s,i=e,o=e){if(Ji.test(t)&&(t=parseFloat(t),t=Ht(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Ht(i.min,i.max,n);e===i&&(a-=t),e.min=FR(e.min,t,r,a,s),e.max=FR(e.max,t,r,a,s)}function $R(e,t,[r,n,s],i,o){Qwe(e,t[r],t[n],t[s],t.scale,i,o)}const e0e=["x","scaleX","originX"],t0e=["y","scaleY","originY"];function UR(e,t,r,n){$R(e.x,t,e0e,r?r.x:void 0,n?n.x:void 0),$R(e.y,t,t0e,r?r.y:void 0,n?n.y:void 0)}function qR(e){return e.translate===0&&e.scale===1}function xU(e){return qR(e.x)&&qR(e.y)}function BR(e,t){return e.min===t.min&&e.max===t.max}function r0e(e,t){return BR(e.x,t.x)&&BR(e.y,t.y)}function VR(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function wU(e,t){return VR(e.x,t.x)&&VR(e.y,t.y)}function WR(e){return Sn(e.x)/Sn(e.y)}function HR(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class n0e{constructor(){this.members=[]}add(t){h2(this.members,t),t.scheduleRender()}remove(t){if(f2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function s0e(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:p,skewY:y}=r;c&&(n=`perspective(${c}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),y&&(n+=`skewY(${y}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const p_=["","X","Y","Z"],i0e=1e3;let o0e=0;function m_(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function _U(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=aU(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Mt,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&_U(n)}function jU({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t==null?void 0:t()){this.id=o0e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(c0e),this.nodes.forEach(f0e),this.nodes.forEach(p0e),this.nodes.forEach(u0e)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Kwe)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new g2),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const a=this.eventHandlers.get(i);a&&a.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=z8(i)&&!txe(i),this.instance=i;const{layoutId:o,layout:a,visualElement:l}=this.options;if(l&&!l.current&&l.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(a||o)&&(this.isLayoutDirty=!0),e){let c,u=0;const h=()=>this.root.updateBlockedByResize=!1;Mt.read(()=>{u=window.innerWidth}),e(i,()=>{const f=window.innerWidth;f!==u&&(u=f,this.root.updateBlockedByResize=!0,c&&c(),c=Zwe(h,250),Fy.hasAnimatedSinceResize&&(Fy.hasAnimatedSinceResize=!1,this.nodes.forEach(GR)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&l&&(o||a)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||l.getDefaultTransition()||b0e,{onLayoutAnimationStart:y,onLayoutAnimationComplete:m}=l.getProps(),b=!this.targetLayout||!wU(this.targetLayout,f),x=!u&&h;if(this.options.layoutRoot||this.resumeFrom||x||u&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...T2(p,"layout"),onPlay:y,onComplete:m};(l.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(c,x)}else u||GR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(m0e),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_U(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const u=this.path[c];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:o,layout:a}=this.options;if(o===void 0&&!a)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ZR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(h0e),this.nodes.forEach(a0e),this.nodes.forEach(l0e)):this.nodes.forEach(ZR),this.clearAllSnapshots();const i=Bn.now();Gr.delta=ea(0,1e3/60,i-Gr.timestamp),Gr.timestamp=i,Gr.isProcessing=!0,n_.update.process(Gr),n_.preRender.process(Gr),n_.render.process(Gr),Gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,O2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(d0e),this.sharedNodes.forEach(g0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Mt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Mt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Sn(this.snapshot.measuredBox.x)&&!Sn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ir(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const a=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:a,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!xU(this.projectionDelta),a=this.getTransformTemplate(),l=a?a(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;i&&this.instance&&(o||oc(this.latestValues)||c)&&(s(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let a=this.removeElementScroll(o);return i&&(a=this.removeTransform(a)),x0e(a),{animationId:this.root.animationId,measuredBox:o,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:o}=this.options;if(!o)return ir();const a=o.measureViewportBox();if(!((i=this.scroll)!=null&&i.wasRoot||this.path.some(w0e))){const{scroll:l}=this.root;l&&(cd(a.x,l.offset.x),cd(a.y,l.offset.y))}return a}removeElementScroll(i){var o;const a=ir();if(fs(a,i),(o=this.scroll)!=null&&o.wasRoot)return a;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;c!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&fs(a,i),cd(a.x,u.offset.x),cd(a.y,u.offset.y))}return a}applyTransform(i,o=!1){const a=ir();fs(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ud(a,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),oc(c.latestValues)&&ud(a,c.latestValues)}return oc(this.latestValues)&&ud(a,this.latestValues),a}removeTransform(i){const o=ir();fs(o,i);for(let a=0;a<this.path.length;a++){const l=this.path[a];if(!l.instance||!oc(l.latestValues))continue;zk(l.latestValues)&&l.updateSnapshot();const c=ir(),u=l.measurePageBox();fs(c,u),UR(o,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return oc(this.latestValues)&&UR(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var o;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(o=this.parent)!=null&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:u}=this.options;if(!(!this.layout||!(c||u))){if(this.resolvedRelativeTargetAt=Gr.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ir(),this.relativeTargetOrigin=ir(),gp(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),fs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ir(),this.targetWithTransforms=ir()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ewe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fs(this.target,this.layout.layoutBox),tU(this.target,this.targetDelta)):fs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ir(),this.relativeTargetOrigin=ir(),gp(this.relativeTargetOrigin,this.target,h.target),fs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||zk(this.parent.latestValues)||eU(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(i=this.parent)!=null&&i.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Gr.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;fs(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Fxe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ir());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(zR(this.prevProjectionDelta.x,this.projectionDelta.x),zR(this.prevProjectionDelta.y,this.projectionDelta.y)),mp(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!HR(this.projectionDelta.x,this.prevProjectionDelta.x)||!HR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),i){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=dd(),this.projectionDelta=dd(),this.projectionDeltaWithTransform=dd()}setAnimationOrigin(i,o=!1){const a=this.snapshot,l=a?a.latestValues:{},c={...this.latestValues},u=dd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=ir(),f=a?a.source:void 0,p=this.layout?this.layout.source:void 0,y=f!==p,m=this.getStack(),b=!m||m.members.length<=1,x=!!(y&&!b&&this.options.crossfade===!0&&!this.path.some(v0e));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const j=_/1e3;YR(u.x,i.x,j),YR(u.y,i.y,j),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gp(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),y0e(this.relativeTarget,this.relativeTargetOrigin,h,j),w&&r0e(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ir()),fs(w,this.relativeTarget)),y&&(this.animationValues=c,Ywe(c,l,this.latestValues,j,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var o,a,l;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(l=(a=this.resumingFrom)==null?void 0:a.currentAnimation)==null||l.stop(),this.pendingAnimation&&(yl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Mt.update(()=>{Fy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=eh(0)),this.currentAnimation=Wwe(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),i.onUpdate&&i.onUpdate(c)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(i0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:a,layout:l,latestValues:c}=i;if(!(!o||!a||!l)){if(this!==i&&this.layout&&l&&kU(this.options.animationType,this.layout.layoutBox,l.layoutBox)){a=this.target||ir();const u=Sn(this.layout.layoutBox.x);a.x.min=i.target.x.min,a.x.max=a.x.min+u;const h=Sn(this.layout.layoutBox.y);a.y.min=i.target.y.min,a.y.max=a.y.min+h}fs(o,a),ud(o,c),mp(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new n0e),this.sharedNodes.get(i).add(o);const a=o.options.initialPromotionConfig;o.promote({transition:a?a.transition:void 0,preserveFollowOpacity:a&&a.shouldPreserveFollowOpacity?a.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:o}=this.options;return o?((i=this.getStack())==null?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:o}=this.options;return o?(i=this.getStack())==null?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:a}={}){const l=this.getStack();l&&l.promote(this,a),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:a}=i;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(o=!0),!o)return;const l={};a.z&&m_("z",i,l,this.animationValues);for(let c=0;c<p_.length;c++)m_(`rotate${p_[c]}`,i,l,this.animationValues),m_(`skew${p_[c]}`,i,l,this.animationValues);i.render();for(const c in l)i.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const a=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=zy(o==null?void 0:o.pointerEvents)||"",i.transform=a?a(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=zy(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!oc(this.latestValues)&&(i.transform=a?a({},""):"none",this.hasProjected=!1);return}i.visibility="";const c=l.animationValues||l.latestValues;this.applyTransformsToTarget();let u=s0e(this.projectionDeltaWithTransform,this.treeScale,c);a&&(u=a(c,u)),i.transform=u;const{x:h,y:f}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,l.animationValues?i.opacity=l===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:i.opacity=l===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in qp){if(c[p]===void 0)continue;const{correct:y,applyTo:m,isCSSVariable:b}=qp[p],x=u==="none"?c[p]:y(c[p],l);if(m){const w=m.length;for(let _=0;_<w;_++)i[m[_]]=x}else b?this.options.visualElement.renderState.vars[p]=x:i[p]=x}this.options.layoutId&&(i.pointerEvents=l===this?zy(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var o;return(o=i.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(KR),this.root.sharedNodes.clear()}}}function a0e(e){e.updateLayout()}function l0e(e){var t;const r=((t=e.resumeFrom)==null?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?bs(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],p=Sn(f);f.min=n[h].min,f.max=f.min+p}):kU(i,r.layoutBox,n)&&bs(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],p=Sn(n[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const a=dd();mp(a,n,r.layoutBox);const l=dd();o?mp(l,e.applyTransform(s,!0),r.measuredBox):mp(l,n,r.layoutBox);const c=!xU(a);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const y=ir();gp(y,r.layoutBox,f.layoutBox);const m=ir();gp(m,n,p.layoutBox),wU(y,m)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function c0e(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function u0e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function d0e(e){e.clearSnapshot()}function KR(e){e.clearMeasurements()}function ZR(e){e.isLayoutDirty=!1}function h0e(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function GR(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function f0e(e){e.resolveTargetDelta()}function p0e(e){e.calcProjection()}function m0e(e){e.resetSkewAndRotation()}function g0e(e){e.removeLeadSnapshot()}function YR(e,t,r){e.translate=Ht(t.translate,0,r),e.scale=Ht(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function JR(e,t,r,n){e.min=Ht(t.min,r.min,n),e.max=Ht(t.max,r.max,n)}function y0e(e,t,r,n){JR(e.x,t.x,r.x,n),JR(e.y,t.y,r.y,n)}function v0e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const b0e={duration:.45,ease:[.4,0,.1,1]},XR=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),QR=XR("applewebkit/")&&!XR("chrome/")?Math.round:As;function eI(e){e.min=QR(e.min),e.max=QR(e.max)}function x0e(e){eI(e.x),eI(e.y)}function kU(e,t,r){return e==="position"||e==="preserve-aspect"&&!Swe(WR(t),WR(r),.2)}function w0e(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const _0e=jU({attachResizeListener:(e,t)=>Bp(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),g_={current:void 0},NU=jU({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!g_.current){const e=new _0e({});e.mount(window),e.setOptions({layoutScroll:!0}),g_.current=e}return g_.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),j0e={pan:{Feature:Uwe},drag:{Feature:$we,ProjectionNode:NU,MeasureLayout:yU}};function tI(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Mt.postRender(()=>i(t,Im(t)))}class k0e extends Tl{mount(){const{current:t}=this.node;t&&(this.unmount=Ybe(t,(r,n)=>(tI(this.node,n,"Start"),s=>tI(this.node,s,"End"))))}unmount(){}}class N0e extends Tl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Om(Bp(this.node.current,"focus",()=>this.onFocus()),Bp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function rI(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Mt.postRender(()=>i(t,Im(t)))}class S0e extends Tl{mount(){const{current:t}=this.node;t&&(this.unmount=exe(t,(r,n)=>(rI(this.node,n,"Start"),(s,{success:i})=>rI(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Wk=new WeakMap,y_=new WeakMap,E0e=e=>{const t=Wk.get(e.target);t&&t(e)},C0e=e=>{e.forEach(E0e)};function T0e({root:e,...t}){const r=e||document;y_.has(r)||y_.set(r,{});const n=y_.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(C0e,{root:e,...t})),n[s]}function A0e(e,t,r){const n=T0e(t);return Wk.set(e,r),n.observe(e),()=>{Wk.delete(e),n.unobserve(e)}}const O0e={some:0,all:1};class P0e extends Tl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:O0e[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return A0e(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(R0e(t,r))&&this.startObserver()}unmount(){}}function R0e({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const I0e={inView:{Feature:P0e},tap:{Feature:S0e},focus:{Feature:N0e},hover:{Feature:k0e}},D0e={layout:{ProjectionNode:NU,MeasureLayout:yU}},L0e={...xwe,...I0e,...j0e,...D0e},v_=Lxe(L0e,Gxe),M0e=()=>{const{isAuthenticated:e}=jh(),[t,r]=v.useState(null),[n,s]=v.useState(!1),i=[{id:"monthly",name:"Monthly Membership",price:9.99,interval:"month",features:["Access to all released content","New chapters as they release","Exclusive behind-the-scenes","Early character reveals","Community discussions","Author notes and insights"],paypalPlanId:"monthly_plan_id",highlight:"Perfect for new readers"},{id:"yearly",name:"Annual Membership",price:99.99,interval:"year",features:["Everything in Monthly plan","2 months free (17% savings)","Priority content access","Exclusive annual content","Direct Q&A with author","Member-only events"],popular:!0,paypalPlanId:"yearly_plan_id",highlight:"Best value - Save $19.89"}],o=c=>{if(!e){window.location.href="/login?returnTo=/subscribe";return}r(i.find(u=>u.id===c)||null),s(!0)},a=()=>s(!1),l=()=>s(!1);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 to-background",children:d.jsx("div",{className:"container mx-auto px-4 py-24 md:py-32",children:d.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[d.jsxs(v_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[d.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-foreground mb-6 leading-tight",children:"Unlock the Full Zoroasterverse Experience"}),d.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground mb-8 max-w-3xl mx-auto",children:"Join our community of readers and get exclusive access to the complete story as it unfolds."})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-10 w-full max-w-6xl mx-auto",children:i.map((c,u)=>d.jsxs(v_.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:u*.1+.3,duration:.5},className:`relative w-full ${c.popular?"z-10 transform md:-translate-y-4":""}`,children:[c.popular&&d.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 z-20",children:d.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-amber-600 text-amber-900 px-4 py-1.5 rounded-full text-xs font-bold flex items-center gap-1.5 shadow-lg shadow-amber-500/20",children:[d.jsx(uv,{className:"w-3.5 h-3.5"}),d.jsx("span",{children:"MOST POPULAR"})]})}),d.jsxs("div",{className:`bg-card border rounded-xl p-6 transition-all duration-300 ${c.popular?"border-amber-500/30 shadow-xl shadow-amber-500/10":"border-border hover:border-primary/50 hover:shadow-lg"}`,children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:c.name}),c.highlight&&d.jsx("p",{className:"text-sm text-primary font-medium mb-3",children:c.highlight}),d.jsxs("div",{className:"mb-2",children:[d.jsxs("span",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:["$",c.price]}),d.jsxs("span",{className:"text-muted-foreground text-lg",children:["/",c.interval]})]}),c.interval==="year"&&d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Only $",(c.price/12).toFixed(2)," per month"]})]}),d.jsx("ul",{className:"space-y-3 mb-8",children:c.features.map((h,f)=>d.jsxs("li",{className:"flex items-start gap-3",children:[d.jsx(Wa,{className:`flex-shrink-0 mt-0.5 ${c.popular?"text-amber-500":"text-primary"}`,size:18}),d.jsx("span",{className:"text-muted-foreground text-sm",children:h})]},f))}),d.jsxs("button",{onClick:()=>o(c.id),className:`w-full py-3 px-6 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 ${c.popular?"bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white shadow-lg shadow-amber-500/20":"bg-primary/10 hover:bg-primary/20 text-primary border border-primary/20"}`,children:["Get Started",d.jsx(cp,{className:"w-4 h-4"})]})]})]},c.id))})]})})}),d.jsx("section",{className:"py-16 md:py-24 bg-card/30",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"What You'll Get"}),d.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[{icon:d.jsx(Pp,{className:"w-8 h-8 text-primary"}),title:"Exclusive Content",description:"Access to all chapters, including early releases and subscriber-only content."},{icon:d.jsx(F1,{className:"w-8 h-8 text-primary"}),title:"Regular Updates",description:"New chapters delivered on a consistent schedule. No waiting for complete books!"},{icon:d.jsx(kae,{className:"w-8 h-8 text-primary"}),title:"Early Access",description:"Be the first to experience new chapters and special releases."},{icon:d.jsx(sae,{className:"w-8 h-8 text-primary"}),title:"Community",description:"Join discussions, share theories, and connect with other readers."},{icon:d.jsx(DE,{className:"w-8 h-8 text-primary"}),title:"Behind the Scenes",description:"Exclusive insights into the creative process and world-building."},{icon:d.jsx(Wa,{className:"w-8 h-8 text-primary"}),title:"Ad-Free Experience",description:"Enjoy your reading without any distractions or interruptions."}].map((c,u)=>d.jsxs(v_.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:u*.1,duration:.5},className:"bg-background/50 backdrop-blur-sm p-6 rounded-xl border border-border hover:border-primary/30 transition-colors",children:[d.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center mb-4",children:c.icon}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:c.title}),d.jsx("p",{className:"text-muted-foreground text-sm",children:c.description})]},u))})]})}),d.jsx("section",{className:"py-16 bg-gradient-to-r from-primary/5 to-primary/10",children:d.jsxs("div",{className:"container mx-auto px-4 text-center",children:[d.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Begin Your Journey?"}),d.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-8",children:"Join thousands of readers who are already exploring the Zoroasterverse."}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[d.jsxs("button",{onClick:()=>o("yearly"),className:"px-8 py-3 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white font-medium rounded-lg shadow-lg shadow-amber-500/20 transition-all flex items-center gap-2",children:["Start Reading Now",d.jsx(cp,{className:"w-4 h-4"})]}),d.jsx("button",{className:"px-6 py-3 border border-border hover:border-primary/50 hover:bg-background/50 text-foreground font-medium rounded-lg transition-all",children:"Learn More"})]})]})}),n&&t&&d.jsx(sve,{product:{id:t.id,name:t.name,price:t.price*100,currency:"usd",interval:t.interval,is_subscription:!0,trial_period_days:void 0},onCancel:a,onSuccess:l})]})},z0e=()=>{const[e]=MZ(),[t,r]=v.useState(null),[n,s]=v.useState(!0);return v.useEffect(()=>{const i=e.get("session_id");r(i),s(!1)},[e]),n?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center",children:d.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900",children:[d.jsxs("div",{className:"relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),d.jsx("div",{className:"relative z-10 container mx-auto px-4 py-20 text-center",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("div",{className:"w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-8",children:d.jsx(Wa,{className:"w-12 h-12 text-white"})}),d.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"Welcome to the Zoroasterverse!"}),d.jsx("p",{className:"text-xl md:text-2xl text-gray-300 mb-8 leading-relaxed",children:"Your subscription is now active. You're ready to dive into the world of episodic storytelling and join our community of readers."}),t&&d.jsx("div",{className:"bg-gray-800 bg-opacity-50 rounded-lg p-4 mb-8 inline-block",children:d.jsxs("p",{className:"text-gray-300 text-sm",children:["Session ID: ",d.jsx("span",{className:"font-mono text-green-400",children:t})]})})]})})]}),d.jsx("div",{className:"py-20 bg-gray-800",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-16",children:"What Happens Next?"}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(Pp,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Access Your Library"}),d.jsx("p",{className:"text-gray-300",children:"Visit your library to read all available chapters and exclusive content."})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(DE,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Stay Updated"}),d.jsx("p",{className:"text-gray-300",children:"You'll receive notifications when new chapters are ready to read."})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(fv,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Join the Community"}),d.jsx("p",{className:"text-gray-300",children:"Connect with fellow readers and discuss theories in our community."})]})]})]})}),d.jsx("div",{className:"py-20 bg-gray-900",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-16",children:"Get Started Right Away"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[d.jsx(Rr,{to:"/library",className:"bg-purple-600 hover:bg-purple-700 text-white p-8 rounded-2xl transition-all duration-300 hover:scale-105 group",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Visit Your Library"}),d.jsx("p",{className:"text-purple-100 mb-6",children:"Access all available chapters and start reading immediately."})]}),d.jsx(cp,{className:"w-8 h-8 group-hover:translate-x-2 transition-transform"})]})}),d.jsx(Rr,{to:"/account",className:"bg-gray-700 hover:bg-gray-600 text-white p-8 rounded-2xl transition-all duration-300 hover:scale-105 group",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Manage Subscription"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"View your subscription details and manage your account."})]}),d.jsx(cp,{className:"w-8 h-8 group-hover:translate-x-2 transition-transform"})]})})]})]})}),d.jsx("div",{className:"py-20 bg-gradient-to-r from-purple-900 to-blue-900",children:d.jsx("div",{className:"container mx-auto px-4 text-center",children:d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsx("div",{className:"w-20 h-20 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(uv,{className:"w-10 h-10 text-white"})}),d.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Welcome Bonus Unlocked!"}),d.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"As a new subscriber, you now have access to exclusive content including:"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-left mb-8",children:[d.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Behind the Scenes"}),d.jsx("p",{className:"text-gray-300",children:"Author notes, character development insights, and world-building details."})]}),d.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Community Access"}),d.jsx("p",{className:"text-gray-300",children:"Join discussions, share theories, and connect with fellow readers."})]})]}),d.jsxs(Rr,{to:"/library",className:"bg-yellow-500 hover:bg-yellow-600 text-gray-900 px-8 py-4 rounded-xl text-xl font-bold transition-all duration-300 hover:scale-105 shadow-lg inline-flex items-center gap-2",children:["Explore Your Library",d.jsx(cp,{className:"w-6 h-6"})]})]})})}),d.jsx("div",{className:"py-16 bg-gray-800",children:d.jsxs("div",{className:"container mx-auto px-4 text-center",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Questions or Need Help?"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"Our support team is here to help you get the most out of your subscription."}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[d.jsx(Rr,{to:"/account",className:"bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg transition-colors",children:"Contact Support"}),d.jsx(Rr,{to:"/",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Return Home"})]})]})})]})},F0e=e=>e.resultType==="page",$0e=e=>e.resultType==="folder";function b_({page:e,onEdit:t}){var r,n,s;const{folderSlug:i,pageSlug:o}=nu(),[a,l]=v.useState([]),[c,u]=v.useState([]),[h,f]=v.useState(null),[p,y]=v.useState(""),[m,b]=v.useState([]),[x,w]=v.useState(!1),[_,j]=v.useState(!0),[k,S]=v.useState(!1),[C,E]=v.useState(!0),[T,R]=v.useState([]),O=v.useRef(null),I=v.useRef(null);e.excerpt;const P=async q=>{if(!q.trim()){b([]);return}try{w(!0);const{data:K,error:H}=await le.from("wiki_pages").select(`
          *,
          content, seo_title, seo_description, seo_keywords, sections,
          category:wiki_categories(*),
          user:profiles(*)
        `).or(`title.ilike.%${q}%,excerpt.ilike.%${q}%`);if(H)throw H;const $=(K||[]).map(J=>{let te=null;J.user&&typeof J.user=="object"&&!("error"in J.user)&&(te=J.user);let be=null;return J.category&&typeof J.category=="object"&&!("error"in J.category)&&(be=J.category),{...J,resultType:"page",sections:J.sections||[],content:J.content||"",excerpt:J.excerpt||"",is_published:J.is_published??!0,category_id:J.category_id??null,folder_id:J.folder_id??null,created_at:J.created_at||new Date().toISOString(),updated_at:new Date().toISOString(),created_by:J.created_by||"",view_count:J.view_count||0,slug:J.slug||"",seo_title:J.seo_title||null,seo_description:J.seo_description||null,seo_keywords:J.seo_keywords||[],category:be,user:te}});b($)}catch(K){console.error("Search error:",K),Ve.error("Failed to perform search")}finally{w(!1)}};v.useEffect(()=>{(async()=>{try{E(!0);const{data:q,error:K}=await le.from("wiki_pages").select("*, content, seo_title, seo_description, seo_keywords, sections, category:wiki_categories(*), user:profiles(*)").order("title");if(K)throw K;const H=(q||[]).map($=>{let J=null;$.user&&typeof $.user=="object"&&!("error"in $.user)&&(J=$.user);let te=null;return $.category&&typeof $.category=="object"&&!("error"in $.category)&&(te=$.category),{...$,sections:$.sections||[],content:$.content||"",seo_title:$.seo_title||"",seo_description:$.seo_description||"",seo_keywords:$.seo_keywords||[],category:te,user:J,resultType:"page"}});l(H)}catch(q){console.error("Error fetching data:",q),Ve.error("Failed to load wiki pages")}finally{E(!1)}})()},[o]);const D=q=>{const K=new Map,H=[];return q.forEach($=>{K.set($.id,{...$,children:[]})}),K.forEach($=>{if($.parent_id&&K.has($.parent_id)){const J=K.get($.parent_id);J&&(J.children=[...J.children||[],$])}else H.push($)}),H},L=q=>{var K,H,$,J,te,be,Z,G,fe,pe,ke;if(!q)return null;switch(q.type){case"heading_1":case"heading_2":case"heading_3":const W=`h${parseInt(q.type.split("_")[1])}`;return d.jsx(W,{id:`heading-${q.id}`,className:"mt-6 mb-4 font-semibold",children:(K=q.content)==null?void 0:K.text});case"paragraph":return d.jsx("p",{className:"mb-4 leading-relaxed",children:(H=q.content)==null?void 0:H.text});case"bullet_list":return d.jsx("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:(J=($=q.content)==null?void 0:$.items)==null?void 0:J.map((X,ae)=>d.jsx("li",{children:X},ae))});case"ordered_list":return d.jsx("ol",{className:"list-decimal pl-6 mb-4 space-y-1",children:(be=(te=q.content)==null?void 0:te.items)==null?void 0:be.map((X,ae)=>d.jsx("li",{children:X},ae))});case"quote":return d.jsx("blockquote",{className:"border-l-4 border-gray-300 pl-4 py-1 my-4 text-gray-600 italic",children:(Z=q.content)==null?void 0:Z.text});case"code":return d.jsx("pre",{className:"bg-gray-100 p-4 rounded-md my-4 overflow-x-auto",children:d.jsx("code",{children:(G=q.content)==null?void 0:G.code})});case"image":return d.jsxs("div",{className:"my-6",children:[d.jsx("img",{src:(fe=q.content)==null?void 0:fe.url,alt:((pe=q.content)==null?void 0:pe.alt)||"",className:"max-w-full h-auto rounded-md"}),((ke=q.content)==null?void 0:ke.caption)&&d.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:q.content.caption})]});default:return null}},B=(q,K=0)=>q.map(H=>d.jsxs("div",{className:"pl-2",children:[d.jsxs("div",{className:"flex items-center py-1 px-2 rounded hover:bg-accent cursor-pointer",children:[d.jsx(PE,{size:16,className:"mr-1 text-muted-foreground"}),d.jsx(hv,{size:14,className:"mr-2 text-blue-500"}),d.jsx("span",{className:"text-sm",children:H.name})]}),H.children&&H.children.length>0&&d.jsx("div",{className:"pl-4 border-l border-border ml-1",children:B(H.children,K+1)}),d.jsx("div",{className:"pl-6",children:a.filter($=>$.folder_id===H.id).map($=>d.jsxs(Rr,{to:`/wiki/${H.slug}/${$.slug}`,className:`flex items-center py-1 px-2 rounded text-sm ${o===$.slug?"bg-accent font-medium":"text-muted-foreground hover:bg-accent"}`,children:[d.jsx(dv,{size:12,className:"mr-2 text-gray-500"}),d.jsx("span",{className:"truncate",children:$.title})]},$.id))})]},H.id));return v.useEffect(()=>{const q=async()=>{if(!p.trim()){b([]);return}w(!0);try{await P(p)}catch(H){console.error("Search error:",H),Ve.error("Failed to perform search")}finally{w(!1)}};O.current!==null&&(window.clearTimeout(O.current),O.current=null);const K=window.setTimeout(q,500);return O.current=K,()=>{O.current!==null&&(window.clearTimeout(O.current),O.current=null)}},[p]),v.useEffect(()=>{y(""),b([])},[i,o]),e?d.jsxs("div",{className:"flex h-screen bg-background",children:[_&&d.jsxs("div",{className:"w-64 bg-card border-r border-border flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b border-border",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx(Pp,{size:16,className:"mr-2"}),"Wiki"]}),d.jsx(ct,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>j(!1),children:d.jsx(pl,{size:16})})]}),d.jsxs("div",{className:"relative",children:[d.jsx(ou,{size:16,className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),d.jsx(fi,{type:"search",placeholder:"Search wiki...",className:"w-full pl-8 h-8 text-sm",value:p,onChange:q=>y(q.target.value)})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:C?d.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):B(D(c))}),p&&d.jsxs("div",{className:"mt-2 border-t border-border pt-2",children:[d.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2 px-2",children:x?"Searching...":`Found ${m.length} results`}),!x&&m.length===0?d.jsxs("div",{className:"text-xs text-muted-foreground px-2 py-1",children:['No results found for "',p,'"']}):d.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:m.map(q=>d.jsx(Rr,{to:q.resultType==="page"?`/wiki/${q.folder_id?`${q.folder_id}/`:""}${q.slug}`:`/wiki/folder/${q.id}`,className:"flex items-center px-2 py-1.5 text-sm rounded hover:bg-accent",onClick:()=>y(""),children:F0e(q)?d.jsxs("div",{className:"flex items-center",children:[d.jsx(dv,{className:"h-4 w-4 mr-2 text-gray-500"}),d.jsx("span",{children:q.title})]}):$0e(q)?d.jsxs("div",{className:"flex items-center",children:[d.jsx(hv,{className:"h-4 w-4 mr-2 text-yellow-500"}),d.jsx("span",{children:q.name})]}):null},`${q.resultType}-${q.id}`))})]})]}),d.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[d.jsxs("header",{className:"h-14 border-b border-border flex items-center px-4",children:[!_&&d.jsx(ct,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>j(!0),children:d.jsx(AP,{size:18})}),d.jsx("div",{className:"flex-1",children:d.jsx("h1",{className:"font-semibold",children:(h==null?void 0:h.title)||"Welcome to the Wiki"})}),d.jsx(ct,{variant:"ghost",size:"icon",onClick:()=>S(!k),children:d.jsx(AP,{size:18})})]}),d.jsx("main",{ref:I,className:"flex-1 overflow-y-auto p-6 max-w-4xl mx-auto w-full",children:h?d.jsxs("article",{className:"prose max-w-none",children:[(r=h.sections)==null?void 0:r.map(q=>d.jsx("div",{children:L(q)},q.id)),d.jsxs("div",{className:"mt-12 pt-6 border-t border-border text-sm text-muted-foreground",children:["Last updated: ",new Date(h.updated_at).toLocaleDateString()]})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground",children:[d.jsx(Pp,{size:48,className:"mb-4 text-muted-foreground/50"}),d.jsx("h2",{className:"text-xl font-medium mb-2",children:"Welcome to the Wiki"}),d.jsx("p",{className:"max-w-md",children:"Select a page from the sidebar or create a new one to get started."})]})})]}),k&&d.jsxs("div",{className:"w-64 border-l border-border bg-card overflow-y-auto",children:[d.jsx("div",{className:"p-4 border-b border-border",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"font-medium",children:"Table of Contents"}),d.jsx(ct,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>S(!1),children:d.jsx(pl,{size:16})})]})}),d.jsx("div",{className:"p-4",children:T.length>0?d.jsx("nav",{className:"space-y-1",children:T.map((q,K)=>d.jsx("a",{href:`#${q.id}`,className:`block py-1 text-sm ${q.level===1?"font-medium":"text-muted-foreground"} hover:text-foreground`,style:{marginLeft:`${(q.level-1)*8}px`},children:q.text},K))}):d.jsx("p",{className:"text-sm text-muted-foreground",children:"No headings found"})})]}),d.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[d.jsx("h1",{children:e.title}),(n=e.sections)!=null&&n.length?d.jsx("div",{className:"space-y-6",children:(s=e.sections)==null?void 0:s.sort((q,K)=>(q.order_index??0)-(K.order_index??0)).map(q=>d.jsxs("div",{className:"section",children:[q.title&&d.jsx("h2",{className:"text-2xl font-semibold mb-2",children:q.title}),d.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:q.content||""}})]},q.id))}):d.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:e.excerpt||""}})]})]}):d.jsx("div",{children:"Loading..."})}const U0e=async()=>{const{data:e,error:t}=await le.from("characters").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},q0e=()=>{const{data:e,isLoading:t,isError:r,error:n}=It({queryKey:["characters"],queryFn:U0e}),s=v.useRef(null);v.useRef({});const i=v.useRef([]);return v.useEffect(()=>{if(s.current){const o=s.current;for(let a=0;a<20;a++){const l=document.createElement("div");l.className="floating-dot",l.style.left=Math.random()*100+"%",l.style.top=Math.random()*100+"%",l.style.animationDelay=Math.random()*6+"s",l.style.animationDuration=4+Math.random()*4+"s",o.appendChild(l)}}},[]),v.useEffect(()=>{const o=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&l.target.classList.add("visible")})},{threshold:.2,rootMargin:"-50px"});return i.current.forEach(a=>{a&&o.observe(a)}),()=>{i.current.forEach(a=>{a&&o.unobserve(a)})}},[e]),v.useEffect(()=>{const o=()=>{var a;const l=window.pageYOffset,c=(a=s.current)==null?void 0:a.querySelectorAll(".floating-dot");c==null||c.forEach((u,h)=>{const f=.5+h%3*.2;u.style.transform=`translateY(${l*f}px) rotate(${l*.1}deg)`})};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),t?d.jsx("div",{className:"text-center py-8 text-text-light",children:"Loading characters..."}):r?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading characters: ",n==null?void 0:n.message]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{ref:s,className:"floating-elements"}),d.jsx("section",{className:"hero-section",children:d.jsxs("div",{children:[d.jsx("h1",{className:"hero-title",children:"Meet the Characters"}),d.jsx("p",{className:"hero-subtitle",children:"Journey into the world of extraordinary souls"}),d.jsx("div",{className:"scroll-indicator",children:d.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]})}),e==null?void 0:e.map((o,a)=>{var l;return d.jsxs("section",{ref:c=>{i.current[a]=c},className:"character-section ",children:[d.jsx("div",{className:"character-silhouette",children:d.jsx("div",{className:"silhouette-container",children:o.image_url?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:o.image_url,alt:o.name,className:"character-image"}),d.jsx("div",{className:"silhouette-overlay",style:{"--mask-image":`url(${o.silhouette_url||o.image_url})`}})]}):d.jsxs("div",{className:"upload-placeholder",children:[d.jsx("div",{className:"upload-icon",children:"📷"}),d.jsx("div",{children:"No Image"})]})})}),d.jsxs("div",{className:"character-info",children:[d.jsx("h2",{className:"character-name",children:o.name}),d.jsx("p",{className:"character-title",children:o.title}),d.jsx("p",{className:"character-description",children:o.description}),d.jsx("div",{className:"character-traits",children:(l=o.traits)==null?void 0:l.map((c,u)=>d.jsx("span",{className:"trait",children:c},u))})]})]},o.id)})]})},B0e=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Locations & Factions"})}),V0e=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Glossary"})}),W0e=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Reviews"})}),H0e=async()=>{const{data:e,error:t}=await le.from("posts").select("*").eq("status","published").order("created_at",{ascending:!1});if(t)throw new Error(t.message);return e},K0e=()=>{const{data:e,isLoading:t,isError:r,error:n}=It({queryKey:["blogPosts"],queryFn:H0e});return t?d.jsx("div",{className:"text-center py-8",children:"Loading blog posts..."}):r?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading posts: ",n==null?void 0:n.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Blog & News"}),e&&e.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(s=>d.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:d.jsxs("div",{className:"p-6",children:[d.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:s.title}),d.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Published on ",new Date(s.created_at).toLocaleDateString()]}),d.jsx("div",{className:"text-gray-700 leading-relaxed line-clamp-3",dangerouslySetInnerHTML:{__html:s.content}}),d.jsx(Rr,{to:`/blog/${s.slug}`,className:"mt-4 inline-block text-blue-600 hover:text-blue-800 font-medium",children:"Read More →"})]})},s.id))}):d.jsxs("div",{className:"text-center py-12 text-gray-600",children:[d.jsx("p",{className:"text-xl mb-4",children:"No blog posts published yet."}),d.jsx("p",{children:"Check back soon for new content!"})]})]})},Z0e=()=>d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-4xl font-bold",children:"404 - Not Found"}),d.jsx("p",{className:"mt-4",children:"Sorry, the page you are looking for does not exist."}),d.jsx(Rr,{to:"/",className:"mt-6 inline-block bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",children:"Go to Home"})]}),G0e=()=>{const e=()=>{localStorage.removeItem("isAuthenticated"),localStorage.removeItem("betaApplicationStatus"),window.location.href="/login"},t={title:"The Obsidian Gate - Issue 7",chaptersRead:5,totalChapters:10,readingWindowEnd:"August 30, 2025",feedbackWindowEnd:"September 7, 2025",launchDay:"September 15, 2025",downloadLink:"#"},r=[{id:1,description:"Read the Material",completed:!1},{id:2,description:"Submit Structured Feedback",completed:!1},{id:3,description:"Convert to Public Review",completed:!1}],n=[{name:"Beta Alumni",description:"Completed 1+ beta cycles"}],s=[{id:1,title:"New Feedback Form Available!",date:"August 20, 2025",content:"The feedback form for Issue 7 is now live. Please submit your thoughts by the deadline."},{id:2,title:"Reminder: Reading Window Ends Soon",date:"August 25, 2025",content:"Just a friendly reminder that the reading window for Issue 7 closes on August 30th."}];return d.jsxs("div",{className:"p-4",children:[d.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Welcome to the Beta Reader Portal!"}),d.jsx("p",{className:"mb-4",children:"This is your central hub for all active beta reading projects and resources."}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:["Current Beta Cycle: ",t.title]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Reading Window Ends:"})," ",t.readingWindowEnd]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Feedback Window Ends:"})," ",t.feedbackWindowEnd]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Launch Day:"})," ",t.launchDay]}),d.jsxs("p",{className:"mt-2",children:[d.jsx("strong",{children:"Your Progress:"})," Chapters Read ",t.chaptersRead,"/",t.totalChapters]}),d.jsx("a",{href:t.downloadLink,className:"mt-4 inline-block bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded",children:"Download Material"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mandatory Tasks"}),d.jsx("ul",{className:"list-none",children:r.map(i=>d.jsxs("li",{className:"flex items-center mb-1",children:[d.jsx("input",{type:"checkbox",checked:i.completed,readOnly:!0,className:"mr-2"}),i.description]},i.id))}),d.jsx("a",{href:"/beta/feedback",className:"mt-4 inline-block bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded",children:"Submit Feedback"})]})]})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Announcements"}),s.length>0?d.jsx("ul",{children:s.map(i=>d.jsxs("li",{className:"mb-4 pb-4 border-b last:border-b-0",children:[d.jsx("h3",{className:"font-bold text-lg",children:i.title}),d.jsx("p",{className:"text-sm text-muted-foreground",children:i.date}),d.jsx("p",{className:"mt-1",children:i.content})]},i.id))}):d.jsx("p",{className:"text-muted-foreground",children:"No new announcements at this time."})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Rewards & Recognition"}),n.length>0?d.jsx("div",{className:"flex flex-wrap gap-4",children:n.map(i=>d.jsxs("span",{className:"bg-muted text-muted-foreground text-sm font-medium px-3 py-1 rounded-full",children:[i.name," - ",i.description]},i.name))}):d.jsx("p",{className:"text-muted-foreground",children:"Complete your first beta cycle to earn your first badge!"}),d.jsx("p",{className:"mt-4 text-muted-foreground",children:"Upon successful completion of a beta cycle, you will receive a store discount coupon."})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Important Links"}),d.jsxs("ul",{className:"list-disc list-inside text-primary",children:[d.jsx("li",{children:d.jsx("a",{href:"/beta/handbook",className:"hover:underline",children:"Beta Reader Handbook"})}),d.jsx("li",{children:d.jsx("a",{href:"/beta/timeline",className:"hover:underline",children:"Operational Timeline"})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:underline",children:"Community Forum (Discord/Private Channel)"})}),d.jsx("li",{children:d.jsx("a",{href:"/beta/nda",className:"hover:underline",children:"View NDA"})})]})]}),d.jsx("button",{onClick:e,className:"mt-8 bg-destructive hover:bg-destructive-dark text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Logout"})]})},Y0e=()=>{const e=localStorage.getItem("betaApplicationStatus")||"none";let t="",r="text-gray-800",n=null;switch(e){case"none":t="You have not yet submitted a beta reader application.",r="text-blue-700",n=d.jsx(Rr,{to:"/beta/application",className:"text-blue-500 hover:underline",children:"Apply now"});break;case"pending":t="Your beta reader application is currently under review. We will notify you of our decision soon.",r="text-yellow-700";break;case"accepted":t="Congratulations! Your beta reader application has been accepted. Welcome to the program!",r="text-green-700",n=d.jsx(Rr,{to:"/beta/portal",className:"text-green-500 hover:underline",children:"Go to Beta Portal"});break;case"rejected":t="We regret to inform you that your beta reader application was not successful at this time.",r="text-red-700";break;default:t="Unknown application status.",r="text-gray-800"}return d.jsxs("div",{className:"p-4 text-center",children:[d.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Beta Application Status"}),d.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r} bg-white`,children:[d.jsx("p",{className:"text-lg font-semibold mb-4",children:t}),n&&d.jsx("p",{className:"mt-4",children:n})]})]})},J0e=()=>{const{workId:e}=nu(),[t,r]=v.useState(null),[n,s]=v.useState(!0),[i,o]=v.useState(null),[a,l]=v.useState(null);v.useEffect(()=>{(async()=>{const{data:{user:u}}=await le.auth.getUser();u?l(u.id):(o("User not authenticated."),s(!1))})()},[]),v.useEffect(()=>{a&&e&&(async()=>{if(!(!a||!e))try{o(null);const u=await fetch(`http://localhost:3001/api/content/${e}`,{headers:{"x-user-id":a}}),h=await u.json();u.ok?r(h):o(h.message||"Failed to fetch content.")}catch(u){console.error("Error fetching work content:",u),o("An error occurred while fetching the work content.")}finally{s(!1)}})()},[a,e]);const c=async()=>{if(!(!a||!e))try{const u=await fetch(`http://localhost:3001/api/library/${a}/library/${e}/progress`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":a},body:JSON.stringify({is_finished:!0})});if(u.ok)alert("Work marked as finished!");else{const h=await u.json();alert(`Failed to mark as finished: ${h.message}`)}}catch(u){console.error("Error marking as finished:",u),alert("An error occurred while marking as finished.")}};return n?d.jsx("div",{className:"text-text-light",children:"Loading content..."}):i?d.jsxs("div",{className:"text-red-400",children:["Error: ",i]}):t?d.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"auto",fontFamily:"Arial, sans-serif"},children:[d.jsx("h2",{style:{fontSize:"2.5em",marginBottom:"10px",color:"#E0BBE4"},children:t.title}),d.jsx("p",{style:{fontSize:"1.1em",color:"#957DAD",marginBottom:"20px"},children:t.description}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{fontSize:"1.5em",marginBottom:"10px",color:"#FFC72C"},children:"Download Options:"}),t.content_urls.epub&&d.jsx("a",{href:t.content_urls.epub,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#4CAF50",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download EPUB"}),t.content_urls.pdf&&d.jsx("a",{href:t.content_urls.pdf,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#F44336",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download PDF"}),t.content_urls.mobi&&d.jsx("a",{href:t.content_urls.mobi,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#2196F3",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download MOBI"}),!t.content_urls.epub&&!t.content_urls.pdf&&!t.content_urls.mobi&&d.jsx("p",{style:{color:"#957DAD"},children:"No downloadable content available for this work."})]}),d.jsx("button",{onClick:c,style:{padding:"10px 20px",backgroundColor:"#8860D0",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",marginTop:"20px"},children:"Mark as Finished"})]}):d.jsx("div",{className:"text-text-light",children:"Content not found or not accessible."})},X0e=()=>{const{state:e,clearCart:t}=sJ(),r=uo(),[n,s]=v.useState(!1),i=(l,c)=>new Intl.NumberFormat("en-US",{style:"currency",currency:c.toUpperCase()}).format(l),o=async()=>{s(!0),setTimeout(()=>{s(!1),t(),r("/store?checkout=success")},2e3)},a=()=>{r("/store")};return e.items.length===0?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx(gae,{className:"w-16 h-16 text-text-dark mx-auto mb-4"}),d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-2",children:"Your cart is empty"}),d.jsx("p",{className:"text-text-dark mb-6",children:"Add some products to your cart before checking out."}),d.jsx("button",{onClick:a,className:"px-6 py-3 bg-secondary text-background rounded-xl hover:bg-secondary-dark transition-colors",children:"Continue Shopping"})]})}):d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background",children:d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsxs("button",{onClick:a,className:"flex items-center space-x-2 text-text-light hover:text-secondary transition-colors mb-4",children:[d.jsx(L1,{className:"w-5 h-5"}),d.jsx("span",{children:"Back to Store"})]}),d.jsx("h1",{className:"text-4xl font-heading text-text-light mb-2",children:"Checkout"}),d.jsx("p",{className:"text-text-light/70",children:"Complete your purchase"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30",children:[d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-6",children:"Order Summary"}),d.jsx("div",{className:"space-y-4 mb-6",children:e.items.map(l=>d.jsxs("div",{className:"flex items-center justify-between p-4 bg-background/30 rounded-xl",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-text-light",children:l.title}),d.jsx("p",{className:"text-sm text-text-dark",children:l.format.toUpperCase()})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-secondary font-medium",children:i(l.price,l.currency)}),d.jsxs("p",{className:"text-sm text-text-dark",children:["Qty: ",l.quantity]})]})]},l.id))}),d.jsxs("div",{className:"border-t border-border/30 pt-4",children:[d.jsxs("div",{className:"flex justify-between items-center text-lg font-medium text-text-light mb-2",children:[d.jsx("span",{children:"Subtotal:"}),d.jsx("span",{children:i(e.total,"USD")})]}),d.jsxs("div",{className:"flex justify-between items-center text-sm text-text-dark mb-4",children:[d.jsx("span",{children:"Tax:"}),d.jsx("span",{children:"Calculated at checkout"})]}),d.jsxs("div",{className:"flex justify-between items-center text-xl font-bold text-secondary",children:[d.jsx("span",{children:"Total:"}),d.jsx("span",{children:i(e.total,"USD")})]})]})]}),d.jsxs("div",{className:"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30",children:[d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-6",children:"Payment Information"}),d.jsxs("form",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-text-light mb-4",children:"Customer Information"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"First Name"}),d.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter first name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Last Name"}),d.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter last name"})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Email"}),d.jsx("input",{type:"email",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter email address"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-text-light mb-4",children:"Payment Method"}),d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-background/30 rounded-xl border border-border/30",children:[d.jsx("input",{type:"radio",name:"payment",id:"card",defaultChecked:!0,className:"text-secondary focus:ring-secondary"}),d.jsxs("label",{htmlFor:"card",className:"flex items-center space-x-2 cursor-pointer",children:[d.jsx(eae,{className:"w-5 h-5 text-secondary"}),d.jsx("span",{className:"text-text-light",children:"Credit/Debit Card"})]})]})})]}),d.jsxs("div",{className:"p-4 bg-accent/10 border border-accent/30 rounded-xl",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-accent mb-2",children:[d.jsx(uae,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:"Secure Checkout"})]}),d.jsx("p",{className:"text-sm text-text-light/70",children:"Your payment information is encrypted and secure. We never store your credit card details."})]}),d.jsx("button",{type:"button",onClick:o,disabled:n,className:"w-full bg-secondary text-background py-4 px-6 rounded-xl font-medium hover:bg-secondary-dark focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:ring-offset-2 focus:ring-offset-background-light transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-lg",children:n?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"w-5 h-5 border-2 border-background border-t-transparent rounded-full animate-spin"}),d.jsx("span",{children:"Processing..."})]}):`Complete Purchase - ${i(e.total,"USD")}`})]})]})]})]})})};var Tx={},SU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(SU);var q2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(q2);var B2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(B2);var Ax={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",a="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const c=r[i];a?c==="\\"&&i+1<s?(i++,o+=r[i]):c===a?a="":o+=c:l?c==='"'||c==="'"?a=c:c==="]"?(l=!1,n.push(o),o=""):o+=c:c==="["?(l=!0,o&&(n.push(o),o="")):c==="."?o&&(n.push(o),o=""):o+=c,i++}return o&&n.push(o),n}e.toPath=t})(Ax);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SU,r=q2,n=B2,s=Ax;function i(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?r.isDeepKey(l)?i(a,s.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let h=0;h<l.length;h++){if(u==null||t.isUnsafeProperty(l[h]))return c;u=u[l[h]]}return u===void 0?c:u}e.get=i})(Tx);var Q0e=Tx.get;const bl=ji(Q0e);var EU={exports:{}},yt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nI;function e_e(){if(nI)return yt;nI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function y(m){if(typeof m=="object"&&m!==null){var b=m.$$typeof;switch(b){case e:switch(m=m.type,m){case r:case s:case n:case l:case c:case f:return m;default:switch(m=m&&m.$$typeof,m){case o:case a:case h:case u:return m;case i:return m;default:return b}}case t:return b}}}return yt.ContextConsumer=i,yt.ContextProvider=o,yt.Element=e,yt.ForwardRef=a,yt.Fragment=r,yt.Lazy=h,yt.Memo=u,yt.Portal=t,yt.Profiler=s,yt.StrictMode=n,yt.Suspense=l,yt.SuspenseList=c,yt.isContextConsumer=function(m){return y(m)===i},yt.isContextProvider=function(m){return y(m)===o},yt.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===e},yt.isForwardRef=function(m){return y(m)===a},yt.isFragment=function(m){return y(m)===r},yt.isLazy=function(m){return y(m)===h},yt.isMemo=function(m){return y(m)===u},yt.isPortal=function(m){return y(m)===t},yt.isProfiler=function(m){return y(m)===s},yt.isStrictMode=function(m){return y(m)===n},yt.isSuspense=function(m){return y(m)===l},yt.isSuspenseList=function(m){return y(m)===c},yt.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===r||m===s||m===n||m===l||m===c||typeof m=="object"&&m!==null&&(m.$$typeof===h||m.$$typeof===u||m.$$typeof===o||m.$$typeof===i||m.$$typeof===a||m.$$typeof===p||m.getModuleId!==void 0)},yt.typeOf=y,yt}EU.exports=e_e();var t_e=EU.exports,hn=e=>e===0?0:e>0?1:-1,Is=e=>typeof e=="number"&&e!=+e,gc=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ae=e=>(typeof e=="number"||e instanceof Number)&&!Is(e),so=e=>Ae(e)||typeof e=="string",r_e=0,Vp=e=>{var t=++r_e;return"".concat(e||"").concat(t)},Os=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ae(e)&&typeof e!="string")return r;var s;if(gc(e)){if(t==null)return r;var i=e.indexOf("%");s=t*parseFloat(e.slice(0,i))/100}else s=+e;return Is(s)&&(s=r),n&&t!=null&&s>t&&(s=t),s},CU=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},sI=(e,t)=>Ae(e)&&Ae(t)?r=>e+r*(t-e):()=>t;function _f(e,t,r){return Ae(e)&&Ae(t)?e+r*(t-e):t}function TU(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):bl(n,t))===r)}var br=e=>e===null||typeof e>"u",Dm=e=>br(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),n_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function V2(e){if(typeof e!="string")return!1;var t=n_e;return t.includes(e)}var s_e=["viewBox","children"],iI=["points","pathLength"],oI={svg:s_e,polygon:iI,polyline:iI},W2=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{V2(s)&&(n[s]=i=>r[s](r,i))}),n},i_e=(e,t,r)=>n=>(e(t,r,n),null),H2=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];V2(s)&&typeof i=="function"&&(n||(n={}),n[s]=i_e(i,t,r))}),n},o_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function AU(e){if(typeof e!="string")return!1;var t=o_e;return t.includes(e)}function Al(e){var t=Object.entries(e).filter(r=>{var[n]=r;return AU(n)});return Object.fromEntries(t)}var aI=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",lI=null,x_=null,OU=e=>{if(e===lI&&Array.isArray(x_))return x_;var t=[];return v.Children.forEach(e,r=>{br(r)||(t_e.isFragment(r)?t=t.concat(OU(r.props.children)):t.push(r))}),x_=t,lI=e,t};function Ox(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>aI(s)):n=[aI(t)],OU(e).forEach(s=>{var i=bl(s,"type.displayName")||bl(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var PU=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,a_e=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var i=(s=n&&(oI==null?void 0:oI[n]))!==null&&s!==void 0?s:[],o=t.startsWith("data-"),a=typeof e!="function"&&(!!n&&i.includes(t)||AU(t)),l=!!r&&V2(t);return o||a||l},Kt=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(v.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;a_e((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},l_e=["children","width","height","viewBox","className","style","title","desc"];function Hk(){return Hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hk.apply(null,arguments)}function c_e(e,t){if(e==null)return{};var r,n,s=u_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function u_e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var K2=v.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:a,title:l,desc:c}=e,u=c_e(e,l_e),h=i||{width:n,height:s,x:0,y:0},f=at("recharts-surface",o);return v.createElement("svg",Hk({},Kt(u,!0,"svg"),{className:f,width:n,height:s,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),v.createElement("title",null,l),v.createElement("desc",null,c),r)}),d_e=["children","className"];function Kk(){return Kk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kk.apply(null,arguments)}function h_e(e,t){if(e==null)return{};var r,n,s=f_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function f_e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ds=v.forwardRef((e,t)=>{var{children:r,className:n}=e,s=h_e(e,d_e),i=at("recharts-layer",n);return v.createElement("g",Kk({className:i},Kt(s,!0),{ref:t}),r)}),RU=v.createContext(null),p_e=()=>v.useContext(RU);function Ot(e){return function(){return e}}const IU=Math.cos,Rv=Math.sin,Ni=Math.sqrt,Iv=Math.PI,Px=2*Iv,Zk=Math.PI,Gk=2*Zk,ac=1e-6,m_e=Gk-ac;function DU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function g_e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return DU;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class y_e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?DU:g_e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=n-t,c=s-r,u=o-t,h=a-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>ac)if(!(Math.abs(h*l-c*u)>ac)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,y=s-a,m=l*l+c*c,b=p*p+y*y,x=Math.sqrt(m),w=Math.sqrt(f),_=i*Math.tan((Zk-Math.acos((m+f-b)/(2*x*w)))/2),j=_/w,k=_/x;Math.abs(j-1)>ac&&this._append`L${t+j*u},${r+j*h}`,this._append`A${i},${i},0,0,${+(h*p>u*y)},${this._x1=t+k*l},${this._y1=r+k*c}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(s),l=n*Math.sin(s),c=t+a,u=r+l,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>ac||Math.abs(this._y1-u)>ac)&&this._append`L${c},${u}`,n&&(f<0&&(f=f%Gk+Gk),f>m_e?this._append`A${n},${n},0,1,${h},${t-a},${r-l}A${n},${n},0,1,${h},${this._x1=c},${this._y1=u}`:f>ac&&this._append`A${n},${n},0,${+(f>=Zk)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Z2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new y_e(t)}function G2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function LU(e){this._context=e}LU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Rx(e){return new LU(e)}function MU(e){return e[0]}function zU(e){return e[1]}function FU(e,t){var r=Ot(!0),n=null,s=Rx,i=null,o=Z2(a);e=typeof e=="function"?e:e===void 0?MU:Ot(e),t=typeof t=="function"?t:t===void 0?zU:Ot(t);function a(l){var c,u=(l=G2(l)).length,h,f=!1,p;for(n==null&&(i=s(p=o())),c=0;c<=u;++c)!(c<u&&r(h=l[c],c,l))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,c,l),+t(h,c,l));if(p)return i=null,p+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:Ot(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:Ot(+l),a):t},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Ot(!!l),a):r},a.curve=function(l){return arguments.length?(s=l,n!=null&&(i=s(n)),a):s},a.context=function(l){return arguments.length?(l==null?n=i=null:i=s(n=l),a):n},a}function ny(e,t,r){var n=null,s=Ot(!0),i=null,o=Rx,a=null,l=Z2(c);e=typeof e=="function"?e:e===void 0?MU:Ot(+e),t=typeof t=="function"?t:Ot(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?zU:Ot(+r);function c(h){var f,p,y,m=(h=G2(h)).length,b,x=!1,w,_=new Array(m),j=new Array(m);for(i==null&&(a=o(w=l())),f=0;f<=m;++f){if(!(f<m&&s(b=h[f],f,h))===x)if(x=!x)p=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),y=f-1;y>=p;--y)a.point(_[y],j[y]);a.lineEnd(),a.areaEnd()}x&&(_[f]=+e(b,f,h),j[f]=+t(b,f,h),a.point(n?+n(b,f,h):_[f],r?+r(b,f,h):j[f]))}if(w)return a=null,w+""||null}function u(){return FU().defined(s).curve(o).context(i)}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ot(+h),n=null,c):e},c.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Ot(+h),c):e},c.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ot(+h),c):n},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ot(+h),r=null,c):t},c.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Ot(+h),c):t},c.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Ot(+h),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Ot(!!h),c):s},c.curve=function(h){return arguments.length?(o=h,i!=null&&(a=o(i)),c):o},c.context=function(h){return arguments.length?(h==null?i=a=null:a=o(i=h),c):i},c}class $U{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function v_e(e){return new $U(e,!0)}function b_e(e){return new $U(e,!1)}const Y2={draw(e,t){const r=Ni(t/Iv);e.moveTo(r,0),e.arc(0,0,r,0,Px)}},x_e={draw(e,t){const r=Ni(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},UU=Ni(1/3),w_e=UU*2,__e={draw(e,t){const r=Ni(t/w_e),n=r*UU;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},j_e={draw(e,t){const r=Ni(t),n=-r/2;e.rect(n,n,r,r)}},k_e=.8908130915292852,qU=Rv(Iv/10)/Rv(7*Iv/10),N_e=Rv(Px/10)*qU,S_e=-IU(Px/10)*qU,E_e={draw(e,t){const r=Ni(t*k_e),n=N_e*r,s=S_e*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Px*i/5,a=IU(o),l=Rv(o);e.lineTo(l*r,-a*r),e.lineTo(a*n-l*s,l*n+a*s)}e.closePath()}},w_=Ni(3),C_e={draw(e,t){const r=-Ni(t/(w_*3));e.moveTo(0,r*2),e.lineTo(-w_*r,-r),e.lineTo(w_*r,-r),e.closePath()}},ps=-.5,ms=Ni(3)/2,Yk=1/Ni(12),T_e=(Yk/2+1)*3,A_e={draw(e,t){const r=Ni(t/T_e),n=r/2,s=r*Yk,i=n,o=r*Yk+r,a=-i,l=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(a,l),e.lineTo(ps*n-ms*s,ms*n+ps*s),e.lineTo(ps*i-ms*o,ms*i+ps*o),e.lineTo(ps*a-ms*l,ms*a+ps*l),e.lineTo(ps*n+ms*s,ps*s-ms*n),e.lineTo(ps*i+ms*o,ps*o-ms*i),e.lineTo(ps*a+ms*l,ps*l-ms*a),e.closePath()}};function O_e(e,t){let r=null,n=Z2(s);e=typeof e=="function"?e:Ot(e||Y2),t=typeof t=="function"?t:Ot(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ot(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ot(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Dv(){}function Lv(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function BU(e){this._context=e}BU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Lv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function P_e(e){return new BU(e)}function VU(e){this._context=e}VU.prototype={areaStart:Dv,areaEnd:Dv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Lv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function R_e(e){return new VU(e)}function WU(e){this._context=e}WU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Lv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I_e(e){return new WU(e)}function HU(e){this._context=e}HU.prototype={areaStart:Dv,areaEnd:Dv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function D_e(e){return new HU(e)}function cI(e){return e<0?-1:1}function uI(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),a=(i*s+o*n)/(n+s);return(cI(i)+cI(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function dI(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function __(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,a=(i-n)/3;e._context.bezierCurveTo(n+a,s+a*t,i-a,o-a*r,i,o)}function Mv(e){this._context=e}Mv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:__(this,this._t0,dI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,__(this,dI(this,r=uI(this,e,t)),r);break;default:__(this,this._t0,r=uI(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function KU(e){this._context=new ZU(e)}(KU.prototype=Object.create(Mv.prototype)).point=function(e,t){Mv.prototype.point.call(this,t,e)};function ZU(e){this._context=e}ZU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function L_e(e){return new Mv(e)}function M_e(e){return new KU(e)}function GU(e){this._context=e}GU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=hI(e),s=hI(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function hI(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function z_e(e){return new GU(e)}function Ix(e,t){this._context=e,this._t=t}Ix.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function F_e(e){return new Ix(e,.5)}function $_e(e){return new Ix(e,0)}function U_e(e){return new Ix(e,1)}function rh(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,a=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<a;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Jk(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function q_e(e,t){return e[t]}function B_e(e){const t=[];return t.key=e,t}function V_e(){var e=Ot([]),t=Jk,r=rh,n=q_e;function s(i){var o=Array.from(e.apply(this,arguments),B_e),a,l=o.length,c=-1,u;for(const h of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+n(h,o[a].key,c,i)]).data=h;for(a=0,u=G2(t(o));a<l;++a)o[u[a]].index=a;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ot(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ot(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Jk:typeof i=="function"?i:Ot(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??rh,s):r},s}function W_e(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}rh(e,t)}}function H_e(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,a=0;o<s;++o)a+=e[o][r][1]||0;n[r][1]+=n[r][0]=-a/2}rh(e,t)}}function K_e(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var a=0,l=0,c=0;a<o;++a){for(var u=e[t[a]],h=u[n][1]||0,f=u[n-1][1]||0,p=(h-f)/2,y=0;y<a;++y){var m=e[t[y]],b=m[n][1]||0,x=m[n-1][1]||0;p+=b-x}l+=h,c+=p*h}s[n-1][1]+=s[n-1][0]=r,l&&(r-=c/l)}s[n-1][1]+=s[n-1][0]=r,rh(e,t)}}var Z_e=["type","size","sizeType"];function Xk(){return Xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xk.apply(null,arguments)}function fI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fI(Object(r),!0).forEach(function(n){G_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G_e(e,t,r){return(t=Y_e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y_e(e){var t=J_e(e,"string");return typeof t=="symbol"?t:t+""}function J_e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X_e(e,t){if(e==null)return{};var r,n,s=Q_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Q_e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var YU={symbolCircle:Y2,symbolCross:x_e,symbolDiamond:__e,symbolSquare:j_e,symbolStar:E_e,symbolTriangle:C_e,symbolWye:A_e},eje=Math.PI/180,tje=e=>{var t="symbol".concat(Dm(e));return YU[t]||Y2},rje=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*eje;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},nje=(e,t)=>{YU["symbol".concat(Dm(e))]=t},J2=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=X_e(e,Z_e),i=pI(pI({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var h=tje(t),f=O_e().type(h).size(rje(r,n,t));return f()},{className:a,cx:l,cy:c}=i,u=Kt(i,!0);return l===+l&&c===+c&&r===+r?v.createElement("path",Xk({},u,{className:at("recharts-symbols",a),transform:"translate(".concat(l,", ").concat(c,")"),d:o()})):null};J2.registerSymbol=nje;function Qk(){return Qk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qk.apply(null,arguments)}function mI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sje(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mI(Object(r),!0).forEach(function(n){X2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X2(e,t,r){return(t=ije(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ije(e){var t=oje(e,"string");return typeof t=="symbol"?t:t+""}function oje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gs=32;class Q2 extends v.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,s=gs/2,i=gs/6,o=gs/3,a=t.inactive?n:t.color,l=r??t.type;if(l==="none")return null;if(l==="plainline")return v.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:gs,y2:s,className:"recharts-legend-icon"});if(l==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(gs,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(l==="rect")return v.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(gs/8,"h").concat(gs,"v").concat(gs*3/4,"h").concat(-gs,"z"),className:"recharts-legend-icon"});if(v.isValidElement(t.legendIcon)){var c=sje({},t);return delete c.legendIcon,v.cloneElement(t.legendIcon,c)}return v.createElement(J2,{fill:a,cx:s,cy:s,size:gs,sizeType:"diameter",type:l})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:i,iconType:o}=this.props,a={x:0,y:0,width:gs,height:gs},l={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var f=u.formatter||s,p=at({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var y=u.inactive?i:u.color,m=f?f(u.value,u,h):u.value;return v.createElement("li",Qk({className:p,style:l,key:"legend-item-".concat(h)},H2(this.props,u,h)),v.createElement(K2,{width:r,height:r,viewBox:a,style:c,"aria-label":"".concat(m," legend icon")},this.renderIcon(u,o)),v.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},m))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}X2(Q2,"displayName","Legend");X2(Q2,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var JU={},XU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],a=n(o);s.has(a)||s.set(a,o)}return Array.from(s.values())}e.uniqBy=t})(XU);var eC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(eC);var QU={},Dx={},eq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(eq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eq;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Dx);var tq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(tq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dx,r=tq;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(QU);var rq={},nq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tx;function r(n){return function(s){return t.get(s,n)}}e.property=r})(nq);var sq={},gI={},yI={},tC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(tC);var rC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(rC);var Lx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Lx);var vI;function aje(){return vI||(vI=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nC(),r=tC,n=rC,s=Lx;function i(h,f,p){return typeof p!="function"?t.isMatch(h,f):o(h,f,function y(m,b,x,w,_,j){const k=p(m,b,x,w,_,j);return k!==void 0?!!k:o(m,b,y,j)},new Map)}function o(h,f,p,y){if(f===h)return!0;switch(typeof f){case"object":return a(h,f,p,y);case"function":return Object.keys(f).length>0?o(h,{...f},p,y):s.eq(h,f);default:return r.isObject(h)?typeof f=="string"?f==="":!0:s.eq(h,f)}}function a(h,f,p,y){if(f==null)return!0;if(Array.isArray(f))return c(h,f,p,y);if(f instanceof Map)return l(h,f,p,y);if(f instanceof Set)return u(h,f,p,y);const m=Object.keys(f);if(h==null)return m.length===0;if(m.length===0)return!0;if(y&&y.has(f))return y.get(f)===h;y&&y.set(f,h);try{for(let b=0;b<m.length;b++){const x=m[b];if(!n.isPrimitive(h)&&!(x in h)||f[x]===void 0&&h[x]!==void 0||f[x]===null&&h[x]!==null||!p(h[x],f[x],x,h,f,y))return!1}return!0}finally{y&&y.delete(f)}}function l(h,f,p,y){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[m,b]of f.entries()){const x=h.get(m);if(p(x,b,m,h,f,y)===!1)return!1}return!0}function c(h,f,p,y){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const m=new Set;for(let b=0;b<f.length;b++){const x=f[b];let w=!1;for(let _=0;_<h.length;_++){if(m.has(_))continue;const j=h[_];let k=!1;if(p(j,x,b,h,f,y)&&(k=!0),k){m.add(_),w=!0;break}}if(!w)return!1}return!0}function u(h,f,p,y){return f.size===0?!0:h instanceof Set?c([...h],[...f],p,y):!1}e.isMatchWith=i,e.isSetMatch=u}(yI)),yI}var bI;function nC(){return bI||(bI=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aje();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(gI)),gI}var iq={},sC={},iC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(iC);var Mx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Mx);var zx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",p="[object Object]",y="[object Error]",m="[object DataView]",b="[object Uint8Array]",x="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",j="[object BigUint64Array]",k="[object Int8Array]",S="[object Int16Array]",C="[object Int32Array]",E="[object BigInt64Array]",T="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=u,e.bigInt64ArrayTag=E,e.bigUint64ArrayTag=j,e.booleanTag=s,e.dataViewTag=m,e.dateTag=a,e.errorTag=y,e.float32ArrayTag=T,e.float64ArrayTag=R,e.functionTag=h,e.int16ArrayTag=S,e.int32ArrayTag=C,e.int8ArrayTag=k,e.mapTag=l,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=x})(zx);var oq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(oq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iC,r=Mx,n=zx,s=rC,i=oq;function o(u,h){return a(u,void 0,u,new Map,h)}function a(u,h,f,p=new Map,y=void 0){const m=y==null?void 0:y(u,h,f,p);if(m!==void 0)return m;if(s.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const b=new Array(u.length);p.set(u,b);for(let x=0;x<u.length;x++)b[x]=a(u[x],x,f,p,y);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;p.set(u,b);for(const[x,w]of u)b.set(x,a(w,x,f,p,y));return b}if(u instanceof Set){const b=new Set;p.set(u,b);for(const x of u)b.add(a(x,void 0,f,p,y));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,b);for(let x=0;x<u.length;x++)b[x]=a(u[x],x,f,p,y);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,b),l(b,u,f,p,y),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return p.set(u,b),l(b,u,f,p,y),b}if(u instanceof Blob){const b=new Blob([u],{type:u.type});return p.set(u,b),l(b,u,f,p,y),b}if(u instanceof Error){const b=new u.constructor;return p.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,l(b,u,f,p,y),b}if(typeof u=="object"&&c(u)){const b=Object.create(Object.getPrototypeOf(u));return p.set(u,b),l(b,u,f,p,y),b}return u}function l(u,h,f=u,p,y){const m=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<m.length;b++){const x=m[b],w=Object.getOwnPropertyDescriptor(u,x);(w==null||w.writable)&&(u[x]=a(h[x],x,f,p,y))}}function c(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=a,e.copyProperties=l})(sC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sC;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(iq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nC(),r=iq;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(sq);var aq={},lq={},cq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sC,r=zx;function n(s,i){return t.cloneDeepWith(s,(o,a,l,c)=>{const u=i==null?void 0:i(o,a,l,c);if(u!==void 0)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n})(cq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cq;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(lq);var uq={},oC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(oC);var dq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mx;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(dq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q2,r=oC,n=dq,s=Ax;function i(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&t.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=s.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const h=l[u];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}e.has=i})(uq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nC(),r=B2,n=lq,s=Tx,i=uq;function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=r.toKey(a);break}}return l=n.cloneDeep(l),function(c){const u=s.get(c,a);return u===void 0?i.has(c,a):l===void 0?u===void 0:t.isMatch(u,l)}}e.matchesProperty=o})(aq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eC,r=nq,n=sq,s=aq;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(rq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XU,r=eC,n=QU,s=rq;function i(o,a=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(a)):[]}e.uniqBy=i})(JU);var lje=JU.uniqBy;const xI=ji(lje);function hq(e,t,r){return t===!0?xI(e,r):typeof t=="function"?xI(e,t):e}var fq={exports:{}},j_={},wI={exports:{}},k_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _I;function cje(){if(_I)return k_;_I=1;var e=de;function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function a(h,f){var p=f(),y=n({inst:{value:p,getSnapshot:f}}),m=y[0].inst,b=y[1];return i(function(){m.value=p,m.getSnapshot=f,l(m)&&b({inst:m})},[h,p,f]),s(function(){return l(m)&&b({inst:m}),h(function(){l(m)&&b({inst:m})})},[h]),o(p),p}function l(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!r(h,p)}catch{return!0}}function c(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return k_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,k_}var jI;function uje(){return jI||(jI=1,wI.exports=cje()),wI.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kI;function dje(){if(kI)return j_;kI=1;var e=de,t=uje();function r(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,l=e.useDebugValue;return j_.useSyncExternalStoreWithSelector=function(c,u,h,f,p){var y=i(null);if(y.current===null){var m={hasValue:!1,value:null};y.current=m}else m=y.current;y=a(function(){function x(S){if(!w){if(w=!0,_=S,S=f(S),p!==void 0&&m.hasValue){var C=m.value;if(p(C,S))return j=C}return j=S}if(C=j,n(_,S))return C;var E=f(S);return p!==void 0&&p(C,E)?(_=S,C):(_=S,j=E)}var w=!1,_,j,k=h===void 0?null:h;return[function(){return x(u())},k===null?void 0:function(){return x(k())}]},[u,h,f,p]);var b=s(c,y[0],y[1]);return o(function(){m.hasValue=!0,m.value=b},[b]),l(b),b},j_}fq.exports=dje();var hje=fq.exports,aC=v.createContext(null),fje=e=>e,Jt=()=>{var e=v.useContext(aC);return e?e.store.dispatch:fje},$y=()=>{},pje=()=>$y,mje=(e,t)=>e===t;function Le(e){var t=v.useContext(aC);return hje.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:pje,t?t.store.getState:$y,t?t.store.getState:$y,t?e:$y,mje)}function gje(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function yje(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function vje(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var NI=e=>Array.isArray(e)?e:[e];function bje(e){const t=Array.isArray(e[0])?e[0]:e;return vje(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function xje(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var wje=class{constructor(e){this.value=e}deref(){return this.value}},_je=typeof WeakRef<"u"?WeakRef:wje,jje=0,SI=1;function sy(){return{s:jje,v:void 0,o:null,p:null}}function pq(e,t={}){let r=sy();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var a;let l=r;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const y=arguments[f];if(typeof y=="function"||typeof y=="object"&&y!==null){let m=l.o;m===null&&(l.o=m=new WeakMap);const b=m.get(y);b===void 0?(l=sy(),m.set(y,l)):l=b}else{let m=l.p;m===null&&(l.p=m=new Map);const b=m.get(y);b===void 0?(l=sy(),m.set(y,l)):l=b}}const u=l;let h;if(l.s===SI)h=l.v;else if(h=e.apply(null,arguments),i++,n){const f=((a=s==null?void 0:s.deref)==null?void 0:a.call(s))??s;f!=null&&n(f,h)&&(h=f,i!==0&&i--),s=typeof h=="object"&&h!==null||typeof h=="function"?new _je(h):h}return u.s=SI,u.v=h,h}return o.clearCache=()=>{r=sy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function kje(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,a,l={},c=s.pop();typeof c=="object"&&(l=c,c=s.pop()),gje(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...r,...l},{memoize:h,memoizeOptions:f=[],argsMemoize:p=pq,argsMemoizeOptions:y=[]}=u,m=NI(f),b=NI(y),x=bje(s),w=h(function(){return i++,c.apply(null,arguments)},...m),_=p(function(){o++;const j=xje(x,arguments);return a=w.apply(null,j),a},...b);return Object.assign(_,{resultFunc:c,memoizedResultFunc:w,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var Y=kje(pq),Nje=Object.assign((e,t=Y)=>{yje(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,a)=>(i[r[a]]=o,i),{}))},{withTypes:()=>Nje}),mq={},gq={},yq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),a=t(s);if(o===a&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?a-o:o-a}return 0};e.compareValues=r})(yq);var vq={},lC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(lC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lC,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(vq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yq,r=vq,n=Ax;function s(i,o,a,l){if(i==null)return[];a=l?void 0:a,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(f=>String(f));const c=(f,p)=>{let y=f;for(let m=0;m<p.length&&y!=null;++m)y=y[p[m]];return y},u=(f,p)=>p==null||f==null?p:typeof f=="object"&&"key"in f?Object.hasOwn(p,f.key)?p[f.key]:c(p,f.path):typeof f=="function"?f(p):Array.isArray(f)?c(p,f):typeof p=="object"?p[f]:p,h=o.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||r.isKey(f)?f:{key:f,path:n.toPath(f)}));return i.map(f=>({original:f,criteria:h.map(p=>u(p,f))})).slice().sort((f,p)=>{for(let y=0;y<h.length;y++){const m=t.compareValues(f.criteria[y],p.criteria[y],a[y]);if(m!==0)return m}return 0}).map(f=>f.original)}e.orderBy=s})(gq);var bq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<i?o(u,l+1):s.push(u)}};return o(r,0),s}e.flatten=t})(bq);var cC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oC,r=Dx,n=tC,s=Lx;function i(o,a,l){return n.isObject(l)&&(typeof a=="number"&&r.isArrayLike(l)&&t.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?s.eq(l[a],o):!1}e.isIterateeCall=i})(cC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gq,r=bq,n=cC;function s(i,...o){const a=o.length;return a>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:a>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})(mq);var Sje=mq.sortBy;const Fx=ji(Sje);var xq=e=>e.legend.settings,Eje=e=>e.legend.size,Cje=e=>e.legend.payload,Tje=Y([Cje,xq],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Fx(n,r):n});function Aje(){return Le(Tje)}var iy=1;function wq(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>iy||Math.abs(o.left-t.left)>iy||Math.abs(o.top-t.top)>iy||Math.abs(o.width-t.width)>iy)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Zr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Oje=typeof Symbol=="function"&&Symbol.observable||"@@observable",EI=Oje,N_=()=>Math.random().toString(36).substring(7).split("").join("."),Pje={INIT:`@@redux/INIT${N_()}`,REPLACE:`@@redux/REPLACE${N_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${N_()}`},zv=Pje;function uC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function _q(e,t,r){if(typeof e!="function")throw new Error(Zr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Zr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Zr(1));return r(_q)(e,t)}let n=e,s=t,i=new Map,o=i,a=0,l=!1;function c(){o===i&&(o=new Map,i.forEach((m,b)=>{o.set(b,m)}))}function u(){if(l)throw new Error(Zr(3));return s}function h(m){if(typeof m!="function")throw new Error(Zr(4));if(l)throw new Error(Zr(5));let b=!0;c();const x=a++;return o.set(x,m),function(){if(b){if(l)throw new Error(Zr(6));b=!1,c(),o.delete(x),i=null}}}function f(m){if(!uC(m))throw new Error(Zr(7));if(typeof m.type>"u")throw new Error(Zr(8));if(typeof m.type!="string")throw new Error(Zr(17));if(l)throw new Error(Zr(9));try{l=!0,s=n(s,m)}finally{l=!1}return(i=o).forEach(b=>{b()}),m}function p(m){if(typeof m!="function")throw new Error(Zr(10));n=m,f({type:zv.REPLACE})}function y(){const m=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(Zr(11));function x(){const w=b;w.next&&w.next(u())}return x(),{unsubscribe:m(x)}},[EI](){return this}}}return f({type:zv.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:p,[EI]:y}}function Rje(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:zv.INIT})>"u")throw new Error(Zr(12));if(typeof r(void 0,{type:zv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zr(13))})}function jq(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{Rje(r)}catch(i){s=i}return function(i={},o){if(s)throw s;let a=!1;const l={};for(let c=0;c<n.length;c++){const u=n[c],h=r[u],f=i[u],p=h(f,o);if(typeof p>"u")throw o&&o.type,new Error(Zr(14));l[u]=p,a=a||p!==f}return a=a||n.length!==Object.keys(i).length,a?l:i}}function Fv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Ije(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Zr(15))};const o={getState:s.getState,dispatch:(l,...c)=>i(l,...c)},a=e.map(l=>l(o));return i=Fv(...a)(s.dispatch),{...s,dispatch:i}}}function kq(e){return uC(e)&&"type"in e&&typeof e.type=="string"}var Nq=Symbol.for("immer-nothing"),CI=Symbol.for("immer-draftable"),as=Symbol.for("immer-state");function pi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var nh=Object.getPrototypeOf;function Hc(e){return!!e&&!!e[as]}function ra(e){var t;return e?Sq(e)||Array.isArray(e)||!!e[CI]||!!((t=e.constructor)!=null&&t[CI])||Ux(e)||qx(e):!1}var Dje=Object.prototype.constructor.toString();function Sq(e){if(!e||typeof e!="object")return!1;const t=nh(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Dje}function $v(e,t){$x(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function $x(e){const t=e[as];return t?t.type_:Array.isArray(e)?1:Ux(e)?2:qx(e)?3:0}function eN(e,t){return $x(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Eq(e,t,r){const n=$x(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Lje(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ux(e){return e instanceof Map}function qx(e){return e instanceof Set}function lc(e){return e.copy_||e.base_}function tN(e,t){if(Ux(e))return new Map(e);if(qx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Sq(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[as];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(nh(e),n)}else{const n=nh(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function dC(e,t=!1){return Bx(e)||Hc(e)||!ra(e)||($x(e)>1&&(e.set=e.add=e.clear=e.delete=Mje),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>dC(n,!0))),e}function Mje(){pi(2)}function Bx(e){return Object.isFrozen(e)}var zje={};function Kc(e){const t=zje[e];return t||pi(0,e),t}var Wp;function Cq(){return Wp}function Fje(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TI(e,t){t&&(Kc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function rN(e){nN(e),e.drafts_.forEach($je),e.drafts_=null}function nN(e){e===Wp&&(Wp=e.parent_)}function AI(e){return Wp=Fje(Wp,e)}function $je(e){const t=e[as];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function OI(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[as].modified_&&(rN(t),pi(4)),ra(e)&&(e=Uv(t,e),t.parent_||qv(t,e)),t.patches_&&Kc("Patches").generateReplacementPatches_(r[as].base_,e,t.patches_,t.inversePatches_)):e=Uv(t,r,[]),rN(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Nq?e:void 0}function Uv(e,t,r){if(Bx(t))return t;const n=t[as];if(!n)return $v(t,(s,i)=>PI(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return qv(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),$v(i,(a,l)=>PI(e,n,s,a,l,r,o)),qv(e,s,!1),r&&e.patches_&&Kc("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function PI(e,t,r,n,s,i,o){if(Hc(s)){const a=i&&t&&t.type_!==3&&!eN(t.assigned_,n)?i.concat(n):void 0,l=Uv(e,s,a);if(Eq(r,n,l),Hc(l))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(ra(s)&&!Bx(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Uv(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&qv(e,s)}}function qv(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&dC(t,r)}function Uje(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Cq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=hC;r&&(s=[n],i=Hp);const{revoke:o,proxy:a}=Proxy.revocable(s,i);return n.draft_=a,n.revoke_=o,a}var hC={get(e,t){if(t===as)return e;const r=lc(e);if(!eN(r,t))return qje(e,r,t);const n=r[t];return e.finalized_||!ra(n)?n:n===S_(e.base_,t)?(E_(e),e.copy_[t]=iN(n,e)):n},has(e,t){return t in lc(e)},ownKeys(e){return Reflect.ownKeys(lc(e))},set(e,t,r){const n=Tq(lc(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=S_(lc(e),t),i=s==null?void 0:s[as];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Lje(r,s)&&(r!==void 0||eN(e.base_,t)))return!0;E_(e),sN(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return S_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,E_(e),sN(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=lc(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){pi(11)},getPrototypeOf(e){return nh(e.base_)},setPrototypeOf(){pi(12)}},Hp={};$v(hC,(e,t)=>{Hp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Hp.deleteProperty=function(e,t){return Hp.set.call(this,e,t,void 0)};Hp.set=function(e,t,r){return hC.set.call(this,e[0],t,r,e[0])};function S_(e,t){const r=e[as];return(r?lc(r):e)[t]}function qje(e,t,r){var n;const s=Tq(t,r);return s?"value"in s?s.value:(n=s.get)==null?void 0:n.call(e.draft_):void 0}function Tq(e,t){if(!(t in e))return;let r=nh(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=nh(r)}}function sN(e){e.modified_||(e.modified_=!0,e.parent_&&sN(e.parent_))}function E_(e){e.copy_||(e.copy_=tN(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Bje=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(a=i,...l){return o.produce(a,c=>r.call(this,c,...l))}}typeof r!="function"&&pi(6),n!==void 0&&typeof n!="function"&&pi(7);let s;if(ra(t)){const i=AI(this),o=iN(t,void 0);let a=!0;try{s=r(o),a=!1}finally{a?rN(i):nN(i)}return TI(i,n),OI(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===Nq&&(s=void 0),this.autoFreeze_&&dC(s,!0),n){const i=[],o=[];Kc("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else pi(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,a=>t(a,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ra(e)||pi(8),Hc(e)&&(e=Wo(e));const t=AI(this),r=iN(e,void 0);return r[as].isManual_=!0,nN(t),r}finishDraft(e,t){const r=e&&e[as];(!r||!r.isManual_)&&pi(9);const{scope_:n}=r;return TI(n,t),OI(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Kc("Patches").applyPatches_;return Hc(e)?n(e,t):this.produce(e,s=>n(s,t))}};function iN(e,t){const r=Ux(e)?Kc("MapSet").proxyMap_(e,t):qx(e)?Kc("MapSet").proxySet_(e,t):Uje(e,t);return(t?t.scope_:Cq()).drafts_.push(r),r}function Wo(e){return Hc(e)||pi(10,e),Aq(e)}function Aq(e){if(!ra(e)||Bx(e))return e;const t=e[as];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=tN(e,t.scope_.immer_.useStrictShallowCopy_)}else r=tN(e,!0);return $v(r,(n,s)=>{Eq(r,n,Aq(s))}),t&&(t.finalized_=!1),r}var ls=new Bje,Oq=ls.produce;ls.produceWithPatches.bind(ls);ls.setAutoFreeze.bind(ls);ls.setUseStrictShallowCopy.bind(ls);ls.applyPatches.bind(ls);ls.createDraft.bind(ls);ls.finishDraft.bind(ls);function Pq(e){return({dispatch:t,getState:r})=>n=>s=>typeof s=="function"?s(t,r,e):n(s)}var Vje=Pq(),Wje=Pq,Hje=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Fv:Fv.apply(null,arguments)};function Ls(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(os(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>kq(n)&&n.type===e,r}var Rq=class Kf extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Kf.prototype)}static get[Symbol.species](){return Kf}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Kf(...t[0].concat(this)):new Kf(...t.concat(this))}};function RI(e){return ra(e)?Oq(e,()=>{}):e}function oy(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Kje(e){return typeof e=="boolean"}var Zje=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:s=!0}=e??{};let i=new Rq;return t&&(Kje(t)?i.push(Vje):i.push(Wje(t.extraArgument))),i},Gje="RTK_autoBatch",II=e=>t=>{setTimeout(t,e)},Yje=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const a=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:II(10):e.type==="callback"?e.queueNotification:II(e.timeout),c=()=>{o=!1,i&&(i=!1,a.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>s&&u(),f=n.subscribe(h);return a.add(u),()=>{f(),a.delete(u)}},dispatch(u){var h;try{return s=!((h=u==null?void 0:u.meta)!=null&&h[Gje]),i=!s,i&&(o||(o=!0,l(c))),n.dispatch(u)}finally{s=!0}}})},Jje=e=>function(t){const{autoBatch:r=!0}=t??{};let n=new Rq(e);return r&&n.push(Yje(typeof r=="object"?r:void 0)),n};function Xje(e){const t=Zje(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(uC(r))a=jq(r);else throw new Error(os(1));let l;typeof n=="function"?l=n(t):l=t();let c=Fv;s&&(c=Hje({trace:!1,...typeof s=="object"&&s}));const u=Ije(...l),h=Jje(u);let f=typeof o=="function"?o(h):h();const p=c(...f);return _q(a,i,p)}function Iq(e){const t={},r=[];let n;const s={addCase(i,o){const a=typeof i=="string"?i:i.type;if(!a)throw new Error(os(28));if(a in t)throw new Error(os(29));return t[a]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function Qje(e){return typeof e=="function"}function eke(e,t){let[r,n,s]=Iq(t),i;if(Qje(e))i=()=>RI(e());else{const a=RI(e);i=()=>a}function o(a=i(),l){let c=[r[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[s]),c.reduce((u,h)=>{if(h)if(Hc(u)){const f=h(u,l);return f===void 0?u:f}else{if(ra(u))return Oq(u,f=>h(f,l));{const f=h(u,l);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},a)}return o.getInitialState=i,o}var tke="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rke=(e=21)=>{let t="",r=e;for(;r--;)t+=tke[Math.random()*64|0];return t},nke=Symbol.for("rtk-slice-createasyncthunk");function ske(e,t){return`${e}/${t}`}function ike({creators:e}={}){var t;const r=(t=e==null?void 0:e.asyncThunk)==null?void 0:t[nke];return function(n){const{name:s,reducerPath:i=s}=n;if(!s)throw new Error(os(11));const o=(typeof n.reducers=="function"?n.reducers(ake()):n.reducers)||{},a=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,j){const k=typeof _=="string"?_:_.type;if(!k)throw new Error(os(12));if(k in l.sliceCaseReducersByType)throw new Error(os(13));return l.sliceCaseReducersByType[k]=j,c},addMatcher(_,j){return l.sliceMatchers.push({matcher:_,reducer:j}),c},exposeAction(_,j){return l.actionCreators[_]=j,c},exposeCaseReducer(_,j){return l.sliceCaseReducersByName[_]=j,c}};a.forEach(_=>{const j=o[_],k={reducerName:_,type:ske(s,_),createNotation:typeof n.reducers=="function"};cke(j)?dke(k,j,c,r):lke(k,j,c)});function u(){const[_={},j=[],k=void 0]=typeof n.extraReducers=="function"?Iq(n.extraReducers):[n.extraReducers],S={..._,...l.sliceCaseReducersByType};return eke(n.initialState,C=>{for(let E in S)C.addCase(E,S[E]);for(let E of l.sliceMatchers)C.addMatcher(E.matcher,E.reducer);for(let E of j)C.addMatcher(E.matcher,E.reducer);k&&C.addDefaultCase(k)})}const h=_=>_,f=new Map,p=new WeakMap;let y;function m(_,j){return y||(y=u()),y(_,j)}function b(){return y||(y=u()),y.getInitialState()}function x(_,j=!1){function k(C){let E=C[_];return typeof E>"u"&&j&&(E=oy(p,k,b)),E}function S(C=h){const E=oy(f,j,()=>new WeakMap);return oy(E,C,()=>{const T={};for(const[R,O]of Object.entries(n.selectors??{}))T[R]=oke(O,C,()=>oy(p,C,b),j);return T})}return{reducerPath:_,getSelectors:S,get selectors(){return S(k)},selectSlice:k}}const w={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:b,...x(i),injectInto(_,{reducerPath:j,...k}={}){const S=j??i;return _.inject({reducerPath:S,reducer:m},k),{...w,...x(S,!0)}}};return w}}function oke(e,t,r,n){function s(i,...o){let a=t(i);return typeof a>"u"&&n&&(a=r()),e(a,...o)}return s.unwrapped=e,s}var cs=ike();function ake(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function lke({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!uke(n))throw new Error(os(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Ls(e,o):Ls(e))}function cke(e){return e._reducerDefinitionType==="asyncThunk"}function uke(e){return e._reducerDefinitionType==="reducerWithPrepare"}function dke({type:e,reducerName:t},r,n,s){if(!s)throw new Error(os(18));const{payloadCreator:i,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=r,h=s(e,i,u);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),a&&n.addCase(h.pending,a),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(t,{fulfilled:o||ay,pending:a||ay,rejected:l||ay,settled:c||ay})}function ay(){}var hke="task",Dq="listener",Lq="completed",fC="cancelled",fke=`task-${fC}`,pke=`task-${Lq}`,oN=`${Dq}-${fC}`,mke=`${Dq}-${Lq}`,Vx=class{constructor(e){xe(this,"name","TaskAbortError"),xe(this,"message"),this.code=e,this.message=`${hke} ${fC} (reason: ${e})`}},pC=(e,t)=>{if(typeof e!="function")throw new TypeError(os(32))},Bv=()=>{},Mq=(e,t=Bv)=>(e.catch(t),e),zq=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Pc=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Rc=e=>{if(e.aborted){const{reason:t}=e;throw new Vx(t)}};function Fq(e,t){let r=Bv;return new Promise((n,s)=>{const i=()=>s(new Vx(e.reason));if(e.aborted){i();return}r=zq(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Bv})}var gke=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Vx?"cancelled":"rejected",error:r}}finally{t==null||t()}},Vv=e=>t=>Mq(Fq(e,t).then(r=>(Rc(e),r))),$q=e=>{const t=Vv(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:kd}=Object,DI={},Wx="listenerMiddleware",yke=(e,t)=>{const r=n=>zq(e,()=>Pc(n,e.reason));return(n,s)=>{pC(n);const i=new AbortController;r(i);const o=gke(async()=>{Rc(e),Rc(i.signal);const a=await n({pause:Vv(i.signal),delay:$q(i.signal),signal:i.signal});return Rc(i.signal),a},()=>Pc(i,pke));return s!=null&&s.autoJoin&&t.push(o.catch(Bv)),{result:Vv(e)(o),cancel(){Pc(i,fke)}}}},vke=(e,t)=>{const r=async(n,s)=>{Rc(t);let i=()=>{};const o=[new Promise((a,l)=>{let c=e({predicate:n,effect:(u,h)=>{h.unsubscribe(),a([u,h.getState(),h.getOriginalState()])}});i=()=>{c(),l()}})];s!=null&&o.push(new Promise(a=>setTimeout(a,s,null)));try{const a=await Fq(t,Promise.race(o));return Rc(t),a}finally{i()}};return(n,s)=>Mq(r(n,s))},Uq=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Ls(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(os(21));return pC(i),{predicate:s,type:t,effect:i}},qq=kd(e=>{const{type:t,predicate:r,effect:n}=Uq(e);return{id:rke(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(os(22))}}},{withTypes:()=>qq}),LI=(e,t)=>{const{type:r,effect:n,predicate:s}=Uq(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},aN=e=>{e.pending.forEach(t=>{Pc(t,oN)})},bke=e=>()=>{e.forEach(aN),e.clear()},MI=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Bq=kd(Ls(`${Wx}/add`),{withTypes:()=>Bq}),xke=Ls(`${Wx}/removeAll`),Vq=kd(Ls(`${Wx}/remove`),{withTypes:()=>Vq}),wke=(...e)=>{console.error(`${Wx}/error`,...e)},Lm=(e={})=>{const t=new Map,{extra:r,onError:n=wke}=e;pC(n);const s=c=>(c.unsubscribe=()=>t.delete(c.id),t.set(c.id,c),u=>{c.unsubscribe(),u!=null&&u.cancelActive&&aN(c)}),i=c=>{const u=LI(t,c)??qq(c);return s(u)};kd(i,{withTypes:()=>i});const o=c=>{const u=LI(t,c);return u&&(u.unsubscribe(),c.cancelActive&&aN(u)),!!u};kd(o,{withTypes:()=>o});const a=async(c,u,h,f)=>{const p=new AbortController,y=vke(i,p.signal),m=[];try{c.pending.add(p),await Promise.resolve(c.effect(u,kd({},h,{getOriginalState:f,condition:(b,x)=>y(b,x).then(Boolean),take:y,delay:$q(p.signal),pause:Vv(p.signal),extra:r,signal:p.signal,fork:yke(p.signal,m),unsubscribe:c.unsubscribe,subscribe:()=>{t.set(c.id,c)},cancelActiveListeners:()=>{c.pending.forEach((b,x,w)=>{b!==p&&(Pc(b,oN),w.delete(b))})},cancel:()=>{Pc(p,oN),c.pending.delete(p)},throwIfCancelled:()=>{Rc(p.signal)}})))}catch(b){b instanceof Vx||MI(n,b,{raisedBy:"effect"})}finally{await Promise.all(m),Pc(p,mke),c.pending.delete(p)}},l=bke(t);return{middleware:c=>u=>h=>{if(!kq(h))return u(h);if(Bq.match(h))return i(h.payload);if(xke.match(h)){l();return}if(Vq.match(h))return o(h.payload);let f=c.getState();const p=()=>{if(f===DI)throw new Error(os(23));return f};let y;try{if(y=u(h),t.size>0){const m=c.getState(),b=Array.from(t.values());for(const x of b){let w=!1;try{w=x.predicate(h,m,f)}catch(_){w=!1,MI(n,_,{raisedBy:"predicate"})}w&&a(x,h,c,p)}}}finally{f=DI}return y},startListening:i,stopListening:o,clearListeners:l}};function os(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _ke={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Wq=cs({name:"chartLayout",initialState:_ke,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:jke,setLayout:kke,setChartSize:Nke,setScale:Ske}=Wq.actions,Eke=Wq.reducer;function zI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(r),!0).forEach(function(n){Cke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cke(e,t,r){return(t=Tke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tke(e){var t=Ake(e,"string");return typeof t=="symbol"?t:t+""}function Ake(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wv=Math.PI/180,Oke=e=>e*180/Math.PI,vr=(e,t,r,n)=>({x:e+Math.cos(-Wv*n)*r,y:t+Math.sin(-Wv*n)*r}),Hq=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},Pke=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},Rke=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=Pke({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var a=(r-s)/o,l=Math.acos(a);return n>i&&(l=2*Math.PI-l),{radius:o,angle:Oke(l),angleInRadian:l}},Ike=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},Dke=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},Lke=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=Rke({x:r,y:n},t),{innerRadius:o,outerRadius:a}=t;if(s<o||s>a||s===0)return null;var{startAngle:l,endAngle:c}=Ike(t),u=i,h;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;h=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=l}return h?FI(FI({},t),{},{radius:s,angle:Dke(u,t)}):null};function Kq(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function $I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$I(Object(r),!0).forEach(function(n){Mke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$I(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mke(e,t,r){return(t=zke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zke(e){var t=Fke(e,"string");return typeof t=="symbol"?t:t+""}function Fke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lt(e,t,r){return br(e)||br(t)?r:so(t)?bl(e,t,r):typeof t=="function"?t(e):r}var $ke=(e,t,r,n,s)=>{var i,o=-1,a=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(a<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<a;l++){var c=l>0?r[l-1].coordinate:r[a-1].coordinate,u=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,f=void 0;if(hn(u-c)!==hn(h-u)){var p=[];if(hn(h-u)===hn(s[1]-s[0])){f=h;var y=u+s[1]-s[0];p[0]=Math.min(y,(y+c)/2),p[1]=Math.max(y,(y+c)/2)}else{f=c;var m=h+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var b=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:o}=r[l]);break}}else{var x=Math.min(c,h),w=Math.max(c,h);if(e>(x+u)/2&&e<=(w+u)/2){({index:o}=r[l]);break}}}else if(t){for(var _=0;_<a;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<a-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===a-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:o}=t[_]);break}}return o},Uke=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:a}=t;if((a==="vertical"||a==="horizontal"&&o==="middle")&&i!=="center"&&Ae(e[i]))return ks(ks({},e),{},{[i]:e[i]+(n||0)});if((a==="horizontal"||a==="vertical"&&i==="center")&&o!=="middle"&&Ae(e[o]))return ks(ks({},e),{},{[o]:e[o]+(s||0)})}return e},Ol=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Zq=(e,t,r,n)=>{if(n)return e.map(a=>a.coordinate);var s,i,o=e.map(a=>(a.coordinate===t&&(s=!0),a.coordinate===r&&(i=!0),a.coordinate));return s||o.push(t),i||o.push(r),o},Gq=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:h,niceTicks:f,axisType:p}=e;if(!o)return null;var y=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,m=s==="category"&&o.bandwidth?o.bandwidth()/y:0;if(m=p==="angleAxis"&&i&&i.length>=2?hn(i[0]-i[1])*2*m:m,h||f){var b=(h||f||[]).map((x,w)=>{var _=n?n.indexOf(x):x;return{coordinate:o(_)+m,value:x,offset:m,index:w}});return b.filter(x=>!Is(x.coordinate))}return l&&c?c.map((x,w)=>({coordinate:o(x)+m,value:x,index:w,offset:m})):o.ticks&&u!=null?o.ticks(u).map((x,w)=>({coordinate:o(x)+m,value:x,offset:m,index:w})):o.domain().map((x,w)=>({coordinate:o(x)+m,value:n?n[x]:x,index:w,offset:m}))},UI=1e-4,qke=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-UI,i=Math.max(n[0],n[1])+UI,o=e(t[0]),a=e(t[r-1]);(o<s||o>i||a<s||a>i)&&e.domain([t[0],t[r-1]])}},Bke=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var a=Is(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=s,e[o][r][1]=s+a,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1])}},Vke=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=Is(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},Wke={sign:Bke,expand:W_e,none:rh,silhouette:H_e,wiggle:K_e,positive:Vke},Hke=(e,t,r)=>{var n=Wke[r],s=V_e().keys(t).value((i,o)=>+Lt(i,o,0)).order(Jk).offset(n);return s(e)};function qI(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!br(s[t.dataKey])){var a=TU(r,"value",s[t.dataKey]);if(a)return a.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Lt(s,br(o)?t.dataKey:o);return br(l)?null:t.scale(l)}var Kke=e=>{var t=e.flat(2).filter(Ae);return[Math.min(...t),Math.max(...t)]},Zke=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Gke=(e,t,r)=>{if(e!=null)return Zke(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,a=o.reduce((l,c)=>{var u=Kq(c,t,r),h=Kke(u);return[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(a[0],n[0]),Math.max(a[1],n[1])]},[1/0,-1/0]))},BI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lN=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Fx(t,u=>u.coordinate),i=1/0,o=1,a=s.length;o<a;o++){var l=s[o],c=s[o-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function WI(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return ks(ks({},t),{},{dataKey:r,payload:n,value:s,name:i})}function Hx(e,t){if(e)return String(e);if(typeof t=="string")return t}function Yke(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?Lke({x:e,y:t},n):null}var Jke=(e,t,r,n)=>{var s=t.find(c=>c&&c.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return ks(ks(ks({},n),vr(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var a=s.coordinate,{angle:l}=n;return ks(ks(ks({},n),vr(n.cx,n.cy,a,l)),{},{angle:l,radius:a})}return{x:0,y:0}},Xke=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,fa=e=>e.layout.width,pa=e=>e.layout.height,Qke=e=>e.layout.scale,Yq=e=>e.layout.margin,mC=Y(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),gC=Y(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Jq="data-recharts-item-index",Xq="data-recharts-item-data-key",Kx=60;function HI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HI(Object(r),!0).forEach(function(n){eNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eNe(e,t,r){return(t=tNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tNe(e){var t=rNe(e,"string");return typeof t=="symbol"?t:t+""}function rNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nNe=e=>e.brush.height,Wr=Y([fa,pa,Yq,nNe,mC,gC,xq,Eje],(e,t,r,n,s,i,o,a)=>{var l=i.reduce((y,m)=>{var{orientation:b}=m;if(!m.mirror&&!m.hide){var x=typeof m.width=="number"?m.width:Kx;return Oa(Oa({},y),{},{[b]:y[b]+x})}return y},{left:r.left||0,right:r.right||0}),c=s.reduce((y,m)=>{var{orientation:b}=m;return!m.mirror&&!m.hide?Oa(Oa({},y),{},{[b]:bl(y,"".concat(b))+m.height}):y},{top:r.top||0,bottom:r.bottom||0}),u=Oa(Oa({},c),l),h=u.bottom;u.bottom+=n,u=Uke(u,o,a);var f=e-u.left-u.right,p=t-u.top-u.bottom;return Oa(Oa({brushBottom:h},u),{},{width:Math.max(f,0),height:Math.max(p,0)})}),sNe=Y(Wr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Qq=Y(fa,pa,(e,t)=>({x:0,y:0,width:e,height:t})),iNe=v.createContext(null),qs=()=>v.useContext(iNe)!=null,Zx=e=>e.brush,Gx=Y([Zx,Wr,Yq],(e,t,r)=>({height:e.height,x:Ae(e.x)?e.x:t.left,y:Ae(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Ae(e.width)?e.width:t.width})),yC=()=>{var e,t=qs(),r=Le(sNe),n=Le(Gx),s=(e=Le(Zx))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},oNe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},eB=()=>{var e;return(e=Le(Wr))!==null&&e!==void 0?e:oNe},vC=()=>Le(fa),bC=()=>Le(pa),aNe={top:0,right:0,bottom:0,left:0},lNe=()=>{var e;return(e=Le(t=>t.layout.margin))!==null&&e!==void 0?e:aNe},vt=e=>e.layout.layoutType,xC=()=>Le(vt),cNe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},tB=cs({name:"legend",initialState:cNe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Wo(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:KI,setLegendSettings:uNe,addLegendPayload:rB,removeLegendPayload:nB}=tB.actions,dNe=tB.reducer,hNe=["contextPayload"];function cN(){return cN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cN.apply(null,arguments)}function ZI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZI(Object(r),!0).forEach(function(n){wC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wC(e,t,r){return(t=fNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fNe(e){var t=pNe(e,"string");return typeof t=="symbol"?t:t+""}function pNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mNe(e,t){if(e==null)return{};var r,n,s=gNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function gNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yNe(e){return e.value}function vNe(e){var{contextPayload:t}=e,r=mNe(e,hNe),n=hq(t,e.payloadUniqBy,yNe),s=sh(sh({},r),{},{payload:n});return v.isValidElement(e.content)?v.cloneElement(e.content,s):typeof e.content=="function"?v.createElement(e.content,s):v.createElement(Q2,s)}function bNe(e,t,r,n,s,i){var{layout:o,align:a,verticalAlign:l}=t,c,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(a==="center"&&o==="vertical"?c={left:((n||0)-i.width)/2}:c=a==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(l==="middle"?u={top:((s||0)-i.height)/2}:u=l==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),sh(sh({},c),u)}function xNe(e){var t=Jt();return v.useEffect(()=>{t(uNe(e))},[t,e]),null}function wNe(e){var t=Jt();return v.useEffect(()=>(t(KI(e)),()=>{t(KI({width:0,height:0}))}),[t,e]),null}function _Ne(e){var t=Aje(),r=p_e(),n=lNe(),{width:s,height:i,wrapperStyle:o,portal:a}=e,[l,c]=wq([t]),u=vC(),h=bC(),f=u-(n.left||0)-(n.right||0),p=Kp.getWidthOrHeight(e.layout,i,s,f),y=a?o:sh(sh({position:"absolute",width:(p==null?void 0:p.width)||s||"auto",height:(p==null?void 0:p.height)||i||"auto"},bNe(o,e,n,u,h,l)),o),m=a??r;if(m==null)return null;var b=v.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:c},v.createElement(xNe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),v.createElement(wNe,{width:l.width,height:l.height}),v.createElement(vNe,cN({},e,p,{margin:n,chartWidth:u,chartHeight:h,contextPayload:t})));return ro.createPortal(b,m)}class Kp extends v.PureComponent{static getWidthOrHeight(t,r,n,s){return t==="vertical"&&Ae(r)?{height:r}:t==="horizontal"?{width:n||s}:null}render(){return v.createElement(_Ne,this.props)}}wC(Kp,"displayName","Legend");wC(Kp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function uN(){return uN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uN.apply(null,arguments)}function GI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GI(Object(r),!0).forEach(function(n){jNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jNe(e,t,r){return(t=kNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kNe(e){var t=NNe(e,"string");return typeof t=="symbol"?t:t+""}function NNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SNe(e){return Array.isArray(e)&&so(e[0])&&so(e[1])?e.join(" ~ "):e}var ENe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,p=()=>{if(i&&i.length){var k={padding:0,margin:0},S=(a?Fx(i,a):i).map((C,E)=>{if(C.type==="none")return null;var T=C.formatter||o||SNe,{value:R,name:O}=C,I=R,P=O;if(T){var D=T(R,O,C,E,i);if(Array.isArray(D))[I,P]=D;else if(D!=null)I=D;else return null}var L=C_({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:L},so(P)?v.createElement("span",{className:"recharts-tooltip-item-name"},P):null,so(P)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},I),v.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:k},S)}return null},y=C_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),m=C_({margin:0},s),b=!br(u),x=b?u:"",w=at("recharts-default-tooltip",l),_=at("recharts-tooltip-label",c);b&&h&&i!==void 0&&i!==null&&(x=h(u,i));var j=f?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",uN({className:w,style:y},j),v.createElement("p",{className:_,style:m},v.isValidElement(x)?x:"".concat(x)),p())},jf="recharts-tooltip-wrapper",CNe={visibility:"hidden"};function TNe(e){var{coordinate:t,translateX:r,translateY:n}=e;return at(jf,{["".concat(jf,"-right")]:Ae(r)&&t&&Ae(t.x)&&r>=t.x,["".concat(jf,"-left")]:Ae(r)&&t&&Ae(t.x)&&r<t.x,["".concat(jf,"-bottom")]:Ae(n)&&t&&Ae(t.y)&&n>=t.y,["".concat(jf,"-top")]:Ae(n)&&t&&Ae(t.y)&&n<t.y})}function YI(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=e;if(i&&Ae(i[n]))return i[n];var u=r[n]-a-(s>0?s:0),h=r[n]+s;if(t[n])return o[n]?u:h;var f=l[n];if(f==null)return 0;if(o[n]){var p=u,y=f;return p<y?Math.max(h,f):Math.max(u,f)}if(c==null)return 0;var m=h+a,b=f+c;return m>b?Math.max(u,f):Math.max(h,f)}function ANe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function ONe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:a,viewBox:l}=e,c,u,h;return o.height>0&&o.width>0&&r?(u=YI({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),h=YI({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=ANe({translateX:u,translateY:h,useTranslate3d:a})):c=CNe,{cssProperties:c,cssClasses:TNe({translateX:u,translateY:h,coordinate:r})}}function JI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ly(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JI(Object(r),!0).forEach(function(n){dN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dN(e,t,r){return(t=PNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PNe(e){var t=RNe(e,"string");return typeof t=="symbol"?t:t+""}function RNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class INe extends v.PureComponent{constructor(){super(...arguments),dN(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),dN(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:h,useTranslate3d:f,viewBox:p,wrapperStyle:y,lastBoundingBox:m,innerRef:b,hasPortalFromProps:x}=this.props,{cssClasses:w,cssProperties:_}=ONe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:h,tooltipBox:{height:m.height,width:m.width},useTranslate3d:f,viewBox:p}),j=x?{}:ly(ly({transition:l&&t?"transform ".concat(n,"ms ").concat(s):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&a?"visible":"hidden",position:"absolute",top:0,left:0}),k=ly(ly({},j),{},{visibility:!this.state.dismissed&&t&&a?"visible":"hidden"},y);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},i)}}var DNe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Fh={isSsr:DNe()},sB=()=>Le(e=>e.rootProps.accessibilityLayer);function xi(e){return Number.isFinite(e)}function ih(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function hN(){return hN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hN.apply(null,arguments)}function XI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XI(Object(r),!0).forEach(function(n){LNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LNe(e,t,r){return(t=MNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MNe(e){var t=zNe(e,"string");return typeof t=="symbol"?t:t+""}function zNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e3={curveBasisClosed:R_e,curveBasisOpen:I_e,curveBasis:P_e,curveBumpX:v_e,curveBumpY:b_e,curveLinearClosed:D_e,curveLinear:Rx,curveMonotoneX:L_e,curveMonotoneY:M_e,curveNatural:z_e,curveStep:F_e,curveStepAfter:U_e,curveStepBefore:$_e},cy=e=>xi(e.x)&&xi(e.y),kf=e=>e.x,Nf=e=>e.y,FNe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Dm(e));return(r==="curveMonotone"||r==="curveBump")&&t?e3["".concat(r).concat(t==="vertical"?"Y":"X")]:e3[r]||Rx},$Ne=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=FNe(t,s),a=i?r.filter(cy):r,l;if(Array.isArray(n)){var c=i?n.filter(h=>cy(h)):n,u=a.map((h,f)=>QI(QI({},h),{},{base:c[f]}));return s==="vertical"?l=ny().y(Nf).x1(kf).x0(h=>h.base.x):l=ny().x(kf).y1(Nf).y0(h=>h.base.y),l.defined(cy).curve(o),l(u)}return s==="vertical"&&Ae(n)?l=ny().y(Nf).x1(kf).x0(n):Ae(n)?l=ny().x(kf).y1(Nf).y0(n):l=FU().x(kf).y(Nf),l.defined(cy).curve(o),l(a)},_C=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?$Ne(e):n;return v.createElement("path",hN({},Al(e),W2(e),{className:at("recharts-curve",t),d:i===null?void 0:i,ref:s}))},UNe=["x","y","top","left","width","height","className"];function fN(){return fN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fN.apply(null,arguments)}function t3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qNe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t3(Object(r),!0).forEach(function(n){BNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BNe(e,t,r){return(t=VNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VNe(e){var t=WNe(e,"string");return typeof t=="symbol"?t:t+""}function WNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HNe(e,t){if(e==null)return{};var r,n,s=KNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function KNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZNe=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),GNe=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:a}=e,l=HNe(e,UNe),c=qNe({x:t,y:r,top:n,left:s,width:i,height:o},l);return!Ae(t)||!Ae(r)||!Ae(i)||!Ae(o)||!Ae(n)||!Ae(s)?null:v.createElement("path",fN({},Kt(c,!0),{className:at("recharts-cross",a),d:ZNe(t,r,i,o,n,s)}))};function YNe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function r3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JNe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(r),!0).forEach(function(n){XNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XNe(e,t,r){return(t=QNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QNe(e){var t=eSe(e,"string");return typeof t=="symbol"?t:t+""}function eSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bs(e,t){var r=JNe({},e),n=t,s=Object.keys(t),i=s.reduce((o,a)=>(o[a]===void 0&&n[a]!==void 0&&(o[a]=n[a]),o),r);return i}var iB={},oB={},aB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(aB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aB,r=iC,n=Mx,s=zx,i=Lx;function o(c,u,h){return a(c,u,void 0,void 0,void 0,void 0,h)}function a(c,u,h,f,p,y,m){const b=m(c,u,h,f,p,y);if(b!==void 0)return b;if(typeof c==typeof u)switch(typeof c){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return c===u;case"number":return c===u||Object.is(c,u);case"function":return c===u;case"object":return l(c,u,y,m)}return l(c,u,y,m)}function l(c,u,h,f){if(Object.is(c,u))return!0;let p=n.getTag(c),y=n.getTag(u);if(p===s.argumentsTag&&(p=s.objectTag),y===s.argumentsTag&&(y=s.objectTag),p!==y)return!1;switch(p){case s.stringTag:return c.toString()===u.toString();case s.numberTag:{const x=c.valueOf(),w=u.valueOf();return i.eq(x,w)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(c.valueOf(),u.valueOf());case s.regexpTag:return c.source===u.source&&c.flags===u.flags;case s.functionTag:return c===u}h=h??new Map;const m=h.get(c),b=h.get(u);if(m!=null&&b!=null)return m===u;h.set(c,u),h.set(u,c);try{switch(p){case s.mapTag:{if(c.size!==u.size)return!1;for(const[x,w]of c.entries())if(!u.has(x)||!a(w,u.get(x),x,c,u,h,f))return!1;return!0}case s.setTag:{if(c.size!==u.size)return!1;const x=Array.from(c.values()),w=Array.from(u.values());for(let _=0;_<x.length;_++){const j=x[_],k=w.findIndex(S=>a(j,S,void 0,c,u,h,f));if(k===-1)return!1;w.splice(k,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(c)!==Buffer.isBuffer(u)||c.length!==u.length)return!1;for(let x=0;x<c.length;x++)if(!a(c[x],u[x],x,c,u,h,f))return!1;return!0}case s.arrayBufferTag:return c.byteLength!==u.byteLength?!1:l(new Uint8Array(c),new Uint8Array(u),h,f);case s.dataViewTag:return c.byteLength!==u.byteLength||c.byteOffset!==u.byteOffset?!1:l(new Uint8Array(c),new Uint8Array(u),h,f);case s.errorTag:return c.name===u.name&&c.message===u.message;case s.objectTag:{if(!(l(c.constructor,u.constructor,h,f)||t.isPlainObject(c)&&t.isPlainObject(u)))return!1;const x=[...Object.keys(c),...r.getSymbols(c)],w=[...Object.keys(u),...r.getSymbols(u)];if(x.length!==w.length)return!1;for(let _=0;_<x.length;_++){const j=x[_],k=c[j];if(!Object.hasOwn(u,j))return!1;const S=u[j];if(!a(k,S,j,c,u,h,f))return!1}return!0}default:return!1}}finally{h.delete(c),h.delete(u)}}e.isEqualWith=o})(oB);var lB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(lB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oB,r=lB;function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n})(iB);var tSe=iB.isEqual;const rSe=ji(tSe);var Hv=1e-4,cB=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],uB=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),n3=(e,t)=>r=>{var n=cB(e,t);return uB(n,r)},nSe=(e,t)=>r=>{var n=cB(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return uB(s,r)},s3=function(){for(var e,t,r,n,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[e,r,t,n]=[0,0,1,1];break;case"ease":[e,r,t,n]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,n]=[.42,0,1,1];break;case"ease-out":[e,r,t,n]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,n]=[0,0,.58,1];break;default:{var a=i[0].split("(");a[0]==="cubic-bezier"&&a[1].split(")")[0].split(",").length===4&&([e,r,t,n]=a[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else i.length===4&&([e,r,t,n]=i);var l=n3(e,t),c=n3(r,n),u=nSe(e,t),h=p=>p>1?1:p<0?0:p,f=p=>{for(var y=p>1?1:p,m=y,b=0;b<8;++b){var x=l(m)-y,w=u(m);if(Math.abs(x-y)<Hv||w<Hv)return c(m);m=h(m-x/w)}return c(m)};return f.isStepper=!1,f},sSe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,s=(i,o,a)=>{var l=-(i-o)*t,c=a*r,u=a+(l-c)*n/1e3,h=a*n/1e3+i;return Math.abs(h-o)<Hv&&Math.abs(u)<Hv?[o,0]:[h,u]};return s.isStepper=!0,s.dt=n,s},dB=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return s3(e);case"spring":return sSe();default:if(e.split("(")[0]==="cubic-bezier")return s3(e)}return typeof e=="function"?e:null};function i3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function o3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i3(Object(r),!0).forEach(function(n){iSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iSe(e,t,r){return(t=oSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oSe(e){var t=aSe(e,"string");return typeof t=="symbol"?t:t+""}function aSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lSe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),cSe=(e,t,r)=>e.map(n=>"".concat(lSe(n)," ").concat(t,"ms ").concat(r)).join(","),uSe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Zp=(e,t)=>Object.keys(t).reduce((r,n)=>o3(o3({},r),{},{[n]:e(n,t[n])}),{});function a3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a3(Object(r),!0).forEach(function(n){dSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dSe(e,t,r){return(t=hSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hSe(e){var t=fSe(e,"string");return typeof t=="symbol"?t:t+""}function fSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kv=(e,t,r)=>e+(t-e)*r,pN=e=>{var{from:t,to:r}=e;return t!==r},hB=(e,t,r)=>{var n=Zp((s,i)=>{if(pN(i)){var[o,a]=e(i.from,i.to,i.velocity);return Yr(Yr({},i),{},{from:o,velocity:a})}return i},t);return r<1?Zp((s,i)=>pN(i)?Yr(Yr({},i),{},{velocity:Kv(i.velocity,n[s].velocity,r),from:Kv(i.from,n[s].from,r)}):i,t):hB(e,n,r-1)};function pSe(e,t,r,n,s,i){var o,a=n.reduce((f,p)=>Yr(Yr({},f),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>Zp((f,p)=>p.from,a),c=()=>!Object.values(a).filter(pN).length,u=null,h=f=>{o||(o=f);var p=f-o,y=p/r.dt;a=hB(r,a,y),s(Yr(Yr(Yr({},e),t),l())),o=f,c()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{u()})}function mSe(e,t,r,n,s,i,o){var a=null,l=s.reduce((h,f)=>Yr(Yr({},h),{},{[f]:[e[f],t[f]]}),{}),c,u=h=>{c||(c=h);var f=(h-c)/n,p=Zp((m,b)=>Kv(...b,r(f)),l);if(i(Yr(Yr(Yr({},e),t),p)),f<1)a=o.setTimeout(u);else{var y=Zp((m,b)=>Kv(...b,r(1)),l);i(Yr(Yr(Yr({},e),t),y))}};return()=>(a=o.setTimeout(u),()=>{a()})}const fB=(e,t,r,n,s,i)=>{var o=uSe(e,t);return r.isStepper===!0?pSe(e,t,r,o,s,i):mSe(e,t,r,n,o,s,i)};function gSe(e){var t,r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){s=e.setTimeout(i.bind(null,c),l);return}i(l),s=e.setTimeout(i.bind(null,c));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class ySe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function vSe(){return gSe(new ySe)}var bSe=v.createContext(vSe);function pB(e,t){var r=v.useContext(bSe);return v.useMemo(()=>t??r(e),[e,t,r])}var xSe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function mN(){return mN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mN.apply(null,arguments)}function wSe(e,t){if(e==null)return{};var r,n,s=_Se(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _Se(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function l3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l3(Object(r),!0).forEach(function(n){yc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yc(e,t,r){return(t=jSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jSe(e){var t=kSe(e,"string");return typeof t=="symbol"?t:t+""}function kSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jC extends v.PureComponent{constructor(t,r){super(t,r),yc(this,"mounted",!1),yc(this,"manager",void 0),yc(this,"stopJSAnimation",null),yc(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:a,duration:l,animationManager:c}=this.props;if(this.manager=c,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0){this.state={style:{}},typeof a=="function"&&(this.state={style:o});return}if(i){if(typeof a=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:a}=this.props,{style:l}=this.state;if(n){if(!r){var c={style:s?{[s]:o}:o};this.state&&l&&(s&&l[s]!==o||!s&&l!==o)&&this.setState(c);return}if(!(rSe(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||i?a:t.to;if(this.state&&l){var f={style:s?{[s]:h}:h};(s&&l[s]!==h||!s&&l!==h)&&this.setState(f)}this.runAnimation(Pa(Pa({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:a,onAnimationStart:l}=t,c=fB(r,n,dB(i),s,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=c()};this.manager.start([l,o,u,s,a])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:a,onAnimationEnd:l,children:c}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof c=="function"||o==="spring"){this.runJSAnimation(t);return}var u=s?{[s]:i}:i,h=cSe(Object.keys(u),n,o);this.manager.start([a,r,Pa(Pa({},u),{},{transition:h}),n,l])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:a,from:l,to:c,canBegin:u,onAnimationEnd:h,shouldReAnimate:f,onAnimationReStart:p,animationManager:y}=t,m=wSe(t,xSe),b=v.Children.count(r),x=this.state.style;if(typeof r=="function")return r(x);if(!a||b===0||s<=0)return r;var w=_=>{var{style:j={},className:k}=_.props,S=v.cloneElement(_,Pa(Pa({},m),{},{style:Pa(Pa({},j),x),className:k}));return S};return b===1?w(v.Children.only(r)):v.createElement("div",null,v.Children.map(r,_=>w(_)))}}yc(jC,"displayName","Animate");yc(jC,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Zv(e){var t,r=pB((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return v.createElement(jC,mN({},e,{animationManager:r}))}function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}var c3=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,a=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,c;if(i>0&&s instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=s[h]>i?i:s[h];c="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(e+a*u[0],",").concat(t)),c+="L ".concat(e+r-a*u[1],",").concat(t),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+o*u[1])),c+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(e+r-a*u[2],",").concat(t+n)),c+="L ".concat(e+a*u[3],",").concat(t+n),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-o*u[3])),c+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);c="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+a*p,",").concat(t,`
            L `).concat(e+r-a*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(t+o*p,`
            L `).concat(e+r,",").concat(t+n-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-a*p,",").concat(t+n,`
            L `).concat(e+a*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+n-o*p," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return c},NSe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mB=e=>{var t=Bs(e,NSe),r=v.useRef(null),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&s(x)}catch{}},[]);var{x:i,y:o,width:a,height:l,radius:c,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isAnimationActive:y,isUpdateAnimationActive:m}=t;if(i!==+i||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var b=at("recharts-rectangle",u);return m?v.createElement(Zv,{canBegin:n>0,from:{width:a,height:l,x:i,y:o},to:{width:a,height:l,x:i,y:o},duration:f,animationEasing:h,isActive:m},x=>{var{width:w,height:_,x:j,y:k}=x;return v.createElement(Zv,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,isActive:y,easing:h},v.createElement("path",Gv({},Kt(t,!0),{className:b,d:c3(j,k,w,_,c),ref:r})))}):v.createElement("path",Gv({},Kt(t,!0),{className:b,d:c3(i,o,a,l,c)}))};function gB(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=vr(t,r,n,s),a=vr(t,r,n,i);return{points:[o,a],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function gN(){return gN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gN.apply(null,arguments)}var SSe=(e,t)=>{var r=hn(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},uy=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:a,cornerIsExternal:l}=e,c=a*(o?1:-1)+n,u=Math.asin(a/c)/Wv,h=l?s:s+i*u,f=vr(t,r,c,h),p=vr(t,r,n,h),y=l?s-i*u:s,m=vr(t,r,c*Math.cos(u*Wv),y);return{center:f,circleTangency:p,lineTangency:m,theta:u}},yB=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,a=SSe(i,o),l=i+a,c=vr(t,r,s,i),u=vr(t,r,s,l),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(i>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var f=vr(t,r,n,i),p=vr(t,r,n,l);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(i<=l),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},ESe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=e,u=hn(c-l),{circleTangency:h,lineTangency:f,theta:p}=uy({cx:t,cy:r,radius:s,angle:l,sign:u,cornerRadius:i,cornerIsExternal:a}),{circleTangency:y,lineTangency:m,theta:b}=uy({cx:t,cy:r,radius:s,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:a}),x=a?Math.abs(l-c):Math.abs(l-c)-p-b;if(x<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):yB({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:c});var w="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(x>180),",").concat(+(u<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(m.x,",").concat(m.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:j,theta:k}=uy({cx:t,cy:r,radius:n,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:a}),{circleTangency:S,lineTangency:C,theta:E}=uy({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:a}),T=a?Math.abs(l-c):Math.abs(l-c)-k-E;if(T<0&&i===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(j.x,",").concat(j.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},CSe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vB=e=>{var t=Bs(e,CSe),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:h}=t;if(i<s||c===u)return null;var f=at("recharts-sector",h),p=i-s,y=Os(o,p,0,!0),m;return y>0&&Math.abs(c-u)<360?m=ESe({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(y,p/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):m=yB({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:c,endAngle:u}),v.createElement("path",gN({},Kt(t,!0),{className:f,d:m}))};function TSe(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:a,cy:l,innerRadius:c,outerRadius:u,angle:h}=t,f=vr(a,l,c,h),p=vr(a,l,u,h);n=f.x,s=f.y,i=p.x,o=p.y}else return gB(t);return[{x:n,y:s},{x:i,y:o}]}var bB={},xB={},wB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lC;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(wB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wB;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(xB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cC,r=xB;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const a=Math.max(Math.ceil((i-s)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=s,s+=o;return l}e.range=n})(bB);var ASe=bB.range;const _B=ji(ASe);function cl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function OSe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kC(e){let t,r,n;e.length!==2?(t=cl,r=(a,l)=>cl(e(a),l),n=(a,l)=>e(a)-l):(t=e===cl||e===OSe?e:PSe,r=e,n=e);function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;r(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;r(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=s(a,l,c,u-1);return h>c&&n(a[h-1],l)>-n(a[h],l)?h-1:h}return{left:s,center:o,right:i}}function PSe(){return 0}function jB(e){return e===null?NaN:+e}function*RSe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const ISe=kC(cl),Mm=ISe.right;kC(jB).center;class u3 extends Map{constructor(t,r=MSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(d3(this,t))}has(t){return super.has(d3(this,t))}set(t,r){return super.set(DSe(this,t),r)}delete(t){return super.delete(LSe(this,t))}}function d3({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function DSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function LSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function MSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function zSe(e=cl){if(e===cl)return kB;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function kB(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const FSe=Math.sqrt(50),$Se=Math.sqrt(10),USe=Math.sqrt(2);function Yv(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=FSe?10:i>=$Se?5:i>=USe?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=r&&r<2?Yv(e,t,r*2):[a,l,c]}function yN(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?Yv(t,e,r):Yv(e,t,r);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(n)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function vN(e,t,r){return t=+t,e=+e,r=+r,Yv(e,t,r)[2]}function bN(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?vN(t,e,r):vN(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function h3(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function f3(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function NB(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?kB:zSe(s);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(t-c*h/l+f)),y=Math.min(n,Math.floor(t+(l-c)*h/l+f));NB(e,t,p,y,s)}const i=e[t];let o=r,a=n;for(Sf(e,r,t),s(e[n],i)>0&&Sf(e,r,n);o<a;){for(Sf(e,o,a),++o,--a;s(e[o],i)<0;)++o;for(;s(e[a],i)>0;)--a}s(e[r],i)===0?Sf(e,r,a):(++a,Sf(e,a,n)),a<=t&&(r=a+1),t<=a&&(n=a-1)}return e}function Sf(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function qSe(e,t,r){if(e=Float64Array.from(RSe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return f3(e);if(t>=1)return h3(e);var n,s=(n-1)*t,i=Math.floor(s),o=h3(NB(e,i).subarray(0,i+1)),a=f3(e.subarray(i+1));return o+(a-o)*(s-i)}}function BSe(e,t,r=jB){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),a=+r(e[i+1],i+1,e);return o+(a-o)*(s-i)}}function VSe(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Vs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ma(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const xN=Symbol("implicit");function NC(){var e=new u3,t=[],r=[],n=xN;function s(i){let o=e.get(i);if(o===void 0){if(n!==xN)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new u3;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return NC(t,r).unknown(n)},Vs.apply(s,arguments),s}function SC(){var e=NC().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function h(){var f=t().length,p=s<n,y=p?s:n,m=p?n:s;i=(m-y)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),y+=(m-y-i*(f-l))*u,o=i*(1-l),a&&(y=Math.round(y),o=Math.round(o));var b=VSe(f).map(function(x){return y+i*x});return r(p?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,a=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,h()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},e.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return SC(t(),[n,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},Vs.apply(h(),arguments)}function SB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return SB(t())},e}function WSe(){return SB(SC.apply(null,arguments).paddingInner(1))}function EC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function EB(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function zm(){}var Gp=.7,Jv=1/Gp,Nd="\\s*([+-]?\\d+)\\s*",Yp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HSe=/^#([0-9a-f]{3,8})$/,KSe=new RegExp(`^rgb\\(${Nd},${Nd},${Nd}\\)$`),ZSe=new RegExp(`^rgb\\(${Xi},${Xi},${Xi}\\)$`),GSe=new RegExp(`^rgba\\(${Nd},${Nd},${Nd},${Yp}\\)$`),YSe=new RegExp(`^rgba\\(${Xi},${Xi},${Xi},${Yp}\\)$`),JSe=new RegExp(`^hsl\\(${Yp},${Xi},${Xi}\\)$`),XSe=new RegExp(`^hsla\\(${Yp},${Xi},${Xi},${Yp}\\)$`),p3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};EC(zm,Jp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:m3,formatHex:m3,formatHex8:QSe,formatHsl:eEe,formatRgb:g3,toString:g3});function m3(){return this.rgb().formatHex()}function QSe(){return this.rgb().formatHex8()}function eEe(){return CB(this).formatHsl()}function g3(){return this.rgb().formatRgb()}function Jp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=HSe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?y3(t):r===3?new Vn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?dy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?dy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=KSe.exec(e))?new Vn(t[1],t[2],t[3],1):(t=ZSe.exec(e))?new Vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=GSe.exec(e))?dy(t[1],t[2],t[3],t[4]):(t=YSe.exec(e))?dy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=JSe.exec(e))?x3(t[1],t[2]/100,t[3]/100,1):(t=XSe.exec(e))?x3(t[1],t[2]/100,t[3]/100,t[4]):p3.hasOwnProperty(e)?y3(p3[e]):e==="transparent"?new Vn(NaN,NaN,NaN,0):null}function y3(e){return new Vn(e>>16&255,e>>8&255,e&255,1)}function dy(e,t,r,n){return n<=0&&(e=t=r=NaN),new Vn(e,t,r,n)}function tEe(e){return e instanceof zm||(e=Jp(e)),e?(e=e.rgb(),new Vn(e.r,e.g,e.b,e.opacity)):new Vn}function wN(e,t,r,n){return arguments.length===1?tEe(e):new Vn(e,t,r,n??1)}function Vn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}EC(Vn,wN,EB(zm,{brighter(e){return e=e==null?Jv:Math.pow(Jv,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gp:Math.pow(Gp,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vn(Ic(this.r),Ic(this.g),Ic(this.b),Xv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:v3,formatHex:v3,formatHex8:rEe,formatRgb:b3,toString:b3}));function v3(){return`#${vc(this.r)}${vc(this.g)}${vc(this.b)}`}function rEe(){return`#${vc(this.r)}${vc(this.g)}${vc(this.b)}${vc((isNaN(this.opacity)?1:this.opacity)*255)}`}function b3(){const e=Xv(this.opacity);return`${e===1?"rgb(":"rgba("}${Ic(this.r)}, ${Ic(this.g)}, ${Ic(this.b)}${e===1?")":`, ${e})`}`}function Xv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ic(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vc(e){return e=Ic(e),(e<16?"0":"")+e.toString(16)}function x3(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new mi(e,t,r,n)}function CB(e){if(e instanceof mi)return new mi(e.h,e.s,e.l,e.opacity);if(e instanceof zm||(e=Jp(e)),!e)return new mi;if(e instanceof mi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,a=i-s,l=(i+s)/2;return a?(t===i?o=(r-n)/a+(r<n)*6:r===i?o=(n-t)/a+2:o=(t-r)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new mi(o,a,l,e.opacity)}function nEe(e,t,r,n){return arguments.length===1?CB(e):new mi(e,t,r,n??1)}function mi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}EC(mi,nEe,EB(zm,{brighter(e){return e=e==null?Jv:Math.pow(Jv,e),new mi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gp:Math.pow(Gp,e),new mi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Vn(T_(e>=240?e-240:e+120,s,n),T_(e,s,n),T_(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new mi(w3(this.h),hy(this.s),hy(this.l),Xv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Xv(this.opacity);return`${e===1?"hsl(":"hsla("}${w3(this.h)}, ${hy(this.s)*100}%, ${hy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function w3(e){return e=(e||0)%360,e<0?e+360:e}function hy(e){return Math.max(0,Math.min(1,e||0))}function T_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const CC=e=>()=>e;function sEe(e,t){return function(r){return e+r*t}}function iEe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function oEe(e){return(e=+e)==1?TB:function(t,r){return r-t?iEe(t,r,e):CC(isNaN(t)?r:t)}}function TB(e,t){var r=t-e;return r?sEe(e,r):CC(isNaN(e)?t:e)}const _3=function e(t){var r=oEe(t);function n(s,i){var o=r((s=wN(s)).r,(i=wN(i)).r),a=r(s.g,i.g),l=r(s.b,i.b),c=TB(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return n.gamma=e,n}(1);function aEe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function lEe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cEe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=$h(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(a){for(o=0;o<n;++o)i[o]=s[o](a);return i}}function uEe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Qv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function dEe(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=$h(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var _N=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,A_=new RegExp(_N.source,"g");function hEe(e){return function(){return e}}function fEe(e){return function(t){return e(t)+""}}function pEe(e,t){var r=_N.lastIndex=A_.lastIndex=0,n,s,i,o=-1,a=[],l=[];for(e=e+"",t=t+"";(n=_N.exec(e))&&(s=A_.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Qv(n,s)})),r=A_.lastIndex;return r<t.length&&(i=t.slice(r),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?fEe(l[0].x):hEe(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function $h(e,t){var r=typeof t,n;return t==null||r==="boolean"?CC(t):(r==="number"?Qv:r==="string"?(n=Jp(t))?(t=n,_3):pEe:t instanceof Jp?_3:t instanceof Date?uEe:lEe(t)?aEe:Array.isArray(t)?cEe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dEe:Qv)(e,t)}function TC(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function mEe(e,t){t===void 0&&(t=e,e=$h);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[a](o-a)}}function gEe(e){return function(){return e}}function eb(e){return+e}var j3=[0,1];function En(e){return e}function jN(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:gEe(isNaN(t)?NaN:.5)}function yEe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function vEe(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=jN(s,n),i=r(o,i)):(n=jN(n,s),i=r(i,o)),function(a){return i(n(a))}}function bEe(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=jN(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(a){var l=Mm(e,a,1,n)-1;return i[l](s[l](a))}}function Fm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yx(){var e=j3,t=j3,r=$h,n,s,i,o=En,a,l,c;function u(){var f=Math.min(e.length,t.length);return o!==En&&(o=yEe(e[0],e[f-1])),a=f>2?bEe:vEe,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?i:(l||(l=a(e.map(n),t,r)))(n(o(f)))}return h.invert=function(f){return o(s((c||(c=a(t,e.map(n),Qv)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,eb),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=TC,u()},h.clamp=function(f){return arguments.length?(o=f?!0:En,u()):o!==En},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,p){return n=f,s=p,u()}}function AC(){return Yx()(En,En)}function xEe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tb(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function oh(e){return e=tb(Math.abs(e)),e?e[1]:NaN}function wEe(e,t){return function(r,n){for(var s=r.length,i=[],o=0,a=e[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),i.push(r.substring(s-=a,s+a)),!((l+=a+1)>n));)a=e[o=(o+1)%e.length];return i.reverse().join(t)}}function _Ee(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var jEe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xp(e){if(!(t=jEe.exec(e)))throw new Error("invalid format: "+e);var t;return new OC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xp.prototype=OC.prototype;function OC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}OC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kEe(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var AB;function NEe(e,t){var r=tb(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(AB=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+tb(e,Math.max(0,t+i-1))[0]}function k3(e,t){var r=tb(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const N3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:xEe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>k3(e*100,t),r:k3,s:NEe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function S3(e){return e}var E3=Array.prototype.map,C3=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function SEe(e){var t=e.grouping===void 0||e.thousands===void 0?S3:wEe(E3.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?S3:_Ee(E3.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(h){h=Xp(h);var f=h.fill,p=h.align,y=h.sign,m=h.symbol,b=h.zero,x=h.width,w=h.comma,_=h.precision,j=h.trim,k=h.type;k==="n"?(w=!0,k="g"):N3[k]||(_===void 0&&(_=12),j=!0,k="g"),(b||f==="0"&&p==="=")&&(b=!0,f="0",p="=");var S=m==="$"?r:m==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",C=m==="$"?n:/[%p]/.test(k)?o:"",E=N3[k],T=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function R(O){var I=S,P=C,D,L,B;if(k==="c")P=E(O)+P,O="";else{O=+O;var q=O<0||1/O<0;if(O=isNaN(O)?l:E(Math.abs(O),_),j&&(O=kEe(O)),q&&+O==0&&y!=="+"&&(q=!1),I=(q?y==="("?y:a:y==="-"||y==="("?"":y)+I,P=(k==="s"?C3[8+AB/3]:"")+P+(q&&y==="("?")":""),T){for(D=-1,L=O.length;++D<L;)if(B=O.charCodeAt(D),48>B||B>57){P=(B===46?s+O.slice(D+1):O.slice(D))+P,O=O.slice(0,D);break}}}w&&!b&&(O=t(O,1/0));var K=I.length+O.length+P.length,H=K<x?new Array(x-K+1).join(f):"";switch(w&&b&&(O=t(H+O,H.length?x-P.length:1/0),H=""),p){case"<":O=I+O+P+H;break;case"=":O=I+H+O+P;break;case"^":O=H.slice(0,K=H.length>>1)+I+O+P+H.slice(K);break;default:O=H+I+O+P;break}return i(O)}return R.toString=function(){return h+""},R}function u(h,f){var p=c((h=Xp(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(oh(f)/3)))*3,m=Math.pow(10,-y),b=C3[8+y/3];return function(x){return p(m*x)+b}}return{format:c,formatPrefix:u}}var fy,PC,OB;EEe({thousands:",",grouping:[3],currency:["$",""]});function EEe(e){return fy=SEe(e),PC=fy.format,OB=fy.formatPrefix,fy}function CEe(e){return Math.max(0,-oh(Math.abs(e)))}function TEe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oh(t)/3)))*3-oh(Math.abs(e)))}function AEe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,oh(t)-oh(e))+1}function PB(e,t,r,n){var s=bN(e,t,r),i;switch(n=Xp(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=TEe(s,o))&&(n.precision=i),OB(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=AEe(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=CEe(s))&&(n.precision=i-(n.type==="%")*2);break}}return PC(n)}function Pl(e){var t=e.domain;return e.ticks=function(r){var n=t();return yN(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return PB(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],a=n[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=vN(o,a,r),c===l)return n[s]=o,n[i]=a,t(n);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function RB(){var e=AC();return e.copy=function(){return Fm(e,RB())},Vs.apply(e,arguments),Pl(e)}function IB(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,eb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return IB(e).unknown(t)},e=arguments.length?Array.from(e,eb):[0,1],Pl(r)}function DB(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function T3(e){return Math.log(e)}function A3(e){return Math.exp(e)}function OEe(e){return-Math.log(-e)}function PEe(e){return-Math.exp(-e)}function REe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function IEe(e){return e===10?REe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function DEe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function O3(e){return(t,r)=>-e(-t,r)}function RC(e){const t=e(T3,A3),r=t.domain;let n=10,s,i;function o(){return s=DEe(n),i=IEe(n),r()[0]<0?(s=O3(s),i=O3(i),e(OEe,PEe)):e(T3,A3),t}return t.base=function(a){return arguments.length?(n=+a,o()):n},t.domain=function(a){return arguments.length?(r(a),o()):r()},t.ticks=a=>{const l=r();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let f=s(c),p=s(u),y,m;const b=a==null?10:+a;let x=[];if(!(n%1)&&p-f<b){if(f=Math.floor(f),p=Math.ceil(p),c>0){for(;f<=p;++f)for(y=1;y<n;++y)if(m=f<0?y/i(-f):y*i(f),!(m<c)){if(m>u)break;x.push(m)}}else for(;f<=p;++f)for(y=n-1;y>=1;--y)if(m=f>0?y/i(-f):y*i(f),!(m<c)){if(m>u)break;x.push(m)}x.length*2<b&&(x=yN(c,u,b))}else x=yN(f,p,Math.min(p-f,b)).map(i);return h?x.reverse():x},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Xp(l)).precision==null&&(l.trim=!0),l=PC(l)),a===1/0)return l;const c=Math.max(1,n*a/t.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*n<n-.5&&(h*=n),h<=c?l(u):""}},t.nice=()=>r(DB(r(),{floor:a=>i(Math.floor(s(a))),ceil:a=>i(Math.ceil(s(a)))})),t}function LB(){const e=RC(Yx()).domain([1,10]);return e.copy=()=>Fm(e,LB()).base(e.base()),Vs.apply(e,arguments),e}function P3(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function R3(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function IC(e){var t=1,r=e(P3(t),R3(t));return r.constant=function(n){return arguments.length?e(P3(t=+n),R3(t)):t},Pl(r)}function MB(){var e=IC(Yx());return e.copy=function(){return Fm(e,MB()).constant(e.constant())},Vs.apply(e,arguments)}function I3(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function LEe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function MEe(e){return e<0?-e*e:e*e}function DC(e){var t=e(En,En),r=1;function n(){return r===1?e(En,En):r===.5?e(LEe,MEe):e(I3(r),I3(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Pl(t)}function LC(){var e=DC(Yx());return e.copy=function(){return Fm(e,LC()).exponent(e.exponent())},Vs.apply(e,arguments),e}function zEe(){return LC.apply(null,arguments).exponent(.5)}function D3(e){return Math.sign(e)*e*e}function FEe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function zB(){var e=AC(),t=[0,1],r=!1,n;function s(i){var o=FEe(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(D3(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,eb)).map(D3)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return zB(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Vs.apply(s,arguments),Pl(s)}function FB(){var e=[],t=[],r=[],n;function s(){var o=0,a=Math.max(1,t.length);for(r=new Array(a-1);++o<a;)r[o-1]=BSe(e,o/a);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Mm(r,o)]}return i.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?r[a-1]:e[0],a<r.length?r[a]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(cl),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return FB().domain(e).range(t).unknown(n)},Vs.apply(i,arguments)}function $B(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(l){return l!=null&&l<=l?s[Mm(n,l,0,r)]:i}function a(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(r=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return $B().domain([e,t]).range(s).unknown(i)},Vs.apply(Pl(o),arguments)}function UB(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Mm(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return UB().domain(e).range(t).unknown(r)},Vs.apply(s,arguments)}const O_=new Date,P_=new Date;function Mr(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),a=s.ceil(i);return i-o<a-i?o:a},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,a)=>{const l=[];if(i=s.ceil(i),a=a==null?1:Math.floor(a),!(i<o)||!(a>0))return l;let c;do l.push(c=new Date(+i)),t(i,a),e(i);while(c<i&&i<o);return l},s.filter=i=>Mr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!i(o););else for(;--a>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(O_.setTime(+i),P_.setTime(+o),e(O_),e(P_),Math.floor(r(O_,P_))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const rb=Mr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);rb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Mr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):rb);rb.range;const Uo=1e3,Es=Uo*60,qo=Es*60,na=qo*24,MC=na*7,L3=na*30,R_=na*365,bc=Mr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Uo)},(e,t)=>(t-e)/Uo,e=>e.getUTCSeconds());bc.range;const zC=Mr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Uo)},(e,t)=>{e.setTime(+e+t*Es)},(e,t)=>(t-e)/Es,e=>e.getMinutes());zC.range;const FC=Mr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Es)},(e,t)=>(t-e)/Es,e=>e.getUTCMinutes());FC.range;const $C=Mr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Uo-e.getMinutes()*Es)},(e,t)=>{e.setTime(+e+t*qo)},(e,t)=>(t-e)/qo,e=>e.getHours());$C.range;const UC=Mr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qo)},(e,t)=>(t-e)/qo,e=>e.getUTCHours());UC.range;const $m=Mr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Es)/na,e=>e.getDate()-1);$m.range;const Jx=Mr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/na,e=>e.getUTCDate()-1);Jx.range;const qB=Mr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/na,e=>Math.floor(e/na));qB.range;function cu(e){return Mr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Es)/MC)}const Xx=cu(0),nb=cu(1),$Ee=cu(2),UEe=cu(3),ah=cu(4),qEe=cu(5),BEe=cu(6);Xx.range;nb.range;$Ee.range;UEe.range;ah.range;qEe.range;BEe.range;function uu(e){return Mr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/MC)}const Qx=uu(0),sb=uu(1),VEe=uu(2),WEe=uu(3),lh=uu(4),HEe=uu(5),KEe=uu(6);Qx.range;sb.range;VEe.range;WEe.range;lh.range;HEe.range;KEe.range;const qC=Mr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());qC.range;const BC=Mr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());BC.range;const sa=Mr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());sa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Mr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});sa.range;const ia=Mr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ia.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Mr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ia.range;function BB(e,t,r,n,s,i){const o=[[bc,1,Uo],[bc,5,5*Uo],[bc,15,15*Uo],[bc,30,30*Uo],[i,1,Es],[i,5,5*Es],[i,15,15*Es],[i,30,30*Es],[s,1,qo],[s,3,3*qo],[s,6,6*qo],[s,12,12*qo],[n,1,na],[n,2,2*na],[r,1,MC],[t,1,L3],[t,3,3*L3],[e,1,R_]];function a(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const p=h&&typeof h.range=="function"?h:l(c,u,h),y=p?p.range(c,+u+1):[];return f?y.reverse():y}function l(c,u,h){const f=Math.abs(u-c)/h,p=kC(([,,b])=>b).right(o,f);if(p===o.length)return e.every(bN(c/R_,u/R_,h));if(p===0)return rb.every(Math.max(bN(c,u,h),1));const[y,m]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return y.every(m)}return[a,l]}const[ZEe,GEe]=BB(ia,BC,Qx,qB,UC,FC),[YEe,JEe]=BB(sa,qC,Xx,$m,$C,zC);function I_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function D_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ef(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function XEe(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Cf(s),u=Tf(s),h=Cf(i),f=Tf(i),p=Cf(o),y=Tf(o),m=Cf(a),b=Tf(a),x=Cf(l),w=Tf(l),_={a:q,A:K,b:H,B:$,c:null,d:q3,e:q3,f:w2e,g:O2e,G:R2e,H:v2e,I:b2e,j:x2e,L:VB,m:_2e,M:j2e,p:J,q:te,Q:W3,s:H3,S:k2e,u:N2e,U:S2e,V:E2e,w:C2e,W:T2e,x:null,X:null,y:A2e,Y:P2e,Z:I2e,"%":V3},j={a:be,A:Z,b:G,B:fe,c:null,d:B3,e:B3,f:z2e,g:Z2e,G:Y2e,H:D2e,I:L2e,j:M2e,L:HB,m:F2e,M:$2e,p:pe,q:ke,Q:W3,s:H3,S:U2e,u:q2e,U:B2e,V:V2e,w:W2e,W:H2e,x:null,X:null,y:K2e,Y:G2e,Z:J2e,"%":V3},k={a:R,A:O,b:I,B:P,c:D,d:$3,e:$3,f:p2e,g:F3,G:z3,H:U3,I:U3,j:u2e,L:f2e,m:c2e,M:d2e,p:T,q:l2e,Q:g2e,s:y2e,S:h2e,u:n2e,U:s2e,V:i2e,w:r2e,W:o2e,x:L,X:B,y:F3,Y:z3,Z:a2e,"%":m2e};_.x=S(r,_),_.X=S(n,_),_.c=S(t,_),j.x=S(r,j),j.X=S(n,j),j.c=S(t,j);function S(W,X){return function(ae){var U=[],Se=-1,Re=0,Qe=W.length,Xe,pt,Xt;for(ae instanceof Date||(ae=new Date(+ae));++Se<Qe;)W.charCodeAt(Se)===37&&(U.push(W.slice(Re,Se)),(pt=M3[Xe=W.charAt(++Se)])!=null?Xe=W.charAt(++Se):pt=Xe==="e"?" ":"0",(Xt=X[Xe])&&(Xe=Xt(ae,pt)),U.push(Xe),Re=Se+1);return U.push(W.slice(Re,Se)),U.join("")}}function C(W,X){return function(ae){var U=Ef(1900,void 0,1),Se=E(U,W,ae+="",0),Re,Qe;if(Se!=ae.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(X&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(Re=D_(Ef(U.y,0,1)),Qe=Re.getUTCDay(),Re=Qe>4||Qe===0?sb.ceil(Re):sb(Re),Re=Jx.offset(Re,(U.V-1)*7),U.y=Re.getUTCFullYear(),U.m=Re.getUTCMonth(),U.d=Re.getUTCDate()+(U.w+6)%7):(Re=I_(Ef(U.y,0,1)),Qe=Re.getDay(),Re=Qe>4||Qe===0?nb.ceil(Re):nb(Re),Re=$m.offset(Re,(U.V-1)*7),U.y=Re.getFullYear(),U.m=Re.getMonth(),U.d=Re.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),Qe="Z"in U?D_(Ef(U.y,0,1)).getUTCDay():I_(Ef(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(Qe+5)%7:U.w+U.U*7-(Qe+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,D_(U)):I_(U)}}function E(W,X,ae,U){for(var Se=0,Re=X.length,Qe=ae.length,Xe,pt;Se<Re;){if(U>=Qe)return-1;if(Xe=X.charCodeAt(Se++),Xe===37){if(Xe=X.charAt(Se++),pt=k[Xe in M3?X.charAt(Se++):Xe],!pt||(U=pt(W,ae,U))<0)return-1}else if(Xe!=ae.charCodeAt(U++))return-1}return U}function T(W,X,ae){var U=c.exec(X.slice(ae));return U?(W.p=u.get(U[0].toLowerCase()),ae+U[0].length):-1}function R(W,X,ae){var U=p.exec(X.slice(ae));return U?(W.w=y.get(U[0].toLowerCase()),ae+U[0].length):-1}function O(W,X,ae){var U=h.exec(X.slice(ae));return U?(W.w=f.get(U[0].toLowerCase()),ae+U[0].length):-1}function I(W,X,ae){var U=x.exec(X.slice(ae));return U?(W.m=w.get(U[0].toLowerCase()),ae+U[0].length):-1}function P(W,X,ae){var U=m.exec(X.slice(ae));return U?(W.m=b.get(U[0].toLowerCase()),ae+U[0].length):-1}function D(W,X,ae){return E(W,t,X,ae)}function L(W,X,ae){return E(W,r,X,ae)}function B(W,X,ae){return E(W,n,X,ae)}function q(W){return o[W.getDay()]}function K(W){return i[W.getDay()]}function H(W){return l[W.getMonth()]}function $(W){return a[W.getMonth()]}function J(W){return s[+(W.getHours()>=12)]}function te(W){return 1+~~(W.getMonth()/3)}function be(W){return o[W.getUTCDay()]}function Z(W){return i[W.getUTCDay()]}function G(W){return l[W.getUTCMonth()]}function fe(W){return a[W.getUTCMonth()]}function pe(W){return s[+(W.getUTCHours()>=12)]}function ke(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var X=S(W+="",_);return X.toString=function(){return W},X},parse:function(W){var X=C(W+="",!1);return X.toString=function(){return W},X},utcFormat:function(W){var X=S(W+="",j);return X.toString=function(){return W},X},utcParse:function(W){var X=C(W+="",!0);return X.toString=function(){return W},X}}}var M3={"-":"",_:" ",0:"0"},Hr=/^\s*\d+/,QEe=/^%/,e2e=/[\\^$*+?|[\]().{}]/g;function ut(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function t2e(e){return e.replace(e2e,"\\$&")}function Cf(e){return new RegExp("^(?:"+e.map(t2e).join("|")+")","i")}function Tf(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function r2e(e,t,r){var n=Hr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function n2e(e,t,r){var n=Hr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function s2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function i2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function o2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function z3(e,t,r){var n=Hr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function F3(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function a2e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function l2e(e,t,r){var n=Hr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function c2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function $3(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function u2e(e,t,r){var n=Hr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function U3(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function d2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function h2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function f2e(e,t,r){var n=Hr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function p2e(e,t,r){var n=Hr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function m2e(e,t,r){var n=QEe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function g2e(e,t,r){var n=Hr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function y2e(e,t,r){var n=Hr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function q3(e,t){return ut(e.getDate(),t,2)}function v2e(e,t){return ut(e.getHours(),t,2)}function b2e(e,t){return ut(e.getHours()%12||12,t,2)}function x2e(e,t){return ut(1+$m.count(sa(e),e),t,3)}function VB(e,t){return ut(e.getMilliseconds(),t,3)}function w2e(e,t){return VB(e,t)+"000"}function _2e(e,t){return ut(e.getMonth()+1,t,2)}function j2e(e,t){return ut(e.getMinutes(),t,2)}function k2e(e,t){return ut(e.getSeconds(),t,2)}function N2e(e){var t=e.getDay();return t===0?7:t}function S2e(e,t){return ut(Xx.count(sa(e)-1,e),t,2)}function WB(e){var t=e.getDay();return t>=4||t===0?ah(e):ah.ceil(e)}function E2e(e,t){return e=WB(e),ut(ah.count(sa(e),e)+(sa(e).getDay()===4),t,2)}function C2e(e){return e.getDay()}function T2e(e,t){return ut(nb.count(sa(e)-1,e),t,2)}function A2e(e,t){return ut(e.getFullYear()%100,t,2)}function O2e(e,t){return e=WB(e),ut(e.getFullYear()%100,t,2)}function P2e(e,t){return ut(e.getFullYear()%1e4,t,4)}function R2e(e,t){var r=e.getDay();return e=r>=4||r===0?ah(e):ah.ceil(e),ut(e.getFullYear()%1e4,t,4)}function I2e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ut(t/60|0,"0",2)+ut(t%60,"0",2)}function B3(e,t){return ut(e.getUTCDate(),t,2)}function D2e(e,t){return ut(e.getUTCHours(),t,2)}function L2e(e,t){return ut(e.getUTCHours()%12||12,t,2)}function M2e(e,t){return ut(1+Jx.count(ia(e),e),t,3)}function HB(e,t){return ut(e.getUTCMilliseconds(),t,3)}function z2e(e,t){return HB(e,t)+"000"}function F2e(e,t){return ut(e.getUTCMonth()+1,t,2)}function $2e(e,t){return ut(e.getUTCMinutes(),t,2)}function U2e(e,t){return ut(e.getUTCSeconds(),t,2)}function q2e(e){var t=e.getUTCDay();return t===0?7:t}function B2e(e,t){return ut(Qx.count(ia(e)-1,e),t,2)}function KB(e){var t=e.getUTCDay();return t>=4||t===0?lh(e):lh.ceil(e)}function V2e(e,t){return e=KB(e),ut(lh.count(ia(e),e)+(ia(e).getUTCDay()===4),t,2)}function W2e(e){return e.getUTCDay()}function H2e(e,t){return ut(sb.count(ia(e)-1,e),t,2)}function K2e(e,t){return ut(e.getUTCFullYear()%100,t,2)}function Z2e(e,t){return e=KB(e),ut(e.getUTCFullYear()%100,t,2)}function G2e(e,t){return ut(e.getUTCFullYear()%1e4,t,4)}function Y2e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?lh(e):lh.ceil(e),ut(e.getUTCFullYear()%1e4,t,4)}function J2e(){return"+0000"}function V3(){return"%"}function W3(e){return+e}function H3(e){return Math.floor(+e/1e3)}var $u,ZB,GB;X2e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function X2e(e){return $u=XEe(e),ZB=$u.format,$u.parse,GB=$u.utcFormat,$u.utcParse,$u}function Q2e(e){return new Date(e)}function eCe(e){return e instanceof Date?+e:+new Date(+e)}function VC(e,t,r,n,s,i,o,a,l,c){var u=AC(),h=u.invert,f=u.domain,p=c(".%L"),y=c(":%S"),m=c("%I:%M"),b=c("%I %p"),x=c("%a %d"),w=c("%b %d"),_=c("%B"),j=c("%Y");function k(S){return(l(S)<S?p:a(S)<S?y:o(S)<S?m:i(S)<S?b:n(S)<S?s(S)<S?x:w:r(S)<S?_:j)(S)}return u.invert=function(S){return new Date(h(S))},u.domain=function(S){return arguments.length?f(Array.from(S,eCe)):f().map(Q2e)},u.ticks=function(S){var C=f();return e(C[0],C[C.length-1],S??10)},u.tickFormat=function(S,C){return C==null?k:c(C)},u.nice=function(S){var C=f();return(!S||typeof S.range!="function")&&(S=t(C[0],C[C.length-1],S??10)),S?f(DB(C,S)):u},u.copy=function(){return Fm(u,VC(e,t,r,n,s,i,o,a,l,c))},u}function tCe(){return Vs.apply(VC(YEe,JEe,sa,qC,Xx,$m,$C,zC,bc,ZB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rCe(){return Vs.apply(VC(ZEe,GEe,ia,BC,Qx,Jx,UC,FC,bc,GB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ew(){var e=0,t=1,r,n,s,i,o=En,a=!1,l;function c(h){return h==null||isNaN(h=+h)?l:o(s===0?.5:(h=(i(h)-r)*s,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(o=h,c):o};function u(h){return function(f){var p,y;return arguments.length?([p,y]=f,o=h(p,y),c):[o(0),o(1)]}}return c.range=u($h),c.rangeRound=u(TC),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return i=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),c}}function Rl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function YB(){var e=Pl(ew()(En));return e.copy=function(){return Rl(e,YB())},ma.apply(e,arguments)}function JB(){var e=RC(ew()).domain([1,10]);return e.copy=function(){return Rl(e,JB()).base(e.base())},ma.apply(e,arguments)}function XB(){var e=IC(ew());return e.copy=function(){return Rl(e,XB()).constant(e.constant())},ma.apply(e,arguments)}function WC(){var e=DC(ew());return e.copy=function(){return Rl(e,WC()).exponent(e.exponent())},ma.apply(e,arguments)}function nCe(){return WC.apply(null,arguments).exponent(.5)}function QB(){var e=[],t=En;function r(n){if(n!=null&&!isNaN(n=+n))return t((Mm(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(cl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>qSe(e,i/n))},r.copy=function(){return QB(t).domain(e)},ma.apply(r,arguments)}function tw(){var e=0,t=.5,r=1,n=1,s,i,o,a,l,c=En,u,h=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-i)*(n*m<n*i?a:l),c(h?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,s=u(e=+e),i=u(t=+t),o=u(r=+r),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),n=i<s?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(h=!!m,p):h},p.interpolator=function(m){return arguments.length?(c=m,p):c};function y(m){return function(b){var x,w,_;return arguments.length?([x,w,_]=b,c=mEe(m,[x,w,_]),p):[c(0),c(.5),c(1)]}}return p.range=y($h),p.rangeRound=y(TC),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return u=m,s=m(e),i=m(t),o=m(r),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),n=i<s?-1:1,p}}function e7(){var e=Pl(tw()(En));return e.copy=function(){return Rl(e,e7())},ma.apply(e,arguments)}function t7(){var e=RC(tw()).domain([.1,1,10]);return e.copy=function(){return Rl(e,t7()).base(e.base())},ma.apply(e,arguments)}function r7(){var e=IC(tw());return e.copy=function(){return Rl(e,r7()).constant(e.constant())},ma.apply(e,arguments)}function HC(){var e=DC(tw());return e.copy=function(){return Rl(e,HC()).exponent(e.exponent())},ma.apply(e,arguments)}function sCe(){return HC.apply(null,arguments).exponent(.5)}const Zf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:SC,scaleDiverging:e7,scaleDivergingLog:t7,scaleDivergingPow:HC,scaleDivergingSqrt:sCe,scaleDivergingSymlog:r7,scaleIdentity:IB,scaleImplicit:xN,scaleLinear:RB,scaleLog:LB,scaleOrdinal:NC,scalePoint:WSe,scalePow:LC,scaleQuantile:FB,scaleQuantize:$B,scaleRadial:zB,scaleSequential:YB,scaleSequentialLog:JB,scaleSequentialPow:WC,scaleSequentialQuantile:QB,scaleSequentialSqrt:nCe,scaleSequentialSymlog:XB,scaleSqrt:zEe,scaleSymlog:MB,scaleThreshold:UB,scaleTime:tCe,scaleUtc:rCe,tickFormat:PB},Symbol.toStringTag,{value:"Module"}));var Il=e=>e.chartData,KC=Y([Il],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),ZC=(e,t,r,n)=>n?KC(e):Il(e);function ch(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(xi(t)&&xi(r))return!0}return!1}function K3(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function iCe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(xi(r))s=r;else if(typeof r=="function")return;if(xi(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(ch(o))return o}}function oCe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(ch(n))return K3(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,a;if(s==="auto")t!=null&&(o=Math.min(...t));else if(Ae(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&BI.test(s)){var l=BI.exec(s);if(l==null||t==null)o=void 0;else{var c=+l[1];o=t[0]-c}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(a=Math.max(...t));else if(Ae(i))a=i;else if(typeof i=="function")try{t!=null&&(a=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&VI.test(i)){var u=VI.exec(i);if(u==null||t==null)a=void 0;else{var h=+u[1];a=t[1]+h}}else a=t==null?void 0:t[1];var f=[o,a];if(ch(f))return t==null?f:K3(f,t,r)}}}var Uh=1e9,aCe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},YC,zt=!0,Ms="[DecimalError] ",Dc=Ms+"Invalid argument: ",GC=Ms+"Exponent out of range: ",qh=Math.floor,cc=Math.pow,lCe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,rs,Ur=1e7,Pt=7,n7=9007199254740991,ib=qh(n7/Pt),Ee={};Ee.absoluteValue=Ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ee.comparedTo=Ee.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Ee.decimalPlaces=Ee.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Pt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ee.dividedBy=Ee.div=function(e){return Ho(this,new this.constructor(e))};Ee.dividedToIntegerBy=Ee.idiv=function(e){var t=this,r=t.constructor;return xt(Ho(t,new r(e),0,1),r.precision)};Ee.equals=Ee.eq=function(e){return!this.cmp(e)};Ee.exponent=function(){return xr(this)};Ee.greaterThan=Ee.gt=function(e){return this.cmp(e)>0};Ee.greaterThanOrEqualTo=Ee.gte=function(e){return this.cmp(e)>=0};Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2};Ee.isNegative=Ee.isneg=function(){return this.s<0};Ee.isPositive=Ee.ispos=function(){return this.s>0};Ee.isZero=function(){return this.s===0};Ee.lessThan=Ee.lt=function(e){return this.cmp(e)<0};Ee.lessThanOrEqualTo=Ee.lte=function(e){return this.cmp(e)<1};Ee.logarithm=Ee.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(rs))throw Error(Ms+"NaN");if(r.s<1)throw Error(Ms+(r.s?"NaN":"-Infinity"));return r.eq(rs)?new n(0):(zt=!1,t=Ho(Qp(r,i),Qp(e,i),i),zt=!0,xt(t,s))};Ee.minus=Ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?o7(t,e):s7(t,(e.s=-e.s,e))};Ee.modulo=Ee.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Ms+"NaN");return r.s?(zt=!1,t=Ho(r,e,0,1).times(e),zt=!0,r.minus(t)):xt(new n(r),s)};Ee.naturalExponential=Ee.exp=function(){return i7(this)};Ee.naturalLogarithm=Ee.ln=function(){return Qp(this)};Ee.negated=Ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ee.plus=Ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?s7(t,e):o7(t,(e.s=-e.s,e))};Ee.precision=Ee.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Dc+e);if(t=xr(s)+1,n=s.d.length-1,r=n*Pt+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ee.squareRoot=Ee.sqrt=function(){var e,t,r,n,s,i,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Ms+"NaN")}for(e=xr(a),zt=!1,s=Math.sqrt(+a),s==0||s==1/0?(t=Hi(a.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=qh((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(s.toString()),r=l.precision,s=o=r+3;;)if(i=n,n=i.plus(Ho(a,i,o+2)).times(.5),Hi(i.d).slice(0,o)===(t=Hi(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(xt(i,r+1,0),i.times(i).eq(a)){n=i;break}}else if(t!="9999")break;o+=4}return zt=!0,xt(n,r)};Ee.times=Ee.mul=function(e){var t,r,n,s,i,o,a,l,c,u=this,h=u.constructor,f=u.d,p=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,l=f.length,c=p.length,l<c&&(i=f,f=p,p=i,o=l,l=c,c=o),i=[],o=l+c,n=o;n--;)i.push(0);for(n=c;--n>=0;){for(t=0,s=l+n;s>n;)a=i[s]+p[n]*f[s-n-1]+t,i[s--]=a%Ur|0,t=a/Ur|0;i[s]=(i[s]+t)%Ur|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,zt?xt(e,h.precision):e};Ee.toDecimalPlaces=Ee.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(io(e,0,Uh),t===void 0?t=n.rounding:io(t,0,8),xt(r,e+xr(r)+1,t))};Ee.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Zc(n,!0):(io(e,0,Uh),t===void 0?t=s.rounding:io(t,0,8),n=xt(new s(n),e+1,t),r=Zc(n,!0,e+1)),r};Ee.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Zc(s):(io(e,0,Uh),t===void 0?t=i.rounding:io(t,0,8),n=xt(new i(s),e+xr(s)+1,t),r=Zc(n.abs(),!1,e+xr(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ee.toInteger=Ee.toint=function(){var e=this,t=e.constructor;return xt(new t(e),xr(e)+1,t.rounding)};Ee.toNumber=function(){return+this};Ee.toPower=Ee.pow=function(e){var t,r,n,s,i,o,a=this,l=a.constructor,c=12,u=+(e=new l(e));if(!e.s)return new l(rs);if(a=new l(a),!a.s){if(e.s<1)throw Error(Ms+"Infinity");return a}if(a.eq(rs))return a;if(n=l.precision,e.eq(rs))return xt(a,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=a.s,o){if((r=u<0?-u:u)<=n7){for(s=new l(rs),t=Math.ceil(n/Pt+4),zt=!1;r%2&&(s=s.times(a),G3(s.d,t)),r=qh(r/2),r!==0;)a=a.times(a),G3(a.d,t);return zt=!0,e.s<0?new l(rs).div(s):xt(s,n)}}else if(i<0)throw Error(Ms+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,a.s=1,zt=!1,s=e.times(Qp(a,n+c)),zt=!0,s=i7(s),s.s=i,s};Ee.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=xr(s),n=Zc(s,r<=i.toExpNeg||r>=i.toExpPos)):(io(e,1,Uh),t===void 0?t=i.rounding:io(t,0,8),s=xt(new i(s),e,t),r=xr(s),n=Zc(s,e<=r||r<=i.toExpNeg,e)),n};Ee.toSignificantDigits=Ee.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(io(e,1,Uh),t===void 0?t=n.rounding:io(t,0,8)),xt(new n(r),e,t)};Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=xr(e),r=e.constructor;return Zc(e,t<=r.toExpNeg||t>=r.toExpPos)};function s7(e,t){var r,n,s,i,o,a,l,c,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),zt?xt(t,h):t;if(l=e.d,c=t.d,o=e.e,s=t.e,l=l.slice(),i=o-s,i){for(i<0?(n=l,i=-i,a=c.length):(n=c,s=o,a=l.length),o=Math.ceil(h/Pt),a=o>a?o+1:a+1,i>a&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(a=l.length,i=c.length,a-i<0&&(i=a,n=c,c=l,l=n),r=0;i;)r=(l[--i]=l[i]+c[i]+r)/Ur|0,l[i]%=Ur;for(r&&(l.unshift(r),++s),a=l.length;l[--a]==0;)l.pop();return t.d=l,t.e=s,zt?xt(t,h):t}function io(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Dc+e)}function Hi(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Pt-n.length,r&&(i+=Ua(r)),i+=n;o=e[t],n=o+"",r=Pt-n.length,r&&(i+=Ua(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ho=function(){function e(n,s){var i,o=0,a=n.length;for(n=n.slice();a--;)i=n[a]*s+o,n[a]=i%Ur|0,o=i/Ur|0;return o&&n.unshift(o),n}function t(n,s,i,o){var a,l;if(i!=o)l=i>o?1:-1;else for(a=l=0;a<i;a++)if(n[a]!=s[a]){l=n[a]>s[a]?1:-1;break}return l}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Ur+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var a,l,c,u,h,f,p,y,m,b,x,w,_,j,k,S,C,E,T=n.constructor,R=n.s==s.s?1:-1,O=n.d,I=s.d;if(!n.s)return new T(n);if(!s.s)throw Error(Ms+"Division by zero");for(l=n.e-s.e,C=I.length,k=O.length,p=new T(R),y=p.d=[],c=0;I[c]==(O[c]||0);)++c;if(I[c]>(O[c]||0)&&--l,i==null?w=i=T.precision:o?w=i+(xr(n)-xr(s))+1:w=i,w<0)return new T(0);if(w=w/Pt+2|0,c=0,C==1)for(u=0,I=I[0],w++;(c<k||u)&&w--;c++)_=u*Ur+(O[c]||0),y[c]=_/I|0,u=_%I|0;else{for(u=Ur/(I[0]+1)|0,u>1&&(I=e(I,u),O=e(O,u),C=I.length,k=O.length),j=C,m=O.slice(0,C),b=m.length;b<C;)m[b++]=0;E=I.slice(),E.unshift(0),S=I[0],I[1]>=Ur/2&&++S;do u=0,a=t(I,m,C,b),a<0?(x=m[0],C!=b&&(x=x*Ur+(m[1]||0)),u=x/S|0,u>1?(u>=Ur&&(u=Ur-1),h=e(I,u),f=h.length,b=m.length,a=t(h,m,f,b),a==1&&(u--,r(h,C<f?E:I,f))):(u==0&&(a=u=1),h=I.slice()),f=h.length,f<b&&h.unshift(0),r(m,h,b),a==-1&&(b=m.length,a=t(I,m,C,b),a<1&&(u++,r(m,C<b?E:I,b))),b=m.length):a===0&&(u++,m=[0]),y[c++]=u,a&&m[0]?m[b++]=O[j]||0:(m=[O[j]],b=1);while((j++<k||m[0]!==void 0)&&w--)}return y[0]||y.shift(),p.e=l,xt(p,o?i+xr(p)+1:i)}}();function i7(e,t){var r,n,s,i,o,a,l=0,c=0,u=e.constructor,h=u.precision;if(xr(e)>16)throw Error(GC+xr(e));if(!e.s)return new u(rs);for(zt=!1,a=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(n=Math.log(cc(2,c))/Math.LN10*2+5|0,a+=n,r=s=i=new u(rs),u.precision=a;;){if(s=xt(s.times(e),a),r=r.times(++l),o=i.plus(Ho(s,r,a)),Hi(o.d).slice(0,a)===Hi(i.d).slice(0,a)){for(;c--;)i=xt(i.times(i),a);return u.precision=h,t==null?(zt=!0,xt(i,h)):i}i=o}}function xr(e){for(var t=e.e*Pt,r=e.d[0];r>=10;r/=10)t++;return t}function L_(e,t,r){if(t>e.LN10.sd())throw zt=!0,r&&(e.precision=r),Error(Ms+"LN10 precision limit exceeded");return xt(new e(e.LN10),t)}function Ua(e){for(var t="";e--;)t+="0";return t}function Qp(e,t){var r,n,s,i,o,a,l,c,u,h=1,f=10,p=e,y=p.d,m=p.constructor,b=m.precision;if(p.s<1)throw Error(Ms+(p.s?"NaN":"-Infinity"));if(p.eq(rs))return new m(0);if(t==null?(zt=!1,c=b):c=t,p.eq(10))return t==null&&(zt=!0),L_(m,c);if(c+=f,m.precision=c,r=Hi(y),n=r.charAt(0),i=xr(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Hi(p.d),n=r.charAt(0),h++;i=xr(p),n>1?(p=new m("0."+r),i++):p=new m(n+"."+r.slice(1))}else return l=L_(m,c+2,b).times(i+""),p=Qp(new m(n+"."+r.slice(1)),c-f).plus(l),m.precision=b,t==null?(zt=!0,xt(p,b)):p;for(a=o=p=Ho(p.minus(rs),p.plus(rs),c),u=xt(p.times(p),c),s=3;;){if(o=xt(o.times(u),c),l=a.plus(Ho(o,new m(s),c)),Hi(l.d).slice(0,c)===Hi(a.d).slice(0,c))return a=a.times(2),i!==0&&(a=a.plus(L_(m,c+2,b).times(i+""))),a=Ho(a,new m(h),c),m.precision=b,t==null?(zt=!0,xt(a,b)):a;a=l,s+=2}}function Z3(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=qh(r/Pt),e.d=[],n=(r+1)%Pt,r<0&&(n+=Pt),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Pt;n<s;)e.d.push(+t.slice(n,n+=Pt));t=t.slice(n),n=Pt-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),zt&&(e.e>ib||e.e<-ib))throw Error(GC+r)}else e.s=0,e.e=0,e.d=[0];return e}function xt(e,t,r){var n,s,i,o,a,l,c,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Pt,s=t,c=h[u=0];else{if(u=Math.ceil((n+1)/Pt),i=h.length,u>=i)return e;for(c=i=h[u],o=1;i>=10;i/=10)o++;n%=Pt,s=n-Pt+o}if(r!==void 0&&(i=cc(10,o-s-1),a=c/i%10|0,l=t<0||h[u+1]!==void 0||c%i,l=r<4?(a||l)&&(r==0||r==(e.s<0?3:2)):a>5||a==5&&(r==4||l||r==6&&(n>0?s>0?c/cc(10,o-s):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return l?(i=xr(e),h.length=1,t=t-i-1,h[0]=cc(10,(Pt-t%Pt)%Pt),e.e=qh(-t/Pt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=u,i=1,u--):(h.length=u+1,i=cc(10,Pt-n),h[u]=s>0?(c/cc(10,o-s)%cc(10,s)|0)*i:0),l)for(;;)if(u==0){(h[0]+=i)==Ur&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=Ur)break;h[u--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(zt&&(e.e>ib||e.e<-ib))throw Error(GC+xr(e));return e}function o7(e,t){var r,n,s,i,o,a,l,c,u,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),zt?xt(t,p):t;if(l=e.d,h=t.d,n=t.e,c=e.e,l=l.slice(),o=c-n,o){for(u=o<0,u?(r=l,o=-o,a=h.length):(r=h,n=c,a=l.length),s=Math.max(Math.ceil(p/Pt),a)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=l.length,a=h.length,u=s<a,u&&(a=s),s=0;s<a;s++)if(l[s]!=h[s]){u=l[s]<h[s];break}o=0}for(u&&(r=l,l=h,h=r,t.s=-t.s),a=l.length,s=h.length-a;s>0;--s)l[a++]=0;for(s=h.length;s>o;){if(l[--s]<h[s]){for(i=s;i&&l[--i]===0;)l[i]=Ur-1;--l[i],l[s]+=Ur}l[s]-=h[s]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,zt?xt(t,p):t):new f(0)}function Zc(e,t,r){var n,s=xr(e),i=Hi(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ua(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Ua(-s-1)+i,r&&(n=r-o)>0&&(i+=Ua(n))):s>=o?(i+=Ua(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Ua(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Ua(n))),e.s<0?"-"+i:i}function G3(e,t){if(e.length>t)return e.length=t,!0}function a7(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Dc+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Z3(o,i.toString())}else if(typeof i!="string")throw Error(Dc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,lCe.test(i))Z3(o,i);else throw Error(Dc+i)}if(s.prototype=Ee,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=a7,s.config=s.set=cCe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function cCe(e){if(!e||typeof e!="object")throw Error(Ms+"Object expected");var t,r,n,s=["precision",1,Uh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(qh(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Dc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Dc+r+": "+n);return this}var YC=a7(aCe);rs=new YC(1);const gt=YC;var uCe=e=>e,l7={},c7=e=>e===l7,Y3=e=>function t(){return arguments.length===0||arguments.length===1&&c7(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},u7=(e,t)=>e===1?t:Y3(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==l7).length;return i>=e?t(...n):u7(e-i,Y3(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=n.map(u=>c7(u)?a.shift():u);return t(...c,...a)}))}),rw=e=>u7(e.length,e),kN=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},dCe=rw((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),hCe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return uCe;var n=t.reverse(),s=n[0],i=n.slice(1);return function(){return i.reduce((o,a)=>a(o),s(...arguments))}},NN=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),d7=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,a)=>{var l;return o===((l=t)===null||l===void 0?void 0:l[a])})||(t=s,r=e(...s)),r}};function h7(e){var t;return e===0?t=1:t=Math.floor(new gt(e).abs().log(10).toNumber())+1,t}function f7(e,t,r){for(var n=new gt(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}rw((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});rw((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});rw((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var p7=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},m7=(e,t,r)=>{if(e.lte(0))return new gt(0);var n=h7(e.toNumber()),s=new gt(10).pow(n),i=e.div(s),o=n!==1?.05:.1,a=new gt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=a.mul(s);return t?new gt(l.toNumber()):new gt(Math.ceil(l.toNumber()))},fCe=(e,t,r)=>{var n=new gt(1),s=new gt(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new gt(10).pow(h7(e)-1),s=new gt(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new gt(Math.floor(e)))}else e===0?s=new gt(Math.floor((t-1)/2)):r||(s=new gt(Math.floor(e)));var o=Math.floor((t-1)/2),a=hCe(dCe(l=>s.add(new gt(l-o).mul(n)).toNumber()),kN);return a(0,t)},g7=function(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new gt(0),tickMin:new gt(0),tickMax:new gt(0)};var i=m7(new gt(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new gt(0):(o=new gt(e).add(t).div(2),o=o.sub(new gt(o).mod(i)));var a=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new gt(t).sub(o).div(i).toNumber()),c=a+l+1;return c>r?g7(e,t,r,n,s+1):(c<r&&(l=t>0?l+(r-c):l,a=t>0?a:a+(r-c)),{step:i,tickMin:o.sub(new gt(a).mul(i)),tickMax:o.add(new gt(l).mul(i))})};function pCe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,a]=p7([t,r]);if(o===-1/0||a===1/0){var l=a===1/0?[o,...kN(0,n-1).map(()=>1/0)]:[...kN(0,n-1).map(()=>-1/0),a];return t>r?NN(l):l}if(o===a)return fCe(o,n,s);var{step:c,tickMin:u,tickMax:h}=g7(o,a,i,s,0),f=f7(u,h.add(new gt(.1).mul(c)),c);return t>r?NN(f):f}function mCe(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=p7([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var a=Math.max(t,2),l=m7(new gt(o).sub(i).div(a-1),s,0),c=[...f7(new gt(i),new gt(o),l),o];return s===!1&&(c=c.map(u=>Math.round(u))),r>n?NN(c):c}var gCe=d7(pCe),yCe=d7(mCe),vCe=e=>e.rootProps.barCategoryGap,Um=e=>e.rootProps.stackOffset,JC=e=>e.options.chartName,XC=e=>e.rootProps.syncId,y7=e=>e.rootProps.syncMethod,QC=e=>e.options.eventEmitter,zo={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Qn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},nw=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},bCe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:zo.angleAxisId,includeHidden:!1,name:void 0,reversed:zo.reversed,scale:zo.scale,tick:zo.tick,tickCount:void 0,ticks:void 0,type:zo.type,unit:void 0},xCe={allowDataOverflow:Qn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Qn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Qn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Qn.scale,tick:Qn.tick,tickCount:Qn.tickCount,ticks:void 0,type:Qn.type,unit:void 0},wCe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:zo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zo.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zo.scale,tick:zo.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},_Ce={allowDataOverflow:Qn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Qn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Qn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Qn.scale,tick:Qn.tick,tickCount:Qn.tickCount,ticks:void 0,type:"category",unit:void 0},eT=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?wCe:bCe,tT=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?_Ce:xCe,sw=e=>e.polarOptions,rT=Y([fa,pa,Wr],Hq),v7=Y([sw,rT],(e,t)=>{if(e!=null)return Os(e.innerRadius,t,0)}),b7=Y([sw,rT],(e,t)=>{if(e!=null)return Os(e.outerRadius,t,t*.8)}),jCe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},x7=Y([sw],jCe);Y([eT,x7],nw);var w7=Y([rT,v7,b7],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Y([tT,w7],nw);var _7=Y([vt,sw,v7,b7,fa,pa],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=t;return{cx:Os(o,s,s/2),cy:Os(a,i,i/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),qt=(e,t)=>t,qm=(e,t,r)=>r;function j7(e){return e==null?void 0:e.id}var zr=e=>{var t=vt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Bh=e=>e.tooltip.settings.axisId,Fr=e=>{var t=zr(e),r=Bh(e);return Bm(e,t,r)};function k7(e,t,r){var{chartData:n=[]}=t,s=r==null?void 0:r.dataKey,i=new Map;return e.forEach(o=>{var a,l=(a=o.data)!==null&&a!==void 0?a:n;if(!(l==null||l.length===0)){var c=j7(o);l.forEach((u,h)=>{var f=s==null?h:String(Lt(u,s,null)),p=Lt(u,o.dataKey,0),y;i.has(f)?y=i.get(f):y={},Object.assign(y,{[c]:p}),i.set(f,y)})}}),Array.from(i.values())}function nT(e){return e.stackId!=null&&e.dataKey!=null}function J3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ob(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(r),!0).forEach(function(n){kCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kCe(e,t,r){return(t=NCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NCe(e){var t=SCe(e,"string");return typeof t=="symbol"?t:t+""}function SCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SN=[0,"auto"],Yn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ga=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Yn},Jn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:SN,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Kx},Dl=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Jn},ECe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},sT=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??ECe},hr=(e,t,r)=>{switch(t){case"xAxis":return ga(e,r);case"yAxis":return Dl(e,r);case"zAxis":return sT(e,r);case"angleAxis":return eT(e,r);case"radiusAxis":return tT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},CCe=(e,t,r)=>{switch(t){case"xAxis":return ga(e,r);case"yAxis":return Dl(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Bm=(e,t,r)=>{switch(t){case"xAxis":return ga(e,r);case"yAxis":return Dl(e,r);case"angleAxis":return eT(e,r);case"radiusAxis":return tT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},N7=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function iT(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var S7=e=>e.graphicalItems.cartesianItems,TCe=Y([qt,qm],iT),oT=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Vm=Y([S7,hr,TCe],oT),E7=Y([Vm],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(nT)),C7=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),T7=Y([Vm],C7),aT=e=>e.map(t=>t.data).filter(Boolean).flat(1),ACe=Y([Vm],aT),lT=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},cT=Y([ACe,ZC],lT),uT=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Lt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Lt(s,n)}))):e.map(n=>({value:n})),iw=Y([cT,hr,Vm],uT);function A7(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function du(e){return e.filter(t=>so(t)||t instanceof Date).map(Number).filter(t=>Is(t)===!1)}function OCe(e,t,r){return!r||typeof t!="number"||Is(t)?[]:r.length?du(r.flatMap(n=>{var s=Lt(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!xi(i)||!xi(o)))return[t-i,t+o]})):[]}var PCe=Y([E7,ZC,Fr],k7),O7=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,a]=i,l=a.map(j7);return[o,{stackedData:Hke(e,l,r),graphicalItems:a}]}))},RCe=Y([PCe,E7,Um],O7),P7=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=Gke(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},ICe=Y([RCe,Il,qt],P7),R7=(e,t,r,n,s)=>r.length>0?e.flatMap(i=>r.flatMap(o=>{var a,l,c=(a=n[o.id])===null||a===void 0?void 0:a.filter(h=>A7(s,h)),u=Lt(i,(l=t.dataKey)!==null&&l!==void 0?l:o.dataKey);return{value:u,errorDomain:OCe(i,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:Lt(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),ow=e=>e.errorBars,I7=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>A7(r,n));Y([T7,ow,qt],I7);var DCe=Y([cT,hr,T7,ow,qt],R7);function LCe(e){var{value:t}=e;if(so(t)||t instanceof Date)return t}var X3=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=du(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},MCe=(e,t,r)=>{var n=e.map(LCe).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&CU(n))?_B(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},dT=e=>{var t;if(e==null||!("domain"in e))return SN;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=du(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:SN},ab=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(n.length!==0){var s=n.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},D7=e=>e.referenceElements.dots,Vh=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),zCe=Y([D7,qt,qm],Vh),L7=e=>e.referenceElements.areas,FCe=Y([L7,qt,qm],Vh),M7=e=>e.referenceElements.lines,$Ce=Y([M7,qt,qm],Vh),z7=(e,t)=>{var r=du(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},UCe=Y(zCe,qt,z7),F7=(e,t)=>{var r=du(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},qCe=Y([FCe,qt],F7),$7=(e,t)=>{var r=du(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},BCe=Y($Ce,qt,$7),VCe=Y(UCe,BCe,qCe,(e,t,r)=>ab(e,r,t)),U7=Y([hr],dT),hT=(e,t,r,n,s,i,o)=>{var a=iCe(t,e.allowDataOverflow);if(a!=null)return a;var l=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",c=l?ab(r,s,X3(n)):ab(s,X3(n));return oCe(t,c,e.allowDataOverflow)},WCe=Y([hr,U7,ICe,DCe,VCe,vt,qt],hT),HCe=[0,1],fT=(e,t,r,n,s,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:a,type:l}=e,c=Ol(t,i);return c&&a==null?_B(0,r.length):l==="category"?MCe(n,e,c):s==="expand"?HCe:o}},pT=Y([hr,vt,cT,iw,Um,qt,WCe],fT),q7=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var a="scale".concat(Dm(i));return a in Zf?a:"point"}}},Wh=Y([hr,vt,N7,JC,qt],q7);function KCe(e){if(e!=null){if(e in Zf)return Zf[e]();var t="scale".concat(Dm(e));if(t in Zf)return Zf[t]()}}function mT(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=KCe(t);if(s!=null){var i=s.domain(r).range(n);return qke(i),i}}}var gT=(e,t,r)=>{var n=dT(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&ch(e))return gCe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ch(e))return yCe(e,t.tickCount,t.allowDecimals)}},yT=Y([pT,Bm,Wh],gT),vT=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&ch(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],a=r[r.length-1];return[Math.min(s,i),Math.max(o,a)]}return t},ZCe=Y([hr,pT,yT,qt],vT),GCe=Y(iw,hr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(du(e.map(a=>a.value))).sort((a,l)=>a-l);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),B7=Y(GCe,vt,vCe,Wr,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!xi(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Os(r,e*i),a=e*i/2;return a-o-(a-o)/i*o}return 0}),YCe=(e,t)=>{var r=ga(e,t);return r==null||typeof r.padding!="string"?0:B7(e,"xAxis",t,r.padding)},JCe=(e,t)=>{var r=Dl(e,t);return r==null||typeof r.padding!="string"?0:B7(e,"yAxis",t,r.padding)},XCe=Y(ga,YCe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),QCe=Y(Dl,JCe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),eTe=Y([Wr,XCe,Gx,Zx,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),tTe=Y([Wr,vt,QCe,Gx,Zx,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Wm=(e,t,r,n)=>{var s;switch(t){case"xAxis":return eTe(e,r,n);case"yAxis":return tTe(e,r,n);case"zAxis":return(s=sT(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return x7(e);case"radiusAxis":return w7(e,r);default:return}},V7=Y([hr,Wm],nw),Hh=Y([hr,Wh,ZCe,V7],mT);Y([Vm,ow,qt],I7);function W7(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var aw=(e,t)=>t,lw=(e,t,r)=>r,rTe=Y(mC,aw,lw,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(W7)),nTe=Y(gC,aw,lw,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(W7)),H7=(e,t)=>({width:e.width,height:t.height}),sTe=(e,t)=>{var r=typeof t.width=="number"?t.width:Kx;return{width:r,height:e.height}},iTe=Y(Wr,ga,H7),oTe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},aTe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},lTe=Y(pa,Wr,rTe,aw,lw,(e,t,r,n,s)=>{var i={},o;return r.forEach(a=>{var l=H7(t,a);o==null&&(o=oTe(t,n,e));var c=n==="top"&&!s||n==="bottom"&&s;i[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),i}),cTe=Y(fa,Wr,nTe,aw,lw,(e,t,r,n,s)=>{var i={},o;return r.forEach(a=>{var l=sTe(t,a);o==null&&(o=aTe(t,n,e));var c=n==="left"&&!s||n==="right"&&s;i[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),i}),uTe=(e,t)=>{var r=Wr(e),n=ga(e,t);if(n!=null){var s=lTe(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},dTe=(e,t)=>{var r=Wr(e),n=Dl(e,t);if(n!=null){var s=cTe(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},hTe=Y(Wr,Dl,(e,t)=>{var r=typeof t.width=="number"?t.width:Kx;return{width:r,height:e.height}}),K7=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,a=Ol(e,n),l=t.map(c=>c.value);if(o&&a&&i==="category"&&s&&CU(l))return l}},bT=Y([vt,iw,hr,qt],K7),Z7=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=Ol(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(a=>a.value)}},xT=Y([vt,iw,Bm,qt],Z7),Q3=Y([vt,CCe,Wh,Hh,bT,xT,Wm,yT,qt],(e,t,r,n,s,i,o,a,l)=>{if(t==null)return null;var c=Ol(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:s,isCategorical:c,niceTicks:a,range:o,realScaleType:r,scale:n}}),fTe=(e,t,r,n,s,i,o,a,l)=>{if(!(t==null||n==null)){var c=Ol(e,l),{type:u,ticks:h,tickCount:f}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,y=u==="category"&&n.bandwidth?n.bandwidth()/p:0;y=l==="angleAxis"&&i!=null&&i.length>=2?hn(i[0]-i[1])*2*y:y;var m=h||s;if(m){var b=m.map((x,w)=>{var _=o?o.indexOf(x):x;return{index:w,coordinate:n(_)+y,value:x,offset:y}});return b.filter(x=>!Is(x.coordinate))}return c&&a?a.map((x,w)=>({coordinate:n(x)+y,value:x,index:w,offset:y})):n.ticks?n.ticks(f).map(x=>({coordinate:n(x)+y,value:x,offset:y})):n.domain().map((x,w)=>({coordinate:n(x)+y,value:o?o[x]:x,index:w,offset:y}))}},G7=Y([vt,Bm,Wh,Hh,yT,Wm,bT,xT,qt],fTe),pTe=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var a=Ol(e,o),{tickCount:l}=t,c=0;return c=o==="angleAxis"&&(n==null?void 0:n.length)>=2?hn(n[0]-n[1])*2*c:c,a&&i?i.map((u,h)=>({coordinate:r(u)+c,value:u,index:h,offset:c})):r.ticks?r.ticks(l).map(u=>({coordinate:r(u)+c,value:u,offset:c})):r.domain().map((u,h)=>({coordinate:r(u)+c,value:s?s[u]:u,index:h,offset:c}))}},Y7=Y([vt,Bm,Hh,Wm,bT,xT,qt],pTe),J7=Y(hr,Hh,(e,t)=>{if(!(e==null||t==null))return ob(ob({},e),{},{scale:t})}),mTe=Y([hr,Wh,pT,V7],mT);Y((e,t,r)=>sT(e,r),mTe,(e,t)=>{if(!(e==null||t==null))return ob(ob({},e),{},{scale:t})});var gTe=Y([vt,mC,gC],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),X7=e=>e.options.defaultTooltipEventType,Q7=e=>e.options.validateTooltipEventTypes;function e9(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function wT(e,t){var r=X7(e),n=Q7(e);return e9(t,r,n)}function yTe(e){return Le(t=>wT(t,e))}var t9=(e,t)=>{var r,n=Number(t);if(!(Is(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},vTe=e=>e.tooltip.settings,Ha={active:!1,index:null,dataKey:void 0,coordinate:void 0},bTe={itemInteraction:{click:Ha,hover:Ha},axisInteraction:{click:Ha,hover:Ha},keyboardInteraction:Ha,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},r9=cs({name:"tooltip",initialState:bTe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Wo(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:xTe,removeTooltipEntrySettings:wTe,setTooltipSettingsState:_Te,setActiveMouseOverItemIndex:n9,mouseLeaveItem:jTe,mouseLeaveChart:s9,setActiveClickItemIndex:kTe,setMouseOverAxisIndex:i9,setMouseClickAxisIndex:NTe,setSyncInteraction:EN,setKeyboardInteraction:CN}=r9.actions,STe=r9.reducer;function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function py(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(n){ETe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ETe(e,t,r){return(t=CTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CTe(e){var t=TTe(e,"string");return typeof t=="symbol"?t:t+""}function TTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ATe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function OTe(e){return e.index!=null}var o9=(e,t,r,n)=>{if(t==null)return Ha;var s=ATe(e,t,r);if(s==null)return Ha;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(OTe(s)){if(i)return py(py({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return py(py({},Ha),{},{coordinate:s.coordinate})},_T=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!xi(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},a9=(e,t,r,n,s,i,o,a)=>{if(!(i==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,i);if(c!=null)return c;var u=s==null?void 0:s[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},l9=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Hm=e=>e.options.tooltipPayloadSearcher,Kh=e=>e.tooltip;function tD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tD(Object(r),!0).forEach(function(n){PTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PTe(e,t,r){return(t=RTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RTe(e){var t=ITe(e,"string");return typeof t=="symbol"?t:t+""}function ITe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DTe(e,t){return e??t}var c9=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=r,h=[];return e.reduce((f,p)=>{var y,{dataDefinedOnItem:m,settings:b}=p,x=DTe(m,a),w=Array.isArray(x)?Kq(x,c,u):x,_=(y=b==null?void 0:b.dataKey)!==null&&y!==void 0?y:n==null?void 0:n.dataKey,j=b==null?void 0:b.nameKey,k;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?k=TU(w,n.dataKey,s):k=i(w,t,l,j),Array.isArray(k))k.forEach(C=>{var E=rD(rD({},b),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});f.push(WI({tooltipEntrySettings:E,dataKey:C.dataKey,payload:C.payload,value:Lt(C.payload,C.dataKey),name:C.name}))});else{var S;f.push(WI({tooltipEntrySettings:b,dataKey:_,payload:k,value:Lt(k,_),name:(S=Lt(k,j))!==null&&S!==void 0?S:b==null?void 0:b.name}))}return f},h)}},jT=Y([Fr,vt,N7,JC,zr],q7),LTe=Y([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),MTe=Y([zr,Bh],iT),Km=Y([LTe,Fr,MTe],oT),zTe=Y([Km],e=>e.filter(nT)),FTe=Y([Km],aT),Zh=Y([FTe,Il],lT),$Te=Y([zTe,Il,Fr],k7),kT=Y([Zh,Fr,Km],uT),UTe=Y([Fr],dT),qTe=Y([Km],e=>e.filter(nT)),BTe=Y([$Te,qTe,Um],O7),VTe=Y([BTe,Il,zr],P7),WTe=Y([Km],C7),HTe=Y([Zh,Fr,WTe,ow,zr],R7),KTe=Y([D7,zr,Bh],Vh),ZTe=Y([KTe,zr],z7),GTe=Y([L7,zr,Bh],Vh),YTe=Y([GTe,zr],F7),JTe=Y([M7,zr,Bh],Vh),XTe=Y([JTe,zr],$7),QTe=Y([ZTe,XTe,YTe],ab),eAe=Y([Fr,UTe,VTe,HTe,QTe,vt,zr],hT),u9=Y([Fr,vt,Zh,kT,Um,zr,eAe],fT),tAe=Y([u9,Fr,jT],gT),rAe=Y([Fr,u9,tAe,zr],vT),d9=e=>{var t=zr(e),r=Bh(e),n=!1;return Wm(e,t,r,n)},h9=Y([Fr,d9],nw),f9=Y([Fr,jT,rAe,h9],mT),nAe=Y([vt,kT,Fr,zr],K7),sAe=Y([vt,kT,Fr,zr],Z7),iAe=(e,t,r,n,s,i,o,a)=>{if(t){var{type:l}=t,c=Ol(e,a);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=l==="category"&&n.bandwidth?n.bandwidth()/u:0;return h=a==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?hn(s[0]-s[1])*2*h:h,c&&o?o.map((f,p)=>({coordinate:n(f)+h,value:f,index:p,offset:h})):n.domain().map((f,p)=>({coordinate:n(f)+h,value:i?i[f]:f,index:p,offset:h}))}}},ya=Y([vt,Fr,jT,f9,d9,nAe,sAe,zr],iAe),NT=Y([X7,Q7,vTe],(e,t,r)=>e9(r.shared,e,t)),p9=e=>e.tooltip.settings.trigger,ST=e=>e.tooltip.settings.defaultIndex,cw=Y([Kh,NT,p9,ST],o9),uh=Y([cw,Zh],_T),m9=Y([ya,uh],t9),oAe=Y([cw],e=>{if(e)return e.dataKey}),g9=Y([Kh,NT,p9,ST],l9),aAe=Y([fa,pa,vt,Wr,ya,ST,g9,Hm],a9),lAe=Y([cw,aAe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),cAe=Y([cw],e=>e.active),uAe=Y([g9,uh,Il,Fr,m9,Hm,NT],c9),dAe=Y([uAe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function nD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nD(Object(r),!0).forEach(function(n){hAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hAe(e,t,r){return(t=fAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fAe(e){var t=pAe(e,"string");return typeof t=="symbol"?t:t+""}function pAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mAe=()=>Le(Fr),gAe=()=>{var e=mAe(),t=Le(ya),r=Le(f9);return lN(sD(sD({},e),{},{scale:r}),t)},yAe=()=>Le(JC),ET=(e,t)=>t,y9=(e,t,r)=>r,CT=(e,t,r,n)=>n,vAe=Y(ya,e=>Fx(e,t=>t.coordinate)),TT=Y([Kh,ET,y9,CT],o9),v9=Y([TT,Zh],_T),bAe=(e,t,r)=>{if(t!=null){var n=Kh(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},b9=Y([Kh,ET,y9,CT],l9),lb=Y([fa,pa,vt,Wr,ya,CT,b9,Hm],a9),xAe=Y([TT,lb],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),x9=Y(ya,v9,t9),wAe=Y([b9,v9,Il,Fr,x9,Hm,ET],c9),_Ae=Y([TT],e=>({isActive:e.active,activeIndex:e.index})),jAe=(e,t,r,n,s,i,o,a)=>{if(!(!e||!t||!n||!s||!i)){var l=Yke(e.chartX,e.chartY,t,r,a);if(l){var c=Xke(l,t),u=$ke(c,o,i,n,s),h=Jke(t,i,u,l);return{activeIndex:String(u),activeCoordinate:h}}}};function TN(){return TN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TN.apply(null,arguments)}function iD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function my(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iD(Object(r),!0).forEach(function(n){kAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kAe(e,t,r){return(t=NAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NAe(e){var t=SAe(e,"string");return typeof t=="symbol"?t:t+""}function SAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EAe(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:a,tooltipEventType:l,chartName:c}=e,u=t,h=r,f=n;if(!a||!u||c!=="ScatterChart"&&l!=="axis")return null;var p,y;if(c==="ScatterChart")p=u,y=GNe;else if(c==="BarChart")p=YNe(o,u,s,i),y=mB;else if(o==="radial"){var{cx:m,cy:b,radius:x,startAngle:w,endAngle:_}=gB(u);p={cx:m,cy:b,startAngle:w,endAngle:_,innerRadius:x,outerRadius:x},y=vB}else p={points:TSe(o,u,s)},y=_C;var j=typeof a=="object"&&"className"in a?a.className:void 0,k=my(my(my(my({stroke:"#ccc",pointerEvents:"none"},s),p),Kt(a,!1)),{},{payload:h,payloadIndex:f,className:at("recharts-tooltip-cursor",j)});return v.isValidElement(a)?v.cloneElement(a,k):v.createElement(y,k)}function CAe(e){var t=gAe(),r=eB(),n=xC(),s=yAe();return v.createElement(EAe,TN({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var w9=v.createContext(null),TAe=()=>v.useContext(w9),_9={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||l,f),y=r?r+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],p]:l._events[y].push(p):(l._events[y]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)t.call(c,u)&&l.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=r?r+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,f=u.length,p=new Array(f);h<f;h++)p[h]=u[h].fn;return p},a.prototype.listenerCount=function(l){var c=r?r+l:l,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(l,c,u,h,f,p){var y=r?r+l:l;if(!this._events[y])return!1;var m=this._events[y],b=arguments.length,x,w;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,u),!0;case 4:return m.fn.call(m.context,c,u,h),!0;case 5:return m.fn.call(m.context,c,u,h,f),!0;case 6:return m.fn.call(m.context,c,u,h,f,p),!0}for(w=1,x=new Array(b-1);w<b;w++)x[w-1]=arguments[w];m.fn.apply(m.context,x)}else{var _=m.length,j;for(w=0;w<_;w++)switch(m[w].once&&this.removeListener(l,m[w].fn,void 0,!0),b){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,c);break;case 3:m[w].fn.call(m[w].context,c,u);break;case 4:m[w].fn.call(m[w].context,c,u,h);break;default:if(!x)for(j=1,x=new Array(b-1);j<b;j++)x[j-1]=arguments[j];m[w].fn.apply(m[w].context,x)}}return!0},a.prototype.on=function(l,c,u){return i(this,l,c,u,!1)},a.prototype.once=function(l,c,u){return i(this,l,c,u,!0)},a.prototype.removeListener=function(l,c,u,h){var f=r?r+l:l;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!h||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var y=0,m=[],b=p.length;y<b;y++)(p[y].fn!==c||h&&!p[y].once||u&&p[y].context!==u)&&m.push(p[y]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=r?r+l:l,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(_9);var AAe=_9.exports;const j9=ji(AAe);var em=new j9,AN="recharts.syncEvent.tooltip",oD="recharts.syncEvent.brush";function k9(e,t){if(t){var r=Number.parseInt(t,10);if(!Is(r))return e==null?void 0:e[r]}}var OAe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},N9=cs({name:"options",initialState:OAe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),PAe=N9.reducer,{createEventEmitter:RAe}=N9.actions;function IAe(e){return e.tooltip.syncInteraction}var DAe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},S9=cs({name:"chartData",initialState:DAe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:aD,setDataStartEndIndexes:LAe,setComputedData:Uqe}=S9.actions,MAe=S9.reducer,E9=()=>{};function zAe(){var e=Le(XC),t=Le(QC),r=Jt(),n=Le(y7),s=Le(ya),i=xC(),o=yC(),a=Le(l=>l.rootProps.className);v.useEffect(()=>{if(e==null)return E9;var l=(c,u,h)=>{if(t!==h&&e===c){if(n==="index"){r(u);return}if(s!=null){var f;if(typeof n=="function"){var p={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},y=n(s,p);f=s[y]}else n==="value"&&(f=s.find(S=>String(S.value)===u.payload.label));var{coordinate:m}=u.payload;if(f==null||u.payload.active===!1||m==null||o==null){r(EN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y:x}=m,w=Math.min(b,o.x+o.width),_=Math.min(x,o.y+o.height),j={x:i==="horizontal"?f.coordinate:w,y:i==="horizontal"?_:f.coordinate},k=EN({active:u.payload.active,coordinate:j,dataKey:u.payload.dataKey,index:String(f.index),label:u.payload.label});r(k)}}};return em.on(AN,l),()=>{em.off(AN,l)}},[a,r,t,e,n,s,i,o])}function FAe(){var e=Le(XC),t=Le(QC),r=Jt();v.useEffect(()=>{if(e==null)return E9;var n=(s,i,o)=>{t!==o&&e===s&&r(LAe(i))};return em.on(oD,n),()=>{em.off(oD,n)}},[r,t,e])}function $Ae(){var e=Jt();v.useEffect(()=>{e(RAe())},[e]),zAe(),FAe()}function UAe(e,t,r,n,s,i){var o=Le(f=>bAe(f,e,t)),a=Le(QC),l=Le(XC),c=Le(y7),u=Le(IAe),h=u==null?void 0:u.active;v.useEffect(()=>{if(!h&&l!=null&&a!=null){var f=EN({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});em.emit(AN,l,f,a)}},[h,r,o,s,n,a,l,c,i])}function lD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lD(Object(r),!0).forEach(function(n){qAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qAe(e,t,r){return(t=BAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BAe(e){var t=VAe(e,"string");return typeof t=="symbol"?t:t+""}function VAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WAe(e){return e.dataKey}function HAe(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(ENe,t)}var uD=[],KAe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Fh.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function dD(e){var t=Bs(e,KAe),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:a,isAnimationActive:l,offset:c,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:p,wrapperStyle:y,cursor:m,shared:b,trigger:x,defaultIndex:w,portal:_,axisId:j}=t,k=Jt(),S=typeof w=="number"?String(w):w;v.useEffect(()=>{k(_Te({shared:b,trigger:x,axisId:j,active:r,defaultIndex:S}))},[k,b,x,j,r,S]);var C=yC(),E=sB(),T=yTe(b),{activeIndex:R,isActive:O}=Le(G=>_Ae(G,T,x,S)),I=Le(G=>wAe(G,T,x,S)),P=Le(G=>x9(G,T,x,S)),D=Le(G=>xAe(G,T,x,S)),L=I,B=TAe(),q=r??O,[K,H]=wq([L,q]),$=T==="axis"?P:void 0;UAe(T,x,D,$,R,q);var J=_??B;if(J==null)return null;var te=L??uD;q||(te=uD),a&&te.length&&(te=hq(L.filter(G=>G.value!=null&&(G.hide!==!0||t.includeHidden)),u,WAe));var be=te.length>0,Z=v.createElement(INe,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:l,active:q,coordinate:D,hasPayload:be,offset:c,position:h,reverseDirection:f,useTranslate3d:p,viewBox:C,wrapperStyle:y,lastBoundingBox:K,innerRef:H,hasPortalFromProps:!!_},HAe(o,cD(cD({},t),{},{payload:te,label:$,active:q,coordinate:D,accessibilityLayer:E})));return v.createElement(v.Fragment,null,ro.createPortal(Z,J),q&&v.createElement(CAe,{cursor:m,tooltipEventType:T,coordinate:D,payload:L,index:R}))}var C9={},T9={},A9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,a=null;const l=i!=null&&i.includes("leading"),c=i==null||i.includes("trailing"),u=()=>{a!==null&&(r.apply(o,a),o=void 0,a=null)},h=()=>{c&&u(),m()};let f=null;const p=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},n)},y=()=>{f!==null&&(clearTimeout(f),f=null)},m=()=>{y(),o=void 0,a=null},b=()=>{u()},x=function(...w){if(s!=null&&s.aborted)return;o=this,a=w;const _=f==null;p(),l&&_&&u()};return x.schedule=p,x.cancel=m,x.flush=b,s==null||s.addEventListener("abort",m,{once:!0}),x}e.debounce=t})(A9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A9;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:a=!0,maxWait:l}=i,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,h=null;const f=t.debounce(function(...m){u=n.apply(this,m),h=null},s,{edges:c}),p=function(...m){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(u=n.apply(this,m),h=Date.now(),f.cancel(),f.schedule(),u):(f.apply(this,m),u)},y=()=>(f.flush(),u);return p.cancel=f.cancel,p.flush=y,p}e.debounce=r})(T9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T9;function r(n,s=0,i={}){const{leading:o=!0,trailing:a=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:a})}e.throttle=r})(C9);var ZAe=C9.throttle;const GAe=ji(ZAe);var yp=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s]};function hD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function M_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hD(Object(r),!0).forEach(function(n){YAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YAe(e,t,r){return(t=JAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JAe(e){var t=XAe(e,"string");return typeof t=="symbol"?t:t+""}function XAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fD=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:h,className:f,onResize:p,style:y={}}=e,m=v.useRef(null),b=v.useRef();b.current=p,v.useImperativeHandle(t,()=>m.current);var[x,w]=v.useState({containerWidth:n.width,containerHeight:n.height}),_=v.useCallback((k,S)=>{w(C=>{var E=Math.round(k),T=Math.round(S);return C.containerWidth===E&&C.containerHeight===T?C:{containerWidth:E,containerHeight:T}})},[]);v.useEffect(()=>{var k=T=>{var R,{width:O,height:I}=T[0].contentRect;_(O,I),(R=b.current)===null||R===void 0||R.call(b,O,I)};u>0&&(k=GAe(k,u,{trailing:!0,leading:!1}));var S=new ResizeObserver(k),{width:C,height:E}=m.current.getBoundingClientRect();return _(C,E),S.observe(m.current),()=>{S.disconnect()}},[_,u]);var j=v.useMemo(()=>{var{containerWidth:k,containerHeight:S}=x;if(k<0||S<0)return null;yp(gc(s)||gc(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),yp(!r||r>0,"The aspect(%s) must be greater than zero.",r);var C=gc(s)?k:s,E=gc(i)?S:i;return r&&r>0&&(C?E=C/r:E&&(C=E*r),l&&E>l&&(E=l)),yp(C>0||E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,E,s,i,o,a,r),v.Children.map(c,T=>v.cloneElement(T,{width:C,height:E,style:M_({width:C,height:E},T.props.style)}))},[r,c,i,l,a,o,x,s]);return v.createElement("div",{id:h?"".concat(h):void 0,className:at("recharts-responsive-container",f),style:M_(M_({},y),{},{width:s,height:i,minWidth:o,minHeight:a,maxHeight:l}),ref:m},v.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),uw=e=>null;uw.displayName="Cell";function QAe(e,t,r){return(t=eOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eOe(e){var t=tOe(e,"string");return typeof t=="symbol"?t:t+""}function tOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class rOe{constructor(t){QAe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function pD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nOe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pD(Object(r),!0).forEach(function(n){sOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sOe(e,t,r){return(t=iOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iOe(e){var t=oOe(e,"string");return typeof t=="symbol"?t:t+""}function oOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aOe={cacheSize:2e3,enableCache:!0},O9=nOe({},aOe),mD=new rOe(O9.cacheSize),lOe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gD="recharts_measurement_span";function cOe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",a=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(a)}var yD=(e,t)=>{try{var r=document.getElementById(gD);r||(r=document.createElement("span"),r.setAttribute("id",gD),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,lOe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},vp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Fh.isSsr)return{width:0,height:0};if(!O9.enableCache)return yD(e,t);var r=cOe(e,t),n=mD.get(r);if(n)return n;var s=yD(e,t);return mD.set(r,s),s},vD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uOe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,dOe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,P9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},hOe=Object.keys(P9),hd="NaN";function fOe(e,t){return e*P9[t]}class Fn{static parse(t){var r,[,n,s]=(r=dOe.exec(t))!==null&&r!==void 0?r:[];return new Fn(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Is(t)&&(this.unit=""),r!==""&&!uOe.test(r)&&(this.num=NaN,this.unit=""),hOe.includes(r)&&(this.num=fOe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Is(this.num)}}function R9(e){if(e.includes(hd))return hd;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=vD.exec(t))!==null&&r!==void 0?r:[],o=Fn.parse(n??""),a=Fn.parse(i??""),l=s==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return hd;t=t.replace(vD,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,h,f]=(c=bD.exec(t))!==null&&c!==void 0?c:[],p=Fn.parse(u??""),y=Fn.parse(f??""),m=h==="+"?p.add(y):p.subtract(y);if(m.isNaN())return hd;t=t.replace(bD,m.toString())}return t}var xD=/\(([^()]*)\)/;function pOe(e){for(var t=e,r;(r=xD.exec(t))!=null;){var[,n]=r;t=t.replace(xD,R9(n))}return t}function mOe(e){var t=e.replace(/\s+/g,"");return t=pOe(t),t=R9(t),t}function gOe(e){try{return mOe(e)}catch{return hd}}function z_(e){var t=gOe(e.slice(5,-1));return t===hd?"":t}var yOe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],vOe=["dx","dy","angle","className","breakAll"];function ON(){return ON=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ON.apply(null,arguments)}function wD(e,t){if(e==null)return{};var r,n,s=bOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function bOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var I9=/[ \f\n\r\t\v\u2028\u2029]+/,D9=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];br(t)||(r?s=t.toString().split(""):s=t.toString().split(I9));var i=s.map(a=>({word:a,width:vp(a,n).width})),o=r?0:vp(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},xOe=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:a,breakAll:l}=e,c=Ae(i),u=o,h=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce((O,I)=>{var{word:P,width:D}=I,L=O[O.length-1];if(L&&(n==null||s||L.width+D+r<Number(n)))L.words.push(P),L.width+=D+r;else{var B={words:[P],width:D};O.push(B)}return O},[])},f=h(t),p=R=>R.reduce((O,I)=>O.width>I.width?O:I);if(!c||s)return f;var y=f.length>i||p(f).width>Number(n);if(!y)return f;for(var m="…",b=R=>{var O=u.slice(0,R),I=D9({breakAll:l,style:a,children:O+m}).wordsWithComputedWidth,P=h(I),D=P.length>i||p(P).width>Number(n);return[D,P]},x=0,w=u.length-1,_=0,j;x<=w&&_<=u.length-1;){var k=Math.floor((x+w)/2),S=k-1,[C,E]=b(S),[T]=b(k);if(!C&&!T&&(x=k+1),C&&T&&(w=k-1),!C&&T){j=E;break}_++}return j||f},_D=e=>{var t=br(e)?[]:e.toString().split(I9);return[{words:t}]},wOe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Fh.isSsr){var a,l,c=D9({breakAll:i,children:n,style:s});if(c){var{wordsWithComputedWidth:u,spaceWidth:h}=c;a=u,l=h}else return _D(n);return xOe({breakAll:i,children:n,maxLines:o,style:s},a,l,t,r)}return _D(n)},jD="#808080",dw=v.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:a="start",verticalAnchor:l="end",fill:c=jD}=e,u=wD(e,yOe),h=v.useMemo(()=>wOe({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:f,dy:p,angle:y,className:m,breakAll:b}=u,x=wD(u,vOe);if(!so(r)||!so(n))return null;var w=r+(Ae(f)?f:0),_=n+(Ae(p)?p:0),j;switch(l){case"start":j=z_("calc(".concat(i,")"));break;case"middle":j=z_("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:j=z_("calc(".concat(h.length-1," * -").concat(s,")"));break}var k=[];if(o){var S=h[0].width,{width:C}=u;k.push("scale(".concat(Ae(C)?C/S:1,")"))}return y&&k.push("rotate(".concat(y,", ").concat(w,", ").concat(_,")")),k.length&&(x.transform=k.join(" ")),v.createElement("text",ON({},Kt(x,!0),{ref:t,x:w,y:_,className:at("recharts-text",m),textAnchor:a,fill:c.includes("url")?jD:c}),h.map((E,T)=>{var R=E.words.join(b?"":" ");return v.createElement("tspan",{x:w,dy:T===0?j:s,key:"".concat(R,"-").concat(T)},R)}))});dw.displayName="Text";var _Oe=["offset"],jOe=["labelRef"];function kD(e,t){if(e==null)return{};var r,n,s=kOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ND(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ND(Object(r),!0).forEach(function(n){NOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ND(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NOe(e,t,r){return(t=SOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SOe(e){var t=EOe(e,"string");return typeof t=="symbol"?t:t+""}function EOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fo(){return Fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fo.apply(null,arguments)}var COe=e=>{var{value:t,formatter:r}=e,n=br(e.children)?t:e.children;return typeof r=="function"?r(n):n},AT=e=>e!=null&&typeof e=="function",TOe=(e,t)=>{var r=hn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},AOe=(e,t,r,n)=>{var{position:s,offset:i,className:o}=e,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:h,endAngle:f,clockWise:p}=n,y=(c+u)/2,m=TOe(h,f),b=m>=0?1:-1,x,w;s==="insideStart"?(x=h+b*i,w=p):s==="insideEnd"?(x=f-b*i,w=!p):s==="end"&&(x=f+b*i,w=p),w=m<=0?w:!w;var _=vr(a,l,y,x),j=vr(a,l,y,x+(w?1:-1)*359),k="M".concat(_.x,",").concat(_.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(w?0:1,`,
    `).concat(j.x,",").concat(j.y),S=br(e.id)?Vp("recharts-radial-line-"):e.id;return v.createElement("text",Fo({},r,{dominantBaseline:"central",className:at("recharts-radial-bar-label",o)}),v.createElement("defs",null,v.createElement("path",{id:S,d:k})),v.createElement("textPath",{xlinkHref:"#".concat(S)},t))},OOe=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:a,endAngle:l}=e,c=(a+l)/2;if(r==="outside"){var{x:u,y:h}=vr(n,s,o+t,c);return{x:u,y:h,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var f=(i+o)/2,{x:p,y}=vr(n,s,f,c);return{x:p,y,textAnchor:"middle",verticalAnchor:"middle"}},POe=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:a,height:l}=t,c=l>=0?1:-1,u=c*n,h=c>0?"end":"start",f=c>0?"start":"end",p=a>=0?1:-1,y=p*n,m=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var x={x:i+a/2,y:o-c*n,textAnchor:"middle",verticalAnchor:h};return er(er({},x),r?{height:Math.max(o-r.y,0),width:a}:{})}if(s==="bottom"){var w={x:i+a/2,y:o+l+u,textAnchor:"middle",verticalAnchor:f};return er(er({},w),r?{height:Math.max(r.y+r.height-(o+l),0),width:a}:{})}if(s==="left"){var _={x:i-y,y:o+l/2,textAnchor:m,verticalAnchor:"middle"};return er(er({},_),r?{width:Math.max(_.x-r.x,0),height:l}:{})}if(s==="right"){var j={x:i+a+y,y:o+l/2,textAnchor:b,verticalAnchor:"middle"};return er(er({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:l}:{})}var k=r?{width:a,height:l}:{};return s==="insideLeft"?er({x:i+y,y:o+l/2,textAnchor:b,verticalAnchor:"middle"},k):s==="insideRight"?er({x:i+a-y,y:o+l/2,textAnchor:m,verticalAnchor:"middle"},k):s==="insideTop"?er({x:i+a/2,y:o+u,textAnchor:"middle",verticalAnchor:f},k):s==="insideBottom"?er({x:i+a/2,y:o+l-u,textAnchor:"middle",verticalAnchor:h},k):s==="insideTopLeft"?er({x:i+y,y:o+u,textAnchor:b,verticalAnchor:f},k):s==="insideTopRight"?er({x:i+a-y,y:o+u,textAnchor:m,verticalAnchor:f},k):s==="insideBottomLeft"?er({x:i+y,y:o+l-u,textAnchor:b,verticalAnchor:h},k):s==="insideBottomRight"?er({x:i+a-y,y:o+l-u,textAnchor:m,verticalAnchor:h},k):s&&typeof s=="object"&&(Ae(s.x)||gc(s.x))&&(Ae(s.y)||gc(s.y))?er({x:i+Os(s.x,a),y:o+Os(s.y,l),textAnchor:"end",verticalAnchor:"end"},k):er({x:i+a/2,y:o+l/2,textAnchor:"middle",verticalAnchor:"middle"},k)},ROe=e=>"cx"in e&&Ae(e.cx);function ts(e){var{offset:t=5}=e,r=kD(e,_Oe),n=er({offset:t},r),{viewBox:s,position:i,value:o,children:a,content:l,className:c="",textBreakAll:u,labelRef:h}=n,f=Le(_7),p=yC(),y=i==="center"?p:f??p,m=s||y;if(!m||br(o)&&br(a)&&!v.isValidElement(l)&&typeof l!="function")return null;var b=er(er({},n),{},{viewBox:m});if(v.isValidElement(l)){var{labelRef:x}=b,w=kD(b,jOe);return v.cloneElement(l,w)}var _;if(typeof l=="function"){if(_=v.createElement(l,b),v.isValidElement(_))return _}else _=COe(n);var j=ROe(m),k=Kt(n,!0);if(j&&(i==="insideStart"||i==="insideEnd"||i==="end"))return AOe(n,_,k,m);var S=j?OOe(m,n.offset,n.position):POe(n,m);return v.createElement(dw,Fo({ref:h,className:at("recharts-label",c)},k,S,{breakAll:u}),_)}ts.displayName="Label";var L9=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:a,innerRadius:l,outerRadius:c,x:u,y:h,top:f,left:p,width:y,height:m,clockWise:b,labelViewBox:x}=e;if(x)return x;if(Ae(y)&&Ae(m)){if(Ae(u)&&Ae(h))return{x:u,y:h,width:y,height:m};if(Ae(f)&&Ae(p))return{x:f,y:p,width:y,height:m}}if(Ae(u)&&Ae(h))return{x:u,y:h,width:0,height:0};if(Ae(t)&&Ae(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:l||0,outerRadius:c||a||o||0,clockWise:b};if(e.viewBox)return e.viewBox},IOe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(ts,Fo({key:"label-implicit"},n)):so(e)?v.createElement(ts,Fo({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===ts?v.cloneElement(e,er({key:"label-implicit"},n)):v.createElement(ts,Fo({key:"label-implicit",content:e},n)):AT(e)?v.createElement(ts,Fo({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(ts,Fo({},e,{key:"label-implicit"},n)):null},DOe=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n,labelRef:s}=e,i=L9(e),o=Ox(n,ts).map((l,c)=>v.cloneElement(l,{viewBox:t||i,key:"label-".concat(c)}));if(!r)return o;var a=IOe(e.label,t||i,s);return[a,...o]};ts.parseViewBox=L9;ts.renderCallByParent=DOe;var M9={},z9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(z9);var F9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(F9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z9,r=F9,n=Dx;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(M9);var LOe=M9.last;const MOe=ji(LOe);var zOe=["valueAccessor"],FOe=["data","dataKey","clockWise","id","textBreakAll"];function cb(){return cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cb.apply(null,arguments)}function SD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ED(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SD(Object(r),!0).forEach(function(n){$Oe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Oe(e,t,r){return(t=UOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UOe(e){var t=qOe(e,"string");return typeof t=="symbol"?t:t+""}function qOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CD(e,t){if(e==null)return{};var r,n,s=BOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VOe=e=>Array.isArray(e.value)?MOe(e.value):e.value;function Lc(e){var{valueAccessor:t=VOe}=e,r=CD(e,zOe),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:a}=r,l=CD(r,FOe);return!n||!n.length?null:v.createElement(Ds,{className:"recharts-label-list"},n.map((c,u)=>{var h=br(s)?t(c,u):Lt(c&&c.payload,s),f=br(o)?{}:{id:"".concat(o,"-").concat(u)};return v.createElement(ts,cb({},Kt(c,!0),l,f,{parentViewBox:c.parentViewBox,value:h,textBreakAll:a,viewBox:ts.parseViewBox(br(i)?c:ED(ED({},c),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}Lc.displayName="LabelList";function WOe(e,t){return e?e===!0?v.createElement(Lc,{key:"labelList-implicit",data:t}):v.isValidElement(e)||AT(e)?v.createElement(Lc,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?v.createElement(Lc,cb({data:t},e,{key:"labelList-implicit"})):null:null}function HOe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=Ox(n,Lc).map((o,a)=>v.cloneElement(o,{data:t,key:"labelList-".concat(a)}));if(!r)return s;var i=WOe(e.label,t);return[i,...s]}Lc.renderCallByParent=HOe;function PN(){return PN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PN.apply(null,arguments)}var $9=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=at("recharts-dot",s);return t===+t&&r===+r&&n===+n?v.createElement("circle",PN({},Al(e),W2(e),{className:i,cx:t,cy:r,r:n})):null},U9=e=>e.graphicalItems.polarItems,KOe=Y([qt,qm],iT),OT=Y([U9,hr,KOe],oT),ZOe=Y([OT],aT),PT=Y([ZOe,KC],lT),GOe=Y([PT,hr,OT],uT),YOe=Y([PT,hr,OT],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(s=>{var i,o=Lt(n,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Lt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),TD=()=>{},JOe=Y([hr,U7,TD,YOe,TD,vt,qt],hT),q9=Y([hr,vt,PT,GOe,Um,qt,JOe],fT),XOe=Y([q9,hr,Wh],gT);Y([hr,q9,XOe,qt],vT);var QOe={radiusAxis:{},angleAxis:{}},B9=cs({name:"polarAxis",initialState:QOe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:qqe,removeRadiusAxis:Bqe,addAngleAxis:Vqe,removeAngleAxis:Wqe}=B9.actions,ePe=B9.reducer;function AD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AD(Object(r),!0).forEach(function(n){tPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tPe(e,t,r){return(t=rPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rPe(e){var t=nPe(e,"string");return typeof t=="symbol"?t:t+""}function nPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sPe=(e,t)=>t,RT=Y([U9,sPe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),iPe=[],IT=(e,t,r)=>(r==null?void 0:r.length)===0?iPe:r,V9=Y([KC,RT,IT],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var s;if((t==null?void 0:t.data)!=null&&t.data.length>0?s=t.data:s=n,(!s||!s.length)&&r!=null&&(s=r.map(i=>OD(OD({},t.presentationProps),i.props))),s!=null)return s}}),oPe=Y([V9,RT,IT],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,s)=>{var i,o=Lt(n,t.nameKey,t.name),a;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?a=r[s].props.fill:typeof n=="object"&&n!=null&&"fill"in n?a=n.fill:a=t.fill,{value:Hx(o,t.dataKey),color:a,payload:n,type:t.legendType}})}),aPe=Y([V9,RT,IT,Wr],(e,t,r,n)=>{if(!(t==null||e==null))return s4e({offset:n,pieSettings:t,displayedData:e,cells:r})}),W9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((n=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&n.writable)?!1:r.toString()===`[object ${i}]`}let s=r;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(r)===s}e.isPlainObject=t})(W9);var lPe=W9.isPlainObject;const cPe=ji(lPe);function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ub.apply(null,arguments)}var PD=(e,t,r,n,s)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},uPe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dPe=e=>{var t=Bs(e,uPe),r=v.useRef(),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var{x:i,y:o,upperWidth:a,lowerWidth:l,height:c,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isUpdateAnimationActive:y}=t;if(i!==+i||o!==+o||a!==+a||l!==+l||c!==+c||a===0&&l===0||c===0)return null;var m=at("recharts-trapezoid",u);return y?v.createElement(Zv,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:c,x:i,y:o},to:{upperWidth:a,lowerWidth:l,height:c,x:i,y:o},duration:f,animationEasing:h,isActive:y},b=>{var{upperWidth:x,lowerWidth:w,height:_,x:j,y:k}=b;return v.createElement(Zv,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,easing:h},v.createElement("path",ub({},Kt(t,!0),{className:m,d:PD(j,k,x,w,_),ref:r})))}):v.createElement("g",null,v.createElement("path",ub({},Kt(t,!0),{className:m,d:PD(i,o,a,l,c)})))},hPe=["option","shapeType","propTransformer","activeClassName","isActive"];function fPe(e,t){if(e==null)return{};var r,n,s=pPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function RD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function db(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RD(Object(r),!0).forEach(function(n){mPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mPe(e,t,r){return(t=gPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gPe(e){var t=yPe(e,"string");return typeof t=="symbol"?t:t+""}function yPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vPe(e,t){return db(db({},t),e)}function bPe(e,t){return e==="symbols"}function ID(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(mB,r);case"trapezoid":return v.createElement(dPe,r);case"sector":return v.createElement(vB,r);case"symbols":if(bPe(t))return v.createElement(J2,r);break;default:return null}}function xPe(e){return v.isValidElement(e)?e.props:e}function wPe(e){var{option:t,shapeType:r,propTransformer:n=vPe,activeClassName:s="recharts-active-shape",isActive:i}=e,o=fPe(e,hPe),a;if(v.isValidElement(t))a=v.cloneElement(t,db(db({},o),xPe(t)));else if(typeof t=="function")a=t(o);else if(cPe(t)&&typeof t!="boolean"){var l=n(t,o);a=v.createElement(ID,{shapeType:r,elementProps:l})}else{var c=o;a=v.createElement(ID,{shapeType:r,elementProps:c})}return i?v.createElement(Ds,{className:s},a):a}var _Pe=(e,t)=>{var r=Jt();return(n,s)=>i=>{e==null||e(n,s,i),r(n9({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},jPe=e=>{var t=Jt();return(r,n)=>s=>{e==null||e(r,n,s),t(jTe())}},kPe=(e,t)=>{var r=Jt();return(n,s)=>i=>{e==null||e(n,s,i),r(kTe({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function H9(e){var{fn:t,args:r}=e,n=Jt(),s=qs();return v.useEffect(()=>{if(!s){var i=t(r);return n(xTe(i)),()=>{n(wTe(i))}}},[t,r,n,s]),null}var K9=()=>{};function NPe(e){var{legendPayload:t}=e,r=Jt(),n=qs();return v.useEffect(()=>n?K9:(r(rB(t)),()=>{r(nB(t))}),[r,n,t]),null}function SPe(e){var{legendPayload:t}=e,r=Jt(),n=Le(vt);return v.useEffect(()=>n!=="centric"&&n!=="radial"?K9:(r(rB(t)),()=>{r(nB(t))}),[r,n,t]),null}function Z9(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(Vp(t)),n=v.useRef(e);return n.current!==e&&(r.current=Vp(t),n.current=e),r.current}var F_,EPe=()=>{var[e]=v.useState(()=>Vp("uid-"));return e},CPe=(F_=v.useId)!==null&&F_!==void 0?F_:EPe;function TPe(e,t){var r=CPe();return t||(e?"".concat(e,"-").concat(r):r)}var APe=v.createContext(void 0),G9=e=>{var{id:t,type:r,children:n}=e,s=TPe("recharts-".concat(r),t);return v.createElement(APe.Provider,{value:s},n(s))},OPe={cartesianItems:[],polarItems:[]},Y9=cs({name:"graphicalItems",initialState:OPe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=Wo(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=Wo(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Wo(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:PPe,replaceCartesianGraphicalItem:RPe,removeCartesianGraphicalItem:IPe,addPolarGraphicalItem:DPe,removePolarGraphicalItem:LPe}=Y9.actions,MPe=Y9.reducer;function zPe(e){var t=Jt(),r=v.useRef(null);return v.useEffect(()=>{r.current===null?t(PPe(e)):r.current!==e&&t(RPe({prev:r.current,next:e})),r.current=e},[t,e]),v.useEffect(()=>()=>{r.current&&(t(IPe(r.current)),r.current=null)},[t]),null}function FPe(e){var t=Jt();return v.useEffect(()=>(t(DPe(e)),()=>{t(LPe(e))}),[t,e]),null}function $Pe(){}var UPe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},DD={t:0},$_={t:1};function J9(e){var t=Bs(e,UPe),{isActive:r,canBegin:n,duration:s,easing:i,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=t,u=pB("JavascriptAnimate",t.animationManager),[h,f]=v.useState(r?DD:$_),p=v.useRef(null);return v.useEffect(()=>{r||f($_)},[r]),v.useEffect(()=>{if(!r||!n)return $Pe;var y=fB(DD,$_,dB(i),s,f,u.getTimeoutController()),m=()=>{p.current=y()};return u.start([l,o,m,s,a]),()=>{u.stop(),p.current&&p.current(),a()}},[r,n,s,i,o,l,a,u]),c(h.t)}var qPe=["onMouseEnter","onClick","onMouseLeave"],BPe=["id"],VPe=["id"];function DT(e,t){if(e==null)return{};var r,n,s=WPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function LD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LD(Object(r),!0).forEach(function(n){HPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HPe(e,t,r){return(t=KPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KPe(e){var t=ZPe(e,"string");return typeof t=="symbol"?t:t+""}function ZPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oa(){return oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oa.apply(null,arguments)}function GPe(e){var t=v.useMemo(()=>Ox(e.children,uw),[e.children]),r=Le(n=>oPe(n,e.id,t));return r==null?null:v.createElement(SPe,{legendPayload:r})}function YPe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:s,strokeWidth:i,fill:o,name:a,hide:l,tooltipType:c}=e;return{dataDefinedOnItem:n==null?void 0:n.map(u=>u.tooltipPayload),positions:n==null?void 0:n.map(u=>u.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:Hx(a,t),hide:l,type:c,color:o,unit:""}}}var JPe=(e,t)=>e>t?"start":e<t?"end":"middle",XPe=(e,t,r)=>typeof t=="function"?t(e):Os(t,r,r*.8),QPe=(e,t,r)=>{var{top:n,left:s,width:i,height:o}=t,a=Hq(i,o),l=s+Os(e.cx,i,i/2),c=n+Os(e.cy,o,o/2),u=Os(e.innerRadius,a,0),h=XPe(r,e.outerRadius,a),f=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:h,maxRadius:f}},e4e=(e,t)=>{var r=hn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},t4e=(e,t)=>{if(v.isValidElement(e))return v.cloneElement(e,t);if(typeof e=="function")return e(t);var r=at("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return v.createElement(_C,oa({},t,{type:"linear",className:r}))},r4e=(e,t,r)=>{if(v.isValidElement(e))return v.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),v.isValidElement(n)))return n;var s=at("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return v.createElement(dw,oa({},t,{alignmentBaseline:"middle",className:s}),n)};function n4e(e){var{sectors:t,props:r,showLabels:n}=e,{label:s,labelLine:i,dataKey:o}=r;if(!n||!s||!t)return null;var a=Al(r),l=Kt(s,!1),c=Kt(i,!1),u=typeof s=="object"&&"offsetRadius"in s&&s.offsetRadius||20,h=t.map((f,p)=>{var y=(f.startAngle+f.endAngle)/2,m=vr(f.cx,f.cy,f.outerRadius+u,y),b=nr(nr(nr(nr({},a),f),{},{stroke:"none"},l),{},{index:p,textAnchor:JPe(m.x,f.cx)},m),x=nr(nr(nr(nr({},a),f),{},{fill:"none",stroke:f.fill},c),{},{index:p,points:[vr(f.cx,f.cy,f.outerRadius,y),m],key:"line"});return v.createElement(Ds,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(p)},i&&t4e(i,x),r4e(s,b,Lt(f,o)))});return v.createElement(Ds,{className:"recharts-pie-labels"},h)}function X9(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:s,showLabels:i}=e,o=Le(uh),{onMouseEnter:a,onClick:l,onMouseLeave:c}=s,u=DT(s,qPe),h=_Pe(a,s.dataKey),f=jPe(c),p=kPe(l,s.dataKey);return t==null?null:v.createElement(v.Fragment,null,t.map((y,m)=>{if((y==null?void 0:y.startAngle)===0&&(y==null?void 0:y.endAngle)===0&&t.length!==1)return null;var b=r&&String(m)===o,x=o?n:null,w=b?r:x,_=nr(nr({},y),{},{stroke:y.stroke,tabIndex:-1,[Jq]:m,[Xq]:s.dataKey});return v.createElement(Ds,oa({tabIndex:-1,className:"recharts-pie-sector"},H2(u,y,m),{onMouseEnter:h(y,m),onMouseLeave:f(y,m),onClick:p(y,m),key:"sector-".concat(y==null?void 0:y.startAngle,"-").concat(y==null?void 0:y.endAngle,"-").concat(y.midAngle,"-").concat(m)}),v.createElement(wPe,oa({option:w,isActive:b,shapeType:"sector"},_)))}),v.createElement(n4e,{sectors:t,props:s,showLabels:i}))}function s4e(e){var t,{pieSettings:r,displayedData:n,cells:s,offset:i}=e,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:h}=r,f=Math.abs(r.minAngle),p=e4e(a,l),y=Math.abs(p),m=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(S=>Lt(S,c,0)!==0).length,x=(y>=360?b:b-1)*m,w=y-b*f-x,_=n.reduce((S,C)=>{var E=Lt(C,c,0);return S+(Ae(E)?E:0)},0),j;if(_>0){var k;j=n.map((S,C)=>{var E=Lt(S,c,0),T=Lt(S,u,C),R=QPe(r,i,S),O=(Ae(E)?E:0)/_,I,P=nr(nr({},S),s&&s[C]&&s[C].props);C?I=k.endAngle+hn(p)*m*(E!==0?1:0):I=a;var D=I+hn(p)*((E!==0?f:0)+O*w),L=(I+D)/2,B=(R.innerRadius+R.outerRadius)/2,q=[{name:T,value:E,payload:P,dataKey:c,type:h}],K=vr(R.cx,R.cy,B,L);return k=nr(nr(nr(nr({},r.presentationProps),{},{percent:O,cornerRadius:o,name:T,tooltipPayload:q,midAngle:L,middleRadius:B,tooltipPosition:K},P),R),{},{value:Lt(S,c),startAngle:I,endAngle:D,payload:P,paddingAngle:hn(p)*m}),k})}return j}function i4e(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:a,activeShape:l,inactiveShape:c,onAnimationStart:u,onAnimationEnd:h}=t,f=Z9(t,"recharts-pie-"),p=r.current,[y,m]=v.useState(!0),b=v.useCallback(()=>{typeof h=="function"&&h(),m(!1)},[h]),x=v.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return v.createElement(J9,{begin:i,duration:o,isActive:s,easing:a,onAnimationStart:x,onAnimationEnd:b,key:f},w=>{var _=[],j=n&&n[0],k=j.startAngle;return n.forEach((S,C)=>{var E=p&&p[C],T=C>0?bl(S,"paddingAngle",0):0;if(E){var R=sI(E.endAngle-E.startAngle,S.endAngle-S.startAngle),O=nr(nr({},S),{},{startAngle:k+T,endAngle:k+R(w)+T});_.push(O),k=O.endAngle}else{var{endAngle:I,startAngle:P}=S,D=sI(0,I-P),L=D(w),B=nr(nr({},S),{},{startAngle:k+T,endAngle:k+L+T});_.push(B),k=B.endAngle}}),r.current=_,v.createElement(Ds,null,v.createElement(X9,{sectors:_,activeShape:l,inactiveShape:c,allOtherPieProps:t,showLabels:!y}))})}function o4e(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:s}=e,i=v.useRef(null),o=i.current;return r&&t&&t.length&&(!o||o!==t)?v.createElement(i4e,{props:e,previousSectorsRef:i}):v.createElement(X9,{sectors:t,activeShape:n,inactiveShape:s,allOtherPieProps:e,showLabels:!0})}function a4e(e){var{hide:t,className:r,rootTabIndex:n}=e,s=at("recharts-pie",r);return t?null:v.createElement(Ds,{tabIndex:n,className:s},v.createElement(o4e,e))}var l4e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Fh.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function c4e(e){var{id:t}=e,r=DT(e,BPe),n=v.useMemo(()=>Ox(e.children,uw),[e.children]),s=Le(i=>aPe(i,t,n));return v.createElement(v.Fragment,null,v.createElement(H9,{fn:YPe,args:nr(nr({},e),{},{sectors:s})}),v.createElement(a4e,oa({},r,{sectors:s})))}function Q9(e){var t=Bs(e,l4e),{id:r}=t,n=DT(t,VPe),s=Al(n);return v.createElement(G9,{id:r,type:"pie"},i=>v.createElement(v.Fragment,null,v.createElement(FPe,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s}),v.createElement(GPe,oa({},n,{id:i})),v.createElement(c4e,oa({},n,{id:i})),n.children))}Q9.displayName="Pie";var u4e=Y([Wr],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),d4e=Y([u4e,fa,pa],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),LT=()=>Le(d4e),h4e=()=>Le(dAe);function MD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MD(Object(r),!0).forEach(function(n){f4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f4e(e,t,r){return(t=p4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p4e(e){var t=m4e(e,"string");return typeof t=="symbol"?t:t+""}function m4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g4e=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=zD(zD({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Kt(s,!1)),W2(s)),a;return v.isValidElement(s)?a=v.cloneElement(s,o):typeof s=="function"?a=s(o):a=v.createElement($9,o),v.createElement(Ds,{className:"recharts-active-dot"},a)};function y4e(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=Le(uh),o=h4e();if(t==null||o==null)return null;var a=t.find(l=>o.includes(l.payload));return br(a)?null:g4e({point:a,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var v4e={},eV=cs({name:"errorBars",initialState:v4e,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Hqe,removeErrorBar:Kqe}=eV.actions,b4e=eV.reducer,x4e=["children"];function w4e(e,t){if(e==null)return{};var r,n,s=_4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var j4e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},k4e=v.createContext(j4e);function N4e(e){var{children:t}=e,r=w4e(e,x4e);return v.createElement(k4e.Provider,{value:r},t)}function tV(e,t){var r,n,s=Le(c=>ga(c,e)),i=Le(c=>Dl(c,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Yn.allowDataOverflow,a=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Jn.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function S4e(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=LT(),{needClipX:i,needClipY:o,needClip:a}=tV(t,r);if(!a)return null;var{x:l,y:c,width:u,height:h}=s;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:i?l:l-u/2,y:o?c:c-h/2,width:i?u:u*2,height:o?h:h*2}))}var rV=e=>{var{chartData:t}=e,r=Jt(),n=qs();return v.useEffect(()=>n?()=>{}:(r(aD(t)),()=>{r(aD(void 0))}),[t,r,n]),null},FD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},nV=cs({name:"brush",initialState:FD,reducers:{setBrushSettings(e,t){return t.payload==null?FD:t.payload}}}),{setBrushSettings:Zqe}=nV.actions,E4e=nV.reducer;function C4e(e,t,r){return(t=T4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T4e(e){var t=A4e(e,"string");return typeof t=="symbol"?t:t+""}function A4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class MT{static create(t){return new MT(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}C4e(MT,"EPS",1e-4);function O4e(e){return(e%180+180)%180}var P4e=function(e){var{width:t,height:r}=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=O4e(n),i=s*Math.PI/180,o=Math.atan(r/t),a=i>o&&i<Math.PI-o?r/Math.sin(i):t/Math.cos(i);return Math.abs(a)},R4e={dots:[],areas:[],lines:[]},sV=cs({name:"referenceElements",initialState:R4e,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Wo(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Wo(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Wo(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Gqe,removeDot:Yqe,addArea:Jqe,removeArea:Xqe,addLine:Qqe,removeLine:eBe}=sV.actions,I4e=sV.reducer,D4e=v.createContext(void 0),L4e=e=>{var{children:t}=e,[r]=v.useState("".concat(Vp("recharts"),"-clip")),n=LT();if(n==null)return null;var{x:s,y:i,width:o,height:a}=n;return v.createElement(D4e.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:s,y:i,height:a,width:o}))),t)};function U_(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function iV(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function M4e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return P4e(n,r)}function z4e(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:a}=e;return t===1?{start:n?s:i,end:n?s+o:i+a}:{start:n?s+o:i+a,end:n?s:i}}function hb(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function F4e(e,t){return iV(e,t+1)}function $4e(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:a}=t,l=0,c=1,u=o,h=function(){var p=n==null?void 0:n[l];if(p===void 0)return{v:iV(n,c)};var y=l,m,b=()=>(m===void 0&&(m=r(p,y)),m),x=p.coordinate,w=l===0||hb(e,x,b,u,a);w||(l=0,u=o,c+=1),w&&(u=x+e*(b()/2+s),l+=c)},f;c<=i.length;)if(f=h(),f)return f.v;return[]}function $D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$D(Object(r),!0).forEach(function(n){U4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$D(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U4e(e,t,r){return(t=q4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q4e(e){var t=B4e(e,"string");return typeof t=="symbol"?t:t+""}function B4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V4e(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:a}=t,{end:l}=t,c=function(h){var f=i[h],p,y=()=>(p===void 0&&(p=r(f,h)),p);if(h===o-1){var m=e*(f.coordinate+e*y()/2-l);i[h]=f=on(on({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else i[h]=f=on(on({},f),{},{tickCoord:f.coordinate});var b=hb(e,f.tickCoord,y,a,l);b&&(l=f.tickCoord-e*(y()/2+s),i[h]=on(on({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function W4e(e,t,r,n,s,i){var o=(n||[]).slice(),a=o.length,{start:l,end:c}=t;if(i){var u=n[a-1],h=r(u,a-1),f=e*(u.coordinate+e*h/2-c);o[a-1]=u=on(on({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=hb(e,u.tickCoord,()=>h,l,c);p&&(c=u.tickCoord-e*(h/2+s),o[a-1]=on(on({},u),{},{isShow:!0}))}for(var y=i?a-1:a,m=function(x){var w=o[x],_,j=()=>(_===void 0&&(_=r(w,x)),_);if(x===0){var k=e*(w.coordinate-e*j()/2-l);o[x]=w=on(on({},w),{},{tickCoord:k<0?w.coordinate-k*e:w.coordinate})}else o[x]=w=on(on({},w),{},{tickCoord:w.coordinate});var S=hb(e,w.tickCoord,j,l,c);S&&(l=w.tickCoord+e*(j()/2+s),o[x]=on(on({},w),{},{isShow:!0}))},b=0;b<y;b++)m(b);return o}function zT(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:u,angle:h}=e;if(!s||!s.length||!n)return[];if(Ae(l)||Fh.isSsr){var f;return(f=F4e(s,Ae(l)?l:0))!==null&&f!==void 0?f:[]}var p=[],y=a==="top"||a==="bottom"?"width":"height",m=u&&y==="width"?vp(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(_,j)=>{var k=typeof c=="function"?c(_.value,j):_.value;return y==="width"?M4e(vp(k,{fontSize:t,letterSpacing:r}),m,h):vp(k,{fontSize:t,letterSpacing:r})[y]},x=s.length>=2?hn(s[1].coordinate-s[0].coordinate):1,w=z4e(i,x,y);return l==="equidistantPreserveStart"?$4e(x,w,b,s,o):(l==="preserveStart"||l==="preserveStartEnd"?p=W4e(x,w,b,s,o,l==="preserveStartEnd"):p=V4e(x,w,b,s,o),p.filter(_=>_.isShow))}var H4e=["viewBox"],K4e=["viewBox"];function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fd.apply(null,arguments)}function UD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UD(Object(r),!0).forEach(function(n){FT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qD(e,t){if(e==null)return{};var r,n,s=Z4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Z4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function FT(e,t,r){return(t=G4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G4e(e){var t=Y4e(e,"string");return typeof t=="symbol"?t:t+""}function Y4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ll extends v.Component{constructor(t){super(t),this.tickRefs=v.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=qD(t,H4e),i=this.props,{viewBox:o}=i,a=qD(i,K4e);return!U_(n,o)||!U_(s,a)||!U_(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:a,mirror:l,tickMargin:c}=this.props,u,h,f,p,y,m,b=l?-1:1,x=t.tickSize||a,w=Ae(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=h=t.coordinate,p=n+ +!l*i,f=p-b*x,m=f-b*c,y=w;break;case"left":f=p=t.coordinate,h=r+ +!l*s,u=h-b*x,y=u-b*c,m=w;break;case"right":f=p=t.coordinate,h=r+ +l*s,u=h+b*x,y=u+b*c,m=w;break;default:u=h=t.coordinate,p=n+ +l*i,f=p+b*x,m=f+b*c,y=w;break}return{line:{x1:u,y1:f,x2:h,y2:p},tick:{x:y,y:m}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:a}=this.props,l=kr(kr(kr({},Kt(this.props,!1)),Kt(a,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var c=+(i==="top"&&!o||i==="bottom"&&o);l=kr(kr({},l),{},{x1:t,y1:r+c*s,x2:t+n,y2:r+c*s})}else{var u=+(i==="left"&&!o||i==="right"&&o);l=kr(kr({},l),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+s})}return v.createElement("line",fd({},l,{className:at("recharts-cartesian-axis-line",bl(a,"className"))}))}static renderTickItem(t,r,n){var s,i=at(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))s=v.cloneElement(t,kr(kr({},r),{},{className:i}));else if(typeof t=="function")s=t(kr(kr({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=at(o,t.className)),s=v.createElement(dw,fd({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:a,unit:l,padding:c}=this.props,u=zT(kr(kr({},this.props),{},{ticks:n}),t,r),h=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),p=Al(this.props),y=Kt(o,!1),m=kr(kr({},p),{},{fill:"none"},Kt(s,!1)),b=u.map((x,w)=>{var{line:_,tick:j}=this.getTickLineCoord(x),k=kr(kr(kr(kr({textAnchor:h,verticalAnchor:f},p),{},{stroke:"none",fill:i},y),j),{},{index:w,payload:x,visibleTicksCount:u.length,tickFormatter:a,padding:c});return v.createElement(Ds,fd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},H2(this.props,x,w)),s&&v.createElement("line",fd({},m,_,{className:at("recharts-cartesian-axis-tick-line",bl(s,"className"))})),o&&Ll.renderTickItem(o,k,"".concat(typeof a=="function"?a(x.value,w):x.value).concat(l||"")))});return b.length>0?v.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:v.createElement(Ds,{className:at("recharts-cartesian-axis",s),ref:a=>{if(a){var l=a.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var c=l[0];if(c){var u=window.getComputedStyle(c).fontSize,h=window.getComputedStyle(c).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),ts.renderCallByParent(this.props))}}FT(Ll,"displayName","CartesianAxis");FT(Ll,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var J4e=["x1","y1","x2","y2","key"],X4e=["offset"],Q4e=["xAxisId","yAxisId"],eRe=["xAxisId","yAxisId"];function BD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ln(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BD(Object(r),!0).forEach(function(n){tRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tRe(e,t,r){return(t=rRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rRe(e){var t=nRe(e,"string");return typeof t=="symbol"?t:t+""}function nRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xc(){return xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xc.apply(null,arguments)}function fb(e,t){if(e==null)return{};var r,n,s=sRe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iRe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:a}=e;return v.createElement("rect",{x:n,y:s,ry:a,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function oV(e,t){var r;if(v.isValidElement(e))r=v.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:a}=t,l=fb(t,J4e),c=Al(l),{offset:u}=c,h=fb(c,X4e);r=v.createElement("line",xc({},h,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:a}))}return r}function oRe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,a=fb(e,Q4e),l=s.map((c,u)=>{var h=ln(ln({},a),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(u),index:u});return oV(n,h)});return v.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function aRe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,a=fb(e,eRe),l=s.map((c,u)=>{var h=ln(ln({},a),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(u),index:u});return oV(n,h)});return v.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function lRe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:a,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var c=a.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==c[0]&&c.unshift(0);var u=c.map((h,f)=>{var p=!c[f+1],y=p?s+o-h:c[f+1]-h;if(y<=0)return null;var m=f%t.length;return v.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:y,width:i,stroke:"none",fill:t[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function cRe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:a,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==c[0]&&c.unshift(0);var u=c.map((h,f)=>{var p=!c[f+1],y=p?s+o-h:c[f+1]-h;if(y<=0)return null;var m=f%r.length;return v.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:y,height:a,stroke:"none",fill:r[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var uRe=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return Zq(zT(ln(ln(ln({},Ll.defaultProps),r),{},{ticks:Gq(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},dRe=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return Zq(zT(ln(ln(ln({},Ll.defaultProps),r),{},{ticks:Gq(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},hRe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function aV(e){var t=vC(),r=bC(),n=eB(),s=ln(ln({},Bs(e,hRe)),{},{x:Ae(e.x)?e.x:n.left,y:Ae(e.y)?e.y:n.top,width:Ae(e.width)?e.width:n.width,height:Ae(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:a,y:l,width:c,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:p}=s,y=qs(),m=Le(T=>Q3(T,"xAxis",i,y)),b=Le(T=>Q3(T,"yAxis",o,y));if(!Ae(c)||c<=0||!Ae(u)||u<=0||!Ae(a)||a!==+a||!Ae(l)||l!==+l)return null;var x=s.verticalCoordinatesGenerator||uRe,w=s.horizontalCoordinatesGenerator||dRe,{horizontalPoints:_,verticalPoints:j}=s;if((!_||!_.length)&&typeof w=="function"){var k=f&&f.length,S=w({yAxis:b?ln(ln({},b),{},{ticks:k?f:b.ticks}):void 0,width:t,height:r,offset:n},k?!0:h);yp(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(_=S)}if((!j||!j.length)&&typeof x=="function"){var C=p&&p.length,E=x({xAxis:m?ln(ln({},m),{},{ticks:C?p:m.ticks}):void 0,width:t,height:r,offset:n},C?!0:h);yp(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(j=E)}return v.createElement("g",{className:"recharts-cartesian-grid"},v.createElement(iRe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),v.createElement(lRe,xc({},s,{horizontalPoints:_})),v.createElement(cRe,xc({},s,{verticalPoints:j})),v.createElement(oRe,xc({},s,{offset:n,horizontalPoints:_,xAxis:m,yAxis:b})),v.createElement(aRe,xc({},s,{offset:n,verticalPoints:j,xAxis:m,yAxis:b})))}aV.displayName="CartesianGrid";var lV=(e,t,r,n)=>J7(e,"xAxis",t,n),cV=(e,t,r,n)=>Y7(e,"xAxis",t,n),uV=(e,t,r,n)=>J7(e,"yAxis",r,n),dV=(e,t,r,n)=>Y7(e,"yAxis",r,n),fRe=Y([vt,lV,uV,cV,dV],(e,t,r,n,s)=>Ol(e,"xAxis")?lN(t,n,!1):lN(r,s,!1)),pRe=(e,t,r,n,s)=>s;function mRe(e){return e.type==="line"}var gRe=Y([S7,pRe],(e,t)=>e.filter(mRe).find(r=>r.id===t)),yRe=Y([vt,lV,uV,cV,dV,gRe,fRe,ZC],(e,t,r,n,s,i,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=a;if(!(i==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:h,data:f}=i,p;if(f!=null&&f.length>0?p=f:p=l==null?void 0:l.slice(c,u+1),p!=null)return zRe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:h,bandSize:o,displayedData:p})}}),vRe=["id"],bRe=["type","layout","connectNulls","needClip"],xRe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function VD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VD(Object(r),!0).forEach(function(n){wRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wRe(e,t,r){return(t=_Re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Re(e){var t=jRe(e,"string");return typeof t=="symbol"?t:t+""}function jRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $T(e,t){if(e==null)return{};var r,n,s=kRe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gc.apply(null,arguments)}var NRe=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Hx(r,t),payload:e}]};function SRe(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:a,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Hx(o,t),hide:a,type:e.tooltipType,color:e.stroke,unit:l}}}var hV=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function ERe(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var CRe=(e,t,r)=>{var n=r.reduce((h,f)=>h+f);if(!n)return hV(t,e);for(var s=Math.floor(e/n),i=e%n,o=t-e,a=[],l=0,c=0;l<r.length;c+=r[l],++l)if(c+r[l]>i){a=[...r.slice(0,l),i-c];break}var u=a.length%2===0?[0,o]:[o];return[...ERe(r,s),...a,...u].map(h=>"".concat(h,"px")).join(", ")};function TRe(e,t){var r;if(v.isValidElement(e))r=v.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=at("recharts-line-dot",typeof e!="boolean"?e.className:"");r=v.createElement($9,Gc({},t,{className:n}))}return r}function ARe(e,t){return e==null?!1:t?!0:e.length===1}function ORe(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:i,needClip:o}=n;if(!ARe(r,s))return null;var{id:a}=n,l=$T(n,vRe),c=PU(s),u=Al(l),h=Kt(s,!0),f=r.map((y,m)=>{var b=ci(ci(ci({key:"dot-".concat(m),r:3},u),h),{},{index:m,cx:y.x,cy:y.y,dataKey:i,value:y.value,payload:y.payload,points:r});return TRe(s,b)}),p={clipPath:o?"url(#clipPath-".concat(c?"":"dots-").concat(t,")"):void 0};return v.createElement(Ds,Gc({className:"recharts-line-dots",key:"dots"},p),f)}function RN(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:i,showLabels:o}=e,{type:a,layout:l,connectNulls:c,needClip:u}=i,h=$T(i,bRe),f=ci(ci({},Kt(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:a,layout:l,connectNulls:c,strokeDasharray:s??i.strokeDasharray});return v.createElement(v.Fragment,null,(n==null?void 0:n.length)>1&&v.createElement(_C,Gc({},f,{pathRef:r})),v.createElement(ORe,{points:n,clipPathId:t,props:i}),o&&Lc.renderCallByParent(i,n))}function PRe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function RRe(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:h,animateNewValues:f,width:p,height:y,onAnimationEnd:m,onAnimationStart:b}=r,x=s.current,w=Z9(r,"recharts-line-"),[_,j]=v.useState(!1),k=v.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),S=v.useCallback(()=>{typeof b=="function"&&b(),j(!0)},[b]),C=PRe(n.current),E=i.current;return v.createElement(J9,{begin:c,duration:u,isActive:l,easing:h,onAnimationEnd:k,onAnimationStart:S,key:w},T=>{var R=_f(E,C+E,T),O=Math.min(R,C),I;if(a){var P="".concat(a).split(/[,\s]+/gim).map(B=>parseFloat(B));I=CRe(O,C,P)}else I=hV(C,O);if(x){var D=x.length/o.length,L=T===1?o:o.map((B,q)=>{var K=Math.floor(q*D);if(x[K]){var H=x[K];return ci(ci({},B),{},{x:_f(H.x,B.x,T),y:_f(H.y,B.y,T)})}return f?ci(ci({},B),{},{x:_f(p*2,B.x,T),y:_f(y/2,B.y,T)}):ci(ci({},B),{},{x:B.x,y:B.y})});return s.current=L,v.createElement(RN,{props:r,points:L,clipPathId:t,pathRef:n,showLabels:!_,strokeDasharray:I})}return T>0&&C>0&&(s.current=o,i.current=O),v.createElement(RN,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!_,strokeDasharray:I})})}function IRe(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:s}=r,i=v.useRef(null),o=v.useRef(0),a=v.useRef(null),l=i.current;return s&&n&&n.length&&l!==n?v.createElement(RRe,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:a}):v.createElement(RN,{props:r,points:n,clipPathId:t,pathRef:a,showLabels:!0})}var DRe=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Lt(e.payload,t)});class LRe extends v.Component{render(){var t,{hide:r,dot:n,points:s,className:i,xAxisId:o,yAxisId:a,top:l,left:c,width:u,height:h,id:f,needClip:p}=this.props;if(r)return null;var y=at("recharts-line",i),m=f,{r:b=3,strokeWidth:x=2}=(t=Kt(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=PU(n),_=b*2+x;return v.createElement(v.Fragment,null,v.createElement(Ds,{className:y},p&&v.createElement("defs",null,v.createElement(S4e,{clipPathId:m,xAxisId:o,yAxisId:a}),!w&&v.createElement("clipPath",{id:"clipPath-dots-".concat(m)},v.createElement("rect",{x:c-_/2,y:l-_/2,width:u+_,height:h+_}))),v.createElement(IRe,{props:this.props,clipPathId:m}),v.createElement(N4e,{xAxisId:o,yAxisId:a,data:s,dataPointFormatter:DRe,errorBarOffset:0},this.props.children)),v.createElement(y4e,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var fV={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Fh.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function MRe(e){var t=Bs(e,fV),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:u,label:h,legendType:f,xAxisId:p,yAxisId:y,id:m}=t,b=$T(t,xRe),{needClip:x}=tV(p,y),w=LT(),_=xC(),j=qs(),k=Le(R=>yRe(R,p,y,j,m));if(_!=="horizontal"&&_!=="vertical"||k==null||w==null)return null;var{height:S,width:C,x:E,y:T}=w;return v.createElement(LRe,Gc({},b,{id:m,connectNulls:a,dot:l,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:c,label:h,legendType:f,xAxisId:p,yAxisId:y,points:k,layout:_,height:S,width:C,left:E,top:T,needClip:x}))}function zRe(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:a,displayedData:l}=e;return l.map((c,u)=>{var h=Lt(c,o);if(t==="horizontal"){var f=qI({axis:r,ticks:s,bandSize:a,entry:c,index:u}),p=br(h)?null:n.scale(h);return{x:f,y:p,value:h,payload:c}}var y=br(h)?null:r.scale(h),m=qI({axis:n,ticks:i,bandSize:a,entry:c,index:u});return y==null||m==null?null:{x:y,y:m,value:h,payload:c}}).filter(Boolean)}function pV(e){var t=Bs(e,fV),r=qs();return v.createElement(G9,{id:t.id,type:"line"},n=>v.createElement(v.Fragment,null,v.createElement(NPe,{legendPayload:NRe(t)}),v.createElement(H9,{fn:SRe,args:t}),v.createElement(zPe,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),v.createElement(MRe,Gc({},t,{id:n}))))}pV.displayName="Line";function WD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WD(Object(r),!0).forEach(function(n){FRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FRe(e,t,r){return(t=$Re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Re(e){var t=URe(e,"string");return typeof t=="symbol"?t:t+""}function URe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qRe={xAxis:{},yAxis:{},zAxis:{}},mV=cs({name:"cartesianAxis",initialState:qRe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=HD(HD({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:BRe,removeXAxis:VRe,addYAxis:WRe,removeYAxis:HRe,addZAxis:tBe,removeZAxis:rBe,updateYAxisWidth:KRe}=mV.actions,ZRe=mV.reducer,GRe=["children"],YRe=["dangerouslySetInnerHTML","ticks"];function gV(e,t,r){return(t=JRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JRe(e){var t=XRe(e,"string");return typeof t=="symbol"?t:t+""}function XRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IN(){return IN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IN.apply(null,arguments)}function yV(e,t){if(e==null)return{};var r,n,s=QRe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function QRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function eIe(e){var t=Jt(),r=v.useMemo(()=>{var{children:i}=e,o=yV(e,GRe);return o},[e]),n=Le(i=>ga(i,r.id)),s=r===n;return v.useEffect(()=>(t(BRe(r)),()=>{t(VRe(r))}),[r,t]),s?e.children:null}var tIe=e=>{var{xAxisId:t,className:r}=e,n=Le(Qq),s=qs(),i="xAxis",o=Le(p=>Hh(p,i,t,s)),a=Le(p=>G7(p,i,t,s)),l=Le(p=>iTe(p,t)),c=Le(p=>uTe(p,t));if(l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=e,f=yV(e,YRe);return v.createElement(Ll,IN({},f,{scale:o,x:c.x,y:c.y,width:l.width,height:l.height,className:at("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:a}))},rIe=e=>{var t,r,n,s,i;return v.createElement(eIe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},v.createElement(tIe,e))};class UT extends v.Component{render(){return v.createElement(rIe,this.props)}}gV(UT,"displayName","XAxis");gV(UT,"defaultProps",{allowDataOverflow:Yn.allowDataOverflow,allowDecimals:Yn.allowDecimals,allowDuplicatedCategory:Yn.allowDuplicatedCategory,height:Yn.height,hide:!1,mirror:Yn.mirror,orientation:Yn.orientation,padding:Yn.padding,reversed:Yn.reversed,scale:Yn.scale,tickCount:Yn.tickCount,type:Yn.type,xAxisId:0});var nIe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var a=r?r.getBoundingClientRect().width:0,l=s+i,c=o+l+a+(r?n:0);return Math.round(c)}return 0},sIe=["dangerouslySetInnerHTML","ticks"];function vV(e,t,r){return(t=iIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iIe(e){var t=oIe(e,"string");return typeof t=="symbol"?t:t+""}function oIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DN(){return DN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DN.apply(null,arguments)}function aIe(e,t){if(e==null)return{};var r,n,s=lIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cIe(e){var t=Jt();return v.useEffect(()=>(t(WRe(e)),()=>{t(HRe(e))}),[e,t]),null}var uIe=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=v.useRef(null),a=v.useRef(null),l=Le(Qq),c=qs(),u=Jt(),h="yAxis",f=Le(_=>Hh(_,h,r,c)),p=Le(_=>hTe(_,r)),y=Le(_=>dTe(_,r)),m=Le(_=>G7(_,h,r,c));if(v.useLayoutEffect(()=>{var _;if(!(s!=="auto"||!p||AT(i)||v.isValidElement(i))){var j=o.current,k=j==null||(_=j.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:S,tickMargin:C}=j.props,E=nIe({ticks:k,label:a.current,labelGapWithTick:5,tickSize:S,tickMargin:C});Math.round(p.width)!==Math.round(E)&&u(KRe({id:r,width:E}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,u,i,r,s]),p==null||y==null)return null;var{dangerouslySetInnerHTML:b,ticks:x}=e,w=aIe(e,sIe);return v.createElement(Ll,DN({},w,{ref:o,labelRef:a,scale:f,x:y.x,y:y.y,width:p.width,height:p.height,className:at("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:m}))},dIe=e=>{var t,r,n,s,i;return v.createElement(v.Fragment,null,v.createElement(cIe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),v.createElement(uIe,e))},hIe={allowDataOverflow:Jn.allowDataOverflow,allowDecimals:Jn.allowDecimals,allowDuplicatedCategory:Jn.allowDuplicatedCategory,hide:!1,mirror:Jn.mirror,orientation:Jn.orientation,padding:Jn.padding,reversed:Jn.reversed,scale:Jn.scale,tickCount:Jn.tickCount,type:Jn.type,width:Jn.width,yAxisId:0};class qT extends v.Component{render(){return v.createElement(dIe,this.props)}}vV(qT,"displayName","YAxis");vV(qT,"defaultProps",hIe);var q_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD;function fIe(){if(KD)return q_;KD=1;var e=de;function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,a=e.useDebugValue;return q_.useSyncExternalStoreWithSelector=function(l,c,u,h,f){var p=s(null);if(p.current===null){var y={hasValue:!1,value:null};p.current=y}else y=p.current;p=o(function(){function b(k){if(!x){if(x=!0,w=k,k=h(k),f!==void 0&&y.hasValue){var S=y.value;if(f(S,k))return _=S}return _=k}if(S=_,r(w,k))return S;var C=h(k);return f!==void 0&&f(S,C)?(w=k,S):(w=k,_=C)}var x=!1,w,_,j=u===void 0?null:u;return[function(){return b(c())},j===null?void 0:function(){return b(j())}]},[c,u,h,f]);var m=n(l,p[0],p[1]);return i(function(){y.hasValue=!0,y.value=m},[m]),a(m),m},q_}fIe();function pIe(e){e()}function mIe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){pIe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var ZD={notify(){},get:()=>[]};function gIe(e,t){let r,n=ZD,s=0,i=!1;function o(m){u();const b=n.subscribe(m);let x=!1;return()=>{x||(x=!0,b(),h())}}function a(){n.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return i}function u(){s++,r||(r=e.subscribe(l),n=mIe())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=ZD)}function f(){i||(i=!0,u())}function p(){i&&(i=!1,h())}const y={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>n};return y}var yIe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vIe=yIe(),bIe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xIe=bIe(),wIe=()=>vIe||xIe?v.useLayoutEffect:v.useEffect,_Ie=wIe(),GD=Symbol.for("react-redux-context"),YD=typeof globalThis<"u"?globalThis:{};function jIe(){if(!v.createContext)return{};const e=YD[GD]??(YD[GD]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var kIe=jIe();function NIe(e){const{children:t,context:r,serverState:n,store:s}=e,i=v.useMemo(()=>{const l=gIe(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),o=v.useMemo(()=>s.getState(),[s]);_Ie(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,o]);const a=r||kIe;return v.createElement(a.Provider,{value:i},t)}var SIe=NIe,EIe=(e,t)=>t,BT=Y([EIe,vt,_7,zr,h9,ya,vAe,Wr],jAe),VT=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},bV=Ls("mouseClick"),xV=Lm();xV.startListening({actionCreator:bV,effect:(e,t)=>{var r=e.payload,n=BT(t.getState(),VT(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(NTe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var LN=Ls("mouseMove"),wV=Lm();wV.startListening({actionCreator:LN,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=wT(n,n.tooltip.settings.shared),i=BT(n,VT(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(i9({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(s9()))}});function CIe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var JD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},_V=cs({name:"rootProps",initialState:JD,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:JD.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),TIe=_V.reducer,{updateOptions:AIe}=_V.actions,jV=cs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:OIe}=jV.actions,PIe=jV.reducer,kV=Ls("keyDown"),NV=Ls("focus"),WT=Lm();WT.startListening({actionCreator:kV,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(_T(s,Zh(r))),a=ya(r);if(i==="Enter"){var l=lb(r,"axis","hover",String(s.index));t.dispatch(CN({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:l}));return}var c=gTe(r),u=c==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,f=o+h*u;if(!(a==null||f>=a.length||f<0)){var p=lb(r,"axis","hover",String(f));t.dispatch(CN({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});WT.startListening({actionCreator:NV,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=lb(r,"axis","hover",String(i));t.dispatch(CN({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var ys=Ls("externalEvent"),SV=Lm();SV.startListening({actionCreator:ys,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:lAe(r),activeDataKey:oAe(r),activeIndex:uh(r),activeLabel:m9(r),activeTooltipIndex:uh(r),isTooltipActive:cAe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var RIe=Y([Kh],e=>e.tooltipItemPayloads),IIe=Y([RIe,Hm,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(a=>a.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),EV=Ls("touchMove"),CV=Lm();CV.startListening({actionCreator:EV,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=wT(n,n.tooltip.settings.shared);if(s==="axis"){var i=BT(n,VT({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(i9({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,a=r.touches[0],l=document.elementFromPoint(a.clientX,a.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(Jq),u=(o=l.getAttribute(Xq))!==null&&o!==void 0?o:void 0,h=IIe(t.getState(),c,u);t.dispatch(n9({activeDataKey:u,activeIndex:c,activeCoordinate:h}))}}});var DIe=jq({brush:E4e,cartesianAxis:ZRe,chartData:MAe,errorBars:b4e,graphicalItems:MPe,layout:Eke,legend:dNe,options:PAe,polarAxis:ePe,polarOptions:PIe,referenceElements:I4e,rootProps:TIe,tooltip:STe}),LIe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Xje({reducer:DIe,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([xV.middleware,wV.middleware,WT.middleware,SV.middleware,CV.middleware]),devTools:{serialize:{replacer:CIe},name:"recharts-".concat(t)}})};function TV(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=qs(),i=v.useRef(null);if(s)return r;i.current==null&&(i.current=LIe(t,n));var o=aC;return v.createElement(SIe,{context:o,store:i.current},r)}function AV(e){var{layout:t,width:r,height:n,margin:s}=e,i=Jt(),o=qs();return v.useEffect(()=>{o||(i(kke(t)),i(Nke({width:r,height:n})),i(jke(s)))},[i,o,t,r,n,s]),null}function OV(e){var t=Jt();return v.useEffect(()=>{t(AIe(e))},[t,e]),null}var MIe=["children"];function zIe(e,t){if(e==null)return{};var r,n,s=FIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function FIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pb.apply(null,arguments)}var $Ie={width:"100%",height:"100%"},UIe=v.forwardRef((e,t)=>{var r=vC(),n=bC(),s=sB();if(!ih(r)||!ih(n))return null;var{children:i,otherAttributes:o,title:a,desc:l}=e,c,u;return typeof o.tabIndex=="number"?c=o.tabIndex:c=s?0:void 0,typeof o.role=="string"?u=o.role:u=s?"application":void 0,v.createElement(K2,pb({},o,{title:a,desc:l,role:u,tabIndex:c,width:r,height:n,style:$Ie,ref:t}),i)}),qIe=e=>{var{children:t}=e,r=Le(Gx);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return v.createElement(K2,{width:n,height:s,x:o,y:i},t)},XD=v.forwardRef((e,t)=>{var{children:r}=e,n=zIe(e,MIe),s=qs();return s?v.createElement(qIe,null,r):v.createElement(UIe,pb({ref:t},n),r)});function BIe(){var e=Jt(),[t,r]=v.useState(null),n=Le(Qke);return v.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;xi(i)&&i!==n&&e(Ske(i))}},[t,e,n]),r}function QD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function VIe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QD(Object(r),!0).forEach(function(n){WIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WIe(e,t,r){return(t=HIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HIe(e){var t=KIe(e,"string");return typeof t=="symbol"?t:t+""}function KIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZIe=v.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:p,onTouchMove:y,onTouchStart:m,style:b,width:x}=e,w=Jt(),[_,j]=v.useState(null),[k,S]=v.useState(null);$Ae();var C=BIe(),E=v.useCallback(te=>{C(te),typeof t=="function"&&t(te),j(te),S(te)},[C,t,j,S]),T=v.useCallback(te=>{w(bV(te)),w(ys({handler:i,reactEvent:te}))},[w,i]),R=v.useCallback(te=>{w(LN(te)),w(ys({handler:c,reactEvent:te}))},[w,c]),O=v.useCallback(te=>{w(s9()),w(ys({handler:u,reactEvent:te}))},[w,u]),I=v.useCallback(te=>{w(LN(te)),w(ys({handler:h,reactEvent:te}))},[w,h]),P=v.useCallback(()=>{w(NV())},[w]),D=v.useCallback(te=>{w(kV(te.key))},[w]),L=v.useCallback(te=>{w(ys({handler:o,reactEvent:te}))},[w,o]),B=v.useCallback(te=>{w(ys({handler:a,reactEvent:te}))},[w,a]),q=v.useCallback(te=>{w(ys({handler:l,reactEvent:te}))},[w,l]),K=v.useCallback(te=>{w(ys({handler:f,reactEvent:te}))},[w,f]),H=v.useCallback(te=>{w(ys({handler:m,reactEvent:te}))},[w,m]),$=v.useCallback(te=>{w(EV(te)),w(ys({handler:y,reactEvent:te}))},[w,y]),J=v.useCallback(te=>{w(ys({handler:p,reactEvent:te}))},[w,p]);return v.createElement(w9.Provider,{value:_},v.createElement(RU.Provider,{value:k},v.createElement("div",{className:at("recharts-wrapper",n),style:VIe({position:"relative",cursor:"default",width:x,height:s},b),onClick:T,onContextMenu:L,onDoubleClick:B,onFocus:P,onKeyDown:D,onMouseDown:q,onMouseEnter:R,onMouseLeave:O,onMouseMove:I,onMouseUp:K,onTouchEnd:J,onTouchMove:$,onTouchStart:H,ref:E},r)))}),GIe=["children","className","width","height","style","compact","title","desc"];function YIe(e,t){if(e==null)return{};var r,n,s=JIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function JIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PV=v.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:a,title:l,desc:c}=e,u=YIe(e,GIe),h=Al(u);return a?v.createElement(XD,{otherAttributes:h,title:l,desc:c},r):v.createElement(ZIe,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(XD,{otherAttributes:h,title:l,desc:c,ref:t},v.createElement(L4e,null,r)))}),XIe=["width","height"];function MN(){return MN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MN.apply(null,arguments)}function QIe(e,t){if(e==null)return{};var r,n,s=e3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function e3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var t3e={top:5,right:5,bottom:5,left:5},r3e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:t3e,reverseStackOrder:!1,syncMethod:"index"},n3e=v.forwardRef(function(e,t){var r,n=Bs(e.categoricalChartProps,r3e),{width:s,height:i}=n,o=QIe(n,XIe);if(!ih(s)||!ih(i))return null;var{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:h}=e,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return v.createElement(TV,{preloadedState:{options:f},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:a},v.createElement(rV,{chartData:h.data}),v.createElement(AV,{width:s,height:i,layout:n.layout,margin:n.margin}),v.createElement(OV,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),v.createElement(PV,MN({},o,{width:s,height:i,ref:t})))}),s3e=["axis"],i3e=v.forwardRef((e,t)=>v.createElement(n3e,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:s3e,tooltipPayloadSearcher:k9,categoricalChartProps:e,ref:t}));function o3e(e){var t=Jt();return v.useEffect(()=>{t(OIe(e))},[t,e]),null}var a3e=["width","height","layout"];function zN(){return zN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zN.apply(null,arguments)}function l3e(e,t){if(e==null)return{};var r,n,s=c3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function c3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var u3e={top:5,right:5,bottom:5,left:5},d3e={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:u3e,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},h3e=v.forwardRef(function(e,t){var r,n=Bs(e.categoricalChartProps,d3e),{width:s,height:i,layout:o}=n,a=l3e(n,a3e);if(!ih(s)||!ih(i))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return v.createElement(TV,{preloadedState:{options:f},reduxStoreName:(r=n.id)!==null&&r!==void 0?r:l},v.createElement(rV,{chartData:n.data}),v.createElement(AV,{width:s,height:i,layout:o,margin:n.margin}),v.createElement(OV,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),v.createElement(o3e,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),v.createElement(PV,zN({width:s,height:i},a,{ref:t})))}),f3e=["item"],p3e={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},m3e=v.forwardRef((e,t)=>{var r=Bs(e,p3e);return v.createElement(h3e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:f3e,tooltipPayloadSearcher:k9,categoricalChartProps:r,ref:t})});const g3e=async()=>{const{count:e}=await le.from("profiles").select("id",{count:"exact",head:!0}),{count:t}=await le.from("subscriptions").select("id",{count:"exact",head:!0}).eq("status","active"),{data:r,error:n}=await le.from("pages").select("view_count"),{data:s,error:i}=await le.from("purchases").select("price_id");(n||i)&&console.error("Error fetching key metrics:",{viewsError:n,revenueError:i});const o=(r==null?void 0:r.reduce((l,c)=>l+(c.view_count||0),0))||0,a=((s==null?void 0:s.length)||0)*10;return{totalUsers:e||0,activeSubscribers:t||0,totalRevenue:a,totalViews:o}},y3e=async()=>{const e=new Date;e.setDate(e.getDate()-30);const{data:t,error:r}=await le.from("profiles").select("created_at").gte("created_at",e.toISOString());if(r)throw new Error(r.message);const n=t.reduce((s,i)=>{const o=new Date(i.created_at).toISOString().split("T")[0];return s[o]=(s[o]||0)+1,s},{});return Object.entries(n).map(([s,i])=>({date:s,count:i})).sort((s,i)=>new Date(s.date).getTime()-new Date(i.date).getTime())},v3e=async()=>{const{data:e,error:t}=await le.from("subscriptions").select("status");if(t)throw new Error(t.message);const r=e.reduce((n,s)=>{const i=s.status||"unknown";return n[i]=(n[i]||0)+1,n},{});return Object.entries(r).map(([n,s])=>({name:n,value:s}))},b3e=async()=>{const{data:e,error:t}=await le.from("detailed_audit_log").select("*").order("created_at",{ascending:!1}).limit(5);if(t)throw new Error(t.message);return e},gy=({title:e,value:t,icon:r,color:n})=>d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 flex items-center space-x-4 hover:border-blue-500/50 transition-colors",children:[d.jsx("div",{className:`p-3 rounded-lg bg-${n}-500/20 text-${n}-400`,children:d.jsx(r,{className:"w-6 h-6"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-400",children:e}),d.jsx("p",{className:"text-2xl font-bold text-white",children:t})]})]}),e5=({title:e,children:t,icon:r})=>d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(r,{className:"w-5 h-5 mr-2 text-gray-400"}),d.jsx("h3",{className:"text-lg font-semibold text-white",children:e})]}),d.jsx("div",{className:"h-72",children:t})]}),B_=()=>d.jsx("div",{className:"flex justify-center items-center h-full",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400"})}),V_=({message:e})=>d.jsxs("div",{className:"flex justify-center items-center h-full text-red-400",children:[d.jsx($i,{className:"w-6 h-6 mr-2"}),d.jsxs("p",{children:["Error loading data: ",e]})]}),t5=({message:e,icon:t=iae})=>d.jsxs("div",{className:"flex flex-col justify-center items-center h-full text-gray-500",children:[d.jsx(t,{className:"w-12 h-12 mb-4"}),d.jsx("p",{className:"font-semibold",children:"No Data Available"}),d.jsx("p",{className:"text-sm",children:e})]}),x3e=()=>{const{data:e,isLoading:t}=It({queryKey:["keyMetrics"],queryFn:g3e}),{data:r,isLoading:n,error:s}=It({queryKey:["usersOverTime"],queryFn:y3e}),{data:i,isLoading:o,error:a}=It({queryKey:["subscriptionStatus"],queryFn:v3e}),{data:l,isLoading:c,error:u}=It({queryKey:["recentActivity"],queryFn:b3e}),h=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("header",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Dashboard"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"An overview of your website's performance."})]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:t?d.jsx("p",{className:"text-gray-900 dark:text-white",children:"Loading metrics..."}):d.jsxs(d.Fragment,{children:[d.jsx(gy,{title:"Total Users",value:e==null?void 0:e.totalUsers.toLocaleString(),icon:fv,color:"blue"}),d.jsx(gy,{title:"Active Subscribers",value:e==null?void 0:e.activeSubscribers.toLocaleString(),icon:yae,color:"green"}),d.jsx(gy,{title:"Total Revenue",value:`$${e==null?void 0:e.totalRevenue.toLocaleString()}`,icon:tae,color:"yellow"}),d.jsx(gy,{title:"Total Page Views",value:e==null?void 0:e.totalViews.toLocaleString(),icon:Sm,color:"purple"})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsx(e5,{title:"New Users (Last 30 Days)",icon:lae,children:n?d.jsx(B_,{}):s?d.jsx(V_,{message:s.message}):r&&r.length>0?d.jsx(fD,{width:"100%",height:"100%",children:d.jsxs(i3e,{data:r,children:[d.jsx(aV,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(UT,{dataKey:"date",stroke:"#A0AEC0",tick:{fontSize:12}}),d.jsx(qT,{stroke:"#A0AEC0",tick:{fontSize:12}}),d.jsx(dD,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(Kp,{wrapperStyle:{fontSize:14}}),d.jsx(pV,{type:"monotone",dataKey:"count",name:"New Users",stroke:"#3B82F6",strokeWidth:2,dot:{r:4},activeDot:{r:8}})]})}):d.jsx(t5,{message:"No new user data to display for this period."})}),d.jsx(e5,{title:"Subscription Status",icon:pae,children:o?d.jsx(B_,{}):a?d.jsx(V_,{message:a.message}):i&&i.length>0?d.jsx(fD,{width:"100%",height:"100%",children:d.jsxs(m3e,{children:[d.jsx(Q9,{data:i,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",labelLine:!1,label:({name:f,percent:p})=>`${f}: ${(p*100).toFixed(0)}%`,children:i==null?void 0:i.map((f,p)=>d.jsx(uw,{fill:h[p%h.length]},`cell-${p}`))}),d.jsx(dD,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(Kp,{wrapperStyle:{fontSize:14}})]})}):d.jsx(t5,{message:"No subscription data available."})})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(cae,{className:"w-5 h-5 mr-2 text-gray-600 dark:text-gray-300"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"})]}),d.jsx("div",{className:"space-y-4",children:c?d.jsx(B_,{}):u?d.jsx(V_,{message:u.message}):l&&l.length>0?l.map(f=>{var p;return d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[d.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:f.actor_display_name||f.actor_username||"A user"})," ",(p=f.action)==null?void 0:p.toLowerCase(),"."]}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:new Date(f.created_at).toLocaleString()})]},f.id)}):d.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No recent activity found."})})]})]})};let w3e={data:""},_3e=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||w3e,j3e=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,k3e=/\/\*[^]*?\*\/|  +/g,r5=/\n+/g,Ka=(e,t)=>{let r="",n="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?Ka(o,i):i+"{"+Ka(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=Ka(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ka.p?Ka.p(i,o):i+":"+o+";")}return r+(t&&s?t+"{"+s+"}":s)+n},ko={},RV=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+RV(e[r]);return t}return e},N3e=(e,t,r,n,s)=>{let i=RV(e),o=ko[i]||(ko[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!ko[o]){let l=i!==e?e:(c=>{let u,h,f=[{}];for(;u=j3e.exec(c.replace(k3e,""));)u[4]?f.shift():u[3]?(h=u[3].replace(r5," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(r5," ").trim();return f[0]})(e);ko[o]=Ka(s?{["@keyframes "+o]:l}:l,r?"":"."+o)}let a=r&&ko.g?ko.g:null;return r&&(ko.g=ko[o]),((l,c,u,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(ko[o],t,n,a),o},S3e=(e,t,r)=>e.reduce((n,s,i)=>{let o=t[i];if(o&&o.call){let a=o(r),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Ka(a,""):a===!1?"":a}return n+s+(o??"")},"");function hw(e){let t=this||{},r=e.call?e(t.p):e;return N3e(r.unshift?r.raw?S3e(r,[].slice.call(arguments,1),t.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):r,_3e(t.target),t.g,t.o,t.k)}let IV,FN,$N;hw.bind({g:1});let aa=hw.bind({k:1});function E3e(e,t,r,n){Ka.p=t,IV=e,FN=r,$N=n}function Ml(e,t){let r=this||{};return function(){let n=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;r.p=Object.assign({theme:FN&&FN()},a),r.o=/ *go\d+/.test(l),a.className=hw.apply(r,n)+(l?" "+l:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),$N&&c[0]&&$N(a),IV(c,a)}return s}}var C3e=e=>typeof e=="function",mb=(e,t)=>C3e(e)?e(t):e,T3e=(()=>{let e=0;return()=>(++e).toString()})(),DV=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),A3e=20,HT="default",LV=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return LV(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Uy=[],MV={toasts:[],pausedAt:void 0,settings:{toastLimit:A3e}},Ki={},zV=(e,t=HT)=>{Ki[t]=LV(Ki[t]||MV,e),Uy.forEach(([r,n])=>{r===t&&n(Ki[t])})},FV=e=>Object.keys(Ki).forEach(t=>zV(e,t)),O3e=e=>Object.keys(Ki).find(t=>Ki[t].toasts.some(r=>r.id===e)),fw=(e=HT)=>t=>{zV(t,e)},P3e={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},R3e=(e={},t=HT)=>{let[r,n]=v.useState(Ki[t]||MV),s=v.useRef(Ki[t]);v.useEffect(()=>(s.current!==Ki[t]&&n(Ki[t]),Uy.push([t,n]),()=>{let o=Uy.findIndex(([a])=>a===t);o>-1&&Uy.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var a,l,c;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||P3e[o.type],style:{...e.style,...(c=e[o.type])==null?void 0:c.style,...o.style}}});return{...r,toasts:i}},I3e=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||T3e()}),Zm=e=>(t,r)=>{let n=I3e(t,e,r);return fw(n.toasterId||O3e(n.id))({type:2,toast:n}),n.id},ar=(e,t)=>Zm("blank")(e,t);ar.error=Zm("error");ar.success=Zm("success");ar.loading=Zm("loading");ar.custom=Zm("custom");ar.dismiss=(e,t)=>{let r={type:3,toastId:e};t?fw(t)(r):FV(r)};ar.dismissAll=e=>ar.dismiss(void 0,e);ar.remove=(e,t)=>{let r={type:4,toastId:e};t?fw(t)(r):FV(r)};ar.removeAll=e=>ar.remove(void 0,e);ar.promise=(e,t,r)=>{let n=ar.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?mb(t.success,s):void 0;return i?ar.success(i,{id:n,...r,...r==null?void 0:r.success}):ar.dismiss(n),s}).catch(s=>{let i=t.error?mb(t.error,s):void 0;i?ar.error(i,{id:n,...r,...r==null?void 0:r.error}):ar.dismiss(n)}),e};var D3e=1e3,L3e=(e,t="default")=>{let{toasts:r,pausedAt:n}=R3e(e,t),s=v.useRef(new Map).current,i=v.useCallback((h,f=D3e)=>{if(s.has(h))return;let p=setTimeout(()=>{s.delete(h),o({type:4,toastId:h})},f);s.set(h,p)},[]);v.useEffect(()=>{if(n)return;let h=Date.now(),f=r.map(p=>{if(p.duration===1/0)return;let y=(p.duration||0)+p.pauseDuration-(h-p.createdAt);if(y<0){p.visible&&ar.dismiss(p.id);return}return setTimeout(()=>ar.dismiss(p.id,t),y)});return()=>{f.forEach(p=>p&&clearTimeout(p))}},[r,n,t]);let o=v.useCallback(fw(t),[t]),a=v.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=v.useCallback((h,f)=>{o({type:1,toast:{id:h,height:f}})},[o]),c=v.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=v.useCallback((h,f)=>{let{reverseOrder:p=!1,gutter:y=8,defaultPosition:m}=f||{},b=r.filter(_=>(_.position||m)===(h.position||m)&&_.height),x=b.findIndex(_=>_.id===h.id),w=b.filter((_,j)=>j<x&&_.visible).length;return b.filter(_=>_.visible).slice(...p?[w+1]:[0,w]).reduce((_,j)=>_+(j.height||0)+y,0)},[r]);return v.useEffect(()=>{r.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let f=s.get(h.id);f&&(clearTimeout(f),s.delete(h.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},M3e=aa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,z3e=aa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,F3e=aa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,$3e=Ml("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${M3e} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${z3e} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${F3e} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,U3e=aa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,q3e=Ml("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${U3e} 1s linear infinite;
`,B3e=aa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,V3e=aa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,W3e=Ml("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${B3e} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${V3e} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,H3e=Ml("div")`
  position: absolute;
`,K3e=Ml("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Z3e=aa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,G3e=Ml("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Z3e} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Y3e=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?v.createElement(G3e,null,t):t:r==="blank"?null:v.createElement(K3e,null,v.createElement(q3e,{...n}),r!=="loading"&&v.createElement(H3e,null,r==="error"?v.createElement($3e,{...n}):v.createElement(W3e,{...n})))},J3e=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,X3e=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Q3e="0%{opacity:0;} 100%{opacity:1;}",eDe="0%{opacity:1;} 100%{opacity:0;}",tDe=Ml("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,rDe=Ml("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,nDe=(e,t)=>{let r=e.includes("top")?1:-1,[n,s]=DV()?[Q3e,eDe]:[J3e(r),X3e(r)];return{animation:t?`${aa(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${aa(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},sDe=v.memo(({toast:e,position:t,style:r,children:n})=>{let s=e.height?nDe(e.position||t||"top-center",e.visible):{opacity:0},i=v.createElement(Y3e,{toast:e}),o=v.createElement(rDe,{...e.ariaProps},mb(e.message,e));return v.createElement(tDe,{className:e.className,style:{...s,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):v.createElement(v.Fragment,null,i,o))});E3e(v.createElement);var iDe=({id:e,className:t,style:r,onHeightUpdate:n,children:s})=>{let i=v.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;n(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return v.createElement("div",{ref:i,className:t,style:r},s)},oDe=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:DV()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...s}},aDe=hw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,yy=16,lDe=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=L3e(r,i);return v.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:yy,left:yy,right:yy,bottom:yy,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let h=u.position||t,f=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),p=oDe(h,f);return v.createElement(iDe,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?aDe:"",style:p},u.type==="custom"?mb(u.message,u):s?s(u):v.createElement(sDe,{toast:u,position:h}))}))},Fi=ar;function cDe(){return{toast:({title:e,description:t,variant:r})=>{r==="destructive"?ar.error(e,{id:e,duration:5e3,style:{background:"#fee2e2",color:"#ef4444",border:"1px solid #fca5a5"},iconTheme:{primary:"#ef4444",secondary:"#fee2e2"}}):ar.success(e,{id:e,duration:3e3,style:{background:"#dcfce7",color:"#22c55e",border:"1px solid #86efac"},iconTheme:{primary:"#22c55e",secondary:"#dcfce7"}})}}}const nn=cDe(),uDe=async()=>{const{data:e,error:t}=await le.from("homepage_content").select("*");if(t)throw new Error(t.message);return e},dDe=async e=>{const{id:t,...r}=e,{data:n,error:s}=await le.from("homepage_content").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},hDe=async e=>{const{data:t,error:r}=await le.from("homepage_content").insert(e).select();if(r)throw new Error(r.message);return t[0]},fDe=async()=>{const{data:e,error:t}=await le.from("news_items").select("*").order("date",{ascending:!1});if(t)throw new Error(t.message);return e},pDe=async e=>{const{data:t,error:r}=await le.from("news_items").insert(e).select();if(r)throw new Error(r.message);return t[0]},mDe=async e=>{const{data:t,error:r}=await le.from("news_items").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},gDe=async e=>{const{error:t}=await le.from("news_items").delete().eq("id",e);if(t)throw new Error(t.message)},yDe=async()=>{const{data:e,error:t}=await le.from("release_items").select("*").order("release_date",{ascending:!1});if(t)throw new Error(t.message);return e},vDe=async e=>{const{data:t,error:r}=await le.from("release_items").insert(e).select();if(r)throw new Error(r.message);return t[0]},bDe=async e=>{const{data:t,error:r}=await le.from("release_items").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},xDe=async e=>{const{error:t}=await le.from("release_items").delete().eq("id",e);if(t)throw new Error(t.message)},wDe=()=>{var e,t,r,n,s,i,o,a;const l=ha(),{data:c,isLoading:u,isError:h,error:f}=It({queryKey:["homepageContent"],queryFn:uDe}),{data:p,isLoading:y,isError:m,error:b}=It({queryKey:["newsItems"],queryFn:fDe}),{data:x,isLoading:w,isError:_,error:j}=It({queryKey:["releaseItems"],queryFn:yDe}),k=rr({mutationFn:dDe,onSuccess:()=>{l.invalidateQueries({queryKey:["homepageContent"]}),nn.toast({title:"Content updated successfully!",variant:"default"})},onError:U=>{nn.toast({title:`Error updating content: ${U.message}`,variant:"destructive"})}}),S=rr({mutationFn:hDe,onSuccess:()=>{l.invalidateQueries({queryKey:["homepageContent"]}),nn.toast({title:"Content created successfully!",variant:"default"})},onError:U=>{nn.toast({title:`Error creating content: ${U.message}`,variant:"destructive"})}}),C=rr({mutationFn:pDe,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),nn.toast({title:"News item added successfully!",variant:"default"}),G()},onError:U=>{nn.toast({title:`Error adding news item: ${U.message}`,variant:"destructive"})}}),E=rr({mutationFn:mDe,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),nn.toast({title:"News item updated successfully!",variant:"default"}),G()},onError:U=>{nn.toast({title:`Error updating news item: ${U.message}`,variant:"destructive"})}}),T=rr({mutationFn:gDe,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),nn.toast({title:"News item deleted successfully!",variant:"default"})},onError:U=>{nn.toast({title:`Error deleting news item: ${U.message}`,variant:"destructive"})}}),R=rr({mutationFn:vDe,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),nn.toast({title:"Release item added successfully!",variant:"default"}),W()},onError:U=>{nn.toast({title:`Error adding release item: ${U.message}`,variant:"destructive"})}}),O=rr({mutationFn:bDe,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),nn.toast({title:"Release item updated successfully!",variant:"default"}),W()},onError:U=>{nn.toast({title:`Error updating release item: ${U.message}`,variant:"destructive"})}}),I=rr({mutationFn:xDe,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),nn.toast({title:"Release item deleted successfully!",variant:"default"})},onError:U=>{nn.toast({title:`Error deleting release item: ${U.message}`,variant:"destructive"})}}),[P,D]=v.useState(!1),[L,B]=v.useState(null),[q,K]=v.useState(!1),[H,$]=v.useState(null),J=U=>c==null?void 0:c.find(Se=>Se.section===U),te=async U=>{U.preventDefault();const Se=U.target,Re=Se.heroTitle.value,Qe=Se.heroDescription.value,Xe=Se.heroButtonText.value,pt=Se.heroButtonLink.value,Xt=[{section:"hero_title",content:Re},{section:"hero_description",content:Qe},{section:"hero_button_text",content:Xe},{section:"hero_button_link",content:pt}];for(const M of Xt){const V=J(M.section);V?k.mutate({...V,content:M.content}):S.mutate(M)}},be=async U=>{U.preventDefault();const Se=U.target,Re=Se.wordsWritten.value,Qe=Se.betaReaders.value,Xe=Se.averageRating.value,pt=Se.booksPublished.value,Xt=[{section:"stat_words_written",content:Re},{section:"stat_beta_readers",content:Qe},{section:"stat_average_rating",content:Xe},{section:"stat_books_published",content:pt}];for(const M of Xt){const V=J(M.section);V?k.mutate({...V,content:M.content}):S.mutate(M)}},Z=(U=null)=>{B(U),D(!0)},G=()=>{B(null),D(!1)},fe=U=>{U.preventDefault();const Se=U.target,Re=Se.newsTitle.value,Qe=Se.newsContent.value,Xe=Se.newsStatus.value,pt=Se.newsDate.value,Xt={title:Re,content:Qe,status:Xe,date:pt};L?E.mutate({...L,...Xt}):C.mutate(Xt)},pe=U=>{window.confirm("Are you sure you want to delete this news item?")&&T.mutate(U)},ke=(U=null)=>{$(U),K(!0)},W=()=>{$(null),K(!1)},X=U=>{U.preventDefault();const Se=U.target,Re=Se.releaseTitle.value,Qe=Se.releaseType.value,Xe=Se.releaseStatus.value,pt=Se.releaseDescription.value,Xt=Se.releaseDate.value,M=Se.purchaseLink.value,V={title:Re,type:Qe,status:Xe,description:pt,release_date:Xt,purchase_link:M};H?O.mutate({...H,...V}):R.mutate(V)},ae=U=>{window.confirm("Are you sure you want to delete this release item?")&&I.mutate(U)};return u||y||w?d.jsx("div",{className:"text-center py-8",children:"Loading homepage content manager..."}):h?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error: ",f==null?void 0:f.message]}):m?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading news: ",b==null?void 0:b.message]}):_?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading releases: ",j==null?void 0:j.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-4",role:"alert",children:[d.jsx("strong",{children:"Note:"})," Changes made here will be reflected on your homepage immediately after saving."]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Hero Section"}),d.jsx("div",{className:"p-6",children:d.jsxs("form",{onSubmit:te,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Main Title"}),d.jsx("input",{type:"text",id:"heroTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((e=J("hero_title"))==null?void 0:e.content)||""})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroDescription",className:"block text-gray-700 text-sm font-bold mb-2",children:"Subtitle/Description"}),d.jsx("textarea",{id:"heroDescription",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-32 resize-y",defaultValue:((t=J("hero_description"))==null?void 0:t.content)||""})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroButtonText",className:"block text-gray-700 text-sm font-bold mb-2",children:"Button Text"}),d.jsx("input",{type:"text",id:"heroButtonText",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((r=J("hero_button_text"))==null?void 0:r.content)||""})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{htmlFor:"heroButtonLink",className:"block text-gray-700 text-sm font-bold mb-2",children:"Button Link"}),d.jsx("input",{type:"url",id:"heroButtonLink",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((n=J("hero_button_link"))==null?void 0:n.content)||""})]}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Hero Section"})]})})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Statistics"}),d.jsx("div",{className:"p-6",children:d.jsxs("form",{onSubmit:be,children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"wordsWritten",className:"block text-gray-700 text-sm font-bold mb-2",children:"Words Written"}),d.jsx("input",{type:"text",id:"wordsWritten",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((s=J("stat_words_written"))==null?void 0:s.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"betaReaders",className:"block text-gray-700 text-sm font-bold mb-2",children:"Beta Readers"}),d.jsx("input",{type:"text",id:"betaReaders",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((i=J("stat_beta_readers"))==null?void 0:i.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"averageRating",className:"block text-gray-700 text-sm font-bold mb-2",children:"Average Rating"}),d.jsx("input",{type:"text",id:"averageRating",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((o=J("stat_average_rating"))==null?void 0:o.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"booksPublished",className:"block text-gray-700 text-sm font-bold mb-2",children:"Books Published"}),d.jsx("input",{type:"text",id:"booksPublished",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((a=J("stat_books_published"))==null?void 0:a.content)||""})]})]}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Statistics"})]})})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Latest News & Updates"}),d.jsxs("div",{className:"p-6",children:[d.jsx("button",{onClick:()=>Z(),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-4",children:"+ Add New Update"}),p==null?void 0:p.map(U=>d.jsxs("div",{className:"bg-gray-100 p-4 rounded-md mb-2 relative",children:[d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsx("button",{onClick:()=>Z(U),className:"bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"Edit"}),d.jsx("button",{onClick:()=>pe(U.id),className:"bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Delete"})]}),d.jsx("h3",{className:"font-bold text-lg mb-1",children:U.title}),d.jsx("p",{className:"text-gray-700 text-sm",children:U.content}),d.jsxs("small",{className:"text-gray-500",children:["Status: ",U.status," | Date: ",U.date]})]},U.id))]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Latest Releases"}),d.jsxs("div",{className:"p-6",children:[d.jsx("button",{onClick:()=>ke(),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-4",children:"+ Add New Release"}),x==null?void 0:x.map(U=>d.jsxs("div",{className:"bg-gray-100 p-4 rounded-md mb-2 relative",children:[d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsx("button",{onClick:()=>ke(U),className:"bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"Edit"}),d.jsx("button",{onClick:()=>ae(U.id),className:"bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Delete"})]}),d.jsx("h3",{className:"font-bold text-lg mb-1",children:U.title}),d.jsxs("p",{className:"text-gray-700 text-sm",children:[d.jsx("strong",{children:"Type:"})," ",U.type," | ",d.jsx("strong",{children:"Status:"})," ",U.status]}),d.jsxs("small",{className:"text-gray-500",children:["Released: ",U.release_date]})]},U.id))]})]}),P&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:L?"Edit Update":"Add New Update"}),d.jsx("button",{onClick:G,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),d.jsxs("form",{onSubmit:fe,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newsTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),d.jsx("input",{type:"text",id:"newsTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(L==null?void 0:L.title)||"",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newsContent",className:"block text-gray-700 text-sm font-bold mb-2",children:"Content"}),d.jsx("textarea",{id:"newsContent",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 resize-y",defaultValue:(L==null?void 0:L.content)||"",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newsStatus",className:"block text-gray-700 text-sm font-bold mb-2",children:"Status"}),d.jsxs("select",{id:"newsStatus",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(L==null?void 0:L.status)||"draft",children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newsDate",className:"block text-gray-700 text-sm font-bold mb-2",children:"Date"}),d.jsx("input",{type:"date",id:"newsDate",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(L==null?void 0:L.date)||new Date().toISOString().split("T")[0],required:!0})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:G,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Update"})]})]})]})}),q&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:H?"Edit Release":"Add New Release"}),d.jsx("button",{onClick:W,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),d.jsxs("form",{onSubmit:X,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"releaseTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),d.jsx("input",{type:"text",id:"releaseTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(H==null?void 0:H.title)||"",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseType",className:"block text-gray-700 text-sm font-bold mb-2",children:"Type"}),d.jsxs("select",{id:"releaseType",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(H==null?void 0:H.type)||"issue",children:[d.jsx("option",{value:"issue",children:"Issue"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"volume",children:"Volume"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseStatus",className:"block text-gray-700 text-sm font-bold mb-2",children:"Status"}),d.jsxs("select",{id:"releaseStatus",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(H==null?void 0:H.status)||"available",children:[d.jsx("option",{value:"available",children:"Available"}),d.jsx("option",{value:"coming-soon",children:"Coming Soon"}),d.jsx("option",{value:"pre-order",children:"Pre-order"})]})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"releaseDescription",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),d.jsx("textarea",{id:"releaseDescription",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 resize-y",defaultValue:(H==null?void 0:H.description)||""})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseDate",className:"block text-gray-700 text-sm font-bold mb-2",children:"Release Date"}),d.jsx("input",{type:"date",id:"releaseDate",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(H==null?void 0:H.release_date)||new Date().toISOString().split("T")[0],required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"purchaseLink",className:"block text-gray-700 text-sm font-bold mb-2",children:"Purchase Link"}),d.jsx("input",{type:"url",id:"purchaseLink",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(H==null?void 0:H.purchase_link)||""})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:W,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Release"})]})]})]})})]})};var $V=typeof global=="object"&&global&&global.Object===Object&&global,_De=typeof self=="object"&&self&&self.Object===Object&&self,po=$V||_De||Function("return this")(),xl=po.Symbol,UV=Object.prototype,jDe=UV.hasOwnProperty,kDe=UV.toString,Af=xl?xl.toStringTag:void 0;function NDe(e){var t=jDe.call(e,Af),r=e[Af];try{e[Af]=void 0;var n=!0}catch{}var s=kDe.call(e);return n&&(t?e[Af]=r:delete e[Af]),s}var SDe=Object.prototype,EDe=SDe.toString;function CDe(e){return EDe.call(e)}var TDe="[object Null]",ADe="[object Undefined]",n5=xl?xl.toStringTag:void 0;function Gh(e){return e==null?e===void 0?ADe:TDe:n5&&n5 in Object(e)?NDe(e):CDe(e)}function la(e){return e!=null&&typeof e=="object"}var Yc=Array.isArray;function zl(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function qV(e){return e}var ODe="[object AsyncFunction]",PDe="[object Function]",RDe="[object GeneratorFunction]",IDe="[object Proxy]";function KT(e){if(!zl(e))return!1;var t=Gh(e);return t==PDe||t==RDe||t==ODe||t==IDe}var W_=po["__core-js_shared__"],s5=function(){var e=/[^.]+$/.exec(W_&&W_.keys&&W_.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function DDe(e){return!!s5&&s5 in e}var LDe=Function.prototype,MDe=LDe.toString;function hu(e){if(e!=null){try{return MDe.call(e)}catch{}try{return e+""}catch{}}return""}var zDe=/[\\^$.*+?()[\]{}|]/g,FDe=/^\[object .+?Constructor\]$/,$De=Function.prototype,UDe=Object.prototype,qDe=$De.toString,BDe=UDe.hasOwnProperty,VDe=RegExp("^"+qDe.call(BDe).replace(zDe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WDe(e){if(!zl(e)||DDe(e))return!1;var t=KT(e)?VDe:FDe;return t.test(hu(e))}function HDe(e,t){return e==null?void 0:e[t]}function fu(e,t){var r=HDe(e,t);return WDe(r)?r:void 0}var UN=fu(po,"WeakMap"),i5=Object.create,KDe=function(){function e(){}return function(t){if(!zl(t))return{};if(i5)return i5(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function ZDe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function GDe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var YDe=800,JDe=16,XDe=Date.now;function QDe(e){var t=0,r=0;return function(){var n=XDe(),s=JDe-(n-r);if(r=n,s>0){if(++t>=YDe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function e5e(e){return function(){return e}}var gb=function(){try{var e=fu(Object,"defineProperty");return e({},"",{}),e}catch{}}(),t5e=gb?function(e,t){return gb(e,"toString",{configurable:!0,enumerable:!1,value:e5e(t),writable:!0})}:qV,r5e=QDe(t5e);function n5e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var s5e=9007199254740991,i5e=/^(?:0|[1-9]\d*)$/;function BV(e,t){var r=typeof e;return t=t??s5e,!!t&&(r=="number"||r!="symbol"&&i5e.test(e))&&e>-1&&e%1==0&&e<t}function ZT(e,t,r){t=="__proto__"&&gb?gb(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Gm(e,t){return e===t||e!==e&&t!==t}var o5e=Object.prototype,a5e=o5e.hasOwnProperty;function VV(e,t,r){var n=e[t];(!(a5e.call(e,t)&&Gm(n,r))||r===void 0&&!(t in e))&&ZT(e,t,r)}function l5e(e,t,r,n){var s=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],l=void 0;l===void 0&&(l=e[a]),s?ZT(r,a,l):VV(r,a,l)}return r}var o5=Math.max;function c5e(e,t,r){return t=o5(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=o5(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=r(o),ZDe(e,this,a)}}function u5e(e,t){return r5e(c5e(e,t,qV),e+"")}var d5e=9007199254740991;function WV(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=d5e}function pw(e){return e!=null&&WV(e.length)&&!KT(e)}function h5e(e,t,r){if(!zl(r))return!1;var n=typeof t;return(n=="number"?pw(r)&&BV(t,r.length):n=="string"&&t in r)?Gm(r[t],e):!1}function f5e(e){return u5e(function(t,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(s--,i):void 0,o&&h5e(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var a=r[n];a&&e(t,a,n,i)}return t})}var p5e=Object.prototype;function GT(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||p5e;return e===r}function m5e(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var g5e="[object Arguments]";function a5(e){return la(e)&&Gh(e)==g5e}var HV=Object.prototype,y5e=HV.hasOwnProperty,v5e=HV.propertyIsEnumerable,qN=a5(function(){return arguments}())?a5:function(e){return la(e)&&y5e.call(e,"callee")&&!v5e.call(e,"callee")};function b5e(){return!1}var KV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,l5=KV&&typeof module=="object"&&module&&!module.nodeType&&module,x5e=l5&&l5.exports===KV,c5=x5e?po.Buffer:void 0,w5e=c5?c5.isBuffer:void 0,tm=w5e||b5e,_5e="[object Arguments]",j5e="[object Array]",k5e="[object Boolean]",N5e="[object Date]",S5e="[object Error]",E5e="[object Function]",C5e="[object Map]",T5e="[object Number]",A5e="[object Object]",O5e="[object RegExp]",P5e="[object Set]",R5e="[object String]",I5e="[object WeakMap]",D5e="[object ArrayBuffer]",L5e="[object DataView]",M5e="[object Float32Array]",z5e="[object Float64Array]",F5e="[object Int8Array]",$5e="[object Int16Array]",U5e="[object Int32Array]",q5e="[object Uint8Array]",B5e="[object Uint8ClampedArray]",V5e="[object Uint16Array]",W5e="[object Uint32Array]",At={};At[M5e]=At[z5e]=At[F5e]=At[$5e]=At[U5e]=At[q5e]=At[B5e]=At[V5e]=At[W5e]=!0;At[_5e]=At[j5e]=At[D5e]=At[k5e]=At[L5e]=At[N5e]=At[S5e]=At[E5e]=At[C5e]=At[T5e]=At[A5e]=At[O5e]=At[P5e]=At[R5e]=At[I5e]=!1;function H5e(e){return la(e)&&WV(e.length)&&!!At[Gh(e)]}function YT(e){return function(t){return e(t)}}var ZV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,bp=ZV&&typeof module=="object"&&module&&!module.nodeType&&module,K5e=bp&&bp.exports===ZV,H_=K5e&&$V.process,dh=function(){try{var e=bp&&bp.require&&bp.require("util").types;return e||H_&&H_.binding&&H_.binding("util")}catch{}}(),u5=dh&&dh.isTypedArray,JT=u5?YT(u5):H5e,Z5e=Object.prototype,G5e=Z5e.hasOwnProperty;function GV(e,t){var r=Yc(e),n=!r&&qN(e),s=!r&&!n&&tm(e),i=!r&&!n&&!s&&JT(e),o=r||n||s||i,a=o?m5e(e.length,String):[],l=a.length;for(var c in e)(t||G5e.call(e,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||BV(c,l)))&&a.push(c);return a}function YV(e,t){return function(r){return e(t(r))}}var Y5e=YV(Object.keys,Object),J5e=Object.prototype,X5e=J5e.hasOwnProperty;function Q5e(e){if(!GT(e))return Y5e(e);var t=[];for(var r in Object(e))X5e.call(e,r)&&r!="constructor"&&t.push(r);return t}function eLe(e){return pw(e)?GV(e):Q5e(e)}function tLe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var rLe=Object.prototype,nLe=rLe.hasOwnProperty;function sLe(e){if(!zl(e))return tLe(e);var t=GT(e),r=[];for(var n in e)n=="constructor"&&(t||!nLe.call(e,n))||r.push(n);return r}function JV(e){return pw(e)?GV(e,!0):sLe(e)}var rm=fu(Object,"create");function iLe(){this.__data__=rm?rm(null):{},this.size=0}function oLe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var aLe="__lodash_hash_undefined__",lLe=Object.prototype,cLe=lLe.hasOwnProperty;function uLe(e){var t=this.__data__;if(rm){var r=t[e];return r===aLe?void 0:r}return cLe.call(t,e)?t[e]:void 0}var dLe=Object.prototype,hLe=dLe.hasOwnProperty;function fLe(e){var t=this.__data__;return rm?t[e]!==void 0:hLe.call(t,e)}var pLe="__lodash_hash_undefined__";function mLe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rm&&t===void 0?pLe:t,this}function Jc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jc.prototype.clear=iLe;Jc.prototype.delete=oLe;Jc.prototype.get=uLe;Jc.prototype.has=fLe;Jc.prototype.set=mLe;function gLe(){this.__data__=[],this.size=0}function mw(e,t){for(var r=e.length;r--;)if(Gm(e[r][0],t))return r;return-1}var yLe=Array.prototype,vLe=yLe.splice;function bLe(e){var t=this.__data__,r=mw(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():vLe.call(t,r,1),--this.size,!0}function xLe(e){var t=this.__data__,r=mw(t,e);return r<0?void 0:t[r][1]}function wLe(e){return mw(this.__data__,e)>-1}function _Le(e,t){var r=this.__data__,n=mw(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function va(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}va.prototype.clear=gLe;va.prototype.delete=bLe;va.prototype.get=xLe;va.prototype.has=wLe;va.prototype.set=_Le;var nm=fu(po,"Map");function jLe(){this.size=0,this.__data__={hash:new Jc,map:new(nm||va),string:new Jc}}function kLe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function gw(e,t){var r=e.__data__;return kLe(t)?r[typeof t=="string"?"string":"hash"]:r.map}function NLe(e){var t=gw(this,e).delete(e);return this.size-=t?1:0,t}function SLe(e){return gw(this,e).get(e)}function ELe(e){return gw(this,e).has(e)}function CLe(e,t){var r=gw(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function pu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pu.prototype.clear=jLe;pu.prototype.delete=NLe;pu.prototype.get=SLe;pu.prototype.has=ELe;pu.prototype.set=CLe;function TLe(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var XV=YV(Object.getPrototypeOf,Object),ALe="[object Object]",OLe=Function.prototype,PLe=Object.prototype,QV=OLe.toString,RLe=PLe.hasOwnProperty,ILe=QV.call(Object);function DLe(e){if(!la(e)||Gh(e)!=ALe)return!1;var t=XV(e);if(t===null)return!0;var r=RLe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&QV.call(r)==ILe}function LLe(){this.__data__=new va,this.size=0}function MLe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function zLe(e){return this.__data__.get(e)}function FLe(e){return this.__data__.has(e)}var $Le=200;function ULe(e,t){var r=this.__data__;if(r instanceof va){var n=r.__data__;if(!nm||n.length<$Le-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new pu(n)}return r.set(e,t),this.size=r.size,this}function Qi(e){var t=this.__data__=new va(e);this.size=t.size}Qi.prototype.clear=LLe;Qi.prototype.delete=MLe;Qi.prototype.get=zLe;Qi.prototype.has=FLe;Qi.prototype.set=ULe;var eW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,d5=eW&&typeof module=="object"&&module&&!module.nodeType&&module,qLe=d5&&d5.exports===eW,h5=qLe?po.Buffer:void 0,f5=h5?h5.allocUnsafe:void 0;function tW(e,t){if(t)return e.slice();var r=e.length,n=f5?f5(r):new e.constructor(r);return e.copy(n),n}function BLe(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}function VLe(){return[]}var WLe=Object.prototype,HLe=WLe.propertyIsEnumerable,p5=Object.getOwnPropertySymbols,KLe=p5?function(e){return e==null?[]:(e=Object(e),BLe(p5(e),function(t){return HLe.call(e,t)}))}:VLe;function ZLe(e,t,r){var n=t(e);return Yc(e)?n:TLe(n,r(e))}function BN(e){return ZLe(e,eLe,KLe)}var VN=fu(po,"DataView"),WN=fu(po,"Promise"),HN=fu(po,"Set"),m5="[object Map]",GLe="[object Object]",g5="[object Promise]",y5="[object Set]",v5="[object WeakMap]",b5="[object DataView]",YLe=hu(VN),JLe=hu(nm),XLe=hu(WN),QLe=hu(HN),eMe=hu(UN),ui=Gh;(VN&&ui(new VN(new ArrayBuffer(1)))!=b5||nm&&ui(new nm)!=m5||WN&&ui(WN.resolve())!=g5||HN&&ui(new HN)!=y5||UN&&ui(new UN)!=v5)&&(ui=function(e){var t=Gh(e),r=t==GLe?e.constructor:void 0,n=r?hu(r):"";if(n)switch(n){case YLe:return b5;case JLe:return m5;case XLe:return g5;case QLe:return y5;case eMe:return v5}return t});var tMe=Object.prototype,rMe=tMe.hasOwnProperty;function nMe(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&rMe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var yb=po.Uint8Array;function XT(e){var t=new e.constructor(e.byteLength);return new yb(t).set(new yb(e)),t}function sMe(e,t){var r=XT(e.buffer);return new e.constructor(r,e.byteOffset,e.byteLength)}var iMe=/\w*$/;function oMe(e){var t=new e.constructor(e.source,iMe.exec(e));return t.lastIndex=e.lastIndex,t}var x5=xl?xl.prototype:void 0,w5=x5?x5.valueOf:void 0;function aMe(e){return w5?Object(w5.call(e)):{}}function rW(e,t){var r=t?XT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var lMe="[object Boolean]",cMe="[object Date]",uMe="[object Map]",dMe="[object Number]",hMe="[object RegExp]",fMe="[object Set]",pMe="[object String]",mMe="[object Symbol]",gMe="[object ArrayBuffer]",yMe="[object DataView]",vMe="[object Float32Array]",bMe="[object Float64Array]",xMe="[object Int8Array]",wMe="[object Int16Array]",_Me="[object Int32Array]",jMe="[object Uint8Array]",kMe="[object Uint8ClampedArray]",NMe="[object Uint16Array]",SMe="[object Uint32Array]";function EMe(e,t,r){var n=e.constructor;switch(t){case gMe:return XT(e);case lMe:case cMe:return new n(+e);case yMe:return sMe(e);case vMe:case bMe:case xMe:case wMe:case _Me:case jMe:case kMe:case NMe:case SMe:return rW(e,r);case uMe:return new n;case dMe:case pMe:return new n(e);case hMe:return oMe(e);case fMe:return new n;case mMe:return aMe(e)}}function nW(e){return typeof e.constructor=="function"&&!GT(e)?KDe(XV(e)):{}}var CMe="[object Map]";function TMe(e){return la(e)&&ui(e)==CMe}var _5=dh&&dh.isMap,AMe=_5?YT(_5):TMe,OMe="[object Set]";function PMe(e){return la(e)&&ui(e)==OMe}var j5=dh&&dh.isSet,RMe=j5?YT(j5):PMe,IMe=1,sW="[object Arguments]",DMe="[object Array]",LMe="[object Boolean]",MMe="[object Date]",zMe="[object Error]",iW="[object Function]",FMe="[object GeneratorFunction]",$Me="[object Map]",UMe="[object Number]",oW="[object Object]",qMe="[object RegExp]",BMe="[object Set]",VMe="[object String]",WMe="[object Symbol]",HMe="[object WeakMap]",KMe="[object ArrayBuffer]",ZMe="[object DataView]",GMe="[object Float32Array]",YMe="[object Float64Array]",JMe="[object Int8Array]",XMe="[object Int16Array]",QMe="[object Int32Array]",e6e="[object Uint8Array]",t6e="[object Uint8ClampedArray]",r6e="[object Uint16Array]",n6e="[object Uint32Array]",kt={};kt[sW]=kt[DMe]=kt[KMe]=kt[ZMe]=kt[LMe]=kt[MMe]=kt[GMe]=kt[YMe]=kt[JMe]=kt[XMe]=kt[QMe]=kt[$Me]=kt[UMe]=kt[oW]=kt[qMe]=kt[BMe]=kt[VMe]=kt[WMe]=kt[e6e]=kt[t6e]=kt[r6e]=kt[n6e]=!0;kt[zMe]=kt[iW]=kt[HMe]=!1;function qy(e,t,r,n,s,i){var o,a=t&IMe;if(o!==void 0)return o;if(!zl(e))return e;var l=Yc(e);if(l)o=nMe(e);else{var c=ui(e),u=c==iW||c==FMe;if(tm(e))return tW(e,a);if(c==oW||c==sW||u&&!s)o=u?{}:nW(e);else{if(!kt[c])return s?e:{};o=EMe(e,c,a)}}i||(i=new Qi);var h=i.get(e);if(h)return h;i.set(e,o),RMe(e)?e.forEach(function(y){o.add(qy(y,t,r,y,e,i))}):AMe(e)&&e.forEach(function(y,m){o.set(m,qy(y,t,r,m,e,i))});var f=BN,p=l?void 0:f(e);return n5e(p||e,function(y,m){p&&(m=y,y=e[m]),VV(o,m,qy(y,t,r,m,e,i))}),o}var s6e=1,i6e=4;function Sd(e){return qy(e,s6e|i6e)}var o6e="__lodash_hash_undefined__";function a6e(e){return this.__data__.set(e,o6e),this}function l6e(e){return this.__data__.has(e)}function vb(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new pu;++t<r;)this.add(e[t])}vb.prototype.add=vb.prototype.push=a6e;vb.prototype.has=l6e;function c6e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function u6e(e,t){return e.has(t)}var d6e=1,h6e=2;function aW(e,t,r,n,s,i){var o=r&d6e,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var h=-1,f=!0,p=r&h6e?new vb:void 0;for(i.set(e,t),i.set(t,e);++h<a;){var y=e[h],m=t[h];if(n)var b=o?n(m,y,h,t,e,i):n(y,m,h,e,t,i);if(b!==void 0){if(b)continue;f=!1;break}if(p){if(!c6e(t,function(x,w){if(!u6e(p,w)&&(y===x||s(y,x,r,n,i)))return p.push(w)})){f=!1;break}}else if(!(y===m||s(y,m,r,n,i))){f=!1;break}}return i.delete(e),i.delete(t),f}function f6e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}function p6e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var m6e=1,g6e=2,y6e="[object Boolean]",v6e="[object Date]",b6e="[object Error]",x6e="[object Map]",w6e="[object Number]",_6e="[object RegExp]",j6e="[object Set]",k6e="[object String]",N6e="[object Symbol]",S6e="[object ArrayBuffer]",E6e="[object DataView]",k5=xl?xl.prototype:void 0,K_=k5?k5.valueOf:void 0;function C6e(e,t,r,n,s,i,o){switch(r){case E6e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S6e:return!(e.byteLength!=t.byteLength||!i(new yb(e),new yb(t)));case y6e:case v6e:case w6e:return Gm(+e,+t);case b6e:return e.name==t.name&&e.message==t.message;case _6e:case k6e:return e==t+"";case x6e:var a=f6e;case j6e:var l=n&m6e;if(a||(a=p6e),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=g6e,o.set(e,t);var u=aW(a(e),a(t),n,s,i,o);return o.delete(e),u;case N6e:if(K_)return K_.call(e)==K_.call(t)}return!1}var T6e=1,A6e=Object.prototype,O6e=A6e.hasOwnProperty;function P6e(e,t,r,n,s,i){var o=r&T6e,a=BN(e),l=a.length,c=BN(t),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in t:O6e.call(t,f)))return!1}var p=i.get(e),y=i.get(t);if(p&&y)return p==t&&y==e;var m=!0;i.set(e,t),i.set(t,e);for(var b=o;++h<l;){f=a[h];var x=e[f],w=t[f];if(n)var _=o?n(w,x,f,t,e,i):n(x,w,f,e,t,i);if(!(_===void 0?x===w||s(x,w,r,n,i):_)){m=!1;break}b||(b=f=="constructor")}if(m&&!b){var j=e.constructor,k=t.constructor;j!=k&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof k=="function"&&k instanceof k)&&(m=!1)}return i.delete(e),i.delete(t),m}var R6e=1,N5="[object Arguments]",S5="[object Array]",vy="[object Object]",I6e=Object.prototype,E5=I6e.hasOwnProperty;function D6e(e,t,r,n,s,i){var o=Yc(e),a=Yc(t),l=o?S5:ui(e),c=a?S5:ui(t);l=l==N5?vy:l,c=c==N5?vy:c;var u=l==vy,h=c==vy,f=l==c;if(f&&tm(e)){if(!tm(t))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new Qi),o||JT(e)?aW(e,t,r,n,s,i):C6e(e,t,l,r,n,s,i);if(!(r&R6e)){var p=u&&E5.call(e,"__wrapped__"),y=h&&E5.call(t,"__wrapped__");if(p||y){var m=p?e.value():e,b=y?t.value():t;return i||(i=new Qi),s(m,b,r,n,i)}}return f?(i||(i=new Qi),P6e(e,t,r,n,s,i)):!1}function lW(e,t,r,n,s){return e===t?!0:e==null||t==null||!la(e)&&!la(t)?e!==e&&t!==t:D6e(e,t,r,n,lW,s)}function L6e(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),a=o.length;a--;){var l=o[++s];if(r(i[l],l,i)===!1)break}return t}}var M6e=L6e();function KN(e,t,r){(r!==void 0&&!Gm(e[t],r)||r===void 0&&!(t in e))&&ZT(e,t,r)}function z6e(e){return la(e)&&pw(e)}function ZN(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function F6e(e){return l5e(e,JV(e))}function $6e(e,t,r,n,s,i,o){var a=ZN(e,r),l=ZN(t,r),c=o.get(l);if(c){KN(e,r,c);return}var u=i?i(a,l,r+"",e,t,o):void 0,h=u===void 0;if(h){var f=Yc(l),p=!f&&tm(l),y=!f&&!p&&JT(l);u=l,f||p||y?Yc(a)?u=a:z6e(a)?u=GDe(a):p?(h=!1,u=tW(l,!0)):y?(h=!1,u=rW(l,!0)):u=[]:DLe(l)||qN(l)?(u=a,qN(a)?u=F6e(a):(!zl(a)||KT(a))&&(u=nW(l))):h=!1}h&&(o.set(l,u),s(u,l,n,i,o),o.delete(l)),KN(e,r,u)}function cW(e,t,r,n,s){e!==t&&M6e(t,function(i,o){if(s||(s=new Qi),zl(i))$6e(e,t,o,r,cW,n,s);else{var a=n?n(ZN(e,o),i,o+"",e,t,s):void 0;a===void 0&&(a=i),KN(e,o,a)}},JV)}function Za(e,t){return lW(e,t)}var ul=f5e(function(e,t,r){cW(e,t,r)}),Pe=(e=>(e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY",e))(Pe||{});class oo{constructor(t,r,n={}){this.attrName=t,this.keyName=r;const s=Pe.TYPE&Pe.ATTRIBUTE;this.scope=n.scope!=null?n.scope&Pe.LEVEL|s:Pe.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map(r=>r.name)}add(t,r){return this.canAdd(t,r)?(t.setAttribute(this.keyName,r),!0):!1}canAdd(t,r){return this.whitelist==null?!0:typeof r=="string"?this.whitelist.indexOf(r.replace(/["']/g,""))>-1:this.whitelist.indexOf(r)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const r=t.getAttribute(this.keyName);return this.canAdd(t,r)&&r?r:""}}class Ed extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const uW=class GN{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,r=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(r){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,r)}return null}create(t,r,n){const s=this.query(r);if(s==null)throw new Ed(`Unable to create ${r} blot`);const i=s,o=r instanceof Node||r.nodeType===Node.TEXT_NODE?r:i.create(n),a=new i(t,o,n);return GN.blots.set(a.domNode,a),a}find(t,r=!1){return GN.find(t,r)}query(t,r=Pe.ANY){let n;return typeof t=="string"?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:typeof t=="number"?t&Pe.LEVEL&Pe.BLOCK?n=this.types.block:t&Pe.LEVEL&Pe.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(s=>(n=this.classes[s],!!n)),n=n||this.tags[t.tagName]),n==null?null:"scope"in n&&r&Pe.LEVEL&n.scope&&r&Pe.TYPE&n.scope?n:null}register(...t){return t.map(r=>{const n="blotName"in r,s="attrName"in r;if(!n&&!s)throw new Ed("Invalid definition");if(n&&r.blotName==="abstract")throw new Ed("Cannot register abstract class");const i=n?r.blotName:s?r.attrName:void 0;return this.types[i]=r,s?typeof r.keyName=="string"&&(this.attributes[r.keyName]=r):n&&(r.className&&(this.classes[r.className]=r),r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map(o=>o.toUpperCase()):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach(o=>{(this.tags[o]==null||r.className==null)&&(this.tags[o]=r)}))),r})}};uW.blots=new WeakMap;let hh=uW;function C5(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(r=>r.indexOf(`${t}-`)===0)}class U6e extends oo{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(r=>r.split("-").slice(0,-1).join("-"))}add(t,r){return this.canAdd(t,r)?(this.remove(t),t.classList.add(`${this.keyName}-${r}`),!0):!1}remove(t){C5(t,this.keyName).forEach(r=>{t.classList.remove(r)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const r=(C5(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,r)?r:""}}const Si=U6e;function Z_(e){const t=e.split("-"),r=t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return t[0]+r}class q6e extends oo{static keys(t){return(t.getAttribute("style")||"").split(";").map(r=>r.split(":")[0].trim())}add(t,r){return this.canAdd(t,r)?(t.style[Z_(this.keyName)]=r,!0):!1}remove(t){t.style[Z_(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const r=t.style[Z_(this.keyName)];return this.canAdd(t,r)?r:""}}const Fl=q6e;class B6e{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,r){r?t.add(this.domNode,r)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=hh.find(this.domNode);if(t==null)return;const r=oo.keys(this.domNode),n=Si.keys(this.domNode),s=Fl.keys(this.domNode);r.concat(n).concat(s).forEach(i=>{const o=t.scroll.query(i,Pe.ATTRIBUTE);o instanceof oo&&(this.attributes[o.attrName]=o)})}copy(t){Object.keys(this.attributes).forEach(r=>{const n=this.attributes[r].value(this.domNode);t.format(r,n)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(r=>{this.attributes[r].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,r)=>(t[r]=this.attributes[r].value(this.domNode),t),{})}}const yw=B6e,dW=class{constructor(e,t){this.scroll=e,this.domNode=t,hh.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Ed("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),hh.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,n){const s=this.isolate(e,t);if(this.scroll.query(r,Pe.BLOT)!=null&&n)s.wrap(r,n);else if(this.scroll.query(r,Pe.ATTRIBUTE)!=null){const i=this.scroll.create(this.statics.scope);s.wrap(i),i.format(r,n)}}insertAt(e,t,r){const n=r==null?this.scroll.create("text",t):this.scroll.create(t,r),s=this.split(e);this.parent.insertBefore(n,s||void 0)}isolate(e,t){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Ed(`Cannot wrap ${e}`);return r.appendChild(this),r}};dW.blotName="abstract";let hW=dW;const fW=class extends hW{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};fW.scope=Pe.INLINE_BLOT;let V6e=fW;const un=V6e;class W6e{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const r=t.slice(1);this.append(...r)}}at(t){const r=this.iterator();let n=r();for(;n&&t>0;)t-=1,n=r();return n}contains(t){const r=this.iterator();let n=r();for(;n;){if(n===t)return!0;n=r()}return!1}indexOf(t){const r=this.iterator();let n=r(),s=0;for(;n;){if(n===t)return s;s+=1,n=r()}return-1}insertBefore(t,r){t!=null&&(this.remove(t),t.next=r,r!=null?(t.prev=r.prev,r.prev!=null&&(r.prev.next=t),r.prev=t,r===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let r=0,n=this.head;for(;n!=null;){if(n===t)return r;r+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const r=t;return t!=null&&(t=t.next),r}}find(t,r=!1){const n=this.iterator();let s=n();for(;s;){const i=s.length();if(t<i||r&&t===i&&(s.next==null||s.next.length()!==0))return[s,t];t-=i,s=n()}return[null,0]}forEach(t){const r=this.iterator();let n=r();for(;n;)t(n),n=r()}forEachAt(t,r,n){if(r<=0)return;const[s,i]=this.find(t);let o=t-i;const a=this.iterator(s);let l=a();for(;l&&o<t+r;){const c=l.length();t>o?n(l,t-o,Math.min(r,o+c-t)):n(l,0,Math.min(c,t+r-o)),o+=c,l=a()}}map(t){return this.reduce((r,n)=>(r.push(t(n)),r),[])}reduce(t,r){const n=this.iterator();let s=n();for(;s;)r=t(r,s),s=n();return r}}function T5(e,t){const r=t.find(e);if(r)return r;try{return t.create(e)}catch{const n=t.create(Pe.INLINE);return Array.from(e.childNodes).forEach(s=>{n.domNode.appendChild(s)}),e.parentNode&&e.parentNode.replaceChild(n.domNode,e),n.attach(),n}}const pW=class $a extends hW{constructor(t,r){super(t,r),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,$a.uiClass&&this.uiNode.classList.add($a.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new W6e,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const r=T5(t,this.scroll);this.insertBefore(r,this.children.head||void 0)}catch(r){if(r instanceof Ed)return;throw r}})}deleteAt(t,r){if(t===0&&r===this.length())return this.remove();this.children.forEachAt(t,r,(n,s,i)=>{n.deleteAt(s,i)})}descendant(t,r=0){const[n,s]=this.children.find(r);return t.blotName==null&&t(n)||t.blotName!=null&&n instanceof t?[n,s]:n instanceof $a?n.descendant(t,s):[null,-1]}descendants(t,r=0,n=Number.MAX_VALUE){let s=[],i=n;return this.children.forEachAt(r,n,(o,a,l)=>{(t.blotName==null&&t(o)||t.blotName!=null&&o instanceof t)&&s.push(o),o instanceof $a&&(s=s.concat(o.descendants(t,a,i))),i-=l}),s}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(r=>{t||this.statics.allowedChildren.some(n=>r instanceof n)||(r.statics.scope===Pe.BLOCK_BLOT?(r.next!=null&&this.splitAfter(r),r.prev!=null&&this.splitAfter(r.prev),r.parent.unwrap(),t=!0):r instanceof $a?r.unwrap():r.remove())})}formatAt(t,r,n,s){this.children.forEachAt(t,r,(i,o,a)=>{i.formatAt(o,a,n,s)})}insertAt(t,r,n){const[s,i]=this.children.find(t);if(s)s.insertAt(i,r,n);else{const o=n==null?this.scroll.create("text",r):this.scroll.create(r,n);this.appendChild(o)}}insertBefore(t,r){t.parent!=null&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,r||null),t.parent=this,r!=null&&(n=r.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce((t,r)=>t+r.length(),0)}moveChildren(t,r){this.children.forEach(n=>{t.insertBefore(n,r)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const r=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(r)}else this.remove()}path(t,r=!1){const[n,s]=this.children.find(t,r),i=[[this,t]];return n instanceof $a?i.concat(n.path(s,r)):(n!=null&&i.push([n,s]),i)}removeChild(t){this.children.remove(t)}replaceWith(t,r){const n=typeof t=="string"?this.scroll.create(t,r):t;return n instanceof $a&&this.moveChildren(n),super.replaceWith(n)}split(t,r=!1){if(!r){if(t===0)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(s,i,o)=>{const a=s.split(i,r);a!=null&&n.appendChild(a)}),n}splitAfter(t){const r=this.clone();for(;t.next!=null;)r.appendChild(t.next);return this.parent&&this.parent.insertBefore(r,this.next||void 0),r}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,r){const n=[],s=[];t.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(n.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(i);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),n.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,o)=>i===o?0:i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let o=null;i.nextSibling!=null&&(o=this.scroll.find(i.nextSibling));const a=T5(i,this.scroll);(a.next!==o||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};pW.uiClass="";let H6e=pW;const gi=H6e;function K6e(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}const Ku=class Zu extends gi{static create(t){return super.create(t)}static formats(t,r){const n=r.query(Zu.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,r){super(t,r),this.attributes=new yw(this.domNode)}format(t,r){if(t===this.statics.blotName&&!r)this.children.forEach(n=>{n instanceof Zu||(n=n.wrap(Zu.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{const n=this.scroll.query(t,Pe.INLINE);if(n==null)return;n instanceof oo?this.attributes.attribute(n,r):r&&(t!==this.statics.blotName||this.formats()[t]!==r)&&this.replaceWith(t,r)}}formats(){const t=this.attributes.values(),r=this.statics.formats(this.domNode,this.scroll);return r!=null&&(t[this.statics.blotName]=r),t}formatAt(t,r,n,s){this.formats()[n]!=null||this.scroll.query(n,Pe.ATTRIBUTE)?this.isolate(t,r).format(n,s):super.formatAt(t,r,n,s)}optimize(t){super.optimize(t);const r=this.formats();if(Object.keys(r).length===0)return this.unwrap();const n=this.next;n instanceof Zu&&n.prev===this&&K6e(r,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,r){const n=super.replaceWith(t,r);return this.attributes.copy(n),n}update(t,r){super.update(t,r),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(t,r){const n=super.wrap(t,r);return n instanceof Zu&&this.attributes.move(n),n}};Ku.allowedChildren=[Ku,un],Ku.blotName="inline",Ku.scope=Pe.INLINE_BLOT,Ku.tagName="SPAN";let Z6e=Ku;const QT=Z6e,Gu=class YN extends gi{static create(t){return super.create(t)}static formats(t,r){const n=r.query(YN.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,r){super(t,r),this.attributes=new yw(this.domNode)}format(t,r){const n=this.scroll.query(t,Pe.BLOCK);n!=null&&(n instanceof oo?this.attributes.attribute(n,r):t===this.statics.blotName&&!r?this.replaceWith(YN.blotName):r&&(t!==this.statics.blotName||this.formats()[t]!==r)&&this.replaceWith(t,r))}formats(){const t=this.attributes.values(),r=this.statics.formats(this.domNode,this.scroll);return r!=null&&(t[this.statics.blotName]=r),t}formatAt(t,r,n,s){this.scroll.query(n,Pe.BLOCK)!=null?this.format(n,s):super.formatAt(t,r,n,s)}insertAt(t,r,n){if(n==null||this.scroll.query(r,Pe.INLINE)!=null)super.insertAt(t,r,n);else{const s=this.split(t);if(s!=null){const i=this.scroll.create(r,n);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,r){const n=super.replaceWith(t,r);return this.attributes.copy(n),n}update(t,r){super.update(t,r),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};Gu.blotName="block",Gu.scope=Pe.BLOCK_BLOT,Gu.tagName="P",Gu.allowedChildren=[QT,Gu,un];let G6e=Gu;const sm=G6e,JN=class extends gi{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,n){super.formatAt(e,t,r,n),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};JN.blotName="container",JN.scope=Pe.BLOCK_BLOT;let Y6e=JN;const vw=Y6e;class J6e extends un{static formats(t,r){}format(t,r){super.formatAt(0,this.length(),t,r)}formatAt(t,r,n,s){t===0&&r===this.length()?this.format(n,s):super.formatAt(t,r,n,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const us=J6e,X6e={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Q6e=100,Yu=class extends gi{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,X6e),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=Pe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,n){this.update(),super.formatAt(e,t,r,n)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let n=Array.from(this.observer.takeRecords());for(;n.length>0;)e.push(n.pop());const s=(a,l=!0)=>{a==null||a===this||a.domNode.parentNode!=null&&(r.has(a.domNode)||r.set(a.domNode,[]),l&&s(a.parent))},i=a=>{r.has(a.domNode)&&(a instanceof gi&&a.children.forEach(i),r.delete(a.domNode),a.optimize(t))};let o=e;for(let a=0;o.length>0;a+=1){if(a>=Q6e)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(l=>{const c=this.find(l.target,!0);c!=null&&(c.domNode===l.target&&(l.type==="childList"?(s(this.find(l.previousSibling,!1)),Array.from(l.addedNodes).forEach(u=>{const h=this.find(u,!1);s(h,!1),h instanceof gi&&h.children.forEach(f=>{s(f,!1)})})):l.type==="attributes"&&s(c.prev)),s(c))}),this.children.forEach(i),o=Array.from(this.observer.takeRecords()),n=o.slice();n.length>0;)e.push(n.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(n=>{const s=this.find(n.target,!0);return s==null?null:r.has(s.domNode)?(r.get(s.domNode).push(n),null):(r.set(s.domNode,[n]),s)}).forEach(n=>{n!=null&&n!==this&&r.has(n.domNode)&&n.update(r.get(n.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};Yu.blotName="scroll",Yu.defaultChild=sm,Yu.allowedChildren=[sm,vw],Yu.scope=Pe.BLOCK_BLOT,Yu.tagName="DIV";let eze=Yu;const eA=eze,XN=class mW extends un{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,r){super(t,r),this.text=this.statics.value(this.domNode)}deleteAt(t,r){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+r)}index(t,r){return this.domNode===t?r:-1}insertAt(t,r,n){n==null?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,r,n)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof mW&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,r=!1){return[this.domNode,t]}split(t,r=!1){if(!r){if(t===0)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,r){t.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};XN.blotName="text",XN.scope=Pe.INLINE_BLOT;let tze=XN;const bb=tze,rze=Object.freeze(Object.defineProperty({__proto__:null,Attributor:oo,AttributorStore:yw,BlockBlot:sm,ClassAttributor:Si,ContainerBlot:vw,EmbedBlot:us,InlineBlot:QT,LeafBlot:un,ParentBlot:gi,Registry:hh,Scope:Pe,ScrollBlot:eA,StyleAttributor:Fl,TextBlot:bb},Symbol.toStringTag,{value:"Module"}));var QN={exports:{}},ss=-1,Cn=1,Or=0;function im(e,t,r,n,s){if(e===t)return e?[[Or,e]]:[];if(r!=null){var i=dze(e,t,r);if(i)return i}var o=tA(e,t),a=e.substring(0,o);e=e.substring(o),t=t.substring(o),o=bw(e,t);var l=e.substring(e.length-o);e=e.substring(0,e.length-o),t=t.substring(0,t.length-o);var c=nze(e,t);return a&&c.unshift([Or,a]),l&&c.push([Or,l]),rA(c,s),n&&oze(c),c}function nze(e,t){var r;if(!e)return[[Cn,t]];if(!t)return[[ss,e]];var n=e.length>t.length?e:t,s=e.length>t.length?t:e,i=n.indexOf(s);if(i!==-1)return r=[[Cn,n.substring(0,i)],[Or,s],[Cn,n.substring(i+s.length)]],e.length>t.length&&(r[0][0]=r[2][0]=ss),r;if(s.length===1)return[[ss,e],[Cn,t]];var o=ize(e,t);if(o){var a=o[0],l=o[1],c=o[2],u=o[3],h=o[4],f=im(a,c),p=im(l,u);return f.concat([[Or,h]],p)}return sze(e,t)}function sze(e,t){for(var r=e.length,n=t.length,s=Math.ceil((r+n)/2),i=s,o=2*s,a=new Array(o),l=new Array(o),c=0;c<o;c++)a[c]=-1,l[c]=-1;a[i+1]=0,l[i+1]=0;for(var u=r-n,h=u%2!==0,f=0,p=0,y=0,m=0,b=0;b<s;b++){for(var x=-b+f;x<=b-p;x+=2){var w=i+x,_;x===-b||x!==b&&a[w-1]<a[w+1]?_=a[w+1]:_=a[w-1]+1;for(var j=_-x;_<r&&j<n&&e.charAt(_)===t.charAt(j);)_++,j++;if(a[w]=_,_>r)p+=2;else if(j>n)f+=2;else if(h){var k=i+u-x;if(k>=0&&k<o&&l[k]!==-1){var S=r-l[k];if(_>=S)return A5(e,t,_,j)}}}for(var C=-b+y;C<=b-m;C+=2){var k=i+C,S;C===-b||C!==b&&l[k-1]<l[k+1]?S=l[k+1]:S=l[k-1]+1;for(var E=S-C;S<r&&E<n&&e.charAt(r-S-1)===t.charAt(n-E-1);)S++,E++;if(l[k]=S,S>r)m+=2;else if(E>n)y+=2;else if(!h){var w=i+u-C;if(w>=0&&w<o&&a[w]!==-1){var _=a[w],j=i+_-w;if(S=r-S,_>=S)return A5(e,t,_,j)}}}}return[[ss,e],[Cn,t]]}function A5(e,t,r,n){var s=e.substring(0,r),i=t.substring(0,n),o=e.substring(r),a=t.substring(n),l=im(s,i),c=im(o,a);return l.concat(c)}function tA(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,i=0;r<s;)e.substring(i,s)==t.substring(i,s)?(r=s,i=r):n=s,s=Math.floor((n-r)/2+r);return gW(e.charCodeAt(s-1))&&s--,s}function O5(e,t){var r=e.length,n=t.length;if(r==0||n==0)return 0;r>n?e=e.substring(r-n):r<n&&(t=t.substring(0,r));var s=Math.min(r,n);if(e==t)return s;for(var i=0,o=1;;){var a=e.substring(s-o),l=t.indexOf(a);if(l==-1)return i;o+=l,(l==0||e.substring(s-o)==t.substring(0,o))&&(i=o,o++)}}function bw(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,i=0;r<s;)e.substring(e.length-s,e.length-i)==t.substring(t.length-s,t.length-i)?(r=s,i=r):n=s,s=Math.floor((n-r)/2+r);return yW(e.charCodeAt(e.length-s))&&s--,s}function ize(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||n.length*2<r.length)return null;function s(p,y,m){for(var b=p.substring(m,m+Math.floor(p.length/4)),x=-1,w="",_,j,k,S;(x=y.indexOf(b,x+1))!==-1;){var C=tA(p.substring(m),y.substring(x)),E=bw(p.substring(0,m),y.substring(0,x));w.length<E+C&&(w=y.substring(x-E,x)+y.substring(x,x+C),_=p.substring(0,m-E),j=p.substring(m+C),k=y.substring(0,x-E),S=y.substring(x+C))}return w.length*2>=p.length?[_,j,k,S,w]:null}var i=s(r,n,Math.ceil(r.length/4)),o=s(r,n,Math.ceil(r.length/2)),a;if(!i&&!o)return null;o?i?a=i[4].length>o[4].length?i:o:a=o:a=i;var l,c,u,h;e.length>t.length?(l=a[0],c=a[1],u=a[2],h=a[3]):(u=a[0],h=a[1],l=a[2],c=a[3]);var f=a[4];return[l,c,u,h,f]}function oze(e){for(var t=!1,r=[],n=0,s=null,i=0,o=0,a=0,l=0,c=0;i<e.length;)e[i][0]==Or?(r[n++]=i,o=l,a=c,l=0,c=0,s=e[i][1]):(e[i][0]==Cn?l+=e[i][1].length:c+=e[i][1].length,s&&s.length<=Math.max(o,a)&&s.length<=Math.max(l,c)&&(e.splice(r[n-1],0,[ss,s]),e[r[n-1]+1][0]=Cn,n--,n--,i=n>0?r[n-1]:-1,o=0,a=0,l=0,c=0,s=null,t=!0)),i++;for(t&&rA(e),cze(e),i=1;i<e.length;){if(e[i-1][0]==ss&&e[i][0]==Cn){var u=e[i-1][1],h=e[i][1],f=O5(u,h),p=O5(h,u);f>=p?(f>=u.length/2||f>=h.length/2)&&(e.splice(i,0,[Or,h.substring(0,f)]),e[i-1][1]=u.substring(0,u.length-f),e[i+1][1]=h.substring(f),i++):(p>=u.length/2||p>=h.length/2)&&(e.splice(i,0,[Or,u.substring(0,p)]),e[i-1][0]=Cn,e[i-1][1]=h.substring(0,h.length-p),e[i+1][0]=ss,e[i+1][1]=u.substring(p),i++),i++}i++}}var P5=/[^a-zA-Z0-9]/,R5=/\s/,I5=/[\r\n]/,aze=/\n\r?\n$/,lze=/^\r?\n\r?\n/;function cze(e){function t(p,y){if(!p||!y)return 6;var m=p.charAt(p.length-1),b=y.charAt(0),x=m.match(P5),w=b.match(P5),_=x&&m.match(R5),j=w&&b.match(R5),k=_&&m.match(I5),S=j&&b.match(I5),C=k&&p.match(aze),E=S&&y.match(lze);return C||E?5:k||S?4:x&&!_&&j?3:_||j?2:x||w?1:0}for(var r=1;r<e.length-1;){if(e[r-1][0]==Or&&e[r+1][0]==Or){var n=e[r-1][1],s=e[r][1],i=e[r+1][1],o=bw(n,s);if(o){var a=s.substring(s.length-o);n=n.substring(0,n.length-o),s=a+s.substring(0,s.length-o),i=a+i}for(var l=n,c=s,u=i,h=t(n,s)+t(s,i);s.charAt(0)===i.charAt(0);){n+=s.charAt(0),s=s.substring(1)+i.charAt(0),i=i.substring(1);var f=t(n,s)+t(s,i);f>=h&&(h=f,l=n,c=s,u=i)}e[r-1][1]!=l&&(l?e[r-1][1]=l:(e.splice(r-1,1),r--),e[r][1]=c,u?e[r+1][1]=u:(e.splice(r+1,1),r--))}r++}}function rA(e,t){e.push([Or,""]);for(var r=0,n=0,s=0,i="",o="",a;r<e.length;){if(r<e.length-1&&!e[r][1]){e.splice(r,1);continue}switch(e[r][0]){case Cn:s++,o+=e[r][1],r++;break;case ss:n++,i+=e[r][1],r++;break;case Or:var l=r-s-n-1;if(t){if(l>=0&&bW(e[l][1])){var c=e[l][1].slice(-1);if(e[l][1]=e[l][1].slice(0,-1),i=c+i,o=c+o,!e[l][1]){e.splice(l,1),r--;var u=l-1;e[u]&&e[u][0]===Cn&&(s++,o=e[u][1]+o,u--),e[u]&&e[u][0]===ss&&(n++,i=e[u][1]+i,u--),l=u}}if(vW(e[r][1])){var c=e[r][1].charAt(0);e[r][1]=e[r][1].slice(1),i+=c,o+=c}}if(r<e.length-1&&!e[r][1]){e.splice(r,1);break}if(i.length>0||o.length>0){i.length>0&&o.length>0&&(a=tA(o,i),a!==0&&(l>=0?e[l][1]+=o.substring(0,a):(e.splice(0,0,[Or,o.substring(0,a)]),r++),o=o.substring(a),i=i.substring(a)),a=bw(o,i),a!==0&&(e[r][1]=o.substring(o.length-a)+e[r][1],o=o.substring(0,o.length-a),i=i.substring(0,i.length-a)));var h=s+n;i.length===0&&o.length===0?(e.splice(r-h,h),r=r-h):i.length===0?(e.splice(r-h,h,[Cn,o]),r=r-h+1):o.length===0?(e.splice(r-h,h,[ss,i]),r=r-h+1):(e.splice(r-h,h,[ss,i],[Cn,o]),r=r-h+2)}r!==0&&e[r-1][0]===Or?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,s=0,n=0,i="",o="";break}}e[e.length-1][1]===""&&e.pop();var f=!1;for(r=1;r<e.length-1;)e[r-1][0]===Or&&e[r+1][0]===Or&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)===e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),f=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),f=!0)),r++;f&&rA(e,t)}function gW(e){return e>=55296&&e<=56319}function yW(e){return e>=56320&&e<=57343}function vW(e){return yW(e.charCodeAt(0))}function bW(e){return gW(e.charCodeAt(e.length-1))}function uze(e){for(var t=[],r=0;r<e.length;r++)e[r][1].length>0&&t.push(e[r]);return t}function G_(e,t,r,n){return bW(e)||vW(n)?null:uze([[Or,e],[ss,t],[Cn,r],[Or,n]])}function dze(e,t,r){var n=typeof r=="number"?{index:r,length:0}:r.oldRange,s=typeof r=="number"?null:r.newRange,i=e.length,o=t.length;if(n.length===0&&(s===null||s.length===0)){var a=n.index,l=e.slice(0,a),c=e.slice(a),u=s?s.index:null;e:{var h=a+o-i;if(u!==null&&u!==h||h<0||h>o)break e;var f=t.slice(0,h),p=t.slice(h);if(p!==c)break e;var y=Math.min(a,h),m=l.slice(0,y),b=f.slice(0,y);if(m!==b)break e;var x=l.slice(y),w=f.slice(y);return G_(m,x,w,c)}e:{if(u!==null&&u!==a)break e;var _=a,f=t.slice(0,_),p=t.slice(_);if(f!==l)break e;var j=Math.min(i-_,o-_),k=c.slice(c.length-j),S=p.slice(p.length-j);if(k!==S)break e;var x=c.slice(0,c.length-j),w=p.slice(0,p.length-j);return G_(l,x,w,k)}}if(n.length>0&&s&&s.length===0)e:{var m=e.slice(0,n.index),k=e.slice(n.index+n.length),y=m.length,j=k.length;if(o<y+j)break e;var b=t.slice(0,y),S=t.slice(o-j);if(m!==b||k!==S)break e;var x=e.slice(y,i-j),w=t.slice(y,o-j);return G_(m,x,w,k)}return null}function xw(e,t,r,n){return im(e,t,r,n,!0)}xw.INSERT=Cn;xw.DELETE=ss;xw.EQUAL=Or;var hze=xw,xb={exports:{}};xb.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",h="[object GeneratorFunction]",f="[object Map]",p="[object Number]",y="[object Object]",m="[object Promise]",b="[object RegExp]",x="[object Set]",w="[object String]",_="[object Symbol]",j="[object WeakMap]",k="[object ArrayBuffer]",S="[object DataView]",C="[object Float32Array]",E="[object Float64Array]",T="[object Int8Array]",R="[object Int16Array]",O="[object Int32Array]",I="[object Uint8Array]",P="[object Uint8ClampedArray]",D="[object Uint16Array]",L="[object Uint32Array]",B=/[\\^$.*+?()[\]{}|]/g,q=/\w*$/,K=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,$={};$[i]=$[o]=$[k]=$[S]=$[a]=$[l]=$[C]=$[E]=$[T]=$[R]=$[O]=$[f]=$[p]=$[y]=$[b]=$[x]=$[w]=$[_]=$[I]=$[P]=$[D]=$[L]=!0,$[c]=$[u]=$[j]=!1;var J=typeof yr=="object"&&yr&&yr.Object===Object&&yr,te=typeof self=="object"&&self&&self.Object===Object&&self,be=J||te||Function("return this")(),Z=t&&!t.nodeType&&t,G=Z&&!0&&e&&!e.nodeType&&e,fe=G&&G.exports===Z;function pe(N,A){return N.set(A[0],A[1]),N}function ke(N,A){return N.add(A),N}function W(N,A){for(var z=-1,ee=N?N.length:0;++z<ee&&A(N[z],z,N)!==!1;);return N}function X(N,A){for(var z=-1,ee=A.length,We=N.length;++z<ee;)N[We+z]=A[z];return N}function ae(N,A,z,ee){for(var We=-1,ze=N?N.length:0;++We<ze;)z=A(z,N[We],We,N);return z}function U(N,A){for(var z=-1,ee=Array(N);++z<N;)ee[z]=A(z);return ee}function Se(N,A){return N==null?void 0:N[A]}function Re(N){var A=!1;if(N!=null&&typeof N.toString!="function")try{A=!!(N+"")}catch{}return A}function Qe(N){var A=-1,z=Array(N.size);return N.forEach(function(ee,We){z[++A]=[We,ee]}),z}function Xe(N,A){return function(z){return N(A(z))}}function pt(N){var A=-1,z=Array(N.size);return N.forEach(function(ee){z[++A]=ee}),z}var Xt=Array.prototype,M=Function.prototype,V=Object.prototype,Q=be["__core-js_shared__"],ge=function(){var N=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),he=M.toString,ce=V.hasOwnProperty,_e=V.toString,rt=RegExp("^"+he.call(ce).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=fe?be.Buffer:void 0,bt=be.Symbol,Qr=be.Uint8Array,Vt=Xe(Object.getPrototypeOf,Object),Ws=Object.create,Ai=V.propertyIsEnumerable,mo=Xt.splice,Oi=Object.getOwnPropertySymbols,Pi=Be?Be.isBuffer:void 0,go=Xe(Object.keys,Object),en=Ys(be,"DataView"),ds=Ys(be,"Map"),gn=Ys(be,"Promise"),Hs=Ys(be,"Set"),Bl=Ys(be,"WeakMap"),Ks=Ys(Object,"create"),Vl=yn(en),Zs=yn(ds),Wl=yn(gn),yo=yn(Hs),Hl=yn(Bl),hs=bt?bt.prototype:void 0,vu=hs?hs.valueOf:void 0;function Gs(N){var A=-1,z=N?N.length:0;for(this.clear();++A<z;){var ee=N[A];this.set(ee[0],ee[1])}}function tf(){this.__data__=Ks?Ks(null):{}}function rf(N){return this.has(N)&&delete this.__data__[N]}function wa(N){var A=this.__data__;if(Ks){var z=A[N];return z===n?void 0:z}return ce.call(A,N)?A[N]:void 0}function _a(N){var A=this.__data__;return Ks?A[N]!==void 0:ce.call(A,N)}function Kl(N,A){var z=this.__data__;return z[N]=Ks&&A===void 0?n:A,this}Gs.prototype.clear=tf,Gs.prototype.delete=rf,Gs.prototype.get=wa,Gs.prototype.has=_a,Gs.prototype.set=Kl;function ne(N){var A=-1,z=N?N.length:0;for(this.clear();++A<z;){var ee=N[A];this.set(ee[0],ee[1])}}function De(){this.__data__=[]}function nt(N){var A=this.__data__,z=xu(A,N);if(z<0)return!1;var ee=A.length-1;return z==ee?A.pop():mo.call(A,z,1),!0}function fr(N){var A=this.__data__,z=xu(A,N);return z<0?void 0:A[z][1]}function Pn(N){return xu(this.__data__,N)>-1}function Rn(N,A){var z=this.__data__,ee=xu(z,N);return ee<0?z.push([N,A]):z[ee][1]=A,this}ne.prototype.clear=De,ne.prototype.delete=nt,ne.prototype.get=fr,ne.prototype.has=Pn,ne.prototype.set=Rn;function Dt(N){var A=-1,z=N?N.length:0;for(this.clear();++A<z;){var ee=N[A];this.set(ee[0],ee[1])}}function Uw(){this.__data__={hash:new Gs,map:new(ds||ne),string:new Gs}}function qw(N){return Gl(this,N).delete(N)}function Bw(N){return Gl(this,N).get(N)}function Vw(N){return Gl(this,N).has(N)}function Ww(N,A){return Gl(this,N).set(N,A),this}Dt.prototype.clear=Uw,Dt.prototype.delete=qw,Dt.prototype.get=Bw,Dt.prototype.has=Vw,Dt.prototype.set=Ww;function In(N){this.__data__=new ne(N)}function Hw(){this.__data__=new ne}function Kw(N){return this.__data__.delete(N)}function Zw(N){return this.__data__.get(N)}function Gw(N){return this.__data__.has(N)}function Yw(N,A){var z=this.__data__;if(z instanceof ne){var ee=z.__data__;if(!ds||ee.length<r-1)return ee.push([N,A]),this;z=this.__data__=new Dt(ee)}return z.set(N,A),this}In.prototype.clear=Hw,In.prototype.delete=Kw,In.prototype.get=Zw,In.prototype.has=Gw,In.prototype.set=Yw;function bu(N,A){var z=af(N)||_u(N)?U(N.length,String):[],ee=z.length,We=!!ee;for(var ze in N)ce.call(N,ze)&&!(We&&(ze=="length"||u0(ze,ee)))&&z.push(ze);return z}function cg(N,A,z){var ee=N[A];(!(ce.call(N,A)&&pg(ee,z))||z===void 0&&!(A in N))&&(N[A]=z)}function xu(N,A){for(var z=N.length;z--;)if(pg(N[z][0],A))return z;return-1}function Ri(N,A){return N&&of(A,cf(A),N)}function nf(N,A,z,ee,We,ze,lt){var it;if(ee&&(it=ze?ee(N,We,ze,lt):ee(N)),it!==void 0)return it;if(!Di(N))return N;var pr=af(N);if(pr){if(it=l0(N),!A)return i0(N,it)}else{var ht=bo(N),tn=ht==u||ht==h;if(mg(N))return wu(N,A);if(ht==y||ht==i||tn&&!ze){if(Re(N))return ze?N:{};if(it=Ii(tn?{}:N),!A)return o0(N,Ri(it,N))}else{if(!$[ht])return ze?N:{};it=c0(N,ht,nf,A)}}lt||(lt=new In);var Dn=lt.get(N);if(Dn)return Dn;if(lt.set(N,it),!pr)var jr=z?a0(N):cf(N);return W(jr||N,function(rn,Kr){jr&&(Kr=rn,rn=N[Kr]),cg(it,Kr,nf(rn,A,z,ee,Kr,N,lt))}),it}function Jw(N){return Di(N)?Ws(N):{}}function Xw(N,A,z){var ee=A(N);return af(N)?ee:X(ee,z(N))}function Qw(N){return _e.call(N)}function e0(N){if(!Di(N)||h0(N))return!1;var A=lf(N)||Re(N)?rt:K;return A.test(yn(N))}function t0(N){if(!hg(N))return go(N);var A=[];for(var z in Object(N))ce.call(N,z)&&z!="constructor"&&A.push(z);return A}function wu(N,A){if(A)return N.slice();var z=new N.constructor(N.length);return N.copy(z),z}function sf(N){var A=new N.constructor(N.byteLength);return new Qr(A).set(new Qr(N)),A}function Zl(N,A){var z=A?sf(N.buffer):N.buffer;return new N.constructor(z,N.byteOffset,N.byteLength)}function ug(N,A,z){var ee=A?z(Qe(N),!0):Qe(N);return ae(ee,pe,new N.constructor)}function dg(N){var A=new N.constructor(N.source,q.exec(N));return A.lastIndex=N.lastIndex,A}function r0(N,A,z){var ee=A?z(pt(N),!0):pt(N);return ae(ee,ke,new N.constructor)}function n0(N){return vu?Object(vu.call(N)):{}}function s0(N,A){var z=A?sf(N.buffer):N.buffer;return new N.constructor(z,N.byteOffset,N.length)}function i0(N,A){var z=-1,ee=N.length;for(A||(A=Array(ee));++z<ee;)A[z]=N[z];return A}function of(N,A,z,ee){z||(z={});for(var We=-1,ze=A.length;++We<ze;){var lt=A[We],it=void 0;cg(z,lt,it===void 0?N[lt]:it)}return z}function o0(N,A){return of(N,vo(N),A)}function a0(N){return Xw(N,cf,vo)}function Gl(N,A){var z=N.__data__;return d0(A)?z[typeof A=="string"?"string":"hash"]:z.map}function Ys(N,A){var z=Se(N,A);return e0(z)?z:void 0}var vo=Oi?Xe(Oi,Object):p0,bo=Qw;(en&&bo(new en(new ArrayBuffer(1)))!=S||ds&&bo(new ds)!=f||gn&&bo(gn.resolve())!=m||Hs&&bo(new Hs)!=x||Bl&&bo(new Bl)!=j)&&(bo=function(N){var A=_e.call(N),z=A==y?N.constructor:void 0,ee=z?yn(z):void 0;if(ee)switch(ee){case Vl:return S;case Zs:return f;case Wl:return m;case yo:return x;case Hl:return j}return A});function l0(N){var A=N.length,z=N.constructor(A);return A&&typeof N[0]=="string"&&ce.call(N,"index")&&(z.index=N.index,z.input=N.input),z}function Ii(N){return typeof N.constructor=="function"&&!hg(N)?Jw(Vt(N)):{}}function c0(N,A,z,ee){var We=N.constructor;switch(A){case k:return sf(N);case a:case l:return new We(+N);case S:return Zl(N,ee);case C:case E:case T:case R:case O:case I:case P:case D:case L:return s0(N,ee);case f:return ug(N,ee,z);case p:case w:return new We(N);case b:return dg(N);case x:return r0(N,ee,z);case _:return n0(N)}}function u0(N,A){return A=A??s,!!A&&(typeof N=="number"||H.test(N))&&N>-1&&N%1==0&&N<A}function d0(N){var A=typeof N;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?N!=="__proto__":N===null}function h0(N){return!!ge&&ge in N}function hg(N){var A=N&&N.constructor,z=typeof A=="function"&&A.prototype||V;return N===z}function yn(N){if(N!=null){try{return he.call(N)}catch{}try{return N+""}catch{}}return""}function fg(N){return nf(N,!0,!0)}function pg(N,A){return N===A||N!==N&&A!==A}function _u(N){return f0(N)&&ce.call(N,"callee")&&(!Ai.call(N,"callee")||_e.call(N)==i)}var af=Array.isArray;function ju(N){return N!=null&&gg(N.length)&&!lf(N)}function f0(N){return yg(N)&&ju(N)}var mg=Pi||m0;function lf(N){var A=Di(N)?_e.call(N):"";return A==u||A==h}function gg(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=s}function Di(N){var A=typeof N;return!!N&&(A=="object"||A=="function")}function yg(N){return!!N&&typeof N=="object"}function cf(N){return ju(N)?bu(N):t0(N)}function p0(){return[]}function m0(){return!1}e.exports=fg})(xb,xb.exports);var xW=xb.exports,wb={exports:{}};wb.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",s=1,i=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",f="[object Error]",p="[object Function]",y="[object GeneratorFunction]",m="[object Map]",b="[object Number]",x="[object Null]",w="[object Object]",_="[object Promise]",j="[object Proxy]",k="[object RegExp]",S="[object Set]",C="[object String]",E="[object Symbol]",T="[object Undefined]",R="[object WeakMap]",O="[object ArrayBuffer]",I="[object DataView]",P="[object Float32Array]",D="[object Float64Array]",L="[object Int8Array]",B="[object Int16Array]",q="[object Int32Array]",K="[object Uint8Array]",H="[object Uint8ClampedArray]",$="[object Uint16Array]",J="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,be=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,G={};G[P]=G[D]=G[L]=G[B]=G[q]=G[K]=G[H]=G[$]=G[J]=!0,G[a]=G[l]=G[O]=G[u]=G[I]=G[h]=G[f]=G[p]=G[m]=G[b]=G[w]=G[k]=G[S]=G[C]=G[R]=!1;var fe=typeof yr=="object"&&yr&&yr.Object===Object&&yr,pe=typeof self=="object"&&self&&self.Object===Object&&self,ke=fe||pe||Function("return this")(),W=t&&!t.nodeType&&t,X=W&&!0&&e&&!e.nodeType&&e,ae=X&&X.exports===W,U=ae&&fe.process,Se=function(){try{return U&&U.binding&&U.binding("util")}catch{}}(),Re=Se&&Se.isTypedArray;function Qe(N,A){for(var z=-1,ee=N==null?0:N.length,We=0,ze=[];++z<ee;){var lt=N[z];A(lt,z,N)&&(ze[We++]=lt)}return ze}function Xe(N,A){for(var z=-1,ee=A.length,We=N.length;++z<ee;)N[We+z]=A[z];return N}function pt(N,A){for(var z=-1,ee=N==null?0:N.length;++z<ee;)if(A(N[z],z,N))return!0;return!1}function Xt(N,A){for(var z=-1,ee=Array(N);++z<N;)ee[z]=A(z);return ee}function M(N){return function(A){return N(A)}}function V(N,A){return N.has(A)}function Q(N,A){return N==null?void 0:N[A]}function ge(N){var A=-1,z=Array(N.size);return N.forEach(function(ee,We){z[++A]=[We,ee]}),z}function he(N,A){return function(z){return N(A(z))}}function ce(N){var A=-1,z=Array(N.size);return N.forEach(function(ee){z[++A]=ee}),z}var _e=Array.prototype,rt=Function.prototype,Be=Object.prototype,bt=ke["__core-js_shared__"],Qr=rt.toString,Vt=Be.hasOwnProperty,Ws=function(){var N=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),Ai=Be.toString,mo=RegExp("^"+Qr.call(Vt).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oi=ae?ke.Buffer:void 0,Pi=ke.Symbol,go=ke.Uint8Array,en=Be.propertyIsEnumerable,ds=_e.splice,gn=Pi?Pi.toStringTag:void 0,Hs=Object.getOwnPropertySymbols,Bl=Oi?Oi.isBuffer:void 0,Ks=he(Object.keys,Object),Vl=vo(ke,"DataView"),Zs=vo(ke,"Map"),Wl=vo(ke,"Promise"),yo=vo(ke,"Set"),Hl=vo(ke,"WeakMap"),hs=vo(Object,"create"),vu=yn(Vl),Gs=yn(Zs),tf=yn(Wl),rf=yn(yo),wa=yn(Hl),_a=Pi?Pi.prototype:void 0,Kl=_a?_a.valueOf:void 0;function ne(N){var A=-1,z=N==null?0:N.length;for(this.clear();++A<z;){var ee=N[A];this.set(ee[0],ee[1])}}function De(){this.__data__=hs?hs(null):{},this.size=0}function nt(N){var A=this.has(N)&&delete this.__data__[N];return this.size-=A?1:0,A}function fr(N){var A=this.__data__;if(hs){var z=A[N];return z===n?void 0:z}return Vt.call(A,N)?A[N]:void 0}function Pn(N){var A=this.__data__;return hs?A[N]!==void 0:Vt.call(A,N)}function Rn(N,A){var z=this.__data__;return this.size+=this.has(N)?0:1,z[N]=hs&&A===void 0?n:A,this}ne.prototype.clear=De,ne.prototype.delete=nt,ne.prototype.get=fr,ne.prototype.has=Pn,ne.prototype.set=Rn;function Dt(N){var A=-1,z=N==null?0:N.length;for(this.clear();++A<z;){var ee=N[A];this.set(ee[0],ee[1])}}function Uw(){this.__data__=[],this.size=0}function qw(N){var A=this.__data__,z=wu(A,N);if(z<0)return!1;var ee=A.length-1;return z==ee?A.pop():ds.call(A,z,1),--this.size,!0}function Bw(N){var A=this.__data__,z=wu(A,N);return z<0?void 0:A[z][1]}function Vw(N){return wu(this.__data__,N)>-1}function Ww(N,A){var z=this.__data__,ee=wu(z,N);return ee<0?(++this.size,z.push([N,A])):z[ee][1]=A,this}Dt.prototype.clear=Uw,Dt.prototype.delete=qw,Dt.prototype.get=Bw,Dt.prototype.has=Vw,Dt.prototype.set=Ww;function In(N){var A=-1,z=N==null?0:N.length;for(this.clear();++A<z;){var ee=N[A];this.set(ee[0],ee[1])}}function Hw(){this.size=0,this.__data__={hash:new ne,map:new(Zs||Dt),string:new ne}}function Kw(N){var A=Ys(this,N).delete(N);return this.size-=A?1:0,A}function Zw(N){return Ys(this,N).get(N)}function Gw(N){return Ys(this,N).has(N)}function Yw(N,A){var z=Ys(this,N),ee=z.size;return z.set(N,A),this.size+=z.size==ee?0:1,this}In.prototype.clear=Hw,In.prototype.delete=Kw,In.prototype.get=Zw,In.prototype.has=Gw,In.prototype.set=Yw;function bu(N){var A=-1,z=N==null?0:N.length;for(this.__data__=new In;++A<z;)this.add(N[A])}function cg(N){return this.__data__.set(N,n),this}function xu(N){return this.__data__.has(N)}bu.prototype.add=bu.prototype.push=cg,bu.prototype.has=xu;function Ri(N){var A=this.__data__=new Dt(N);this.size=A.size}function nf(){this.__data__=new Dt,this.size=0}function Jw(N){var A=this.__data__,z=A.delete(N);return this.size=A.size,z}function Xw(N){return this.__data__.get(N)}function Qw(N){return this.__data__.has(N)}function e0(N,A){var z=this.__data__;if(z instanceof Dt){var ee=z.__data__;if(!Zs||ee.length<r-1)return ee.push([N,A]),this.size=++z.size,this;z=this.__data__=new In(ee)}return z.set(N,A),this.size=z.size,this}Ri.prototype.clear=nf,Ri.prototype.delete=Jw,Ri.prototype.get=Xw,Ri.prototype.has=Qw,Ri.prototype.set=e0;function t0(N,A){var z=_u(N),ee=!z&&pg(N),We=!z&&!ee&&ju(N),ze=!z&&!ee&&!We&&yg(N),lt=z||ee||We||ze,it=lt?Xt(N.length,String):[],pr=it.length;for(var ht in N)Vt.call(N,ht)&&!(lt&&(ht=="length"||We&&(ht=="offset"||ht=="parent")||ze&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||c0(ht,pr)))&&it.push(ht);return it}function wu(N,A){for(var z=N.length;z--;)if(fg(N[z][0],A))return z;return-1}function sf(N,A,z){var ee=A(N);return _u(N)?ee:Xe(ee,z(N))}function Zl(N){return N==null?N===void 0?T:x:gn&&gn in Object(N)?bo(N):hg(N)}function ug(N){return Di(N)&&Zl(N)==a}function dg(N,A,z,ee,We){return N===A?!0:N==null||A==null||!Di(N)&&!Di(A)?N!==N&&A!==A:r0(N,A,z,ee,dg,We)}function r0(N,A,z,ee,We,ze){var lt=_u(N),it=_u(A),pr=lt?l:Ii(N),ht=it?l:Ii(A);pr=pr==a?w:pr,ht=ht==a?w:ht;var tn=pr==w,Dn=ht==w,jr=pr==ht;if(jr&&ju(N)){if(!ju(A))return!1;lt=!0,tn=!1}if(jr&&!tn)return ze||(ze=new Ri),lt||yg(N)?of(N,A,z,ee,We,ze):o0(N,A,pr,z,ee,We,ze);if(!(z&s)){var rn=tn&&Vt.call(N,"__wrapped__"),Kr=Dn&&Vt.call(A,"__wrapped__");if(rn||Kr){var ja=rn?N.value():N,xo=Kr?A.value():A;return ze||(ze=new Ri),We(ja,xo,z,ee,ze)}}return jr?(ze||(ze=new Ri),a0(N,A,z,ee,We,ze)):!1}function n0(N){if(!gg(N)||d0(N))return!1;var A=mg(N)?mo:be;return A.test(yn(N))}function s0(N){return Di(N)&&lf(N.length)&&!!G[Zl(N)]}function i0(N){if(!h0(N))return Ks(N);var A=[];for(var z in Object(N))Vt.call(N,z)&&z!="constructor"&&A.push(z);return A}function of(N,A,z,ee,We,ze){var lt=z&s,it=N.length,pr=A.length;if(it!=pr&&!(lt&&pr>it))return!1;var ht=ze.get(N);if(ht&&ze.get(A))return ht==A;var tn=-1,Dn=!0,jr=z&i?new bu:void 0;for(ze.set(N,A),ze.set(A,N);++tn<it;){var rn=N[tn],Kr=A[tn];if(ee)var ja=lt?ee(Kr,rn,tn,A,N,ze):ee(rn,Kr,tn,N,A,ze);if(ja!==void 0){if(ja)continue;Dn=!1;break}if(jr){if(!pt(A,function(xo,Yl){if(!V(jr,Yl)&&(rn===xo||We(rn,xo,z,ee,ze)))return jr.push(Yl)})){Dn=!1;break}}else if(!(rn===Kr||We(rn,Kr,z,ee,ze))){Dn=!1;break}}return ze.delete(N),ze.delete(A),Dn}function o0(N,A,z,ee,We,ze,lt){switch(z){case I:if(N.byteLength!=A.byteLength||N.byteOffset!=A.byteOffset)return!1;N=N.buffer,A=A.buffer;case O:return!(N.byteLength!=A.byteLength||!ze(new go(N),new go(A)));case u:case h:case b:return fg(+N,+A);case f:return N.name==A.name&&N.message==A.message;case k:case C:return N==A+"";case m:var it=ge;case S:var pr=ee&s;if(it||(it=ce),N.size!=A.size&&!pr)return!1;var ht=lt.get(N);if(ht)return ht==A;ee|=i,lt.set(N,A);var tn=of(it(N),it(A),ee,We,ze,lt);return lt.delete(N),tn;case E:if(Kl)return Kl.call(N)==Kl.call(A)}return!1}function a0(N,A,z,ee,We,ze){var lt=z&s,it=Gl(N),pr=it.length,ht=Gl(A),tn=ht.length;if(pr!=tn&&!lt)return!1;for(var Dn=pr;Dn--;){var jr=it[Dn];if(!(lt?jr in A:Vt.call(A,jr)))return!1}var rn=ze.get(N);if(rn&&ze.get(A))return rn==A;var Kr=!0;ze.set(N,A),ze.set(A,N);for(var ja=lt;++Dn<pr;){jr=it[Dn];var xo=N[jr],Yl=A[jr];if(ee)var WA=lt?ee(Yl,xo,jr,A,N,ze):ee(xo,Yl,jr,N,A,ze);if(!(WA===void 0?xo===Yl||We(xo,Yl,z,ee,ze):WA)){Kr=!1;break}ja||(ja=jr=="constructor")}if(Kr&&!ja){var vg=N.constructor,bg=A.constructor;vg!=bg&&"constructor"in N&&"constructor"in A&&!(typeof vg=="function"&&vg instanceof vg&&typeof bg=="function"&&bg instanceof bg)&&(Kr=!1)}return ze.delete(N),ze.delete(A),Kr}function Gl(N){return sf(N,cf,l0)}function Ys(N,A){var z=N.__data__;return u0(A)?z[typeof A=="string"?"string":"hash"]:z.map}function vo(N,A){var z=Q(N,A);return n0(z)?z:void 0}function bo(N){var A=Vt.call(N,gn),z=N[gn];try{N[gn]=void 0;var ee=!0}catch{}var We=Ai.call(N);return ee&&(A?N[gn]=z:delete N[gn]),We}var l0=Hs?function(N){return N==null?[]:(N=Object(N),Qe(Hs(N),function(A){return en.call(N,A)}))}:p0,Ii=Zl;(Vl&&Ii(new Vl(new ArrayBuffer(1)))!=I||Zs&&Ii(new Zs)!=m||Wl&&Ii(Wl.resolve())!=_||yo&&Ii(new yo)!=S||Hl&&Ii(new Hl)!=R)&&(Ii=function(N){var A=Zl(N),z=A==w?N.constructor:void 0,ee=z?yn(z):"";if(ee)switch(ee){case vu:return I;case Gs:return m;case tf:return _;case rf:return S;case wa:return R}return A});function c0(N,A){return A=A??o,!!A&&(typeof N=="number"||Z.test(N))&&N>-1&&N%1==0&&N<A}function u0(N){var A=typeof N;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?N!=="__proto__":N===null}function d0(N){return!!Ws&&Ws in N}function h0(N){var A=N&&N.constructor,z=typeof A=="function"&&A.prototype||Be;return N===z}function hg(N){return Ai.call(N)}function yn(N){if(N!=null){try{return Qr.call(N)}catch{}try{return N+""}catch{}}return""}function fg(N,A){return N===A||N!==N&&A!==A}var pg=ug(function(){return arguments}())?ug:function(N){return Di(N)&&Vt.call(N,"callee")&&!en.call(N,"callee")},_u=Array.isArray;function af(N){return N!=null&&lf(N.length)&&!mg(N)}var ju=Bl||m0;function f0(N,A){return dg(N,A)}function mg(N){if(!gg(N))return!1;var A=Zl(N);return A==p||A==y||A==c||A==j}function lf(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=o}function gg(N){var A=typeof N;return N!=null&&(A=="object"||A=="function")}function Di(N){return N!=null&&typeof N=="object"}var yg=Re?M(Re):s0;function cf(N){return af(N)?t0(N):i0(N)}function p0(){return[]}function m0(){return!1}e.exports=f0})(wb,wb.exports);var wW=wb.exports,nA={};Object.defineProperty(nA,"__esModule",{value:!0});const fze=xW,pze=wW;var eS;(function(e){function t(i={},o={},a=!1){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});let l=fze(o);a||(l=Object.keys(l).reduce((c,u)=>(l[u]!=null&&(c[u]=l[u]),c),{}));for(const c in i)i[c]!==void 0&&o[c]===void 0&&(l[c]=i[c]);return Object.keys(l).length>0?l:void 0}e.compose=t;function r(i={},o={}){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});const a=Object.keys(i).concat(Object.keys(o)).reduce((l,c)=>(pze(i[c],o[c])||(l[c]=o[c]===void 0?null:o[c]),l),{});return Object.keys(a).length>0?a:void 0}e.diff=r;function n(i={},o={}){i=i||{};const a=Object.keys(o).reduce((l,c)=>(o[c]!==i[c]&&i[c]!==void 0&&(l[c]=o[c]),l),{});return Object.keys(i).reduce((l,c)=>(i[c]!==o[c]&&o[c]===void 0&&(l[c]=null),l),a)}e.invert=n;function s(i,o,a=!1){if(typeof i!="object")return o;if(typeof o!="object")return;if(!a)return o;const l=Object.keys(o).reduce((c,u)=>(i[u]===void 0&&(c[u]=o[u]),c),{});return Object.keys(l).length>0?l:void 0}e.transform=s})(eS||(eS={}));nA.default=eS;var ww={};Object.defineProperty(ww,"__esModule",{value:!0});var tS;(function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t})(tS||(tS={}));ww.default=tS;var sA={};Object.defineProperty(sA,"__esModule",{value:!0});const D5=ww;class mze{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const r=this.ops[this.index];if(r){const n=this.offset,s=D5.default.length(r);if(t>=s-n?(t=s-n,this.index+=1,this.offset=0):this.offset+=t,typeof r.delete=="number")return{delete:t};{const i={};return r.attributes&&(i.attributes=r.attributes),typeof r.retain=="number"?i.retain=t:typeof r.retain=="object"&&r.retain!==null?i.retain=r.retain:typeof r.insert=="string"?i.insert=r.insert.substr(n,t):i.insert=r.insert,i}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?D5.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const t=this.offset,r=this.index,n=this.next(),s=this.ops.slice(this.index);return this.offset=t,this.index=r,[n].concat(s)}}else return[]}}sA.default=mze;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const r=hze,n=xW,s=wW,i=nA;t.AttributeMap=i.default;const o=ww;t.Op=o.default;const a=sA;t.OpIterator=a.default;const l="\0",c=(h,f)=>{if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);const p=Object.keys(h)[0];if(!p||p!==Object.keys(f)[0])throw new Error(`embed types not matched: ${p} != ${Object.keys(f)[0]}`);return[p,h[p],f[p]]};class u{constructor(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]}static registerEmbed(f,p){this.handlers[f]=p}static unregisterEmbed(f){delete this.handlers[f]}static getHandler(f){const p=this.handlers[f];if(!p)throw new Error(`no handlers for embed type "${f}"`);return p}insert(f,p){const y={};return typeof f=="string"&&f.length===0?this:(y.insert=f,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(y.attributes=p),this.push(y))}delete(f){return f<=0?this:this.push({delete:f})}retain(f,p){if(typeof f=="number"&&f<=0)return this;const y={retain:f};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(y.attributes=p),this.push(y)}push(f){let p=this.ops.length,y=this.ops[p-1];if(f=n(f),typeof y=="object"){if(typeof f.delete=="number"&&typeof y.delete=="number")return this.ops[p-1]={delete:y.delete+f.delete},this;if(typeof y.delete=="number"&&f.insert!=null&&(p-=1,y=this.ops[p-1],typeof y!="object"))return this.ops.unshift(f),this;if(s(f.attributes,y.attributes)){if(typeof f.insert=="string"&&typeof y.insert=="string")return this.ops[p-1]={insert:y.insert+f.insert},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof y.retain=="number")return this.ops[p-1]={retain:y.retain+f.retain},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this}}return p===this.ops.length?this.ops.push(f):this.ops.splice(p,0,f),this}chop(){const f=this.ops[this.ops.length-1];return f&&typeof f.retain=="number"&&!f.attributes&&this.ops.pop(),this}filter(f){return this.ops.filter(f)}forEach(f){this.ops.forEach(f)}map(f){return this.ops.map(f)}partition(f){const p=[],y=[];return this.forEach(m=>{(f(m)?p:y).push(m)}),[p,y]}reduce(f,p){return this.ops.reduce(f,p)}changeLength(){return this.reduce((f,p)=>p.insert?f+o.default.length(p):p.delete?f-p.delete:f,0)}length(){return this.reduce((f,p)=>f+o.default.length(p),0)}slice(f=0,p=1/0){const y=[],m=new a.default(this.ops);let b=0;for(;b<p&&m.hasNext();){let x;b<f?x=m.next(f-b):(x=m.next(p-b),y.push(x)),b+=o.default.length(x)}return new u(y)}compose(f){const p=new a.default(this.ops),y=new a.default(f.ops),m=[],b=y.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){let w=b.retain;for(;p.peekType()==="insert"&&p.peekLength()<=w;)w-=p.peekLength(),m.push(p.next());b.retain-w>0&&y.next(b.retain-w)}const x=new u(m);for(;p.hasNext()||y.hasNext();)if(y.peekType()==="insert")x.push(y.next());else if(p.peekType()==="delete")x.push(p.next());else{const w=Math.min(p.peekLength(),y.peekLength()),_=p.next(w),j=y.next(w);if(j.retain){const k={};if(typeof _.retain=="number")k.retain=typeof j.retain=="number"?w:j.retain;else if(typeof j.retain=="number")_.retain==null?k.insert=_.insert:k.retain=_.retain;else{const C=_.retain==null?"insert":"retain",[E,T,R]=c(_[C],j.retain),O=u.getHandler(E);k[C]={[E]:O.compose(T,R,C==="retain")}}const S=i.default.compose(_.attributes,j.attributes,typeof _.retain=="number");if(S&&(k.attributes=S),x.push(k),!y.hasNext()&&s(x.ops[x.ops.length-1],k)){const C=new u(p.rest());return x.concat(C).chop()}}else typeof j.delete=="number"&&(typeof _.retain=="number"||typeof _.retain=="object"&&_.retain!==null)&&x.push(j)}return x.chop()}concat(f){const p=new u(this.ops.slice());return f.ops.length>0&&(p.push(f.ops[0]),p.ops=p.ops.concat(f.ops.slice(1))),p}diff(f,p){if(this.ops===f.ops)return new u;const y=[this,f].map(_=>_.map(j=>{if(j.insert!=null)return typeof j.insert=="string"?j.insert:l;const k=_===f?"on":"with";throw new Error("diff() called "+k+" non-document")}).join("")),m=new u,b=r(y[0],y[1],p,!0),x=new a.default(this.ops),w=new a.default(f.ops);return b.forEach(_=>{let j=_[1].length;for(;j>0;){let k=0;switch(_[0]){case r.INSERT:k=Math.min(w.peekLength(),j),m.push(w.next(k));break;case r.DELETE:k=Math.min(j,x.peekLength()),x.next(k),m.delete(k);break;case r.EQUAL:k=Math.min(x.peekLength(),w.peekLength(),j);const S=x.next(k),C=w.next(k);s(S.insert,C.insert)?m.retain(k,i.default.diff(S.attributes,C.attributes)):m.push(C).delete(k);break}j-=k}}),m.chop()}eachLine(f,p=`
`){const y=new a.default(this.ops);let m=new u,b=0;for(;y.hasNext();){if(y.peekType()!=="insert")return;const x=y.peek(),w=o.default.length(x)-y.peekLength(),_=typeof x.insert=="string"?x.insert.indexOf(p,w)-w:-1;if(_<0)m.push(y.next());else if(_>0)m.push(y.next(_));else{if(f(m,y.next(1).attributes||{},b)===!1)return;b+=1,m=new u}}m.length()>0&&f(m,{},b)}invert(f){const p=new u;return this.reduce((y,m)=>{if(m.insert)p.delete(o.default.length(m));else{if(typeof m.retain=="number"&&m.attributes==null)return p.retain(m.retain),y+m.retain;if(m.delete||typeof m.retain=="number"){const b=m.delete||m.retain;return f.slice(y,y+b).forEach(x=>{m.delete?p.push(x):m.retain&&m.attributes&&p.retain(o.default.length(x),i.default.invert(m.attributes,x.attributes))}),y+b}else if(typeof m.retain=="object"&&m.retain!==null){const b=f.slice(y,y+1),x=new a.default(b.ops).next(),[w,_,j]=c(m.retain,x.insert),k=u.getHandler(w);return p.retain({[w]:k.invert(_,j)},i.default.invert(m.attributes,x.attributes)),y+1}}return y},0),p.chop()}transform(f,p=!1){if(p=!!p,typeof f=="number")return this.transformPosition(f,p);const y=f,m=new a.default(this.ops),b=new a.default(y.ops),x=new u;for(;m.hasNext()||b.hasNext();)if(m.peekType()==="insert"&&(p||b.peekType()!=="insert"))x.retain(o.default.length(m.next()));else if(b.peekType()==="insert")x.push(b.next());else{const w=Math.min(m.peekLength(),b.peekLength()),_=m.next(w),j=b.next(w);if(_.delete)continue;if(j.delete)x.push(j);else{const k=_.retain,S=j.retain;let C=typeof S=="object"&&S!==null?S:w;if(typeof k=="object"&&k!==null&&typeof S=="object"&&S!==null){const E=Object.keys(k)[0];if(E===Object.keys(S)[0]){const T=u.getHandler(E);T&&(C={[E]:T.transform(k[E],S[E],p)})}}x.retain(C,i.default.transform(_.attributes,j.attributes,p))}}return x.chop()}transformPosition(f,p=!1){p=!!p;const y=new a.default(this.ops);let m=0;for(;y.hasNext()&&m<=f;){const b=y.peekLength(),x=y.peekType();if(y.next(),x==="delete"){f-=Math.min(b,f-m);continue}else x==="insert"&&(m<f||!p)&&(f+=b);m+=b}return f}}u.Op=o.default,u.OpIterator=a.default,u.AttributeMap=i.default,u.handlers={},t.default=u,e.exports=u,e.exports.default=u})(QN,QN.exports);var Cs=QN.exports;const Oe=ji(Cs);class Ei extends us{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Ei.blotName="break";Ei.tagName="BR";let wi=class extends bb{};const gze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _w(e){return e.replace(/[&<>"']/g,t=>gze[t])}const By=class Ju extends QT{static compare(t,r){const n=Ju.order.indexOf(t),s=Ju.order.indexOf(r);return n>=0||s>=0?n-s:t===r?0:t<r?-1:1}formatAt(t,r,n,s){if(Ju.compare(this.statics.blotName,n)<0&&this.scroll.query(n,Pe.BLOT)){const i=this.isolate(t,r);s&&i.wrap(n,s)}else super.formatAt(t,r,n,s)}optimize(t){if(super.optimize(t),this.parent instanceof Ju&&Ju.compare(this.statics.blotName,this.parent.statics.blotName)>0){const r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}};xe(By,"allowedChildren",[By,Ei,us,wi]),xe(By,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let $l=By;const L5=1;class Xr extends sm{constructor(){super(...arguments),xe(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=_W(this)),this.cache.delta}deleteAt(t,r){super.deleteAt(t,r),this.cache={}}formatAt(t,r,n,s){r<=0||(this.scroll.query(n,Pe.BLOCK)?t+r===this.length()&&this.format(n,s):super.formatAt(t,Math.min(r,this.length()-t-1),n,s),this.cache={})}insertAt(t,r,n){if(n!=null){super.insertAt(t,r,n),this.cache={};return}if(r.length===0)return;const s=r.split(`
`),i=s.shift();i.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});let o=this;s.reduce((a,l)=>(o=o.split(a,!0),o.insertAt(0,l),l.length),t+i.length)}insertBefore(t,r){const{head:n}=this.children;super.insertBefore(t,r),n instanceof Ei&&n.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+L5),this.cache.length}moveChildren(t,r){super.moveChildren(t,r),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(t===0||t>=this.length()-L5)){const s=this.clone();return t===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const n=super.split(t,r);return this.cache={},n}}Xr.blotName="block";Xr.tagName="P";Xr.defaultChild=Ei;Xr.allowedChildren=[Ei,$l,us,wi];class Ts extends us{attach(){super.attach(),this.attributes=new yw(this.domNode)}delta(){return new Oe().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,r){const n=this.scroll.query(t,Pe.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,r)}formatAt(t,r,n,s){this.format(n,s)}insertAt(t,r,n){if(n!=null){super.insertAt(t,r,n);return}const s=r.split(`
`),i=s.pop(),o=s.map(l=>{const c=this.scroll.create(Xr.blotName);return c.insertAt(0,l),c}),a=this.split(t);o.forEach(l=>{this.parent.insertBefore(l,a)}),i&&this.parent.insertBefore(this.scroll.create("text",i),a)}}Ts.scope=Pe.BLOCK_BLOT;function _W(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.descendants(un).reduce((r,n)=>n.length()===0?r:r.insert(n.value(),Ns(n,{},t)),new Oe).insert(`
`,Ns(e))}function Ns(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e==null||("formats"in e&&typeof e.formats=="function"&&(t={...t,...e.formats()},r&&delete t["code-token"]),e.parent==null||e.parent.statics.blotName==="scroll"||e.parent.statics.scope!==e.statics.scope)?t:Ns(e.parent,t,r)}const Gf=class uc extends us{static value(){}constructor(t,r,n){super(t,r),this.selection=n,this.textNode=document.createTextNode(uc.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,r){if(this.savedLength!==0){super.format(t,r);return}let n=this,s=0;for(;n!=null&&n.statics.scope!==Pe.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=uc.CONTENTS.length,n.optimize(),n.formatAt(s,uc.CONTENTS.length,t,r),this.savedLength=0)}index(t,r){return t===this.textNode?0:super.index(t,r)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const r=this.prev instanceof wi?this.prev:null,n=r?r.length():0,s=this.next instanceof wi?this.next:null,i=s?s.text:"",{textNode:o}=this,a=o.data.split(uc.CONTENTS).join("");o.data=uc.CONTENTS;let l;if(r)l=r,(a||s)&&(r.insertAt(r.length(),a+i),s&&s.remove());else if(s)l=s,s.insertAt(0,a);else{const c=document.createTextNode(a);l=this.scroll.create(c),this.parent.insertBefore(l,this)}if(this.remove(),t){const c=(f,p)=>r&&f===r.domNode?p:f===o?n+p-1:s&&f===s.domNode?n+a.length+p:null,u=c(t.start.node,t.start.offset),h=c(t.end.node,t.end.offset);if(u!==null&&h!==null)return{startNode:l.domNode,startOffset:u,endNode:l.domNode,endOffset:h}}return null}update(t,r){if(t.some(n=>n.type==="characterData"&&n.target===this.textNode)){const n=this.restore();n&&(r.range=n)}}optimize(t){super.optimize(t);let{parent:r}=this;for(;r;){if(r.domNode.tagName==="A"){this.savedLength=uc.CONTENTS.length,r.isolate(this.offset(r),this.length()).unwrap(),this.savedLength=0;break}r=r.parent}}value(){return""}};xe(Gf,"blotName","cursor"),xe(Gf,"className","ql-cursor"),xe(Gf,"tagName","span"),xe(Gf,"CONTENTS","\uFEFF");let jw=Gf;const rS=new WeakMap,nS=["error","warn","log","info"];let sS="warn";function jW(e){if(sS&&nS.indexOf(e)<=nS.indexOf(sS)){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console[e](...r)}}function ba(e){return nS.reduce((t,r)=>(t[r]=jW.bind(console,r,e),t),{})}ba.level=e=>{sS=e};jW.level=ba.level;const Y_=ba("quill:events"),yze=["selectionchange","mousedown","mouseup","click"];yze.forEach(e=>{document.addEventListener(e,function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=rS.get(s);i&&i.emitter&&i.emitter.handleDOM(...r)})})});class Ce extends j9{constructor(){super(),this.domListeners={},this.on("error",Y_.error)}emit(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Y_.log.call(Y_,...r),super.emit(...r)}handleDOM(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach(i=>{let{node:o,handler:a}=i;(t.target===o||o.contains(t.target))&&a(t,...n)})}listenDOM(t,r,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:r,handler:n})}}xe(Ce,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),xe(Ce,"sources",{API:"api",SILENT:"silent",USER:"user"});const J_=ba("quill:selection");let Xc=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}};class vze{constructor(t,r){this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Xc(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ce.sources.USER),1)}),this.emitter.on(Ce.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once(Ce.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const o=i.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(o?Ce.sources.SILENT:s)}catch{}})}),this.emitter.on(Ce.events.SCROLL_OPTIMIZE,(n,s)=>{if(s.range){const{startNode:i,startOffset:o,endNode:a,endOffset:l}=s.range;this.setNativeRange(i,o,a,l),this.update(Ce.sources.SILENT)}}),this.update(Ce.sources.SILENT)}handleComposition(){this.emitter.on(Ce.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ce.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ce.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,r){this.scroll.update();const n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(t,Pe.BLOCK))){if(n.start.node!==this.cursor.textNode){const s=this.scroll.find(n.start.node,!1);if(s==null)return;if(s instanceof un){const i=s.split(n.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,r),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=this.scroll.length();t=Math.min(t,n-1),r=Math.min(t+r,n-1)-t;let s,[i,o]=this.scroll.leaf(t);if(i==null)return null;if(r>0&&o===i.length()){const[u]=this.scroll.leaf(t+1);if(u){const[h]=this.scroll.line(t),[f]=this.scroll.line(t+1);h===f&&(i=u,o=0)}}[s,o]=i.position(o,!0);const a=document.createRange();if(r>0)return a.setStart(s,o),[i,o]=this.scroll.leaf(t+r),i==null?null:([s,o]=i.position(o,!0),a.setEnd(s,o),a.getBoundingClientRect());let l="left",c;if(s instanceof Text){if(!s.data.length)return null;o<s.data.length?(a.setStart(s,o),a.setEnd(s,o+1)):(a.setStart(s,o-1),a.setEnd(s,o),l="right"),c=a.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;c=i.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const r=t.getRangeAt(0);if(r==null)return null;const n=this.normalizeNative(r);return J_.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const r=this.getNativeRange();return r==null?[null,null]:[this.normalizedToRange(r),r]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&X_(this.root,document.activeElement)}normalizedToRange(t){const r=[[t.start.node,t.start.offset]];t.native.collapsed||r.push([t.end.node,t.end.offset]);const n=r.map(o=>{const[a,l]=o,c=this.scroll.find(a,!0),u=c.offset(this.scroll);return l===0?u:c instanceof un?u+c.index(a,l):u+c.length()}),s=Math.min(Math.max(...n),this.scroll.length()-1),i=Math.min(s,...n);return new Xc(i,s-i)}normalizeNative(t){if(!X_(this.root,t.startContainer)||!t.collapsed&&!X_(this.root,t.endContainer))return null;const r={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[r.start,r.end].forEach(n=>{let{node:s,offset:i}=n;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;n.node=s,n.offset=i}),r}rangeToNative(t){const r=this.scroll.length(),n=(s,i)=>{s=Math.min(r-1,s);const[o,a]=this.scroll.leaf(s);return o?o.position(a,i):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(J_.info("setNativeRange",t,r,n,s),t!=null&&(this.root.parentNode==null||t.parentNode==null||n.parentNode==null))return;const o=document.getSelection();if(o!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(a==null||i||t!==a.startContainer||r!==a.startOffset||n!==a.endContainer||s!==a.endOffset){t instanceof Element&&t.tagName==="BR"&&(r=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&n.tagName==="BR"&&(s=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const l=document.createRange();l.setStart(t,r),l.setEnd(n,s),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;if(typeof r=="string"&&(n=r,r=!1),J_.info("setRange",t),t!=null){const s=this.rangeToNative(t);this.setNativeRange(...s,r)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const r=this.lastRange,[n,s]=this.getRange();if(this.lastRange=n,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!Za(r,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const i=[Ce.events.SELECTION_CHANGE,Sd(this.lastRange),Sd(r),t];this.emitter.emit(Ce.events.EDITOR_CHANGE,...i),t!==Ce.sources.SILENT&&this.emitter.emit(...i)}}}function X_(e,t){try{t.parentNode}catch{return!1}return e.contains(t)}const bze=/^[ -~]*$/;class xze{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let r=this.scroll.length();this.scroll.batchStart();const n=M5(t),s=new Oe;return _ze(n.ops.slice()).reduce((i,o)=>{const a=Cs.Op.length(o);let l=o.attributes||{},c=!1,u=!1;if(o.insert!=null){if(s.retain(a),typeof o.insert=="string"){const p=o.insert;u=!p.endsWith(`
`)&&(r<=i||!!this.scroll.descendant(Ts,i)[0]),this.scroll.insertAt(i,p);const[y,m]=this.scroll.line(i);let b=ul({},Ns(y));if(y instanceof Xr){const[x]=y.descendant(un,m);x&&(b=ul(b,Ns(x)))}l=Cs.AttributeMap.diff(b,l)||{}}else if(typeof o.insert=="object"){const p=Object.keys(o.insert)[0];if(p==null)return i;const y=this.scroll.query(p,Pe.INLINE)!=null;if(y)(r<=i||this.scroll.descendant(Ts,i)[0])&&(u=!0);else if(i>0){const[m,b]=this.scroll.descendant(un,i-1);m instanceof wi?m.value()[b]!==`
`&&(c=!0):m instanceof us&&m.statics.scope===Pe.INLINE_BLOT&&(c=!0)}if(this.scroll.insertAt(i,p,o.insert[p]),y){const[m]=this.scroll.descendant(un,i);if(m){const b=ul({},Ns(m));l=Cs.AttributeMap.diff(b,l)||{}}}}r+=a}else if(s.push(o),o.retain!==null&&typeof o.retain=="object"){const p=Object.keys(o.retain)[0];if(p==null)return i;this.scroll.updateEmbedAt(i,p,o.retain[p])}Object.keys(l).forEach(p=>{this.scroll.formatAt(i,a,p,l[p])});const h=c?1:0,f=u?1:0;return r+=h+f,s.retain(h),s.delete(f),i+a+h+f},0),s.reduce((i,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(i,o.delete),i):i+Cs.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,r){return this.scroll.deleteAt(t,r),this.update(new Oe().retain(t).delete(r))}formatLine(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(i=>{this.scroll.lines(t,Math.max(r,1)).forEach(o=>{o.format(i,n[i])})}),this.scroll.optimize();const s=new Oe().retain(t).retain(r,Sd(n));return this.update(s)}formatText(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(i=>{this.scroll.formatAt(t,r,i,n[i])});const s=new Oe().retain(t).retain(r,Sd(n));return this.update(s)}getContents(t,r){return this.delta.slice(t,t+r)}getDelta(){return this.scroll.lines().reduce((t,r)=>t.concat(r.delta()),new Oe)}getFormat(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],s=[];r===0?this.scroll.path(t).forEach(a=>{const[l]=a;l instanceof Xr?n.push(l):l instanceof un&&s.push(l)}):(n=this.scroll.lines(t,r),s=this.scroll.descendants(un,t,r));const[i,o]=[n,s].map(a=>{const l=a.shift();if(l==null)return{};let c=Ns(l);for(;Object.keys(c).length>0;){const u=a.shift();if(u==null)return c;c=wze(Ns(u),c)}return c});return{...i,...o}}getHTML(t,r){const[n,s]=this.scroll.line(t);if(n){const i=n.length();return n.length()>=s+r&&!(s===0&&r===i)?om(n,s,r,!0):om(this.scroll,t,r,!0)}return""}getText(t,r){return this.getContents(t,r).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(t,r){const n=M5(r),s=new Oe().retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(s)}insertEmbed(t,r,n){return this.scroll.insertAt(t,r,n),this.update(new Oe().retain(t).insert({[r]:n}))}insertText(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r=r.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,r),Object.keys(n).forEach(s=>{this.scroll.formatAt(t,r.length,s,n[s])}),this.update(new Oe().retain(t).insert(r,Sd(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==Xr.blotName)return!1;const r=t;return r.children.length>1?!1:r.children.head instanceof Ei}removeFormat(t,r){const n=this.getText(t,r),[s,i]=this.scroll.line(t+r);let o=0,a=new Oe;s!=null&&(o=s.length()-i,a=s.delta().slice(i,i+o-1).insert(`
`));const l=this.getContents(t,r+o).diff(new Oe().insert(n).concat(a)),c=new Oe().retain(t).concat(l);return this.applyDelta(c)}update(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(r.length===1&&r[0].type==="characterData"&&r[0].target.data.match(bze)&&this.scroll.find(r[0].target)){const i=this.scroll.find(r[0].target),o=Ns(i),a=i.offset(this.scroll),l=r[0].oldValue.replace(jw.CONTENTS,""),c=new Oe().insert(l),u=new Oe().insert(i.value()),h=n&&{oldRange:z5(n.oldRange,-a),newRange:z5(n.newRange,-a)};t=new Oe().retain(a).concat(c.diff(u,h)).reduce((f,p)=>p.insert?f.insert(p.insert,o):f.push(p),new Oe),this.delta=s.compose(t)}else this.delta=this.getDelta(),(!t||!Za(s.compose(t),this.delta))&&(t=s.diff(this.delta,n));return t}}function Xu(e,t,r){if(e.length===0){const[p]=Q_(r.pop());return t<=0?`</li></${p}>`:`</li></${p}>${Xu([],t-1,r)}`}const[{child:n,offset:s,length:i,indent:o,type:a},...l]=e,[c,u]=Q_(a);if(o>t)return r.push(a),o===t+1?`<${c}><li${u}>${om(n,s,i)}${Xu(l,o,r)}`:`<${c}><li>${Xu(e,t+1,r)}`;const h=r[r.length-1];if(o===t&&a===h)return`</li><li${u}>${om(n,s,i)}${Xu(l,o,r)}`;const[f]=Q_(r.pop());return`</li></${f}>${Xu(e,t-1,r)}`}function om(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in e&&typeof e.html=="function")return e.html(t,r);if(e instanceof wi)return _w(e.value().slice(t,t+r)).replaceAll(" ","&nbsp;");if(e instanceof gi){if(e.statics.blotName==="list-container"){const c=[];return e.children.forEachAt(t,r,(u,h,f)=>{const p="formats"in u&&typeof u.formats=="function"?u.formats():{};c.push({child:u,offset:h,length:f,indent:p.indent||0,type:p.list})}),Xu(c,-1,[])}const s=[];if(e.children.forEachAt(t,r,(c,u,h)=>{s.push(om(c,u,h))}),n||e.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:o}=e.domNode,[a,l]=i.split(`>${o}<`);return a==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${l}`:`${a}>${s.join("")}<${l}`}return e.domNode instanceof Element?e.domNode.outerHTML:""}function wze(e,t){return Object.keys(t).reduce((r,n)=>{if(e[n]==null)return r;const s=t[n];return s===e[n]?r[n]=s:Array.isArray(s)?s.indexOf(e[n])<0?r[n]=s.concat([e[n]]):r[n]=s:r[n]=[s,e[n]],r},{})}function Q_(e){const t=e==="ordered"?"ol":"ul";switch(e){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function M5(e){return e.reduce((t,r)=>{if(typeof r.insert=="string"){const n=r.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(n,r.attributes)}return t.push(r)},new Oe)}function z5(e,t){let{index:r,length:n}=e;return new Xc(r+t,n)}function _ze(e){const t=[];return e.forEach(r=>{typeof r.insert=="string"?r.insert.split(`
`).forEach((n,s)=>{s&&t.push({insert:`
`,attributes:r.attributes}),n&&t.push({insert:n,attributes:r.attributes})}):t.push(r)}),t}class Ci{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=r}}xe(Ci,"DEFAULTS",{});const by="\uFEFF";class iA extends us{constructor(t,r){super(t,r),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(by),this.rightGuard=document.createTextNode(by),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,r){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,r)}restore(t){let r=null,n;const s=t.data.split(by).join("");if(t===this.leftGuard)if(this.prev instanceof wi){const i=this.prev.length();this.prev.insertAt(i,s),r={startNode:this.prev.domNode,startOffset:i+s.length}}else n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this),r={startNode:n,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof wi?(this.next.insertAt(0,s),r={startNode:this.next.domNode,startOffset:s.length}):(n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this.next),r={startNode:n,startOffset:s.length}));return t.data=by,r}update(t,r){t.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){const s=this.restore(n.target);s&&(r.range=s)}})}}class jze{constructor(t,r){xe(this,"isComposing",!1),this.scroll=t,this.emitter=r,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const r=t.target instanceof Node?this.scroll.find(t.target,!0):null;r&&!(r instanceof iA)&&(this.emitter.emit(Ce.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Ce.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Ce.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Ce.events.COMPOSITION_END,t),this.isComposing=!1}}const Vy=class{constructor(t,r){xe(this,"modules",{}),this.quill=t,this.options=r}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const r=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new r(this.quill,this.options.modules[t]||{}),this.modules[t]}};xe(Vy,"DEFAULTS",{modules:{}}),xe(Vy,"themes",{default:Vy});let kw=Vy;const kze=e=>e.parentElement||e.getRootNode().host||null,Nze=e=>{const t=e.getBoundingClientRect(),r="offsetWidth"in e&&Math.abs(t.width)/e.offsetWidth||1,n="offsetHeight"in e&&Math.abs(t.height)/e.offsetHeight||1;return{top:t.top,right:t.left+e.clientWidth*r,bottom:t.top+e.clientHeight*n,left:t.left}},xy=e=>{const t=parseInt(e,10);return Number.isNaN(t)?0:t},F5=(e,t,r,n,s,i)=>e<r&&t>n?0:e<r?-(r-e+s):t>n?t-e>n-r?e+s-r:t-n+i:0,Sze=(e,t)=>{var r,n,s;const i=e.ownerDocument;let o=t,a=e;for(;a;){const l=a===i.body,c=l?{top:0,right:((r=window.visualViewport)==null?void 0:r.width)??i.documentElement.clientWidth,bottom:((n=window.visualViewport)==null?void 0:n.height)??i.documentElement.clientHeight,left:0}:Nze(a),u=getComputedStyle(a),h=F5(o.left,o.right,c.left,c.right,xy(u.scrollPaddingLeft),xy(u.scrollPaddingRight)),f=F5(o.top,o.bottom,c.top,c.bottom,xy(u.scrollPaddingTop),xy(u.scrollPaddingBottom));if(h||f)if(l)(s=i.defaultView)==null||s.scrollBy(h,f);else{const{scrollLeft:p,scrollTop:y}=a;f&&(a.scrollTop+=f),h&&(a.scrollLeft+=h);const m=a.scrollLeft-p,b=a.scrollTop-y;o={left:o.left-m,top:o.top-b,right:o.right-m,bottom:o.bottom-b}}a=l||u.position==="fixed"?null:kze(a)}},Eze=100,Cze=["block","break","cursor","inline","scroll","text"],Tze=(e,t,r)=>{const n=new hh;return Cze.forEach(s=>{const i=t.query(s);i&&n.register(i)}),e.forEach(s=>{let i=t.query(s);i||r.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;i;)if(n.register(i),i="blotName"in i?i.requiredContainer??null:null,o+=1,o>Eze){r.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),n},Cd=ba("quill"),Wy=new hh;gi.uiClass="ql-ui";const Qu=class Yf{static debug(t){t===!0&&(t="log"),ba.level(t)}static find(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return rS.get(t)||Wy.find(t,r)}static import(t){return this.imports[t]==null&&Cd.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],r=!!(!(arguments.length<=1)&&arguments[1]),n="attrName"in t?t.attrName:t.blotName;typeof n=="string"?this.register(`formats/${n}`,t,r):Object.keys(t).forEach(s=>{this.register(s,t[s],r)})}else{const t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!n&&Cd.warn(`Overwriting ${t} with`,r),this.imports[t]=r,(t.startsWith("blots/")||t.startsWith("formats/"))&&r&&typeof r!="boolean"&&r.blotName!=="abstract"&&Wy.register(r),typeof r.register=="function"&&r.register(Wy)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Aze(t,r),this.container=this.options.container,this.container==null){Cd.error("Invalid Quill container",t);return}this.options.debug&&Yf.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",rS.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ce;const s=eA.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new xze(this.scroll),this.selection=new vze(this.scroll,this.emitter),this.composition=new jze(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ce.events.EDITOR_CHANGE,o=>{o===Ce.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ce.events.SCROLL_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Js.call(this,()=>this.editor.update(null,a,u),o)}),this.emitter.on(Ce.events.SCROLL_EMBED_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Js.call(this,()=>{const h=new Oe().retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(h,[],u)},Yf.sources.USER)}),n){const o=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const n=t;t=document.createElement("div"),t.classList.add(n)}return this.container.insertBefore(t,r),t}blur(){this.selection.setRange(null)}deleteText(t,r,n){return[t,r,,n]=No(t,r,n),Js.call(this,()=>this.editor.deleteText(t,r),n,t,-1*r)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const r=t();return this.allowReadOnlyEdits=!1,r}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;return Js.call(this,()=>{const s=this.getSelection(!0);let i=new Oe;if(s==null)return i;if(this.scroll.query(t,Pe.BLOCK))i=this.editor.formatLine(s.index,s.length,{[t]:r});else{if(s.length===0)return this.selection.format(t,r),i;i=this.editor.formatText(s.index,s.length,{[t]:r})}return this.setSelection(s,Ce.sources.SILENT),i},n)}formatLine(t,r,n,s,i){let o;return[t,r,o,i]=No(t,r,n,s,i),Js.call(this,()=>this.editor.formatLine(t,r,o),i,t,0)}formatText(t,r,n,s,i){let o;return[t,r,o,i]=No(t,r,n,s,i),Js.call(this,()=>this.editor.formatText(t,r,o),i,t,0)}getBounds(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof t=="number"?n=this.selection.getBounds(t,r):n=this.selection.getBounds(t.index,t.length),!n)return null;const s=this.container.getBoundingClientRect();return{bottom:n.bottom-s.top,height:n.height,left:n.left-s.left,right:n.right-s.left,top:n.top-s.top,width:n.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,r]=No(t,r),this.editor.getContents(t,r)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,r):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,r)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(r=r??this.getLength()-t),[t,r]=No(t,r),this.editor.getHTML(t,r)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(r=r??this.getLength()-t),[t,r]=No(t,r),this.editor.getText(t,r)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Yf.sources.API;return Js.call(this,()=>this.editor.insertEmbed(t,r,n),s,t)}insertText(t,r,n,s,i){let o;return[t,,o,i]=No(t,0,n,s,i),Js.call(this,()=>this.editor.insertText(t,r,o),i,t,r.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,r,n){return[t,r,,n]=No(t,r,n),Js.call(this,()=>this.editor.removeFormat(t,r),n,t)}scrollRectIntoView(t){Sze(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,r=t&&this.selection.getBounds(t.index,t.length);r&&this.scrollRectIntoView(r)}setContents(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Js.call(this,()=>{t=new Oe(t);const n=this.getLength(),s=this.editor.deleteText(0,n),i=this.editor.insertContents(0,t),o=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(o)},r)}setSelection(t,r,n){t==null?this.selection.setRange(null,r||Yf.sources.API):([t,r,,n]=No(t,r,n),this.selection.setRange(new Xc(Math.max(0,t),r),n),n!==Ce.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;const n=new Oe().insert(t);return this.setContents(n,r)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const r=this.scroll.update(t);return this.selection.update(t),r}updateContents(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Js.call(this,()=>(t=new Oe(t),this.editor.applyDelta(t)),r,!0)}};xe(Qu,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Wy,theme:"default"}),xe(Qu,"events",Ce.events),xe(Qu,"sources",Ce.sources),xe(Qu,"version","2.0.3"),xe(Qu,"imports",{delta:Oe,parchment:rze,"core/module":Ci,"core/theme":kw});let se=Qu;function $5(e){return typeof e=="string"?document.querySelector(e):e}function ej(e){return Object.entries(e??{}).reduce((t,r)=>{let[n,s]=r;return{...t,[n]:s===!0?{}:s}},{})}function U5(e){return Object.fromEntries(Object.entries(e).filter(t=>t[1]!==void 0))}function Aze(e,t){const r=$5(e);if(!r)throw new Error("Invalid Quill container");const n=!t.theme||t.theme===se.DEFAULTS.theme?kw:se.import(`themes/${t.theme}`);if(!n)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:s,...i}=se.DEFAULTS,{modules:o,...a}=n.DEFAULTS;let l=ej(t.modules);l!=null&&l.toolbar&&l.toolbar.constructor!==Object&&(l={...l,toolbar:{container:l.toolbar}});const c=ul({},ej(s),ej(o),l),u={...i,...U5(a),...U5(t)};let h=t.registry;return h?t.formats&&Cd.warn('Ignoring "formats" option because "registry" is specified'):h=t.formats?Tze(t.formats,u.registry,Cd):u.registry,{...u,registry:h,container:r,theme:n,modules:Object.entries(c).reduce((f,p)=>{let[y,m]=p;if(!m)return f;const b=se.import(`modules/${y}`);return b==null?(Cd.error(`Cannot load ${y} module. Are you sure you registered it?`),f):{...f,[y]:ul({},b.DEFAULTS||{},m)}},{}),bounds:$5(u.bounds)}}function Js(e,t,r,n){if(!this.isEnabled()&&t===Ce.sources.USER&&!this.allowReadOnlyEdits)return new Oe;let s=r==null?null:this.getSelection();const i=this.editor.delta,o=e();if(s!=null&&(r===!0&&(r=s.index),n==null?s=q5(s,o,t):n!==0&&(s=q5(s,r,n,t)),this.setSelection(s,Ce.sources.SILENT)),o.length()>0){const a=[Ce.events.TEXT_CHANGE,o,i,t];this.emitter.emit(Ce.events.EDITOR_CHANGE,...a),t!==Ce.sources.SILENT&&this.emitter.emit(...a)}return o}function No(e,t,r,n,s){let i={};return typeof e.index=="number"&&typeof e.length=="number"?typeof t!="number"?(s=n,n=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):typeof t!="number"&&(s=n,n=r,r=t,t=0),typeof r=="object"?(i=r,s=n):typeof r=="string"&&(n!=null?i[r]=n:s=r),s=s||Ce.sources.API,[e,t,i,s]}function q5(e,t,r,n){const s=typeof r=="number"?r:0;if(e==null)return null;let i,o;return t&&typeof t.transformPosition=="function"?[i,o]=[e.index,e.index+e.length].map(a=>t.transformPosition(a,n!==Ce.sources.USER)):[i,o]=[e.index,e.index+e.length].map(a=>a<t||a===t&&n===Ce.sources.USER?a:s>=0?a+s:Math.max(t,a+s)),new Xc(i,o-i)}class mu extends vw{}function B5(e){return e instanceof Xr||e instanceof Ts}function V5(e){return typeof e.updateContent=="function"}class ed extends eA{constructor(t,r,n){let{emitter:s}=n;super(t,r),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Ce.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Ce.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,r){this.emitter.emit(Ce.events.SCROLL_EMBED_UPDATE,t,r)}deleteAt(t,r){const[n,s]=this.line(t),[i]=this.line(t+r);if(super.deleteAt(t,r),i!=null&&n!==i&&s>0){if(n instanceof Ts||i instanceof Ts){this.optimize();return}const o=i.children.head instanceof Ei?null:i.children.head;n.moveChildren(i,o),n.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,r,n,s){super.formatAt(t,r,n,s),this.optimize()}insertAt(t,r,n){if(t>=this.length())if(n==null||this.scroll.query(r,Pe.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),n==null&&r.endsWith(`
`)?s.insertAt(0,r.slice(0,-1),n):s.insertAt(0,r,n)}else{const s=this.scroll.create(r,n);this.appendChild(s)}else super.insertAt(t,r,n);this.optimize()}insertBefore(t,r){if(t.statics.scope===Pe.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,r)}else super.insertBefore(t,r)}insertContents(t,r){const n=this.deltaToRenderBlocks(r.concat(new Oe().insert(`
`))),s=n.pop();if(s==null)return;this.batchStart();const i=n.shift();if(i){const l=i.type==="block"&&(i.delta.length()===0||!this.descendant(Ts,t)[0]&&t<this.length()),c=i.type==="block"?i.delta:new Oe().insert({[i.key]:i.value});tj(this,t,c);const u=i.type==="block"?1:0,h=t+c.length()+u;l&&this.insertAt(h-1,`
`);const f=Ns(this.line(t)[0]),p=Cs.AttributeMap.diff(f,i.attributes)||{};Object.keys(p).forEach(y=>{this.formatAt(h-1,1,y,p[y])}),t=h}let[o,a]=this.children.find(t);if(n.length&&(o&&(o=o.split(a),a=0),n.forEach(l=>{if(l.type==="block"){const c=this.createBlock(l.attributes,o||void 0);tj(c,0,l.delta)}else{const c=this.create(l.key,l.value);this.insertBefore(c,o||void 0),Object.keys(l.attributes).forEach(u=>{c.format(u,l.attributes[u])})}})),s.type==="block"&&s.delta.length()){const l=o?o.offset(o.scroll)+a:this.length();tj(this,l,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const r=this.path(t).pop();if(!r)return[null,-1];const[n,s]=r;return n instanceof un?[n,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(B5,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const n=(s,i,o)=>{let a=[],l=o;return s.children.forEachAt(i,o,(c,u,h)=>{B5(c)?a.push(c):c instanceof vw&&(a=a.concat(n(c,u,l))),l-=h}),a};return n(this,t,r)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,r),t.length>0&&this.emitter.emit(Ce.events.SCROLL_OPTIMIZE,t,r))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let r=Ce.sources.USER;typeof t=="string"&&(r=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(n=>{let{target:s}=n;const i=this.find(s,!0);return i&&!V5(i)}),t.length>0&&this.emitter.emit(Ce.events.SCROLL_BEFORE_UPDATE,r,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Ce.events.SCROLL_UPDATE,r,t)}updateEmbedAt(t,r,n){const[s]=this.descendant(i=>i instanceof Ts,t);s&&s.statics.blotName===r&&V5(s)&&s.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const r=[];let n=new Oe;return t.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const o=i.split(`
`);o.slice(0,-1).forEach(l=>{n.insert(l,s.attributes),r.push({type:"block",delta:n,attributes:s.attributes??{}}),n=new Oe});const a=o[o.length-1];a&&n.insert(a,s.attributes)}else{const o=Object.keys(i)[0];if(!o)return;this.query(o,Pe.INLINE)?n.push(s):(n.length()&&r.push({type:"block",delta:n,attributes:{}}),n=new Oe,r.push({type:"blockEmbed",key:o,value:i[o],attributes:s.attributes??{}}))}}),n.length()&&r.push({type:"block",delta:n,attributes:{}}),r}createBlock(t,r){let n;const s={};Object.entries(t).forEach(a=>{let[l,c]=a;this.query(l,Pe.BLOCK&Pe.BLOT)!=null?n=l:s[l]=c});const i=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(i,r||void 0);const o=i.length();return Object.entries(s).forEach(a=>{let[l,c]=a;i.formatAt(0,o,l,c)}),i}}xe(ed,"blotName","scroll"),xe(ed,"className","ql-editor"),xe(ed,"tagName","DIV"),xe(ed,"defaultChild",Xr),xe(ed,"allowedChildren",[Xr,Ts,mu]);function tj(e,t,r){r.reduce((n,s)=>{const i=Cs.Op.length(s);let o=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const a=s.insert;e.insertAt(n,a);const[l]=e.descendant(un,n),c=Ns(l);o=Cs.AttributeMap.diff(c,o)||{}}else if(typeof s.insert=="object"){const a=Object.keys(s.insert)[0];if(a==null)return n;if(e.insertAt(n,a,s.insert[a]),e.scroll.query(a,Pe.INLINE)!=null){const[l]=e.descendant(un,n),c=Ns(l);o=Cs.AttributeMap.diff(c,o)||{}}}}return Object.keys(o).forEach(a=>{e.formatAt(n,i,a,o[a])}),n+i},t)}const oA={scope:Pe.BLOCK,whitelist:["right","center","justify"]},Oze=new oo("align","align",oA),kW=new Si("align","ql-align",oA),NW=new Fl("align","text-align",oA);class SW extends Fl{value(t){let r=super.value(t);return r.startsWith("rgb(")?(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${r.split(",").map(n=>`00${parseInt(n,10).toString(16)}`.slice(-2)).join("")}`):r}}const Pze=new Si("color","ql-color",{scope:Pe.INLINE}),aA=new SW("color","color",{scope:Pe.INLINE}),Rze=new Si("background","ql-bg",{scope:Pe.INLINE}),lA=new SW("background","background-color",{scope:Pe.INLINE});class gu extends mu{static create(t){const r=super.create(t);return r.setAttribute("spellcheck","false"),r}code(t,r){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(t,t+r)}html(t,r){return`<pre>
${_w(this.code(t,r))}
</pre>`}}class pn extends Xr{static register(){se.register(gu)}}xe(pn,"TAB","  ");class cA extends $l{}cA.blotName="code";cA.tagName="CODE";pn.blotName="code-block";pn.className="ql-code-block";pn.tagName="DIV";gu.blotName="code-block-container";gu.className="ql-code-block-container";gu.tagName="DIV";gu.allowedChildren=[pn];pn.allowedChildren=[wi,Ei,jw];pn.requiredContainer=gu;const uA={scope:Pe.BLOCK,whitelist:["rtl"]},EW=new oo("direction","dir",uA),CW=new Si("direction","ql-direction",uA),TW=new Fl("direction","direction",uA),AW={scope:Pe.INLINE,whitelist:["serif","monospace"]},OW=new Si("font","ql-font",AW);class Ize extends Fl{value(t){return super.value(t).replace(/["']/g,"")}}const PW=new Ize("font","font-family",AW),RW=new Si("size","ql-size",{scope:Pe.INLINE,whitelist:["small","large","huge"]}),IW=new Fl("size","font-size",{scope:Pe.INLINE,whitelist:["10px","18px","32px"]}),Dze=ba("quill:keyboard"),Lze=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Nw extends Ci{static match(t,r){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!r[n]!==t[n]&&r[n]!==null)?!1:r.key===t.key||r.key===t.which}constructor(t,r){super(t,r),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=zze(t);if(s==null){Dze.warn("Attempted to add invalid keyboard binding",s);return}typeof r=="function"&&(r={handler:r}),typeof n=="function"&&(n={handler:n}),(Array.isArray(s.key)?s.key:[s.key]).forEach(i=>{const o={...s,key:i,...r,...n};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const r=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(y=>Nw.match(t,y));if(r.length===0)return;const n=se.find(t.target,!0);if(n&&n.scroll!==this.quill.scroll)return;const s=this.quill.getSelection();if(s==null||!this.quill.hasFocus())return;const[i,o]=this.quill.getLine(s.index),[a,l]=this.quill.getLeaf(s.index),[c,u]=s.length===0?[a,l]:this.quill.getLeaf(s.index+s.length),h=a instanceof bb?a.value().slice(0,l):"",f=c instanceof bb?c.value().slice(u):"",p={collapsed:s.length===0,empty:s.length===0&&i.length()<=1,format:this.quill.getFormat(s),line:i,offset:o,prefix:h,suffix:f,event:t};r.some(y=>{if(y.collapsed!=null&&y.collapsed!==p.collapsed||y.empty!=null&&y.empty!==p.empty||y.offset!=null&&y.offset!==p.offset)return!1;if(Array.isArray(y.format)){if(y.format.every(m=>p.format[m]==null))return!1}else if(typeof y.format=="object"&&!Object.keys(y.format).every(m=>y.format[m]===!0?p.format[m]!=null:y.format[m]===!1?p.format[m]==null:Za(y.format[m],p.format[m])))return!1;return y.prefix!=null&&!y.prefix.test(p.prefix)||y.suffix!=null&&!y.suffix.test(p.suffix)?!1:y.handler.call(this,s,p,y)!==!0})&&t.preventDefault()})}handleBackspace(t,r){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(r.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(t.index);let o=new Oe().retain(t.index-n).delete(n);if(r.offset===0){const[a]=this.quill.getLine(t.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){const l=i.formats(),c=this.quill.getFormat(t.index-1,1);if(s=Cs.AttributeMap.diff(l,c)||{},Object.keys(s).length>0){const u=new Oe().retain(t.index+i.length()-2).retain(1,s);o=o.compose(u)}}}this.quill.updateContents(o,se.sources.USER),this.quill.focus()}handleDelete(t,r){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(r.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let s={};const[i]=this.quill.getLine(t.index);let o=new Oe().retain(t.index).delete(n);if(r.offset>=i.length()-1){const[a]=this.quill.getLine(t.index+1);if(a){const l=i.formats(),c=this.quill.getFormat(t.index,1);s=Cs.AttributeMap.diff(l,c)||{},Object.keys(s).length>0&&(o=o.retain(a.length()-1).retain(1,s))}}this.quill.updateContents(o,se.sources.USER),this.quill.focus()}handleDeleteRange(t){dA({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,r){const n=Object.keys(r.format).reduce((i,o)=>(this.quill.scroll.query(o,Pe.BLOCK)&&!Array.isArray(r.format[o])&&(i[o]=r.format[o]),i),{}),s=new Oe().retain(t.index).delete(t.length).insert(`
`,n);this.quill.updateContents(s,se.sources.USER),this.quill.setSelection(t.index+1,se.sources.SILENT),this.quill.focus()}}const Mze={bindings:{bold:rj("bold"),italic:rj("italic"),underline:rj("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",se.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",se.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(e,t){t.format.indent!=null?this.quill.format("indent","-1",se.sources.USER):t.format.list!=null&&this.quill.format("list",!1,se.sources.USER)}},"indent code-block":W5(!0),"outdent code-block":W5(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(e){this.quill.deleteText(e.index-1,1,se.sources.USER)}},tab:{key:"Tab",handler(e,t){if(t.format.table)return!0;this.quill.history.cutoff();const r=new Oe().retain(e.index).delete(e.length).insert("	");return this.quill.updateContents(r,se.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,se.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,se.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(e,t){const r={list:!1};t.format.indent&&(r.indent=!1),this.quill.formatLine(e.index,e.length,r,se.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(e){const[t,r]=this.quill.getLine(e.index),n={...t.formats(),list:"checked"},s=new Oe().retain(e.index).insert(`
`,n).retain(t.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,se.sources.USER),this.quill.setSelection(e.index+1,se.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(e,t){const[r,n]=this.quill.getLine(e.index),s=new Oe().retain(e.index).insert(`
`,t.format).retain(r.length()-n-1).retain(1,{header:null});this.quill.updateContents(s,se.sources.USER),this.quill.setSelection(e.index+1,se.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(e){const t=this.quill.getModule("table");if(t){const[r,n,s,i]=t.getTable(e),o=Fze(r,n,s,i);if(o==null)return;let a=r.offset();if(o<0){const l=new Oe().retain(a).insert(`
`);this.quill.updateContents(l,se.sources.USER),this.quill.setSelection(e.index+1,e.length,se.sources.SILENT)}else if(o>0){a+=r.length();const l=new Oe().retain(a).insert(`
`);this.quill.updateContents(l,se.sources.USER),this.quill.setSelection(a,se.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(e,t){const{event:r,line:n}=t,s=n.offset(this.quill.scroll);r.shiftKey?this.quill.setSelection(s-1,se.sources.USER):this.quill.setSelection(s+n.length(),se.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query("list")==null)return!0;const{length:r}=t.prefix,[n,s]=this.quill.getLine(e.index);if(s>r)return!0;let i;switch(t.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(e.index," ",se.sources.USER),this.quill.history.cutoff();const o=new Oe().retain(e.index-s).delete(r+1).retain(n.length()-2-s).retain(1,{list:i});return this.quill.updateContents(o,se.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,se.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(e){const[t,r]=this.quill.getLine(e.index);let n=2,s=t;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,n-=1,n<=0){const i=new Oe().retain(e.index+t.length()-r-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,se.sources.USER),this.quill.setSelection(e.index-1,se.sources.SILENT),!1}return!0}},"embed left":wy("ArrowLeft",!1),"embed left shift":wy("ArrowLeft",!0),"embed right":wy("ArrowRight",!1),"embed right shift":wy("ArrowRight",!0),"table down":H5(!1),"table up":H5(!0)}};Nw.DEFAULTS=Mze;function W5(e){return{key:"Tab",shiftKey:!e,format:{"code-block":!0},handler(t,r){let{event:n}=r;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(t.length===0&&!n.shiftKey){this.quill.insertText(t.index,i,se.sources.USER),this.quill.setSelection(t.index+i.length,se.sources.SILENT);return}const o=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:a,length:l}=t;o.forEach((c,u)=>{e?(c.insertAt(0,i),u===0?a+=i.length:l+=i.length):c.domNode.textContent.startsWith(i)&&(c.deleteAt(0,i.length),u===0?a-=i.length:l-=i.length)}),this.quill.update(se.sources.USER),this.quill.setSelection(a,l,se.sources.SILENT)}}}function wy(e,t){return{key:e,shiftKey:t,altKey:null,[e==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:n}=r;e==="ArrowRight"&&(n+=r.length+1);const[s]=this.quill.getLeaf(n);return s instanceof us?(e==="ArrowLeft"?t?this.quill.setSelection(r.index-1,r.length+1,se.sources.USER):this.quill.setSelection(r.index-1,se.sources.USER):t?this.quill.setSelection(r.index,r.length+1,se.sources.USER):this.quill.setSelection(r.index+r.length+1,se.sources.USER),!1):!0}}}function rj(e){return{key:e[0],shortKey:!0,handler(t,r){this.quill.format(e,!r.format[e],se.sources.USER)}}}function H5(e){return{key:e?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,r){const n=e?"prev":"next",s=r.line,i=s.parent[n];if(i!=null){if(i.statics.blotName==="table-row"){let o=i.children.head,a=s;for(;a.prev!=null;)a=a.prev,o=o.next;const l=o.offset(this.quill.scroll)+Math.min(r.offset,o.length()-1);this.quill.setSelection(l,0,se.sources.USER)}}else{const o=s.table()[n];o!=null&&(e?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,se.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,se.sources.USER))}return!1}}}function zze(e){if(typeof e=="string"||typeof e=="number")e={key:e};else if(typeof e=="object")e=Sd(e);else return null;return e.shortKey&&(e[Lze]=e.shortKey,delete e.shortKey),e}function dA(e){let{quill:t,range:r}=e;const n=t.getLines(r);let s={};if(n.length>1){const i=n[0].formats(),o=n[n.length-1].formats();s=Cs.AttributeMap.diff(o,i)||{}}t.deleteText(r,se.sources.USER),Object.keys(s).length>0&&t.formatLine(r.index,1,s,se.sources.USER),t.setSelection(r.index,se.sources.SILENT)}function Fze(e,t,r,n){return t.prev==null&&t.next==null?r.prev==null&&r.next==null?n===0?-1:1:r.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const $ze=/font-weight:\s*normal/,Uze=["P","OL","UL"],K5=e=>e&&Uze.includes(e.tagName),qze=e=>{Array.from(e.querySelectorAll("br")).filter(t=>K5(t.previousElementSibling)&&K5(t.nextElementSibling)).forEach(t=>{var r;(r=t.parentNode)==null||r.removeChild(t)})},Bze=e=>{Array.from(e.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var r;return(r=t.getAttribute("style"))==null?void 0:r.match($ze)}).forEach(t=>{var r;const n=e.createDocumentFragment();n.append(...t.childNodes),(r=t.parentNode)==null||r.replaceChild(n,t)})};function Vze(e){e.querySelector('[id^="docs-internal-guid-"]')&&(Bze(e),qze(e))}const Wze=/\bmso-list:[^;]*ignore/i,Hze=/\bmso-list:[^;]*\bl(\d+)/i,Kze=/\bmso-list:[^;]*\blevel(\d+)/i,Zze=(e,t)=>{const r=e.getAttribute("style"),n=r==null?void 0:r.match(Hze);if(!n)return null;const s=Number(n[1]),i=r==null?void 0:r.match(Kze),o=i?Number(i[1]):1,a=new RegExp(`@list l${s}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=t.match(a),c=l&&l[1]==="bullet"?"bullet":"ordered";return{id:s,indent:o,type:c,element:e}},Gze=e=>{var t,r;const n=Array.from(e.querySelectorAll("[style*=mso-list]")),s=[],i=[];n.forEach(l=>{(l.getAttribute("style")||"").match(Wze)?s.push(l):i.push(l)}),s.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)});const o=e.documentElement.innerHTML,a=i.map(l=>Zze(l,o)).filter(l=>l);for(;a.length;){const l=[];let c=a.shift();for(;c;)l.push(c),c=a.length&&((t=a[0])==null?void 0:t.element)===c.element.nextElementSibling&&a[0].id===c.id?a.shift():null;const u=document.createElement("ul");l.forEach(p=>{const y=document.createElement("li");y.setAttribute("data-list",p.type),p.indent>1&&y.setAttribute("class",`ql-indent-${p.indent-1}`),y.innerHTML=p.element.innerHTML,u.appendChild(y)});const h=(r=l[0])==null?void 0:r.element,{parentNode:f}=h??{};h&&(f==null||f.replaceChild(u,h)),l.slice(1).forEach(p=>{let{element:y}=p;f==null||f.removeChild(y)})}};function Yze(e){e.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Gze(e)}const Jze=[Yze,Vze],Xze=e=>{e.documentElement&&Jze.forEach(t=>{t(e)})},Qze=ba("quill:clipboard"),e1e=[[Node.TEXT_NODE,h1e],[Node.TEXT_NODE,G5],["br",i1e],[Node.ELEMENT_NODE,G5],[Node.ELEMENT_NODE,s1e],[Node.ELEMENT_NODE,n1e],[Node.ELEMENT_NODE,u1e],["li",l1e],["ol, ul",c1e],["pre",o1e],["tr",d1e],["b",nj("bold")],["i",nj("italic")],["strike",nj("strike")],["style",a1e]],t1e=[Oze,EW].reduce((e,t)=>(e[t.keyName]=t,e),{}),Z5=[NW,lA,aA,TW,PW,IW].reduce((e,t)=>(e[t.keyName]=t,e),{});class DW extends Ci{constructor(t,r){super(t,r),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],e1e.concat(this.options.matchers??[]).forEach(n=>{let[s,i]=n;this.addMatcher(s,i)})}addMatcher(t,r){this.matchers.push([t,r])}convert(t){let{html:r,text:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[pn.blotName])return new Oe().insert(n||"",{[pn.blotName]:s[pn.blotName]});if(!r)return new Oe().insert(n||"",s);const i=this.convertHTML(r);return Ym(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new Oe().retain(i.length()-1).delete(1)):i}normalizeHTML(t){Xze(t)}convertHTML(t){const r=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(r);const n=r.body,s=new WeakMap,[i,o]=this.prepareMatching(n,s);return hA(this.quill.scroll,n,i,o,s)}dangerouslyPasteHTML(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:se.sources.API;if(typeof t=="string"){const s=this.convert({html:t,text:""});this.quill.setContents(s,r),this.quill.setSelection(0,se.sources.SILENT)}else{const s=this.convert({html:r,text:""});this.quill.updateContents(new Oe().retain(t).concat(s),n),this.quill.setSelection(t+s.length(),se.sources.SILENT)}}onCaptureCopy(t){var r,n;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[i]=this.quill.selection.getRange();if(i==null)return;const{html:o,text:a}=this.onCopy(i,s);(r=t.clipboardData)==null||r.setData("text/plain",a),(n=t.clipboardData)==null||n.setData("text/html",o),s&&dA({range:i,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(r=>r[0]!=="#").join(`
`)}onCapturePaste(t){var r,n,s,i,o;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const a=this.quill.getSelection(!0);if(a==null)return;const l=(r=t.clipboardData)==null?void 0:r.getData("text/html");let c=(n=t.clipboardData)==null?void 0:n.getData("text/plain");if(!l&&!c){const h=(s=t.clipboardData)==null?void 0:s.getData("text/uri-list");h&&(c=this.normalizeURIList(h))}const u=Array.from(((i=t.clipboardData)==null?void 0:i.files)||[]);if(!l&&u.length>0){this.quill.uploader.upload(a,u);return}if(l&&u.length>0){const h=new DOMParser().parseFromString(l,"text/html");if(h.body.childElementCount===1&&((o=h.body.firstElementChild)==null?void 0:o.tagName)==="IMG"){this.quill.uploader.upload(a,u);return}}this.onPaste(a,{html:l,text:c})}onCopy(t){const r=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:r}}onPaste(t,r){let{text:n,html:s}=r;const i=this.quill.getFormat(t.index),o=this.convert({text:n,html:s},i);Qze.log("onPaste",o,{text:n,html:s});const a=new Oe().retain(t.index).delete(t.length).concat(o);this.quill.updateContents(a,se.sources.USER),this.quill.setSelection(a.length()-t.length,se.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,r){const n=[],s=[];return this.matchers.forEach(i=>{const[o,a]=i;switch(o){case Node.TEXT_NODE:s.push(a);break;case Node.ELEMENT_NODE:n.push(a);break;default:Array.from(t.querySelectorAll(o)).forEach(l=>{if(r.has(l)){const c=r.get(l);c==null||c.push(a)}else r.set(l,[a])});break}}),[n,s]}}xe(DW,"DEFAULTS",{matchers:[]});function yu(e,t,r,n){return n.query(t)?e.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[t])return s.push(i);const o=r?{[t]:r}:{};return s.insert(i.insert,{...o,...i.attributes})},new Oe):e}function Ym(e,t){let r="";for(let n=e.ops.length-1;n>=0&&r.length<t.length;--n){const s=e.ops[n];if(typeof s.insert!="string")break;r=s.insert+r}return r.slice(-1*t.length)===t}function sl(e,t){if(!(e instanceof Element))return!1;const r=t.query(e);return r&&r.prototype instanceof us?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(e.tagName.toLowerCase())}function r1e(e,t){return e.previousElementSibling&&e.nextElementSibling&&!sl(e.previousElementSibling,t)&&!sl(e.nextElementSibling,t)}const _y=new WeakMap;function LW(e){return e==null?!1:(_y.has(e)||(e.tagName==="PRE"?_y.set(e,!0):_y.set(e,LW(e.parentNode))),_y.get(e))}function hA(e,t,r,n,s){return t.nodeType===t.TEXT_NODE?n.reduce((i,o)=>o(t,i,e),new Oe):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((i,o)=>{let a=hA(e,o,r,n,s);return o.nodeType===t.ELEMENT_NODE&&(a=r.reduce((l,c)=>c(o,l,e),a),a=(s.get(o)||[]).reduce((l,c)=>c(o,l,e),a)),i.concat(a)},new Oe):new Oe}function nj(e){return(t,r,n)=>yu(r,e,!0,n)}function n1e(e,t,r){const n=oo.keys(e),s=Si.keys(e),i=Fl.keys(e),o={};return n.concat(s).concat(i).forEach(a=>{let l=r.query(a,Pe.ATTRIBUTE);l!=null&&(o[l.attrName]=l.value(e),o[l.attrName])||(l=t1e[a],l!=null&&(l.attrName===a||l.keyName===a)&&(o[l.attrName]=l.value(e)||void 0),l=Z5[a],l!=null&&(l.attrName===a||l.keyName===a)&&(l=Z5[a],o[l.attrName]=l.value(e)||void 0))}),Object.entries(o).reduce((a,l)=>{let[c,u]=l;return yu(a,c,u,r)},t)}function s1e(e,t,r){const n=r.query(e);if(n==null)return t;if(n.prototype instanceof us){const s={},i=n.value(e);if(i!=null)return s[n.blotName]=i,new Oe().insert(s,n.formats(e,r))}else if(n.prototype instanceof sm&&!Ym(t,`
`)&&t.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return yu(t,n.blotName,n.formats(e,r),r);return t}function i1e(e,t){return Ym(t,`
`)||t.insert(`
`),t}function o1e(e,t,r){const n=r.query("code-block"),s=n&&"formats"in n&&typeof n.formats=="function"?n.formats(e,r):!0;return yu(t,"code-block",s,r)}function a1e(){return new Oe}function l1e(e,t,r){const n=r.query(e);if(n==null||n.blotName!=="list"||!Ym(t,`
`))return t;let s=-1,i=e.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?t:t.reduce((o,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?o.push(a):o.insert(a.insert,{indent:s,...a.attributes||{}}):o,new Oe)}function c1e(e,t,r){const n=e;let s=n.tagName==="OL"?"ordered":"bullet";const i=n.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),yu(t,"list",s,r)}function G5(e,t,r){if(!Ym(t,`
`)){if(sl(e,r)&&(e.childNodes.length>0||e instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&e.nextSibling){let n=e.nextSibling;for(;n!=null;){if(sl(n,r))return t.insert(`
`);const s=r.query(n);if(s&&s.prototype instanceof Ts)return t.insert(`
`);n=n.firstChild}}}return t}function u1e(e,t,r){var n;const s={},i=e.style||{};return i.fontStyle==="italic"&&(s.italic=!0),i.textDecoration==="underline"&&(s.underline=!0),i.textDecoration==="line-through"&&(s.strike=!0),((n=i.fontWeight)!=null&&n.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(s.bold=!0),t=Object.entries(s).reduce((o,a)=>{let[l,c]=a;return yu(o,l,c,r)},t),parseFloat(i.textIndent||0)>0?new Oe().insert("	").concat(t):t}function d1e(e,t,r){var n,s;const i=((n=e.parentElement)==null?void 0:n.tagName)==="TABLE"?e.parentElement:(s=e.parentElement)==null?void 0:s.parentElement;if(i!=null){const o=Array.from(i.querySelectorAll("tr")).indexOf(e)+1;return yu(t,"table",o,r)}return t}function h1e(e,t,r){var n;let s=e.data;if(((n=e.parentElement)==null?void 0:n.tagName)==="O:P")return t.insert(s.trim());if(!LW(e)){if(s.trim().length===0&&s.includes(`
`)&&!r1e(e,r))return t;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(e.previousSibling==null&&e.parentElement!=null&&sl(e.parentElement,r)||e.previousSibling instanceof Element&&sl(e.previousSibling,r))&&(s=s.replace(/^ /,"")),(e.nextSibling==null&&e.parentElement!=null&&sl(e.parentElement,r)||e.nextSibling instanceof Element&&sl(e.nextSibling,r))&&(s=s.replace(/ $/,"")),s=s.replaceAll(" "," ")}return t.insert(s)}class MW extends Ci{constructor(t,r){super(t,r),xe(this,"lastRecorded",0),xe(this,"ignoreChange",!1),xe(this,"stack",{undo:[],redo:[]}),xe(this,"currentRange",null),this.quill.on(se.events.EDITOR_CHANGE,(n,s,i,o)=>{n===se.events.SELECTION_CHANGE?s&&o!==se.sources.SILENT&&(this.currentRange=s):n===se.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===se.sources.USER?this.record(s,i):this.transform(s)),this.currentRange=iS(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",n=>{n.inputType==="historyUndo"?(this.undo(),n.preventDefault()):n.inputType==="historyRedo"&&(this.redo(),n.preventDefault())})}change(t,r){if(this.stack[t].length===0)return;const n=this.stack[t].pop();if(!n)return;const s=this.quill.getContents(),i=n.delta.invert(s);this.stack[r].push({delta:i,range:iS(n.range,i)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,se.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,r){if(t.ops.length===0)return;this.stack.redo=[];let n=t.invert(r),s=this.currentRange;const i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(n=n.compose(o.delta),s=o.range)}else this.lastRecorded=i;n.length()!==0&&(this.stack.undo.push({delta:n,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){Y5(this.stack.undo,t),Y5(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,se.sources.USER);else{const r=p1e(this.quill.scroll,t.delta);this.quill.setSelection(r,se.sources.USER)}}}xe(MW,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Y5(e,t){let r=t;for(let n=e.length-1;n>=0;n-=1){const s=e[n];e[n]={delta:r.transform(s.delta,!0),range:s.range&&iS(s.range,r)},r=s.delta.transform(r),e[n].delta.length()===0&&e.splice(n,1)}}function f1e(e,t){const r=t.ops[t.ops.length-1];return r==null?!1:r.insert!=null?typeof r.insert=="string"&&r.insert.endsWith(`
`):r.attributes!=null?Object.keys(r.attributes).some(n=>e.query(n,Pe.BLOCK)!=null):!1}function p1e(e,t){const r=t.reduce((s,i)=>s+(i.delete||0),0);let n=t.length()-r;return f1e(e,t)&&(n-=1),n}function iS(e,t){if(!e)return e;const r=t.transformPosition(e.index),n=t.transformPosition(e.index+e.length);return{index:r,length:n-r}}class zW extends Ci{constructor(t,r){super(t,r),t.root.addEventListener("drop",n=>{var s;n.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){const a=document.caretPositionFromPoint(n.clientX,n.clientY);i=document.createRange(),i.setStart(a.offsetNode,a.offset),i.setEnd(a.offsetNode,a.offset)}const o=i&&t.selection.normalizeNative(i);if(o){const a=t.selection.normalizedToRange(o);(s=n.dataTransfer)!=null&&s.files&&this.upload(a,n.dataTransfer.files)}})}upload(t,r){const n=[];Array.from(r).forEach(s=>{var i;s&&(i=this.options.mimetypes)!=null&&i.includes(s.type)&&n.push(s)}),n.length>0&&this.options.handler.call(this,t,n)}}zW.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(e,t){if(!this.quill.scroll.query("image"))return;const r=t.map(n=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(n)}));Promise.all(r).then(n=>{const s=n.reduce((i,o)=>i.insert({image:o}),new Oe().retain(e.index).delete(e.length));this.quill.updateContents(s,Ce.sources.USER),this.quill.setSelection(e.index+n.length,Ce.sources.SILENT)})}};const m1e=["insertText","insertReplacementText"];class g1e extends Ci{constructor(t,r){super(t,r),t.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||t.on(se.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){dA({range:t,quill:this.quill})}replaceText(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(r){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new Oe().retain(t.index).insert(r,n),se.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+r.length,0,se.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!m1e.includes(t.inputType))return;const r=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!r||r.collapsed===!0)return;const n=y1e(t);if(n==null)return;const s=this.quill.selection.normalizeNative(r),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function y1e(e){var t;return typeof e.data=="string"?e.data:(t=e.dataTransfer)!=null&&t.types.includes("text/plain")?e.dataTransfer.getData("text/plain"):null}const v1e=/Mac/i.test(navigator.platform),b1e=100,x1e=e=>!!(e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="Home"||v1e&&e.key==="a"&&e.ctrlKey===!0);class w1e extends Ci{constructor(t,r){super(t,r),xe(this,"isListening",!1),xe(this,"selectionChangeDeadline",0),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,r){let{line:n,event:s}=r;if(!(n instanceof gi)||!n.uiNode)return!0;const i=getComputedStyle(n.domNode).direction==="rtl";return i&&s.key!=="ArrowRight"||!i&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(s.shiftKey?1:0),se.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&x1e(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+b1e,this.isListening)return;this.isListening=!0;const t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const r=t.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const n=this.quill.scroll.find(r.startContainer);if(!(n instanceof gi)||!n.uiNode)return;const s=document.createRange();s.setStartAfter(n.uiNode),s.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(s)}}se.register({"blots/block":Xr,"blots/block/embed":Ts,"blots/break":Ei,"blots/container":mu,"blots/cursor":jw,"blots/embed":iA,"blots/inline":$l,"blots/scroll":ed,"blots/text":wi,"modules/clipboard":DW,"modules/history":MW,"modules/keyboard":Nw,"modules/uploader":zW,"modules/input":g1e,"modules/uiNode":w1e});class _1e extends Si{add(t,r){let n=0;if(r==="+1"||r==="-1"){const s=this.value(t)||0;n=r==="+1"?s+1:s-1}else typeof r=="number"&&(n=r);return n===0?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,r){return super.canAdd(t,r)||super.canAdd(t,parseInt(r,10))}value(t){return parseInt(super.value(t),10)||void 0}}const j1e=new _1e("indent","ql-indent",{scope:Pe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class oS extends Xr{}xe(oS,"blotName","blockquote"),xe(oS,"tagName","blockquote");class aS extends Xr{static formats(t){return this.tagName.indexOf(t.tagName)+1}}xe(aS,"blotName","header"),xe(aS,"tagName",["H1","H2","H3","H4","H5","H6"]);class Jm extends mu{}Jm.blotName="list-container";Jm.tagName="OL";class Xm extends Xr{static create(t){const r=super.create();return r.setAttribute("data-list",t),r}static formats(t){return t.getAttribute("data-list")||void 0}static register(){se.register(Jm)}constructor(t,r){super(t,r);const n=r.ownerDocument.createElement("span"),s=i=>{if(!t.isEnabled())return;const o=this.statics.formats(r,t);o==="checked"?(this.format("list","unchecked"),i.preventDefault()):o==="unchecked"&&(this.format("list","checked"),i.preventDefault())};n.addEventListener("mousedown",s),n.addEventListener("touchstart",s),this.attachUI(n)}format(t,r){t===this.statics.blotName&&r?this.domNode.setAttribute("data-list",r):super.format(t,r)}}Xm.blotName="list";Xm.tagName="LI";Jm.allowedChildren=[Xm];Xm.requiredContainer=Jm;class am extends $l{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}xe(am,"blotName","bold"),xe(am,"tagName",["STRONG","B"]);class lS extends am{}xe(lS,"blotName","italic"),xe(lS,"tagName",["EM","I"]);class il extends $l{static create(t){const r=super.create(t);return r.setAttribute("href",this.sanitize(t)),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}static formats(t){return t.getAttribute("href")}static sanitize(t){return FW(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,r){t!==this.statics.blotName||!r?super.format(t,r):this.domNode.setAttribute("href",this.constructor.sanitize(r))}}xe(il,"blotName","link"),xe(il,"tagName","A"),xe(il,"SANITIZED_URL","about:blank"),xe(il,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function FW(e,t){const r=document.createElement("a");r.href=e;const n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}class cS extends $l{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}xe(cS,"blotName","script"),xe(cS,"tagName",["SUB","SUP"]);class uS extends am{}xe(uS,"blotName","strike"),xe(uS,"tagName",["S","STRIKE"]);class dS extends $l{}xe(dS,"blotName","underline"),xe(dS,"tagName","U");class Hy extends iA{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const r=super.create(t);return typeof t=="string"&&(window.katex.render(t,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",t)),r}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}xe(Hy,"blotName","formula"),xe(Hy,"className","ql-formula"),xe(Hy,"tagName","SPAN");const J5=["alt","height","width"];class hS extends us{static create(t){const r=super.create(t);return typeof t=="string"&&r.setAttribute("src",this.sanitize(t)),r}static formats(t){return J5.reduce((r,n)=>(t.hasAttribute(n)&&(r[n]=t.getAttribute(n)),r),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return FW(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,r){J5.indexOf(t)>-1?r?this.domNode.setAttribute(t,r):this.domNode.removeAttribute(t):super.format(t,r)}}xe(hS,"blotName","image"),xe(hS,"tagName","IMG");const X5=["height","width"];class Ky extends Ts{static create(t){const r=super.create(t);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen","true"),r.setAttribute("src",this.sanitize(t)),r}static formats(t){return X5.reduce((r,n)=>(t.hasAttribute(n)&&(r[n]=t.getAttribute(n)),r),{})}static sanitize(t){return il.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,r){X5.indexOf(t)>-1?r?this.domNode.setAttribute(t,r):this.domNode.removeAttribute(t):super.format(t,r)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}xe(Ky,"blotName","video"),xe(Ky,"className","ql-video"),xe(Ky,"tagName","IFRAME");const Jf=new Si("code-token","hljs",{scope:Pe.INLINE});class ca extends $l{static formats(t,r){for(;t!=null&&t!==r.domNode;){if(t.classList&&t.classList.contains(pn.className))return super.formats(t,r);t=t.parentNode}}constructor(t,r,n){super(t,r,n),Jf.add(this.domNode,n)}format(t,r){t!==ca.blotName?super.format(t,r):r?Jf.add(this.domNode,r):(Jf.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Jf.value(this.domNode)||this.unwrap()}}ca.blotName="code-token";ca.className="ql-token";class Ss extends pn{static create(t){const r=super.create(t);return typeof t=="string"&&r.setAttribute("data-language",t),r}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,r){t===this.statics.blotName&&r?this.domNode.setAttribute("data-language",r):super.format(t,r)}replaceWith(t,r){return this.formatAt(0,this.length(),ca.blotName,!1),super.replaceWith(t,r)}}class xp extends gu{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,r){t===Ss.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(t,r)}))}formatAt(t,r,n,s){n===Ss.blotName&&(this.forceNext=!0),super.formatAt(t,r,n,s)}highlight(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const n=`${Array.from(this.domNode.childNodes).filter(i=>i!==this.uiNode).map(i=>i.textContent).join(`
`)}
`,s=Ss.formats(this.children.head.domNode);if(r||this.forceNext||this.cachedText!==n){if(n.trim().length>0||this.cachedText==null){const i=this.children.reduce((a,l)=>a.concat(_W(l,!1)),new Oe),o=t(n,s);i.diff(o).reduce((a,l)=>{let{retain:c,attributes:u}=l;return c?(u&&Object.keys(u).forEach(h=>{[Ss.blotName,ca.blotName].includes(h)&&this.formatAt(a,c,h,u[h])}),a+c):a},0)}this.cachedText=n,this.forceNext=!1}}html(t,r){const[n]=this.children.find(t);return`<pre data-language="${n?Ss.formats(n.domNode):"plain"}">
${_w(this.code(t,r))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const r=Ss.formats(this.children.head.domNode);r!==this.uiNode.value&&(this.uiNode.value=r)}}}xp.allowedChildren=[Ss];Ss.requiredContainer=xp;Ss.allowedChildren=[ca,jw,wi,Ei];const k1e=(e,t,r)=>{if(typeof e.versionString=="string"){const n=e.versionString.split(".")[0];if(parseInt(n,10)>=11)return e.highlight(r,{language:t}).value}return e.highlight(t,r).value};class $W extends Ci{static register(){se.register(ca,!0),se.register(Ss,!0),se.register(xp,!0)}constructor(t,r){if(super(t,r),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,s)=>{let{key:i}=s;return n[i]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(se.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof xp))return;const r=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:s,label:i}=n;const o=r.ownerDocument.createElement("option");o.textContent=i,o.setAttribute("value",s),r.appendChild(o)}),r.addEventListener("change",()=>{t.format(Ss.blotName,r.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(r),t.children.head&&(r.value=Ss.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(se.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(se.sources.USER);const n=this.quill.getSelection();(t==null?this.quill.scroll.descendants(xp):[t]).forEach(s=>{s.highlight(this.highlightBlot,r)}),this.quill.update(se.sources.SILENT),n!=null&&this.quill.setSelection(n,se.sources.SILENT)}highlightBlot(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(r=this.languages[r]?r:"plain",r==="plain")return _w(t).split(`
`).reduce((s,i,o)=>(o!==0&&s.insert(`
`,{[pn.blotName]:r}),s.insert(i)),new Oe);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(pn.className),n.innerHTML=k1e(this.options.hljs,r,t),hA(this.quill.scroll,n,[(s,i)=>{const o=Jf.value(s);return o?i.compose(new Oe().retain(i.length(),{[ca.blotName]:o})):i}],[(s,i)=>s.data.split(`
`).reduce((o,a,l)=>(l!==0&&o.insert(`
`,{[pn.blotName]:r}),o.insert(a)),i)],new WeakMap)}}$W.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const fS=class UW extends Xr{static create(t){const r=super.create();return t?r.setAttribute("data-row",t):r.setAttribute("data-row",fA()),r}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,r){t===UW.blotName&&r?this.domNode.setAttribute("data-row",r):super.format(t,r)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};xe(fS,"blotName","table"),xe(fS,"tagName","TD");let $o=fS;class ua extends mu{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),r=this.children.tail.formats(),n=this.next.children.head.formats(),s=this.next.children.tail.formats();return t.table===r.table&&t.table===n.table&&t.table===s.table}return!1}optimize(t){super.optimize(t),this.children.forEach(r=>{if(r.next==null)return;const n=r.formats(),s=r.next.formats();if(n.table!==s.table){const i=this.splitAfter(r);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}xe(ua,"blotName","table-row"),xe(ua,"tagName","TR");class eo extends mu{}xe(eo,"blotName","table-body"),xe(eo,"tagName","TBODY");class fh extends mu{balanceCells(){const t=this.descendants(ua),r=t.reduce((n,s)=>Math.max(s.children.length,n),0);t.forEach(n=>{new Array(r-n.children.length).fill(0).forEach(()=>{let s;n.children.head!=null&&(s=$o.formats(n.children.head.domNode));const i=this.scroll.create($o.blotName,s);n.appendChild(i),i.optimize()})})}cells(t){return this.rows().map(r=>r.children.at(t))}deleteColumn(t){const[r]=this.descendant(eo);r==null||r.children.head==null||r.children.forEach(n=>{const s=n.children.at(t);s!=null&&s.remove()})}insertColumn(t){const[r]=this.descendant(eo);r==null||r.children.head==null||r.children.forEach(n=>{const s=n.children.at(t),i=$o.formats(n.children.head.domNode),o=this.scroll.create($o.blotName,i);n.insertBefore(o,s)})}insertRow(t){const[r]=this.descendant(eo);if(r==null||r.children.head==null)return;const n=fA(),s=this.scroll.create(ua.blotName);r.children.head.children.forEach(()=>{const o=this.scroll.create($o.blotName,n);s.appendChild(o)});const i=r.children.at(t);r.insertBefore(s,i)}rows(){const t=this.children.head;return t==null?[]:t.children.map(r=>r)}}xe(fh,"blotName","table-container"),xe(fh,"tagName","TABLE");fh.allowedChildren=[eo];eo.requiredContainer=fh;eo.allowedChildren=[ua];ua.requiredContainer=eo;ua.allowedChildren=[$o];$o.requiredContainer=ua;function fA(){return`row-${Math.random().toString(36).slice(2,6)}`}class N1e extends Ci{static register(){se.register($o),se.register(ua),se.register(eo),se.register(fh)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(fh).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,r]=this.getTable();r!=null&&(t.deleteColumn(r.cellOffset()),this.quill.update(se.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(se.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const r=t.offset();t.remove(),this.quill.update(se.sources.USER),this.quill.setSelection(r,se.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[r,n]=this.quill.getLine(t.index);if(r==null||r.statics.blotName!==$o.blotName)return[null,null,null,-1];const s=r.parent;return[s.parent.parent,s,r,n]}insertColumn(t){const r=this.quill.getSelection();if(!r)return;const[n,s,i]=this.getTable(r);if(i==null)return;const o=i.cellOffset();n.insertColumn(o+t),this.quill.update(se.sources.USER);let a=s.rowOffset();t===0&&(a+=1),this.quill.setSelection(r.index+a,r.length,se.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const r=this.quill.getSelection();if(!r)return;const[n,s,i]=this.getTable(r);if(i==null)return;const o=s.rowOffset();n.insertRow(o+t),this.quill.update(se.sources.USER),t>0?this.quill.setSelection(r,se.sources.SILENT):this.quill.setSelection(r.index+s.children.length,r.length,se.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,r){const n=this.quill.getSelection();if(n==null)return;const s=new Array(t).fill(0).reduce(i=>{const o=new Array(r).fill(`
`).join("");return i.insert(o,{table:fA()})},new Oe().retain(n.index));this.quill.updateContents(s,se.sources.USER),this.quill.setSelection(n.index,se.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(se.events.SCROLL_OPTIMIZE,t=>{t.some(r=>["TD","TR","TBODY","TABLE"].includes(r.target.tagName)?(this.quill.once(se.events.TEXT_CHANGE,(n,s,i)=>{i===se.sources.USER&&this.balanceTables()}),!0):!1)})}}const Q5=ba("quill:toolbar");class pA extends Ci{constructor(t,r){var n,s;if(super(t,r),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),S1e(i,this.options.container),(s=(n=t.container)==null?void 0:n.parentNode)==null||s.insertBefore(i,t.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Q5.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var o;const a=(o=this.options.handlers)==null?void 0:o[i];a&&this.addHandler(i,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(se.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(t,r){this.handlers[t]=r}attach(t){let r=Array.from(t.classList).find(s=>s.indexOf("ql-")===0);if(!r)return;if(r=r.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[r]==null&&this.quill.scroll.query(r)==null){Q5.warn("ignoring attaching to nonexistent format",r,t);return}const n=t.tagName==="SELECT"?"change":"click";t.addEventListener(n,s=>{let i;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const a=t.options[t.selectedIndex];a.hasAttribute("selected")?i=!1:i=a.value||!1}else t.classList.contains("ql-active")?i=!1:i=t.value||!t.hasAttribute("value"),s.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[r]!=null)this.handlers[r].call(this,i);else if(this.quill.scroll.query(r).prototype instanceof us){if(i=prompt(`Enter ${r}`),!i)return;this.quill.updateContents(new Oe().retain(o.index).delete(o.length).insert({[r]:i}),se.sources.USER)}else this.quill.format(r,i,se.sources.USER);this.update(o)}),this.controls.push([r,t])}update(t){const r=t==null?{}:this.quill.getFormat(t);this.controls.forEach(n=>{const[s,i]=n;if(i.tagName==="SELECT"){let o=null;if(t==null)o=null;else if(r[s]==null)o=i.querySelector("option[selected]");else if(!Array.isArray(r[s])){let a=r[s];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),o=i.querySelector(`option[value="${a}"]`)}o==null?(i.value="",i.selectedIndex=-1):o.selected=!0}else if(t==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const o=r[s],a=o===i.getAttribute("value")||o!=null&&o.toString()===i.getAttribute("value")||o==null&&!i.getAttribute("value");i.classList.toggle("ql-active",a),i.setAttribute("aria-pressed",a.toString())}else{const o=r[s]!=null;i.classList.toggle("ql-active",o),i.setAttribute("aria-pressed",o.toString())}})}}pA.DEFAULTS={};function eL(e,t,r){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${t}`),n.setAttribute("aria-pressed","false"),r!=null?(n.value=r,n.setAttribute("aria-label",`${t}: ${r}`)):n.setAttribute("aria-label",t),e.appendChild(n)}function S1e(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(r=>{const n=document.createElement("span");n.classList.add("ql-formats"),r.forEach(s=>{if(typeof s=="string")eL(n,s);else{const i=Object.keys(s)[0],o=s[i];Array.isArray(o)?E1e(n,i,o):eL(n,i,o)}}),e.appendChild(n)})}function E1e(e,t,r){const n=document.createElement("select");n.classList.add(`ql-${t}`),r.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),n.appendChild(i)}),e.appendChild(n)}pA.DEFAULTS={container:null,handlers:{clean(){const e=this.quill.getSelection();if(e!=null)if(e.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(r=>{this.quill.scroll.query(r,Pe.INLINE)!=null&&this.quill.format(r,!1,se.sources.USER)})}else this.quill.removeFormat(e.index,e.length,se.sources.USER)},direction(e){const{align:t}=this.quill.getFormat();e==="rtl"&&t==null?this.quill.format("align","right",se.sources.USER):!e&&t==="right"&&this.quill.format("align",!1,se.sources.USER),this.quill.format("direction",e,se.sources.USER)},indent(e){const t=this.quill.getSelection(),r=this.quill.getFormat(t),n=parseInt(r.indent||0,10);if(e==="+1"||e==="-1"){let s=e==="+1"?1:-1;r.direction==="rtl"&&(s*=-1),this.quill.format("indent",n+s,se.sources.USER)}},link(e){e===!0&&(e=prompt("Enter link URL:")),this.quill.format("link",e,se.sources.USER)},list(e){const t=this.quill.getSelection(),r=this.quill.getFormat(t);e==="check"?r.list==="checked"||r.list==="unchecked"?this.quill.format("list",!1,se.sources.USER):this.quill.format("list","unchecked",se.sources.USER):this.quill.format("list",e,se.sources.USER)}}};const C1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',T1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',A1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',O1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',P1e='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',R1e='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',I1e='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',D1e='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',tL='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',L1e='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',M1e='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',z1e='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',F1e='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',$1e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',U1e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',q1e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',B1e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',V1e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',W1e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',H1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',K1e='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Z1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',G1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Y1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',J1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',X1e='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Q1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',eFe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',tFe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',rFe='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',nFe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',sFe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',iFe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',lm={align:{"":C1e,center:T1e,right:A1e,justify:O1e},background:P1e,blockquote:R1e,bold:I1e,clean:D1e,code:tL,"code-block":tL,color:L1e,direction:{"":M1e,rtl:z1e},formula:F1e,header:{1:$1e,2:U1e,3:q1e,4:B1e,5:V1e,6:W1e},italic:H1e,image:K1e,indent:{"+1":Z1e,"-1":G1e},link:Y1e,list:{bullet:J1e,check:X1e,ordered:Q1e},script:{sub:eFe,super:tFe},strike:rFe,table:nFe,underline:sFe,video:iFe},oFe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let rL=0;function nL(e,t){e.setAttribute(t,`${e.getAttribute(t)!=="true"}`)}class Sw{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",r=>{switch(r.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),r.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),nL(this.label,"aria-expanded"),nL(this.options,"aria-hidden")}buildItem(t){const r=document.createElement("span");r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&r.setAttribute("data-value",n),t.textContent&&r.setAttribute("data-label",t.textContent),r.addEventListener("click",()=>{this.selectItem(r,!0)}),r.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(r,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),r}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=oFe,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${rL}`,rL+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(r=>{const n=this.buildItem(r);t.appendChild(n),r.selected===!0&&this.selectItem(n)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.container.querySelector(".ql-selected");t!==n&&(n!=null&&n.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),r&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const r=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}class qW extends Sw{constructor(t,r){super(t),this.label.innerHTML=r,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(t){const r=super.buildItem(t);return r.style.backgroundColor=t.getAttribute("value")||"",r}selectItem(t,r){super.selectItem(t,r);const n=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=s:n.style.fill=s)}}class BW extends Sw{constructor(t,r){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=r[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,r){super.selectItem(t,r);const n=t||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}}const aFe=e=>{const{overflowY:t}=getComputedStyle(e,null);return t!=="visible"&&t!=="clip"};class VW{constructor(t,r){this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,aFe(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const r=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${r}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let o=0;if(i.right>s.right&&(o=s.right-i.right,this.root.style.left=`${r+o}px`),i.left<s.left&&(o=s.left-i.left,this.root.style.left=`${r+o}px`),i.bottom>s.bottom){const a=i.bottom-i.top,l=t.bottom-t.top+a;this.root.style.top=`${n-l}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const lFe=[!1,"center","right","justify"],cFe=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],uFe=[!1,"serif","monospace"],dFe=["1","2","3",!1],hFe=["small",!1,"large","huge"];class Qm extends kw{constructor(t,r){super(t,r);const n=s=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};t.emitter.listenDOM("click",document.body,n)}addModule(t){const r=super.addModule(t);return t==="toolbar"&&this.extendToolbar(r),r}buildButtons(t,r){Array.from(t).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),r[s]!=null))if(s==="direction")n.innerHTML=r[s][""]+r[s].rtl;else if(typeof r[s]=="string")n.innerHTML=r[s];else{const i=n.value||"";i!=null&&r[s][i]&&(n.innerHTML=r[s][i])}})})}buildPickers(t,r){this.pickers=Array.from(t).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&Of(s,lFe),typeof r.align=="object"))return new BW(s,r.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&Of(s,cFe,i==="background"?"#ffffff":"#000000"),new qW(s,r[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?Of(s,uFe):s.classList.contains("ql-header")?Of(s,dFe):s.classList.contains("ql-size")&&Of(s,hFe)),new Sw(s)});const n=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(Ce.events.EDITOR_CHANGE,n)}}Qm.DEFAULTS=ul({},kw.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let e=this.container.querySelector("input.ql-image[type=file]");e==null&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),e.classList.add("ql-image"),e.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,e.files),e.value=""}),this.container.appendChild(e)),e.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class WW extends VW{constructor(t,r){super(t,r),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;r!=null?this.textbox.value=r:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:r}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Ce.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Ce.sources.USER)),this.quill.root.scrollTop=r;break}case"video":t=fFe(t);case"formula":{if(!t)break;const r=this.quill.getSelection(!0);if(r!=null){const n=r.index+r.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,Ce.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",Ce.sources.USER),this.quill.setSelection(n+2,Ce.sources.USER)}break}}this.textbox.value="",this.hide()}}function fFe(e){let t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:e}function Of(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(n=>{const s=document.createElement("option");n===r?s.setAttribute("selected","selected"):s.setAttribute("value",String(n)),e.appendChild(s)})}const pFe=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class HW extends WW{constructor(t,r){super(t,r),this.quill.on(Ce.events.EDITOR_CHANGE,(n,s,i,o)=>{if(n===Ce.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&o===Ce.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const a=this.quill.getLines(s.index,s.length);if(a.length===1){const l=this.quill.getBounds(s);l!=null&&this.position(l)}else{const l=a[a.length-1],c=this.quill.getIndex(l),u=Math.min(l.length()-1,s.index+s.length-c),h=this.quill.getBounds(new Xc(c,u));h!=null&&this.position(h)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ce.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const r=this.quill.getBounds(t);r!=null&&this.position(r)}},1)})}cancel(){this.show()}position(t){const r=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",r!==0&&(n.style.marginLeft=`${-1*r-n.offsetWidth/2}px`),r}}xe(HW,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class KW extends Qm{constructor(t,r){r.modules.toolbar!=null&&r.modules.toolbar.container==null&&(r.modules.toolbar.container=pFe),super(t,r),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new HW(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),lm),this.buildPickers(t.container.querySelectorAll("select"),lm))}}KW.DEFAULTS=ul({},Qm.DEFAULTS,{modules:{toolbar:{handlers:{link(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1,se.sources.USER)}}}}});const mFe=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class ZW extends WW{constructor(){super(...arguments),xe(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,Ce.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(Ce.events.SELECTION_CHANGE,(t,r,n)=>{if(t!=null){if(t.length===0&&n===Ce.sources.USER){const[s,i]=this.quill.scroll.descendant(il,t.index);if(s!=null){this.linkRange=new Xc(t.index-i,s.length());const o=il.formats(s.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}xe(ZW,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class GW extends Qm{constructor(t,r){r.modules.toolbar!=null&&r.modules.toolbar.container==null&&(r.modules.toolbar.container=mFe),super(t,r),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),lm),this.buildPickers(t.container.querySelectorAll("select"),lm),this.tooltip=new ZW(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(r,n)=>{t.handlers.link.call(t,!n.format.link)}))}}GW.DEFAULTS=ul({},Qm.DEFAULTS,{modules:{toolbar:{handlers:{link(e){if(e){const t=this.quill.getSelection();if(t==null||t.length===0)return;let r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&r.indexOf("mailto:")!==0&&(r=`mailto:${r}`);const{tooltip:n}=this.quill.theme;n.edit("link",r)}else this.quill.format("link",!1,se.sources.USER)}}}}});se.register({"attributors/attribute/direction":EW,"attributors/class/align":kW,"attributors/class/background":Rze,"attributors/class/color":Pze,"attributors/class/direction":CW,"attributors/class/font":OW,"attributors/class/size":RW,"attributors/style/align":NW,"attributors/style/background":lA,"attributors/style/color":aA,"attributors/style/direction":TW,"attributors/style/font":PW,"attributors/style/size":IW},!0);se.register({"formats/align":kW,"formats/direction":CW,"formats/indent":j1e,"formats/background":lA,"formats/color":aA,"formats/font":OW,"formats/size":RW,"formats/blockquote":oS,"formats/code-block":pn,"formats/header":aS,"formats/list":Xm,"formats/bold":am,"formats/code":cA,"formats/italic":lS,"formats/link":il,"formats/script":cS,"formats/strike":uS,"formats/underline":dS,"formats/formula":Hy,"formats/image":hS,"formats/video":Ky,"modules/syntax":$W,"modules/table":N1e,"modules/toolbar":pA,"themes/bubble":KW,"themes/snow":GW,"ui/icons":lm,"ui/picker":Sw,"ui/icon-picker":BW,"ui/color-picker":qW,"ui/tooltip":VW},!0);class eg extends de.Component{constructor(t){super(t),this.editingAreaRef=v.createRef(),this.containerRef=v.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(n,s,i,o)=>{var a,l;n==="text-change"?(a=this.onEditorChangeText)==null||a.call(this,this.editor.root.innerHTML,s,o,this.unprivilegedEditor):n==="selection-change"&&((l=this.onEditorChangeSelection)==null||l.call(this,s,o,this.unprivilegedEditor))};const r=this.isControlled()?t.value:t.defaultValue;this.value=r??""}validateProps(t){if(de.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(de.Children.count(t.children)){const r=de.Children.only(t.children);if((r==null?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(t,r){if(this.validateProps(t),!this.editor||this.state.generation!==r.generation)return!0;if("value"in t){const n=this.getEditorContents(),s=t.value??"";this.isEqualValue(s,n)||this.setEditorContents(this.editor,s)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),[...this.cleanProps,...this.dirtyProps].some(n=>!Za(t[n],this.props[n]))}shouldComponentRegenerate(t){return this.dirtyProps.some(r=>!Za(t[r],this.props[r]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(t,r){if(this.editor&&this.shouldComponentRegenerate(t)){const n=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){const{delta:n,selection:s}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const i=this.editor;i.setContents(n),sL(()=>this.setEditorSelection(i,s))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){var t,r;if(!this.editor)return;this.unhookEditor(this.editor);const n=(t=this.props.modules)==null?void 0:t.toolbar;if(!(typeof n=="object"&&n&&"container"in n&&typeof n.container=="string"||typeof n=="string")){const s=(r=this.containerRef.current)==null?void 0:r.querySelector(".ql-toolbar");s&&s.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(t,r){const n=new se(t,r);return r.tabIndex!=null&&this.setEditorTabIndex(n,r.tabIndex),this.hookEditor(n),n}hookEditor(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)}unhookEditor(t){t.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(t){return t&&t.ops}isEqualValue(t,r){return this.isDelta(t)&&this.isDelta(r)?Za(t.ops,r.ops):Za(t,r)}setEditorContents(t,r){this.value=r;const n=this.getEditorSelection();typeof r=="string"?t.setContents(t.clipboard.convert({html:r})):t.setContents(r),sL(()=>this.setEditorSelection(t,n))}setEditorSelection(t,r){if(this.selection=r,r){const n=t.getLength();r.index=Math.max(0,Math.min(r.index,n-1)),r.length=Math.max(0,Math.min(r.length,n-1-r.index)),t.setSelection(r)}}setEditorTabIndex(t,r){var n;(n=t==null?void 0:t.scroll)!=null&&n.domNode&&(t.scroll.domNode.tabIndex=r)}setEditorReadOnly(t,r){r?t.disable():t.enable()}makeUnprivilegedEditor(t){const r=t;return{getHTML:()=>r.root.innerHTML,getSemanticHTML:r.getSemanticHTML.bind(r),getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}}getEditingArea(){const t=this.editingAreaRef.current;if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t}renderEditingArea(){const{children:t,preserveWhitespace:r}=this.props,{generation:n}=this.state,s={key:n,ref:this.editingAreaRef};return de.Children.count(t)?de.cloneElement(de.Children.only(t),s):r?de.createElement("pre",{...s}):de.createElement("div",{...s})}render(){return de.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(t,r,n,s){var i,o;if(!this.editor)return;const a=this.isDelta(this.value)?s.getContents():s.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=a,(o=(i=this.props).onChange)==null||o.call(i,t,r,n,s))}onEditorChangeSelection(t,r,n){var s,i,o,a,l,c;if(!this.editor)return;const u=this.getEditorSelection(),h=!u&&t,f=u&&!t;Za(t,u)||(this.selection=t,(i=(s=this.props).onChangeSelection)==null||i.call(s,t,r,n),h?(a=(o=this.props).onFocus)==null||a.call(o,t,r,n):f&&((c=(l=this.props).onBlur)==null||c.call(l,u,r,n)))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}eg.displayName="React Quill";eg.Quill=se;eg.defaultProps={theme:"snow",modules:{},readOnly:!1};function sL(e){Promise.resolve().then(e)}const gFe=async()=>{const{data:e,error:t}=await le.from("posts").select("*");if(t)throw new Error(t.message);return e},yFe=async e=>{const{data:{user:t},error:r}=await le.auth.getUser();if(r)throw new Error(r.message);if(!t)throw new Error("User not authenticated.");console.log("Attempting to create post with data:",{...e,author_id:t.id});const{data:n,error:s}=await le.from("posts").insert({...e,author_id:t.id}).select();if(s)throw new Error(s.message);if(!n||n.length===0)throw new Error("Failed to create post: No data returned.");return n[0]},vFe=async e=>{const{data:t,error:r}=await le.from("posts").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},bFe=async e=>{const{error:t}=await le.from("posts").delete().eq("id",e);if(t)throw new Error(t.message)},xFe=({post:e,onSave:t,onCancel:r})=>{const[n,s]=v.useState({title:(e==null?void 0:e.title)||"",content:(e==null?void 0:e.content)||"",status:(e==null?void 0:e.status)||"draft",slug:(e==null?void 0:e.slug)||""}),i=()=>{if(!n.title.trim()){Fi.error("Title cannot be empty.");return}if(!n.slug.trim()){Fi.error("Slug cannot be empty.");return}const o=e?{...e,...n}:n;t(o)};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Post":"Create New Post"}),d.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-gray-700",children:d.jsx(pl,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:n.title,onChange:o=>s({...n,title:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter post title...",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug"}),d.jsx("input",{type:"text",value:n.slug,onChange:o=>s({...n,slug:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"post-url-slug"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),d.jsx(eg,{theme:"snow",value:n.content,onChange:o=>s({...n,content:o}),className:"h-64 mb-12"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:n.status,onChange:o=>s({...n,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"archived",children:"Archived"})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsxs("button",{type:"button",onClick:i,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(IE,{className:"w-4 h-4"}),"Save Post"]}),d.jsx("button",{type:"button",onClick:r,className:"flex items-center gap-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},wFe=()=>{const e=ha(),[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,o]=v.useState(""),[a,l]=v.useState("all"),{data:c,isLoading:u,isError:h,error:f}=It({queryKey:["posts"],queryFn:gFe}),p=rr({mutationFn:yFe,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]}),r(!1),s(null)}}),y=rr({mutationFn:vFe,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]}),r(!1),s(null)}}),m=rr({mutationFn:bFe,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]})}}),b=_=>{if(n)y.mutate(_);else{const{...j}=_;p.mutate(j)}},x=_=>{window.confirm("Are you sure you want to delete this post?")&&m.mutate(_)},w=(c==null?void 0:c.filter(_=>{const j=_.title.toLowerCase().includes(i.toLowerCase()),k=a==="all"||_.status===a;return j&&k}))||[];return u?d.jsx("div",{children:"Loading posts..."}):h?d.jsxs("div",{children:["Error loading posts: ",f==null?void 0:f.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(xFe,{post:n,onSave:b,onCancel:()=>{r(!1),s(null)}}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Posts"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Go,{className:"w-4 h-4"}),"New Post"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(ou,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:_=>o(_.target.value),placeholder:"Search posts...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsxs("select",{value:a,onChange:_=>l(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"archived",children:"Archived"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Status"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Author"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Date"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Views"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:w.map(_=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:_.title})}),d.jsx("td",{className:"py-4 px-6",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.status==="published"?"bg-green-100 text-green-800":_.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:_.status})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:_.author_id}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:new Date(_.created_at).toLocaleDateString()}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:_.views}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(_),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ax,{className:"w-4 h-4"})}),d.jsx("button",{className:"p-1 text-gray-500 hover:text-green-600",children:d.jsx(Sm,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>x(_.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(au,{className:"w-4 h-4"})})]})})]},_.id))})]})})]})})};function _Fe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jFe=_Fe(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const YW=v.createContext(null);function kFe(e,t){return{getTheme:function(){return t??null}}}function Yh(){const e=v.useContext(YW);return e==null&&jFe(8),e}function NFe(e){return{}}const mA={},SFe={},JW={},Mc={},Td={},_b={},Ad={},gA={},pS={},cm={},um={},ol={},yA={},vA={},EFe={},XW={},CFe={},QW={},TFe={},eH={},tH={},jb={},AFe={},rH={},nH={},sH={},OFe={},PFe={},RFe={},iL={},iH={},IFe={},oH={},aH={},DFe={},Ew={},bA={},mS={},LFe={},MFe={},jy={},ky={},zFe={},FFe={},$Fe={},Ti=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,UFe=Ti&&"documentMode"in document?document.documentMode:null,ei=Ti&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),dl=Ti&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),kb=!(!Ti||!("InputEvent"in window)||UFe)&&"getTargetRanges"in new window.InputEvent("input"),xA=Ti&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Cw=Ti&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,qFe=Ti&&/Android/.test(navigator.userAgent),lH=Ti&&/^(?=.*Chrome).*/i.test(navigator.userAgent),BFe=Ti&&qFe&&lH,wA=Ti&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!lH,tg=1,Ul=3,Qc=0,cH=1,ph=2,VFe=0,WFe=1,HFe=2,Nb=4,Sb=8,_A=128,KFe=112|(3|Nb|Sb)|_A,jA=1,kA=2,NA=3,SA=4,EA=5,CA=6,Tw=xA||Cw||wA?" ":"​",da=`

`,ZFe=dl?" ":Tw,uH="֑-߿יִ-﷽ﹰ-ﻼ",dH="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",GFe=new RegExp("^[^"+dH+"]*["+uH+"]"),YFe=new RegExp("^[^"+uH+"]*["+dH+"]"),eu={bold:1,code:16,highlight:_A,italic:2,strikethrough:Nb,subscript:32,superscript:64,underline:Sb},JFe={directionless:1,unmergeable:2},oL={center:kA,end:CA,justify:SA,left:jA,right:NA,start:EA},XFe={[kA]:"center",[CA]:"end",[SA]:"justify",[jA]:"left",[NA]:"right",[EA]:"start"},QFe={normal:0,segmented:2,token:1},e$e={[VFe]:"normal",[HFe]:"segmented",[WFe]:"token"};function t$e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var we=t$e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function Eb(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const r$e=100;let gS=!1,TA=0;function n$e(e){TA=e.timeStamp}function sj(e,t,r){return t.__lexicalLineBreak===e||e[`__lexicalKey_${r._key}`]!==void 0}function s$e(e,t,r){const n=lo(r._window);let s=null,i=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,i=n.focusOffset);const o=e.nodeValue;o!==null&&RA(t,o,s,i,!1)}function i$e(e,t,r){if(me(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return t.nodeType===Ul&&r.isAttached()}function hH(e,t,r){gS=!0;const n=performance.now()-TA>r$e;try{ns(e,()=>{const s=Me()||function(f){return f.getEditorState().read(()=>{const p=Me();return p!==null?p.clone():null})}(e),i=new Map,o=e.getRootElement(),a=e._editorState,l=e._blockCursorElement;let c=!1,u="";for(let f=0;f<t.length;f++){const p=t[f],y=p.type,m=p.target;let b=tu(m,a);if(!(b===null&&m!==o||Rt(b))){if(y==="characterData")n&&ve(b)&&i$e(s,m,b)&&s$e(m,b,e);else if(y==="childList"){c=!0;const x=p.addedNodes;for(let j=0;j<x.length;j++){const k=x[j],S=yH(k),C=k.parentNode;if(C!=null&&k!==l&&S===null&&(k.nodeName!=="BR"||!sj(k,C,e))){if(dl){const E=k.innerText||k.nodeValue;E&&(u+=E)}C.removeChild(k)}}const w=p.removedNodes,_=w.length;if(_>0){let j=0;for(let k=0;k<_;k++){const S=w[k];(S.nodeName==="BR"&&sj(S,m,e)||l===S)&&(m.appendChild(S),j++)}_!==j&&(m===o&&(b=bH(a)),i.set(m,b))}}}}if(i.size>0)for(const[f,p]of i)if(ie(p)){const y=p.getChildrenKeys();let m=f.firstChild;for(let b=0;b<y.length;b++){const x=y[b],w=e.getElementByKey(x);w!==null&&(m==null?(f.appendChild(w),m=w):m!==w&&f.replaceChild(w,m),m=m.nextSibling)}}else ve(p)&&p.markDirty();const h=r.takeRecords();if(h.length>0){for(let f=0;f<h.length;f++){const p=h[f],y=p.addedNodes,m=p.target;for(let b=0;b<y.length;b++){const x=y[b],w=x.parentNode;w==null||x.nodeName!=="BR"||sj(x,m,e)||w.removeChild(x)}}r.takeRecords()}s!==null&&(c&&(s.dirty=!0,ao(s)),dl&&jH(e)&&s.insertRawText(u))})}finally{gS=!1}}function fH(e){const t=e._observer;t!==null&&hH(e,t.takeRecords(),t)}function pH(e){(function(t){TA===0&&Pw(t).addEventListener("textInput",n$e,!0)})(e),e._observer=new MutationObserver((t,r)=>{hH(e,t,r)})}function aL(e,t){const r=e.__mode,n=e.__format,s=e.__style,i=t.__mode,o=t.__format,a=t.__style;return!(r!==null&&r!==i||n!==null&&n!==o||s!==null&&s!==a)}function lL(e,t){const r=e.mergeWithSibling(t),n=cr()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function cL(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&ve(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(aL(t,n)){n=lL(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&ve(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(aL(n,r)){n=lL(n,r);break}break}r.remove()}}else n.remove()}function mH(e){return uL(e.anchor),uL(e.focus),e}function uL(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),ve(n)){e.set(n.__key,s?n.getTextContentSize():0,"text");break}if(!ie(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element")}}let o$e=1;const a$e=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function AA(e){const t=document.activeElement;if(t===null)return!1;const r=t.nodeName;return Rt(tu(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&t.__lexicalEditor==null)}function rg(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!AA(t)&&gH(t)===e}catch{return!1}}function gH(e){let t=e;for(;t!=null;){const r=t.__lexicalEditor;if(r!=null)return r;t=Ow(t)}return null}function td(e){return e.isToken()||e.isSegmented()}function l$e(e){return e.nodeType===Ul}function Cb(e){let t=e;for(;t!=null;){if(l$e(t))return t;t=t.firstChild}return null}function yS(e,t,r){const n=eu[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"&&(s&=-33),s}function c$e(e,t){if(t!=null)return void(e.__key=t);qn(),BH();const r=cr(),n=xa(),s=""+o$e++;n._nodeMap.set(s,e),ie(e)?r._dirtyElements.set(s,!0):r._dirtyLeaves.add(s),r._cloneNotNeeded.add(s),r._dirtyType=cH,e.__key=s}function zc(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),i=e.getNextSibling();if(s===null)if(i!==null){const o=i.getWritable();n.__first=i.__key,o.__prev=null}else n.__first=null;else{const o=s.getWritable();if(i!==null){const a=i.getWritable();a.__prev=o.__key,o.__next=a.__key}else o.__next=null;r.__prev=null}if(i===null)if(s!==null){const o=s.getWritable();n.__last=s.__key,o.__next=null}else n.__last=null;else{const o=i.getWritable();if(s!==null){const a=s.getWritable();a.__next=o.__key,o.__prev=a.__key}else o.__prev=null;r.__next=null}n.__size--,r.__parent=null}}function Tb(e){BH();const t=e.getLatest(),r=t.__parent,n=xa(),s=cr(),i=n._nodeMap,o=s._dirtyElements;r!==null&&function(l,c,u){let h=l;for(;h!==null;){if(u.has(h))return;const f=c.get(h);if(f===void 0)break;u.set(h,!1),h=f.__parent}}(r,i,o);const a=t.__key;s._dirtyType=cH,ie(e)?o.set(a,!0):s._dirtyLeaves.add(a)}function Jr(e){qn();const t=cr(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=Nn(r);n!==null&&n.getWritable()}if(e!==null){const n=Nn(e);n!==null&&n.getWritable()}}}function al(){return ag()?null:cr()._compositionKey}function Nn(e,t){const r=(t||xa())._nodeMap.get(e);return r===void 0?null:r}function yH(e,t){const r=e[`__lexicalKey_${cr()._key}`];return r!==void 0?Nn(r,t):null}function tu(e,t){let r=e;for(;r!=null;){const n=yH(r,t);if(n!==null)return n;r=Ow(r)}return null}function vH(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function dL(e){return e.read(()=>wr().getTextContent())}function wr(){return bH(xa())}function bH(e){return e._nodeMap.get("root")}function ao(e){qn();const t=xa();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function pd(e){const t=cr(),r=function(n,s){let i=n;for(;i!=null;){const o=i[`__lexicalKey_${s._key}`];if(o!==void 0)return o;i=Ow(i)}return null}(e,t);return r===null?e===t.getRootElement()?Nn("root"):null:Nn(r)}function hL(e,t){return t?e.getTextContentSize():0}function xH(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function OA(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function wH(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function _H(e){return e.nodeType===Ul?e.nodeValue:null}function PA(e,t,r){const n=lo(t._window);if(n===null)return;const s=n.anchorNode;let{anchorOffset:i,focusOffset:o}=n;if(s!==null){let a=_H(s);const l=tu(s);if(a!==null&&ve(l)){if(a===Tw&&r){const c=r.length;a=r,i=c,o=c}a!==null&&RA(l,a,i,o,e)}}}function RA(e,t,r,n,s){let i=e;if(i.isAttached()&&(s||!i.isDirty())){const o=i.isComposing();let a=t;(o||s)&&t[t.length-1]===Tw&&(a=t.slice(0,-1));const l=i.getTextContent();if(s||a!==l){if(a===""){if(Jr(null),xA||Cw||wA)i.remove();else{const m=cr();setTimeout(()=>{m.update(()=>{i.isAttached()&&i.remove()})},20)}return}const c=i.getParent(),u=og(),h=i.getTextContentSize(),f=al(),p=i.getKey();if(i.isToken()||f!==null&&p===f&&!o||me(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===e.__key&&u.anchor.offset===0&&!i.canInsertTextBefore()&&!o||u.focus.key===e.__key&&u.focus.offset===h&&!i.canInsertTextAfter()&&!o))return void i.markDirty();const y=Me();if(!me(y)||r===null||n===null)return void i.setTextContent(a);if(y.setTextNodeRange(i,r,i,n),i.isSegmented()){const m=an(i.getTextContent());i.replace(m),i=m}i.setTextContent(a)}}}function u$e(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;const r=e.anchor.offset,n=t.getParentOrThrow(),s=t.isToken();return r===0?!t.canInsertTextBefore()||!n.canInsertTextBefore()&&!t.isComposing()||s||function(i){const o=i.getPreviousSibling();return(ve(o)||ie(o)&&o.isInline())&&!o.canInsertTextAfter()}(t):r===t.getTextContentSize()&&(!t.canInsertTextAfter()||!n.canInsertTextAfter()&&!t.isComposing()||s)}function fL(e){return e==="ArrowLeft"}function pL(e){return e==="ArrowRight"}function Xf(e,t){return ei?e:t}function mL(e){return e==="Enter"}function Pf(e){return e==="Backspace"}function Rf(e){return e==="Delete"}function gL(e,t,r){return e.toLowerCase()==="a"&&Xf(t,r)}function d$e(){const e=wr();ao(mH(e.select(0,e.getChildrenSize())))}function wp(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const i=Eb(s);return r[t]=i,i}return s}function IA(e,t,r,n,s){if(r.size===0)return;const i=n.__type,o=n.__key,a=t.get(i);a===void 0&&we(33,i);const l=a.klass;let c=e.get(l);c===void 0&&(c=new Map,e.set(l,c));const u=c.get(o),h=u==="destroyed"&&s==="created";(u===void 0||h)&&c.set(o,h?"updated":s)}function yL(e,t,r){const n=e.getParent();let s=r,i=e;return n!==null&&(t&&r===0?(s=i.getIndexWithinParent(),i=n):t||r!==i.getChildrenSize()||(s=i.getIndexWithinParent()+1,i=n)),i.getChildAtIndex(t?s-1:s)}function dm(e,t){const r=e.offset;if(e.type==="element")return yL(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?yL(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function jH(e){const t=Pw(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function Ne(e,t,r){return VH(e,t,r)}function Aw(e){return!fn(e)&&!e.isLastChild()&&!e.isInline()}function Ab(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&we(75,t),r}function Ow(e){const t=e.assignedSlot||e.parentElement;return t!==null&&t.nodeType===11?t.host:t}function vS(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function Pw(e){const t=e._window;return t===null&&we(78),t}function h$e(e){let t=e.getParentOrThrow();for(;t!==null;){if(Jh(t))return t;t=t.getParentOrThrow()}return t}function Jh(e){return fn(e)||ie(e)&&e.isShadowRoot()}function Rw(e){const t=cr(),r=e.constructor.getType(),n=t._nodes.get(r);n===void 0&&we(97);const s=n.replace;if(s!==null){const i=s(e);return i instanceof e.constructor||we(98),i}return e}function ij(e,t){!fn(e.getParent())||ie(t)||Rt(t)||we(99)}function oj(e){return(Rt(e)||ie(e)&&!e.canBeEmpty())&&!e.isInline()}function DA(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function f$e(e,t,r){let n=e._blockCursorElement;if(me(r)&&r.isCollapsed()&&r.anchor.type==="element"&&t.contains(document.activeElement)){const s=r.anchor,i=s.getNode(),o=s.offset;let a=!1,l=null;if(o===i.getChildrenSize())oj(i.getChildAtIndex(o-1))&&(a=!0);else{const c=i.getChildAtIndex(o);if(oj(c)){const u=c.getPreviousSibling();(u===null||oj(u))&&(a=!0,l=e.getElementByKey(c.__key))}}if(a){const c=e.getElementByKey(i.__key);return n===null&&(e._blockCursorElement=n=function(u){const h=u.theme,f=document.createElement("div");f.contentEditable="false",f.setAttribute("data-lexical-cursor","true");let p=h.blockCursor;if(p!==void 0){if(typeof p=="string"){const y=Eb(p);p=h.blockCursor=y}p!==void 0&&f.classList.add(...p)}return f}(e._config)),t.style.caretColor="transparent",void(l===null?c.appendChild(n):c.insertBefore(n,l))}}n!==null&&DA(n,e,t)}function lo(e){return Ti?(e||window).getSelection():null}function LA(e){return e.nodeType===1}function p$e(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function m$e(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function rd(e){if(fn(e)||Rt(e)&&!e.isInline())return!0;if(!ie(e)||Jh(e))return!1;const t=e.getFirstChild(),r=t===null||kp(t)||ve(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function aj(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function kH(e,t,r,n,s,i){let o=e.getFirstChild();for(;o!==null;){const a=o.__key;o.__parent===t&&(ie(o)&&kH(o,a,r,n,s,i),r.has(a)||i.delete(a),s.push(a)),o=o.getNextSibling()}}let wl,An,hm,Iw,bS,xS,ru,yi,wS,fm,Pr="",Tn="",ri=null,Ro="",NH=!1,Dw=!1,Zy=null;function Ob(e,t){const r=ru.get(e);if(t!==null){const n=kS(e);n.parentNode===t&&t.removeChild(n)}if(yi.has(e)||An._keyToDOMMap.delete(e),ie(r)){const n=Rb(r,ru);_S(n,0,n.length-1,null)}r!==void 0&&IA(fm,hm,Iw,r,"destroyed")}function _S(e,t,r,n){let s=t;for(;s<=r;++s){const i=e[s];i!==void 0&&Ob(i,n)}}function rc(e,t){e.setProperty("text-align",t)}const g$e="40px";function SH(e,t){const r=wl.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||g$e;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function EH(e,t){const r=e.style;t===0?rc(r,""):t===jA?rc(r,"left"):t===kA?rc(r,"center"):t===NA?rc(r,"right"):t===SA?rc(r,"justify"):t===EA?rc(r,"start"):t===CA&&rc(r,"end")}function Pb(e,t,r){const n=yi.get(e);n===void 0&&we(60);const s=n.createDOM(wl,An);if(function(i,o,a){const l=a._keyToDOMMap;o["__lexicalKey_"+a._key]=i,l.set(i,o)}(e,s,An),ve(n)?s.setAttribute("data-lexical-text","true"):Rt(n)&&s.setAttribute("data-lexical-decorator","true"),ie(n)){const i=n.__indent,o=n.__size;if(i!==0&&SH(s,i),o!==0){const l=o-1;(function(c,u,h,f){const p=Tn;Tn="",jS(c,h,0,u,f,null),TH(h,f),Tn=p})(Rb(n,yi),l,n,s)}const a=n.__format;a!==0&&EH(s,a),n.isInline()||CH(null,n,s),Aw(n)&&(Pr+=da,Ro+=da)}else{const i=n.getTextContent();if(Rt(n)){const o=n.decorate(An,wl);o!==null&&AH(e,o),s.contentEditable="false"}else ve(n)&&(n.isDirectionless()||(Tn+=i));Pr+=i,Ro+=i}if(t!==null)if(r!=null)t.insertBefore(s,r);else{const i=t.__lexicalLineBreak;i!=null?t.insertBefore(s,i):t.appendChild(s)}return IA(fm,hm,Iw,n,"created"),s}function jS(e,t,r,n,s,i){const o=Pr;Pr="";let a=r;for(;a<=n;++a){Pb(e[a],s,i);const l=yi.get(e[a]);l!==null&&ri===null&&ve(l)&&(ri=l.getFormat())}Aw(t)&&(Pr+=da),s.__lexicalTextContent=Pr,Pr=o+Pr}function vL(e,t){const r=t.get(e);return kp(r)||Rt(r)&&r.isInline()}function CH(e,t,r){const n=e!==null&&(e.__size===0||vL(e.__last,ru)),s=t.__size===0||vL(t.__last,yi);if(n){if(!s){const i=r.__lexicalLineBreak;i!=null&&r.removeChild(i),r.__lexicalLineBreak=null}}else if(s){const i=document.createElement("br");r.__lexicalLineBreak=i,r.appendChild(i)}}function TH(e,t){const r=t.__lexicalDirTextContent,n=t.__lexicalDir;if(r!==Tn||n!==Zy){const i=Tn==="",o=i?Zy:(s=Tn,GFe.test(s)?"rtl":YFe.test(s)?"ltr":null);if(o!==n){const a=t.classList,l=wl.theme;let c=n!==null?l[n]:void 0,u=o!==null?l[o]:void 0;if(c!==void 0){if(typeof c=="string"){const h=Eb(c);c=l[n]=h}a.remove(...c)}if(o===null||i&&o==="ltr")t.removeAttribute("dir");else{if(u!==void 0){if(typeof u=="string"){const h=Eb(u);u=l[o]=h}u!==void 0&&a.add(...u)}t.dir=o}Dw||(e.getWritable().__dir=o)}Zy=o,t.__lexicalDirTextContent=Tn,t.__lexicalDir=o}var s}function y$e(e,t,r){const n=Tn;var s;Tn="",ri=null,function(i,o,a){const l=Pr,c=i.__size,u=o.__size;if(Pr="",c===1&&u===1){const h=i.__first,f=o.__first;if(h===f)Qf(h,a);else{const y=kS(h),m=Pb(f,null,null);a.replaceChild(m,y),Ob(h,null)}const p=yi.get(f);ri===null&&ve(p)&&(ri=p.getFormat())}else{const h=Rb(i,ru),f=Rb(o,yi);if(c===0)u!==0&&jS(f,o,0,u-1,a,null);else if(u===0){if(c!==0){const p=a.__lexicalLineBreak==null;_S(h,0,c-1,p?null:a),p&&(a.textContent="")}}else(function(p,y,m,b,x,w){const _=b-1,j=x-1;let k,S,C=(R=w,R.firstChild),E=0,T=0;for(var R;E<=_&&T<=j;){const P=y[E],D=m[T];if(P===D)C=lj(Qf(D,w)),E++,T++;else{k===void 0&&(k=new Set(y)),S===void 0&&(S=new Set(m));const B=S.has(P),q=k.has(D);if(B)if(q){const K=Ab(An,D);K===C?C=lj(Qf(D,w)):(C!=null?w.insertBefore(K,C):w.appendChild(K),Qf(D,w)),E++,T++}else Pb(D,w,C),T++;else C=lj(kS(P)),Ob(P,w),E++}const L=yi.get(D);L!==null&&ri===null&&ve(L)&&(ri=L.getFormat())}const O=E>_,I=T>j;if(O&&!I){const P=m[j+1];jS(m,p,T,j,w,P===void 0?null:An.getElementByKey(P))}else I&&!O&&_S(y,E,_,w)})(o,h,f,c,u,a)}Aw(o)&&(Pr+=da),a.__lexicalTextContent=Pr,Pr=l+Pr}(e,t,r),TH(t,r),gh(s=t)&&ri!=null&&ri!==s.__textFormat&&!Dw&&s.setTextFormat(ri),Tn=n,ri=null}function Rb(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&we(101),r.push(n),n=s.__next}return r}function Qf(e,t){const r=ru.get(e);let n=yi.get(e);r!==void 0&&n!==void 0||we(61);const s=NH||xS.has(e)||bS.has(e),i=Ab(An,e);if(r===n&&!s){if(ie(r)){const o=i.__lexicalTextContent;o!==void 0&&(Pr+=o,Ro+=o);const a=i.__lexicalDirTextContent;a!==void 0&&(Tn+=a)}else{const o=r.getTextContent();ve(r)&&!r.isDirectionless()&&(Tn+=o),Ro+=o,Pr+=o}return i}if(r!==n&&s&&IA(fm,hm,Iw,n,"updated"),n.updateDOM(r,i,wl)){const o=Pb(e,null,null);return t===null&&we(62),t.replaceChild(o,i),Ob(e,null),o}if(ie(r)&&ie(n)){const o=n.__indent;o!==r.__indent&&SH(i,o);const a=n.__format;a!==r.__format&&EH(i,a),s&&(y$e(r,n,i),fn(n)||n.isInline()||CH(r,n,i)),Aw(n)&&(Pr+=da,Ro+=da)}else{const o=n.getTextContent();if(Rt(n)){const a=n.decorate(An,wl);a!==null&&AH(e,a)}else ve(n)&&!n.isDirectionless()&&(Tn+=o);Pr+=o,Ro+=o}if(!Dw&&fn(n)&&n.__cachedText!==Ro){const o=n.getWritable();o.__cachedText=Ro,n=o}return i}function AH(e,t){let r=An._pendingDecorators;const n=An._decorators;if(r===null){if(n[e]===t)return;r=vH(An)}r[e]=t}function lj(e){let t=e.nextSibling;return t!==null&&t===An._blockCursorElement&&(t=t.nextSibling),t}function v$e(e,t,r,n,s,i){Pr="",Ro="",Tn="",NH=n===ph,Zy=null,An=r,wl=r._config,hm=r._nodes,Iw=An._listeners.mutation,bS=s,xS=i,ru=e._nodeMap,yi=t._nodeMap,Dw=t._readOnly,wS=new Map(r._keyToDOMMap);const o=new Map;return fm=o,Qf("root",null),An=void 0,hm=void 0,bS=void 0,xS=void 0,ru=void 0,yi=void 0,wl=void 0,wS=void 0,fm=void 0,o}function kS(e){const t=wS.get(e);return t===void 0&&we(75,e),t}const So=Object.freeze({}),NS=30,SS=[["keydown",function(e,t){if(_p=e.timeStamp,OH=e.key,t.isComposing())return;const{key:r,shiftKey:n,ctrlKey:s,metaKey:i,altKey:o}=e;Ne(t,EFe,e)||r!=null&&(function(a,l,c,u){return pL(a)&&!l&&!u&&!c}(r,s,o,i)?Ne(t,XW,e):function(a,l,c,u,h){return pL(a)&&!u&&!c&&(l||h)}(r,s,n,o,i)?Ne(t,CFe,e):function(a,l,c,u){return fL(a)&&!l&&!u&&!c}(r,s,o,i)?Ne(t,QW,e):function(a,l,c,u,h){return fL(a)&&!u&&!c&&(l||h)}(r,s,n,o,i)?Ne(t,TFe,e):function(a,l,c){return function(u){return u==="ArrowUp"}(a)&&!l&&!c}(r,s,i)?Ne(t,eH,e):function(a,l,c){return function(u){return u==="ArrowDown"}(a)&&!l&&!c}(r,s,i)?Ne(t,tH,e):function(a,l){return mL(a)&&l}(r,n)?(jp=!0,Ne(t,jb,e)):function(a){return a===" "}(r)?Ne(t,AFe,e):function(a,l){return ei&&l&&a.toLowerCase()==="o"}(r,s)?(e.preventDefault(),jp=!0,Ne(t,Td,!0)):function(a,l){return mL(a)&&!l}(r,n)?(jp=!1,Ne(t,jb,e)):function(a,l,c,u){return ei?!l&&!c&&(Pf(a)||a.toLowerCase()==="h"&&u):!(u||l||c)&&Pf(a)}(r,o,i,s)?Pf(r)?Ne(t,rH,e):(e.preventDefault(),Ne(t,Mc,!0)):function(a){return a==="Escape"}(r)?Ne(t,nH,e):function(a,l,c,u,h){return ei?!(c||u||h)&&(Rf(a)||a.toLowerCase()==="d"&&l):!(l||u||h)&&Rf(a)}(r,s,n,o,i)?Rf(r)?Ne(t,sH,e):(e.preventDefault(),Ne(t,Mc,!1)):function(a,l,c){return Pf(a)&&(ei?l:c)}(r,o,s)?(e.preventDefault(),Ne(t,cm,!0)):function(a,l,c){return Rf(a)&&(ei?l:c)}(r,o,s)?(e.preventDefault(),Ne(t,cm,!1)):function(a,l){return ei&&l&&Pf(a)}(r,i)?(e.preventDefault(),Ne(t,um,!0)):function(a,l){return ei&&l&&Rf(a)}(r,i)?(e.preventDefault(),Ne(t,um,!1)):function(a,l,c,u){return a.toLowerCase()==="b"&&!l&&Xf(c,u)}(r,o,i,s)?(e.preventDefault(),Ne(t,ol,"bold")):function(a,l,c,u){return a.toLowerCase()==="u"&&!l&&Xf(c,u)}(r,o,i,s)?(e.preventDefault(),Ne(t,ol,"underline")):function(a,l,c,u){return a.toLowerCase()==="i"&&!l&&Xf(c,u)}(r,o,i,s)?(e.preventDefault(),Ne(t,ol,"italic")):function(a,l,c,u){return a==="Tab"&&!l&&!c&&!u}(r,o,s,i)?Ne(t,OFe,e):function(a,l,c,u){return a.toLowerCase()==="z"&&!l&&Xf(c,u)}(r,n,i,s)?(e.preventDefault(),Ne(t,yA,void 0)):function(a,l,c,u){return ei?a.toLowerCase()==="z"&&c&&l:a.toLowerCase()==="y"&&u||a.toLowerCase()==="z"&&u&&l}(r,n,i,s)?(e.preventDefault(),Ne(t,vA,void 0)):li(t._editorState._selection)?function(a,l,c,u){return!l&&a.toLowerCase()==="c"&&(ei?c:u)}(r,n,i,s)?(e.preventDefault(),Ne(t,Ew,e)):function(a,l,c,u){return!l&&a.toLowerCase()==="x"&&(ei?c:u)}(r,n,i,s)?(e.preventDefault(),Ne(t,bA,e)):gL(r,i,s)&&(e.preventDefault(),Ne(t,mS,e)):!dl&&gL(r,i,s)&&(e.preventDefault(),Ne(t,mS,e)),function(a,l,c,u){return a||l||c||u}(s,n,o,i)&&Ne(t,$Fe,e))}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;r instanceof Node&&n!=="touch"&&ns(t,()=>{Rt(tu(r))||(CS=!0)})}],["compositionstart",function(e,t){ns(t,()=>{const r=Me();if(me(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();Jr(n.key),(e.timeStamp<_p+NS||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||ve(s)&&s.getStyle()!==r.style)&&Ne(t,Ad,ZFe)}})}],["compositionend",function(e,t){dl?If=!0:ns(t,()=>{cj(t,e.data)})}],["input",function(e,t){e.stopPropagation(),ns(t,()=>{const r=Me(),n=e.data,s=DH(e);if(n!=null&&me(r)&&IH(r,s,n,e.timeStamp,!1)){If&&(cj(t,n),If=!1);const i=r.anchor.getNode(),o=lo(t._window);if(o===null)return;const a=r.isBackward(),l=a?r.anchor.offset:r.focus.offset,c=a?r.focus.offset:r.anchor.offset;kb&&!r.isCollapsed()&&ve(i)&&o.anchorNode!==null&&i.getTextContent().slice(0,l)+n+i.getTextContent().slice(l+c)===_H(o.anchorNode)||Ne(t,Ad,n);const u=n.length;dl&&u>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=u),xA||Cw||wA||!t.isComposing()||(_p=0,Jr(null))}else PA(!1,t,n!==null?n:void 0),If&&(cj(t,n||void 0),If=!1);qn(),fH(cr())}),nd=null}],["click",function(e,t){ns(t,()=>{const r=Me(),n=lo(t._window),s=og();if(n){if(me(r)){const i=r.anchor,o=i.getNode();i.type==="element"&&i.offset===0&&r.isCollapsed()&&!fn(o)&&wr().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s)?(n.removeAllRanges(),r.dirty=!0):e.detail===3&&!r.isCollapsed()&&o!==r.focus.getNode()&&(ie(o)?o.select(0):o.getParentOrThrow().select(0))}else if(e.pointerType==="touch"){const i=n.anchorNode;if(i!==null){const o=i.nodeType;(o===tg||o===Ul)&&ao(zA(s,n,t,e))}}}Ne(t,JW,e)})}],["cut",So],["copy",So],["dragstart",So],["dragover",So],["dragend",So],["paste",So],["focus",So],["blur",So],["drop",So]];kb&&SS.push(["beforeinput",(e,t)=>function(r,n){const s=r.inputType,i=DH(r);s==="deleteCompositionText"||dl&&jH(n)||s!=="insertCompositionText"&&ns(n,()=>{const o=Me();if(s==="deleteContentBackward"){if(o===null){const p=og();if(!me(p))return;ao(p.clone())}if(me(o)){const p=o.anchor.key===o.focus.key;if(a=r.timeStamp,OH==="MediaLast"&&a<_p+NS&&n.isComposing()&&p){if(Jr(null),_p=0,setTimeout(()=>{ns(n,()=>{Jr(null)})},NS),me(o)){const y=o.anchor.getNode();y.markDirty(),o.format=y.getFormat(),ve(y)||we(142),o.style=y.getStyle()}}else{Jr(null),r.preventDefault();const y=o.anchor.getNode().getTextContent(),m=o.anchor.offset===0&&o.focus.offset===y.length;BFe&&p&&!m||Ne(n,Mc,!0)}return}}var a;if(!me(o))return;const l=r.data;nd!==null&&PA(!1,n,nd),o.dirty&&nd===null||!o.isCollapsed()||fn(o.anchor.getNode())||i===null||o.applyDOMRange(i),nd=null;const c=o.anchor,u=o.focus,h=c.getNode(),f=u.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Ne(n,Ad,r);break;case"insertFromComposition":Jr(null),Ne(n,Ad,r);break;case"insertLineBreak":Jr(null),Ne(n,Td,!1);break;case"insertParagraph":Jr(null),jp&&!Cw?(jp=!1,Ne(n,Td,!1)):Ne(n,_b,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Ne(n,gA,r);break;case"deleteByComposition":(function(p,y){return p!==y||ie(p)||ie(y)||!p.isToken()||!y.isToken()})(h,f)&&Ne(n,pS,r);break;case"deleteByDrag":case"deleteByCut":Ne(n,pS,r);break;case"deleteContent":Ne(n,Mc,!1);break;case"deleteWordBackward":Ne(n,cm,!0);break;case"deleteWordForward":Ne(n,cm,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Ne(n,um,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Ne(n,um,!1);break;case"formatStrikeThrough":Ne(n,ol,"strikethrough");break;case"formatBold":Ne(n,ol,"bold");break;case"formatItalic":Ne(n,ol,"italic");break;case"formatUnderline":Ne(n,ol,"underline");break;case"historyUndo":Ne(n,yA,void 0);break;case"historyRedo":Ne(n,vA,void 0)}else{if(l===`
`)r.preventDefault(),Ne(n,Td,!1);else if(l===da)r.preventDefault(),Ne(n,_b,void 0);else if(l==null&&r.dataTransfer){const p=r.dataTransfer.getData("text/plain");r.preventDefault(),o.insertRawText(p)}else l!=null&&IH(o,i,l,r.timeStamp,!0)?(r.preventDefault(),Ne(n,Ad,l)):nd=l;PH=r.timeStamp}})}(e,t)]);let _p=0,OH=null,PH=0,nd=null;const Ib=new WeakMap;let ES=!1,CS=!1,jp=!1,If=!1,RH=[0,"",0,"root",0];function IH(e,t,r,n,s){const i=e.anchor,o=e.focus,a=i.getNode(),l=cr(),c=lo(l._window),u=c!==null?c.anchorNode:null,h=i.key,f=l.getElementByKey(h),p=r.length;return h!==o.key||!ve(a)||(!s&&(!kb||PH<n+50)||a.isDirty()&&p<2||xH(r))&&i.offset!==o.offset&&!a.isComposing()||td(a)||a.isDirty()&&p>1||(s||!kb)&&f!==null&&!a.isComposing()&&u!==Cb(f)||c!==null&&t!==null&&(!t.collapsed||t.startContainer!==c.anchorNode||t.startOffset!==c.anchorOffset)||a.getFormat()!==e.format||a.getStyle()!==e.style||u$e(e,a)}function bL(e,t){return e!==null&&e.nodeValue!==null&&e.nodeType===Ul&&t!==0&&t!==e.nodeValue.length}function xL(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:o}=e;ES&&(ES=!1,bL(n,s)&&bL(i,o))||ns(t,()=>{if(!r)return void ao(null);if(!rg(t,n,i))return;const a=Me();if(me(a)){const l=a.anchor,c=l.getNode();if(a.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(a.dirty=!0);const u=Pw(t).event,h=u?u.timeStamp:performance.now(),[f,p,y,m,b]=RH,x=wr(),w=t.isComposing()===!1&&x.getTextContent()==="";if(h<b+200&&l.offset===y&&l.key===m)a.format=f,a.style=p;else if(l.type==="text")ve(c)||we(141),a.format=c.getFormat(),a.style=c.getStyle();else if(l.type==="element"&&!w){const _=l.getNode();_ instanceof Qh&&_.getChildrenSize()===0?a.format=_.getTextFormat():a.format=0,a.style=""}}else{const u=l.key,h=a.focus.key,f=a.getNodes(),p=f.length,y=a.isBackward(),m=y?o:s,b=y?s:o,x=y?h:u,w=y?u:h;let _=KFe,j=!1;for(let k=0;k<p;k++){const S=f[k],C=S.getTextContentSize();if(ve(S)&&C!==0&&!(k===0&&S.__key===x&&m===C||k===p-1&&S.__key===w&&b===0)&&(j=!0,_&=S.getFormat(),_===0))break}a.format=j?_:0}}Ne(t,mA,void 0)})}function DH(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function cj(e,t){const r=e._compositionKey;if(Jr(null),r!==null&&t!=null){if(t===""){const n=Nn(r),s=Cb(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&ve(n)&&RA(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=Me();if(me(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void Ne(e,jb,null)}}}PA(!0,e,t)}function LH(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Od=new Map;function MH(e){const t=e.target,r=lo(t==null?null:t.nodeType===9?t.defaultView:t.ownerDocument.defaultView);if(r===null)return;const n=gH(r.anchorNode);if(n===null)return;CS&&(CS=!1,ns(n,()=>{const c=og(),u=r.anchorNode;if(u===null)return;const h=u.nodeType;h!==tg&&h!==Ul||ao(zA(c,r,n,e))}));const s=OA(n),i=s[s.length-1],o=i._key,a=Od.get(o),l=a||i;l!==n&&xL(r,l,!1),xL(r,n,!0),n!==i?Od.set(o,n):a&&Od.delete(o)}function wL(e){e._lexicalHandled=!0}function _L(e){return e._lexicalHandled===!0}function b$e(e){const t=e.ownerDocument,r=Ib.get(t);r===void 0&&we(162);const n=r-1;n>=0||we(164),Ib.set(t,n),n===0&&t.removeEventListener("selectionchange",MH);const s=e.__lexicalEditor;s!=null&&(function(o){if(o._parentEditor!==null){const a=OA(o),l=a[a.length-1]._key;Od.get(l)===o&&Od.delete(l)}else Od.delete(o._key)}(s),e.__lexicalEditor=null);const i=LH(e);for(let o=0;o<i.length;o++)i[o]();e.__lexicalEventHandles=[]}function TS(e,t,r){qn();const n=e.__key,s=e.getParent();if(s===null)return;const i=function(a){const l=Me();if(!me(l)||!ie(a))return l;const{anchor:c,focus:u}=l,h=c.getNode(),f=u.getNode();return vS(h,a)&&c.set(a.__key,0,"element"),vS(f,a)&&u.set(a.__key,0,"element"),l}(e);let o=!1;if(me(i)&&t){const a=i.anchor,l=i.focus;a.key===n&&(Lb(a,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0),l.key===n&&(Lb(l,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0)}else li(i)&&t&&e.isSelected()&&e.selectPrevious();if(me(i)&&t&&!o){const a=e.getIndexWithinParent();zc(e),Db(i,s,a,-1)}else zc(e);r||Jh(s)||s.canBeEmpty()||!s.isEmpty()||TS(s,t),t&&fn(s)&&s.isEmpty()&&s.selectEnd()}class Lw{static getType(){we(64,this.name)}static clone(t){we(65,this.name)}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,c$e(this,t)}getType(){return this.__type}isInline(){we(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=Nn(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||Me();if(r==null)return!1;const n=r.getNodes().some(s=>s.__key===this.__key);return(ve(this)||!me(r)||r.anchor.type!=="element"||r.focus.type!=="element"||r.anchor.key!==r.focus.key||r.anchor.offset!==r.focus.offset)&&n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:Nn(t)}getParentOrThrow(){const t=this.getParent();return t===null&&we(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if(Jh(r))return ie(t)||we(138),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&we(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:Nn(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:Nn(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=this.getParents(),n=t.getParents();ie(this)&&r.unshift(this),ie(t)&&n.unshift(t);const s=r.length,i=n.length;if(s===0||i===0||r[s-1]!==n[i-1])return null;const o=new Set(n);for(let a=0;a<s;a++){const l=r[a];if(o.has(l))return l}return null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){if(this===t)return!1;if(t.isParentOf(this))return!0;if(this.isParentOf(t))return!1;const r=this.getCommonAncestor(t);let n=0,s=0,i=this;for(;;){const o=i.getParentOrThrow();if(o===r){n=i.getIndexWithinParent();break}i=o}for(i=t;;){const o=i.getParentOrThrow();if(o===r){s=i.getIndexWithinParent();break}i=o}return n<s}isParentOf(t){const r=this.__key;if(r===t.__key)return!1;let n=t;for(;n!==null;){if(n.__key===r)return!0;n=n.getParent()}return!1}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let i=this;for(;i!==null;){const o=i.__key;if(s.has(o)||(s.add(o),n.push(i)),i===t)break;const a=ie(i)?r?i.getFirstChild():i.getLastChild():null;if(a!==null){i=a;continue}const l=r?i.getNextSibling():i.getPreviousSibling();if(l!==null){i=l;continue}const c=i.getParentOrThrow();if(s.has(c.__key)||n.push(c),c===t)break;let u=null,h=c;do{if(h===null&&we(68),u=r?h.getNextSibling():h.getPreviousSibling(),h=h.getParent(),h===null)break;u!==null||s.has(h.__key)||n.push(h)}while(u===null);i=u}return r||n.reverse(),n}isDirty(){const t=cr()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=Nn(this.__key);return t===null&&we(113),t}getWritable(){qn();const t=xa(),r=cr(),n=t._nodeMap,s=this.__key,i=this.getLatest(),o=i.__parent,a=r._cloneNotNeeded,l=Me();if(l!==null&&l.setCachedNodes(null),a.has(s))return Tb(i),i;const c=i.constructor.clone(i);return c.__parent=o,c.__next=i.__next,c.__prev=i.__prev,ie(i)&&ie(c)?(gh(i)&&gh(c)&&(c.__textFormat=i.__textFormat),c.__first=i.__first,c.__last=i.__last,c.__size=i.__size,c.__indent=i.__indent,c.__format=i.__format,c.__dir=i.__dir):ve(i)&&ve(c)&&(c.__format=i.__format,c.__style=i.__style,c.__mode=i.__mode,c.__detail=i.__detail),a.add(s),c.__key=s,Tb(c),n.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){we(70)}updateDOM(t,r,n){we(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){we(72)}static importJSON(t){we(18,this.name)}static transform(){return null}remove(t){TS(this,!0,t)}replace(t,r){qn();let n=Me();n!==null&&(n=n.clone()),ij(this,t);const s=this.getLatest(),i=this.__key,o=t.__key,a=t.getWritable(),l=this.getParentOrThrow().getWritable(),c=l.__size;zc(a);const u=s.getPreviousSibling(),h=s.getNextSibling(),f=s.__prev,p=s.__next,y=s.__parent;if(TS(s,!1,!0),u===null?l.__first=o:u.getWritable().__next=o,a.__prev=f,h===null?l.__last=o:h.getWritable().__prev=o,a.__next=p,a.__parent=y,l.__size=c,r&&(ie(this)&&ie(a)||we(139),this.getChildren().forEach(m=>{a.append(m)})),me(n)){ao(n);const m=n.anchor,b=n.focus;m.key===i&&EL(m,a),b.key===i&&EL(b,a)}return al()===i&&Jr(o),a}insertAfter(t,r=!0){qn(),ij(this,t);const n=this.getWritable(),s=t.getWritable(),i=s.getParent(),o=Me();let a=!1,l=!1;if(i!==null){const p=t.getIndexWithinParent();if(zc(s),me(o)){const y=i.__key,m=o.anchor,b=o.focus;a=m.type==="element"&&m.key===y&&m.offset===p+1,l=b.type==="element"&&b.key===y&&b.offset===p+1}}const c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),h=s.__key,f=n.__next;if(c===null?u.__last=h:c.getWritable().__prev=h,u.__size++,n.__next=h,s.__next=f,s.__prev=n.__key,s.__parent=n.__parent,r&&me(o)){const p=this.getIndexWithinParent();Db(o,u,p+1);const y=u.__key;a&&o.anchor.set(y,p+2,"element"),l&&o.focus.set(y,p+2,"element")}return t}insertBefore(t,r=!0){qn(),ij(this,t);const n=this.getWritable(),s=t.getWritable(),i=s.__key;zc(s);const o=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),l=n.__prev,c=this.getIndexWithinParent();o===null?a.__first=i:o.getWritable().__next=i,a.__size++,n.__prev=i,s.__prev=l,s.__next=n.__key,s.__parent=n.__parent;const u=Me();return r&&me(u)&&Db(u,this.getParentOrThrow(),c),t}isParentRequired(){return!1}createParentElementNode(){return to()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){qn();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(ie(n))return n.select();if(!ve(n)){const i=n.getIndexWithinParent()+1;return s.select(i,i)}return n.select(t,r)}selectNext(t,r){qn();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(ie(n))return n.select(0,0);if(!ve(n)){const i=n.getIndexWithinParent();return s.select(i,i)}return n.select(t,r)}markDirty(){this.getWritable()}}class ng extends Lw{static getType(){return"linebreak"}static clone(t){return new ng(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:t=>function(r){const n=r.parentElement;if(n!==null){const s=n.firstChild;if(s===r||s.nextSibling===r&&jL(s)){const i=n.lastChild;if(i===r||i.previousSibling===r&&jL(i))return!0}}return!1}(t)?null:{conversion:x$e,priority:0}}}static importJSON(t){return mh()}exportJSON(){return{type:"linebreak",version:1}}}function x$e(e){return{node:mh()}}function mh(){return Rw(new ng)}function kp(e){return e instanceof ng}function jL(e){return e.nodeType===Ul&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function uj(e,t){return 16&t?"code":t&_A?"mark":32&t?"sub":64&t?"sup":null}function dj(e,t){return 1&t?"strong":2&t?"em":"span"}function zH(e,t,r,n,s){const i=n.classList;let o=wp(s,"base");o!==void 0&&i.add(...o),o=wp(s,"underlineStrikethrough");let a=!1;const l=t&Sb&&t&Nb;o!==void 0&&(r&Sb&&r&Nb?(a=!0,l||i.add(...o)):l&&i.remove(...o));for(const c in eu){const u=eu[c];if(o=wp(s,c),o!==void 0)if(r&u){if(a&&(c==="underline"||c==="strikethrough")){t&u&&i.remove(...o);continue}t&u&&(!l||c!=="underline")&&c!=="strikethrough"||i.add(...o)}else t&u&&i.remove(...o)}}function FH(e,t,r){const n=t.firstChild,s=r.isComposing(),i=e+(s?Tw:"");if(n==null)t.textContent=i;else{const o=n.nodeValue;if(o!==i)if(s||dl){const[a,l,c]=function(u,h){const f=u.length,p=h.length;let y=0,m=0;for(;y<f&&y<p&&u[y]===h[y];)y++;for(;m+y<f&&m+y<p&&u[f-m-1]===h[p-m-1];)m++;return[y,f-y-m,h.slice(y,p-m)]}(o,i);l!==0&&n.deleteData(a,l),n.insertData(a,c)}else n.nodeValue=i}}function kL(e,t,r,n,s,i){FH(s,e,t);const o=i.theme.text;o!==void 0&&zH(0,0,n,e,o)}function Ny(e,t){const r=document.createElement(t);return r.appendChild(e),r}class Xh extends Lw{static getType(){return"text"}static clone(t){return new Xh(t.__text,t.__key)}constructor(t,r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return e$e[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===al()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=eu[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return yS(this.getLatest().__format,t,r)}canHaveFormat(){return!0}createDOM(t,r){const n=this.__format,s=uj(0,n),i=dj(0,n),o=s===null?i:s,a=document.createElement(o);let l=a;this.hasFormat("code")&&a.setAttribute("spellcheck","false"),s!==null&&(l=document.createElement(i),a.appendChild(l)),kL(l,this,0,n,this.__text,t);const c=this.__style;return c!==""&&(a.style.cssText=c),a}updateDOM(t,r,n){const s=this.__text,i=t.__format,o=this.__format,a=uj(0,i),l=uj(0,o),c=dj(0,i),u=dj(0,o);if((a===null?c:a)!==(l===null?u:l))return!0;if(a===l&&c!==u){const m=r.firstChild;m==null&&we(48);const b=document.createElement(u);return kL(b,this,0,o,s,n),r.replaceChild(b,m),!1}let h=r;l!==null&&a!==null&&(h=r.firstChild,h==null&&we(49)),FH(s,h,this);const f=n.theme.text;f!==void 0&&i!==o&&zH(0,i,o,h,f);const p=t.__style,y=this.__style;return p!==y&&(r.style.cssText=y),!1}static importDOM(){return{"#text":()=>({conversion:k$e,priority:0}),b:()=>({conversion:_$e,priority:0}),code:()=>({conversion:Ra,priority:0}),em:()=>({conversion:Ra,priority:0}),i:()=>({conversion:Ra,priority:0}),s:()=>({conversion:Ra,priority:0}),span:()=>({conversion:w$e,priority:0}),strong:()=>({conversion:Ra,priority:0}),sub:()=>({conversion:Ra,priority:0}),sup:()=>({conversion:Ra,priority:0}),u:()=>({conversion:Ra,priority:0})}}static importJSON(t){const r=an(t.text);return r.setFormat(t.format),r.setDetail(t.detail),r.setMode(t.mode),r.setStyle(t.style),r}exportDOM(t){let{element:r}=super.exportDOM(t);return r!==null&&LA(r)||we(132),r.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(r=Ny(r,"b")),this.hasFormat("italic")&&(r=Ny(r,"i")),this.hasFormat("strikethrough")&&(r=Ny(r,"s")),this.hasFormat("underline")&&(r=Ny(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?eu[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?JFe[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=yS(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=QFe[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){qn();let n=t,s=r;const i=Me(),o=this.getTextContent(),a=this.__key;if(typeof o=="string"){const l=o.length;n===void 0&&(n=l),s===void 0&&(s=l)}else n=0,s=0;if(!me(i))return qH(a,n,a,s,"text","text");{const l=al();l!==i.anchor.key&&l!==i.focus.key||Jr(a),i.setTextNodeRange(this,n,this,s)}return i}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const i=this.getWritable(),o=i.__text,a=n.length;let l=t;l<0&&(l=a+l,l<0&&(l=0));const c=Me();if(s&&me(c)){const h=t+a;c.setTextNodeRange(i,h,i,h)}const u=o.slice(0,l)+n+o.slice(l+r);return i.__text=u,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){qn();const r=this.getLatest(),n=r.getTextContent(),s=r.__key,i=al(),o=new Set(t),a=[],l=n.length;let c="";for(let C=0;C<l;C++)c!==""&&o.has(C)&&(a.push(c),c=""),c+=n[C];c!==""&&a.push(c);const u=a.length;if(u===0)return[];if(a[0]===n)return[r];const h=a[0],f=r.getParentOrThrow();let p;const y=r.getFormat(),m=r.getStyle(),b=r.__detail;let x=!1;r.isSegmented()?(p=an(h),p.__format=y,p.__style=m,p.__detail=b,x=!0):(p=r.getWritable(),p.__text=h);const w=Me(),_=[p];let j=h.length;for(let C=1;C<u;C++){const E=a[C],T=E.length,R=an(E).getWritable();R.__format=y,R.__style=m,R.__detail=b;const O=R.__key,I=j+T;if(me(w)){const P=w.anchor,D=w.focus;P.key===s&&P.type==="text"&&P.offset>j&&P.offset<=I&&(P.key=O,P.offset-=j,w.dirty=!0),D.key===s&&D.type==="text"&&D.offset>j&&D.offset<=I&&(D.key=O,D.offset-=j,w.dirty=!0)}i===s&&Jr(O),j=I,_.push(R)}(function(C){const E=C.getPreviousSibling(),T=C.getNextSibling();E!==null&&Tb(E),T!==null&&Tb(T)})(this);const k=f.getWritable(),S=this.getIndexWithinParent();return x?(k.splice(S,0,_),this.remove()):k.splice(S,1,_),me(w)&&Db(w,f,S,u-1),_}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||we(50);const n=this.__key,s=t.__key,i=this.__text,o=i.length;al()===s&&Jr(n);const a=Me();if(me(a)){const h=a.anchor,f=a.focus;h!==null&&h.key===s&&(IL(h,r,n,t,o),a.dirty=!0),f!==null&&f.key===s&&(IL(f,r,n,t,o),a.dirty=!0)}const l=t.__text,c=r?l+i:i+l;this.setTextContent(c);const u=this.getWritable();return t.remove(),u}isTextEntity(){return!1}}function w$e(e){return{forChild:MA(e.style),node:null}}function _$e(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:MA(t.style,r?void 0:"bold"),node:null}}const NL=new WeakMap;function j$e(e){return e.nodeName==="PRE"||e.nodeType===tg&&e.style!==void 0&&e.style.whiteSpace!==void 0&&e.style.whiteSpace.startsWith("pre")}function k$e(e){const t=e;e.parentElement===null&&we(129);let r=t.textContent||"";if(function(n){let s,i=n.parentNode;const o=[n];for(;i!==null&&(s=NL.get(i))===void 0&&!j$e(i);)o.push(i),i=i.parentNode;const a=s===void 0?i:s;for(let l=0;l<o.length;l++)NL.set(o[l],a);return a}(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],i=n.length;for(let o=0;o<i;o++){const a=n[o];a===`
`||a===`\r
`?s.push(mh()):a==="	"?s.push(ig()):a!==""&&s.push(an(a))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=SL(n,!1))!==null;){const i=n.textContent||"";if(i.length>0){/[ \t\n]$/.test(i)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=SL(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:an(r)}}function SL(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const i=r.parentElement;if(i===null)return null;r=i}if(r=n,r.nodeType===tg){const i=r.style.display;if(i===""&&!p$e(r)||i!==""&&!i.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(r.nodeType===Ul)return r;if(r.nodeName==="BR")return null}}const N$e={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Ra(e){const t=N$e[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:MA(e.style,t),node:null}}function an(e=""){return Rw(new Xh(e))}function ve(e){return e instanceof Xh}function MA(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",i=n.includes("line-through"),o=e.fontStyle==="italic",a=n.includes("underline"),l=e.verticalAlign;return c=>(ve(c)&&(s&&!c.hasFormat("bold")&&c.toggleFormat("bold"),i&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),o&&!c.hasFormat("italic")&&c.toggleFormat("italic"),a&&!c.hasFormat("underline")&&c.toggleFormat("underline"),l!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),l!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),t&&!c.hasFormat(t)&&c.toggleFormat(t)),c)}class sg extends Xh{static getType(){return"tab"}static clone(t){const r=new sg(t.__key);return r.__text=t.__text,r.__format=t.__format,r.__style=t.__style,r}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}static importJSON(t){const r=ig();return r.setFormat(t.format),r.setStyle(t.style),r}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(t){we(126)}setDetail(t){we(127)}setMode(t){we(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function ig(){return Rw(new sg)}function S$e(e){return e instanceof sg}class E$e{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){let r=this.getNode(),n=t.getNode();const s=this.offset,i=t.offset;return ie(r)&&(r=r.getDescendantByIndex(s)??r),ie(n)&&(n=n.getDescendantByIndex(i)??n),r===n?s<i:r.isBefore(n)}getNode(){const t=Nn(this.key);return t===null&&we(20),t}set(t,r,n){const s=this._selection,i=this.key;this.key=t,this.offset=r,this.type=n,ag()||(al()===i&&Jr(t),s!==null&&(s.setCachedNodes(null),s.dirty=!0))}}function co(e,t,r){return new E$e(e,t,r)}function hj(e,t){let r=t.__key,n=e.offset,s="element";if(ve(t)){s="text";const i=t.getTextContentSize();n>i&&(n=i)}else if(!ie(t)){const i=t.getNextSibling();if(ve(i))r=i.__key,n=0,s="text";else{const o=t.getParent();o&&(r=o.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function EL(e,t){if(ie(t)){const r=t.getLastDescendant();ie(r)||ve(r)?hj(e,r):hj(e,t)}else hj(e,t)}function qa(e,t,r,n){e.key=t,e.offset=r,e.type=n}class Mw{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!li(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every(s=>n.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new Mw(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let i;if(ve(s))i=s.select();else{const o=s.getIndexWithinParent()+1;i=s.getParentOrThrow().select(o,o)}i.insertNodes(t);for(let o=0;o<n;o++)r[o].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const i=Nn(s);i!==null&&n.push(i)}return ag()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}}function me(e){return e instanceof ql}class ql{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!me(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this.anchor,n=this.focus,s=r.isBefore(n),i=s?r:n,o=s?n:r;let a=i.getNode(),l=o.getNode();const c=i.offset,u=o.offset;if(ie(a)&&(a=a.getDescendantByIndex(c)??a),ie(l)){let f=l.getDescendantByIndex(u);f!==null&&f!==a&&l.getChildAtIndex(u)===f&&(f=f.getPreviousSibling()),l=f??l}let h;return h=a.is(l)?ie(a)&&a.getChildrenSize()>0?[]:[a]:a.getNodesBetween(l),ag()||(this._cachedNodes=h),h}setTextNodeRange(t,r,n,s){qa(this.anchor,t.__key,r,"text"),qa(this.focus,n.__key,s,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,i=this.focus,o=s.isBefore(i),[a,l]=AS(this);let c="",u=!0;for(let h=0;h<t.length;h++){const f=t[h];if(ie(f)&&!f.isInline())u||(c+=`
`),u=!f.isEmpty();else if(u=!1,ve(f)){let p=f.getTextContent();f===r?f===n?s.type==="element"&&i.type==="element"&&i.offset!==s.offset||(p=a<l?p.slice(a,l):p.slice(l,a)):p=o?p.slice(a):p.slice(l):f===n&&(p=o?p.slice(0,l):p.slice(0,a)),c+=p}else!Rt(f)&&!kp(f)||f===n&&this.isCollapsed()||(c+=f.getTextContent())}return c}applyDOMRange(t){const r=cr(),n=r.getEditorState()._selection,s=UH(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[i,o]=s;qa(this.anchor,i.key,i.offset,i.type),qa(this.focus,o.key,o.offset,o.type),this._cachedNodes=null}clone(){const t=this.anchor,r=this.focus;return new ql(co(t.key,t.offset,t.type),co(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=yS(this.format,t,null),this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=eu[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let i=0;i<s;i++){const o=r[i];o===`
`||o===`\r
`?n.push(mh()):o==="	"?n.push(ig()):n.push(an(o))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,i=this.style;let o=r,a=n;!this.isCollapsed()&&n.isBefore(r)&&(o=n,a=r),o.type==="element"&&function(b,x,w,_){const j=b.getNode(),k=j.getChildAtIndex(b.offset),S=an(),C=fn(j)?to().append(S):S;S.setFormat(w),S.setStyle(_),k===null?j.append(C):k.insertBefore(C),b.is(x)&&x.set(S.__key,0,"text"),b.set(S.__key,0,"text")}(o,a,s,i);const l=o.offset;let c=a.offset;const u=this.getNodes(),h=u.length;let f=u[0];ve(f)||we(26);const p=f.getTextContent().length,y=f.getParentOrThrow();let m=u[h-1];if(h===1&&a.type==="element"&&(c=p,a.set(o.key,c,"text")),this.isCollapsed()&&l===p&&(f.isSegmented()||f.isToken()||!f.canInsertTextAfter()||!y.canInsertTextAfter()&&f.getNextSibling()===null)){let b=f.getNextSibling();if(ve(b)&&b.canInsertTextBefore()&&!td(b)||(b=an(),b.setFormat(s),b.setStyle(i),y.canInsertTextAfter()?f.insertAfter(b):y.insertAfter(b)),b.select(0,0),f=b,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(f.isSegmented()||f.isToken()||!f.canInsertTextBefore()||!y.canInsertTextBefore()&&f.getPreviousSibling()===null)){let b=f.getPreviousSibling();if(ve(b)&&!td(b)||(b=an(),b.setFormat(s),y.canInsertTextBefore()?f.insertBefore(b):y.insertBefore(b)),b.select(),f=b,t!=="")return void this.insertText(t)}else if(f.isSegmented()&&l!==p){const b=an(f.getTextContent());b.setFormat(s),f.replace(b),f=b}else if(!this.isCollapsed()&&t!==""){const b=m.getParent();if(!y.canInsertTextBefore()||!y.canInsertTextAfter()||ie(b)&&(!b.canInsertTextBefore()||!b.canInsertTextAfter()))return this.insertText(""),$H(this.anchor,this.focus,null),void this.insertText(t)}if(h===1){if(f.isToken()){const _=an(t);return _.select(),void f.replace(_)}const b=f.getFormat(),x=f.getStyle();if(l!==c||b===s&&x===i){if(S$e(f)){const _=an(t);return _.setFormat(s),_.setStyle(i),_.select(),void f.replace(_)}}else{if(f.getTextContent()!==""){const _=an(t);if(_.setFormat(s),_.setStyle(i),_.select(),l===0)f.insertBefore(_,!1);else{const[j]=f.splitText(l);j.insertAfter(_,!1)}return void(_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}f.setFormat(s),f.setStyle(i)}const w=c-l;f=f.spliceText(l,w,t,!0),f.getTextContent()===""?f.remove():this.anchor.type==="text"&&(f.isComposing()?this.anchor.offset-=t.length:(this.format=b,this.style=x))}else{const b=new Set([...f.getParentKeys(),...m.getParentKeys()]),x=ie(f)?f:f.getParentOrThrow();let w=ie(m)?m:m.getParentOrThrow(),_=m;if(!x.is(w)&&w.isInline())do _=w,w=w.getParentOrThrow();while(w.isInline());if(a.type==="text"&&(c!==0||m.getTextContent()==="")||a.type==="element"&&m.getIndexWithinParent()<c)if(ve(m)&&!m.isToken()&&c!==m.getTextContentSize()){if(m.isSegmented()){const E=an(m.getTextContent());m.replace(E),m=E}fn(a.getNode())||a.type!=="text"||(m=m.spliceText(0,c,"")),b.add(m.__key)}else{const E=m.getParentOrThrow();E.canBeEmpty()||E.getChildrenSize()!==1?m.remove():E.remove()}else b.add(m.__key);const j=w.getChildren(),k=new Set(u),S=x.is(w),C=x.isInline()&&f.getNextSibling()===null?x:f;for(let E=j.length-1;E>=0;E--){const T=j[E];if(T.is(f)||ie(T)&&T.isParentOf(f))break;T.isAttached()&&(!k.has(T)||T.is(_)?S||C.insertAfter(T,!1):T.remove())}if(!S){let E=w,T=null;for(;E!==null;){const R=E.getChildren(),O=R.length;(O===0||R[O-1].is(T))&&(b.delete(E.__key),T=E),E=E.getParent()}}if(f.isToken())if(l===p)f.select();else{const E=an(t);E.select(),f.replace(E)}else f=f.spliceText(l,p-l,t,!0),f.getTextContent()===""?f.remove():f.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let E=1;E<h;E++){const T=u[E],R=T.__key;b.has(R)||T.remove()}}}removeText(){this.insertText("")}formatText(t){if(this.isCollapsed())return this.toggleFormat(t),void Jr(null);const r=this.getNodes(),n=[];for(const w of r)ve(w)&&n.push(w);const s=n.length;if(s===0)return this.toggleFormat(t),void Jr(null);const i=this.anchor,o=this.focus,a=this.isBackward(),l=a?o:i,c=a?i:o;let u=0,h=n[0],f=l.type==="element"?0:l.offset;if(l.type==="text"&&f===h.getTextContentSize()&&(u=1,h=n[1],f=0),h==null)return;const p=h.getFormatFlags(t,null),y=s-1;let m=n[y];const b=c.type==="text"?c.offset:m.getTextContentSize();if(h.is(m)){if(f===b)return;if(td(h)||f===0&&b===h.getTextContentSize())h.setFormat(p);else{const w=h.splitText(f,b),_=f===0?w[0]:w[1];_.setFormat(p),l.type==="text"&&l.set(_.__key,0,"text"),c.type==="text"&&c.set(_.__key,b-f,"text")}return void(this.format=p)}f===0||td(h)||([,h]=h.splitText(f),f=0),h.setFormat(p);const x=m.getFormatFlags(t,p);b>0&&(b===m.getTextContentSize()||td(m)||([m]=m.splitText(b)),m.setFormat(x));for(let w=u+1;w<y;w++){const _=n[w],j=_.getFormatFlags(t,x);_.setFormat(j)}l.type==="text"&&l.set(h.__key,f,"text"),c.type==="text"&&c.set(m.__key,b,"text"),this.format=p|x}insertNodes(t){if(t.length===0)return;if(this.anchor.key==="root"){this.insertParagraph();const y=Me();return me(y)||we(134),y.insertNodes(t)}const r=aj((this.isBackward()?this.focus:this.anchor).getNode(),rd),n=t[t.length-1];if("__language"in r&&ie(r)){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const y=fj(this);r.splice(y,0,t),n.selectEnd()}return}if(!t.some(y=>(ie(y)||Rt(y))&&!y.isInline())){ie(r)||we(135);const y=fj(this);return r.splice(y,0,t),void n.selectEnd()}const s=function(y){const m=to();let b=null;for(let x=0;x<y.length;x++){const w=y[x],_=kp(w);if(_||Rt(w)&&w.isInline()||ie(w)&&w.isInline()||ve(w)||w.isParentRequired()){if(b===null&&(b=w.createParentElementNode(),m.append(b),_))continue;b!==null&&b.append(w)}else m.append(w),b=null}return m}(t),i=s.getLastDescendant(),o=s.getChildren(),a=y=>"__value"in y&&"__checked"in y,l=!ie(r)||!r.isEmpty()?this.insertParagraph():null,c=o[o.length-1];let u=o[0];var h;ie(h=u)&&rd(h)&&!h.isEmpty()&&ie(r)&&(!r.isEmpty()||a(r))&&(ie(r)||we(135),r.append(...u.getChildren()),u=o[1]),u&&function(y,m,b){const x=m.getParentOrThrow().getLastChild();let w=m;const _=[m];for(;w!==x;)w.getNextSibling()||we(140),w=w.getNextSibling(),_.push(w);let j=y;for(const k of _)j=j.insertAfter(k)}(r,u);const f=aj(i,rd);l&&ie(f)&&(a(l)||rd(c))&&(f.append(...l.getChildren()),l.remove()),ie(r)&&r.isEmpty()&&r.remove(),i.selectEnd();const p=ie(r)?r.getLastChild():null;kp(p)&&f!==r&&p.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=to();return wr().splice(this.anchor.offset,0,[o]),o.select(),o}const t=fj(this),r=aj(this.anchor.getNode(),rd);ie(r)||we(136);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],i=r.insertNewAfter(this,!1);return i?(i.append(...s),i.selectStart(),i):null}insertLineBreak(t){const r=mh();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,i=this.focus;let o=t[0],a=t[n];const[l,c]=AS(this);if(r===0)return[];if(r===1){if(ve(o)&&!this.isCollapsed()){const h=l>c?c:l,f=l>c?l:c,p=o.splitText(h,f),y=h===0?p[0]:p[1];return y!=null?[y]:[]}return[o]}const u=s.isBefore(i);if(ve(o)){const h=u?l:c;h===o.getTextContentSize()?t.shift():h!==0&&([,o]=o.splitText(h),t[0]=o)}if(ve(a)){const h=a.getTextContent().length,f=u?c:l;f===0?t.pop():f!==h&&([a]=a.splitText(f),t[n]=a)}return t}modify(t,r,n){const s=this.focus,i=this.anchor,o=t==="move",a=dm(s,r);if(Rt(a)&&!a.isIsolated()){if(o&&a.isKeyboardSelectable()){const p=PL();return p.add(a.__key),void ao(p)}const f=r?a.getPreviousSibling():a.getNextSibling();if(ve(f)){const p=f.__key,y=r?f.getTextContent().length:0;return s.set(p,y,"text"),void(o&&i.set(p,y,"text"))}{const p=a.getParentOrThrow();let y,m;return ie(f)?(m=f.__key,y=r?f.getChildrenSize():0):(y=a.getIndexWithinParent(),m=p.__key,r||y++),s.set(m,y,"element"),void(o&&i.set(m,y,"element"))}}const l=cr(),c=lo(l._window);if(!c)return;const u=l._blockCursorElement,h=l._rootElement;if(h===null||u===null||!ie(a)||a.isInline()||a.canBeEmpty()||DA(u,l,h),function(f,p,y,m){f.modify(p,y,m)}(c,t,r?"backward":"forward",n),c.rangeCount>0){const f=c.getRangeAt(0),p=this.anchor.getNode(),y=fn(p)?p:h$e(p);if(this.applyDOMRange(f),this.dirty=!0,!o){const m=this.getNodes(),b=[];let x=!1;for(let w=0;w<m.length;w++){const _=m[w];vS(_,y)?b.push(_):x=!0}if(x&&b.length>0)if(r){const w=b[0];ie(w)?w.selectStart():w.getParentOrThrow().selectStart()}else{const w=b[b.length-1];ie(w)?w.selectEnd():w.getParentOrThrow().selectEnd()}c.anchorNode===f.startContainer&&c.anchorOffset===f.startOffset||function(w){const _=w.focus,j=w.anchor,k=j.key,S=j.offset,C=j.type;qa(j,_.key,_.offset,_.type),qa(_,k,S,C),w._cachedNodes=null}(this)}}}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&ie(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),i=r.getNextSibling()||(s===null?null:s.getNextSibling());if(ie(i)&&i.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const i=this.focus,o=dm(i,t);if(Rt(o)&&!o.isIsolated()){if(o.isKeyboardSelectable()&&ie(s)&&s.getChildrenSize()===0){s.remove();const a=PL();a.add(o.__key),ao(a)}else o.remove(),cr().dispatchCommand(mA,void 0);return}if(!t&&ie(o)&&ie(s)&&s.isEmpty())return s.remove(),void o.selectStart();if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&(n.type==="element"?n.getNode():n.getNode().getParentOrThrow()).collapseAtStart(this))return}else{const a=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,a!==null&&a.isSegmented()){const l=i.offset,c=a.getTextContentSize();if(a.is(s)||t&&l!==c||!t&&l!==0)return void TL(a,t,l)}else if(s!==null&&s.isSegmented()){const l=n.offset,c=s.getTextContentSize();if(s.is(a)||t&&l!==0||!t&&l!==c)return void TL(s,t,l)}(function(l,c){const u=l.anchor,h=l.focus,f=u.getNode(),p=h.getNode();if(f===p&&u.type==="text"&&h.type==="text"){const y=u.offset,m=h.offset,b=y<m,x=b?y:m,w=b?m:y,_=w-1;x!==_&&(xH(f.getTextContent().slice(x,w))||(c?h.offset=_:u.offset=_))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&fn(n.getParent())&&n.getIndexWithinParent()===0&&n.collapseAtStart(this)}}deleteLine(t){if(this.isCollapsed()){const r=this.anchor.type==="element";if(r&&this.insertText(" "),this.modify("extend",t,"lineboundary"),(t?this.focus:this.anchor).offset===0&&this.modify("extend",t,"character"),r){const n=t?this.anchor:this.focus;n.set(n.key,n.offset+1,n.type)}}this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function li(e){return e instanceof Mw}function CL(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function AS(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[CL(r),CL(n)]}function TL(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),i=s.length;let o=0,a=0;for(let c=0;c<i;c++){const u=c===i-1;if(a=o,o+=s[c].length,t&&o===r||o>r||u){s.splice(c,1),u&&(a=void 0);break}}const l=s.join("").trim();l===""?n.remove():(n.setTextContent(l),n.select(a,a))}function AL(e,t,r,n){let s,i=t;if(e.nodeType===tg){let o=!1;const a=e.childNodes,l=a.length,c=n._blockCursorElement;i===l&&(o=!0,i=l-1);let u=a[i],h=!1;if(u===c)u=a[i+1],h=!0;else if(c!==null){const f=c.parentNode;e===f&&t>Array.prototype.indexOf.call(f.children,c)&&i--}if(s=pd(u),ve(s))i=hL(s,o);else{let f=pd(e);if(f===null)return null;if(ie(f)){i=Math.min(f.getChildrenSize(),i);let p=f.getChildAtIndex(i);if(ie(p)&&function(y,m,b){const x=y.getParent();return b===null||x===null||!x.canBeEmpty()||x!==b.getNode()}(p,0,r)){const y=o?p.getLastDescendant():p.getFirstDescendant();y===null?f=p:(p=y,f=ie(p)?p:p.getParentOrThrow()),i=0}ve(p)?(s=p,f=null,i=hL(p,o)):p!==f&&o&&!h&&i++}else{const p=f.getIndexWithinParent();i=t===0&&Rt(f)&&pd(e)===f?p:p+1,f=f.getParentOrThrow()}if(ie(f))return co(f.__key,i,"element")}}else s=pd(e);return ve(s)?co(s.__key,i,"text"):null}function OL(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const i=s.getPreviousSibling(),o=s.getParent();if(t){if((r||!t)&&i===null&&ie(o)&&o.isInline()){const a=o.getPreviousSibling();ve(a)&&(e.key=a.__key,e.offset=a.getTextContent().length)}}else ie(i)&&!r&&i.isInline()?(e.key=i.__key,e.offset=i.getChildrenSize(),e.type="element"):ve(i)&&(e.key=i.__key,e.offset=i.getTextContent().length)}else if(n===s.getTextContent().length){const i=s.getNextSibling(),o=s.getParent();if(t&&ie(i)&&i.isInline())e.key=i.__key,e.offset=0,e.type="element";else if((r||t)&&i===null&&ie(o)&&o.isInline()&&!o.canInsertTextAfter()){const a=o.getNextSibling();ve(a)&&(e.key=a.__key,e.offset=0)}}}function $H(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);OL(e,n,s),OL(t,!n,s),s&&(t.key=e.key,t.offset=e.offset,t.type=e.type);const i=cr();if(i.isComposing()&&i._compositionKey!==e.key&&me(r)){const o=r.anchor,a=r.focus;qa(e,o.key,o.offset,o.type),qa(t,a.key,a.offset,a.type)}}}function UH(e,t,r,n,s,i){if(e===null||r===null||!rg(s,e,r))return null;const o=AL(e,t,me(i)?i.anchor:null,s);if(o===null)return null;const a=AL(r,n,me(i)?i.focus:null,s);if(a===null)return null;if(o.type==="element"&&a.type==="element"){const l=pd(e),c=pd(r);if(Rt(l)&&Rt(c))return null}return $H(o,a,i),[o,a]}function OS(e){return ie(e)&&!e.isInline()}function qH(e,t,r,n,s,i){const o=xa(),a=new ql(co(e,t,s),co(r,n,i),0,"");return a.dirty=!0,o._selection=a,a}function C$e(){const e=co("root",0,"element"),t=co("root",0,"element");return new ql(e,t,0,"")}function PL(){return new Mw(new Set)}function zA(e,t,r,n){const s=r._window;if(s===null)return null;const i=n||s.event,o=i?i.type:void 0,a=o==="selectionchange",l=!gS&&(a||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&i&&i.detail===3||o==="drop"||o===void 0);let c,u,h,f;if(me(e)&&!l)return e.clone();if(t===null)return null;if(c=t.anchorNode,u=t.focusNode,h=t.anchorOffset,f=t.focusOffset,a&&me(e)&&!rg(r,c,u))return e.clone();const p=UH(c,h,u,f,r,e);if(p===null)return null;const[y,m]=p;return new ql(y,m,me(e)?e.format:0,me(e)?e.style:"")}function Me(){return xa()._selection}function og(){return cr()._editorState._selection}function Db(e,t,r,n=1){const s=e.anchor,i=e.focus,o=s.getNode(),a=i.getNode();if(!t.is(o)&&!t.is(a))return;const l=t.__key;if(e.isCollapsed()){const c=s.offset;if(r<=c&&n>0||r<c&&n<0){const u=Math.max(0,c+n);s.set(l,u,"element"),i.set(l,u,"element"),RL(e)}}else{const c=e.isBackward(),u=c?i:s,h=u.getNode(),f=c?s:i,p=f.getNode();if(t.is(h)){const y=u.offset;(r<=y&&n>0||r<y&&n<0)&&u.set(l,Math.max(0,y+n),"element")}if(t.is(p)){const y=f.offset;(r<=y&&n>0||r<y&&n<0)&&f.set(l,Math.max(0,y+n),"element")}}RL(e)}function RL(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,i=t.getNode(),o=n.getNode();if(e.isCollapsed()){if(!ie(i))return;const a=i.getChildrenSize(),l=r>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(r);if(ve(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,"text"),n.set(c.__key,u,"text")}}else{if(ie(i)){const a=i.getChildrenSize(),l=r>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(r);if(ve(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,"text")}}if(ie(o)){const a=o.getChildrenSize(),l=s>=a,c=l?o.getChildAtIndex(a-1):o.getChildAtIndex(s);if(ve(c)){let u=0;l&&(u=c.getTextContentSize()),n.set(c.__key,u,"text")}}}}function Lb(e,t,r,n,s){let i=null,o=0,a=null;n!==null?(i=n.__key,ve(n)?(o=n.getTextContentSize(),a="text"):ie(n)&&(o=n.getChildrenSize(),a="element")):s!==null&&(i=s.__key,ve(s)?a="text":ie(s)&&(a="element")),i!==null&&a!==null?e.set(i,o,a):(o=t.getIndexWithinParent(),o===-1&&(o=r.getChildrenSize()),e.set(r.__key,o,"element"))}function IL(e,t,r,n,s){e.type==="text"?(e.key=r,t||(e.offset+=s)):e.offset>n.getIndexWithinParent()&&(e.offset-=1)}function T$e(e,t,r,n,s,i,o){const a=n.anchorNode,l=n.focusNode,c=n.anchorOffset,u=n.focusOffset,h=document.activeElement;if(s.has("collaboration")&&h!==i||h!==null&&AA(h))return;if(!me(t))return void(e!==null&&rg(r,a,l)&&n.removeAllRanges());const f=t.anchor,p=t.focus,y=f.key,m=p.key,b=Ab(r,y),x=Ab(r,m),w=f.offset,_=p.offset,j=t.format,k=t.style,S=t.isCollapsed();let C=b,E=x,T=!1;if(f.type==="text"){C=Cb(b);const L=f.getNode();T=L.getFormat()!==j||L.getStyle()!==k}else me(e)&&e.anchor.type==="text"&&(T=!0);var R,O,I,P,D;if(p.type==="text"&&(E=Cb(x)),C!==null&&E!==null&&(S&&(e===null||T||me(e)&&(e.format!==j||e.style!==k))&&(R=j,O=k,I=w,P=y,D=performance.now(),RH=[R,O,I,P,D]),c!==w||u!==_||a!==C||l!==E||n.type==="Range"&&S||(h!==null&&i.contains(h)||i.focus({preventScroll:!0}),f.type==="element"))){try{n.setBaseAndExtent(C,w,E,_)}catch{}if(!s.has("skip-scroll-into-view")&&t.isCollapsed()&&i!==null&&i===document.activeElement){const L=t instanceof ql&&t.anchor.type==="element"?C.childNodes[w]||null:n.rangeCount>0?n.getRangeAt(0):null;if(L!==null){let B;if(L instanceof Text){const q=document.createRange();q.selectNode(L),B=q.getBoundingClientRect()}else B=L.getBoundingClientRect();(function(q,K,H){const $=H.ownerDocument,J=$.defaultView;if(J===null)return;let{top:te,bottom:be}=K,Z=0,G=0,fe=H;for(;fe!==null;){const pe=fe===$.body;if(pe)Z=0,G=Pw(q).innerHeight;else{const W=fe.getBoundingClientRect();Z=W.top,G=W.bottom}let ke=0;if(te<Z?ke=-(Z-te):be>G&&(ke=be-G),ke!==0)if(pe)J.scrollBy(0,ke);else{const W=fe.scrollTop;fe.scrollTop+=ke;const X=fe.scrollTop-W;te-=X,be-=X}if(pe)break;fe=Ow(fe)}})(r,B,i)}}ES=!0}}function A$e(e){let t=Me()||og();t===null&&(t=wr().selectEnd()),t.insertNodes(e)}function fj(e){let t=e;e.isCollapsed()||t.removeText();const r=Me();me(r)&&(t=r),me(t)||we(161);const n=t.anchor;let s=n.getNode(),i=n.offset;for(;!rd(s);)[s,i]=O$e(s,i);return i}function O$e(e,t){const r=e.getParent();if(!r){const s=to();return wr().append(s),s.select(),[wr(),0]}if(ve(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const i=t===0?0:1;return[r,s[0].getIndexWithinParent()+i]}if(!ie(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new ql(co(e.__key,t,"element"),co(e.__key,t,"element"),0,""),i=e.insertNewAfter(s);i&&i.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}let qr=null,Br=null,Wn=!1,pj=!1,Gy=0;const DL={characterData:!0,childList:!0,subtree:!0};function ag(){return Wn||qr!==null&&qr._readOnly}function qn(){Wn&&we(13)}function BH(){Gy>99&&we(14)}function xa(){return qr===null&&we(15),qr}function cr(){return Br===null&&we(16),Br}function P$e(){return Br}function LL(e,t,r){const n=t.__type,s=function(a,l){const c=a._nodes.get(l);return c===void 0&&we(30,l),c}(e,n);let i=r.get(n);i===void 0&&(i=Array.from(s.transforms),r.set(n,i));const o=i.length;for(let a=0;a<o&&(i[a](t),t.isAttached());a++);}function ML(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function R$e(e){return FA(e,cr()._nodes)}function FA(e,t){const r=e.type,n=t.get(r);n===void 0&&we(17,r);const s=n.klass;e.type!==s.getType()&&we(18,s.name);const i=s.importJSON(e),o=e.children;if(ie(i)&&Array.isArray(o))for(let a=0;a<o.length;a++){const l=FA(o[a],t);i.append(l)}return i}function zL(e,t){const r=qr,n=Wn,s=Br;qr=e,Wn=!0,Br=null;try{return t()}finally{qr=r,Wn=n,Br=s}}function Fc(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const i=e._editorState,o=i._selection,a=r._selection,l=e._dirtyType!==Qc,c=qr,u=Wn,h=Br,f=e._updating,p=e._observer;let y=null;if(e._pendingEditorState=null,e._editorState=r,!s&&l&&p!==null){Br=e,qr=r,Wn=!1,e._updating=!0;try{const S=e._dirtyType,C=e._dirtyElements,E=e._dirtyLeaves;p.disconnect(),y=v$e(i,r,e,S,C,E)}catch(S){if(S instanceof Error&&e._onError(S),pj)throw S;return KH(e,null,n,r),pH(e),e._dirtyType=ph,pj=!0,Fc(e,i),void(pj=!1)}finally{p.observe(n,DL),e._updating=f,qr=c,Wn=u,Br=h}}r._readOnly||(r._readOnly=!0);const m=e._dirtyLeaves,b=e._dirtyElements,x=e._normalizedNodes,w=e._updateTags,_=e._deferred;l&&(e._dirtyType=Qc,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(S,C){const E=S._decorators;let T=S._pendingDecorators||E;const R=C._nodeMap;let O;for(O in T)R.has(O)||(T===E&&(T=vH(S)),delete T[O])}(e,r);const j=s?null:lo(e._window);if(e._editable&&j!==null&&(l||a===null||a.dirty)){Br=e,qr=r;try{if(p!==null&&p.disconnect(),l||a===null||a.dirty){const S=e._blockCursorElement;S!==null&&DA(S,e,n),T$e(o,a,e,j,w,n)}f$e(e,n,a),p!==null&&p.observe(n,DL)}finally{Br=h,qr=c}}y!==null&&function(S,C,E,T,R){const O=Array.from(S._listeners.mutation),I=O.length;for(let P=0;P<I;P++){const[D,L]=O[P],B=C.get(L);B!==void 0&&D(B,{dirtyLeaves:T,prevEditorState:R,updateTags:E})}}(e,y,w,m,i),me(a)||a===null||o!==null&&o.is(a)||e.dispatchCommand(mA,void 0);const k=e._pendingDecorators;k!==null&&(e._decorators=k,e._pendingDecorators=null,Np("decorator",e,!0,k)),function(S,C,E){const T=dL(C),R=dL(E);T!==R&&Np("textcontent",S,!0,R)}(e,t||i,r),Np("update",e,!0,{dirtyElements:b,dirtyLeaves:m,editorState:r,normalizedNodes:x,prevEditorState:t||i,tags:w}),function(S,C){if(S._deferred=[],C.length!==0){const E=S._updating;S._updating=!0;try{for(let T=0;T<C.length;T++)C[T]()}finally{S._updating=E}}}(e,_),function(S){const C=S._updates;if(C.length!==0){const E=C.shift();if(E){const[T,R]=E;WH(S,T,R)}}}(e)}function Np(e,t,r,...n){const s=t._updating;t._updating=r;try{const i=Array.from(t._listeners[e]);for(let o=0;o<i.length;o++)i[o].apply(null,n)}finally{t._updating=s}}function VH(e,t,r){if(e._updating===!1||Br!==e){let s=!1;return e.update(()=>{s=VH(e,t,r)}),s}const n=OA(e);for(let s=4;s>=0;s--)for(let i=0;i<n.length;i++){const o=n[i]._commands.get(t);if(o!==void 0){const a=o[s];if(a!==void 0){const l=Array.from(a),c=l.length;for(let u=0;u<c;u++)if(l[u](r,e)===!0)return!0}}}return!1}function FL(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[i,o]=s;let a,l;o!==void 0&&(a=o.onUpdate,l=o.tag,o.skipTransforms&&(n=!0),a&&e._deferred.push(a),l&&e._updateTags.add(l)),i()}}return n}function WH(e,t,r){const n=e._updateTags;let s,i,o=!1,a=!1;r!==void 0&&(s=r.onUpdate,i=r.tag,i!=null&&n.add(i),o=r.skipTransforms||!1,a=r.discrete||!1),s&&e._deferred.push(s);const l=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=new Fw(new Map((c||l)._nodeMap)),u=!0),c._flushSync=a;const h=qr,f=Wn,p=Br,y=e._updating;qr=c,Wn=!1,e._updating=!0,Br=e;try{u&&(e._headless?l._selection!==null&&(c._selection=l._selection.clone()):c._selection=function(x){const w=x.getEditorState()._selection,_=lo(x._window);return me(w)||w==null?zA(w,_,x,null):w.clone()}(e));const m=e._compositionKey;t(),o=FL(e,o),function(x,w){const _=w.getEditorState()._selection,j=x._selection;if(me(j)){const k=j.anchor,S=j.focus;let C;if(k.type==="text"&&(C=k.getNode(),C.selectionTransform(_,j)),S.type==="text"){const E=S.getNode();C!==E&&E.selectionTransform(_,j)}}}(c,e),e._dirtyType!==Qc&&(o?function(x,w){const _=w._dirtyLeaves,j=x._nodeMap;for(const k of _){const S=j.get(k);ve(S)&&S.isAttached()&&S.isSimpleText()&&!S.isUnmergeable()&&cL(S)}}(c,e):function(x,w){const _=w._dirtyLeaves,j=w._dirtyElements,k=x._nodeMap,S=al(),C=new Map;let E=_,T=E.size,R=j,O=R.size;for(;T>0||O>0;){if(T>0){w._dirtyLeaves=new Set;for(const I of E){const P=k.get(I);ve(P)&&P.isAttached()&&P.isSimpleText()&&!P.isUnmergeable()&&cL(P),P!==void 0&&ML(P,S)&&LL(w,P,C),_.add(I)}if(E=w._dirtyLeaves,T=E.size,T>0){Gy++;continue}}w._dirtyLeaves=new Set,w._dirtyElements=new Map;for(const I of R){const P=I[0],D=I[1];if(P!=="root"&&!D)continue;const L=k.get(P);L!==void 0&&ML(L,S)&&LL(w,L,C),j.set(P,D)}E=w._dirtyLeaves,T=E.size,R=w._dirtyElements,O=R.size,Gy++}w._dirtyLeaves=_,w._dirtyElements=j}(c,e),FL(e),function(x,w,_,j){const k=x._nodeMap,S=w._nodeMap,C=[];for(const[E]of j){const T=S.get(E);T!==void 0&&(T.isAttached()||(ie(T)&&kH(T,E,k,S,C,j),k.has(E)||j.delete(E),C.push(E)))}for(const E of C)S.delete(E);for(const E of _){const T=S.get(E);T===void 0||T.isAttached()||(k.has(E)||_.delete(E),S.delete(E))}}(l,c,e._dirtyLeaves,e._dirtyElements)),m!==e._compositionKey&&(c._flushSync=!0);const b=c._selection;if(me(b)){const x=c._nodeMap,w=b.anchor.key,_=b.focus.key;x.get(w)!==void 0&&x.get(_)!==void 0||we(19)}else li(b)&&b._nodes.size===0&&(c._selection=null)}catch(m){return m instanceof Error&&e._onError(m),e._pendingEditorState=l,e._dirtyType=ph,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Fc(e)}finally{qr=h,Wn=f,Br=p,e._updating=y,Gy=0}e._dirtyType!==Qc||function(m,b){const x=b.getEditorState()._selection,w=m._selection;if(w!==null){if(w.dirty||!w.is(x))return!0}else if(x!==null)return!0;return!1}(c,e)?c._flushSync?(c._flushSync=!1,Fc(e)):u&&a$e(()=>{Fc(e)}):(c._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function ns(e,t,r){e._updating?e._updates.push([t,r]):WH(e,t,r)}class zw extends Lw{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__indent=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return XFe[t]||""}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=cr()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(ve(r)&&t.push(r),ie(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;ie(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;ie(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const i=r[n-1];return ie(i)&&i.getLastDescendant()||i||null}const s=r[t];return ie(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:Nn(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&we(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:Nn(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&we(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const i=r[s];t+=i.getTextContent(),ie(i)&&s!==n-1&&!i.isInline()&&(t+=da)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const i=r[s];t+=i.getTextContentSize(),ie(i)&&s!==n-1&&!i.isInline()&&(t+=da.length)}return t}getDirection(){return this.getLatest().__dir}hasFormat(t){if(t!==""){const r=oL[t];return!!(this.getFormat()&r)}return!1}select(t,r){qn();const n=Me();let s=t,i=r;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const l=this.getFirstChild();if(ve(l)||ie(l))return l.select(0,0)}else if(!(t!==void 0&&t!==o||r!==void 0&&r!==o)){const l=this.getLastChild();if(ve(l)||ie(l))return l.select()}}s===void 0&&(s=o),i===void 0&&(i=o);const a=this.__key;return me(n)?(n.anchor.set(a,s,"element"),n.focus.set(a,i,"element"),n.dirty=!0,n):qH(a,s,a,i,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(r=>r.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?oL[t]:0,this}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,i=this.getChildrenSize(),o=this.getWritable(),a=o.__key,l=[],c=[],u=this.getChildAtIndex(t+r);let h=null,f=i-r+s;if(t!==0)if(t===i)h=this.getLastChild();else{const y=this.getChildAtIndex(t);y!==null&&(h=y.getPreviousSibling())}if(r>0){let y=h===null?this.getFirstChild():h.getNextSibling();for(let m=0;m<r;m++){y===null&&we(100);const b=y.getNextSibling(),x=y.__key;zc(y.getWritable()),c.push(x),y=b}}let p=h;for(let y=0;y<s;y++){const m=n[y];p!==null&&m.is(p)&&(h=p=p.getPreviousSibling());const b=m.getWritable();b.__parent===a&&f--,zc(b);const x=m.__key;if(p===null)o.__first=x,b.__prev=null;else{const w=p.getWritable();w.__next=x,b.__prev=w.__key}m.__key===a&&we(76),b.__parent=a,l.push(x),p=m}if(t+r===i)p!==null&&(p.getWritable().__next=null,o.__last=p.__key);else if(u!==null){const y=u.getWritable();if(p!==null){const m=p.getWritable();y.__prev=p.__key,m.__next=u.__key}else y.__prev=null}if(o.__size=f,c.length){const y=Me();if(me(y)){const m=new Set(c),b=new Set(l),{anchor:x,focus:w}=y;$L(x,m,b)&&Lb(x,x.getNode(),this,h,u),$L(w,m,b)&&Lb(w,w.getNode(),this,h,u),f!==0||this.canBeEmpty()||Jh(this)||this.remove()}}return o}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}}function ie(e){return e instanceof zw}function $L(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}class I$e extends Lw{constructor(t){super(t)}decorate(t,r){we(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Rt(e){return e instanceof I$e}class lg extends zw{static getType(){return"root"}static clone(){return new lg}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){we(51)}getTextContent(){const t=this.__cachedText;return!ag()&&cr()._dirtyType!==Qc||t===null?super.getTextContent():t}remove(){we(52)}replace(t){we(53)}insertBefore(t){we(54)}insertAfter(t){we(55)}updateDOM(t,r){return!1}append(...t){for(let r=0;r<t.length;r++){const n=t[r];ie(n)||Rt(n)||we(56)}return super.append(...t)}static importJSON(t){const r=wr();return r.setFormat(t.format),r.setIndent(t.indent),r.setDirection(t.direction),r}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function fn(e){return e instanceof lg}function $A(){return new Fw(new Map([["root",new lg]]))}function HH(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&we(130,r.name),ie(e)){const n=t.children;Array.isArray(n)||we(59,r.name);const s=e.getChildren();for(let i=0;i<s.length;i++){const o=HH(s[i]);n.push(o)}}return t}class Fw{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t){return zL(this,t)}clone(t){const r=new Fw(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return zL(this,()=>({root:HH(wr())}))}}class UA extends zw{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class Qh extends zw{constructor(t){super(t),this.__textFormat=0}static getType(){return"paragraph"}getTextFormat(){return this.getLatest().__textFormat}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}hasTextFormat(t){const r=eu[t];return!!(this.getTextFormat()&r)}static clone(t){return new Qh(t.__key)}createDOM(t){const r=document.createElement("p"),n=wp(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:D$e,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(r&&LA(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();r.style.textAlign=n;const s=this.getDirection();s&&(r.dir=s);const i=this.getIndent();i>0&&(r.style.textIndent=20*i+"px")}return{element:r}}static importJSON(t){const r=to();return r.setFormat(t.format),r.setIndent(t.indent),r.setDirection(t.direction),r.setTextFormat(t.textFormat),r}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),type:"paragraph",version:1}}insertNewAfter(t,r){const n=to();n.setTextFormat(t.format);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||ve(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function D$e(e){const t=to();if(e.style){t.setFormat(e.style.textAlign);const r=parseInt(e.style.textIndent,10)/20;r>0&&t.setIndent(r)}return{node:t}}function to(){return Rw(new Qh)}function gh(e){return e instanceof Qh}const dt=0,L$e=4;function KH(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=$A(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=Qc,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const i=e._observer;i!==null&&(i.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function M$e(e){const t=e||{},r=P$e(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,i=t.disableEvents||!1,o=$A(),a=t.namespace||(s!==null?s._config.namespace:wH()),l=t.editorState,c=[lg,Xh,ng,sg,Qh,UA,...t.nodes||[]],{onError:u,html:h}=t,f=t.editable===void 0||t.editable;let p;if(e===void 0&&r!==null)p=r._nodes;else{p=new Map;for(let m=0;m<c.length;m++){let b=c[m],x=null,w=null;if(typeof b!="function"){const S=b;b=S.replace,x=S.with,w=S.withKlass||null}const _=b.getType(),j=b.transform(),k=new Set;j!==null&&k.add(j),p.set(_,{exportDOM:h&&h.export?h.export.get(b):void 0,klass:b,replace:x,replaceWithKlass:w,transforms:k})}}const y=new z$e(o,s,p,{disableEvents:i,namespace:a,theme:n},u||console.error,function(m,b){const x=new Map,w=new Set,_=j=>{Object.keys(j).forEach(k=>{let S=x.get(k);S===void 0&&(S=[],x.set(k,S)),S.push(j[k])})};return m.forEach(j=>{const k=j.klass.importDOM;if(k==null||w.has(k))return;w.add(k);const S=k.call(j.klass);S!==null&&_(S)}),b&&_(b),x}(p,h?h.import:void 0),f);return l!==void 0&&(y._pendingEditorState=l,y._dirtyType=ph),y}class z$e{constructor(t,r,n,s,i,o,a){this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=Qc,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=wH(),this._onError=i,this._htmlConversions=o,this._editable=a,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&we(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const i=s.get(t);i===void 0&&we(36,String(t));const o=i[n];return o.add(r),()=>{o.delete(r),i.every(a=>a.size===0)&&s.delete(t)}}registerMutationListener(t,r){let n=this._nodes.get(t.getType());n===void 0&&we(37,t.name);let s=t,i=null;for(;i=n.replaceWithKlass;)s=i,n=this._nodes.get(i.getType()),n===void 0&&we(37,i.name);const o=this._listeners.mutation;return o.set(r,s),()=>{o.delete(r)}}registerNodeTransformToKlass(t,r){const n=t.getType(),s=this._nodes.get(n);return s===void 0&&we(37,t.name),s.transforms.add(r),s}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],i=n.replaceWithKlass;if(i!=null){const l=this.registerNodeTransformToKlass(i,r);s.push(l)}var o,a;return o=this,a=t.getType(),ns(o,()=>{const l=xa();if(l.isEmpty())return;if(a==="root")return void wr().markDirty();const c=l._nodeMap;for(const[,u]of c)u.markDirty()},o._pendingEditorState===null?{tag:"history-merge"}:void 0),()=>{s.forEach(l=>l.transforms.delete(r))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return Ne(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=wp(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,KH(this,r,t,s),r!==null&&(this._config.disableEvents||b$e(r),n!=null&&r.classList.remove(...n)),t!==null){const i=function(a){const l=a.ownerDocument;return l&&l.defaultView||null}(t),o=t.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=i,this._dirtyType=ph,pH(this),this._updateTags.add("history-merge"),Fc(this),this._config.disableEvents||function(a,l){const c=a.ownerDocument,u=Ib.get(c);(u===void 0||u<1)&&c.addEventListener("selectionchange",MH),Ib.set(c,(u||0)+1),a.__lexicalEditor=l;const h=LH(a);for(let f=0;f<SS.length;f++){const[p,y]=SS[f],m=typeof y=="function"?b=>{_L(b)||(wL(b),(l.isEditable()||p==="click")&&y(b,l))}:b=>{if(_L(b))return;wL(b);const x=l.isEditable();switch(p){case"cut":return x&&Ne(l,bA,b);case"copy":return Ne(l,Ew,b);case"paste":return x&&Ne(l,gA,b);case"dragstart":return x&&Ne(l,oH,b);case"dragover":return x&&Ne(l,aH,b);case"dragend":return x&&Ne(l,DFe,b);case"focus":return x&&Ne(l,zFe,b);case"blur":return x&&Ne(l,FFe,b);case"drop":return x&&Ne(l,iH,b)}};a.addEventListener(p,m),h.push(()=>{a.removeEventListener(p,m)})}}(t,this),n!=null&&t.classList.add(...n)}else this._editorState=s,this._pendingEditorState=null,this._window=null;Np("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&we(38),fH(this);const n=this._pendingEditorState,s=this._updateTags,i=r!==void 0?r.tag:null;n===null||n.isEmpty()||(i!=null&&s.add(i),Fc(this)),this._pendingEditorState=t,this._dirtyType=ph,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&s.add(i),Fc(this)}parseEditorState(t,r){return function(n,s,i){const o=$A(),a=qr,l=Wn,c=Br,u=s._dirtyElements,h=s._dirtyLeaves,f=s._cloneNotNeeded,p=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,qr=o,Wn=!1,Br=s;try{const y=s._nodes;FA(n.root,y),i&&i(),o._readOnly=!0}catch(y){y instanceof Error&&s._onError(y)}finally{s._dirtyElements=u,s._dirtyLeaves=h,s._cloneNotNeeded=f,s._dirtyType=p,qr=a,Wn=l,Br=c}return o}(typeof t=="string"?JSON.parse(t):t,this,r)}update(t,r){ns(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),ns(this,()=>{const s=Me(),i=wr();s!==null?s.dirty=!0:i.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?i.selectStart():i.selectEnd())},{onUpdate:()=>{n.removeAttribute("autocapitalize"),t&&t()},tag:"focus"}),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=lo(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Np("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}const ZH=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,F$e=ZH?v.useLayoutEffect:v.useEffect,Sy={tag:"history-merge"};function $$e({initialConfig:e,children:t}){const r=v.useMemo(()=>{const{theme:n,namespace:s,editor__DEPRECATED:i,nodes:o,onError:a,editorState:l,html:c}=e,u=kFe(null,n);let h=i||null;if(h===null){const f=M$e({editable:e.editable,html:c,namespace:s,nodes:o,onError:p=>a(p,f),theme:n});(function(p,y){if(y!==null){if(y===void 0)p.update(()=>{const m=wr();if(m.isEmpty()){const b=to();m.append(b);const x=ZH?document.activeElement:null;(Me()!==null||x!==null&&x===p.getRootElement())&&b.select()}},Sy);else if(y!==null)switch(typeof y){case"string":{const m=p.parseEditorState(y);p.setEditorState(m,Sy);break}case"object":p.setEditorState(y,Sy);break;case"function":p.update(()=>{wr().isEmpty()&&y(p)},Sy)}}})(f,l),h=f}return[h,u]},[]);return F$e(()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)},[]),d.jsx(YW.Provider,{value:r,children:t})}const U$e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?v.useLayoutEffect:v.useEffect;function q$e(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function B$e(){return function(e){const[t]=Yh(),r=v.useMemo(()=>e(t),[t,e]),n=v.useRef(r.initialValueFn()),[s,i]=v.useState(n.current);return U$e(()=>{const{initialValueFn:o,subscribe:a}=r,l=o();return n.current!==l&&(n.current=l,i(l)),a(c=>{n.current=c,i(c)})},[r,e]),s}(q$e)}function V$e(){return wr().getTextContent()}function W$e(e,t=!0){if(e)return!1;let r=V$e();return t&&(r=r.trim()),r===""}function H$e(e){if(!W$e(e,!1))return!1;const t=wr().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(Rt(s))return!1;if(ie(s)){if(!gh(s)||s.__indent!==0)return!1;const i=s.getChildren(),o=i.length;for(let a=0;a<o;a++){const l=i[n];if(!ve(l))return!1}}}return!0}function K$e(e){return()=>H$e(e)}function Z$e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}Z$e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function G$e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}G$e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const Y$e=new Map;function J$e(e){const t={},r=e.split(";");for(const n of r)if(n!==""){const[s,i]=n.split(/:([^]+)/);s&&i&&(t[s.trim()]=i.trim())}return t}function GH(e){const t=e.constructor.clone(e);return t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,ie(e)&&ie(t)?(n=e,(r=t).__first=n.__first,r.__last=n.__last,r.__size=n.__size,r.__format=n.__format,r.__indent=n.__indent,r.__dir=n.__dir,r):ve(e)&&ve(t)?function(s,i){return s.__format=i.__format,s.__style=i.__style,s.__mode=i.__mode,s.__detail=i.__detail,s}(t,e):gh(e)&&gh(t)?function(s,i){return s.__textFormat=i.__textFormat,s}(t,e):t;var r,n}function YH(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&r!==null){const[n,s]=r,i=e.isBackward(),o=n.getNode(),a=s.getNode(),l=t.is(o),c=t.is(a);if(l||c){const[u,h]=AS(e),f=o.is(a),p=t.is(i?a:o),y=t.is(i?o:a);let m,b=0;return f?(b=u>h?h:u,m=u>h?u:h):p?(b=i?h:u,m=void 0):y&&(b=0,m=i?u:h),t.__text=t.__text.slice(b,m),t}}return t}function X$e(e){const t=e.getStyle(),r=J$e(t);Y$e.set(t,r)}function UL(e,t){const r=dm(e.focus,t);return Rt(r)&&!r.isIsolated()||ie(r)&&!r.isInline()&&!r.canBeEmpty()}function Q$e(e,t,r,n){e.modify(t?"extend":"move",r,n)}function e8e(e){const t=e.anchor.getNode();return(fn(t)?t:t.getParentOrThrow()).getDirection()==="rtl"}function qL(e,t,r){const n=e8e(e);Q$e(e,t,r?!n:n,"character")}function t8e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r8e=t8e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const JH=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,n8e=JH&&"documentMode"in document?document.documentMode:null;!(!JH||!("InputEvent"in window)||n8e)&&"getTargetRanges"in new window.InputEvent("input");function $w(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function s8e(e){const t=qA(e,r=>ie(r)&&!r.isInline());return ie(t)||r8e(4,e.__key),t}const qA=(e,t)=>{let r=e;for(;r!==wr()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function wc(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function i8e(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const i=n.data;if(typeof i=="string"){let o;try{o=JSON.parse(i)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const a=o.payload;if(a&&a.functionId==="makeChanges"){const l=a.args;if(l){const[c,u,h,f,p,y]=l;e.update(()=>{const m=Me();if(me(m)){const b=m.anchor;let x=b.getNode(),w=0,_=0;if(ve(x)&&c>=0&&u>=0&&(w=c,_=c+u,m.setTextNodeRange(x,w,x,_)),w===_&&h===""||(m.insertRawText(h),x=b.getNode()),ve(x)){w=f,_=f+p;const j=x.getTextContentSize();w=w>j?j:w,_=_>j?j:_,m.setTextNodeRange(x,w,x,_)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function o8e(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let i=0;i<r.length;i++){const o=r[i];if(!QH.has(o.nodeName)){const a=eK(o,e,s,!1);a!==null&&(n=n.concat(a))}}return function(i){for(const o of i)o.getNextSibling()instanceof UA&&o.insertAfter(mh());for(const o of i){const a=o.getChildren();for(const l of a)o.insertBefore(l);o.remove()}}(s),n}function a8e(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=wr().getChildren();for(let s=0;s<n.length;s++)XH(e,n[s],r,t);return r.innerHTML}function XH(e,t,r,n=null){let s=n===null||t.isSelected(n);const i=ie(t)&&t.excludeFromCopy("html");let o=t;if(n!==null){let p=GH(t);p=ve(p)&&n!==null?YH(n,p):p,o=p}const a=ie(o)?o.getChildren():[],l=e._nodes.get(o.getType());let c;c=l&&l.exportDOM!==void 0?l.exportDOM(e,o):o.exportDOM(e);const{element:u,after:h}=c;if(!u)return!1;const f=document.createDocumentFragment();for(let p=0;p<a.length;p++){const y=a[p],m=XH(e,y,f,n);!s&&ie(t)&&m&&t.extractWithChild(y,n,"html")&&(s=!0)}if(s&&!i){if(LA(u)&&u.append(f),r.append(u),h){const p=h.call(o,u);p&&u.replaceWith(p)}}else r.append(f);return s}const QH=new Set(["STYLE","SCRIPT"]);function eK(e,t,r,n,s=new Map,i){let o=[];if(QH.has(e.nodeName))return o;let a=null;const l=function(y,m){const{nodeName:b}=y,x=m._htmlConversions.get(b.toLowerCase());let w=null;if(x!==void 0)for(const _ of x){const j=_(y);j!==null&&(w===null||(w.priority||0)<(j.priority||0))&&(w=j)}return w!==null?w.conversion:null}(e,t),c=l?l(e):null;let u=null;if(c!==null){u=c.after;const y=c.node;if(a=Array.isArray(y)?y[y.length-1]:y,a!==null){for(const[,m]of s)if(a=m(a,i),!a)break;a&&o.push(...Array.isArray(y)?y:[a])}c.forChild!=null&&s.set(e.nodeName,c.forChild)}const h=e.childNodes;let f=[];const p=(a==null||!Jh(a))&&(a!=null&&OS(a)||n);for(let y=0;y<h.length;y++)f.push(...eK(h[y],t,r,p,new Map(s),a));return u!=null&&(f=u(f)),m$e(e)&&(f=l8e(e,f,p?()=>{const y=new UA;return r.push(y),y}:to)),a==null?o=o.concat(f):ie(a)&&a.append(...f),o}function l8e(e,t,r){const n=e.style.textAlign,s=[];let i=[];for(let o=0;o<t.length;o++){const a=t[o];if(OS(a))n&&!a.getFormat()&&a.setFormat(n),s.push(a);else if(i.push(a),o===t.length-1||o<t.length-1&&OS(t[o+1])){const l=r();l.setFormat(n),l.append(...i),s.push(l),i=[]}}return s}function c8e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mb=c8e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const u8e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,tK=e=>u8e?(e||window).getSelection():null;function d8e(e){const t=Me();return t==null&&Mb(166),me(t)&&t.isCollapsed()||t.getNodes().length===0?"":a8e(e,t)}function h8e(e){const t=Me();return t==null&&Mb(166),me(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(f8e(e,t))}function BL(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return VL(r,p8e(o.nodes),t)}catch{}const s=e.getData("text/html");if(s)try{const o=new DOMParser().parseFromString(s,"text/html");return VL(r,o8e(r,o),t)}catch{}const i=e.getData("text/plain")||e.getData("text/uri-list");if(i!=null)if(me(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let a=0;a<o.length;a++){const l=Me();if(me(l)){const c=o[a];c===`
`||c===`\r
`?l.insertParagraph():c==="	"?l.insertNodes([ig()]):l.insertText(c)}}}else t.insertRawText(i)}function VL(e,t,r){e.dispatchCommand(SFe,{nodes:t,selection:r})||r.insertNodes(t)}function rK(e,t,r,n=[]){let s=t===null||r.isSelected(t);const i=ie(r)&&r.excludeFromCopy("html");let o=r;if(t!==null){let c=GH(r);c=ve(c)&&t!==null?YH(t,c):c,o=c}const a=ie(o)?o.getChildren():[],l=function(c){const u=c.exportJSON(),h=c.constructor;if(u.type!==h.getType()&&Mb(58,h.name),ie(c)){const f=u.children;Array.isArray(f)||Mb(59,h.name)}return u}(o);if(ve(o)){const c=o.__text;c.length>0?l.text=c:s=!1}for(let c=0;c<a.length;c++){const u=a[c],h=rK(e,t,u,l.children);!s&&ie(r)&&h&&r.extractWithChild(u,t,"clone")&&(s=!0)}if(s&&!i)n.push(l);else if(Array.isArray(l.children))for(let c=0;c<l.children.length;c++){const u=l.children[c];n.push(u)}return s}function f8e(e,t){const r=[],n=wr().getChildren();for(let s=0;s<n.length;s++)rK(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function p8e(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=R$e(n);ve(s)&&X$e(s),t.push(s)}return t}let Uu=null;async function WL(e,t){if(Uu!==null)return!1;if(t!==null)return new Promise((a,l)=>{e.update(()=>{a(HL(e,t))})});const r=e.getRootElement(),n=e._window==null?window.document:e._window.document,s=tK(e._window);if(r===null||s===null)return!1;const i=n.createElement("span");i.style.cssText="position: fixed; top: -1000px;",i.append(n.createTextNode("#")),r.append(i);const o=new Range;return o.setStart(i,0),o.setEnd(i,1),s.removeAllRanges(),s.addRange(o),new Promise((a,l)=>{const c=e.registerCommand(Ew,u=>(wc(u,ClipboardEvent)&&(c(),Uu!==null&&(window.clearTimeout(Uu),Uu=null),a(HL(e,u))),!0),L$e);Uu=window.setTimeout(()=>{c(),Uu=null,a(!1)},50),n.execCommand("copy"),i.remove()})}function HL(e,t){const r=tK(e._window);if(!r)return!1;const n=r.anchorNode,s=r.focusNode;if(n!==null&&s!==null&&!rg(e,n,s))return!1;t.preventDefault();const i=t.clipboardData,o=Me();if(i===null||o===null)return!1;const a=d8e(e),l=h8e(e);let c="";return o!==null&&(c=o.getTextContent()),a!==null&&i.setData("text/html",a),l!==null&&i.setData("application/x-lexical-editor",l),i.setData("text/plain",c),!0}function KL(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const ef=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,m8e=ef&&"documentMode"in document?document.documentMode:null,g8e=!(!ef||!("InputEvent"in window)||m8e)&&"getTargetRanges"in new window.InputEvent("input"),y8e=ef&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),v8e=ef&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,b8e=ef&&/^(?=.*Chrome).*/i.test(navigator.userAgent),x8e=ef&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!b8e,ZL=NFe();function Ey(e){let t=null;if(wc(e,DragEvent)?t=e.dataTransfer:wc(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function GL(e){const t=Me();if(!me(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const i=n[s],o=i.getKey();if(r.has(o))continue;const a=qA(i,c=>ie(c)&&!c.isInline());if(a===null)continue;const l=a.getKey();a.canIndent()&&!r.has(l)&&(r.add(l),e(a))}return r.size>0}function Cy(e){const t=tu(e);return Rt(t)}function w8e(e){return $w(e.registerCommand(JW,t=>{const r=Me();return!!li(r)&&(r.clear(),!0)},0),e.registerCommand(Mc,t=>{const r=Me();return!!me(r)&&(r.deleteCharacter(t),!0)},dt),e.registerCommand(cm,t=>{const r=Me();return!!me(r)&&(r.deleteWord(t),!0)},dt),e.registerCommand(um,t=>{const r=Me();return!!me(r)&&(r.deleteLine(t),!0)},dt),e.registerCommand(Ad,t=>{const r=Me();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)BL(n,r,e);else if(me(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0},dt),e.registerCommand(pS,()=>{const t=Me();return!!me(t)&&(t.removeText(),!0)},dt),e.registerCommand(ol,t=>{const r=Me();return!!me(r)&&(r.formatText(t),!0)},dt),e.registerCommand(IFe,t=>{const r=Me();if(!me(r)&&!li(r))return!1;const n=r.getNodes();for(const s of n){const i=qA(s,o=>ie(o)&&!o.isInline());i!==null&&i.setFormat(t)}return!0},dt),e.registerCommand(Td,t=>{const r=Me();return!!me(r)&&(r.insertLineBreak(t),!0)},dt),e.registerCommand(_b,()=>{const t=Me();return!!me(t)&&(t.insertParagraph(),!0)},dt),e.registerCommand(PFe,()=>(A$e([ig()]),!0),dt),e.registerCommand(RFe,()=>GL(t=>{const r=t.getIndent();t.setIndent(r+1)}),dt),e.registerCommand(iL,()=>GL(t=>{const r=t.getIndent();r>0&&t.setIndent(r-1)}),dt),e.registerCommand(eH,t=>{const r=Me();if(li(r)&&!Cy(t.target)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(me(r)){const n=dm(r.focus,!0);if(!t.shiftKey&&Rt(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1},dt),e.registerCommand(tH,t=>{const r=Me();if(li(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(me(r)){if(function(s){const i=s.focus;return i.key==="root"&&i.offset===wr().getChildrenSize()}(r))return t.preventDefault(),!0;const n=dm(r.focus,!1);if(!t.shiftKey&&Rt(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1},dt),e.registerCommand(QW,t=>{const r=Me();if(li(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectPrevious(),!0}if(!me(r))return!1;if(UL(r,!0)){const n=t.shiftKey;return t.preventDefault(),qL(r,n,!0),!0}return!1},dt),e.registerCommand(XW,t=>{const r=Me();if(li(r)&&!Cy(t.target)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),s[0].selectNext(0,0),!0}if(!me(r))return!1;const n=t.shiftKey;return!!UL(r,!1)&&(t.preventDefault(),qL(r,n,!1),!0)},dt),e.registerCommand(rH,t=>{if(Cy(t.target))return!1;const r=Me();if(!me(r))return!1;t.preventDefault();const{anchor:n}=r,s=n.getNode();return r.isCollapsed()&&n.offset===0&&!fn(s)&&s8e(s).getIndent()>0?e.dispatchCommand(iL,void 0):e.dispatchCommand(Mc,!0)},dt),e.registerCommand(sH,t=>{if(Cy(t.target))return!1;const r=Me();return!!me(r)&&(t.preventDefault(),e.dispatchCommand(Mc,!1))},dt),e.registerCommand(jb,t=>{const r=Me();if(!me(r))return!1;if(t!==null){if((v8e||y8e||x8e)&&g8e)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(Td,!1)}return e.dispatchCommand(_b,void 0)},dt),e.registerCommand(nH,()=>{const t=Me();return!!me(t)&&(e.blur(),!0)},dt),e.registerCommand(iH,t=>{const[,r]=Ey(t);if(r.length>0){const s=KL(t.clientX,t.clientY);if(s!==null){const{offset:i,node:o}=s,a=tu(o);if(a!==null){const l=C$e();if(ve(a))l.anchor.set(a.getKey(),i,"text"),l.focus.set(a.getKey(),i,"text");else{const u=a.getParentOrThrow().getKey(),h=a.getIndexWithinParent()+1;l.anchor.set(u,h,"element"),l.focus.set(u,h,"element")}const c=mH(l);ao(c)}e.dispatchCommand(ZL,r)}return t.preventDefault(),!0}const n=Me();return!!me(n)},dt),e.registerCommand(oH,t=>{const[r]=Ey(t),n=Me();return!(r&&!me(n))},dt),e.registerCommand(aH,t=>{const[r]=Ey(t),n=Me();if(r&&!me(n))return!1;const s=KL(t.clientX,t.clientY);if(s!==null){const i=tu(s.node);Rt(i)&&t.preventDefault()}return!0},dt),e.registerCommand(mS,()=>(d$e(),!0),dt),e.registerCommand(Ew,t=>(WL(e,wc(t,ClipboardEvent)?t:null),!0),dt),e.registerCommand(bA,t=>(async function(r,n){await WL(n,wc(r,ClipboardEvent)?r:null),n.update(()=>{const s=Me();me(s)?s.removeText():li(s)&&s.getNodes().forEach(i=>i.remove())})}(t,e),!0),dt),e.registerCommand(gA,t=>{const[,r,n]=Ey(t);return r.length>0&&!n?(e.dispatchCommand(ZL,r),!0):AA(t.target)?!1:Me()!==null&&(function(s,i){s.preventDefault(),i.update(()=>{const o=Me(),a=wc(s,InputEvent)||wc(s,KeyboardEvent)?null:s.clipboardData;a!=null&&o!==null&&BL(a,o,i)},{tag:"paste"})}(t,e),!0)},dt))}const PS=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?v.useLayoutEffect:v.useEffect;function YL(e){return e.getEditorState().read(K$e(e.isComposing()))}function _8e({contentEditable:e,placeholder:t,ErrorBoundary:r}){const[n]=Yh(),s=function(i,o){const[a,l]=v.useState(()=>i.getDecorators());return PS(()=>i.registerDecoratorListener(c=>{ro.flushSync(()=>{l(c)})}),[i]),v.useEffect(()=>{l(i.getDecorators())},[i]),v.useMemo(()=>{const c=[],u=Object.keys(a);for(let h=0;h<u.length;h++){const f=u[h],p=d.jsx(o,{onError:m=>i._onError(m),children:d.jsx(v.Suspense,{fallback:null,children:a[f]})}),y=i.getElementByKey(f);y!==null&&c.push(ro.createPortal(p,y,f))}return c},[o,a,i])}(n,r);return function(i){PS(()=>$w(w8e(i),i8e(i)),[i])}(n),d.jsxs(d.Fragment,{children:[e,d.jsx(j8e,{content:t}),s]})}function j8e({content:e}){const[t]=Yh(),r=function(s){const[i,o]=v.useState(()=>YL(s));return PS(()=>{function a(){const l=YL(s);o(l)}return a(),$w(s.registerUpdateListener(()=>{a()}),s.registerEditableListener(()=>{a()}))},[s]),i}(t),n=B$e();return r?typeof e=="function"?e(n):e:null}const k8e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?v.useLayoutEffect:v.useEffect;function N8e({ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:r,ariaDescribedBy:n,ariaExpanded:s,ariaLabel:i,ariaLabelledBy:o,ariaMultiline:a,ariaOwns:l,ariaRequired:c,autoCapitalize:u,className:h,id:f,role:p="textbox",spellCheck:y=!0,style:m,tabIndex:b,"data-testid":x,...w}){const[_]=Yh(),[j,k]=v.useState(!1),S=v.useCallback(C=>{C&&C.ownerDocument&&C.ownerDocument.defaultView&&_.setRootElement(C)},[_]);return k8e(()=>(k(_.isEditable()),_.registerEditableListener(C=>{k(C)})),[_]),d.jsx("div",{...w,"aria-activedescendant":j?e:void 0,"aria-autocomplete":j?t:"none","aria-controls":j?r:void 0,"aria-describedby":n,"aria-expanded":j&&p==="combobox"?!!s:void 0,"aria-label":i,"aria-labelledby":o,"aria-multiline":a,"aria-owns":j?l:void 0,"aria-readonly":!j||void 0,"aria-required":c,autoCapitalize:u,className:h,contentEditable:j,"data-testid":x,id:f,ref:S,role:p,spellCheck:y,style:m,tabIndex:b})}const mj=0,RS=1,IS=2,ni=0,S8e=1,JL=2,E8e=3,C8e=4;function T8e(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return ni;const i=t._selection,o=e._selection;if(s)return S8e;if(!(me(i)&&me(o)&&o.isCollapsed()&&i.isCollapsed()))return ni;const a=function(x,w,_){const j=x._nodeMap,k=[];for(const S of w){const C=j.get(S);C!==void 0&&k.push(C)}for(const[S,C]of _){if(!C)continue;const E=j.get(S);E===void 0||fn(E)||k.push(E)}return k}(t,r,n);if(a.length===0)return ni;if(a.length>1){const x=t._nodeMap,w=x.get(i.anchor.key),_=x.get(o.anchor.key);return w&&_&&!e._nodeMap.has(w.__key)&&ve(w)&&w.__text.length===1&&i.anchor.offset===1?JL:ni}const l=a[0],c=e._nodeMap.get(l.__key);if(!ve(c)||!ve(l)||c.__mode!==l.__mode)return ni;const u=c.__text,h=l.__text;if(u===h)return ni;const f=i.anchor,p=o.anchor;if(f.key!==p.key||f.type!=="text")return ni;const y=f.offset,m=p.offset,b=h.length-u.length;return b===1&&m===y-1?JL:b===-1&&m===y+1?E8e:b===-1&&m===y?C8e:ni}function A8e(e,t){let r=Date.now(),n=ni;return(s,i,o,a,l,c)=>{const u=Date.now();if(c.has("historic"))return n=ni,r=u,IS;const h=T8e(s,i,a,l,e.isComposing()),f=(()=>{const p=o===null||o.editor===e,y=c.has("history-push");if(!y&&p&&c.has("history-merge"))return mj;if(s===null)return RS;const m=i._selection;return a.size>0||l.size>0?y===!1&&h!==ni&&h===n&&u<r+t&&p||a.size===1&&function(b,x,w){const _=x._nodeMap.get(b),j=w._nodeMap.get(b),k=x._selection,S=w._selection;let C=!1;return me(k)&&me(S)&&(C=k.anchor.type==="element"&&k.focus.type==="element"&&S.anchor.type==="text"&&S.focus.type==="text"),!(C||!ve(_)||!ve(j))&&_.__type===j.__type&&_.__text===j.__text&&_.__mode===j.__mode&&_.__detail===j.__detail&&_.__style===j.__style&&_.__format===j.__format&&_.__parent===j.__parent}(Array.from(a)[0],s,i)?mj:RS:m!==null?mj:IS})();return r=u,n=h,f}}function XL(e){e.undoStack=[],e.redoStack=[],e.current=null}function O8e(e,t,r){const n=A8e(e,r);return $w(e.registerCommand(yA,()=>(function(s,i){const o=i.redoStack,a=i.undoStack;if(a.length!==0){const l=i.current,c=a.pop();l!==null&&(o.push(l),s.dispatchCommand(jy,!0)),a.length===0&&s.dispatchCommand(ky,!1),i.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:"historic"})}}(e,t),!0),dt),e.registerCommand(vA,()=>(function(s,i){const o=i.redoStack,a=i.undoStack;if(o.length!==0){const l=i.current;l!==null&&(a.push(l),s.dispatchCommand(ky,!0));const c=o.pop();o.length===0&&s.dispatchCommand(jy,!1),i.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:"historic"})}}(e,t),!0),dt),e.registerCommand(LFe,()=>(XL(t),!1),dt),e.registerCommand(MFe,()=>(XL(t),e.dispatchCommand(jy,!1),e.dispatchCommand(ky,!1),!0),dt),e.registerUpdateListener(({editorState:s,prevEditorState:i,dirtyLeaves:o,dirtyElements:a,tags:l})=>{const c=t.current,u=t.redoStack,h=t.undoStack,f=c===null?null:c.editorState;if(c!==null&&s===f)return;const p=n(i,s,c,o,a,l);if(p===RS)u.length!==0&&(t.redoStack=[],e.dispatchCommand(jy,!1)),c!==null&&(h.push({...c}),e.dispatchCommand(ky,!0));else if(p===IS)return;t.current={editor:e,editorState:s}}))}function P8e(){return{current:null,redoStack:[],undoStack:[]}}function R8e({externalHistoryState:e}){const[t]=Yh();return function(r,n,s=1e3){const i=v.useMemo(()=>n||P8e(),[n]);v.useEffect(()=>O8e(r,i,s),[s,r,i])}(t,e),null}function I8e({defaultSelection:e}){const[t]=Yh();return v.useEffect(()=>{t.focus(()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})},{defaultSelection:e})},[e,t]),null}function DS(e,t){return DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},DS(e,t)}var QL={error:null},D8e=function(e){var t,r;function n(){for(var i,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(i=e.call.apply(e,[this].concat(a))||this).state=QL,i.resetErrorBoundary=function(){for(var c,u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];i.props.onReset==null||(c=i.props).onReset.apply(c,h),i.reset()},i}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,DS(t,r),n.getDerivedStateFromError=function(i){return{error:i}};var s=n.prototype;return s.reset=function(){this.setState(QL)},s.componentDidCatch=function(i,o){var a,l;(a=(l=this.props).onError)==null||a.call(l,i,o)},s.componentDidUpdate=function(i,o){var a,l,c,u,h=this.state.error,f=this.props.resetKeys;h!==null&&o.error!==null&&((c=i.resetKeys)===void 0&&(c=[]),(u=f)===void 0&&(u=[]),c.length!==u.length||c.some(function(p,y){return!Object.is(p,u[y])}))&&((a=(l=this.props).onResetKeysChange)==null||a.call(l,i.resetKeys,f),this.reset())},s.render=function(){var i=this.state.error,o=this.props,a=o.fallbackRender,l=o.FallbackComponent,c=o.fallback;if(i!==null){var u={error:i,resetErrorBoundary:this.resetErrorBoundary};if(v.isValidElement(c))return c;if(typeof a=="function")return a(u);if(l)return v.createElement(l,u);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n}(v.Component);function L8e({children:e,onError:t}){return d.jsx(D8e,{fallback:d.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}function M8e({item:e,contentType:t,onSave:r,onCancel:n}){const[s,i]=v.useState(l()),[o,a]=v.useState({});function l(){if(e){const{id:m,created_at:b,updated_at:x,created_by:w,..._}=e;return _}return(()=>{switch(t){case"posts":case"pages":return{status:"draft",title:"",content:"",slug:"",author_id:void 0,excerpt:void 0,featured_image:void 0,tags:[],category_id:void 0};case"storeItems":return{status:"active",name:"",description:"",price:0,category:"digital",image_url:void 0,stock_quantity:0,sku:void 0};case"libraryItems":return{status:"draft",title:"",description:"",file_url:"",file_type:void 0,file_size:0,category:"tutorial",thumbnail_url:void 0};case"characters":return{status:"draft",name:"",description:"",role:"",backstory:"",image_url:"",birth_date:void 0,death_date:void 0,species:void 0,occupation:void 0,relationships:void 0};case"timelineEvents":return{status:"draft",title:"",date:"",era:"ancient",description:"",is_published:!1,details:null,background_image:null,nested_events:[]};case"betaUsers":return{status:"pending",name:"",email:"",message:""};default:throw new Error(`Unsupported content type: ${t}`)}})()}const c=v.useCallback(()=>{const m=e?{...e,...s}:s;r(m)},[s,e,r]),u={namespace:"MyEditor",theme:{},onError(m){console.error(m)}},h=v.useCallback(m=>b=>{const x=b.target.value;i(w=>({...w,[m]:x}))},[]),f=v.useCallback(m=>b=>{const x=parseFloat(b.target.value);i(w=>({...w,[m]:x}))},[]),p=v.useCallback(m=>b=>{const x=b.target.value;i(w=>({...w,[m]:x}))},[]),y=()=>{switch(t){case"posts":case"pages":const m=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:m.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter title...",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug"}),d.jsx("input",{type:"text",value:m.slug,onChange:k=>i(S=>({...S,slug:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"my-awesome-post"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"URL-friendly version of the title. e.g., 'my-awesome-post'"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),d.jsx("div",{className:"editor-container",children:d.jsxs($$e,{initialConfig:u,children:[d.jsx(_8e,{contentEditable:d.jsx(N8e,{className:"editor-input"}),placeholder:d.jsx("div",{className:"editor-placeholder",children:"Enter your content..."}),ErrorBoundary:L8e}),d.jsx(R8e,{}),d.jsx(I8e,{})]})})]})]});case"storeItems":const b=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name"}),d.jsx("input",{type:"text",value:b.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price"}),d.jsx("input",{type:"number",step:"0.01",value:b.price,onChange:f("price"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),d.jsxs("select",{value:b.category,onChange:p("category"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"digital",children:"Digital"}),d.jsx("option",{value:"physical",children:"Physical"}),d.jsx("option",{value:"subscription",children:"Subscription"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:b.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product description..."})]})]});case"libraryItems":const x=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:x.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resource title..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),d.jsxs("select",{value:x.category,onChange:p("category"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"tutorial",children:"Tutorial"}),d.jsx("option",{value:"resources",children:"Resources"}),d.jsx("option",{value:"template",children:"Template"}),d.jsx("option",{value:"guide",children:"Guide"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File URL"}),d.jsx("input",{type:"url",value:x.file_url,onChange:h("file_url"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:x.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resource description..."})]})]});case"characters":const w=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Character Name"}),d.jsx("input",{type:"text",value:w.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),d.jsxs("select",{value:w.role,onChange:p("role"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"protagonist",children:"Protagonist"}),d.jsx("option",{value:"antagonist",children:"Antagonist"}),d.jsx("option",{value:"mentor",children:"Mentor"}),d.jsx("option",{value:"ally",children:"Ally"}),d.jsx("option",{value:"neutral",children:"Neutral"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:w.description,onChange:h("description"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character description..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backstory"}),d.jsx("textarea",{value:w.backstory,onChange:h("backstory"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character backstory..."})]})]});case"timelineEvents":const _=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title"}),d.jsx("input",{type:"text",value:_.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event title..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),d.jsx("input",{type:"date",value:_.date,onChange:h("date"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Era"}),d.jsxs("select",{value:_.era,onChange:p("era"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"ancient",children:"Ancient"}),d.jsx("option",{value:"medieval",children:"Medieval"}),d.jsx("option",{value:"modern",children:"Modern"}),d.jsx("option",{value:"future",children:"Future"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:_.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event description..."})]})]});case"betaUsers":const j=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),d.jsx("input",{type:"text",value:j.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"User name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),d.jsx("input",{type:"email",value:j.email,onChange:h("email"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"user@example.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),d.jsx("textarea",{value:j.message,onChange:h("message"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"User message/notes..."})]})]});default:return null}};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?`Edit ${t}`:`Create New ${t}`}),d.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700",children:d.jsx(pl,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[y(),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:s.status,onChange:m=>i({...s,status:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t==="posts"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"archived",children:"Archived"})]}),t==="pages"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="storeItems"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]}),t==="libraryItems"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="characters"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="timelineEvents"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="betaUsers"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsxs("button",{type:"button",onClick:c,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(IE,{className:"w-4 h-4"}),"Save"]}),d.jsx("button",{type:"button",onClick:n,className:"flex items-center gap-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}const z8e=({contentType:e,items:t,title:r,columns:n,createActionLabel:s,onEdit:i,onDelete:o,onCreateNew:a})=>{const[l,c]=v.useState(""),[u,h]=v.useState("all"),f=t.filter(p=>{const y=Object.values(p).some(b=>b&&b.toString().toLowerCase().includes(l.toLowerCase())),m=u==="all"||p.status===u;return y&&m});return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r}),d.jsxs("button",{onClick:a,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Go,{className:"w-4 h-4"}),s]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(ou,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),placeholder:`Search ${r.toLowerCase()}...`,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsxs("select",{value:u,onChange:p=>h(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"}),d.jsx("option",{value:"pending",children:"Pending"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[n.map(p=>d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:p.label},p.key)),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:f.map(p=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[n.map(y=>d.jsx("td",{className:"py-4 px-6",children:y.render?y.render(p):d.jsx("div",{className:y.key===n[0].key?"font-medium text-gray-900":"text-sm text-gray-500",children:p[y.key]})},y.key)),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>i(p),className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ax,{className:"w-4 h-4"})}),d.jsx("button",{className:"p-1 text-gray-500 hover:text-green-600",children:d.jsx(Sm,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>o(p.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(au,{className:"w-4 h-4"})})]})})]},p.id))})]})})]})},F8e=async()=>{const{data:e,error:t}=await le.from("pages").select("*");if(t)throw new Error(t.message);return e},$8e=async e=>{const{data:t,error:r}=await le.from("pages").insert(e).select();if(r)throw new Error(r.message);return t[0]},U8e=async e=>{const{data:t,error:r}=await le.from("pages").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},q8e=async e=>{const{error:t}=await le.from("pages").delete().eq("id",e);if(t)throw new Error(t.message)},B8e=()=>{const e=ha(),[t,r]=v.useState(!1),[n,s]=v.useState(null),{data:i,isLoading:o,isError:a,error:l}=It({queryKey:["pages"],queryFn:F8e}),c=rr({mutationFn:$8e,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]}),r(!1),s(null)}}),u=rr({mutationFn:U8e,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]}),r(!1),s(null)}}),h=rr({mutationFn:q8e,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]})}}),f=m=>{n?u.mutate(m):c.mutate(m)},p=m=>{window.confirm("Are you sure you want to delete this page?")&&h.mutate(m)},y=[{key:"title",label:"Page Title"},{key:"slug",label:"URL Slug"},{key:"status",label:"Status",render:m=>d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m.status==="published"?"bg-green-100 text-green-800":m.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:m.status})},{key:"created_at",label:"Created At",render:m=>new Date(m.created_at).toLocaleDateString()},{key:"updated_at",label:"Last Updated",render:m=>new Date(m.updated_at).toLocaleDateString()}];return o?d.jsx("div",{children:"Loading pages..."}):a?d.jsxs("div",{children:["Error loading pages: ",l==null?void 0:l.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(M8e,{item:n,contentType:"pages",onSave:f,onCancel:()=>{r(!1),s(null)}}):d.jsx(z8e,{contentType:"pages",items:i||[],title:"Website Pages",columns:y,createActionLabel:"New Page",onEdit:m=>{s(m),r(!0)},onDelete:p,onCreateNew:()=>{s(null),r(!0)}})})},V8e=async()=>{const{data:e,error:t}=await le.from("characters").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},W8e=async e=>{const{data:t,error:r}=await le.from("characters").insert(e).select();if(r)throw new Error(r.message);return t[0]},H8e=async e=>{const{id:t,...r}=e,{data:n,error:s}=await le.from("characters").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},K8e=async e=>{const{error:t}=await le.from("characters").delete().eq("id",e);if(t)throw new Error(t.message)},Z8e=({character:e,onSave:t,onCancel:r})=>{const[n,s]=v.useState({name:(e==null?void 0:e.name)||"",title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",traits:(e==null?void 0:e.traits.join(", "))||"",image_url:(e==null?void 0:e.image_url)||"",silhouette_url:(e==null?void 0:e.silhouette_url)||""}),i=()=>{const o={...n,traits:n.traits.split(",").map(a=>a.trim()).filter(a=>a!=="")};t({...e,...o,id:e==null?void 0:e.id})};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e?"Edit Character":"Create New Character"}),d.jsxs("form",{onSubmit:o=>{o.preventDefault(),i()},children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),d.jsx("input",{type:"text",value:n.name,onChange:o=>s({...n,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:n.title,onChange:o=>s({...n,title:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:n.description,onChange:o=>s({...n,description:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Traits (comma-separated)"}),d.jsx("input",{type:"text",value:n.traits,onChange:o=>s({...n,traits:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),d.jsx("input",{type:"url",value:n.image_url,onChange:o=>s({...n,image_url:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Silhouette URL (Optional)"}),d.jsx("input",{type:"url",value:n.silhouette_url,onChange:o=>s({...n,silhouette_url:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Save Character"}),d.jsx("button",{type:"button",onClick:r,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},G8e=()=>{const e=ha(),[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,o]=v.useState(""),{data:a,isLoading:l,isError:c,error:u}=It({queryKey:["characters"],queryFn:V8e}),h=rr({mutationFn:W8e,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]}),r(!1),s(null)}}),f=rr({mutationFn:H8e,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]}),r(!1),s(null)}}),p=rr({mutationFn:K8e,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]})}}),y=x=>{n?f.mutate(x):h.mutate(x)},m=x=>{window.confirm("Are you sure you want to delete this character?")&&p.mutate(x)},b=(a==null?void 0:a.filter(x=>x.name.toLowerCase().includes(i.toLowerCase())))||[];return l?d.jsx("div",{children:"Loading characters..."}):c?d.jsxs("div",{children:["Error loading characters: ",u==null?void 0:u.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(Z8e,{character:n,onSave:y,onCancel:()=>{r(!1),s(null)}}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Characters"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Go,{className:"w-4 h-4"}),"New Character"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:d.jsxs("div",{className:"relative",children:[d.jsx(ou,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),placeholder:"Search characters...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Name"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Traits"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:b.map(x=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:x.name})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:x.title}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:x.traits.join(", ")}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(x),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ax,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>m(x.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(au,{className:"w-4 h-4"})})]})})]},x.id))})]})})]})})},Y8e=async()=>{const{data:e,error:t}=await le.from("works").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},J8e=async e=>{const{data:t,error:r}=await le.from("works").insert(e).select();if(r)throw new Error(r.message);return t[0]},X8e=async e=>{const{id:t,...r}=e,{data:n,error:s}=await le.from("works").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},Q8e=async e=>{const{error:t}=await le.from("works").delete().eq("id",e);if(t)throw new Error(t.message)},eUe=({work:e,onSave:t,onCancel:r,allWorks:n})=>{const[s,i]=v.useState({title:(e==null?void 0:e.title)||"",type:(e==null?void 0:e.type)||"book",parent_id:(e==null?void 0:e.parent_id)||"",order_in_parent:(e==null?void 0:e.order_in_parent)||"",description:(e==null?void 0:e.description)||"",status:(e==null?void 0:e.status)||"planning",progress_percentage:(e==null?void 0:e.progress_percentage)||0,release_date:(e==null?void 0:e.release_date)||"",estimated_release:(e==null?void 0:e.estimated_release)||"",cover_image_url:(e==null?void 0:e.cover_image_url)||"",sample_content:(e==null?void 0:e.sample_content)||"",is_purchasable:(e==null?void 0:e.is_purchasable)??!0,is_featured:(e==null?void 0:e.is_featured)??!1,word_count:(e==null?void 0:e.word_count)||"",target_word_count:(e==null?void 0:e.target_word_count)||""}),o=()=>{t({...e,...s,parent_id:s.parent_id===""?null:s.parent_id,order_in_parent:s.order_in_parent?Number(s.order_in_parent):void 0,progress_percentage:s.progress_percentage?Number(s.progress_percentage):void 0,word_count:s.word_count?Number(s.word_count):void 0,target_word_count:s.target_word_count?Number(s.target_word_count):void 0,id:e==null?void 0:e.id})},a=n.filter(l=>l.id!==(e==null?void 0:e.id));return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e?"Edit Work":"Create New Work"}),d.jsxs("form",{onSubmit:l=>{l.preventDefault(),o()},children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:s.title,onChange:l=>i({...s,title:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),d.jsxs("select",{value:s.type,onChange:l=>i({...s,type:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"issue",children:"Issue"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent Work (for nesting)"}),d.jsxs("select",{value:s.parent_id,onChange:l=>i({...s,parent_id:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"None"}),a.map(l=>d.jsxs("option",{value:l.id,children:[l.title," (",l.type,")"]},l.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order in Parent"}),d.jsx("input",{type:"number",value:s.order_in_parent,onChange:l=>i({...s,order_in_parent:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:s.description,onChange:l=>i({...s,description:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:s.status,onChange:l=>i({...s,status:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"planning",children:"Planning"}),d.jsx("option",{value:"writing",children:"Writing"}),d.jsx("option",{value:"editing",children:"Editing"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"on_hold",children:"On Hold"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress Percentage (0-100)"}),d.jsx("input",{type:"number",value:s.progress_percentage,onChange:l=>i({...s,progress_percentage:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"100"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Date"}),d.jsx("input",{type:"date",value:s.release_date,onChange:l=>i({...s,release_date:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Release (e.g., Q2 2024)"}),d.jsx("input",{type:"text",value:s.estimated_release,onChange:l=>i({...s,estimated_release:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Image URL"}),d.jsx("input",{type:"url",value:s.cover_image_url,onChange:l=>i({...s,cover_image_url:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sample Content"}),d.jsx("textarea",{value:s.sample_content,onChange:l=>i({...s,sample_content:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-48"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Word Count"}),d.jsx("input",{type:"number",value:s.word_count,onChange:l=>i({...s,word_count:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Word Count"}),d.jsx("input",{type:"number",value:s.target_word_count,onChange:l=>i({...s,target_word_count:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isPurchasable",checked:s.is_purchasable,onChange:l=>i({...s,is_purchasable:l.target.checked}),className:"mr-2"}),d.jsx("label",{htmlFor:"isPurchasable",className:"text-sm font-medium text-gray-700",children:"Is Purchasable"})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isFeatured",checked:s.is_featured,onChange:l=>i({...s,is_featured:l.target.checked}),className:"mr-2"}),d.jsx("label",{htmlFor:"isFeatured",className:"text-sm font-medium text-gray-700",children:"Is Featured"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Save Work"}),d.jsx("button",{type:"button",onClick:r,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},tUe=()=>{const e=ha(),[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,o]=v.useState(""),[a,l]=v.useState("all"),[c,u]=v.useState("all"),{data:h,isLoading:f,isError:p,error:y}=It({queryKey:["works"],queryFn:Y8e}),m=rr({mutationFn:J8e,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]}),r(!1),s(null)},onError:k=>{alert(`Error creating work: ${k.message}`)}}),b=rr({mutationFn:X8e,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]}),r(!1),s(null)},onError:k=>{alert(`Error updating work: ${k.message}`)}}),x=rr({mutationFn:Q8e,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]})}}),w=k=>{n?b.mutate(k):m.mutate(k)},_=k=>{window.confirm("Are you sure you want to delete this work?")&&x.mutate(k)},j=(h==null?void 0:h.filter(k=>{const S=k.title.toLowerCase().includes(i.toLowerCase()),C=a==="all"||k.type===a,E=c==="all"||k.status===c;return S&&C&&E}))||[];return f?d.jsx("div",{children:"Loading works..."}):p?d.jsxs("div",{children:["Error loading works: ",y==null?void 0:y.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(eUe,{work:n,onSave:w,onCancel:()=>{r(!1),s(null)},allWorks:h||[]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Works Management"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Go,{className:"w-4 h-4"}),"New Work"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(ou,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:k=>o(k.target.value),placeholder:"Search works...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("select",{value:a,onChange:k=>l(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"issue",children:"Issue"})]}),d.jsxs("select",{value:c,onChange:k=>u(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"planning",children:"Planning"}),d.jsx("option",{value:"writing",children:"Writing"}),d.jsx("option",{value:"editing",children:"Editing"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"on_hold",children:"On Hold"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Type"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Status"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Parent"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Release Date"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:j.map(k=>{var S;return d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:k.title})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:k.type}),d.jsx("td",{className:"py-4 px-6",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.status==="published"?"bg-green-100 text-green-800":k.status==="planning"?"bg-blue-100 text-blue-800":k.status==="writing"?"bg-yellow-100 text-yellow-800":k.status==="editing"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:k.status})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:((S=h==null?void 0:h.find(C=>C.id===k.parent_id))==null?void 0:S.title)||"N/A"}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:k.release_date||k.estimated_release||"N/A"}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(k),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ax,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>_(k.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(au,{className:"w-4 h-4"})})]})})]},k.id)})})]})})]})})},zb={},eM=typeof window<"u",LS=(zb==null?void 0:zb.VITE_SUPABASE_URL)||"https://opukvvmumyegtkukqint.supabase.co",nK=(zb==null?void 0:zb.VITE_SUPABASE_ANON_KEY)||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",LS);console.log("DEBUG: supabaseAnonKey (raw):",nK);console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set");let MS;var tM;try{MS=I1(LS,nK,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:eM?window.localStorage:void 0}}),typeof process<"u"&&((tM=Mre)==null?void 0:tM.NODE_ENV)==="development"&&eM&&console.log("Supabase client initialized with URL:",LS)}catch(e){throw console.error("Error initializing Supabase client:",e),e}const rUe=()=>{const[e,t]=v.useState(""),[r,n]=v.useState("chapter"),[s,i]=v.useState(""),[o,a]=v.useState(""),[l,c]=v.useState(""),[u,h]=v.useState(null),[f,p]=v.useState(null),[y,m]=v.useState(null),[b,x]=v.useState(""),[w,_]=v.useState(""),[j,k]=v.useState(!1),[S,C]=v.useState([]),[E,T]=v.useState(!0),[R,O]=v.useState(null),[I,P]=v.useState(!1),[D,L]=v.useState(null),[B,q]=v.useState(""),[K,H]=v.useState(!1),[$,J]=v.useState(""),[te,be]=v.useState(""),Z=async()=>{T(!0),O(null);try{const{data:{session:W}}=await MS.auth.getSession();if(!W){O("User not authenticated."),T(!1);return}const X=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${W.access_token}`}});if(!X.ok){const U=await X.json();throw new Error(U.error||"Failed to fetch users.")}const ae=await X.json();C(ae.users)}catch(W){console.error("Error fetching users:",W instanceof Error?W.message:W),O("Failed to load users: "+(W instanceof Error?W.message:"Unknown error"))}finally{T(!1)}};v.useEffect(()=>{Z()},[]);const G=async W=>{W.preventDefault(),x(""),_(""),k(!0);const X=new FormData;X.append("title",e),X.append("type",r),X.append("description",s),X.append("release_date",o),X.append("cover_image_url",l),u&&X.append("epub_file",u),f&&X.append("pdf_file",f),y&&X.append("mobi_file",y);try{const ae="YOUR_ADMIN_USER_ID";if(ae==="YOUR_ADMIN_USER_ID"){_("Please replace 'YOUR_ADMIN_USER_ID' with an actual admin user's ID in AdminUploadPage.jsx"),k(!1);return}const U=await fetch("http://localhost:3001/api/admin/works",{method:"POST",headers:{"x-user-id":ae},body:X}),Se=await U.json();U.ok?(x("Work uploaded successfully!"),t(""),n("chapter"),i(""),a(""),c(""),h(null),p(null),m(null),document.getElementById("epubFileInput").value="",document.getElementById("pdfFileInput").value="",document.getElementById("mobiFileInput").value=""):_(Se.message||"Failed to upload work.")}catch(ae){console.error("Error uploading work:",ae),_("An error occurred while uploading the work. Check console for details.")}finally{k(!1)}},fe=W=>{L(W);const X=W.subscriptions.find(ae=>ae.status==="active"||ae.status==="trialing");X?(q(X.subscription_type),H(X.status==="active"||X.status==="trialing"),J(X.start_date?X.start_date.split("T")[0]:""),be(X.current_period_end?X.current_period_end.split("T")[0]:"")):(q(""),H(!1),J(new Date().toISOString().split("T")[0]),be("")),P(!0)},pe=()=>{P(!1),L(null)},ke=async W=>{if(W.preventDefault(),!!D)try{const{data:{session:X}}=await MS.auth.getSession();if(!X){alert("You must be logged in to manage subscriptions.");return}const ae=await fetch(`/api/admin/users/${D.id}/subscription`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X.access_token}`},body:JSON.stringify({subscription_type:B,status:K?"active":"canceled",start_date:$,current_period_end:te||null})});if(!ae.ok){const U=await ae.json();throw new Error(U.error||"Failed to update subscription.")}alert("Subscription updated successfully!"),pe(),Z()}catch(X){console.error("Error updating subscription:",X instanceof Error?X.message:X),alert("Error updating subscription: "+(X instanceof Error?X.message:"Unknown error"))}};return d.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"auto",fontFamily:"Arial, sans-serif"},children:[d.jsx("h1",{style:{textAlign:"center",marginBottom:"30px"},children:"Admin Dashboard"}),d.jsxs("div",{style:{marginBottom:"50px",border:"1px solid #ccc",padding:"20px",borderRadius:"8px"},children:[d.jsx("h2",{children:"Upload New Work (Chapter/Issue)"}),b&&d.jsx("p",{style:{color:"green",fontWeight:"bold"},children:b}),w&&d.jsx("p",{style:{color:"red",fontWeight:"bold"},children:w}),d.jsxs("form",{onSubmit:G,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Title:"}),d.jsx("input",{type:"text",value:e,onChange:W=>t(W.target.value),required:!0,style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Type:"}),d.jsxs("select",{value:r,onChange:W=>n(W.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box"},children:[d.jsx("option",{value:"chapter",children:"Chapter"}),d.jsx("option",{value:"issue",children:"Issue"}),d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Description:"}),d.jsx("textarea",{value:s,onChange:W=>i(W.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box",minHeight:"80px"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Release Date:"}),d.jsx("input",{type:"date",value:o,onChange:W=>a(W.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Cover Image URL:"}),d.jsx("input",{type:"text",value:l,onChange:W=>c(W.target.value),placeholder:"e.g., https://example.com/cover.jpg",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"EPUB File:"}),d.jsx("input",{type:"file",id:"epubFileInput",onChange:W=>h(W.target.files[0]),accept:".epub",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"PDF File:"}),d.jsx("input",{type:"file",id:"pdfFileInput",onChange:W=>p(W.target.files[0]),accept:".pdf",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"MOBI File:"}),d.jsx("input",{type:"file",id:"mobiFileInput",onChange:W=>m(W.target.files[0]),accept:".mobi",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsx("button",{type:"submit",disabled:j,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:j?"not-allowed":"pointer",fontSize:"16px"},children:j?"Uploading...":"Upload Work"})]})]}),d.jsxs("div",{style:{border:"1px solid #ccc",padding:"20px",borderRadius:"8px"},children:[d.jsx("h2",{children:"User Management"}),E&&d.jsx("p",{children:"Loading users..."}),R&&d.jsx("p",{style:{color:"red"},children:R}),!E&&!R&&d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{backgroundColor:"#f2f2f2"},children:[d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Email"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Display Name"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Role"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Subscription Status"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Actions"})]})}),d.jsx("tbody",{children:S.map(W=>{var X,ae;return d.jsxs("tr",{children:[d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:W.email}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:((X=W.profile)==null?void 0:X.display_name)||"N/A"}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:((ae=W.profile)==null?void 0:ae.role)||"user"}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:W.subscriptions.length>0&&W.subscriptions.some(U=>U.status==="active"||U.status==="trialing")?"Active":"Inactive"}),d.jsxs("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[d.jsx("button",{style:{marginRight:"5px",padding:"5px 10px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},onClick:()=>fe(W),children:"Manage Subscription"}),d.jsx("button",{style:{padding:"5px 10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Manage Entitlements"})]})]},W.id)})})]})]}),I&&D&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center"},children:d.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",width:"500px",color:"black"},children:[d.jsxs("h3",{style:{marginBottom:"15px"},children:["Manage Subscription for ",D.email]}),d.jsxs("form",{onSubmit:ke,style:{display:"flex",flexDirection:"column",gap:"10px"},children:[d.jsxs("div",{children:[d.jsx("label",{children:"Subscription Type:"}),d.jsx("input",{type:"text",value:B,onChange:W=>q(W.target.value),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"Is Active:"}),d.jsx("input",{type:"checkbox",checked:K,onChange:W=>H(W.target.checked),style:{marginLeft:"10px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"Start Date:"}),d.jsx("input",{type:"date",value:$,onChange:W=>J(W.target.value),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"End Date:"}),d.jsx("input",{type:"date",value:te,onChange:W=>be(W.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[d.jsx("button",{type:"button",onClick:pe,style:{padding:"8px 15px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),d.jsx("button",{type:"submit",style:{padding:"8px 15px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save"})]})]})]})})]})},nUe=()=>{var e;const[t,r]=v.useState([]),[n,s]=v.useState(!0),[i,o]=v.useState(null),[a,l]=v.useState(!1),[c,u]=v.useState(!1),[h,f]=v.useState(!1),[p,y]=v.useState(!1),[m,b]=v.useState(null),[x,w]=v.useState(null),[_,j]=v.useState(null),[k,S]=v.useState(""),[C,E]=v.useState("active"),[T,R]=v.useState(""),[O,I]=v.useState(""),[P,D]=v.useState(""),[L,B]=v.useState(""),[q,K]=v.useState(!1),[H,$]=v.useState(!1),[J,te]=v.useState(""),[be,Z]=v.useState(""),[G,fe]=v.useState(""),[pe,ke]=v.useState(""),[W,X]=v.useState("user"),[ae,U]=v.useState(!1),[Se,Re]=v.useState(""),[Qe,Xe]=v.useState(""),[pt,Xt]=v.useState(""),[M,V]=v.useState(""),[Q,ge]=v.useState(""),[he,ce]=v.useState("created_at"),[_e,rt]=v.useState("desc"),[Be,bt]=v.useState(1),[Qr,Vt]=v.useState(10);function Ws(ne){return!ne.subscriptions||ne.subscriptions.length===0?"No Subscription":ne.subscriptions.some(De=>De.status==="active"||De.status==="trialing")?"Active":"Inactive"}function Ai(ne){switch(ne){case"Active":return d.jsx(Wa,{className:"w-4 h-4 text-green-500"});case"Inactive":return d.jsx(RE,{className:"w-4 h-4 text-red-500"});default:return d.jsx($i,{className:"w-4 h-4 text-gray-400"})}}function mo(ne){switch(ne){case"admin":return"bg-purple-100 text-purple-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}function Oi(ne){if(!ne)return"—";const De=new Date(ne);return Number.isNaN(De.getTime())?"—":De.toLocaleString()}const[Pi,go]=v.useState(!1),en=v.useCallback(async()=>{s(!0),o(null);try{const{data:{session:ne}}=await le.auth.getSession();if(!ne){o("User not authenticated."),s(!1);return}const De=await fetch("/api/admin/users",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne.access_token}`}});if(!De.ok){const fr=await De.json();throw new Error(fr.error||"Failed to fetch users.")}const nt=await De.json();r(nt),nt.length>0&&(nt[0].role==="admin"||nt[0].role==="super_admin")?go(!0):go(!1)}catch(ne){console.error("Error fetching users or checking admin status:",ne),o((ne instanceof Error?ne.message:String(ne))||"An unexpected error occurred.")}finally{s(!1)}},[]);v.useEffect(()=>{en()},[en]);const ds=v.useMemo(()=>{const ne=t.filter(De=>{var nt;const fr=De.email.toLowerCase().includes(pt.toLowerCase())||(((nt=De.profile)==null?void 0:nt.display_name)||"").toLowerCase().includes(pt.toLowerCase()),Pn=!M||De.role===M,Rn=Ws(De);return fr&&Pn&&(!Q||Rn===Q)});return ne.sort((De,nt)=>{var fr,Pn;let Rn=De[he],Dt=nt[he];return he==="display_name"&&(Rn=((fr=De.profile)==null?void 0:fr.display_name)||"",Dt=((Pn=nt.profile)==null?void 0:Pn.display_name)||""),(he==="created_at"||he==="last_sign_in")&&(Rn=new Date(Rn),Dt=new Date(Dt)),Rn<Dt?_e==="asc"?-1:1:Rn>Dt?_e==="asc"?1:-1:0}),ne},[t,pt,M,Q,he,_e]),gn=v.useMemo(()=>{const ne=(Be-1)*Qr;return ds.slice(ne,ne+Qr)},[ds,Be,Qr]),Hs=Math.ceil(ds.length/Qr)||1,Bl=()=>{fe(""),ke(""),X("user"),Re(""),Xe(""),f(!0)},Ks=()=>{f(!1)},Vl=ne=>{var De;b(ne);const nt=(De=ne.subscriptions)==null?void 0:De.find(fr=>fr.is_active);nt?(S(nt.plan_id||""),E(nt.status),R(nt.current_period_start?new Date(nt.current_period_start).toISOString().split("T")[0]:""),I(nt.current_period_end?new Date(nt.current_period_end).toISOString().split("T")[0]:"")):(S(""),E("active"),R(new Date().toISOString().split("T")[0]),I("")),D(""),B(""),l(!0)},Zs=()=>{l(!1),b(null),K(!1)},Wl=ne=>{w(ne),te(""),Z(""),u(!0)},yo=()=>{u(!1),w(null),$(!1)},Hl=ne=>{j(ne),y(!0)},hs=()=>{y(!1),j(null)},vu=async ne=>{ne.preventDefault(),U(!0),Re(""),Xe("");try{if(!G||!/\S+@\S+\.\S+/.test(G))throw new Error("Please enter a valid email address.");if(t.some(Pn=>Pn.email.toLowerCase()===G.toLowerCase()))throw new Error("A user with this email already exists in the list.");const De={action:"addProfile",data:{username:pe||G.split("@")[0],email:G,role:W}},nt=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await le.auth.getSession()).data.session.access_token}`},body:JSON.stringify(De)}),fr=await nt.json();if(!nt.ok)throw new Error(fr.error||"Failed to add user profile via Edge Function");Re("User profile added successfully! Full user creation (auth.users) might require backend."),en(),setTimeout(()=>{Ks()},600)}catch(De){console.error("Error adding user:",De),Xe((De instanceof Error?De.message:String(De))||"An unexpected error occurred while adding user.")}finally{U(!1)}},Gs=async ne=>{if(ne.preventDefault(),!!m){K(!0),D(""),B("");try{if(T&&O&&new Date(T)>=new Date(O))throw new Error("End date must be after start date.");const De={action:"updateSubscription",userId:m.id,data:{plan_id:k,status:C,current_period_start:T?new Date(T).toISOString():null,current_period_end:O?new Date(O).toISOString():null}},nt=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await le.auth.getSession()).data.session.access_token}`},body:JSON.stringify(De)}),fr=await nt.json();if(!nt.ok)throw new Error(fr.error||"Failed to update subscription via Edge Function");D("Subscription updated successfully!"),en(),setTimeout(()=>{Zs()},600)}catch(De){console.error("Error managing subscription:",De),B((De instanceof Error?De.message:String(De))||"An unexpected error occurred while managing subscription.")}finally{K(!1)}}},tf=async ne=>{if(ne.preventDefault(),!!x){$(!0),te(""),Z("");try{const De=new FormData(ne.target),nt=De.get("displayName"),fr=De.get("role"),Pn={action:"changeRole",targetUserId:x.id,newRole:fr,data:{display_name:nt}},Rn=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await le.auth.getSession()).data.session.access_token}`},body:JSON.stringify(Pn)}),Dt=await Rn.json();if(!Rn.ok)throw new Error(Dt.error||"Failed to update user details via Edge Function");te("User details updated successfully!"),en(),setTimeout(()=>{yo()},600)}catch(De){console.error("Error updating user details:",De),Z((De instanceof Error?De.message:String(De))||"An unexpected error occurred while updating user details.")}finally{$(!1)}}},rf=async()=>{if(_)try{const ne={action:"deleteUser",targetUserId:_.id},De=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await le.auth.getSession()).data.session.access_token}`},body:JSON.stringify(ne)}),nt=await De.json();if(!De.ok)throw new Error(nt.error||"Failed to delete user via Edge Function");r(fr=>fr.filter(Pn=>Pn.id!==_.id)),hs(),gn.length===1&&Be>1&&bt(Be-1),alert(`User ${_.email} deleted successfully.`)}catch(ne){console.error("Error deleting user:",ne),alert(`Failed to delete user: ${ne instanceof Error?ne.message:String(ne)}`)}},wa=ne=>{he===ne?rt(_e==="asc"?"desc":"asc"):(ce(ne),rt("asc")),bt(1)},_a=ne=>{ne<1||ne>Hs||bt(ne)},Kl=ne=>{Vt(ne),bt(1)};return n?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),d.jsx("span",{className:"text-gray-600",children:"Loading users and plans..."})]})}):i?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-red-600 mb-2",children:[d.jsx($i,{className:"w-5 h-5"}),d.jsx("span",{className:"font-semibold",children:"Error"})]}),d.jsx("p",{className:"text-red-700",children:i}),d.jsx("button",{onClick:en,className:"mt-4 px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),d.jsx("p",{className:"text-gray-600",children:"Manage users, subscriptions, and account details"})]}),d.jsx("div",{className:"mt-4 sm:mt-0",children:d.jsxs("button",{onClick:Bl,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[d.jsx(jae,{className:"w-4 h-4 mr-2"}),"Add User"]})})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(B0,{className:"w-8 h-8 text-blue-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Wa,{className:"w-8 h-8 text-green-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Subscriptions"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(ne=>Ws(ne)==="Active").length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(uv,{className:"w-8 h-8 text-purple-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Admin Users"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(ne=>ne.role==="admin").length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx($i,{className:"w-8 h-8 text-gray-400"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"No Subscription"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(ne=>Ws(ne)==="No Subscription").length})]})]})})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(ou,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),d.jsx("input",{type:"text",placeholder:"Search users...",value:pt,onChange:ne=>{Xt(ne.target.value),bt(1)},className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("select",{value:M,onChange:ne=>{V(ne.target.value),bt(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"All Roles"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"user",children:"User"})]}),d.jsxs("select",{value:Q,onChange:ne=>{ge(ne.target.value),bt(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"All Statuses"}),d.jsx("option",{value:"Active",children:"Active"}),d.jsx("option",{value:"Inactive",children:"Inactive"}),d.jsx("option",{value:"No Subscription",children:"No Subscription"})]}),d.jsxs("select",{value:Qr,onChange:ne=>Kl(Number(ne.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:5,children:"5 per page"}),d.jsx("option",{value:10,children:"10 per page"}),d.jsx("option",{value:25,children:"25 per page"}),d.jsx("option",{value:50,children:"50 per page"})]}),d.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[d.jsx(nae,{className:"w-4 h-4 mr-2"}),ds.length," of ",t.length," users"]})]})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>wa("email"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(U1,{className:"w-4 h-4"}),d.jsx("span",{children:"Email"}),he==="email"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>wa("display_name"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(B0,{className:"w-4 h-4"}),d.jsx("span",{children:"Display Name"}),he==="display_name"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(uv,{className:"w-4 h-4"}),d.jsx("span",{children:"Role"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>wa("created_at"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(M1,{className:"w-4 h-4"}),d.jsx("span",{children:"Created At"}),he==="created_at"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>wa("last_sign_in"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(F1,{className:"w-4 h-4"}),d.jsx("span",{children:"Last Sign In"}),he==="last_sign_in"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[gn.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-sm text-gray-500",children:"No users found."})}),gn.map(ne=>{var De;const nt=Ws(ne);return d.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:d.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:d.jsx(B0,{className:"w-4 h-4 text-gray-500"})})}),d.jsx("div",{className:"ml-3",children:d.jsx("div",{className:"text-sm font-medium text-gray-900",children:ne.email})})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((De=ne.profile)==null?void 0:De.display_name)||"—"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${mo(ne.role)}`,children:ne.role})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[Ai(nt),d.jsx("span",{className:"text-gray-900",children:nt})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Oi(ne.created_at)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.last_sign_in?Oi(ne.last_sign_in):"Never"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:()=>Wl(ne),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50",title:"Edit Details",children:[d.jsx(hae,{className:"w-4 h-4 mr-1"}),"Edit"]}),d.jsxs("button",{onClick:()=>Vl(ne),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50",title:"Manage Subscription",children:[d.jsx(Sm,{className:"w-4 h-4 mr-1"}),"Subscription"]}),d.jsxs("button",{onClick:()=>Hl(ne),className:"inline-flex items-center px-2.5 py-1.5 border border-red-300 text-red-700 rounded-md hover:bg-red-50",title:"Delete User",children:[d.jsx(au,{className:"w-4 h-4 mr-1"}),"Delete"]})]})})]},ne.id)})]})]})}),d.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",Be," of ",Hs]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>_a(Be-1),disabled:Be===1,className:"px-3 py-1.5 text-sm border rounded-md disabled:opacity-50",children:"Previous"}),Array.from({length:Hs}).map((ne,De)=>d.jsx("button",{onClick:()=>_a(De+1),className:`px-3 py-1.5 text-sm border rounded-md ${Be===De+1?"bg-blue-600 text-white border-blue-600":"hover:bg-gray-50"}`,children:De+1},De)),d.jsx("button",{onClick:()=>_a(Be+1),disabled:Be===Hs,className:"px-3 py-1.5 text-sm border rounded-md disabled:opacity-50",children:"Next"})]})]})]})]}),h&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:Ks}),d.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New User"}),d.jsxs("form",{onSubmit:vu,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",value:G,onChange:ne=>fe(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"user@example.com",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name (optional)"}),d.jsx("input",{type:"text",value:pe,onChange:ne=>ke(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jane Doe"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:W,onChange:ne=>X(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"user",children:"User"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),Qe&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx($i,{className:"w-4 h-4"}),Qe]}),Se&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(Wa,{className:"w-4 h-4"}),Se]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:Ks,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:ae,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:ae?"Adding…":"Add User"})]})]})]})]}),a&&m&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:Zs}),d.jsxs("div",{className:"relative bg-white w-full max-w-xl rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Manage Subscription"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:m.email}),d.jsxs("form",{onSubmit:Gs,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan"}),d.jsxs("select",{value:k,onChange:ne=>S(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"— Select a plan —"}),d.jsx("option",{value:"Monthly",children:"Monthly"}),d.jsx("option",{value:"Yearly",children:"Yearly"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),d.jsxs("select",{value:C,onChange:ne=>E(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"active",children:"active"}),d.jsx("option",{value:"trialing",children:"trialing"}),d.jsx("option",{value:"canceled",children:"canceled"}),d.jsx("option",{value:"paused",children:"paused"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),d.jsx("input",{type:"date",value:T,onChange:ne=>R(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),d.jsx("input",{type:"date",value:O,onChange:ne=>I(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),L&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx($i,{className:"w-4 h-4"}),L]}),P&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(Wa,{className:"w-4 h-4"}),P]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:Zs,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:q,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:q?"Saving…":"Save Changes"})]})]})]})]}),c&&x&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:yo}),d.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit User Details"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:x.email}),d.jsxs("form",{onSubmit:tf,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),d.jsx("input",{name:"displayName",type:"text",defaultValue:((e=x.profile)==null?void 0:e.display_name)||"",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jane Doe"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{name:"role",defaultValue:x.role,className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"user",children:"User"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),be&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx($i,{className:"w-4 h-4"}),be]}),J&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(Wa,{className:"w-4 h-4"}),J]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:yo,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:H,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:H?"Saving…":"Save Changes"})]})]})]})]}),p&&_&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:hs}),d.jsxs("div",{className:"relative bg-white w-full max-w-md rounded-lg shadow-lg p-6",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"shrink-0 mt-1",children:d.jsx($i,{className:"w-6 h-6 text-red-600"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Delete user?"}),d.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["This will permanently remove ",d.jsx("span",{className:"font-mono",children:_.email})," and their subscriptions from the local list."]})]})]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 mt-6",children:[d.jsx("button",{onClick:hs,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{onClick:rf,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})]})]})},sUe=()=>{const e=v.useRef(null);return v.useEffect(()=>{const t=e.current;if(!t)return;const r=50,n=()=>{const i=document.createElement("div");i.className="star absolute bg-ink rounded-full",i.style.left=Math.random()*100+"%",i.style.top=Math.random()*100+"%";const o=Math.random()*3+1;i.style.width=i.style.height=o+"px",i.style.animationDelay=Math.random()*3+"s",i.style.animationDuration=Math.random()*2+2+"s",t.appendChild(i)};t.innerHTML="";for(let i=0;i<r;i++)n();const s=()=>{const i=window.pageYOffset*-.1;t&&(t.style.transform=`translateY(${i}px)`)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[]),d.jsx("div",{ref:e,className:"stars fixed top-0 left-0 w-full h-full pointer-events-none -z-10",children:" "})},iUe=async()=>{const{data:e,error:t}=await le.from("works").select("id, title");if(t)throw new Error(t.message);return e},oUe=async e=>{const{data:t,error:r}=await le.from("works").insert({title:e,type:"book"}).select();if(r)throw new Error(r.message);return t[0]},aUe=()=>{const e=ha(),[t,r]=v.useState(null),[n,s]=v.useState(""),[i,o]=v.useState(1),[a,l]=v.useState(""),[c,u]=v.useState(""),[h,f]=v.useState(!1),[p,y]=v.useState(!1),{data:m,isLoading:b,isError:x,error:w}=It({queryKey:["books"],queryFn:iUe}),_=rr({mutationFn:oUe,onSuccess:S=>{e.invalidateQueries({queryKey:["books"]}),l(S.id),u(""),Fi.success(`Book "${S.title}" created successfully!`)},onError:S=>{Fi.error(`Error creating book: ${S.message}`)}}),j=S=>{S.target.files&&S.target.files[0]&&r(S.target.files[0])},k=async S=>{if(S.preventDefault(),!t||!n||!i){Fi.error("Please fill in all required chapter fields and select a file.");return}let C=a;if(c){if(_.isPending){Fi.error("Book creation is already in progress. Please wait.");return}try{C=(await _.mutateAsync(c)).id}catch{return}}if(!C){Fi.error("Please select an existing book or create a new one.");return}y(!0);const E=new FormData;E.append("file",t),E.append("title",n),E.append("chapter_number",i.toString()),E.append("book_id",C),E.append("is_published",h.toString());try{const{data:{session:T},error:R}=await le.auth.getSession();if(R||!T){Fi.error("User session not found. Please log in."),y(!1);return}const O=await fetch("/api/chapters/upload",{method:"POST",body:E,headers:{Authorization:`Bearer ${T.access_token}`}});if(!O.ok){const I=await O.json();throw new Error(I.message||I.error||"Failed to upload chapter.")}await O.json(),Fi.success("Chapter uploaded successfully!"),r(null),s(""),o(1),l(""),u(""),f(!1),S.target instanceof HTMLFormElement&&S.target.reset()}catch(T){console.error("Upload error:",T),Fi.error(T.message||"An error occurred during upload.")}finally{y(!1)}};return b?d.jsx("div",{className:"text-center py-8",children:"Loading books..."}):x?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading books: ",w==null?void 0:w.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx(lDe,{}),d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Upload New Chapter"}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:d.jsxs("form",{onSubmit:k,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"file",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter File (PDF, DOCX, TXT, HTML)"}),d.jsx("input",{type:"file",id:"file",onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",accept:".pdf,.docx,.txt,.html",required:!0}),t&&d.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Selected file: ",t.name]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"chapterTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter Title"}),d.jsx("input",{type:"text",id:"chapterTitle",value:n,onChange:S=>s(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"chapterNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter Number"}),d.jsx("input",{type:"number",id:"chapterNumber",value:i,onChange:S=>o(parseInt(S.target.value)||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,min:"1"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"bookId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Existing Book"}),d.jsxs("select",{id:"bookId",value:a,onChange:S=>l(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"-- Select a Book --"}),m==null?void 0:m.map(S=>d.jsx("option",{value:S.id,children:S.title},S.id))]})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("span",{className:"text-gray-500 mr-2",children:"OR"}),d.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newBookTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Create New Book"}),d.jsx("input",{type:"text",id:"newBookTitle",value:c,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new book title"})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isPublished",checked:h,onChange:S=>f(S.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),d.jsx("label",{htmlFor:"isPublished",className:"text-sm font-medium text-gray-700",children:"Publish Immediately"})]}),d.jsx("button",{type:"submit",className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:p||_.isPending,children:p?d.jsxs(d.Fragment,{children:[d.jsx(Qoe,{className:"w-4 h-4 animate-pulse"}),"Uploading Chapter..."]}):_.isPending?d.jsxs(d.Fragment,{children:[d.jsx(Yoe,{className:"w-4 h-4 animate-pulse"}),"Creating Book..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Go,{className:"w-4 h-4"}),"Upload Chapter"]})})]})})]})},Yy=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Dr("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Yy.displayName="Card";const Jy=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Dr("flex flex-col space-y-1.5 p-6",e),...t}));Jy.displayName="CardHeader";const zS=v.forwardRef(({className:e,...t},r)=>d.jsx("h3",{ref:r,className:Dr("text-2xl font-semibold leading-none tracking-tight",e),...t}));zS.displayName="CardTitle";const lUe=v.forwardRef(({className:e,...t},r)=>d.jsx("p",{ref:r,className:Dr("text-sm text-muted-foreground",e),...t}));lUe.displayName="CardDescription";const Xy=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Dr("p-6 pt-0",e),...t}));Xy.displayName="CardContent";const cUe=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Dr("flex items-center p-6 pt-0",e),...t}));cUe.displayName="CardFooter";const uUe=Xb("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary/10 text-primary hover:bg-primary/20",secondary:"border-transparent bg-secondary/10 text-secondary-foreground hover:bg-secondary/20",destructive:"border-transparent bg-destructive/10 text-destructive hover:bg-destructive/20",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function rM({className:e,variant:t,...r}){return d.jsx("div",{className:Dr(uUe({variant:t}),e),...r})}const FS=v.forwardRef(({value:e,onChange:t,theme:r="snow",modules:n={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},formats:s=["header","bold","italic","underline","strike","list","bullet","link","image"],...i},o)=>{const a=l=>{try{t&&t(l)}catch(c){console.error("Error in handleChange:",c)}};return d.jsx("div",{className:"mt-4",children:d.jsx(eg,{ref:o,theme:r,value:e,onChange:a,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","link","image"],...i})})});FS.displayName="QuillEditor";function $S({id:e,onUpdatePage:t,initialData:r}){const{id:n}=nu(),s=uo(),[i,o]=v.useState(!!e),[a,l]=v.useState(!1),[c,u]=v.useState([]),[h,f]=v.useState(""),[p,y]=v.useState(!1),[m,b]=v.useState(null),[x,w]=v.useState(""),[_,j]=v.useState(!1),[k,S]=v.useState(()=>r?{...r,category:r.category||null,user:r.user||null}:{id:"",title:"",slug:"",excerpt:null,content:"",seo_title:null,seo_description:null,seo_keywords:[],sections:[],category_id:null,is_published:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:null,folder_id:null,view_count:null,category:null,user:null}),[C,E]=v.useState("");v.useEffect(()=>{const Z=e||n;T(),Z?R(Z):o(!1)},[e,n]);const T=async()=>{try{console.log("Fetching categories...");const Z=await aJ();u(Z||[]),(!Z||Z.length===0)&&(console.warn("No categories found in the database"),Ve.warning("No categories found. Please create categories first."))}catch(Z){console.error("Error in fetchCategories:",Z),Ve.error("Failed to load categories. Check console for details.")}},R=async Z=>{try{const G=await m6(Z);if(G){const fe={...G,sections:G.sections||[]};S(fe),G.category&&b(G.category)}else throw new Error("Wiki page not found.")}catch(G){console.error("Error fetching wiki page:",G),Ve.error("Failed to load wiki page")}finally{o(!1)}},O=Z=>{const{name:G,value:fe}=Z.target;S(pe=>({...pe,[G]:fe}))},I=Z=>{const G={id:`section-${Date.now()}`,title:"New Section",content:"",type:Z||"paragraph"};S(fe=>({...fe,sections:[...fe.sections,G]}))},P=(Z,G)=>{S(fe=>({...fe,sections:fe.sections.map(pe=>pe.id===Z?{...pe,...G}:pe)}))},D=Z=>{if(k.sections.length<=1){Ve.error("You must have at least one section");return}S(G=>({...G,sections:G.sections.filter(fe=>fe.id!==Z)}))},L=Z=>{b(Z),S(G=>({...G,category_id:Z.id})),y(!1)},B=()=>{b(null),S(Z=>({...Z,category_id:null}))},q=Z=>Z.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").trim(),K=Z=>{const G=Z.target.value;S(fe=>({...fe,title:G,slug:q(G),seo_title:fe.seo_title||G}))},H=async()=>{var Z,G;l(!0);try{if(!((Z=k==null?void 0:k.title)!=null&&Z.trim())){Ve.error("Title is required"),l(!1);return}if(!((G=k.slug)!=null&&G.trim())){Ve.error("Slug is required"),l(!1);return}const{data:{user:fe},error:pe}=await le.auth.getUser();if(pe||!fe){Ve.error("You must be signed in to save changes."),l(!1);return}const ke={title:k.title.trim(),slug:k.slug.trim(),category_id:k.category_id||null,is_published:k.is_published,updated_at:new Date().toISOString()};let W=null;if(e){const{data:X,error:ae}=await le.from("wiki_pages").update(ke).eq("id",e).select().single();if(ae)throw ae;if(X)W=X;else throw new Error("Page data not found after update.");Ve.success("Wiki page updated successfully");const{error:U}=await le.from("wiki_content_blocks").delete().eq("page_id",W.id);if(U)throw console.error("Error deleting old content blocks:",U),new Error("Failed to update content blocks")}else{const{data:X,error:ae}=await le.from("wiki_pages").insert([{...ke,created_by:fe.id,created_at:new Date().toISOString(),view_count:0}]).select("*, user:profiles(*), category:wiki_categories(*)").single();if(ae)throw ae;if(X)W=X;else throw new Error("Page data not found after creation.");Ve.success("Wiki page created successfully")}if(W&&k.sections&&k.sections.length>0){const X=k.sections.map((U,Se)=>({page_id:W.id,type:U.type,content:U.content,position:Se,created_by:fe.id})),{error:ae}=await le.from("wiki_content_blocks").insert(X);if(ae)throw console.error("Error saving content blocks:",ae),new Error("Failed to save content blocks")}if(W){let X=null;W.user&&typeof W.user=="object"&&!("error"in W.user)&&(X=W.user);const ae={...W,title:k.title,slug:k.slug,excerpt:k.excerpt||null,is_published:k.is_published,category_id:k.category_id||null,category:m||null,sections:k.sections||[],created_at:W.created_at||new Date().toISOString(),updated_at:new Date().toISOString(),user:X};t&&t(ae),e||s(`/account/admin/wiki/page/${W.id}`)}}catch(fe){throw console.error("Error saving wiki page:",fe),fe.code==="23505"?Ve.error("A page with this slug already exists"):fe.code==="42501"?Ve.error("You do not have permission to perform this action"):Ve.error(`Failed to save wiki page: ${(fe instanceof Error?fe.message:String(fe))||"Unknown error"}`),fe}finally{l(!1)}},$=async()=>{const Z=!k.is_published;if(S(G=>({...G,is_published:Z})),e)try{const{error:G}=await le.from("wiki_pages").update({is_published:Z,published_at:Z?new Date().toISOString():null}).eq("id",e);if(G)throw G;Ve.success(`Page ${Z?"published":"unpublished"} successfully`)}catch(G){console.error("Error updating publish status:",G),Ve.error(`Failed to update page status: ${G instanceof Error?G.message:String(G)}`),S(fe=>({...fe,is_published:!Z}))}},J=async()=>{if(!x.trim()){Ve.error("Category name cannot be empty");return}try{const{data:{user:Z}}=await le.auth.getUser();if(!Z){Ve.error("You must be logged in to create categories");return}const{data:G,error:fe}=await le.from("wiki_categories").insert([{name:x.trim(),slug:x.trim().toLowerCase().replace(/\s+/g,"-"),created_by:Z.id,is_active:!0}]).select().single();if(fe)throw console.error("Error creating category:",fe),new Error("Failed to create category");if(G===null){console.error("No data returned after creating category, but no error was thrown."),Ve.error("Failed to create category: No data received.");return}const pe=G;u(ke=>[...ke,pe]),L(pe),w(""),j(!1),Ve.success("Category created successfully")}catch(Z){console.error("Error creating category:",Z),Ve.error("Failed to create category")}},te=()=>d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{children:"Category"}),m?d.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(rM,{className:"h-4 w-4 mr-2 text-muted-foreground"}),d.jsx("span",{children:m.name})]}),d.jsx(ct,{type:"button",variant:"ghost",size:"sm",onClick:B,children:d.jsx(pl,{className:"h-4 w-4"})})]}):_?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(fi,{placeholder:"Enter category name",value:x,onChange:Z=>w(Z.target.value),autoFocus:!0}),d.jsx(ct,{type:"button",onClick:J,disabled:!x.trim(),children:"Add"})]}),d.jsx(ct,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(!1),children:"Cancel"})]}):d.jsxs("div",{className:"space-y-2",children:[d.jsxs(ct,{type:"button",variant:"outline",className:"w-full justify-start",onClick:()=>y(!0),children:[d.jsx(rM,{className:"h-4 w-4 mr-2"}),"Select a category"]}),d.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["or"," ",d.jsx("button",{type:"button",className:"text-primary hover:underline",onClick:()=>j(!0),children:"create a new category"})]})]})]}),be=Z=>{const G=fe=>{P(Z.id,{content:fe})};switch(Z.type){case"heading_1":case"heading_2":case"heading_3":case"paragraph":case"bullet_list":case"ordered_list":return d.jsx("div",{className:"mt-4",children:d.jsx(FS,{value:Z.content||"",onChange:G,placeholder:"Start writing..."})});case"quote":return d.jsx("div",{className:"mt-4 border-l-4 border-gray-300 pl-4 italic",children:d.jsx(FS,{value:Z.content||"",onChange:G,placeholder:"Start writing..."})});case"code":return d.jsx("div",{className:"mt-4 bg-gray-100 p-4 rounded-md font-mono text-sm",children:d.jsx(JE,{value:Z.content||"",onChange:fe=>P(Z.id,{content:fe.target.value}),placeholder:"Enter code...",rows:6,className:"font-mono"})});case"divider":return d.jsx("div",{className:"my-6 border-t border-gray-200"});case"image":return d.jsxs("div",{className:"mt-4",children:[d.jsx(fi,{type:"text",value:Z.content||"",onChange:fe=>P(Z.id,{content:fe.target.value}),placeholder:"Enter image URL..."}),Z.content&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:Z.content,alt:"Section content",className:"max-w-full h-auto rounded-md"})})]});default:return d.jsxs("div",{className:"mt-4 text-gray-500 italic",children:["Unsupported section type: ",Z.type]})}};return i?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx(Jd,{className:"h-8 w-8 animate-spin"})}):(h&&c.filter(Z=>Z.name.toLowerCase().includes(h.toLowerCase())),d.jsx("div",{className:"container mx-auto p-6",children:d.jsxs("form",{onSubmit:Z=>Z.preventDefault(),children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs(ct,{type:"button",variant:"outline",size:"sm",onClick:()=>s("/account/admin/wiki"),children:[d.jsx(L1,{className:"mr-2 h-4 w-4"})," Back to Wiki"]}),d.jsx("h1",{className:"text-2xl font-bold",children:e?"Edit Wiki Page":"Create New Wiki Page"})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(js,{htmlFor:"is_published",children:"Publish"}),d.jsx(Nv,{id:"is_published",checked:k.is_published,onCheckedChange:$})]}),d.jsx(ct,{type:"button",disabled:a,onClick:H,children:a?d.jsxs(d.Fragment,{children:[d.jsx(Jd,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):d.jsxs(d.Fragment,{children:[d.jsx(IE,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2 space-y-6",children:d.jsxs(Yy,{children:[d.jsx(Jy,{children:d.jsx(zS,{children:"Page Content"})}),d.jsxs(Xy,{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{htmlFor:"title",children:"Title *"}),d.jsx(fi,{id:"title",name:"title",value:k.title,onChange:K,placeholder:"Enter page title",required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(js,{htmlFor:"slug",children:"URL Slug *"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:`${window.location.origin}/wiki/${k.slug||"your-page-slug"}`})]}),d.jsx(fi,{id:"slug",name:"slug",value:k.slug,onChange:O,placeholder:"page-slug",required:!0})]}),te(),d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{children:"Sections"}),k.sections.map((Z,G)=>d.jsxs(Yy,{className:"mb-4",children:[d.jsx(Jy,{children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(fi,{value:Z.title,onChange:fe=>P(Z.id,{title:fe.target.value}),placeholder:"Section Title",className:"text-xl font-bold"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("select",{value:Z.type,onChange:fe=>P(Z.id,{type:fe.target.value}),className:"text-sm p-1 border rounded",children:[d.jsx("option",{value:"paragraph",children:"Paragraph"}),d.jsx("option",{value:"heading_1",children:"Heading 1"}),d.jsx("option",{value:"heading_2",children:"Heading 2"}),d.jsx("option",{value:"heading_3",children:"Heading 3"}),d.jsx("option",{value:"bullet_list",children:"Bullet List"}),d.jsx("option",{value:"ordered_list",children:"Ordered List"}),d.jsx("option",{value:"image",children:"Image"}),d.jsx("option",{value:"table",children:"Table"}),d.jsx("option",{value:"quote",children:"Quote"}),d.jsx("option",{value:"code",children:"Code"}),d.jsx("option",{value:"divider",children:"Divider"})]}),d.jsx(ct,{variant:"ghost",size:"icon",type:"button",onClick:()=>D(Z.id),disabled:k.sections.length<=1,children:d.jsx(pl,{className:"h-4 w-4"})})]})]})}),d.jsx(Xy,{children:be(Z)})]},Z.id))]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.jsx(ct,{type:"button",variant:"outline",onClick:()=>I("paragraph"),children:"Add Paragraph"}),d.jsx(ct,{type:"button",variant:"outline",onClick:()=>I("heading_1"),children:"Add Heading 1"}),d.jsx(ct,{type:"button",variant:"outline",onClick:()=>I("quote"),children:"Add Quote"})]})]})]})}),d.jsx("div",{className:"space-y-6",children:d.jsxs(Yy,{children:[d.jsx(Jy,{children:d.jsx(zS,{children:"Publishing"})}),d.jsxs(Xy,{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Status"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:k.is_published?"Published":"Draft"})]}),d.jsx(Nv,{checked:k.is_published,onCheckedChange:$})]}),e&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-medium",children:"URL"}),d.jsx("div",{className:"flex items-center",children:d.jsxs("a",{href:`/wiki/${k.slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center",children:["View page ",d.jsx(Sm,{className:"ml-1 h-3 w-3"})]})})]})]})]})})]})]})}))}function dUe({folders:e,pages:t,selectedFolder:r,selectedPage:n,onSelect:s,onPageSelect:i,onDeleteFolder:o,onEditFolder:a,onDeletePage:l,onEditPage:c}){const u=v.useMemo(()=>{const f=new Map,p=[];e.forEach(m=>{const b={...m,children:[],pages:[],type:"folder"};f.set(m.id,b)}),e.forEach(m=>{const b=f.get(m.id);if(b&&m.parent_id&&f.has(m.parent_id)){const x=f.get(m.parent_id);x&&x.children.push(b)}else b&&p.push(b)});const y=[];return t.forEach(m=>{const b={id:m.id,title:m.title,slug:m.slug,folder_id:m.folder_id,category_id:m.category_id,created_at:m.created_at,updated_at:m.updated_at,created_by:m.created_by,is_published:m.is_published||!1,excerpt:m.excerpt||null,view_count:m.view_count||0,type:"page",content:m.content};if(m.folder_id&&f.has(m.folder_id)){const x=f.get(m.folder_id);x&&x.pages.push(b)}else m.folder_id||y.push(b)}),[...p,...y]},[e,t]),h=(f,p=0)=>f?f.type==="page"?d.jsxs("div",{className:Dr("flex items-center px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-800",n===f.id&&"bg-blue-50 dark:bg-blue-900/30"),onClick:()=>i(f.id),children:[d.jsx(dv,{className:"h-4 w-4 mr-2 text-gray-500"}),d.jsx("span",{className:"truncate",children:f.title})]},f.id):d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:Dr("flex items-center justify-between p-2 rounded-md cursor-pointer",r===f.id?"bg-blue-50 dark:bg-blue-900/30":"hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:()=>s(f.id),children:[d.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[d.jsx(hv,{className:"h-4 w-4 text-blue-500"}),d.jsx("span",{className:"truncate",children:f.name})]}),d.jsxs("div",{className:"flex space-x-1",children:[d.jsx(ct,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:y=>{y.stopPropagation(),a(f)},children:d.jsx(vae,{className:"h-3.5 w-3.5"})}),d.jsx(ct,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500 hover:text-red-600",onClick:y=>{y.stopPropagation(),o(f.id)},children:d.jsx(au,{className:"h-3.5 w-3.5"})})]})]}),f.children.length>0&&d.jsx("div",{className:"pl-4 border-l border-gray-200 dark:border-gray-700",children:f.children.map(y=>h(y,p+1))}),f.pages.length>0&&d.jsx("div",{className:"pl-4",children:f.pages.map(y=>h(y,p+1))})]},f.id):null;return d.jsx("div",{className:"space-y-1",children:u.map(f=>d.jsx("div",{children:h(f,0)},f.id))})}function nM(){const{folderId:e}=nu(),t=uo(),[r,n]=v.useState([]),[s,i]=v.useState([]),[o,a]=v.useState(""),[l,c]=v.useState(""),[u,h]=v.useState(!1),[f,p]=v.useState(!1),[y,m]=v.useState(null),[b,x]=v.useState(null),[w,_]=v.useState(null),[j,k]=v.useState(""),[S,C]=v.useState(!0);v.useEffect(()=>{(async()=>{try{C(!0);const{data:$,error:J}=await le.from("wiki_folders").select("*").order("name");if(J)throw J;const{data:te,error:be}=await le.from("wiki_pages").select(`
            *,
            sections:wiki_sections(*)
          `);if(be)throw be;const Z=(te||[]).map(G=>({...G,sections:(G.sections||[]).map(fe=>({...fe,content:fe.content||""}))}));n($||[]),i(Z)}catch($){console.error("Error fetching wiki data:",$),Ve.error("Failed to load wiki content")}finally{C(!1)}})()},[]);const E=async()=>{if(o.trim())try{const $=(await le.auth.getUser()).data.user;if(!$){Ve.error("You must be logged in to create a folder");return}const{data:J,error:te}=await le.from("wiki_folders").insert([{name:o.trim(),slug:o.trim().toLowerCase().replace(/\s+/g,"-"),parent_id:e||null,created_by:$.id}]).select().single();if(te)throw te;n(be=>[...be,J]),a(""),h(!1),t(`/account/admin/wiki/folder/${J.id}`),Ve.success("Folder created successfully")}catch($){console.error("Error creating folder:",$),Ve.error($ instanceof Error?$.message:"Failed to create folder")}},T=async $=>{try{const J=(await le.auth.getUser()).data.user;if(!J){Ve.error("You must be logged in to create a page");return}const{data:te,error:be}=await le.from("wiki_pages").insert([{title:"New Page",content:"",folder_id:$||null,is_published:!1,created_by:J.id,excerpt:"",slug:"new-page-"+Date.now(),seo_title:"New Page",seo_description:"",seo_keywords:[],view_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),category_id:null}]).select("*").single();if(be)throw be;i(Z=>[...Z,{...te,sections:[]}]),te&&(m(te.id),x(te.id)),c(""),p(!1),Ve.success("Page created successfully")}catch(J){console.error("Error creating page:",J),Ve.error(J instanceof Error?J.message:"Failed to create page")}},R=$=>{x($.id),m($.id)},O=async $=>{if(confirm("Are you sure you want to delete this page? This action cannot be undone."))try{C(!0);const{error:J}=await le.from("wiki_content_blocks").delete().eq("page_id",$);if(J)throw J;const{error:te}=await le.from("wiki_pages").delete().eq("id",$);if(te)throw te;i(be=>be.filter(Z=>Z.id!==$)),y===$&&(m(null),x(null)),Ve.success("Page deleted successfully")}catch(J){console.error("Error deleting page:",J),Ve.error("Failed to delete page")}finally{C(!1)}},I=async $=>{var J;try{const{data:te,error:be}=await le.from("wiki_pages").upsert({...$,updated_at:new Date().toISOString(),updated_by:(J=(await le.auth.getUser()).data.user)==null?void 0:J.id}).select().single();if(be)throw be;return i(Z=>Z.map(G=>G.id===te.id?{...G,...te}:G)),Ve.success("Page saved successfully"),te}catch(te){throw console.error("Error saving page:",te),Ve.error("Failed to save page"),te}},P=$=>{_($),k($.name)},D=async()=>{if(!(!w||!j.trim()))try{const{data:$,error:J}=await le.from("wiki_folders").update({name:j.trim(),slug:j.trim().toLowerCase().replace(/\s+/g,"-")}).eq("id",w.id).select().single();if(J)throw J;n(te=>te.map(be=>be.id===$.id?$:be)),_(null),k(""),Ve.success("Folder updated successfully")}catch($){console.error("Error updating folder:",$),Ve.error("Failed to update folder")}},L=async $=>{var J;if(confirm("Are you sure you want to delete this folder and all its contents? This action cannot be undone."))try{C(!0);const{error:te}=await le.from("wiki_folders").delete().eq("id",$);if(te)throw te;const be=(Z,G)=>Z.reduce((fe,pe)=>pe.id===G||pe.parent_id===G?fe:[...fe,pe],[]);if(n(Z=>be(Z,$)),$===$||r.some(Z=>Z.parent_id===$&&Z.id===$)){const Z=(J=r.find(G=>G.id===$))==null?void 0:J.parent_id;t(Z?`/account/admin/wiki/folder/${Z}`:"/account/admin/wiki")}Ve.success("Folder and its contents deleted successfully")}catch(te){console.error("Error deleting folder:",te),Ve.error("Failed to delete folder. Please try again.")}finally{C(!1)}},B=async($,J)=>{try{if(r.some(te=>te.id===$)){const{error:te}=await le.from("wiki_folders").update({parent_id:J}).eq("id",$);if(te)throw te;n(be=>be.map(Z=>Z.id===$?{...Z,parent_id:J}:Z))}else{const{error:te}=await le.from("wiki_pages").update({folder_id:J}).eq("id",$);if(te)throw te;i(be=>be.map(Z=>Z.id===$?{...Z,folder_id:J}:Z))}Ve.success("Item moved successfully")}catch(te){console.error("Error moving item:",te),Ve.error("Failed to move item")}},q=$=>{m(null),x(null),t(`/account/admin/wiki/folder/${$}`)};v.useMemo(()=>{const $=new Map,J=[];r.forEach(Z=>{$.set(Z.id,{...Z,children:[]})}),r.forEach(Z=>{const G=$.get(Z.id);if(G)if(Z.parent_id&&$.has(Z.parent_id)){const fe=$.get(Z.parent_id);fe&&fe.children.push(G)}else J.push(G)});const te=Z=>[...Z].sort((G,fe)=>{var pe,ke;return(((pe=G.data)==null?void 0:pe.order_index)??0)-(((ke=fe.data)==null?void 0:ke.order_index)??0)}),be=Z=>te(Z).map(G=>({...G,children:G.children?be(G.children):[]}));return be(J)},[r,e]);const K=r.find($=>$.id===e),H=s.find($=>$.id===y);return d.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[d.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Wiki Manager"}),d.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-2 overflow-x-auto",children:[d.jsx("button",{onClick:()=>t("/account/admin/wiki"),className:"hover:text-blue-600 dark:hover:text-blue-400",children:"Home"}),K&&d.jsxs(d.Fragment,{children:[d.jsx(PE,{className:"h-4 w-4 mx-1"}),d.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:K.name})]})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[d.jsxs("div",{className:"space-y-2 mb-4",children:[d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs(ct,{variant:"outline",size:"sm",className:"flex-1 justify-center bg-white dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>T(e),children:[d.jsx(Go,{size:14,className:"mr-2"}),"New Page"]}),d.jsxs(ct,{variant:"outline",size:"sm",className:"flex-1 justify-center bg-white dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>h(!u),children:[d.jsx(hv,{size:14,className:"mr-2"}),"New Folder"]})]}),u&&d.jsxs("div",{className:"flex space-x-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700",children:[d.jsx(fi,{autoFocus:!0,value:o,onChange:$=>a($.target.value),onKeyDown:$=>$.key==="Enter"&&E(),placeholder:"Folder name",className:"h-8 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.jsx(ct,{size:"sm",onClick:E,disabled:!o.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add"})]}),f&&d.jsxs("div",{className:"flex space-x-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700",children:[d.jsx(fi,{autoFocus:!0,value:l,onChange:$=>c($.target.value),onKeyDown:$=>{$.key==="Enter"&&T(e)},placeholder:"Page title",className:"h-8 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.jsx(ct,{size:"sm",onClick:()=>T(e),disabled:!l.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add"})]})]}),d.jsx("div",{className:"mt-2",children:S?d.jsx("div",{className:"flex justify-center py-4",children:d.jsx(Jd,{className:"h-4 w-4 animate-spin text-gray-700 dark:text-gray-300"})}):d.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:d.jsx(dUe,{folders:r,pages:s,selectedFolder:e,selectedPage:y,onSelect:q,onPageSelect:$=>{m($),x($)},onDeleteFolder:L,onEditFolder:P,onDeletePage:O,onEditPage:R,onMoveItem:B})})})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:H?d.jsx($S,{id:H.id,onUpdatePage:I}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[d.jsx(dv,{className:"h-16 w-16 text-gray-400 mb-4"}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:K?`No pages in ${K.name}`:"No page selected"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:K?"Create a new page in this folder using the sidebar.":"Select a page from the sidebar or create a new one."}),d.jsxs(ct,{onClick:()=>T(e),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[d.jsx(Go,{className:"h-4 w-4 mr-2"}),"New Page"]})]})}),w&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-96",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Folder"}),d.jsx(fi,{autoFocus:!0,value:j,onChange:$=>k($.target.value),onKeyDown:$=>$.key==="Enter"&&D(),placeholder:"Folder name",className:"mb-4"}),d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx(ct,{variant:"outline",onClick:()=>{_(null),k("")},children:"Cancel"}),d.jsx(ct,{onClick:D,disabled:!j.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Save Changes"})]})]})})]})}const sM=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Timelines"})}),hUe={"Stage 1":{title:"Basic Information & Pre-Screening",description:"Initial qualification and basic details",auto_disqualify:!0,min_score_required:15,max_possible_score:30,questions:[{id:"reading_frequency",type:"multiple_choice",question:"How many books do you typically read per year?",options:[{text:"0-5 books",score:1},{text:"6-11 books",score:3},{text:"12-24 books",score:5},{text:"25-49 books",score:7},{text:"50+ books",score:10}],weight:.33,required:!0},{id:"genre_familiarity",type:"multiple_choice",question:"How familiar are you with [YOUR GENRE] fiction?",options:[{text:"Never read it",score:1},{text:"Read a few books",score:3},{text:"Read occasionally",score:5},{text:"Read regularly",score:7},{text:"Expert knowledge",score:10}],weight:.33,required:!0},{id:"time_commitment",type:"multiple_choice",question:"How many hours per week can you dedicate to beta reading?",options:[{text:"1-2 hours",score:2},{text:"3-5 hours",score:5},{text:"6-9 hours",score:7},{text:"10-14 hours",score:9},{text:"15+ hours",score:10}],weight:.34,required:!0}]},"Stage 2":{title:"Experience & Skills Assessment",description:"Detailed evaluation of reading and feedback experience",conditional_display:!0,min_score_required:25,max_possible_score:40,questions:[{id:"beta_experience",type:"multiple_choice",question:"How many beta reading projects have you completed?",options:[{text:"None",score:2},{text:"1 project",score:4},{text:"2-4 projects",score:6},{text:"5-9 projects",score:8},{text:"10+ projects",score:10}],weight:.25,required:!0},{id:"feedback_strengths",type:"checkbox_multiple",question:"What are your strongest areas for providing feedback? (Select all that apply)",options:[{text:"Plot structure and pacing",score:3},{text:"Character development",score:3},{text:"Dialogue authenticity",score:2},{text:"World-building consistency",score:2},{text:"Grammar and style",score:2},{text:"Emotional impact",score:2}],weight:.3,max_selections:4,required:!0},{id:"writing_background",type:"multiple_choice",question:"What best describes your writing/editing background?",options:[{text:"No writing experience",score:2},{text:"Casual writer",score:4},{text:"Serious writer (unpublished)",score:6},{text:"Published author",score:8},{text:"Professional editor/reviewer",score:10}],weight:.25,required:!0},{id:"reading_speed",type:"slider",question:"Approximately how many pages can you read per hour?",min:10,max:100,step:5,scoring_formula:"Math.min(10, Math.floor(value / 10))",weight:.2,required:!0}]},"Stage 3":{title:"Sample Feedback Analysis",description:"Evaluate analytical skills through sample text review",min_score_required:30,max_possible_score:50,questions:[{id:"excerpt_analysis",type:"textarea",question:"Read this excerpt and identify what works well (100-300 words):",sample_text:"The obsidian gates groaned, not with the weight of stone, but with the sorrow of ages. Kaelen watched from the shadows, his breath a ghost in the frigid air, as the sigil on the archway pulsed with a faint, sickly green light. It was a warning. It was an invitation.",scoring_criteria:[{aspect:"Identifies specific literary techniques",max_score:3},{aspect:"Provides concrete examples from text",max_score:3},{aspect:"Shows genre awareness",max_score:2},{aspect:"Demonstrates emotional engagement",max_score:2}],min_words:100,max_words:300,weight:.3,required:!0},{id:"problem_identification",type:"textarea",question:"What, if anything, was confusing or unclear? How could it be improved? (100-300 words)",scoring_criteria:[{aspect:"Identifies genuine readability issues",max_score:3},{aspect:"Distinguishes objective vs subjective concerns",max_score:3},{aspect:"Explains reasoning clearly",max_score:2},{aspect:"Provides constructive context",max_score:2}],min_words:100,max_words:300,weight:.3,required:!0},{id:"actionable_suggestion",type:"textarea",question:"Provide one specific, actionable suggestion to enhance this scene (60-200 words)",scoring_criteria:[{aspect:"Offers specific, implementable solution",max_score:4},{aspect:"Shows understanding of author's intent",max_score:3},{aspect:"Suggests enhancement rather than just fixes",max_score:3}],min_words:60,max_words:200,weight:.4,required:!0}]},"Stage 4":{title:"Final Assessment & Preferences",description:"Communication style and final compatibility check",min_score_required:20,max_possible_score:30,questions:[{id:"communication_style",type:"multiple_choice",question:"How would you describe your feedback style?",options:[{text:"Direct and detailed",score:8},{text:"Gentle but thorough",score:10},{text:"Focused on major issues",score:6},{text:"Encouraging with suggestions",score:9},{text:"Technical and analytical",score:7}],weight:.4,required:!0},{id:"availability_window",type:"date_range",question:"What is your availability window for this project?",scoring_criteria:[{aspect:"Matches project timeline",max_score:5},{aspect:"Provides realistic timeframe",max_score:3},{aspect:"Shows flexibility",max_score:2}],weight:.3,required:!0},{id:"motivation",type:"textarea",question:"Why do you want to be a beta reader for this project? (50-150 words)",scoring_criteria:[{aspect:"Shows genuine interest in the work",max_score:4},{aspect:"Demonstrates understanding of role",max_score:3},{aspect:"Articulates value they can provide",max_score:3}],min_words:50,max_words:150,weight:.3,required:!0}]}},fUe={overall_thresholds:{auto_accept:90,strong_candidate:75,interview_required:60}},pUe={application_stages:hUe,scoring_system:fUe},iM=pUe,gj=()=>{const[e,t]=v.useState(0),[r,n]=v.useState({}),[s,i]=v.useState({}),[o,a]=v.useState({}),[l,c]=v.useState(!0),[u,h]=v.useState(!1),[f,p]=v.useState(""),[y,m]=v.useState(0),b=Object.values(iM.application_stages),x=b[e],w=b.length;v.useEffect(()=>{const P={};b.forEach(D=>{D.questions.forEach(L=>{L.type==="checkbox_multiple"||L.type==="date_range"?P[L.id]=[]:(L.type==="multiple_choice"||L.type==="slider"||L.type==="textarea")&&(P[L.id]="")})}),n(P)},[]);const _=P=>{const{name:D,value:L,type:B,checked:q}=P.target;n(K=>({...K,[D]:B==="checkbox"?q:L})),i(K=>({...K,[D]:void 0}))},j=P=>P.trim().split(/\s+/).filter(D=>D.length>0).length,k=()=>{let P={},D=!0;return x.questions.forEach(L=>{if(L.required){const B=r[L.id];if(!B||Array.isArray(B)&&B.length===0)P[L.id]="This field is required.",D=!1;else if(L.type==="textarea"){const q=j(B);L.min_words&&q<L.min_words&&(P[L.id]=`Minimum ${L.min_words} words required.`,D=!1),L.max_words&&q>L.max_words&&(P[L.id]=`Maximum ${L.max_words} words allowed.`,D=!1)}}L.type==="checkbox_multiple"&&L.max_selections&&r[L.id]&&r[L.id].length>L.max_selections&&(P[L.id]=`You can select a maximum of ${L.max_selections} options.`,D=!1)}),i(P),D},S=(P,D)=>{let L=0;if(P.type==="multiple_choice"&&P.options){const B=P.options.find(q=>q.text===D);L=B?B.score:0}else P.type==="checkbox_multiple"&&P.options&&Array.isArray(D)?L=D.reduce((B,q)=>{var K;const H=(K=P.options)==null?void 0:K.find($=>$.text===q);return B+(H?H.score:0)},0):P.type==="slider"&&D?L=Math.min(10,Math.floor(parseInt(D)/10)):P.type==="textarea"&&(L=D&&j(D)>0?5:0);return L*P.weight},C=P=>{let D=0;return P.questions.forEach(L=>{D+=S(L,r[L.id])}),Math.round(D*(P.max_possible_score/10))},E=()=>{if(k()){const P=C(x);if(a(D=>({...D,[e]:P})),x.min_score_required&&P<x.min_score_required){c(!1),h(!0);return}e<w-1?t(D=>D+1):O()}},T=()=>{e>0&&t(P=>P-1)},R=P=>{const D=iM.scoring_system.overall_thresholds;return P>=D.auto_accept?"auto_accept":P>=D.strong_candidate?"strong_candidate":P>=D.interview_required?"interview_required":"auto_reject"},O=()=>{let P=Object.values(o).reduce((D,L)=>D+L,0);m(P),p(R(P)),h(!0)},I=P=>{var D,L;const B=r[P.id],q=s[P.id];switch(P.type){case"multiple_choice":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{className:"block text-lg font-semibold text-textLight mb-2",children:[P.question," ",P.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),(D=P.options)==null?void 0:D.map(K=>d.jsxs("label",{className:"radio-option",children:[d.jsx("input",{type:"radio",name:P.id,value:K.text,checked:B===K.text,onChange:_}),d.jsx("span",{className:"radio-custom"}),d.jsx("span",{className:"option-text",children:K.text})]},K.text)),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},P.id);case"checkbox_multiple":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{className:"block text-lg font-semibold text-textLight mb-2",children:[P.question," ",P.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),(L=P.options)==null?void 0:L.map(K=>d.jsxs("label",{className:"checkbox-option",children:[d.jsx("input",{type:"checkbox",name:P.id,value:K.text,checked:Array.isArray(B)&&B.includes(K.text),onChange:_}),d.jsx("span",{className:"checkbox-custom"}),d.jsx("span",{className:"option-text",children:K.text})]},K.text)),P.max_selections&&d.jsxs("p",{className:"text-sm text-grayDark mt-1",children:["Select up to ",P.max_selections]}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},P.id);case"textarea":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{htmlFor:P.id,className:"block text-lg font-semibold text-textLight mb-2",children:[P.question," ",P.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),P.sample_text&&d.jsx("p",{className:"text-grayDark text-base mb-2 italic",children:P.sample_text}),d.jsx("textarea",{id:P.id,name:P.id,value:B||"",onChange:_,rows:6,className:"mt-1 block w-full border border-borderColorLight rounded-md shadow-sm p-2 focus:border-primary focus:ring-primary"}),P.min_words&&P.max_words&&d.jsxs("p",{className:"text-xs text-grayDark mt-1",children:["Words: ",j(B||"")," / ",P.max_words," (min: ",P.min_words,")"]}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},P.id);case"slider":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{htmlFor:P.id,className:"block text-lg font-semibold text-textLight mb-2",children:[P.question," ",P.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),d.jsx("input",{type:"range",id:P.id,name:P.id,min:P.min,max:P.max,step:P.step,value:B||P.min||0,onChange:_,className:"w-full h-2 bg-grayMedium rounded-lg appearance-none cursor-pointer accent-primary"}),d.jsxs("div",{className:"flex justify-between text-sm text-grayDark mt-1",children:[d.jsx("span",{children:P.min}),d.jsx("span",{children:B||P.min||0}),d.jsx("span",{children:P.max})]}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},P.id);case"date_range":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{htmlFor:P.id,className:"block text-lg font-semibold text-textLight mb-2",children:[P.question," ",P.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),d.jsx("p",{className:"text-base text-grayDark",children:"Date range selection not fully implemented in this example."}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},P.id);default:return d.jsxs("p",{className:"text-errorRed",children:["Unknown question type: ",P.type]},P.id)}};if(u)if(l){const P={auto_accept:"Congratulations! You have been automatically accepted into our beta reader program.",strong_candidate:"Excellent! You are a strong candidate. We will contact you within 48 hours.",interview_required:"Thank you for applying. We would like to schedule a brief interview with you.",auto_reject:"Thank you for your interest. Unfortunately, you do not meet our current requirements."};return d.jsxs("div",{className:"container mx-auto p-4 text-center text-textLight rounded-lg shadow-lg my-8 card-glow",children:[d.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Application Complete"}),d.jsxs("div",{className:"p-6 rounded-lg shadow-md mb-6 card-glow",children:[d.jsxs("h2",{className:"text-3xl font-semibold mb-2",children:["Your Score: ",y]}),d.jsx("p",{className:"text-lg",children:P[f]})]}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out",children:"Apply Again"})]})}else return d.jsxs("div",{className:"container mx-auto p-4 text-center text-textLight rounded-lg shadow-lg my-8 card-glow",children:[d.jsx("h1",{className:"text-4xl font-bold mb-4 text-errorRed",children:"Application Not Qualified"}),d.jsx("p",{className:"text-lg mb-4 text-grayDark",children:"Thank you for your interest in our beta reader program."}),d.jsx("p",{className:"text-md mb-6 text-grayDark",children:"Unfortunately, you do not meet the minimum requirements for this stage. We encourage you to gain more reading experience and apply again in the future."}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out",children:"Start Over"})]});return d.jsxs("div",{className:"container mx-auto p-4 bg-background-light text-textLight rounded-lg shadow-lg my-8",children:[d.jsx("h1",{className:"text-4xl font-bold mb-6 text-primary text-center hero-title-glow",children:"Beta Program Application"}),d.jsx("div",{className:"w-full bg-grayMedium rounded-full h-2.5 mb-4",children:d.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500 ease-in-out",style:{width:`${(e+1)/w*100}%`}})}),d.jsxs("p",{className:"text-center text-base text-grayDark mb-6",children:["Stage ",e+1," of ",w,": ",x.title]}),d.jsxs("form",{onSubmit:P=>{P.preventDefault(),E()},className:"space-y-6",children:[d.jsxs("section",{className:"p-6 bg-background-light rounded-lg shadow-md border border-borderColorLight",children:[d.jsx("h2",{className:"text-3xl font-semibold mb-4 text-textLight",children:x.title}),d.jsx("p",{className:"text-lg text-grayDark mb-4",children:x.description}),x.questions.map(I)]}),d.jsxs("div",{className:"flex justify-between mt-6",children:[e>0&&d.jsx("button",{type:"button",onClick:T,className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out",children:"Previous"}),d.jsx("button",{type:"submit",className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out ml-auto",children:e===w-1?"Submit Application":"Next"})]})]})]})},mUe={default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent",outline:"text-foreground border border-input hover:bg-accent hover:text-accent-foreground",success:"bg-green-500 text-white hover:bg-green-600 border-transparent"},gUe=v.forwardRef(({className:e,variant:t="default",...r},n)=>d.jsx("div",{ref:n,className:Je("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",mUe[t],e),...r}));gUe.displayName="Badge";const oM=({children:e})=>{const{user:t,isLoading:r}=jh();return r?g.jsx("div",{children:"Loading..."}):t?g.jsx(g.Fragment,{children:e}):g.jsx(RM,{to:"/login",replace:!0})},yUe=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,i]=v.useState(null),[o,a]=v.useState(null),[l,c]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0);const{data:m,error:b}=await supabase.from("beta_applications").select("*");b?(console.error("Error fetching beta applications:",b),i(b.message)):t(m||[]),n(!1)})()},[]);const u=async(y,m,b)=>{const{error:x}=await supabase.from("beta_applications").update({status:m,admin_notes:b}).eq("id",y);if(x){console.error("Error updating application status:",x),alert("Failed to update application status.");return}const{data:w,error:_}=await supabase.from("beta_applications").select("user_id").eq("id",y).single();if(_||!w){console.error("Error fetching application user_id:",_),alert("Failed to fetch application user for profile update.");return}const j=m==="approved"?"approved":"rejected",{error:k}=await supabase.from("profiles").update({beta_reader_status:j}).eq("id",w.user_id);if(k){console.error("Error updating user profile beta_reader_status:",k),alert("Failed to update user's beta reader status in profile.");return}t(S=>S.map(C=>C.id===y?{...C,status:m,admin_notes:b}:C)),alert(`Application ${m} and user profile updated successfully!`)},h=y=>{a(y),c(!0)},f=()=>{a(null),c(!1)},p=async(y,m)=>{const{error:b}=await supabase.from("beta_applications").update({admin_notes:m}).eq("id",y);b?(console.error("Error updating admin notes:",b),alert("Failed to update admin notes.")):(t(x=>x.map(w=>w.id===y?{...w,admin_notes:m}:w)),o&&o.id===y&&a(x=>x?{...x,admin_notes:m}:null),alert("Admin notes updated successfully!"))};return r?g.jsx("div",{className:"text-gray-100",children:"Loading applications..."}):s?g.jsxs("div",{className:"text-red-400",children:["Error: ",s]}):g.jsxs("div",{className:"admin-beta-applications-manager",children:[g.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"Manage Beta Applications"}),e.length===0?g.jsx("p",{className:"text-gray-400",children:"No beta applications submitted yet."}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(y=>g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:y.full_name}),g.jsx("p",{className:"text-gray-400 text-sm",children:y.email}),g.jsxs("p",{className:"text-gray-400 text-sm",children:["Status: ",g.jsx("span",{className:`font-medium ${y.status==="pending"?"text-yellow-400":y.status==="approved"?"text-green-400":"text-red-400"}`,children:y.status.toUpperCase()})]}),g.jsxs("p",{className:"text-gray-400 text-sm",children:["Composite Score: ",y.composite_score,"/100"]}),g.jsxs("div",{className:"mt-4 space-y-2",children:[g.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 1 Score: ",y.stage1_raw_score,"/100"]}),g.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 2 Score: ",y.stage2_raw_score,"/60"]}),g.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 3 Score: ",y.stage3_raw_score,"/40"]}),g.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 4 Score: ",y.stage4_raw_score,"/60"]})]}),y.admin_notes&&g.jsxs("div",{className:"mt-4 p-3 bg-gray-700/50 rounded-lg text-gray-300 text-sm",children:[g.jsx("strong",{children:"Admin Notes:"})," ",y.admin_notes]}),g.jsxs("div",{className:"mt-6 flex space-x-3",children:[y.status==="pending"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>u(y.id,"approved",prompt("Add admin notes for approval:")||""),className:"px-4 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Approve"}),g.jsx("button",{onClick:()=>u(y.id,"denied",prompt("Add admin notes for denial:")||""),className:"px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-sm font-medium",children:"Deny"})]}),g.jsx("button",{onClick:()=>h(y),className:"px-4 py-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors text-sm font-medium",children:"View Details"})]})]},y.id))}),l&&o&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-gray-800/90 rounded-lg p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-gray-700 relative",children:[g.jsx("button",{onClick:f,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:"×"}),g.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["Application Details: ",o.full_name]}),g.jsxs("div",{className:"space-y-4 text-gray-300",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Applicant Information"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Email:"})," ",o.email]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Time Zone:"})," ",o.time_zone]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Country:"})," ",o.country||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Goodreads:"})," ",o.goodreads||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Applied On:"})," ",new Date(o.created_at).toLocaleString()]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Current Status:"})," ",o.status.toUpperCase()]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Composite Score:"})," ",o.composite_score,"/100"]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Admin Notes"}),g.jsx("textarea",{className:"w-full p-2 rounded bg-gray-700 border border-gray-600 text-white",rows:4,value:o.admin_notes||"",onChange:y=>a(m=>m?{...m,admin_notes:y.target.value}:null)}),g.jsx("button",{onClick:()=>p(o.id,o.admin_notes||""),className:"mt-2 px-4 py-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors text-sm font-medium",children:"Save Notes"})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 1: Application Form (Score: ",o.stage1_raw_score,"/100)"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Beta Commitment:"})," ",o.beta_commitment]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Hours Per Week:"})," ",o.hours_per_week]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Portal Use:"})," ",o.portal_use]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Recent Reads:"})," ",o.recent_reads||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Interest Statement:"})," ",o.interest_statement]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Prior Beta Experience:"})," ",o.prior_beta||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Feedback Philosophy:"})," ",o.feedback_philosophy]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Track Record:"})," ",o.track_record||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Communication:"})," ",o.communication]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Devices:"})," ",o.devices.join(", ")||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Access Needs:"})," ",o.access_needs||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Demographics:"})," ",o.demographics||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passed Stage 1:"})," ",o.stage1_passed?"Yes":"No"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Auto Fail:"})," ",o.stage1_auto_fail?"Yes":"No"]})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 2: Comprehension Test (Score: ",o.stage2_raw_score,"/60)"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Q1 Answer:"})," ",o.q1||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Q2 Answer:"})," ",o.q2||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Clarity Feedback:"})," ",o.clarity_feedback||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Pacing Analysis:"})," ",o.pacing_analysis||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Taste Alignment:"})," ",o.taste_alignment||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passed Stage 2:"})," ",o.stage2_passed?"Yes":"No"]})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 3: Calibration Test (Score: ",o.stage3_raw_score,"/40)"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Worse Passage:"})," ",o.worse_passage||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passage A Analysis:"})," ",o.passage_a_analysis||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passage B Analysis:"})," ",o.passage_b_analysis||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Priority Fix:"})," ",o.priority_fix||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passed Stage 3:"})," ",o.stage3_passed?"Yes":"No"]})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 4: Timed Trial (Score: ",o.stage4_raw_score,"/60)"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Overall Assessment:"})," ",o.overall_assessment||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Chapter Summary:"})," ",o.chapter_summary||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passed Stage 4:"})," ",o.stage4_passed?"Yes":"No"]})]}),g.jsxs("div",{className:"mt-6",children:[g.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Change Application Status"}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{onClick:()=>u(o.id,"approved",prompt("Add admin notes for approval:")||o.admin_notes||""),className:"px-4 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Approve"}),g.jsx("button",{onClick:()=>u(o.id,"denied",prompt("Add admin notes for denial:")||o.admin_notes||""),className:"px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-sm font-medium",children:"Deny"})]})]})]})]})})]})},vUe="_timeline_1x8m9_1",bUe="_milestone_1x8m9_20",xUe="_dot_1x8m9_57",wUe="_content_1x8m9_76",_Ue="_date_1x8m9_88",jUe="_expandedContent_1x8m9_108",kUe="_detailsText_1x8m9_114",NUe="_miniTimeline_1x8m9_120",SUe="_miniMilestone_1x8m9_126",EUe="_miniDot_1x8m9_131",CUe="_miniContent_1x8m9_141",TUe="_miniDate_1x8m9_145",vs={timeline:vUe,milestone:bUe,dot:xUe,content:wUe,date:_Ue,expandedContent:jUe,detailsText:kUe,miniTimeline:NUe,miniMilestone:SUe,miniDot:EUe,miniContent:CUe,miniDate:TUe},aM=typeof window<"u",sK="https://opukvvmumyegtkukqint.supabase.co",iK="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",sK);console.log("DEBUG: supabaseAnonKey (raw):",iK);console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set");let oK;try{oK=c6(sK,iK,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:aM?window.localStorage:void 0}});const e=typeof process<"u"&&!1}catch(e){throw console.error("Error initializing Supabase client:",e),e}const AUe=async()=>{const{data:e,error:t}=await supabase.from("timeline_events").select(`
      *,
      timeline_nested_events (
        id,
        date,
        title,
        description,
        "order"
      )
    `).eq("is_published",!0).order("order",{ascending:!0});return t?(console.error("Error fetching timeline events:",t),[]):e},OUe=({date:e,title:t,description:r,details:n,nested_events:s=[],background_image:i})=>{const[o,a]=v.useState(!1),l=()=>{a(!o)},c=i?{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${i})`,backgroundSize:"cover",backgroundPosition:"center",color:"white",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}:{};return g.jsxs("div",{className:vs.milestone,style:c,children:[g.jsx("div",{className:vs.dot}),g.jsxs("div",{className:vs.content,onClick:l,children:[g.jsx("span",{className:vs.date,children:e}),g.jsx("h3",{children:t}),g.jsx("p",{children:r}),o&&g.jsxs("div",{className:vs.expandedContent,children:[n&&g.jsx("p",{className:vs.detailsText,children:n}),s&&s.length>0&&g.jsx("div",{className:vs.miniTimeline,children:s.map((u,h)=>g.jsxs("div",{className:vs.miniMilestone,children:[g.jsx("div",{className:vs.miniDot}),g.jsxs("div",{className:vs.miniContent,children:[g.jsx("span",{className:vs.miniDate,children:u.date}),g.jsx("h4",{children:u.title}),g.jsx("p",{children:u.description})]})]},h))})]})]})]})},PUe=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,i]=v.useState(null);return v.useEffect(()=>{(async()=>{try{n(!0);const a=await AUe();t(a)}catch(a){console.error("Failed to load timeline events:",a),i("Failed to load timeline. Please try again later.")}finally{n(!1)}})()},[]),r?g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s?g.jsx("div",{className:"container mx-auto p-4",children:g.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[g.jsx("strong",{className:"font-bold",children:"Error: "}),g.jsx("span",{className:"block sm:inline",children:s})]})}):e.length===0?g.jsx("div",{className:"container mx-auto p-4",children:g.jsxs("div",{className:"text-center py-12",children:[g.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Timeline Events Found"}),g.jsx("p",{className:"text-gray-600",children:"Check back later for updates to the timeline."})]})}):g.jsx("section",{className:`${vs.timeline} py-12`,children:g.jsxs("div",{className:"container mx-auto px-4",children:[g.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"Zoroastrian Timeline"}),e.map(o=>g.jsx(OUe,{date:o.date,title:o.title,description:o.description,details:o.details,nested_events:o.nested_events,background_image:o.background_image},o.id))]})})},RUe=()=>{var j,k,S,C;const[e,t]=v.useState(1),[r,n]=v.useState({}),[s,i]=v.useState(1),[o,a]=v.useState(48*60*60),l=[{label:"Application"},{label:"Comprehension"},{label:"Calibration"},{label:"Trial Task"}],c=({state:E})=>{const T=E==="done"?"#10B981":E==="current"?"#60A5FA":"#6B7280",R=E==="upcoming"?"#9CA3AF":"#E5E7EB";return g.jsxs("svg",{viewBox:"0 0 64 40",width:"36",height:"24",className:`mountain-icon ${E}`,"aria-hidden":!0,children:[g.jsx("path",{d:"M2 38 L20 12 L28 22 L40 4 L62 38 Z",fill:T,stroke:T,strokeWidth:"1.5"}),g.jsx("path",{d:"M20 12 L24 18 L16 18 Z",fill:R}),g.jsx("path",{d:"M40 4 L44 12 L36 12 Z",fill:R})]})},u=({done:E})=>g.jsx("div",{className:`connector ${E?"done":""}`}),h=()=>g.jsxs("div",{className:"mountain-stepper",children:[g.jsx(u,{done:e>0}),l.map((E,T)=>{const R=T+1,O=R<e?"done":R===e?"current":"upcoming";return g.jsxs(de.Fragment,{children:[g.jsxs("div",{className:"mountain-step-container",onClick:()=>f(),children:[g.jsx(c,{state:O}),g.jsx("span",{className:`mountain-label ${O}`,children:E.label})]}),g.jsx(u,{done:R<e})]},E.label)})]}),f=E=>{t(6)},p=(E,T,R,O)=>{const I=document.getElementById(E),P=document.getElementById(T);if(I&&P){const D=I.value.trim().split(/\s+/).filter(L=>L.length>0).length;P.textContent=`${D}/${O} words`,P.className="word-count",D<R?P.classList.add("error"):D>O*.9&&P.classList.add("warning")}};v.useEffect(()=>{p("interestStatement","interestWordCount",150,250),p("taste_response","tasteWordCount",0,100),p("overall_assessment","assessmentWordCount",200,300)},[e]),v.useEffect(()=>{let E;return e===4&&(E=setInterval(()=>{a(T=>T<=0?(clearInterval(E),alert("Time expired! Your submission may be marked as late."),0):T-1)},1e3)),()=>clearInterval(E)},[e]);const y=E=>{const T=Math.floor(E/3600),R=Math.floor(E%3600/60),O=E%60;return`${T.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`},m=E=>{E.preventDefault();const T=new FormData(E.target),R=Object.fromEntries(T.entries()),O=Array.from(document.querySelectorAll('input[name="devices"]:checked')).map(Z=>Z.value);R.devices=O;let I=0,P=!1;I+={weekly_deadlines:10,commit_with_extensions:6,prefer_flexible:3,no_commitment:0}[R.betaCommitment]||0,R.betaCommitment==="no_commitment"&&(P=!0),I+={"5_plus":5,"3_4":3,under_3:0}[R.hoursPerWeek]||0,I+={yes_comfortable:5,yes_unsure:2,no:0}[R.portalUse]||0,R.portalUse==="no"&&(P=!0),I=Math.min(I,20);let q=0;R.recentReads.length>0&&R.interestStatement.length>0&&(q=10),I+=q;let K=0;R.priorBeta.length>0&&R.feedbackPhilosophy.length>0&&(K=10),I+=K;let H=0;R.trackRecord.length>0&&R.communication.length>0&&(H=10),I+=H;let $=0;const J=O.length;J===3?$+=6:J===2?$+=4:J===1&&($+=2),$=Math.min($,20),I+=$;let be=I>=50&&!P;n(Z=>({...Z,stage1:{...R,rawScore:I,passed:be,autoFail:P}})),f()},b=E=>{E.preventDefault();const T=new FormData(E.target),R=Object.fromEntries(T.entries());let O=0;const I=38;R.q1==="b"&&(O+=20),R.clarity_feedback.length>0&&R.pacing_feedback.length>0&&(O+=15),R.taste_response.length>0&&(O+=5);let P=O>=I;n(D=>({...D,stage2:{...R,rawScore:O,passed:P}})),f()},x=E=>{E.preventDefault();const T=new FormData(E.target),R=Object.fromEntries(T.entries());let O=0;const I=26;R.worse_passage==="a"&&(O+=15),R.passage_a_analysis.length>0&&R.passage_b_analysis.length>0&&R.priority_fix.length>0&&(O+=5);let P=O>=I;n(D=>({...D,stage3:{...R,rawScore:O,passed:P}})),f()},w=async E=>{var H;E.preventDefault();const T=new FormData(E.target),R=Object.fromEntries(T.entries());let O=0;const I=40;o>0?O+=10:O+=0;const P=document.querySelectorAll(".inline-comment");R.overall_assessment.length>0&&R.chapter_summary.length>0&&P.length>=8?O+=10:R.overall_assessment.length>0&&R.chapter_summary.length>0&&P.length>=4&&(O+=5),P.length>0&&(O+=10),R.chapter_summary.length>0&&(O+=10);let D=O>=I;n($=>({...$,stage4:{...R,rawScore:O,passed:D}}));const L={stage1:.2,stage2:.25,stage3:.2,stage4:.35},B=r.stage1.rawScore/100*(L.stage1*100)+r.stage2.rawScore/60*(L.stage2*100)+r.stage3.rawScore/40*(L.stage3*100)+r.stage4.rawScore/60*(L.stage4*100);n($=>({...$,compositeScore:Math.round(B*10)/10})),t(6);const q={user_id:(H=(await supabase.auth.getUser()).data.user)==null?void 0:H.id,full_name:r.stage1.fullName,email:r.stage1.email,time_zone:r.stage1.timeZone,country:r.stage1.country,goodreads:r.stage1.goodreads,beta_commitment:r.stage1.betaCommitment,hours_per_week:r.stage1.hoursPerWeek,portal_use:r.stage1.portalUse,recent_reads:r.stage1.recentReads,interest_statement:r.stage1.interestStatement,prior_beta:r.stage1.priorBeta,feedback_philosophy:r.stage1.feedbackPhilosophy,track_record:r.stage1.trackRecord,communication:r.stage1.communication,devices:r.stage1.devices,access_needs:r.stage1.accessNeeds,demographics:r.stage1.demographics,stage1_raw_score:r.stage1.rawScore,stage1_passed:r.stage1.passed,stage1_auto_fail:r.stage1.autoFail,q1:r.stage2.q1,q2:r.stage2.q2,clarity_feedback:r.stage2.clarity_feedback,pacing_analysis:r.stage2.pacing_feedback,taste_alignment:r.stage2.taste_response,stage2_raw_score:r.stage2.rawScore,stage2_passed:r.stage2.passed,worse_passage:r.stage3.worse_passage,passage_a_analysis:r.stage3.passage_a_analysis,passage_b_analysis:r.stage3.passage_b_analysis,priority_fix:r.stage3.priority_fix,stage3_raw_score:r.stage3.rawScore,stage3_passed:r.stage3.passed,overall_assessment:r.stage4.overall_assessment,chapter_summary:r.stage4.chapter_summary,stage4_raw_score:r.stage4.rawScore,stage4_passed:r.stage4.passed,composite_score:r.compositeScore},{error:K}=await supabase.from("beta_applications").insert([q]);K?(console.error("Error saving beta application:",K),alert("There was an error saving your application. Please try again.")):console.log("Beta application saved successfully!")},_=()=>{i(E=>E+1)};return g.jsxs("div",{className:"beta-app-container",children:[g.jsxs("div",{className:"beta-app-header",children:[g.jsx("h1",{children:"Zangar/Spandam Beta Reader Program"}),g.jsx("p",{children:"Join our exclusive beta reading community for epic sci-fi/fantasy"})]}),h(),e===1&&g.jsx("div",{id:"stage1",className:"stage-content",children:g.jsxs("form",{onSubmit:m,children:[g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Contact Information"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"fullName",children:"Full Name *"}),g.jsx("input",{type:"text",id:"fullName",name:"fullName",className:"form-control",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"email",children:"Email Address *"}),g.jsx("input",{type:"email",id:"email",name:"email",className:"form-control",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"timeZone",children:"Time Zone *"}),g.jsxs("select",{id:"timeZone",name:"timeZone",className:"form-control",required:!0,children:[g.jsx("option",{value:"",children:"Select your time zone"}),g.jsx("option",{value:"America/New_York",children:"Eastern Time (UTC-5/-4)"}),g.jsx("option",{value:"America/Chicago",children:"Central Time (UTC-6/-5)"}),g.jsx("option",{value:"America/Denver",children:"Mountain Time (UTC-7/-6)"}),g.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (UTC-8/-7)"}),g.jsx("option",{value:"Europe/London",children:"GMT/BST (UTC+0/+1)"}),g.jsx("option",{value:"Europe/Paris",children:"CET/CEST (UTC+1/+2)"}),g.jsx("option",{value:"Asia/Tokyo",children:"JST (UTC+9)"}),g.jsx("option",{value:"Australia/Sydney",children:"AEST/AEDT (UTC+10/+11)"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"country",children:"Country"}),g.jsx("input",{type:"text",id:"country",name:"country",className:"form-control"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"goodreads",children:"Goodreads Profile (optional)"}),g.jsx("input",{type:"text",id:"goodreads",name:"goodreads",className:"form-control",placeholder:"https://goodreads.com/user/..."})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Commitment & Availability (Max 20 pts)"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"betaCommitment",children:"Beta Window Commitment (6-8 weeks) *"}),g.jsxs("select",{id:"betaCommitment",name:"betaCommitment",className:"form-control",required:!0,children:[g.jsx("option",{value:"",children:"Select your commitment level"}),g.jsx("option",{value:"weekly_deadlines",children:"I can commit to weekly deadlines (10 pts)"}),g.jsx("option",{value:"commit_with_extensions",children:"I can commit but may need 1+ extensions (6 pts)"}),g.jsx("option",{value:"prefer_flexible",children:"I prefer flexible deadlines (3 pts)"}),g.jsx("option",{value:"no_commitment",children:"I cannot commit to deadlines (0 pts)"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"hoursPerWeek",children:"Time Budget per Week *"}),g.jsxs("select",{id:"hoursPerWeek",name:"hoursPerWeek",className:"form-control",required:!0,children:[g.jsx("option",{value:"",children:"Select your time availability"}),g.jsx("option",{value:"5_plus",children:"5+ hours per week (5 pts)"}),g.jsx("option",{value:"3_4",children:"3-4 hours per week (3 pts)"}),g.jsx("option",{value:"under_3",children:"Less than 3 hours (0 pts)"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"portalUse",children:"Website Portal Usage *"}),g.jsxs("select",{id:"portalUse",name:"portalUse",className:"form-control",required:!0,children:[g.jsx("option",{value:"",children:"Select your comfort level"}),g.jsx("option",{value:"yes_comfortable",children:"Yes, I'm comfortable using web tools (5 pts)"}),g.jsx("option",{value:"yes_unsure",children:"Yes, but I'm unsure about tech (2 pts)"}),g.jsx("option",{value:"no",children:"No, I prefer other methods (0 pts)"})]})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Genre/Series Alignment (Max 20 pts)"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"recentReads",children:"Recent Relevant Reads"}),g.jsx("textarea",{id:"recentReads",name:"recentReads",className:"form-control",placeholder:"List 3-5 books you've read in the last 12 months that relate to epic sci-fi/fantasy, Persian/Zoroastrian themes, or big-idea worldbuilding..."})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"interestStatement",children:"Why This Series? (150-250 words) *"}),g.jsx("textarea",{id:"interestStatement",name:"interestStatement",className:"form-control",placeholder:"What specifically interests you about the Zangar/Spandam series? Mention themes like empire vs. kinship, oath/fate dynamics, cliffside megastructures, etc.",required:!0}),g.jsx("div",{className:"word-count",id:"interestWordCount",children:"0/250 words"})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Feedback Experience & Philosophy (Max 20 pts)"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"priorBeta",children:"Prior Beta/Critique Experience"}),g.jsx("textarea",{id:"priorBeta",name:"priorBeta",className:"form-control",placeholder:"Describe your experience with beta reading, manuscript critiques, or writing groups. Include specific examples and outcomes..."})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"feedbackPhilosophy",children:"Feedback Philosophy *"}),g.jsx("textarea",{id:"feedbackPhilosophy",name:"feedbackPhilosophy",className:"form-control",placeholder:"How do you approach giving feedback? How do you balance honesty with kindness? Describe your method for providing actionable, specific suggestions...",required:!0})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Reliability Signals (Max 20 pts)"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"trackRecord",children:"Deadline Track Record"}),g.jsx("textarea",{id:"trackRecord",name:"trackRecord",className:"form-control",placeholder:"Provide examples of meeting deadlines in work, volunteer, or creative contexts. Include any verifiable references or public profiles..."})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"communication",children:"Communication Style *"}),g.jsx("textarea",{id:"communication",name:"communication",className:"form-control",placeholder:"How do you handle check-ins and communication? What would you do if you encountered a blocker or needed to request an extension?",required:!0})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Diversity & Coverage (Max 20 pts)"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Reading Devices/Platforms *"}),g.jsxs("div",{className:"checkbox-group",children:[g.jsxs("div",{className:"checkbox-item",children:[g.jsx("input",{type:"checkbox",id:"desktop",name:"devices",value:"desktop"}),g.jsx("label",{htmlFor:"desktop",children:"Desktop/Laptop"})]}),g.jsxs("div",{className:"checkbox-item",children:[g.jsx("input",{type:"checkbox",id:"mobile",name:"devices",value:"mobile"}),g.jsx("label",{htmlFor:"mobile",children:"Mobile/Tablet"})]}),g.jsxs("div",{className:"checkbox-item",children:[g.jsx("input",{type:"checkbox",id:"ereader",name:"devices",value:"ereader"}),g.jsx("label",{htmlFor:"ereader",children:"E-reader (Kindle, etc.)"})]})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"accessNeeds",children:"Access Needs & Unique Perspectives"}),g.jsx("textarea",{id:"accessNeeds",name:"accessNeeds",className:"form-control",placeholder:"Do you have any access needs, cultural backgrounds (especially Persian/Middle Eastern), military experience, or other perspectives that would add value to our beta program?"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"demographics",children:"Additional Diversity Information"}),g.jsx("textarea",{id:"demographics",name:"demographics",className:"form-control",placeholder:"Any other demographic or experience diversity you'd like to share that would improve our beta reader representation?"})]})]}),g.jsxs("div",{className:"navigation",children:[g.jsx("div",{}),g.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Application"})]})]})}),e===6&&g.jsx("div",{id:"stage2",className:"stage-content",children:g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Stage 2: Reading Comprehension & Taste Fit"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Instructions:"})," Read the excerpt below and answer the questions. This tests your ability to parse complex worldbuilding and provide specific feedback."]}),g.jsxs("div",{className:"excerpt-container",children:[g.jsx("h4",{children:"Sample Excerpt (800 words)"}),g.jsx("p",{className:"excerpt-text",children:"The Vənāsō winds carried more than salt and storm-promise tonight. Hooran felt the weight of unspoken oaths pressing against her temples as she stood upon the Cliffside Sanctum, watching the fires of Spandam flicker like dying stars across the chasm. Each flame represented a choice—empire or kinship, the Saoshyant's path or the old ways of her mothers."}),g.jsx("p",{className:"excerpt-text",children:'"The Zangar expect answers by dawn," Cyrus said, his voice cutting through the wind-song. His ceremonial armor caught moonlight like captured ice, each plate inscribed with binding-runes that pulsed faintly blue. "The Great Assembly grows restless."'}),g.jsx("p",{className:"excerpt-text",children:"Hooran's fingers traced the oath-scar on her palm—the mark that bound her to choices not yet made. Below, the megastructure of Spandam stretched into darkness, its bio-luminescent veins carrying information like blood through stone arteries. Somewhere in those depths, her brother Darius worked the Deep Forges, unaware that his sister's decision would reshape not just their family's fate, but the balance between the Seven Domains."}),g.jsx("p",{className:"excerpt-text",children:`"The winds know," she whispered, tasting copper and ozone. "They've always known."`})]}),g.jsxs("form",{onSubmit:b,children:[g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Question 1:"})," What is the primary source of tension in this scene?"]}),g.jsxs("select",{className:"form-control",name:"q1",required:!0,children:[g.jsx("option",{value:"",children:"Choose the best answer"}),g.jsx("option",{value:"a",children:"Weather conditions threatening the characters"}),g.jsx("option",{value:"b",children:"Hooran must choose between competing loyalties by dawn"}),g.jsx("option",{value:"c",children:"Cyrus is pressuring Hooran to attack Spandam"}),g.jsx("option",{value:"d",children:"The bio-luminescent technology is failing"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Question 2:"}),' What role do the "Vənāsō winds" serve in this passage?']}),g.jsx("textarea",{className:"form-control",name:"q2",placeholder:"Explain in 2-3 sentences...",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Feedback Task:"})," Identify one clarity issue and suggest a specific improvement"]}),g.jsx("textarea",{className:"form-control",name:"clarity_feedback",placeholder:"Point to specific lines and explain what's unclear, then suggest how to fix it...",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Pacing Analysis:"})," How does the pacing work in this excerpt?"]}),g.jsx("textarea",{className:"form-control",name:"pacing_feedback",placeholder:"Analyze the rhythm and flow, citing specific examples...",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Taste Alignment (100 words):"})," What about this excerpt most engages or loses you?"]}),g.jsx("textarea",{id:"taste_response",className:"form-control",name:"taste_response",placeholder:"Be specific about what works or doesn't work for you as a reader...",required:!0}),g.jsx("div",{className:"word-count",id:"tasteWordCount",children:"0/100 words"})]}),g.jsxs("div",{className:"navigation",children:[g.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Application"}),g.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Stage 2"})]})]})]})}),e===3&&g.jsx("div",{id:"stage3",className:"stage-content",children:g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Stage 3: Calibration Test"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Instructions:"})," Compare these two passages and rank which needs more revision. Explain your reasoning."]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"25px",margin:"25px 0"},children:[g.jsxs("div",{className:"excerpt-container",style:{background:"linear-gradient(145deg, #f0f8f0 0%, #e8f4e8 100%)",borderColor:"#90ee90"},children:[g.jsx("h4",{style:{color:"#228b22"},children:"Passage A"}),g.jsx("p",{className:"excerpt-text",children:"The battle raged across the crystalline plains. Warriors fought with determination. Magic crackled through the air as spells were cast by the mages. It was a significant moment in the war. Many would die. The outcome would affect everyone. The protagonist felt conflicted about their role in the violence."})]}),g.jsxs("div",{className:"excerpt-container",style:{background:"linear-gradient(145deg, #fff8dc 0%, #f5f5dc 100%)",borderColor:"#daa520"},children:[g.jsx("h4",{style:{color:"#b8860b"},children:"Passage B"}),g.jsx("p",{className:"excerpt-text",children:"Kara's blade sang against Varek's shield, the impact reverberating through her bones. Around them, the Shattered Fields erupted in cascades of amber light—each spell-strike from the War-Mages above sending hairline fractures racing through the crystalline ground. She could taste copper and ozone, hear the wet snap of breaking bone somewhere to her left. This was the moment Sehran had warned her about: when ideology met steel, and someone had to choose what they were willing to break."})]})]}),g.jsxs("form",{onSubmit:x,children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:g.jsx("strong",{children:"Which passage needs more revision?"})}),g.jsxs("select",{className:"form-control",name:"worse_passage",required:!0,children:[g.jsx("option",{value:"",children:"Choose one"}),g.jsx("option",{value:"a",children:"Passage A"}),g.jsx("option",{value:"b",children:"Passage B"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Analysis of Passage A:"})," Identify strengths and weaknesses"]}),g.jsx("textarea",{className:"form-control",name:"passage_a_analysis",placeholder:"What works and what doesn't? Be specific...",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Analysis of Passage B:"})," Identify strengths and weaknesses"]}),g.jsx("textarea",{className:"form-control",name:"passage_b_analysis",placeholder:"What works and what doesn't? Be specific...",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Top Priority Fix:"})," What's the most important issue to address?"]}),g.jsx("textarea",{className:"form-control",name:"priority_fix",placeholder:"Choose the highest-impact problem and suggest a concrete solution...",required:!0})]}),g.jsxs("div",{className:"navigation",children:[g.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Stage 2"}),g.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Stage 3"})]})]})]})}),e===4&&g.jsx("div",{id:"stage4",className:"stage-content",children:g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Stage 4: Timed Trial Task"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Deadline:"})," You have 48 hours from now to complete this task."]}),g.jsxs("div",{id:"timer",style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a52)",color:"white",padding:"20px",borderRadius:"15px",textAlign:"center",margin:"20px 0",fontSize:"1.5em",fontWeight:"bold"},children:["Time Remaining: ",g.jsx("span",{id:"countdown",children:y(o)})]}),g.jsxs("div",{className:"excerpt-container",children:[g.jsx("h4",{children:"Chapter Excerpt (2,500 words - Sample)"}),g.jsx("p",{children:g.jsx("em",{children:"Read the full chapter and provide detailed feedback using the form below..."})}),g.jsx("div",{style:{height:"350px",overflowY:"auto",background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",padding:"20px",border:"1px solid #d4c5a9",fontStyle:"italic",lineHeight:"1.8",color:"#3c2415"},children:"[Full chapter content would be provided here - this is a placeholder showing the format. The actual implementation would include the complete text with line numbers for reference. Each paragraph would be numbered for easy reference in feedback.]"})]}),g.jsxs("form",{onSubmit:w,children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:g.jsx("strong",{children:"Overall Assessment (200-300 words):"})}),g.jsx("textarea",{id:"overall_assessment",className:"form-control",name:"overall_assessment",placeholder:"Provide a comprehensive overview focusing on the top 3 issues that need attention...",required:!0,style:{minHeight:"150px"}}),g.jsx("div",{className:"word-count",id:"assessmentWordCount",children:"0/300 words"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:g.jsx("strong",{children:"Inline Comments (minimum 8):"})}),g.jsx("div",{id:"inline-comments",children:Array.from({length:s}).map((E,T)=>g.jsxs("div",{className:"inline-comment",style:{background:"white",padding:"15px",borderRadius:"8px",marginBottom:"15px",borderLeft:"3px solid #667eea"},children:[g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"15px"},children:[g.jsxs("div",{children:[g.jsx("label",{children:"Line/Section Reference:"}),g.jsx("input",{type:"text",className:"form-control",name:`comment_ref_${T+1}`,placeholder:"e.g., Line 45, Paragraph 3"})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Issue Type:"}),g.jsxs("select",{className:"form-control",name:`comment_type_${T+1}`,children:[g.jsx("option",{value:"",children:"Select type"}),g.jsx("option",{value:"clarity",children:"Clarity"}),g.jsx("option",{value:"pacing",children:"Pacing"}),g.jsx("option",{value:"continuity",children:"Continuity"}),g.jsx("option",{value:"voice",children:"Voice"}),g.jsx("option",{value:"logic",children:"Logic"}),g.jsx("option",{value:"worldbuilding",children:"Worldbuilding"}),g.jsx("option",{value:"stakes",children:"Stakes/Tension"})]})]})]}),g.jsxs("div",{style:{marginTop:"10px"},children:[g.jsx("label",{children:"Comment & Suggestion:"}),g.jsx("textarea",{className:"form-control",name:`comment_text_${T+1}`,placeholder:"Describe the issue and provide a specific suggestion for improvement..."})]}),T>0&&g.jsx("button",{type:"button",onClick:()=>i(R=>R-1),className:"btn btn-secondary",style:{marginTop:"10px",fontSize:"0.8em",padding:"8px 15px"},children:"Remove Comment"})]},T))}),g.jsx("button",{type:"button",onClick:_,className:"btn btn-secondary",style:{marginTop:"15px"},children:"Add Another Comment"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:g.jsx("strong",{children:"Chapter Summary & Recommendations:"})}),g.jsx("textarea",{className:"form-control",name:"chapter_summary",placeholder:"Summarize your overall thoughts and provide 3 key recommendations for improvement...",required:!0,style:{minHeight:"120px"}})]}),g.jsxs("div",{className:"navigation",children:[g.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Stage 3"}),g.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Final Stage"})]})]})]})}),e===5&&g.jsx("div",{id:"admin",className:"stage-content",children:g.jsxs("div",{className:"admin-panel",children:[g.jsx("h3",{className:"section-title",children:"Admin Panel - Beta Reader Applications"}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[g.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[g.jsx("h4",{children:"Total Applications"}),g.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#8b4513"},children:"127"})]}),g.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[g.jsx("h4",{children:"Passed Stage 1"}),g.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#228b22"},children:"89"})]}),g.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[g.jsx("h4",{children:"Final Selections"}),g.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#8b4513"},children:"37"})]}),g.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[g.jsx("h4",{children:"Waitlist"}),g.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#b8860b"},children:"15"})]})]}),g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Report generated!"),children:"Generate Final Report"}),g.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Data exported!"),children:"Export Data"}),g.jsx("button",{className:"btn btn-secondary",onClick:()=>{window.confirm("Send selection emails to all applicants? This cannot be undone.")&&alert("Emails sent!")},children:"Send Selection Emails"})]}),g.jsxs("div",{className:"applicant-list",id:"applicantList",children:[g.jsxs("div",{className:"applicant-card",children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Sarah Chen"}),g.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"sarah.chen @email.com | GMT+8"})]}),g.jsx("span",{className:"status-badge status-passed",children:"Selected"})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 1:"})," 87/100"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 2:"})," 52/60"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 3:"})," 34/40"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 4:"})," 55/60"]})]}),g.jsxs("div",{style:{background:"rgba(139, 69, 19, 0.1)",padding:"10px",borderLeft:"3px solid #8b4513"},children:[g.jsx("strong",{children:"Composite Score: 92.1"})," | Strengths: Genre expertise, reliable communication, mobile testing"]})]}),g.jsxs("div",{className:"applicant-card",children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Marcus Rodriguez"}),g.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"m.rodriguez @email.com | EST"})]}),g.jsx("span",{className:"status-badge status-pending",children:"Waitlist"})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 1:"})," 79/100"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 2:"})," 48/60"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 3:"})," 31/40"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 4:"})," 48/60"]})]}),g.jsxs("div",{style:{background:"rgba(218, 165, 32, 0.1)",padding:"10px",borderLeft:"3px solid #daa520"},children:[g.jsx("strong",{children:"Composite Score: 83.7"})," | Strengths: Military background, Persian cultural knowledge"]})]}),g.jsxs("div",{className:"applicant-card",children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Jennifer Walsh"}),g.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"jen.walsh @email.com | GMT"})]}),g.jsx("span",{className:"status-badge status-failed",children:"Not Selected"})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 1:"})," 71/100"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 2:"})," 33/60"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 3:"})," —"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 4:"})," —"]})]}),g.jsxs("div",{style:{background:"rgba(220, 20, 60, 0.1)",padding:"10px",borderLeft:"3px solid #dc143c"},children:[g.jsx("strong",{children:"Composite Score: 45.2"})," | Issues: Failed Stage 2 comprehension, generic feedback"]})]})]})]})}),"            ",e===6&&g.jsxs("div",{className:"score-display",children:["                    ",g.jsx("h2",{style:{marginBottom:"20px"},children:"Application Complete!"}),"                    ",g.jsxs("div",{className:"score-breakdown",children:["                        ",g.jsxs("div",{className:"score-item",children:["                            ",g.jsx("h4",{children:"Stage 1"}),"                            ",g.jsxs("p",{children:[((j=r.stage1)==null?void 0:j.rawScore)||0,"/100"]}),"                        "]}),"                        ",g.jsxs("div",{className:"score-item",children:["                            ",g.jsx("h4",{children:"Stage 2"}),"                            ",g.jsxs("p",{children:[((k=r.stage2)==null?void 0:k.rawScore)||0,"/60"]}),"                        "]}),"                        ",g.jsxs("div",{className:"score-item",children:["                            ",g.jsx("h4",{children:"Stage 3"}),"                            ",g.jsxs("p",{children:[((S=r.stage3)==null?void 0:S.rawScore)||0,"/40"]}),"                        "]}),"                        ",g.jsxs("div",{className:"score-item",children:["                            ",g.jsx("h4",{children:"Stage 4"}),"                            ",g.jsxs("p",{children:[((C=r.stage4)==null?void 0:C.rawScore)||0,"/60"]}),"                        "]}),"                    "]}),"                    ",g.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.3)"},children:["                        ",g.jsxs("h3",{children:["Final Composite Score: ",r.compositeScore||0,"/100"]}),"                        ",g.jsx("p",{style:{marginTop:"15px"},children:"Thank you for your application! We\\'ll be in touch within 1-2 weeks with our decision."}),"                    "]}),"                    ","                    ",g.jsxs("div",{className:"submitted-data",style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.3)"},children:["                        ",g.jsx("h3",{children:"Submitted Application Data for Review"}),"                        ","                        ",r.stage1&&g.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",g.jsx("h4",{children:"Stage 1: Application Form"}),"                                ",Object.entries(r.stage1).map(([E,T])=>g.jsxs("p",{children:[g.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                        ","                        ",r.stage2&&g.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",g.jsx("h4",{children:"Stage 2: Comprehension Test"}),"                                ",Object.entries(r.stage2).map(([E,T])=>g.jsxs("p",{children:[g.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                        ","                        ",r.stage3&&g.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",g.jsx("h4",{children:"Stage 3: Calibration Test"}),"                                ",Object.entries(r.stage3).map(([E,T])=>g.jsxs("p",{children:[g.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                        ","                        ",r.stage4&&g.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",g.jsx("h4",{children:"Stage 4: Timed Trial Task"}),"                                ",Object.entries(r.stage4).map(([E,T])=>g.jsxs("p",{children:[g.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                    "]}),"                "]})]})};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IUe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aK=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DUe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LUe=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>v.createElement("svg",{ref:l,...DUe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:aK("lucide",s),...a},[...o.map(([c,u])=>v.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(LUe,{ref:i,iconNode:t,className:aK(`lucide-${IUe(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=Bt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Bt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=Bt("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MUe=Bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zUe=Bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FUe=Bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ue=Bt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=Bt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=Bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UUe=Bt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=Bt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=Bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qUe=Bt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BUe=Bt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VUe=Bt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WUe=Bt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HUe=Bt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=Bt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KUe=Bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=Bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZUe=Bt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=Bt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=Bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GUe=Bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),YUe=({product:e,onCheckoutProduct:t})=>{const r=o=>{switch(o){case"single_issue":return"Single Issue";case"bundle":return"Bundle";case"chapter_pass":return"Chapter Pass";case"arc_pass":return"Arc Pass";default:return o}},n=o=>{switch(o){case"single_issue":return"bg-accent/20 text-accent";case"bundle":return"bg-secondary/20 text-secondary";case"chapter_pass":return"bg-primary/20 text-primary";case"arc_pass":return"bg-gradient-to-r from-primary/20 to-secondary/20 text-primary";default:return"bg-text-dark/20 text-text-dark"}},s=()=>{t&&e.prices&&e.prices.length>0&&t(e,e.prices[0])},i=o=>o?`$${(o.unit_amount/100).toFixed(2)}${o.interval?`/${o.interval}`:""}`:"Free";return g.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-2xl p-6 border border-border/30 hover:border-secondary/50 transition-all duration-300 group",children:[g.jsxs("div",{className:"relative w-full h-48 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-xl mb-4 overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx(VA,{className:"w-16 h-16 text-secondary/50"})}),g.jsx("div",{className:`absolute top-3 left-3 px-3 py-1 rounded-full text-xs font-medium ${n(e.product_type)}`,children:r(e.product_type)})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("h3",{className:"text-xl font-heading text-text-light group-hover:text-secondary transition-colors",children:e.name}),e.description&&g.jsx("p",{className:"text-text-dark text-sm line-clamp-2",children:e.description}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"space-y-1",children:e.prices&&e.prices.length>0?e.prices.map((o,a)=>g.jsx("div",{className:"text-lg font-semibold text-text-light",children:i(o)},a)):g.jsx("div",{className:"text-lg font-semibold text-accent",children:"Free"})}),g.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(5)].map((o,a)=>g.jsx(dK,{className:"w-4 h-4 text-secondary/30"},a)),g.jsx("span",{className:"text-text-dark text-sm ml-1",children:"(0)"})]})]}),g.jsxs("div",{className:"flex space-x-2 pt-2",children:[g.jsxs("button",{onClick:s,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-secondary hover:bg-secondary-dark text-background rounded-xl transition-colors",children:[g.jsx(ZUe,{className:"w-4 h-4"}),g.jsx("span",{children:"Purchase"})]}),g.jsx("button",{className:"px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-xl transition-colors",children:g.jsx(cK,{className:"w-4 h-4"})})]})]})]})},JUe=({product:e,onSuccess:t,onCancel:r})=>{const[n,s]=v.useState(!1),[i,o]=v.useState(null),[a,l]=v.useState(""),[c,u]=v.useState(""),[h,f]=v.useState(""),[p,y]=v.useState(""),[m,b]=v.useState(""),x=()=>`$${(e.price/100).toFixed(2)}`,w=async _=>{_.preventDefault(),s(!0),o(null);try{await new Promise(j=>setTimeout(j,2e3)),console.log("Processing payment for:",e),t()}catch{o("Payment failed. Please try again.")}finally{s(!1)}};return g.jsxs("div",{className:"bg-background rounded-2xl p-6 border border-border/30",children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h3",{className:"text-2xl font-heading text-text-light",children:"Checkout"}),g.jsx("button",{onClick:r,className:"p-2 hover:bg-background-light/50 rounded-lg transition-colors",children:g.jsx(GUe,{className:"w-5 h-5 text-text-dark"})})]}),g.jsx("div",{className:"bg-background-light/30 rounded-xl p-4 mb-6 border border-border/20",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-lg font-medium text-text-light",children:e.name}),g.jsxs("p",{className:"text-text-dark text-sm",children:[e.is_subscription?"Subscription":"One-time purchase",e.interval&&` • Billed ${e.interval}ly`,e.trial_period_days&&` • ${e.trial_period_days} day trial`]})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("div",{className:"text-xl font-semibold text-secondary",children:[x(),e.interval&&g.jsxs("span",{className:"text-sm",children:["/",e.interval]})]}),e.trial_period_days&&g.jsx("div",{className:"text-xs text-accent",children:"Free trial included"})]})]})}),i&&g.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 mb-6 flex items-center space-x-3",children:[g.jsx($Ue,{className:"w-5 h-5 text-red-400"}),g.jsx("p",{className:"text-red-400",children:i})]}),g.jsxs("form",{onSubmit:w,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Email Address"}),g.jsx("input",{type:"email",value:a,onChange:_=>l(_.target.value),required:!0,className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"your.email@example.com"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Cardholder Name"}),g.jsx("input",{type:"text",value:m,onChange:_=>b(_.target.value),required:!0,className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"John Doe"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Card Number"}),g.jsx("input",{type:"text",value:c,onChange:_=>u(_.target.value),required:!0,maxLength:19,className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"1234 5678 9012 3456"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Expiry Date"}),g.jsx("input",{type:"text",value:h,onChange:_=>f(_.target.value),required:!0,placeholder:"MM/YY",maxLength:5,className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"CVC"}),g.jsx("input",{type:"text",value:p,onChange:_=>y(_.target.value),required:!0,maxLength:4,placeholder:"123",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all"})]})]}),g.jsx("button",{type:"submit",disabled:n,className:"w-full flex items-center justify-center space-x-3 px-6 py-4 bg-secondary hover:bg-secondary-dark disabled:bg-text-dark/20 disabled:text-text-dark text-background rounded-xl transition-all font-medium mt-6",children:n?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-5 h-5 border-2 border-background/30 border-t-background rounded-full animate-spin"}),g.jsx("span",{children:"Processing..."})]}):g.jsxs(g.Fragment,{children:[g.jsx(UUe,{className:"w-5 h-5"}),g.jsx("span",{children:e.trial_period_days?"Start Free Trial":`Pay ${x()}`})]})}),g.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-4 text-text-dark text-sm",children:[g.jsx(US,{className:"w-4 h-4 text-accent"}),g.jsx("span",{children:"Secure payment powered by Stripe"})]})]}),g.jsx("div",{className:"mt-6 pt-4 border-t border-border/20",children:g.jsxs("p",{className:"text-xs text-text-dark text-center",children:["By completing this purchase, you agree to our"," ",g.jsx("a",{href:"/terms",className:"text-secondary hover:underline",children:"Terms of Service"})," ","and"," ",g.jsx("a",{href:"/privacy",className:"text-secondary hover:underline",children:"Privacy Policy"}),".",e.is_subscription&&g.jsx("span",{children:" Your subscription will auto-renew unless cancelled."})]})})]})},XUe=()=>{const[e,t]=v.useState([]),[r,n]=v.useState([]),[s,i]=v.useState(""),[o,a]=v.useState("all"),[l,c]=v.useState("all"),[u,h]=v.useState([0,50]),[f,p]=v.useState("grid"),[y,m]=v.useState("newest"),[b,x]=v.useState(!1),[w,_]=v.useState(!1),[j,k]=v.useState(null),[S,C]=v.useState(null),E=v.useRef(null);v.useEffect(()=>{(async()=>{try{const L=await fetch("/api/products");if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const B=await L.json();t(B.products)}catch(L){console.error("Error fetching products:",L)}})()},[]),v.useEffect(()=>{let D=e.filter(L=>{const B=L.name.toLowerCase().includes(s.toLowerCase())||L.description&&L.description.toLowerCase().includes(s.toLowerCase()),q=o==="all"||o==="bundles"&&L.product_type==="bundle"||o==="subscriptions"&&(L.product_type==="chapter_pass"||L.product_type==="arc_pass")||o==="single"&&L.product_type==="single_issue",K=l==="all",H=L.prices&&L.prices.length>0?L.prices[0].unit_amount/100:0,$=H>=u[0]&&H<=u[1];return B&&q&&K&&$});D.sort((L,B)=>{switch(y){case"newest":return new Date(B.created_at).getTime()-new Date(L.created_at).getTime();case"oldest":return new Date(L.created_at).getTime()-new Date(B.created_at).getTime();case"price-low":const q=L.prices&&L.prices.length>0?L.prices[0].unit_amount:0,K=B.prices&&B.prices.length>0?B.prices[0].unit_amount:0;return q-K;case"price-high":const H=L.prices&&L.prices.length>0?L.prices[0].unit_amount:0;return(B.prices&&B.prices.length>0?B.prices[0].unit_amount:0)-H;case"title":return L.name.localeCompare(B.name);default:return 0}}),n(D)},[e,s,o,l,u,y]);const T=(D,L)=>{k(D),C(L),_(!0),setTimeout(()=>{var B;(B=E.current)==null||B.scrollIntoView({behavior:"smooth"})},100)},R=()=>{console.log("Checkout successful"),_(!1),k(null),C(null)},O=()=>{_(!1),k(null),C(null)},I=[{id:"all",name:"All Products",count:e.length},{id:"single",name:"Single Issues",count:e.filter(D=>D.product_type==="single_issue").length},{id:"bundles",name:"Bundles",count:e.filter(D=>D.product_type==="bundle").length},{id:"subscriptions",name:"Subscriptions",count:e.filter(D=>D.product_type==="chapter_pass"||D.product_type==="arc_pass").length}],P=[{id:"all",name:"All Formats",count:e.length}];return g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background",children:[g.jsxs("div",{className:"relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-secondary/20"}),g.jsxs("div",{className:"relative z-10 container mx-auto px-4 py-16 text-center",children:[g.jsxs("h1",{className:"text-5xl md:text-6xl font-heading text-text-light mb-6",children:[g.jsx("span",{className:"text-secondary",children:"Zoroasterverse"})," Store"]}),g.jsx("p",{className:"text-xl text-text-light/80 max-w-3xl mx-auto leading-relaxed",children:"Discover epic tales of magic, technology, and cosmic adventure. From single volumes to complete collections, your journey awaits."}),g.jsx("div",{className:"mt-8 flex justify-center",children:g.jsxs("div",{className:"flex items-center space-x-4 text-text-light/60",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(VA,{className:"w-5 h-5 text-secondary"}),g.jsx("span",{children:"Premium Content"})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(cK,{className:"w-5 h-5 text-accent"}),g.jsx("span",{children:"Multiple Formats"})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(dK,{className:"w-5 h-5 text-secondary"}),g.jsx("span",{children:"Exclusive Bundles"})]})]})})]})]}),g.jsxs("div",{className:"container mx-auto px-4 pb-16",children:[g.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-border/30",children:[g.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center",children:[g.jsxs("div",{className:"flex-1 relative",children:[g.jsx(lM,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-dark w-5 h-5"}),g.jsx("input",{type:"text",placeholder:"Search for books, series, or authors...",value:s,onChange:D=>i(D.target.value),className:"w-full pl-10 pr-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all"})]}),g.jsxs("div",{className:"flex items-center space-x-2 bg-background/50 rounded-xl p-1 border border-border/30",children:[g.jsx("button",{onClick:()=>p("grid"),className:`p-2 rounded-lg transition-all ${f==="grid"?"bg-secondary text-background":"text-text-light hover:text-secondary"}`,children:g.jsx(BUe,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded-lg transition-all ${f==="list"?"bg-secondary text-background":"text-text-light hover:text-secondary"}`,children:g.jsx(WUe,{className:"w-5 h-5"})})]}),g.jsxs("select",{value:y,onChange:D=>m(D.target.value),className:"px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",children:[g.jsx("option",{value:"newest",children:"Newest First"}),g.jsx("option",{value:"oldest",children:"Oldest First"}),g.jsx("option",{value:"price-low",children:"Price: Low to High"}),g.jsx("option",{value:"price-high",children:"Price: High to Low"}),g.jsx("option",{value:"title",children:"Alphabetical"})]}),g.jsxs("button",{onClick:()=>x(!b),className:"px-4 py-3 bg-primary/20 hover:bg-primary/30 border border-primary/30 rounded-xl text-text-light transition-all flex items-center space-x-2",children:[g.jsx(qUe,{className:"w-5 h-5"}),g.jsx("span",{children:"Filters"}),b?g.jsx(FUe,{className:"w-4 h-4"}):g.jsx(MUe,{className:"w-4 h-4"})]})]}),b&&g.jsx("div",{className:"mt-6 pt-6 border-t border-border/30",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-light mb-3",children:"Categories"}),g.jsx("div",{className:"space-y-2",children:I.map(D=>g.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"category",value:D.id,checked:o===D.id,onChange:L=>a(L.target.value),className:"text-secondary focus:ring-secondary"}),g.jsx("span",{className:"text-text-light",children:D.name}),g.jsxs("span",{className:"text-text-dark text-sm",children:["(",D.count,")"]})]},D.id))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-light mb-3",children:"Formats"}),g.jsx("div",{className:"space-y-2",children:P.map(D=>g.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"format",value:D.id,checked:l===D.id,onChange:L=>c(L.target.value),className:"text-secondary focus:ring-secondary"}),g.jsx("span",{className:"text-text-light",children:D.name}),g.jsxs("span",{className:"text-text-dark text-sm",children:["(",D.count,")"]})]},D.id))})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-text-light mb-3",children:["Price Range: $",u[0]," - $",u[1]]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("input",{type:"range",min:"0",max:"50",value:u[1],onChange:D=>h([u[0],parseInt(D.target.value)]),className:"w-full h-2 bg-background/50 rounded-lg appearance-none cursor-pointer slider"}),g.jsxs("div",{className:"flex justify-between text-sm text-text-dark",children:[g.jsx("span",{children:"$0"}),g.jsxs("span",{children:["$",u[1]]})]})]})]})]})})]}),g.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[g.jsxs("p",{className:"text-text-light",children:["Showing ",g.jsx("span",{className:"text-secondary font-medium",children:r.length})," of"," ",g.jsx("span",{className:"text-text-light",children:e.length})," products"]}),s&&g.jsx("button",{onClick:()=>i(""),className:"text-text-dark hover:text-text-light transition-colors",children:"Clear search"})]}),r.length>0?g.jsx("div",{className:f==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:r.map(D=>g.jsx("div",{className:f==="list"?"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30":"",children:g.jsx(YUe,{product:D,onCheckoutProduct:T})},D.id))}):g.jsxs("div",{className:"text-center py-16",children:[g.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-background-light/30 rounded-full flex items-center justify-center",children:g.jsx(lM,{className:"w-12 h-12 text-text-dark"})}),g.jsx("h3",{className:"text-2xl font-heading text-text-light mb-2",children:"No products found"}),g.jsx("p",{className:"text-text-dark mb-6",children:"Try adjusting your search terms or filters to find what you're looking for."}),g.jsx("button",{onClick:()=>{i(""),a("all"),c("all"),h([0,50])},className:"px-6 py-3 bg-secondary text-background rounded-xl hover:bg-secondary-dark transition-colors",children:"Clear all filters"})]}),w&&j&&S&&g.jsxs("div",{ref:E,className:"mt-16 p-8 bg-background-light/30 backdrop-blur-sm rounded-2xl border border-border/30 shadow-xl",children:[g.jsx("h2",{className:"text-3xl font-heading text-text-light mb-6 text-center",children:"Complete Your Purchase"}),g.jsx("div",{className:"max-w-md mx-auto",children:g.jsx(JUe,{product:{id:j.id,name:j.name,price:S.unit_amount,currency:S.currency,interval:S.interval,trial_period_days:S.trial_days,is_subscription:j.product_type==="chapter_pass"||j.product_type==="arc_pass"},onSuccess:R,onCancel:O})})]})]})]})},QUe=async e=>{const{data:t,error:r}=await le.from("posts").select("*").eq("slug",e).eq("status","published").single();if(r&&r.code!=="PGRST116")throw new Error(r.message);return t},eqe=()=>{const{slug:e}=nu(),{data:t,isLoading:r,isError:n,error:s}=It({queryKey:["blogPost",e],queryFn:()=>e?QUe(e):Promise.resolve(null),enabled:!!e});if(r)return g.jsx("div",{className:"text-center py-8 text-gray-300",children:"Loading post..."});if(n)return g.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading post: ",s==null?void 0:s.message]});if(!t)return g.jsx("div",{className:"text-center py-8 text-gray-400",children:"Post not found or not published."});const i=t.content.length>150?t.content.substring(0,150)+"...":t.content;return g.jsx("div",{className:"container mx-auto px-4 py-8 max-w-3xl relative z-20",children:g.jsxs("article",{className:"blog-post relative overflow-hidden transition-transform duration-300 ease-in-out hover:translate-y-[-5px] hover:shadow-lg-custom",children:[g.jsx("div",{className:"absolute top-0 left-0 right-0 h-[3px] bg-gradient-to-r from-[#d4af37] via-[#b8860b] to-[#d4af37]"}),g.jsxs("div",{className:"post-meta flex justify-between items-center mb-8 pb-4 border-b border-gold-300-opacity flex-wrap gap-4",children:[g.jsx("span",{className:"post-date text-[#d4af37] font-semibold text-sm tracking-wider",children:new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),g.jsx("span",{className:"post-category bg-gradient-to-br from-[#d4af37] to-[#b8860b] text-[#1a1a2e] px-4 py-2 rounded-full text-xs font-semibold uppercase tracking-wider",children:"World Building"})]}),g.jsx("h1",{className:"post-title font-cinzel text-4xl text-[#f0f0f0] mb-6 leading-tight text-shadow-md",children:t.title}),g.jsx("div",{className:"post-excerpt text-lg text-[#c0c0c0] mb-8 italic border-l-4 border-[#d4af37] pl-6",dangerouslySetInnerHTML:{__html:i}}),g.jsx("div",{className:"post-content text-lg leading-relaxed text-[#e8e8e8] prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:t.content}}),g.jsxs("div",{className:"post-footer mt-12 pt-8 border-t border-gold-300-opacity flex justify-between items-center flex-wrap gap-4",children:[g.jsxs("div",{className:"post-tags flex gap-2 flex-wrap",children:[g.jsx("span",{className:"tag bg-gold-300-opacity-20 text-[#d4af37] px-3 py-1 rounded-full text-sm border border-gold-300-opacity-30 transition-all duration-300 hover:bg-gold-300-opacity-30 hover:scale-105",children:"#Magic"}),g.jsx("span",{className:"tag bg-gold-300-opacity-20 text-[#d4af37] px-3 py-1 rounded-full text-sm border border-gold-300-opacity-30 transition-all duration-300 hover:bg-gold-300-opacity-30 hover:scale-105",children:"#WorldBuilding"})]}),g.jsxs("div",{className:"social-share flex gap-4",children:[g.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"📱"}),g.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"📘"}),g.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"🔗"})]})]})]})})},tqe=async e=>{const{data:t,error:r}=await supabase.from("pages").select("*").eq("slug",e).eq("status","published").single();if(r&&r.code!=="PGRST116")throw new Error(r.message);return t},rqe=()=>{const{slug:e}=nu(),{data:t,isLoading:r,isError:n,error:s}=It({queryKey:["genericPage",e],queryFn:()=>e?tqe(e):Promise.resolve(null),enabled:!!e});return r?g.jsx("div",{className:"text-center py-8",children:"Loading page..."}):n?g.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading page: ",s==null?void 0:s.message]}):t?g.jsx("div",{className:"container mx-auto px-4 py-8",children:g.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[g.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:t.title}),g.jsx("div",{className:"prose lg:prose-lg max-w-none text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:t.content}})]})}):g.jsx("div",{className:"text-center py-8 text-gray-600",children:"Page not found or not published."})},nqe=({userId:e,isSubscribed:t,subscriptionTier:r="free",betaReaderStatus:n,subscriptionEndDate:s,booksRead:i,readingHours:o,currentlyReading:a,achievements:l,username:c,onSignOut:u})=>{const{data:h,isLoading:f,isError:p}=It({queryKey:["userActivities",e],queryFn:async()=>{const{data:j,error:k}=await le.from("user_activities").select("*").eq("user_id",e).order("timestamp",{ascending:!1}).limit(5);if(k)throw k;return j},enabled:!!e});if(f)return g.jsx("div",{className:"text-gray-100",children:"Loading activities..."});if(p)return g.jsx("div",{className:"text-red-400",children:"Error loading activities."});const y=[{label:"Books Read",value:i,icon:g.jsx(Pd,{size:20,className:"text-indigo-400"})},{label:"Reading Hours",value:`${o}h`,icon:g.jsx(qS,{size:20,className:"text-green-400"})},{label:"Currently Reading",value:a||"None",icon:g.jsx(lK,{size:20,className:"text-blue-400"})},{label:"Achievements",value:l,icon:g.jsx(BA,{size:20,className:"text-yellow-400"})}],m=s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,x=(j=>{switch(j){case"premium":return{name:"Premium",color:"bg-blue-500"};case"patron":return{name:"Patron",color:"bg-purple-500"};default:return{name:"Free",color:"bg-gray-500"}}})(r),_=(j=>{switch(j){case"approved":return{text:"Beta Reader",color:"bg-green-500",icon:g.jsx(US,{size:16})};case"pending":return{text:"Application Pending",color:"bg-yellow-500",icon:g.jsx(qS,{size:16})};case"rejected":return{text:"Application Rejected",color:"bg-red-500",icon:g.jsx(uK,{size:16})};default:return{text:"Not Applied",color:"bg-gray-500",icon:g.jsx(Fb,{size:16})}}})(n);return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Account Dashboard"}),g.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",c||"User"]})]}),g.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:[g.jsx(HUe,{size:16}),"Sign Out"]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Subscription Status"}),g.jsxs("div",{className:"flex items-center mt-2",children:[g.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${x.color}`}),g.jsxs("span",{className:"text-white",children:[x.name," Tier"]})]}),t&&s&&g.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Renews on ",m]})]}),g.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:g.jsx(VA,{size:24,className:"text-yellow-400"})})]}),!t&&g.jsx("button",{className:"mt-4 w-full py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium",children:"Upgrade Plan"})]}),g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Beta Reader Program"}),g.jsxs("div",{className:"flex items-center mt-2",children:[g.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${_.color}`}),g.jsx("span",{className:"text-white",children:_.text})]}),n==="not_applied"&&g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Apply to get early access to new content"}),n==="pending"&&g.jsx("p",{className:"text-sm text-yellow-400 mt-1",children:"We'll review your application soon"})]}),g.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:_.icon})]}),n==="approved"?g.jsxs(Rr,{to:"/beta/portal",className:"mt-4 w-full py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[g.jsx(Pd,{size:16}),"Go to Beta Portal"]}):g.jsx(Rr,{to:n==="not_applied"?"/beta/application":"/beta/status",className:"mt-4 w-full block text-center py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium",children:n==="not_applied"?"Apply Now":"View Application Status"})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:y.map((j,k)=>g.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-2xl font-bold text-white",children:j.value}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:j.label})]}),g.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:j.icon})]})},k))}),g.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl border border-gray-800 overflow-hidden",children:g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Recent Activity"}),g.jsx("div",{className:"space-y-4",children:h&&h.length>0?h.map(j=>g.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-800/50 rounded-lg transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[j.cover_image_url?g.jsx("img",{src:j.cover_image_url,alt:j.item_title,className:"w-12 h-12 object-cover rounded-lg"}):g.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${j.status==="completed"?"bg-green-600/20":"bg-indigo-600/20"}`,children:j.status==="completed"?g.jsx(US,{className:"w-6 h-6 text-green-400"}):g.jsx(Pd,{className:"w-6 h-6 text-indigo-400"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-white",children:j.item_title}),g.jsx("p",{className:"text-sm text-gray-400",children:j.status==="completed"?"Completed":"In Progress"})]})]}),j.status!=="completed"&&g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:g.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:`${j.progress/(j.total_progress||100)*100}%`}})}),g.jsx("button",{className:"text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:"Resume"})]})]},j.id)):g.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent activity"})})]})})]})},sqe=()=>{const[e,t]=v.useState({fullName:"",bio:"",location:"",website:""}),r=s=>{const{name:i,value:o}=s.target;t(a=>({...a,[i]:o}))},n=s=>{s.preventDefault(),console.log("Profile updated:",e)};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Profile Settings"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your personal information and account settings."})]}),g.jsxs("form",{onSubmit:n,className:"space-y-6",children:[g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center space-x-6",children:[g.jsxs("div",{className:"relative group",children:[g.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:g.jsx(Fb,{className:"w-12 h-12 text-gray-400"})}),g.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-primary rounded-full p-2 shadow-lg transform translate-y-1/3 group-hover:translate-y-0 transition-transform duration-200",children:g.jsxs("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:"Profile Photo"}),g.jsx("p",{className:"text-sm text-gray-400",children:"JPG, GIF or PNG. Max size of 2MB"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Full Name"}),g.jsx("input",{type:"text",id:"fullName",name:"fullName",value:e.fullName,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Enter your full name"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-300 mb-1",children:"Location"}),g.jsx("input",{type:"text",id:"location",name:"location",value:e.location,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Your location"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-300 mb-1",children:"Website"}),g.jsx("input",{type:"url",id:"website",name:"website",value:e.website,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"https://yourwebsite.com"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-300 mb-1",children:"Bio"}),g.jsx("textarea",{id:"bio",name:"bio",rows:4,value:e.bio,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Tell us about yourself..."})]})]})]}),g.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[g.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-600 rounded-lg text-white hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors duration-200 font-medium",children:"Save Changes"})]})]})]})},iqe=[{id:1,title:"The Gathas of Zarathushtra",author:"Zarathushtra",cover:"/covers/gathas.jpg",progress:75,lastRead:"2 days ago",totalPages:320,currentPage:240,category:"Religious Text"},{id:2,title:"The Denkard",author:"Various Authors",cover:"/covers/denkard.jpg",progress:30,lastRead:"1 week ago",totalPages:450,currentPage:135,category:"Religious Text"},{id:3,title:"Zoroastrianism: An Introduction",author:"Jenny Rose",cover:"/covers/zoroastrianism-intro.jpg",progress:100,lastRead:"3 weeks ago",totalPages:280,currentPage:280,category:"Non-Fiction"}],oqe=()=>{const[e,t]=v.useState("all"),r=iqe.filter(n=>e==="all"?!0:e==="reading"?n.progress<100:n.progress===100);return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reading History"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Track your reading progress and history."})]}),g.jsx("div",{className:"flex space-x-2 mb-6 p-1 bg-gray-800/50 rounded-lg",children:[{id:"all",label:"All Books"},{id:"reading",label:"Currently Reading"},{id:"completed",label:"Completed"}].map(n=>g.jsx("button",{onClick:()=>t(n.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===n.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:n.label},n.id))}),g.jsx("div",{className:"space-y-6",children:r.length>0?r.map(n=>g.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:g.jsx("div",{className:"p-6",children:g.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[g.jsx("div",{className:"w-full md:w-32 flex-shrink-0",children:g.jsx("div",{className:"aspect-[2/3] bg-gray-700 rounded-lg overflow-hidden",children:g.jsx("img",{src:n.cover,alt:n.title,className:"w-full h-full object-cover",onError:s=>{const i=s.target;i.src="https://via.placeholder.com/150x225?text=No+Cover"}})})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-semibold text-white",children:n.title}),g.jsx("p",{className:"text-gray-400",children:n.author})]}),g.jsx("span",{className:"px-3 py-1 text-xs bg-gray-700 text-gray-300 rounded-full",children:n.category})]}),g.jsxs("div",{className:"mt-4",children:[g.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[g.jsxs("span",{children:["Progress: ",n.progress,"%"]}),g.jsxs("span",{children:["Page ",n.currentPage," of ",n.totalPages]})]}),g.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:g.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${n.progress}%`}})})]})]}),g.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex items-center justify-between",children:[g.jsxs("span",{className:"text-sm text-gray-400",children:["Last read ",n.lastRead]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-primary/10 hover:bg-primary/20 rounded-lg transition-colors",children:n.progress<100?"Continue Reading":"Read Again"}),g.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})})})]})]})]})})]})})},n.id)):g.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[g.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:g.jsx(Pd,{className:"w-8 h-8 text-gray-500"})}),g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"No books found"}),g.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:e==="all"?"You haven't added any books to your library yet.":e==="reading"?"You don't have any books in progress.":"You haven't completed any books yet."}),g.jsx("button",{className:"mt-4 px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-lg transition-colors",children:"Browse Library"})]})})]})},yj=[{id:1,title:"First Steps",description:"Complete your first reading session",icon:"🏆",progress:100,unlocked:!0,date:"2023-10-15",rarity:"common"},{id:2,title:"Book Worm",description:"Read for 10 hours",icon:"📚",progress:75,unlocked:!1,date:null,rarity:"uncommon"},{id:3,title:"Zoroastrian Scholar",description:"Read all core Zoroastrian texts",icon:"📜",progress:30,unlocked:!1,date:null,rarity:"rare"},{id:4,title:"Daily Devotee",description:"Read for 7 days in a row",icon:"🔥",progress:42,unlocked:!1,date:null,rarity:"uncommon"},{id:5,title:"Knowledge Seeker",description:"Complete 50 reading sessions",icon:"🔍",progress:100,unlocked:!0,date:"2023-11-02",rarity:"rare"},{id:6,title:"Wisdom Keeper",description:"Achieve 100% completion on any text",icon:"🧠",progress:0,unlocked:!1,date:null,rarity:"epic"}],aqe=e=>{switch(e){case"common":return"bg-gray-500/20 border-gray-500";case"uncommon":return"bg-emerald-500/20 border-emerald-500";case"rare":return"bg-blue-500/20 border-blue-500";case"epic":return"bg-purple-500/20 border-purple-500";case"legendary":return"bg-amber-500/20 border-amber-500";default:return"bg-gray-500/20 border-gray-500"}},lqe=()=>{const[e,t]=v.useState("all"),r=yj.filter(o=>e==="all"?!0:e==="unlocked"?o.unlocked:!o.unlocked),n=yj.filter(o=>o.unlocked).length,s=yj.length,i=Math.round(n/s*100);return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Achievements"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Track your progress and unlock new milestones."})]}),g.jsx("div",{className:"bg-gray-800/50 rounded-xl p-6",children:g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:"Achievement Progress"}),g.jsxs("p",{className:"text-gray-400",children:[n," of ",s," achievements unlocked"]})]}),g.jsxs("div",{className:"w-full md:w-64",children:[g.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/70 rounded-full transition-all duration-1000",style:{width:`${i}%`}})}),g.jsxs("p",{className:"text-sm text-right text-gray-400 mt-1",children:[i,"% Complete"]})]})]})}),g.jsx("div",{className:"flex space-x-2 p-1 bg-gray-800/50 rounded-lg",children:[{id:"all",label:"All Achievements"},{id:"unlocked",label:"Unlocked"},{id:"locked",label:"Locked"}].map(o=>g.jsx("button",{onClick:()=>t(o.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===o.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:o.label},o.id))}),r.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(o=>g.jsxs("div",{className:`relative p-5 rounded-xl border-2 transition-all duration-200 ${o.unlocked?aqe(o.rarity):"bg-gray-800/30 border-gray-700 opacity-60"}`,children:[g.jsxs("div",{className:"flex items-start space-x-4",children:[g.jsx("div",{className:"flex-shrink-0 w-14 h-14 rounded-full bg-gray-700 flex items-center justify-center text-2xl",children:o.icon}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h3",{className:`text-lg font-semibold ${o.unlocked?"text-white":"text-gray-400"}`,children:o.title}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:o.description}),!o.unlocked&&g.jsxs("div",{className:"mt-2",children:[g.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:g.jsx("div",{className:"bg-primary h-1.5 rounded-full",style:{width:`${o.progress}%`}})}),g.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[o.progress,"% complete"]})]})]})]}),o.unlocked&&o.date&&g.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700",children:g.jsxs("p",{className:"text-xs text-gray-400",children:["Unlocked on ",new Date(o.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})}),o.unlocked&&g.jsx("div",{className:"absolute top-3 right-3",children:g.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]},o.id))}):g.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[g.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:g.jsx(BA,{className:"w-8 h-8 text-gray-500"})}),g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:e==="unlocked"?"You haven't unlocked any achievements yet":"No locked achievements found"}),g.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:e==="unlocked"?"Start reading and completing texts to unlock achievements!":"You've unlocked all available achievements! More coming soon."})]})]})},cqe=()=>{const[e,t]=v.useState({theme:"dark",fontSize:"medium",notifications:!0,emailNotifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,readingMode:"paginated",autoSave:!0,showProgress:!0,showWordCount:!0}),r=a=>{const{name:l,value:c,type:u}=a.target,h=a.target.checked;t(f=>({...f,[l]:u==="checkbox"?h:c}))},n=a=>{a.preventDefault(),console.log("Saving settings:",e)},s=()=>{window.confirm("Are you sure you want to reset all preferences to default?")&&t({theme:"dark",fontSize:"medium",notifications:!0,emailNotifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,readingMode:"paginated",autoSave:!0,showProgress:!0,showWordCount:!0})},i=({title:a,children:l})=>g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:a}),g.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-gray-700",children:l})]}),o=({label:a,description:l,children:c})=>g.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 py-3 border-b border-gray-700/50 last:border-0",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-sm font-medium text-white",children:a}),l&&g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:l})]}),g.jsx("div",{className:"sm:w-48",children:c})]});return g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Preferences"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Customize your experience on our platform."})]}),g.jsxs("form",{onSubmit:n,className:"space-y-8",children:[g.jsxs(i,{title:"Appearance",children:[g.jsx(o,{label:"Theme",description:"Choose between light and dark themes",children:g.jsxs("select",{name:"theme",value:e.theme,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[g.jsx("option",{value:"light",children:"Light"}),g.jsx("option",{value:"dark",children:"Dark"}),g.jsx("option",{value:"system",children:"System Default"})]})}),g.jsx(o,{label:"Font Size",description:"Adjust the text size across the application",children:g.jsxs("select",{name:"fontSize",value:e.fontSize,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[g.jsx("option",{value:"small",children:"Small"}),g.jsx("option",{value:"medium",children:"Medium"}),g.jsx("option",{value:"large",children:"Large"})]})})]}),g.jsxs(i,{title:"Notifications",children:[g.jsx(o,{label:"Enable Notifications",description:"Receive browser notifications",children:g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[g.jsx("input",{type:"checkbox",name:"notifications",id:"notifications",checked:e.notifications,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),g.jsx("label",{htmlFor:"notifications",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.notifications?"bg-primary":"bg-gray-600"}`})]})}),g.jsx(o,{label:"Email Notifications",description:"Receive notifications via email",children:g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[g.jsx("input",{type:"checkbox",name:"emailNotifications",id:"emailNotifications",checked:e.emailNotifications,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),g.jsx("label",{htmlFor:"emailNotifications",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.emailNotifications?"bg-primary":"bg-gray-600"}`})]})})]}),g.jsxs(i,{title:"Reading",children:[g.jsx(o,{label:"Reading Mode",description:"Choose how content is displayed",children:g.jsxs("select",{name:"readingMode",value:e.readingMode,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[g.jsx("option",{value:"paginated",children:"Paginated"}),g.jsx("option",{value:"scrolling",children:"Scrolling"})]})}),g.jsx(o,{label:"Auto-save Progress",description:"Automatically save your reading progress",children:g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[g.jsx("input",{type:"checkbox",name:"autoSave",id:"autoSave",checked:e.autoSave,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),g.jsx("label",{htmlFor:"autoSave",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.autoSave?"bg-primary":"bg-gray-600"}`})]})}),g.jsx(o,{label:"Show Reading Progress",description:"Display progress indicators while reading",children:g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[g.jsx("input",{type:"checkbox",name:"showProgress",id:"showProgress",checked:e.showProgress,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),g.jsx("label",{htmlFor:"showProgress",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.showProgress?"bg-primary":"bg-gray-600"}`})]})}),g.jsx(o,{label:"Show Word Count",description:"Display word count for texts",children:g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[g.jsx("input",{type:"checkbox",name:"showWordCount",id:"showWordCount",checked:e.showWordCount,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),g.jsx("label",{htmlFor:"showWordCount",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.showWordCount?"bg-primary":"bg-gray-600"}`})]})})]}),g.jsxs(i,{title:"Language & Region",children:[g.jsx(o,{label:"Language",description:"Select your preferred language",children:g.jsxs("select",{name:"language",value:e.language,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[g.jsx("option",{value:"en",children:"English"}),g.jsx("option",{value:"es",children:"Español"}),g.jsx("option",{value:"fr",children:"Français"}),g.jsx("option",{value:"de",children:"Deutsch"}),g.jsx("option",{value:"fa",children:"فارسی"}),g.jsx("option",{value:"gu",children:"ગુજરાતી"})]})}),g.jsx(o,{label:"Time Zone",description:"Set your local time zone",children:g.jsxs("select",{name:"timezone",value:e.timezone,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[g.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),g.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),g.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),g.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),g.jsx("option",{value:"Europe/London",children:"London (GMT)"}),g.jsx("option",{value:"Europe/Paris",children:"Paris (CET)"}),g.jsx("option",{value:"Asia/Tehran",children:"Tehran (IRST)"}),g.jsx("option",{value:"Asia/Kolkata",children:"Mumbai (IST)"})]})})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 pt-6 border-t border-gray-700",children:[g.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:"Reset to Defaults"}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium border border-gray-600 text-gray-300 hover:bg-gray-700/50 rounded-lg transition-colors",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-lg transition-colors",children:"Save Changes"})]})]})]}),g.jsx("style",{children:`
        .toggle-checkbox:checked {
          right: 0;
          border-color: #68D391;
        }
        .toggle-checkbox:checked + .toggle-label {
          background-color: #68D391;
        }
      `})]})},uqe=()=>{const[e,t]=v.useState("overview"),[r,n]=v.useState(""),[s,i]=v.useState(""),[o,a]=v.useState(""),[l,c]=v.useState(!1),[u,h]=v.useState([]),[f,p]=v.useState(!1),[y,m]=v.useState(!1),[b,x]=v.useState(""),[w,_]=v.useState(""),j=[{id:"1",device:"Windows 10, Chrome",location:"New York, US",ip:"192.168.1.1",lastActive:"2 hours ago",current:!0},{id:"2",device:"iPhone 13, Safari",location:"San Francisco, US",ip:"203.0.113.1",lastActive:"1 week ago",current:!1},{id:"3",device:"MacBook Pro, Safari",location:"London, UK",ip:"198.51.100.1",lastActive:"2 weeks ago",current:!1}],k=[{id:"1",type:"login",description:"Successful login from New York, US",device:"Windows 10, Chrome",ip:"192.168.1.1",timestamp:"2023-11-15T14:30:00Z",status:"success"},{id:"2",type:"password_change",description:"Password changed",device:"iPhone 13, Safari",ip:"203.0.113.1",timestamp:"2023-11-10T09:15:00Z",status:"info"},{id:"3",type:"failed_login",description:"Failed login attempt",device:"Unknown",ip:"198.51.100.1",timestamp:"2023-11-05T18:45:00Z",status:"warning"}],S=async O=>{if(O.preventDefault(),x(""),_(""),s!==o){x("New passwords do not match");return}if(s.length<8){x("Password must be at least 8 characters long");return}m(!0);try{await new Promise(I=>setTimeout(I,1e3)),_("Password changed successfully"),n(""),i(""),a("")}catch{x("Failed to change password. Please try again.")}finally{m(!1)}},C=async()=>{m(!0);try{await new Promise(I=>setTimeout(I,1e3)),c(!0);const O=Array.from({length:10},()=>Math.random().toString(36).substring(2,8).toUpperCase());h(O),p(!0),_("Two-factor authentication has been enabled")}catch{x("Failed to enable two-factor authentication")}finally{m(!1)}},E=async()=>{if(window.confirm("Are you sure you want to disable two-factor authentication? This will make your account less secure.")){m(!0);try{await new Promise(O=>setTimeout(O,1e3)),c(!1),h([]),_("Two-factor authentication has been disabled")}catch{x("Failed to disable two-factor authentication")}finally{m(!1)}}},T=async()=>{if(window.confirm("Are you sure you want to revoke this session?")){m(!0);try{await new Promise(O=>setTimeout(O,800)),_("Session has been revoked")}catch{x("Failed to revoke session")}finally{m(!1)}}},R=O=>new Date(O).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Security Settings"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your account security and privacy settings."})]}),g.jsx("div",{className:"flex space-x-2 p-1 bg-gray-800/50 rounded-lg",children:[{id:"overview",label:"Overview"},{id:"sessions",label:"Active Sessions"},{id:"activity",label:"Security Activity"}].map(O=>g.jsx("button",{onClick:()=>t(O.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===O.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:O.label},O.id))}),b&&g.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 text-red-300 rounded-lg",children:b}),w&&g.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/30 text-green-300 rounded-lg",children:w}),f&&g.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Save Your Backup Codes"}),g.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),g.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Save these backup codes in a safe place. You can use them to access your account if you lose access to your authenticator app."}),g.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:u.map((O,I)=>g.jsx("div",{className:"bg-gray-700/50 p-2 rounded text-center font-mono",children:O},I))}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"I've saved my codes"})})]})}),e==="overview"&&g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Change Password"}),g.jsxs("form",{onSubmit:S,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),g.jsx("input",{type:"password",id:"currentPassword",value:r,onChange:O=>n(O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),g.jsx("input",{type:"password",id:"newPassword",value:s,onChange:O=>i(O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),g.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:O=>a(O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),g.jsx("div",{className:"pt-2",children:g.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:y?"Updating...":"Update Password"})})]})]}),g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Two-Factor Authentication"}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l?"Two-factor authentication is currently enabled.":"Add an extra layer of security to your account."})]}),l?g.jsx("button",{onClick:E,disabled:y,className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors disabled:opacity-50",children:y?"Disabling...":"Disable 2FA"}):g.jsx("button",{onClick:C,disabled:y,className:"px-4 py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors disabled:opacity-50",children:y?"Enabling...":"Enable 2FA"})]}),l&&u.length>0&&g.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:g.jsx("button",{onClick:()=>p(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"View Backup Codes"})})]}),g.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-3",children:"Security Tips"}),g.jsxs("ul",{className:"space-y-3 text-sm text-blue-200",children:[g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"mr-2",children:"🔒"}),g.jsx("span",{children:"Use a strong, unique password that you don't use elsewhere."})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"mr-2",children:"🔑"}),g.jsx("span",{children:"Enable two-factor authentication for added security."})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"mr-2",children:"👀"}),g.jsx("span",{children:"Regularly review your active sessions and revoke any that look suspicious."})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"mr-2",children:"📧"}),g.jsx("span",{children:"Make sure your email account is secure, as it can be used to reset your password."})]})]})]})]}),e==="sessions"&&g.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Active Sessions"}),g.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"This is a list of devices that have logged into your account. Revoke any sessions that you don't recognize."}),g.jsx("div",{className:"space-y-4",children:j.map(O=>g.jsx("div",{className:`p-4 rounded-lg ${O.current?"bg-primary/10 border border-primary/30":"bg-gray-700/50"}`,children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"font-medium text-white",children:O.device}),O.current&&g.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-primary/20 text-primary rounded-full",children:"Current Session"})]}),g.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[O.location," • ",O.ip]}),g.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last active: ",O.lastActive]})]}),!O.current&&g.jsx("button",{onClick:T,disabled:y,className:"px-3 py-1 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors disabled:opacity-50",children:"Revoke"})]})},O.id))})]})}),e==="activity"&&g.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Security Activity"}),g.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Review recent security events related to your account."}),g.jsx("div",{className:"space-y-4",children:k.map(O=>g.jsx("div",{className:"p-4 bg-gray-700/30 rounded-lg",children:g.jsxs("div",{className:"flex items-start",children:[g.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${O.status==="success"?"bg-green-500":O.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),g.jsxs("div",{className:"ml-4 flex-1",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("h4",{className:"font-medium text-white",children:O.description}),g.jsx("span",{className:"text-xs text-gray-500",children:R(O.timestamp)})]}),g.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[O.device," • ",O.ip]})]})]})},O.id))}),g.jsx("div",{className:"mt-6 text-center",children:g.jsx("button",{className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"View All Activity"})})]})})]})},dqe=()=>g.jsxs("div",{className:"text-gray-100",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Admin Dashboard"}),g.jsx("p",{children:"Admin specific content and tools."})]}),hqe=()=>{var w;const e=uo(),t=Fs(),[r,n]=v.useState("overview"),{user:s,userProfile:i,isAdmin:o,isLoading:a,isAuthenticated:l}=jh(),[c,u]=v.useState({isSubscribed:!1,subscriptionTier:"free",betaReaderStatus:"not_applied",subscriptionEndDate:void 0,booksRead:0,readingHours:0,currentlyReading:"",achievements:0,username:"User"});v.useEffect(()=>{!a&&!l&&e("/login")},[a,l,e]),v.useEffect(()=>{const _=t.pathname.split("/").pop()||"overview";n(_==="account"?"overview":_)},[t]);const h=[{id:"overview",name:"Overview",icon:g.jsx(VUe,{size:18}),path:"/account"},{id:"profile",name:"Profile",icon:g.jsx(Fb,{size:18}),path:"/account/profile"},{id:"reading",name:"Reading",icon:g.jsx(Pd,{size:18}),path:"/account/reading"},{id:"achievements",name:"Achievements",icon:g.jsx(BA,{size:18}),path:"/account/achievements"},{id:"preferences",name:"Preferences",icon:g.jsx(KUe,{size:18}),path:"/account/preferences"},{id:"security",name:"Security",icon:g.jsx(uK,{size:18}),path:"/account/security"}],f=v.useMemo(()=>[...h],[]),{data:p,isLoading:y}=It({queryKey:["userStats",s==null?void 0:s.id],queryFn:()=>cJ(s.id),enabled:!!(s!=null&&s.id)}),{data:m,isLoading:b}=It({queryKey:["subscription",s==null?void 0:s.id],queryFn:()=>oJ(s.id),enabled:!!(s!=null&&s.id)});v.useEffect(()=>{i&&u(_=>{var j;return{..._,username:i.username||((j=s==null?void 0:s.email)==null?void 0:j.split("@")[0])||"User",betaReaderStatus:i.beta_reader_status||"not_applied"}}),p&&u(_=>({..._,booksRead:p.books_read||0,readingHours:p.reading_hours||0,currentlyReading:p.currently_reading||"",achievements:p.achievements||0})),m&&u(_=>({..._,isSubscribed:!0,subscriptionTier:m.plan_id,subscriptionEndDate:m.current_period_end}))},[s,i,p,m]);const x=async()=>{await le.auth.signOut(),e("/login")};return a||l&&(!i||y||b)?g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-background-darker flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),g.jsx("p",{className:"mt-4 text-gray-400",children:"Loading your profile..."})]})}):!l||!s?null:g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-background-darker text-text-light",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[g.jsxs("aside",{className:"w-full lg:w-64 flex-shrink-0",children:[g.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl overflow-hidden border border-gray-800",children:[g.jsxs("div",{className:"p-6 text-center border-b border-gray-800",children:[g.jsxs("div",{className:"relative inline-block",children:[g.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-4xl font-bold text-white",children:(w=s==null?void 0:s.email)==null?void 0:w.charAt(0).toUpperCase()}),g.jsx("button",{className:"absolute -bottom-1 -right-1 bg-primary w-8 h-8 rounded-full flex items-center justify-center text-white hover:bg-primary/90 transition-colors",children:g.jsx(Fb,{size:16})})]}),g.jsx("h2",{className:"mt-4 text-xl font-semibold text-white",children:(i==null?void 0:i.display_name)||(i==null?void 0:i.username)}),g.jsx("p",{className:"text-sm text-gray-400",children:o?"Admin":"Member"})]}),g.jsx("nav",{className:"p-2",children:g.jsx("ul",{className:"space-y-1",children:f.map(_=>g.jsx("li",{children:g.jsxs(md,{to:_.path,end:_.path==="/account",className:({isActive:j})=>`flex items-center justify-between px-4 py-3 rounded-lg transition-colors duration-200 ${j?"bg-primary/10 text-primary":"text-gray-300 hover:bg-gray-800/50 hover:text-white"}`,children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"mr-3",children:_.icon}),_.name]}),g.jsx(zUe,{size:16,className:"text-gray-500"})]})},_.id))})})]}),r==="overview"&&g.jsxs("div",{className:"mt-6 bg-background-light/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-4",children:"YOUR STATS"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-indigo-500/10 flex items-center justify-center text-indigo-400",children:g.jsx(Pd,{size:16})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Books Read"}),g.jsx("p",{className:"text-lg font-semibold text-white",children:c.booksRead})]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center text-green-400",children:g.jsx(qS,{size:16})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Reading Hours"}),g.jsxs("p",{className:"text-lg font-semibold text-white",children:[c.readingHours,"h"]})]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-400",children:g.jsx(lK,{size:16})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Currently Reading"}),g.jsx("p",{className:"text-lg font-semibold text-white",children:c.currentlyReading||"None"})]})]})]})]})]}),g.jsx("main",{className:"flex-1",children:g.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl border border-gray-800 overflow-hidden",children:g.jsxs("div",{className:"p-6",children:[g.jsxs(IM,{children:[g.jsx(Te,{path:"/",element:g.jsx(nqe,{userId:s.id,isSubscribed:c.isSubscribed,subscriptionTier:c.subscriptionTier,betaReaderStatus:c.betaReaderStatus,subscriptionEndDate:c.subscriptionEndDate,booksRead:c.booksRead,readingHours:c.readingHours,currentlyReading:c.currentlyReading,achievements:c.achievements,username:c.username,onSignOut:x})}),g.jsx(Te,{path:"profile",element:g.jsx(sqe,{})}),g.jsx(Te,{path:"reading",element:g.jsx(oqe,{})}),g.jsx(Te,{path:"achievements",element:g.jsx(lqe,{})}),g.jsx(Te,{path:"preferences",element:g.jsx(cqe,{})}),g.jsx(Te,{path:"security",element:g.jsx(uqe,{})}),o&&g.jsx(Te,{path:"admin/*",element:g.jsx(dqe,{})})]}),g.jsx(ZS,{})]})})})]})})})},fqe=()=>{const e=v.useRef(null),t=v.useRef({}),r=v.useRef({}),[n,s]=v.useState({fullName:"",preferredName:"",email:"",timezone:"",country:"",portfolioLinks:"",specialties:[],tools:[],availability:"",startDate:"",commitment:"",bestPieces:"",makingOfNotes:"",visualInfluences:"",worldVisualization:"",feedbackProcess:"",colorGrading:"",references:"",turnaround:"",revisionPolicy:"",revenueShareWilling:"",preferredTrack:"",taxConstraints:"",projectPortal:!1,ndaAcceptance:!1,originalityConfirm:!1,rightsConfirm:!1,signature:"",signatureDate:new Date().toISOString().split("T")[0]}),i=f=>{const{name:p,value:y,type:m,checked:b}=f.target;s(m==="checkbox"?x=>{const w=x[p]||[];return b?{...x,[p]:[...w,y]}:{...x,[p]:w.filter(_=>_!==y)}}:m==="radio"?x=>({...x,[p]:y}):x=>({...x,[p]:y}))},o=(f,p)=>{const y=f.target.files;s(m=>({...m,[p]:y})),a(f.target)},a=(f,p)=>{const y=f.closest(".file-upload");if(!y)return;const m=f.files?f.files.length:0,b=y.querySelector("p");b&&(m>0?(b.innerHTML=`${m} file(s) selected<br><small>Ready to upload</small>`,y.style.backgroundColor="#e8f5e8"):(b.innerHTML="Drop files here or click to browse<br><small>JPG/PNG, max 5MB per file</small>",y.style.backgroundColor="white"))},l=f=>{f.preventDefault(),f.currentTarget.style.backgroundColor="#f0f8ff"},c=f=>{f.preventDefault(),f.currentTarget.style.backgroundColor="white"},u=(f,p)=>{f.preventDefault(),f.currentTarget.style.backgroundColor="#e8f5e8";const y=f.dataTransfer.files;t.current[p]&&(t.current[p].files=y,s(m=>({...m,[p]:y})),a(t.current[p]))},h=f=>{f.preventDefault(),console.log("Application data:",n),alert("Thank you for your application! We'll review your submission and get back to you within 1-2 weeks.")};return v.useEffect(()=>{var p,y,m;const f=(p=document.getElementById("preferredTrack"))==null?void 0:p.closest(".form-group");f&&(n.revenueShareWilling==="yes"?(f.style.display="block",(y=document.getElementById("preferredTrack"))==null||y.setAttribute("required","required")):(f.style.display="none",(m=document.getElementById("preferredTrack"))==null||m.removeAttribute("required"),s(b=>({...b,preferredTrack:""}))))},[n.revenueShareWilling]),v.useEffect(()=>{Object.entries(r.current).forEach(([f,p])=>{var y;if(p){const m=parseInt(p.getAttribute("data-maxlength")||"1000");let b=p.nextElementSibling;(!b||!b.classList.contains("char-counter"))&&(b=document.createElement("small"),b.classList.add("char-counter"),b.style.display="block",b.style.textAlign="right",b.style.color="var(--muted-foreground)",b.style.marginTop="0.25rem",(y=p.parentNode)==null||y.insertBefore(b,p.nextSibling));const x=()=>{const w=p.value.length;b.textContent=`${w}/${m} characters`,w>m*.9?b.style.color="var(--destructive)":w>m*.7?b.style.color="var(--accent)":b.style.color="var(--muted-foreground)"};return p.addEventListener("input",x),x(),()=>{p.removeEventListener("input",x)}}})},[n]),v.useEffect(()=>{var b;const f=document.createElement("div");f.style.cssText=`
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--border); /* Using CSS variable */
            z-index: 1000;
            transition: all 0.3s ease;
        `;const p=document.createElement("div");p.style.cssText=`
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%); /* Using CSS variables */
            width: 0%;
            transition: width 0.3s ease;
        `,f.appendChild(p),document.body.prepend(f);const y=()=>{if(!e.current)return;const x=Array.from(e.current.querySelectorAll("[required]")),w=x.filter(k=>k.type==="checkbox"||k.type==="radio"?k.checked:k.value.trim()!=="").length,_=x.length,j=_>0?w/_*100:0;p.style.width=`${j}%`},m=(b=e.current)==null?void 0:b.querySelectorAll("input, select, textarea");return m==null||m.forEach(x=>{x.addEventListener("input",y),x.addEventListener("change",y)}),y(),()=>{f.remove(),m==null||m.forEach(x=>{x.removeEventListener("input",y),x.removeEventListener("change",y)})}},[]),g.jsxs("div",{className:"max-w-7xl mx-auto bg-card shadow-lg rounded-xl overflow-hidden my-8",children:[" ",g.jsxs("div",{className:"relative p-12 text-center text-white bg-gradient-to-br from-gray-800 to-gray-900 overflow-hidden",children:[" ",g.jsx("div",{className:"absolute inset-0",style:{background:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.08)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>') repeat`,opacity:.3}}),g.jsx("h1",{className:"text-4xl font-bold mb-2 relative z-10",children:"Artist Collaboration Program"})," ",g.jsx("p",{className:"text-lg opacity-90 relative z-10",children:"Shape the visual identity of the Zangar/Spandam Series"})," "]}),g.jsxs("div",{className:"p-12",children:[" ",g.jsxs("div",{className:"bg-background p-8 rounded-lg mb-12 border-l-4 border-primary",children:[" ",g.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Join Our Creative Vision"})," ",g.jsxs("p",{className:"text-lg mb-4",children:["We're seeking ",g.jsx("strong",{children:"1-2 talented artists"}),' to collaborate on bringing to life a world of cliffside megacities, sky-splitting space elevators, and civilizations locked in "soft war." This is a unique revenue-share collaboration opportunity where your creative vision helps shape an entire series.']})," ",g.jsx("p",{className:"text-lg mb-4",children:"No upfront payment required - you'll earn meaningful percentages of book revenue with transparent reporting and fair compensation structures designed to reward your contribution over time."})," "]}),g.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent text-white p-6 rounded-lg my-8",children:[" ",g.jsx("h3",{className:"text-2xl font-bold mb-4",children:"What We're Looking For"})," ",g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 my-8",children:[" ",g.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[" ",g.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Cover Art"})," ",g.jsx("p",{children:"Stunning key art that captures the epic scope and Persian/Zoroastrian-influenced aesthetic of our megastructures"})]}),g.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[g.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Interior Illustrations"}),g.jsx("p",{children:"6-12 atmospheric pieces that enhance key scenes and world-building moments"})]}),g.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[g.jsx("h4",{className:"text-xl font-semibold mb-2",children:"World Design"}),g.jsx("p",{children:"Clan sigils, glyphs, UI ornaments, and visual motifs that define our world's identity"})]}),g.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[g.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Marketing Assets"}),g.jsx("p",{children:"Website heroes, social banners, and promotional materials that drive engagement"})]})]})]}),g.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Fair Compensation Structure"}),g.jsx("p",{className:"text-lg mb-4",children:"Choose the track that works best for your situation:"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 my-8",children:[" ",g.jsxs("div",{className:"bg-card border-2 border-border rounded-lg p-6 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-xl hover:border-primary",children:[" ",g.jsx("h4",{className:"text-xl font-semibold text-primary mb-4",children:"Track A: Higher Percentage, Shorter Term"})," ",g.jsxs("ul",{className:"list-disc list-inside text-foreground",children:[g.jsxs("li",{children:[g.jsx("strong",{children:"Primary Cover:"})," 5% net revenue for 12 months (cap: $7,500)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Secondary/Marketing Art:"})," 2.5% for 12 months (cap: $3,500)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Interior Pack (6-12 images):"})," 1.5% for 12 months (cap: $2,000)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Motifs/UI Package:"})," 1.0% for 12 months (cap: $1,200)"]})]})]}),g.jsxs("div",{className:"bg-card border-2 border-border rounded-lg p-6 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-xl hover:border-primary",children:[g.jsx("h4",{className:"text-xl font-semibold text-primary mb-4",children:"Track B: Lower Percentage, Longer Term"}),g.jsxs("ul",{className:"list-disc list-inside text-foreground",children:[g.jsxs("li",{children:[g.jsx("strong",{children:"Primary Cover:"})," 3% net revenue for 24 months (cap: $7,500)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Secondary/Marketing Art:"})," 1.5% for 24 months (cap: $3,500)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Interior Pack:"})," 1.0% for 24 months (cap: $2,000)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Motifs/UI:"})," 0.75% for 24 months (cap: $1,200)"]})]})]})]}),g.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent text-white p-6 rounded-lg my-8",children:[" ",g.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Transparency & Trust"}),g.jsxs("p",{className:"mb-2",children:[g.jsx("strong",{children:"Quarterly financial statements"})," with itemized revenue calculations"]}),g.jsxs("p",{className:"mb-2",children:[g.jsx("strong",{children:"Payment within 30 days"})," of each quarter end"]}),g.jsxs("p",{className:"mb-2",children:[g.jsx("strong",{children:"Right to audit"})," statements once per year"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Milestone bonuses"})," if the book crosses $50,000 in net revenue"]})]}),g.jsxs("div",{className:"bg-background p-8 rounded-lg mt-12",children:[" ",g.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Application Form"}),g.jsxs("form",{ref:e,onSubmit:h,children:[g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[" ",g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Identity & Contact"]})," ",g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[" ",g.jsxs("div",{className:"mb-4",children:[" ",g.jsxs("label",{htmlFor:"fullName",className:"block mb-2 font-semibold text-muted-foreground",children:["Full Name",g.jsx("span",{className:"text-destructive",children:" *"})]})," ",g.jsx("input",{type:"text",id:"fullName",name:"fullName",required:!0,value:n.fullName,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})," "]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"preferredName",className:"block mb-2 font-semibold text-muted-foreground",children:"Preferred Name/Alias"}),g.jsx("input",{type:"text",id:"preferredName",name:"preferredName",value:n.preferredName,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"email",className:"block mb-2 font-semibold text-muted-foreground",children:["Email",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:n.email,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"timezone",className:"block mb-2 font-semibold text-muted-foreground",children:["Time Zone",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsxs("select",{id:"timezone",name:"timezone",required:!0,value:n.timezone,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[g.jsx("option",{value:"",children:"Select your timezone"}),g.jsx("option",{value:"UTC-12",children:"UTC-12 (Baker Island)"}),g.jsx("option",{value:"UTC-11",children:"UTC-11 (Hawaii)"}),g.jsx("option",{value:"UTC-10",children:"UTC-10 (Alaska)"}),g.jsx("option",{value:"UTC-9",children:"UTC-9 (Pacific)"}),g.jsx("option",{value:"UTC-8",children:"UTC-8 (Mountain)"}),g.jsx("option",{value:"UTC-7",children:"UTC-7 (Central)"}),g.jsx("option",{value:"UTC-6",children:"UTC-6 (Eastern)"}),g.jsx("option",{value:"UTC-5",children:"UTC-5 (Atlantic)"}),g.jsx("option",{value:"UTC+0",children:"UTC+0 (London)"}),g.jsx("option",{value:"UTC+1",children:"UTC+1 (Central Europe)"}),g.jsx("option",{value:"UTC+2",children:"UTC+2 (Eastern Europe)"}),g.jsx("option",{value:"UTC+8",children:"UTC+8 (China/Singapore)"}),g.jsx("option",{value:"UTC+9",children:"UTC+9 (Japan)"})]})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"country",className:"block mb-2 font-semibold text-muted-foreground",children:["Country",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"text",id:"country",name:"country",required:!0,value:n.country,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"portfolioLinks",className:"block mb-2 font-semibold text-muted-foreground",children:["Portfolio Links",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("textarea",{id:"portfolioLinks",name:"portfolioLinks",placeholder:"Please provide links to your portfolio (ArtStation, Behance, personal website, Instagram, etc.)",required:!0,value:n.portfolioLinks,onChange:i,ref:f=>{r.current.portfolioLinks=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Art Focus & Availability"]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block mb-2 font-semibold text-muted-foreground",children:"Primary Specialties (check all that apply)"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2",children:[" ",g.jsxs("div",{className:"flex items-center",children:[" ",g.jsx("input",{type:"checkbox",id:"coverIll",name:"specialties",value:"cover-illustration",onChange:i,checked:n.specialties.includes("cover-illustration"),className:"w-auto mr-2"})," ",g.jsx("label",{htmlFor:"coverIll",children:"Cover Illustration"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"charDesign",name:"specialties",value:"character-design",onChange:i,checked:n.specialties.includes("character-design"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"charDesign",children:"Character Design"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"environment",name:"specialties",value:"environment",onChange:i,checked:n.specialties.includes("environment"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"environment",children:"Environment Art"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"uiMotifs",name:"specialties",value:"ui-motifs",onChange:i,checked:n.specialties.includes("ui-motifs"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"uiMotifs",children:"UI/Sigil Design"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"typography",name:"specialties",value:"typography",onChange:i,checked:n.specialties.includes("typography"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"typography",children:"Typography"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"marketing",name:"specialties",value:"marketing",onChange:i,checked:n.specialties.includes("marketing"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"marketing",children:"Marketing Visuals"})]})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block mb-2 font-semibold text-muted-foreground",children:"Tools/Software (check all that apply)"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"photoshop",name:"tools",value:"photoshop",onChange:i,checked:n.tools.includes("photoshop"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"photoshop",children:"Photoshop"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"procreate",name:"tools",value:"procreate",onChange:i,checked:n.tools.includes("procreate"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"procreate",children:"Procreate"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"clipstudio",name:"tools",value:"clip-studio",onChange:i,checked:n.tools.includes("clip-studio"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"clipstudio",children:"Clip Studio"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"blender",name:"tools",value:"blender",onChange:i,checked:n.tools.includes("blender"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"blender",children:"Blender"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"illustrator",name:"tools",value:"illustrator",onChange:i,checked:n.tools.includes("illustrator"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"illustrator",children:"Illustrator"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"other",name:"tools",value:"other",onChange:i,checked:n.tools.includes("other"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"other",children:"Other"})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"availability",className:"block mb-2 font-semibold text-muted-foreground",children:["Weekly Availability",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsxs("select",{id:"availability",name:"availability",required:!0,value:n.availability,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[g.jsx("option",{value:"",children:"Select availability"}),g.jsx("option",{value:"10-15",children:"10-15 hours/week"}),g.jsx("option",{value:"15-25",children:"15-25 hours/week"}),g.jsx("option",{value:"25+",children:"25+ hours/week"}),g.jsx("option",{value:"project-sprints",children:"Project-only sprints"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"startDate",className:"block mb-2 font-semibold text-muted-foreground",children:["Earliest Start Date",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"date",id:"startDate",name:"startDate",required:!0,value:n.startDate,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"commitment",className:"block mb-2 font-semibold text-muted-foreground",children:"Time Commitment Window"}),g.jsx("input",{type:"text",id:"commitment",name:"commitment",placeholder:"e.g., 'I can commit for 3 months' or 'Available through Q2 2025'",value:n.commitment,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Portfolio & Samples"]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"portfolioUpload",className:"block mb-2 font-semibold text-muted-foreground",children:"Portfolio Upload (3-6 images, optional)"}),g.jsxs("div",{className:"file-upload border-2 border-dashed border-primary rounded-lg p-8 text-center bg-card transition-colors duration-300 ease-in-out hover:bg-blue-50",onDragOver:l,onDragLeave:c,onDrop:f=>u(f,"portfolioUpload"),children:[" ",g.jsx("input",{type:"file",id:"portfolioUpload",name:"portfolioUpload",multiple:!0,accept:"image/*",onChange:f=>o(f,"portfolioUpload"),ref:f=>{t.current.portfolioUpload=f},className:"hidden"})," ",g.jsxs("p",{className:"text-muted-foreground",children:["Drop files here or ",g.jsx("span",{className:"text-primary cursor-pointer",onClick:()=>{var f;return(f=t.current.portfolioUpload)==null?void 0:f.click()},children:"click to browse"}),g.jsx("br",{}),g.jsx("small",{children:"JPG/PNG, max 5MB per file"})]})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"bestPieces",className:"block mb-2 font-semibold text-muted-foreground",children:["Direct Links to 3-5 Best Pieces",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("textarea",{id:"bestPieces",name:"bestPieces",placeholder:"Please provide direct links to your best work that showcases your style and skill",required:!0,value:n.bestPieces,onChange:i,ref:f=>{r.current.bestPieces=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"customSample",className:"block mb-2 font-semibold text-muted-foreground",children:"Custom Sample for This Project (optional)"}),g.jsxs("div",{className:"file-upload border-2 border-dashed border-primary rounded-lg p-8 text-center bg-card transition-colors duration-300 ease-in-out hover:bg-blue-50",children:[g.jsx("input",{type:"file",id:"customSample",name:"customSample",accept:"image/*",onChange:f=>o(f,"customSample"),ref:f=>{t.current.customSample=f},className:"hidden"}),g.jsxs("p",{className:"text-muted-foreground",children:["Upload a custom piece based on our world concept",g.jsx("br",{}),g.jsx("small",{children:"Not required but highly encouraged"})]})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"makingOfNotes",className:"block mb-2 font-semibold text-muted-foreground",children:"Brief Making-of Notes (optional)"}),g.jsx("textarea",{id:"makingOfNotes",name:"makingOfNotes",placeholder:"Describe your approach, tools, or references used (50-150 words)",value:n.makingOfNotes,onChange:i,ref:f=>{r.current.makingOfNotes=f},"data-maxlength":"150",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Style & Fit Questions"]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"visualInfluences",className:"block mb-2 font-semibold text-muted-foreground",children:["Visual Influences for This Project",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("textarea",{id:"visualInfluences",name:"visualInfluences",placeholder:"What visual influences, artists, or styles do you think overlap with this Persian/Zoroastrian-influenced sci-fi world? (100-200 words)",required:!0,value:n.visualInfluences,onChange:i,ref:f=>{r.current.visualInfluences=f},"data-maxlength":"200",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"worldVisualization",className:"block mb-2 font-semibold text-muted-foreground",children:["World Visualization",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("textarea",{id:"worldVisualization",name:"worldVisualization",placeholder:"Describe how you'd visualize: cliffside megacity Vənāsō, space elevator, 'soft war' sky, oath-bound warrior (Hooran) (150-250 words)",required:!0,value:n.worldVisualization,onChange:i,ref:f=>{r.current.worldVisualization=f},"data-maxlength":"250",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"feedbackProcess",className:"block mb-2 font-semibold text-muted-foreground",children:["Feedback & Revision Process",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("textarea",{id:"feedbackProcess",name:"feedbackProcess",placeholder:"How do you handle feedback and revisions? What's your typical process? (100-200 words)",required:!0,value:n.feedbackProcess,onChange:i,ref:f=>{r.current.feedbackProcess=f},"data-maxlength":"200",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"colorGrading",className:"block mb-2 font-semibold text-muted-foreground",children:"Preferred Color Grading"}),g.jsx("input",{type:"text",id:"colorGrading",name:"colorGrading",placeholder:"e.g., 'Cool teals/slates with warm amber accents' or 'Muted earth tones with electric blues'",value:n.colorGrading,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Process & Reliability"]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"references",className:"block mb-2 font-semibold text-muted-foreground",children:"Past Client References or Shipped Work"}),g.jsx("textarea",{id:"references",name:"references",placeholder:"Links to published work, client testimonials, or references (optional)",value:n.references,onChange:i,ref:f=>{r.current.references=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"turnaround",className:"block mb-2 font-semibold text-muted-foreground",children:["Typical Turnaround for Single Finished Piece",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsxs("select",{id:"turnaround",name:"turnaround",required:!0,value:n.turnaround,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[g.jsx("option",{value:"",children:"Select timeframe"}),g.jsx("option",{value:"3-5-days",children:"3-5 days"}),g.jsx("option",{value:"1-2-weeks",children:"1-2 weeks"}),g.jsx("option",{value:"2-4-weeks",children:"2-4 weeks"}),g.jsx("option",{value:">4-weeks",children:"More than 4 weeks"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"revisionPolicy",className:"block mb-2 font-semibold text-muted-foreground",children:["Revision Policy",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"text",id:"revisionPolicy",name:"revisionPolicy",placeholder:"e.g., '2 rounds of revisions included, additional rounds at hourly rate'",required:!0,value:n.revisionPolicy,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Compensation Preferences"]}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"radio",name:"revenueShareWilling",value:"yes",required:!0,onChange:i,checked:n.revenueShareWilling==="yes",className:"w-auto mr-2"}),"Yes, I'm willing to work for revenue share until sales begin"]})}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"radio",name:"revenueShareWilling",value:"no",required:!0,onChange:i,checked:n.revenueShareWilling==="no",className:"w-auto mr-2"}),"No, I prefer upfront payment"]})}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"preferredTrack",className:"block mb-2 font-semibold text-muted-foreground",children:"If yes to revenue share, preferred track:"}),g.jsxs("select",{id:"preferredTrack",name:"preferredTrack",value:n.preferredTrack,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[g.jsx("option",{value:"",children:"Select preferred track"}),g.jsx("option",{value:"track-a",children:"Track A: Higher percentage, 12 months"}),g.jsx("option",{value:"track-b",children:"Track B: Lower percentage, 24 months"}),g.jsx("option",{value:"flexible",children:"Flexible/Open to discussion"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"taxConstraints",className:"block mb-2 font-semibold text-muted-foreground",children:"Tax or Invoicing Constraints"}),g.jsx("input",{type:"text",id:"taxConstraints",name:"taxConstraints",placeholder:"Any specific requirements for your country/region? (optional)",value:n.taxConstraints,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Legal & Agreements"]}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"checkbox",name:"projectPortal",required:!0,onChange:i,checked:n.projectPortal,className:"w-auto mr-2"}),"I consent to using the project portal/workflow system"]})}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"checkbox",name:"ndaAcceptance",required:!0,onChange:i,checked:n.ndaAcceptance,className:"w-auto mr-2"}),"I accept NDA/Confidentiality requirements"]})}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"checkbox",name:"originalityConfirm",required:!0,onChange:i,checked:n.originalityConfirm,className:"w-auto mr-2"}),"I confirm originality of my work and ability to grant licensing rights"]})}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"checkbox",name:"rightsConfirm",required:!0,onChange:i,checked:n.rightsConfirm,className:"w-auto mr-2"}),"I confirm my ability to grant project-specific rights as outlined"]})}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"signature",className:"block mb-2 font-semibold text-muted-foreground",children:["Digital Signature",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"text",id:"signature",name:"signature",placeholder:"Type your full name",required:!0,value:n.signature,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"signatureDate",className:"block mb-2 font-semibold text-muted-foreground",children:["Date",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"date",id:"signatureDate",name:"signatureDate",required:!0,value:n.signatureDate,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]})]}),g.jsx("button",{type:"submit",className:"w-full py-4 px-8 bg-gradient-to-br from-primary to-accent text-white font-semibold text-lg rounded-lg border-none cursor-pointer transition-all duration-300 ease-in-out mt-8 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-primary/50",children:"Apply to Collaborate"})," "]})]})]})]})},cM={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:3001/api",VITE_APP_DESCRIPTION:"Epic fantasy eBooks and subscriptions",VITE_APP_NAME:"Zoroasterverse",VITE_APP_VERSION:"1.0.0",VITE_BACKEND_URL:"http://localhost:3001",VITE_DEBUG:"true",VITE_ENABLE_ANALYTICS:"true",VITE_ENABLE_FILE_PREVIEWS:"true",VITE_ENABLE_STRIPE:"true",VITE_ENABLE_SUBSCRIPTIONS:"true",VITE_GOOGLE_ANALYTICS_ID:"your_ga_id_here",VITE_LOG_LEVEL:"debug",VITE_SENTRY_DSN:"your_sentry_dsn_here",VITE_STRIPE_PUBLISHABLE_KEY:"pk_live_51RxGqHQv3TvmaocsigmbkzARDylf5d34zCKW0INXPNSvz9XPZKWcgSavRvi5TarLZSBNyZR7ROgsMQxSDd0AOdl200sNB27qOy",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s",VITE_SUPABASE_URL:"https://opukvvmumyegtkukqint.supabase.co"},pqe=()=>{const e="pk_live_51RxGqHQv3TvmaocsigmbkzARDylf5d34zCKW0INXPNSvz9XPZKWcgSavRvi5TarLZSBNyZR7ROgsMQxSDd0AOdl200sNB27qOy";console.log("🔑 Stripe key loaded:",e),console.log("🔑 Environment variables:",cM);const t=`Found: ${e.substring(0,20)}...`,r=e!=null&&e.startsWith("pk_test_")?"Test Key":e!=null&&e.startsWith("pk_live_")?"Live Key":"Unknown";return g.jsx("div",{style:{minHeight:"100vh",padding:"20px",fontFamily:"Arial, sans-serif"},children:g.jsxs("div",{style:{maxWidth:"500px",margin:"0 auto",border:"1px solid #ccc",borderRadius:"8px",padding:"20px"},children:[g.jsx("h1",{style:{fontSize:"24px",marginBottom:"20px"},children:"Stripe Configuration Test"}),g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("strong",{children:"Stripe Key Status:"}),g.jsx("div",{style:{padding:"10px",margin:"5px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#d4edda",color:"#155724"},children:t})]}),g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("strong",{children:"Key Type:"}),g.jsx("div",{style:{padding:"10px",margin:"5px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#d1ecf1"},children:r})]}),g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("strong",{children:"Environment Variables:"}),g.jsx("div",{style:{padding:"10px",margin:"5px 0",border:"1px solid #ddd",borderRadius:"4px",fontSize:"12px"},children:JSON.stringify(cM,null,2)})]}),g.jsx("button",{onClick:()=>window.location.href="/subscriptions",style:{width:"100%",padding:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Go to Subscriptions Page"})]})})},mqe=()=>{const[e,t]=de.useState(null),r=nu();return de.useEffect(()=>{r.pageSlug&&m6(r.pageSlug).then(t)},[r.pageSlug]),g.jsxs(iJ,{children:[g.jsx(sUe,{}),g.jsxs(IM,{children:[g.jsx(Te,{path:"/login",element:g.jsx(Hoe,{})}),g.jsxs(Te,{element:g.jsx(Jae,{}),children:[g.jsx(Te,{path:"/",element:g.jsx(Nle,{})}),g.jsx(Te,{path:"/store",element:g.jsx(XUe,{})}),g.jsx(Te,{path:"/checkout",element:g.jsx(X0e,{})}),g.jsx(Te,{path:"/library",element:g.jsx(Sye,{})}),g.jsx(Te,{path:"/subscriptions",element:g.jsx(M0e,{})}),g.jsx(Te,{path:"/subscription-success",element:g.jsx(z0e,{})}),g.jsx(Te,{path:"/stripe-test",element:g.jsx(pqe,{})}),g.jsxs(Te,{path:"/wiki",children:[g.jsx(Te,{index:!0,element:e?g.jsx(b_,{page:e}):g.jsx("div",{children:"Loading..."})}),g.jsx(Te,{path:":folderSlug",element:e?g.jsx(b_,{page:e}):g.jsx("div",{children:"Loading..."})}),g.jsx(Te,{path:":folderSlug/:pageSlug",element:e?g.jsx(b_,{page:e}):g.jsx("div",{children:"Loading..."})})]}),g.jsx(Te,{path:"/timelines",element:g.jsx(PUe,{})}),g.jsx(Te,{path:"/characters",element:g.jsx(q0e,{})}),g.jsx(Te,{path:"/locations",element:g.jsx(B0e,{})}),g.jsx(Te,{path:"/glossary",element:g.jsx(V0e,{})}),g.jsx(Te,{path:"/reviews",element:g.jsx(W0e,{})}),g.jsx(Te,{path:"/account/*",element:g.jsx(hqe,{})}),g.jsx(Te,{path:"/blog",element:g.jsx(K0e,{})}),g.jsx(Te,{path:"/blog/:slug",element:g.jsx(eqe,{})}),g.jsx(Te,{path:"/beta/application",element:g.jsx(oM,{children:g.jsx(RUe,{})})}),g.jsx(Te,{path:"/artist-collaboration",element:g.jsx(fqe,{})}),g.jsx(Te,{path:"/read/:workId",element:g.jsx(J0e,{})}),g.jsx(Te,{path:"/beta/status",element:g.jsx(Y0e,{})}),g.jsx(Te,{path:"/beta/handbook",element:g.jsx(gj,{})}),g.jsx(Te,{path:"/beta/timeline",element:g.jsx(sM,{})}),g.jsx(Te,{path:"/beta/nda",element:g.jsx(gj,{})}),g.jsx(Te,{path:"/beta/feedback",element:g.jsx(gj,{})}),g.jsx(Te,{path:"/beta/portal",element:g.jsx(oM,{children:g.jsx(G0e,{})})}),g.jsx(Te,{path:"/:slug",element:g.jsx(rqe,{})}),g.jsx(Te,{path:"*",element:g.jsx(Z0e,{})})]}),g.jsxs(Te,{path:"/account/admin",element:g.jsx(Eae,{children:g.jsx(Sae,{})}),children:[g.jsx(Te,{index:!0,element:g.jsx(x3e,{})}),g.jsx(Te,{path:"homepage-content",element:g.jsx(wDe,{})}),g.jsx(Te,{path:"posts",element:g.jsx(wFe,{})}),g.jsx(Te,{path:"pages",element:g.jsx(B8e,{})}),g.jsx(Te,{path:"characters",element:g.jsx(G8e,{})}),g.jsx(Te,{path:"works",element:g.jsx(tUe,{})}),g.jsx(Te,{path:"upload-work",element:g.jsx(rUe,{})}),g.jsx(Te,{path:"upload-chapter",element:g.jsx(aUe,{})}),g.jsx(Te,{path:"users",element:g.jsx(nUe,{})}),g.jsx(Te,{path:"beta-applications",element:g.jsx(yUe,{})}),g.jsx(Te,{path:"wiki",element:g.jsx(nM,{})}),g.jsx(Te,{path:"wiki/folder/:folderId",element:g.jsx(nM,{})}),g.jsx(Te,{path:"wiki/new",element:g.jsx($S,{})}),g.jsx(Te,{path:"wiki/edit/:id",element:g.jsx($S,{})}),g.jsx(Te,{path:"timeline/events",element:g.jsx(sM,{})}),g.jsx(Te,{path:"store",element:g.jsx(xye,{})}),g.jsx(Te,{path:"library",element:g.jsx("div",{children:"Library Management Coming Soon!"})}),g.jsx(Te,{path:"characters",element:g.jsx("div",{children:"Characters Management Coming Soon!"})}),g.jsx(Te,{path:"beta-program",element:g.jsx("div",{children:"Beta Program Management Coming Soon!"})}),g.jsx(Te,{path:"media",element:g.jsx("div",{children:"Media Management Coming Soon!"})}),g.jsx(Te,{path:"settings",element:g.jsx("div",{children:"Settings Coming Soon!"})})]})]})]})},gqe=new xre;vj.createRoot(document.getElementById("root")).render(g.jsxs(de.StrictMode,{children:[g.jsxs(RZ,{children:[" ",g.jsx(Nre,{client:gqe,children:g.jsx(rJ,{supabaseClient:oK,children:g.jsx(mqe,{})})})]})," "]}));export{Vf as B,Bf as F,fi as G,L$ as K,qf as L,I$ as V,D$ as W,Hu as _,ct as a,nye as b,Iy as h,js as m,ic as t,d as u,Wf as z};
