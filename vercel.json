{
  "version": 2,
  "builds": [
    {
      "src": "apps/frontend/package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    },
    {
      "src": "apps/backend/package.json",
      "use": "@vercel/node",
      "config": {
        "excludeFiles": [
          "node_modules/**",
          "dist/**",
          "apps/frontend/**",
          "packages/**",
          "**/*.test.js",
          "**/*.spec.js",
          "**/__tests__/**",
          "**/test/**",
          "**/tests/**",
          "**/tmp/**",
          "**/temp/**",
          "**/cache/**",
          "**/logs/**",
          "**/*.log",
          "**/*.md",
          "**/*.txt",
          "**/*.map",
          "**/*.tsbuildinfo"
        ]
      }
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "apps/backend/server.js"
    },
    { "src": "/(.*)", "dest": "/apps/frontend/dist/index.html" }
  ],
  
  "installCommand": "pnpm install",
  "regions": ["iad1"],
  "env": {
    "NODE_VERSION": "18.17.1",
    "NPM_CONFIG_LEGACY_PEER_DEPS": "true"
  }
}
