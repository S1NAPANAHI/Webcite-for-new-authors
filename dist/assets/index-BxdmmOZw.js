var Yn=t=>{throw TypeError(t)};var Is=(t,e,r)=>e.has(t)||Yn("Cannot "+r);var S=(t,e,r)=>(Is(t,e,"read from private field"),r?r.call(t):e.get(t)),H=(t,e,r)=>e.has(t)?Yn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),B=(t,e,r,s)=>(Is(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),pe=(t,e,r)=>(Is(t,e,"access private method"),r);var qr=(t,e,r,s)=>({set _(n){B(t,e,n,r)},get _(){return S(t,e,s)}});import{r as f,a as Ja,g as Qa,c as Ee,R as Hs}from"./react-B6114-rA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var mi={exports:{}},bs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xa=f,el=Symbol.for("react.element"),tl=Symbol.for("react.fragment"),rl=Object.prototype.hasOwnProperty,sl=Xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nl={key:!0,ref:!0,__self:!0,__source:!0};function pi(t,e,r){var s,n={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)rl.call(e,s)&&!nl.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:el,type:t,key:i,ref:a,props:n,_owner:sl.current}}bs.Fragment=tl;bs.jsx=pi;bs.jsxs=pi;mi.exports=bs;var o=mi.exports,Vs={},Hn=Ja;Vs.createRoot=Hn.createRoot,Vs.hydrateRoot=Hn.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Vn="popstate";function ol(t={}){function e(s,n){let{pathname:i,search:a,hash:l}=s.location;return Gs("",{pathname:i,search:a,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:Nr(n)}return al(e,r,null,t)}function te(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Le(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function il(){return Math.random().toString(36).substring(2,10)}function Gn(t,e){return{usr:t.state,key:t.key,idx:e}}function Gs(t,e,r=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?or(e):e,state:r,key:e&&e.key||s||il()}}function Nr({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function or(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function al(t,e,r,s={}){let{window:n=document.defaultView,v5Compat:i=!1}=s,a=n.history,l="POP",c=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function h(){l="POP";let y=d(),w=y==null?null:y-u;u=y,c&&c({action:l,location:x.location,delta:w})}function m(y,w){l="PUSH";let N=Gs(x.location,y,w);u=d()+1;let v=Gn(N,u),_=x.createHref(N);try{a.pushState(v,"",_)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;n.location.assign(_)}i&&c&&c({action:l,location:x.location,delta:1})}function p(y,w){l="REPLACE";let N=Gs(x.location,y,w);u=d();let v=Gn(N,u),_=x.createHref(N);a.replaceState(v,"",_),i&&c&&c({action:l,location:x.location,delta:0})}function g(y){return ll(y)}let x={get action(){return l},get location(){return t(n,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Vn,h),c=y,()=>{n.removeEventListener(Vn,h),c=null}},createHref(y){return e(n,y)},createURL:g,encodeLocation(y){let w=g(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(y){return a.go(y)}};return x}function ll(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),te(r,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Nr(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function gi(t,e,r="/"){return cl(t,e,r,!1)}function cl(t,e,r,s){let n=typeof e=="string"?or(e):e,i=Qe(n.pathname||"/",r);if(i==null)return null;let a=yi(t);ul(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=wl(i);l=vl(a[c],u,s)}return l}function yi(t,e=[],r=[],s="",n=!1){let i=(a,l,c=n,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(s)&&c)return;te(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length)}let h=Ke([s,d.relativePath]),m=r.concat(d);a.children&&a.children.length>0&&(te(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),yi(a.children,e,m,h,c)),!(a.path==null&&!a.index)&&e.push({path:h,score:yl(h,a.index),routesMeta:m})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,l);else for(let u of bi(a.path))i(a,l,!0,u)}),e}function bi(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let a=bi(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function ul(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:bl(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var dl=/^:[\w-]+$/,hl=3,fl=2,ml=1,pl=10,gl=-2,Kn=t=>t==="*";function yl(t,e){let r=t.split("/"),s=r.length;return r.some(Kn)&&(s+=gl),e&&(s+=fl),r.filter(n=>!Kn(n)).reduce((n,i)=>n+(dl.test(i)?hl:i===""?ml:pl),s)}function bl(t,e){return t.length===e.length&&t.slice(0,-1).every((s,n)=>s===e[n])?t[t.length-1]-e[e.length-1]:0}function vl(t,e,r=!1){let{routesMeta:s}=t,n={},i="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=ls({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!s[s.length-1].route.index&&(h=ls({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(n,h.params),a.push({params:n,pathname:Ke([i,h.pathname]),pathnameBase:Nl(Ke([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Ke([i,h.pathnameBase]))}return a}function ls(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=xl(t.path,t.caseSensitive,t.end),n=e.match(r);if(!n)return null;let i=n[0],a=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((u,{paramName:d,isOptional:h},m)=>{if(d==="*"){let g=l[m]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[m];return h&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function xl(t,e=!1,r=!0){Le(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function wl(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Le(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Qe(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function _l(t,e="/"){let{pathname:r,search:s="",hash:n=""}=typeof t=="string"?or(t):t;return{pathname:r?r.startsWith("/")?r:kl(r,e):e,search:Sl(s),hash:El(n)}}function kl(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function $s(t,e,r,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jl(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function pn(t){let e=jl(t);return e.map((r,s)=>s===e.length-1?r.pathname:r.pathnameBase)}function gn(t,e,r,s=!1){let n;typeof t=="string"?n=or(t):(n={...t},te(!n.pathname||!n.pathname.includes("?"),$s("?","pathname","search",n)),te(!n.pathname||!n.pathname.includes("#"),$s("#","pathname","hash",n)),te(!n.search||!n.search.includes("#"),$s("#","search","hash",n)));let i=t===""||n.pathname==="",a=i?"/":n.pathname,l;if(a==null)l=r;else{let h=e.length-1;if(!s&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;n.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=_l(n,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Ke=t=>t.join("/").replace(/\/\/+/g,"/"),Nl=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sl=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,El=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Cl(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var vi=["POST","PUT","PATCH","DELETE"];new Set(vi);var Tl=["GET",...vi];new Set(Tl);var ir=f.createContext(null);ir.displayName="DataRouter";var vs=f.createContext(null);vs.displayName="DataRouterState";f.createContext(!1);var xi=f.createContext({isTransitioning:!1});xi.displayName="ViewTransition";var Pl=f.createContext(new Map);Pl.displayName="Fetchers";var Al=f.createContext(null);Al.displayName="Await";var Me=f.createContext(null);Me.displayName="Navigation";var zr=f.createContext(null);zr.displayName="Location";var Ce=f.createContext({outlet:null,matches:[],isDataRoute:!1});Ce.displayName="Route";var yn=f.createContext(null);yn.displayName="RouteError";function Rl(t,{relative:e}={}){te(ar(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=f.useContext(Me),{hash:n,pathname:i,search:a}=Lr(t,{relative:e}),l=i;return r!=="/"&&(l=i==="/"?r:Ke([r,i])),s.createHref({pathname:l,search:a,hash:n})}function ar(){return f.useContext(zr)!=null}function Xe(){return te(ar(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(zr).location}var wi="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _i(t){f.useContext(Me).static||f.useLayoutEffect(t)}function xs(){let{isDataRoute:t}=f.useContext(Ce);return t?Vl():Il()}function Il(){te(ar(),"useNavigate() may be used only in the context of a <Router> component.");let t=f.useContext(ir),{basename:e,navigator:r}=f.useContext(Me),{matches:s}=f.useContext(Ce),{pathname:n}=Xe(),i=JSON.stringify(pn(s)),a=f.useRef(!1);return _i(()=>{a.current=!0}),f.useCallback((c,u={})=>{if(Le(a.current,wi),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=gn(c,JSON.parse(i),n,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ke([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,i,n,t])}var $l=f.createContext(null);function Ol(t){let e=f.useContext(Ce).outlet;return e&&f.createElement($l.Provider,{value:t},e)}function zl(){let{matches:t}=f.useContext(Ce),e=t[t.length-1];return e?e.params:{}}function Lr(t,{relative:e}={}){let{matches:r}=f.useContext(Ce),{pathname:s}=Xe(),n=JSON.stringify(pn(r));return f.useMemo(()=>gn(t,JSON.parse(n),s,e==="path"),[t,n,s,e])}function Ll(t,e){return ki(t,e)}function ki(t,e,r,s,n){var N;te(ar(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=f.useContext(Me),{matches:a}=f.useContext(Ce),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let v=h&&h.path||"";ji(u,!h||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let m=Xe(),p;if(e){let v=typeof e=="string"?or(e):e;te(d==="/"||((N=v.pathname)==null?void 0:N.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${v.pathname}" was given in the \`location\` prop.`),p=v}else p=m;let g=p.pathname||"/",x=g;if(d!=="/"){let v=d.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=gi(t,{pathname:x});Le(h||y!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Le(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=Bl(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:Ke([d,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:Ke([d,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,s,n);return e&&w?f.createElement(zr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},w):w}function Ml(){let t=Hl(),e=Cl(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=f.createElement(f.Fragment,null,f.createElement("p",null,"💿 Hey developer 👋"),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:i},"ErrorBoundary")," or"," ",f.createElement("code",{style:i},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),r?f.createElement("pre",{style:n},r):null,a)}var Dl=f.createElement(Ml,null),Fl=class extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?f.createElement(Ce.Provider,{value:this.props.routeContext},f.createElement(yn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ul({routeContext:t,match:e,children:r}){let s=f.useContext(ir);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),f.createElement(Ce.Provider,{value:t},r)}function Bl(t,e=[],r=null,s=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=r==null?void 0:r.errors;if(a!=null){let u=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);te(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(r)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:m}=r,p=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,h)=>{let m,p=!1,g=null,x=null;r&&(m=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||Dl,l&&(c<0&&h===0?(ji("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,x=null):c===h&&(p=!0,x=d.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,h+1)),w=()=>{let N;return m?N=g:p?N=x:d.route.Component?N=f.createElement(d.route.Component,null):d.route.element?N=d.route.element:N=u,f.createElement(Ul,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:r!=null},children:N})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?f.createElement(Fl,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0},unstable_onError:s}):w()},null)}function bn(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ql(t){let e=f.useContext(ir);return te(e,bn(t)),e}function Zl(t){let e=f.useContext(vs);return te(e,bn(t)),e}function Wl(t){let e=f.useContext(Ce);return te(e,bn(t)),e}function vn(t){let e=Wl(t),r=e.matches[e.matches.length-1];return te(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function Yl(){return vn("useRouteId")}function Hl(){var s;let t=f.useContext(yn),e=Zl("useRouteError"),r=vn("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[r]}function Vl(){let{router:t}=ql("useNavigate"),e=vn("useNavigate"),r=f.useRef(!1);return _i(()=>{r.current=!0}),f.useCallback(async(n,i={})=>{Le(r.current,wi),r.current&&(typeof n=="number"?t.navigate(n):await t.navigate(n,{fromRouteId:e,...i}))},[t,e])}var Jn={};function ji(t,e,r){!e&&!Jn[t]&&(Jn[t]=!0,Le(!1,r))}f.memo(Gl);function Gl({routes:t,future:e,state:r,unstable_onError:s}){return ki(t,void 0,r,s,e)}function Kl({to:t,replace:e,state:r,relative:s}){te(ar(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=f.useContext(Me);Le(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=f.useContext(Ce),{pathname:a}=Xe(),l=xs(),c=gn(t,pn(i),a,s==="path"),u=JSON.stringify(c);return f.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:s})},[l,u,s,e,r]),null}function Jl(t){return Ol(t.context)}function U(t){te(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ql({basename:t="/",children:e=null,location:r,navigationType:s="POP",navigator:n,static:i=!1}){te(!ar(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:n,static:i,future:{}}),[a,n,i]);typeof r=="string"&&(r=or(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:m="default"}=r,p=f.useMemo(()=>{let g=Qe(c,a);return g==null?null:{location:{pathname:g,search:u,hash:d,state:h,key:m},navigationType:s}},[a,c,u,d,h,m,s]);return Le(p!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:f.createElement(Me.Provider,{value:l},f.createElement(zr.Provider,{children:e,value:p}))}function Qn({children:t,location:e}){return Ll(Ks(t),e)}function Ks(t,e=[]){let r=[];return f.Children.forEach(t,(s,n)=>{if(!f.isValidElement(s))return;let i=[...e,n];if(s.type===f.Fragment){r.push.apply(r,Ks(s.props.children,i));return}te(s.type===U,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),te(!s.props.index||!s.props.children,"An index route cannot have child routes.");let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Ks(s.props.children,i)),r.push(a)}),r}var ss="get",ns="application/x-www-form-urlencoded";function ws(t){return t!=null&&typeof t.tagName=="string"}function Xl(t){return ws(t)&&t.tagName.toLowerCase()==="button"}function ec(t){return ws(t)&&t.tagName.toLowerCase()==="form"}function tc(t){return ws(t)&&t.tagName.toLowerCase()==="input"}function rc(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sc(t,e){return t.button===0&&(!e||e==="_self")&&!rc(t)}var Zr=null;function nc(){if(Zr===null)try{new FormData(document.createElement("form"),0),Zr=!1}catch{Zr=!0}return Zr}var oc=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Os(t){return t!=null&&!oc.has(t)?(Le(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ns}"`),null):t}function ic(t,e){let r,s,n,i,a;if(ec(t)){let l=t.getAttribute("action");s=l?Qe(l,e):null,r=t.getAttribute("method")||ss,n=Os(t.getAttribute("enctype"))||ns,i=new FormData(t)}else if(Xl(t)||tc(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(s=c?Qe(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||ss,n=Os(t.getAttribute("formenctype"))||Os(l.getAttribute("enctype"))||ns,i=new FormData(l,t),!nc()){let{name:u,type:d,value:h}=t;if(d==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,h)}}else{if(ws(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ss,s=null,n=ns,a=t}return i&&n==="text/plain"&&(a=i,i=void 0),{action:s,method:r.toLowerCase(),encType:n,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ac(t,e,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${r}`:e&&Qe(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function lc(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cc(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function uc(t,e,r){let s=await Promise.all(t.map(async n=>{let i=e.routes[n.route.id];if(i){let a=await lc(i,r);return a.links?a.links():[]}return[]}));return mc(s.flat(1).filter(cc).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function Xn(t,e,r,s,n,i){let a=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,u)=>a(c,u)||l(c,u)):i==="data"?e.filter((c,u)=>{var h;let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function dc(t,e,{includeHydrateFallback:r}={}){return hc(t.map(s=>{let n=e.routes[s.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function hc(t){return[...new Set(t)]}function fc(t){let e={},r=Object.keys(t).sort();for(let s of r)e[s]=t[s];return e}function mc(t,e){let r=new Set;return new Set(e),t.reduce((s,n)=>{let i=JSON.stringify(fc(n));return r.has(i)||(r.add(i),s.push({key:i,link:n})),s},[])}function Ni(){let t=f.useContext(ir);return xn(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function pc(){let t=f.useContext(vs);return xn(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var wn=f.createContext(void 0);wn.displayName="FrameworkContext";function Si(){let t=f.useContext(wn);return xn(t,"You must render this element inside a <HydratedRouter> element"),t}function gc(t,e){let r=f.useContext(wn),[s,n]=f.useState(!1),[i,a]=f.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=e,m=f.useRef(null);f.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let x=w=>{w.forEach(N=>{a(N.isIntersecting)})},y=new IntersectionObserver(x,{threshold:.5});return m.current&&y.observe(m.current),()=>{y.disconnect()}}},[t]),f.useEffect(()=>{if(s){let x=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(x)}}},[s]);let p=()=>{n(!0)},g=()=>{n(!1),a(!1)};return r?t!=="intent"?[i,m,{}]:[i,m,{onFocus:pr(l,p),onBlur:pr(c,g),onMouseEnter:pr(u,p),onMouseLeave:pr(d,g),onTouchStart:pr(h,p)}]:[!1,m,{}]}function pr(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function yc({page:t,...e}){let{router:r}=Ni(),s=f.useMemo(()=>gi(r.routes,t,r.basename),[r.routes,t,r.basename]);return s?f.createElement(vc,{page:t,matches:s,...e}):null}function bc(t){let{manifest:e,routeModules:r}=Si(),[s,n]=f.useState([]);return f.useEffect(()=>{let i=!1;return uc(t,e,r).then(a=>{i||n(a)}),()=>{i=!0}},[t,e,r]),s}function vc({page:t,matches:e,...r}){let s=Xe(),{manifest:n,routeModules:i}=Si(),{basename:a}=Ni(),{loaderData:l,matches:c}=pc(),u=f.useMemo(()=>Xn(t,e,c,n,s,"data"),[t,e,c,n,s]),d=f.useMemo(()=>Xn(t,e,c,n,s,"assets"),[t,e,c,n,s]),h=f.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let g=new Set,x=!1;if(e.forEach(w=>{var v;let N=n.routes[w.route.id];!N||!N.hasLoader||(!u.some(_=>_.route.id===w.route.id)&&w.route.id in l&&((v=i[w.route.id])!=null&&v.shouldRevalidate)||N.hasClientLoader?x=!0:g.add(w.route.id))}),g.size===0)return[];let y=ac(t,a,"data");return x&&g.size>0&&y.searchParams.set("_routes",e.filter(w=>g.has(w.route.id)).map(w=>w.route.id).join(",")),[y.pathname+y.search]},[a,l,s,n,u,e,t,i]),m=f.useMemo(()=>dc(d,n),[d,n]),p=bc(d);return f.createElement(f.Fragment,null,h.map(g=>f.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),m.map(g=>f.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),p.map(({key:g,link:x})=>f.createElement("link",{key:g,nonce:r.nonce,...x})))}function xc(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Ei=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ei&&(window.__reactRouterVersion="7.8.2")}catch{}function wc({basename:t,children:e,window:r}){let s=f.useRef();s.current==null&&(s.current=ol({window:r,v5Compat:!0}));let n=s.current,[i,a]=f.useState({action:n.action,location:n.location}),l=f.useCallback(c=>{f.startTransition(()=>a(c))},[a]);return f.useLayoutEffect(()=>n.listen(l),[n,l]),f.createElement(Ql,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:n})}var Ci=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lr=f.forwardRef(function({onClick:e,discover:r="render",prefetch:s="none",relative:n,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h,...m},p){let{basename:g}=f.useContext(Me),x=typeof u=="string"&&Ci.test(u),y,w=!1;if(typeof u=="string"&&x&&(y=u,Ei))try{let j=new URL(window.location.href),A=u.startsWith("//")?new URL(j.protocol+u):new URL(u),k=Qe(A.pathname,g);A.origin===j.origin&&k!=null?u=k+A.search+A.hash:w=!0}catch{Le(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=Rl(u,{relative:n}),[v,_,R]=gc(s,m),O=jc(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:n,viewTransition:h});function L(j){e&&e(j),j.defaultPrevented||O(j)}let $=f.createElement("a",{...m,...R,href:y||N,onClick:w||i?e:L,ref:xc(p,_),target:c,"data-discover":!x&&r==="render"?"true":void 0});return v&&!x?f.createElement(f.Fragment,null,$,f.createElement(yc,{page:N})):$});lr.displayName="Link";var wr=f.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:s="",end:n=!1,style:i,to:a,viewTransition:l,children:c,...u},d){let h=Lr(a,{relative:u.relative}),m=Xe(),p=f.useContext(vs),{navigator:g,basename:x}=f.useContext(Me),y=p!=null&&Tc(h)&&l===!0,w=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,N=m.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(N=N.toLowerCase(),v=v?v.toLowerCase():null,w=w.toLowerCase()),v&&x&&(v=Qe(v,x)||v);const _=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let R=N===w||!n&&N.startsWith(w)&&N.charAt(_)==="/",O=v!=null&&(v===w||!n&&v.startsWith(w)&&v.charAt(w.length)==="/"),L={isActive:R,isPending:O,isTransitioning:y},$=R?e:void 0,j;typeof s=="function"?j=s(L):j=[s,R?"active":null,O?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let A=typeof i=="function"?i(L):i;return f.createElement(lr,{...u,"aria-current":$,className:j,ref:d,style:A,to:a,viewTransition:l},typeof c=="function"?c(L):c)});wr.displayName="NavLink";var _c=f.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:s,replace:n,state:i,method:a=ss,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...m},p)=>{let g=Ec(),x=Cc(l,{relative:u}),y=a.toLowerCase()==="get"?"get":"post",w=typeof l=="string"&&Ci.test(l),N=v=>{if(c&&c(v),v.defaultPrevented)return;v.preventDefault();let _=v.nativeEvent.submitter,R=(_==null?void 0:_.getAttribute("formmethod"))||a;g(_||v.currentTarget,{fetcherKey:e,method:R,navigate:r,replace:n,state:i,relative:u,preventScrollReset:d,viewTransition:h})};return f.createElement("form",{ref:p,method:y,action:x,onSubmit:s?c:N,...m,"data-discover":!w&&t==="render"?"true":void 0})});_c.displayName="Form";function kc(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ti(t){let e=f.useContext(ir);return te(e,kc(t)),e}function jc(t,{target:e,replace:r,state:s,preventScrollReset:n,relative:i,viewTransition:a}={}){let l=xs(),c=Xe(),u=Lr(t,{relative:i});return f.useCallback(d=>{if(sc(d,e)){d.preventDefault();let h=r!==void 0?r:Nr(c)===Nr(u);l(t,{replace:h,state:s,preventScrollReset:n,relative:i,viewTransition:a})}},[c,l,u,r,s,e,t,n,i,a])}var Nc=0,Sc=()=>`__${String(++Nc)}__`;function Ec(){let{router:t}=Ti("useSubmit"),{basename:e}=f.useContext(Me),r=Yl();return f.useCallback(async(s,n={})=>{let{action:i,method:a,encType:l,formData:c,body:u}=ic(s,e);if(n.navigate===!1){let d=n.fetcherKey||Sc();await t.fetch(d,r,n.action||i,{preventScrollReset:n.preventScrollReset,formData:c,body:u,formMethod:n.method||a,formEncType:n.encType||l,flushSync:n.flushSync})}else await t.navigate(n.action||i,{preventScrollReset:n.preventScrollReset,formData:c,body:u,formMethod:n.method||a,formEncType:n.encType||l,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[t,e,r])}function Cc(t,{relative:e}={}){let{basename:r}=f.useContext(Me),s=f.useContext(Ce);te(s,"useFormAction must be used inside a RouteContext");let[n]=s.matches.slice(-1),i={...Lr(t||".",{relative:e})},a=Xe();if(t==null){i.search=a.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Ke([r,i.pathname])),Nr(i)}function Tc(t,{relative:e}={}){let r=f.useContext(xi);te(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ti("useViewTransitionState"),n=Lr(t,{relative:e});if(!r.isTransitioning)return!1;let i=Qe(r.currentLocation.pathname,s)||r.currentLocation.pathname,a=Qe(r.nextLocation.pathname,s)||r.nextLocation.pathname;return ls(n.pathname,a)!=null||ls(n.pathname,i)!=null}function Pi(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(r=Pi(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function _n(){for(var t,e,r=0,s="",n=arguments.length;r<n;r++)(t=arguments[r])&&(e=Pi(t))&&(s&&(s+=" "),s+=e);return s}const kn="-",Pc=t=>{const e=Rc(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:a=>{const l=a.split(kn);return l[0]===""&&l.length!==1&&l.shift(),Ai(l,e)||Ac(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},Ai=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],s=e.nextPart.get(r),n=s?Ai(t.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const i=t.join(kn);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},eo=/^\[(.+)\]$/,Ac=t=>{if(eo.test(t)){const e=eo.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},Rc=t=>{const{theme:e,prefix:r}=t,s={nextPart:new Map,validators:[]};return $c(Object.entries(t.classGroups),r).forEach(([i,a])=>{Js(a,s,i,e)}),s},Js=(t,e,r,s)=>{t.forEach(n=>{if(typeof n=="string"){const i=n===""?e:to(e,n);i.classGroupId=r;return}if(typeof n=="function"){if(Ic(n)){Js(n(s),e,r,s);return}e.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([i,a])=>{Js(a,to(e,i),r,s)})})},to=(t,e)=>{let r=t;return e.split(kn).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},Ic=t=>t.isThemeGetter,$c=(t,e)=>e?t.map(([r,s])=>{const n=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[r,n]}):t,Oc=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,s=new Map;const n=(i,a)=>{r.set(i,a),e++,e>t&&(e=0,s=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return n(i,a),a},set(i,a){r.has(i)?r.set(i,a):n(i,a)}}},Ri="!",zc=t=>{const{separator:e,experimentalParseClassName:r}=t,s=e.length===1,n=e[0],i=e.length,a=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let w=l[y];if(u===0){if(w===n&&(s||l.slice(y,y+i)===e)){c.push(l.slice(d,y)),d=y+i;continue}if(w==="/"){h=y;continue}}w==="["?u++:w==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(Ri),g=p?m.substring(1):m,x=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:a}):a},Lc=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(s=>{s[0]==="["?(e.push(...r.sort(),s),r=[]):r.push(s)}),e.push(...r.sort()),e},Mc=t=>({cache:Oc(t.cacheSize),parseClassName:zc(t),...Pc(t)}),Dc=/\s+/,Fc=(t,e)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:n}=e,i=[],a=t.trim().split(Dc);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=r(u);let g=!!p,x=s(g?m.substring(0,p):m);if(!x){if(!g){l=u+(l.length>0?" "+l:l);continue}if(x=s(m),!x){l=u+(l.length>0?" "+l:l);continue}g=!1}const y=Lc(d).join(":"),w=h?y+Ri:y,N=w+x;if(i.includes(N))continue;i.push(N);const v=n(x,g);for(let _=0;_<v.length;++_){const R=v[_];i.push(w+R)}l=u+(l.length>0?" "+l:l)}return l};function Uc(){let t=0,e,r,s="";for(;t<arguments.length;)(e=arguments[t++])&&(r=Ii(e))&&(s&&(s+=" "),s+=r);return s}const Ii=t=>{if(typeof t=="string")return t;let e,r="";for(let s=0;s<t.length;s++)t[s]&&(e=Ii(t[s]))&&(r&&(r+=" "),r+=e);return r};function Bc(t,...e){let r,s,n,i=a;function a(c){const u=e.reduce((d,h)=>h(d),t());return r=Mc(u),s=r.cache.get,n=r.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=Fc(c,r);return n(c,d),d}return function(){return i(Uc.apply(null,arguments))}}const X=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},$i=/^\[(?:([a-z-]+):)?(.+)\]$/i,qc=/^\d+\/\d+$/,Zc=new Set(["px","full","screen"]),Wc=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yc=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Hc=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Vc=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Gc=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ze=t=>Yt(t)||Zc.has(t)||qc.test(t),tt=t=>cr(t,"length",su),Yt=t=>!!t&&!Number.isNaN(Number(t)),zs=t=>cr(t,"number",Yt),gr=t=>!!t&&Number.isInteger(Number(t)),Kc=t=>t.endsWith("%")&&Yt(t.slice(0,-1)),Z=t=>$i.test(t),rt=t=>Wc.test(t),Jc=new Set(["length","size","percentage"]),Qc=t=>cr(t,Jc,Oi),Xc=t=>cr(t,"position",Oi),eu=new Set(["image","url"]),tu=t=>cr(t,eu,ou),ru=t=>cr(t,"",nu),yr=()=>!0,cr=(t,e,r)=>{const s=$i.exec(t);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):r(s[2]):!1},su=t=>Yc.test(t)&&!Hc.test(t),Oi=()=>!1,nu=t=>Vc.test(t),ou=t=>Gc.test(t),iu=()=>{const t=X("colors"),e=X("spacing"),r=X("blur"),s=X("brightness"),n=X("borderColor"),i=X("borderRadius"),a=X("borderSpacing"),l=X("borderWidth"),c=X("contrast"),u=X("grayscale"),d=X("hueRotate"),h=X("invert"),m=X("gap"),p=X("gradientColorStops"),g=X("gradientColorStopPositions"),x=X("inset"),y=X("margin"),w=X("opacity"),N=X("padding"),v=X("saturate"),_=X("scale"),R=X("sepia"),O=X("skew"),L=X("space"),$=X("translate"),j=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",Z,e],I=()=>[Z,e],le=()=>["",Ze,tt],we=()=>["auto",Yt,Z],P=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>["start","end","center","between","around","evenly","stretch"],ce=()=>["","0",Z],Pe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],me=()=>[Yt,Z];return{cacheSize:500,separator:":",theme:{colors:[yr],spacing:[Ze,tt],blur:["none","",rt,Z],brightness:me(),borderColor:[t],borderRadius:["none","","full",rt,Z],borderSpacing:I(),borderWidth:le(),contrast:me(),grayscale:ce(),hueRotate:me(),invert:ce(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[Kc,tt],inset:k(),margin:k(),opacity:me(),padding:I(),saturate:me(),scale:me(),sepia:ce(),skew:me(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Z]}],container:["container"],columns:[{columns:[rt]}],"break-after":[{"break-after":Pe()}],"break-before":[{"break-before":Pe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...P(),Z]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gr,Z]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Z]}],grow:[{grow:ce()}],shrink:[{shrink:ce()}],order:[{order:["first","last","none",gr,Z]}],"grid-cols":[{"grid-cols":[yr]}],"col-start-end":[{col:["auto",{span:["full",gr,Z]},Z]}],"col-start":[{"col-start":we()}],"col-end":[{"col-end":we()}],"grid-rows":[{"grid-rows":[yr]}],"row-start-end":[{row:["auto",{span:[gr,Z]},Z]}],"row-start":[{"row-start":we()}],"row-end":[{"row-end":we()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Z]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Z]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...oe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...oe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...oe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Z,e]}],"min-w":[{"min-w":[Z,e,"min","max","fit"]}],"max-w":[{"max-w":[Z,e,"none","full","min","max","fit","prose",{screen:[rt]},rt]}],h:[{h:[Z,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Z,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Z,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Z,e,"auto","min","max","fit"]}],"font-size":[{text:["base",rt,tt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zs]}],"font-family":[{font:[yr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Z]}],"line-clamp":[{"line-clamp":["none",Yt,zs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ze,Z]}],"list-image":[{"list-image":["none",Z]}],"list-style-type":[{list:["none","disc","decimal",Z]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ze,tt]}],"underline-offset":[{"underline-offset":["auto",Ze,Z]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Z]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Z]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...P(),Xc]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Qc]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tu]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:Y()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Ze,Z]}],"outline-w":[{outline:[Ze,tt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Ze,tt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",rt,ru]}],"shadow-color":[{shadow:[yr]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[..._e(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":_e()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",rt,Z]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Z]}],duration:[{duration:me()}],ease:[{ease:["linear","in","out","in-out",Z]}],delay:[{delay:me()}],animate:[{animate:["none","spin","ping","pulse","bounce",Z]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[gr,Z]}],"translate-x":[{"translate-x":[$]}],"translate-y":[{"translate-y":[$]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Z]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Z]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Z]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ze,tt,zs]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},zi=Bc(iu);function Ne(...t){return zi(_n(t))}const Li=f.createContext(void 0),au=({children:t,supabaseClient:e})=>{const[r,s]=f.useState(null),[n,i]=f.useState(null),[a,l]=f.useState(null),[c,u]=f.useState(!1),[d,h]=f.useState(!1),[m,p]=f.useState(!0);return f.useEffect(()=>{const{data:g}=e.auth.onAuthStateChange(async(x,y)=>{i(y),s((y==null?void 0:y.user)||null),p(!1)});return e.auth.getSession().then(({data:{session:x}})=>{i(x),s((x==null?void 0:x.user)||null),p(!1)}),()=>{g.subscription.unsubscribe()}},[e]),f.useEffect(()=>{const g=async y=>{try{const{data:w,error:N}=await e.from("profiles").select("*").eq("id",y).single();if(N){if(N.code==="PGRST116"){console.log("Profile not found, creating new profile for user:",y),await x(y);return}throw N}l(w),u((w==null?void 0:w.role)==="admin"||(w==null?void 0:w.role)==="super_admin")}catch(w){console.error("Error fetching user profile:",w),l(null),u(!1)}},x=async y=>{var w,N,v;try{const{data:{user:_},error:R}=await e.auth.getUser();if(R||!_){console.error("Error getting user info for profile creation:",R);return}const{data:O,error:L}=await e.from("profiles").insert({id:y,username:((w=_.email)==null?void 0:w.split("@")[0])||null,display_name:((N=_.user_metadata)==null?void 0:N.full_name)||((v=_.email)==null?void 0:v.split("@")[0])||"User",email:_.email,role:"user",subscription_status:"inactive",beta_reader_status:"none"}).select().single();L?(console.error("Error creating user profile:",L),l(null),u(!1)):(console.log("Successfully created user profile:",O),l(O),u((O==null?void 0:O.role)==="admin"||(O==null?void 0:O.role)==="super_admin"))}catch(_){console.error("Error in createUserProfile:",_),l(null),u(!1)}};r!=null&&r.id?(g(r.id),h(!0)):(l(null),u(!1),h(!1))},[r,e]),o.jsx(Li.Provider,{value:{user:r,session:n,userProfile:a,isAdmin:c,isAuthenticated:d,isLoading:m},children:t})},lu=()=>{const t=f.useContext(Li);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},cu="modulepreload",uu=function(t){return"/"+t},ro={},Mr=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(r.map(c=>{if(c=uu(c),c in ro)return;ro[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":cu,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return n.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},du=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Mr(async()=>{const{default:s}=await Promise.resolve().then(()=>ur);return{default:s}},[]).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class jn extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class hu extends jn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class so extends jn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class no extends jn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qs;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Qs||(Qs={}));var fu=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class mu{constructor(e,{headers:r={},customFetch:s,region:n=Qs.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=du(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return fu(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:d}).catch(x=>{throw new hu(x)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new so(h);if(!h.ok)throw new no(h);let p=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield h.json():p==="application/octet-stream"?g=yield h.blob():p==="text/event-stream"?g=h:p==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof no||n instanceof so?n.context:void 0}}})}}var ke={},Nn={},_s={},Dr={},ks={},js={},pu=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sr=pu();const gu=sr.fetch,Mi=sr.fetch.bind(sr),Di=sr.Headers,yu=sr.Request,bu=sr.Response,ur=Object.freeze(Object.defineProperty({__proto__:null,Headers:Di,Request:yu,Response:bu,default:Mi,fetch:gu},Symbol.toStringTag,{value:"Module"})),vu=Qa(ur);var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});let xu=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ns.default=xu;var Fi=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(js,"__esModule",{value:!0});const wu=Fi(vu),_u=Fi(Ns);let ku=class{constructor(e){var r,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=wu.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,u;let d=null,h=null,m=null,p=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const N=await i.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=N:h=JSON.parse(N))}const y=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),w=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");y&&w&&w.length>1&&(m=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,p=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await i.text();try{d=JSON.parse(y),Array.isArray(d)&&i.status===404&&(h=[],d=null,p=200,g="OK")}catch{i.status===404&&y===""?(p=204,g="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,g="OK"),d&&this.shouldThrowOnError)throw new _u.default(d)}return{error:d,data:h,count:m,status:p,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,r)}returns(){return this}overrideTypes(){return this}};js.default=ku;var ju=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ks,"__esModule",{value:!0});const Nu=ju(js);let Su=class extends Nu.default{select(e){let r=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};ks.default=Su;var Eu=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dr,"__esModule",{value:!0});const Cu=Eu(ks);let Tu=class extends Cu.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${a}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}};Dr.default=Tu;var Pu=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_s,"__esModule",{value:!0});const br=Pu(Dr);let Au=class{constructor(e,{headers:r={},schema:s,fetch:n}){this.url=e,this.headers=new Headers(r),this.schema=s,this.fetch=n}select(e,{head:r=!1,count:s}={}){const n=r?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new br.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:s=!0}={}){var n;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new br.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new br.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:r}={}){var s;const n="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new br.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var r;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new br.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};_s.default=Au;var Ui=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nn,"__esModule",{value:!0});const Ru=Ui(_s),Iu=Ui(Dr);let $u=class Bi{constructor(e,{headers:r={},schema:s,fetch:n}={}){this.url=e,this.headers=new Headers(r),this.schemaName=s,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new Ru.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Bi(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:n=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;s||n?(l=s?"HEAD":"GET",Object.entries(r).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Iu.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Nn.default=$u;var dr=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ke,"__esModule",{value:!0});ke.PostgrestError=ke.PostgrestBuilder=ke.PostgrestTransformBuilder=ke.PostgrestFilterBuilder=ke.PostgrestQueryBuilder=ke.PostgrestClient=void 0;const qi=dr(Nn);ke.PostgrestClient=qi.default;const Zi=dr(_s);ke.PostgrestQueryBuilder=Zi.default;const Wi=dr(Dr);ke.PostgrestFilterBuilder=Wi.default;const Yi=dr(ks);ke.PostgrestTransformBuilder=Yi.default;const Hi=dr(js);ke.PostgrestBuilder=Hi.default;const Vi=dr(Ns);ke.PostgrestError=Vi.default;var Ou=ke.default={PostgrestClient:qi.default,PostgrestQueryBuilder:Zi.default,PostgrestFilterBuilder:Wi.default,PostgrestTransformBuilder:Yi.default,PostgrestBuilder:Hi.default,PostgrestError:Vi.default};const{PostgrestClient:zu,PostgrestQueryBuilder:Ax,PostgrestFilterBuilder:Rx,PostgrestTransformBuilder:Ix,PostgrestBuilder:$x,PostgrestError:Ox}=Ou;class Lu{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Mu="2.15.1",Du=`realtime-js/${Mu}`,Fu="1.0.0",Xs=1e4,Uu=1e3,Bu=100;var _r;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_r||(_r={}));var de;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(de||(de={}));var ze;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ze||(ze={}));var en;(function(t){t.websocket="websocket"})(en||(en={}));var Et;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Et||(Et={}));class qu{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const n=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=s.decode(e.slice(a,a+n));a=a+n;const c=s.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Gi{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var K;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(K||(K={}));const oo=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,a)=>(i[a]=Zu(a,t,e,n),i),{})},Zu=(t,e,r,s)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,a=r[t];return i&&!s.includes(i)?Ki(i,a):tn(a)},Ki=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Vu(e,r)}switch(t){case K.bool:return Wu(e);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return Yu(e);case K.json:case K.jsonb:return Hu(e);case K.timestamp:return Gu(e);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:return tn(e);default:return tn(e)}},tn=t=>t,Wu=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Yu=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Hu=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Vu=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Ki(e,l))}return t},Gu=t=>typeof t=="string"?t.replace(" ","T"):t,Ji=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Ls{constructor(e,r,s={},n=Xs){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var io;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(io||(io={}));class kr{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kr.syncState(this.state,n,i,a),this.pendingDiffs.forEach(c=>{this.state=kr.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=kr.syncDiff(this.state,n,i,a),l())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const i=this.cloneDeep(e),a=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const m=d.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),g=d.filter(y=>p.indexOf(y.presence_ref)<0),x=h.filter(y=>m.indexOf(y.presence_ref)<0);g.length>0&&(l[u]=g),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},s,n)}static syncDiff(e,r,s,n){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),m=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...m)}s(l,d,c)}),this.map(a,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,n(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ao;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ao||(ao={}));var jr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(jr||(jr={}));var Ve;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ve||(Ve={}));class Sn{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=de.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ls(this,ze.join,this.params,this.timeout),this.rejoinTimer=new Gi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=de.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=de.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ze.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new kr(this),this.broadcastEndpointURL=Ji(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==de.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params,c=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[jr.PRESENCE]&&this.bindings[jr.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Ve.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Ve.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){e==null||e(Ve.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,y=[];for(let w=0;w<x;w++){const N=g[w],{filter:{event:v,schema:_,table:R,filter:O}}=N,L=m&&m[w];if(L&&L.event===v&&L.schema===_&&L.table===R&&L.filter===O)y.push(Object.assign(Object.assign({},N),{id:L.id}));else{this.unsubscribe(),this.state=de.errored,e==null||e(Ve.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Ve.SUBSCRIBED);return}}).receive("error",m=>{this.state=de.errored,e==null||e(Ve.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ve.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===de.joined&&e===jr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=de.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ze.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Ls(this,ze.leave,{},e),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=de.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),a}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ls(this,e,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Bu){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=ze;if(s&&[l,c,u,d].indexOf(a)>=0&&s!==this._joinRef())return;let m=this._onMessage(a,r,s);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var g,x,y;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(x=p.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(p=>p.callback(m,s)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var g,x,y,w,N,v;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const _=p.id,R=(g=p.filter)===null||g===void 0?void 0:g.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const _=(N=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return _==="*"||_===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:x,table:y,commit_timestamp:w,type:N,errors:v}=g;m=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:w,eventType:N,new:{},old:{},errors:v}),this._getPayloadRecords(g))}p.callback(m,s)})}_isClosed(){return this.state===de.closed}_isJoined(){return this.state===de.joined}_isJoining(){return this.state===de.joining}_isLeaving(){return this.state===de.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Sn.isEqual(n.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ze.close,{},e)}_onError(e){this._on(ze.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=de.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=oo(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=oo(e.columns,e.old_record)),r}}const lo=()=>{},Wr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ku=[1e3,2e3,5e3,1e4],Ju=1e4,Qu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Xu{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xs,this.transport=null,this.heartbeatIntervalMs=Wr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lo,this.ref=0,this.reconnectTimer=null,this.logger=lo,this.conn=null,this.sendBuffer=[],this.serializer=new qu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...a)=>Mr(async()=>{const{default:l}=await Promise.resolve().then(()=>ur);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${en.websocket}`,this.httpEndpoint=Ji(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Lu.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Fu}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case _r.connecting:return Et.Connecting;case _r.open:return Et.Open;case _r.closing:return Et.Closing;default:return Et.Closed}}isConnected(){return this.connectionState()===Et.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new Sn(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:s,payload:n,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Uu,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Wr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:i,ref:a}=r,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${n} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(n,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ze.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([Qu],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const n={access_token:r,version:Du};r&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(ze.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Gi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,n,i,a,l,c,u;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Xs,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:Wr.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>Ku[d-1]||Ju,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class En extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function he(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ed extends En{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rn extends En{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var td=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Qi=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Mr(async()=>{const{default:s}=await Promise.resolve().then(()=>ur);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},rd=()=>td(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Mr(()=>Promise.resolve().then(()=>ur),void 0)).Response:Response}),sn=t=>{if(Array.isArray(t))return t.map(r=>sn(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=sn(s)}),e},sd=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ot=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Ms=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),nd=(t,e,r)=>Ot(void 0,void 0,void 0,function*(){const s=yield rd();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const i=t.status||500,a=(n==null?void 0:n.statusCode)||i+"";e(new ed(Ms(n),i,a))}).catch(n=>{e(new rn(Ms(n),n))}):e(new rn(Ms(t),t))}),od=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?n:(sd(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),r))};function Fr(t,e,r,s,n,i){return Ot(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(r,od(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>nd(c,l,s))})})}function cs(t,e,r,s){return Ot(this,void 0,void 0,function*(){return Fr(t,"GET",e,r,s)})}function De(t,e,r,s,n){return Ot(this,void 0,void 0,function*(){return Fr(t,"POST",e,s,n,r)})}function nn(t,e,r,s,n){return Ot(this,void 0,void 0,function*(){return Fr(t,"PUT",e,s,n,r)})}function id(t,e,r,s){return Ot(this,void 0,void 0,function*(){return Fr(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Xi(t,e,r,s,n){return Ot(this,void 0,void 0,function*(){return Fr(t,"DELETE",e,s,n,r)})}var ye=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const ad={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},co={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ld{constructor(e,r={},s,n){this.url=e,this.headers=r,this.bucketId=s,this.fetch=Qi(n)}uploadOrUpdate(e,r,s,n){return ye(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},co),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(e=="PUT"?nn:De)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}})}upload(e,r,s){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,n){return ye(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:co.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield nn(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(he(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return ye(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield De(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new En("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}update(e,r,s){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return ye(this,void 0,void 0,function*(){try{return{data:yield De(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}copy(e,r,s){return ye(this,void 0,void 0,function*(){try{return{data:{path:(yield De(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}createSignedUrl(e,r,s){return ye(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield De(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}createSignedUrls(e,r,s){return ye(this,void 0,void 0,function*(){try{const n=yield De(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}download(e,r){return ye(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield cs(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(he(l))return{data:null,error:l};throw l}})}info(e){return ye(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield cs(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:sn(s),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}exists(e){return ye(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield id(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(he(s)&&s instanceof rn){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Xi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}list(e,r,s){return ye(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},ad),r),{prefix:e||""});return{data:yield De(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}listV2(e,r){return ye(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield De(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const cd="2.11.0",ud={"X-Client-Info":`storage-js/${cd}`};var zt=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class dd{constructor(e,r={},s,n){const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},ud),r),this.fetch=Qi(s)}listBuckets(){return zt(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}})}getBucket(e){return zt(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return zt(this,void 0,void 0,function*(){try{return{data:yield De(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return zt(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}emptyBucket(e){return zt(this,void 0,void 0,function*(){try{return{data:yield De(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}deleteBucket(e){return zt(this,void 0,void 0,function*(){try{return{data:yield Xi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}}class hd extends dd{constructor(e,r={},s,n){super(e,r,s,n)}from(e){return new ld(this.url,this.headers,e,this.fetch)}}const fd="2.56.0";let vr="";typeof Deno<"u"?vr="deno":typeof document<"u"?vr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vr="react-native":vr="node";const md={"X-Client-Info":`supabase-js-${vr}/${fd}`},pd={headers:md},gd={schema:"public"},yd={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bd={};var vd=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const xd=t=>{let e;return t?e=t:typeof fetch>"u"?e=Mi:e=fetch,(...r)=>e(...r)},wd=()=>typeof Headers>"u"?Di:Headers,_d=(t,e,r)=>{const s=xd(r),n=wd();return(i,a)=>vd(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new n(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},a),{headers:u}))})};var kd=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};function jd(t){return t.endsWith("/")?t:t+"/"}function Nd(t,e){var r,s;const{db:n,auth:i,realtime:a,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>kd(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const ea="2.71.1",Ut=30*1e3,on=3,Ds=on*Ut,Sd="http://localhost:9999",Ed="supabase.auth.token",Cd={"X-Client-Info":`gotrue-js/${ea}`},an="X-Supabase-Api-Version",ta={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Td=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Pd=10*60*1e3;class Cn extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ad extends Cn{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Rd(t){return q(t)&&t.name==="AuthApiError"}class ra extends Cn{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class vt extends Cn{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}}class ot extends vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Id(t){return q(t)&&t.name==="AuthSessionMissingError"}class Yr extends vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hr extends vt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vr extends vt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $d(t){return q(t)&&t.name==="AuthImplicitGrantRedirectError"}class uo extends vt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ln extends vt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Fs(t){return q(t)&&t.name==="AuthRetryableFetchError"}class ho extends vt{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class cn extends vt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const us="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fo=` 	
\r=`.split(""),Od=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<fo.length;e+=1)t[fo[e].charCodeAt(0)]=-2;for(let e=0;e<us.length;e+=1)t[us[e].charCodeAt(0)]=e;return t})();function mo(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(us[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(us[s]),e.queuedBits-=6}}function sa(t,e,r){const s=Od[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function po(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{Md(a,s,r)};for(let a=0;a<t.length;a+=1)sa(t.charCodeAt(a),n,i);return e.join("")}function zd(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Ld(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}zd(s,e)}}function Md(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Dd(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)sa(t.charCodeAt(n),r,s);return new Uint8Array(e)}function Fd(t){const e=[];return Ld(t,r=>e.push(r)),new Uint8Array(e)}function Ud(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};return t.forEach(n=>mo(n,r,s)),mo(null,r,s),e.join("")}function Bd(t){return Math.round(Date.now()/1e3)+t}function qd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Re=()=>typeof window<"u"&&typeof document<"u",_t={tested:!1,writable:!1},na=()=>{if(!Re())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_t.tested)return _t.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),_t.tested=!0,_t.writable=!0}catch{_t.tested=!0,_t.writable=!1}return _t.writable};function Zd(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const oa=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Mr(async()=>{const{default:s}=await Promise.resolve().then(()=>ur);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Wd=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Bt=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},kt=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},st=async(t,e)=>{await t.removeItem(e)};class Ss{constructor(){this.promise=new Ss.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Ss.promiseConstructor=Promise;function Us(t){const e=t.split(".");if(e.length!==3)throw new cn("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Td.test(e[s]))throw new cn("JWT not in base64url format");return{header:JSON.parse(po(e[0])),payload:JSON.parse(po(e[1])),signature:Dd(e[2]),raw:{header:e[0],payload:e[1]}}}async function Yd(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Hd(t,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function Vd(t){return("0"+t.toString(16)).substr(-2)}function Gd(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Vd).join("")}async function Kd(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Jd(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Kd(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Lt(t,e,r=!1){const s=Gd();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Bt(t,`${e}-code-verifier`,n);const i=await Jd(s);return[i,s===i?"plain":"s256"]}const Qd=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Xd(t){const e=t.headers.get(an);if(!e||!e.match(Qd))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function eh(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function th(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mt(t){if(!rh.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bs(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function go(t){return JSON.parse(JSON.stringify(t))}var sh=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};const St=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),nh=[502,503,504];async function yo(t){var e;if(!Wd(t))throw new ln(St(t),0);if(nh.includes(t.status))throw new ln(St(t),t.status);let r;try{r=await t.json()}catch(i){throw new ra(St(i),i)}let s;const n=Xd(t);if(n&&n.getTime()>=ta["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new ho(St(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ot}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new ho(St(r),t.status,r.weak_password.reasons);throw new Ad(St(r),t.status||500,s)}const oh=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function W(t,e,r,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[an]||(i[an]=ta["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await ih(t,e,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function ih(t,e,r,s,n,i){const a=oh(e,s,n,i);let l;try{l=await t(r,Object.assign({},a))}catch(c){throw console.error(c),new ln(St(c),0)}if(l.ok||await yo(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await yo(c)}}function Ye(t){var e;let r=null;uh(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Bd(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function bo(t){const e=Ye(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function at(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function ah(t){return{data:t,error:null}}function lh(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=t,a=sh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function ch(t){return t}function uh(t){return t.access_token&&t.refresh_token&&t.expires_in}const qs=["global","local","others"];var dh=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};class hh{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=oa(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=qs[0]){if(qs.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qs.join(", ")}`);try{return await W(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await W(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:at})}catch(s){if(q(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=dh(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await W(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:lh,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(q(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await W(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:at})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await W(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:ch});if(d.error)throw d.error;const h=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(q(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Mt(e);try{return await W(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:at})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Mt(e);try{return await W(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:at})}catch(s){if(q(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){Mt(e);try{return await W(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:at})}catch(s){if(q(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Mt(e.userId);try{const{data:r,error:s}=await W(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(q(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Mt(e.userId),Mt(e.id);try{return{data:await W(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}}function vo(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function fh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Dt={debug:!!(globalThis&&na()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ia extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mh extends ia{}async function ph(t,e,r){Dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Dt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{Dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new mh(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Dt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}fh();const gh={url:Sd,storageKey:Ed,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Cd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xo(t,e,r){return await r()}const Ft={};class Sr{constructor(e){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sr.nextInstanceID,Sr.nextInstanceID+=1,this.instanceID>0&&Re()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},gh),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new hh({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=oa(n.fetch),this.lock=n.lock||xo,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Re()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ph:this.lock=xo,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:na()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vo(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=vo(this.memoryStorage)),Re()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Ft[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ft[this.storageKey]=Object.assign(Object.assign({},Ft[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ft[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ft[this.storageKey]=Object.assign(Object.assign({},Ft[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ea}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Zd(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Re()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$d(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return q(r)?{error:r}:{error:new ra("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{const i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ye}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,s,n;try{let i;if("email"in e){const{email:d,password:h,options:m}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Lt(this.storage,this.storageKey)),i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:g},xform:Ye})}else if("phone"in e){const{phone:d,password:h,options:m}=e;i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ye})}else throw new Hr("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:l}=e;r=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:bo})}else if("phone"in e){const{phone:i,password:a,options:l}=e;r=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:bo})}else throw new Hr("You must provide either an email or phone number and a password");const{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Yr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,s,n,i,a,l,c,u,d,h,m,p;let g,x;if("message"in e)g=e.message,x=e.signature;else{const{chain:y,wallet:w,statement:N,options:v}=e;let _;if(Re())if(typeof w=="object")_=w;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))_=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const R=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const O=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),N?{statement:N}:null));let L;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")L=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)L=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)g=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),x=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${R.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(n=(s=v==null?void 0:v.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const O=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=O}}try{const{data:y,error:w}=await W(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Ud(x)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ye});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Yr}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(q(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const r=await kt(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{const{data:i,error:a}=await W(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ye});if(await st(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Yr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:s,token:n,access_token:i,nonce:a}=e,l=await W(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ye}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Yr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,n,i,a;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Lt(this.storage,this.storageKey));const{error:h}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Hr("You must provide either an email or phone number.")}catch(l){if(q(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,s;try{let n,i;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:l}=await W(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Ye});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var r,s,n;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Lt(this.storage,this.storageKey)),await W(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:ah})}catch(i){if(q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new ot;const{error:n}=await W(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:a}=await W(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:a,error:l}=await W(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Hr("You must provide either an email or phone number and a type")}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await kt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ds:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const a=await kt(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Bs()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:at}):await this._useSession(async r=>{var s,n,i;const{data:a,error:l}=r;if(l)throw l;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ot}:await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:at})})}catch(r){if(q(r))return Id(r)&&(await this._removeSession(),await st(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new ot;const a=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Lt(this.storage,this.storageKey));const{data:u,error:d}=await W(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:at});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(q(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ot;const r=Date.now()/1e3;let s=r,n=!0,i=null;const{payload:a}=Us(e.access_token);if(a.exp&&(s=a.exp,n=s<=r),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(q(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:a,error:l}=r;if(l)throw l;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ot;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Re())throw new Vr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Vr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new uo("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new uo("No code detected.");const{data:N,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!a||!u)throw new Vr("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const p=m-d;p*1e3<=Ut&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=m-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,m,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,m,d);const{data:x,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:m,refresh_token:a,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(s){if(q(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await kt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{error:i};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(Rd(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await st(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=qd(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:a}=r;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Lt(this.storage,this.storageKey,!0));try{return await W(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await W(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return Re()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(q(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:a}=r;if(a)throw a;return await W(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Hd(async n=>(n>0&&await Yd(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await W(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ye})),(n,i)=>{const a=200*Math.pow(2,n);return i&&Fs(i)&&Date.now()+a-s<Ut})}catch(s){if(this._debug(r,"error",s),q(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),Re()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await kt(this.storage,this.storageKey);if(n&&this.userStorage){let a=await kt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:n.user},await Bt(this.userStorage,this.storageKey+"-user",a)),n.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Bs()}else if(n&&!n.user&&!n.user){const a=await kt(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(n.user=a.user,await st(this.storage,this.storageKey+"-user"),await Bt(this.storage,this.storageKey,n)):n.user=Bs()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ds;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Ds}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Fs(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(n.access_token);!l&&(a!=null&&a.user)?(n.user=a.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(s,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new ot;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Ss;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new ot;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),q(i)){const a={session:null,error:i};return Fs(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Bt(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const i=go(n);await Bt(this.storage,this.storageKey,i)}else{const n=go(r);await Bt(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await st(this.storage,this.storageKey),await st(this.storage,this.storageKey+"-code-verifier"),await st(this.storage,this.storageKey+"-user"),this.userStorage&&await st(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Re()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ut);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Ut);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ut}ms, refresh threshold is ${on} ticks`),n<=on&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ia)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Re()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await Lt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await W(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await W(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:a,error:l}=await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(q(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(q(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Us(n.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(l=>l.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+Pd>n)return s;const{data:i,error:a}=await W(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,s=i.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};s=p.session.access_token}const{header:n,payload:i,signature:a,raw:{header:l,payload:c}}=Us(s);r!=null&&r.allowExpired||eh(i.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:n,signature:a},error:null}}const d=th(n.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,Fd(`${l}.${c}`)))throw new cn("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}}}Sr.nextInstanceID=0;const yh=Sr;class bh extends yh{constructor(e){super(e)}}var vh=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class xh{constructor(e,r,s){var n,i,a;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=jd(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:gd,realtime:bd,auth:Object.assign(Object.assign({},yd),{storageKey:u}),global:pd},h=Nd(s??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=_d(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new zu(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new hd(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new mu(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return vh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,storageKey:i,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bh({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Xu(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wh=(t,e,r)=>new xh(t,e,r);function _h(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}_h()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zs={};var kh={};const wo=typeof window<"u",aa="https://opukvvmumyegtkukqint.supabase.co",la="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",aa);console.log("DEBUG: supabaseAnonKey (raw):",la);((Zs==null?void 0:Zs.VITE_DEBUG)==="true"||kh.VITE_DEBUG==="true")&&(console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set"));let ue;try{ue=wh(aa,la,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:wo?window.localStorage:void 0}});const t=typeof process<"u"&&!1}catch(t){throw console.error("Error initializing Supabase client:",t),t}/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ca=(...t)=>t.filter((e,r,s)=>!!e&&s.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=f.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:n="",children:i,iconNode:a,...l},c)=>f.createElement("svg",{ref:c,...Nh,width:e,height:e,stroke:t,strokeWidth:s?Number(r)*24/Number(e):r,className:ca("lucide",n),...l},[...a.map(([u,d])=>f.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=(t,e)=>{const r=f.forwardRef(({className:s,...n},i)=>f.createElement(Sh,{ref:i,iconNode:e,className:ca(`lucide-${jh(t)}`,s),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=F("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=F("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=F("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=F("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=F("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=F("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=F("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=F("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=F("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=F("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=F("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=F("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=F("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=F("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=F("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=F("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=F("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=F("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=F("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=F("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=F("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=F("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=F("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=F("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=F("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=F("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=F("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=F("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=F("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=F("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=F("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=F("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=F("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=F("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=F("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=F("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=F("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=F("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=F("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=F("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=F("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=F("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=F("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=F("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=F("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=F("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=F("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=F("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=F("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=F("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=F("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=F("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ha=f.createContext(void 0),fa=()=>{const t=f.useContext(ha);if(!t)throw new Error("useAdminSideNav must be used within AdminSideNavProvider");return t},qh=({children:t})=>{const[e,r]=f.useState(!1),s=()=>{console.log("AdminSideNav: toggle called, current state:",e),r(!e)},n=()=>{console.log("AdminSideNav: close called, current state:",e),r(!1)};return o.jsx(ha.Provider,{value:{isOpen:e,toggle:s,close:n},children:t})},Zh=[{name:"Dashboard",href:"/account/admin",icon:$h},{name:"Products",href:"/account/admin/products",icon:It},{name:"Orders",href:"/account/admin/orders",icon:Pr},{name:"Inventory",href:"/account/admin/inventory",icon:Ch},{name:"Analytics",href:"/account/admin/analytics",icon:os},{name:"Posts",href:"/account/admin/posts",icon:gt},{name:"Works",href:"/account/admin/works",icon:ds},{name:"Timeline",href:"/account/admin/timeline/events",icon:Tn},{name:"Users",href:"/account/admin/users",icon:fs},{name:"Beta Applications",href:"/account/admin/beta-applications",icon:fs},{name:"Webhooks",href:"/account/admin/webhooks",icon:Bh},{name:"Media",href:"/account/admin/media",icon:lt},{name:"Settings",href:"/account/admin/settings",icon:An}],Wh=()=>{const{isOpen:t,toggle:e}=fa();return t?null:o.jsx("button",{onClick:e,className:"fixed top-4 left-4 z-[10000] p-3 rounded-lg bg-slate-800 border border-amber-500/50 shadow-xl hover:bg-slate-700 hover:border-amber-400 text-amber-300 hover:text-amber-200 transition-all duration-300 group","aria-label":"Toggle navigation menu",children:o.jsx(Lh,{size:20,className:"transition-transform duration-200 group-hover:scale-110"})})},Yh=()=>{var l,c;const{isOpen:t,close:e}=fa(),r=xs(),{user:s,userProfile:n}=lu(),i=async()=>{await ue.auth.signOut(),r("/")},a=()=>{console.log("AdminSideNav: handleLinkClick called"),e()};return f.useEffect(()=>{const u=d=>{d.key==="Escape"&&t&&(console.log("AdminSideNav: Escape key pressed"),e())};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[t,e]),t?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9998]",onClick:e}),o.jsx("aside",{className:"fixed top-0 left-0 z-[9999] h-screen w-80 border-r border-amber-500 shadow-2xl animate-in slide-in-from-left duration-300",style:{backgroundColor:"#0f172a",backdropFilter:"none"},children:o.jsxs("div",{className:"h-full flex flex-col relative",style:{backgroundColor:"#0f172a",backdropFilter:"none"},children:[o.jsx("div",{className:"absolute inset-y-0 right-0 w-1 bg-gradient-to-b from-amber-400 via-yellow-500 to-amber-600"}),o.jsx("div",{className:"p-6 border-b border-amber-500",style:{backgroundColor:"#1e293b",backdropFilter:"none"},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-yellow-600 rounded-lg flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-slate-900 font-bold text-lg",children:"Z"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-amber-300",children:"Zoroaster"}),o.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Admin Panel"})]})]}),o.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-slate-700/50 text-slate-400 hover:text-amber-300 transition-colors duration-200","aria-label":"Close menu",children:o.jsx(pt,{size:20,className:"transition-transform duration-200 hover:rotate-90"})})]})}),o.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3",style:{backgroundColor:"#0f172a",backdropFilter:"none"},children:o.jsx("ul",{className:"space-y-2",children:Zh.map(u=>o.jsx("li",{children:o.jsx(wr,{to:u.href,end:u.href==="/account/admin",onClick:a,className:({isActive:d})=>Ne("group flex items-center p-3 rounded-xl transition-all duration-200 relative overflow-hidden space-x-3",d?"bg-amber-600 text-amber-100 border border-amber-500 shadow-md":"text-slate-300 hover:bg-slate-700 hover:text-amber-200 border border-transparent hover:border-amber-500"),children:({isActive:d})=>o.jsxs(o.Fragment,{children:[d&&o.jsx("div",{className:"absolute left-0 top-0 h-full w-1 bg-gradient-to-b from-amber-400 to-yellow-500 rounded-r"}),o.jsx(u.icon,{size:20,className:Ne("flex-shrink-0 transition-all duration-200",d?"text-amber-400 drop-shadow-sm":"group-hover:text-amber-300")}),o.jsx("span",{className:Ne("font-medium transition-all duration-200",d?"text-amber-200":"group-hover:text-amber-200"),children:u.name})]})})},u.name))})}),o.jsx("div",{className:"p-4 border-t border-amber-500",style:{backgroundColor:"#1e293b",backdropFilter:"none"},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-yellow-500 flex items-center justify-center text-slate-900 font-bold shadow-lg ring-2 ring-amber-400/30",children:((l=n==null?void 0:n.display_name)==null?void 0:l.charAt(0))||((c=s==null?void 0:s.email)==null?void 0:c.charAt(0).toUpperCase())}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-amber-200 truncate max-w-[160px]",children:(n==null?void 0:n.display_name)||"Admin User"}),o.jsx("p",{className:"text-xs text-slate-400 truncate max-w-[160px]",children:s==null?void 0:s.email})]})]}),o.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-gradient-to-r hover:from-red-500/20 hover:to-red-600/10 text-slate-400 hover:text-red-300 transition-all duration-200 border border-transparent hover:border-red-500/30",title:"Sign out",children:o.jsx(Oh,{size:18})})]})})]})})]}):null},Hh=({children:t})=>{var a,l;const[e,r]=f.useState(!0),[s,n]=f.useState({isAuthenticated:!1,isAdmin:!1}),i=Xe();return f.useEffect(()=>{(async()=>{console.log("⏳ [AdminProtectedRoute] Checking session and admin status...");const{data:{session:u},error:d}=await ue.auth.getSession();if(d||!u){console.log("🔒 [AdminProtectedRoute] No authenticated session found."),n({isAuthenticated:!1,isAdmin:!1}),r(!1);return}console.log("✅ [AdminProtectedRoute] Session found. User:",u.user.email);const{data:h,error:m}=await ue.rpc("is_admin");m&&console.error("❌ [AdminProtectedRoute] Error calling is_admin RPC:",m);const g={isAuthenticated:!0,isAdmin:h===!0,user:u.user};console.log("✅ [AdminProtectedRoute] Final auth state:",g),n(g),r(!1)})()},[]),e?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto"}),o.jsx("p",{className:"mt-4",children:"Verifying Admin Privileges..."})]})}):s.isAuthenticated?s.isAdmin?o.jsx(o.Fragment,{children:t}):(console.log("❌ [AdminProtectedRoute] Access Denied. User is not an admin."),o.jsx("div",{className:"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8 text-white",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs("div",{className:"bg-gray-800 shadow-lg rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-red-600 p-6",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Access Denied"}),o.jsx("p",{className:"text-red-100",children:"You do not have the necessary permissions to view this page."})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("p",{children:"The page you are trying to access is restricted to administrators only."}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-medium text-gray-300 mb-2",children:"Your Account Details"}),o.jsxs("dl",{className:"bg-gray-700/50 rounded-lg p-4 space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("dt",{className:"text-gray-400",children:"User ID"}),o.jsx("dd",{className:"font-mono",children:((a=s.user)==null?void 0:a.id)||"N/A"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("dt",{className:"text-gray-400",children:"Email"}),o.jsx("dd",{children:((l=s.user)==null?void 0:l.email)||"N/A"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("dt",{className:"text-gray-400",children:"Admin Status"}),o.jsx("dd",{className:"font-semibold text-red-400",children:"Not an Admin"})]})]})]}),o.jsx("p",{children:"If you believe this is an error, please contact support."}),o.jsx("div",{className:"pt-4",children:o.jsx("a",{href:"/",className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Go to Homepage"})})]})]})})})):(console.log("🛑 [AdminProtectedRoute] Not authenticated, redirecting to login."),o.jsx(Kl,{to:"/login",state:{from:i},replace:!0}))},jt=({title:t,value:e,icon:r,color:s,trend:n})=>o.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),n&&o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n})]}),o.jsx("div",{className:`p-3 rounded-lg bg-${s}-100 dark:bg-${s}-900/20`,children:o.jsx(r,{className:`w-6 h-6 text-${s}-600 dark:text-${s}-400`})})]})}),We=({title:t,description:e,icon:r,href:s,color:n})=>o.jsx("a",{href:s,className:"block bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all hover:border-blue-300 dark:hover:border-blue-600 group",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:`p-3 rounded-lg bg-${n}-100 dark:bg-${n}-900/20 group-hover:bg-${n}-200 dark:group-hover:bg-${n}-900/40 transition-colors`,children:o.jsx(r,{className:`w-6 h-6 text-${n}-600 dark:text-${n}-400`})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e})]})]})}),Vh=()=>{const[t,e]=f.useState(null),[r,s]=f.useState(!0),[n,i]=f.useState(null);return f.useEffect(()=>{(async()=>{try{const[{count:l},{count:c},{data:u},{data:d},{count:h},{count:m},{count:p}]=await Promise.all([ue.from("profiles").select("id",{count:"exact",head:!0}),ue.from("subscriptions").select("id",{count:"exact",head:!0}).eq("status","active"),ue.from("pages").select("view_count"),ue.from("orders").select("total_amount, status").eq("status","completed"),ue.from("products").select("id",{count:"exact",head:!0}).eq("active",!0),ue.from("orders").select("id",{count:"exact",head:!0}),ue.from("orders").select("id",{count:"exact",head:!0}).eq("status","pending")]),g=(u==null?void 0:u.reduce((y,w)=>y+(w.view_count||0),0))||0,x=(d==null?void 0:d.reduce((y,w)=>y+w.total_amount,0))||0;e({totalUsers:l||0,activeSubscribers:c||0,totalRevenue:x,totalViews:g,totalProducts:h||0,totalOrders:m||0,pendingOrders:p||0})}catch(l){i(l instanceof Error?l.message:"Failed to fetch dashboard metrics")}finally{s(!1)}})()},[]),r?o.jsx("div",{className:"p-6 space-y-6",children:o.jsxs("div",{className:"animate-pulse space-y-6",children:[o.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((a,l)=>o.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-xl"},l))})]})}):n?o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx(Er,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error Loading Dashboard"}),o.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:n})]})]})})}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Welcome to Zoroasterverse Admin"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage your worldbuilding platform with powerful admin tools"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(jt,{title:"Total Users",value:(t==null?void 0:t.totalUsers.toLocaleString())??"0",icon:fs,color:"blue",trend:"↑ Growing community"}),o.jsx(jt,{title:"Active Subscribers",value:(t==null?void 0:t.activeSubscribers.toLocaleString())??"0",icon:No,color:"green",trend:"Premium members"}),o.jsx(jt,{title:"Total Revenue",value:`$${(t==null?void 0:t.totalRevenue.toFixed(2))??"0.00"}`,icon:Pn,color:"yellow",trend:"All-time earnings"}),o.jsx(jt,{title:"Page Views",value:(t==null?void 0:t.totalViews.toLocaleString())??"0",icon:$t,color:"purple",trend:"Content engagement"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[o.jsx(jt,{title:"Active Products",value:(t==null?void 0:t.totalProducts.toLocaleString())??"0",icon:It,color:"indigo",trend:"Available for sale"}),o.jsx(jt,{title:"Total Orders",value:(t==null?void 0:t.totalOrders.toLocaleString())??"0",icon:Pr,color:"green",trend:"All-time orders"}),o.jsx(jt,{title:"Pending Orders",value:(t==null?void 0:t.pendingOrders.toLocaleString())??"0",icon:Er,color:"orange",trend:"Requires attention"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Quick Actions"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsx(We,{title:"Manage Users",description:"View, edit, and manage user accounts",icon:fs,href:"/account/admin/users",color:"blue"}),o.jsx(We,{title:"Content Management",description:"Create and manage posts and pages",icon:gt,href:"/account/admin/posts",color:"green"}),o.jsx(We,{title:"Product Catalog",description:"Manage your store products",icon:It,href:"/account/admin/products",color:"purple"}),o.jsx(We,{title:"Order Processing",description:"View and process customer orders",icon:Pr,href:"/account/admin/orders",color:"orange"}),o.jsx(We,{title:"Beta Applications",description:"Review beta reader applications",icon:No,href:"/account/admin/beta-applications",color:"indigo"}),o.jsx(We,{title:"Timeline Events",description:"Manage worldbuilding timeline",icon:Tn,href:"/account/admin/timeline/events",color:"red"}),o.jsx(We,{title:"Works & Chapters",description:"Manage your literary works",icon:ds,href:"/account/admin/works",color:"teal"}),o.jsx(We,{title:"Analytics",description:"View detailed performance metrics",icon:qt,href:"/account/admin/analytics",color:"pink"}),o.jsx(We,{title:"Settings",description:"Configure admin preferences",icon:An,href:"/account/admin/settings",color:"gray"})]})]})]})},Gh="_zoroHeader_6lzsp_2",Kh="_logo_6lzsp_16",Jh="_navbar_6lzsp_23",Qh="_navMenu_6lzsp_27",Xh="_navLink_6lzsp_39",ef="_dropdownMenu_6lzsp_53",tf="_dropdownMenuItem_6lzsp_73",rf="_dropdown_6lzsp_53",sf="_headerControls_6lzsp_96",nf="_searchForm_6lzsp_121",of="_themeToggle_6lzsp_165",af="_icon_6lzsp_186",lf="_iconSun_6lzsp_197",cf="_iconMoon_6lzsp_203",ge={zoroHeader:Gh,logo:Kh,navbar:Jh,navMenu:Qh,navLink:Xh,dropdownMenu:ef,dropdownMenuItem:tf,dropdown:rf,headerControls:sf,searchForm:nf,themeToggle:of,icon:af,iconSun:lf,iconMoon:cf},Co="zoro-theme",uf=()=>{const[t,e]=f.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem(Co),n=window.matchMedia("(prefers-color-scheme: dark)").matches;return s??(n?"dark":"light")}return"dark"});f.useEffect(()=>{const s=window.document.documentElement;s.setAttribute("data-theme",t),localStorage.setItem(Co,t),t==="dark"?(s.classList.add("dark"),s.classList.remove("light")):(s.classList.add("light"),s.classList.remove("dark"))},[t]);const r=()=>{e(s=>s==="dark"?"light":"dark")};return o.jsxs("button",{id:"theme-toggle",className:ge.themeToggle,"aria-label":"Toggle dark mode","aria-pressed":t==="dark"?"true":"false",title:t==="dark"?"Switch to light mode":"Switch to dark mode",onClick:r,children:[o.jsxs("svg",{className:`${ge.icon} ${ge.iconSun}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:[o.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),o.jsxs("g",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[o.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"5"}),o.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),o.jsx("line",{x1:"2",y1:"12",x2:"5",y2:"12"}),o.jsx("line",{x1:"19",y1:"12",x2:"22",y2:"12"}),o.jsx("line",{x1:"4.2",y1:"4.2",x2:"6.3",y2:"6.3"}),o.jsx("line",{x1:"17.7",y1:"17.7",x2:"19.8",y2:"19.8"}),o.jsx("line",{x1:"4.2",y1:"19.8",x2:"6.3",y2:"17.7"}),o.jsx("line",{x1:"17.7",y1:"6.3",x2:"19.8",y2:"4.2"})]})]}),o.jsx("svg",{className:`${ge.icon} ${ge.iconMoon}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:o.jsx("path",{d:`M21 14.5a9 9 0 1 1-8.5-12
                 a8 8 0 0 0 8.5 12z`,fill:"currentColor"})})]})},df=({isAuthenticated:t=!1,betaApplicationStatus:e="none",onLogout:r})=>{const[s,n]=f.useState(!1),i=()=>{r&&r()},a=[{name:"Home",path:"/"},{name:"Explore",path:"#",children:[{name:"Library",path:"/library"},{name:"Wiki",path:"/wiki"},{name:"Timelines",path:"/timelines"},{name:"Characters",path:"/characters"},{name:"Blog",path:"/blog"}]},{name:"Beta Program",path:"/beta/application"}];if(t){const l=[];l.push({name:"Store",path:"/store"}),l.push({name:"Subscriptions",path:"/subscriptions"}),e==="accepted"&&l.push({name:"Beta Portal",path:"/beta/portal"}),l.push({name:"My Account",path:"/account"}),a.push({name:"Account",path:"#",children:l}),a.push({name:"Logout",path:"#",onClick:i})}else a.push({name:"Login",path:"/login"});return o.jsxs("header",{className:ge.zoroHeader,children:[o.jsx("div",{className:ge.logo,children:o.jsx(wr,{to:"/",children:o.jsx("h1",{children:"Zoroasterverse"})})}),o.jsxs("div",{className:ge.headerControls,children:[o.jsxs("form",{className:ge.searchForm,children:[o.jsx("input",{type:"text",placeholder:"Search..."}),o.jsx("button",{type:"submit",children:o.jsx(hr,{})})]}),o.jsx(uf,{})]}),o.jsx("nav",{className:ge.navbar,children:o.jsx("ul",{className:ge.navMenu,children:a.map(l=>o.jsxs("li",{className:l.children?ge.dropdown:"",children:[l.onClick?o.jsx("button",{onClick:l.onClick,className:ge.navLink,children:l.name}):o.jsxs(wr,{to:l.path,className:ge.navLink,children:[l.name," ",l.children?"▾":""]}),l.children&&o.jsx("ul",{className:ge.dropdownMenu,children:l.children.map(c=>o.jsx("li",{children:o.jsx(wr,{to:c.path,className:ge.dropdownMenuItem,children:c.name})},c.name))})]},l.name))})})]})},hf="_zoroFooter_8qpog_1",ff="_footerContent_8qpog_8",mf="_footerColumns_8qpog_13",pf="_column_8qpog_20",gf="_socialIcons_8qpog_50",yf="_footerQuote_8qpog_59",nt={zoroFooter:hf,footerContent:ff,footerColumns:mf,column:pf,socialIcons:gf,footerQuote:yf},bf=()=>o.jsx("footer",{className:nt.zoroFooter,children:o.jsxs("div",{className:nt.footerContent,children:[o.jsxs("div",{className:nt.footerColumns,children:[o.jsxs("div",{className:nt.column,children:[o.jsx("h4",{children:"Zoroasterverse"}),o.jsx("p",{children:"“Truth is the architect of happiness.”"}),o.jsxs("p",{children:["© ",new Date().getFullYear()," Zoroasterverse. All rights reserved."]})]}),o.jsxs("div",{className:nt.column,children:[o.jsx("h4",{children:"Explore"}),o.jsxs("ul",{children:[o.jsx("li",{children:o.jsx("a",{href:"/about",children:"About"})}),o.jsx("li",{children:o.jsx("a",{href:"/books",children:"Books"})}),o.jsx("li",{children:o.jsx("a",{href:"/collaborate",children:"Artist Collaboration"})}),o.jsx("li",{children:o.jsx("a",{href:"/contact",children:"Contact"})})]})]}),o.jsxs("div",{className:nt.column,children:[o.jsx("h4",{children:"Connect"}),o.jsxs("ul",{className:nt.socialIcons,children:[o.jsx("li",{children:o.jsx("a",{href:"#",children:o.jsx(Fh,{})})}),o.jsx("li",{children:o.jsx("a",{href:"#",children:o.jsx(Ih,{})})}),o.jsx("li",{children:o.jsx("a",{href:"#",children:o.jsx(zh,{})})})]})]})]}),o.jsx("div",{className:nt.footerQuote,children:o.jsx("em",{children:"“Let your conscience be the altar where right intention dwells.”"})})]})}),vf=({isAuthenticated:t=!1,betaApplicationStatus:e="none",onLogout:r})=>o.jsxs("div",{className:"min-h-screen flex flex-col",children:[o.jsx(df,{isAuthenticated:t,betaApplicationStatus:e,onLogout:r}),o.jsx("main",{className:"flex-1",children:o.jsx(Jl,{})}),o.jsx(bf,{})]}),xf="_zrHero_14v3a_1",wf="_parchmentCard_14v3a_12",_f="_zrHeroContent_14v3a_70",kf="_zrTitle_14v3a_74",jf="_zrQuote_14v3a_88",Nf="_zrIntro_14v3a_97",Sf="_zrCta_14v3a_105",Ef="_zrHeroArt_14v3a_123",Cf="_videoFire_14v3a_156",Tf="_prophecyMask_14v3a_168",Pf="_prophecyReel_14v3a_183",Af="_prophecyItem_14v3a_193",Rf="_englishText_14v3a_203",If="_spinsIndicator_14v3a_212",$f="_spinDot_14v3a_221",Of="_spinDotActive_14v3a_230",zf="_zrSection_14v3a_237",Lf="_zrH2_14v3a_243",G={zrHero:xf,parchmentCard:wf,zrHeroContent:_f,zrTitle:kf,zrQuote:jf,zrIntro:Nf,zrCta:Sf,zrHeroArt:Ef,videoFire:Cf,prophecyMask:Tf,prophecyReel:Pf,prophecyItem:Af,englishText:Rf,spinsIndicator:If,spinDot:$f,spinDotActive:Of,zrSection:zf,zrH2:Lf},Mf=({spinsLeft:t,setSpinsLeft:e,onSpin:r})=>{const s=f.useRef(null),[n,i]=f.useState(!1),a=150,l=[{english:"Your heart is a compass that always points toward love—trust it, follow it, honor it."},{english:"You are not who you were yesterday unless you choose to be—each day offers the gift of becoming."},{english:"The friend of truth shall be the friend of my spirit, O Ahura Mazda. (Yasna 46.2)"},{english:"Every moment is sacred when approached with reverence, every task holy when performed with love."},{english:"The mind aligned with truth thinks God's thoughts after Him, sees with divine eyes, loves with cosmic heart."},{english:"May the beneficent spirit help us to speak truth and act righteously. (Yasna 47.6)"},{english:"Hope is the thing with feathers that perches in the soul and sings without words."},{english:"Self-knowledge is the beginning of wisdom, self-acceptance the foundation of growth."},{english:"Grant me, O Truth, the rewards of good thinking that bring joy and satisfaction. (Yasna 50.4)"},{english:"The sacred fire burns brightest in the heart that chooses truth over comfort. Let your conscience be the altar where right intention dwells."},{english:"Truth without compassion is cruelty; compassion without truth is sentimentality—balance both."},{english:"I praise You as the greatest and best, as the most beautiful, O Mazda Ahura. (Yasna 43.16)"},{english:"Truth is the architect of happiness, the foundation of peace, the cornerstone of wisdom. Build your life upon this rock."},{english:"The weight of moral choice is the proof of human dignity—angels don't choose, demons can't choose, but you can."},{english:"Plant seeds of hope in winter and trust them to bloom when spring returns to your life."},{english:"Appreciation is the highest form of prayer—seeing the divine in every blessing."},{english:"The future is not predetermined but is being written by every choice you make right now."},{english:"When shadows of doubt gather, kindle the inner flame of discernment. Fire purifies not by destroying, but by revealing what is true."},{english:"Begin each day as if it were your first—with wonder. End each day as if it were your last—with gratitude."},{english:"Morning brings the gift of choice renewed. Stand at the crossroads of thought and deed—which path serves the light?"},{english:"We invoke good thinking, truth, and the beneficent spirit of Ahura Mazda. (Yasna 37.4)"},{english:"Where truth flourishes, freedom follows; where freedom is genuine, truth is honored."},{english:"The divine dwells not only in temples but in every heart that welcomes it, every life that serves it."},{english:"The sacred fire asks no permission to burn, needs no fuel but truth, casts no shadow but illumination."},{english:"May we be instruments of peace, servants of truth, children of light. (Benediction)"},{english:"Let the fire within you remember the spark of dawn—every choice a new horizon to the world's unfolding. Walk in watchfulness, and the light of Good Mind will not fail you."},{english:"Devotion asks not what you can receive but what you can give, not what you deserve but what you can serve."},{english:"Freedom is not the absence of constraints but the presence of meaningful options."},{english:"Through the beneficent spirit, may we overcome all obstacles to righteousness. (Prayer)"},{english:"The light of understanding grows not by accumulating facts but by illuminating connections."},{english:"The peaceful heart creates peaceful surroundings; the harmonious soul attracts harmonious relationships."},{english:"I take refuge in good thinking, truth, and Your lordship, Mazda, from whom comes the most beneficent spirit. (Yasna 33.5)"},{english:"Rational thought and intuitive wisdom are not opposites but partners in the dance of understanding."},{english:"When you have the power to help and choose not to, you become complicit in the suffering you could have prevented."},{english:"Like a candle lights a thousand candles without diminishing, share your inner light freely with all."},{english:"You are both the author and the main character of your life story—write it well."},{english:"The good mind is not the mind that knows everything but the mind that remains open to learning."},{english:"The stranger is just a friend you haven't met yet, a teacher you haven't learned from yet, a gift you haven't unwrapped yet."},{english:"Those who seek to destroy my family and clan, Mazda, I put them in Your hands through good thinking and truth. (Yasna 48.8)"},{english:"I pray to You with outstretched hands, O Mazda, seeking Your help through the beneficent spirit. (Yasna 50.8)"},{english:"Every decision is a seed planted in the soil of time. What kind of forest are you growing?"},{english:"Devotion is gratitude in action, love expressing itself through loyal service."},{english:"The fire of truth burns away all that is false in you, leaving only what is real and precious."},{english:"The unexamined life scatters like leaves in the wind; the examined life grows deep roots in truth."},{english:"The arc of justice bends only when people like you choose to bend it—be a force for righteousness."},{english:"Choose as if your choice matters to everyone who will ever live—because it does."},{english:"When Good Mind came to me, I first learned to proclaim Your words, O Mazda. (Yasna 43.15)"},{english:"To You, the beneficent ones shall come for refuge, Mazda, not to the followers of falsehood. (Yasna 48.4)"},{english:"Understanding comes not from standing above others but from standing with them in shared humanity."},{english:"The doorway to wisdom opens inward—the journey begins when you stop looking outside and start looking within."},{english:"May we be worthy of Your friendship through righteous actions, O Mazda. (Yasna 46.6)"},{english:"This I ask You: tell me truly, Ahura—what craftsman created light and darkness? (Yasna 44.5)"},{english:"Harmony does not require uniformity—an orchestra creates beauty through coordinated differences."},{english:"May Ahura Mazda be praised! May the beneficent spirit be glorified! (Traditional praise)"},{english:"Wisdom whispers while foolishness shouts—train your ear to hear the quiet voice of truth."},{english:"The measure of a society is how it treats those who cannot defend themselves."},{english:"What doesn't challenge you doesn't change you; what doesn't stretch you doesn't strengthen you."},{english:"Fair is not everyone getting the same thing; fair is everyone getting what they need to thrive."},{english:"Through Your fire, show me the rewards that come through truth for both parties—those who uphold righteousness and those who do not. (Yasna 31.3)"},{english:"The world is changed not by those who point out what's wrong but by those who do what's right."},{english:"Service is love made visible, compassion made practical, faith made fruitful."},{english:"I have recognized You as beneficent through truth and good thinking, O Mazda. (Yasna 49.5)"},{english:"The holy is not somewhere else or some time else but here and now, in this place, at this moment."},{english:"Let your presence be a sanctuary where others can find rest from the storms of life."},{english:"Friendship is truth telling and burden sharing, celebration and consolation, walking together toward the light."},{english:"Small daily improvements lead to stunning yearly results—be consistent rather than dramatic."},{english:"The mind that dwells in truth becomes a sanctuary where peace is always available."},{english:"Your life is a sacred text written one choice at a time—make it a beautiful story."},{english:"Blessed is he who brings happiness to others through truth and good deeds. (Traditional blessing)"},{english:"You are the protector of the righteous, O Mazda, through Your beneficent spirit. (Yasna 47.3)"},{english:"This I ask You: tell me truly, Ahura—who established the path of the sun and stars? (Yasna 44.5)"},{english:"At the crossroads of decision, remember: you are always choosing not just for yourself but for all who will follow."},{english:"I approach You, O Mazda, with good thinking, so that You may grant me both the blessings of this existence and that of the spirit. (Yasna 28.4)"},{english:"Your life is your offering—what will you place on the altar of existence?"},{english:"Learning from others shortens your path to wisdom; teaching others deepens your own understanding."},{english:"Pure thoughts birth noble words; noble words inspire righteous deeds; righteous deeds purify thoughts in return."},{english:"Every meal is communion when shared with gratitude, every conversation prayer when spoken with love."},{english:"The freedom to choose your response to any situation is the last of human freedoms—exercise it wisely."},{english:"Your conscience is your connection to cosmic justice—honor it by living in alignment with its guidance."},{english:"Every sunrise is nature's way of saying, 'Try again'—accept the invitation with gratitude."},{english:"Truth is patient but not passive, gentle but not weak, humble but not uncertain of its worth."},{english:"Action without reflection is blind; reflection without action is empty; but action guided by reflection is transformative."},{english:"Righteousness is the best good. Happiness to him who is righteous for the sake of righteousness alone. (Ashem Vohu variation)"},{english:"Community is not a place but a relationship, not a location but a connection."},{english:"Good thinking leads to good feeling, good feeling leads to good willing, good willing leads to good living."},{english:"Every crossroads is a classroom, every decision a teacher, every consequence a lesson."},{english:"The present moment is the only moment over which you have power—make it count."},{english:"Hope is not naive optimism but courageous commitment to work for what ought to be."},{english:"Every mistake is a teacher in disguise, every failure a step toward success, every setback a setup for comeback."},{english:"The inner fire burns brightest not when fed by passion but when fueled by principle."},{english:"Your privilege is not your fault, but your responsibility. Use whatever advantages you have to lift others."},{english:"Through Your radiant fire, assign the destiny of the righteous and the unrighteous, O Mazda, that our teaching may spread among the living. (Yasna 31.19)"},{english:"Knowledge builds walls to separate us from ignorance; wisdom builds bridges to connect us with all beings."},{english:"As long as I have strength and power, I shall teach people to seek truth. (Yasna 45.4)"},{english:"The beneficent spirit manifests wherever love meets action. Be the hands and heart through which goodness enters the world."},{english:"The bounteous mentality sees abundance everywhere—in every sunrise, every breath, every opportunity to serve the good."},{english:"The mind illuminated by truth sees possibilities where others see only problems. Think with hope, and hope becomes reality."},{english:"Peace begins with each person choosing to be peaceful, harmony starts with each individual choosing to be harmonious."},{english:"Let gratitude be your first thought at dawn, your last thought at dusk, your constant companion throughout the day."},{english:"I realized You, Mazda, to be beneficent when I was encircled by Good Mind, when he taught me to proclaim: 'Let not men seek to please the followers of falsehood.' (Yasna 43.11)"},{english:"Compassion is not feeling sorry for others but feeling with them, sharing their burden until it becomes lighter."},{english:"Count your blessings, not your problems; focus on your gains, not your losses; see your progress, not your perfection."},{english:"Compassion is not pity from above but solidarity from within—suffer with, celebrate with, grow with."},{english:"At every moment you are choosing who you are becoming—choose the highest version of yourself."},{english:"Evening reflection is the mirror of morning intention. End as mindfully as you began."},{english:"True knowledge transforms the knower. If you remain unchanged by what you learn, you have learned nothing."},{english:"The paradox of freedom: you are most free when you choose to serve something greater than yourself."},{english:"The ripple effects of your actions extend far beyond what you can see—act as if the future depends on you."},{english:"The fire of wisdom burns without consuming. Feed it with honest reflection, and it will illumine your path forever."},{english:"Let your thoughts be seeds of kindness, your words be rain of encouragement, your deeds be sunshine of hope."},{english:"For whom did You create this earth and sky? Who made the luminaries and the darkness? (Yasna 29.1)"},{english:"Your presence in the world matters more than you know—show up fully, authentically, lovingly."},{english:"When the world seems broken beyond repair, remember that you are part of the repair."},{english:"The darkness is never permanent, the light is never extinguished completely. Keep the vigil."},{english:"To help the world progress, O Mazda, we have sought You through good thinking. (Yasna 30.6)"},{english:"Let your spirit be a fountain, not a drain. Pour out blessing upon blessing, and watch the desert of despair bloom."},{english:"Loneliness is the human condition; connection is the human choice. Choose connection."},{english:"For a wise Lord I knew You to be, Mazda, when Good Mind came to me and asked: 'Who are you? To whom do you belong?' (Yasna 43.7)"},{english:"True strength is not in never falling but in how gracefully you rise each time you fall."},{english:"Disorder is not the opposite of truth but its absence—fill the void with authentic being."},{english:"The path of wisdom begins with a single step: the decision to begin walking."},{english:"True justice considers not only what is legal but what is right, not only what is permitted but what is beneficial."},{english:"Grant me, O Mazda, through Your most beneficent spirit, through truth, the rewards of good thinking, through which I may bring joy to my supporters. (Yasna 28.11)"},{english:"The fire of Ahura Mazda brings light to the righteous and terror to the wicked. (Fire prayer)"},{english:"Your choices are your prayers—they reveal what you truly worship, what you genuinely value."},{english:"The false teacher leads people astray from the path of good thinking and truth. (Yasna 32.3)"},{english:"The phoenix rises not in spite of the ashes but because of them—let your failures fuel your renewal."},{english:"Forgiveness is not condoning what was wrong but choosing to be free from the burden of carrying resentment."},{english:"I praise good thoughts, good words, good deeds, and the good religion. (Fravarane prayer)"},{english:"The greatest among you will be your servant—greatness is measured by how much you give, not how much you get."},{english:"The morning star reminds us: even in the darkest hour, light is already on its way."},{english:"Where differences divide, find common ground; where similarities unite, celebrate diversity."},{english:"You who are Mazda, through Your spirit and fire, through truth and good thinking, grant me integrity and strength. (Yasna 28.7)"},{english:"In the garden of the heart, plant seeds of truthful speech. Words watered with wisdom bloom into lasting peace."},{english:"Your daily habits are votes for the type of person you wish to become—vote wisely."},{english:"May we receive the promised reward, the joy that comes from truth, O Mazda. (Yasna 33.11)"},{english:"Hope plants seeds in winter, trusting in the promise of spring."},{english:"You are not just in the community; the community is in you—you carry it wherever you go."},{english:"Your presence is often more healing than your words, your listening more valuable than your advice."},{english:"You are a unique note in the symphony of existence—play your part beautifully and boldly."},{english:"Bridge-builders are more valuable than wall-builders, peacemakers more needed than warriors."},{english:"Growth requires leaving your comfort zone regularly—comfort and growth cannot coexist."},{english:"But the righteous man chooses truth and good thinking as his allies. (Yasna 32.2)"},{english:"The threefold path begins in the silence of right thinking, flows through the beauty of truthful speech, and culminates in the power of loving action."},{english:"Truth needs no defense, only expression. Speak it simply and let its power do the rest."},{english:"Through good deeds may we come to You, O Mazda, with joy and gladness. (Yasna 50.10)"},{english:"I beheld You clearly in my mind's eye as the first one at the birth of life, when You made actions have consequences—evil for the evil, good reward for the good. (Yasna 43.5)"},{english:"Inner peace is not a luxury but a necessity, not a retreat from the world but preparation for effective engagement."},{english:"The wise heart holds both confidence and humility, certainty and openness, in perfect balance."},{english:"Your breath connects you to every living being—breathe consciously, live connectedly."},{english:"Whoever upholds truth most, whether man or woman, O Mazda Ahura, is most dear to You. (Yasna 46.11)"},{english:"Yes, there are two fundamental spirits, twins, renowned to be in conflict. In thought and word, in action, they are two: the good and the bad. Between these two, the beneficent have correctly chosen. (Yasna 30.3)"},{english:"Transformation happens not when you try to become someone else but when you become more fully yourself."},{english:"Where injustice flourishes, it is not enough to be personally righteous. Stand up, speak out, act decisively."},{english:"Then spoke Ahura Mazda: We have no pastor here who is both knowing and holy. (Yasna 29.6)"},{english:"The practice of gratitude transforms ordinary moments into sacred experiences."},{english:"Truth is like the sun—you cannot look directly at it for long, but it lights everything else."},{english:"I shall serve You with good thinking, with truth and righteous action, so that You may grant me that which leads to the straight path. (Yasna 28.5)"},{english:"May good thinking and truth dwell in our house forever, O Ahura Mazda. (Yasna 60.6)"},{english:"Look within with the same honesty you demand from others, the same compassion you show to friends."},{english:"The healing the world needs begins with the healing you give yourself—be gentle, be patient, be kind."},{english:"Hope is not a feeling but a decision—decide to hope and then live as if your hope is justified."},{english:"One chooses that rule of good thinking allied with truth in order to serve the beneficent spirit. (Yasna 51.18)"},{english:"The good mind is a gift that grows with giving. Share your wisdom freely, and watch understanding multiply among all beings."},{english:"When thought, word, and deed align like three rivers meeting, their combined power can move mountains of indifference."},{english:"The music of the spheres plays on—attune your heart to hear the cosmic symphony of love."},{english:"We rise by lifting others, we succeed by serving others, we find ourselves by losing ourselves in love."},{english:"The truth you speak has a past—it comes from your experience. Make sure that past is worthy of the truth."},{english:"The beneficent spirit breathes in every act of kindness. When you lift another's burden, you lighten the world."},{english:"Your talents are gifts to be shared, not treasures to be hoarded—invest them in making the world better."},{english:"The grateful heart attracts more to be grateful for—appreciation is the magnet for abundance."},{english:"The person who knows their weaknesses is stronger than the person who denies them."},{english:"May good fortune come through truth to those who proclaim these teachings, O Mazda. (Yasna 51.16)"},{english:"Meditation is the art of listening to the still small voice that whispers your deepest truth."},{english:"The most important choice you make each day is who you choose to become in that day."},{english:"Order emerges not from control but from harmony—the willing cooperation of free beings choosing good."},{english:"True intelligence is not the ability to solve problems but to see the connections between all things."},{english:"Thus speaks the maiden: 'You are the support of good thinking, of truth, and of the lordship desired by Mazda.' (Yasna 53.3)"},{english:"The spiral of growth means you will revisit the same lessons at deeper levels—embrace the journey."},{english:"When you choose increase over decrease, healing over harm, you align with the progressive spirit of creation itself."},{english:"When someone trusts you with their vulnerability, you hold sacred ground. Tread carefully and gratefully."},{english:"Renewal comes not from changing everything at once but from changing one thing completely."},{english:"When will the noble warriors come who shall drive out from here the thirst of the wicked? (Yasna 32.1)"},{english:"The sacred space is wherever you are when you remember who you really are and why you are here."},{english:"Good thinking, good words, and good deeds—these three bring a person to paradise, the best existence, light, and all good things. (Traditional summary)"},{english:"The progressive spirit never asks 'Why me?' but always 'How can I help?' Be an answer to someone's prayer today."},{english:"Then shall I recognize You as mighty, Mazda, when through good thinking You shall grant the blessings that the truthful and untruthful seek. (Yasna 45.8)"},{english:"I know You to be the first and the last, O Ahura Mazda—You are father of good thinking, creator of truth, judge of our actions. (Yasna 31.8)"},{english:"Wisdom is not knowing all the answers but asking better questions. Begin with: How can I serve?"},{english:"Conscience is the ember of the divine fire planted in every human heart—tend it carefully."},{english:"By Your beneficent spirit and by fire, O Mazda, show me truth and good thinking, through whose work one goes to Your abode. (Yasna 31.20)"},{english:"Come to my help, O Mazda, grant me strength through truth and good thinking. (Yasna 33.6)"},{english:"Through good deeds and righteous words, may we please Your spirit, O Mazda. (Yasna 49.10)"},{english:"Through truth we serve the Lord of Wisdom with good mind and beneficial action. (Summary verse)"},{english:"Service is not about being needed but about being useful, not about being thanked but about being trustworthy."},{english:"I who shall serve You with good thinking... may I thus bring solace to the soul of Earth. (Yasna 28.2)"},{english:"Holiness is not about being perfect but about being present, not about being pure but about being real."},{english:"May we be guides for those who seek the path of truth and righteousness. (Yasna 31.22)"},{english:"Wisdom is like water—it takes the shape of whatever vessel contains it, yet never loses its essence."},{english:"The enlightened mind is like clear water—it reflects perfectly what is, without adding or subtracting anything."},{english:"A thankful heart is a magnet for miracles, drawing goodness from the infinite storehouse of grace."},{english:"The pattern that connects all things is love expressing itself as truth, truth expressing itself as justice."},{english:"We are all connected—what helps one helps all, what harms one harms all."},{english:"Both bridegroom and bride, bring your minds into agreement for the practice of the best thoughts. (Yasna 53.4)"},{english:"The questions you ask shape the life you live—ask better questions, live a better life."},{english:"May the light of good thinking shine in our hearts forever. (Prayer verse)"},{english:"True self-knowledge includes knowing not just what you are but what you could become."},{english:"I know You to be mighty when You help me with good thinking, O Mazda Ahura. (Yasna 31.5)"},{english:"Justice is not revenge but restoration—making right what has been wrong, healing what has been harmed."},{english:"The sun rises not because you need it but because it is the nature of the sun to shine—be like the sun."},{english:"Justice is love applied to systems, compassion embodied in institutions, kindness made structural."},{english:"Grant victory to those who speak truth and live righteously, O Ahura Mazda. (Yasna 48.12)"},{english:"The journey inward is the most courageous journey—it requires facing yourself without flinching."},{english:"I have realized You as beneficent, Mazda Ahura, when You came to me with good thinking and asked: 'Who are you willing to please?' (Yasna 49.3)"},{english:"Each choice carves a channel for future choices to follow. Choose wisely what river you dig for tomorrow."},{english:"Therefore may we be among those who make this world fresh and new! (Yasna 30.9)"},{english:"Truth is the gravity of the moral universe—what goes up in lies must come down in consequences."},{english:"The weight of choice is the price of consciousness. Bear it gladly, for it makes you a partner in creation's unfolding."},{english:"This I ask You: Which is the first and which the last? (Yasna 44.6)"},{english:"Thank the sunrise for its faithfulness, the earth for its generosity, life for its infinite possibilities."},{english:"The sacred is not separate from the ordinary but hidden within it, waiting to be discovered."},{english:"Reflect with a clear mind—each person for themselves—before the Great Event of Choices. Awaken to this doctrine: there is no compromise between right and wrong. (Yasna 30.2)"},{english:"Your choices reveal your values more accurately than your words—choose as if your character depends on it."},{english:"You are not just in the world; the world is in you—take care of both."},{english:"Time is the canvas, your choices the paint, your life the masterpiece—create something beautiful."},{english:"I entrust my soul to You, O Mazda, seeking Your protection through good thinking. (Yasna 48.9)"},{english:"The isolated tree falls in the storm; a forest of trees stands strong together."},{english:"Sacred living means recognizing the extraordinary within the ordinary, the eternal within the temporal."},{english:"The arc of the moral universe bends toward justice only when conscious beings like you and me choose to bend it."},{english:"The cosmic order is written in every sunrise, every heartbeat, every act of genuine kindness."},{english:"This I ask You: Who holds up the earth below and keeps the sky from falling? (Yasna 44.4)"},{english:"Let the fire within purify your motives, clarify your vision, energize your compassion."},{english:"The strength of the individual is the community; the strength of the community is the individual."},{english:"The hands that heal are holier than the hands that pray without helping."},{english:"The grateful heart sees abundance everywhere; the ungrateful heart finds scarcity in plenty."},{english:"This I ask You: tell me truly, Ahura—how shall I drive deceit far from us who seek to promote truth in the world? (Yasna 51.4)"},{english:"Every ending contains a beginning; every death, a birth; every loss, an opportunity for growth."},{english:"Know yourself not to become self-absorbed but to become self-aware, not to focus inward but to focus clearly."},{english:"When these two spirits came together in the beginning, they established life and not-life, and how at the end the worst existence shall be for the followers of falsehood, but the best mind for the truthful. (Yasna 30.4)"},{english:"Wisdom is the art of living skillfully, the science of choosing well, the practice of loving wisely."},{english:"In the morning, set your mind like a compass toward truth; let all your steps follow this direction."},{english:"May Your fire shine forth to help the supporter of truth, O Mazda. (Yasna 34.4)"},{english:"The curious mind stays young, the learning heart stays open, the growing soul stays alive."},{english:"The bridge between what is and what could be is built with the materials of hope and hard work."},{english:"The mirror of self-reflection shows not what you want to see but what you need to see."},{english:"Let truth be our guide, good thinking our companion, right action our path. (Summary)"},{english:"The universe conspires to help those who help themselves and others—be part of the conspiracy of good."},{english:"Every act of love is a victory over the forces that diminish life—love boldly, love widely, love deeply."},{english:"The paradox of wisdom: the more you truly know, the more you realize how much you don't know."},{english:"Each day offers lessons if you are willing to be a student, opportunities if you are willing to try."},{english:"Justice is not just a destination but a journey—walk it one step at a time, one choice at a time."},{english:"The beginner's mind sees possibilities everywhere; the expert mind sees problems in everything."},{english:"Every choice is a prayer, every decision a vote for the kind of world you want to live in."},{english:"Justice delayed is often justice denied, but justice rushed is sometimes injustice accomplished. Seek the balanced way."},{english:"To what land to flee? Where shall I go to flee? They exclude me from family and clan. (Yasna 46.1)"},{english:"You are the one who rewards both the truthful and the untruthful according to their deeds. (Yasna 43.12)"},{english:"Who, Mazda, is the faithful friend of Your spirit? Let him teach me the straight paths of good thinking and of truth. (Yasna 47.4)"},{english:"With outstretched hands I pray to You, O Mazda, first of all through truth. (Yasna 28.1)"},{english:"Self-reflection without self-compassion becomes self-criticism; self-compassion without self-reflection becomes self-deception."},{english:"May good thinking reign supreme, may truth be established in the world. (Yasna 45.10)"},{english:"True belonging doesn't require you to change who you are; it requires you to be who you are."},{english:"When you light the lamp of compassion, you illuminate your own path as well as others'."},{english:"The order of existence rewards those who align with it, not to punish those who don't, but to heal what is broken."},{english:"The good mind seeks first to understand, then to be understood; first to serve, then to be served."},{english:"The trinity of human goodness—think well, speak well, act well—echoes the divine harmony that sustains all worlds."},{english:"Freedom is not the absence of consequences but the power to choose which consequences you will embrace."},{english:"Every moment is a fresh beginning, every breath a new chance, every choice a sacred opportunity."},{english:"Begin each day by asking: How can I make today better than yesterday? End each day by answering: How did I succeed?"},{english:"Through Your most beneficent spirit, O Mazda, I seek to do Your will. (Yasna 47.1)"},{english:"The greatest sermon is a life well-lived in service to truth, beauty, and goodness."},{english:"The deepest truth is often the most simple: be kind, be honest, be helpful, be present."},{english:"Peace is not the absence of conflict but the presence of justice, not the silence of oppression but the harmony of mutual respect."},{english:"The darkest night produces the brightest stars—your current darkness may be developing your greatest light."},{english:"Connection is the energy that exists between people when they feel seen, heard, and valued."},{english:"Like fire transforms wood to light, let your choices transform the world from what it is to what it should be."},{english:"Through good thinking, truth, and the spirit's power, they shall overcome the violence of the deceitful. (Yasna 32.16)"},{english:"The day unfolds like a scroll waiting to be written. What story will your choices tell?"},{english:"The gift of choice is also the burden of choice—embrace both aspects with equal courage."},{english:"The scales of justice are balanced not by equal punishment but by proportional restoration."},{english:"The seeds of tomorrow are planted in the soil of today—plant wisely."},{english:"Good thinking is the bridge between knowing and acting. Cross it with courage, and find yourself in the land of fulfillment."},{english:"I approach You, Mazda, with hands outstretched, with good thinking, with truth, hoping to please Your spirit with righteous actions. (Yasna 50.5)"},{english:"The heart that has been broken and healed is stronger than one that has never been tested."},{english:"Thanksgiving is not just a day but a way of life—live thankfully and you will have much to be thankful for."},{english:"Begin each day by asking: How shall I increase the good in the world through my being here?"},{english:"The wise person learns from everyone, teaches everyone, and judges no one harshly."},{english:"Each breath is a gift, each heartbeat a blessing, each moment an opportunity for thankfulness."},{english:"Like a lighthouse guides ships safely home, let your conscience guide you through moral storms to peaceful harbors."},{english:"Your legacy is not what you leave behind but what you build in others while you are here."},{english:"The growing edge is always uncomfortable—that's how you know you're growing."},{english:"We seek Your blessing through fire, through truth, through good thinking. (Yasna 36.3)"},{english:"This I ask You: tell me truly, Ahura—who was the first father of truth by begetting? (Yasna 44.3)"},{english:"Morning is creation's invitation to begin again. Accept it with gratitude and intentional presence."},{english:"Your conscience is the hearth of heaven—tend it with thoughts of justice, words of compassion, deeds of righteousness."},{english:"Your life may be a drop in the ocean, but without your drop the ocean would be less."},{english:"When moral darkness surrounds you, be the flame that others can navigate by."},{english:"Grant us, O Mazda, the straight paths of good thinking and truth. (Yasna 33.5)"},{english:"Your conscience is the sacred fire that never sleeps, never lies, never abandons you in darkness."},{english:"Your work in the world is your worship—do it with the reverence you would bring to the most sacred task."},{english:"True leadership is not about being served but about serving, not about having followers but about creating leaders."},{english:"Renewal comes not from changing your circumstances but from changing your relationship to your circumstances."},{english:"Speak to me as friend speaks to friend! Show me the supports on which both worlds rest. (Yasna 31.3)"},{english:"The light you seek is the light you are—stop looking for it and start being it."},{english:"Honesty is telling the truth to other people; integrity is telling the truth to yourself."},{english:"The wise person is not one who has never erred but one who learns from every mistake."},{english:"When the mind is clear like mountain water, right decisions flow naturally. Still the turbulent thoughts and find your center."},{english:"Through the beneficent spirit, Mazda, give me strength for good thinking, that I may find the straight paths of life. (Yasna 47.2)"},{english:"May we be among those who make this world progress, who are the healers of this world, O Mazda and You, O Truth. (Yasna 30.9)"},{english:"The wise Lord rewards those who serve truth with sincerity and devotion. (Teaching verse)"},{english:"The divine spark within you knows the difference between right and wrong—trust it, follow it, serve it."},{english:"The inner flame burns brightest when fed by deeds of righteousness, words of truth, thoughts of love."},{english:"The deepest wisdom is often the simplest truth, lived with complete sincerity."},{english:"Every person you meet is fighting a battle you know nothing about—be kind, be patient, be present."},{english:"The man of good life speaks to him of ill life: 'May your conscience torment you continuously!' (Yasna 46.11)"},{english:"The flame that burns for justice never consumes the just, only the injustice they oppose."},{english:"We approach You, O Ahura Mazda, with good thinking and truth, seeking Your blessing. (Yasna 34.1)"},{english:"Personal evolution is not about perfection but about progression, not about arrival but about journey."},{english:"Gratitude is the memory of the heart—it never forgets a kindness received or given."},{english:"I shall worship You with good thinking, O Mazda Ahura, so that You may teach me truth through Your spirit. (Yasna 45.6)"},{english:"Each dawn brings the covenant renewed: to think with clarity, speak with truth, act with love."},{english:"Kindness is the universal language that the deaf can hear and the blind can see."},{english:"Even in the darkest times, remember: you are here for a reason, at this time, in this place."},{english:"The phoenix is not reborn from ashes but through them—transformation requires embracing the fire."},{english:"As the first, O Mazda, You gave bodies and breath to the corporeal world through Your thought. (Yasna 31.11)"},{english:"Your inner fire is not yours alone—it is borrowed from the eternal flame that lights all worlds."},{english:"The river that moves you also moves through you—you are not separate from the flow of life."},{english:"The ultimate measure of your life is not what you accomplish but who you become."},{english:"The most precious gift you can give another person is your full, undivided, loving attention."},{english:"Truth is not a destination but a way of walking. Each step in harmony with what is right brings the world closer to wholeness."},{english:"May Ahura Mazda grant us that good which we seek through truth and good thinking. (Yasna 60.12)"},{english:"Gratitude turns what we have into enough, transforms ordinary days into thanksgivings, routine jobs into joy."},{english:"Love is the recognition that the other person's happiness is as important as your own—maybe more important."},{english:"Every person you meet is your teacher—some teach by example, others by cautionary tale."},{english:"Through righteousness may we attain that world of good thinking. (Yasna 34.15)"},{english:"The deceitful one chose to bring to realization the worst things. But the very beneficent spirit chose truth, and so shall those who satisfy the Wise Lord continuously with true actions. (Yasna 30.5)"},{english:"Each breath is a chance to choose life over death, hope over despair, love over fear."},{english:"True understanding comes not from accumulating facts but from seeing the patterns that connect all things."},{english:"Every act of service is a prayer, every moment of helpfulness a hymn, every gesture of kindness a blessing."},{english:"Where truth blooms, falsehood cannot take root. Cultivate the garden of your life with seeds of honesty and integrity."},{english:"The future is not fixed because you are still choosing—make your next choice count."},{english:"The most powerful force in the universe is a human being living in alignment with their highest truth."},{english:"When you see injustice and do nothing, you become part of the injustice—speak up, stand up, act up."},{english:"As rivers seek the sea, let your thoughts flow toward truth. In the silence of right action, wisdom speaks without words."},{english:"Your daily work is your temple, your loving relationships your prayer, your kind actions your worship."},{english:"The true order of existence is good; the most-good existence it is; desire it! Wish it! Happiness, bliss, enlightenment it is for that existence which is the true order of existence. (Ashem Vohu)"},{english:"The heart that has known pain is the heart most capable of healing others' pain."},{english:"Conflict is often the birth-pain of greater understanding—do not avoid it, but engage it constructively."},{english:"Clear thinking leads to clear speaking, which leads to clear acting. Begin each day by clarifying your deepest intentions."},{english:"The order of existence reveals itself to those who seek with sincere hearts. Look closely—truth hides in plain sight."},{english:"Let the actions of good thinking come to fruition for the man who teaches truth to Zarathustra. (Yasna 28.6)"},{english:"The loving man who brings help to the truthful, whether kinsman or fellow-member of the community, is in good accord with truth. (Yasna 46.2)"},{english:"When shall I know that You have power over those who cause harm to me, O Mazda? Let fire accompanied by good thinking make this known to me through truth. (Yasna 48.7)"},{english:"Clarity comes not from having all the answers but from asking the right questions."},{english:"Wisdom is knowing what to do; virtue is doing it; integrity is being consistent in both."},{english:"And when punishment comes to the wicked, then shall Your power be revealed to all, O Mazda. (Yasna 30.8)"},{english:"Your network is not about who can help you but who you can help, not who you know but who knows they can count on you."},{english:"Every ending is a new beginning in disguise—look for the hidden gift in every goodbye."},{english:"Through truth I complete my worship and my praise with actions, O Mazda Ahura. (Yasna 50.11)"},{english:"Where shall the righteous man find refuge when the wicked overwhelm the land? (Yasna 46.1)"},{english:"Like a river finds its course, truth finds its way through every obstacle. Be the clear channel through which it flows."},{english:"Every moment offers the great choice: will you add to the world's burden or its blessing? Choose consciously."},{english:"The rhythm of sunrise and sunset teaches the sacred pace of effort and rest, engagement and reflection."},{english:"Your fire, strong through truth, is a visible help to Your supporter, but visible harm to Your enemy, O Ahura Mazda. (Yasna 34.4)"},{english:"The soul of the earth cries out: For whom did You fashion me? Who created me? (Yasna 29.1)"},{english:"Service is the rent we pay for living on this planet—pay it gladly and generously."}],c=5,u=l.length,d=[];for(let p=0;p<c;p++)d.push(...l);const h=[...d.slice(d.length-u),...d,...d.slice(0,u)],m=async()=>{if(n||!s.current||t<=0){console.log("No spins left or already spinning.");return}console.log("handleSpin called");try{new Audio("/gear-click-351962.mp3").play().catch(w=>console.error("Error playing sound:",w))}catch(y){console.error("Error creating Audio object:",y)}if(i(!0),e(y=>y-1),r)try{await r(3-t+1)}catch(y){console.error("Error updating spin count:",y)}const p=Math.floor(Math.random()*l.length),x=(u+p+l.length*Math.floor(c/2))*a;s.current.classList.add("prophecy-reel-spinning"),s.current.style.transform=`translateY(-${x}px)`,setTimeout(()=>{if(!s.current)return;s.current.classList.remove("prophecy-reel-spinning"),s.current.style.transition="none";const y=p*a;s.current.style.transform=`translateY(-${y}px)`,s.current.offsetHeight,s.current.style.transition="transform 1.5s cubic-bezier(0.25, 1, 0.5, 1)",i(!1)},1600)};return o.jsx(o.Fragment,{children:o.jsx("div",{className:G.prophecyMask,onClick:m,children:o.jsx("div",{ref:s,className:G.prophecyReel,children:h.map((p,g)=>o.jsx("div",{className:G.prophecyItem,children:o.jsx("span",{className:G.englishText,children:p.english})},g))})})})},Df=({contentMap:t,spinsLeft:e,setSpinsLeft:r,onSpin:s})=>{var l,c,u;const n=((l=t.get("hero_title"))==null?void 0:l.content)||"Zoroasterverse",i=((c=t.get("hero_quote"))==null?void 0:c.content)||"“Happiness comes to them who bring happiness to others.”",a=((u=t.get("hero_description"))==null?void 0:u.content)||"Learn about the teachings of the prophet Zarathustra, the history of one of the world’s oldest religions, and the principles of Good Thoughts, Good Words, and Good Deeds.";return o.jsxs("section",{id:"home",className:G.zrHero,children:[o.jsxs("div",{className:G.zrHeroContent,children:[o.jsx("h1",{className:G.zrTitle,children:n}),o.jsx("p",{className:G.zrQuote,children:i}),o.jsx("p",{className:G.zrIntro,children:a}),o.jsx(lr,{className:G.zrCta,to:"/blog/about",children:"Learn More"})]}),o.jsxs("figure",{className:G.zrHeroArt,"aria-labelledby":"art-caption",children:[o.jsx("video",{src:"/200716-913538378.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:G.videoFire}),o.jsx("div",{className:G.spinsIndicator,children:[...Array(3)].map((d,h)=>o.jsx("div",{className:`${G.spinDot} ${h<e?G.spinDotActive:""}`},h))}),o.jsx(Mf,{spinsLeft:e,setSpinsLeft:r,onSpin:s}),o.jsx("figcaption",{id:"art-caption",className:"sr-only",children:"A stylized winged figure above a sacred fire."})]})]})},Ff=({posts:t})=>o.jsxs("section",{className:G.zrSection,children:[o.jsx("h2",{className:G.zrH2,children:"Latest News & Updates"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map(e=>{const r=e.content.length>100?e.content.substring(0,100)+"...":e.content;return o.jsxs("div",{className:G.parchmentCard,children:[o.jsx("h3",{children:e.title}),o.jsx("p",{className:"mt-2",dangerouslySetInnerHTML:{__html:r}}),o.jsx(lr,{to:`/blog/${e.slug}`,className:"mt-4 inline-block",children:"Read More"})]},e.id)})})]}),Uf=({releases:t})=>o.jsxs("section",{className:G.zrSection,children:[o.jsx("h2",{className:G.zrH2,children:"Latest Releases"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map(e=>o.jsxs("div",{className:G.parchmentCard,children:[o.jsx("h3",{children:e.title}),o.jsxs("p",{className:"mt-2",children:["Type: ",e.type]}),o.jsx("a",{href:e.link||"#",className:"mt-4 inline-block",children:"View Details / Purchase"})]},e.id))})]}),Bf=({homepageData:t=[],latestPosts:e=[],releaseData:r=[],spinsLeft:s=0,isLoading:n=!1,isError:i=!1,onSpin:a})=>{var d,h,m,p;const[l,c]=f.useState(s);if(n)return o.jsx("div",{className:"text-center py-8",children:"Loading homepage content..."});if(i)return o.jsx("div",{className:"text-center py-8 text-red-400",children:"Error loading homepage content."});const u=new Map(t==null?void 0:t.map(g=>[g.section,g]));return o.jsxs("div",{children:[o.jsx(Df,{contentMap:u,spinsLeft:l,setSpinsLeft:c,onSpin:a}),o.jsxs("section",{className:G.zrSection,children:[o.jsx("h2",{className:G.zrH2,children:"Our Progress"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[o.jsxs("div",{className:G.parchmentCard,children:[o.jsx("h3",{className:"text-4xl font-bold text-primary",children:((d=u.get("statistics_words_written"))==null?void 0:d.content)||"0"}),o.jsx("p",{className:"text-muted-foreground",children:"Words Written"})]}),o.jsxs("div",{className:G.parchmentCard,children:[o.jsx("h3",{className:"text-4xl font-bold text-primary",children:((h=u.get("statistics_beta_readers"))==null?void 0:h.content)||"0"}),o.jsx("p",{className:"text-muted-foreground",children:"Beta Readers"})]}),o.jsxs("div",{className:G.parchmentCard,children:[o.jsx("h3",{className:"text-4xl font-bold text-primary",children:((m=u.get("statistics_average_rating"))==null?void 0:m.content)||"0"}),o.jsx("p",{className:"text-muted-foreground",children:"Average Rating"})]}),o.jsxs("div",{className:G.parchmentCard,children:[o.jsx("h3",{className:"text-4xl font-bold text-primary",children:((p=u.get("statistics_books_published"))==null?void 0:p.content)||"0"}),o.jsx("p",{className:"text-muted-foreground",children:"Books Published"})]})]})]}),o.jsx(Ff,{posts:e||[]}),o.jsx(Uf,{releases:r||[]}),o.jsxs("section",{className:G.zrSection,children:[o.jsx("h2",{className:G.zrH2,children:"Artist Collaboration"}),o.jsxs("div",{className:"relative rounded-lg shadow-lg overflow-hidden w-full",children:[o.jsx("img",{src:"/images/invite_to_Colab_card.png",alt:"Artist Collaboration Invitation",className:"w-full h-full object-contain"}),o.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-shadow-md",children:"Join Our Creative Team!"}),o.jsx("p",{className:"text-white mb-6 text-shadow-sm",children:"We're looking for talented artists to help shape the visual identity of the Zangar/Spandam Series. Explore revenue-share opportunities and bring your vision to life."}),o.jsx(lr,{to:"/artist-collaboration",className:"inline-block bg-primary hover:bg-primary-dark text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:"Apply Now"})]})]})]})]})};function qf(...t){return zi(_n(t))}const Zf=({count:t=4,viewMode:e="grid",className:r})=>{const s=Array.from({length:t},(n,i)=>o.jsxs("div",{className:`${e==="grid"?"bg-background-light/30 backdrop-blur-sm rounded-2xl border border-border/30 overflow-hidden":"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30"}`,children:[o.jsx("div",{className:"h-64 bg-gradient-to-r from-border/20 to-border/40 skeleton"}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"h-6 bg-border/20 rounded skeleton mb-3"}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsx("div",{className:"h-4 bg-border/20 rounded skeleton"}),o.jsx("div",{className:"h-4 bg-border/20 rounded skeleton w-3/4"}),o.jsx("div",{className:"h-4 bg-border/20 rounded skeleton w-1/2"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"h-4 bg-border/20 rounded skeleton w-24 mb-2"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("div",{className:"h-6 bg-border/20 rounded-full skeleton w-16"}),o.jsx("div",{className:"h-6 bg-border/20 rounded-full skeleton w-20"})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:"h-8 bg-border/20 rounded skeleton w-20 mb-2"}),o.jsx("div",{className:"h-4 bg-border/20 rounded skeleton w-32"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"h-12 bg-border/20 rounded-xl skeleton"}),o.jsx("div",{className:"h-10 bg-border/20 rounded-xl skeleton"})]})]})]},i));return o.jsx("div",{className:qf(e==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",r),children:s})},Wf=()=>{const t=f.useRef(null);return f.useEffect(()=>{const e=t.current;if(!e)return;const r=50,s=()=>{const i=document.createElement("div");i.className="star",i.style.position="absolute",i.style.backgroundColor="#ffffff",i.style.borderRadius="50%",i.style.left=Math.random()*100+"%",i.style.top=Math.random()*100+"%";const a=Math.random()*3+1;i.style.width=i.style.height=a+"px",i.style.animationDelay=Math.random()*3+"s",i.style.animationDuration=Math.random()*2+2+"s",i.style.pointerEvents="none",e.appendChild(i)};e.innerHTML="";for(let i=0;i<r;i++)s();const n=()=>{const a=window.pageYOffset*-.1;e&&(e.style.transform=`translateY(${a}px)`)};return window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}},[]),o.jsx("div",{ref:t,className:"stars fixed top-0 left-0 w-full h-full pointer-events-none -z-10",children:" "})},ma={items:[],total:0,itemCount:0},Yf=(t,e)=>{switch(e.type){case"ADD_ITEM":if(t.items.find(s=>s.id===e.payload.id)){const s=t.items.map(a=>a.id===e.payload.id?{...a,quantity:a.quantity+e.payload.quantity}:a),n=s.reduce((a,l)=>a+l.price*l.quantity,0),i=s.reduce((a,l)=>a+l.quantity,0);return{...t,items:s,total:n,itemCount:i}}else{const s=[...t.items,e.payload],n=s.reduce((a,l)=>a+l.price*l.quantity,0),i=s.reduce((a,l)=>a+l.quantity,0);return{...t,items:s,total:n,itemCount:i}}case"REMOVE_ITEM":{const r=t.items.filter(i=>i.id!==e.payload),s=r.reduce((i,a)=>i+a.price*a.quantity,0),n=r.reduce((i,a)=>i+a.quantity,0);return{...t,items:r,total:s,itemCount:n}}case"UPDATE_QUANTITY":{const r=t.items.map(i=>i.id===e.payload.id?{...i,quantity:e.payload.quantity}:i),s=r.reduce((i,a)=>i+a.price*a.quantity,0),n=r.reduce((i,a)=>i+a.quantity,0);return{...t,items:r,total:s,itemCount:n}}case"CLEAR_CART":return ma;case"LOAD_CART":{const r=e.payload.reduce((n,i)=>n+i.price*i.quantity,0),s=e.payload.reduce((n,i)=>n+i.quantity,0);return{...t,items:e.payload,total:r,itemCount:s}}default:return t}},Hf=f.createContext(void 0),Vf=({children:t})=>{const[e,r]=f.useReducer(Yf,ma),s=u=>{r({type:"ADD_ITEM",payload:{...u,quantity:1}})},n=u=>{r({type:"REMOVE_ITEM",payload:u})},c={state:e,addItem:s,removeItem:n,updateQuantity:(u,d)=>{d<=0?n(u):r({type:"UPDATE_QUANTITY",payload:{id:u,quantity:d}})},clearCart:()=>{r({type:"CLEAR_CART"})},isInCart:u=>e.items.some(d=>d.id===u)};return o.jsx(Hf.Provider,{value:c,children:t})},Gf=async t=>{const e=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t),r=ue.from("wiki_pages").select(`
      id, created_at, created_by, title, slug, excerpt, is_published, category_id, folder_id, updated_at, view_count,
      content, seo_title, seo_description, seo_keywords,
      category(*),
      user(*)
    `).eq(e?"id":"slug",t),{data:s,error:n}=await r.single();if(n)return console.error("Error fetching wiki page:",n),null;if(s){s.user&&typeof s.user=="object"&&"error"in s.user&&(s.user=null),s.category&&typeof s.category=="object"&&"error"in s.category&&(s.category=null);const{data:i,error:a}=await ue.from("wiki_content_blocks").select("id, type, content, position").eq("page_id",s.id).order("position");if(a)throw console.error("Error fetching wiki content:",a),new Error("Failed to fetch wiki content");const l=(i==null?void 0:i.map(u=>({id:u.id,type:u.type,content:u.content,title:""})))||[];return await ue.rpc("increment_wiki_page_views",{page_id:s.id}),{...s,sections:l,content:s.content||"",seo_title:s.seo_title||"",seo_description:s.seo_description||"",seo_keywords:s.seo_keywords||[],category:s.category,user:s.user}}return null};var To;(function(t){t.UNAUTHORIZED="UNAUTHORIZED",t.FORBIDDEN="FORBIDDEN",t.INVALID_TOKEN="INVALID_TOKEN",t.INSUFFICIENT_PERMISSIONS="INSUFFICIENT_PERMISSIONS",t.VALIDATION_ERROR="VALIDATION_ERROR",t.INVALID_INPUT="INVALID_INPUT",t.MISSING_REQUIRED_FIELD="MISSING_REQUIRED_FIELD",t.BUSINESS_RULE_VIOLATION="BUSINESS_RULE_VIOLATION",t.SUBSCRIPTION_LIMIT_EXCEEDED="SUBSCRIPTION_LIMIT_EXCEEDED",t.CONTENT_ACCESS_DENIED="CONTENT_ACCESS_DENIED",t.PRICING_ERROR="PRICING_ERROR",t.RESOURCE_NOT_FOUND="RESOURCE_NOT_FOUND",t.DUPLICATE_RESOURCE="DUPLICATE_RESOURCE",t.DATA_INTEGRITY_ERROR="DATA_INTEGRITY_ERROR",t.PAYMENT_PROCESSING_ERROR="PAYMENT_PROCESSING_ERROR",t.EMAIL_SERVICE_ERROR="EMAIL_SERVICE_ERROR",t.STORAGE_SERVICE_ERROR="STORAGE_SERVICE_ERROR",t.DATABASE_ERROR="DATABASE_ERROR",t.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",t.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",t.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED"})(To||(To={}));function E(t,e,r){function s(l,c){var u;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(u=l._zod).traits??(u.traits=new Set),l._zod.traits.add(t),e(l,c);for(const d in a.prototype)d in l||Object.defineProperty(l,d,{value:a.prototype[d].bind(l)});l._zod.constr=a,l._zod.def=c}const n=(r==null?void 0:r.Parent)??Object;class i extends n{}Object.defineProperty(i,"name",{value:t});function a(l){var c;const u=r!=null&&r.Parent?new i:this;s(u,l),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(a,"init",{value:s}),Object.defineProperty(a,Symbol.hasInstance,{value:l=>{var c,u;return r!=null&&r.Parent&&l instanceof r.Parent?!0:(u=(c=l==null?void 0:l._zod)==null?void 0:c.traits)==null?void 0:u.has(t)}}),Object.defineProperty(a,"name",{value:t}),a}class Ht extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class pa extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const ga={};function yt(t){return ga}function Kf(t){const e=Object.values(t).filter(s=>typeof s=="number");return Object.entries(t).filter(([s,n])=>e.indexOf(+s)===-1).map(([s,n])=>n)}function un(t,e){return typeof e=="bigint"?e.toString():e}function In(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function $n(t){return t==null}function On(t){const e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function Jf(t,e){const r=(t.toString().split(".")[1]||"").length,s=e.toString();let n=(s.split(".")[1]||"").length;if(n===0&&/\d?e-\d?/.test(s)){const c=s.match(/\d?e-(\d?)/);c!=null&&c[1]&&(n=Number.parseInt(c[1]))}const i=r>n?r:n,a=Number.parseInt(t.toFixed(i).replace(".","")),l=Number.parseInt(e.toFixed(i).replace(".",""));return a%l/10**i}const Po=Symbol("evaluating");function J(t,e,r){let s;Object.defineProperty(t,e,{get(){if(s!==Po)return s===void 0&&(s=Po,s=r()),s},set(n){Object.defineProperty(t,e,{value:n})},configurable:!0})}function Qf(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}function xt(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function fr(...t){const e={};for(const r of t){const s=Object.getOwnPropertyDescriptors(r);Object.assign(e,s)}return Object.defineProperties({},e)}function Ao(t){return JSON.stringify(t)}const ya="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function ms(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Xf=In(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function nr(t){if(ms(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(ms(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function ba(t){return nr(t)?{...t}:t}const em=new Set(["string","number","symbol"]);function Es(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wt(t,e,r){const s=new t._zod.constr(e??t._zod.def);return(!e||r!=null&&r.parent)&&(s._zod.parent=t),s}function D(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function tm(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const rm={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function sm(t,e){const r=t._zod.def,s=fr(t._zod.def,{get shape(){const n={};for(const i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(n[i]=r.shape[i])}return xt(this,"shape",n),n},checks:[]});return wt(t,s)}function nm(t,e){const r=t._zod.def,s=fr(t._zod.def,{get shape(){const n={...t._zod.def.shape};for(const i in e){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete n[i]}return xt(this,"shape",n),n},checks:[]});return wt(t,s)}function om(t,e){if(!nr(e))throw new Error("Invalid input to extend: expected a plain object");const r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const n=fr(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return xt(this,"shape",i),i},checks:[]});return wt(t,n)}function im(t,e){if(!nr(e))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...t._zod.def,get shape(){const s={...t._zod.def.shape,...e};return xt(this,"shape",s),s},checks:t._zod.def.checks};return wt(t,r)}function am(t,e){const r=fr(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e._zod.def.shape};return xt(this,"shape",s),s},get catchall(){return e._zod.def.catchall},checks:[]});return wt(t,r)}function lm(t,e,r){const s=fr(e._zod.def,{get shape(){const n=e._zod.def.shape,i={...n};if(r)for(const a in r){if(!(a in n))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=t?new t({type:"optional",innerType:n[a]}):n[a])}else for(const a in n)i[a]=t?new t({type:"optional",innerType:n[a]}):n[a];return xt(this,"shape",i),i},checks:[]});return wt(e,s)}function cm(t,e,r){const s=fr(e._zod.def,{get shape(){const n=e._zod.def.shape,i={...n};if(r)for(const a in r){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(i[a]=new t({type:"nonoptional",innerType:n[a]}))}else for(const a in n)i[a]=new t({type:"nonoptional",innerType:n[a]});return xt(this,"shape",i),i},checks:[]});return wt(e,s)}function Zt(t,e=0){var r;if(t.aborted===!0)return!0;for(let s=e;s<t.issues.length;s++)if(((r=t.issues[s])==null?void 0:r.continue)!==!0)return!0;return!1}function Wt(t,e){return e.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(t),r})}function Qr(t){return typeof t=="string"?t:t==null?void 0:t.message}function bt(t,e,r){var n,i,a,l,c,u;const s={...t,path:t.path??[]};if(!t.message){const d=Qr((a=(i=(n=t.inst)==null?void 0:n._zod.def)==null?void 0:i.error)==null?void 0:a.call(i,t))??Qr((l=e==null?void 0:e.error)==null?void 0:l.call(e,t))??Qr((c=r.customError)==null?void 0:c.call(r,t))??Qr((u=r.localeError)==null?void 0:u.call(r,t))??"Invalid input";s.message=d}return delete s.inst,delete s.continue,e!=null&&e.reportInput||delete s.input,s}function zn(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Ar(...t){const[e,r,s]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:s}:{...e}}const va=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,un,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},xa=E("$ZodError",va),wa=E("$ZodError",va,{Parent:Error});function um(t,e=r=>r.message){const r={},s=[];for(const n of t.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:r}}function dm(t,e){const r=e||function(i){return i.message},s={_errors:[]},n=i=>{for(const a of i.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>n({issues:l}));else if(a.code==="invalid_key")n({issues:a.issues});else if(a.code==="invalid_element")n({issues:a.issues});else if(a.path.length===0)s._errors.push(r(a));else{let l=s,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return n(t),s}const Ln=t=>(e,r,s,n)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new Ht;if(a.issues.length){const l=new((n==null?void 0:n.Err)??t)(a.issues.map(c=>bt(c,i,yt())));throw ya(l,n==null?void 0:n.callee),l}return a.value},Mn=t=>async(e,r,s,n)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let a=e._zod.run({value:r,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){const l=new((n==null?void 0:n.Err)??t)(a.issues.map(c=>bt(c,i,yt())));throw ya(l,n==null?void 0:n.callee),l}return a.value},Cs=t=>(e,r,s)=>{const n=s?{...s,async:!1}:{async:!1},i=e._zod.run({value:r,issues:[]},n);if(i instanceof Promise)throw new Ht;return i.issues.length?{success:!1,error:new(t??xa)(i.issues.map(a=>bt(a,n,yt())))}:{success:!0,data:i.value}},hm=Cs(wa),Ts=t=>async(e,r,s)=>{const n=s?Object.assign(s,{async:!0}):{async:!0};let i=e._zod.run({value:r,issues:[]},n);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(a=>bt(a,n,yt())))}:{success:!0,data:i.value}},fm=Ts(wa),mm=t=>(e,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Ln(t)(e,r,n)},pm=t=>(e,r,s)=>Ln(t)(e,r,s),gm=t=>async(e,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Mn(t)(e,r,n)},ym=t=>async(e,r,s)=>Mn(t)(e,r,s),bm=t=>(e,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Cs(t)(e,r,n)},vm=t=>(e,r,s)=>Cs(t)(e,r,s),xm=t=>async(e,r,s)=>{const n=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Ts(t)(e,r,n)},wm=t=>async(e,r,s)=>Ts(t)(e,r,s),_m=/^[cC][^\s-]{8,}$/,km=/^[0-9a-z]+$/,jm=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Nm=/^[0-9a-vA-V]{20}$/,Sm=/^[A-Za-z0-9]{27}$/,Em=/^[a-zA-Z0-9_-]{21}$/,Cm=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Tm=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ro=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Pm=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Am="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Rm(){return new RegExp(Am,"u")}const Im=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,$m=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Om=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,zm=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Lm=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,_a=/^[A-Za-z0-9_-]*$/,Mm=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Dm=/^\+(?:[0-9]){6,14}[0-9]$/,ka="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Fm=new RegExp(`^${ka}$`);function ja(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Um(t){return new RegExp(`^${ja(t)}$`)}function Bm(t){const e=ja({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${e}(?:${r.join("|")})`;return new RegExp(`^${ka}T(?:${s})$`)}const qm=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},Zm=/^\d+$/,Wm=/^-?\d+(?:\.\d+)?/i,Ym=/true|false/i,Hm=/^[^A-Z]*$/,Vm=/^[^a-z]*$/,je=E("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),Na={number:"number",bigint:"bigint",object:"date"},Sa=E("$ZodCheckLessThan",(t,e)=>{je.init(t,e);const r=Na[typeof e.value];t._zod.onattach.push(s=>{const n=s._zod.bag,i=(e.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?n.maximum=e.value:n.exclusiveMaximum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value<=e.value:s.value<e.value)||s.issues.push({origin:r,code:"too_big",maximum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Ea=E("$ZodCheckGreaterThan",(t,e)=>{je.init(t,e);const r=Na[typeof e.value];t._zod.onattach.push(s=>{const n=s._zod.bag,i=(e.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?n.minimum=e.value:n.exclusiveMinimum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value>=e.value:s.value>e.value)||s.issues.push({origin:r,code:"too_small",minimum:e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Gm=E("$ZodCheckMultipleOf",(t,e)=>{je.init(t,e),t._zod.onattach.push(r=>{var s;(s=r._zod.bag).multipleOf??(s.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):Jf(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),Km=E("$ZodCheckNumberFormat",(t,e)=>{var a;je.init(t,e),e.format=e.format||"float64";const r=(a=e.format)==null?void 0:a.includes("int"),s=r?"int":"number",[n,i]=rm[e.format];t._zod.onattach.push(l=>{const c=l._zod.bag;c.format=e.format,c.minimum=n,c.maximum=i,r&&(c.pattern=Zm)}),t._zod.check=l=>{const c=l.value;if(r){if(!Number.isInteger(c)){l.issues.push({expected:s,format:e.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,continue:!e.abort});return}}c<n&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:n,inclusive:!0,inst:t,continue:!e.abort}),c>i&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:t})}}),Jm=E("$ZodCheckMaxLength",(t,e)=>{var r;je.init(t,e),(r=t._zod.def).when??(r.when=s=>{const n=s.value;return!$n(n)&&n.length!==void 0}),t._zod.onattach.push(s=>{const n=s._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<n&&(s._zod.bag.maximum=e.maximum)}),t._zod.check=s=>{const n=s.value;if(n.length<=e.maximum)return;const a=zn(n);s.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),Qm=E("$ZodCheckMinLength",(t,e)=>{var r;je.init(t,e),(r=t._zod.def).when??(r.when=s=>{const n=s.value;return!$n(n)&&n.length!==void 0}),t._zod.onattach.push(s=>{const n=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>n&&(s._zod.bag.minimum=e.minimum)}),t._zod.check=s=>{const n=s.value;if(n.length>=e.minimum)return;const a=zn(n);s.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),Xm=E("$ZodCheckLengthEquals",(t,e)=>{var r;je.init(t,e),(r=t._zod.def).when??(r.when=s=>{const n=s.value;return!$n(n)&&n.length!==void 0}),t._zod.onattach.push(s=>{const n=s._zod.bag;n.minimum=e.length,n.maximum=e.length,n.length=e.length}),t._zod.check=s=>{const n=s.value,i=n.length;if(i===e.length)return;const a=zn(n),l=i>e.length;s.issues.push({origin:a,...l?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:s.value,inst:t,continue:!e.abort})}}),Ps=E("$ZodCheckStringFormat",(t,e)=>{var r,s;je.init(t,e),t._zod.onattach.push(n=>{const i=n._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:e.format,input:n.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(s=t._zod).check??(s.check=()=>{})}),ep=E("$ZodCheckRegex",(t,e)=>{Ps.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),tp=E("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=Hm),Ps.init(t,e)}),rp=E("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=Vm),Ps.init(t,e)}),sp=E("$ZodCheckIncludes",(t,e)=>{je.init(t,e);const r=Es(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=s,t._zod.onattach.push(n=>{const i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),t._zod.check=n=>{n.value.includes(e.includes,e.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:n.value,inst:t,continue:!e.abort})}}),np=E("$ZodCheckStartsWith",(t,e)=>{je.init(t,e);const r=new RegExp(`^${Es(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(s=>{const n=s._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),t._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:t,continue:!e.abort})}}),op=E("$ZodCheckEndsWith",(t,e)=>{je.init(t,e);const r=new RegExp(`.*${Es(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(s=>{const n=s._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),t._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:t,continue:!e.abort})}}),ip=E("$ZodCheckOverwrite",(t,e)=>{je.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});class ap{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(a=>a),n=Math.min(...s.map(a=>a.length-a.trimStart().length)),i=s.map(a=>a.slice(n)).map(a=>" ".repeat(this.indent*2)+a);for(const a of i)this.content.push(a)}compile(){const e=Function,r=this==null?void 0:this.args,n=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new e(...r,n.join(`
`))}}const lp={major:4,minor:1,patch:3},se=E("$ZodType",(t,e)=>{var n;var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=lp;const s=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&s.unshift(t);for(const i of s)for(const a of i._zod.onattach)a(t);if(s.length===0)(r=t._zod).deferred??(r.deferred=[]),(n=t._zod.deferred)==null||n.push(()=>{t._zod.run=t._zod.parse});else{const i=(l,c,u)=>{let d=Zt(l),h;for(const m of c){if(m._zod.def.when){if(!m._zod.def.when(l))continue}else if(d)continue;const p=l.issues.length,g=m._zod.check(l);if(g instanceof Promise&&(u==null?void 0:u.async)===!1)throw new Ht;if(h||g instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await g,l.issues.length!==p&&(d||(d=Zt(l,p)))});else{if(l.issues.length===p)continue;d||(d=Zt(l,p))}}return h?h.then(()=>l):l},a=(l,c,u)=>{if(Zt(l))return l.aborted=!0,l;const d=i(c,s,u);if(d instanceof Promise){if(u.async===!1)throw new Ht;return d.then(h=>t._zod.parse(h,u))}return t._zod.parse(d,u)};t._zod.run=(l,c)=>{if(c.skipChecks)return t._zod.parse(l,c);if(c.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(h=>a(h,l,c)):a(d,l,c)}const u=t._zod.parse(l,c);if(u instanceof Promise){if(c.async===!1)throw new Ht;return u.then(d=>i(d,s,c))}return i(u,s,c)}}t["~standard"]={validate:i=>{var a;try{const l=hm(t,i);return l.success?{value:l.data}:{issues:(a=l.error)==null?void 0:a.issues}}catch{return fm(t,i).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),Dn=E("$ZodString",(t,e)=>{var r;se.init(t,e),t._zod.pattern=[...((r=t==null?void 0:t._zod.bag)==null?void 0:r.patterns)??[]].pop()??qm(t._zod.bag),t._zod.parse=(s,n)=>{if(e.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:t}),s}}),re=E("$ZodStringFormat",(t,e)=>{Ps.init(t,e),Dn.init(t,e)}),cp=E("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=Tm),re.init(t,e)}),up=E("$ZodUUID",(t,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Ro(s))}else e.pattern??(e.pattern=Ro());re.init(t,e)}),dp=E("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=Pm),re.init(t,e)}),hp=E("$ZodURL",(t,e)=>{re.init(t,e),t._zod.check=r=>{try{const s=r.value.trim(),n=new URL(s);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Mm.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=n.href:r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),fp=E("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=Rm()),re.init(t,e)}),mp=E("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=Em),re.init(t,e)}),pp=E("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=_m),re.init(t,e)}),gp=E("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=km),re.init(t,e)}),yp=E("$ZodULID",(t,e)=>{e.pattern??(e.pattern=jm),re.init(t,e)}),bp=E("$ZodXID",(t,e)=>{e.pattern??(e.pattern=Nm),re.init(t,e)}),vp=E("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=Sm),re.init(t,e)}),xp=E("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=Bm(e)),re.init(t,e)}),wp=E("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=Fm),re.init(t,e)}),_p=E("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=Um(e)),re.init(t,e)}),kp=E("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=Cm),re.init(t,e)}),jp=E("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=Im),re.init(t,e),t._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv4"})}),Np=E("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=$m),re.init(t,e),t._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv6"}),t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),Sp=E("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=Om),re.init(t,e)}),Ep=E("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=zm),re.init(t,e),t._zod.check=r=>{const[s,n]=r.value.split("/");try{if(!n)throw new Error;const i=Number(n);if(`${i}`!==n)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function Ca(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Cp=E("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=Lm),re.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),t._zod.check=r=>{Ca(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function Tp(t){if(!_a.test(t))return!1;const e=t.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return Ca(r)}const Pp=E("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=_a),re.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),t._zod.check=r=>{Tp(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),Ap=E("$ZodE164",(t,e)=>{e.pattern??(e.pattern=Dm),re.init(t,e)});function Rp(t,e=null){try{const r=t.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const n=JSON.parse(atob(s));return!("typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||e&&(!("alg"in n)||n.alg!==e))}catch{return!1}}const Ip=E("$ZodJWT",(t,e)=>{re.init(t,e),t._zod.check=r=>{Rp(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),Ta=E("$ZodNumber",(t,e)=>{se.init(t,e),t._zod.pattern=t._zod.bag.pattern??Wm,t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}const n=r.value;if(typeof n=="number"&&!Number.isNaN(n)&&Number.isFinite(n))return r;const i=typeof n=="number"?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:n,inst:t,...i?{received:i}:{}}),r}}),$p=E("$ZodNumber",(t,e)=>{Km.init(t,e),Ta.init(t,e)}),Op=E("$ZodBoolean",(t,e)=>{se.init(t,e),t._zod.pattern=Ym,t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=!!r.value}catch{}const n=r.value;return typeof n=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:t}),r}}),zp=E("$ZodAny",(t,e)=>{se.init(t,e),t._zod.parse=r=>r}),Lp=E("$ZodUnknown",(t,e)=>{se.init(t,e),t._zod.parse=r=>r}),Mp=E("$ZodNever",(t,e)=>{se.init(t,e),t._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)});function Io(t,e,r){t.issues.length&&e.issues.push(...Wt(r,t.issues)),e.value[r]=t.value}const Dp=E("$ZodArray",(t,e)=>{se.init(t,e),t._zod.parse=(r,s)=>{const n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:t}),r;r.value=Array(n.length);const i=[];for(let a=0;a<n.length;a++){const l=n[a],c=e.element._zod.run({value:l,issues:[]},s);c instanceof Promise?i.push(c.then(u=>Io(u,r,a))):Io(c,r,a)}return i.length?Promise.all(i).then(()=>r):r}});function ps(t,e,r,s){t.issues.length&&e.issues.push(...Wt(r,t.issues)),t.value===void 0?r in s&&(e.value[r]=void 0):e.value[r]=t.value}function Pa(t){const e=Object.keys(t.shape);for(const s of e)if(!t.shape[s]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const r=tm(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}function Aa(t,e,r,s,n,i){const a=[],l=n.keySet,c=n.catchall._zod,u=c.def.type;for(const d of Object.keys(e)){if(l.has(d))continue;if(u==="never"){a.push(d);continue}const h=c.run({value:e[d],issues:[]},s);h instanceof Promise?t.push(h.then(m=>ps(m,r,d,e))):ps(h,r,d,e)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:i}),t.length?Promise.all(t).then(()=>r):r}const Fp=E("$ZodObject",(t,e)=>{se.init(t,e);const r=In(()=>Pa(e));J(t._zod,"propValues",()=>{const a=e.shape,l={};for(const c in a){const u=a[c]._zod;if(u.values){l[c]??(l[c]=new Set);for(const d of u.values)l[c].add(d)}}return l});const s=ms,n=e.catchall;let i;t._zod.parse=(a,l)=>{i??(i=r.value);const c=a.value;if(!s(c))return a.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),a;a.value={};const u=[],d=i.shape;for(const h of i.keys){const p=d[h]._zod.run({value:c[h],issues:[]},l);p instanceof Promise?u.push(p.then(g=>ps(g,a,h,c))):ps(p,a,h,c)}return n?Aa(u,c,a,l,r.value,t):u.length?Promise.all(u).then(()=>a):a}}),Up=E("$ZodObjectJIT",(t,e)=>{Fp.init(t,e);const r=t._zod.parse,s=In(()=>Pa(e)),n=m=>{const p=new ap(["shape","payload","ctx"]),g=s.value,x=v=>{const _=Ao(v);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};p.write("const input = payload.value;");const y=Object.create(null);let w=0;for(const v of g.keys)y[v]=`key_${w++}`;p.write("const newResult = {}");for(const v of g.keys){const _=y[v],R=Ao(v);p.write(`const ${_} = ${x(v)};`),p.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${R}, ...iss.path] : [${R}]
          })));
        }
        
        if (${_}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${_}.value;
        }
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const N=p.compile();return(v,_)=>N(m,v,_)};let i;const a=ms,l=!ga.jitless,u=l&&Xf.value,d=e.catchall;let h;t._zod.parse=(m,p)=>{h??(h=s.value);const g=m.value;return a(g)?l&&u&&(p==null?void 0:p.async)===!1&&p.jitless!==!0?(i||(i=n(e.shape)),m=i(m,p),d?Aa([],g,m,p,h,t):m):r(m,p):(m.issues.push({expected:"object",code:"invalid_type",input:g,inst:t}),m)}});function $o(t,e,r,s){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const n=t.filter(i=>!Zt(i));return n.length===1?(e.value=n[0].value,n[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(i=>i.issues.map(a=>bt(a,s,yt())))}),e)}const Bp=E("$ZodUnion",(t,e)=>{se.init(t,e),J(t._zod,"optin",()=>e.options.some(n=>n._zod.optin==="optional")?"optional":void 0),J(t._zod,"optout",()=>e.options.some(n=>n._zod.optout==="optional")?"optional":void 0),J(t._zod,"values",()=>{if(e.options.every(n=>n._zod.values))return new Set(e.options.flatMap(n=>Array.from(n._zod.values)))}),J(t._zod,"pattern",()=>{if(e.options.every(n=>n._zod.pattern)){const n=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${n.map(i=>On(i.source)).join("|")})$`)}});const r=e.options.length===1,s=e.options[0]._zod.run;t._zod.parse=(n,i)=>{if(r)return s(n,i);let a=!1;const l=[];for(const c of e.options){const u=c._zod.run({value:n.value,issues:[]},i);if(u instanceof Promise)l.push(u),a=!0;else{if(u.issues.length===0)return u;l.push(u)}}return a?Promise.all(l).then(c=>$o(c,n,t,i)):$o(l,n,t,i)}}),qp=E("$ZodIntersection",(t,e)=>{se.init(t,e),t._zod.parse=(r,s)=>{const n=r.value,i=e.left._zod.run({value:n,issues:[]},s),a=e.right._zod.run({value:n,issues:[]},s);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([c,u])=>Oo(r,c,u)):Oo(r,i,a)}});function dn(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(nr(t)&&nr(e)){const r=Object.keys(e),s=Object.keys(t).filter(i=>r.indexOf(i)!==-1),n={...t,...e};for(const i of s){const a=dn(t[i],e[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};n[i]=a.data}return{valid:!0,data:n}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<t.length;s++){const n=t[s],i=e[s],a=dn(n,i);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Oo(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),Zt(t))return t;const s=dn(e.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return t.value=s.data,t}const Zp=E("$ZodRecord",(t,e)=>{se.init(t,e),t._zod.parse=(r,s)=>{const n=r.value;if(!nr(n))return r.issues.push({expected:"record",code:"invalid_type",input:n,inst:t}),r;const i=[];if(e.keyType._zod.values){const a=e.keyType._zod.values;r.value={};for(const c of a)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){const u=e.valueType._zod.run({value:n[c],issues:[]},s);u instanceof Promise?i.push(u.then(d=>{d.issues.length&&r.issues.push(...Wt(c,d.issues)),r.value[c]=d.value})):(u.issues.length&&r.issues.push(...Wt(c,u.issues)),r.value[c]=u.value)}let l;for(const c in n)a.has(c)||(l=l??[],l.push(c));l&&l.length>0&&r.issues.push({code:"unrecognized_keys",input:n,inst:t,keys:l})}else{r.value={};for(const a of Reflect.ownKeys(n)){if(a==="__proto__")continue;const l=e.keyType._zod.run({value:a,issues:[]},s);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(u=>bt(u,s,yt())),input:a,path:[a],inst:t}),r.value[l.value]=l.value;continue}const c=e.valueType._zod.run({value:n[a],issues:[]},s);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&r.issues.push(...Wt(a,u.issues)),r.value[l.value]=u.value})):(c.issues.length&&r.issues.push(...Wt(a,c.issues)),r.value[l.value]=c.value)}}return i.length?Promise.all(i).then(()=>r):r}}),Wp=E("$ZodEnum",(t,e)=>{se.init(t,e);const r=Kf(e.entries),s=new Set(r);t._zod.values=s,t._zod.pattern=new RegExp(`^(${r.filter(n=>em.has(typeof n)).map(n=>typeof n=="string"?Es(n):n.toString()).join("|")})$`),t._zod.parse=(n,i)=>{const a=n.value;return s.has(a)||n.issues.push({code:"invalid_value",values:r,input:a,inst:t}),n}}),Yp=E("$ZodTransform",(t,e)=>{se.init(t,e),t._zod.parse=(r,s)=>{if(s.direction==="backward")throw new pa(t.constructor.name);const n=e.transform(r.value,r);if(s.async)return(n instanceof Promise?n:Promise.resolve(n)).then(a=>(r.value=a,r));if(n instanceof Promise)throw new Ht;return r.value=n,r}});function zo(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const Hp=E("$ZodOptional",(t,e)=>{se.init(t,e),t._zod.optin="optional",t._zod.optout="optional",J(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),J(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${On(r.source)})?$`):void 0}),t._zod.parse=(r,s)=>{if(e.innerType._zod.optin==="optional"){const n=e.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>zo(i,r.value)):zo(n,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,s)}}),Vp=E("$ZodNullable",(t,e)=>{se.init(t,e),J(t._zod,"optin",()=>e.innerType._zod.optin),J(t._zod,"optout",()=>e.innerType._zod.optout),J(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${On(r.source)}|null)$`):void 0}),J(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,s)=>r.value===null?r:e.innerType._zod.run(r,s)}),Gp=E("$ZodDefault",(t,e)=>{se.init(t,e),t._zod.optin="optional",J(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,s)=>{if(s.direction==="backward")return e.innerType._zod.run(r,s);if(r.value===void 0)return r.value=e.defaultValue,r;const n=e.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>Lo(i,e)):Lo(n,e)}});function Lo(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const Kp=E("$ZodPrefault",(t,e)=>{se.init(t,e),t._zod.optin="optional",J(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,s)=>(s.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,s))}),Jp=E("$ZodNonOptional",(t,e)=>{se.init(t,e),J(t._zod,"values",()=>{const r=e.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),t._zod.parse=(r,s)=>{const n=e.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>Mo(i,t)):Mo(n,t)}});function Mo(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const Qp=E("$ZodCatch",(t,e)=>{se.init(t,e),J(t._zod,"optin",()=>e.innerType._zod.optin),J(t._zod,"optout",()=>e.innerType._zod.optout),J(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,s)=>{if(s.direction==="backward")return e.innerType._zod.run(r,s);const n=e.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(a=>bt(a,s,yt()))},input:r.value}),r.issues=[]),r)):(r.value=n.value,n.issues.length&&(r.value=e.catchValue({...r,error:{issues:n.issues.map(i=>bt(i,s,yt()))},input:r.value}),r.issues=[]),r)}}),Xp=E("$ZodPipe",(t,e)=>{se.init(t,e),J(t._zod,"values",()=>e.in._zod.values),J(t._zod,"optin",()=>e.in._zod.optin),J(t._zod,"optout",()=>e.out._zod.optout),J(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,s)=>{if(s.direction==="backward"){const i=e.out._zod.run(r,s);return i instanceof Promise?i.then(a=>Xr(a,e.in,s)):Xr(i,e.in,s)}const n=e.in._zod.run(r,s);return n instanceof Promise?n.then(i=>Xr(i,e.out,s)):Xr(n,e.out,s)}});function Xr(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}const eg=E("$ZodReadonly",(t,e)=>{se.init(t,e),J(t._zod,"propValues",()=>e.innerType._zod.propValues),J(t._zod,"values",()=>e.innerType._zod.values),J(t._zod,"optin",()=>e.innerType._zod.optin),J(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(r,s)=>{if(s.direction==="backward")return e.innerType._zod.run(r,s);const n=e.innerType._zod.run(r,s);return n instanceof Promise?n.then(Do):Do(n)}});function Do(t){return t.value=Object.freeze(t.value),t}const tg=E("$ZodCustom",(t,e)=>{je.init(t,e),se.init(t,e),t._zod.parse=(r,s)=>r,t._zod.check=r=>{const s=r.value,n=e.fn(s);if(n instanceof Promise)return n.then(i=>Fo(i,r,s,t));Fo(n,r,s,t)}});function Fo(t,e,r,s){if(!t){const n={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(n.params=s._zod.def.params),e.issues.push(Ar(n))}}class rg{constructor(){this._map=new Map,this._idmap=new Map}add(e,...r){const s=r[0];if(this._map.set(e,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){const r=e._zod.parent;if(r){const s={...this.get(r)??{}};delete s.id;const n={...s,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function sg(){return new rg}const es=sg();function ng(t,e){return new t({type:"string",...D(e)})}function og(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...D(e)})}function Uo(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...D(e)})}function ig(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...D(e)})}function ag(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...D(e)})}function lg(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...D(e)})}function cg(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...D(e)})}function ug(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...D(e)})}function dg(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...D(e)})}function hg(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...D(e)})}function fg(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...D(e)})}function mg(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...D(e)})}function pg(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...D(e)})}function gg(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...D(e)})}function yg(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...D(e)})}function bg(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...D(e)})}function vg(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...D(e)})}function xg(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...D(e)})}function wg(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...D(e)})}function _g(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...D(e)})}function kg(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...D(e)})}function jg(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...D(e)})}function Ng(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...D(e)})}function Sg(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...D(e)})}function Eg(t,e){return new t({type:"string",format:"date",check:"string_format",...D(e)})}function Cg(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...D(e)})}function Tg(t,e){return new t({type:"string",format:"duration",check:"string_format",...D(e)})}function Pg(t,e){return new t({type:"number",checks:[],...D(e)})}function Ag(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...D(e)})}function Rg(t,e){return new t({type:"boolean",...D(e)})}function Ig(t){return new t({type:"any"})}function $g(t){return new t({type:"unknown"})}function Og(t,e){return new t({type:"never",...D(e)})}function Bo(t,e){return new Sa({check:"less_than",...D(e),value:t,inclusive:!1})}function Ws(t,e){return new Sa({check:"less_than",...D(e),value:t,inclusive:!0})}function qo(t,e){return new Ea({check:"greater_than",...D(e),value:t,inclusive:!1})}function Ys(t,e){return new Ea({check:"greater_than",...D(e),value:t,inclusive:!0})}function Zo(t,e){return new Gm({check:"multiple_of",...D(e),value:t})}function Ra(t,e){return new Jm({check:"max_length",...D(e),maximum:t})}function gs(t,e){return new Qm({check:"min_length",...D(e),minimum:t})}function Ia(t,e){return new Xm({check:"length_equals",...D(e),length:t})}function zg(t,e){return new ep({check:"string_format",format:"regex",...D(e),pattern:t})}function Lg(t){return new tp({check:"string_format",format:"lowercase",...D(t)})}function Mg(t){return new rp({check:"string_format",format:"uppercase",...D(t)})}function Dg(t,e){return new sp({check:"string_format",format:"includes",...D(e),includes:t})}function Fg(t,e){return new np({check:"string_format",format:"starts_with",...D(e),prefix:t})}function Ug(t,e){return new op({check:"string_format",format:"ends_with",...D(e),suffix:t})}function Br(t){return new ip({check:"overwrite",tx:t})}function Bg(t){return Br(e=>e.normalize(t))}function qg(){return Br(t=>t.trim())}function Zg(){return Br(t=>t.toLowerCase())}function Wg(){return Br(t=>t.toUpperCase())}function Yg(t,e,r){return new t({type:"array",element:e,...D(r)})}function Hg(t,e,r){return new t({type:"custom",check:"custom",fn:e,...D(r)})}function Vg(t){const e=Gg(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(Ar(s,r.value,e._zod.def));else{const n=s;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=e),n.continue??(n.continue=!e._zod.def.abort),r.issues.push(Ar(n))}},t(r.value,r)));return e}function Gg(t,e){const r=new je({check:"custom",...D(e)});return r._zod.check=t,r}const Kg=E("ZodISODateTime",(t,e)=>{xp.init(t,e),ne.init(t,e)});function Jg(t){return Sg(Kg,t)}const Qg=E("ZodISODate",(t,e)=>{wp.init(t,e),ne.init(t,e)});function Xg(t){return Eg(Qg,t)}const ey=E("ZodISOTime",(t,e)=>{_p.init(t,e),ne.init(t,e)});function ty(t){return Cg(ey,t)}const ry=E("ZodISODuration",(t,e)=>{kp.init(t,e),ne.init(t,e)});function sy(t){return Tg(ry,t)}const ny=(t,e)=>{xa.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>dm(t,r)},flatten:{value:r=>um(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,un,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,un,2)}},isEmpty:{get(){return t.issues.length===0}}})},Te=E("ZodError",ny,{Parent:Error}),oy=Ln(Te),iy=Mn(Te),ay=Cs(Te),ly=Ts(Te),cy=mm(Te),uy=pm(Te),dy=gm(Te),hy=ym(Te),fy=bm(Te),my=vm(Te),py=xm(Te),gy=wm(Te),ae=E("ZodType",(t,e)=>(se.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone({...e,checks:[...e.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),t.clone=(r,s)=>wt(t,r,s),t.brand=()=>t,t.register=(r,s)=>(r.add(t,s),t),t.parse=(r,s)=>oy(t,r,s,{callee:t.parse}),t.safeParse=(r,s)=>ay(t,r,s),t.parseAsync=async(r,s)=>iy(t,r,s,{callee:t.parseAsync}),t.safeParseAsync=async(r,s)=>ly(t,r,s),t.spa=t.safeParseAsync,t.encode=(r,s)=>cy(t,r,s),t.decode=(r,s)=>uy(t,r,s),t.encodeAsync=async(r,s)=>dy(t,r,s),t.decodeAsync=async(r,s)=>hy(t,r,s),t.safeEncode=(r,s)=>fy(t,r,s),t.safeDecode=(r,s)=>my(t,r,s),t.safeEncodeAsync=async(r,s)=>py(t,r,s),t.safeDecodeAsync=async(r,s)=>gy(t,r,s),t.refine=(r,s)=>t.check(lb(r,s)),t.superRefine=r=>t.check(cb(r)),t.overwrite=r=>t.check(Br(r)),t.optional=()=>Vo(t),t.nullable=()=>Go(t),t.nullish=()=>Vo(Go(t)),t.nonoptional=r=>tb(t,r),t.array=()=>Bn(t),t.or=r=>Zy([t,r]),t.and=r=>Yy(t,r),t.transform=r=>Ko(t,Gy(r)),t.default=r=>Qy(t,r),t.prefault=r=>eb(t,r),t.catch=r=>sb(t,r),t.pipe=r=>Ko(t,r),t.readonly=()=>ib(t),t.describe=r=>{const s=t.clone();return es.add(s,{description:r}),s},Object.defineProperty(t,"description",{get(){var r;return(r=es.get(t))==null?void 0:r.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return es.get(t);const s=t.clone();return es.add(s,r[0]),s},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),$a=E("_ZodString",(t,e)=>{Dn.init(t,e),ae.init(t,e);const r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...s)=>t.check(zg(...s)),t.includes=(...s)=>t.check(Dg(...s)),t.startsWith=(...s)=>t.check(Fg(...s)),t.endsWith=(...s)=>t.check(Ug(...s)),t.min=(...s)=>t.check(gs(...s)),t.max=(...s)=>t.check(Ra(...s)),t.length=(...s)=>t.check(Ia(...s)),t.nonempty=(...s)=>t.check(gs(1,...s)),t.lowercase=s=>t.check(Lg(s)),t.uppercase=s=>t.check(Mg(s)),t.trim=()=>t.check(qg()),t.normalize=(...s)=>t.check(Bg(...s)),t.toLowerCase=()=>t.check(Zg()),t.toUpperCase=()=>t.check(Wg())}),yy=E("ZodString",(t,e)=>{Dn.init(t,e),$a.init(t,e),t.email=r=>t.check(og(by,r)),t.url=r=>t.check(ug(vy,r)),t.jwt=r=>t.check(Ng($y,r)),t.emoji=r=>t.check(dg(xy,r)),t.guid=r=>t.check(Uo(Wo,r)),t.uuid=r=>t.check(ig(ts,r)),t.uuidv4=r=>t.check(ag(ts,r)),t.uuidv6=r=>t.check(lg(ts,r)),t.uuidv7=r=>t.check(cg(ts,r)),t.nanoid=r=>t.check(hg(wy,r)),t.guid=r=>t.check(Uo(Wo,r)),t.cuid=r=>t.check(fg(_y,r)),t.cuid2=r=>t.check(mg(ky,r)),t.ulid=r=>t.check(pg(jy,r)),t.base64=r=>t.check(_g(Ay,r)),t.base64url=r=>t.check(kg(Ry,r)),t.xid=r=>t.check(gg(Ny,r)),t.ksuid=r=>t.check(yg(Sy,r)),t.ipv4=r=>t.check(bg(Ey,r)),t.ipv6=r=>t.check(vg(Cy,r)),t.cidrv4=r=>t.check(xg(Ty,r)),t.cidrv6=r=>t.check(wg(Py,r)),t.e164=r=>t.check(jg(Iy,r)),t.datetime=r=>t.check(Jg(r)),t.date=r=>t.check(Xg(r)),t.time=r=>t.check(ty(r)),t.duration=r=>t.check(sy(r))});function T(t){return ng(yy,t)}const ne=E("ZodStringFormat",(t,e)=>{re.init(t,e),$a.init(t,e)}),by=E("ZodEmail",(t,e)=>{dp.init(t,e),ne.init(t,e)}),Wo=E("ZodGUID",(t,e)=>{cp.init(t,e),ne.init(t,e)}),ts=E("ZodUUID",(t,e)=>{up.init(t,e),ne.init(t,e)}),vy=E("ZodURL",(t,e)=>{hp.init(t,e),ne.init(t,e)}),xy=E("ZodEmoji",(t,e)=>{fp.init(t,e),ne.init(t,e)}),wy=E("ZodNanoID",(t,e)=>{mp.init(t,e),ne.init(t,e)}),_y=E("ZodCUID",(t,e)=>{pp.init(t,e),ne.init(t,e)}),ky=E("ZodCUID2",(t,e)=>{gp.init(t,e),ne.init(t,e)}),jy=E("ZodULID",(t,e)=>{yp.init(t,e),ne.init(t,e)}),Ny=E("ZodXID",(t,e)=>{bp.init(t,e),ne.init(t,e)}),Sy=E("ZodKSUID",(t,e)=>{vp.init(t,e),ne.init(t,e)}),Ey=E("ZodIPv4",(t,e)=>{jp.init(t,e),ne.init(t,e)}),Cy=E("ZodIPv6",(t,e)=>{Np.init(t,e),ne.init(t,e)}),Ty=E("ZodCIDRv4",(t,e)=>{Sp.init(t,e),ne.init(t,e)}),Py=E("ZodCIDRv6",(t,e)=>{Ep.init(t,e),ne.init(t,e)}),Ay=E("ZodBase64",(t,e)=>{Cp.init(t,e),ne.init(t,e)}),Ry=E("ZodBase64URL",(t,e)=>{Pp.init(t,e),ne.init(t,e)}),Iy=E("ZodE164",(t,e)=>{Ap.init(t,e),ne.init(t,e)}),$y=E("ZodJWT",(t,e)=>{Ip.init(t,e),ne.init(t,e)}),Oa=E("ZodNumber",(t,e)=>{Ta.init(t,e),ae.init(t,e),t.gt=(s,n)=>t.check(qo(s,n)),t.gte=(s,n)=>t.check(Ys(s,n)),t.min=(s,n)=>t.check(Ys(s,n)),t.lt=(s,n)=>t.check(Bo(s,n)),t.lte=(s,n)=>t.check(Ws(s,n)),t.max=(s,n)=>t.check(Ws(s,n)),t.int=s=>t.check(Yo(s)),t.safe=s=>t.check(Yo(s)),t.positive=s=>t.check(qo(0,s)),t.nonnegative=s=>t.check(Ys(0,s)),t.negative=s=>t.check(Bo(0,s)),t.nonpositive=s=>t.check(Ws(0,s)),t.multipleOf=(s,n)=>t.check(Zo(s,n)),t.step=(s,n)=>t.check(Zo(s,n)),t.finite=()=>t;const r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function Je(t){return Pg(Oa,t)}const Oy=E("ZodNumberFormat",(t,e)=>{$p.init(t,e),Oa.init(t,e)});function Yo(t){return Ag(Oy,t)}const zy=E("ZodBoolean",(t,e)=>{Op.init(t,e),ae.init(t,e)});function Fn(t){return Rg(zy,t)}const Ly=E("ZodAny",(t,e)=>{zp.init(t,e),ae.init(t,e)});function Un(){return Ig(Ly)}const My=E("ZodUnknown",(t,e)=>{Lp.init(t,e),ae.init(t,e)});function Ho(){return $g(My)}const Dy=E("ZodNever",(t,e)=>{Mp.init(t,e),ae.init(t,e)});function Fy(t){return Og(Dy,t)}const Uy=E("ZodArray",(t,e)=>{Dp.init(t,e),ae.init(t,e),t.element=e.element,t.min=(r,s)=>t.check(gs(r,s)),t.nonempty=r=>t.check(gs(1,r)),t.max=(r,s)=>t.check(Ra(r,s)),t.length=(r,s)=>t.check(Ia(r,s)),t.unwrap=()=>t.element});function Bn(t,e){return Yg(Uy,t,e)}const By=E("ZodObject",(t,e)=>{Up.init(t,e),ae.init(t,e),J(t,"shape",()=>e.shape),t.keyof=()=>Q(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Ho()}),t.loose=()=>t.clone({...t._zod.def,catchall:Ho()}),t.strict=()=>t.clone({...t._zod.def,catchall:Fy()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>om(t,r),t.safeExtend=r=>im(t,r),t.merge=r=>am(t,r),t.pick=r=>sm(t,r),t.omit=r=>nm(t,r),t.partial=(...r)=>lm(za,t,r[0]),t.required=(...r)=>cm(La,t,r[0])});function xe(t,e){const r={type:"object",get shape(){return xt(this,"shape",t?Qf(t):{}),this.shape},...D(e)};return new By(r)}const qy=E("ZodUnion",(t,e)=>{Bp.init(t,e),ae.init(t,e),t.options=e.options});function Zy(t,e){return new qy({type:"union",options:t,...D(e)})}const Wy=E("ZodIntersection",(t,e)=>{qp.init(t,e),ae.init(t,e)});function Yy(t,e){return new Wy({type:"intersection",left:t,right:e})}const Hy=E("ZodRecord",(t,e)=>{Zp.init(t,e),ae.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function mr(t,e,r){return new Hy({type:"record",keyType:t,valueType:e,...D(r)})}const hn=E("ZodEnum",(t,e)=>{Wp.init(t,e),ae.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const r=new Set(Object.keys(e.entries));t.extract=(s,n)=>{const i={};for(const a of s)if(r.has(a))i[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new hn({...e,checks:[],...D(n),entries:i})},t.exclude=(s,n)=>{const i={...e.entries};for(const a of s)if(r.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new hn({...e,checks:[],...D(n),entries:i})}});function Q(t,e){const r=Array.isArray(t)?Object.fromEntries(t.map(s=>[s,s])):t;return new hn({type:"enum",entries:r,...D(e)})}const Vy=E("ZodTransform",(t,e)=>{Yp.init(t,e),ae.init(t,e),t._zod.parse=(r,s)=>{if(s.direction==="backward")throw new pa(t.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Ar(i,r.value,e));else{const a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),r.issues.push(Ar(a))}};const n=e.transform(r.value,r);return n instanceof Promise?n.then(i=>(r.value=i,r)):(r.value=n,r)}});function Gy(t){return new Vy({type:"transform",transform:t})}const za=E("ZodOptional",(t,e)=>{Hp.init(t,e),ae.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Vo(t){return new za({type:"optional",innerType:t})}const Ky=E("ZodNullable",(t,e)=>{Vp.init(t,e),ae.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Go(t){return new Ky({type:"nullable",innerType:t})}const Jy=E("ZodDefault",(t,e)=>{Gp.init(t,e),ae.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Qy(t,e){return new Jy({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():ba(e)}})}const Xy=E("ZodPrefault",(t,e)=>{Kp.init(t,e),ae.init(t,e),t.unwrap=()=>t._zod.def.innerType});function eb(t,e){return new Xy({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():ba(e)}})}const La=E("ZodNonOptional",(t,e)=>{Jp.init(t,e),ae.init(t,e),t.unwrap=()=>t._zod.def.innerType});function tb(t,e){return new La({type:"nonoptional",innerType:t,...D(e)})}const rb=E("ZodCatch",(t,e)=>{Qp.init(t,e),ae.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function sb(t,e){return new rb({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const nb=E("ZodPipe",(t,e)=>{Xp.init(t,e),ae.init(t,e),t.in=e.in,t.out=e.out});function Ko(t,e){return new nb({type:"pipe",in:t,out:e})}const ob=E("ZodReadonly",(t,e)=>{eg.init(t,e),ae.init(t,e),t.unwrap=()=>t._zod.def.innerType});function ib(t){return new ob({type:"readonly",innerType:t})}const ab=E("ZodCustom",(t,e)=>{tg.init(t,e),ae.init(t,e)});function lb(t,e={}){return Hg(ab,t,e)}function cb(t){return Vg(t)}const Ma=xe({id:T().uuid().optional(),name:T().min(1,"Product name is required").max(255,"Product name must be less than 255 characters").trim(),description:T().max(2e3,"Description must be less than 2000 characters").optional().nullable(),product_type:Q(["single_issue","bundle","chapter_pass","arc_pass"]).default("single_issue"),active:Fn().default(!0),work_id:T().uuid().optional().nullable(),content_grants:mr(T(),Un()).optional().nullable(),created_at:T().datetime().optional(),updated_at:T().datetime().optional()}),ub=xe({id:T().uuid().optional(),product_id:T().uuid(),currency:T().length(3,"Currency must be a 3-letter ISO code").toUpperCase(),unit_amount:Je().min(0,"Price cannot be negative").max(999999,"Price cannot exceed $9,999.99"),interval:Q(["one_time","month","year"]).optional().nullable(),nickname:T().max(100,"Nickname must be less than 100 characters").optional().nullable(),trial_days:Je().min(0,"Trial days cannot be negative").max(365,"Trial period cannot exceed 365 days").optional().nullable(),active:Fn().default(!0),created_at:T().datetime().optional(),updated_at:T().datetime().optional()});Ma.omit({id:!0,created_at:!0,updated_at:!0}).extend({prices:Bn(ub.omit({id:!0,product_id:!0,created_at:!0,updated_at:!0})).min(1,"At least one price is required")});Ma.partial().omit({id:!0,created_at:!0});xe({active:Q(["true","false"]).optional(),product_type:Q(["single_issue","bundle","chapter_pass","arc_pass"]).optional(),limit:T().transform(t=>parseInt(t)).refine(t=>t>0&&t<=100,"Limit must be between 1 and 100").default(50),offset:T().transform(t=>parseInt(t)).refine(t=>t>=0,"Offset must be non-negative").default(0),search:T().max(100).optional(),sort_by:Q(["created_at","name","price","updated_at"]).default("created_at"),sort_order:Q(["asc","desc"]).default("desc")});const db=xe({id:T().uuid(),username:T().min(3,"Username must be at least 3 characters").max(30,"Username must be less than 30 characters").regex(/^[a-zA-Z0-9_-]+$/,"Username can only contain letters, numbers, underscores, and hyphens").optional().nullable(),display_name:T().min(1,"Display name is required").max(100,"Display name must be less than 100 characters").trim().optional().nullable(),avatar_url:T().url("Invalid avatar URL").optional().nullable(),website:T().url("Invalid website URL").optional().nullable(),role:Q(["admin","support","accountant","user","super_admin"]).default("user"),beta_reader_status:Q(["not_applied","pending","approved","rejected"]).default("not_applied"),created_at:T().datetime().optional(),updated_at:T().datetime().optional()});xe({user_id:T().uuid(),books_read:Je().min(0,"Books read cannot be negative").default(0),reading_hours:Je().min(0,"Reading hours cannot be negative").default(0),achievements:Je().min(0,"Achievements cannot be negative").default(0),currently_reading:T().max(255).default("")});xe({id:T().uuid().optional(),user_id:T().uuid().optional().nullable(),email:T().email("Invalid email address"),full_name:T().min(2,"Full name must be at least 2 characters").max(100,"Full name must be less than 100 characters").trim(),time_zone:T().min(1,"Time zone is required").max(50,"Time zone must be less than 50 characters"),country:T().max(100,"Country must be less than 100 characters").optional().nullable(),devices:Bn(T()).optional().nullable(),hours_per_week:T().min(1,"Hours per week is required"),communication:T().min(10,"Communication preference must be at least 10 characters").max(500,"Communication preference must be less than 500 characters"),portal_use:T().min(10,"Portal use description must be at least 10 characters").max(500,"Portal use description must be less than 500 characters"),beta_commitment:T().min(20,"Beta commitment must be at least 20 characters").max(1e3,"Beta commitment must be less than 1000 characters"),interest_statement:T().min(50,"Interest statement must be at least 50 characters").max(2e3,"Interest statement must be less than 2000 characters"),feedback_philosophy:T().min(50,"Feedback philosophy must be at least 50 characters").max(2e3,"Feedback philosophy must be less than 2000 characters"),recent_reads:T().max(1e3,"Recent reads must be less than 1000 characters").optional().nullable(),prior_beta:T().max(1e3,"Prior beta experience must be less than 1000 characters").optional().nullable(),goodreads:T().url("Invalid Goodreads URL").optional().nullable(),demographics:T().max(500,"Demographics must be less than 500 characters").optional().nullable(),access_needs:T().max(500,"Access needs must be less than 500 characters").optional().nullable(),status:Q(["pending","approved","denied"]).default("pending"),created_at:T().datetime().optional()});db.partial().omit({id:!0,created_at:!0,role:!0});xe({user_id:T().uuid(),role:Q(["admin","support","accountant","user","super_admin"]),granted_by:T().uuid()});xe({role:Q(["admin","support","accountant","user","super_admin"]).optional(),beta_reader_status:Q(["not_applied","pending","approved","rejected"]).optional(),limit:T().transform(t=>parseInt(t)).refine(t=>t>0&&t<=100,"Limit must be between 1 and 100").default(50),offset:T().transform(t=>parseInt(t)).refine(t=>t>=0,"Offset must be non-negative").default(0),search:T().max(100).optional(),sort_by:Q(["created_at","username","display_name","role"]).default("created_at"),sort_order:Q(["asc","desc"]).default("desc")});xe({priceId:T().min(1,"Price ID is required"),successUrl:T().url("Invalid success URL"),cancelUrl:T().url("Invalid cancel URL"),customerEmail:T().email("Invalid customer email").optional(),productSlug:T().min(1,"Product slug is required").optional(),userId:T().uuid().optional(),quantity:Je().min(1,"Quantity must be at least 1").max(10,"Quantity cannot exceed 10").default(1),metadata:mr(T(),T()).optional()});const Da=xe({id:T().uuid().optional(),user_id:T().uuid(),plan_id:T().min(1,"Plan ID is required"),status:Q(["incomplete","incomplete_expired","trialing","active","past_due","canceled","unpaid","paused"]).default("active"),current_period_start:T().datetime().optional().nullable(),current_period_end:T().datetime().optional().nullable(),trial_start:T().datetime().optional().nullable(),trial_end:T().datetime().optional().nullable(),cancel_at_period_end:Fn().default(!1),metadata:mr(T(),Un()).optional().nullable(),created_at:T().datetime().optional(),updated_at:T().datetime().optional()});xe({amount:Je().min(50,"Amount must be at least $0.50"),currency:T().length(3,"Currency must be a 3-letter ISO code"),paymentMethodId:T().optional(),customerId:T().optional(),metadata:mr(T(),T()).optional()});xe({paymentIntentId:T().min(1,"Payment intent ID is required"),amount:Je().min(1,"Refund amount must be positive").optional(),reason:Q(["duplicate","fraudulent","requested_by_customer","expired_uncaptured_charge"]).default("requested_by_customer"),metadata:mr(T(),T()).optional()});xe({id:T().uuid().optional(),user_id:T().uuid().optional().nullable(),product_id:T().uuid(),price_id:T().uuid(),status:Q(["pending","completed","failed","refunded","canceled"]).default("pending"),amount_cents:Je().min(0,"Amount cannot be negative"),currency:T().length(3,"Currency must be a 3-letter ISO code"),customer_email:T().email("Invalid customer email").optional().nullable(),provider:Q(["stripe","paypal"]).default("stripe"),provider_session_id:T().optional().nullable(),provider_payment_intent_id:T().optional().nullable(),metadata:mr(T(),Un()).optional().nullable(),created_at:T().datetime().optional(),updated_at:T().datetime().optional()});Da.omit({id:!0,created_at:!0,updated_at:!0});Da.partial().omit({id:!0,user_id:!0,created_at:!0});xe({status:Q(["pending","completed","failed","refunded","canceled"]).optional(),provider:Q(["stripe","paypal"]).optional(),user_id:T().uuid().optional(),start_date:T().datetime().optional(),end_date:T().datetime().optional(),limit:T().transform(t=>parseInt(t)).refine(t=>t>0&&t<=100,"Limit must be between 1 and 100").default(50),offset:T().transform(t=>parseInt(t)).refine(t=>t>=0,"Offset must be non-negative").default(0),sort_by:Q(["created_at","amount_cents","status"]).default("created_at"),sort_order:Q(["asc","desc"]).default("desc")});xe({status:Q(["incomplete","incomplete_expired","trialing","active","past_due","canceled","unpaid","paused"]).optional(),user_id:T().uuid().optional(),plan_id:T().optional(),limit:T().transform(t=>parseInt(t)).refine(t=>t>0&&t<=100,"Limit must be between 1 and 100").default(50),offset:T().transform(t=>parseInt(t)).refine(t=>t>=0,"Offset must be non-negative").default(0),sort_by:Q(["created_at","current_period_end","status"]).default("created_at"),sort_order:Q(["asc","desc"]).default("desc")});const hb="_body_1luq5_11",fb="_patternShift_1luq5_1",mb="_sacredSymbols_1luq5_56",pb="_symbol_1luq5_65",gb="_floatSymbol_1luq5_1",yb="_portalContainer_1luq5_91",bb="_cornerOrnament_1luq5_139",vb="_topLeft_1luq5_159",xb="_topRight_1luq5_160",wb="_bottomLeft_1luq5_161",_b="_bottomRight_1luq5_162",kb="_header_1luq5_164",jb="_title_1luq5_169",Nb="_subtitle_1luq5_179",Sb="_sacredQuote_1luq5_188",Eb="_tabContainer_1luq5_201",Cb="_tab_1luq5_201",Tb="_activeTab_1luq5_226",Pb="_formContainer_1luq5_248",Ab="_activeForm_1luq5_252",Rb="_formGroup_1luq5_256",Ib="_formLabel_1luq5_261",$b="_formInput_1luq5_271",Ob="_passwordStrength_1luq5_297",zb="_visible_1luq5_308",Lb="_strengthBar_1luq5_312",Mb="_strengthWeak_1luq5_319",Db="_strengthFair_1luq5_320",Fb="_strengthGood_1luq5_321",Ub="_strengthStrong_1luq5_322",Bb="_strengthText_1luq5_324",qb="_actionBtn_1luq5_332",Zb="_secondaryActions_1luq5_378",Wb="_message_1luq5_413",Yb="_show_1luq5_426",Hb="_success_1luq5_431",Vb="_error_1luq5_437",Gb="_warning_1luq5_443",Kb="_loading_1luq5_450",Jb="_showLoading_1luq5_457",Qb="_spinner_1luq5_461",Xb="_spin_1luq5_461",ev="_sacredMethods_1luq5_478",tv="_sacredTitle_1luq5_483",rv="_sacredButtons_1luq5_492",sv="_sacredBtn_1luq5_499",nv="_invalid_1luq5_522",ov="_valid_1luq5_527",z={body:hb,patternShift:fb,sacredSymbols:mb,symbol:pb,floatSymbol:gb,portalContainer:yb,cornerOrnament:bb,topLeft:vb,topRight:xb,bottomLeft:wb,bottomRight:_b,header:kb,title:jb,subtitle:Nb,sacredQuote:Sb,tabContainer:Eb,tab:Cb,activeTab:Tb,formContainer:Pb,activeForm:Ab,formGroup:Rb,formLabel:Ib,formInput:$b,passwordStrength:Ob,visible:zb,strengthBar:Lb,strengthWeak:Mb,strengthFair:Db,strengthGood:Fb,strengthStrong:Ub,strengthText:Bb,actionBtn:qb,secondaryActions:Zb,message:Wb,show:Yb,success:Hb,error:Vb,warning:Gb,loading:Kb,showLoading:Jb,spinner:Qb,spin:Xb,sacredMethods:ev,sacredTitle:tv,sacredButtons:rv,sacredBtn:sv,invalid:nv,valid:ov},iv=()=>{const[t,e]=f.useState("login"),[r,s]=f.useState(null),[n,i]=f.useState(!1),[a,l]=f.useState(""),[c,u]=f.useState(""),[d,h]=f.useState(""),[m,p]=f.useState(""),[g,x]=f.useState(""),[y,w]=f.useState(""),[N,v]=f.useState(null),_=xs(),R=(A,k="info")=>{s({text:A,type:k});const I=setTimeout(()=>s(null),6e3);return()=>clearTimeout(I)},O=async A=>{if(A.preventDefault(),!a||!c){R("Please enter both email and password","error");return}i(!0);try{const{error:k}=await ue.auth.signInWithPassword({email:a,password:c});if(k)throw k;R("Login successful! Redirecting...","success"),_("/")}catch(k){const I=k instanceof Error?k.message:"Failed to sign in";R(I,"error")}finally{i(!1)}},L=async A=>{if(A.preventDefault(),m!==y){R("Passwords do not match","error");return}i(!0);try{const{error:k}=await ue.auth.signUp({email:d,password:m,options:{data:{display_name:g}}});if(k)throw k;R("Account created! Please check your email to confirm your account.","success"),e("login")}catch(k){const I=k instanceof Error?k.message:"Failed to create account";R(I,"error")}finally{i(!1)}},$=A=>{if(!A){v(null);return}let k=0;A.length>=8&&k++,/[A-Z]/.test(A)&&k++,/[a-z]/.test(A)&&k++,/[0-9]/.test(A)&&k++,/[^A-Za-z0-9]/.test(A)&&k++,A.length>=12&&k++;const I=[{text:"Weak",className:"weak"},{text:"Fair",className:"fair"},{text:"Good",className:"good"},{text:"Strong",className:"strong"},{text:"Very Strong",className:"very-strong"}],le=Math.min(k,I.length-1);v(I[le])},j=["☽","☿","♃","⊙","♆","⚯","☯","✧","◊","⬟"];return console.log("LoginPage styles object:",z),o.jsxs("div",{className:z.body,style:{fontFamily:"'Cormorant Garamond', serif",background:"linear-gradient(135deg, #8B4513 0%, #CD853F 25%, #DEB887 50%, #F4A460 75%, #D2691E 100%)",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:9999},children:[o.jsx("div",{className:z.sacredSymbols,children:Array.from({length:12},(A,k)=>o.jsx("div",{className:z.symbol,style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*20}s`,fontSize:`${1.5+Math.random()}em`},children:j[Math.floor(Math.random()*j.length)]},k))}),o.jsxs("div",{className:z.portalContainer,style:{background:"linear-gradient(145deg, #F5DEB3, #DEB887, #D2B48C)",border:"8px solid #8B4513",borderRadius:"20px",padding:"50px",width:"500px",maxWidth:"90vw",position:"relative",zIndex:10,boxShadow:"0 0 50px rgba(139, 69, 19, 0.4), inset 0 0 30px rgba(245, 222, 179, 0.3)",maxHeight:"90vh",overflowY:"auto"},children:[o.jsx("div",{className:`${z.cornerOrnament} ${z.topLeft}`}),o.jsx("div",{className:`${z.cornerOrnament} ${z.topRight}`}),o.jsx("div",{className:`${z.cornerOrnament} ${z.bottomLeft}`}),o.jsx("div",{className:`${z.cornerOrnament} ${z.bottomRight}`}),o.jsxs("div",{className:z.header,children:[o.jsx("h1",{className:z.title,children:"Zoroasterverse"}),o.jsx("p",{className:z.subtitle,children:"Sacred Portal of Ancient Wisdom"})]}),o.jsx("div",{className:z.sacredQuote,children:'"Truth is best (of all that is) good. As desired, what is being desired is truth for him who (represents) the best truth."'}),r&&o.jsx("div",{className:`${z.message} ${z[r.type]} ${z.show}`,children:r.text}),o.jsxs("div",{className:z.tabContainer,children:[o.jsx("button",{className:`${z.tab} ${t==="login"?z.activeTab:""}`,onClick:()=>e("login"),type:"button",children:"Sacred Entry"}),o.jsx("button",{className:`${z.tab} ${t==="signup"?z.activeTab:""}`,onClick:()=>e("signup"),type:"button",children:"Join the Light"})]}),o.jsx("div",{className:`${z.formContainer} ${t==="login"?z.activeForm:""}`,children:o.jsxs("form",{onSubmit:O,children:[o.jsxs("div",{className:z.formGroup,children:[o.jsx("label",{className:z.formLabel,htmlFor:"loginEmail",children:"Sacred Email"}),o.jsx("input",{className:z.formInput,type:"email",id:"loginEmail",value:a,onChange:A=>l(A.target.value),placeholder:"Enter your sacred email",required:!0,disabled:n})]}),o.jsxs("div",{className:z.formGroup,children:[o.jsx("label",{className:z.formLabel,htmlFor:"loginPassword",children:"Sacred Password"}),o.jsx("input",{className:z.formInput,type:"password",id:"loginPassword",value:c,onChange:A=>u(A.target.value),placeholder:"Enter your sacred password",required:!0,disabled:n})]}),o.jsx("button",{type:"submit",className:z.actionBtn,disabled:n,children:n?"Entering Sacred Realm...":"Enter Sacred Realm"}),o.jsx("div",{className:z.secondaryActions,children:o.jsx(lr,{to:"/forgot-password",children:"Forgotten Sacred Words?"})})]})}),o.jsx("div",{className:`${z.formContainer} ${t==="signup"?z.activeForm:""}`,children:o.jsxs("form",{onSubmit:L,children:[o.jsxs("div",{className:z.formGroup,children:[o.jsx("label",{className:z.formLabel,htmlFor:"signupDisplayName",children:"Sacred Name"}),o.jsx("input",{className:z.formInput,type:"text",id:"signupDisplayName",value:g,onChange:A=>x(A.target.value),placeholder:"Enter your sacred name",required:!0,disabled:n})]}),o.jsxs("div",{className:z.formGroup,children:[o.jsx("label",{className:z.formLabel,htmlFor:"signupEmail",children:"Sacred Email"}),o.jsx("input",{className:z.formInput,type:"email",id:"signupEmail",value:d,onChange:A=>h(A.target.value),placeholder:"your.sacred@email.com",required:!0,disabled:n})]}),o.jsxs("div",{className:z.formGroup,children:[o.jsx("label",{className:z.formLabel,htmlFor:"signupPassword",children:"Sacred Password"}),o.jsx("input",{className:z.formInput,type:"password",id:"signupPassword",value:m,onChange:A=>{p(A.target.value),$(A.target.value)},placeholder:"Create a sacred password",required:!0,disabled:n}),N&&o.jsxs("div",{className:`${z.passwordStrength} ${z.visible}`,children:[o.jsx("div",{className:`${z.strengthBar} ${z[`strength${N.className.charAt(0).toUpperCase()+N.className.slice(1)}`]}`}),o.jsxs("div",{className:z.strengthText,children:["Sacred Power: ",N.text]})]})]}),o.jsxs("div",{className:z.formGroup,children:[o.jsx("label",{className:z.formLabel,htmlFor:"confirmPassword",children:"Confirm Sacred Password"}),o.jsx("input",{className:z.formInput,type:"password",id:"confirmPassword",value:y,onChange:A=>w(A.target.value),placeholder:"Confirm your sacred password",required:!0,disabled:n})]}),o.jsx("button",{type:"submit",className:z.actionBtn,disabled:n,children:n?"Joining Sacred Realm...":"Join Sacred Realm"})]})}),o.jsxs("div",{className:z.sacredMethods,children:[o.jsx("div",{className:z.sacredTitle,children:"Sacred Methods"}),o.jsxs("div",{className:z.sacredButtons,children:[o.jsx("button",{className:z.sacredBtn,onClick:()=>R("Google sacred connection is not yet available","warning"),disabled:n,children:"Google Light"}),o.jsx("button",{className:z.sacredBtn,onClick:()=>R("GitHub sacred connection is not yet available","warning"),disabled:n,children:"GitHub Wisdom"})]})]}),n&&o.jsxs("div",{className:`${z.loading} ${n?z.showLoading:""}`,children:[o.jsx("span",{className:z.spinner}),"Connecting to Sacred Realm..."]})]})]})},av=()=>{const[t,e]=f.useState([]),[r,s]=f.useState(!0),[n,i]=f.useState(null),[a,l]=f.useState(""),[c,u]=f.useState("all"),[d,h]=f.useState(!1),[m,p]=f.useState(null),[g,x]=f.useState({name:"",title:"",description:"",product_type:"book",cover_image_url:"",active:!0,status:"draft"}),[y,w]=f.useState({amount:"",currency:"USD",interval:"",nickname:"",trial_period_days:0}),N=async()=>{try{s(!0);const k=await fetch("/api/products?include_prices=true");if(!k.ok)throw new Error("Failed to fetch products");const I=await k.json();e(I.products||[])}catch(k){i(k instanceof Error?k.message:"Failed to fetch products")}finally{s(!1)}};f.useEffect(()=>{N()},[]);const v=t.filter(k=>{const I=k.name.toLowerCase().includes(a.toLowerCase())||k.title.toLowerCase().includes(a.toLowerCase()),le=c==="all"||k.product_type===c;return I&&le}),_=async k=>{k.preventDefault();try{const I=m?`/api/products/${m.id}`:"/api/products",we=await fetch(I,{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!we.ok){const P=await we.json();throw new Error(P.message||"Failed to save product")}await N(),L(),h(!1)}catch(I){i(I instanceof Error?I.message:"Failed to save product")}},R=async k=>{if(confirm(`Are you sure you want to delete "${k.name}"? This will deactivate it in Stripe but not permanently delete it.`))try{if(!(await fetch(`/api/products/${k.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete product");await N()}catch(I){i(I instanceof Error?I.message:"Failed to delete product")}},O=async k=>{try{if(!(await fetch(`/api/products/${k.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!k.active})})).ok)throw new Error("Failed to update product");await N()}catch(I){i(I instanceof Error?I.message:"Failed to update product")}},L=()=>{x({name:"",title:"",description:"",product_type:"book",cover_image_url:"",active:!0,status:"draft"}),p(null)},$=k=>{p(k),x({name:k.name,title:k.title,description:k.description,product_type:k.product_type,cover_image_url:k.cover_image_url||"",active:k.active,status:k.status}),h(!0)},j=k=>{switch(k){case"book":return o.jsx(mt,{className:"w-4 h-4"});case"subscription":return o.jsx(Cr,{className:"w-4 h-4"});case"bundle":return o.jsx(It,{className:"w-4 h-4"});default:return o.jsx(gt,{className:"w-4 h-4"})}},A=(k,I)=>new Intl.NumberFormat("en-US",{style:"currency",currency:I.toUpperCase()}).format(k/100);return r?o.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[o.jsx(qe,{className:"w-8 h-8 animate-spin text-primary"}),o.jsx("span",{className:"ml-3 text-lg",children:"Loading products..."})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[o.jsx(It,{className:"w-8 h-8 text-primary"}),"Product Management"]}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your books, subscriptions, and bundles with integrated Stripe pricing"})]}),o.jsxs("button",{onClick:()=>{L(),h(!0)},className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[o.jsx(Tr,{className:"w-5 h-5"}),"Add Product"]})]}),n&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3",children:[o.jsx(Er,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsx("span",{className:"text-red-700 dark:text-red-400",children:n}),o.jsx("button",{onClick:()=>i(null),className:"ml-auto text-red-500 hover:text-red-600",children:o.jsx(pt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),o.jsx("input",{type:"text",placeholder:"Search products...",value:a,onChange:k=>l(k.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),o.jsxs("select",{value:c,onChange:k=>u(k.target.value),className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"all",children:"All Types"}),o.jsx("option",{value:"book",children:"Books"}),o.jsx("option",{value:"subscription",children:"Subscriptions"}),o.jsx("option",{value:"bundle",children:"Bundles"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(k=>o.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-lg transition-shadow",children:[o.jsx("div",{className:"aspect-[3/4] bg-gray-100 dark:bg-gray-800 rounded-lg mb-4 overflow-hidden",children:k.cover_image_url?o.jsx("img",{src:k.cover_image_url,alt:k.title,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:j(k.product_type)})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-foreground line-clamp-2",children:k.title}),o.jsxs("p",{className:"text-sm text-muted-foreground capitalize flex items-center gap-2 mt-1",children:[j(k.product_type),k.product_type]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:()=>O(k),className:`p-1.5 rounded-lg transition-colors ${k.active?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,title:k.active?"Active":"Inactive",children:k.active?o.jsx($t,{className:"w-4 h-4"}):o.jsx(ua,{className:"w-4 h-4"})})})]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:k.description||"No description available"}),o.jsxs("div",{className:"space-y-2",children:[k.prices&&k.prices.length>0?k.prices.slice(0,2).map(I=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:"text-muted-foreground",children:[I.nickname||"Standard",I.interval&&` (${I.interval}ly)`]}),o.jsx("span",{className:"font-medium text-foreground",children:A(I.amount_cents,I.currency)})]},I.id)):o.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No prices set"}),k.prices&&k.prices.length>2&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",k.prices.length-2," more prices"]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.status==="published"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":k.status==="draft"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:k.status}),o.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(k.updated_at).toLocaleDateString()})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[o.jsxs("button",{onClick:()=>$(k),className:"text-primary hover:text-primary-dark flex items-center gap-2 text-sm font-medium",children:[o.jsx(is,{className:"w-4 h-4"}),"Edit"]}),o.jsxs("button",{onClick:()=>R(k),className:"text-red-500 hover:text-red-600 flex items-center gap-2 text-sm font-medium",children:[o.jsx(Rn,{className:"w-4 h-4"}),"Delete"]})]})]})]},k.id))}),v.length===0&&!r&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(It,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No products found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:a||c!=="all"?"Try adjusting your search or filters":"Get started by creating your first product"}),o.jsx("button",{onClick:()=>{L(),h(!0)},className:"bg-primary text-white px-6 py-2 rounded-xl font-medium hover:bg-primary-dark transition-colors",children:"Create Product"})]}),d&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-background rounded-xl shadow-xl border border-border max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground",children:m?"Edit Product":"Create Product"}),o.jsx("button",{onClick:()=>{h(!1),L()},className:"text-muted-foreground hover:text-foreground",children:o.jsx(pt,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Product Name *"}),o.jsx("input",{type:"text",required:!0,value:g.name,onChange:k=>x({...g,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"Internal product name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Display Title *"}),o.jsx("input",{type:"text",required:!0,value:g.title,onChange:k=>x({...g,title:k.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"Public display title"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description"}),o.jsx("textarea",{value:g.description,onChange:k=>x({...g,description:k.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"Product description..."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Product Type"}),o.jsxs("select",{value:g.product_type,onChange:k=>x({...g,product_type:k.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"book",children:"Book (One-time purchase)"}),o.jsx("option",{value:"subscription",children:"Subscription"}),o.jsx("option",{value:"bundle",children:"Bundle"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Status"}),o.jsxs("select",{value:g.status,onChange:k=>x({...g,status:k.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"draft",children:"Draft"}),o.jsx("option",{value:"published",children:"Published"}),o.jsx("option",{value:"archived",children:"Archived"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Cover Image URL"}),o.jsx("input",{type:"url",value:g.cover_image_url,onChange:k=>x({...g,cover_image_url:k.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"https://example.com/cover.jpg"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"active",checked:g.active,onChange:k=>x({...g,active:k.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),o.jsx("label",{htmlFor:"active",className:"ml-2 text-sm font-medium text-foreground",children:"Product is active (visible to customers)"})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-border",children:[o.jsx("button",{type:"button",onClick:()=>{h(!1),L()},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium",children:"Cancel"}),o.jsxs("button",{type:"submit",className:"bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[o.jsx(da,{className:"w-4 h-4"}),m?"Update Product":"Create Product"]})]})]})]})})]})},lv=()=>{const[t,e]=f.useState("orders"),[r,s]=f.useState([]),[n,i]=f.useState([]),[a,l]=f.useState(!0),[c,u]=f.useState(null),[d,h]=f.useState(""),[m,p]=f.useState("all"),[g,x]=f.useState("all"),[y,w]=f.useState(null),[N,v]=f.useState(null),_=async()=>{try{const P=await fetch("/api/admin/orders?include_details=true");if(!P.ok)throw new Error("Failed to fetch orders");const Y=await P.json();s(Y.orders||[])}catch(P){u(P instanceof Error?P.message:"Failed to fetch orders")}},R=async()=>{try{const P=await fetch("/api/admin/subscriptions?include_details=true");if(!P.ok)throw new Error("Failed to fetch subscriptions");const Y=await P.json();i(Y.subscriptions||[])}catch(P){u(P instanceof Error?P.message:"Failed to fetch subscriptions")}},O=async()=>{try{l(!0),u(null),await Promise.all([_(),R()])}catch{u("Failed to fetch data")}finally{l(!1)}};f.useEffect(()=>{O()},[]);const L=r.filter(P=>{var oe,ce,Pe,me,C;const Y=P.id.toLowerCase().includes(d.toLowerCase())||((oe=P.customer_email)==null?void 0:oe.toLowerCase().includes(d.toLowerCase()))||((Pe=(ce=P.user)==null?void 0:ce.email)==null?void 0:Pe.toLowerCase().includes(d.toLowerCase()))||((C=(me=P.product)==null?void 0:me.title)==null?void 0:C.toLowerCase().includes(d.toLowerCase())),_e=m==="all"||P.status===m;return Y&&_e}),$=n.filter(P=>{var oe,ce;const Y=P.id.toLowerCase().includes(d.toLowerCase())||P.provider_subscription_id.toLowerCase().includes(d.toLowerCase())||((ce=(oe=P.user)==null?void 0:oe.email)==null?void 0:ce.toLowerCase().includes(d.toLowerCase())),_e=g==="all"||P.status===g;return Y&&_e}),j=(P,Y="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:Y.toUpperCase()}).format(P/100),A=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=P=>{switch(P){case"completed":return{color:"text-green-600",bg:"bg-green-100 dark:bg-green-900/20",icon:hs};case"pending":return{color:"text-yellow-600",bg:"bg-yellow-100 dark:bg-yellow-900/20",icon:xr};case"failed":return{color:"text-red-600",bg:"bg-red-100 dark:bg-red-900/20",icon:Gr};case"cancelled":return{color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-900/20",icon:Gr};case"expired":return{color:"text-orange-600",bg:"bg-orange-100 dark:bg-orange-900/20",icon:as};default:return{color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-900/20",icon:xr}}},I=P=>{switch(P){case"active":return{color:"text-green-600",bg:"bg-green-100 dark:bg-green-900/20",icon:hs};case"trialing":return{color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/20",icon:xr};case"past_due":return{color:"text-orange-600",bg:"bg-orange-100 dark:bg-orange-900/20",icon:as};case"canceled":return{color:"text-red-600",bg:"bg-red-100 dark:bg-red-900/20",icon:Gr};default:return{color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-900/20",icon:xr}}},le=async P=>{if(confirm("Are you sure you want to issue a refund for this order?"))try{if(!(await fetch(`/api/admin/orders/${P}/refund`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to process refund");await _(),w(null)}catch(Y){u(Y instanceof Error?Y.message:"Failed to process refund")}},we=async P=>{if(confirm("Are you sure you want to cancel this subscription?"))try{if(!(await fetch(`/api/admin/subscriptions/${P}/cancel`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to cancel subscription");await R(),v(null)}catch(Y){u(Y instanceof Error?Y.message:"Failed to cancel subscription")}};return a?o.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[o.jsx(qe,{className:"w-8 h-8 animate-spin text-primary"}),o.jsx("span",{className:"ml-3 text-lg",children:"Loading orders and subscriptions..."})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[o.jsx(Pr,{className:"w-8 h-8 text-primary"}),"Order Management"]}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Track and manage customer orders, subscriptions, and payments"})]}),o.jsxs("button",{onClick:O,className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[o.jsx(qe,{className:"w-5 h-5"}),"Refresh"]})]}),c&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3",children:[o.jsx(as,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsx("span",{className:"text-red-700 dark:text-red-400",children:c})]}),o.jsx("div",{className:"border-b border-border",children:o.jsxs("nav",{className:"-mb-px flex space-x-8",children:[o.jsxs("button",{onClick:()=>e("orders"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="orders"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Orders (",r.length,")"]}),o.jsxs("button",{onClick:()=>e("subscriptions"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="subscriptions"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Subscriptions (",n.length,")"]})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),o.jsx("input",{type:"text",placeholder:`Search ${t}...`,value:d,onChange:P=>h(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),o.jsxs("select",{value:t==="orders"?m:g,onChange:P=>{t==="orders"?p(P.target.value):x(P.target.value)},className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"all",children:"All Status"}),t==="orders"?o.jsxs(o.Fragment,{children:[o.jsx("option",{value:"completed",children:"Completed"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"failed",children:"Failed"}),o.jsx("option",{value:"cancelled",children:"Cancelled"}),o.jsx("option",{value:"expired",children:"Expired"})]}):o.jsxs(o.Fragment,{children:[o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"trialing",children:"Trialing"}),o.jsx("option",{value:"past_due",children:"Past Due"}),o.jsx("option",{value:"canceled",children:"Canceled"})]})]})]})]}),t==="orders"&&o.jsx("div",{className:"space-y-4",children:L.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Pr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No orders found"}),o.jsx("p",{className:"text-muted-foreground",children:d||m!=="all"?"Try adjusting your search or filters":"Orders will appear here when customers make purchases"})]}):o.jsx("div",{className:"grid gap-4",children:L.map(P=>{var oe,ce;const Y=k(P.status),_e=Y.icon;return o.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Order #",P.id.slice(-8)]}),o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y.bg} ${Y.color}`,children:[o.jsx(_e,{className:"w-3 h-3 mr-1"}),P.status]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-lg font-bold text-foreground",children:j(P.amount_cents,P.currency)}),o.jsx("p",{className:"text-sm text-muted-foreground",children:A(P.created_at)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Eo,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-foreground",children:P.customer_email||((oe=P.user)==null?void 0:oe.email)||"No email"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(It,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-foreground",children:((ce=P.product)==null?void 0:ce.title)||"Unknown Product"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_o,{className:"w-4 h-4 text-muted-foreground"}),o.jsxs("span",{className:"text-foreground capitalize",children:[P.provider," Payment"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:()=>w(P),className:"text-primary hover:text-primary-dark flex items-center gap-2 text-sm font-medium",children:[o.jsx($t,{className:"w-4 h-4"}),"View Details"]}),P.status==="completed"&&o.jsxs("button",{onClick:()=>le(P.id),className:"text-orange-600 hover:text-orange-700 flex items-center gap-2 text-sm font-medium",children:[o.jsx(Pn,{className:"w-4 h-4"}),"Refund"]})]}),P.provider_payment_intent_id&&o.jsxs("button",{onClick:()=>window.open(`https://dashboard.stripe.com/payments/${P.provider_payment_intent_id}`,"_blank"),className:"text-muted-foreground hover:text-foreground flex items-center gap-2 text-sm",children:[o.jsx(ko,{className:"w-4 h-4"}),"View in Stripe"]})]})]})})},P.id)})})}),t==="subscriptions"&&o.jsx("div",{className:"space-y-4",children:$.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Cr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No subscriptions found"}),o.jsx("p",{className:"text-muted-foreground",children:d||g!=="all"?"Try adjusting your search or filters":"Subscriptions will appear here when customers subscribe"})]}):o.jsx("div",{className:"grid gap-4",children:$.map(P=>{var oe,ce;const Y=I(P.status),_e=Y.icon;return o.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("h3",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[o.jsx(Cr,{className:"w-5 h-5 text-primary"}),"Subscription #",P.id.slice(-8)]}),o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y.bg} ${Y.color}`,children:[o.jsx(_e,{className:"w-3 h-3 mr-1"}),P.status]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created ",A(P.created_at)]}),P.current_period_end&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Next billing: ",A(P.current_period_end)]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Eo,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-foreground",children:((oe=P.user)==null?void 0:oe.email)||"No email"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Tn,{className:"w-4 h-4 text-muted-foreground"}),o.jsxs("span",{className:"text-foreground",children:[((ce=P.plan)==null?void 0:ce.interval)||"Unknown"," billing"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_o,{className:"w-4 h-4 text-muted-foreground"}),o.jsxs("span",{className:"text-foreground capitalize",children:[P.provider," Subscription"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:()=>v(P),className:"text-primary hover:text-primary-dark flex items-center gap-2 text-sm font-medium",children:[o.jsx($t,{className:"w-4 h-4"}),"View Details"]}),P.status==="active"&&!P.cancel_at_period_end&&o.jsxs("button",{onClick:()=>we(P.id),className:"text-red-600 hover:text-red-700 flex items-center gap-2 text-sm font-medium",children:[o.jsx(Gr,{className:"w-4 h-4"}),"Cancel"]})]}),P.provider_subscription_id&&o.jsxs("button",{onClick:()=>window.open(`https://dashboard.stripe.com/subscriptions/${P.provider_subscription_id}`,"_blank"),className:"text-muted-foreground hover:text-foreground flex items-center gap-2 text-sm",children:[o.jsx(ko,{className:"w-4 h-4"}),"View in Stripe"]})]})]})})},P.id)})})})]})},cv=()=>{const[t,e]=f.useState([]),[r,s]=f.useState(null),[n,i]=f.useState(!0),[a,l]=f.useState(null),[c,u]=f.useState(""),[d,h]=f.useState("all"),[m,p]=f.useState("sales"),[g,x]=f.useState("desc"),y=async()=>{try{const j=await fetch("/api/admin/inventory");if(!j.ok)throw new Error("Failed to fetch inventory data");const A=await j.json();e(A.inventory||[])}catch(j){l(j instanceof Error?j.message:"Failed to fetch inventory")}},w=async()=>{try{const j=await fetch("/api/admin/metrics");if(!j.ok)throw new Error("Failed to fetch metrics");const A=await j.json();s(A.metrics)}catch(j){l(j instanceof Error?j.message:"Failed to fetch metrics")}},N=async()=>{try{i(!0),l(null),await Promise.all([y(),w()])}catch{l("Failed to fetch data")}finally{i(!1)}};f.useEffect(()=>{N()},[]);const v=t.filter(j=>{const A=j.product.name.toLowerCase().includes(c.toLowerCase())||j.product.title.toLowerCase().includes(c.toLowerCase()),k=d==="all"||j.product.product_type===d;return A&&k}).sort((j,A)=>{let k,I;switch(m){case"name":k=j.product.title.toLowerCase(),I=A.product.title.toLowerCase();break;case"sales":k=j.total_sales,I=A.total_sales;break;case"revenue":k=j.revenue,I=A.revenue;break;case"recent_activity":k=j.last_sale?new Date(j.last_sale).getTime():0,I=A.last_sale?new Date(A.last_sale).getTime():0;break;default:k=j.total_sales,I=A.total_sales}return g==="asc"?k>I?1:-1:k<I?1:-1}),_=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(j),R=j=>`${j>=0?"+":""}${j.toFixed(1)}%`,O=j=>new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),L=j=>{switch(j){case"book":return o.jsx(mt,{className:"w-4 h-4"});case"subscription":return o.jsx(Cr,{className:"w-4 h-4"});case"bundle":return o.jsx(Kr,{className:"w-4 h-4"});default:return o.jsx(gt,{className:"w-4 h-4"})}},$=(j,A)=>{const k=A>0?(j-A)/A*100:0;return k>10?{icon:qt,color:"text-green-600",bg:"bg-green-100"}:k<-10?{icon:Jr,color:"text-red-600",bg:"bg-red-100"}:{icon:os,color:"text-yellow-600",bg:"bg-yellow-100"}};return n?o.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[o.jsx(qe,{className:"w-8 h-8 animate-spin text-primary"}),o.jsx("span",{className:"ml-3 text-lg",children:"Loading inventory data..."})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[o.jsx(Kr,{className:"w-8 h-8 text-primary"}),"Inventory Management"]}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Track digital product performance, sales analytics, and inventory metrics"})]}),o.jsxs("button",{onClick:N,className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[o.jsx(qe,{className:"w-5 h-5"}),"Refresh Data"]})]}),a&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3",children:[o.jsx(as,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsx("span",{className:"text-red-700 dark:text-red-400",children:a})]}),r&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),o.jsx("p",{className:"text-2xl font-bold text-foreground",children:_(r.total_revenue)}),o.jsxs("p",{className:`text-sm flex items-center gap-1 mt-1 ${r.revenue_growth>=0?"text-green-600":"text-red-600"}`,children:[r.revenue_growth>=0?o.jsx(qt,{className:"w-4 h-4"}):o.jsx(Jr,{className:"w-4 h-4"}),R(r.revenue_growth)," this month"]})]}),o.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:o.jsx(Pn,{className:"w-6 h-6 text-green-600"})})]})}),o.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Sales"}),o.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.total_sales.toLocaleString()}),o.jsxs("p",{className:`text-sm flex items-center gap-1 mt-1 ${r.sales_growth>=0?"text-green-600":"text-red-600"}`,children:[r.sales_growth>=0?o.jsx(qt,{className:"w-4 h-4"}):o.jsx(Jr,{className:"w-4 h-4"}),R(r.sales_growth)," this month"]})]}),o.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:o.jsx(os,{className:"w-6 h-6 text-blue-600"})})]})}),o.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Subscriptions"}),o.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.active_subscriptions.toLocaleString()}),o.jsxs("p",{className:`text-sm flex items-center gap-1 mt-1 ${r.subscription_growth>=0?"text-green-600":"text-red-600"}`,children:[r.subscription_growth>=0?o.jsx(qt,{className:"w-4 h-4"}):o.jsx(Jr,{className:"w-4 h-4"}),R(r.subscription_growth)," this month"]})]}),o.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:o.jsx(Cr,{className:"w-6 h-6 text-purple-600"})})]})}),o.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Products"}),o.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.total_products}),o.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[r.total_books," books, ",r.total_subscriptions," subscriptions"]})]}),o.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:o.jsx(Kr,{className:"w-6 h-6 text-orange-600"})})]})})]}),o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),o.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:j=>u(j.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),o.jsxs("select",{value:d,onChange:j=>h(j.target.value),className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"all",children:"All Types"}),o.jsx("option",{value:"book",children:"Books"}),o.jsx("option",{value:"subscription",children:"Subscriptions"}),o.jsx("option",{value:"bundle",children:"Bundles"})]})]}),o.jsxs("select",{value:`${m}-${g}`,onChange:j=>{const[A,k]=j.target.value.split("-");p(A),x(k)},className:"px-3 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"sales-desc",children:"Sales (High to Low)"}),o.jsx("option",{value:"sales-asc",children:"Sales (Low to High)"}),o.jsx("option",{value:"revenue-desc",children:"Revenue (High to Low)"}),o.jsx("option",{value:"revenue-asc",children:"Revenue (Low to High)"}),o.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),o.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),o.jsx("option",{value:"recent_activity-desc",children:"Most Recent Activity"})]})]})]}),o.jsx("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-muted/50 border-b border-border",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Product"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total Sales"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Recent Sales (30d)"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Revenue"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Performance"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Last Sale"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:v.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[o.jsx(Kr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),o.jsx("h3",{className:"text-lg font-medium text-foreground mb-1",children:"No products found"}),o.jsx("p",{className:"text-muted-foreground",children:c||d!=="all"?"Try adjusting your search or filters":"Products will appear here once they have sales data"})]})}):v.map(j=>{const A=$(j.recent_sales,j.total_sales-j.recent_sales),k=A.icon;return o.jsxs("tr",{className:"hover:bg-muted/30",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"flex items-center",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-foreground",children:j.product.title}),o.jsx("div",{className:"text-sm text-muted-foreground",children:j.product.name})]})})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[L(j.product.product_type),o.jsx("span",{className:"text-sm text-foreground capitalize",children:j.product.product_type})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-foreground",children:j.total_sales.toLocaleString()})}),o.jsxs("td",{className:"px-6 py-4",children:[o.jsx("div",{className:"text-sm font-medium text-foreground",children:j.recent_sales.toLocaleString()}),j.downloads&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.downloads.toLocaleString()," downloads"]})]}),o.jsxs("td",{className:"px-6 py-4",children:[o.jsx("div",{className:"text-sm font-medium text-foreground",children:_(j.revenue)}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[_(j.revenue_recent)," recent"]})]}),o.jsxs("td",{className:"px-6 py-4",children:[o.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A.bg} ${A.color}`,children:[o.jsx(k,{className:"w-3 h-3 mr-1"}),j.recent_sales>j.total_sales-j.recent_sales?"Growing":j.recent_sales<(j.total_sales-j.recent_sales)/2?"Declining":"Stable"]}),j.active_subscriptions!==void 0&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[j.active_subscriptions," active subs"]})]}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-foreground",children:j.last_sale?O(j.last_sale):"Never"})}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{className:"text-primary hover:text-primary-dark p-1",children:o.jsx($t,{className:"w-4 h-4"})}),o.jsx("button",{className:"text-muted-foreground hover:text-foreground p-1",children:o.jsx(os,{className:"w-4 h-4"})})]})})]},j.id)})})]})})})]})},uv=()=>{const[t,e]=f.useState([]),[r,s]=f.useState([]),[n,i]=f.useState(!0),[a,l]=f.useState(null),[c,u]=f.useState("works"),[d,h]=f.useState(""),[m,p]=f.useState("all"),[g,x]=f.useState("all"),[y,w]=f.useState(!1),[N,v]=f.useState(null),[_,R]=f.useState(null),[O,L]=f.useState(!1),[$,j]=f.useState({title:"",type:"book",description:"",status:"planning",progress_percentage:0,release_date:"",estimated_release:"",cover_image_url:"",is_featured:!1,is_premium:!1,is_free:!0,target_word_count:void 0}),A=async()=>{try{const b=await fetch("/api/admin/works?include_stats=true");if(!b.ok)throw new Error("Failed to fetch works");const M=await b.json();e(M.works||[])}catch(b){l(b instanceof Error?b.message:"Failed to fetch works")}},k=async b=>{try{const M=b?`/api/admin/chapters?work_id=${b}`:"/api/admin/chapters",ee=await fetch(M);if(!ee.ok)throw new Error("Failed to fetch chapters");const Ae=await ee.json();s(Ae.chapters||[])}catch(M){l(M instanceof Error?M.message:"Failed to fetch chapters")}};f.useEffect(()=>{(async()=>{i(!0),l(null);try{await Promise.all([A(),k()])}catch{l("Failed to load data")}finally{i(!1)}})()},[]);const I=t.filter(b=>{var et;const M=b.title.toLowerCase().includes(d.toLowerCase())||((et=b.description)==null?void 0:et.toLowerCase().includes(d.toLowerCase())),ee=m==="all"||b.status===m,Ae=g==="all"||b.type===g;return M&&ee&&Ae}),le=_?r.filter(b=>b.work_id===_.id):r,we=async b=>{b.preventDefault();try{const M=N?`/api/admin/works/${N.id}`:"/api/admin/works",Ae=await fetch(M,{method:N?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...$,progress_percentage:$.progress_percentage||0,target_word_count:$.target_word_count||null})});if(!Ae.ok){const et=await Ae.json();throw new Error(et.message||"Failed to save work")}await A(),P(),w(!1)}catch(M){l(M instanceof Error?M.message:"Failed to save work")}},P=()=>{j({title:"",type:"book",description:"",status:"planning",progress_percentage:0,release_date:"",estimated_release:"",cover_image_url:"",is_featured:!1,is_premium:!1,is_free:!0,target_word_count:void 0}),v(null)},Y=b=>{v(b),j({title:b.title,type:b.type,parent_id:b.parent_id,description:b.description||"",status:b.status,progress_percentage:b.progress_percentage||0,release_date:b.release_date||"",estimated_release:b.estimated_release||"",cover_image_url:b.cover_image_url||"",is_featured:b.is_featured,is_premium:b.is_premium,is_free:b.is_free,target_word_count:b.target_word_count}),w(!0)},_e=async b=>{if(confirm(`Are you sure you want to delete "${b.title}"? This will also delete all associated chapters.`))try{if(!(await fetch(`/api/admin/works/${b.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete work");await A(),(_==null?void 0:_.id)===b.id&&R(null)}catch(M){l(M instanceof Error?M.message:"Failed to delete work")}},oe=async(b,M)=>{try{if(!(await fetch(`/api/admin/works/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({[M]:!b[M]})})).ok)throw new Error("Failed to update work");await A()}catch(ee){l(ee instanceof Error?ee.message:"Failed to update work")}},ce=async b=>{try{if(!(await fetch(`/api/admin/chapters/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_published:!b.is_published})})).ok)throw new Error("Failed to update chapter");await k(_==null?void 0:_.id)}catch(M){l(M instanceof Error?M.message:"Failed to update chapter")}},Pe=b=>{switch(b){case"published":return{color:"text-green-600",bg:"bg-green-100 dark:bg-green-900/20",icon:hs};case"writing":return{color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/20",icon:is};case"editing":return{color:"text-yellow-600",bg:"bg-yellow-100 dark:bg-yellow-900/20",icon:An};case"planning":return{color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/20",icon:Dh};case"on_hold":return{color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-900/20",icon:Th};default:return{color:"text-gray-600",bg:"bg-gray-100 dark:bg-gray-900/20",icon:xr}}},me=b=>{switch(b){case"book":return o.jsx(mt,{className:"w-4 h-4"});case"volume":return o.jsx(ds,{className:"w-4 h-4"});case"saga":return o.jsx(Eh,{className:"w-4 h-4"});case"arc":return o.jsx(qt,{className:"w-4 h-4"});case"issue":return o.jsx(gt,{className:"w-4 h-4"});default:return o.jsx(mt,{className:"w-4 h-4"})}},C=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return n?o.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[o.jsx(qe,{className:"w-8 h-8 animate-spin text-primary"}),o.jsx("span",{className:"ml-3 text-lg",children:"Loading works and chapters..."})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[o.jsx(mt,{className:"w-8 h-8 text-primary"}),"Works Management"]}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Create and manage your literary works, upload chapters for subscribers, and showcase in library"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>L(!0),className:"bg-secondary text-white px-6 py-3 rounded-xl font-medium hover:bg-secondary-dark transition-colors flex items-center gap-2",children:[o.jsx(lt,{className:"w-5 h-5"}),"Upload Chapter"]}),o.jsxs("button",{onClick:()=>{P(),w(!0)},className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[o.jsx(Tr,{className:"w-5 h-5"}),"New Work"]})]})]}),a&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3",children:[o.jsx(Er,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsx("span",{className:"text-red-700 dark:text-red-400",children:a}),o.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-500 hover:text-red-600",children:o.jsx(pt,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"border-b border-border",children:o.jsxs("nav",{className:"-mb-px flex space-x-8",children:[o.jsxs("button",{onClick:()=>{u("works"),R(null)},className:`py-2 px-1 border-b-2 font-medium text-sm ${c==="works"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Works (",t.length,")"]}),o.jsxs("button",{onClick:()=>u("chapters"),className:`py-2 px-1 border-b-2 font-medium text-sm ${c==="chapters"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Chapters (",r.length,")"]})]})}),o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),o.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:d,onChange:b=>h(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),c==="works"&&o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),o.jsxs("select",{value:m,onChange:b=>p(b.target.value),className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"planning",children:"Planning"}),o.jsx("option",{value:"writing",children:"Writing"}),o.jsx("option",{value:"editing",children:"Editing"}),o.jsx("option",{value:"published",children:"Published"}),o.jsx("option",{value:"on_hold",children:"On Hold"})]})]}),o.jsxs("select",{value:g,onChange:b=>x(b.target.value),className:"px-3 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"all",children:"All Types"}),o.jsx("option",{value:"book",children:"Books"}),o.jsx("option",{value:"volume",children:"Volumes"}),o.jsx("option",{value:"saga",children:"Sagas"}),o.jsx("option",{value:"arc",children:"Arcs"}),o.jsx("option",{value:"issue",children:"Issues"})]})]})]}),c==="works"&&o.jsx("div",{className:"space-y-4",children:I.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(mt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No works found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:d||m!=="all"||g!=="all"?"Try adjusting your search or filters":"Create your first work to get started"}),o.jsx("button",{onClick:()=>{P(),w(!0)},className:"bg-primary text-white px-6 py-2 rounded-xl font-medium hover:bg-primary-dark transition-colors",children:"Create First Work"})]}):o.jsx("div",{className:"grid gap-4",children:I.map(b=>{const M=Pe(b.status),ee=M.icon;return o.jsx("div",{className:"bg-card border border-border rounded-xl p-6 hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[me(b.type),o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:b.title})]}),o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.bg} ${M.color}`,children:[o.jsx(ee,{className:"w-3 h-3 mr-1"}),b.status]}),b.is_featured&&o.jsx(So,{className:"w-4 h-4 text-yellow-500 fill-current"})]}),o.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[o.jsxs("p",{children:["Updated ",C(b.updated_at)]}),b.chapters_count&&o.jsxs("p",{children:[b.published_chapters,"/",b.chapters_count," chapters published"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Type:"}),o.jsx("span",{className:"ml-2 text-foreground capitalize",children:b.type})]}),b.progress_percentage!==void 0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Progress:"}),o.jsxs("span",{className:"ml-2 text-foreground",children:[b.progress_percentage,"%"]})]}),b.word_count&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Words:"}),o.jsxs("span",{className:"ml-2 text-foreground",children:[b.word_count.toLocaleString(),b.target_word_count&&` / ${b.target_word_count.toLocaleString()}`]})]}),b.rating&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Rating:"}),o.jsxs("span",{className:"ml-2 text-foreground",children:[b.rating.toFixed(1)," ⭐ (",b.reviews_count,")"]})]})]}),b.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:b.description}),o.jsxs("div",{className:"flex gap-6 text-sm",children:[b.release_date&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Released:"}),o.jsx("span",{className:"ml-2 text-foreground",children:C(b.release_date)})]}),b.estimated_release&&!b.release_date&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Est. Release:"}),o.jsx("span",{className:"ml-2 text-foreground",children:b.estimated_release})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:()=>oe(b,"is_featured"),className:`flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-medium transition-colors ${b.is_featured?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:[o.jsx(So,{className:"w-3 h-3"}),"Featured"]}),o.jsx("button",{onClick:()=>oe(b,"is_premium"),className:`flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-medium transition-colors ${b.is_premium?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:"Premium"}),o.jsx("button",{onClick:()=>oe(b,"is_free"),className:`flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-medium transition-colors ${b.is_free?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:"Free"})]}),o.jsx("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:()=>Y(b),className:"text-primary hover:text-primary-dark flex items-center gap-2 text-sm font-medium",children:[o.jsx(is,{className:"w-4 h-4"}),"Edit"]}),o.jsxs("button",{onClick:()=>{R(b),u("chapters"),k(b.id)},className:"text-blue-600 hover:text-blue-700 flex items-center gap-2 text-sm font-medium",children:[o.jsx(ds,{className:"w-4 h-4"}),"Chapters (",b.chapters_count||0,")"]}),o.jsxs("button",{onClick:()=>_e(b),className:"text-red-500 hover:text-red-600 flex items-center gap-2 text-sm font-medium",children:[o.jsx(Rn,{className:"w-4 h-4"}),"Delete"]})]})})]}),b.cover_image_url&&o.jsx("div",{className:"ml-4 flex-shrink-0",children:o.jsx("img",{src:b.cover_image_url,alt:b.title,className:"w-16 h-20 object-cover rounded-lg border border-border"})})]})},b.id)})})}),c==="chapters"&&o.jsxs("div",{className:"space-y-4",children:[_&&o.jsx("div",{className:"bg-primary/5 border border-primary/20 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-foreground",children:["Chapters for: ",_.title]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[le.length," chapters • ",le.filter(b=>b.is_published).length," published"]})]}),o.jsxs("button",{onClick:()=>L(!0),className:"bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[o.jsx(Tr,{className:"w-4 h-4"}),"Add Chapter"]})]})}),le.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(gt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No chapters found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:_?`No chapters uploaded for "${_.title}" yet`:"Select a work to view its chapters or upload new content"})]}):o.jsx("div",{className:"grid gap-3",children:le.sort((b,M)=>b.chapter_number-M.chapter_number).map(b=>o.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:["Ch. ",b.chapter_number]}),o.jsx("h4",{className:"font-medium text-foreground",children:b.title}),o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${b.is_published?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-900/20 dark:text-gray-400"}`,children:b.is_published?"Published":"Draft"})]}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Updated ",C(b.updated_at)]}),b.word_count&&o.jsxs("span",{children:[b.word_count.toLocaleString()," words"]}),b.estimated_read_time&&o.jsxs("span",{children:[b.estimated_read_time," min read"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>ce(b),className:`p-2 rounded-lg transition-colors ${b.is_published?"text-green-600 hover:bg-green-100 dark:hover:bg-green-900/20":"text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800"}`,title:b.is_published?"Unpublish chapter":"Publish chapter",children:b.is_published?o.jsx($t,{className:"w-4 h-4"}):o.jsx(ua,{className:"w-4 h-4"})}),o.jsx("button",{className:"p-2 text-primary hover:bg-primary/10 rounded-lg",children:o.jsx(is,{className:"w-4 h-4"})})]})]},b.id))})]}),y&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-background rounded-xl shadow-xl border border-border max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground",children:N?"Edit Work":"Create New Work"}),o.jsx("button",{onClick:()=>{w(!1),P()},className:"text-muted-foreground hover:text-foreground",children:o.jsx(pt,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:we,className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Title *"}),o.jsx("input",{type:"text",required:!0,value:$.title,onChange:b=>j({...$,title:b.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Type"}),o.jsxs("select",{value:$.type,onChange:b=>j({...$,type:b.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"book",children:"Book"}),o.jsx("option",{value:"volume",children:"Volume"}),o.jsx("option",{value:"saga",children:"Saga"}),o.jsx("option",{value:"arc",children:"Arc"}),o.jsx("option",{value:"issue",children:"Issue"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description"}),o.jsx("textarea",{value:$.description,onChange:b=>j({...$,description:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Status"}),o.jsxs("select",{value:$.status,onChange:b=>j({...$,status:b.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"planning",children:"Planning"}),o.jsx("option",{value:"writing",children:"Writing"}),o.jsx("option",{value:"editing",children:"Editing"}),o.jsx("option",{value:"published",children:"Published"}),o.jsx("option",{value:"on_hold",children:"On Hold"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Progress %"}),o.jsx("input",{type:"number",min:"0",max:"100",value:$.progress_percentage,onChange:b=>j({...$,progress_percentage:parseInt(b.target.value)||0}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Release Date"}),o.jsx("input",{type:"date",value:$.release_date,onChange:b=>j({...$,release_date:b.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Estimated Release"}),o.jsx("input",{type:"text",value:$.estimated_release,onChange:b=>j({...$,estimated_release:b.target.value}),placeholder:"e.g., Spring 2024",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Cover Image URL"}),o.jsx("input",{type:"url",value:$.cover_image_url,onChange:b=>j({...$,cover_image_url:b.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Target Word Count"}),o.jsx("input",{type:"number",value:$.target_word_count||"",onChange:b=>j({...$,target_word_count:b.target.value?parseInt(b.target.value):void 0}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"is_featured",checked:$.is_featured,onChange:b=>j({...$,is_featured:b.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),o.jsx("label",{htmlFor:"is_featured",className:"ml-2 text-sm font-medium text-foreground",children:"Featured (highlight in library)"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"is_premium",checked:$.is_premium,onChange:b=>j({...$,is_premium:b.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),o.jsx("label",{htmlFor:"is_premium",className:"ml-2 text-sm font-medium text-foreground",children:"Premium content (requires subscription/purchase)"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"is_free",checked:$.is_free,onChange:b=>j({...$,is_free:b.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),o.jsx("label",{htmlFor:"is_free",className:"ml-2 text-sm font-medium text-foreground",children:"Free to read (no subscription required)"})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-border",children:[o.jsx("button",{type:"button",onClick:()=>{w(!1),P()},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium",children:"Cancel"}),o.jsxs("button",{type:"submit",className:"bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-primary-dark transition-colors flex items-center gap-2",children:[o.jsx(da,{className:"w-4 h-4"}),N?"Update Work":"Create Work"]})]})]})]})}),O&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-background rounded-xl shadow-xl border border-border max-w-md w-full",children:o.jsxs("div",{className:"p-6 text-center",children:[o.jsx(lt,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Chapter Upload"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Use the existing Chapter Upload page or integrate the upload functionality here."}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{L(!1),window.open("/account/admin/media","_blank")},className:"flex-1 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors",children:"Go to Upload Page"}),o.jsx("button",{onClick:()=>L(!1),className:"flex-1 bg-gray-200 dark:bg-gray-700 text-foreground px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"})]})]})})})]})},dv=()=>{const[t,e]=f.useState("upload"),[r,s]=f.useState("chapter"),[n,i]=f.useState([]),[a,l]=f.useState([]),[c,u]=f.useState(!1),[d,h]=f.useState(null),[m,p]=f.useState(null),[g,x]=f.useState(""),[y,w]=f.useState("all"),[N,v]=f.useState(null),[_,R]=f.useState(!1),[O,L]=f.useState({}),[$,j]=f.useState({work_id:"",chapter_title:"",chapter_number:1,is_published:!1});f.useEffect(()=>{A(),k()},[]);const A=async()=>{try{const C=await fetch("/api/admin/works");if(C.ok){const b=await C.json();i(b.works||[])}}catch(C){console.error("Failed to fetch works:",C)}},k=async()=>{try{u(!0);const C=await fetch("/api/admin/media");if(C.ok){const b=await C.json();l(b.files||[])}}catch{h("Failed to fetch media files")}finally{u(!1)}},I=C=>{C.target.files&&v(C.target.files)},le=C=>{C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?R(!0):C.type==="dragleave"&&R(!1)},we=C=>{C.preventDefault(),C.stopPropagation(),R(!1),C.dataTransfer.files&&C.dataTransfer.files[0]&&v(C.dataTransfer.files)},P=async()=>{var C,b;if(!N||N.length===0){h("Please select a file to upload");return}if(!$.work_id||!$.chapter_title){h("Please fill in all required chapter information");return}u(!0),h(null),p(null);try{const M=new FormData;M.append("file",N[0]),M.append("title",$.chapter_title),M.append("chapter_number",$.chapter_number.toString()),M.append("book_id",$.work_id),M.append("is_published",$.is_published.toString());const{data:{session:ee},error:Ae}=await((b=(C=window.supabase)==null?void 0:C.auth)==null?void 0:b.getSession());if(Ae||!ee)throw new Error("User session not found. Please log in.");const et=await fetch("/api/chapters/upload",{method:"POST",body:M,headers:{Authorization:`Bearer ${ee.access_token}`}});if(!et.ok){const Wn=await et.json();throw new Error(Wn.message||Wn.error||"Failed to upload chapter.")}const kx=await et.json();p(`Chapter "${$.chapter_title}" uploaded successfully!`),v(null),j({work_id:"",chapter_title:"",chapter_number:1,is_published:!1}),await k()}catch(M){h(M instanceof Error?M.message:"Failed to upload chapter")}finally{u(!1)}},Y=async()=>{if(!N||N.length===0){h("Please select files to upload");return}u(!0),h(null),p(null);try{const C=Array.from(N).map(async(b,M)=>{const ee=new FormData;ee.append("file",b),ee.append("type","media");const Ae=await fetch("/api/admin/media/upload",{method:"POST",body:ee});if(!Ae.ok)throw new Error(`Failed to upload ${b.name}`);return Ae.json()});await Promise.all(C),p(`Successfully uploaded ${N.length} file(s)`),v(null),await k()}catch(C){h(C instanceof Error?C.message:"Failed to upload files")}finally{u(!1)}},_e=async C=>{if(confirm("Are you sure you want to delete this file?"))try{if(!(await fetch(`/api/admin/media/${C}`,{method:"DELETE"})).ok)throw new Error("Failed to delete file");p("File deleted successfully"),await k()}catch(b){h(b instanceof Error?b.message:"Failed to delete file")}},oe=a.filter(C=>{var ee;const b=C.filename.toLowerCase().includes(g.toLowerCase())||((ee=C.chapter_title)==null?void 0:ee.toLowerCase().includes(g.toLowerCase()));let M=!0;if(y!=="all")switch(y){case"chapter":M=!!(C.work_id&&C.chapter_number);break;case"image":M=C.file_type.startsWith("image/");break;case"video":M=C.file_type.startsWith("video/");break;case"audio":M=C.file_type.startsWith("audio/");break;case"document":M=C.file_type.includes("pdf")||C.file_type.includes("document")||C.file_type.includes("text");break}return b&&M}),ce=C=>C.work_id&&C.chapter_number?o.jsx(mt,{className:"w-5 h-5 text-blue-600"}):C.file_type.startsWith("image/")?o.jsx(jo,{className:"w-5 h-5 text-green-600"}):C.file_type.startsWith("video/")?o.jsx(Uh,{className:"w-5 h-5 text-purple-600"}):C.file_type.startsWith("audio/")?o.jsx(Mh,{className:"w-5 h-5 text-pink-600"}):o.jsx(gt,{className:"w-5 h-5 text-gray-600"}),Pe=C=>{if(C===0)return"0 Bytes";const b=1024,M=["Bytes","KB","MB","GB"],ee=Math.floor(Math.log(C)/Math.log(b));return parseFloat((C/Math.pow(b,ee)).toFixed(2))+" "+M[ee]},me=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[o.jsx(lt,{className:"w-8 h-8 text-primary"}),"Media Upload"]}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Upload chapters for subscribers and manage media files for your website"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>e("upload"),className:`px-6 py-3 rounded-xl font-medium transition-colors ${t==="upload"?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-foreground hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Upload Files"}),o.jsx("button",{onClick:()=>e("library"),className:`px-6 py-3 rounded-xl font-medium transition-colors ${t==="library"?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-foreground hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Media Library"})]})]}),m&&o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4 flex items-center gap-3",children:[o.jsx(hs,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),o.jsx("span",{className:"text-green-700 dark:text-green-400",children:m}),o.jsx("button",{onClick:()=>p(null),className:"ml-auto text-green-500 hover:text-green-600",children:o.jsx(pt,{className:"w-5 h-5"})})]}),d&&o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3",children:[o.jsx(Er,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsx("span",{className:"text-red-700 dark:text-red-400",children:d}),o.jsx("button",{onClick:()=>h(null),className:"ml-auto text-red-500 hover:text-red-600",children:o.jsx(pt,{className:"w-5 h-5"})})]}),t==="upload"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex gap-4 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl",children:[o.jsxs("button",{onClick:()=>s("chapter"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${r==="chapter"?"bg-white dark:bg-gray-700 text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[o.jsx(mt,{className:"w-4 h-4 inline mr-2"}),"Chapter Upload"]}),o.jsxs("button",{onClick:()=>s("media"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${r==="media"?"bg-white dark:bg-gray-700 text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[o.jsx(jo,{className:"w-4 h-4 inline mr-2"}),"Media Upload"]})]}),r==="chapter"&&o.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Upload New Chapter"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Select Work *"}),o.jsxs("select",{value:$.work_id,onChange:C=>j({...$,work_id:C.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0,children:[o.jsx("option",{value:"",children:"-- Select a Work --"}),n.map(C=>o.jsxs("option",{value:C.id,children:[C.title," (",C.type,")"]},C.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Chapter Number *"}),o.jsx("input",{type:"number",min:"1",value:$.chapter_number,onChange:C=>j({...$,chapter_number:parseInt(C.target.value)||1}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Chapter Title *"}),o.jsx("input",{type:"text",value:$.chapter_title,onChange:C=>j({...$,chapter_title:C.target.value}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"Enter chapter title",required:!0})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"is_published",checked:$.is_published,onChange:C=>j({...$,is_published:C.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),o.jsx("label",{htmlFor:"is_published",className:"ml-2 text-sm font-medium text-foreground",children:"Publish immediately (subscribers will get access)"})]})}),o.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-colors ${_?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600 hover:border-primary hover:bg-primary/5"}`,onDragEnter:le,onDragLeave:le,onDragOver:le,onDrop:we,children:[o.jsx(lt,{className:"w-12 h-12 text-primary mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Drop chapter file here or click to browse"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Supported formats: PDF, DOCX, TXT, HTML"}),o.jsx("input",{type:"file",onChange:I,accept:".pdf,.docx,.txt,.html",className:"hidden",id:"chapter-file-input"}),o.jsxs("label",{htmlFor:"chapter-file-input",className:"bg-primary text-white px-6 py-2 rounded-lg cursor-pointer hover:bg-primary-dark transition-colors inline-flex items-center gap-2",children:[o.jsx(Tr,{className:"w-4 h-4"}),"Choose File"]})]}),N&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Selected File:"}),Array.from(N).map((C,b)=>o.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(gt,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{className:"text-sm font-medium",children:C.name}),o.jsx("span",{className:"text-xs text-muted-foreground",children:Pe(C.size)})]}),o.jsx("button",{onClick:()=>v(null),className:"text-red-500 hover:text-red-600",children:o.jsx(pt,{className:"w-4 h-4"})})]},b))]}),o.jsx("div",{className:"mt-6 flex justify-end",children:o.jsx("button",{onClick:P,disabled:c||!N||!$.work_id||!$.chapter_title,className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:c?o.jsxs(o.Fragment,{children:[o.jsx(qe,{className:"w-4 h-4 animate-spin"}),"Uploading Chapter..."]}):o.jsxs(o.Fragment,{children:[o.jsx(lt,{className:"w-4 h-4"}),"Upload Chapter"]})})})]}),r==="media"&&o.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Upload Media Files"}),o.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-colors ${_?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600 hover:border-primary hover:bg-primary/5"}`,onDragEnter:le,onDragLeave:le,onDragOver:le,onDrop:we,children:[o.jsx(lt,{className:"w-12 h-12 text-primary mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Drop files here or click to browse"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Images, videos, documents, and other media files"}),o.jsx("input",{type:"file",onChange:I,multiple:!0,className:"hidden",id:"media-file-input"}),o.jsxs("label",{htmlFor:"media-file-input",className:"bg-primary text-white px-6 py-2 rounded-lg cursor-pointer hover:bg-primary-dark transition-colors inline-flex items-center gap-2",children:[o.jsx(Tr,{className:"w-4 h-4"}),"Choose Files"]})]}),N&&o.jsxs("div",{className:"mt-4",children:[o.jsxs("h4",{className:"font-medium text-foreground mb-2",children:["Selected Files (",N.length,"):"]}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Array.from(N).map((C,b)=>o.jsx("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ah,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{className:"text-sm font-medium",children:C.name}),o.jsx("span",{className:"text-xs text-muted-foreground",children:Pe(C.size)})]})},b))})]}),o.jsx("div",{className:"mt-6 flex justify-end",children:o.jsx("button",{onClick:Y,disabled:c||!N,className:"bg-primary text-white px-6 py-3 rounded-xl font-medium hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:c?o.jsxs(o.Fragment,{children:[o.jsx(qe,{className:"w-4 h-4 animate-spin"}),"Uploading Files..."]}):o.jsxs(o.Fragment,{children:[o.jsx(lt,{className:"w-4 h-4"}),"Upload Files"]})})})]})]}),t==="library"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),o.jsx("input",{type:"text",placeholder:"Search files...",value:g,onChange:C=>x(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),o.jsxs("select",{value:y,onChange:C=>w(C.target.value),className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[o.jsx("option",{value:"all",children:"All Files"}),o.jsx("option",{value:"chapter",children:"Chapters"}),o.jsx("option",{value:"image",children:"Images"}),o.jsx("option",{value:"video",children:"Videos"}),o.jsx("option",{value:"audio",children:"Audio"}),o.jsx("option",{value:"document",children:"Documents"})]})]}),o.jsx("button",{onClick:k,className:"bg-primary text-white px-4 py-3 rounded-xl hover:bg-primary-dark transition-colors",children:o.jsx(qe,{className:"w-4 h-4"})})]}),c?o.jsxs("div",{className:"flex items-center justify-center py-12",children:[o.jsx(qe,{className:"w-8 h-8 animate-spin text-primary"}),o.jsx("span",{className:"ml-3",children:"Loading files..."})]}):oe.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Rh,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No files found"}),o.jsx("p",{className:"text-muted-foreground",children:g||y!=="all"?"Try adjusting your search or filters":"Upload your first file to get started"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:oe.map(C=>{var b;return o.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 hover:shadow-md transition-shadow",children:[o.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg mb-4 flex items-center justify-center",children:C.thumbnail_url?o.jsx("img",{src:C.thumbnail_url,alt:C.filename,className:"w-full h-full object-cover rounded-lg"}):o.jsxs("div",{className:"text-center",children:[ce(C),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:(b=C.file_type.split("/")[1])==null?void 0:b.toUpperCase()})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-medium text-foreground truncate",title:C.filename,children:C.filename}),C.work_id&&C.chapter_number&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsxs("p",{children:["Chapter ",C.chapter_number,": ",C.chapter_title]}),o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${C.is_published?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-900/20 dark:text-gray-400"}`,children:C.is_published?"Published":"Draft"})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:Pe(C.file_size)}),o.jsx("span",{children:me(C.upload_date)})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[C.file_url&&o.jsx("button",{onClick:()=>window.open(C.file_url,"_blank"),className:"p-1.5 text-primary hover:bg-primary/10 rounded-lg transition-colors",title:"View file",children:o.jsx($t,{className:"w-4 h-4"})}),C.file_url&&o.jsx("button",{onClick:()=>{const M=document.createElement("a");M.href=C.file_url,M.download=C.filename,M.click()},className:"p-1.5 text-blue-600 hover:bg-blue-600/10 rounded-lg transition-colors",title:"Download file",children:o.jsx(Ph,{className:"w-4 h-4"})})]}),o.jsx("button",{onClick:()=>_e(C.id),className:"p-1.5 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete file",children:o.jsx(Rn,{className:"w-4 h-4"})})]})]},C.id)})})]})]})};function Jo(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function hv(...t){return e=>{let r=!1;const s=t.map(n=>{const i=Jo(n,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let n=0;n<s.length;n++){const i=s[n];typeof i=="function"?i():Jo(t[n],null)}}}}function Fa(t){const e=mv(t),r=f.forwardRef((s,n)=>{const{children:i,...a}=s,l=f.Children.toArray(i),c=l.find(gv);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return o.jsx(e,{...a,ref:n,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return o.jsx(e,{...a,ref:n,children:i})});return r.displayName=`${t}.Slot`,r}var fv=Fa("Slot");function mv(t){const e=f.forwardRef((r,s)=>{const{children:n,...i}=r;if(f.isValidElement(n)){const a=bv(n),l=yv(i,n.props);return n.type!==f.Fragment&&(l.ref=s?hv(s,a):a),f.cloneElement(n,l)}return f.Children.count(n)>1?f.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var pv=Symbol("radix.slottable");function gv(t){return f.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===pv}function yv(t,e){const r={...e};for(const s in e){const n=t[s],i=e[s];/^on[A-Z]/.test(s)?n&&i?r[s]=(...l)=>{const c=i(...l);return n(...l),c}:n&&(r[s]=n):s==="style"?r[s]={...n,...i}:s==="className"&&(r[s]=[n,i].filter(Boolean).join(" "))}return{...t,...r}}function bv(t){var s,n;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const Qo=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Xo=_n,Ua=(t,e)=>r=>{var s;if((e==null?void 0:e.variants)==null)return Xo(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:i}=e,a=Object.keys(n).map(u=>{const d=r==null?void 0:r[u],h=i==null?void 0:i[u];if(d===null)return null;const m=Qo(d)||Qo(h);return n[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(g=>{let[x,y]=g;return Array.isArray(y)?y.includes({...i,...l}[x]):{...i,...l}[x]===y})?[...u,h,m]:u},[]);return Xo(t,a,c,r==null?void 0:r.class,r==null?void 0:r.className)},vv=Ua("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xv=f.forwardRef(({className:t,variant:e,size:r,asChild:s=!1,...n},i)=>{const a=s?fv:"button";return o.jsx(a,{className:Ne(vv({variant:e,size:r,className:t})),ref:i,...n})});xv.displayName="Button";const wv=f.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:Ne("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));wv.displayName="Card";const _v=f.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:Ne("flex flex-col space-y-1.5 p-6",t),...e}));_v.displayName="CardHeader";const kv=f.forwardRef(({className:t,...e},r)=>o.jsx("h3",{ref:r,className:Ne("text-2xl font-semibold leading-none tracking-tight",t),...e}));kv.displayName="CardTitle";const jv=f.forwardRef(({className:t,...e},r)=>o.jsx("p",{ref:r,className:Ne("text-sm text-muted-foreground",t),...e}));jv.displayName="CardDescription";const Nv=f.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:Ne("p-6 pt-0",t),...e}));Nv.displayName="CardContent";const Sv=f.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:Ne("flex items-center p-6 pt-0",t),...e}));Sv.displayName="CardFooter";const Ev=f.forwardRef(({className:t,type:e,...r},s)=>o.jsx("input",{type:e,className:Ne("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r}));Ev.displayName="Input";var Cv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Tv=Cv.reduce((t,e)=>{const r=Fa(`Primitive.${e}`),s=f.forwardRef((n,i)=>{const{asChild:a,...l}=n,c=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{}),Pv="Label",Ba=f.forwardRef((t,e)=>o.jsx(Tv.label,{...t,ref:e,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=t.onMouseDown)==null||n.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Ba.displayName=Pv;var qa=Ba;const Av=Ua("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Rv=f.forwardRef(({className:t,...e},r)=>o.jsx(qa,{ref:r,className:Ne(Av(),t),...e}));Rv.displayName=qa.displayName;const Iv={default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent",outline:"text-foreground border border-input hover:bg-accent hover:text-accent-foreground",success:"bg-green-500 text-white hover:bg-green-600 border-transparent"},$v=f.forwardRef(({className:t,variant:e="default",...r},s)=>o.jsx("div",{ref:s,className:Ne("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",Iv[e],t),...r}));$v.displayName="Badge";const V=({title:t})=>o.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:t}),o.jsx("p",{className:"text-gray-600",children:"This page is under construction."})]}),Nt=({title:t})=>o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:t}),o.jsx("p",{className:"text-gray-600",children:"This admin page is under construction."})]}),Ov=()=>o.jsx(V,{title:"Library"}),zv=()=>o.jsx(V,{title:"Characters"}),Lv=()=>o.jsx(V,{title:"Locations"}),Mv=()=>o.jsx(V,{title:"Glossary"}),Dv=()=>o.jsx(V,{title:"Reviews"}),Fv=()=>o.jsx(V,{title:"Blog"}),Uv=()=>o.jsx(V,{title:"Page Not Found"}),Bv=()=>o.jsx(V,{title:"Beta Portal"}),qv=()=>o.jsx(V,{title:"Beta Application Status"}),Zv=()=>o.jsx(V,{title:"Work Reader"}),Wv=()=>o.jsx(V,{title:"Beta Reader Handbook"}),Yv=()=>o.jsx(V,{title:"Operational Timeline"}),Hv=()=>o.jsx(V,{title:"NDA"}),Vv=()=>o.jsx(V,{title:"Beta Feedback"}),Gv=()=>{const[t,e]=f.useState(!1),[r,s]=f.useState("none"),[n,i]=f.useState(!0);f.useEffect(()=>{ue.auth.getSession().then(({data:{session:c}})=>{e(!!c),i(!1)});const{data:{subscription:l}}=ue.auth.onAuthStateChange((c,u)=>{e(!!u),i(!1)});return()=>l.unsubscribe()},[]);const a=async()=>{await ue.auth.signOut(),e(!1)};return n?o.jsx(Zf,{}):o.jsxs(o.Fragment,{children:[o.jsx(Wf,{}),o.jsx(vf,{isAuthenticated:t,betaApplicationStatus:r,onLogout:a})]})},Kv=()=>{const[t,e]=Hs.useState(null),r=zl();return Hs.useEffect(()=>{r.pageSlug&&Gf(r.pageSlug).then(e)},[r.pageSlug]),o.jsx(Vf,{className:"bg-red-500",children:o.jsxs(Qn,{children:[o.jsx(U,{path:"/login",element:o.jsx(iv,{})}),o.jsxs(U,{element:o.jsx(Gv,{}),children:[o.jsx(U,{path:"/",element:o.jsx(Bf,{})}),o.jsx(U,{path:"/store",element:o.jsx(V,{title:"Store"})}),o.jsx(U,{path:"/checkout",element:o.jsx(V,{title:"Checkout"})}),o.jsx(U,{path:"/library",element:o.jsx(Ov,{})}),o.jsx(U,{path:"/subscriptions",element:o.jsx(V,{title:"Subscriptions"})}),o.jsx(U,{path:"/subscription-success",element:o.jsx(V,{title:"Subscription Success"})}),o.jsx(U,{path:"/stripe-test",element:o.jsx(V,{title:"Stripe Test"})}),o.jsxs(U,{path:"/wiki",children:[o.jsx(U,{index:!0,element:o.jsx(V,{title:"Wiki"})}),o.jsx(U,{path:":folderSlug",element:o.jsx(V,{title:"Wiki Folder"})}),o.jsx(U,{path:":folderSlug/:pageSlug",element:o.jsx(V,{title:"Wiki Page"})})]}),o.jsx(U,{path:"/timelines",element:o.jsx(V,{title:"Timelines"})}),o.jsx(U,{path:"/characters",element:o.jsx(zv,{})}),o.jsx(U,{path:"/locations",element:o.jsx(Lv,{})}),o.jsx(U,{path:"/glossary",element:o.jsx(Mv,{})}),o.jsx(U,{path:"/reviews",element:o.jsx(Dv,{})}),o.jsx(U,{path:"/about",element:o.jsx(V,{title:"About"})}),o.jsx(U,{path:"/account/*",element:o.jsx(V,{title:"Account Dashboard"})}),o.jsx(U,{path:"/blog",element:o.jsx(Fv,{})}),o.jsx(U,{path:"/blog/:slug",element:o.jsx(V,{title:"Blog Post"})}),o.jsx(U,{path:"/beta/application",element:o.jsx(V,{title:"Beta Application"})}),o.jsx(U,{path:"/artist-collaboration",element:o.jsx(V,{title:"Artist Collaboration"})}),o.jsx(U,{path:"/read/:workId",element:o.jsx(Zv,{})}),o.jsx(U,{path:"/beta/status",element:o.jsx(qv,{})}),o.jsx(U,{path:"/beta/handbook",element:o.jsx(Wv,{})}),o.jsx(U,{path:"/beta/timeline",element:o.jsx(Yv,{})}),o.jsx(U,{path:"/beta/nda",element:o.jsx(Hv,{})}),o.jsx(U,{path:"/beta/feedback",element:o.jsx(Vv,{})}),o.jsx(U,{path:"/beta/portal",element:o.jsx(Bv,{})}),o.jsx(U,{path:"/:slug",element:o.jsx(V,{title:"Page"})}),o.jsx(U,{path:"*",element:o.jsx(Uv,{})})]}),o.jsx(U,{path:"/account/admin/*",element:o.jsx(Hh,{children:o.jsxs(qh,{children:[o.jsx(Wh,{}),o.jsx(Yh,{}),o.jsxs(Qn,{children:[o.jsx(U,{index:!0,element:o.jsx(Vh,{})}),o.jsx(U,{path:"beta-applications",element:o.jsx(Nt,{title:"Beta Applications Management"})}),o.jsx(U,{path:"users",element:o.jsx(Nt,{title:"User Management"})}),o.jsx(U,{path:"posts",element:o.jsx(Nt,{title:"Posts Management"})}),o.jsx(U,{path:"works",element:o.jsx(uv,{})}),o.jsx(U,{path:"media",element:o.jsx(dv,{})}),o.jsx(U,{path:"products",element:o.jsx(av,{})}),o.jsx(U,{path:"orders",element:o.jsx(lv,{})}),o.jsx(U,{path:"inventory",element:o.jsx(cv,{})}),o.jsx(U,{path:"analytics",element:o.jsx(Nt,{title:"Analytics"})}),o.jsx(U,{path:"timeline/events",element:o.jsx(Nt,{title:"Timeline Events"})}),o.jsx(U,{path:"webhooks",element:o.jsx(Nt,{title:"Webhook Management"})}),o.jsx(U,{path:"settings",element:o.jsx(Nt,{title:"Admin Settings"})})]})]})})})]})})};var As=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rs=typeof window>"u"||"Deno"in globalThis;function Ie(){}function Jv(t,e){return typeof t=="function"?t(e):t}function Qv(t){return typeof t=="number"&&t>=0&&t!==1/0}function Xv(t,e){return Math.max(t+(e||0)-Date.now(),0)}function fn(t,e){return typeof t=="function"?t(e):t}function ex(t,e){return typeof t=="function"?t(e):t}function ei(t,e){const{type:r="all",exact:s,fetchStatus:n,predicate:i,queryKey:a,stale:l}=t;if(a){if(s){if(e.queryHash!==qn(a,e.options))return!1}else if(!Ir(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||n&&n!==e.state.fetchStatus||i&&!i(e))}function ti(t,e){const{exact:r,status:s,predicate:n,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(Rr(e.options.mutationKey)!==Rr(i))return!1}else if(!Ir(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function qn(t,e){return((e==null?void 0:e.queryKeyHashFn)||Rr)(t)}function Rr(t){return JSON.stringify(t,(e,r)=>mn(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function Ir(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Ir(t[r],e[r])):!1}function Za(t,e){if(t===e)return t;const r=ri(t)&&ri(e);if(r||mn(t)&&mn(e)){const s=r?t:Object.keys(t),n=s.length,i=r?e:Object.keys(e),a=i.length,l=r?[]:{},c=new Set(s);let u=0;for(let d=0;d<a;d++){const h=r?d:i[d];(!r&&c.has(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=Za(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return n===a&&u===n?t:l}return e}function ri(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function mn(t){if(!si(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!si(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function si(t){return Object.prototype.toString.call(t)==="[object Object]"}function tx(t){return new Promise(e=>{setTimeout(e,t)})}function rx(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?Za(t,e):e}function sx(t,e,r=0){const s=[...t,e];return r&&s.length>r?s.slice(1):s}function nx(t,e,r=0){const s=[e,...t];return r&&s.length>r?s.slice(0,-1):s}var Zn=Symbol();function Wa(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Zn?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ct,ct,Vt,ii,ox=(ii=class extends As{constructor(){super();H(this,Ct);H(this,ct);H(this,Vt);B(this,Vt,e=>{if(!Rs&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){S(this,ct)||this.setEventListener(S(this,Vt))}onUnsubscribe(){var e;this.hasListeners()||((e=S(this,ct))==null||e.call(this),B(this,ct,void 0))}setEventListener(e){var r;B(this,Vt,e),(r=S(this,ct))==null||r.call(this),B(this,ct,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){S(this,Ct)!==e&&(B(this,Ct,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof S(this,Ct)=="boolean"?S(this,Ct):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ct=new WeakMap,ct=new WeakMap,Vt=new WeakMap,ii),Ya=new ox,Gt,ut,Kt,ai,ix=(ai=class extends As{constructor(){super();H(this,Gt,!0);H(this,ut);H(this,Kt);B(this,Kt,e=>{if(!Rs&&window.addEventListener){const r=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){S(this,ut)||this.setEventListener(S(this,Kt))}onUnsubscribe(){var e;this.hasListeners()||((e=S(this,ut))==null||e.call(this),B(this,ut,void 0))}setEventListener(e){var r;B(this,Kt,e),(r=S(this,ut))==null||r.call(this),B(this,ut,e(this.setOnline.bind(this)))}setOnline(e){S(this,Gt)!==e&&(B(this,Gt,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return S(this,Gt)}},Gt=new WeakMap,ut=new WeakMap,Kt=new WeakMap,ai),ys=new ix;function ax(){let t,e;const r=new Promise((n,i)=>{t=n,e=i});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),t(n)},r.reject=n=>{s({status:"rejected",reason:n}),e(n)},r}function lx(t){return Math.min(1e3*2**t,3e4)}function Ha(t){return(t??"online")==="online"?ys.isOnline():!0}var Va=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ga(t){let e=!1,r=0,s;const n=ax(),i=()=>n.status!=="pending",a=x=>{var y;i()||(m(new Va(x)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>Ya.isFocused()&&(t.networkMode==="always"||ys.isOnline())&&t.canRun(),d=()=>Ha(t.networkMode)&&t.canRun(),h=x=>{i()||(s==null||s(),n.resolve(x))},m=x=>{i()||(s==null||s(),n.reject(x))},p=()=>new Promise(x=>{var y;s=w=>{(i()||u())&&x(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var x;s=void 0,i()||(x=t.onContinue)==null||x.call(t)}),g=()=>{if(i())return;let x;const y=r===0?t.initialPromise:void 0;try{x=y??t.fn()}catch(w){x=Promise.reject(w)}Promise.resolve(x).then(h).catch(w=>{var O;if(i())return;const N=t.retry??(Rs?0:3),v=t.retryDelay??lx,_=typeof v=="function"?v(r,w):v,R=N===!0||typeof N=="number"&&r<N||typeof N=="function"&&N(r,w);if(e||!R){m(w);return}r++,(O=t.onFail)==null||O.call(t,r,w),tx(_).then(()=>u()?void 0:p()).then(()=>{e?m(w):g()})})};return{promise:n,status:()=>n.status,cancel:a,continue:()=>(s==null||s(),n),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():p().then(g),n)}}var cx=t=>setTimeout(t,0);function ux(){let t=[],e=0,r=l=>{l()},s=l=>{l()},n=cx;const i=l=>{e?t.push(l):n(()=>{r(l)})},a=()=>{const l=t;t=[],l.length&&n(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var ve=ux(),Tt,li,Ka=(li=class{constructor(){H(this,Tt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Qv(this.gcTime)&&B(this,Tt,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Rs?1/0:5*60*1e3))}clearGcTimeout(){S(this,Tt)&&(clearTimeout(S(this,Tt)),B(this,Tt,void 0))}},Tt=new WeakMap,li),Jt,Qt,Se,Pt,fe,$r,At,$e,He,ci,dx=(ci=class extends Ka{constructor(e){super();H(this,$e);H(this,Jt);H(this,Qt);H(this,Se);H(this,Pt);H(this,fe);H(this,$r);H(this,At);B(this,At,!1),B(this,$r,e.defaultOptions),this.setOptions(e.options),this.observers=[],B(this,Pt,e.client),B(this,Se,S(this,Pt).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,B(this,Jt,fx(this.options)),this.state=e.state??S(this,Jt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=S(this,fe))==null?void 0:e.promise}setOptions(e){this.options={...S(this,$r),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,Se).remove(this)}setData(e,r){const s=rx(this.state.data,e,this.options);return pe(this,$e,He).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(e,r){pe(this,$e,He).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var s,n;const r=(s=S(this,fe))==null?void 0:s.promise;return(n=S(this,fe))==null||n.cancel(e),r?r.then(Ie).catch(Ie):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,Jt))}isActive(){return this.observers.some(e=>ex(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Zn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>fn(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Xv(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=S(this,fe))==null||r.continue()}onOnline(){var r;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=S(this,fe))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),S(this,Se).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(S(this,fe)&&(S(this,At)?S(this,fe).cancel({revert:!0}):S(this,fe).cancelRetry()),this.scheduleGc()),S(this,Se).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pe(this,$e,He).call(this,{type:"invalidate"})}async fetch(e,r){var c,u,d,h,m,p,g,x,y,w,N,v;if(this.state.fetchStatus!=="idle"&&((c=S(this,fe))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(S(this,fe))return S(this,fe).continueRetry(),S(this,fe).promise}if(e&&this.setOptions(e),!this.options.queryFn){const _=this.observers.find(R=>R.options.queryFn);_&&this.setOptions(_.options)}const s=new AbortController,n=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(B(this,At,!0),s.signal)})},i=()=>{const _=Wa(this.options,r),O=(()=>{const L={client:S(this,Pt),queryKey:this.queryKey,meta:this.meta};return n(L),L})();return B(this,At,!1),this.options.persister?this.options.persister(_,O,this):_(O)},l=(()=>{const _={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:S(this,Pt),state:this.state,fetchFn:i};return n(_),_})();(u=this.options.behavior)==null||u.onFetch(l,this),B(this,Qt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&pe(this,$e,He).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),B(this,fe,Ga({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onFail:(_,R)=>{pe(this,$e,He).call(this,{type:"failed",failureCount:_,error:R})},onPause:()=>{pe(this,$e,He).call(this,{type:"pause"})},onContinue:()=>{pe(this,$e,He).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const _=await S(this,fe).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(p=(m=S(this,Se).config).onSuccess)==null||p.call(m,_,this),(x=(g=S(this,Se).config).onSettled)==null||x.call(g,_,this.state.error,this),_}catch(_){if(_ instanceof Va){if(_.silent)return S(this,fe).promise;if(_.revert){if(this.setState({...S(this,Qt),fetchStatus:"idle"}),this.state.data===void 0)throw _;return this.state.data}}throw pe(this,$e,He).call(this,{type:"error",error:_}),(w=(y=S(this,Se).config).onError)==null||w.call(y,_,this),(v=(N=S(this,Se).config).onSettled)==null||v.call(N,this.state.data,_,this),_}finally{this.scheduleGc()}}},Jt=new WeakMap,Qt=new WeakMap,Se=new WeakMap,Pt=new WeakMap,fe=new WeakMap,$r=new WeakMap,At=new WeakMap,$e=new WeakSet,He=function(e){const r=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...hx(s.data,this.options),fetchMeta:e.meta??null};case"success":const n={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return B(this,Qt,e.manual?n:void 0),n;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=r(this.state),ve.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),S(this,Se).notify({query:this,type:"updated",action:e})})},ci);function hx(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ha(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function fx(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,s=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Fe,ui,mx=(ui=class extends As{constructor(e={}){super();H(this,Fe);this.config=e,B(this,Fe,new Map)}build(e,r,s){const n=r.queryKey,i=r.queryHash??qn(n,r);let a=this.get(i);return a||(a=new dx({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(r),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){S(this,Fe).has(e.queryHash)||(S(this,Fe).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=S(this,Fe).get(e.queryHash);r&&(e.destroy(),r===e&&S(this,Fe).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ve.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return S(this,Fe).get(e)}getAll(){return[...S(this,Fe).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(s=>ei(r,s))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(s=>ei(e,s)):r}notify(e){ve.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){ve.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ve.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Fe=new WeakMap,ui),Ue,be,Rt,Be,it,di,px=(di=class extends Ka{constructor(e){super();H(this,Be);H(this,Ue);H(this,be);H(this,Rt);this.mutationId=e.mutationId,B(this,be,e.mutationCache),B(this,Ue,[]),this.state=e.state||gx(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){S(this,Ue).includes(e)||(S(this,Ue).push(e),this.clearGcTimeout(),S(this,be).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){B(this,Ue,S(this,Ue).filter(r=>r!==e)),this.scheduleGc(),S(this,be).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){S(this,Ue).length||(this.state.status==="pending"?this.scheduleGc():S(this,be).remove(this))}continue(){var e;return((e=S(this,Rt))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,l,c,u,d,h,m,p,g,x,y,w,N,v,_,R,O,L,$;const r=()=>{pe(this,Be,it).call(this,{type:"continue"})};B(this,Rt,Ga({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(j,A)=>{pe(this,Be,it).call(this,{type:"failed",failureCount:j,error:A})},onPause:()=>{pe(this,Be,it).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,be).canRun(this)}));const s=this.state.status==="pending",n=!S(this,Rt).canStart();try{if(s)r();else{pe(this,Be,it).call(this,{type:"pending",variables:e,isPaused:n}),await((a=(i=S(this,be).config).onMutate)==null?void 0:a.call(i,e,this));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));A!==this.state.context&&pe(this,Be,it).call(this,{type:"pending",context:A,variables:e,isPaused:n})}const j=await S(this,Rt).start();return await((d=(u=S(this,be).config).onSuccess)==null?void 0:d.call(u,j,e,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,j,e,this.state.context)),await((g=(p=S(this,be).config).onSettled)==null?void 0:g.call(p,j,null,this.state.variables,this.state.context,this)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,j,null,e,this.state.context)),pe(this,Be,it).call(this,{type:"success",data:j}),j}catch(j){try{throw await((N=(w=S(this,be).config).onError)==null?void 0:N.call(w,j,e,this.state.context,this)),await((_=(v=this.options).onError)==null?void 0:_.call(v,j,e,this.state.context)),await((O=(R=S(this,be).config).onSettled)==null?void 0:O.call(R,void 0,j,this.state.variables,this.state.context,this)),await(($=(L=this.options).onSettled)==null?void 0:$.call(L,void 0,j,e,this.state.context)),j}finally{pe(this,Be,it).call(this,{type:"error",error:j})}}finally{S(this,be).runNext(this)}}},Ue=new WeakMap,be=new WeakMap,Rt=new WeakMap,Be=new WeakSet,it=function(e){const r=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ve.batch(()=>{S(this,Ue).forEach(s=>{s.onMutationUpdate(e)}),S(this,be).notify({mutation:this,type:"updated",action:e})})},di);function gx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ge,Oe,Or,hi,yx=(hi=class extends As{constructor(e={}){super();H(this,Ge);H(this,Oe);H(this,Or);this.config=e,B(this,Ge,new Set),B(this,Oe,new Map),B(this,Or,0)}build(e,r,s){const n=new px({mutationCache:this,mutationId:++qr(this,Or)._,options:e.defaultMutationOptions(r),state:s});return this.add(n),n}add(e){S(this,Ge).add(e);const r=rs(e);if(typeof r=="string"){const s=S(this,Oe).get(r);s?s.push(e):S(this,Oe).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(S(this,Ge).delete(e)){const r=rs(e);if(typeof r=="string"){const s=S(this,Oe).get(r);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&S(this,Oe).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=rs(e);if(typeof r=="string"){const s=S(this,Oe).get(r),n=s==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const r=rs(e);if(typeof r=="string"){const n=(s=S(this,Oe).get(r))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ve.batch(()=>{S(this,Ge).forEach(e=>{this.notify({type:"removed",mutation:e})}),S(this,Ge).clear(),S(this,Oe).clear()})}getAll(){return Array.from(S(this,Ge))}find(e){const r={exact:!0,...e};return this.getAll().find(s=>ti(r,s))}findAll(e={}){return this.getAll().filter(r=>ti(e,r))}notify(e){ve.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return ve.batch(()=>Promise.all(e.map(r=>r.continue().catch(Ie))))}},Ge=new WeakMap,Oe=new WeakMap,Or=new WeakMap,hi);function rs(t){var e;return(e=t.options.scope)==null?void 0:e.id}function ni(t){return{onFetch:(e,r)=>{var d,h,m,p,g;const s=e.options,n=(m=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],a=((g=e.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let x=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},w=Wa(e.options,e.fetchOptions),N=async(v,_,R)=>{if(x)return Promise.reject();if(_==null&&v.pages.length)return Promise.resolve(v);const L=(()=>{const k={client:e.client,queryKey:e.queryKey,pageParam:_,direction:R?"backward":"forward",meta:e.options.meta};return y(k),k})(),$=await w(L),{maxPages:j}=e.options,A=R?nx:sx;return{pages:A(v.pages,$,j),pageParams:A(v.pageParams,_,j)}};if(n&&i.length){const v=n==="backward",_=v?bx:oi,R={pages:i,pageParams:a},O=_(s,R);l=await N(R,O,v)}else{const v=t??i.length;do{const _=c===0?a[0]??s.initialPageParam:oi(s,l);if(c>0&&_==null)break;l=await N(l,_),c++}while(c<v)}return l};e.options.persister?e.fetchFn=()=>{var x,y;return(y=(x=e.options).persister)==null?void 0:y.call(x,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function oi(t,{pages:e,pageParams:r}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,r[s],r):void 0}function bx(t,{pages:e,pageParams:r}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,r[0],r):void 0}var ie,dt,ht,Xt,er,ft,tr,rr,fi,vx=(fi=class{constructor(t={}){H(this,ie);H(this,dt);H(this,ht);H(this,Xt);H(this,er);H(this,ft);H(this,tr);H(this,rr);B(this,ie,t.queryCache||new mx),B(this,dt,t.mutationCache||new yx),B(this,ht,t.defaultOptions||{}),B(this,Xt,new Map),B(this,er,new Map),B(this,ft,0)}mount(){qr(this,ft)._++,S(this,ft)===1&&(B(this,tr,Ya.subscribe(async t=>{t&&(await this.resumePausedMutations(),S(this,ie).onFocus())})),B(this,rr,ys.subscribe(async t=>{t&&(await this.resumePausedMutations(),S(this,ie).onOnline())})))}unmount(){var t,e;qr(this,ft)._--,S(this,ft)===0&&((t=S(this,tr))==null||t.call(this),B(this,tr,void 0),(e=S(this,rr))==null||e.call(this),B(this,rr,void 0))}isFetching(t){return S(this,ie).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return S(this,dt).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=S(this,ie).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=S(this,ie).build(this,e),s=r.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(fn(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return S(this,ie).findAll(t).map(({queryKey:e,state:r})=>{const s=r.data;return[e,s]})}setQueryData(t,e,r){const s=this.defaultQueryOptions({queryKey:t}),n=S(this,ie).get(s.queryHash),i=n==null?void 0:n.state.data,a=Jv(e,i);if(a!==void 0)return S(this,ie).build(this,s).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return ve.batch(()=>S(this,ie).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=S(this,ie).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=S(this,ie);ve.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=S(this,ie);return ve.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},s=ve.batch(()=>S(this,ie).findAll(t).map(n=>n.cancel(r)));return Promise.all(s).then(Ie).catch(Ie)}invalidateQueries(t,e={}){return ve.batch(()=>(S(this,ie).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},s=ve.batch(()=>S(this,ie).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ie)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Ie)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=S(this,ie).build(this,e);return r.isStaleByTime(fn(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ie).catch(Ie)}fetchInfiniteQuery(t){return t.behavior=ni(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ie).catch(Ie)}ensureInfiniteQueryData(t){return t.behavior=ni(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ys.isOnline()?S(this,dt).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,ie)}getMutationCache(){return S(this,dt)}getDefaultOptions(){return S(this,ht)}setDefaultOptions(t){B(this,ht,t)}setQueryDefaults(t,e){S(this,Xt).set(Rr(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...S(this,Xt).values()],r={};return e.forEach(s=>{Ir(t,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(t,e){S(this,er).set(Rr(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...S(this,er).values()],r={};return e.forEach(s=>{Ir(t,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...S(this,ht).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qn(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Zn&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...S(this,ht).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){S(this,ie).clear(),S(this,dt).clear()}},ie=new WeakMap,dt=new WeakMap,ht=new WeakMap,Xt=new WeakMap,er=new WeakMap,ft=new WeakMap,tr=new WeakMap,rr=new WeakMap,fi),xx=f.createContext(void 0),wx=({client:t,children:e})=>(f.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(xx.Provider,{value:t,children:e}));const _x=new vx;Vs.createRoot(document.getElementById("root")).render(o.jsxs(Hs.StrictMode,{children:[o.jsxs(wc,{children:[" ",o.jsx(wx,{client:_x,children:o.jsx(au,{supabaseClient:ue,children:o.jsx(Kv,{})})})]})," "]}));
