const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PriceManager-CZamvrL2-DYY2dFMw.js","assets/react-zpJz99ds.js"])))=>i.map(i=>d[i]);
var HA=e=>{throw TypeError(e)};var g0=(e,t,r)=>t.has(e)||HA("Cannot "+r);var M=(e,t,r)=>(g0(e,t,"read from private field"),r?r.call(e):t.get(e)),$e=(e,t,r)=>t.has(e)?HA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),je=(e,t,r,n)=>(g0(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ye=(e,t,r)=>(g0(e,t,"access private method"),r);var _g=(e,t,r,n)=>({set _(s){je(e,t,s,r)},get _(){return M(e,t,n)}});import{r as v,a as ro,g as yK,c as Ps,n as wM,R as ae,j as _M}from"./react-zpJz99ds.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var jM={exports:{}},Fb={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vK=v,bK=Symbol.for("react.element"),xK=Symbol.for("react.fragment"),wK=Object.prototype.hasOwnProperty,_K=vK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jK={key:!0,ref:!0,__self:!0,__source:!0};function kM(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)wK.call(t,n)&&!jK.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:bK,type:e,key:i,ref:o,props:s,_owner:_K.current}}Fb.Fragment=xK;Fb.jsx=kM;Fb.jsxs=kM;jM.exports=Fb;var g=jM.exports,vj={},KA=ro;vj.createRoot=KA.createRoot,vj.hydrateRoot=KA.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ZA="popstate";function kK(e={}){function t(n,s){let{pathname:i,search:o,hash:a}=n.location;return bj("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Ep(s)}return SK(t,r,null,e)}function Ft(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Rs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NK(){return Math.random().toString(36).substring(2,10)}function GA(e,t){return{usr:e.state,key:e.key,idx:t}}function bj(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?vh(t):t,state:r,key:t&&t.key||n||NK()}}function Ep({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function vh(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function SK(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let b=u(),x=b==null?null:b-c;c=b,l&&l({action:a,location:m.location,delta:x})}function f(b,x){a="PUSH";let w=bj(m.location,b,x);c=u()+1;let _=GA(w,c),j=m.createHref(w);try{o.pushState(_,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(j)}i&&l&&l({action:a,location:m.location,delta:1})}function p(b,x){a="REPLACE";let w=bj(m.location,b,x);c=u();let _=GA(w,c),j=m.createHref(w);o.replaceState(_,"",j),i&&l&&l({action:a,location:m.location,delta:0})}function y(b){return EK(b)}let m={get action(){return a},get location(){return e(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ZA,h),l=b,()=>{s.removeEventListener(ZA,h),l=null}},createHref(b){return t(s,b)},createURL:y,encodeLocation(b){let x=y(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(b){return o.go(b)}};return m}function EK(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ft(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Ep(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function NM(e,t,r="/"){return CK(e,t,r,!1)}function CK(e,t,r,n){let s=typeof t=="string"?vh(t):t,i=Go(s.pathname||"/",r);if(i==null)return null;let o=SM(e);TK(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=$K(i);a=zK(o[l],c,n)}return a}function SM(e,t=[],r=[],n="",s=!1){let i=(o,a,l=s,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;Ft(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=Vo([n,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(Ft(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),SM(o.children,t,f,h,l)),!(o.path==null&&!o.index)&&t.push({path:h,score:LK(h,o.index),routesMeta:f})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of EM(o.path))i(o,a,!0,c)}),t}function EM(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=EM(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function TK(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:MK(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var AK=/^:[\w-]+$/,OK=3,PK=2,RK=1,IK=10,DK=-2,YA=e=>e==="*";function LK(e,t){let r=e.split("/"),n=r.length;return r.some(YA)&&(n+=DK),t&&(n+=PK),r.filter(s=>!YA(s)).reduce((s,i)=>s+(AK.test(i)?OK:i===""?RK:IK),n)}function MK(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function zK(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=tv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=tv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Vo([i,h.pathname]),pathnameBase:VK(Vo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Vo([i,h.pathnameBase]))}return o}function tv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=FK(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:h},f)=>{if(u==="*"){let y=a[f]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function FK(e,t=!1,r=!0){Rs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function $K(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Go(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function UK(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?vh(e):e;return{pathname:r?r.startsWith("/")?r:qK(r,t):t,search:WK(n),hash:HK(s)}}function qK(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function y0(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BK(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function VS(e){let t=BK(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function WS(e,t,r,n=!1){let s;typeof e=="string"?s=vh(e):(s={...e},Ft(!s.pathname||!s.pathname.includes("?"),y0("?","pathname","search",s)),Ft(!s.pathname||!s.pathname.includes("#"),y0("#","pathname","hash",s)),Ft(!s.search||!s.search.includes("#"),y0("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?t[h]:"/"}let l=UK(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Vo=e=>e.join("/").replace(/\/\/+/g,"/"),VK=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),WK=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,HK=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function KK(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var CM=["POST","PUT","PATCH","DELETE"];new Set(CM);var ZK=["GET",...CM];new Set(ZK);var bh=v.createContext(null);bh.displayName="DataRouter";var $b=v.createContext(null);$b.displayName="DataRouterState";v.createContext(!1);var TM=v.createContext({isTransitioning:!1});TM.displayName="ViewTransition";var GK=v.createContext(new Map);GK.displayName="Fetchers";var YK=v.createContext(null);YK.displayName="Await";var ji=v.createContext(null);ji.displayName="Navigation";var xm=v.createContext(null);xm.displayName="Location";var zs=v.createContext({outlet:null,matches:[],isDataRoute:!1});zs.displayName="Route";var HS=v.createContext(null);HS.displayName="RouteError";function JK(e,{relative:t}={}){Ft(xh(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(ji),{hash:s,pathname:i,search:o}=wm(e,{relative:t}),a=i;return r!=="/"&&(a=i==="/"?r:Vo([r,i])),n.createHref({pathname:a,search:o,hash:s})}function xh(){return v.useContext(xm)!=null}function Fs(){return Ft(xh(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(xm).location}var AM="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function OM(e){v.useContext(ji).static||v.useLayoutEffect(e)}function uo(){let{isDataRoute:e}=v.useContext(zs);return e?hZ():XK()}function XK(){Ft(xh(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(bh),{basename:t,navigator:r}=v.useContext(ji),{matches:n}=v.useContext(zs),{pathname:s}=Fs(),i=JSON.stringify(VS(n)),o=v.useRef(!1);return OM(()=>{o.current=!0}),v.useCallback((l,c={})=>{if(Rs(o.current,AM),!o.current)return;if(typeof l=="number"){r.go(l);return}let u=WS(l,JSON.parse(i),s,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Vo([t,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[t,r,i,s,e])}var QK=v.createContext(null);function eZ(e){let t=v.useContext(zs).outlet;return t&&v.createElement(QK.Provider,{value:e},t)}function nu(){let{matches:e}=v.useContext(zs),t=e[e.length-1];return t?t.params:{}}function wm(e,{relative:t}={}){let{matches:r}=v.useContext(zs),{pathname:n}=Fs(),s=JSON.stringify(VS(r));return v.useMemo(()=>WS(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function tZ(e,t){return PM(e,t)}function PM(e,t,r,n,s){var w;Ft(xh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(ji),{matches:o}=v.useContext(zs),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";RM(c,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=Fs(),p;if(t){let _=typeof t=="string"?vh(t):t;Ft(u==="/"||((w=_.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=f;let y=p.pathname||"/",m=y;if(u!=="/"){let _=u.replace(/^\//,"").split("/");m="/"+y.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=NM(e,{pathname:m});Rs(h||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Rs(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=oZ(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Vo([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Vo([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,r,n,s);return t&&x?v.createElement(xm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function rZ(){let e=dZ(),t=KK(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,o)}var nZ=v.createElement(rZ,null),sZ=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(zs.Provider,{value:this.props.routeContext},v.createElement(HS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iZ({routeContext:e,match:t,children:r}){let n=v.useContext(bh);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(zs.Provider,{value:e},r)}function oZ(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let c=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Ft(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,l=-1;if(r)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:f}=r,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,u,h)=>{let f,p=!1,y=null,m=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,y=u.route.errorElement||nZ,a&&(l<0&&h===0?(RM("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,m=null):l===h&&(p=!0,m=u.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,h+1)),x=()=>{let w;return f?w=y:p?w=m:u.route.Component?w=v.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=c,v.createElement(iZ,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?v.createElement(sZ,{location:r.location,revalidation:r.revalidation,component:y,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):x()},null)}function KS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aZ(e){let t=v.useContext(bh);return Ft(t,KS(e)),t}function lZ(e){let t=v.useContext($b);return Ft(t,KS(e)),t}function cZ(e){let t=v.useContext(zs);return Ft(t,KS(e)),t}function ZS(e){let t=cZ(e),r=t.matches[t.matches.length-1];return Ft(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function uZ(){return ZS("useRouteId")}function dZ(){var n;let e=v.useContext(HS),t=lZ("useRouteError"),r=ZS("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function hZ(){let{router:e}=aZ("useNavigate"),t=ZS("useNavigate"),r=v.useRef(!1);return OM(()=>{r.current=!0}),v.useCallback(async(s,i={})=>{Rs(r.current,AM),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var JA={};function RM(e,t,r){!t&&!JA[e]&&(JA[e]=!0,Rs(!1,r))}v.memo(fZ);function fZ({routes:e,future:t,state:r,unstable_onError:n}){return PM(e,void 0,r,n,t)}function IM({to:e,replace:t,state:r,relative:n}){Ft(xh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(ji);Rs(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(zs),{pathname:o}=Fs(),a=uo(),l=WS(e,VS(i),o,n==="path"),c=JSON.stringify(l);return v.useEffect(()=>{a(JSON.parse(c),{replace:t,state:r,relative:n})},[a,c,n,t,r]),null}function GS(e){return eZ(e.context)}function Te(e){Ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pZ({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Ft(!xh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=v.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=vh(r));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:f="default"}=r,p=v.useMemo(()=>{let y=Go(l,o);return y==null?null:{location:{pathname:y,search:c,hash:u,state:h,key:f},navigationType:n}},[o,l,c,u,h,f,n]);return Rs(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:v.createElement(ji.Provider,{value:a},v.createElement(xm.Provider,{children:t,value:p}))}function DM({children:e,location:t}){return tZ(xj(e),t)}function xj(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,xj(n.props.children,i));return}Ft(n.type===Te,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ft(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=xj(n.props.children,i)),r.push(o)}),r}var Oy="get",Py="application/x-www-form-urlencoded";function Ub(e){return e!=null&&typeof e.tagName=="string"}function mZ(e){return Ub(e)&&e.tagName.toLowerCase()==="button"}function gZ(e){return Ub(e)&&e.tagName.toLowerCase()==="form"}function yZ(e){return Ub(e)&&e.tagName.toLowerCase()==="input"}function vZ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function bZ(e,t){return e.button===0&&(!t||t==="_self")&&!vZ(e)}function wj(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function xZ(e,t){let r=wj(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var jg=null;function wZ(){if(jg===null)try{new FormData(document.createElement("form"),0),jg=!1}catch{jg=!0}return jg}var _Z=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function v0(e){return e!=null&&!_Z.has(e)?(Rs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Py}"`),null):e}function jZ(e,t){let r,n,s,i,o;if(gZ(e)){let a=e.getAttribute("action");n=a?Go(a,t):null,r=e.getAttribute("method")||Oy,s=v0(e.getAttribute("enctype"))||Py,i=new FormData(e)}else if(mZ(e)||yZ(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?Go(l,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||Oy,s=v0(e.getAttribute("formenctype"))||v0(a.getAttribute("enctype"))||Py,i=new FormData(a,e),!wZ()){let{name:c,type:u,value:h}=e;if(u==="image"){let f=c?`${c}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else c&&i.append(c,h)}}else{if(Ub(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Oy,n=null,s=Py,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function YS(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function kZ(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Go(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function NZ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function SZ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function EZ(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await NZ(i,r);return o.links?o.links():[]}return[]}));return OZ(n.flat(1).filter(SZ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function XA(e,t,r,n,s,i){let o=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,a=(l,c)=>{var u;return r[c].pathname!==l.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?t.filter((l,c)=>{var h;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function CZ(e,t,{includeHydrateFallback:r}={}){return TZ(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function TZ(e){return[...new Set(e)]}function AZ(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function OZ(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(AZ(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function LM(){let e=v.useContext(bh);return YS(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function PZ(){let e=v.useContext($b);return YS(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var JS=v.createContext(void 0);JS.displayName="FrameworkContext";function MM(){let e=v.useContext(JS);return YS(e,"You must render this element inside a <HydratedRouter> element"),e}function RZ(e,t){let r=v.useContext(JS),[n,s]=v.useState(!1),[i,o]=v.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=t,f=v.useRef(null);v.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=x=>{x.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(m,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[e]),v.useEffect(()=>{if(n){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[n]);let p=()=>{s(!0)},y=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:df(a,p),onBlur:df(l,y),onMouseEnter:df(c,p),onMouseLeave:df(u,y),onTouchStart:df(h,p)}]:[!1,f,{}]}function df(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function IZ({page:e,...t}){let{router:r}=LM(),n=v.useMemo(()=>NM(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(LZ,{page:e,matches:n,...t}):null}function DZ(e){let{manifest:t,routeModules:r}=MM(),[n,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return EZ(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function LZ({page:e,matches:t,...r}){let n=Fs(),{manifest:s,routeModules:i}=MM(),{basename:o}=LM(),{loaderData:a,matches:l}=PZ(),c=v.useMemo(()=>XA(e,t,l,s,n,"data"),[e,t,l,s,n]),u=v.useMemo(()=>XA(e,t,l,s,n,"assets"),[e,t,l,s,n]),h=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let y=new Set,m=!1;if(t.forEach(x=>{var _;let w=s.routes[x.route.id];!w||!w.hasLoader||(!c.some(j=>j.route.id===x.route.id)&&x.route.id in a&&((_=i[x.route.id])!=null&&_.shouldRevalidate)||w.hasClientLoader?m=!0:y.add(x.route.id))}),y.size===0)return[];let b=kZ(e,o,"data");return m&&y.size>0&&b.searchParams.set("_routes",t.filter(x=>y.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[o,a,n,s,c,t,e,i]),f=v.useMemo(()=>CZ(u,s),[u,s]),p=DZ(u);return v.createElement(v.Fragment,null,h.map(y=>v.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),f.map(y=>v.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),p.map(({key:y,link:m})=>v.createElement("link",{key:y,nonce:r.nonce,...m})))}function MZ(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var zM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zM&&(window.__reactRouterVersion="7.8.2")}catch{}function zZ({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=kK({window:r,v5Compat:!0}));let s=n.current,[i,o]=v.useState({action:s.action,location:s.location}),a=v.useCallback(l=>{v.startTransition(()=>o(l))},[o]);return v.useLayoutEffect(()=>s.listen(a),[s,a]),v.createElement(pZ,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var FM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rr=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h,...f},p){let{basename:y}=v.useContext(ji),m=typeof c=="string"&&FM.test(c),b,x=!1;if(typeof c=="string"&&m&&(b=c,zM))try{let T=new URL(window.location.href),P=c.startsWith("//")?new URL(T.protocol+c):new URL(c),O=Go(P.pathname,y);P.origin===T.origin&&O!=null?c=O+P.search+P.hash:x=!0}catch{Rs(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=JK(c,{relative:s}),[_,j,k]=RZ(n,f),N=UZ(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function C(T){t&&t(T),T.defaultPrevented||N(T)}let E=v.createElement("a",{...f,...k,href:b||w,onClick:x||i?t:C,ref:MZ(p,j),target:l,"data-discover":!m&&r==="render"?"true":void 0});return _&&!m?v.createElement(v.Fragment,null,E,v.createElement(IZ,{page:w})):E});Rr.displayName="Link";var md=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let h=wm(o,{relative:c.relative}),f=Fs(),p=v.useContext($b),{navigator:y,basename:m}=v.useContext(ji),b=p!=null&&KZ(h)&&a===!0,x=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,w=f.pathname,_=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(w=w.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&m&&(_=Go(_,m)||_);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let k=w===x||!s&&w.startsWith(x)&&w.charAt(j)==="/",N=_!=null&&(_===x||!s&&_.startsWith(x)&&_.charAt(x.length)==="/"),C={isActive:k,isPending:N,isTransitioning:b},E=k?t:void 0,T;typeof n=="function"?T=n(C):T=[n,k?"active":null,N?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(C):i;return v.createElement(Rr,{...c,"aria-current":E,className:T,ref:u,style:P,to:o,viewTransition:a},typeof l=="function"?l(C):l)});md.displayName="NavLink";var FZ=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=Oy,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...f},p)=>{let y=WZ(),m=HZ(a,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&FM.test(a),w=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let j=_.nativeEvent.submitter,k=(j==null?void 0:j.getAttribute("formmethod"))||o;y(j||_.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:h})};return v.createElement("form",{ref:p,method:b,action:m,onSubmit:n?l:w,...f,"data-discover":!x&&e==="render"?"true":void 0})});FZ.displayName="Form";function $Z(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $M(e){let t=v.useContext(bh);return Ft(t,$Z(e)),t}function UZ(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=uo(),l=Fs(),c=wm(e,{relative:i});return v.useCallback(u=>{if(bZ(u,t)){u.preventDefault();let h=r!==void 0?r:Ep(l)===Ep(c);a(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,r,n,t,e,s,i,o])}function qZ(e){Rs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(wj(e)),r=v.useRef(!1),n=Fs(),s=v.useMemo(()=>xZ(n.search,r.current?null:t.current),[n.search]),i=uo(),o=v.useCallback((a,l)=>{const c=wj(typeof a=="function"?a(new URLSearchParams(s)):a);r.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var BZ=0,VZ=()=>`__${String(++BZ)}__`;function WZ(){let{router:e}=$M("useSubmit"),{basename:t}=v.useContext(ji),r=uZ();return v.useCallback(async(n,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=jZ(n,t);if(s.navigate===!1){let u=s.fetcherKey||VZ();await e.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function HZ(e,{relative:t}={}){let{basename:r}=v.useContext(ji),n=v.useContext(zs);Ft(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...wm(e||".",{relative:t})},o=Fs();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let u=a.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Vo([r,i.pathname])),Ep(i)}function KZ(e,{relative:t}={}){let r=v.useContext(TM);Ft(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=$M("useViewTransitionState"),s=wm(e,{relative:t});if(!r.isTransitioning)return!1;let i=Go(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Go(r.nextLocation.pathname,n)||r.nextLocation.pathname;return tv(s.pathname,o)!=null||tv(s.pathname,i)!=null}const ZZ="modulepreload",GZ=function(e){return"/"+e},QA={},wh=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=GZ(l),l in QA)return;QA[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":ZZ,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},YZ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>wh(async()=>{const{default:n}=await Promise.resolve().then(()=>_h);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class XS extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class JZ extends XS{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class eO extends XS{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class tO extends XS{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var _j;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(_j||(_j={}));var XZ=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class QZ{constructor(t,{headers:r={},customFetch:n,region:s=_j.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=YZ(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return XZ(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(m=>{throw new JZ(m)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new eO(h);if(!h.ok)throw new tO(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield h.json():p==="application/octet-stream"?y=yield h.blob():p==="text/event-stream"?y=h:p==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof tO||s instanceof eO?s.context:void 0}}})}}var $n={},QS={},qb={},_m={},Bb={},Vb={},eG=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hd=eG();const tG=Hd.fetch,UM=Hd.fetch.bind(Hd),qM=Hd.Headers,rG=Hd.Request,nG=Hd.Response,_h=Object.freeze(Object.defineProperty({__proto__:null,Headers:qM,Request:rG,Response:nG,default:UM,fetch:tG},Symbol.toStringTag,{value:"Module"})),sG=yK(_h);var Wb={};Object.defineProperty(Wb,"__esModule",{value:!0});let iG=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Wb.default=iG;var BM=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vb,"__esModule",{value:!0});const oG=BM(sG),aG=BM(Wb);let lG=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=oG.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,c;let u=null,h=null,f=null,p=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=w:h=JSON.parse(w))}const b=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),x=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(h=[],u=null,p=200,y="OK")}catch{i.status===404&&b===""?(p=204,y="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,p=200,y="OK"),u&&this.shouldThrowOnError)throw new aG.default(u)}return{error:u,data:h,count:f,status:p,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Vb.default=lG;var cG=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bb,"__esModule",{value:!0});const uG=cG(Vb);let dG=class extends uG.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Bb.default=dG;var hG=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_m,"__esModule",{value:!0});const fG=hG(Bb);let pG=class extends fG.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};_m.default=pG;var mG=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qb,"__esModule",{value:!0});const hf=mG(_m);let gG=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new hf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new hf.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new hf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new hf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new hf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};qb.default=gG;var VM=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(QS,"__esModule",{value:!0});const yG=VM(qb),vG=VM(_m);let bG=class WM{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new yG.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new WM(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new vG.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};QS.default=bG;var jh=Ps&&Ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($n,"__esModule",{value:!0});$n.PostgrestError=$n.PostgrestBuilder=$n.PostgrestTransformBuilder=$n.PostgrestFilterBuilder=$n.PostgrestQueryBuilder=$n.PostgrestClient=void 0;const HM=jh(QS);$n.PostgrestClient=HM.default;const KM=jh(qb);$n.PostgrestQueryBuilder=KM.default;const ZM=jh(_m);$n.PostgrestFilterBuilder=ZM.default;const GM=jh(Bb);$n.PostgrestTransformBuilder=GM.default;const YM=jh(Vb);$n.PostgrestBuilder=YM.default;const JM=jh(Wb);$n.PostgrestError=JM.default;var xG=$n.default={PostgrestClient:HM.default,PostgrestQueryBuilder:KM.default,PostgrestFilterBuilder:ZM.default,PostgrestTransformBuilder:GM.default,PostgrestBuilder:YM.default,PostgrestError:JM.default};const{PostgrestClient:wG,PostgrestQueryBuilder:Aqe,PostgrestFilterBuilder:Oqe,PostgrestTransformBuilder:Pqe,PostgrestBuilder:Rqe,PostgrestError:Iqe}=xG;class _G{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const jG="2.15.1",kG=`realtime-js/${jG}`,NG="1.0.0",jj=1e4,SG=1e3,EG=100;var tp;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(tp||(tp={}));var Nr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Nr||(Nr={}));var oi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(oi||(oi={}));var kj;(function(e){e.websocket="websocket"})(kj||(kj={}));var dc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(dc||(dc={}));class CG{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+s));o=o+s;const l=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class XM{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_t||(_t={}));const rO=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=TG(o,e,t,s),i),{})},TG=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?QM(i,o):Nj(o)},QM=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return RG(t,r)}switch(e){case _t.bool:return AG(t);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return OG(t);case _t.json:case _t.jsonb:return PG(t);case _t.timestamp:return IG(t);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return Nj(t);default:return Nj(t)}},Nj=e=>e,AG=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},OG=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},PG=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},RG=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>QM(t,a))}return e},IG=e=>typeof e=="string"?e.replace(" ","T"):e,e6=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class b0{constructor(t,r,n={},s=jj){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var nO;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(nO||(nO={}));class rp{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rp.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=rp.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=rp.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),y=u.filter(b=>p.indexOf(b.presence_ref)<0),m=h.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(a[c]=y),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sO;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(sO||(sO={}));var np;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(np||(np={}));var Ao;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ao||(Ao={}));class eE{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Nr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new b0(this,oi.join,this.params,this.timeout),this.rejoinTimer=new XM(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Nr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Nr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(oi.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new rp(this),this.broadcastEndpointURL=e6(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Nr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[np.PRESENCE]&&this.bindings[np.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Ao.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Ao.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t==null||t(Ao.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,m=(p=y==null?void 0:y.length)!==null&&p!==void 0?p:0,b=[];for(let x=0;x<m;x++){const w=y[x],{filter:{event:_,schema:j,table:k,filter:N}}=w,C=f&&f[x];if(C&&C.event===_&&C.schema===j&&C.table===k&&C.filter===N)b.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=Nr.errored,t==null||t(Ao.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Ao.SUBSCRIBED);return}}).receive("error",f=>{this.state=Nr.errored,t==null||t(Ao.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ao.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Nr.joined&&t===np.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Nr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(oi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new b0(this,oi.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new b0(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>EG){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=oi;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,m,b;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(m=p.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var y,m,b,x,w,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const j=p.id,k=(y=p.filter)===null||y===void 0?void 0:y.event;return j&&((m=r.ids)===null||m===void 0?void 0:m.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(w=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return j==="*"||j===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:m,table:b,commit_timestamp:x,type:w,errors:_}=y;f=Object.assign(Object.assign({},{schema:m,table:b,commit_timestamp:x,eventType:w,new:{},old:{},errors:_}),this._getPayloadRecords(y))}p.callback(f,n)})}_isClosed(){return this.state===Nr.closed}_isJoined(){return this.state===Nr.joined}_isJoining(){return this.state===Nr.joining}_isLeaving(){return this.state===Nr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&eE.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(oi.close,{},t)}_onError(t){this._on(oi.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=rO(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=rO(t.columns,t.old_record)),r}}const iO=()=>{},kg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},DG=[1e3,2e3,5e3,1e4],LG=1e4,MG=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zG{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jj,this.transport=null,this.heartbeatIntervalMs=kg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=iO,this.ref=0,this.reconnectTimer=null,this.logger=iO,this.conn=null,this.sendBuffer=[],this.serializer=new CG,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>wh(async()=>{const{default:a}=await Promise.resolve().then(()=>_h);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${kj.websocket}`,this.httpEndpoint=e6(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_G.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:NG}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case tp.connecting:return dc.Connecting;case tp.open:return dc.Open;case tp.closing:return dc.Closing;default:return dc.Closed}}isConnected(){return this.connectionState()===dc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new eE(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(SG,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},kg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(oi.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([MG],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:kG};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(oi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new XM(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},kg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:jj,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:kg.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t==null?void 0:t.reconnectAfterMs)!==null&&a!==void 0?a:u=>DG[u-1]||LG,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(u,h)=>h(JSON.stringify(u)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class tE extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Cr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class FG extends tE{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Sj extends tE{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var $G=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const t6=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>wh(async()=>{const{default:n}=await Promise.resolve().then(()=>_h);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},UG=()=>$G(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wh(()=>Promise.resolve().then(()=>_h),void 0)).Response:Response}),Ej=e=>{if(Array.isArray(e))return e.map(r=>Ej(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ej(n)}),t},qG=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var su=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const x0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),BG=(e,t,r)=>su(void 0,void 0,void 0,function*(){const n=yield UG();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new FG(x0(s),i,o))}).catch(s=>{t(new Sj(x0(s),s))}):t(new Sj(x0(e),e))}),VG=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(qG(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function jm(e,t,r,n,s,i){return su(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,VG(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>BG(l,a,n))})})}function rv(e,t,r,n){return su(this,void 0,void 0,function*(){return jm(e,"GET",t,r,n)})}function zi(e,t,r,n,s){return su(this,void 0,void 0,function*(){return jm(e,"POST",t,n,s,r)})}function Cj(e,t,r,n,s){return su(this,void 0,void 0,function*(){return jm(e,"PUT",t,n,s,r)})}function WG(e,t,r,n){return su(this,void 0,void 0,function*(){return jm(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function r6(e,t,r,n,s){return su(this,void 0,void 0,function*(){return jm(e,"DELETE",t,n,s,r)})}var vn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const HG={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class KG{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=t6(s)}uploadOrUpdate(t,r,n,s){return vn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},oO),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(t=="PUT"?Cj:zi)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Cr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return vn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return vn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:oO.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield Cj(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(Cr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return vn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield zi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new tE("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}})}update(t,r,n){return vn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return vn(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Cr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return vn(this,void 0,void 0,function*(){try{return{data:{path:(yield zi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Cr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return vn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield zi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Cr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return vn(this,void 0,void 0,function*(){try{const s=yield zi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Cr(s))return{data:null,error:s};throw s}})}download(t,r){return vn(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield rv(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Cr(a))return{data:null,error:a};throw a}})}info(t){return vn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield rv(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ej(n),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}})}exists(t){return vn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield WG(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Cr(n)&&n instanceof Sj){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return vn(this,void 0,void 0,function*(){try{return{data:yield r6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}})}list(t,r,n){return vn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},HG),r),{prefix:t||""});return{data:yield zi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Cr(s))return{data:null,error:s};throw s}})}listV2(t,r){return vn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield zi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const ZG="2.11.0",GG={"X-Client-Info":`storage-js/${ZG}`};var ku=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class YG{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},GG),r),this.fetch=t6(n)}listBuckets(){return ku(this,void 0,void 0,function*(){try{return{data:yield rv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Cr(t))return{data:null,error:t};throw t}})}getBucket(t){return ku(this,void 0,void 0,function*(){try{return{data:yield rv(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ku(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ku(this,void 0,void 0,function*(){try{return{data:yield Cj(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Cr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ku(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ku(this,void 0,void 0,function*(){try{return{data:yield r6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Cr(r))return{data:null,error:r};throw r}})}}class JG extends YG{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new KG(this.url,this.headers,t,this.fetch)}}const XG="2.56.0";let Lf="";typeof Deno<"u"?Lf="deno":typeof document<"u"?Lf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Lf="react-native":Lf="node";const QG={"X-Client-Info":`supabase-js-${Lf}/${XG}`},eY={headers:QG},tY={schema:"public"},rY={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nY={};var sY=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const iY=e=>{let t;return e?t=e:typeof fetch>"u"?t=UM:t=fetch,(...r)=>t(...r)},oY=()=>typeof Headers>"u"?qM:Headers,aY=(e,t,r)=>{const n=iY(r),s=oY();return(i,o)=>sY(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var lY=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function cY(e){return e.endsWith("/")?e:e+"/"}function uY(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>lY(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const n6="2.71.1",qu=30*1e3,Tj=3,w0=Tj*qu,dY="http://localhost:9999",hY="supabase.auth.token",fY={"X-Client-Info":`gotrue-js/${n6}`},Aj="X-Supabase-Api-Version",s6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pY=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mY=10*60*1e3;class rE extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function He(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class gY extends rE{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function yY(e){return He(e)&&e.name==="AuthApiError"}class i6 extends rE{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class _l extends rE{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Da extends _l{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vY(e){return He(e)&&e.name==="AuthSessionMissingError"}class Ng extends _l{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Sg extends _l{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Eg extends _l{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bY(e){return He(e)&&e.name==="AuthImplicitGrantRedirectError"}class aO extends _l{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Oj extends _l{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function _0(e){return He(e)&&e.name==="AuthRetryableFetchError"}class lO extends _l{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Pj extends _l{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const nv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cO=` 	
\r=`.split(""),xY=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<cO.length;t+=1)e[cO[t].charCodeAt(0)]=-2;for(let t=0;t<nv.length;t+=1)e[nv[t].charCodeAt(0)]=t;return e})();function uO(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nv[n]),t.queuedBits-=6}}function o6(e,t,r){const n=xY[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function dO(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{jY(o,n,r)};for(let o=0;o<e.length;o+=1)o6(e.charCodeAt(o),s,i);return t.join("")}function wY(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function _Y(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}wY(n,t)}}function jY(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function kY(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)o6(e.charCodeAt(s),r,n);return new Uint8Array(t)}function NY(e){const t=[];return _Y(e,r=>t.push(r)),new Uint8Array(t)}function SY(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>uO(s,r,n)),uO(null,r,n),t.join("")}function EY(e){return Math.round(Date.now()/1e3)+e}function CY(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Xs=()=>typeof window<"u"&&typeof document<"u",Jl={tested:!1,writable:!1},a6=()=>{if(!Xs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jl.tested)return Jl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Jl.tested=!0,Jl.writable=!0}catch{Jl.tested=!0,Jl.writable=!1}return Jl.writable};function TY(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const l6=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>wh(async()=>{const{default:n}=await Promise.resolve().then(()=>_h);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},AY=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Bu=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Xl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Na=async(e,t)=>{await e.removeItem(t)};class Hb{constructor(){this.promise=new Hb.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Hb.promiseConstructor=Promise;function j0(e){const t=e.split(".");if(t.length!==3)throw new Pj("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!pY.test(t[n]))throw new Pj("JWT not in base64url format");return{header:JSON.parse(dO(t[0])),payload:JSON.parse(dO(t[1])),signature:kY(t[2]),raw:{header:t[0],payload:t[1]}}}async function OY(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function PY(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function RY(e){return("0"+e.toString(16)).substr(-2)}function IY(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,RY).join("")}async function DY(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function LY(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await DY(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nu(e,t,r=!1){const n=IY();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Bu(e,`${t}-code-verifier`,s);const i=await LY(n);return[i,n===i?"plain":"s256"]}const MY=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zY(e){const t=e.headers.get(Aj);if(!t||!t.match(MY))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function FY(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function $Y(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UY=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Su(e){if(!UY.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function k0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hO(e){return JSON.parse(JSON.stringify(e))}var qY=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const nc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),BY=[502,503,504];async function fO(e){var t;if(!AY(e))throw new Oj(nc(e),0);if(BY.includes(e.status))throw new Oj(nc(e),e.status);let r;try{r=await e.json()}catch(i){throw new i6(nc(i),i)}let n;const s=zY(e);if(s&&s.getTime()>=s6["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new lO(nc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Da}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new lO(nc(r),e.status,r.weak_password.reasons);throw new gY(nc(r),e.status||500,n)}const VY=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function et(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Aj]||(i[Aj]=s6["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await WY(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function WY(e,t,r,n,s,i){const o=VY(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new Oj(nc(l),0)}if(a.ok||await fO(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await fO(l)}}function Eo(e){var t;let r=null;GY(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=EY(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function pO(e){const t=Eo(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Va(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function HY(e){return{data:e,error:null}}function KY(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=qY(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ZY(e){return e}function GY(e){return e.access_token&&e.refresh_token&&e.expires_in}const N0=["global","local","others"];var YY=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class JY{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=l6(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=N0[0]){if(N0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${N0.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Va})}catch(n){if(He(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=YY(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:KY,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(He(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Va})}catch(r){if(He(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ZY});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const m=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(He(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Su(t);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Va})}catch(r){if(He(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Su(t);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Va})}catch(n){if(He(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Su(t);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Va})}catch(n){if(He(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Su(t.userId);try{const{data:r,error:n}=await et(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(He(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Su(t.userId),Su(t.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}}}function mO(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function XY(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Eu={debug:!!(globalThis&&a6()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class c6 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class QY extends c6{}async function eJ(e,t,r){Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new QY(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Eu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}XY();const tJ={url:dY,storageKey:hY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fY,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gO(e,t,r){return await r()}const Cu={};class Cp{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Cp.nextInstanceID,Cp.nextInstanceID+=1,this.instanceID>0&&Xs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},tJ),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new JY({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=l6(s.fetch),this.lock=s.lock||gO,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Xs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=eJ:this.lock=gO,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:a6()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mO(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=mO(this.memoryStorage)),Xs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Cu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Cu[this.storageKey]=Object.assign(Object.assign({},Cu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Cu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Cu[this.storageKey]=Object.assign(Object.assign({},Cu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${n6}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=TY(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Xs()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),bY(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return He(r)?{error:r}:{error:new i6("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Eo}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(He(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Nu(this.storage,this.storageKey)),i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:Eo})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Eo})}else throw new Sg("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(He(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pO})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pO})}else throw new Sg("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ng}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(He(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,a,l,c,u,h,f,p;let y,m;if("message"in t)y=t.message,m=t.signature;else{const{chain:b,wallet:x,statement:w,options:_}=t;let j;if(Xs())if(typeof x=="object")j=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const k=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let C;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")C=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)C=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),m=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=N}}try{const{data:b,error:x}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:SY(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Eo});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ng}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(He(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await Xl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Eo});if(await Na(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ng}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(He(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Eo}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ng}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(He(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Nu(this.storage,this.storageKey));const{error:h}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Sg("You must provide either an email or phone number.")}catch(a){if(He(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Eo});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(He(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Nu(this.storage,this.storageKey)),await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:HY})}catch(i){if(He(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Da;const{error:s}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(He(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await et(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await et(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Sg("You must provide either an email or phone number and a type")}catch(r){if(He(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Xl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<w0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Xl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=k0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Va}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Da}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Va})})}catch(r){if(He(r))return vY(r)&&(await this._removeSession(),await Na(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Da;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Nu(this.storage,this.storageKey));const{data:c,error:u}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Va});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(He(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Da;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=j0(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(He(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Da;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(He(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Xs())throw new Eg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Eg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new aO("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Eg("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new aO("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new Eg("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=qu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=f-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,u);const{data:m,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(He(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Xl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(yY(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Na(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=CY(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Nu(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(He(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Xs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(He(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(He(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await PY(async s=>(s>0&&await OY(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Eo})),(s,i)=>{const o=200*Math.pow(2,s);return i&&_0(i)&&Date.now()+o-n<qu})}catch(n){if(this._debug(r,"error",n),He(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Xs()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Xl(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Xl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Bu(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:k0()}else if(s&&!s.user&&!s.user){const o=await Xl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Na(this.storage,this.storageKey+"-user"),await Bu(this.storage,this.storageKey,s)):s.user=k0()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<w0;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${w0}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),_0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Da;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Hb;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Da;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),He(i)){const o={session:null,error:i};return _0(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Bu(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=hO(s);await Bu(this.storage,this.storageKey,i)}else{const s=hO(r);await Bu(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Na(this.storage,this.storageKey),await Na(this.storage,this.storageKey+"-code-verifier"),await Na(this.storage,this.storageKey+"-user"),this.userStorage&&await Na(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Xs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),qu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/qu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${qu}ms, refresh threshold is ${Tj} ticks`),s<=Tj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof c6)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Nu(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await et(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(He(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await et(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(He(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(He(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(He(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=j0(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+mY>s)return n;const{data:i,error:o}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=j0(n);r!=null&&r.allowExpired||FY(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=$Y(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,NY(`${a}.${l}`)))throw new Pj("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}}}Cp.nextInstanceID=0;const rJ=Cp;class nJ extends rJ{constructor(t){super(t)}}var sJ=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class iJ{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=cY(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:tY,realtime:nY,auth:Object.assign(Object.assign({},rY),{storageKey:c}),global:eY},h=uY(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=aY(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new wG(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new JG(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new QZ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return sJ(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nJ({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new zG(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const u6=(e,t,r)=>new iJ(e,t,r);function oJ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}oJ()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const yO=typeof window<"u",d6="https://opukvvmumyegtkukqint.supabase.co",h6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",d6);console.log("DEBUG: supabaseAnonKey (raw):",h6);console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set");let ce;try{ce=u6(d6,h6,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:yO?window.localStorage:void 0}});const e=typeof process<"u"&&!1}catch(e){throw console.error("Error initializing Supabase client:",e),e}const f6=v.createContext(void 0),aJ=({children:e,supabaseClient:t})=>{const[r,n]=v.useState(null),[s,i]=v.useState(null),[o,a]=v.useState(null),[l,c]=v.useState(!1),[u,h]=v.useState(!1),[f,p]=v.useState(!0);return v.useEffect(()=>{const{data:y}=t.auth.onAuthStateChange(async(m,b)=>{i(b),n((b==null?void 0:b.user)||null),p(!1)});return t.auth.getSession().then(({data:{session:m}})=>{i(m),n((m==null?void 0:m.user)||null),p(!1)}),()=>{y.subscription.unsubscribe()}},[t]),v.useEffect(()=>{const y=async b=>{try{const{data:x,error:w}=await t.from("profiles").select("*").eq("id",b).single();if(w){if(w.code==="PGRST116"){console.log("Profile not found, creating new profile for user:",b),await m(b);return}throw w}a(x),c((x==null?void 0:x.role)==="admin"||(x==null?void 0:x.role)==="super_admin")}catch(x){console.error("Error fetching user profile:",x),a(null),c(!1)}},m=async b=>{var x,w,_;try{const{data:{user:j},error:k}=await t.auth.getUser();if(k||!j){console.error("Error getting user info for profile creation:",k);return}const{data:N,error:C}=await t.from("profiles").insert({id:b,username:((x=j.email)==null?void 0:x.split("@")[0])||null,display_name:((w=j.user_metadata)==null?void 0:w.full_name)||((_=j.email)==null?void 0:_.split("@")[0])||"User",email:j.email,role:"user",subscription_status:"inactive",beta_reader_status:"none"}).select().single();C?(console.error("Error creating user profile:",C),a(null),c(!1)):(console.log("Successfully created user profile:",N),a(N),c((N==null?void 0:N.role)==="admin"||(N==null?void 0:N.role)==="super_admin"))}catch(j){console.error("Error in createUserProfile:",j),a(null),c(!1)}};r!=null&&r.id?(y(r.id),h(!0)):(a(null),c(!1),h(!1))},[r,t]),g.jsx(f6.Provider,{value:{user:r,session:s,userProfile:o,isAdmin:l,isAuthenticated:u,isLoading:f},children:e})},kh=()=>{const e=v.useContext(f6);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},p6={items:[],total:0,itemCount:0},lJ=(e,t)=>{switch(t.type){case"ADD_ITEM":if(e.items.find(n=>n.id===t.payload.id)){const n=e.items.map(o=>o.id===t.payload.id?{...o,quantity:o.quantity+t.payload.quantity}:o),s=n.reduce((o,a)=>o+a.price*a.quantity,0),i=n.reduce((o,a)=>o+a.quantity,0);return{...e,items:n,total:s,itemCount:i}}else{const n=[...e.items,t.payload],s=n.reduce((o,a)=>o+a.price*a.quantity,0),i=n.reduce((o,a)=>o+a.quantity,0);return{...e,items:n,total:s,itemCount:i}}case"REMOVE_ITEM":{const r=e.items.filter(i=>i.id!==t.payload),n=r.reduce((i,o)=>i+o.price*o.quantity,0),s=r.reduce((i,o)=>i+o.quantity,0);return{...e,items:r,total:n,itemCount:s}}case"UPDATE_QUANTITY":{const r=e.items.map(i=>i.id===t.payload.id?{...i,quantity:t.payload.quantity}:i),n=r.reduce((i,o)=>i+o.price*o.quantity,0),s=r.reduce((i,o)=>i+o.quantity,0);return{...e,items:r,total:n,itemCount:s}}case"CLEAR_CART":return p6;case"LOAD_CART":{const r=t.payload.reduce((s,i)=>s+i.price*i.quantity,0),n=t.payload.reduce((s,i)=>s+i.quantity,0);return{...e,items:t.payload,total:r,itemCount:n}}default:return e}},m6=v.createContext(void 0),cJ=()=>{const e=v.useContext(m6);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e},uJ=({children:e})=>{const[t,r]=v.useReducer(lJ,p6),n=c=>{r({type:"ADD_ITEM",payload:{...c,quantity:1}})},s=c=>{r({type:"REMOVE_ITEM",payload:c})},l={state:t,addItem:n,removeItem:s,updateQuantity:(c,u)=>{u<=0?s(c):r({type:"UPDATE_QUANTITY",payload:{id:c,quantity:u}})},clearCart:()=>{r({type:"CLEAR_CART"})},isInCart:c=>t.items.some(u=>u.id===c)};return g.jsx(m6.Provider,{value:l,children:e})},dJ=async e=>{const{data:t,error:r}=await ce.from("subscriptions").select("*").eq("user_id",e).single();return r?(console.error("Error fetching subscription:",r),null):t},g6=async e=>{const t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),r=ce.from("wiki_pages").select(`
      id, created_at, created_by, title, slug, excerpt, is_published, category_id, folder_id, updated_at, view_count,
      content, seo_title, seo_description, seo_keywords,
      category(*),
      user(*)
    `).eq(t?"id":"slug",e),{data:n,error:s}=await r.single();if(s)return console.error("Error fetching wiki page:",s),null;if(n){n.user&&typeof n.user=="object"&&"error"in n.user&&(n.user=null),n.category&&typeof n.category=="object"&&"error"in n.category&&(n.category=null);const{data:i,error:o}=await ce.from("wiki_content_blocks").select("id, type, content, position").eq("page_id",n.id).order("position");if(o)throw console.error("Error fetching wiki content:",o),new Error("Failed to fetch wiki content");const a=(i==null?void 0:i.map(c=>({id:c.id,type:c.type,content:c.content,title:""})))||[];return await ce.rpc("increment_wiki_page_views",{page_id:n.id}),{...n,sections:a,content:n.content||"",seo_title:n.seo_title||"",seo_description:n.seo_description||"",seo_keywords:n.seo_keywords||[],category:n.category,user:n.user}}return null},hJ=async()=>{const{data:e,error:t}=await ce.from("wiki_categories").select("*").order("name",{ascending:!0});if(t)throw console.error("Error fetching categories:",t),new Error("Failed to fetch categories");return e||[]},fJ=async e=>{const t={books_read:0,reading_hours:0,achievements:0,currently_reading:"None"},{data:r,error:n}=await ce.from("user_stats").upsert({user_id:e,...t},{onConflict:"user_id"}).select("*").single();if(n)throw console.error("Error initializing user stats:",n),n;return r},pJ=async e=>{try{const{data:t,error:r}=await ce.from("user_stats").select("*").eq("user_id",e).maybeSingle();if(!t&&(!r||r.code==="PGRST116"))return fJ(e);if(r)throw r;return t}catch(t){throw console.error("Error fetching user stats:",t),t}};function y6(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=y6(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function mJ(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=y6(e))&&(n&&(n+=" "),n+=t);return n}const nE="-",gJ=e=>{const t=vJ(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const a=o.split(nE);return a[0]===""&&a.length!==1&&a.shift(),v6(a,t)||yJ(o)},getConflictingClassGroupIds:(o,a)=>{const l=r[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},v6=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?v6(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(nE);return(o=t.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},vO=/^\[(.+)\]$/,yJ=e=>{if(vO.test(e)){const t=vO.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},vJ=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return xJ(Object.entries(e.classGroups),r).forEach(([i,o])=>{Rj(o,n,i,t)}),n},Rj=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:bO(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(bJ(s)){Rj(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{Rj(o,bO(t,i),r,n)})})},bO=(e,t)=>{let r=e;return t.split(nE).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},bJ=e=>e.isThemeGetter,xJ=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[t+o,a])):i);return[r,s]}):e,wJ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},b6="!",_J=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,o=a=>{const l=[];let c=0,u=0,h;for(let b=0;b<a.length;b++){let x=a[b];if(c===0){if(x===s&&(n||a.slice(b,b+i)===t)){l.push(a.slice(u,b)),u=b+i;continue}if(x==="/"){h=b;continue}}x==="["?c++:x==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(b6),y=p?f.substring(1):f,m=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:m}};return r?a=>r({className:a,parseClassName:o}):o},jJ=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},kJ=e=>({cache:wJ(e.cacheSize),parseClassName:_J(e),...gJ(e)}),NJ=/\s+/,SJ=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split(NJ);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=r(c);let y=!!p,m=n(y?f.substring(0,p):f);if(!m){if(!y){a=c+(a.length>0?" "+a:a);continue}if(m=n(f),!m){a=c+(a.length>0?" "+a:a);continue}y=!1}const b=jJ(u).join(":"),x=h?b+b6:b,w=x+m;if(i.includes(w))continue;i.push(w);const _=s(m,y);for(let j=0;j<_.length;++j){const k=_[j];i.push(x+k)}a=c+(a.length>0?" "+a:a)}return a};function EJ(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=x6(t))&&(n&&(n+=" "),n+=r);return n}const x6=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=x6(e[n]))&&(r&&(r+=" "),r+=t);return r};function CJ(e,...t){let r,n,s,i=o;function o(l){const c=t.reduce((u,h)=>h(u),e());return r=kJ(c),n=r.cache.get,s=r.cache.set,i=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=SJ(l,r);return s(l,u),u}return function(){return i(EJ.apply(null,arguments))}}const Ct=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},w6=/^\[(?:([a-z-]+):)?(.+)\]$/i,TJ=/^\d+\/\d+$/,AJ=new Set(["px","full","screen"]),OJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,PJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,IJ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DJ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wo=e=>gd(e)||AJ.has(e)||TJ.test(e),Sa=e=>Nh(e,"length",BJ),gd=e=>!!e&&!Number.isNaN(Number(e)),S0=e=>Nh(e,"number",gd),ff=e=>!!e&&Number.isInteger(Number(e)),LJ=e=>e.endsWith("%")&&gd(e.slice(0,-1)),Ze=e=>w6.test(e),Ea=e=>OJ.test(e),MJ=new Set(["length","size","percentage"]),zJ=e=>Nh(e,MJ,_6),FJ=e=>Nh(e,"position",_6),$J=new Set(["image","url"]),UJ=e=>Nh(e,$J,WJ),qJ=e=>Nh(e,"",VJ),pf=()=>!0,Nh=(e,t,r)=>{const n=w6.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},BJ=e=>PJ.test(e)&&!RJ.test(e),_6=()=>!1,VJ=e=>IJ.test(e),WJ=e=>DJ.test(e),HJ=()=>{const e=Ct("colors"),t=Ct("spacing"),r=Ct("blur"),n=Ct("brightness"),s=Ct("borderColor"),i=Ct("borderRadius"),o=Ct("borderSpacing"),a=Ct("borderWidth"),l=Ct("contrast"),c=Ct("grayscale"),u=Ct("hueRotate"),h=Ct("invert"),f=Ct("gap"),p=Ct("gradientColorStops"),y=Ct("gradientColorStopPositions"),m=Ct("inset"),b=Ct("margin"),x=Ct("opacity"),w=Ct("padding"),_=Ct("saturate"),j=Ct("scale"),k=Ct("sepia"),N=Ct("skew"),C=Ct("space"),E=Ct("translate"),T=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Ze,t],I=()=>[Ze,t],R=()=>["",wo,Sa],F=()=>["auto",gd,Ze],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",Ze],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[gd,Ze];return{cacheSize:500,separator:":",theme:{colors:[pf],spacing:[wo,Sa],blur:["none","",Ea,Ze],brightness:J(),borderColor:[e],borderRadius:["none","","full",Ea,Ze],borderSpacing:I(),borderWidth:R(),contrast:J(),grayscale:Z(),hueRotate:J(),invert:Z(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[LJ,Sa],inset:O(),margin:O(),opacity:J(),padding:I(),saturate:J(),scale:J(),sepia:Z(),skew:J(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Ze]}],container:["container"],columns:[{columns:[Ea]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),Ze]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ff,Ze]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ze]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",ff,Ze]}],"grid-cols":[{"grid-cols":[pf]}],"col-start-end":[{col:["auto",{span:["full",ff,Ze]},Ze]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[pf]}],"row-start-end":[{row:["auto",{span:[ff,Ze]},Ze]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ze]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ze,t]}],"min-w":[{"min-w":[Ze,t,"min","max","fit"]}],"max-w":[{"max-w":[Ze,t,"none","full","min","max","fit","prose",{screen:[Ea]},Ea]}],h:[{h:[Ze,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ze,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ze,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ze,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ea,Sa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",S0]}],"font-family":[{font:[pf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ze]}],"line-clamp":[{"line-clamp":["none",gd,S0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wo,Ze]}],"list-image":[{"list-image":["none",Ze]}],"list-style-type":[{list:["none","disc","decimal",Ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wo,Sa]}],"underline-offset":[{"underline-offset":["auto",wo,Ze]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),FJ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zJ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},UJ]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[wo,Ze]}],"outline-w":[{outline:[wo,Sa]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[wo,Sa]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ea,qJ]}],"shadow-color":[{shadow:[pf]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ea,Ze]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ze]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Ze]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ff,Ze]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ze]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ze]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ze]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[wo,Sa,S0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},KJ=CJ(HJ);function Je(...e){return KJ(mJ(e))}var xO;(function(e){e.UNAUTHORIZED="UNAUTHORIZED",e.FORBIDDEN="FORBIDDEN",e.INVALID_TOKEN="INVALID_TOKEN",e.INSUFFICIENT_PERMISSIONS="INSUFFICIENT_PERMISSIONS",e.VALIDATION_ERROR="VALIDATION_ERROR",e.INVALID_INPUT="INVALID_INPUT",e.MISSING_REQUIRED_FIELD="MISSING_REQUIRED_FIELD",e.BUSINESS_RULE_VIOLATION="BUSINESS_RULE_VIOLATION",e.SUBSCRIPTION_LIMIT_EXCEEDED="SUBSCRIPTION_LIMIT_EXCEEDED",e.CONTENT_ACCESS_DENIED="CONTENT_ACCESS_DENIED",e.PRICING_ERROR="PRICING_ERROR",e.RESOURCE_NOT_FOUND="RESOURCE_NOT_FOUND",e.DUPLICATE_RESOURCE="DUPLICATE_RESOURCE",e.DATA_INTEGRITY_ERROR="DATA_INTEGRITY_ERROR",e.PAYMENT_PROCESSING_ERROR="PAYMENT_PROCESSING_ERROR",e.EMAIL_SERVICE_ERROR="EMAIL_SERVICE_ERROR",e.STORAGE_SERVICE_ERROR="STORAGE_SERVICE_ERROR",e.DATABASE_ERROR="DATABASE_ERROR",e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED"})(xO||(xO={}));function re(e,t,r){function n(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in o.prototype)u in a||Object.defineProperty(a,u,{value:o.prototype[u].bind(a)});a._zod.constr=o,a._zod.def=l}const s=(r==null?void 0:r.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:e});function o(a){var l;const c=r!=null&&r.Parent?new i:this;n(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var l,c;return r!=null&&r.Parent&&a instanceof r.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class yd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class j6 extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const k6={};function hl(e){return k6}function ZJ(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,s])=>t.indexOf(+n)===-1).map(([n,s])=>s)}function Ij(e,t){return typeof t=="bigint"?t.toString():t}function sE(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function iE(e){return e==null}function oE(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function GJ(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let s=(n.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(n)){const l=n.match(/\d?e-(\d?)/);l!=null&&l[1]&&(s=Number.parseInt(l[1]))}const i=r>s?r:s,o=Number.parseInt(e.toFixed(i).replace(".","")),a=Number.parseInt(t.toFixed(i).replace(".",""));return o%a/10**i}const wO=Symbol("evaluating");function Nt(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==wO)return n===void 0&&(n=wO,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function YJ(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function jl(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Sh(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function _O(e){return JSON.stringify(e)}const N6="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function sv(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const JJ=sE(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Kd(e){if(sv(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(sv(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function S6(e){return Kd(e)?{...e}:e}const XJ=new Set(["string","number","symbol"]);function Kb(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function kl(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function Fe(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function QJ(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const eX={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function tX(e,t){const r=e._zod.def,n=Sh(e._zod.def,{get shape(){const s={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(s[i]=r.shape[i])}return jl(this,"shape",s),s},checks:[]});return kl(e,n)}function rX(e,t){const r=e._zod.def,n=Sh(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete s[i]}return jl(this,"shape",s),s},checks:[]});return kl(e,n)}function nX(e,t){if(!Kd(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=Sh(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t};return jl(this,"shape",i),i},checks:[]});return kl(e,s)}function sX(e,t){if(!Kd(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return jl(this,"shape",n),n},checks:e._zod.def.checks};return kl(e,r)}function iX(e,t){const r=Sh(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return jl(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return kl(e,r)}function oX(e,t,r){const n=Sh(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)i[o]=e?new e({type:"optional",innerType:s[o]}):s[o];return jl(this,"shape",i),i},checks:[]});return kl(t,n)}function aX(e,t,r){const n=Sh(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:s[o]}))}else for(const o in s)i[o]=new e({type:"nonoptional",innerType:s[o]});return jl(this,"shape",i),i},checks:[]});return kl(t,n)}function sd(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function id(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Cg(e){return typeof e=="string"?e:e==null?void 0:e.message}function fl(e,t,r){var s,i,o,a,l,c;const n={...e,path:e.path??[]};if(!e.message){const u=Cg((o=(i=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??Cg((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??Cg((l=r.customError)==null?void 0:l.call(r,e))??Cg((c=r.localeError)==null?void 0:c.call(r,e))??"Invalid input";n.message=u}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function aE(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Tp(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const E6=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Ij,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},C6=re("$ZodError",E6),T6=re("$ZodError",E6,{Parent:Error});function lX(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function cX(e,t){const r=t||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(e),n}const lE=e=>(t,r,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new yd;if(o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>fl(l,i,hl())));throw N6(a,s==null?void 0:s.callee),a}return o.value},cE=e=>async(t,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>fl(l,i,hl())));throw N6(a,s==null?void 0:s.callee),a}return o.value},Zb=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new yd;return i.issues.length?{success:!1,error:new(e??C6)(i.issues.map(o=>fl(o,s,hl())))}:{success:!0,data:i.value}},uX=Zb(T6),Gb=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>fl(o,s,hl())))}:{success:!0,data:i.value}},dX=Gb(T6),hX=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return lE(e)(t,r,s)},fX=e=>(t,r,n)=>lE(e)(t,r,n),pX=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return cE(e)(t,r,s)},mX=e=>async(t,r,n)=>cE(e)(t,r,n),gX=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Zb(e)(t,r,s)},yX=e=>(t,r,n)=>Zb(e)(t,r,n),vX=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Gb(e)(t,r,s)},bX=e=>async(t,r,n)=>Gb(e)(t,r,n),xX=/^[cC][^\s-]{8,}$/,wX=/^[0-9a-z]+$/,_X=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,jX=/^[0-9a-vA-V]{20}$/,kX=/^[A-Za-z0-9]{27}$/,NX=/^[a-zA-Z0-9_-]{21}$/,SX=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,EX=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,jO=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,CX=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,TX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function AX(){return new RegExp(TX,"u")}const OX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,PX=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,RX=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,IX=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,DX=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,A6=/^[A-Za-z0-9_-]*$/,LX=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,MX=/^\+(?:[0-9]){6,14}[0-9]$/,O6="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",zX=new RegExp(`^${O6}$`);function P6(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function FX(e){return new RegExp(`^${P6(e)}$`)}function $X(e){const t=P6({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${O6}T(?:${n})$`)}const UX=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},qX=/^\d+$/,BX=/^-?\d+(?:\.\d+)?/i,VX=/true|false/i,WX=/^[^A-Z]*$/,HX=/^[^a-z]*$/,Zn=re("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),R6={number:"number",bigint:"bigint",object:"date"},I6=re("$ZodCheckLessThan",(e,t)=>{Zn.init(e,t);const r=R6[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,i=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),D6=re("$ZodCheckGreaterThan",(e,t)=>{Zn.init(e,t);const r=R6[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,i=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),KX=re("$ZodCheckMultipleOf",(e,t)=>{Zn.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):GJ(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),ZX=re("$ZodCheckNumberFormat",(e,t)=>{var o;Zn.init(e,t),t.format=t.format||"float64";const r=(o=t.format)==null?void 0:o.includes("int"),n=r?"int":"number",[s,i]=eX[t.format];e._zod.onattach.push(a=>{const l=a._zod.bag;l.format=t.format,l.minimum=s,l.maximum=i,r&&(l.pattern=qX)}),e._zod.check=a=>{const l=a.value;if(r){if(!Number.isInteger(l)){a.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?a.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):a.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}l<s&&a.issues.push({origin:"number",input:l,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),l>i&&a.issues.push({origin:"number",input:l,code:"too_big",maximum:i,inst:e})}}),GX=re("$ZodCheckMaxLength",(e,t)=>{var r;Zn.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!iE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const o=aE(s);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),YX=re("$ZodCheckMinLength",(e,t)=>{var r;Zn.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!iE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const o=aE(s);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),JX=re("$ZodCheckLengthEquals",(e,t)=>{var r;Zn.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!iE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,i=s.length;if(i===t.length)return;const o=aE(s),a=i>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Yb=re("$ZodCheckStringFormat",(e,t)=>{var r,n;Zn.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),XX=re("$ZodCheckRegex",(e,t)=>{Yb.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),QX=re("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=WX),Yb.init(e,t)}),eQ=re("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=HX),Yb.init(e,t)}),tQ=re("$ZodCheckIncludes",(e,t)=>{Zn.init(e,t);const r=Kb(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),rQ=re("$ZodCheckStartsWith",(e,t)=>{Zn.init(e,t);const r=new RegExp(`^${Kb(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),nQ=re("$ZodCheckEndsWith",(e,t)=>{Zn.init(e,t);const r=new RegExp(`.*${Kb(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),sQ=re("$ZodCheckOverwrite",(e,t)=>{Zn.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class iQ{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(o=>o),s=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,r=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...r,s.join(`
`))}}const oQ={major:4,minor:1,patch:3},Kt=re("$ZodType",(e,t)=>{var s;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=oQ;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const i of n)for(const o of i._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const i=(a,l,c)=>{let u=sd(a),h;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(u)continue;const p=a.issues.length,y=f._zod.check(a);if(y instanceof Promise&&(c==null?void 0:c.async)===!1)throw new yd;if(h||y instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await y,a.issues.length!==p&&(u||(u=sd(a,p)))});else{if(a.issues.length===p)continue;u||(u=sd(a,p))}}return h?h.then(()=>a):a},o=(a,l,c)=>{if(sd(a))return a.aborted=!0,a;const u=i(l,n,c);if(u instanceof Promise){if(c.async===!1)throw new yd;return u.then(h=>e._zod.parse(h,c))}return e._zod.parse(u,c)};e._zod.run=(a,l)=>{if(l.skipChecks)return e._zod.parse(a,l);if(l.direction==="backward"){const u=e._zod.parse({value:a.value,issues:[]},{...l,skipChecks:!0});return u instanceof Promise?u.then(h=>o(h,a,l)):o(u,a,l)}const c=e._zod.parse(a,l);if(c instanceof Promise){if(l.async===!1)throw new yd;return c.then(u=>i(u,n,l))}return i(c,n,l)}}e["~standard"]={validate:i=>{var o;try{const a=uX(e,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return dX(e,i).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),uE=re("$ZodString",(e,t)=>{var r;Kt.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??UX(e._zod.bag),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),$t=re("$ZodStringFormat",(e,t)=>{Yb.init(e,t),uE.init(e,t)}),aQ=re("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=EX),$t.init(e,t)}),lQ=re("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=jO(n))}else t.pattern??(t.pattern=jO());$t.init(e,t)}),cQ=re("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=CX),$t.init(e,t)}),uQ=re("$ZodURL",(e,t)=>{$t.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:LX.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),dQ=re("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=AX()),$t.init(e,t)}),hQ=re("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=NX),$t.init(e,t)}),fQ=re("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=xX),$t.init(e,t)}),pQ=re("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=wX),$t.init(e,t)}),mQ=re("$ZodULID",(e,t)=>{t.pattern??(t.pattern=_X),$t.init(e,t)}),gQ=re("$ZodXID",(e,t)=>{t.pattern??(t.pattern=jX),$t.init(e,t)}),yQ=re("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=kX),$t.init(e,t)}),vQ=re("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=$X(t)),$t.init(e,t)}),bQ=re("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=zX),$t.init(e,t)}),xQ=re("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=FX(t)),$t.init(e,t)}),wQ=re("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=SX),$t.init(e,t)}),_Q=re("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=OX),$t.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),jQ=re("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=PX),$t.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),kQ=re("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=RX),$t.init(e,t)}),NQ=re("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=IX),$t.init(e,t),e._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function L6(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const SQ=re("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=DX),$t.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{L6(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function EQ(e){if(!A6.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return L6(r)}const CQ=re("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=A6),$t.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{EQ(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),TQ=re("$ZodE164",(e,t)=>{t.pattern??(t.pattern=MX),$t.init(e,t)});function AQ(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const OQ=re("$ZodJWT",(e,t)=>{$t.init(e,t),e._zod.check=r=>{AQ(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),M6=re("$ZodNumber",(e,t)=>{Kt.init(e,t),e._zod.pattern=e._zod.bag.pattern??BX,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...i?{received:i}:{}}),r}}),PQ=re("$ZodNumber",(e,t)=>{ZX.init(e,t),M6.init(e,t)}),RQ=re("$ZodBoolean",(e,t)=>{Kt.init(e,t),e._zod.pattern=VX,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),IQ=re("$ZodAny",(e,t)=>{Kt.init(e,t),e._zod.parse=r=>r}),DQ=re("$ZodUnknown",(e,t)=>{Kt.init(e,t),e._zod.parse=r=>r}),LQ=re("$ZodNever",(e,t)=>{Kt.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function kO(e,t,r){e.issues.length&&t.issues.push(...id(r,e.issues)),t.value[r]=e.value}const MQ=re("$ZodArray",(e,t)=>{Kt.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=t.element._zod.run({value:a,issues:[]},n);l instanceof Promise?i.push(l.then(c=>kO(c,r,o))):kO(l,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function iv(e,t,r,n){e.issues.length&&t.issues.push(...id(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function z6(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape[n]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const r=QJ(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function F6(e,t,r,n,s,i){const o=[],a=s.keySet,l=s.catchall._zod,c=l.def.type;for(const u of Object.keys(t)){if(a.has(u))continue;if(c==="never"){o.push(u);continue}const h=l.run({value:t[u],issues:[]},n);h instanceof Promise?e.push(h.then(f=>iv(f,r,u,t))):iv(h,r,u,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const zQ=re("$ZodObject",(e,t)=>{Kt.init(e,t);const r=sE(()=>z6(t));Nt(e._zod,"propValues",()=>{const o=t.shape,a={};for(const l in o){const c=o[l]._zod;if(c.values){a[l]??(a[l]=new Set);for(const u of c.values)a[l].add(u)}}return a});const n=sv,s=t.catchall;let i;e._zod.parse=(o,a)=>{i??(i=r.value);const l=o.value;if(!n(l))return o.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),o;o.value={};const c=[],u=i.shape;for(const h of i.keys){const p=u[h]._zod.run({value:l[h],issues:[]},a);p instanceof Promise?c.push(p.then(y=>iv(y,o,h,l))):iv(p,o,h,l)}return s?F6(c,l,o,a,r.value,e):c.length?Promise.all(c).then(()=>o):o}}),FQ=re("$ZodObjectJIT",(e,t)=>{zQ.init(e,t);const r=e._zod.parse,n=sE(()=>z6(t)),s=f=>{const p=new iQ(["shape","payload","ctx"]),y=n.value,m=_=>{const j=_O(_);return`shape[${j}]._zod.run({ value: input[${j}], issues: [] }, ctx)`};p.write("const input = payload.value;");const b=Object.create(null);let x=0;for(const _ of y.keys)b[_]=`key_${x++}`;p.write("const newResult = {}");for(const _ of y.keys){const j=b[_],k=_O(_);p.write(`const ${j} = ${m(_)};`),p.write(`
        if (${j}.issues.length) {
          payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${k}, ...iss.path] : [${k}]
          })));
        }
        
        if (${j}.value === undefined) {
          if (${k} in input) {
            newResult[${k}] = undefined;
          }
        } else {
          newResult[${k}] = ${j}.value;
        }
      `)}p.write("payload.value = newResult;"),p.write("return payload;");const w=p.compile();return(_,j)=>w(f,_,j)};let i;const o=sv,a=!k6.jitless,c=a&&JJ.value,u=t.catchall;let h;e._zod.parse=(f,p)=>{h??(h=n.value);const y=f.value;return o(y)?a&&c&&(p==null?void 0:p.async)===!1&&p.jitless!==!0?(i||(i=s(t.shape)),f=i(f,p),u?F6([],y,f,p,h,e):f):r(f,p):(f.issues.push({expected:"object",code:"invalid_type",input:y,inst:e}),f)}});function NO(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const s=e.filter(i=>!sd(i));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>fl(o,n,hl())))}),t)}const $Q=re("$ZodUnion",(e,t)=>{Kt.init(e,t),Nt(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Nt(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Nt(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),Nt(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>oE(i.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const l of t.options){const c=l._zod.run({value:s.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>NO(l,s,e,i)):NO(a,s,e,i)}}),UQ=re("$ZodIntersection",(e,t)=>{Kt.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,i=t.left._zod.run({value:s,issues:[]},n),o=t.right._zod.run({value:s,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([l,c])=>SO(r,l,c)):SO(r,i,o)}});function Dj(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Kd(e)&&Kd(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),s={...e,...t};for(const i of n){const o=Dj(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],i=t[n],o=Dj(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function SO(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),sd(e))return e;const n=Dj(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const qQ=re("$ZodRecord",(e,t)=>{Kt.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Kd(s))return r.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),r;const i=[];if(t.keyType._zod.values){const o=t.keyType._zod.values;r.value={};for(const l of o)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=t.valueType._zod.run({value:s[l],issues:[]},n);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&r.issues.push(...id(l,u.issues)),r.value[l]=u.value})):(c.issues.length&&r.issues.push(...id(l,c.issues)),r.value[l]=c.value)}let a;for(const l in s)o.has(l)||(a=a??[],a.push(l));a&&a.length>0&&r.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:a})}else{r.value={};for(const o of Reflect.ownKeys(s)){if(o==="__proto__")continue;const a=t.keyType._zod.run({value:o,issues:[]},n);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(c=>fl(c,n,hl())),input:o,path:[o],inst:e}),r.value[a.value]=a.value;continue}const l=t.valueType._zod.run({value:s[o],issues:[]},n);l instanceof Promise?i.push(l.then(c=>{c.issues.length&&r.issues.push(...id(o,c.issues)),r.value[a.value]=c.value})):(l.issues.length&&r.issues.push(...id(o,l.issues)),r.value[a.value]=l.value)}}return i.length?Promise.all(i).then(()=>r):r}}),BQ=re("$ZodEnum",(e,t)=>{Kt.init(e,t);const r=ZJ(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>XJ.has(typeof s)).map(s=>typeof s=="string"?Kb(s):s.toString()).join("|")})$`),e._zod.parse=(s,i)=>{const o=s.value;return n.has(o)||s.issues.push({code:"invalid_value",values:r,input:o,inst:e}),s}}),VQ=re("$ZodTransform",(e,t)=>{Kt.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new j6(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(r.value=o,r));if(s instanceof Promise)throw new yd;return r.value=s,r}});function EO(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const WQ=re("$ZodOptional",(e,t)=>{Kt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Nt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Nt(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${oE(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>EO(i,r.value)):EO(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),HQ=re("$ZodNullable",(e,t)=>{Kt.init(e,t),Nt(e._zod,"optin",()=>t.innerType._zod.optin),Nt(e._zod,"optout",()=>t.innerType._zod.optout),Nt(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${oE(r.source)}|null)$`):void 0}),Nt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),KQ=re("$ZodDefault",(e,t)=>{Kt.init(e,t),e._zod.optin="optional",Nt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>CO(i,t)):CO(s,t)}});function CO(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const ZQ=re("$ZodPrefault",(e,t)=>{Kt.init(e,t),e._zod.optin="optional",Nt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),GQ=re("$ZodNonOptional",(e,t)=>{Kt.init(e,t),Nt(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>TO(i,e)):TO(s,e)}});function TO(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const YQ=re("$ZodCatch",(e,t)=>{Kt.init(e,t),Nt(e._zod,"optin",()=>t.innerType._zod.optin),Nt(e._zod,"optout",()=>t.innerType._zod.optout),Nt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>fl(o,n,hl()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(i=>fl(i,n,hl()))},input:r.value}),r.issues=[]),r)}}),JQ=re("$ZodPipe",(e,t)=>{Kt.init(e,t),Nt(e._zod,"values",()=>t.in._zod.values),Nt(e._zod,"optin",()=>t.in._zod.optin),Nt(e._zod,"optout",()=>t.out._zod.optout),Nt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=t.out._zod.run(r,n);return i instanceof Promise?i.then(o=>Tg(o,t.in,n)):Tg(i,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(i=>Tg(i,t.out,n)):Tg(s,t.out,n)}});function Tg(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const XQ=re("$ZodReadonly",(e,t)=>{Kt.init(e,t),Nt(e._zod,"propValues",()=>t.innerType._zod.propValues),Nt(e._zod,"values",()=>t.innerType._zod.values),Nt(e._zod,"optin",()=>t.innerType._zod.optin),Nt(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(AO):AO(s)}});function AO(e){return e.value=Object.freeze(e.value),e}const QQ=re("$ZodCustom",(e,t)=>{Zn.init(e,t),Kt.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(i=>OO(i,r,n,e));OO(s,r,n,e)}});function OO(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(Tp(s))}}class eee{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function tee(){return new eee}const Ag=tee();function ree(e,t){return new e({type:"string",...Fe(t)})}function nee(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Fe(t)})}function PO(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Fe(t)})}function see(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Fe(t)})}function iee(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Fe(t)})}function oee(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Fe(t)})}function aee(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Fe(t)})}function lee(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Fe(t)})}function cee(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Fe(t)})}function uee(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Fe(t)})}function dee(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Fe(t)})}function hee(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Fe(t)})}function fee(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Fe(t)})}function pee(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Fe(t)})}function mee(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Fe(t)})}function gee(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Fe(t)})}function yee(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Fe(t)})}function vee(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Fe(t)})}function bee(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Fe(t)})}function xee(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Fe(t)})}function wee(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Fe(t)})}function _ee(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Fe(t)})}function jee(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Fe(t)})}function kee(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Fe(t)})}function Nee(e,t){return new e({type:"string",format:"date",check:"string_format",...Fe(t)})}function See(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Fe(t)})}function Eee(e,t){return new e({type:"string",format:"duration",check:"string_format",...Fe(t)})}function Cee(e,t){return new e({type:"number",checks:[],...Fe(t)})}function Tee(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Fe(t)})}function Aee(e,t){return new e({type:"boolean",...Fe(t)})}function Oee(e){return new e({type:"any"})}function Pee(e){return new e({type:"unknown"})}function Ree(e,t){return new e({type:"never",...Fe(t)})}function RO(e,t){return new I6({check:"less_than",...Fe(t),value:e,inclusive:!1})}function E0(e,t){return new I6({check:"less_than",...Fe(t),value:e,inclusive:!0})}function IO(e,t){return new D6({check:"greater_than",...Fe(t),value:e,inclusive:!1})}function C0(e,t){return new D6({check:"greater_than",...Fe(t),value:e,inclusive:!0})}function DO(e,t){return new KX({check:"multiple_of",...Fe(t),value:e})}function $6(e,t){return new GX({check:"max_length",...Fe(t),maximum:e})}function ov(e,t){return new YX({check:"min_length",...Fe(t),minimum:e})}function U6(e,t){return new JX({check:"length_equals",...Fe(t),length:e})}function Iee(e,t){return new XX({check:"string_format",format:"regex",...Fe(t),pattern:e})}function Dee(e){return new QX({check:"string_format",format:"lowercase",...Fe(e)})}function Lee(e){return new eQ({check:"string_format",format:"uppercase",...Fe(e)})}function Mee(e,t){return new tQ({check:"string_format",format:"includes",...Fe(t),includes:e})}function zee(e,t){return new rQ({check:"string_format",format:"starts_with",...Fe(t),prefix:e})}function Fee(e,t){return new nQ({check:"string_format",format:"ends_with",...Fe(t),suffix:e})}function km(e){return new sQ({check:"overwrite",tx:e})}function $ee(e){return km(t=>t.normalize(e))}function Uee(){return km(e=>e.trim())}function qee(){return km(e=>e.toLowerCase())}function Bee(){return km(e=>e.toUpperCase())}function Vee(e,t,r){return new e({type:"array",element:t,...Fe(r)})}function Wee(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Fe(r)})}function Hee(e){const t=Kee(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Tp(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(Tp(s))}},e(r.value,r)));return t}function Kee(e,t){const r=new Zn({check:"custom",...Fe(t)});return r._zod.check=e,r}const Zee=re("ZodISODateTime",(e,t)=>{vQ.init(e,t),Zt.init(e,t)});function Gee(e){return kee(Zee,e)}const Yee=re("ZodISODate",(e,t)=>{bQ.init(e,t),Zt.init(e,t)});function Jee(e){return Nee(Yee,e)}const Xee=re("ZodISOTime",(e,t)=>{xQ.init(e,t),Zt.init(e,t)});function Qee(e){return See(Xee,e)}const ete=re("ZodISODuration",(e,t)=>{wQ.init(e,t),Zt.init(e,t)});function tte(e){return Eee(ete,e)}const rte=(e,t)=>{C6.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>cX(e,r)},flatten:{value:r=>lX(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Ij,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Ij,2)}},isEmpty:{get(){return e.issues.length===0}}})},$s=re("ZodError",rte,{Parent:Error}),nte=lE($s),ste=cE($s),ite=Zb($s),ote=Gb($s),ate=hX($s),lte=fX($s),cte=pX($s),ute=mX($s),dte=gX($s),hte=yX($s),fte=vX($s),pte=bX($s),nr=re("ZodType",(e,t)=>(Kt.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>kl(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>nte(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>ite(e,r,n),e.parseAsync=async(r,n)=>ste(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>ote(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>ate(e,r,n),e.decode=(r,n)=>lte(e,r,n),e.encodeAsync=async(r,n)=>cte(e,r,n),e.decodeAsync=async(r,n)=>ute(e,r,n),e.safeEncode=(r,n)=>dte(e,r,n),e.safeDecode=(r,n)=>hte(e,r,n),e.safeEncodeAsync=async(r,n)=>fte(e,r,n),e.safeDecodeAsync=async(r,n)=>pte(e,r,n),e.refine=(r,n)=>e.check(ore(r,n)),e.superRefine=r=>e.check(are(r)),e.overwrite=r=>e.check(km(r)),e.optional=()=>FO(e),e.nullable=()=>$O(e),e.nullish=()=>FO($O(e)),e.nonoptional=r=>Qte(e,r),e.array=()=>fE(e),e.or=r=>qte([e,r]),e.and=r=>Vte(e,r),e.transform=r=>UO(e,Kte(r)),e.default=r=>Yte(e,r),e.prefault=r=>Xte(e,r),e.catch=r=>tre(e,r),e.pipe=r=>UO(e,r),e.readonly=()=>sre(e),e.describe=r=>{const n=e.clone();return Ag.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=Ag.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Ag.get(e);const n=e.clone();return Ag.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),q6=re("_ZodString",(e,t)=>{uE.init(e,t),nr.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Iee(...n)),e.includes=(...n)=>e.check(Mee(...n)),e.startsWith=(...n)=>e.check(zee(...n)),e.endsWith=(...n)=>e.check(Fee(...n)),e.min=(...n)=>e.check(ov(...n)),e.max=(...n)=>e.check($6(...n)),e.length=(...n)=>e.check(U6(...n)),e.nonempty=(...n)=>e.check(ov(1,...n)),e.lowercase=n=>e.check(Dee(n)),e.uppercase=n=>e.check(Lee(n)),e.trim=()=>e.check(Uee()),e.normalize=(...n)=>e.check($ee(...n)),e.toLowerCase=()=>e.check(qee()),e.toUpperCase=()=>e.check(Bee())}),mte=re("ZodString",(e,t)=>{uE.init(e,t),q6.init(e,t),e.email=r=>e.check(nee(gte,r)),e.url=r=>e.check(lee(yte,r)),e.jwt=r=>e.check(jee(Pte,r)),e.emoji=r=>e.check(cee(vte,r)),e.guid=r=>e.check(PO(LO,r)),e.uuid=r=>e.check(see(Og,r)),e.uuidv4=r=>e.check(iee(Og,r)),e.uuidv6=r=>e.check(oee(Og,r)),e.uuidv7=r=>e.check(aee(Og,r)),e.nanoid=r=>e.check(uee(bte,r)),e.guid=r=>e.check(PO(LO,r)),e.cuid=r=>e.check(dee(xte,r)),e.cuid2=r=>e.check(hee(wte,r)),e.ulid=r=>e.check(fee(_te,r)),e.base64=r=>e.check(xee(Tte,r)),e.base64url=r=>e.check(wee(Ate,r)),e.xid=r=>e.check(pee(jte,r)),e.ksuid=r=>e.check(mee(kte,r)),e.ipv4=r=>e.check(gee(Nte,r)),e.ipv6=r=>e.check(yee(Ste,r)),e.cidrv4=r=>e.check(vee(Ete,r)),e.cidrv6=r=>e.check(bee(Cte,r)),e.e164=r=>e.check(_ee(Ote,r)),e.datetime=r=>e.check(Gee(r)),e.date=r=>e.check(Jee(r)),e.time=r=>e.check(Qee(r)),e.duration=r=>e.check(tte(r))});function de(e){return ree(mte,e)}const Zt=re("ZodStringFormat",(e,t)=>{$t.init(e,t),q6.init(e,t)}),gte=re("ZodEmail",(e,t)=>{cQ.init(e,t),Zt.init(e,t)}),LO=re("ZodGUID",(e,t)=>{aQ.init(e,t),Zt.init(e,t)}),Og=re("ZodUUID",(e,t)=>{lQ.init(e,t),Zt.init(e,t)}),yte=re("ZodURL",(e,t)=>{uQ.init(e,t),Zt.init(e,t)}),vte=re("ZodEmoji",(e,t)=>{dQ.init(e,t),Zt.init(e,t)}),bte=re("ZodNanoID",(e,t)=>{hQ.init(e,t),Zt.init(e,t)}),xte=re("ZodCUID",(e,t)=>{fQ.init(e,t),Zt.init(e,t)}),wte=re("ZodCUID2",(e,t)=>{pQ.init(e,t),Zt.init(e,t)}),_te=re("ZodULID",(e,t)=>{mQ.init(e,t),Zt.init(e,t)}),jte=re("ZodXID",(e,t)=>{gQ.init(e,t),Zt.init(e,t)}),kte=re("ZodKSUID",(e,t)=>{yQ.init(e,t),Zt.init(e,t)}),Nte=re("ZodIPv4",(e,t)=>{_Q.init(e,t),Zt.init(e,t)}),Ste=re("ZodIPv6",(e,t)=>{jQ.init(e,t),Zt.init(e,t)}),Ete=re("ZodCIDRv4",(e,t)=>{kQ.init(e,t),Zt.init(e,t)}),Cte=re("ZodCIDRv6",(e,t)=>{NQ.init(e,t),Zt.init(e,t)}),Tte=re("ZodBase64",(e,t)=>{SQ.init(e,t),Zt.init(e,t)}),Ate=re("ZodBase64URL",(e,t)=>{CQ.init(e,t),Zt.init(e,t)}),Ote=re("ZodE164",(e,t)=>{TQ.init(e,t),Zt.init(e,t)}),Pte=re("ZodJWT",(e,t)=>{OQ.init(e,t),Zt.init(e,t)}),B6=re("ZodNumber",(e,t)=>{M6.init(e,t),nr.init(e,t),e.gt=(n,s)=>e.check(IO(n,s)),e.gte=(n,s)=>e.check(C0(n,s)),e.min=(n,s)=>e.check(C0(n,s)),e.lt=(n,s)=>e.check(RO(n,s)),e.lte=(n,s)=>e.check(E0(n,s)),e.max=(n,s)=>e.check(E0(n,s)),e.int=n=>e.check(MO(n)),e.safe=n=>e.check(MO(n)),e.positive=n=>e.check(IO(0,n)),e.nonnegative=n=>e.check(C0(0,n)),e.negative=n=>e.check(RO(0,n)),e.nonpositive=n=>e.check(E0(0,n)),e.multipleOf=(n,s)=>e.check(DO(n,s)),e.step=(n,s)=>e.check(DO(n,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Wo(e){return Cee(B6,e)}const Rte=re("ZodNumberFormat",(e,t)=>{PQ.init(e,t),B6.init(e,t)});function MO(e){return Tee(Rte,e)}const Ite=re("ZodBoolean",(e,t)=>{RQ.init(e,t),nr.init(e,t)});function dE(e){return Aee(Ite,e)}const Dte=re("ZodAny",(e,t)=>{IQ.init(e,t),nr.init(e,t)});function hE(){return Oee(Dte)}const Lte=re("ZodUnknown",(e,t)=>{DQ.init(e,t),nr.init(e,t)});function zO(){return Pee(Lte)}const Mte=re("ZodNever",(e,t)=>{LQ.init(e,t),nr.init(e,t)});function zte(e){return Ree(Mte,e)}const Fte=re("ZodArray",(e,t)=>{MQ.init(e,t),nr.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(ov(r,n)),e.nonempty=r=>e.check(ov(1,r)),e.max=(r,n)=>e.check($6(r,n)),e.length=(r,n)=>e.check(U6(r,n)),e.unwrap=()=>e.element});function fE(e,t){return Vee(Fte,e,t)}const $te=re("ZodObject",(e,t)=>{FQ.init(e,t),nr.init(e,t),Nt(e,"shape",()=>t.shape),e.keyof=()=>St(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:zO()}),e.loose=()=>e.clone({...e._zod.def,catchall:zO()}),e.strict=()=>e.clone({...e._zod.def,catchall:zte()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>nX(e,r),e.safeExtend=r=>sX(e,r),e.merge=r=>iX(e,r),e.pick=r=>tX(e,r),e.omit=r=>rX(e,r),e.partial=(...r)=>oX(V6,e,r[0]),e.required=(...r)=>aX(W6,e,r[0])});function On(e,t){const r={type:"object",get shape(){return jl(this,"shape",e?YJ(e):{}),this.shape},...Fe(t)};return new $te(r)}const Ute=re("ZodUnion",(e,t)=>{$Q.init(e,t),nr.init(e,t),e.options=t.options});function qte(e,t){return new Ute({type:"union",options:e,...Fe(t)})}const Bte=re("ZodIntersection",(e,t)=>{UQ.init(e,t),nr.init(e,t)});function Vte(e,t){return new Bte({type:"intersection",left:e,right:t})}const Wte=re("ZodRecord",(e,t)=>{qQ.init(e,t),nr.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Eh(e,t,r){return new Wte({type:"record",keyType:e,valueType:t,...Fe(r)})}const Lj=re("ZodEnum",(e,t)=>{BQ.init(e,t),nr.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Lj({...t,checks:[],...Fe(s),entries:i})},e.exclude=(n,s)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Lj({...t,checks:[],...Fe(s),entries:i})}});function St(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Lj({type:"enum",entries:r,...Fe(t)})}const Hte=re("ZodTransform",(e,t)=>{VQ.init(e,t),nr.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new j6(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Tp(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),r.issues.push(Tp(o))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(i=>(r.value=i,r)):(r.value=s,r)}});function Kte(e){return new Hte({type:"transform",transform:e})}const V6=re("ZodOptional",(e,t)=>{WQ.init(e,t),nr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function FO(e){return new V6({type:"optional",innerType:e})}const Zte=re("ZodNullable",(e,t)=>{HQ.init(e,t),nr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $O(e){return new Zte({type:"nullable",innerType:e})}const Gte=re("ZodDefault",(e,t)=>{KQ.init(e,t),nr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Yte(e,t){return new Gte({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():S6(t)}})}const Jte=re("ZodPrefault",(e,t)=>{ZQ.init(e,t),nr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Xte(e,t){return new Jte({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():S6(t)}})}const W6=re("ZodNonOptional",(e,t)=>{GQ.init(e,t),nr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Qte(e,t){return new W6({type:"nonoptional",innerType:e,...Fe(t)})}const ere=re("ZodCatch",(e,t)=>{YQ.init(e,t),nr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function tre(e,t){return new ere({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const rre=re("ZodPipe",(e,t)=>{JQ.init(e,t),nr.init(e,t),e.in=t.in,e.out=t.out});function UO(e,t){return new rre({type:"pipe",in:e,out:t})}const nre=re("ZodReadonly",(e,t)=>{XQ.init(e,t),nr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function sre(e){return new nre({type:"readonly",innerType:e})}const ire=re("ZodCustom",(e,t)=>{QQ.init(e,t),nr.init(e,t)});function ore(e,t={}){return Wee(ire,e,t)}function are(e){return Hee(e)}const H6=On({id:de().uuid().optional(),name:de().min(1,"Product name is required").max(255,"Product name must be less than 255 characters").trim(),description:de().max(2e3,"Description must be less than 2000 characters").optional().nullable(),product_type:St(["single_issue","bundle","chapter_pass","arc_pass"]).default("single_issue"),active:dE().default(!0),work_id:de().uuid().optional().nullable(),content_grants:Eh(de(),hE()).optional().nullable(),created_at:de().datetime().optional(),updated_at:de().datetime().optional()}),lre=On({id:de().uuid().optional(),product_id:de().uuid(),currency:de().length(3,"Currency must be a 3-letter ISO code").toUpperCase(),unit_amount:Wo().min(0,"Price cannot be negative").max(999999,"Price cannot exceed $9,999.99"),interval:St(["one_time","month","year"]).optional().nullable(),nickname:de().max(100,"Nickname must be less than 100 characters").optional().nullable(),trial_days:Wo().min(0,"Trial days cannot be negative").max(365,"Trial period cannot exceed 365 days").optional().nullable(),active:dE().default(!0),created_at:de().datetime().optional(),updated_at:de().datetime().optional()});H6.omit({id:!0,created_at:!0,updated_at:!0}).extend({prices:fE(lre.omit({id:!0,product_id:!0,created_at:!0,updated_at:!0})).min(1,"At least one price is required")});H6.partial().omit({id:!0,created_at:!0});On({active:St(["true","false"]).optional(),product_type:St(["single_issue","bundle","chapter_pass","arc_pass"]).optional(),limit:de().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:de().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),search:de().max(100).optional(),sort_by:St(["created_at","name","price","updated_at"]).default("created_at"),sort_order:St(["asc","desc"]).default("desc")});const cre=On({id:de().uuid(),username:de().min(3,"Username must be at least 3 characters").max(30,"Username must be less than 30 characters").regex(/^[a-zA-Z0-9_-]+$/,"Username can only contain letters, numbers, underscores, and hyphens").optional().nullable(),display_name:de().min(1,"Display name is required").max(100,"Display name must be less than 100 characters").trim().optional().nullable(),avatar_url:de().url("Invalid avatar URL").optional().nullable(),website:de().url("Invalid website URL").optional().nullable(),role:St(["admin","support","accountant","user","super_admin"]).default("user"),beta_reader_status:St(["not_applied","pending","approved","rejected"]).default("not_applied"),created_at:de().datetime().optional(),updated_at:de().datetime().optional()});On({user_id:de().uuid(),books_read:Wo().min(0,"Books read cannot be negative").default(0),reading_hours:Wo().min(0,"Reading hours cannot be negative").default(0),achievements:Wo().min(0,"Achievements cannot be negative").default(0),currently_reading:de().max(255).default("")});On({id:de().uuid().optional(),user_id:de().uuid().optional().nullable(),email:de().email("Invalid email address"),full_name:de().min(2,"Full name must be at least 2 characters").max(100,"Full name must be less than 100 characters").trim(),time_zone:de().min(1,"Time zone is required").max(50,"Time zone must be less than 50 characters"),country:de().max(100,"Country must be less than 100 characters").optional().nullable(),devices:fE(de()).optional().nullable(),hours_per_week:de().min(1,"Hours per week is required"),communication:de().min(10,"Communication preference must be at least 10 characters").max(500,"Communication preference must be less than 500 characters"),portal_use:de().min(10,"Portal use description must be at least 10 characters").max(500,"Portal use description must be less than 500 characters"),beta_commitment:de().min(20,"Beta commitment must be at least 20 characters").max(1e3,"Beta commitment must be less than 1000 characters"),interest_statement:de().min(50,"Interest statement must be at least 50 characters").max(2e3,"Interest statement must be less than 2000 characters"),feedback_philosophy:de().min(50,"Feedback philosophy must be at least 50 characters").max(2e3,"Feedback philosophy must be less than 2000 characters"),recent_reads:de().max(1e3,"Recent reads must be less than 1000 characters").optional().nullable(),prior_beta:de().max(1e3,"Prior beta experience must be less than 1000 characters").optional().nullable(),goodreads:de().url("Invalid Goodreads URL").optional().nullable(),demographics:de().max(500,"Demographics must be less than 500 characters").optional().nullable(),access_needs:de().max(500,"Access needs must be less than 500 characters").optional().nullable(),status:St(["pending","approved","denied"]).default("pending"),created_at:de().datetime().optional()});cre.partial().omit({id:!0,created_at:!0,role:!0});On({user_id:de().uuid(),role:St(["admin","support","accountant","user","super_admin"]),granted_by:de().uuid()});On({role:St(["admin","support","accountant","user","super_admin"]).optional(),beta_reader_status:St(["not_applied","pending","approved","rejected"]).optional(),limit:de().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:de().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),search:de().max(100).optional(),sort_by:St(["created_at","username","display_name","role"]).default("created_at"),sort_order:St(["asc","desc"]).default("desc")});On({priceId:de().min(1,"Price ID is required"),successUrl:de().url("Invalid success URL"),cancelUrl:de().url("Invalid cancel URL"),customerEmail:de().email("Invalid customer email").optional(),productSlug:de().min(1,"Product slug is required").optional(),userId:de().uuid().optional(),quantity:Wo().min(1,"Quantity must be at least 1").max(10,"Quantity cannot exceed 10").default(1),metadata:Eh(de(),de()).optional()});const K6=On({id:de().uuid().optional(),user_id:de().uuid(),plan_id:de().min(1,"Plan ID is required"),status:St(["incomplete","incomplete_expired","trialing","active","past_due","canceled","unpaid","paused"]).default("active"),current_period_start:de().datetime().optional().nullable(),current_period_end:de().datetime().optional().nullable(),trial_start:de().datetime().optional().nullable(),trial_end:de().datetime().optional().nullable(),cancel_at_period_end:dE().default(!1),metadata:Eh(de(),hE()).optional().nullable(),created_at:de().datetime().optional(),updated_at:de().datetime().optional()});On({amount:Wo().min(50,"Amount must be at least $0.50"),currency:de().length(3,"Currency must be a 3-letter ISO code"),paymentMethodId:de().optional(),customerId:de().optional(),metadata:Eh(de(),de()).optional()});On({paymentIntentId:de().min(1,"Payment intent ID is required"),amount:Wo().min(1,"Refund amount must be positive").optional(),reason:St(["duplicate","fraudulent","requested_by_customer","expired_uncaptured_charge"]).default("requested_by_customer"),metadata:Eh(de(),de()).optional()});On({id:de().uuid().optional(),user_id:de().uuid().optional().nullable(),product_id:de().uuid(),price_id:de().uuid(),status:St(["pending","completed","failed","refunded","canceled"]).default("pending"),amount_cents:Wo().min(0,"Amount cannot be negative"),currency:de().length(3,"Currency must be a 3-letter ISO code"),customer_email:de().email("Invalid customer email").optional().nullable(),provider:St(["stripe","paypal"]).default("stripe"),provider_session_id:de().optional().nullable(),provider_payment_intent_id:de().optional().nullable(),metadata:Eh(de(),hE()).optional().nullable(),created_at:de().datetime().optional(),updated_at:de().datetime().optional()});K6.omit({id:!0,created_at:!0,updated_at:!0});K6.partial().omit({id:!0,user_id:!0,created_at:!0});On({status:St(["pending","completed","failed","refunded","canceled"]).optional(),provider:St(["stripe","paypal"]).optional(),user_id:de().uuid().optional(),start_date:de().datetime().optional(),end_date:de().datetime().optional(),limit:de().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:de().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),sort_by:St(["created_at","amount_cents","status"]).default("created_at"),sort_order:St(["asc","desc"]).default("desc")});On({status:St(["incomplete","incomplete_expired","trialing","active","past_due","canceled","unpaid","paused"]).optional(),user_id:de().uuid().optional(),plan_id:de().optional(),limit:de().transform(e=>parseInt(e)).refine(e=>e>0&&e<=100,"Limit must be between 1 and 100").default(50),offset:de().transform(e=>parseInt(e)).refine(e=>e>=0,"Offset must be non-negative").default(0),sort_by:St(["created_at","current_period_end","status"]).default("created_at"),sort_order:St(["asc","desc"]).default("desc")});var Ch=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$c=typeof window>"u"||"Deno"in globalThis;function _n(){}function ure(e,t){return typeof e=="function"?e(t):e}function Mj(e){return typeof e=="number"&&e>=0&&e!==1/0}function Z6(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ll(e,t){return typeof e=="function"?e(t):e}function _s(e,t){return typeof e=="function"?e(t):e}function qO(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=e;if(o){if(n){if(t.queryHash!==pE(o,t.options))return!1}else if(!Ap(t.queryKey,o))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function BO(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Uc(t.options.mutationKey)!==Uc(i))return!1}else if(!Ap(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function pE(e,t){return((t==null?void 0:t.queryKeyHashFn)||Uc)(e)}function Uc(e){return JSON.stringify(e,(t,r)=>zj(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Ap(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ap(e[r],t[r])):!1}function G6(e,t){if(e===t)return e;const r=VO(e)&&VO(t);if(r||zj(e)&&zj(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),o=i.length,a=r?[]:{},l=new Set(n);let c=0;for(let u=0;u<o;u++){const h=r?u:i[u];(!r&&l.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(a[h]=void 0,c++):(a[h]=G6(e[h],t[h]),a[h]===e[h]&&e[h]!==void 0&&c++)}return s===o&&c===s?e:a}return t}function av(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function VO(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function zj(e){if(!WO(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!WO(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function WO(e){return Object.prototype.toString.call(e)==="[object Object]"}function dre(e){return new Promise(t=>{setTimeout(t,e)})}function Fj(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?G6(e,t):t}function hre(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function fre(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var mE=Symbol();function Y6(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===mE?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function J6(e,t){return typeof e=="function"?e(...t):!!e}var _c,Ga,Rd,dM,pre=(dM=class extends Ch{constructor(){super();$e(this,_c);$e(this,Ga);$e(this,Rd);je(this,Rd,t=>{if(!$c&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){M(this,Ga)||this.setEventListener(M(this,Rd))}onUnsubscribe(){var t;this.hasListeners()||((t=M(this,Ga))==null||t.call(this),je(this,Ga,void 0))}setEventListener(t){var r;je(this,Rd,t),(r=M(this,Ga))==null||r.call(this),je(this,Ga,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){M(this,_c)!==t&&(je(this,_c,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof M(this,_c)=="boolean"?M(this,_c):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},_c=new WeakMap,Ga=new WeakMap,Rd=new WeakMap,dM),gE=new pre,Id,Ya,Dd,hM,mre=(hM=class extends Ch{constructor(){super();$e(this,Id,!0);$e(this,Ya);$e(this,Dd);je(this,Dd,t=>{if(!$c&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){M(this,Ya)||this.setEventListener(M(this,Dd))}onUnsubscribe(){var t;this.hasListeners()||((t=M(this,Ya))==null||t.call(this),je(this,Ya,void 0))}setEventListener(t){var r;je(this,Dd,t),(r=M(this,Ya))==null||r.call(this),je(this,Ya,t(this.setOnline.bind(this)))}setOnline(t){M(this,Id)!==t&&(je(this,Id,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return M(this,Id)}},Id=new WeakMap,Ya=new WeakMap,Dd=new WeakMap,hM),lv=new mre;function $j(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function gre(e){return Math.min(1e3*2**e,3e4)}function X6(e){return(e??"online")==="online"?lv.isOnline():!0}var Q6=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ez(e){let t=!1,r=0,n;const s=$j(),i=()=>s.status!=="pending",o=m=>{var b;i()||(f(new Q6(m)),(b=e.abort)==null||b.call(e))},a=()=>{t=!0},l=()=>{t=!1},c=()=>gE.isFocused()&&(e.networkMode==="always"||lv.isOnline())&&e.canRun(),u=()=>X6(e.networkMode)&&e.canRun(),h=m=>{i()||(n==null||n(),s.resolve(m))},f=m=>{i()||(n==null||n(),s.reject(m))},p=()=>new Promise(m=>{var b;n=x=>{(i()||c())&&m(x)},(b=e.onPause)==null||b.call(e)}).then(()=>{var m;n=void 0,i()||(m=e.onContinue)==null||m.call(e)}),y=()=>{if(i())return;let m;const b=r===0?e.initialPromise:void 0;try{m=b??e.fn()}catch(x){m=Promise.reject(x)}Promise.resolve(m).then(h).catch(x=>{var N;if(i())return;const w=e.retry??($c?0:3),_=e.retryDelay??gre,j=typeof _=="function"?_(r,x):_,k=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,x);if(t||!k){f(x);return}r++,(N=e.onFail)==null||N.call(e,r,x),dre(j).then(()=>c()?void 0:p()).then(()=>{t?f(x):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?y():p().then(y),s)}}var yre=e=>setTimeout(e,0);function vre(){let e=[],t=0,r=a=>{a()},n=a=>{a()},s=yre;const i=a=>{t?e.push(a):s(()=>{r(a)})},o=()=>{const a=e;e=[],a.length&&s(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var Ar=vre(),jc,fM,tz=(fM=class{constructor(){$e(this,jc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Mj(this.gcTime)&&je(this,jc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($c?1/0:5*60*1e3))}clearGcTimeout(){M(this,jc)&&(clearTimeout(M(this,jc)),je(this,jc,void 0))}},jc=new WeakMap,fM),Ld,Md,ws,kc,$r,gm,Nc,si,Co,pM,bre=(pM=class extends tz{constructor(t){super();$e(this,si);$e(this,Ld);$e(this,Md);$e(this,ws);$e(this,kc);$e(this,$r);$e(this,gm);$e(this,Nc);je(this,Nc,!1),je(this,gm,t.defaultOptions),this.setOptions(t.options),this.observers=[],je(this,kc,t.client),je(this,ws,M(this,kc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,je(this,Ld,xre(this.options)),this.state=t.state??M(this,Ld),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=M(this,$r))==null?void 0:t.promise}setOptions(t){this.options={...M(this,gm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,ws).remove(this)}setData(t,r){const n=Fj(this.state.data,t,this.options);return Ye(this,si,Co).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Ye(this,si,Co).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=M(this,$r))==null?void 0:n.promise;return(s=M(this,$r))==null||s.cancel(t),r?r.then(_n).catch(_n):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Ld))}isActive(){return this.observers.some(t=>_s(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ll(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Z6(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=M(this,$r))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=M(this,$r))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),M(this,ws).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(M(this,$r)&&(M(this,Nc)?M(this,$r).cancel({revert:!0}):M(this,$r).cancelRetry()),this.scheduleGc()),M(this,ws).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ye(this,si,Co).call(this,{type:"invalidate"})}async fetch(t,r){var l,c,u,h,f,p,y,m,b,x,w,_;if(this.state.fetchStatus!=="idle"&&((l=M(this,$r))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(M(this,$r))return M(this,$r).continueRetry(),M(this,$r).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(k=>k.options.queryFn);j&&this.setOptions(j.options)}const n=new AbortController,s=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(je(this,Nc,!0),n.signal)})},i=()=>{const j=Y6(this.options,r),N=(()=>{const C={client:M(this,kc),queryKey:this.queryKey,meta:this.meta};return s(C),C})();return je(this,Nc,!1),this.options.persister?this.options.persister(j,N,this):j(N)},a=(()=>{const j={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:M(this,kc),state:this.state,fetchFn:i};return s(j),j})();(c=this.options.behavior)==null||c.onFetch(a,this),je(this,Md,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ye(this,si,Co).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),je(this,$r,ez({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onFail:(j,k)=>{Ye(this,si,Co).call(this,{type:"failed",failureCount:j,error:k})},onPause:()=>{Ye(this,si,Co).call(this,{type:"pause"})},onContinue:()=>{Ye(this,si,Co).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const j=await M(this,$r).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(p=(f=M(this,ws).config).onSuccess)==null||p.call(f,j,this),(m=(y=M(this,ws).config).onSettled)==null||m.call(y,j,this.state.error,this),j}catch(j){if(j instanceof Q6){if(j.silent)return M(this,$r).promise;if(j.revert){if(this.setState({...M(this,Md),fetchStatus:"idle"}),this.state.data===void 0)throw j;return this.state.data}}throw Ye(this,si,Co).call(this,{type:"error",error:j}),(x=(b=M(this,ws).config).onError)==null||x.call(b,j,this),(_=(w=M(this,ws).config).onSettled)==null||_.call(w,this.state.data,j,this),j}finally{this.scheduleGc()}}},Ld=new WeakMap,Md=new WeakMap,ws=new WeakMap,kc=new WeakMap,$r=new WeakMap,gm=new WeakMap,Nc=new WeakMap,si=new WeakSet,Co=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...rz(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return je(this,Md,t.manual?s:void 0),s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Ar.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),M(this,ws).notify({query:this,type:"updated",action:t})})},pM);function rz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:X6(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function xre(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ui,mM,wre=(mM=class extends Ch{constructor(t={}){super();$e(this,Ui);this.config=t,je(this,Ui,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??pE(s,r);let o=this.get(i);return o||(o=new bre({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){M(this,Ui).has(t.queryHash)||(M(this,Ui).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=M(this,Ui).get(t.queryHash);r&&(t.destroy(),r===t&&M(this,Ui).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ar.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return M(this,Ui).get(t)}getAll(){return[...M(this,Ui).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>qO(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>qO(t,n)):r}notify(t){Ar.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ar.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ar.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ui=new WeakMap,mM),qi,xn,Sc,Bi,La,gM,_re=(gM=class extends tz{constructor(t){super();$e(this,Bi);$e(this,qi);$e(this,xn);$e(this,Sc);this.mutationId=t.mutationId,je(this,xn,t.mutationCache),je(this,qi,[]),this.state=t.state||nz(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){M(this,qi).includes(t)||(M(this,qi).push(t),this.clearGcTimeout(),M(this,xn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){je(this,qi,M(this,qi).filter(r=>r!==t)),this.scheduleGc(),M(this,xn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){M(this,qi).length||(this.state.status==="pending"?this.scheduleGc():M(this,xn).remove(this))}continue(){var t;return((t=M(this,Sc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,a,l,c,u,h,f,p,y,m,b,x,w,_,j,k,N,C,E;const r=()=>{Ye(this,Bi,La).call(this,{type:"continue"})};je(this,Sc,ez({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(T,P)=>{Ye(this,Bi,La).call(this,{type:"failed",failureCount:T,error:P})},onPause:()=>{Ye(this,Bi,La).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,xn).canRun(this)}));const n=this.state.status==="pending",s=!M(this,Sc).canStart();try{if(n)r();else{Ye(this,Bi,La).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(i=M(this,xn).config).onMutate)==null?void 0:o.call(i,t,this));const P=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));P!==this.state.context&&Ye(this,Bi,La).call(this,{type:"pending",context:P,variables:t,isPaused:s})}const T=await M(this,Sc).start();return await((u=(c=M(this,xn).config).onSuccess)==null?void 0:u.call(c,T,t,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,T,t,this.state.context)),await((y=(p=M(this,xn).config).onSettled)==null?void 0:y.call(p,T,null,this.state.variables,this.state.context,this)),await((b=(m=this.options).onSettled)==null?void 0:b.call(m,T,null,t,this.state.context)),Ye(this,Bi,La).call(this,{type:"success",data:T}),T}catch(T){try{throw await((w=(x=M(this,xn).config).onError)==null?void 0:w.call(x,T,t,this.state.context,this)),await((j=(_=this.options).onError)==null?void 0:j.call(_,T,t,this.state.context)),await((N=(k=M(this,xn).config).onSettled)==null?void 0:N.call(k,void 0,T,this.state.variables,this.state.context,this)),await((E=(C=this.options).onSettled)==null?void 0:E.call(C,void 0,T,t,this.state.context)),T}finally{Ye(this,Bi,La).call(this,{type:"error",error:T})}}finally{M(this,xn).runNext(this)}}},qi=new WeakMap,xn=new WeakMap,Sc=new WeakMap,Bi=new WeakSet,La=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ar.batch(()=>{M(this,qi).forEach(n=>{n.onMutationUpdate(t)}),M(this,xn).notify({mutation:this,type:"updated",action:t})})},gM);function nz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Io,ii,ym,yM,jre=(yM=class extends Ch{constructor(t={}){super();$e(this,Io);$e(this,ii);$e(this,ym);this.config=t,je(this,Io,new Set),je(this,ii,new Map),je(this,ym,0)}build(t,r,n){const s=new _re({mutationCache:this,mutationId:++_g(this,ym)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){M(this,Io).add(t);const r=Pg(t);if(typeof r=="string"){const n=M(this,ii).get(r);n?n.push(t):M(this,ii).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(M(this,Io).delete(t)){const r=Pg(t);if(typeof r=="string"){const n=M(this,ii).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&M(this,ii).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Pg(t);if(typeof r=="string"){const n=M(this,ii).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=Pg(t);if(typeof r=="string"){const s=(n=M(this,ii).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ar.batch(()=>{M(this,Io).forEach(t=>{this.notify({type:"removed",mutation:t})}),M(this,Io).clear(),M(this,ii).clear()})}getAll(){return Array.from(M(this,Io))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>BO(r,n))}findAll(t={}){return this.getAll().filter(r=>BO(t,r))}notify(t){Ar.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ar.batch(()=>Promise.all(t.map(r=>r.continue().catch(_n))))}},Io=new WeakMap,ii=new WeakMap,ym=new WeakMap,yM);function Pg(e){var t;return(t=e.options.scope)==null?void 0:t.id}function HO(e){return{onFetch:(t,r)=>{var u,h,f,p,y;const n=t.options,s=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const b=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},x=Y6(t.options,t.fetchOptions),w=async(_,j,k)=>{if(m)return Promise.reject();if(j==null&&_.pages.length)return Promise.resolve(_);const C=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};return b(O),O})(),E=await x(C),{maxPages:T}=t.options,P=k?fre:hre;return{pages:P(_.pages,E,T),pageParams:P(_.pageParams,j,T)}};if(s&&i.length){const _=s==="backward",j=_?kre:KO,k={pages:i,pageParams:o},N=j(n,k);a=await w(k,N,_)}else{const _=e??i.length;do{const j=l===0?o[0]??n.initialPageParam:KO(n,a);if(l>0&&j==null)break;a=await w(a,j),l++}while(l<_)}return a};t.options.persister?t.fetchFn=()=>{var m,b;return(b=(m=t.options).persister)==null?void 0:b.call(m,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function KO(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function kre(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Xt,Ja,Xa,zd,Fd,Qa,$d,Ud,vM,Nre=(vM=class{constructor(e={}){$e(this,Xt);$e(this,Ja);$e(this,Xa);$e(this,zd);$e(this,Fd);$e(this,Qa);$e(this,$d);$e(this,Ud);je(this,Xt,e.queryCache||new wre),je(this,Ja,e.mutationCache||new jre),je(this,Xa,e.defaultOptions||{}),je(this,zd,new Map),je(this,Fd,new Map),je(this,Qa,0)}mount(){_g(this,Qa)._++,M(this,Qa)===1&&(je(this,$d,gE.subscribe(async e=>{e&&(await this.resumePausedMutations(),M(this,Xt).onFocus())})),je(this,Ud,lv.subscribe(async e=>{e&&(await this.resumePausedMutations(),M(this,Xt).onOnline())})))}unmount(){var e,t;_g(this,Qa)._--,M(this,Qa)===0&&((e=M(this,$d))==null||e.call(this),je(this,$d,void 0),(t=M(this,Ud))==null||t.call(this),je(this,Ud,void 0))}isFetching(e){return M(this,Xt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return M(this,Ja).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=M(this,Xt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=M(this,Xt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ll(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return M(this,Xt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=M(this,Xt).get(n.queryHash),i=s==null?void 0:s.state.data,o=ure(t,i);if(o!==void 0)return M(this,Xt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ar.batch(()=>M(this,Xt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=M(this,Xt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=M(this,Xt);Ar.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=M(this,Xt);return Ar.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ar.batch(()=>M(this,Xt).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(_n).catch(_n)}invalidateQueries(e,t={}){return Ar.batch(()=>(M(this,Xt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ar.batch(()=>M(this,Xt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(_n)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(_n)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=M(this,Xt).build(this,t);return r.isStaleByTime(ll(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(_n).catch(_n)}fetchInfiniteQuery(e){return e.behavior=HO(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(_n).catch(_n)}ensureInfiniteQueryData(e){return e.behavior=HO(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return lv.isOnline()?M(this,Ja).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,Xt)}getMutationCache(){return M(this,Ja)}getDefaultOptions(){return M(this,Xa)}setDefaultOptions(e){je(this,Xa,e)}setQueryDefaults(e,t){M(this,zd).set(Uc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...M(this,zd).values()],r={};return t.forEach(n=>{Ap(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){M(this,Fd).set(Uc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...M(this,Fd).values()],r={};return t.forEach(n=>{Ap(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...M(this,Xa).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=pE(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===mE&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...M(this,Xa).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){M(this,Xt).clear(),M(this,Ja).clear()}},Xt=new WeakMap,Ja=new WeakMap,Xa=new WeakMap,zd=new WeakMap,Fd=new WeakMap,Qa=new WeakMap,$d=new WeakMap,Ud=new WeakMap,vM),Ln,st,vm,wn,Ec,qd,Do,el,bm,Bd,Vd,Cc,Tc,tl,Wd,ft,Mf,Uj,qj,Bj,Vj,Wj,Hj,Kj,sz,bM,Sre=(bM=class extends Ch{constructor(t,r){super();$e(this,ft);$e(this,Ln);$e(this,st);$e(this,vm);$e(this,wn);$e(this,Ec);$e(this,qd);$e(this,Do);$e(this,el);$e(this,bm);$e(this,Bd);$e(this,Vd);$e(this,Cc);$e(this,Tc);$e(this,tl);$e(this,Wd,new Set);this.options=r,je(this,Ln,t),je(this,el,null),je(this,Do,$j()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,st).addObserver(this),ZO(M(this,st),this.options)?Ye(this,ft,Mf).call(this):this.updateResult(),Ye(this,ft,Vj).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Zj(M(this,st),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Zj(M(this,st),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ye(this,ft,Wj).call(this),Ye(this,ft,Hj).call(this),M(this,st).removeObserver(this)}setOptions(t){const r=this.options,n=M(this,st);if(this.options=M(this,Ln).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _s(this.options.enabled,M(this,st))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ye(this,ft,Kj).call(this),M(this,st).setOptions(this.options),r._defaulted&&!av(this.options,r)&&M(this,Ln).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,st),observer:this});const s=this.hasListeners();s&&GO(M(this,st),n,this.options,r)&&Ye(this,ft,Mf).call(this),this.updateResult(),s&&(M(this,st)!==n||_s(this.options.enabled,M(this,st))!==_s(r.enabled,M(this,st))||ll(this.options.staleTime,M(this,st))!==ll(r.staleTime,M(this,st)))&&Ye(this,ft,Uj).call(this);const i=Ye(this,ft,qj).call(this);s&&(M(this,st)!==n||_s(this.options.enabled,M(this,st))!==_s(r.enabled,M(this,st))||i!==M(this,tl))&&Ye(this,ft,Bj).call(this,i)}getOptimisticResult(t){const r=M(this,Ln).getQueryCache().build(M(this,Ln),t),n=this.createResult(r,t);return Cre(this,n)&&(je(this,wn,n),je(this,qd,this.options),je(this,Ec,M(this,st).state)),n}getCurrentResult(){return M(this,wn)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),s==="promise"&&!this.options.experimental_prefetchInRender&&M(this,Do).status==="pending"&&M(this,Do).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,s))})}trackProp(t){M(this,Wd).add(t)}getCurrentQuery(){return M(this,st)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=M(this,Ln).defaultQueryOptions(t),n=M(this,Ln).getQueryCache().build(M(this,Ln),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Ye(this,ft,Mf).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,wn)))}createResult(t,r){var T;const n=M(this,st),s=this.options,i=M(this,wn),o=M(this,Ec),a=M(this,qd),c=t!==n?t.state:M(this,vm),{state:u}=t;let h={...u},f=!1,p;if(r._optimisticResults){const P=this.hasListeners(),O=!P&&ZO(t,r),I=P&&GO(t,n,r,s);(O||I)&&(h={...h,...rz(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:m,status:b}=h;p=h.data;let x=!1;if(r.placeholderData!==void 0&&p===void 0&&b==="pending"){let P;i!=null&&i.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData)?(P=i.data,x=!0):P=typeof r.placeholderData=="function"?r.placeholderData((T=M(this,Vd))==null?void 0:T.state.data,M(this,Vd)):r.placeholderData,P!==void 0&&(b="success",p=Fj(i==null?void 0:i.data,P,r),f=!0)}if(r.select&&p!==void 0&&!x)if(i&&p===(o==null?void 0:o.data)&&r.select===M(this,bm))p=M(this,Bd);else try{je(this,bm,r.select),p=r.select(p),p=Fj(i==null?void 0:i.data,p,r),je(this,Bd,p),je(this,el,null)}catch(P){je(this,el,P)}M(this,el)&&(y=M(this,el),p=M(this,Bd),m=Date.now(),b="error");const w=h.fetchStatus==="fetching",_=b==="pending",j=b==="error",k=_&&w,N=p!==void 0,E={status:b,fetchStatus:h.fetchStatus,isPending:_,isSuccess:b==="success",isError:j,isInitialLoading:k,isLoading:k,data:p,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:m,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!_,isLoadingError:j&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&N,isStale:yE(t,r),refetch:this.refetch,promise:M(this,Do),isEnabled:_s(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=R=>{E.status==="error"?R.reject(E.error):E.data!==void 0&&R.resolve(E.data)},O=()=>{const R=je(this,Do,E.promise=$j());P(R)},I=M(this,Do);switch(I.status){case"pending":t.queryHash===n.queryHash&&P(I);break;case"fulfilled":(E.status==="error"||E.data!==I.value)&&O();break;case"rejected":(E.status!=="error"||E.error!==I.reason)&&O();break}}return E}updateResult(){const t=M(this,wn),r=this.createResult(M(this,st),this.options);if(je(this,Ec,M(this,st).state),je(this,qd,this.options),M(this,Ec).data!==void 0&&je(this,Vd,M(this,st)),av(r,t))return;je(this,wn,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!M(this,Wd).size)return!0;const o=new Set(i??M(this,Wd));return this.options.throwOnError&&o.add("error"),Object.keys(M(this,wn)).some(a=>{const l=a;return M(this,wn)[l]!==t[l]&&o.has(l)})};Ye(this,ft,sz).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ye(this,ft,Vj).call(this)}},Ln=new WeakMap,st=new WeakMap,vm=new WeakMap,wn=new WeakMap,Ec=new WeakMap,qd=new WeakMap,Do=new WeakMap,el=new WeakMap,bm=new WeakMap,Bd=new WeakMap,Vd=new WeakMap,Cc=new WeakMap,Tc=new WeakMap,tl=new WeakMap,Wd=new WeakMap,ft=new WeakSet,Mf=function(t){Ye(this,ft,Kj).call(this);let r=M(this,st).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(_n)),r},Uj=function(){Ye(this,ft,Wj).call(this);const t=ll(this.options.staleTime,M(this,st));if($c||M(this,wn).isStale||!Mj(t))return;const n=Z6(M(this,wn).dataUpdatedAt,t)+1;je(this,Cc,setTimeout(()=>{M(this,wn).isStale||this.updateResult()},n))},qj=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,st)):this.options.refetchInterval)??!1},Bj=function(t){Ye(this,ft,Hj).call(this),je(this,tl,t),!($c||_s(this.options.enabled,M(this,st))===!1||!Mj(M(this,tl))||M(this,tl)===0)&&je(this,Tc,setInterval(()=>{(this.options.refetchIntervalInBackground||gE.isFocused())&&Ye(this,ft,Mf).call(this)},M(this,tl)))},Vj=function(){Ye(this,ft,Uj).call(this),Ye(this,ft,Bj).call(this,Ye(this,ft,qj).call(this))},Wj=function(){M(this,Cc)&&(clearTimeout(M(this,Cc)),je(this,Cc,void 0))},Hj=function(){M(this,Tc)&&(clearInterval(M(this,Tc)),je(this,Tc,void 0))},Kj=function(){const t=M(this,Ln).getQueryCache().build(M(this,Ln),this.options);if(t===M(this,st))return;const r=M(this,st);je(this,st,t),je(this,vm,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},sz=function(t){Ar.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(M(this,wn))}),M(this,Ln).getQueryCache().notify({query:M(this,st),type:"observerResultsUpdated"})})},bM);function Ere(e,t){return _s(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ZO(e,t){return Ere(e,t)||e.state.data!==void 0&&Zj(e,t,t.refetchOnMount)}function Zj(e,t,r){if(_s(t.enabled,e)!==!1&&ll(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&yE(e,t)}return!1}function GO(e,t,r,n){return(e!==t||_s(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&yE(e,r)}function yE(e,t){return _s(t.enabled,e)!==!1&&e.isStaleByTime(ll(t.staleTime,e))}function Cre(e,t){return!av(e.getCurrentResult(),t)}var rl,nl,Mn,Lo,Zo,Ry,Gj,xM,Tre=(xM=class extends Ch{constructor(r,n){super();$e(this,Zo);$e(this,rl);$e(this,nl);$e(this,Mn);$e(this,Lo);je(this,rl,r),this.setOptions(n),this.bindMethods(),Ye(this,Zo,Ry).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=M(this,rl).defaultMutationOptions(r),av(this.options,n)||M(this,rl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,Mn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Uc(n.mutationKey)!==Uc(this.options.mutationKey)?this.reset():((s=M(this,Mn))==null?void 0:s.state.status)==="pending"&&M(this,Mn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=M(this,Mn))==null||r.removeObserver(this)}onMutationUpdate(r){Ye(this,Zo,Ry).call(this),Ye(this,Zo,Gj).call(this,r)}getCurrentResult(){return M(this,nl)}reset(){var r;(r=M(this,Mn))==null||r.removeObserver(this),je(this,Mn,void 0),Ye(this,Zo,Ry).call(this),Ye(this,Zo,Gj).call(this)}mutate(r,n){var s;return je(this,Lo,n),(s=M(this,Mn))==null||s.removeObserver(this),je(this,Mn,M(this,rl).getMutationCache().build(M(this,rl),this.options)),M(this,Mn).addObserver(this),M(this,Mn).execute(r)}},rl=new WeakMap,nl=new WeakMap,Mn=new WeakMap,Lo=new WeakMap,Zo=new WeakSet,Ry=function(){var n;const r=((n=M(this,Mn))==null?void 0:n.state)??nz();je(this,nl,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Gj=function(r){Ar.batch(()=>{var n,s,i,o,a,l,c,u;if(M(this,Lo)&&this.hasListeners()){const h=M(this,nl).variables,f=M(this,nl).context;(r==null?void 0:r.type)==="success"?((s=(n=M(this,Lo)).onSuccess)==null||s.call(n,r.data,h,f),(o=(i=M(this,Lo)).onSettled)==null||o.call(i,r.data,null,h,f)):(r==null?void 0:r.type)==="error"&&((l=(a=M(this,Lo)).onError)==null||l.call(a,r.error,h,f),(u=(c=M(this,Lo)).onSettled)==null||u.call(c,void 0,r.error,h,f))}this.listeners.forEach(h=>{h(M(this,nl))})})},xM),iz=v.createContext(void 0),fa=e=>{const t=v.useContext(iz);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Are=({client:e,children:t})=>(v.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),g.jsx(iz.Provider,{value:e,children:t})),oz=v.createContext(!1),Ore=()=>v.useContext(oz);oz.Provider;function Pre(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Rre=v.createContext(Pre()),Ire=()=>v.useContext(Rre),Dre=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Lre=e=>{v.useEffect(()=>{e.clearReset()},[e])},Mre=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||J6(r,[e.error,n])),zre=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Fre=(e,t)=>e.isLoading&&e.isFetching&&!t,$re=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,YO=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Ure(e,t,r){var h,f,p,y,m;const n=Ore(),s=Ire(),i=fa(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",zre(o),Dre(o,s),Lre(s);const a=!i.getQueryCache().get(o.queryHash),[l]=v.useState(()=>new t(i,o)),c=l.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(b=>{const x=u?l.subscribe(Ar.batchCalls(b)):_n;return l.updateResult(),x},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),v.useEffect(()=>{l.setOptions(o)},[o,l]),$re(o,c))throw YO(o,l,s);if(Mre({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((y=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||y.call(p,o,c),o.experimental_prefetchInRender&&!$c&&Fre(c,n)){const b=a?YO(o,l,s):(m=i.getQueryCache().get(o.queryHash))==null?void 0:m.promise;b==null||b.catch(_n).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function It(e,t){return Ure(e,Sre)}function tr(e,t){const r=fa(),[n]=v.useState(()=>new Tre(r,e));v.useEffect(()=>{n.setOptions(e)},[n,e]);const s=v.useSyncExternalStore(v.useCallback(o=>n.subscribe(Ar.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=v.useCallback((o,a)=>{n.mutate(o,a).catch(_n)},[n]);if(s.error&&J6(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var qre={},Bre=Object.defineProperty,Vre=(e,t,r)=>t in e?Bre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xe=(e,t,r)=>Vre(e,typeof t!="symbol"?t+"":t,r),gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ki(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Wre(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var az={exports:{}},mf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JO;function Hre(){if(JO)return mf;JO=1;var e=ae,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},f=null,p=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)n.call(l,u)&&!i.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:t,type:a,key:f,ref:p,props:h,_owner:s.current}}return mf.Fragment=r,mf.jsx=o,mf.jsxs=o,mf}az.exports=Hre();var d=az.exports;function XO(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function lz(...e){return t=>{let r=!1;const n=e.map(s=>{const i=XO(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():XO(e[s],null)}}}}function Hn(...e){return v.useCallback(lz(...e),e)}function Op(e){const t=Zre(e),r=v.forwardRef((n,s)=>{const{children:i,...o}=n,a=v.Children.toArray(i),l=a.find(Yre);if(l){const c=l.props.children,u=a.map(h=>h===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:h);return d.jsx(t,{...o,ref:s,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return d.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var Kre=Op("Slot");function Zre(e){const t=v.forwardRef((r,n)=>{const{children:s,...i}=r;if(v.isValidElement(s)){const o=Xre(s),a=Jre(i,s.props);return s.type!==v.Fragment&&(a.ref=n?lz(n,o):o),v.cloneElement(s,a)}return v.Children.count(s)>1?v.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var cz=Symbol("radix.slottable");function Gre(e){const t=({children:r})=>d.jsx(d.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=cz,t}function Yre(e){return v.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===cz}function Jre(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...o)=>{const a=i(...o);return s(...o),a}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Xre(e){var t,r;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function uz(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=uz(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function at(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=uz(e))&&(n&&(n+=" "),n+=t);return n}const QO=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,eP=at,Jb=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return eP(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(c=>{const u=r==null?void 0:r[c],h=i==null?void 0:i[c];if(u===null)return null;const f=QO(u)||QO(h);return s[c][f]}),a=r&&Object.entries(r).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(y=>{let[m,b]=y;return Array.isArray(b)?b.includes({...i,...a}[m]):{...i,...a}[m]===b})?[...c,h,f]:c},[]);return eP(e,o,l,r==null?void 0:r.class,r==null?void 0:r.className)},Qre=Jb("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ct=v.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const o=n?Kre:"button";return d.jsx(o,{className:Je(Qre({variant:t,size:r,className:e})),ref:i,...s})});ct.displayName="Button";function ene(e,t){const r=v.createContext(t),n=i=>{const{children:o,...a}=i,l=v.useMemo(()=>a,Object.values(a));return d.jsx(r.Provider,{value:l,children:o})};n.displayName=e+"Provider";function s(i){const o=v.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function Th(e,t=[]){let r=[];function n(i,o){const a=v.createContext(o),l=r.length;r=[...r,o];const c=h=>{var f;const{scope:p,children:y,...m}=h,b=((f=p==null?void 0:p[e])==null?void 0:f[l])||a,x=v.useMemo(()=>m,Object.values(m));return d.jsx(b.Provider,{value:x,children:y})};c.displayName=i+"Provider";function u(h,f){var p;const y=((p=f==null?void 0:f[e])==null?void 0:p[l])||a,m=v.useContext(y);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=r.map(o=>v.createContext(o));return function(o){const a=(o==null?void 0:o[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return s.scopeName=e,[n,tne(s,...t)]}function tne(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const i=n.reduce((o,{useScope:a,scopeName:l})=>{const c=a(s)[`__scope${l}`];return{...o,...c}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function Ir(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}var Zd=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},rne=_M[" useId ".trim().toString()]||(()=>{}),nne=0;function sp(e){const[t,r]=v.useState(rne());return Zd(()=>{r(n=>n??String(nne++))},[e]),t?`radix-${t}`:""}var sne=_M[" useInsertionEffect ".trim().toString()]||Zd;function Xb({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,o]=ine({defaultProp:t,onChange:r}),a=e!==void 0,l=a?e:s;{const u=v.useRef(e!==void 0);v.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}const c=v.useCallback(u=>{var h;if(a){const f=one(u)?u(e):u;f!==e&&((h=o.current)==null||h.call(o,f))}else i(u)},[a,e,i,o]);return[l,c]}function ine({defaultProp:e,onChange:t}){const[r,n]=v.useState(e),s=v.useRef(r),i=v.useRef(t);return sne(()=>{i.current=t},[t]),v.useEffect(()=>{var o;s.current!==r&&((o=i.current)==null||o.call(i,r),s.current=r)},[r,s]),[r,n,i]}function one(e){return typeof e=="function"}var ane=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vr=ane.reduce((e,t)=>{const r=Op(`Primitive.${t}`),n=v.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(l,{...a,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function lne(e,t){e&&ro.flushSync(()=>e.dispatchEvent(t))}function Gd(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function cne(e,t=globalThis==null?void 0:globalThis.document){const r=Gd(e);v.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var une="DismissableLayer",Yj="dismissableLayer.update",dne="dismissableLayer.pointerDownOutside",hne="dismissableLayer.focusOutside",tP,dz=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hz=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=e,c=v.useContext(dz),[u,h]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=v.useState({}),y=Hn(t,C=>h(C)),m=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=m.indexOf(b),w=u?m.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,j=w>=x,k=mne(C=>{const E=C.target,T=[...c.branches].some(P=>P.contains(E));!j||T||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),N=gne(C=>{const E=C.target;[...c.branches].some(T=>T.contains(E))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return cne(C=>{w===c.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),v.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(tP=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),rP(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=tP)}},[u,f,r,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),rP())},[u,c]),v.useEffect(()=>{const C=()=>p({});return document.addEventListener(Yj,C),()=>document.removeEventListener(Yj,C)},[]),d.jsx(Vr.div,{...l,ref:y,style:{pointerEvents:_?j?"auto":"none":void 0,...e.style},onFocusCapture:Ir(e.onFocusCapture,N.onFocusCapture),onBlurCapture:Ir(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Ir(e.onPointerDownCapture,k.onPointerDownCapture)})});hz.displayName=une;var fne="DismissableLayerBranch",pne=v.forwardRef((e,t)=>{const r=v.useContext(dz),n=v.useRef(null),s=Hn(t,n);return v.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),d.jsx(Vr.div,{...e,ref:s})});pne.displayName=fne;function mne(e,t=globalThis==null?void 0:globalThis.document){const r=Gd(e),n=v.useRef(!1),s=v.useRef(()=>{});return v.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){fz(dne,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function gne(e,t=globalThis==null?void 0:globalThis.document){const r=Gd(e),n=v.useRef(!1);return v.useEffect(()=>{const s=i=>{i.target&&!n.current&&fz(hne,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function rP(){const e=new CustomEvent(Yj);document.dispatchEvent(e)}function fz(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?lne(s,i):s.dispatchEvent(i)}var T0="focusScope.autoFocusOnMount",A0="focusScope.autoFocusOnUnmount",nP={bubbles:!1,cancelable:!0},yne="FocusScope",pz=v.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[a,l]=v.useState(null),c=Gd(s),u=Gd(i),h=v.useRef(null),f=Hn(t,m=>l(m)),p=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(n){let m=function(_){if(p.paused||!a)return;const j=_.target;a.contains(j)?h.current=j:Ma(h.current,{select:!0})},b=function(_){if(p.paused||!a)return;const j=_.relatedTarget;j!==null&&(a.contains(j)||Ma(h.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const j of _)j.removedNodes.length>0&&Ma(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),w.disconnect()}}},[n,a,p.paused]),v.useEffect(()=>{if(a){iP.add(p);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(T0,nP);a.addEventListener(T0,c),a.dispatchEvent(b),b.defaultPrevented||(vne(jne(mz(a)),{select:!0}),document.activeElement===m&&Ma(a))}return()=>{a.removeEventListener(T0,c),setTimeout(()=>{const b=new CustomEvent(A0,nP);a.addEventListener(A0,u),a.dispatchEvent(b),b.defaultPrevented||Ma(m??document.body,{select:!0}),a.removeEventListener(A0,u),iP.remove(p)},0)}}},[a,c,u,p]);const y=v.useCallback(m=>{if(!r&&!n||p.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(b&&x){const w=m.currentTarget,[_,j]=bne(w);_&&j?!m.shiftKey&&x===j?(m.preventDefault(),r&&Ma(_,{select:!0})):m.shiftKey&&x===_&&(m.preventDefault(),r&&Ma(j,{select:!0})):x===w&&m.preventDefault()}},[r,n,p.paused]);return d.jsx(Vr.div,{tabIndex:-1,...o,ref:f,onKeyDown:y})});pz.displayName=yne;function vne(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ma(n,{select:t}),document.activeElement!==r)return}function bne(e){const t=mz(e),r=sP(t,e),n=sP(t.reverse(),e);return[r,n]}function mz(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function sP(e,t){for(const r of e)if(!xne(r,{upTo:t}))return r}function xne(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function wne(e){return e instanceof HTMLInputElement&&"select"in e}function Ma(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&wne(e)&&t&&e.select()}}var iP=_ne();function _ne(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=oP(e,t),e.unshift(t)},remove(t){var r;e=oP(e,t),(r=e[0])==null||r.resume()}}}function oP(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function jne(e){return e.filter(t=>t.tagName!=="A")}var kne="Portal",gz=v.forwardRef((e,t)=>{var r;const{container:n,...s}=e,[i,o]=v.useState(!1);Zd(()=>o(!0),[]);const a=n||i&&((r=globalThis==null?void 0:globalThis.document)==null?void 0:r.body);return a?wM.createPortal(d.jsx(Vr.div,{...s,ref:t}),a):null});gz.displayName=kne;function Nne(e,t){return v.useReducer((r,n)=>t[r][n]??r,e)}var Nm=e=>{const{present:t,children:r}=e,n=Sne(t),s=typeof r=="function"?r({present:n.isPresent}):v.Children.only(r),i=Hn(n.ref,Ene(s));return typeof r=="function"||n.isPresent?v.cloneElement(s,{ref:i}):null};Nm.displayName="Presence";function Sne(e){const[t,r]=v.useState(),n=v.useRef(null),s=v.useRef(e),i=v.useRef("none"),o=e?"mounted":"unmounted",[a,l]=Nne(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=Rg(n.current);i.current=a==="mounted"?c:"none"},[a]),Zd(()=>{const c=n.current,u=s.current;if(u!==e){const h=i.current,f=Rg(c);e?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),Zd(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,h=p=>{const y=Rg(n.current).includes(CSS.escape(p.animationName));if(p.target===t&&y&&(l("ANIMATION_END"),!s.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},f=p=>{p.target===t&&(i.current=Rg(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function Rg(e){return(e==null?void 0:e.animationName)||"none"}function Ene(e){var t,r;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var O0=0;function Cne(){v.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??aP()),document.body.insertAdjacentElement("beforeend",e[1]??aP()),O0++,()=>{O0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),O0--}},[])}function aP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var cn=function(){return cn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},cn.apply(this,arguments)};function vE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function yz(e,t,r){for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var ip="right-scroll-bar-position",op="width-before-scroll-bar",Tne="with-scroll-bars-hidden",Ane="--removed-body-scroll-bar-size";function P0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function One(e,t){var r=v.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var Pne=typeof window<"u"?v.useLayoutEffect:v.useEffect,lP=new WeakMap;function vz(e,t){var r=One(null,function(n){return e.forEach(function(s){return P0(s,n)})});return Pne(function(){var n=lP.get(r);if(n){var s=new Set(n),i=new Set(e),o=r.current;s.forEach(function(a){i.has(a)||P0(a,null)}),i.forEach(function(a){s.has(a)||P0(a,o)})}lP.set(r,e)},[e]),r}function Rne(e){return e}function Ine(e,t){t===void 0&&(t=Rne);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(a){return i(a)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(i),o=r}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),r}}}};return s}function bz(e){e===void 0&&(e={});var t=Ine(null);return t.options=cn({async:!0,ssr:!1},e),t}var xz=function(e){var t=e.sideCar,r=vE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return v.createElement(n,cn({},r))};xz.isSideCarExport=!0;function wz(e,t){return e.useMedium(t),xz}var _z=bz(),R0=function(){},Qb=v.forwardRef(function(e,t){var r=v.useRef(null),n=v.useState({onScrollCapture:R0,onWheelCapture:R0,onTouchMoveCapture:R0}),s=n[0],i=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noRelative,y=e.noIsolation,m=e.inert,b=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,_=e.gapMode,j=vE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,N=vz([r,t]),C=cn(cn({},j),s);return v.createElement(v.Fragment,null,u&&v.createElement(k,{sideCar:_z,removeScrollBar:c,shards:h,noRelative:p,noIsolation:y,inert:m,setCallbacks:i,allowPinchZoom:!!b,lockRef:r,gapMode:_}),o?v.cloneElement(v.Children.only(a),cn(cn({},C),{ref:N})):v.createElement(w,cn({},C,{className:l,ref:N}),a))});Qb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qb.classNames={fullWidth:op,zeroRight:ip};var Dne=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Lne(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Dne();return t&&e.setAttribute("nonce",t),e}function Mne(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function zne(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Fne=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Lne())&&(Mne(t,r),zne(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$ne=function(){var e=Fne();return function(t,r){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},bE=function(){var e=$ne(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},Une={left:0,top:0,right:0,gap:0},I0=function(e){return parseInt(e||"",10)||0},qne=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[I0(r),I0(n),I0(s)]},Bne=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Une;var t=qne(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Vne=bE(),vd="data-scroll-locked",Wne=function(e,t,r,n){var s=e.left,i=e.top,o=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Tne,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(vd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ip,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(op,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(ip," .").concat(ip,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(op," .").concat(op,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(vd,`] {
    `).concat(Ane,": ").concat(a,`px;
  }
`)},cP=function(){var e=parseInt(document.body.getAttribute(vd)||"0",10);return isFinite(e)?e:0},Hne=function(){v.useEffect(function(){return document.body.setAttribute(vd,(cP()+1).toString()),function(){var e=cP()-1;e<=0?document.body.removeAttribute(vd):document.body.setAttribute(vd,e.toString())}},[])},jz=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;Hne();var i=v.useMemo(function(){return Bne(s)},[s]);return v.createElement(Vne,{styles:Wne(i,!t,s,r?"":"!important")})},Jj=!1;if(typeof window<"u")try{var Ig=Object.defineProperty({},"passive",{get:function(){return Jj=!0,!0}});window.addEventListener("test",Ig,Ig),window.removeEventListener("test",Ig,Ig)}catch{Jj=!1}var Tu=Jj?{passive:!1}:!1,Kne=function(e){return e.tagName==="TEXTAREA"},kz=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Kne(e)&&r[t]==="visible")},Zne=function(e){return kz(e,"overflowY")},Gne=function(e){return kz(e,"overflowX")},uP=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Nz(e,n);if(s){var i=Sz(e,n),o=i[1],a=i[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Yne=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Jne=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Nz=function(e,t){return e==="v"?Zne(t):Gne(t)},Sz=function(e,t){return e==="v"?Yne(t):Jne(t)},Xne=function(e,t){return e==="h"&&t==="rtl"?-1:1},Qne=function(e,t,r,n,s){var i=Xne(e,window.getComputedStyle(t).direction),o=i*n,a=r.target,l=t.contains(a),c=!1,u=o>0,h=0,f=0;do{if(!a)break;var p=Sz(e,a),y=p[0],m=p[1],b=p[2],x=m-b-i*y;(y||x)&&Nz(e,a)&&(h+=x,f+=y);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Dg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},dP=function(e){return[e.deltaX,e.deltaY]},hP=function(e){return e&&"current"in e?e.current:e},ese=function(e,t){return e[0]===t[0]&&e[1]===t[1]},tse=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},rse=0,Au=[];function nse(e){var t=v.useRef([]),r=v.useRef([0,0]),n=v.useRef(),s=v.useState(rse++)[0],i=v.useState(bE)[0],o=v.useRef(e);v.useEffect(function(){o.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=yz([e.lockRef.current],(e.shards||[]).map(hP)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=v.useCallback(function(m,b){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var x=Dg(m),w=r.current,_="deltaX"in m?m.deltaX:w[0]-x[0],j="deltaY"in m?m.deltaY:w[1]-x[1],k,N=m.target,C=Math.abs(_)>Math.abs(j)?"h":"v";if("touches"in m&&C==="h"&&N.type==="range")return!1;var E=uP(C,N);if(!E)return!0;if(E?k=C:(k=C==="v"?"h":"v",E=uP(C,N)),!E)return!1;if(!n.current&&"changedTouches"in m&&(_||j)&&(n.current=k),!k)return!0;var T=n.current||k;return Qne(T,b,m,T==="h"?_:j)},[]),l=v.useCallback(function(m){var b=m;if(!(!Au.length||Au[Au.length-1]!==i)){var x="deltaY"in b?dP(b):Dg(b),w=t.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&ese(k.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(hP).filter(Boolean).filter(function(k){return k.contains(b.target)}),j=_.length>0?a(b,_[0]):!o.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),c=v.useCallback(function(m,b,x,w){var _={name:m,delta:b,target:x,should:w,shadowParent:sse(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(j){return j!==_})},1)},[]),u=v.useCallback(function(m){r.current=Dg(m),n.current=void 0},[]),h=v.useCallback(function(m){c(m.type,dP(m),m.target,a(m,e.lockRef.current))},[]),f=v.useCallback(function(m){c(m.type,Dg(m),m.target,a(m,e.lockRef.current))},[]);v.useEffect(function(){return Au.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Tu),document.addEventListener("touchmove",l,Tu),document.addEventListener("touchstart",u,Tu),function(){Au=Au.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,Tu),document.removeEventListener("touchmove",l,Tu),document.removeEventListener("touchstart",u,Tu)}},[]);var p=e.removeScrollBar,y=e.inert;return v.createElement(v.Fragment,null,y?v.createElement(i,{styles:tse(s)}):null,p?v.createElement(jz,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function sse(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ise=wz(_z,nse);var Ez=v.forwardRef(function(e,t){return v.createElement(Qb,cn({},e,{ref:t,sideCar:ise}))});Ez.classNames=Qb.classNames;var ose=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ou=new WeakMap,Lg=new WeakMap,Mg={},D0=0,Cz=function(e){return e&&(e.host||Cz(e.parentNode))},ase=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Cz(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},lse=function(e,t,r,n){var s=ase(t,Array.isArray(e)?e:[e]);Mg[r]||(Mg[r]=new WeakMap);var i=Mg[r],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(n),y=p!==null&&p!=="false",m=(Ou.get(f)||0)+1,b=(i.get(f)||0)+1;Ou.set(f,m),i.set(f,b),o.push(f),m===1&&y&&Lg.set(f,!0),b===1&&f.setAttribute(r,"true"),y||f.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return u(t),a.clear(),D0++,function(){o.forEach(function(h){var f=Ou.get(h)-1,p=i.get(h)-1;Ou.set(h,f),i.set(h,p),f||(Lg.has(h)||h.removeAttribute(n),Lg.delete(h)),p||h.removeAttribute(r)}),D0--,D0||(Ou=new WeakMap,Ou=new WeakMap,Lg=new WeakMap,Mg={})}},Tz=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=ose(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),lse(n,s,r,"aria-hidden")):function(){return null}},ex="Dialog",[Az,Oz]=Th(ex),[cse,Ni]=Az(ex),Pz=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,a=v.useRef(null),l=v.useRef(null),[c,u]=Xb({prop:n,defaultProp:s??!1,onChange:i,caller:ex});return d.jsx(cse,{scope:t,triggerRef:a,contentRef:l,contentId:sp(),titleId:sp(),descriptionId:sp(),open:c,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};Pz.displayName=ex;var Rz="DialogTrigger",Iz=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ni(Rz,r),i=Hn(t,s.triggerRef);return d.jsx(Vr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_E(s.open),...n,ref:i,onClick:Ir(e.onClick,s.onOpenToggle)})});Iz.displayName=Rz;var xE="DialogPortal",[use,Dz]=Az(xE,{forceMount:void 0}),Lz=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=Ni(xE,t);return d.jsx(use,{scope:t,forceMount:r,children:v.Children.map(n,o=>d.jsx(Nm,{present:r||i.open,children:d.jsx(gz,{asChild:!0,container:s,children:o})}))})};Lz.displayName=xE;var cv="DialogOverlay",Mz=v.forwardRef((e,t)=>{const r=Dz(cv,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Ni(cv,e.__scopeDialog);return i.modal?d.jsx(Nm,{present:n||i.open,children:d.jsx(hse,{...s,ref:t})}):null});Mz.displayName=cv;var dse=Op("DialogOverlay.RemoveScroll"),hse=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ni(cv,r);return d.jsx(Ez,{as:dse,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx(Vr.div,{"data-state":_E(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),qc="DialogContent",zz=v.forwardRef((e,t)=>{const r=Dz(qc,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Ni(qc,e.__scopeDialog);return d.jsx(Nm,{present:n||i.open,children:i.modal?d.jsx(fse,{...s,ref:t}):d.jsx(pse,{...s,ref:t})})});zz.displayName=qc;var fse=v.forwardRef((e,t)=>{const r=Ni(qc,e.__scopeDialog),n=v.useRef(null),s=Hn(t,r.contentRef,n);return v.useEffect(()=>{const i=n.current;if(i)return Tz(i)},[]),d.jsx(Fz,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ir(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ir(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Ir(e.onFocusOutside,i=>i.preventDefault())})}),pse=v.forwardRef((e,t)=>{const r=Ni(qc,e.__scopeDialog),n=v.useRef(!1),s=v.useRef(!1);return d.jsx(Fz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var o,a;(o=e.onInteractOutside)==null||o.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;(a=r.triggerRef.current)!=null&&a.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Fz=v.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,a=Ni(qc,r),l=v.useRef(null),c=Hn(t,l);return Cne(),d.jsxs(d.Fragment,{children:[d.jsx(pz,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(hz,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":_E(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(gse,{titleId:a.titleId}),d.jsx(vse,{contentRef:l,descriptionId:a.descriptionId})]})]})}),wE="DialogTitle",$z=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ni(wE,r);return d.jsx(Vr.h2,{id:s.titleId,...n,ref:t})});$z.displayName=wE;var Uz="DialogDescription",qz=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ni(Uz,r);return d.jsx(Vr.p,{id:s.descriptionId,...n,ref:t})});qz.displayName=Uz;var Bz="DialogClose",Vz=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ni(Bz,r);return d.jsx(Vr.button,{type:"button",...n,ref:t,onClick:Ir(e.onClick,()=>s.onOpenChange(!1))})});Vz.displayName=Bz;function _E(e){return e?"open":"closed"}var Wz="DialogTitleWarning",[mse,Hz]=ene(Wz,{contentName:qc,titleName:wE,docsSlug:"dialog"}),gse=({titleId:e})=>{const t=Hz(Wz),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},yse="DialogDescriptionWarning",vse=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Hz(yse).contentName}}.`;return v.useEffect(()=>{var n;const s=(n=e.current)==null?void 0:n.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},bse=Pz,Kz=Iz,Zz=Lz,jE=Mz,kE=zz,NE=$z,SE=qz,EE=Vz,xse="AlertDialog",[wse,Lqe]=Th(xse,[Oz]),Nl=Oz(),_se="AlertDialogTrigger",jse=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Nl(r);return d.jsx(Kz,{...s,...n,ref:t})});jse.displayName=_se;var kse="AlertDialogPortal",Gz=e=>{const{__scopeAlertDialog:t,...r}=e,n=Nl(t);return d.jsx(Zz,{...n,...r})};Gz.displayName=kse;var Nse="AlertDialogOverlay",Yz=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Nl(r);return d.jsx(jE,{...s,...n,ref:t})});Yz.displayName=Nse;var bd="AlertDialogContent",[Sse,Ese]=wse(bd),Cse=Gre("AlertDialogContent"),Jz=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,i=Nl(r),o=v.useRef(null),a=Hn(t,o),l=v.useRef(null);return d.jsx(mse,{contentName:bd,titleName:Xz,docsSlug:"alert-dialog",children:d.jsx(Sse,{scope:r,cancelRef:l,children:d.jsxs(kE,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:Ir(s.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[d.jsx(Cse,{children:n}),d.jsx(Ase,{contentRef:o})]})})})});Jz.displayName=bd;var Xz="AlertDialogTitle",Qz=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Nl(r);return d.jsx(NE,{...s,...n,ref:t})});Qz.displayName=Xz;var eF="AlertDialogDescription",tF=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Nl(r);return d.jsx(SE,{...s,...n,ref:t})});tF.displayName=eF;var Tse="AlertDialogAction",rF=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Nl(r);return d.jsx(EE,{...s,...n,ref:t})});rF.displayName=Tse;var nF="AlertDialogCancel",sF=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=Ese(nF,r),i=Nl(r),o=Hn(t,s);return d.jsx(EE,{...i,...n,ref:o})});sF.displayName=nF;var Ase=({contentRef:e})=>{const t=`\`${bd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${bd}\` by passing a \`${eF}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${bd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Ose=Gz,iF=Yz,oF=Jz,aF=rF,lF=sF,cF=Qz,uF=tF;const Pse=Ose,dF=v.forwardRef(({className:e,...t},r)=>d.jsx(iF,{className:Je("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));dF.displayName=iF.displayName;const Rse=v.forwardRef(({className:e,...t},r)=>d.jsxs(Pse,{children:[d.jsx(dF,{}),d.jsx(oF,{ref:r,className:Je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Rse.displayName=oF.displayName;const Ise=v.forwardRef(({className:e,...t},r)=>d.jsx(cF,{ref:r,className:Je("text-lg font-semibold",e),...t}));Ise.displayName=cF.displayName;const Dse=v.forwardRef(({className:e,...t},r)=>d.jsx(uF,{ref:r,className:Je("text-sm text-muted-foreground",e),...t}));Dse.displayName=uF.displayName;const Lse=v.forwardRef(({className:e,...t},r)=>d.jsx(aF,{ref:r,className:Je("inline-flex h-10 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground ring-offset-background transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Lse.displayName=aF.displayName;const Mse=v.forwardRef(({className:e,...t},r)=>d.jsx(lF,{ref:r,className:Je("inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500","sm:mt-0",e),...t}));Mse.displayName=lF.displayName;const zse=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>Ah).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class CE extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Fse extends CE{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class fP extends CE{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class pP extends CE{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Xj;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Xj||(Xj={}));var $se=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class Use{constructor(t,{headers:r={},customFetch:n,region:s=Xj.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=zse(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return $se(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(m=>{throw new Fse(m)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new fP(h);if(!h.ok)throw new pP(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield h.json():p==="application/octet-stream"?y=yield h.blob():p==="text/event-stream"?y=h:p==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof pP||s instanceof fP?s.context:void 0}}})}}var Un={},TE={},tx={},Sm={},rx={},nx={},qse=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yd=qse();const Bse=Yd.fetch,hF=Yd.fetch.bind(Yd),fF=Yd.Headers,Vse=Yd.Request,Wse=Yd.Response,Ah=Object.freeze(Object.defineProperty({__proto__:null,Headers:fF,Request:Vse,Response:Wse,default:hF,fetch:Bse},Symbol.toStringTag,{value:"Module"})),Hse=Wre(Ah);var sx={};Object.defineProperty(sx,"__esModule",{value:!0});let Kse=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};sx.default=Kse;var pF=gr&&gr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nx,"__esModule",{value:!0});const Zse=pF(Hse),Gse=pF(sx);let Yse=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Zse.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,o,a,l;let c=null,u=null,h=null,f=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text")?u=b:u=JSON.parse(b))}const y=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&m&&m.length>1&&(h=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await s.text();try{c=JSON.parse(y),Array.isArray(c)&&s.status===404&&(u=[],c=null,f=200,p="OK")}catch{s.status===404&&y===""?(f=204,p="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows")&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new Gse.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(n=n.catch(s=>{var i,o,a;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(a=s==null?void 0:s.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};nx.default=Yse;var Jse=gr&&gr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rx,"__esModule",{value:!0});const Xse=Jse(nx);let Qse=class extends Xse.default{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};rx.default=Qse;var eie=gr&&gr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sm,"__esModule",{value:!0});const tie=eie(rx);let rie=class extends tie.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Sm.default=rie;var nie=gr&&gr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tx,"__esModule",{value:!0});const gf=nie(Sm);let sie=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new gf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new gf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new gf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new gf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new gf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};tx.default=sie;var mF=gr&&gr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(TE,"__esModule",{value:!0});const iie=mF(tx),oie=mF(Sm);let aie=class gF{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new iie.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new gF(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new oie.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};TE.default=aie;var Oh=gr&&gr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Un,"__esModule",{value:!0});Un.PostgrestError=Un.PostgrestBuilder=Un.PostgrestTransformBuilder=Un.PostgrestFilterBuilder=Un.PostgrestQueryBuilder=Un.PostgrestClient=void 0;const yF=Oh(TE);Un.PostgrestClient=yF.default;const vF=Oh(tx);Un.PostgrestQueryBuilder=vF.default;const bF=Oh(Sm);Un.PostgrestFilterBuilder=bF.default;const xF=Oh(rx);Un.PostgrestTransformBuilder=xF.default;const wF=Oh(nx);Un.PostgrestBuilder=wF.default;const _F=Oh(sx);Un.PostgrestError=_F.default;var lie=Un.default={PostgrestClient:yF.default,PostgrestQueryBuilder:vF.default,PostgrestFilterBuilder:bF.default,PostgrestTransformBuilder:xF.default,PostgrestBuilder:wF.default,PostgrestError:_F.default};const{PostgrestClient:cie,PostgrestQueryBuilder:Mqe,PostgrestFilterBuilder:zqe,PostgrestTransformBuilder:Fqe,PostgrestBuilder:$qe,PostgrestError:Uqe}=lie;class uie{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const die="2.15.1",hie=`realtime-js/${die}`,fie="1.0.0",Qj=1e4,pie=1e3,mie=100;var ap;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ap||(ap={}));var Sr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Sr||(Sr={}));var ai;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ai||(ai={}));var ek;(function(e){e.websocket="websocket"})(ek||(ek={}));var hc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(hc||(hc={}));class gie{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+s));o=o+s;const l=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class jF{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(jt||(jt={}));const mP=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=yie(o,e,t,s),i),{})},yie=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?kF(i,o):tk(o)},kF=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return wie(t,r)}switch(e){case jt.bool:return vie(t);case jt.float4:case jt.float8:case jt.int2:case jt.int4:case jt.int8:case jt.numeric:case jt.oid:return bie(t);case jt.json:case jt.jsonb:return xie(t);case jt.timestamp:return _ie(t);case jt.abstime:case jt.date:case jt.daterange:case jt.int4range:case jt.int8range:case jt.money:case jt.reltime:case jt.text:case jt.time:case jt.timestamptz:case jt.timetz:case jt.tsrange:case jt.tstzrange:return tk(t);default:return tk(t)}},tk=e=>e,vie=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},bie=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},xie=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},wie=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const i=e.slice(1,r);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(o=>kF(t,o))}return e},_ie=e=>typeof e=="string"?e.replace(" ","T"):e,NF=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class L0{constructor(t,r,n={},s=Qj){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gP||(gP={}));class lp{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lp.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=lp.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=lp.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),y=u.filter(b=>p.indexOf(b.presence_ref)<0),m=h.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(a[c]=y),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(yP||(yP={}));var cp;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(cp||(cp={}));var Oo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Oo||(Oo={}));class AE{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Sr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new L0(this,ai.join,this.params,this.timeout),this.rejoinTimer=new jF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Sr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Sr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Sr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Sr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Sr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ai.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new lp(this),this.broadcastEndpointURL=NF(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Sr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[cp.PRESENCE]&&this.bindings[cp.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Oo.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Oo.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t==null||t(Oo.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,m=(p=y==null?void 0:y.length)!==null&&p!==void 0?p:0,b=[];for(let x=0;x<m;x++){const w=y[x],{filter:{event:_,schema:j,table:k,filter:N}}=w,C=f&&f[x];if(C&&C.event===_&&C.schema===j&&C.table===k&&C.filter===N)b.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=Sr.errored,t==null||t(Oo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Oo.SUBSCRIBED);return}}).receive("error",f=>{this.state=Sr.errored,t==null||t(Oo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Oo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Sr.joined&&t===cp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Sr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ai.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new L0(this,ai.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Sr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new L0(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>mie){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ai;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,y,m;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(y=f.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,y,m,b,x,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,j=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((m=r.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const _=(x=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:y,table:m,commit_timestamp:b,type:x,errors:w}=p;h=Object.assign(Object.assign({},{schema:y,table:m,commit_timestamp:b,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(p))}f.callback(h,n)})}_isClosed(){return this.state===Sr.closed}_isJoined(){return this.state===Sr.joined}_isJoining(){return this.state===Sr.joining}_isLeaving(){return this.state===Sr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&AE.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ai.close,{},t)}_onError(t){this._on(ai.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Sr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=mP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=mP(t.columns,t.old_record)),r}}const vP=()=>{},zg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},jie=[1e3,2e3,5e3,1e4],kie=1e4,Nie=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Sie{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qj,this.transport=null,this.heartbeatIntervalMs=zg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vP,this.ref=0,this.reconnectTimer=null,this.logger=vP,this.conn=null,this.sendBuffer=[],this.serializer=new gie,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Promise.resolve().then(()=>Ah).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${ek.websocket}`,this.httpEndpoint=NF(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uie.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fie}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ap.connecting:return hc.Connecting;case ap.open:return hc.Open;case ap.closing:return hc.Closing;default:return hc.Closed}}isConnected(){return this.connectionState()===hc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new AE(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(pie,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},zg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ai.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Nie],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:hie};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ai.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new jF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Qj,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:zg.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=t==null?void 0:t.reconnectAfterMs)!==null&&a!==void 0?a:u=>jie[u-1]||kie,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(u,h)=>h(JSON.stringify(u)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class OE extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Tr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Eie extends OE{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rk extends OE{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Cie=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const SF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>Ah).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Tie=()=>Cie(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>Ah)).Response:Response}),nk=e=>{if(Array.isArray(e))return e.map(r=>nk(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=nk(n)}),t},Aie=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var iu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const M0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Oie=(e,t,r)=>iu(void 0,void 0,void 0,function*(){const n=yield Tie();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new Eie(M0(s),i,o))}).catch(s=>{t(new rk(M0(s),s))}):t(new rk(M0(e),e))}),Pie=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(Aie(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Em(e,t,r,n,s,i){return iu(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,Pie(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Oie(l,a,n))})})}function uv(e,t,r,n){return iu(this,void 0,void 0,function*(){return Em(e,"GET",t,r,n)})}function Fi(e,t,r,n,s){return iu(this,void 0,void 0,function*(){return Em(e,"POST",t,n,s,r)})}function sk(e,t,r,n,s){return iu(this,void 0,void 0,function*(){return Em(e,"PUT",t,n,s,r)})}function Rie(e,t,r,n){return iu(this,void 0,void 0,function*(){return Em(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function EF(e,t,r,n,s){return iu(this,void 0,void 0,function*(){return Em(e,"DELETE",t,n,s,r)})}var bn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const Iie={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Die{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=SF(s)}uploadOrUpdate(t,r,n,s){return bn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},bP),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(t=="PUT"?sk:Fi)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Tr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return bn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:bP.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield sk(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(Tr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return bn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Fi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new OE("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(Tr(n))return{data:null,error:n};throw n}})}update(t,r,n){return bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return bn(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return bn(this,void 0,void 0,function*(){try{return{data:{path:(yield Fi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return bn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Fi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return bn(this,void 0,void 0,function*(){try{const s=yield Fi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}download(t,r){return bn(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield uv(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Tr(o))return{data:null,error:o};throw o}})}info(t){return bn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield uv(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:nk(n),error:null}}catch(n){if(Tr(n))return{data:null,error:n};throw n}})}exists(t){return bn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Rie(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Tr(n)&&n instanceof rk){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});a!==""&&s.push(a);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${l}`)}}}remove(t){return bn(this,void 0,void 0,function*(){try{return{data:yield EF(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}list(t,r,n){return bn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Iie),r),{prefix:t||""});return{data:yield Fi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}listV2(t,r){return bn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Fi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Tr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Lie="2.11.0",Mie={"X-Client-Info":`storage-js/${Lie}`};var Pu=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class zie{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Mie),r),this.fetch=SF(n)}listBuckets(){return Pu(this,void 0,void 0,function*(){try{return{data:yield uv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Tr(t))return{data:null,error:t};throw t}})}getBucket(t){return Pu(this,void 0,void 0,function*(){try{return{data:yield uv(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Pu(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Tr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Pu(this,void 0,void 0,function*(){try{return{data:yield sk(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Tr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Pu(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Pu(this,void 0,void 0,function*(){try{return{data:yield EF(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}}class Fie extends zie{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new Die(this.url,this.headers,t,this.fetch)}}const $ie="2.56.0";let zf="";typeof Deno<"u"?zf="deno":typeof document<"u"?zf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zf="react-native":zf="node";const Uie={"X-Client-Info":`supabase-js-${zf}/${$ie}`},qie={headers:Uie},Bie={schema:"public"},Vie={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wie={};var Hie=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};const Kie=e=>{let t;return e?t=e:typeof fetch>"u"?t=hF:t=fetch,(...r)=>t(...r)},Zie=()=>typeof Headers>"u"?fF:Headers,Gie=(e,t,r)=>{const n=Kie(r),s=Zie();return(i,o)=>Hie(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var Yie=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};function Jie(e){return e.endsWith("/")?e:e+"/"}function Xie(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Yie(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const CF="2.71.1",Vu=30*1e3,ik=3,z0=ik*Vu,Qie="http://localhost:9999",eoe="supabase.auth.token",toe={"X-Client-Info":`gotrue-js/${CF}`},ok="X-Supabase-Api-Version",TF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},roe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,noe=10*60*1e3;class PE extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ke(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class soe extends PE{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function ioe(e){return Ke(e)&&e.name==="AuthApiError"}class AF extends PE{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Sl extends PE{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class za extends Sl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ooe(e){return Ke(e)&&e.name==="AuthSessionMissingError"}class Fg extends Sl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $g extends Sl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ug extends Sl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aoe(e){return Ke(e)&&e.name==="AuthImplicitGrantRedirectError"}class xP extends Sl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ak extends Sl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function F0(e){return Ke(e)&&e.name==="AuthRetryableFetchError"}class wP extends Sl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class lk extends Sl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const dv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_P=` 	
\r=`.split(""),loe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_P.length;t+=1)e[_P[t].charCodeAt(0)]=-2;for(let t=0;t<dv.length;t+=1)e[dv[t].charCodeAt(0)]=t;return e})();function jP(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(dv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(dv[n]),t.queuedBits-=6}}function OF(e,t,r){const n=loe[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function kP(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{doe(o,n,r)};for(let o=0;o<e.length;o+=1)OF(e.charCodeAt(o),s,i);return t.join("")}function coe(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function uoe(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}coe(n,t)}}function doe(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function hoe(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)OF(e.charCodeAt(s),r,n);return new Uint8Array(t)}function foe(e){const t=[];return uoe(e,r=>t.push(r)),new Uint8Array(t)}function poe(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>jP(s,r,n)),jP(null,r,n),t.join("")}function moe(e){return Math.round(Date.now()/1e3)+e}function goe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Qs=()=>typeof window<"u"&&typeof document<"u",Ql={tested:!1,writable:!1},PF=()=>{if(!Qs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ql.tested)return Ql.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ql.tested=!0,Ql.writable=!0}catch{Ql.tested=!0,Ql.writable=!1}return Ql.writable};function yoe(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,s)=>{t[s]=n})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const RF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Promise.resolve().then(()=>Ah).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},voe=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Wu=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ec=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ca=async(e,t)=>{await e.removeItem(t)};class ix{constructor(){this.promise=new ix.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ix.promiseConstructor=Promise;function $0(e){const t=e.split(".");if(t.length!==3)throw new lk("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!roe.test(t[r]))throw new lk("JWT not in base64url format");return{header:JSON.parse(kP(t[0])),payload:JSON.parse(kP(t[1])),signature:hoe(t[2]),raw:{header:t[0],payload:t[1]}}}async function boe(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function xoe(e,t){return new Promise((r,n)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await e(s);if(!t(s,null,i)){r(i);return}}catch(i){if(!t(s,i)){n(i);return}}})()})}function woe(e){return("0"+e.toString(16)).substr(-2)}function _oe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let n="";for(let s=0;s<56;s++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,woe).join("")}async function joe(e){const t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(s=>String.fromCharCode(s)).join("")}async function koe(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await joe(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ru(e,t,r=!1){const n=_oe();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Wu(e,`${t}-code-verifier`,s);const i=await koe(n);return[i,n===i?"plain":"s256"]}const Noe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Soe(e){const t=e.headers.get(ok);if(!t||!t.match(Noe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Eoe(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Coe(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Toe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Iu(e){if(!Toe.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function U0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function NP(e){return JSON.parse(JSON.stringify(e))}var Aoe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const sc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ooe=[502,503,504];async function SP(e){var t;if(!voe(e))throw new ak(sc(e),0);if(Ooe.includes(e.status))throw new ak(sc(e),e.status);let r;try{r=await e.json()}catch(i){throw new AF(sc(i),i)}let n;const s=Soe(e);if(s&&s.getTime()>=TF["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new wP(sc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new za}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new wP(sc(r),e.status,r.weak_password.reasons);throw new soe(sc(r),e.status||500,n)}const Poe=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function tt(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[ok]||(i[ok]=TF["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Roe(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Roe(e,t,r,n,s,i){const o=Poe(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new ak(sc(l),0)}if(a.ok||await SP(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await SP(l)}}function To(e){var t;let r=null;Moe(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=moe(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function EP(e){const t=To(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Wa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Ioe(e){return{data:e,error:null}}function Doe(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Aoe(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Loe(e){return e}function Moe(e){return e.access_token&&e.refresh_token&&e.expires_in}const q0=["global","local","others"];var zoe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Foe{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=RF(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=q0[0]){if(q0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${q0.join(", ")}`);try{return await tt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await tt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Wa})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=zoe(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await tt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Doe,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ke(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await tt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wa})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await tt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Loe});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const m=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Ke(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Iu(t);try{return await tt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wa})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Iu(t);try{return await tt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Wa})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Iu(t);try{return await tt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Wa})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Iu(t.userId);try{const{data:r,error:n}=await tt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Iu(t.userId),Iu(t.id);try{return{data:await tt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}function CP(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function $oe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Du={debug:!!(globalThis&&PF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class IF extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Uoe extends IF{}async function qoe(e,t,r){Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Du.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Uoe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Du.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}$oe();const Boe={url:Qie,storageKey:eoe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:toe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function TP(e,t,r){return await r()}const Lu={};class Pp{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Pp.nextInstanceID,Pp.nextInstanceID+=1,this.instanceID>0&&Qs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Boe),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Foe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=RF(s.fetch),this.lock=s.lock||TP,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Qs()&&!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks?this.lock=qoe:this.lock=TP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:PF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=CP(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=CP(this.memoryStorage)),Qs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Lu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Lu[this.storageKey]=Object.assign(Object.assign({},Lu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Lu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Lu[this.storageKey]=Object.assign(Object.assign({},Lu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${CF}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=yoe(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Qs()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),aoe(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ke(r)?{error:r}:{error:new AF("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:To}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Ru(this.storage,this.storageKey)),i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:To})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:To})}else throw new $g("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:EP})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:EP})}else throw new $g("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Fg}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,a,l,c,u,h,f,p;let y,m;if("message"in t)y=t.message,m=t.signature;else{const{chain:b,wallet:x,statement:w,options:_}=t;let j;if(Qs())if(typeof x=="object")j=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const k=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let C;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")C=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)C=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),m=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=N}}try{const{data:b,error:x}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:poe(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:To});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Fg}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(Ke(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await ec(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:To});if(await Ca(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Fg}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ke(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:To}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Fg}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ru(this.storage,this.storageKey));const{error:h}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new $g("You must provide either an email or phone number.")}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await tt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:To});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ru(this.storage,this.storageKey)),await tt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ioe})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new za;const{error:s}=await tt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await tt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await tt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new $g("You must provide either an email or phone number and a type")}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ec(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<z0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await ec(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=U0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(a,l,c)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,l,c))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Wa}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new za}:await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Wa})})}catch(r){if(Ke(r))return ooe(r)&&(await this._removeSession(),await Ca(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new za;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Ru(this.storage,this.storageKey));const{data:c,error:u}=await tt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Wa});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new za;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=$0(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Ke(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new za;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Qs())throw new Ug("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ug(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new xP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ug("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new xP("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new Ug("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=Vu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=f-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,u);const{data:m,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(Ke(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ec(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(ioe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Ca(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=goe(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ru(this.storage,this.storageKey,!0));try{return await tt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Ke(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await tt(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Qs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ke(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await tt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await xoe(async s=>(s>0&&await boe(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await tt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:To})),(s,i)=>{const o=200*Math.pow(2,s);return i&&F0(i)&&Date.now()+o-n<Vu})}catch(n){if(this._debug(r,"error",n),Ke(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Qs()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ec(this.storage,this.storageKey);if(s&&this.userStorage){let o=await ec(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Wu(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:U0()}else if(s&&!s.user&&!s.user){const o=await ec(this.storage,this.storageKey+"-user");o&&o!=null&&o.user?(s.user=o.user,await Ca(this.storage,this.storageKey+"-user"),await Wu(this.storage,this.storageKey,s)):s.user=U0()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<z0;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${z0}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),F0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&o!=null&&o.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new za;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ix;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new za;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Ke(i)){const o={session:null,error:i};return F0(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Wu(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=NP(s);await Wu(this.storage,this.storageKey,i)}else{const s=NP(r);await Wu(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Ca(this.storage,this.storageKey),await Ca(this.storage,this.storageKey+"-code-verifier"),await Ca(this.storage,this.storageKey+"-user"),this.userStorage&&await Ca(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qs()&&window!=null&&window.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Vu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Vu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Vu}ms, refresh threshold is ${ik} ticks`),s<=ik&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof IF)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ru(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await tt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await tt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await tt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await tt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=$0(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+noe>s)return n;const{data:i,error:o}=await tt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};n=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=$0(n);r!=null&&r.allowExpired||Eoe(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const u=Coe(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,foe(`${a}.${l}`)))throw new lk("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}Pp.nextInstanceID=0;const Voe=Pp;class Woe extends Voe{constructor(t){super(t)}}var Hoe=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,[])).next())})};class Koe{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=Jie(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Bie,realtime:Wie,auth:Object.assign(Object.assign({},Vie),{storageKey:c}),global:qie},h=Xie(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Gie(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new cie(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Fie(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Use(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Hoe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Woe({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Sie(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const DF=(e,t,r)=>new Koe(e,t,r);function Zoe(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Zoe()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Goe="https://opukvvmumyegtkukqint.supabase.co",Yoe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";DF(Goe,Yoe,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});const Joe=()=>{const[e,t]=v.useState("login"),[r,n]=v.useState(null),[s,i]=v.useState(!1),[o,a]=v.useState(""),[l,c]=v.useState(""),[u,h]=v.useState(""),[f,p]=v.useState(""),[y,m]=v.useState(""),[b,x]=v.useState(""),[w,_]=v.useState(null),j=uo(),k=(T,P="info")=>{n({text:T,type:P});const O=setTimeout(()=>n(null),6e3);return()=>clearTimeout(O)},N=async T=>{if(T.preventDefault(),!o||!l){k("Please enter both email and password","error");return}i(!0);try{const{error:P}=await ce.auth.signInWithPassword({email:o,password:l});if(P)throw P;j("/")}catch(P){const O=P instanceof Error?P.message:"Failed to sign in";k(O,"error")}finally{i(!1)}},C=async T=>{if(T.preventDefault(),f!==b){k("Passwords do not match","error");return}i(!0);try{const{error:P}=await ce.auth.signUp({email:u,password:f,options:{data:{display_name:y}}});if(P)throw P;k("Account created! Please check your email to confirm your account.","success"),t("login")}catch(P){const O=P instanceof Error?P.message:"Failed to create account";k(O,"error")}finally{i(!1)}},E=T=>{if(!T){_(null);return}let P=0;T.length>=8&&P++,/[A-Z]/.test(T)&&P++,/[a-z]/.test(T)&&P++,/[0-9]/.test(T)&&P++,/[^A-Za-z0-9]/.test(T)&&P++,T.length>=12&&P++;const O=[{text:"Weak",className:"weak"},{text:"Fair",className:"fair"},{text:"Good",className:"good"},{text:"Strong",className:"strong"},{text:"Very Strong",className:"very-strong"}],I=Math.min(P,O.length-1);_(O[I])};return d.jsx("div",{className:"auth-page",children:d.jsxs("div",{className:"auth-container",children:[d.jsxs("div",{className:"auth-header",children:[d.jsx("h1",{children:e==="login"?"Welcome Back":"Create Account"}),d.jsx("p",{children:e==="login"?"Sign in to access your account":"Join our community today"})]}),r&&d.jsx("div",{className:`message ${r.type}`,children:r.text}),d.jsxs("div",{className:"tabs",children:[d.jsx("button",{className:`tab ${e==="login"?"active":""}`,onClick:()=>t("login"),type:"button",children:"Sign In"}),d.jsx("button",{className:`tab ${e==="signup"?"active":""}`,onClick:()=>t("signup"),type:"button",children:"Create Account"})]}),e==="login"?d.jsxs("form",{className:"auth-form",onSubmit:N,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"loginEmail",children:"Email"}),d.jsx("input",{type:"email",id:"loginEmail",value:o,onChange:T=>a(T.target.value),placeholder:"Enter your email",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"loginPassword",children:"Password"}),d.jsx("input",{type:"password",id:"loginPassword",value:l,onChange:T=>c(T.target.value),placeholder:"Enter your password",required:!0,disabled:s})]}),d.jsx("button",{type:"submit",className:"btn primary",disabled:s,children:s?"Signing in...":"Sign In"}),d.jsx("div",{className:"form-footer",children:d.jsx(Rr,{to:"/forgot-password",children:"Forgot password?"})})]}):d.jsxs("form",{className:"auth-form",onSubmit:C,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupDisplayName",children:"Display Name"}),d.jsx("input",{type:"text",id:"signupDisplayName",value:y,onChange:T=>m(T.target.value),placeholder:"Enter your name",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupEmail",children:"Email"}),d.jsx("input",{type:"email",id:"signupEmail",value:u,onChange:T=>h(T.target.value),placeholder:"your.email@example.com",required:!0,disabled:s})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"signupPassword",children:"Password"}),d.jsx("input",{type:"password",id:"signupPassword",value:f,onChange:T=>{p(T.target.value),E(T.target.value)},placeholder:"Create a strong password",required:!0,disabled:s}),w&&d.jsxs("div",{className:`password-strength ${w.className}`,children:["Password strength: ",w.text]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),d.jsx("input",{type:"password",id:"confirmPassword",value:b,onChange:T=>x(T.target.value),placeholder:"Re-enter your password",required:!0,disabled:s})]}),d.jsx("button",{type:"submit",className:"btn primary",disabled:s,children:s?"Creating account...":"Create Account"})]}),d.jsx("div",{className:"auth-divider",children:d.jsx("span",{children:"or continue with"})}),d.jsxs("div",{className:"social-logins",children:[d.jsx("button",{type:"button",className:"btn social google",onClick:()=>k("Google login is not yet implemented","info"),disabled:s,children:"Google"}),d.jsx("button",{type:"button",className:"btn social github",onClick:()=>k("GitHub login is not yet implemented","info"),disabled:s,children:"GitHub"})]}),d.jsx("div",{className:"auth-footer",children:e==="login"?d.jsxs(d.Fragment,{children:["Don't have an account?"," ",d.jsx("button",{type:"button",className:"text-link",onClick:()=>t("signup"),children:"Sign up"})]}):d.jsxs(d.Fragment,{children:["Already have an account?"," ",d.jsx("button",{type:"button",className:"text-link",onClick:()=>t("login"),children:"Sign in"})]})})]})})};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LF=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qoe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eae=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>v.createElement("svg",{ref:l,...Qoe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:LF("lucide",s),...a},[...o.map(([c,u])=>v.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(eae,{ref:i,iconNode:t,className:LF(`lucide-${Xoe(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Ie("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=Ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tae=Ie("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Ie("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=Ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rae=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=Ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Ie("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nae=Ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=Ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sae=Ie("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iae=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Ie("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oae=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=Ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aae=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Ie("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lae=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Ie("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cae=Ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uae=Ie("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dae=Ie("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hae=Ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fae=Ie("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pae=Ie("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=Ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mae=Ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gae=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=Ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yae=Ie("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vae=Ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bae=Ie("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=Ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xae=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=Ie("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wae=Ie("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ae=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=Ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jae=Ie("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kae=Ie("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nae=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sae=Ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eae=Ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Cae=[{name:"Dashboard",href:"/account/admin",icon:hae},{name:"Posts",href:"/account/admin/posts",icon:aae},{name:"Media",href:"/account/admin/media",icon:Nae},{name:"Users",href:"/account/admin/users",icon:pv},{name:"Beta Applications",href:"/account/admin/beta-applications",icon:pv},{name:"Store",href:"/account/admin/store",icon:jae},{name:"Works",href:"/account/admin/works",icon:Rp},{name:"Timeline",href:"/account/admin/timeline/events",icon:zF},{name:"Settings",href:"/account/admin/settings",icon:xae}],Tae=()=>{var e,t;const[r,n]=v.useState(!1),[s,i]=v.useState(!1),o=Fs(),a=uo(),{user:l,userProfile:c}=kh();v.useEffect(()=>{i(!1)},[o]);const u=()=>{n(!r)},h=async()=>{await ce.auth.signOut(),a("/login")};return d.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200 flex",children:[d.jsx("button",{onClick:u,className:Je("fixed top-4 left-0 z-50 p-2 rounded-r-lg bg-white dark:bg-gray-800 shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300",r?"translate-x-0":"translate-x-64","lg:hidden"),"aria-label":r?"Expand sidebar":"Collapse sidebar",children:r?d.jsx(RE,{size:20}):d.jsx(rae,{size:20})}),d.jsx("aside",{className:Je("fixed top-0 left-0 z-40 h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out",r?"w-0 opacity-0":"w-64 opacity-100",s?"translate-x-0":"-translate-x-full lg:translate-x-0","lg:opacity-100"),children:d.jsxs("div",{className:"h-full flex flex-col",children:[d.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:d.jsx("h2",{className:"text-xl font-bold",children:"Admin"})}),d.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:d.jsx("ul",{className:"space-y-1",children:Cae.map(f=>d.jsx("li",{children:d.jsxs(md,{to:f.href,end:f.href==="/account/admin",className:({isActive:p})=>Je("flex items-center p-3 rounded-lg transition-colors",p?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700",r?"justify-center":"space-x-3"),children:[d.jsx(f.icon,{size:20,className:"flex-shrink-0"}),!r&&d.jsx("span",{children:f.name})]})},f.name))})}),d.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:d.jsxs("div",{className:Je("flex items-center",r?"justify-center":"justify-between"),children:[!r&&d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:((e=c==null?void 0:c.display_name)==null?void 0:e.charAt(0))||((t=l==null?void 0:l.email)==null?void 0:t.charAt(0).toUpperCase())}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium truncate max-w-[140px]",children:(c==null?void 0:c.display_name)||"Admin User"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[140px]",children:l==null?void 0:l.email})]})]}),d.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:"Sign out",children:d.jsx(gae,{size:18})})]})})]})}),d.jsx("div",{className:Je("transition-all duration-300 min-h-screen",r?"lg:ml-0":"lg:ml-64","ml-0 w-full"),children:d.jsx("div",{className:"w-full max-w-[2000px] mx-auto px-4 py-6",children:d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 md:p-6",children:d.jsx(GS,{})})})})]})},Aae=({children:e})=>{var t,r;const[n,s]=v.useState(!0),[i,o]=v.useState({isAuthenticated:!1,isAdmin:!1}),a=Fs();return v.useEffect(()=>{(async()=>{console.log("⏳ [AdminProtectedRoute] Checking session and admin status...");const{data:{session:l},error:c}=await ce.auth.getSession();if(c||!l){console.log("🔒 [AdminProtectedRoute] No authenticated session found."),o({isAuthenticated:!1,isAdmin:!1}),s(!1);return}console.log("✅ [AdminProtectedRoute] Session found. User:",l.user.email);const{data:u,error:h}=await ce.rpc("is_admin");h&&console.error("❌ [AdminProtectedRoute] Error calling is_admin RPC:",h);const f={isAuthenticated:!0,isAdmin:u===!0,user:l.user};console.log("✅ [AdminProtectedRoute] Final auth state:",f),o(f),s(!1)})()},[]),n?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto"}),d.jsx("p",{className:"mt-4",children:"Verifying Admin Privileges..."})]})}):i.isAuthenticated?i.isAdmin?d.jsx(d.Fragment,{children:e}):(console.log("❌ [AdminProtectedRoute] Access Denied. User is not an admin."),d.jsx("div",{className:"min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8 text-white",children:d.jsx("div",{className:"max-w-4xl mx-auto",children:d.jsxs("div",{className:"bg-gray-800 shadow-lg rounded-lg overflow-hidden",children:[d.jsxs("div",{className:"bg-red-600 p-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Access Denied"}),d.jsx("p",{className:"text-red-100",children:"You do not have the necessary permissions to view this page."})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsx("p",{children:"The page you are trying to access is restricted to administrators only."}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-medium text-gray-300 mb-2",children:"Your Account Details"}),d.jsxs("dl",{className:"bg-gray-700/50 rounded-lg p-4 space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"User ID"}),d.jsx("dd",{className:"font-mono",children:((t=i.user)==null?void 0:t.id)||"N/A"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"Email"}),d.jsx("dd",{children:((r=i.user)==null?void 0:r.email)||"N/A"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("dt",{className:"text-gray-400",children:"Admin Status"}),d.jsx("dd",{className:"font-semibold text-red-400",children:"Not an Admin"})]})]})]}),d.jsx("p",{children:"If you believe this is an error, please contact support."}),d.jsx("div",{className:"pt-4",children:d.jsx("a",{href:"/",className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Go to Homepage"})})]})]})})})):(console.log("🛑 [AdminProtectedRoute] Not authenticated, redirecting to login."),d.jsx(IM,{to:"/login",state:{from:a},replace:!0}))},Oae="_zoroHeader_6lzsp_2",Pae="_logo_6lzsp_16",Rae="_navbar_6lzsp_23",Iae="_navMenu_6lzsp_27",Dae="_navLink_6lzsp_39",Lae="_dropdownMenu_6lzsp_53",Mae="_dropdownMenuItem_6lzsp_73",zae="_dropdown_6lzsp_53",Fae="_headerControls_6lzsp_96",$ae="_searchForm_6lzsp_121",Uae="_themeToggle_6lzsp_165",qae="_icon_6lzsp_186",Bae="_iconSun_6lzsp_197",Vae="_iconMoon_6lzsp_203",sn={zoroHeader:Oae,logo:Pae,navbar:Rae,navMenu:Iae,navLink:Dae,dropdownMenu:Lae,dropdownMenuItem:Mae,dropdown:zae,headerControls:Fae,searchForm:$ae,themeToggle:Uae,icon:qae,iconSun:Bae,iconMoon:Vae},OP="zoro-theme",Wae=()=>{const[e,t]=v.useState(()=>{if(typeof window<"u"){const n=localStorage.getItem(OP),s=window.matchMedia("(prefers-color-scheme: dark)").matches;return n??(s?"dark":"light")}return"dark"});v.useEffect(()=>{const n=window.document.documentElement;n.setAttribute("data-theme",e),localStorage.setItem(OP,e),e==="dark"?(n.classList.add("dark"),n.classList.remove("light")):(n.classList.add("light"),n.classList.remove("dark"))},[e]);const r=()=>{t(n=>n==="dark"?"light":"dark")};return d.jsxs("button",{id:"theme-toggle",className:sn.themeToggle,"aria-label":"Toggle dark mode","aria-pressed":e==="dark"?"true":"false",title:e==="dark"?"Switch to light mode":"Switch to dark mode",onClick:r,children:[d.jsxs("svg",{className:`${sn.icon} ${sn.iconSun}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:[d.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),d.jsxs("g",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[d.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"5"}),d.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),d.jsx("line",{x1:"2",y1:"12",x2:"5",y2:"12"}),d.jsx("line",{x1:"19",y1:"12",x2:"22",y2:"12"}),d.jsx("line",{x1:"4.2",y1:"4.2",x2:"6.3",y2:"6.3"}),d.jsx("line",{x1:"17.7",y1:"17.7",x2:"19.8",y2:"19.8"}),d.jsx("line",{x1:"4.2",y1:"19.8",x2:"6.3",y2:"17.7"}),d.jsx("line",{x1:"17.7",y1:"6.3",x2:"19.8",y2:"4.2"})]})]}),d.jsx("svg",{className:`${sn.icon} ${sn.iconMoon}`,viewBox:"0 0 24 24",width:"22",height:"22","aria-hidden":"true",children:d.jsx("path",{d:`M21 14.5a9 9 0 1 1-8.5-12
                 a8 8 0 0 0 8.5 12z`,fill:"currentColor"})})]})},Hae=()=>{const[e,t]=v.useState(!1),[r,n]=v.useState(!1),[s,i]=v.useState("none"),o=uo();v.useEffect(()=>{(async()=>{var u,h;const{data:{session:f}}=await ce.auth.getSession();n(!!f),(h=(u=f==null?void 0:f.user)==null?void 0:u.user_metadata)!=null&&h.betaApplicationStatus&&i(f.user.user_metadata.betaApplicationStatus)})();const{data:c}=ce.auth.onAuthStateChange((u,h)=>{var f,p;n(!!h),(p=(f=h==null?void 0:h.user)==null?void 0:f.user_metadata)!=null&&p.betaApplicationStatus&&i(h.user.user_metadata.betaApplicationStatus)});return()=>{c.subscription.unsubscribe()}},[]);const a=async()=>{await ce.auth.signOut(),o("/")},l=[{name:"Home",path:"/"},{name:"Explore",path:"#",children:[{name:"Library",path:"/library"},{name:"Wiki",path:"/wiki"},{name:"Timelines",path:"/timelines"},{name:"Characters",path:"/characters"},{name:"Blog",path:"/blog"}]},{name:"Beta Program",path:"/beta/application"}];if(r){const c=[];c.push({name:"Store",path:"/store"}),c.push({name:"Subscriptions",path:"/subscriptions"}),s==="accepted"&&c.push({name:"Beta Portal",path:"/beta/portal"}),c.push({name:"My Account",path:"/account"}),l.push({name:"Account",path:"#",children:c}),l.push({name:"Logout",path:"#",onClick:a})}else l.push({name:"Login",path:"/login"});return d.jsxs("header",{className:sn.zoroHeader,children:[d.jsx("div",{className:sn.logo,children:d.jsx(md,{to:"/",children:d.jsx("h1",{children:"Zoroasterverse"})})}),d.jsxs("div",{className:sn.headerControls,children:[" ",d.jsxs("form",{className:sn.searchForm,children:[d.jsx("input",{type:"text",placeholder:"Search..."}),d.jsxs("button",{type:"submit",children:[d.jsx(ou,{})," "]})]}),d.jsx(Wae,{})," "]}),d.jsx("nav",{className:sn.navbar,children:d.jsx("ul",{className:sn.navMenu,children:l.map(c=>d.jsxs("li",{className:c.children?sn.dropdown:"",children:[c.onClick?d.jsx("button",{onClick:c.onClick,className:sn.navLink,children:c.name}):d.jsxs(md,{to:c.path,className:sn.navLink,children:[c.name," ",c.children?"▾":""]}),c.children&&d.jsx("ul",{className:sn.dropdownMenu,children:c.children.map(u=>d.jsx("li",{children:d.jsx(md,{to:u.path,className:sn.dropdownMenuItem,children:u.name})},u.name))})]},c.name))})})]})},Kae="_zoroFooter_8qpog_1",Zae="_footerContent_8qpog_8",Gae="_footerColumns_8qpog_13",Yae="_column_8qpog_20",Jae="_socialIcons_8qpog_50",Xae="_footerQuote_8qpog_59",Ta={zoroFooter:Kae,footerContent:Zae,footerColumns:Gae,column:Yae,socialIcons:Jae,footerQuote:Xae},Qae=()=>d.jsx("footer",{className:Ta.zoroFooter,children:d.jsxs("div",{className:Ta.footerContent,children:[d.jsxs("div",{className:Ta.footerColumns,children:[d.jsxs("div",{className:Ta.column,children:[d.jsx("h4",{children:"Zoroasterverse"}),d.jsx("p",{children:"“Truth is the architect of happiness.”"}),d.jsxs("p",{children:["© ",new Date().getFullYear()," Zoroasterverse. All rights reserved."]})]}),d.jsxs("div",{className:Ta.column,children:[d.jsx("h4",{children:"Explore"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx("a",{href:"/about",children:"About"})}),d.jsx("li",{children:d.jsx("a",{href:"/books",children:"Books"})}),d.jsx("li",{children:d.jsx("a",{href:"/collaborate",children:"Artist Collaboration"})}),d.jsx("li",{children:d.jsx("a",{href:"/contact",children:"Contact"})})]})]}),d.jsxs("div",{className:Ta.column,children:[d.jsx("h4",{children:"Connect"}),d.jsxs("ul",{className:Ta.socialIcons,children:[d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(kae,{})})}),d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(dae,{})})}),d.jsx("li",{children:d.jsx("a",{href:"#",children:d.jsx(qF,{})})})]})]})]}),d.jsx("div",{className:Ta.footerQuote,children:d.jsx("em",{children:"“Let your conscience be the altar where right intention dwells.”"})})]})}),ele=()=>d.jsxs("div",{className:"zr-root",children:[d.jsx(Hae,{}),d.jsx("main",{children:d.jsx(GS,{})}),d.jsx(Qae,{})]}),tle="_zrHero_1fsok_1",rle="_parchmentCard_1fsok_12",nle="_zrHeroContent_1fsok_70",sle="_zrTitle_1fsok_74",ile="_zrQuote_1fsok_88",ole="_zrIntro_1fsok_97",ale="_zrCta_1fsok_105",lle="_zrHeroArt_1fsok_123",cle="_videoFire_1fsok_156",ule="_prophecyMask_1fsok_168",dle="_prophecyReel_1fsok_183",hle="_prophecyReelSpinning_1fsok_189",fle="_prophecyItem_1fsok_193",ple="_englishText_1fsok_207",mle="_zrSection_1fsok_256",gle="_zrH2_1fsok_263",yle="_srOnly_1fsok_279",vle="_spinsIndicator_1fsok_286",ble="_spinDot_1fsok_295",xle="_spinDotActive_1fsok_322",ot={zrHero:tle,parchmentCard:rle,zrHeroContent:nle,zrTitle:sle,zrQuote:ile,zrIntro:ole,zrCta:ale,zrHeroArt:lle,videoFire:cle,prophecyMask:ule,prophecyReel:dle,prophecyReelSpinning:hle,prophecyItem:fle,englishText:ple,zrSection:mle,zrH2:gle,srOnly:yle,spinsIndicator:vle,spinDot:ble,spinDotActive:xle},wle=async()=>{const{data:e,error:t}=await ce.from("homepage_content").select("*");if(t)throw new Error(t.message);return e},_le=async()=>{const{data:e,error:t}=await ce.from("posts").select("id, title, slug, content, created_at").eq("status","published").order("created_at",{ascending:!1}).limit(3);if(t)throw new Error(t.message);return e},jle=async()=>{const{data:e,error:t}=await ce.from("release_items").select("*").order("created_at",{ascending:!1});if(t)throw new Error(t.message);return e},kle=({spinsLeft:e,setSpinsLeft:t})=>{const r=v.useRef(null),[n,s]=v.useState(!1),i=150,o=[{english:"Your heart is a compass that always points toward love—trust it, follow it, honor it."},{english:"You are not who you were yesterday unless you choose to be—each day offers the gift of becoming."},{english:"The friend of truth shall be the friend of my spirit, O Ahura Mazda. (Yasna 46.2)"},{english:"Every moment is sacred when approached with reverence, every task holy when performed with love."},{english:"The mind aligned with truth thinks God's thoughts after Him, sees with divine eyes, loves with cosmic heart."},{english:"May the beneficent spirit help us to speak truth and act righteously. (Yasna 47.6)"},{english:"Hope is the thing with feathers that perches in the soul and sings without words."},{english:"Self-knowledge is the beginning of wisdom, self-acceptance the foundation of growth."},{english:"Grant me, O Truth, the rewards of good thinking that bring joy and satisfaction. (Yasna 50.4)"},{english:"The sacred fire burns brightest in the heart that chooses truth over comfort. Let your conscience be the altar where right intention dwells."},{english:"Truth without compassion is cruelty; compassion without truth is sentimentality—balance both."},{english:"I praise You as the greatest and best, as the most beautiful, O Mazda Ahura. (Yasna 43.16)"},{english:"Truth is the architect of happiness, the foundation of peace, the cornerstone of wisdom. Build your life upon this rock."},{english:"The weight of moral choice is the proof of human dignity—angels don't choose, demons can't choose, but you can."},{english:"Plant seeds of hope in winter and trust them to bloom when spring returns to your life."},{english:"Appreciation is the highest form of prayer—seeing the divine in every blessing."},{english:"The future is not predetermined but is being written by every choice you make right now."},{english:"When shadows of doubt gather, kindle the inner flame of discernment. Fire purifies not by destroying, but by revealing what is true."},{english:"Begin each day as if it were your first—with wonder. End each day as if it were your last—with gratitude."},{english:"Morning brings the gift of choice renewed. Stand at the crossroads of thought and deed—which path serves the light?"},{english:"We invoke good thinking, truth, and the beneficent spirit of Ahura Mazda. (Yasna 37.4)"},{english:"Where truth flourishes, freedom follows; where freedom is genuine, truth is honored."},{english:"The divine dwells not only in temples but in every heart that welcomes it, every life that serves it."},{english:"The sacred fire asks no permission to burn, needs no fuel but truth, casts no shadow but illumination."},{english:"May we be instruments of peace, servants of truth, children of light. (Benediction)"},{english:"Let the fire within you remember the spark of dawn—every choice a new horizon to the world's unfolding. Walk in watchfulness, and the light of Good Mind will not fail you."},{english:"Devotion asks not what you can receive but what you can give, not what you deserve but what you can serve."},{english:"Freedom is not the absence of constraints but the presence of meaningful options."},{english:"Through the beneficent spirit, may we overcome all obstacles to righteousness. (Prayer)"},{english:"The light of understanding grows not by accumulating facts but by illuminating connections."},{english:"The peaceful heart creates peaceful surroundings; the harmonious soul attracts harmonious relationships."},{english:"I take refuge in good thinking, truth, and Your lordship, Mazda, from whom comes the most beneficent spirit. (Yasna 33.5)"},{english:"Rational thought and intuitive wisdom are not opposites but partners in the dance of understanding."},{english:"When you have the power to help and choose not to, you become complicit in the suffering you could have prevented."},{english:"Like a candle lights a thousand candles without diminishing, share your inner light freely with all."},{english:"You are both the author and the main character of your life story—write it well."},{english:"The good mind is not the mind that knows everything but the mind that remains open to learning."},{english:"The stranger is just a friend you haven't met yet, a teacher you haven't learned from yet, a gift you haven't unwrapped yet."},{english:"Those who seek to destroy my family and clan, Mazda, I put them in Your hands through good thinking and truth. (Yasna 48.8)"},{english:"I pray to You with outstretched hands, O Mazda, seeking Your help through the beneficent spirit. (Yasna 50.8)"},{english:"Every decision is a seed planted in the soil of time. What kind of forest are you growing?"},{english:"Devotion is gratitude in action, love expressing itself through loyal service."},{english:"The fire of truth burns away all that is false in you, leaving only what is real and precious."},{english:"The unexamined life scatters like leaves in the wind; the examined life grows deep roots in truth."},{english:"The arc of justice bends only when people like you choose to bend it—be a force for righteousness."},{english:"Choose as if your choice matters to everyone who will ever live—because it does."},{english:"When Good Mind came to me, I first learned to proclaim Your words, O Mazda. (Yasna 43.15)"},{english:"To You, the beneficent ones shall come for refuge, Mazda, not to the followers of falsehood. (Yasna 48.4)"},{english:"Understanding comes not from standing above others but from standing with them in shared humanity."},{english:"The doorway to wisdom opens inward—the journey begins when you stop looking outside and start looking within."},{english:"May we be worthy of Your friendship through righteous actions, O Mazda. (Yasna 46.6)"},{english:"This I ask You: tell me truly, Ahura—what craftsman created light and darkness? (Yasna 44.5)"},{english:"Harmony does not require uniformity—an orchestra creates beauty through coordinated differences."},{english:"May Ahura Mazda be praised! May the beneficent spirit be glorified! (Traditional praise)"},{english:"Wisdom whispers while foolishness shouts—train your ear to hear the quiet voice of truth."},{english:"The measure of a society is how it treats those who cannot defend themselves."},{english:"What doesn't challenge you doesn't change you; what doesn't stretch you doesn't strengthen you."},{english:"Fair is not everyone getting the same thing; fair is everyone getting what they need to thrive."},{english:"Through Your fire, show me the rewards that come through truth for both parties—those who uphold righteousness and those who do not. (Yasna 31.3)"},{english:"The world is changed not by those who point out what's wrong but by those who do what's right."},{english:"Service is love made visible, compassion made practical, faith made fruitful."},{english:"I have recognized You as beneficent through truth and good thinking, O Mazda. (Yasna 49.5)"},{english:"The holy is not somewhere else or some time else but here and now, in this place, at this moment."},{english:"Let your presence be a sanctuary where others can find rest from the storms of life."},{english:"Friendship is truth telling and burden sharing, celebration and consolation, walking together toward the light."},{english:"Small daily improvements lead to stunning yearly results—be consistent rather than dramatic."},{english:"The mind that dwells in truth becomes a sanctuary where peace is always available."},{english:"Your life is a sacred text written one choice at a time—make it a beautiful story."},{english:"Blessed is he who brings happiness to others through truth and good deeds. (Traditional blessing)"},{english:"You are the protector of the righteous, O Mazda, through Your beneficent spirit. (Yasna 47.3)"},{english:"This I ask You: tell me truly, Ahura—who established the path of the sun and stars? (Yasna 44.5)"},{english:"At the crossroads of decision, remember: you are always choosing not just for yourself but for all who will follow."},{english:"I approach You, O Mazda, with good thinking, so that You may grant me both the blessings of this existence and that of the spirit. (Yasna 28.4)"},{english:"Your life is your offering—what will you place on the altar of existence?"},{english:"Learning from others shortens your path to wisdom; teaching others deepens your own understanding."},{english:"Pure thoughts birth noble words; noble words inspire righteous deeds; righteous deeds purify thoughts in return."},{english:"Every meal is communion when shared with gratitude, every conversation prayer when spoken with love."},{english:"The freedom to choose your response to any situation is the last of human freedoms—exercise it wisely."},{english:"Your conscience is your connection to cosmic justice—honor it by living in alignment with its guidance."},{english:"Every sunrise is nature's way of saying, 'Try again'—accept the invitation with gratitude."},{english:"Truth is patient but not passive, gentle but not weak, humble but not uncertain of its worth."},{english:"Action without reflection is blind; reflection without action is empty; but action guided by reflection is transformative."},{english:"Righteousness is the best good. Happiness to him who is righteous for the sake of righteousness alone. (Ashem Vohu variation)"},{english:"Community is not a place but a relationship, not a location but a connection."},{english:"Good thinking leads to good feeling, good feeling leads to good willing, good willing leads to good living."},{english:"Every crossroads is a classroom, every decision a teacher, every consequence a lesson."},{english:"The present moment is the only moment over which you have power—make it count."},{english:"Hope is not naive optimism but courageous commitment to work for what ought to be."},{english:"Every mistake is a teacher in disguise, every failure a step toward success, every setback a setup for comeback."},{english:"The inner fire burns brightest not when fed by passion but when fueled by principle."},{english:"Your privilege is not your fault, but your responsibility. Use whatever advantages you have to lift others."},{english:"Through Your radiant fire, assign the destiny of the righteous and the unrighteous, O Mazda, that our teaching may spread among the living. (Yasna 31.19)"},{english:"Knowledge builds walls to separate us from ignorance; wisdom builds bridges to connect us with all beings."},{english:"As long as I have strength and power, I shall teach people to seek truth. (Yasna 45.4)"},{english:"The beneficent spirit manifests wherever love meets action. Be the hands and heart through which goodness enters the world."},{english:"The bounteous mentality sees abundance everywhere—in every sunrise, every breath, every opportunity to serve the good."},{english:"The mind illuminated by truth sees possibilities where others see only problems. Think with hope, and hope becomes reality."},{english:"Peace begins with each person choosing to be peaceful, harmony starts with each individual choosing to be harmonious."},{english:"Let gratitude be your first thought at dawn, your last thought at dusk, your constant companion throughout the day."},{english:"I realized You, Mazda, to be beneficent when I was encircled by Good Mind, when he taught me to proclaim: 'Let not men seek to please the followers of falsehood.' (Yasna 43.11)"},{english:"Compassion is not feeling sorry for others but feeling with them, sharing their burden until it becomes lighter."},{english:"Count your blessings, not your problems; focus on your gains, not your losses; see your progress, not your perfection."},{english:"Compassion is not pity from above but solidarity from within—suffer with, celebrate with, grow with."},{english:"At every moment you are choosing who you are becoming—choose the highest version of yourself."},{english:"Evening reflection is the mirror of morning intention. End as mindfully as you began."},{english:"True knowledge transforms the knower. If you remain unchanged by what you learn, you have learned nothing."},{english:"The paradox of freedom: you are most free when you choose to serve something greater than yourself."},{english:"The ripple effects of your actions extend far beyond what you can see—act as if the future depends on you."},{english:"The fire of wisdom burns without consuming. Feed it with honest reflection, and it will illumine your path forever."},{english:"Let your thoughts be seeds of kindness, your words be rain of encouragement, your deeds be sunshine of hope."},{english:"For whom did You create this earth and sky? Who made the luminaries and the darkness? (Yasna 29.1)"},{english:"Your presence in the world matters more than you know—show up fully, authentically, lovingly."},{english:"When the world seems broken beyond repair, remember that you are part of the repair."},{english:"The darkness is never permanent, the light is never extinguished completely. Keep the vigil."},{english:"To help the world progress, O Mazda, we have sought You through good thinking. (Yasna 30.6)"},{english:"Let your spirit be a fountain, not a drain. Pour out blessing upon blessing, and watch the desert of despair bloom."},{english:"Loneliness is the human condition; connection is the human choice. Choose connection."},{english:"For a wise Lord I knew You to be, Mazda, when Good Mind came to me and asked: 'Who are you? To whom do you belong?' (Yasna 43.7)"},{english:"True strength is not in never falling but in how gracefully you rise each time you fall."},{english:"Disorder is not the opposite of truth but its absence—fill the void with authentic being."},{english:"The path of wisdom begins with a single step: the decision to begin walking."},{english:"True justice considers not only what is legal but what is right, not only what is permitted but what is beneficial."},{english:"Grant me, O Mazda, through Your most beneficent spirit, through truth, the rewards of good thinking, through which I may bring joy to my supporters. (Yasna 28.11)"},{english:"The fire of Ahura Mazda brings light to the righteous and terror to the wicked. (Fire prayer)"},{english:"Your choices are your prayers—they reveal what you truly worship, what you genuinely value."},{english:"The false teacher leads people astray from the path of good thinking and truth. (Yasna 32.3)"},{english:"The phoenix rises not in spite of the ashes but because of them—let your failures fuel your renewal."},{english:"Forgiveness is not condoning what was wrong but choosing to be free from the burden of carrying resentment."},{english:"I praise good thoughts, good words, good deeds, and the good religion. (Fravarane prayer)"},{english:"The greatest among you will be your servant—greatness is measured by how much you give, not how much you get."},{english:"The morning star reminds us: even in the darkest hour, light is already on its way."},{english:"Where differences divide, find common ground; where similarities unite, celebrate diversity."},{english:"You who are Mazda, through Your spirit and fire, through truth and good thinking, grant me integrity and strength. (Yasna 28.7)"},{english:"In the garden of the heart, plant seeds of truthful speech. Words watered with wisdom bloom into lasting peace."},{english:"Your daily habits are votes for the type of person you wish to become—vote wisely."},{english:"May we receive the promised reward, the joy that comes from truth, O Mazda. (Yasna 33.11)"},{english:"Hope plants seeds in winter, trusting in the promise of spring."},{english:"You are not just in the community; the community is in you—you carry it wherever you go."},{english:"Your presence is often more healing than your words, your listening more valuable than your advice."},{english:"You are a unique note in the symphony of existence—play your part beautifully and boldly."},{english:"Bridge-builders are more valuable than wall-builders, peacemakers more needed than warriors."},{english:"Growth requires leaving your comfort zone regularly—comfort and growth cannot coexist."},{english:"But the righteous man chooses truth and good thinking as his allies. (Yasna 32.2)"},{english:"The threefold path begins in the silence of right thinking, flows through the beauty of truthful speech, and culminates in the power of loving action."},{english:"Truth needs no defense, only expression. Speak it simply and let its power do the rest."},{english:"Through good deeds may we come to You, O Mazda, with joy and gladness. (Yasna 50.10)"},{english:"I beheld You clearly in my mind's eye as the first one at the birth of life, when You made actions have consequences—evil for the evil, good reward for the good. (Yasna 43.5)"},{english:"Inner peace is not a luxury but a necessity, not a retreat from the world but preparation for effective engagement."},{english:"The wise heart holds both confidence and humility, certainty and openness, in perfect balance."},{english:"Your breath connects you to every living being—breathe consciously, live connectedly."},{english:"Whoever upholds truth most, whether man or woman, O Mazda Ahura, is most dear to You. (Yasna 46.11)"},{english:"Yes, there are two fundamental spirits, twins, renowned to be in conflict. In thought and word, in action, they are two: the good and the bad. Between these two, the beneficent have correctly chosen. (Yasna 30.3)"},{english:"Transformation happens not when you try to become someone else but when you become more fully yourself."},{english:"Where injustice flourishes, it is not enough to be personally righteous. Stand up, speak out, act decisively."},{english:"Then spoke Ahura Mazda: We have no pastor here who is both knowing and holy. (Yasna 29.6)"},{english:"The practice of gratitude transforms ordinary moments into sacred experiences."},{english:"Truth is like the sun—you cannot look directly at it for long, but it lights everything else."},{english:"I shall serve You with good thinking, with truth and righteous action, so that You may grant me that which leads to the straight path. (Yasna 28.5)"},{english:"May good thinking and truth dwell in our house forever, O Ahura Mazda. (Yasna 60.6)"},{english:"Look within with the same honesty you demand from others, the same compassion you show to friends."},{english:"The healing the world needs begins with the healing you give yourself—be gentle, be patient, be kind."},{english:"Hope is not a feeling but a decision—decide to hope and then live as if your hope is justified."},{english:"One chooses that rule of good thinking allied with truth in order to serve the beneficent spirit. (Yasna 51.18)"},{english:"The good mind is a gift that grows with giving. Share your wisdom freely, and watch understanding multiply among all beings."},{english:"When thought, word, and deed align like three rivers meeting, their combined power can move mountains of indifference."},{english:"The music of the spheres plays on—attune your heart to hear the cosmic symphony of love."},{english:"We rise by lifting others, we succeed by serving others, we find ourselves by losing ourselves in love."},{english:"The truth you speak has a past—it comes from your experience. Make sure that past is worthy of the truth."},{english:"The beneficent spirit breathes in every act of kindness. When you lift another's burden, you lighten the world."},{english:"Your talents are gifts to be shared, not treasures to be hoarded—invest them in making the world better."},{english:"The grateful heart attracts more to be grateful for—appreciation is the magnet for abundance."},{english:"The person who knows their weaknesses is stronger than the person who denies them."},{english:"May good fortune come through truth to those who proclaim these teachings, O Mazda. (Yasna 51.16)"},{english:"Meditation is the art of listening to the still small voice that whispers your deepest truth."},{english:"The most important choice you make each day is who you choose to become in that day."},{english:"Order emerges not from control but from harmony—the willing cooperation of free beings choosing good."},{english:"True intelligence is not the ability to solve problems but to see the connections between all things."},{english:"Thus speaks the maiden: 'You are the support of good thinking, of truth, and of the lordship desired by Mazda.' (Yasna 53.3)"},{english:"The spiral of growth means you will revisit the same lessons at deeper levels—embrace the journey."},{english:"When you choose increase over decrease, healing over harm, you align with the progressive spirit of creation itself."},{english:"When someone trusts you with their vulnerability, you hold sacred ground. Tread carefully and gratefully."},{english:"Renewal comes not from changing everything at once but from changing one thing completely."},{english:"When will the noble warriors come who shall drive out from here the thirst of the wicked? (Yasna 32.1)"},{english:"The sacred space is wherever you are when you remember who you really are and why you are here."},{english:"Good thinking, good words, and good deeds—these three bring a person to paradise, the best existence, light, and all good things. (Traditional summary)"},{english:"The progressive spirit never asks 'Why me?' but always 'How can I help?' Be an answer to someone's prayer today."},{english:"Then shall I recognize You as mighty, Mazda, when through good thinking You shall grant the blessings that the truthful and untruthful seek. (Yasna 45.8)"},{english:"I know You to be the first and the last, O Ahura Mazda—You are father of good thinking, creator of truth, judge of our actions. (Yasna 31.8)"},{english:"Wisdom is not knowing all the answers but asking better questions. Begin with: How can I serve?"},{english:"Conscience is the ember of the divine fire planted in every human heart—tend it carefully."},{english:"By Your beneficent spirit and by fire, O Mazda, show me truth and good thinking, through whose work one goes to Your abode. (Yasna 31.20)"},{english:"Come to my help, O Mazda, grant me strength through truth and good thinking. (Yasna 33.6)"},{english:"Through good deeds and righteous words, may we please Your spirit, O Mazda. (Yasna 49.10)"},{english:"Through truth we serve the Lord of Wisdom with good mind and beneficial action. (Summary verse)"},{english:"Service is not about being needed but about being useful, not about being thanked but about being trustworthy."},{english:"I who shall serve You with good thinking... may I thus bring solace to the soul of Earth. (Yasna 28.2)"},{english:"Holiness is not about being perfect but about being present, not about being pure but about being real."},{english:"May we be guides for those who seek the path of truth and righteousness. (Yasna 31.22)"},{english:"Wisdom is like water—it takes the shape of whatever vessel contains it, yet never loses its essence."},{english:"The enlightened mind is like clear water—it reflects perfectly what is, without adding or subtracting anything."},{english:"A thankful heart is a magnet for miracles, drawing goodness from the infinite storehouse of grace."},{english:"The pattern that connects all things is love expressing itself as truth, truth expressing itself as justice."},{english:"We are all connected—what helps one helps all, what harms one harms all."},{english:"Both bridegroom and bride, bring your minds into agreement for the practice of the best thoughts. (Yasna 53.4)"},{english:"The questions you ask shape the life you live—ask better questions, live a better life."},{english:"May the light of good thinking shine in our hearts forever. (Prayer verse)"},{english:"True self-knowledge includes knowing not just what you are but what you could become."},{english:"I know You to be mighty when You help me with good thinking, O Mazda Ahura. (Yasna 31.5)"},{english:"Justice is not revenge but restoration—making right what has been wrong, healing what has been harmed."},{english:"The sun rises not because you need it but because it is the nature of the sun to shine—be like the sun."},{english:"Justice is love applied to systems, compassion embodied in institutions, kindness made structural."},{english:"Grant victory to those who speak truth and live righteously, O Ahura Mazda. (Yasna 48.12)"},{english:"The journey inward is the most courageous journey—it requires facing yourself without flinching."},{english:"I have realized You as beneficent, Mazda Ahura, when You came to me with good thinking and asked: 'Who are you willing to please?' (Yasna 49.3)"},{english:"Each choice carves a channel for future choices to follow. Choose wisely what river you dig for tomorrow."},{english:"Therefore may we be among those who make this world fresh and new! (Yasna 30.9)"},{english:"Truth is the gravity of the moral universe—what goes up in lies must come down in consequences."},{english:"The weight of choice is the price of consciousness. Bear it gladly, for it makes you a partner in creation's unfolding."},{english:"This I ask You: Which is the first and which the last? (Yasna 44.6)"},{english:"Thank the sunrise for its faithfulness, the earth for its generosity, life for its infinite possibilities."},{english:"The sacred is not separate from the ordinary but hidden within it, waiting to be discovered."},{english:"Reflect with a clear mind—each person for themselves—before the Great Event of Choices. Awaken to this doctrine: there is no compromise between right and wrong. (Yasna 30.2)"},{english:"Your choices reveal your values more accurately than your words—choose as if your character depends on it."},{english:"You are not just in the world; the world is in you—take care of both."},{english:"Time is the canvas, your choices the paint, your life the masterpiece—create something beautiful."},{english:"I entrust my soul to You, O Mazda, seeking Your protection through good thinking. (Yasna 48.9)"},{english:"The isolated tree falls in the storm; the forest of trees stands strong together."},{english:"Sacred living means recognizing the extraordinary within the ordinary, the eternal within the temporal."},{english:"The arc of the moral universe bends toward justice only when conscious beings like you and me choose to bend it."},{english:"The cosmic order is written in every sunrise, every heartbeat, every act of genuine kindness."},{english:"This I ask You: Who holds up the earth below and keeps the sky from falling? (Yasna 44.4)"},{english:"Let the fire within purify your motives, clarify your vision, energize your compassion."},{english:"The strength of the individual is the community; the strength of the community is the individual."},{english:"The hands that heal are holier than the hands that pray without helping."},{english:"The grateful heart sees abundance everywhere; the ungrateful heart finds scarcity in plenty."},{english:"This I ask You: tell me truly, Ahura—how shall I drive deceit far from us who seek to promote truth in the world? (Yasna 51.4)"},{english:"Every ending contains a beginning; every death, a birth; every loss, an opportunity for growth."},{english:"Know yourself not to become self-absorbed but to become self-aware, not to focus inward but to focus clearly."},{english:"When these two spirits came together in the beginning, they established life and not-life, and how at the end the worst existence shall be for the followers of falsehood, but the best mind for the truthful. (Yasna 30.4)"},{english:"Wisdom is the art of living skillfully, the science of choosing well, the practice of loving wisely."},{english:"In the morning, set your mind like a compass toward truth; let all your steps follow this direction."},{english:"May Your fire shine forth to help the supporter of truth, O Mazda. (Yasna 34.4)"},{english:"The curious mind stays young, the learning heart stays open, the growing soul stays alive."},{english:"The bridge between what is and what could be is built with the materials of hope and hard work."},{english:"The mirror of self-reflection shows not what you want to see but what you need to see."},{english:"Let truth be our guide, good thinking our companion, right action our path. (Summary)"},{english:"The universe conspires to help those who help themselves and others—be part of the conspiracy of good."},{english:"Every act of love is a victory over the forces that diminish life—love boldly, love widely, love deeply."},{english:"The paradox of wisdom: the more you truly know, the more you realize how much you don't know."},{english:"Each day offers lessons if you are willing to be a student, opportunities if you are willing to try."},{english:"Justice is not just a destination but a journey—walk it one step at a time, one choice at a time."},{english:"The beginner's mind sees possibilities everywhere; the expert mind sees problems in everything."},{english:"Every choice is a prayer, every decision a vote for the kind of world you want to live in."},{english:"Justice delayed is often justice denied, but justice rushed is sometimes injustice accomplished. Seek the balanced way."},{english:"To what land to flee? Where shall I go to flee? They exclude me from family and clan. (Yasna 46.1)"},{english:"You are the one who rewards both the truthful and the untruthful according to their deeds. (Yasna 43.12)"},{english:"Who, Mazda, is the faithful friend of Your spirit? Let him teach me the straight paths of good thinking and of truth. (Yasna 47.4)"},{english:"With outstretched hands I pray to You, O Mazda, first of all through truth. (Yasna 28.1)"},{english:"Self-reflection without self-compassion becomes self-criticism; self-compassion without self-reflection becomes self-deception."},{english:"May good thinking reign supreme, may truth be established in the world. (Yasna 45.10)"},{english:"True belonging doesn't require you to change who you are; it requires you to be who you are."},{english:"When you light the lamp of compassion, you illuminate your own path as well as others'."},{english:"The order of existence rewards those who align with it, not to punish those who don't, but to heal what is broken."},{english:"The good mind seeks first to understand, then to be understood; first to serve, then to be served."},{english:"The trinity of human goodness—think well, speak well, act well—echoes the divine harmony that sustains all worlds."},{english:"Freedom is not the absence of consequences but the power to choose which consequences you will embrace."},{english:"Every moment is a fresh beginning, every breath a new chance, every choice a sacred opportunity."},{english:"Begin each day by asking: How can I make today better than yesterday? End each day by answering: How did I succeed?"},{english:"Through Your most beneficent spirit, O Mazda, I seek to do Your will. (Yasna 47.1)"},{english:"The greatest sermon is a life well-lived in service to truth, beauty, and goodness."},{english:"The deepest truth is often the most simple: be kind, be honest, be helpful, be present."},{english:"Peace is not the absence of conflict but the presence of justice, not the silence of oppression but the harmony of mutual respect."},{english:"The darkest night produces the brightest stars—your current darkness may be developing your greatest light."},{english:"Connection is the energy that exists between people when they feel seen, heard, and valued."},{english:"Like fire transforms wood to light, let your choices transform the world from what it is to what it should be."},{english:"Through good thinking, truth, and the spirit's power, they shall overcome the violence of the deceitful. (Yasna 32.16)"},{english:"The day unfolds like a scroll waiting to be written. What story will your choices tell?"},{english:"The gift of choice is also the burden of choice—embrace both aspects with equal courage."},{english:"The scales of justice are balanced not by equal punishment but by proportional restoration."},{english:"The seeds of tomorrow are planted in the soil of today—plant wisely."},{english:"Good thinking is the bridge between knowing and acting. Cross it with courage, and find yourself in the land of fulfillment."},{english:"I approach You, Mazda, with hands outstretched, with good thinking, with truth, hoping to please Your spirit with righteous actions. (Yasna 50.5)"},{english:"The heart that has been broken and healed is stronger than one that has never been tested."},{english:"Thanksgiving is not just a day but a way of life—live thankfully and you will have much to be thankful for."},{english:"Begin each day by asking: How shall I increase the good in the world through my being here?"},{english:"The wise person learns from everyone, teaches everyone, and judges no one harshly."},{english:"Each breath is a gift, each heartbeat a blessing, each moment an opportunity for thankfulness."},{english:"Like a lighthouse guides ships safely home, let your conscience guide you through moral storms to peaceful harbors."},{english:"Your legacy is not what you leave behind but what you build in others while you are here."},{english:"The growing edge is always uncomfortable—that's how you know you're growing."},{english:"We seek Your blessing through fire, through truth, through good thinking. (Yasna 36.3)"},{english:"This I ask You: tell me truly, Ahura—who was the first father of truth by begetting? (Yasna 44.3)"},{english:"Morning is creation's invitation to begin again. Accept it with gratitude and intentional presence."},{english:"Your conscience is the hearth of heaven—tend it with thoughts of justice, words of compassion, deeds of righteousness."},{english:"Your life may be a drop in the ocean, but without your drop the ocean would be less."},{english:"When moral darkness surrounds you, be the flame that others can navigate by."},{english:"Grant us, O Mazda, the straight paths of good thinking and truth. (Yasna 33.5)"},{english:"Your conscience is the sacred fire that never sleeps, never lies, never abandons you in darkness."},{english:"Your work in the world is your worship—do it with the reverence you would bring to the most sacred task."},{english:"True leadership is not about being served but about serving, not about having followers but about creating leaders."},{english:"Renewal comes not from changing your circumstances but from changing your relationship to your circumstances."},{english:"Speak to me as friend speaks to friend! Show me the supports on which both worlds rest. (Yasna 31.3)"},{english:"The light you seek is the light you are—stop looking for it and start being it."},{english:"Honesty is telling the truth to other people; integrity is telling the truth to yourself."},{english:"The wise person is not one who has never erred but one who learns from every mistake."},{english:"When the mind is clear like mountain water, right decisions flow naturally. Still the turbulent thoughts and find your center."},{english:"Through the beneficent spirit, Mazda, give me strength for good thinking, that I may find the straight paths of life. (Yasna 47.2)"},{english:"May we be among those who make this world progress, who are the healers of this world, O Mazda and You, O Truth. (Yasna 30.9)"},{english:"The wise Lord rewards those who serve truth with sincerity and devotion. (Teaching verse)"},{english:"The divine spark within you knows the difference between right and wrong—trust it, follow it, serve it."},{english:"The inner flame burns brightest when fed by deeds of righteousness, words of truth, thoughts of love."},{english:"The deepest wisdom is often the simplest truth, lived with complete sincerity."},{english:"Every person you meet is fighting a battle you know nothing about—be kind, be patient, be present."},{english:"The man of good life speaks to him of ill life: 'May your conscience torment you continuously!' (Yasna 46.11)"},{english:"The flame that burns for justice never consumes the just, only the injustice they oppose."},{english:"We approach You, O Ahura Mazda, with good thinking and truth, seeking Your blessing. (Yasna 34.1)"},{english:"Personal evolution is not about perfection but about progression, not about arrival but about journey."},{english:"Gratitude is the memory of the heart—it never forgets a kindness received or given."},{english:"I shall worship You with good thinking, O Mazda Ahura, so that You may teach me truth through Your spirit. (Yasna 45.6)"},{english:"Each dawn brings the covenant renewed: to think with clarity, speak with truth, act with love."},{english:"Kindness is the universal language that the deaf can hear and the blind can see."},{english:"Even in the darkest times, remember: you are here for a reason, at this time, in this place."},{english:"The phoenix is not reborn from ashes but through them—transformation requires embracing the fire."},{english:"As the first, O Mazda, You gave bodies and breath to the corporeal world through Your thought. (Yasna 31.11)"},{english:"Your inner fire is not yours alone—it is borrowed from the eternal flame that lights all worlds."},{english:"The river that moves you also moves through you—you are not separate from the flow of life."},{english:"The ultimate measure of your life is not what you accomplish but who you become."},{english:"The most precious gift you can give another person is your full, undivided, loving attention."},{english:"Truth is not a destination but a way of walking. Each step in harmony with what is right brings the world closer to wholeness."},{english:"May Ahura Mazda grant us that good which we seek through truth and good thinking. (Yasna 60.12)"},{english:"Gratitude turns what we have into enough, transforms ordinary days into thanksgivings, routine jobs into joy."},{english:"Love is the recognition that the other person's happiness is as important as your own—maybe more important."},{english:"Every person you meet is your teacher—some teach by example, others by cautionary tale."},{english:"Through righteousness may we attain that world of good thinking. (Yasna 34.15)"},{english:"The deceitful one chose to bring to realization the worst things. But the very beneficent spirit chose truth, and so shall those who satisfy the Wise Lord continuously with true actions. (Yasna 30.5)"},{english:"Each breath is a chance to choose life over death, hope over despair, love over fear."},{english:"True understanding comes not from accumulating facts but from seeing the patterns that connect all things."},{english:"Every act of service is a prayer, every moment of helpfulness a hymn, every gesture of kindness a blessing."},{english:"Where truth blooms, falsehood cannot take root. Cultivate the garden of your life with seeds of honesty and integrity."},{english:"The future is not fixed because you are still choosing—make your next choice count."},{english:"The most powerful force in the universe is a human being living in alignment with their highest truth."},{english:"When you see injustice and do nothing, you become part of the injustice—speak up, stand up, act up."},{english:"As rivers seek the sea, let your thoughts flow toward truth. In the silence of right action, wisdom speaks without words."},{english:"Your daily work is your temple, your loving relationships your prayer, your kind actions your worship."},{english:"The true order of existence is good; the most-good existence it is; desire it! Wish it! Happiness, bliss, enlightenment it is for that existence which is the true order of existence. (Ashem Vohu)"},{english:"The heart that has known pain is the heart most capable of healing others' pain."},{english:"Conflict is often the birth-pain of greater understanding—do not avoid it, but engage it constructively."},{english:"Clear thinking leads to clear speaking, which leads to clear acting. Begin each day by clarifying your deepest intentions."},{english:"The order of existence reveals itself to those who seek with sincere hearts. Look closely—truth hides in plain sight."},{english:"Let the actions of good thinking come to fruition for the man who teaches truth to Zarathustra. (Yasna 28.6)"},{english:"The loving man who brings help to the truthful, whether kinsman or fellow-member of the community, is in good accord with truth. (Yasna 46.2)"},{english:"When shall I know that You have power over those who cause harm to me, O Mazda? Let fire accompanied by good thinking make this known to me through truth. (Yasna 48.7)"},{english:"Clarity comes not from having all the answers but from asking the right questions."},{english:"Wisdom is knowing what to do; virtue is doing it; integrity is being consistent in both."},{english:"And when punishment comes to the wicked, then shall Your power be revealed to all, O Mazda. (Yasna 30.8)"},{english:"Your network is not about who can help you but who you can help, not who you know but who knows they can count on you."},{english:"Every ending is a new beginning in disguise—look for the hidden gift in every goodbye."},{english:"Through truth I complete my worship and my praise with actions, O Mazda Ahura. (Yasna 50.11)"},{english:"Where shall the righteous man find refuge when the wicked overwhelm the land? (Yasna 46.1)"},{english:"Like a river finds its course, truth finds its way through every obstacle. Be the clear channel through which it flows."},{english:"Every moment offers the great choice: will you add to the world's burden or its blessing? Choose consciously."},{english:"The rhythm of sunrise and sunset teaches the sacred pace of effort and rest, engagement and reflection."},{english:"Your fire, strong through truth, is a visible help to Your supporter, but visible harm to Your enemy, O Ahura Mazda. (Yasna 34.4)"},{english:"The soul of the earth cries out: For whom did You fashion me? Who created me? (Yasna 29.1)"},{english:"Service is the rent we pay for living on this planet—pay it gladly and generously."}],a=5,l=o.length,c=[];for(let f=0;f<a;f++)c.push(...o);const u=[...c.slice(c.length-l),...c,...c.slice(0,l)],h=async()=>{if(n||!r.current||e<=0){console.log("No spins left or already spinning.");return}console.log("handleSpin called");try{new Audio("/gear-click-351962.mp3").play().catch(m=>console.error("Error playing sound:",m))}catch(m){console.error("Error creating Audio object:",m)}s(!0),t(m=>m-1);const{data:{user:f}}=await ce.auth.getUser();if(f){const m=new Date().toISOString().slice(0,10),{error:b}=await ce.from("daily_spins").upsert({user_id:f.id,spin_date:m,spin_count:3-e+1},{onConflict:"user_id, spin_date"});b&&console.error("Error updating daily spin count:",b)}const p=Math.floor(Math.random()*o.length),y=(l+p+o.length*Math.floor(a/2))*i;r.current.classList.add(ot.prophecyReelSpinning),r.current.style.transform=`translateY(-${y}px)`,setTimeout(()=>{if(!r.current)return;r.current.classList.remove(ot.prophecyReelSpinning),r.current.style.transition="none";const m=p*i;r.current.style.transform=`translateY(-${m}px)`,r.current.offsetHeight,r.current.style.transition="transform 1.5s cubic-bezier(0.25, 1, 0.5, 1)",s(!1)},1600)};return d.jsx(d.Fragment,{children:d.jsx("div",{className:`${ot.prophecyMask} ${ot.englishMask}`,onClick:h,children:d.jsx("div",{ref:r,className:ot.prophecyReel,children:u.map((f,p)=>d.jsx("div",{className:ot.prophecyItem,children:d.jsx("span",{className:ot.englishText,children:f.english})},p))})})})},Nle=({contentMap:e,spinsLeft:t,setSpinsLeft:r})=>{var n,s,i;const o=((n=e.get("hero_title"))==null?void 0:n.content)||"Zoroasterverse",a=((s=e.get("hero_quote"))==null?void 0:s.content)||"“Happiness comes to them who bring happiness to others.”",l=((i=e.get("hero_description"))==null?void 0:i.content)||"Learn about the teachings of the prophet Zarathustra, the history of one of the world’s oldest religions, and the principles of Good Thoughts, Good Words, and Good Deeds.";return d.jsxs("section",{id:"home",className:ot.zrHero,children:[d.jsxs("div",{className:ot.zrHeroContent,children:[d.jsx("h1",{className:ot.zrTitle,children:o}),d.jsx("p",{className:ot.zrQuote,children:a}),d.jsx("p",{className:ot.zrIntro,children:l}),d.jsx(Rr,{className:ot.zrCta,to:"/blog/about",children:"Learn More"})]}),d.jsxs("figure",{className:ot.zrHeroArt,"aria-labelledby":"art-caption",children:[d.jsx("video",{src:"/200716-913538378.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:ot.videoFire}),d.jsx("div",{className:ot.spinsIndicator,children:[...Array(3)].map((c,u)=>d.jsx("div",{className:`${ot.spinDot} ${u<t?ot.spinDotActive:""}`},u))}),d.jsx(kle,{spinsLeft:t,setSpinsLeft:r}),d.jsx("figcaption",{id:"art-caption",className:ot.srOnly,children:"A stylized winged figure above a sacred fire."})]})]})},Sle=({posts:e})=>d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Latest News & Updates"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map(t=>{const r=t.content.length>100?t.content.substring(0,100)+"...":t.content;return d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{children:t.title}),d.jsx("p",{className:"mt-2",dangerouslySetInnerHTML:{__html:r}}),d.jsx(Rr,{to:`/blog/${t.slug}`,className:"mt-4 inline-block",children:"Read More"})]},t.id)})})]}),Ele=({releases:e})=>d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Latest Releases"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map(t=>d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{children:t.title}),d.jsxs("p",{className:"mt-2",children:["Type: ",t.type]}),d.jsx("a",{href:t.link||"#",className:"mt-4 inline-block",children:"View Details / Purchase"})]},t.id))})]}),Cle=()=>{var e,t,r,n;const{data:s,isLoading:i,isError:o}=It({queryKey:["homepageContent"],queryFn:wle}),{data:a,isLoading:l,isError:c}=It({queryKey:["latestPosts"],queryFn:_le}),{data:u,isLoading:h,isError:f}=It({queryKey:["releaseItems"],queryFn:jle}),[p,y]=v.useState(3),[m,b]=v.useState(null);v.useEffect(()=>{(async()=>{const{data:{user:j}}=await ce.auth.getUser();if(!j){y(0);return}const k=new Date().toISOString().slice(0,10),{data:N,error:C}=await ce.from("daily_spins").select("*").eq("user_id",j.id).eq("spin_date",k).single();if(C&&C.code!=="PGRST116"){console.error("Error fetching daily spins:",C),y(0);return}if(N)y(3-N.spin_count),b(N.spin_date);else{y(3),b(k);const{error:E}=await ce.from("daily_spins").insert({user_id:j.id,spin_date:k,spin_count:0});E&&console.error("Error inserting new daily spin entry:",E)}})()},[]);const x=i||l||h,w=o||c||f;if(x)return d.jsx("div",{className:"text-center py-8",children:"Loading homepage content..."});if(w)return d.jsx("div",{className:"text-center py-8 text-red-400",children:"Error loading homepage content."});const _=new Map(s==null?void 0:s.map(j=>[j.section,j]));return d.jsxs("div",{children:[d.jsx(Nle,{contentMap:_,spinsLeft:p,setSpinsLeft:y}),d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Our Progress"}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((e=_.get("statistics_words_written"))==null?void 0:e.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Words Written"})]}),d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((t=_.get("statistics_beta_readers"))==null?void 0:t.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Beta Readers"})]}),d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((r=_.get("statistics_average_rating"))==null?void 0:r.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Average Rating"})]}),d.jsxs("div",{className:ot.parchmentCard,children:[d.jsx("h3",{className:"text-4xl font-bold text-primary",children:((n=_.get("statistics_books_published"))==null?void 0:n.content)||"0"}),d.jsx("p",{className:"text-muted-foreground",children:"Books Published"})]})]})]}),d.jsx(Sle,{posts:a||[]}),d.jsx(Ele,{releases:u||[]}),d.jsxs("section",{className:ot.zrSection,children:[d.jsx("h2",{className:ot.zrH2,children:"Artist Collaboration"}),d.jsxs("div",{className:"relative rounded-lg shadow-lg overflow-hidden w-full",children:[d.jsx("img",{src:"/images/invite_to_Colab_card.png",alt:"Artist Collaboration Invitation",className:"w-full h-full object-contain"}),d.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-8",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-shadow-md",children:"Join Our Creative Team!"}),d.jsx("p",{className:"text-white mb-6 text-shadow-sm",children:"We're looking for talented artists to help shape the visual identity of the Zangar/Spandam Series. Explore revenue-share opportunities and bring your vision to life."}),d.jsx(Rr,{to:"/artist-collaboration",className:"inline-block bg-primary hover:bg-primary-dark text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:"Apply Now"})]})]})]})]})};function Tle(e){const t=e+"CollectionProvider",[r,n]=Th(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:b,children:x}=m,w=ae.useRef(null),_=ae.useRef(new Map).current;return d.jsx(s,{scope:b,itemMap:_,collectionRef:w,children:x})};o.displayName=t;const a=e+"CollectionSlot",l=Op(a),c=ae.forwardRef((m,b)=>{const{scope:x,children:w}=m,_=i(a,x),j=Hn(b,_.collectionRef);return d.jsx(l,{ref:j,children:w})});c.displayName=a;const u=e+"CollectionItemSlot",h="data-radix-collection-item",f=Op(u),p=ae.forwardRef((m,b)=>{const{scope:x,children:w,..._}=m,j=ae.useRef(null),k=Hn(b,j),N=i(u,x);return ae.useEffect(()=>(N.itemMap.set(j,{ref:j,..._}),()=>void N.itemMap.delete(j))),d.jsx(f,{[h]:"",ref:k,children:w})});p.displayName=u;function y(m){const b=i(e+"CollectionConsumer",m);return ae.useCallback(()=>{const x=b.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((_,j)=>w.indexOf(_.ref.current)-w.indexOf(j.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},y,n]}var Ale=v.createContext(void 0);function VF(e){const t=v.useContext(Ale);return e||t||"ltr"}var V0="rovingFocusGroup.onEntryFocus",Ole={bubbles:!1,cancelable:!0},Tm="RovingFocusGroup",[ck,WF,Ple]=Tle(Tm),[Rle,HF]=Th(Tm,[Ple]),[Ile,Dle]=Rle(Tm),KF=v.forwardRef((e,t)=>d.jsx(ck.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(ck.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(Lle,{...e,ref:t})})}));KF.displayName=Tm;var Lle=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=e,f=v.useRef(null),p=Hn(t,f),y=VF(i),[m,b]=Xb({prop:o,defaultProp:a??null,onChange:l,caller:Tm}),[x,w]=v.useState(!1),_=Gd(c),j=WF(r),k=v.useRef(!1),[N,C]=v.useState(0);return v.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(V0,_),()=>E.removeEventListener(V0,_)},[_]),d.jsx(Ile,{scope:r,orientation:n,dir:y,loop:s,currentTabStopId:m,onItemFocus:v.useCallback(E=>b(E),[b]),onItemShiftTab:v.useCallback(()=>w(!0),[]),onFocusableItemAdd:v.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:v.useCallback(()=>C(E=>E-1),[]),children:d.jsx(Vr.div,{tabIndex:x||N===0?-1:0,"data-orientation":n,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:Ir(e.onMouseDown,()=>{k.current=!0}),onFocus:Ir(e.onFocus,E=>{const T=!k.current;if(E.target===E.currentTarget&&T&&!x){const P=new CustomEvent(V0,Ole);if(E.currentTarget.dispatchEvent(P),!P.defaultPrevented){const O=j().filter($=>$.focusable),I=O.find($=>$.active),R=O.find($=>$.id===m),F=[I,R,...O].filter(Boolean).map($=>$.ref.current);YF(F,u)}}k.current=!1}),onBlur:Ir(e.onBlur,()=>w(!1))})})}),ZF="RovingFocusGroupItem",GF=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...a}=e,l=sp(),c=i||l,u=Dle(ZF,r),h=u.currentTabStopId===c,f=WF(r),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:m}=u;return v.useEffect(()=>{if(n)return p(),()=>y()},[n,p,y]),d.jsx(ck.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:d.jsx(Vr.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Ir(e.onMouseDown,b=>{n?u.onItemFocus(c):b.preventDefault()}),onFocus:Ir(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Ir(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=Fle(b,u.orientation,u.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=f().filter(_=>_.focusable).map(_=>_.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const _=w.indexOf(b.currentTarget);w=u.loop?$le(w,_+1):w.slice(_+1)}setTimeout(()=>YF(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:m!=null}):o})})});GF.displayName=ZF;var Mle={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zle(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Fle(e,t,r){const n=zle(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Mle[n]}function YF(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function $le(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Ule=KF,qle=GF,ax="Tabs",[Ble,qqe]=Th(ax,[HF]),JF=HF(),[Vle,ME]=Ble(ax),XF=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=VF(a),[h,f]=Xb({prop:n,onChange:s,defaultProp:i??"",caller:ax});return d.jsx(Vle,{scope:r,baseId:sp(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:l,children:d.jsx(Vr.div,{dir:u,"data-orientation":o,...c,ref:t})})});XF.displayName=ax;var QF="TabsList",e1=v.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=ME(QF,r),o=JF(r);return d.jsx(Ule,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:d.jsx(Vr.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});e1.displayName=QF;var t1="TabsTrigger",r1=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,o=ME(t1,r),a=JF(r),l=i1(o.baseId,n),c=o1(o.baseId,n),u=n===o.value;return d.jsx(qle,{asChild:!0,...a,focusable:!s,active:u,children:d.jsx(Vr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:t,onMouseDown:Ir(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:Ir(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:Ir(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!s&&h&&o.onValueChange(n)})})})});r1.displayName=t1;var n1="TabsContent",s1=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=e,a=ME(n1,r),l=i1(a.baseId,n),c=o1(a.baseId,n),u=n===a.value,h=v.useRef(u);return v.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),d.jsx(Nm,{present:s||u,children:({present:f})=>d.jsx(Vr.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});s1.displayName=n1;function i1(e,t){return`${e}-trigger-${t}`}function o1(e,t){return`${e}-content-${t}`}var Wle=XF,a1=e1,l1=r1,c1=s1;const Hle=Wle,u1=v.forwardRef(({className:e,...t},r)=>d.jsx(a1,{ref:r,className:Je("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));u1.displayName=a1.displayName;const Ff=v.forwardRef(({className:e,...t},r)=>d.jsx(l1,{ref:r,className:Je("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ff.displayName=l1.displayName;const $f=v.forwardRef(({className:e,...t},r)=>d.jsx(c1,{ref:r,className:Je("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));$f.displayName=c1.displayName;var Am=e=>e.type==="checkbox",fc=e=>e instanceof Date,jn=e=>e==null;const d1=e=>typeof e=="object";var ar=e=>!jn(e)&&!Array.isArray(e)&&d1(e)&&!fc(e),h1=e=>ar(e)&&e.target?Am(e.target)?e.target.checked:e.target.value:e,Kle=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,f1=(e,t)=>e.has(Kle(t)),Zle=e=>{const t=e.constructor&&e.constructor.prototype;return ar(t)&&t.hasOwnProperty("isPrototypeOf")},zE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Er(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(zE&&(e instanceof Blob||n))&&(r||ar(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!Zle(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Er(e[s]));else return e;return t}var lx=e=>/^\w*$/.test(e),ir=e=>e===void 0,FE=e=>Array.isArray(e)?e.filter(Boolean):[],$E=e=>FE(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ye=(e,t,r)=>{if(!t||!ar(e))return r;const n=(lx(t)?[t]:$E(t)).reduce((s,i)=>jn(s)?s:s[i],e);return ir(n)||n===e?ir(e[t])?r:e[t]:n},Xn=e=>typeof e=="boolean",mt=(e,t,r)=>{let n=-1;const s=lx(t)?[t]:$E(t),i=s.length,o=i-1;for(;++n<i;){const a=s[n];let l=r;if(n!==o){const c=e[a];l=ar(c)||Array.isArray(c)?c:isNaN(+s[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=l,e=e[a]}};const mv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},hi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_o={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},p1=ae.createContext(null);p1.displayName="HookFormContext";const UE=()=>ae.useContext(p1);var m1=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==hi.all&&(t._proxyFormState[o]=!n||hi.all),r&&(r[o]=!0),e[o]}});return s};const qE=typeof window<"u"?ae.useLayoutEffect:ae.useEffect;function Gle(e){const t=UE(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[o,a]=ae.useState(r._formState),l=ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return qE(()=>r._subscribe({name:s,formState:l.current,exact:i,callback:c=>{!n&&a({...r._formState,...c})}}),[s,n,i]),ae.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),ae.useMemo(()=>m1(o,r,l.current,!1),[o,r])}var Vi=e=>typeof e=="string",g1=(e,t,r,n,s)=>Vi(e)?(n&&t.watch.add(e),ye(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),ye(r,i))):(n&&(t.watchAll=!0),r),uk=e=>jn(e)||!d1(e);function zo(e,t,r=new WeakSet){if(uk(e)||uk(t))return e===t;if(fc(e)&&fc(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=t[i];if(fc(o)&&fc(a)||ar(o)&&ar(a)||Array.isArray(o)&&Array.isArray(a)?!zo(o,a,r):o!==a)return!1}}return!0}function Yle(e){const t=UE(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:o,compute:a}=e||{},l=ae.useRef(s),c=ae.useRef(a),u=ae.useRef(void 0);c.current=a;const h=ae.useMemo(()=>r._getWatch(n,l.current),[r,n]),[f,p]=ae.useState(c.current?c.current(h):h);return qE(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:y=>{if(!i){const m=g1(n,r._names,y.values||r._formValues,!1,l.current);if(c.current){const b=c.current(m);zo(b,u.current)||(p(b),u.current=b)}else p(m)}}}),[r,i,n,o]),ae.useEffect(()=>r._removeUnmounted()),f}function Jle(e){const t=UE(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:o}=e,a=f1(s._names.array,r),l=ae.useMemo(()=>ye(s._formValues,r,ye(s._defaultValues,r,o)),[s,r,o]),c=Yle({control:s,name:r,defaultValue:l,exact:!0}),u=Gle({control:s,name:r,exact:!0}),h=ae.useRef(e),f=ae.useRef(s.register(r,{...e.rules,value:c,...Xn(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const p=ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ye(u.errors,r)},isDirty:{enumerable:!0,get:()=>!!ye(u.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ye(u.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ye(u.validatingFields,r)},error:{enumerable:!0,get:()=>ye(u.errors,r)}}),[u,r]),y=ae.useCallback(w=>f.current.onChange({target:{value:h1(w),name:r},type:mv.CHANGE}),[r]),m=ae.useCallback(()=>f.current.onBlur({target:{value:ye(s._formValues,r),name:r},type:mv.BLUR}),[r,s._formValues]),b=ae.useCallback(w=>{const _=ye(s._fields,r);_&&w&&(_._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:j=>w.setCustomValidity(j),reportValidity:()=>w.reportValidity()})},[s._fields,r]),x=ae.useMemo(()=>({name:r,value:c,...Xn(n)||u.disabled?{disabled:u.disabled||n}:{},onChange:y,onBlur:m,ref:b}),[r,n,u.disabled,y,m,b,c]);return ae.useEffect(()=>{const w=s._options.shouldUnregister||i;s.register(r,{...h.current.rules,...Xn(h.current.disabled)?{disabled:h.current.disabled}:{}});const _=(j,k)=>{const N=ye(s._fields,j);N&&N._f&&(N._f.mount=k)};if(_(r,!0),w){const j=Er(ye(s._options.defaultValues,r));mt(s._defaultValues,r,j),ir(ye(s._formValues,r))&&mt(s._formValues,r,j)}return!a&&s.register(r),()=>{(a?w&&!s._state.action:w)?s.unregister(r):_(r,!1)}},[r,s,a,i]),ae.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),ae.useMemo(()=>({field:x,formState:u,fieldState:p}),[x,u,p])}const W0=e=>e.render(Jle(e));var BE=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},dp=e=>Array.isArray(e)?e:[e],PP=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(r=>r!==t)}}),unsubscribe:()=>{e=[]}}},zn=e=>ar(e)&&!Object.keys(e).length,VE=e=>e.type==="file",fi=e=>typeof e=="function",gv=e=>{if(!zE)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},y1=e=>e.type==="select-multiple",WE=e=>e.type==="radio",Xle=e=>WE(e)||Am(e),H0=e=>gv(e)&&e.isConnected;function Qle(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=ir(e)?n++:e[t[n++]];return e}function ece(e){for(const t in e)if(e.hasOwnProperty(t)&&!ir(e[t]))return!1;return!0}function pr(e,t){const r=Array.isArray(t)?t:lx(t)?[t]:$E(t),n=r.length===1?e:Qle(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(ar(n)&&zn(n)||Array.isArray(n)&&ece(n))&&pr(e,r.slice(0,-1)),e}var v1=e=>{for(const t in e)if(fi(e[t]))return!0;return!1};function yv(e,t={}){const r=Array.isArray(e);if(ar(e)||r)for(const n in e)Array.isArray(e[n])||ar(e[n])&&!v1(e[n])?(t[n]=Array.isArray(e[n])?[]:{},yv(e[n],t[n])):jn(e[n])||(t[n]=!0);return t}function b1(e,t,r){const n=Array.isArray(e);if(ar(e)||n)for(const s in e)Array.isArray(e[s])||ar(e[s])&&!v1(e[s])?ir(t)||uk(r[s])?r[s]=Array.isArray(e[s])?yv(e[s],[]):{...yv(e[s])}:b1(e[s],jn(t)?{}:t[s],r[s]):r[s]=!zo(e[s],t[s]);return r}var yf=(e,t)=>b1(e,t,yv(t));const RP={value:!1,isValid:!1},IP={value:!0,isValid:!0};var x1=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ir(e[0].attributes.value)?ir(e[0].value)||e[0].value===""?IP:{value:e[0].value,isValid:!0}:IP:RP}return RP},w1=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>ir(e)?e:t?e===""?NaN:e&&+e:r&&Vi(e)?new Date(e):n?n(e):e;const DP={isValid:!1,value:null};var _1=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,DP):DP;function LP(e){const t=e.ref;return VE(t)?t.files:WE(t)?_1(e.refs).value:y1(t)?[...t.selectedOptions].map(({value:r})=>r):Am(t)?x1(e.refs).value:w1(ir(t.value)?e.ref.value:t.value,e)}var tce=(e,t,r,n)=>{const s={};for(const i of e){const o=ye(t,i);o&&mt(s,i,o._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},vv=e=>e instanceof RegExp,vf=e=>ir(e)?e:vv(e)?e.source:ar(e)?vv(e.value)?e.value.source:e.value:e,MP=e=>({isOnSubmit:!e||e===hi.onSubmit,isOnBlur:e===hi.onBlur,isOnChange:e===hi.onChange,isOnAll:e===hi.all,isOnTouch:e===hi.onTouched});const zP="AsyncFunction";var rce=e=>!!e&&!!e.validate&&!!(fi(e.validate)&&e.validate.constructor.name===zP||ar(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===zP)),nce=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),FP=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const hp=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=ye(e,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n||o.ref&&t(o.ref,o.name)&&!n)return!0;if(hp(a,t))break}else if(ar(a)&&hp(a,t))break}}};function $P(e,t,r){const n=ye(e,r);if(n||lx(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=ye(t,i),a=ye(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:r}}var sce=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return zn(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||hi.all))},ice=(e,t,r)=>!e||!t||e===t||dp(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),oce=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,ace=(e,t)=>!FE(ye(e,t)).length&&pr(e,t),lce=(e,t,r)=>{const n=dp(ye(e,r));return mt(n,"root",t[r]),mt(e,r,n),e},Iy=e=>Vi(e);function UP(e,t,r="validate"){if(Iy(e)||Array.isArray(e)&&e.every(Iy)||Xn(e)&&!e)return{type:r,message:Iy(e)?e:"",ref:t}}var Mu=e=>ar(e)&&!vv(e)?e:{value:e,message:""},qP=async(e,t,r,n,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:h,max:f,pattern:p,validate:y,name:m,valueAsNumber:b,mount:x}=e._f,w=ye(r,m);if(!x||t.has(m))return{};const _=a?a[0]:o,j=I=>{s&&_.reportValidity&&(_.setCustomValidity(Xn(I)?"":I||""),_.reportValidity())},k={},N=WE(o),C=Am(o),E=N||C,T=(b||VE(o))&&ir(o.value)&&ir(w)||gv(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,P=BE.bind(null,m,n,k),O=(I,R,F,$=_o.maxLength,W=_o.minLength)=>{const q=I?R:F;k[m]={type:I?$:W,message:q,ref:o,...P(I?$:W,q)}};if(i?!Array.isArray(w)||!w.length:l&&(!E&&(T||jn(w))||Xn(w)&&!w||C&&!x1(a).isValid||N&&!_1(a).isValid)){const{value:I,message:R}=Iy(l)?{value:!!l,message:l}:Mu(l);if(I&&(k[m]={type:_o.required,message:R,ref:_,...P(_o.required,R)},!n))return j(R),k}if(!T&&(!jn(h)||!jn(f))){let I,R;const F=Mu(f),$=Mu(h);if(!jn(w)&&!isNaN(w)){const W=o.valueAsNumber||w&&+w;jn(F.value)||(I=W>F.value),jn($.value)||(R=W<$.value)}else{const W=o.valueAsDate||new Date(w),q=z=>new Date(new Date().toDateString()+" "+z),K=o.type=="time",Z=o.type=="week";Vi(F.value)&&w&&(I=K?q(w)>q(F.value):Z?w>F.value:W>new Date(F.value)),Vi($.value)&&w&&(R=K?q(w)<q($.value):Z?w<$.value:W<new Date($.value))}if((I||R)&&(O(!!I,F.message,$.message,_o.max,_o.min),!n))return j(k[m].message),k}if((c||u)&&!T&&(Vi(w)||i&&Array.isArray(w))){const I=Mu(c),R=Mu(u),F=!jn(I.value)&&w.length>+I.value,$=!jn(R.value)&&w.length<+R.value;if((F||$)&&(O(F,I.message,R.message),!n))return j(k[m].message),k}if(p&&!T&&Vi(w)){const{value:I,message:R}=Mu(p);if(vv(I)&&!w.match(I)&&(k[m]={type:_o.pattern,message:R,ref:o,...P(_o.pattern,R)},!n))return j(R),k}if(y){if(fi(y)){const I=await y(w,r),R=UP(I,_);if(R&&(k[m]={...R,...P(_o.validate,R.message)},!n))return j(R.message),k}else if(ar(y)){let I={};for(const R in y){if(!zn(I)&&!n)break;const F=UP(await y[R](w,r),_,R);F&&(I={...F,...P(R,F.message)},j(F.message),n&&(k[m]=I))}if(!zn(I)&&(k[m]={ref:_,...I},!n))return k}}return j(!0),k};const cce={mode:hi.onSubmit,reValidateMode:hi.onChange,shouldFocusError:!0};function uce(e={}){let t={...cce,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:fi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=ar(t.defaultValues)||ar(t.values)?Er(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Er(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:PP(),state:PP()},p=t.criteriaMode===hi.all,y=D=>B=>{clearTimeout(c),c=setTimeout(D,B)},m=async D=>{if(!t.disabled&&(u.isValid||h.isValid||D)){const B=t.resolver?zn((await C()).errors):await T(n,!0);B!==r.isValid&&f.state.next({isValid:B})}},b=(D,B)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((D||Array.from(a.mount)).forEach(Q=>{Q&&(B?mt(r.validatingFields,Q,B):pr(r.validatingFields,Q))}),f.state.next({validatingFields:r.validatingFields,isValidating:!zn(r.validatingFields)}))},x=(D,B=[],Q,ge,he=!0,ue=!0)=>{if(ge&&Q&&!t.disabled){if(o.action=!0,ue&&Array.isArray(ye(n,D))){const _e=Q(ye(n,D),ge.argA,ge.argB);he&&mt(n,D,_e)}if(ue&&Array.isArray(ye(r.errors,D))){const _e=Q(ye(r.errors,D),ge.argA,ge.argB);he&&mt(r.errors,D,_e),ace(r.errors,D)}if((u.touchedFields||h.touchedFields)&&ue&&Array.isArray(ye(r.touchedFields,D))){const _e=Q(ye(r.touchedFields,D),ge.argA,ge.argB);he&&mt(r.touchedFields,D,_e)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=yf(s,i)),f.state.next({name:D,isDirty:O(D,B),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else mt(i,D,B)},w=(D,B)=>{mt(r.errors,D,B),f.state.next({errors:r.errors})},_=D=>{r.errors=D,f.state.next({errors:r.errors,isValid:!1})},j=(D,B,Q,ge)=>{const he=ye(n,D);if(he){const ue=ye(i,D,ir(Q)?ye(s,D):Q);ir(ue)||ge&&ge.defaultChecked||B?mt(i,D,B?ue:LP(he._f)):F(D,ue),o.mount&&m()}},k=(D,B,Q,ge,he)=>{let ue=!1,_e=!1;const rt={name:D};if(!t.disabled){if(!Q||ge){(u.isDirty||h.isDirty)&&(_e=r.isDirty,r.isDirty=rt.isDirty=O(),ue=_e!==rt.isDirty);const Be=zo(ye(s,D),B);_e=!!ye(r.dirtyFields,D),Be?pr(r.dirtyFields,D):mt(r.dirtyFields,D,!0),rt.dirtyFields=r.dirtyFields,ue=ue||(u.dirtyFields||h.dirtyFields)&&_e!==!Be}if(Q){const Be=ye(r.touchedFields,D);Be||(mt(r.touchedFields,D,Q),rt.touchedFields=r.touchedFields,ue=ue||(u.touchedFields||h.touchedFields)&&Be!==Q)}ue&&he&&f.state.next(rt)}return ue?rt:{}},N=(D,B,Q,ge)=>{const he=ye(r.errors,D),ue=(u.isValid||h.isValid)&&Xn(B)&&r.isValid!==B;if(t.delayError&&Q?(l=y(()=>w(D,Q)),l(t.delayError)):(clearTimeout(c),l=null,Q?mt(r.errors,D,Q):pr(r.errors,D)),(Q?!zo(he,Q):he)||!zn(ge)||ue){const _e={...ge,...ue&&Xn(B)?{isValid:B}:{},errors:r.errors,name:D};r={...r,..._e},f.state.next(_e)}},C=async D=>{b(D,!0);const B=await t.resolver(i,t.context,tce(D||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(D),B},E=async D=>{const{errors:B}=await C(D);if(D)for(const Q of D){const ge=ye(B,Q);ge?mt(r.errors,Q,ge):pr(r.errors,Q)}else r.errors=B;return B},T=async(D,B,Q={valid:!0})=>{for(const ge in D){const he=D[ge];if(he){const{_f:ue,..._e}=he;if(ue){const rt=a.array.has(ue.name),Be=he._f&&rce(he._f);Be&&u.validatingFields&&b([ge],!0);const bt=await qP(he,a.disabled,i,p,t.shouldUseNativeValidation&&!B,rt);if(Be&&u.validatingFields&&b([ge]),bt[ue.name]&&(Q.valid=!1,B))break;!B&&(ye(bt,ue.name)?rt?lce(r.errors,bt,ue.name):mt(r.errors,ue.name,bt[ue.name]):pr(r.errors,ue.name))}!zn(_e)&&await T(_e,B,Q)}}return Q.valid},P=()=>{for(const D of a.unMount){const B=ye(n,D);B&&(B._f.refs?B._f.refs.every(Q=>!H0(Q)):!H0(B._f.ref))&&pe(D)}a.unMount=new Set},O=(D,B)=>!t.disabled&&(D&&B&&mt(i,D,B),!zo(z(),s)),I=(D,B,Q)=>g1(D,a,{...o.mount?i:ir(B)?s:Vi(D)?{[D]:B}:B},Q,B),R=D=>FE(ye(o.mount?i:s,D,t.shouldUnregister?ye(s,D,[]):[])),F=(D,B,Q={})=>{const ge=ye(n,D);let he=B;if(ge){const ue=ge._f;ue&&(!ue.disabled&&mt(i,D,w1(B,ue)),he=gv(ue.ref)&&jn(B)?"":B,y1(ue.ref)?[...ue.ref.options].forEach(_e=>_e.selected=he.includes(_e.value)):ue.refs?Am(ue.ref)?ue.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(he)?_e.checked=!!he.find(rt=>rt===_e.value):_e.checked=he===_e.value||!!he)}):ue.refs.forEach(_e=>_e.checked=_e.value===he):VE(ue.ref)?ue.ref.value="":(ue.ref.value=he,ue.ref.type||f.state.next({name:D,values:Er(i)})))}(Q.shouldDirty||Q.shouldTouch)&&k(D,he,Q.shouldTouch,Q.shouldDirty,!0),Q.shouldValidate&&Z(D)},$=(D,B,Q)=>{for(const ge in B){if(!B.hasOwnProperty(ge))return;const he=B[ge],ue=D+"."+ge,_e=ye(n,ue);(a.array.has(D)||ar(he)||_e&&!_e._f)&&!fc(he)?$(ue,he,Q):F(ue,he,Q)}},W=(D,B,Q={})=>{const ge=ye(n,D),he=a.array.has(D),ue=Er(B);mt(i,D,ue),he?(f.array.next({name:D,values:Er(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&Q.shouldDirty&&f.state.next({name:D,dirtyFields:yf(s,i),isDirty:O(D,ue)})):ge&&!ge._f&&!jn(ue)?$(D,ue,Q):F(D,ue,Q),FP(D,a)&&f.state.next({...r,name:D}),f.state.next({name:o.mount?D:void 0,values:Er(i)})},q=async D=>{o.mount=!0;const B=D.target;let Q=B.name,ge=!0;const he=ye(n,Q),ue=Be=>{ge=Number.isNaN(Be)||fc(Be)&&isNaN(Be.getTime())||zo(Be,ye(i,Q,Be))},_e=MP(t.mode),rt=MP(t.reValidateMode);if(he){let Be,bt;const Qr=B.type?LP(he._f):h1(D),Bt=D.type===mv.BLUR||D.type===mv.FOCUS_OUT,Ws=!nce(he._f)&&!t.resolver&&!ye(r.errors,Q)&&!he._f.deps||oce(Bt,ye(r.touchedFields,Q),r.isSubmitted,rt,_e),Oi=FP(Q,a,Bt);mt(i,Q,Qr),Bt?(!B||!B.readOnly)&&(he._f.onBlur&&he._f.onBlur(D),l&&l(0)):he._f.onChange&&he._f.onChange(D);const mo=k(Q,Qr,Bt),Pi=!zn(mo)||Oi;if(!Bt&&f.state.next({name:Q,type:D.type,values:Er(i)}),Ws)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?Bt&&m():Bt||m()),Pi&&f.state.next({name:Q,...Oi?{}:mo});if(!Bt&&Oi&&f.state.next({...r}),t.resolver){const{errors:Ri}=await C([Q]);if(ue(Qr),ge){const go=$P(r.errors,n,Q),en=$P(Ri,n,go.name||Q);Be=en.error,Q=en.name,bt=zn(Ri)}}else b([Q],!0),Be=(await qP(he,a.disabled,i,p,t.shouldUseNativeValidation))[Q],b([Q]),ue(Qr),ge&&(Be?bt=!1:(u.isValid||h.isValid)&&(bt=await T(n,!0)));ge&&(he._f.deps&&Z(he._f.deps),N(Q,bt,Be,mo))}},K=(D,B)=>{if(ye(r.errors,B)&&D.focus)return D.focus(),1},Z=async(D,B={})=>{let Q,ge;const he=dp(D);if(t.resolver){const ue=await E(ir(D)?D:he);Q=zn(ue),ge=D?!he.some(_e=>ye(ue,_e)):Q}else D?(ge=(await Promise.all(he.map(async ue=>{const _e=ye(n,ue);return await T(_e&&_e._f?{[ue]:_e}:_e)}))).every(Boolean),!(!ge&&!r.isValid)&&m()):ge=Q=await T(n);return f.state.next({...!Vi(D)||(u.isValid||h.isValid)&&Q!==r.isValid?{}:{name:D},...t.resolver||!D?{isValid:Q}:{},errors:r.errors}),B.shouldFocus&&!ge&&hp(n,K,D?he:a.mount),ge},z=D=>{const B={...o.mount?i:s};return ir(D)?B:Vi(D)?ye(B,D):D.map(Q=>ye(B,Q))},J=(D,B)=>({invalid:!!ye((B||r).errors,D),isDirty:!!ye((B||r).dirtyFields,D),error:ye((B||r).errors,D),isValidating:!!ye(r.validatingFields,D),isTouched:!!ye((B||r).touchedFields,D)}),te=D=>{D&&dp(D).forEach(B=>pr(r.errors,B)),f.state.next({errors:D?r.errors:{}})},be=(D,B,Q)=>{const ge=(ye(n,D,{_f:{}})._f||{}).ref,he=ye(r.errors,D)||{},{ref:ue,message:_e,type:rt,...Be}=he;mt(r.errors,D,{...Be,...B,ref:ge}),f.state.next({name:D,errors:r.errors,isValid:!1}),Q&&Q.shouldFocus&&ge&&ge.focus&&ge.focus()},H=(D,B)=>fi(D)?f.state.subscribe({next:Q=>"values"in Q&&D(I(void 0,B),Q)}):I(D,B,!0),G=D=>f.state.subscribe({next:B=>{ice(D.name,B.name,D.exact)&&sce(B,D.formState||u,pt,D.reRenderRoot)&&D.callback({values:{...i},...r,...B,defaultValues:s})}}).unsubscribe,fe=D=>(o.mount=!0,h={...h,...D.formState},G({...D,formState:h})),pe=(D,B={})=>{for(const Q of D?dp(D):a.mount)a.mount.delete(Q),a.array.delete(Q),B.keepValue||(pr(n,Q),pr(i,Q)),!B.keepError&&pr(r.errors,Q),!B.keepDirty&&pr(r.dirtyFields,Q),!B.keepTouched&&pr(r.touchedFields,Q),!B.keepIsValidating&&pr(r.validatingFields,Q),!t.shouldUnregister&&!B.keepDefaultValue&&pr(s,Q);f.state.next({values:Er(i)}),f.state.next({...r,...B.keepDirty?{isDirty:O()}:{}}),!B.keepIsValid&&m()},ke=({disabled:D,name:B})=>{(Xn(D)&&o.mount||D||a.disabled.has(B))&&(D?a.disabled.add(B):a.disabled.delete(B))},V=(D,B={})=>{let Q=ye(n,D);const ge=Xn(B.disabled)||Xn(t.disabled);return mt(n,D,{...Q||{},_f:{...Q&&Q._f?Q._f:{ref:{name:D}},name:D,mount:!0,...B}}),a.mount.add(D),Q?ke({disabled:Xn(B.disabled)?B.disabled:t.disabled,name:D}):j(D,!0,B.value),{...ge?{disabled:B.disabled||t.disabled}:{},...t.progressive?{required:!!B.required,min:vf(B.min),max:vf(B.max),minLength:vf(B.minLength),maxLength:vf(B.maxLength),pattern:vf(B.pattern)}:{},name:D,onChange:q,onBlur:q,ref:he=>{if(he){V(D,B),Q=ye(n,D);const ue=ir(he.value)&&he.querySelectorAll&&he.querySelectorAll("input,select,textarea")[0]||he,_e=Xle(ue),rt=Q._f.refs||[];if(_e?rt.find(Be=>Be===ue):ue===Q._f.ref)return;mt(n,D,{_f:{...Q._f,..._e?{refs:[...rt.filter(H0),ue,...Array.isArray(ye(s,D))?[{}]:[]],ref:{type:ue.type,name:D}}:{ref:ue}}}),j(D,!1,void 0,ue)}else Q=ye(n,D,{}),Q._f&&(Q._f.mount=!1),(t.shouldUnregister||B.shouldUnregister)&&!(f1(a.array,D)&&o.action)&&a.unMount.add(D)}}},X=()=>t.shouldFocusError&&hp(n,K,a.mount),le=D=>{Xn(D)&&(f.state.next({disabled:D}),hp(n,(B,Q)=>{const ge=ye(n,Q);ge&&(B.disabled=ge._f.disabled||D,Array.isArray(ge._f.refs)&&ge._f.refs.forEach(he=>{he.disabled=ge._f.disabled||D}))},0,!1))},U=(D,B)=>async Q=>{let ge;Q&&(Q.preventDefault&&Q.preventDefault(),Q.persist&&Q.persist());let he=Er(i);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:ue,values:_e}=await C();r.errors=ue,he=Er(_e)}else await T(n);if(a.disabled.size)for(const ue of a.disabled)pr(he,ue);if(pr(r.errors,"root"),zn(r.errors)){f.state.next({errors:{}});try{await D(he,Q)}catch(ue){ge=ue}}else B&&await B({...r.errors},Q),X(),setTimeout(X);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:zn(r.errors)&&!ge,submitCount:r.submitCount+1,errors:r.errors}),ge)throw ge},Se=(D,B={})=>{ye(n,D)&&(ir(B.defaultValue)?W(D,Er(ye(s,D))):(W(D,B.defaultValue),mt(s,D,Er(B.defaultValue))),B.keepTouched||pr(r.touchedFields,D),B.keepDirty||(pr(r.dirtyFields,D),r.isDirty=B.defaultValue?O(D,Er(ye(s,D))):O()),B.keepError||(pr(r.errors,D),u.isValid&&m()),f.state.next({...r}))},Re=(D,B={})=>{const Q=D?Er(D):s,ge=Er(Q),he=zn(D),ue=he?s:ge;if(B.keepDefaultValues||(s=Q),!B.keepValues){if(B.keepDirtyValues){const _e=new Set([...a.mount,...Object.keys(yf(s,i))]);for(const rt of Array.from(_e))ye(r.dirtyFields,rt)?mt(ue,rt,ye(i,rt)):W(rt,ye(ue,rt))}else{if(zE&&ir(D))for(const _e of a.mount){const rt=ye(n,_e);if(rt&&rt._f){const Be=Array.isArray(rt._f.refs)?rt._f.refs[0]:rt._f.ref;if(gv(Be)){const bt=Be.closest("form");if(bt){bt.reset();break}}}}if(B.keepFieldsRef)for(const _e of a.mount)W(_e,ye(ue,_e));else n={}}i=t.shouldUnregister?B.keepDefaultValues?Er(s):{}:Er(ue),f.array.next({values:{...ue}}),f.state.next({values:{...ue}})}a={mount:B.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:B.keepSubmitCount?r.submitCount:0,isDirty:he?!1:B.keepDirty?r.isDirty:!!(B.keepDefaultValues&&!zo(D,s)),isSubmitted:B.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:he?{}:B.keepDirtyValues?B.keepDefaultValues&&i?yf(s,i):r.dirtyFields:B.keepDefaultValues&&D?yf(s,D):B.keepDirty?r.dirtyFields:{},touchedFields:B.keepTouched?r.touchedFields:{},errors:B.keepErrors?r.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Qe=(D,B)=>Re(fi(D)?D(i):D,B),Xe=(D,B={})=>{const Q=ye(n,D),ge=Q&&Q._f;if(ge){const he=ge.refs?ge.refs[0]:ge.ref;he.focus&&(he.focus(),B.shouldSelect&&fi(he.select)&&he.select())}},pt=D=>{r={...r,...D}},Jt={control:{register:V,unregister:pe,getFieldState:J,handleSubmit:U,setError:be,_subscribe:G,_runSchema:C,_focusError:X,_getWatch:I,_getDirty:O,_setValid:m,_setFieldArray:x,_setDisabledField:ke,_setErrors:_,_getFieldArray:R,_reset:Re,_resetDefaultValues:()=>fi(t.defaultValues)&&t.defaultValues().then(D=>{Qe(D,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:le,_subjects:f,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(D){o=D},get _defaultValues(){return s},get _names(){return a},set _names(D){a=D},get _formState(){return r},get _options(){return t},set _options(D){t={...t,...D}}},subscribe:fe,trigger:Z,register:V,handleSubmit:U,watch:H,setValue:W,getValues:z,reset:Qe,resetField:Se,clearErrors:te,unregister:pe,setError:be,setFocus:Xe,getFieldState:J};return{...Jt,formControl:Jt}}function dce(e={}){const t=ae.useRef(void 0),r=ae.useRef(void 0),[n,s]=ae.useState({isDirty:!1,isValidating:!1,isLoading:fi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:fi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!fi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...a}=uce(e);t.current={...a,formState:n}}const i=t.current.control;return i._options=e,qE(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),ae.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),ae.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),ae.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),ae.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),ae.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),ae.useEffect(()=>{e.values&&!zo(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),ae.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=m1(n,i),t.current}const BP=(e,t,r)=>{if(e&&"reportValidity"in e){const n=ye(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},dk=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?BP(n.ref,r,e):n&&n.refs&&n.refs.forEach(s=>BP(s,r,e))}},VP=(e,t)=>{t.shouldUseNativeValidation&&dk(e,t);const r={};for(const n in e){const s=ye(t.fields,n),i=Object.assign(e[n]||{},{ref:s&&s.ref});if(hce(t.names||Object.keys(e),n)){const o=Object.assign({},ye(r,n));mt(o,"root",i),mt(r,n,o)}else mt(r,n,i)}return r},hce=(e,t)=>{const r=WP(t);return e.some(n=>WP(n).match(`^${r}\\.\\d+`))};function WP(e){return e.replace(/\]|\[/g,"")}function oe(e,t,r){function n(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in o.prototype)u in a||Object.defineProperty(a,u,{value:o.prototype[u].bind(a)});a._zod.constr=o,a._zod.def=l}const s=(r==null?void 0:r.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:e});function o(a){var l;const c=r!=null&&r.Parent?new i:this;n(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var l,c;return r!=null&&r.Parent&&a instanceof r.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class xd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class j1 extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const k1={};function Bc(e){return k1}function fce(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,n])=>t.indexOf(+r)===-1).map(([r,n])=>n)}function hk(e,t){return typeof t=="bigint"?t.toString():t}function HE(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function KE(e){return e==null}function ZE(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}const HP=Symbol("evaluating");function Et(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==HP)return n===void 0&&(n=HP,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function pce(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function El(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Ph(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function KP(e){return JSON.stringify(e)}const N1="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function bv(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const mce=HE(()=>{var e;if(typeof navigator<"u"&&(e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Dp(e){if(bv(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(bv(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function S1(e){return Dp(e)?{...e}:e}const gce=new Set(["string","number","symbol"]);function cx(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Cl(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function qe(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function yce(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function vce(e,t){const r=e._zod.def,n=Ph(e._zod.def,{get shape(){const s={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(s[i]=r.shape[i])}return El(this,"shape",s),s},checks:[]});return Cl(e,n)}function bce(e,t){const r=e._zod.def,n=Ph(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete s[i]}return El(this,"shape",s),s},checks:[]});return Cl(e,n)}function xce(e,t){if(!Dp(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const n=Ph(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return El(this,"shape",s),s},checks:[]});return Cl(e,n)}function wce(e,t){if(!Dp(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return El(this,"shape",n),n},checks:e._zod.def.checks};return Cl(e,r)}function _ce(e,t){const r=Ph(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return El(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Cl(e,r)}function jce(e,t,r){const n=Ph(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:s[o]}):s[o])}else for(const o in s)i[o]=e?new e({type:"optional",innerType:s[o]}):s[o];return El(this,"shape",i),i},checks:[]});return Cl(t,n)}function kce(e,t,r){const n=Ph(t._zod.def,{get shape(){const s=t._zod.def.shape,i={...s};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:s[o]}))}else for(const o in s)i[o]=new e({type:"nonoptional",innerType:s[o]});return El(this,"shape",i),i},checks:[]});return Cl(t,n)}function od(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function E1(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function qg(e){return typeof e=="string"?e:e==null?void 0:e.message}function Vc(e,t,r){var n,s,i,o,a,l;const c={...e,path:e.path??[]};if(!e.message){const u=qg((i=(s=(n=e.inst)==null?void 0:n._zod.def)==null?void 0:s.error)==null?void 0:i.call(s,e))??qg((o=t==null?void 0:t.error)==null?void 0:o.call(t,e))??qg((a=r.customError)==null?void 0:a.call(r,e))??qg((l=r.localeError)==null?void 0:l.call(r,e))??"Invalid input";c.message=u}return delete c.inst,delete c.continue,t!=null&&t.reportInput||delete c.input,c}function GE(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Lp(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const C1=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,hk,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},YE=oe("$ZodError",C1),ux=oe("$ZodError",C1,{Parent:Error});function Nce(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function Sce(e,t){const r=t||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(e),n}const dx=e=>(t,r,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new xd;if(o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>Vc(l,i,Bc())));throw N1(a,s==null?void 0:s.callee),a}return o.value},Ece=dx(ux),hx=e=>async(t,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((s==null?void 0:s.Err)??e)(o.issues.map(l=>Vc(l,i,Bc())));throw N1(a,s==null?void 0:s.callee),a}return o.value},Cce=hx(ux),fx=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new xd;return i.issues.length?{success:!1,error:new(e??YE)(i.issues.map(o=>Vc(o,s,Bc())))}:{success:!0,data:i.value}},Tce=fx(ux),px=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>Vc(o,s,Bc())))}:{success:!0,data:i.value}},Ace=px(ux),Oce=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return dx(e)(t,r,s)},Pce=e=>(t,r,n)=>dx(e)(t,r,n),Rce=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return hx(e)(t,r,s)},Ice=e=>async(t,r,n)=>hx(e)(t,r,n),Dce=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return fx(e)(t,r,s)},Lce=e=>(t,r,n)=>fx(e)(t,r,n),Mce=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return px(e)(t,r,s)},zce=e=>async(t,r,n)=>px(e)(t,r,n),Fce=/^[cC][^\s-]{8,}$/,$ce=/^[0-9a-z]+$/,Uce=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,qce=/^[0-9a-vA-V]{20}$/,Bce=/^[A-Za-z0-9]{27}$/,Vce=/^[a-zA-Z0-9_-]{21}$/,Wce=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Hce=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ZP=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Kce=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Zce="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Gce(){return new RegExp(Zce,"u")}const Yce=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Jce=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Xce=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Qce=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eue=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,T1=/^[A-Za-z0-9_-]*$/,tue=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,rue=/^\+(?:[0-9]){6,14}[0-9]$/,A1="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",nue=new RegExp(`^${A1}$`);function O1(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function sue(e){return new RegExp(`^${O1(e)}$`)}function iue(e){const t=O1({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${A1}T(?:${n})$`)}const oue=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},aue=/true|false/i,lue=/^[^A-Z]*$/,cue=/^[^a-z]*$/,ho=oe("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),uue=oe("$ZodCheckMaxLength",(e,t)=>{var r;ho.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!KE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const i=GE(s);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),due=oe("$ZodCheckMinLength",(e,t)=>{var r;ho.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!KE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const i=GE(s);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),hue=oe("$ZodCheckLengthEquals",(e,t)=>{var r;ho.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!KE(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,i=s.length;if(i===t.length)return;const o=GE(s),a=i>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),mx=oe("$ZodCheckStringFormat",(e,t)=>{var r,n;ho.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),fue=oe("$ZodCheckRegex",(e,t)=>{mx.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),pue=oe("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=lue),mx.init(e,t)}),mue=oe("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=cue),mx.init(e,t)}),gue=oe("$ZodCheckIncludes",(e,t)=>{ho.init(e,t);const r=cx(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),yue=oe("$ZodCheckStartsWith",(e,t)=>{ho.init(e,t);const r=new RegExp(`^${cx(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),vue=oe("$ZodCheckEndsWith",(e,t)=>{ho.init(e,t);const r=new RegExp(`.*${cx(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),bue=oe("$ZodCheckOverwrite",(e,t)=>{ho.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class xue{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),n=Math.min(...r.map(i=>i.length-i.trimStart().length)),s=r.map(i=>i.slice(n)).map(i=>" ".repeat(this.indent*2)+i);for(const i of s)this.content.push(i)}compile(){const t=Function,r=this==null?void 0:this.args,n=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...r,n.join(`
`))}}const wue={major:4,minor:1,patch:3},wr=oe("$ZodType",(e,t)=>{var r,n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=wue;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const i of s)for(const o of i._zod.onattach)o(e);if(s.length===0)(n=e._zod).deferred??(n.deferred=[]),(r=e._zod.deferred)==null||r.push(()=>{e._zod.run=e._zod.parse});else{const i=(a,l,c)=>{let u=od(a),h;for(const f of l){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(u)continue;const p=a.issues.length,y=f._zod.check(a);if(y instanceof Promise&&(c==null?void 0:c.async)===!1)throw new xd;if(h||y instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await y,a.issues.length!==p&&(u||(u=od(a,p)))});else{if(a.issues.length===p)continue;u||(u=od(a,p))}}return h?h.then(()=>a):a},o=(a,l,c)=>{if(od(a))return a.aborted=!0,a;const u=i(l,s,c);if(u instanceof Promise){if(c.async===!1)throw new xd;return u.then(h=>e._zod.parse(h,c))}return e._zod.parse(u,c)};e._zod.run=(a,l)=>{if(l.skipChecks)return e._zod.parse(a,l);if(l.direction==="backward"){const u=e._zod.parse({value:a.value,issues:[]},{...l,skipChecks:!0});return u instanceof Promise?u.then(h=>o(h,a,l)):o(u,a,l)}const c=e._zod.parse(a,l);if(c instanceof Promise){if(l.async===!1)throw new xd;return c.then(u=>i(u,s,l))}return i(c,s,l)}}e["~standard"]={validate:i=>{var o;try{const a=Tce(e,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return Ace(e,i).then(a=>{var l;return a.success?{value:a.data}:{issues:(l=a.error)==null?void 0:l.issues}})}},vendor:"zod",version:1}}),JE=oe("$ZodString",(e,t)=>{var r;wr.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??oue(e._zod.bag),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Ut=oe("$ZodStringFormat",(e,t)=>{mx.init(e,t),JE.init(e,t)}),_ue=oe("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Hce),Ut.init(e,t)}),jue=oe("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ZP(r))}else t.pattern??(t.pattern=ZP());Ut.init(e,t)}),kue=oe("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Kce),Ut.init(e,t)}),Nue=oe("$ZodURL",(e,t)=>{Ut.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:tue.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Sue=oe("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Gce()),Ut.init(e,t)}),Eue=oe("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Vce),Ut.init(e,t)}),Cue=oe("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Fce),Ut.init(e,t)}),Tue=oe("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=$ce),Ut.init(e,t)}),Aue=oe("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Uce),Ut.init(e,t)}),Oue=oe("$ZodXID",(e,t)=>{t.pattern??(t.pattern=qce),Ut.init(e,t)}),Pue=oe("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Bce),Ut.init(e,t)}),Rue=oe("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=iue(t)),Ut.init(e,t)}),Iue=oe("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=nue),Ut.init(e,t)}),Due=oe("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=sue(t)),Ut.init(e,t)}),Lue=oe("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Wce),Ut.init(e,t)}),Mue=oe("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Yce),Ut.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),zue=oe("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Jce),Ut.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Fue=oe("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Xce),Ut.init(e,t)}),$ue=oe("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Qce),Ut.init(e,t),e._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function P1(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Uue=oe("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=eue),Ut.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{P1(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function que(e){if(!T1.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return P1(r)}const Bue=oe("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=T1),Ut.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{que(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Vue=oe("$ZodE164",(e,t)=>{t.pattern??(t.pattern=rue),Ut.init(e,t)});function Wue(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const Hue=oe("$ZodJWT",(e,t)=>{Ut.init(e,t),e._zod.check=r=>{Wue(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Kue=oe("$ZodBoolean",(e,t)=>{wr.init(e,t),e._zod.pattern=aue,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),Zue=oe("$ZodUnknown",(e,t)=>{wr.init(e,t),e._zod.parse=r=>r}),Gue=oe("$ZodNever",(e,t)=>{wr.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function GP(e,t,r){e.issues.length&&t.issues.push(...E1(r,e.issues)),t.value[r]=e.value}const Yue=oe("$ZodArray",(e,t)=>{wr.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=t.element._zod.run({value:a,issues:[]},n);l instanceof Promise?i.push(l.then(c=>GP(c,r,o))):GP(l,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function xv(e,t,r,n){e.issues.length&&t.issues.push(...E1(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function R1(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape[n]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const r=yce(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function I1(e,t,r,n,s,i){const o=[],a=s.keySet,l=s.catchall._zod,c=l.def.type;for(const u of Object.keys(t)){if(a.has(u))continue;if(c==="never"){o.push(u);continue}const h=l.run({value:t[u],issues:[]},n);h instanceof Promise?e.push(h.then(f=>xv(f,r,u,t))):xv(h,r,u,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const Jue=oe("$ZodObject",(e,t)=>{wr.init(e,t);const r=HE(()=>R1(t));Et(e._zod,"propValues",()=>{const o=t.shape,a={};for(const l in o){const c=o[l]._zod;if(c.values){a[l]??(a[l]=new Set);for(const u of c.values)a[l].add(u)}}return a});const n=bv,s=t.catchall;let i;e._zod.parse=(o,a)=>{i??(i=r.value);const l=o.value;if(!n(l))return o.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),o;o.value={};const c=[],u=i.shape;for(const h of i.keys){const f=u[h]._zod.run({value:l[h],issues:[]},a);f instanceof Promise?c.push(f.then(p=>xv(p,o,h,l))):xv(f,o,h,l)}return s?I1(c,l,o,a,r.value,e):c.length?Promise.all(c).then(()=>o):o}}),Xue=oe("$ZodObjectJIT",(e,t)=>{Jue.init(e,t);const r=e._zod.parse,n=HE(()=>R1(t)),s=h=>{const f=new xue(["shape","payload","ctx"]),p=n.value,y=w=>{const _=KP(w);return`shape[${_}]._zod.run({ value: input[${_}], issues: [] }, ctx)`};f.write("const input = payload.value;");const m=Object.create(null);let b=0;for(const w of p.keys)m[w]=`key_${b++}`;f.write("const newResult = {}");for(const w of p.keys){const _=m[w],j=KP(w);f.write(`const ${_} = ${y(w)};`),f.write(`
        if (${_}.issues.length) {
          payload.issues = payload.issues.concat(${_}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${j}, ...iss.path] : [${j}]
          })));
        }
        
        if (${_}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${_}.value;
        }
      `)}f.write("payload.value = newResult;"),f.write("return payload;");const x=f.compile();return(w,_)=>x(h,w,_)};let i;const o=bv,a=!k1.jitless,l=a&&mce.value,c=t.catchall;let u;e._zod.parse=(h,f)=>{u??(u=n.value);const p=h.value;return o(p)?a&&l&&(f==null?void 0:f.async)===!1&&f.jitless!==!0?(i||(i=s(t.shape)),h=i(h,f),c?I1([],p,h,f,u,e):h):r(h,f):(h.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),h)}});function YP(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const s=e.filter(i=>!od(i));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>Vc(o,n,Bc())))}),t)}const Que=oe("$ZodUnion",(e,t)=>{wr.init(e,t),Et(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Et(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Et(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),Et(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>ZE(i.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const l of t.options){const c=l._zod.run({value:s.value,issues:[]},i);if(c instanceof Promise)a.push(c),o=!0;else{if(c.issues.length===0)return c;a.push(c)}}return o?Promise.all(a).then(l=>YP(l,s,e,i)):YP(a,s,e,i)}}),ede=oe("$ZodIntersection",(e,t)=>{wr.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,i=t.left._zod.run({value:s,issues:[]},n),o=t.right._zod.run({value:s,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([a,l])=>JP(r,a,l)):JP(r,i,o)}});function fk(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Dp(e)&&Dp(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),s={...e,...t};for(const i of n){const o=fk(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],i=t[n],o=fk(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function JP(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),od(e))return e;const n=fk(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const tde=oe("$ZodEnum",(e,t)=>{wr.init(e,t);const r=fce(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>gce.has(typeof s)).map(s=>typeof s=="string"?cx(s):s.toString()).join("|")})$`),e._zod.parse=(s,i)=>{const o=s.value;return n.has(o)||s.issues.push({code:"invalid_value",values:r,input:o,inst:e}),s}}),rde=oe("$ZodTransform",(e,t)=>{wr.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new j1(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(r.value=i,r));if(s instanceof Promise)throw new xd;return r.value=s,r}});function XP(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const nde=oe("$ZodOptional",(e,t)=>{wr.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Et(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Et(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${ZE(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>XP(i,r.value)):XP(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),sde=oe("$ZodNullable",(e,t)=>{wr.init(e,t),Et(e._zod,"optin",()=>t.innerType._zod.optin),Et(e._zod,"optout",()=>t.innerType._zod.optout),Et(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${ZE(r.source)}|null)$`):void 0}),Et(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),ide=oe("$ZodDefault",(e,t)=>{wr.init(e,t),e._zod.optin="optional",Et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>QP(i,t)):QP(s,t)}});function QP(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const ode=oe("$ZodPrefault",(e,t)=>{wr.init(e,t),e._zod.optin="optional",Et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),ade=oe("$ZodNonOptional",(e,t)=>{wr.init(e,t),Et(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>eR(i,e)):eR(s,e)}});function eR(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const lde=oe("$ZodCatch",(e,t)=>{wr.init(e,t),Et(e._zod,"optin",()=>t.innerType._zod.optin),Et(e._zod,"optout",()=>t.innerType._zod.optout),Et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>Vc(o,n,Bc()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(i=>Vc(i,n,Bc()))},input:r.value}),r.issues=[]),r)}}),cde=oe("$ZodPipe",(e,t)=>{wr.init(e,t),Et(e._zod,"values",()=>t.in._zod.values),Et(e._zod,"optin",()=>t.in._zod.optin),Et(e._zod,"optout",()=>t.out._zod.optout),Et(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const i=t.out._zod.run(r,n);return i instanceof Promise?i.then(o=>Bg(o,t.in,n)):Bg(i,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(i=>Bg(i,t.out,n)):Bg(s,t.out,n)}});function Bg(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const ude=oe("$ZodReadonly",(e,t)=>{wr.init(e,t),Et(e._zod,"propValues",()=>t.innerType._zod.propValues),Et(e._zod,"values",()=>t.innerType._zod.values),Et(e._zod,"optin",()=>t.innerType._zod.optin),Et(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(tR):tR(s)}});function tR(e){return e.value=Object.freeze(e.value),e}const dde=oe("$ZodCustom",(e,t)=>{ho.init(e,t),wr.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(i=>rR(i,r,n,e));rR(s,r,n,e)}});function rR(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(Lp(s))}}class hde{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function fde(){return new hde}const Vg=fde();function pde(e,t){return new e({type:"string",...qe(t)})}function mde(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...qe(t)})}function nR(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...qe(t)})}function gde(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...qe(t)})}function yde(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...qe(t)})}function vde(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...qe(t)})}function bde(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...qe(t)})}function xde(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...qe(t)})}function wde(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...qe(t)})}function _de(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...qe(t)})}function jde(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...qe(t)})}function kde(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...qe(t)})}function Nde(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...qe(t)})}function Sde(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...qe(t)})}function Ede(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...qe(t)})}function Cde(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...qe(t)})}function Tde(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...qe(t)})}function Ade(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...qe(t)})}function Ode(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...qe(t)})}function Pde(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...qe(t)})}function Rde(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...qe(t)})}function Ide(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...qe(t)})}function Dde(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...qe(t)})}function Lde(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...qe(t)})}function Mde(e,t){return new e({type:"string",format:"date",check:"string_format",...qe(t)})}function zde(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...qe(t)})}function Fde(e,t){return new e({type:"string",format:"duration",check:"string_format",...qe(t)})}function $de(e,t){return new e({type:"boolean",...qe(t)})}function Ude(e){return new e({type:"unknown"})}function qde(e,t){return new e({type:"never",...qe(t)})}function D1(e,t){return new uue({check:"max_length",...qe(t),maximum:e})}function wv(e,t){return new due({check:"min_length",...qe(t),minimum:e})}function L1(e,t){return new hue({check:"length_equals",...qe(t),length:e})}function Bde(e,t){return new fue({check:"string_format",format:"regex",...qe(t),pattern:e})}function Vde(e){return new pue({check:"string_format",format:"lowercase",...qe(e)})}function Wde(e){return new mue({check:"string_format",format:"uppercase",...qe(e)})}function Hde(e,t){return new gue({check:"string_format",format:"includes",...qe(t),includes:e})}function Kde(e,t){return new yue({check:"string_format",format:"starts_with",...qe(t),prefix:e})}function Zde(e,t){return new vue({check:"string_format",format:"ends_with",...qe(t),suffix:e})}function Om(e){return new bue({check:"overwrite",tx:e})}function Gde(e){return Om(t=>t.normalize(e))}function Yde(){return Om(e=>e.trim())}function Jde(){return Om(e=>e.toLowerCase())}function Xde(){return Om(e=>e.toUpperCase())}function Qde(e,t,r){return new e({type:"array",element:t,...qe(r)})}function ehe(e,t,r){return new e({type:"custom",check:"custom",fn:t,...qe(r)})}function the(e){const t=rhe(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Lp(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(Lp(s))}},e(r.value,r)));return t}function rhe(e,t){const r=new ho({check:"custom",...qe(t)});return r._zod.check=e,r}function sR(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}function nhe(e,t){for(var r={};e.length;){var n=e[0],s=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var a=n.unionErrors[0].errors[0];r[o]={message:a.message,type:a.code}}else r[o]={message:i,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var l=r[o].types,c=l&&l[n.code];r[o]=BE(o,t,r,s,c?[].concat(c,n.message):n.message)}e.shift()}return r}function she(e,t){for(var r={};e.length;){var n=e[0],s=n.code,i=n.message,o=n.path.join(".");if(!r[o])if(n.code==="invalid_union"&&n.errors.length>0){var a=n.errors[0][0];r[o]={message:a.message,type:a.code}}else r[o]={message:i,type:s};if(n.code==="invalid_union"&&n.errors.forEach(function(u){return u.forEach(function(h){return e.push(h)})}),t){var l=r[o].types,c=l&&l[n.code];r[o]=BE(o,t,r,s,c?[].concat(c,n.message):n.message)}e.shift()}return r}function ihe(e,t,r){if(r===void 0&&(r={}),function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def}(e))return function(n,s,i){try{return Promise.resolve(sR(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(o){return i.shouldUseNativeValidation&&dk({},i),{errors:{},values:r.raw?Object.assign({},n):o}})},function(o){if(function(a){return Array.isArray(a==null?void 0:a.issues)}(o))return{values:{},errors:VP(nhe(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}};if(function(n){return"_zod"in n&&typeof n._zod=="object"}(e))return function(n,s,i){try{return Promise.resolve(sR(function(){return Promise.resolve((r.mode==="sync"?Ece:Cce)(e,n,t)).then(function(o){return i.shouldUseNativeValidation&&dk({},i),{errors:{},values:r.raw?Object.assign({},n):o}})},function(o){if(function(a){return a instanceof YE}(o))return{values:{},errors:VP(she(o.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}};throw new Error("Invalid input: not a Zod schema")}const ohe=oe("ZodISODateTime",(e,t)=>{Rue.init(e,t),Gt.init(e,t)});function ahe(e){return Lde(ohe,e)}const lhe=oe("ZodISODate",(e,t)=>{Iue.init(e,t),Gt.init(e,t)});function che(e){return Mde(lhe,e)}const uhe=oe("ZodISOTime",(e,t)=>{Due.init(e,t),Gt.init(e,t)});function dhe(e){return zde(uhe,e)}const hhe=oe("ZodISODuration",(e,t)=>{Lue.init(e,t),Gt.init(e,t)});function fhe(e){return Fde(hhe,e)}const phe=(e,t)=>{YE.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Sce(e,r)},flatten:{value:r=>Nce(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,hk,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,hk,2)}},isEmpty:{get(){return e.issues.length===0}}})},Us=oe("ZodError",phe,{Parent:Error}),mhe=dx(Us),ghe=hx(Us),yhe=fx(Us),vhe=px(Us),bhe=Oce(Us),xhe=Pce(Us),whe=Rce(Us),_he=Ice(Us),jhe=Dce(Us),khe=Lce(Us),Nhe=Mce(Us),She=zce(Us),Lr=oe("ZodType",(e,t)=>(wr.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>Cl(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>mhe(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>yhe(e,r,n),e.parseAsync=async(r,n)=>ghe(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>vhe(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>bhe(e,r,n),e.decode=(r,n)=>xhe(e,r,n),e.encodeAsync=async(r,n)=>whe(e,r,n),e.decodeAsync=async(r,n)=>_he(e,r,n),e.safeEncode=(r,n)=>jhe(e,r,n),e.safeDecode=(r,n)=>khe(e,r,n),e.safeEncodeAsync=async(r,n)=>Nhe(e,r,n),e.safeDecodeAsync=async(r,n)=>She(e,r,n),e.refine=(r,n)=>e.check(gfe(r,n)),e.superRefine=r=>e.check(yfe(r)),e.overwrite=r=>e.check(Om(r)),e.optional=()=>lR(e),e.nullable=()=>cR(e),e.nullish=()=>lR(cR(e)),e.nonoptional=r=>cfe(e,r),e.array=()=>z1(e),e.or=r=>Qhe([e,r]),e.and=r=>tfe(e,r),e.transform=r=>uR(e,nfe(r)),e.default=r=>ofe(e,r),e.prefault=r=>lfe(e,r),e.catch=r=>dfe(e,r),e.pipe=r=>uR(e,r),e.readonly=()=>pfe(e),e.describe=r=>{const n=e.clone();return Vg.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=Vg.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Vg.get(e);const n=e.clone();return Vg.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),M1=oe("_ZodString",(e,t)=>{JE.init(e,t),Lr.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Bde(...n)),e.includes=(...n)=>e.check(Hde(...n)),e.startsWith=(...n)=>e.check(Kde(...n)),e.endsWith=(...n)=>e.check(Zde(...n)),e.min=(...n)=>e.check(wv(...n)),e.max=(...n)=>e.check(D1(...n)),e.length=(...n)=>e.check(L1(...n)),e.nonempty=(...n)=>e.check(wv(1,...n)),e.lowercase=n=>e.check(Vde(n)),e.uppercase=n=>e.check(Wde(n)),e.trim=()=>e.check(Yde()),e.normalize=(...n)=>e.check(Gde(...n)),e.toLowerCase=()=>e.check(Jde()),e.toUpperCase=()=>e.check(Xde())}),Ehe=oe("ZodString",(e,t)=>{JE.init(e,t),M1.init(e,t),e.email=r=>e.check(mde(Che,r)),e.url=r=>e.check(xde(The,r)),e.jwt=r=>e.check(Dde(Vhe,r)),e.emoji=r=>e.check(wde(Ahe,r)),e.guid=r=>e.check(nR(iR,r)),e.uuid=r=>e.check(gde(Hg,r)),e.uuidv4=r=>e.check(yde(Hg,r)),e.uuidv6=r=>e.check(vde(Hg,r)),e.uuidv7=r=>e.check(bde(Hg,r)),e.nanoid=r=>e.check(_de(Ohe,r)),e.guid=r=>e.check(nR(iR,r)),e.cuid=r=>e.check(jde(Phe,r)),e.cuid2=r=>e.check(kde(Rhe,r)),e.ulid=r=>e.check(Nde(Ihe,r)),e.base64=r=>e.check(Pde(Uhe,r)),e.base64url=r=>e.check(Rde(qhe,r)),e.xid=r=>e.check(Sde(Dhe,r)),e.ksuid=r=>e.check(Ede(Lhe,r)),e.ipv4=r=>e.check(Cde(Mhe,r)),e.ipv6=r=>e.check(Tde(zhe,r)),e.cidrv4=r=>e.check(Ade(Fhe,r)),e.cidrv6=r=>e.check(Ode($he,r)),e.e164=r=>e.check(Ide(Bhe,r)),e.datetime=r=>e.check(ahe(r)),e.date=r=>e.check(che(r)),e.time=r=>e.check(dhe(r)),e.duration=r=>e.check(fhe(r))});function Wg(e){return pde(Ehe,e)}const Gt=oe("ZodStringFormat",(e,t)=>{Ut.init(e,t),M1.init(e,t)}),Che=oe("ZodEmail",(e,t)=>{kue.init(e,t),Gt.init(e,t)}),iR=oe("ZodGUID",(e,t)=>{_ue.init(e,t),Gt.init(e,t)}),Hg=oe("ZodUUID",(e,t)=>{jue.init(e,t),Gt.init(e,t)}),The=oe("ZodURL",(e,t)=>{Nue.init(e,t),Gt.init(e,t)}),Ahe=oe("ZodEmoji",(e,t)=>{Sue.init(e,t),Gt.init(e,t)}),Ohe=oe("ZodNanoID",(e,t)=>{Eue.init(e,t),Gt.init(e,t)}),Phe=oe("ZodCUID",(e,t)=>{Cue.init(e,t),Gt.init(e,t)}),Rhe=oe("ZodCUID2",(e,t)=>{Tue.init(e,t),Gt.init(e,t)}),Ihe=oe("ZodULID",(e,t)=>{Aue.init(e,t),Gt.init(e,t)}),Dhe=oe("ZodXID",(e,t)=>{Oue.init(e,t),Gt.init(e,t)}),Lhe=oe("ZodKSUID",(e,t)=>{Pue.init(e,t),Gt.init(e,t)}),Mhe=oe("ZodIPv4",(e,t)=>{Mue.init(e,t),Gt.init(e,t)}),zhe=oe("ZodIPv6",(e,t)=>{zue.init(e,t),Gt.init(e,t)}),Fhe=oe("ZodCIDRv4",(e,t)=>{Fue.init(e,t),Gt.init(e,t)}),$he=oe("ZodCIDRv6",(e,t)=>{$ue.init(e,t),Gt.init(e,t)}),Uhe=oe("ZodBase64",(e,t)=>{Uue.init(e,t),Gt.init(e,t)}),qhe=oe("ZodBase64URL",(e,t)=>{Bue.init(e,t),Gt.init(e,t)}),Bhe=oe("ZodE164",(e,t)=>{Vue.init(e,t),Gt.init(e,t)}),Vhe=oe("ZodJWT",(e,t)=>{Hue.init(e,t),Gt.init(e,t)}),Whe=oe("ZodBoolean",(e,t)=>{Kue.init(e,t),Lr.init(e,t)});function Hhe(e){return $de(Whe,e)}const Khe=oe("ZodUnknown",(e,t)=>{Zue.init(e,t),Lr.init(e,t)});function oR(){return Ude(Khe)}const Zhe=oe("ZodNever",(e,t)=>{Gue.init(e,t),Lr.init(e,t)});function Ghe(e){return qde(Zhe,e)}const Yhe=oe("ZodArray",(e,t)=>{Yue.init(e,t),Lr.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(wv(r,n)),e.nonempty=r=>e.check(wv(1,r)),e.max=(r,n)=>e.check(D1(r,n)),e.length=(r,n)=>e.check(L1(r,n)),e.unwrap=()=>e.element});function z1(e,t){return Qde(Yhe,e,t)}const Jhe=oe("ZodObject",(e,t)=>{Xue.init(e,t),Lr.init(e,t),Et(e,"shape",()=>t.shape),e.keyof=()=>mk(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:oR()}),e.loose=()=>e.clone({...e._zod.def,catchall:oR()}),e.strict=()=>e.clone({...e._zod.def,catchall:Ghe()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>xce(e,r),e.safeExtend=r=>wce(e,r),e.merge=r=>_ce(e,r),e.pick=r=>vce(e,r),e.omit=r=>bce(e,r),e.partial=(...r)=>jce(F1,e,r[0]),e.required=(...r)=>kce($1,e,r[0])});function aR(e,t){const r={type:"object",get shape(){return El(this,"shape",e?pce(e):{}),this.shape},...qe(t)};return new Jhe(r)}const Xhe=oe("ZodUnion",(e,t)=>{Que.init(e,t),Lr.init(e,t),e.options=t.options});function Qhe(e,t){return new Xhe({type:"union",options:e,...qe(t)})}const efe=oe("ZodIntersection",(e,t)=>{ede.init(e,t),Lr.init(e,t)});function tfe(e,t){return new efe({type:"intersection",left:e,right:t})}const pk=oe("ZodEnum",(e,t)=>{tde.init(e,t),Lr.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new pk({...t,checks:[],...qe(s),entries:i})},e.exclude=(n,s)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new pk({...t,checks:[],...qe(s),entries:i})}});function mk(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new pk({type:"enum",entries:r,...qe(t)})}const rfe=oe("ZodTransform",(e,t)=>{rde.init(e,t),Lr.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new j1(e.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Lp(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),r.issues.push(Lp(o))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(i=>(r.value=i,r)):(r.value=s,r)}});function nfe(e){return new rfe({type:"transform",transform:e})}const F1=oe("ZodOptional",(e,t)=>{nde.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lR(e){return new F1({type:"optional",innerType:e})}const sfe=oe("ZodNullable",(e,t)=>{sde.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function cR(e){return new sfe({type:"nullable",innerType:e})}const ife=oe("ZodDefault",(e,t)=>{ide.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function ofe(e,t){return new ife({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():S1(t)}})}const afe=oe("ZodPrefault",(e,t)=>{ode.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lfe(e,t){return new afe({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():S1(t)}})}const $1=oe("ZodNonOptional",(e,t)=>{ade.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function cfe(e,t){return new $1({type:"nonoptional",innerType:e,...qe(t)})}const ufe=oe("ZodCatch",(e,t)=>{lde.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function dfe(e,t){return new ufe({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const hfe=oe("ZodPipe",(e,t)=>{cde.init(e,t),Lr.init(e,t),e.in=t.in,e.out=t.out});function uR(e,t){return new hfe({type:"pipe",in:e,out:t})}const ffe=oe("ZodReadonly",(e,t)=>{ude.init(e,t),Lr.init(e,t),e.unwrap=()=>e._zod.def.innerType});function pfe(e){return new ffe({type:"readonly",innerType:e})}const mfe=oe("ZodCustom",(e,t)=>{dde.init(e,t),Lr.init(e,t)});function gfe(e,t={}){return ehe(mfe,e,t)}function yfe(e){return the(e)}const pi=v.forwardRef(({className:e,type:t,...r},n)=>d.jsx("input",{type:t,className:Je("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));pi.displayName="Input";var vfe="Label",U1=v.forwardRef((e,t)=>d.jsx(Vr.label,{...e,ref:t,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));U1.displayName=vfe;var q1=U1;const bfe=Jb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),js=v.forwardRef(({className:e,...t},r)=>d.jsx(q1,{ref:r,className:Je(bfe(),e),...t}));js.displayName=q1.displayName;const XE=v.forwardRef(({className:e,...t},r)=>d.jsx("textarea",{className:Je("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));XE.displayName="Textarea";function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wt.apply(null,arguments)}function dR(e,[t,r]){return Math.min(r,Math.max(t,e))}function kn(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function QE(e,t=[]){let r=[];function n(i,o){const a=v.createContext(o),l=r.length;r=[...r,o];function c(h){const{scope:f,children:p,...y}=h,m=(f==null?void 0:f[e][l])||a,b=v.useMemo(()=>y,Object.values(y));return v.createElement(m.Provider,{value:b},p)}function u(h,f){const p=(f==null?void 0:f[e][l])||a,y=v.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=r.map(o=>v.createContext(o));return function(o){const a=(o==null?void 0:o[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return s.scopeName=e,[n,xfe(s,...t)]}function xfe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const i=n.reduce((o,{useScope:a,scopeName:l})=>{const c=a(s)[`__scope${l}`];return{...o,...c}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function wfe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function B1(...e){return t=>e.forEach(r=>wfe(r,t))}function Kn(...e){return v.useCallback(B1(...e),e)}const Mp=v.forwardRef((e,t)=>{const{children:r,...n}=e,s=v.Children.toArray(r),i=s.find(jfe);if(i){const o=i.props.children,a=s.map(l=>l===i?v.Children.count(o)>1?v.Children.only(null):v.isValidElement(o)?o.props.children:null:l);return v.createElement(gk,wt({},n,{ref:t}),v.isValidElement(o)?v.cloneElement(o,void 0,a):null)}return v.createElement(gk,wt({},n,{ref:t}),r)});Mp.displayName="Slot";const gk=v.forwardRef((e,t)=>{const{children:r,...n}=e;return v.isValidElement(r)?v.cloneElement(r,{...kfe(n,r.props),ref:t?B1(t,r.ref):r.ref}):v.Children.count(r)>1?v.Children.only(null):null});gk.displayName="SlotClone";const _fe=({children:e})=>v.createElement(v.Fragment,null,e);function jfe(e){return v.isValidElement(e)&&e.type===_fe}function kfe(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...o)=>{i(...o),s(...o)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Nfe(e){const t=e+"CollectionProvider",[r,n]=QE(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:m}=p,b=ae.useRef(null),x=ae.useRef(new Map).current;return ae.createElement(s,{scope:y,itemMap:x,collectionRef:b},m)},a=e+"CollectionSlot",l=ae.forwardRef((p,y)=>{const{scope:m,children:b}=p,x=i(a,m),w=Kn(y,x.collectionRef);return ae.createElement(Mp,{ref:w},b)}),c=e+"CollectionItemSlot",u="data-radix-collection-item",h=ae.forwardRef((p,y)=>{const{scope:m,children:b,...x}=p,w=ae.useRef(null),_=Kn(y,w),j=i(c,m);return ae.useEffect(()=>(j.itemMap.set(w,{ref:w,...x}),()=>void j.itemMap.delete(w))),ae.createElement(Mp,{[u]:"",ref:_},b)});function f(p){const y=i(e+"CollectionConsumer",p);return ae.useCallback(()=>{const m=y.collectionRef.current;if(!m)return[];const b=Array.from(m.querySelectorAll(`[${u}]`));return Array.from(y.itemMap.values()).sort((x,w)=>b.indexOf(x.ref.current)-b.indexOf(w.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},f,n]}const Sfe=v.createContext(void 0);function Efe(e){const t=v.useContext(Sfe);return e||t||"ltr"}const Cfe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],mn=Cfe.reduce((e,t)=>{const r=v.forwardRef((n,s)=>{const{asChild:i,...o}=n,a=i?Mp:t;return v.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),v.createElement(a,wt({},o,{ref:s}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Tfe(e,t){e&&ro.flushSync(()=>e.dispatchEvent(t))}function Jo(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function Afe(e,t=globalThis==null?void 0:globalThis.document){const r=Jo(e);v.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[r,t])}const yk="dismissableLayer.update",Ofe="dismissableLayer.pointerDownOutside",Pfe="dismissableLayer.focusOutside";let hR;const Rfe=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ife=v.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=v.useContext(Rfe),[h,f]=v.useState(null),p=(r=h==null?void 0:h.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,y]=v.useState({}),m=Kn(t,E=>f(E)),b=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(x),_=h?b.indexOf(h):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,k=_>=w,N=Dfe(E=>{const T=E.target,P=[...u.branches].some(O=>O.contains(T));!k||P||(i==null||i(E),a==null||a(E),E.defaultPrevented||l==null||l())},p),C=Lfe(E=>{const T=E.target;[...u.branches].some(P=>P.contains(T))||(o==null||o(E),a==null||a(E),E.defaultPrevented||l==null||l())},p);return Afe(E=>{_===u.layers.size-1&&(s==null||s(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),v.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(hR=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),fR(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=hR)}},[h,p,n,u]),v.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),fR())},[h,u]),v.useEffect(()=>{const E=()=>y({});return document.addEventListener(yk,E),()=>document.removeEventListener(yk,E)},[]),v.createElement(mn.div,wt({},c,{ref:m,style:{pointerEvents:j?k?"auto":"none":void 0,...e.style},onFocusCapture:kn(e.onFocusCapture,C.onFocusCapture),onBlurCapture:kn(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:kn(e.onPointerDownCapture,N.onPointerDownCapture)}))});function Dfe(e,t=globalThis==null?void 0:globalThis.document){const r=Jo(e),n=v.useRef(!1),s=v.useRef(()=>{});return v.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){V1(Ofe,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Lfe(e,t=globalThis==null?void 0:globalThis.document){const r=Jo(e),n=v.useRef(!1);return v.useEffect(()=>{const s=i=>{i.target&&!n.current&&V1(Pfe,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function fR(){const e=new CustomEvent(yk);document.dispatchEvent(e)}function V1(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Tfe(s,i):s.dispatchEvent(i)}let K0=0;function Mfe(){v.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:pR()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:pR()),K0++,()=>{K0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),K0--}},[])}function pR(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const Z0="focusScope.autoFocusOnMount",G0="focusScope.autoFocusOnUnmount",mR={bubbles:!1,cancelable:!0},zfe=v.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[a,l]=v.useState(null),c=Jo(s),u=Jo(i),h=v.useRef(null),f=Kn(t,m=>l(m)),p=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(n){let m=function(_){if(p.paused||!a)return;const j=_.target;a.contains(j)?h.current=j:Fa(h.current,{select:!0})},b=function(_){if(p.paused||!a)return;const j=_.relatedTarget;j!==null&&(a.contains(j)||Fa(h.current,{select:!0}))},x=function(_){const j=document.activeElement;for(const k of _)k.removedNodes.length>0&&(a!=null&&a.contains(j)||Fa(a))};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),w.disconnect()}}},[n,a,p.paused]),v.useEffect(()=>{if(a){yR.add(p);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(Z0,mR);a.addEventListener(Z0,c),a.dispatchEvent(b),b.defaultPrevented||(Ffe(Vfe(W1(a)),{select:!0}),document.activeElement===m&&Fa(a))}return()=>{a.removeEventListener(Z0,c),setTimeout(()=>{const b=new CustomEvent(G0,mR);a.addEventListener(G0,u),a.dispatchEvent(b),b.defaultPrevented||Fa(m??document.body,{select:!0}),a.removeEventListener(G0,u),yR.remove(p)},0)}}},[a,c,u,p]);const y=v.useCallback(m=>{if(!r&&!n||p.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(b&&x){const w=m.currentTarget,[_,j]=$fe(w);_&&j?!m.shiftKey&&x===j?(m.preventDefault(),r&&Fa(_,{select:!0})):m.shiftKey&&x===_&&(m.preventDefault(),r&&Fa(j,{select:!0})):x===w&&m.preventDefault()}},[r,n,p.paused]);return v.createElement(mn.div,wt({tabIndex:-1},o,{ref:f,onKeyDown:y}))});function Ffe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Fa(n,{select:t}),document.activeElement!==r)return}function $fe(e){const t=W1(e),r=gR(t,e),n=gR(t.reverse(),e);return[r,n]}function W1(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function gR(e,t){for(const r of e)if(!Ufe(r,{upTo:t}))return r}function Ufe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function qfe(e){return e instanceof HTMLInputElement&&"select"in e}function Fa(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&qfe(e)&&t&&e.select()}}const yR=Bfe();function Bfe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=vR(e,t),e.unshift(t)},remove(t){var r;e=vR(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function vR(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Vfe(e){return e.filter(t=>t.tagName!=="A")}const Xo=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},Wfe=v.useId||(()=>{});let Hfe=0;function H1(e){const[t,r]=v.useState(Wfe());return Xo(()=>{r(n=>n??String(Hfe++))},[e]),t?`radix-${t}`:""}const Kfe=["top","right","bottom","left"],ml=Math.min,es=Math.max,_v=Math.round,Kg=Math.floor,Zi=e=>({x:e,y:e}),Zfe={left:"right",right:"left",bottom:"top",top:"bottom"},Gfe={start:"end",end:"start"};function vk(e,t,r){return es(e,ml(t,r))}function Qo(e,t){return typeof e=="function"?e(t):e}function ea(e){return e.split("-")[0]}function Rh(e){return e.split("-")[1]}function e2(e){return e==="x"?"y":"x"}function t2(e){return e==="y"?"height":"width"}const Yfe=new Set(["top","bottom"]);function Wi(e){return Yfe.has(ea(e))?"y":"x"}function r2(e){return e2(Wi(e))}function Jfe(e,t,r){r===void 0&&(r=!1);const n=Rh(e),s=r2(e),i=t2(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=jv(o)),[o,jv(o)]}function Xfe(e){const t=jv(e);return[bk(e),t,bk(t)]}function bk(e){return e.replace(/start|end/g,t=>Gfe[t])}const bR=["left","right"],xR=["right","left"],Qfe=["top","bottom"],epe=["bottom","top"];function tpe(e,t,r){switch(e){case"top":case"bottom":return r?t?xR:bR:t?bR:xR;case"left":case"right":return t?Qfe:epe;default:return[]}}function rpe(e,t,r,n){const s=Rh(e);let i=tpe(ea(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(bk)))),i}function jv(e){return e.replace(/left|right|bottom|top/g,t=>Zfe[t])}function npe(e){return{top:0,right:0,bottom:0,left:0,...e}}function K1(e){return typeof e!="number"?npe(e):{top:e,right:e,bottom:e,left:e}}function kv(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function wR(e,t,r){let{reference:n,floating:s}=e;const i=Wi(t),o=r2(t),a=t2(o),l=ea(t),c=i==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:n.y-s.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(Rh(t)){case"start":p[o]-=f*(r&&c?-1:1);break;case"end":p[o]+=f*(r&&c?-1:1);break}return p}const spe=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=wR(c,n,l),f=n,p={},y=0;for(let m=0;m<a.length;m++){const{name:b,fn:x}=a[m],{x:w,y:_,data:j,reset:k}=await x({x:u,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});u=w??u,h=_??h,p={...p,[b]:{...p[b],...j}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:u,y:h}=wR(c,f,l)),m=-1)}return{x:u,y:h,placement:f,strategy:s,middlewareData:p}};async function zp(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Qo(t,e),y=K1(p),m=a[f?h==="floating"?"reference":"floating":h],b=kv(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(m)))==null||r?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=kv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(b.top-j.top+y.top)/_.y,bottom:(j.bottom-b.bottom+y.bottom)/_.y,left:(b.left-j.left+y.left)/_.x,right:(j.right-b.right+y.right)/_.x}}const ipe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Qo(e,t)||{};if(c==null)return{};const h=K1(u),f={x:r,y:n},p=r2(s),y=t2(p),m=await o.getDimensions(c),b=p==="y",x=b?"top":"left",w=b?"bottom":"right",_=b?"clientHeight":"clientWidth",j=i.reference[y]+i.reference[p]-f[p]-i.floating[y],k=f[p]-i.reference[p],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=N?N[_]:0;(!C||!await(o.isElement==null?void 0:o.isElement(N)))&&(C=a.floating[_]||i.floating[y]);const E=j/2-k/2,T=C/2-m[y]/2-1,P=ml(h[x],T),O=ml(h[w],T),I=P,R=C-m[y]-O,F=C/2-m[y]/2+E,$=vk(I,F,R),W=!l.arrow&&Rh(s)!=null&&F!==$&&i.reference[y]/2-(F<I?P:O)-m[y]/2<0,q=W?F<I?F-I:F-R:0;return{[p]:f[p]+q,data:{[p]:$,centerOffset:F-$-q,...W&&{alignmentOffset:q}},reset:W}}}),ope=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...b}=Qo(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=ea(s),w=Wi(a),_=ea(a)===a,j=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(_||!m?[jv(a)]:Xfe(a)),N=y!=="none";!f&&N&&k.push(...rpe(a,m,y,j));const C=[a,...k],E=await zp(t,b),T=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&T.push(E[x]),h){const F=Jfe(s,o,j);T.push(E[F[0]],E[F[1]])}if(P=[...P,{placement:s,overflows:T}],!T.every(F=>F<=0)){var O,I;const F=(((O=i.flip)==null?void 0:O.index)||0)+1,$=C[F];if($&&(!(h==="alignment"&&w!==Wi($))||P.every(q=>Wi(q.placement)===w?q.overflows[0]>0:!0)))return{data:{index:F,overflows:P},reset:{placement:$}};let W=(I=P.filter(q=>q.overflows[0]<=0).sort((q,K)=>q.overflows[1]-K.overflows[1])[0])==null?void 0:I.placement;if(!W)switch(p){case"bestFit":{var R;const q=(R=P.filter(K=>{if(N){const Z=Wi(K.placement);return Z===w||Z==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(Z=>Z>0).reduce((Z,z)=>Z+z,0)]).sort((K,Z)=>K[1]-Z[1])[0])==null?void 0:R[0];q&&(W=q);break}case"initialPlacement":W=a;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function _R(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jR(e){return Kfe.some(t=>e[t]>=0)}const ape=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Qo(e,t);switch(n){case"referenceHidden":{const i=await zp(t,{...s,elementContext:"reference"}),o=_R(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:jR(o)}}}case"escaped":{const i=await zp(t,{...s,altBoundary:!0}),o=_R(i,r.floating);return{data:{escapedOffsets:o,escaped:jR(o)}}}default:return{}}}}},Z1=new Set(["left","top"]);async function lpe(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=ea(r),a=Rh(r),l=Wi(r)==="y",c=Z1.has(o)?-1:1,u=i&&l?-1:1,h=Qo(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof y=="number"&&(p=a==="end"?y*-1:y),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const cpe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:a}=t,l=await lpe(t,e);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},upe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x,y:w}=b;return{x,y:w}}},...l}=Qo(e,t),c={x:r,y:n},u=await zp(t,l),h=Wi(ea(s)),f=e2(h);let p=c[f],y=c[h];if(i){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=p+u[b],_=p-u[x];p=vk(w,p,_)}if(o){const b=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=y+u[b],_=y-u[x];y=vk(w,y,_)}const m=a.fn({...t,[f]:p,[h]:y});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[f]:i,[h]:o}}}}}},dpe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Qo(e,t),u={x:r,y:n},h=Wi(s),f=e2(h);let p=u[f],y=u[h];const m=Qo(a,t),b=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const _=f==="y"?"height":"width",j=i.reference[f]-i.floating[_]+b.mainAxis,k=i.reference[f]+i.reference[_]-b.mainAxis;p<j?p=j:p>k&&(p=k)}if(c){var x,w;const _=f==="y"?"width":"height",j=Z1.has(ea(s)),k=i.reference[h]-i.floating[_]+(j&&((x=o.offset)==null?void 0:x[h])||0)+(j?0:b.crossAxis),N=i.reference[h]+i.reference[_]+(j?0:((w=o.offset)==null?void 0:w[h])||0)-(j?b.crossAxis:0);y<k?y=k:y>N&&(y=N)}return{[f]:p,[h]:y}}}},hpe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:o,elements:a}=t,{apply:l=()=>{},...c}=Qo(e,t),u=await zp(t,c),h=ea(s),f=Rh(s),p=Wi(s)==="y",{width:y,height:m}=i.floating;let b,x;h==="top"||h==="bottom"?(b=h,x=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=h,b=f==="end"?"top":"bottom");const w=m-u.top-u.bottom,_=y-u.left-u.right,j=ml(m-u[b],w),k=ml(y-u[x],_),N=!t.middlewareData.shift;let C=j,E=k;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(E=_),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(C=w),N&&!f){const P=es(u.left,0),O=es(u.right,0),I=es(u.top,0),R=es(u.bottom,0);p?E=y-2*(P!==0||O!==0?P+O:es(u.left,u.right)):C=m-2*(I!==0||R!==0?I+R:es(u.top,u.bottom))}await l({...t,availableWidth:E,availableHeight:C});const T=await o.getDimensions(a.floating);return y!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function gx(){return typeof window<"u"}function Ih(e){return G1(e)?(e.nodeName||"").toLowerCase():"#document"}function is(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fo(e){var t;return(t=(G1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function G1(e){return gx()?e instanceof Node||e instanceof is(e).Node:!1}function bi(e){return gx()?e instanceof Element||e instanceof is(e).Element:!1}function no(e){return gx()?e instanceof HTMLElement||e instanceof is(e).HTMLElement:!1}function kR(e){return!gx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof is(e).ShadowRoot}const fpe=new Set(["inline","contents"]);function Pm(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=xi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!fpe.has(s)}const ppe=new Set(["table","td","th"]);function mpe(e){return ppe.has(Ih(e))}const gpe=[":popover-open",":modal"];function yx(e){return gpe.some(t=>{try{return e.matches(t)}catch{return!1}})}const ype=["transform","translate","scale","rotate","perspective"],vpe=["transform","translate","scale","rotate","perspective","filter"],bpe=["paint","layout","strict","content"];function n2(e){const t=s2(),r=bi(e)?xi(e):e;return ype.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||vpe.some(n=>(r.willChange||"").includes(n))||bpe.some(n=>(r.contain||"").includes(n))}function xpe(e){let t=gl(e);for(;no(t)&&!Xd(t);){if(n2(t))return t;if(yx(t))return null;t=gl(t)}return null}function s2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wpe=new Set(["html","body","#document"]);function Xd(e){return wpe.has(Ih(e))}function xi(e){return is(e).getComputedStyle(e)}function vx(e){return bi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function gl(e){if(Ih(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kR(e)&&e.host||fo(e);return kR(t)?t.host:t}function Y1(e){const t=gl(e);return Xd(t)?e.ownerDocument?e.ownerDocument.body:e.body:no(t)&&Pm(t)?t:Y1(t)}function Fp(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Y1(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=is(s);if(i){const a=xk(o);return t.concat(o,o.visualViewport||[],Pm(s)?s:[],a&&r?Fp(a):[])}return t.concat(s,Fp(s,[],r))}function xk(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function J1(e){const t=xi(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=no(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,a=_v(r)!==i||_v(n)!==o;return a&&(r=i,n=o),{width:r,height:n,$:a}}function i2(e){return bi(e)?e:e.contextElement}function wd(e){const t=i2(e);if(!no(t))return Zi(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=J1(t);let o=(i?_v(r.width):r.width)/n,a=(i?_v(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const _pe=Zi(0);function X1(e){const t=is(e);return!s2()||!t.visualViewport?_pe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function jpe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==is(e)?!1:t}function Wc(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=i2(e);let o=Zi(1);t&&(n?bi(n)&&(o=wd(n)):o=wd(e));const a=jpe(i,r,n)?X1(i):Zi(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const f=is(i),p=n&&bi(n)?is(n):n;let y=f,m=xk(y);for(;m&&n&&p!==y;){const b=wd(m),x=m.getBoundingClientRect(),w=xi(m),_=x.left+(m.clientLeft+parseFloat(w.paddingLeft))*b.x,j=x.top+(m.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,h*=b.y,l+=_,c+=j,y=is(m),m=xk(y)}}return kv({width:u,height:h,x:l,y:c})}function bx(e,t){const r=vx(e).scrollLeft;return t?t.left+r:Wc(fo(e)).left+r}function Q1(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-bx(e,r),s=r.top+t.scrollTop;return{x:n,y:s}}function kpe(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=fo(n),a=t?yx(t.floating):!1;if(n===o||a&&i)return r;let l={scrollLeft:0,scrollTop:0},c=Zi(1);const u=Zi(0),h=no(n);if((h||!h&&!i)&&((Ih(n)!=="body"||Pm(o))&&(l=vx(n)),no(n))){const p=Wc(n);c=wd(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const f=o&&!h&&!i?Q1(o,l):Zi(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:r.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Npe(e){return Array.from(e.getClientRects())}function Spe(e){const t=fo(e),r=vx(e),n=e.ownerDocument.body,s=es(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=es(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+bx(e);const a=-r.scrollTop;return xi(n).direction==="rtl"&&(o+=es(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}const NR=25;function Epe(e,t){const r=is(e),n=fo(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=s2();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=bx(n);if(c<=0){const u=n.ownerDocument,h=u.body,f=getComputedStyle(h),p=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,y=Math.abs(n.clientWidth-h.clientWidth-p);y<=NR&&(i-=y)}else c<=NR&&(i+=c);return{width:i,height:o,x:a,y:l}}const Cpe=new Set(["absolute","fixed"]);function Tpe(e,t){const r=Wc(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=no(e)?wd(e):Zi(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,l=s*i.x,c=n*i.y;return{width:o,height:a,x:l,y:c}}function SR(e,t,r){let n;if(t==="viewport")n=Epe(e,r);else if(t==="document")n=Spe(fo(e));else if(bi(t))n=Tpe(t,r);else{const s=X1(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return kv(n)}function e$(e,t){const r=gl(e);return r===t||!bi(r)||Xd(r)?!1:xi(r).position==="fixed"||e$(r,t)}function Ape(e,t){const r=t.get(e);if(r)return r;let n=Fp(e,[],!1).filter(a=>bi(a)&&Ih(a)!=="body"),s=null;const i=xi(e).position==="fixed";let o=i?gl(e):e;for(;bi(o)&&!Xd(o);){const a=xi(o),l=n2(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&s&&Cpe.has(s.position)||Pm(o)&&!l&&e$(e,o))?n=n.filter(c=>c!==o):s=a,o=gl(o)}return t.set(e,n),n}function Ope(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?yx(t)?[]:Ape(t,this._c):[].concat(r),n],o=i[0],a=i.reduce((l,c)=>{const u=SR(t,c,s);return l.top=es(u.top,l.top),l.right=ml(u.right,l.right),l.bottom=ml(u.bottom,l.bottom),l.left=es(u.left,l.left),l},SR(t,o,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Ppe(e){const{width:t,height:r}=J1(e);return{width:t,height:r}}function Rpe(e,t,r){const n=no(t),s=fo(t),i=r==="fixed",o=Wc(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=Zi(0);function c(){l.x=bx(s)}if(n||!n&&!i)if((Ih(t)!=="body"||Pm(s))&&(a=vx(t)),n){const p=Wc(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else s&&c();i&&!n&&s&&c();const u=s&&!n&&!i?Q1(s,a):Zi(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function Y0(e){return xi(e).position==="static"}function ER(e,t){if(!no(e)||xi(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return fo(e)===r&&(r=r.ownerDocument.body),r}function t$(e,t){const r=is(e);if(yx(e))return r;if(!no(e)){let s=gl(e);for(;s&&!Xd(s);){if(bi(s)&&!Y0(s))return s;s=gl(s)}return r}let n=ER(e,t);for(;n&&mpe(n)&&Y0(n);)n=ER(n,t);return n&&Xd(n)&&Y0(n)&&!n2(n)?r:n||xpe(e)||r}const Ipe=async function(e){const t=this.getOffsetParent||t$,r=this.getDimensions,n=await r(e.floating);return{reference:Rpe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Dpe(e){return xi(e).direction==="rtl"}const Lpe={convertOffsetParentRelativeRectToViewportRelativeRect:kpe,getDocumentElement:fo,getClippingRect:Ope,getOffsetParent:t$,getElementRects:Ipe,getClientRects:Npe,getDimensions:Ppe,getScale:wd,isElement:bi,isRTL:Dpe};function r$(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Mpe(e,t){let r=null,n;const s=fo(e);function i(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=c;if(a||t(),!f||!p)return;const y=Kg(h),m=Kg(s.clientWidth-(u+f)),b=Kg(s.clientHeight-(h+p)),x=Kg(u),w={rootMargin:-y+"px "+-m+"px "+-b+"px "+-x+"px",threshold:es(0,ml(1,l))||1};let _=!0;function j(k){const N=k[0].intersectionRatio;if(N!==l){if(!_)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!r$(c,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function zpe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=i2(e),u=s||i?[...c?Fp(c):[],...Fp(t)]:[];u.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const h=c&&a?Mpe(c,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(x=>{let[w]=x;w&&w.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let y,m=l?Wc(e):null;l&&b();function b(){const x=Wc(e);m&&!r$(m,x)&&r(),m=x,y=requestAnimationFrame(b)}return r(),()=>{var x;u.forEach(w=>{s&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),h==null||h(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const Fpe=cpe,$pe=upe,Upe=ope,qpe=hpe,Bpe=ape,CR=ipe,Vpe=dpe,Wpe=(e,t,r)=>{const n=new Map,s={platform:Lpe,...r},i={...s.platform,_c:n};return spe(e,t,{...s,platform:i})};var Hpe=typeof document<"u",Kpe=function(){},Dy=Hpe?v.useLayoutEffect:Kpe;function Nv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Nv(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!Nv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function n$(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function TR(e,t){const r=n$(e);return Math.round(t*r)/r}function J0(e){const t=v.useRef(e);return Dy(()=>{t.current=e}),t}function Zpe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,h]=v.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=v.useState(n);Nv(f,n)||p(n);const[y,m]=v.useState(null),[b,x]=v.useState(null),w=v.useCallback(K=>{K!==N.current&&(N.current=K,m(K))},[]),_=v.useCallback(K=>{K!==C.current&&(C.current=K,x(K))},[]),j=i||y,k=o||b,N=v.useRef(null),C=v.useRef(null),E=v.useRef(u),T=l!=null,P=J0(l),O=J0(s),I=J0(c),R=v.useCallback(()=>{if(!N.current||!C.current)return;const K={placement:t,strategy:r,middleware:f};O.current&&(K.platform=O.current),Wpe(N.current,C.current,K).then(Z=>{const z={...Z,isPositioned:I.current!==!1};F.current&&!Nv(E.current,z)&&(E.current=z,ro.flushSync(()=>{h(z)}))})},[f,t,r,O,I]);Dy(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[c]);const F=v.useRef(!1);Dy(()=>(F.current=!0,()=>{F.current=!1}),[]),Dy(()=>{if(j&&(N.current=j),k&&(C.current=k),j&&k){if(P.current)return P.current(j,k,R);R()}},[j,k,R,P,T]);const $=v.useMemo(()=>({reference:N,floating:C,setReference:w,setFloating:_}),[w,_]),W=v.useMemo(()=>({reference:j,floating:k}),[j,k]),q=v.useMemo(()=>{const K={position:r,left:0,top:0};if(!W.floating)return K;const Z=TR(W.floating,u.x),z=TR(W.floating,u.y);return a?{...K,transform:"translate("+Z+"px, "+z+"px)",...n$(W.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Z,top:z}},[r,a,W.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:R,refs:$,elements:W,floatingStyles:q}),[u,R,$,W,q])}const Gpe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?CR({element:n.current,padding:s}).fn(r):{}:n?CR({element:n,padding:s}).fn(r):{}}}},Ype=(e,t)=>({...Fpe(e),options:[e,t]}),Jpe=(e,t)=>({...$pe(e),options:[e,t]}),Xpe=(e,t)=>({...Vpe(e),options:[e,t]}),Qpe=(e,t)=>({...Upe(e),options:[e,t]}),eme=(e,t)=>({...qpe(e),options:[e,t]}),tme=(e,t)=>({...Bpe(e),options:[e,t]}),rme=(e,t)=>({...Gpe(e),options:[e,t]});function nme(e){const[t,r]=v.useState(void 0);return Xo(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;r({width:o,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}const s$="Popper",[i$,o$]=QE(s$),[sme,a$]=i$(s$),ime=e=>{const{__scopePopper:t,children:r}=e,[n,s]=v.useState(null);return v.createElement(sme,{scope:t,anchor:n,onAnchorChange:s},r)},ome="PopperAnchor",ame=v.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=a$(ome,r),o=v.useRef(null),a=Kn(t,o);return v.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:v.createElement(mn.div,wt({},s,{ref:a}))}),l$="PopperContent",[lme,Bqe]=i$(l$),cme=v.forwardRef((e,t)=>{var r,n,s,i,o,a,l,c;const{__scopePopper:u,side:h="bottom",sideOffset:f=0,align:p="center",alignOffset:y=0,arrowPadding:m=0,collisionBoundary:b=[],collisionPadding:x=0,sticky:w="partial",hideWhenDetached:_=!1,avoidCollisions:j=!0,onPlaced:k,...N}=e,C=a$(l$,u),[E,T]=v.useState(null),P=Kn(t,Re=>T(Re)),[O,I]=v.useState(null),R=nme(O),F=(r=R==null?void 0:R.width)!==null&&r!==void 0?r:0,$=(n=R==null?void 0:R.height)!==null&&n!==void 0?n:0,W=h+(p!=="center"?"-"+p:""),q=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},K=Array.isArray(b)?b:[b],Z=K.length>0,z={padding:q,boundary:K.filter(ume),altBoundary:Z},{refs:J,floatingStyles:te,placement:be,isPositioned:H,middlewareData:G}=Zpe({strategy:"fixed",placement:W,whileElementsMounted:zpe,elements:{reference:C.anchor},middleware:[Ype({mainAxis:f+$,alignmentAxis:y}),j&&Jpe({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?Xpe():void 0,...z}),j&&Qpe({...z}),eme({...z,apply:({elements:Re,rects:Qe,availableWidth:Xe,availableHeight:pt})=>{const{width:Jt,height:D}=Qe.reference,B=Re.floating.style;B.setProperty("--radix-popper-available-width",`${Xe}px`),B.setProperty("--radix-popper-available-height",`${pt}px`),B.setProperty("--radix-popper-anchor-width",`${Jt}px`),B.setProperty("--radix-popper-anchor-height",`${D}px`)}}),O&&rme({element:O,padding:m}),dme({arrowWidth:F,arrowHeight:$}),_&&tme({strategy:"referenceHidden"})]}),[fe,pe]=c$(be),ke=Jo(k);Xo(()=>{H&&(ke==null||ke())},[H,ke]);const V=(s=G.arrow)===null||s===void 0?void 0:s.x,X=(i=G.arrow)===null||i===void 0?void 0:i.y,le=((o=G.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[U,Se]=v.useState();return Xo(()=>{E&&Se(window.getComputedStyle(E).zIndex)},[E]),v.createElement("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:H?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[(a=G.transformOrigin)===null||a===void 0?void 0:a.x,(l=G.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:e.dir},v.createElement(lme,{scope:u,placedSide:fe,onArrowChange:I,arrowX:V,arrowY:X,shouldHideArrow:le},v.createElement(mn.div,wt({"data-side":fe,"data-align":pe},N,{ref:P,style:{...N.style,animation:H?void 0:"none",opacity:(c=G.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function ume(e){return e!==null}const dme=e=>({name:"transformOrigin",options:e,fn(t){var r,n,s,i,o;const{placement:a,rects:l,middlewareData:c}=t,u=((r=c.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,h=u?0:e.arrowWidth,f=u?0:e.arrowHeight,[p,y]=c$(a),m={start:"0%",center:"50%",end:"100%"}[y],b=((n=(s=c.arrow)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0)+h/2,x=((i=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+f/2;let w="",_="";return p==="bottom"?(w=u?m:`${b}px`,_=`${-f}px`):p==="top"?(w=u?m:`${b}px`,_=`${l.floating.height+f}px`):p==="right"?(w=`${-f}px`,_=u?m:`${x}px`):p==="left"&&(w=`${l.floating.width+f}px`,_=u?m:`${x}px`),{data:{x:w,y:_}}}});function c$(e){const[t,r="center"]=e.split("-");return[t,r]}const hme=ime,fme=ame,pme=cme,mme=v.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...s}=e;return n?wM.createPortal(v.createElement(mn.div,wt({},s,{ref:t})),n):null});function AR({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=gme({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:n,a=Jo(r),l=v.useCallback(c=>{if(i){const u=typeof c=="function"?c(e):c;u!==e&&a(u)}else s(c)},[i,e,s,a]);return[o,l]}function gme({defaultProp:e,onChange:t}){const r=v.useState(e),[n]=r,s=v.useRef(n),i=Jo(t);return v.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}function yme(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const vme=v.forwardRef((e,t)=>v.createElement(mn.span,wt({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var u$=bz(),X0=function(){},xx=v.forwardRef(function(e,t){var r=v.useRef(null),n=v.useState({onScrollCapture:X0,onWheelCapture:X0,onTouchMoveCapture:X0}),s=n[0],i=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noIsolation,y=e.inert,m=e.allowPinchZoom,b=e.as,x=b===void 0?"div":b,w=vE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),_=f,j=vz([r,t]),k=cn(cn({},w),s);return v.createElement(v.Fragment,null,u&&v.createElement(_,{sideCar:u$,removeScrollBar:c,shards:h,noIsolation:p,inert:y,setCallbacks:i,allowPinchZoom:!!m,lockRef:r}),o?v.cloneElement(v.Children.only(a),cn(cn({},k),{ref:j})):v.createElement(x,cn({},k,{className:l,ref:j}),a))});xx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xx.classNames={fullWidth:op,zeroRight:ip};var wk=!1;if(typeof window<"u")try{var Zg=Object.defineProperty({},"passive",{get:function(){return wk=!0,!0}});window.addEventListener("test",Zg,Zg),window.removeEventListener("test",Zg,Zg)}catch{wk=!1}var zu=wk?{passive:!1}:!1,bme=function(e){return e.tagName==="TEXTAREA"},d$=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!bme(e)&&r[t]==="visible")},xme=function(e){return d$(e,"overflowY")},wme=function(e){return d$(e,"overflowX")},OR=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=h$(e,r);if(n){var s=f$(e,r),i=s[1],o=s[2];if(i>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},_me=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},jme=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},h$=function(e,t){return e==="v"?xme(t):wme(t)},f$=function(e,t){return e==="v"?_me(t):jme(t)},kme=function(e,t){return e==="h"&&t==="rtl"?-1:1},Nme=function(e,t,r,n,s){var i=kme(e,window.getComputedStyle(t).direction),o=i*n,a=r.target,l=t.contains(a),c=!1,u=o>0,h=0,f=0;do{var p=f$(e,a),y=p[0],m=p[1],b=p[2],x=m-b-i*y;(y||x)&&h$(e,a)&&(h+=x,f+=y),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&h===0||!u&&f===0)&&(c=!0),c},Gg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},PR=function(e){return[e.deltaX,e.deltaY]},RR=function(e){return e&&"current"in e?e.current:e},Sme=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Eme=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Cme=0,Fu=[];function Tme(e){var t=v.useRef([]),r=v.useRef([0,0]),n=v.useRef(),s=v.useState(Cme++)[0],i=v.useState(function(){return bE()})[0],o=v.useRef(e);v.useEffect(function(){o.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=yz([e.lockRef.current],(e.shards||[]).map(RR)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=v.useCallback(function(m,b){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var x=Gg(m),w=r.current,_="deltaX"in m?m.deltaX:w[0]-x[0],j="deltaY"in m?m.deltaY:w[1]-x[1],k,N=m.target,C=Math.abs(_)>Math.abs(j)?"h":"v";if("touches"in m&&C==="h"&&N.type==="range")return!1;var E=OR(C,N);if(!E)return!0;if(E?k=C:(k=C==="v"?"h":"v",E=OR(C,N)),!E)return!1;if(!n.current&&"changedTouches"in m&&(_||j)&&(n.current=k),!k)return!0;var T=n.current||k;return Nme(T,b,m,T==="h"?_:j)},[]),l=v.useCallback(function(m){var b=m;if(!(!Fu.length||Fu[Fu.length-1]!==i)){var x="deltaY"in b?PR(b):Gg(b),w=t.current.filter(function(k){return k.name===b.type&&k.target===b.target&&Sme(k.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var _=(o.current.shards||[]).map(RR).filter(Boolean).filter(function(k){return k.contains(b.target)}),j=_.length>0?a(b,_[0]):!o.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),c=v.useCallback(function(m,b,x,w){var _={name:m,delta:b,target:x,should:w};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(j){return j!==_})},1)},[]),u=v.useCallback(function(m){r.current=Gg(m),n.current=void 0},[]),h=v.useCallback(function(m){c(m.type,PR(m),m.target,a(m,e.lockRef.current))},[]),f=v.useCallback(function(m){c(m.type,Gg(m),m.target,a(m,e.lockRef.current))},[]);v.useEffect(function(){return Fu.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,zu),document.addEventListener("touchmove",l,zu),document.addEventListener("touchstart",u,zu),function(){Fu=Fu.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,zu),document.removeEventListener("touchmove",l,zu),document.removeEventListener("touchstart",u,zu)}},[]);var p=e.removeScrollBar,y=e.inert;return v.createElement(v.Fragment,null,y?v.createElement(i,{styles:Eme(s)}):null,p?v.createElement(jz,{gapMode:"margin"}):null)}const Ame=wz(u$,Tme);var p$=v.forwardRef(function(e,t){return v.createElement(xx,cn({},e,{ref:t,sideCar:Ame}))});p$.classNames=xx.classNames;const Ome=[" ","Enter","ArrowUp","ArrowDown"],Pme=[" ","Enter"],wx="Select",[_x,o2,Rme]=Nfe(wx),[Dh,Vqe]=QE(wx,[Rme,o$]),a2=o$(),[Ime,lu]=Dh(wx),[Dme,Lme]=Dh(wx),Mme=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:f,required:p}=e,y=a2(t),[m,b]=v.useState(null),[x,w]=v.useState(null),[_,j]=v.useState(!1),k=Efe(c),[N=!1,C]=AR({prop:n,defaultProp:s,onChange:i}),[E,T]=AR({prop:o,defaultProp:a,onChange:l}),P=v.useRef(null),O=m?!!m.closest("form"):!0,[I,R]=v.useState(new Set),F=Array.from(I).map($=>$.props.value).join(";");return v.createElement(hme,y,v.createElement(Ime,{required:p,scope:t,trigger:m,onTriggerChange:b,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:H1(),value:E,onValueChange:T,open:N,onOpenChange:C,dir:k,triggerPointerDownPosRef:P,disabled:f},v.createElement(_x.Provider,{scope:t},v.createElement(Dme,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback($=>{R(W=>new Set(W).add($))},[]),onNativeOptionRemove:v.useCallback($=>{R(W=>{const q=new Set(W);return q.delete($),q})},[])},r)),O?v.createElement(y$,{key:F,"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:E,onChange:$=>T($.target.value),disabled:f},E===void 0?v.createElement("option",{value:""}):null,Array.from(I)):null))},zme="SelectTrigger",Fme=v.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=a2(r),o=lu(zme,r),a=o.disabled||n,l=Kn(t,o.onTriggerChange),c=o2(r),[u,h,f]=v$(y=>{const m=c().filter(w=>!w.disabled),b=m.find(w=>w.value===o.value),x=b$(m,y,b);x!==void 0&&o.onValueChange(x.value)}),p=()=>{a||(o.onOpenChange(!0),f())};return v.createElement(fme,wt({asChild:!0},i),v.createElement(mn.button,wt({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},s,{ref:l,onClick:kn(s.onClick,y=>{y.currentTarget.focus()}),onPointerDown:kn(s.onPointerDown,y=>{const m=y.target;m.hasPointerCapture(y.pointerId)&&m.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&(p(),o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)},y.preventDefault())}),onKeyDown:kn(s.onKeyDown,y=>{const m=u.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&h(y.key),!(m&&y.key===" ")&&Ome.includes(y.key)&&(p(),y.preventDefault())})})))}),$me="SelectValue",Ume=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o,...a}=e,l=lu($me,r),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,h=Kn(t,l.onValueNodeChange);return Xo(()=>{c(u)},[c,u]),v.createElement(mn.span,wt({},a,{ref:h,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:i)}),qme=v.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return v.createElement(mn.span,wt({"aria-hidden":!0},s,{ref:t}),n||"▼")}),Bme=e=>v.createElement(mme,wt({asChild:!0},e)),Qd="SelectContent",Vme=v.forwardRef((e,t)=>{const r=lu(Qd,e.__scopeSelect),[n,s]=v.useState();if(Xo(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?ro.createPortal(v.createElement(m$,{scope:e.__scopeSelect},v.createElement(_x.Slot,{scope:e.__scopeSelect},v.createElement("div",null,e.children))),i):null}return v.createElement(Wme,wt({},e,{ref:t}))}),Po=10,[m$,jx]=Dh(Qd),Wme=v.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:b,...x}=e,w=lu(Qd,r),[_,j]=v.useState(null),[k,N]=v.useState(null),C=Kn(t,pe=>j(pe)),[E,T]=v.useState(null),[P,O]=v.useState(null),I=o2(r),[R,F]=v.useState(!1),$=v.useRef(!1);v.useEffect(()=>{if(_)return Tz(_)},[_]),Mfe();const W=v.useCallback(pe=>{const[ke,...V]=I().map(U=>U.ref.current),[X]=V.slice(-1),le=document.activeElement;for(const U of pe)if(U===le||(U==null||U.scrollIntoView({block:"nearest"}),U===ke&&k&&(k.scrollTop=0),U===X&&k&&(k.scrollTop=k.scrollHeight),U==null||U.focus(),document.activeElement!==le))return},[I,k]),q=v.useCallback(()=>W([E,_]),[W,E,_]);v.useEffect(()=>{R&&q()},[R,q]);const{onOpenChange:K,triggerPointerDownPosRef:Z}=w;v.useEffect(()=>{if(_){let pe={x:0,y:0};const ke=X=>{var le,U,Se,Re;pe={x:Math.abs(Math.round(X.pageX)-((le=(U=Z.current)===null||U===void 0?void 0:U.x)!==null&&le!==void 0?le:0)),y:Math.abs(Math.round(X.pageY)-((Se=(Re=Z.current)===null||Re===void 0?void 0:Re.y)!==null&&Se!==void 0?Se:0))}},V=X=>{pe.x<=10&&pe.y<=10?X.preventDefault():_.contains(X.target)||K(!1),document.removeEventListener("pointermove",ke),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",ke),document.addEventListener("pointerup",V,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ke),document.removeEventListener("pointerup",V,{capture:!0})}}},[_,K,Z]),v.useEffect(()=>{const pe=()=>K(!1);return window.addEventListener("blur",pe),window.addEventListener("resize",pe),()=>{window.removeEventListener("blur",pe),window.removeEventListener("resize",pe)}},[K]);const[z,J]=v$(pe=>{const ke=I().filter(le=>!le.disabled),V=ke.find(le=>le.ref.current===document.activeElement),X=b$(ke,pe,V);X&&setTimeout(()=>X.ref.current.focus())}),te=v.useCallback((pe,ke,V)=>{const X=!$.current&&!V;(w.value!==void 0&&w.value===ke||X)&&(T(pe),X&&($.current=!0))},[w.value]),be=v.useCallback(()=>_==null?void 0:_.focus(),[_]),H=v.useCallback((pe,ke,V)=>{const X=!$.current&&!V;(w.value!==void 0&&w.value===ke||X)&&O(pe)},[w.value]),G=n==="popper"?IR:Hme,fe=G===IR?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:b}:{};return v.createElement(m$,{scope:r,content:_,viewport:k,onViewportChange:N,itemRefCallback:te,selectedItem:E,onItemLeave:be,itemTextRefCallback:H,focusSelectedItem:q,selectedItemText:P,position:n,isPositioned:R,searchRef:z},v.createElement(p$,{as:Mp,allowPinchZoom:!0},v.createElement(zfe,{asChild:!0,trapped:w.open,onMountAutoFocus:pe=>{pe.preventDefault()},onUnmountAutoFocus:kn(s,pe=>{var ke;(ke=w.trigger)===null||ke===void 0||ke.focus({preventScroll:!0}),pe.preventDefault()})},v.createElement(Ife,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:pe=>pe.preventDefault(),onDismiss:()=>w.onOpenChange(!1)},v.createElement(G,wt({role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:pe=>pe.preventDefault()},x,fe,{onPlaced:()=>F(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:kn(x.onKeyDown,pe=>{const ke=pe.ctrlKey||pe.altKey||pe.metaKey;if(pe.key==="Tab"&&pe.preventDefault(),!ke&&pe.key.length===1&&J(pe.key),["ArrowUp","ArrowDown","Home","End"].includes(pe.key)){let V=I().filter(X=>!X.disabled).map(X=>X.ref.current);if(["ArrowUp","End"].includes(pe.key)&&(V=V.slice().reverse()),["ArrowUp","ArrowDown"].includes(pe.key)){const X=pe.target,le=V.indexOf(X);V=V.slice(le+1)}setTimeout(()=>W(V)),pe.preventDefault()}})}))))))}),Hme=v.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=lu(Qd,r),o=jx(Qd,r),[a,l]=v.useState(null),[c,u]=v.useState(null),h=Kn(t,C=>u(C)),f=o2(r),p=v.useRef(!1),y=v.useRef(!0),{viewport:m,selectedItem:b,selectedItemText:x,focusSelectedItem:w}=o,_=v.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&m&&b&&x){const C=i.trigger.getBoundingClientRect(),E=c.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(i.dir!=="rtl"){const X=P.left-E.left,le=T.left-X,U=C.left-le,Se=C.width+U,Re=Math.max(Se,E.width),Qe=window.innerWidth-Po,Xe=dR(le,[Po,Qe-Re]);a.style.minWidth=Se+"px",a.style.left=Xe+"px"}else{const X=E.right-P.right,le=window.innerWidth-T.right-X,U=window.innerWidth-C.right-le,Se=C.width+U,Re=Math.max(Se,E.width),Qe=window.innerWidth-Po,Xe=dR(le,[Po,Qe-Re]);a.style.minWidth=Se+"px",a.style.right=Xe+"px"}const O=f(),I=window.innerHeight-Po*2,R=m.scrollHeight,F=window.getComputedStyle(c),$=parseInt(F.borderTopWidth,10),W=parseInt(F.paddingTop,10),q=parseInt(F.borderBottomWidth,10),K=parseInt(F.paddingBottom,10),Z=$+W+R+K+q,z=Math.min(b.offsetHeight*5,Z),J=window.getComputedStyle(m),te=parseInt(J.paddingTop,10),be=parseInt(J.paddingBottom,10),H=C.top+C.height/2-Po,G=I-H,fe=b.offsetHeight/2,pe=b.offsetTop+fe,ke=$+W+pe,V=Z-ke;if(ke<=H){const X=b===O[O.length-1].ref.current;a.style.bottom="0px";const le=c.clientHeight-m.offsetTop-m.offsetHeight,U=Math.max(G,fe+(X?be:0)+le+q),Se=ke+U;a.style.height=Se+"px"}else{const X=b===O[0].ref.current;a.style.top="0px";const le=Math.max(H,$+m.offsetTop+(X?te:0)+fe)+V;a.style.height=le+"px",m.scrollTop=ke-H+m.offsetTop}a.style.margin=`${Po}px 0`,a.style.minHeight=z+"px",a.style.maxHeight=I+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,c,m,b,x,i.dir,n]);Xo(()=>_(),[_]);const[j,k]=v.useState();Xo(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const N=v.useCallback(C=>{C&&y.current===!0&&(_(),w==null||w(),y.current=!1)},[_,w]);return v.createElement(Kme,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:N},v.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},v.createElement(mn.div,wt({},s,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),IR=v.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Po,...i}=e,o=a2(r);return v.createElement(pme,wt({},o,i,{ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Kme,Zme]=Dh(Qd,{}),DR="SelectViewport",Gme=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=jx(DR,r),i=Zme(DR,r),o=Kn(t,s.onViewportChange),a=v.useRef(0);return v.createElement(v.Fragment,null,v.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),v.createElement(_x.Slot,{scope:r},v.createElement(mn.div,wt({"data-radix-select-viewport":"",role:"presentation"},n,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:kn(n.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const p=window.innerHeight-Po*2,y=parseFloat(u.style.minHeight),m=parseFloat(u.style.height),b=Math.max(y,m);if(b<p){const x=b+f,w=Math.min(p,x),_=x-w;u.style.height=w+"px",u.style.bottom==="0px"&&(c.scrollTop=_>0?_:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),Yme="SelectGroup",[Wqe,Jme]=Dh(Yme),Xme="SelectLabel",Qme=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Jme(Xme,r);return v.createElement(mn.div,wt({id:s.id},n,{ref:t}))}),_k="SelectItem",[ege,g$]=Dh(_k),tge=v.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=e,a=lu(_k,r),l=jx(_k,r),c=a.value===n,[u,h]=v.useState(i??""),[f,p]=v.useState(!1),y=Kn(t,x=>{var w;return(w=l.itemRefCallback)===null||w===void 0?void 0:w.call(l,x,n,s)}),m=H1(),b=()=>{s||(a.onValueChange(n),a.onOpenChange(!1))};return v.createElement(ege,{scope:r,value:n,disabled:s,textId:m,isSelected:c,onItemTextChange:v.useCallback(x=>{h(w=>{var _;return w||((_=x==null?void 0:x.textContent)!==null&&_!==void 0?_:"").trim()})},[])},v.createElement(_x.ItemSlot,{scope:r,value:n,disabled:s,textValue:u},v.createElement(mn.div,wt({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},o,{ref:y,onFocus:kn(o.onFocus,()=>p(!0)),onBlur:kn(o.onBlur,()=>p(!1)),onPointerUp:kn(o.onPointerUp,b),onPointerMove:kn(o.onPointerMove,x=>{if(s){var w;(w=l.onItemLeave)===null||w===void 0||w.call(l)}else x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:kn(o.onPointerLeave,x=>{if(x.currentTarget===document.activeElement){var w;(w=l.onItemLeave)===null||w===void 0||w.call(l)}}),onKeyDown:kn(o.onKeyDown,x=>{var w;((w=l.searchRef)===null||w===void 0?void 0:w.current)!==""&&x.key===" "||(Pme.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})}))))}),Yg="SelectItemText",rge=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,o=lu(Yg,r),a=jx(Yg,r),l=g$(Yg,r),c=Lme(Yg,r),[u,h]=v.useState(null),f=Kn(t,x=>h(x),l.onItemTextChange,x=>{var w;return(w=a.itemTextRefCallback)===null||w===void 0?void 0:w.call(a,x,l.value,l.disabled)}),p=u==null?void 0:u.textContent,y=v.useMemo(()=>v.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},p),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:b}=c;return Xo(()=>(m(y),()=>b(y)),[m,b,y]),v.createElement(v.Fragment,null,v.createElement(mn.span,wt({id:l.textId},i,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ro.createPortal(i.children,o.valueNode):null)}),nge="SelectItemIndicator",sge=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return g$(nge,r).isSelected?v.createElement(mn.span,wt({"aria-hidden":!0},n,{ref:t})):null}),ige=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return v.createElement(mn.div,wt({"aria-hidden":!0},n,{ref:t}))}),y$=v.forwardRef((e,t)=>{const{value:r,...n}=e,s=v.useRef(null),i=Kn(t,s),o=yme(r);return v.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==r&&c){const u=new Event("change",{bubbles:!0});c.call(a,r),a.dispatchEvent(u)}},[o,r]),v.createElement(vme,{asChild:!0},v.createElement("select",wt({},n,{ref:i,defaultValue:r})))});y$.displayName="BubbleSelect";function v$(e){const t=Jo(e),r=v.useRef(""),n=v.useRef(0),s=v.useCallback(o=>{const a=r.current+o;t(a),function l(c){r.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(a)},[t]),i=v.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function b$(e,t,r){const n=t.length>1&&Array.from(t).every(a=>a===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let i=oge(e,Math.max(s,0));n.length===1&&(i=i.filter(a=>a!==r));const o=i.find(a=>a.textValue.toLowerCase().startsWith(n.toLowerCase()));return o!==r?o:void 0}function oge(e,t){return e.map((r,n)=>e[(t+n)%e.length])}const age=Mme,x$=Fme,lge=Ume,cge=qme,uge=Bme,w$=Vme,dge=Gme,_$=Qme,j$=tge,hge=rge,fge=sge,k$=ige,l2="-",pge=e=>{const t=gge(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:s=>{const i=s.split(l2);return i[0]===""&&i.length!==1&&i.shift(),N$(i,t)||mge(s)},getConflictingClassGroupIds:(s,i)=>{const o=r[s]||[];return i&&n[s]?[...o,...n[s]]:o}}},N$=(e,t)=>{var r;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),i=s?N$(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(l2);return(r=t.validators.find(({validator:a})=>a(o)))==null?void 0:r.classGroupId},LR=/^\[(.+)\]$/,mge=e=>{if(LR.test(e)){const t=LR.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},gge=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return vge(Object.entries(e.classGroups),r).forEach(([s,i])=>{jk(i,n,s,t)}),n},jk=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:MR(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(yge(s)){jk(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{jk(o,MR(t,i),r,n)})})},MR=(e,t)=>{let r=e;return t.split(l2).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},yge=e=>e.isThemeGetter,vge=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[t+o,a])):i);return[r,s]}):e,bge=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},S$="!",xge=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,o=a=>{const l=[];let c=0,u=0,h;for(let b=0;b<a.length;b++){let x=a[b];if(c===0){if(x===s&&(n||a.slice(b,b+i)===t)){l.push(a.slice(u,b)),u=b+i;continue}if(x==="/"){h=b;continue}}x==="["?c++:x==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(S$),y=p?f.substring(1):f,m=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:m}};return r?a=>r({className:a,parseClassName:o}):o},wge=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},_ge=e=>({cache:bge(e.cacheSize),parseClassName:xge(e),...pge(e)}),jge=/\s+/,kge=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split(jge);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=r(c);let y=!!p,m=n(y?f.substring(0,p):f);if(!m){if(!y){a=c+(a.length>0?" "+a:a);continue}if(m=n(f),!m){a=c+(a.length>0?" "+a:a);continue}y=!1}const b=wge(u).join(":"),x=h?b+S$:b,w=x+m;if(i.includes(w))continue;i.push(w);const _=s(m,y);for(let j=0;j<_.length;++j){const k=_[j];i.push(x+k)}a=c+(a.length>0?" "+a:a)}return a};function Nge(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=E$(t))&&(n&&(n+=" "),n+=r);return n}const E$=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=E$(e[n]))&&(r&&(r+=" "),r+=t);return r};function Sge(e,...t){let r,n,s,i=o;function o(l){const c=t.reduce((u,h)=>h(u),e());return r=_ge(c),n=r.cache.get,s=r.cache.set,i=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=kge(l,r);return s(l,u),u}return function(){return i(Nge.apply(null,arguments))}}const Tt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},C$=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ege=/^\d+\/\d+$/,Cge=new Set(["px","full","screen"]),Tge=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Age=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Oge=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Pge=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Rge=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jo=e=>_d(e)||Cge.has(e)||Ege.test(e),Aa=e=>Lh(e,"length",Uge),_d=e=>!!e&&!Number.isNaN(Number(e)),Q0=e=>Lh(e,"number",_d),bf=e=>!!e&&Number.isInteger(Number(e)),Ige=e=>e.endsWith("%")&&_d(e.slice(0,-1)),Ge=e=>C$.test(e),Oa=e=>Tge.test(e),Dge=new Set(["length","size","percentage"]),Lge=e=>Lh(e,Dge,T$),Mge=e=>Lh(e,"position",T$),zge=new Set(["image","url"]),Fge=e=>Lh(e,zge,Bge),$ge=e=>Lh(e,"",qge),xf=()=>!0,Lh=(e,t,r)=>{const n=C$.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Uge=e=>Age.test(e)&&!Oge.test(e),T$=()=>!1,qge=e=>Pge.test(e),Bge=e=>Rge.test(e),Vge=()=>{const e=Tt("colors"),t=Tt("spacing"),r=Tt("blur"),n=Tt("brightness"),s=Tt("borderColor"),i=Tt("borderRadius"),o=Tt("borderSpacing"),a=Tt("borderWidth"),l=Tt("contrast"),c=Tt("grayscale"),u=Tt("hueRotate"),h=Tt("invert"),f=Tt("gap"),p=Tt("gradientColorStops"),y=Tt("gradientColorStopPositions"),m=Tt("inset"),b=Tt("margin"),x=Tt("opacity"),w=Tt("padding"),_=Tt("saturate"),j=Tt("scale"),k=Tt("sepia"),N=Tt("skew"),C=Tt("space"),E=Tt("translate"),T=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Ge,t],I=()=>[Ge,t],R=()=>["",jo,Aa],F=()=>["auto",_d,Ge],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",Ge],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[_d,Ge];return{cacheSize:500,separator:":",theme:{colors:[xf],spacing:[jo,Aa],blur:["none","",Oa,Ge],brightness:J(),borderColor:[e],borderRadius:["none","","full",Oa,Ge],borderSpacing:I(),borderWidth:R(),contrast:J(),grayscale:Z(),hueRotate:J(),invert:Z(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[Ige,Aa],inset:O(),margin:O(),opacity:J(),padding:I(),saturate:J(),scale:J(),sepia:Z(),skew:J(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Ge]}],container:["container"],columns:[{columns:[Oa]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),Ge]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bf,Ge]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ge]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",bf,Ge]}],"grid-cols":[{"grid-cols":[xf]}],"col-start-end":[{col:["auto",{span:["full",bf,Ge]},Ge]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[xf]}],"row-start-end":[{row:["auto",{span:[bf,Ge]},Ge]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ge]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ge,t]}],"min-w":[{"min-w":[Ge,t,"min","max","fit"]}],"max-w":[{"max-w":[Ge,t,"none","full","min","max","fit","prose",{screen:[Oa]},Oa]}],h:[{h:[Ge,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ge,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ge,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ge,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Oa,Aa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Q0]}],"font-family":[{font:[xf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ge]}],"line-clamp":[{"line-clamp":["none",_d,Q0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jo,Ge]}],"list-image":[{"list-image":["none",Ge]}],"list-style-type":[{list:["none","disc","decimal",Ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jo,Aa]}],"underline-offset":[{"underline-offset":["auto",jo,Ge]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),Mge]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Lge]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Fge]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[jo,Ge]}],"outline-w":[{outline:[jo,Aa]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[jo,Aa]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Oa,$ge]}],"shadow-color":[{shadow:[xf]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Oa,Ge]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ge]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Ge]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[bf,Ge]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ge]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[jo,Aa,Q0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Wge=Sge(Vge);function Dr(...e){return Wge(at(e))}const Jg=age,Xg=lge,Uf=v.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(x$,{ref:n,className:Dr("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,d.jsx(cge,{asChild:!0,children:d.jsx(FF,{className:"h-4 w-4 opacity-50"})})]}));Uf.displayName=x$.displayName;const qf=v.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>d.jsx(uge,{children:d.jsx(w$,{ref:s,className:Dr("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:duration-75",r==="popper"&&"data-[state=open]:slide-in-from-top-[60%] data-[state=closed]:slide-out-to-top-[60%] data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:d.jsx(dge,{className:Dr("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));qf.displayName=w$.displayName;const Hge=v.forwardRef(({className:e,...t},r)=>d.jsx(_$,{ref:r,className:Dr("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Hge.displayName=_$.displayName;const Mi=v.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(j$,{ref:n,className:Dr("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(fge,{children:d.jsx(FF,{className:"h-4 w-4"})})}),d.jsx(hge,{children:t})]}));Mi.displayName=j$.displayName;const Kge=v.forwardRef(({className:e,...t},r)=>d.jsx(k$,{ref:r,className:Dr("-mx-1 my-1 h-px bg-muted",e),...t}));Kge.displayName=k$.displayName;function Zge(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function Gge(e){const[t,r]=v.useState(void 0);return Zd(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;r({width:o,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var kx="Switch",[Yge,Hqe]=Th(kx),[Jge,Xge]=Yge(kx),A$=v.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...h}=e,[f,p]=v.useState(null),y=Hn(t,_=>p(_)),m=v.useRef(!1),b=f?u||!!f.closest("form"):!0,[x,w]=Xb({prop:s,defaultProp:i??!1,onChange:c,caller:kx});return d.jsxs(Jge,{scope:r,checked:x,disabled:a,children:[d.jsx(Vr.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":I$(x),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:y,onClick:Ir(e.onClick,_=>{w(j=>!j),b&&(m.current=_.isPropagationStopped(),m.current||_.stopPropagation())})}),b&&d.jsx(R$,{control:f,bubbles:!m.current,name:n,value:l,checked:x,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});A$.displayName=kx;var O$="SwitchThumb",P$=v.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=Xge(O$,r);return d.jsx(Vr.span,{"data-state":I$(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});P$.displayName=O$;var Qge="SwitchBubbleInput",R$=v.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},i)=>{const o=v.useRef(null),a=Hn(o,i),l=Zge(r),c=Gge(t);return v.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&f){const p=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(p)}},[l,r,n]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});R$.displayName=Qge;function I$(e){return e?"checked":"unchecked"}var D$=A$,eye=P$;const Sv=v.forwardRef(({className:e,...t},r)=>d.jsx(D$,{className:Je("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:d.jsx(eye,{className:Je("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Sv.displayName=D$.displayName;const tye=Jb("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:h-4 [&>svg]:w-4",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-emerald-500/50 text-emerald-600 dark:text-emerald-400 [&>svg]:text-emerald-600 dark:[&>svg]:text-emerald-400"}},defaultVariants:{variant:"default"}}),c2=v.forwardRef(({className:e,variant:t,...r},n)=>d.jsx("div",{ref:n,role:"alert",className:Dr(tye({variant:t}),e),...r}));c2.displayName="Alert";const u2=v.forwardRef(({className:e,...t},r)=>d.jsx("h5",{ref:r,className:Dr("mb-1 font-medium leading-none tracking-tight",e),...t}));u2.displayName="AlertTitle";const Ev=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Dr("text-sm [&_p]:leading-relaxed",e),...t}));Ev.displayName="AlertDescription";const rye=v.forwardRef(({className:e,variant:t="default",children:r,icon:n,...s},i)=>{const o={default:UF,destructive:IE,success:nae}[t]||li;return d.jsxs(c2,{ref:i,variant:t,className:Dr("flex items-start gap-3",e),...s,children:[n||d.jsx(o,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),d.jsx("div",{children:v.Children.map(r,a=>v.isValidElement(a)&&(a.type===u2||a.type===Ev)?a:d.jsx(Ev,{children:a}))})]})});rye.displayName="AlertWithIcon";const nye=aR({name:Wg().min(1,"Name is required").max(100,"Name is too long"),description:Wg().max(500,"Description is too long").optional(),product_type:mk(["single_issue","bundle","chapter_pass","arc_pass"]),active:Hhe(),work_id:Wg().nullable().optional(),content_grants:z1(aR({type:mk(["work","chapter"]),id:Wg().min(1,"Content ID is required")}))}),sye=({product:e,onSave:t,onCancel:r,isSubmitting:n=!1})=>{var s,i;const[o,a]=v.useState([]),[l,c]=v.useState(!0),[u,h]=v.useState(null),{control:f,register:p,handleSubmit:y,reset:m,watch:b,setValue:x,formState:{errors:w}}=dce({resolver:ihe(nye),defaultValues:{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",product_type:(e==null?void 0:e.product_type)||"single_issue",active:(e==null?void 0:e.active)??!0,work_id:(e==null?void 0:e.work_id)||null,content_grants:Array.isArray(e==null?void 0:e.content_grants)?e.content_grants:[]}}),_=b("product_type");v.useEffect(()=>{(async()=>{c(!0),h(null);try{const E=await fetch("/api/content/works");if(!E.ok)throw new Error(`Failed to fetch works: ${E.statusText}`);const T=await E.json();a(T.works||[])}catch(E){console.error("Error fetching works:",E),h("Failed to load content. Please try again later.")}finally{c(!1)}})()},[]);const j=E=>{const T={...E,work_id:E.work_id||null};t(T)},k=()=>{const E=b("content_grants")||[];x("content_grants",[...E,{type:"work",id:""}],{shouldValidate:!0})},N=E=>{const T=(b("content_grants")||[]).filter((P,O)=>O!==E);x("content_grants",T,{shouldValidate:!0})},C=(E,T,P)=>{const O=[...b("content_grants")||[]];O[E]={...O[E],[T]:P},x("content_grants",O,{shouldValidate:!0})};return l?d.jsxs("div",{className:"flex items-center justify-center p-8",children:[d.jsx(Jd,{className:"h-6 w-6 animate-spin text-primary mr-2"}),d.jsx("span",{children:"Loading form..."})]}):d.jsxs("form",{onSubmit:y(j),className:"space-y-6",children:[u&&d.jsxs(c2,{variant:"destructive",children:[d.jsx(li,{className:"h-4 w-4"}),d.jsx(u2,{children:"Error"}),d.jsx(Ev,{children:u})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{htmlFor:"name",children:"Product Name *"}),d.jsx(pi,{id:"name",placeholder:"e.g., Issue #1, Premium Bundle",...p("name"),className:w.name?"border-destructive":""}),w.name&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.name.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{htmlFor:"description",children:"Description"}),d.jsx(XE,{id:"description",placeholder:"A brief description of the product...",rows:3,...p("description"),className:w.description?"border-destructive":""}),w.description&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.description.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{htmlFor:"product_type",children:"Product Type *"}),d.jsx(W0,{name:"product_type",control:f,render:({field:E})=>d.jsxs(Jg,{onValueChange:E.onChange,value:E.value,children:[d.jsx(Uf,{className:"w-full",children:d.jsx(Xg,{placeholder:"Select a product type"})}),d.jsxs(qf,{children:[d.jsx(Mi,{value:"single_issue",children:"Single Issue"}),d.jsx(Mi,{value:"bundle",children:"Bundle"}),d.jsx(Mi,{value:"chapter_pass",children:"Chapter Pass"}),d.jsx(Mi,{value:"arc_pass",children:"Arc Pass"})]})]})}),w.product_type&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.product_type.message})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(W0,{name:"active",control:f,render:({field:E})=>d.jsx(Sv,{id:"active",checked:E.value,onCheckedChange:E.onChange})}),d.jsx(js,{htmlFor:"active",children:"Active"})]}),_==="single_issue"&&d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{htmlFor:"work_id",children:"Associated Work (Issue/Book)"}),d.jsx(W0,{name:"work_id",control:f,render:({field:E})=>d.jsxs(Jg,{onValueChange:E.onChange,value:E.value||"",children:[d.jsx(Uf,{children:d.jsx(Xg,{placeholder:"Select an associated work"})}),d.jsxs(qf,{children:[d.jsx(Mi,{value:"",children:"None"}),o.map(T=>d.jsxs(Mi,{value:T.id,children:[T.title," (",T.type,")"]},T.id))]})]})}),w.work_id&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.work_id.message})]}),(_==="bundle"||_==="chapter_pass"||_==="arc_pass")&&d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(js,{children:"Content Grants"}),d.jsxs(ct,{type:"button",variant:"outline",size:"sm",onClick:k,className:"text-sm",children:[d.jsx(Yo,{className:"h-3.5 w-3.5 mr-1.5"}),"Add Grant"]})]}),d.jsxs("div",{className:"space-y-3",children:[(s=b("content_grants"))==null?void 0:s.map((E,T)=>d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-1",children:[d.jsx("div",{className:"space-y-1",children:d.jsxs(Jg,{value:E.type,onValueChange:P=>C(T,"type",P),children:[d.jsx(Uf,{children:d.jsx(Xg,{})}),d.jsxs(qf,{children:[d.jsx(Mi,{value:"work",children:"Work"}),d.jsx(Mi,{value:"chapter",children:"Chapter"})]})]})}),d.jsx("div",{className:"space-y-1",children:d.jsxs(Jg,{value:E.id,onValueChange:P=>C(T,"id",P),children:[d.jsx(Uf,{children:d.jsx(Xg,{placeholder:`Select ${E.type}...`})}),d.jsxs(qf,{children:[o.filter(P=>E.type==="work"||P.type===E.type).map(P=>d.jsxs(Mi,{value:P.id,children:[P.title," (",P.type,")"]},P.id)),o.length===0&&d.jsxs("div",{className:"p-2 text-sm text-muted-foreground",children:["No ",E.type,"s found"]})]})]})})]}),d.jsxs(ct,{type:"button",variant:"ghost",size:"icon",className:"h-10 w-10 text-destructive hover:bg-destructive/10",onClick:()=>N(T),children:[d.jsx(pl,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Remove"})]})]},T)),((i=b("content_grants"))==null?void 0:i.length)===0&&d.jsx("div",{className:"rounded-md border border-dashed p-4 text-center",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:'No content grants added yet. Click "Add Grant" to get started.'})})]}),w.content_grants&&d.jsx("p",{className:"text-sm font-medium text-destructive",children:w.content_grants.message||"Please check the content grants"})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[d.jsx(ct,{type:"button",variant:"outline",onClick:r,disabled:n,children:"Cancel"}),d.jsx(ct,{type:"submit",disabled:n,children:n?d.jsxs(d.Fragment,{children:[d.jsx(Jd,{className:"mr-2 h-4 w-4 animate-spin"}),e?"Updating...":"Creating..."]}):d.jsx(d.Fragment,{children:e?"Update Product":"Create Product"})})]})]})},L$=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{className:"w-full overflow-auto",children:d.jsx("table",{ref:r,className:Je("w-full caption-bottom text-sm",e),...t})}));L$.displayName="Table";const M$=v.forwardRef(({className:e,...t},r)=>d.jsx("thead",{ref:r,className:Je("[&_tr]:border-b",e),...t}));M$.displayName="TableHeader";const z$=v.forwardRef(({className:e,...t},r)=>d.jsx("tbody",{ref:r,className:Je("[&_tr:last-child]:border-0",e),...t}));z$.displayName="TableBody";const iye=v.forwardRef(({className:e,...t},r)=>d.jsx("tfoot",{ref:r,className:Je("bg-primary font-medium text-primary-foreground",e),...t}));iye.displayName="TableFooter";const Ly=v.forwardRef(({className:e,...t},r)=>d.jsx("tr",{ref:r,className:Je("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Ly.displayName="TableRow";const Hu=v.forwardRef(({className:e,...t},r)=>d.jsx("th",{ref:r,className:Je("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Hu.displayName="TableHead";const ic=v.forwardRef(({className:e,...t},r)=>d.jsx("td",{ref:r,className:Je("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ic.displayName="TableCell";const oye=v.forwardRef(({className:e,...t},r)=>d.jsx("caption",{ref:r,className:Je("mt-4 text-sm text-muted-foreground",e),...t}));oye.displayName="TableCaption";const aye=bse,lye=Kz,cye=Zz,F$=v.forwardRef(({className:e,...t},r)=>d.jsx(jE,{ref:r,className:Je("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));F$.displayName=jE.displayName;const $$=v.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(cye,{children:[d.jsx(F$,{}),d.jsxs(kE,{ref:n,className:Je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,d.jsxs(EE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(pl,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$$.displayName=kE.displayName;const U$=({className:e,...t})=>d.jsx("div",{className:Je("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});U$.displayName="DialogHeader";const q$=v.forwardRef(({className:e,...t},r)=>d.jsx(NE,{ref:r,className:Je("text-lg font-semibold leading-none tracking-tight",e),...t}));q$.displayName=NE.displayName;const uye=v.forwardRef(({className:e,...t},r)=>d.jsx(SE,{ref:r,className:Je("text-sm text-muted-foreground",e),...t}));uye.displayName=SE.displayName;function dye(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let kk=1;class hye{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...s}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:kk++,o=this.toasts.find(l=>l.id===i),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:n}),{...l,...t,id:i,dismissible:a,title:n}):l):this.addToast({title:n,...s,dismissible:a,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const a=s.then(async c=>{if(o=["resolve",c],ae.isValidElement(c))i=!1,this.create({id:n,type:"default",message:c});else if(pye(c)&&!c.ok){i=!1;const u=typeof r.error=="function"?await r.error(`HTTP error! status: ${c.status}`):r.error,h=typeof r.description=="function"?await r.description(`HTTP error! status: ${c.status}`):r.description,f=typeof u=="object"&&!ae.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}else if(c instanceof Error){i=!1;const u=typeof r.error=="function"?await r.error(c):r.error,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!ae.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}else if(r.success!==void 0){i=!1;const u=typeof r.success=="function"?await r.success(c):r.success,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!ae.isValidElement(u)?u:{message:u};this.create({id:n,type:"success",description:h,...f})}}).catch(async c=>{if(o=["reject",c],r.error!==void 0){i=!1;const u=typeof r.error=="function"?await r.error(c):r.error,h=typeof r.description=="function"?await r.description(c):r.description,f=typeof u=="object"&&!ae.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,r)=>{const n=(r==null?void 0:r.id)||kk++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const xs=new hye,fye=(e,t)=>{const r=(t==null?void 0:t.id)||kk++;return xs.addToast({title:e,...t,id:r}),r},pye=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",mye=fye,gye=()=>xs.toasts,yye=()=>xs.getActiveToasts(),Ve=Object.assign(mye,{success:xs.success,info:xs.info,warning:xs.warning,error:xs.error,custom:xs.custom,message:xs.message,promise:xs.promise,dismiss:xs.dismiss,loading:xs.loading},{getHistory:gye,getToasts:yye});dye("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const vye=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!1),[s,i]=v.useState(!0),[o,a]=v.useState(!1),[l,c]=v.useState(null),u=async()=>{i(!0);try{const m=await fetch("/api/products");if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const b=await m.json();t(b.products),Ve.success("Products loaded successfully")}catch(m){console.error("Error fetching products:",m),Ve.error("Failed to load products")}finally{i(!1)}};v.useEffect(()=>{u()},[]);const h=async m=>{a(!0);try{let b;if(l?b=await fetch(`/api/products/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,active:m.active??!0})}):b=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,active:m.active??!0})}),!b.ok){const w=await b.json();throw new Error(w.message||"Failed to save product")}const x=await b.json();Ve.success(l?"Product updated successfully":"Product created successfully"),n(!1),c(null),await u()}catch(b){console.error("Error saving product:",b),Ve.error((b instanceof Error?b.message:String(b))||"Failed to save product")}finally{a(!1)}},f=async m=>{if(window.confirm("Are you sure you want to archive this product?"))try{const b=await fetch(`/api/products/${m}`,{method:"DELETE"});if(!b.ok){const x=await b.json();throw new Error(x.message||"Failed to delete product")}Ve.success("Product archived successfully"),await u()}catch(b){console.error("Error deleting product:",b),Ve.error((b instanceof Error?b.message:String(b))||"Failed to archive product")}},p=m=>{c(m),n(!0)},y=()=>{n(!1),c(null)};return s?d.jsxs("div",{className:"flex items-center justify-center p-8",children:[d.jsx(Jd,{className:"h-8 w-8 animate-spin text-primary"}),d.jsx("span",{className:"ml-2",children:"Loading products..."})]}):d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Products"}),d.jsxs("p",{className:"text-muted-foreground",children:[e.length," product",e.length!==1?"s":""," in your store"]})]}),d.jsxs(aye,{open:r,onOpenChange:y,children:[d.jsx(lye,{asChild:!0,children:d.jsxs(ct,{onClick:()=>n(!0),children:[d.jsx(Yo,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),d.jsxs($$,{className:"sm:max-w-[700px]",children:[d.jsx(U$,{children:d.jsx(q$,{children:l?"Edit Product":"Create New Product"})}),d.jsx(sye,{product:l,onSave:h,onCancel:y,isSubmitting:o})]})]})]}),d.jsx("div",{className:"rounded-md border",children:d.jsxs(L$,{children:[d.jsx(M$,{children:d.jsxs(Ly,{children:[d.jsx(Hu,{className:"w-[300px]",children:"Name"}),d.jsx(Hu,{children:"Type"}),d.jsx(Hu,{children:"Status"}),d.jsx(Hu,{children:"Created"}),d.jsx(Hu,{className:"text-right",children:"Actions"})]})}),d.jsx(z$,{children:e.length===0?d.jsx(Ly,{children:d.jsx(ic,{colSpan:5,className:"h-24 text-center",children:"No products found."})}):e.map(m=>{var b;return d.jsxs(Ly,{children:[d.jsxs(ic,{className:"font-medium",children:[d.jsx("div",{className:"font-medium",children:m.name}),d.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2",children:m.description||"No description"})]}),d.jsx(ic,{children:d.jsx("span",{className:"inline-flex items-center rounded-full bg-secondary px-2.5 py-0.5 text-xs font-medium text-secondary-foreground capitalize",children:(b=m.product_type)==null?void 0:b.replace("_"," ")})}),d.jsx(ic,{children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`h-2.5 w-2.5 rounded-full mr-2 ${m.active?"bg-green-500":"bg-gray-300"}`}),m.active?"Active":"Inactive"]})}),d.jsx(ic,{children:new Date(m.created_at).toLocaleDateString()}),d.jsx(ic,{className:"text-right",children:d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsxs(ct,{variant:"outline",size:"sm",onClick:()=>p(m),children:[d.jsx(vae,{className:"h-4 w-4 mr-1"}),"Edit"]}),d.jsxs(ct,{variant:"outline",size:"sm",onClick:()=>f(m.id),className:"text-destructive hover:bg-destructive/10 hover:text-destructive",children:[d.jsx(au,{className:"h-4 w-4 mr-1"}),"Archive"]})]})})]},m.id)})})]})})]})};function e_({className:e,...t}){return d.jsx("div",{className:`animate-pulse bg-gray-200 dark:bg-gray-700 rounded-md ${e||""}`,...t})}const Bf=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Je("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Bf.displayName="Card";const Vf=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Je("flex flex-col space-y-1.5 p-6",e),...t}));Vf.displayName="CardHeader";const Wf=v.forwardRef(({className:e,...t},r)=>d.jsx("h3",{ref:r,className:Je("text-2xl font-semibold leading-none tracking-tight",e),...t}));Wf.displayName="CardTitle";const bye=v.forwardRef(({className:e,...t},r)=>d.jsx("p",{ref:r,className:Je("text-sm text-muted-foreground",e),...t}));bye.displayName="CardDescription";const Hf=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Je("p-6 pt-0",e),...t}));Hf.displayName="CardContent";const xye=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Je("flex items-center p-6 pt-0",e),...t}));xye.displayName="CardFooter";const wye=ae.lazy(()=>wh(()=>import("./PriceManager-CZamvrL2-DYY2dFMw.js"),__vite__mapDeps([0,1]))),_ye=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(e_,{className:"h-9 w-32"}),d.jsx(e_,{className:"h-9 w-24"})]}),d.jsx("div",{className:"space-y-2",children:[...Array(5)].map((e,t)=>d.jsx(e_,{className:"h-12 w-full"},t))})]}),jye=()=>d.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Store Management"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage your store's products, pricing, and customer purchases"})]}),d.jsxs(Hle,{defaultValue:"products",className:"w-full space-y-6",children:[d.jsxs(u1,{className:"grid w-full md:w-[400px] grid-cols-2",children:[d.jsx(Ff,{value:"products",children:"Products"}),d.jsx(Ff,{value:"prices",children:"Pricing"}),d.jsx(Ff,{value:"purchases",children:"Purchases"}),d.jsx(Ff,{value:"analytics",children:"Analytics"})]}),d.jsx($f,{value:"products",className:"space-y-4",children:d.jsxs(Bf,{children:[d.jsx(Vf,{children:d.jsx(Wf,{children:"Product Catalog"})}),d.jsx(Hf,{children:d.jsx(vye,{})})]})}),d.jsx($f,{value:"prices",className:"space-y-4",children:d.jsxs(Bf,{children:[d.jsx(Vf,{children:d.jsx(Wf,{children:"Pricing & Plans"})}),d.jsx(Hf,{children:d.jsx(v.Suspense,{fallback:d.jsx(_ye,{}),children:d.jsx(wye,{})})})]})}),d.jsx($f,{value:"purchases",className:"space-y-4",children:d.jsxs(Bf,{children:[d.jsx(Vf,{children:d.jsx(Wf,{children:"Purchase History"})}),d.jsx(Hf,{children:d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-muted-foreground",children:[d.jsx("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}),d.jsx("path",{d:"M3 6h18"}),d.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]})}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"Purchase History"}),d.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"View and manage customer purchases, refunds, and order history."})]})})]})}),d.jsx($f,{value:"analytics",className:"space-y-4",children:d.jsxs(Bf,{children:[d.jsx(Vf,{children:d.jsx(Wf,{children:"Store Analytics"})}),d.jsx(Hf,{children:d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-muted-foreground",children:[d.jsx("path",{d:"M3 3v18h18"}),d.jsx("path",{d:"m19 9-5 5-4-4-3 3"})]})}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sales Analytics"}),d.jsx("p",{className:"text-sm text-muted-foreground max-w-md mb-4",children:"View detailed analytics and reports about your store's performance."}),d.jsx(ct,{disabled:!0,children:"Coming Soon"})]})})]})})]})]}),kye=async()=>{const{data:e,error:t}=await ce.from("works").select("*").order("order_in_parent",{ascending:!0});if(t)throw new Error(t.message);return e},Nye=async e=>{if(!e)return[];const{data:t,error:r}=await ce.from("purchases").select(`
      id,
      user_id,
      product_id,
      purchased_at,
      status,
      products (
        name,
        description,
        product_type,
        work_id
      )
    `).eq("user_id",e);if(r)throw new Error(r.message);return t.map(n=>{var s,i,o,a;return{id:n.id,user_id:n.user_id,product_id:n.product_id,purchased_at:n.purchased_at,status:n.status,product_title:((s=n.products)==null?void 0:s.name)||"Unknown Product",product_description:(i=n.products)==null?void 0:i.description,product_type:((o=n.products)==null?void 0:o.product_type)||"single_issue",work_id:(a=n.products)==null?void 0:a.work_id}})},Sye=async(e,t)=>{if(!e||!t)return null;const{data:r,error:n}=await ce.from("user_ratings").select("rating").eq("user_id",e).eq("work_id",t).single();if(n&&n.code!=="PGRST116")throw new Error(n.message);return r?r.rating:null},Eye=async(e,t,r)=>{const{data:n,error:s}=await ce.from("user_ratings").upsert({user_id:e,work_id:t,rating:r},{onConflict:"user_id,work_id"}).select();if(s)throw new Error(s.message);return n[0]},Cye=({work:e,userLibraryItem:t,queryClient:r})=>{var n,s;const{user:i}=kh(),[o,a]=v.useState(null),[l,c]=v.useState(!1),[u,h]=v.useState(!1),{data:f}=It({queryKey:["userRating",i==null?void 0:i.id,e.id],queryFn:()=>Sye((i==null?void 0:i.id)||"",e.id),enabled:!!(i!=null&&i.id)});v.useEffect(()=>{f!==void 0&&a(f)},[f]);const p=tr({mutationFn:({userId:x,workId:w,rating:_})=>Eye(x,w,_),onSuccess:()=>{r.invalidateQueries({queryKey:["userRating",i==null?void 0:i.id,e.id]}),r.invalidateQueries({queryKey:["allWorks"]})},onError:x=>{alert(`Error submitting rating: ${x.message}`)}}),y=x=>{if(!i){alert("Please log in to submit a rating.");return}i.id&&p.mutate({userId:i.id,workId:e.id,rating:x})},m=e.word_count&&e.target_word_count?Math.min(100,Math.round(e.word_count/e.target_word_count*100)):e.progress_percentage||0,b="S. Azar";return d.jsxs("article",{className:"book-card","data-book-id":e.id,"aria-label":`Book card: ${e.title} by ${b}`,children:[d.jsxs("div",{className:"book-main",children:[d.jsx("div",{className:"cover",role:"img","aria-label":`Book cover: ${e.title} by ${b}`,style:{background:e.cover_image_url?`url(${e.cover_image_url}) center center / cover`:"var(--teal)"},children:!e.cover_image_url&&d.jsxs("div",{className:"cover-content",children:[d.jsx("div",{className:"cover-title",children:e.title}),d.jsx("div",{className:"cover-author",children:b})]})}),d.jsxs("div",{className:"details",children:[d.jsxs("div",{className:"book-header",children:[d.jsx("h3",{className:"book-title",children:e.title}),d.jsx("div",{className:"author",children:b})]}),(e.release_date||e.estimated_release)&&d.jsx("div",{className:"release-info text-sm text-muted mt-1",children:e.release_date?d.jsxs("span",{children:["Released: ",new Date(e.release_date).toLocaleDateString()]}):d.jsxs("span",{children:["Estimated Release: ",e.estimated_release]})}),(e.status==="planning"||e.status==="writing"||e.status==="editing")&&d.jsxs("div",{className:"progress","aria-label":"Author writing progress",children:[d.jsxs("div",{className:"progress-head",children:[d.jsxs("span",{children:[m,"% written"]}),d.jsxs("span",{"aria-live":"polite",children:[m,"%"]})]}),d.jsx("div",{className:"bar",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":m,"aria-label":"Author writing progress",children:d.jsx("span",{style:{width:`${m}%`}})})]}),d.jsx("p",{className:"desc",children:e.description||"No description available."}),d.jsxs("div",{className:"rating","aria-label":`Rating ${((n=e.rating)==null?void 0:n.toFixed(1))||"0.0"} out of 5 based on ${e.reviews_count||0} reviews`,children:[d.jsx("span",{className:"stars","aria-hidden":"true",children:[...Array(5)].map((x,w)=>d.jsx(LE,{className:`star ${w<(o!==null?o:Math.floor(e.rating||0))?"filled":""}`,onClick:()=>y(w+1),onMouseEnter:()=>i&&a(w+1),onMouseLeave:()=>i&&a(f!==null?f:null),style:{cursor:i?"pointer":"default"}},w))}),d.jsx("span",{children:((s=e.rating)==null?void 0:s.toFixed(1))||"0.0"}),d.jsxs("small",{children:["• ",e.reviews_count||0," reviews"]})]}),d.jsx("div",{className:"actions",children:t?d.jsx(d.Fragment,{children:d.jsx("button",{className:"btn primary",children:"Open"})}):d.jsx("button",{className:"btn primary",children:"Buy now"})}),e.sample_content&&d.jsxs("button",{className:"sample-toggle-btn",onClick:()=>c(!l),"aria-expanded":l,children:[d.jsx("span",{children:"Read Sample"}),d.jsx("svg",{className:`toggle-arrow ${l?"expanded":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d.jsx("polyline",{points:"6,9 12,15 18,9"})})]})]})]}),l&&e.sample_content&&d.jsxs("div",{className:"sample-card expanded",children:[d.jsx("div",{className:"sample-header",children:d.jsxs("h4",{children:['Sample from "',e.title,'"']})}),d.jsx("div",{className:"sample-excerpt",children:d.jsx("p",{children:e.sample_content})}),d.jsx("div",{className:"sample-actions",children:t?d.jsx("button",{className:"continue-btn",children:"Continue reading"}):d.jsx("button",{className:"buy-btn",children:"Buy now"})})]})]})},Tye=()=>{const{user:e}=kh(),t=fa(),{data:r,isLoading:n,isError:s,error:i}=It({queryKey:["allWorks"],queryFn:kye}),{data:o,isLoading:a,isError:l,error:c}=It({queryKey:["userLibraryItems",e==null?void 0:e.id],queryFn:()=>Nye((e==null?void 0:e.id)||""),enabled:!!(e!=null&&e.id)}),[u,h]=v.useState(!0),[f,p]=v.useState("All"),[y,m]=v.useState("All"),b=(r==null?void 0:r.filter(x=>{const w=f==="All"||x.type===f.toLowerCase(),_=y==="All"||x.status===y.toLowerCase();return w&&_}))||[];return n||a?d.jsx("div",{className:"text-center py-8 text-text-light",children:"Loading library..."}):s?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading works: ",i==null?void 0:i.message]}):l?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading user library: ",c==null?void 0:c.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8 bg-background-dark text-text-light min-h-screen",children:[d.jsx("h1",{className:"text-4xl font-bold text-text-light mb-6",children:"Your Library"}),u&&d.jsxs("div",{className:"bg-blue-900 bg-opacity-30 border border-blue-700 text-blue-200 p-4 rounded-md mb-6 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(UF,{size:20}),d.jsx("p",{className:"text-sm",children:"Files may include a purchaser-specific watermark. Download limits: 5 per format."})]}),d.jsx("button",{onClick:()=>h(!1),className:"text-blue-200 hover:text-white",children:d.jsx(IE,{size:20})})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.jsx("button",{onClick:()=>p("All"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="All"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"All"}),d.jsx("button",{onClick:()=>p("Book"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Book"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Books"}),d.jsx("button",{onClick:()=>p("Volume"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Volume"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Volumes"}),d.jsx("button",{onClick:()=>p("Saga"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Saga"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Sagas"}),d.jsx("button",{onClick:()=>p("Arc"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Arc"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Arcs"}),d.jsx("button",{onClick:()=>p("Issue"),className:`px-4 py-2 rounded-full text-sm font-semibold ${f==="Issue"?"bg-primary-DEFAULT text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Issues"}),d.jsxs("select",{value:y,onChange:x=>m(x.target.value),className:"px-3 py-2 rounded-full text-sm font-semibold bg-gray-700 text-gray-300 hover:bg-gray-600",children:[d.jsx("option",{value:"All",children:"All Status"}),d.jsx("option",{value:"Published",children:"Published"}),d.jsx("option",{value:"Planning",children:"Planning"}),d.jsx("option",{value:"Writing",children:"Writing"}),d.jsx("option",{value:"Editing",children:"Editing"}),d.jsx("option",{value:"On_hold",children:"On Hold"})]})]}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:d.jsx("div",{className:"lg:col-span-3",children:d.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8",children:b.map(x=>{const w=o==null?void 0:o.find(_=>_.work_id===x.id);return d.jsx(Cye,{work:x,userLibraryItem:w,queryClient:t},x.id)})})})})]})};var B$="basil",Aye=function(e){return e===3?"v3":e},V$="https://js.stripe.com",Oye="".concat(V$,"/").concat(B$,"/stripe.js"),Pye=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Rye=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Iye=function(e){return Pye.test(e)||Rye.test(e)},Dye=function(){for(var e=document.querySelectorAll('script[src^="'.concat(V$,'"]')),t=0;t<e.length;t++){var r=e[t];if(Iye(r.src))return r}return null},zR=function(e){var t="",r=document.createElement("script");r.src="".concat(Oye).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},Lye=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})},wf=null,Qg=null,ey=null,Mye=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},zye=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Fye=function(e){return wf!==null?wf:(wf=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var n=Dye();if(!(n&&e)){if(!n)n=zR(e);else if(n&&ey!==null&&Qg!==null){var s;n.removeEventListener("load",ey),n.removeEventListener("error",Qg),(s=n.parentNode)===null||s===void 0||s.removeChild(n),n=zR(e)}}ey=zye(t,r),Qg=Mye(r),n.addEventListener("load",ey),n.addEventListener("error",Qg)}catch(i){r(i);return}}),wf.catch(function(t){return wf=null,Promise.reject(t)}))},$ye=function(e,t,r){if(e===null)return null;var n=t[0],s=n.match(/^pk_test/),i=Aye(e.version),o=B$;s&&i!==o&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(o,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return Lye(a,r),a},ty,W$=!1,H$=function(){return ty||(ty=Fye(null).catch(function(e){return ty=null,Promise.reject(e)}),ty)};Promise.resolve().then(function(){return H$()}).catch(function(e){W$||console.warn(e)});var Uye=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];W$=!0;var n=Date.now();return H$().then(function(s){return $ye(s,t,n)})},K$={exports:{}},t_,FR;function qye(){if(FR)return t_;FR=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return t_=e,t_}var r_,$R;function Bye(){if($R)return r_;$R=1;var e=qye();function t(){}function r(){}return r.resetWarningCache=t,r_=function(){function n(o,a,l,c,u,h){if(h!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},r_}K$.exports=Bye()();var Vye=K$.exports;const Vt=ki(Vye);function UR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UR(Object(r),!0).forEach(function(n){Z$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function My(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?My=function(t){return typeof t}:My=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},My(e)}function Z$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wye(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Hye(e,t){if(e==null)return{};var r=Wye(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function G$(e,t){return Kye(e)||Zye(e,t)||Gye(e,t)||Yye()}function Kye(e){if(Array.isArray(e))return e}function Zye(e,t){var r=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(r!=null){var n=[],s=!0,i=!1,o,a;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));s=!0);}catch(l){i=!0,a=l}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw a}}return n}}function Gye(e,t){if(e){if(typeof e=="string")return BR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BR(e,t)}}function BR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Gn=function(e,t,r){var n=!!r,s=ae.useRef(r);ae.useEffect(function(){s.current=r},[r]),ae.useEffect(function(){if(!n||!e)return function(){};var i=function(){s.current&&s.current.apply(s,arguments)};return e.on(t,i),function(){e.off(t,i)}},[n,t,e,s])},Nk=function(e){var t=ae.useRef(e);return ae.useEffect(function(){t.current=e},[e]),t.current},eh=function(e){return e!==null&&My(e)==="object"},Jye=function(e){return eh(e)&&typeof e.then=="function"},Xye=function(e){return eh(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},VR="[object Object]",Qye=function e(t,r){if(!eh(t)||!eh(r))return t===r;var n=Array.isArray(t),s=Array.isArray(r);if(n!==s)return!1;var i=Object.prototype.toString.call(t)===VR,o=Object.prototype.toString.call(r)===VR;if(i!==o)return!1;if(!i&&!n)return t===r;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(var c={},u=0;u<a.length;u+=1)c[a[u]]=!0;for(var h=0;h<l.length;h+=1)c[l[h]]=!0;var f=Object.keys(c);if(f.length!==a.length)return!1;var p=t,y=r,m=function(b){return e(p[b],y[b])};return f.every(m)},Y$=function(e,t,r){return eh(e)?Object.keys(e).reduce(function(n,s){var i=!eh(t)||!Qye(e[s],t[s]);return r.includes(s)?(i&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),n):i?qR(qR({},n||{}),{},Z$({},s,e[s])):n},null):null},J$="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",WR=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J$;if(e===null||Xye(e))return e;throw new Error(t)},eve=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J$;if(Jye(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(n){return WR(n,t)})};var r=WR(e,t);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},tve=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.9.2"}),e.registerAppInfo({name:"react-stripe-js",version:"3.9.2",url:"https://stripe.com/docs/stripe-js/react"}))},Nx=ae.createContext(null);Nx.displayName="ElementsContext";var X$=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},Q$=function(e){var t=e.stripe,r=e.options,n=e.children,s=ae.useMemo(function(){return eve(t)},[t]),i=ae.useState(function(){return{stripe:s.tag==="sync"?s.stripe:null,elements:s.tag==="sync"?s.stripe.elements(r):null}}),o=G$(i,2),a=o[0],l=o[1];ae.useEffect(function(){var h=!0,f=function(p){l(function(y){return y.stripe?y:{stripe:p,elements:p.elements(r)}})};return s.tag==="async"&&!a.stripe?s.stripePromise.then(function(p){p&&h&&f(p)}):s.tag==="sync"&&!a.stripe&&f(s.stripe),function(){h=!1}},[s,a,r]);var c=Nk(t);ae.useEffect(function(){c!==null&&c!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[c,t]);var u=Nk(r);return ae.useEffect(function(){if(a.elements){var h=Y$(r,u,["clientSecret","fonts"]);h&&a.elements.update(h)}},[r,u,a.elements]),ae.useEffect(function(){tve(a.stripe)},[a.stripe]),ae.createElement(Nx.Provider,{value:a},n)};Q$.propTypes={stripe:Vt.any,options:Vt.object};var rve=function(e){var t=ae.useContext(Nx);return X$(t,e)},nve=function(){var e=rve("calls useElements()"),t=e.elements;return t};Vt.func.isRequired;var e8=ae.createContext(null);e8.displayName="CheckoutSdkContext";var sve=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},ive=ae.createContext(null);ive.displayName="CheckoutContext";Vt.any,Vt.shape({fetchClientSecret:Vt.func.isRequired,elementsOptions:Vt.object}).isRequired;var Sk=function(e){var t=ae.useContext(e8),r=ae.useContext(Nx);if(t&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?sve(t,e):X$(r,e)},ove=["mode"],ave=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},cr=function(e,t){var r="".concat(ave(e),"Element"),n=function(o){var a=o.id,l=o.className,c=o.options,u=c===void 0?{}:c,h=o.onBlur,f=o.onFocus,p=o.onReady,y=o.onChange,m=o.onEscape,b=o.onClick,x=o.onLoadError,w=o.onLoaderStart,_=o.onNetworksChange,j=o.onConfirm,k=o.onCancel,N=o.onShippingAddressChange,C=o.onShippingRateChange,E=Sk("mounts <".concat(r,">")),T="elements"in E?E.elements:null,P="checkoutSdk"in E?E.checkoutSdk:null,O=ae.useState(null),I=G$(O,2),R=I[0],F=I[1],$=ae.useRef(null),W=ae.useRef(null);Gn(R,"blur",h),Gn(R,"focus",f),Gn(R,"escape",m),Gn(R,"click",b),Gn(R,"loaderror",x),Gn(R,"loaderstart",w),Gn(R,"networkschange",_),Gn(R,"confirm",j),Gn(R,"cancel",k),Gn(R,"shippingaddresschange",N),Gn(R,"shippingratechange",C),Gn(R,"change",y);var q;p&&(e==="expressCheckout"?q=p:q=function(){p(R)}),Gn(R,"ready",q),ae.useLayoutEffect(function(){if($.current===null&&W.current!==null&&(T||P)){var Z=null;if(P)switch(e){case"payment":Z=P.createPaymentElement(u);break;case"address":if("mode"in u){var z=u.mode,J=Hye(u,ove);if(z==="shipping")Z=P.createShippingAddressElement(J);else if(z==="billing")Z=P.createBillingAddressElement(J);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":Z=P.createExpressCheckoutElement(u);break;case"currencySelector":Z=P.createCurrencySelectorElement();break;case"taxId":Z=P.createTaxIdElement(u);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else T&&(Z=T.create(e,u));$.current=Z,F(Z),Z&&Z.mount(W.current)}},[T,P,u]);var K=Nk(u);return ae.useEffect(function(){if($.current){var Z=Y$(u,K,["paymentRequest"]);Z&&"update"in $.current&&$.current.update(Z)}},[u,K]),ae.useLayoutEffect(function(){return function(){if($.current&&typeof $.current.destroy=="function")try{$.current.destroy(),$.current=null}catch{}}},[]),ae.createElement("div",{id:a,className:l,ref:W})},s=function(o){Sk("mounts <".concat(r,">"));var a=o.id,l=o.className;return ae.createElement("div",{id:a,className:l})},i=t?s:n;return i.propTypes={id:Vt.string,className:Vt.string,onChange:Vt.func,onBlur:Vt.func,onFocus:Vt.func,onReady:Vt.func,onEscape:Vt.func,onClick:Vt.func,onLoadError:Vt.func,onLoaderStart:Vt.func,onNetworksChange:Vt.func,onConfirm:Vt.func,onCancel:Vt.func,onShippingAddressChange:Vt.func,onShippingRateChange:Vt.func,options:Vt.object},i.displayName=r,i.__elementType=e,i},ur=typeof window>"u",lve=ae.createContext(null);lve.displayName="EmbeddedCheckoutProviderContext";var cve=function(){var e=Sk("calls useStripe()"),t=e.stripe;return t};cr("auBankAccount",ur);var uve=cr("card",ur);cr("cardNumber",ur);cr("cardExpiry",ur);cr("cardCvc",ur);cr("fpxBank",ur);cr("iban",ur);cr("idealBank",ur);cr("p24Bank",ur);cr("epsBank",ur);cr("payment",ur);cr("expressCheckout",ur);cr("currencySelector",ur);cr("paymentRequestButton",ur);cr("linkAuthentication",ur);cr("address",ur);cr("shippingAddress",ur);cr("paymentMethodMessaging",ur);cr("affirmMessage",ur);cr("afterpayClearpayMessage",ur);cr("taxId",ur);const dve=Uye("pk_live_51RxGqHQv3TvmaocsigmbkzARDylf5d34zCKW0INXPNSvz9XPZKWcgSavRvi5TarLZSBNyZR7ROgsMQxSDd0AOdl200sNB27qOy"),hve=({product:e,onSuccess:t,onCancel:r,customerEmail:n})=>{const s=cve(),i=nve(),[o,a]=v.useState(!1),[l,c]=v.useState(null),[u,h]=v.useState(n||""),f=async m=>{if(m.preventDefault(),!(!s||!i)){a(!0),c(null);try{const b=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:e.id,successUrl:`${window.location.origin}/success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${window.location.origin}/cancel`,customerEmail:u,productSlug:e.id})}),{url:x,error:w}=await b.json();if(w)throw new Error(w);window.location.href=x}catch(b){c(b instanceof Error?b.message:"An error occurred"),a(!1)}}},p=(m,b)=>new Intl.NumberFormat("en-US",{style:"currency",currency:b.toUpperCase()}).format(m/100),y=m=>m?m==="month"?"monthly":m==="year"?"yearly":m:"";return d.jsxs("div",{className:"max-w-md mx-auto bg-background-light rounded-2xl shadow-lg overflow-hidden border border-border/30",children:[d.jsx("div",{className:"bg-gradient-to-r from-primary/80 to-secondary/80 p-6 text-text-light",children:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"w-16 h-20 bg-white bg-opacity-20 rounded-md flex items-center justify-center",children:d.jsx(Ip,{className:"w-8 h-8 text-white"})}),d.jsx("div",{children:d.jsx("h2",{className:"text-xl font-bold",children:e.name})})]})}),d.jsx("div",{className:"p-6 border-b border-border/30",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-secondary",children:p(e.price,e.currency)}),e.is_subscription&&d.jsxs("div",{className:"text-text-light/70",children:["per ",y(e.interval),e.trial_period_days&&e.trial_period_days>0&&d.jsxs("span",{className:"ml-2 text-success font-medium",children:["• ",e.trial_period_days,"-day free trial"]})]}),!e.is_subscription&&d.jsx("div",{className:"text-text-light/70",children:"One-time purchase"})]})}),d.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-text-light mb-2",children:"Email Address"}),d.jsx("input",{type:"email",id:"email",value:u,onChange:m=>h(m.target.value),required:!0,className:"w-full px-3 py-2 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"your@email.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Card Details"}),d.jsx("div",{className:"border border-border/30 rounded-xl p-3 bg-background/30",children:d.jsx(uve,{options:{style:{base:{fontSize:"16px",color:"#e0e0e0","::placeholder":{color:"#a0a0a0"}},invalid:{color:"#dc3545"}}}})})]}),l&&d.jsxs("div",{className:"flex items-center space-x-2 text-error bg-error/10 p-3 rounded-xl border border-error/30",children:[d.jsx(li,{className:"w-5 h-5"}),d.jsx("span",{className:"text-sm",children:l})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("button",{type:"submit",disabled:!s||o,className:"w-full bg-secondary text-background py-3 px-4 rounded-xl font-medium hover:bg-secondary-dark focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:ring-offset-2 focus:ring-offset-background-light disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:o?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-background"}),d.jsx("span",{children:"Processing..."})]}):d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(BF,{className:"w-5 h-5"}),d.jsx("span",{children:e.is_subscription?"Start Subscription":"Complete Purchase"})]})}),d.jsx("button",{type:"button",onClick:r,className:"w-full bg-background/50 text-text-light py-3 px-4 rounded-xl font-medium hover:bg-background/70 focus:outline-none focus:ring-2 focus:ring-border focus:ring-offset-2 focus:ring-offset-background-light transition-all duration-200 border border-border/30",children:"Cancel"})]}),d.jsxs("div",{className:"text-center text-xs text-text-dark",children:[d.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[d.jsx(Mo,{className:"w-4 h-4 text-success"}),d.jsx("span",{children:"Secure payment powered by Stripe"})]}),d.jsx("p",{children:"Your payment information is encrypted and secure."})]})]})]})},fve=e=>d.jsx(Q$,{stripe:dve,children:d.jsx(hve,{...e})}),t8=v.createContext({});function pve(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const d2=typeof window<"u",mve=d2?v.useLayoutEffect:v.useEffect,h2=v.createContext(null);function f2(e,t){e.indexOf(t)===-1&&e.push(t)}function p2(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const ta=(e,t,r)=>r>t?t:r<e?e:r;let m2=()=>{};const ra={},r8=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function n8(e){return typeof e=="object"&&e!==null}const s8=e=>/^0[^.\s]+$/u.test(e);function g2(e){let t;return()=>(t===void 0&&(t=e()),t)}const As=e=>e,gve=(e,t)=>r=>t(e(r)),Rm=(...e)=>e.reduce(gve),$p=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class y2{constructor(){this.subscriptions=[]}add(t){return f2(this.subscriptions,t),()=>p2(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gi=e=>e*1e3,Yi=e=>e/1e3;function i8(e,t){return t?e*(1e3/t):0}const o8=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,yve=1e-7,vve=12;function bve(e,t,r,n,s){let i,o,a=0;do o=t+(r-t)/2,i=o8(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>yve&&++a<vve);return o}function Im(e,t,r,n){if(e===t&&r===n)return As;const s=i=>bve(i,0,1,e,r);return i=>i===0||i===1?i:o8(s(i),t,n)}const a8=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,l8=e=>t=>1-e(1-t),c8=Im(.33,1.53,.69,.99),v2=l8(c8),u8=a8(v2),d8=e=>(e*=2)<1?.5*v2(e):.5*(2-Math.pow(2,-10*(e-1))),b2=e=>1-Math.sin(Math.acos(e)),h8=l8(b2),f8=a8(b2),xve=Im(.42,0,1,1),wve=Im(0,0,.58,1),p8=Im(.42,0,.58,1),_ve=e=>Array.isArray(e)&&typeof e[0]!="number",m8=e=>Array.isArray(e)&&typeof e[0]=="number",jve={linear:As,easeIn:xve,easeInOut:p8,easeOut:wve,circIn:b2,circInOut:f8,circOut:h8,backIn:v2,backInOut:u8,backOut:c8,anticipate:d8},kve=e=>typeof e=="string",HR=e=>{if(m8(e)){m2(e.length===4);const[t,r,n,s]=e;return Im(t,r,n,s)}else if(kve(e))return jve[e];return e},ry=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Nve(e,t){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),e()),u(a)}const c={schedule:(u,h=!1,f=!1)=>{const p=f&&s?r:n;return h&&o.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(a=u,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,i&&(i=!1,c.process(u))}};return c}const Sve=40;function g8(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=ry.reduce((x,w)=>(x[w]=Nve(i),x),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:f,render:p,postRender:y}=o,m=()=>{const x=ra.useManualTiming?s.timestamp:performance.now();r=!1,ra.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(x-s.timestamp,Sve),1)),s.timestamp=x,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),h.process(s),f.process(s),p.process(s),y.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(m))},b=()=>{r=!0,n=!0,s.isProcessing||e(m)};return{schedule:ry.reduce((x,w)=>{const _=o[w];return x[w]=(j,k=!1,N=!1)=>(r||b(),_.schedule(j,k,N)),x},{}),cancel:x=>{for(let w=0;w<ry.length;w++)o[ry[w]].cancel(x)},state:s,steps:o}}const{schedule:Mt,cancel:yl,state:Gr,steps:n_}=g8(typeof requestAnimationFrame<"u"?requestAnimationFrame:As,!0);let zy;function Eve(){zy=void 0}const Bn={now:()=>(zy===void 0&&Bn.set(Gr.isProcessing||ra.useManualTiming?Gr.timestamp:performance.now()),zy),set:e=>{zy=e,queueMicrotask(Eve)}},y8=e=>t=>typeof t=="string"&&t.startsWith(e),x2=y8("--"),Cve=y8("var(--"),w2=e=>Cve(e)?Tve.test(e.split("/*")[0].trim()):!1,Tve=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Mh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Up={...Mh,transform:e=>ta(0,1,e)},ny={...Mh,default:1},fp=e=>Math.round(e*1e5)/1e5,_2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Ave(e){return e==null}const Ove=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,j2=(e,t)=>r=>!!(typeof r=="string"&&Ove.test(r)&&r.startsWith(e)||t&&!Ave(r)&&Object.prototype.hasOwnProperty.call(r,t)),v8=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,a]=n.match(_2);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Pve=e=>ta(0,255,e),s_={...Mh,transform:e=>Math.round(Pve(e))},pc={test:j2("rgb","red"),parse:v8("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+s_.transform(e)+", "+s_.transform(t)+", "+s_.transform(r)+", "+fp(Up.transform(n))+")"};function Rve(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Ek={test:j2("#"),parse:Rve,transform:pc.transform},Dm=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),$a=Dm("deg"),Ji=Dm("%"),Ue=Dm("px"),Ive=Dm("vh"),Dve=Dm("vw"),KR={...Ji,parse:e=>Ji.parse(e)/100,transform:e=>Ji.transform(e*100)},ad={test:j2("hsl","hue"),parse:v8("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ji.transform(fp(t))+", "+Ji.transform(fp(r))+", "+fp(Up.transform(n))+")"},mr={test:e=>pc.test(e)||Ek.test(e)||ad.test(e),parse:e=>pc.test(e)?pc.parse(e):ad.test(e)?ad.parse(e):Ek.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?pc.transform(e):ad.transform(e),getAnimatableNone:e=>{const t=mr.parse(e);return t.alpha=0,mr.transform(t)}},Lve=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Mve(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(_2))==null?void 0:t.length)||0)+(((r=e.match(Lve))==null?void 0:r.length)||0)>0}const b8="number",x8="color",zve="var",Fve="var(",ZR="${}",$ve=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qp(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const o=t.replace($ve,a=>(mr.test(a)?(n.color.push(i),s.push(x8),r.push(mr.parse(a))):a.startsWith(Fve)?(n.var.push(i),s.push(zve),r.push(a)):(n.number.push(i),s.push(b8),r.push(parseFloat(a))),++i,ZR)).split(ZR);return{values:r,split:o,indexes:n,types:s}}function w8(e){return qp(e).values}function _8(e){const{split:t,types:r}=qp(e),n=t.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],s[o]!==void 0){const a=r[o];a===b8?i+=fp(s[o]):a===x8?i+=mr.transform(s[o]):i+=s[o]}return i}}const Uve=e=>typeof e=="number"?0:mr.test(e)?mr.getAnimatableNone(e):e;function qve(e){const t=w8(e);return _8(e)(t.map(Uve))}const vl={test:Mve,parse:w8,createTransformer:_8,getAnimatableNone:qve};function i_(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Bve({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const a=r<.5?r*(1+t):r+t-r*t,l=2*r-a;s=i_(l,a,e+1/3),i=i_(l,a,e),o=i_(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Cv(e,t){return r=>r>0?t:e}const Wt=(e,t,r)=>e+(t-e)*r,o_=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},Vve=[Ek,pc,ad],Wve=e=>Vve.find(t=>t.test(e));function GR(e){const t=Wve(e);if(!t)return!1;let r=t.parse(e);return t===ad&&(r=Bve(r)),r}const YR=(e,t)=>{const r=GR(e),n=GR(t);if(!r||!n)return Cv(e,t);const s={...r};return i=>(s.red=o_(r.red,n.red,i),s.green=o_(r.green,n.green,i),s.blue=o_(r.blue,n.blue,i),s.alpha=Wt(r.alpha,n.alpha,i),pc.transform(s))},Ck=new Set(["none","hidden"]);function Hve(e,t){return Ck.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function Kve(e,t){return r=>Wt(e,t,r)}function k2(e){return typeof e=="number"?Kve:typeof e=="string"?w2(e)?Cv:mr.test(e)?YR:Yve:Array.isArray(e)?j8:typeof e=="object"?mr.test(e)?YR:Zve:Cv}function j8(e,t){const r=[...e],n=r.length,s=e.map((i,o)=>k2(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function Zve(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=k2(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function Gve(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][n[i]],a=e.values[o]??0;r[s]=a,n[i]++}return r}const Yve=(e,t)=>{const r=vl.createTransformer(t),n=qp(e),s=qp(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Ck.has(e)&&!s.values.length||Ck.has(t)&&!n.values.length?Hve(e,t):Rm(j8(Gve(n,s),s.values),r):Cv(e,t)};function k8(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Wt(e,t,r):k2(e)(e,t)}const Jve=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Mt.update(t,r),stop:()=>yl(t),now:()=>Gr.isProcessing?Gr.timestamp:Bn.now()}},N8=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Tv=2e4;function N2(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Tv;)t+=r,n=e.next(t);return t>=Tv?1/0:t}function Xve(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(N2(n),Tv);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:Yi(s)}}const Qve=5;function S8(e,t,r){const n=Math.max(t-Qve,0);return i8(r-e(n),t-n)}const er={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},a_=.001;function ebe({duration:e=er.duration,bounce:t=er.bounce,velocity:r=er.velocity,mass:n=er.mass}){let s,i,o=1-t;o=ta(er.minDamping,er.maxDamping,o),e=ta(er.minDuration,er.maxDuration,Yi(e)),o<1?(s=c=>{const u=c*o,h=u*e,f=u-r,p=Tk(c,o),y=Math.exp(-h);return a_-f/p*y},i=c=>{const u=c*o*e,h=u*r+r,f=Math.pow(o,2)*Math.pow(c,2)*e,p=Math.exp(-u),y=Tk(Math.pow(c,2),o);return(-s(c)+a_>0?-1:1)*((h-f)*p)/y}):(s=c=>{const u=Math.exp(-c*e),h=(c-r)*e+1;return-a_+u*h},i=c=>{const u=Math.exp(-c*e),h=(r-c)*(e*e);return u*h});const a=5/e,l=rbe(s,i,a);if(e=Gi(e),isNaN(l))return{stiffness:er.stiffness,damping:er.damping,duration:e};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:e}}}const tbe=12;function rbe(e,t,r){let n=r;for(let s=1;s<tbe;s++)n=n-e(n)/t(n);return n}function Tk(e,t){return e*Math.sqrt(1-t*t)}const nbe=["duration","bounce"],sbe=["stiffness","damping","mass"];function JR(e,t){return t.some(r=>e[r]!==void 0)}function ibe(e){let t={velocity:er.velocity,stiffness:er.stiffness,damping:er.damping,mass:er.mass,isResolvedFromDuration:!1,...e};if(!JR(e,sbe)&&JR(e,nbe))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*ta(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:er.mass,stiffness:s,damping:i}}else{const r=ebe(e);t={...t,...r,mass:er.mass},t.isResolvedFromDuration=!0}return t}function Av(e=er.visualDuration,t=er.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=ibe({...r,velocity:-Yi(r.velocity||0)}),y=f||0,m=c/(2*Math.sqrt(l*u)),b=o-i,x=Yi(Math.sqrt(l/u)),w=Math.abs(b)<5;n||(n=w?er.restSpeed.granular:er.restSpeed.default),s||(s=w?er.restDelta.granular:er.restDelta.default);let _;if(m<1){const k=Tk(x,m);_=N=>{const C=Math.exp(-m*x*N);return o-C*((y+m*x*b)/k*Math.sin(k*N)+b*Math.cos(k*N))}}else if(m===1)_=k=>o-Math.exp(-x*k)*(b+(y+x*b)*k);else{const k=x*Math.sqrt(m*m-1);_=N=>{const C=Math.exp(-m*x*N),E=Math.min(k*N,300);return o-C*((y+m*x*b)*Math.sinh(E)+k*b*Math.cosh(E))/k}}const j={calculatedDuration:p&&h||null,next:k=>{const N=_(k);if(p)a.done=k>=h;else{let C=k===0?y:0;m<1&&(C=k===0?Gi(y):S8(_,k,N));const E=Math.abs(C)<=n,T=Math.abs(o-N)<=s;a.done=E&&T}return a.value=a.done?o:N,a},toString:()=>{const k=Math.min(N2(j),Tv),N=N8(C=>j.next(k*C).value,k,30);return k+"ms "+N},toTransition:()=>{}};return j}Av.applyToOptions=e=>{const t=Xve(e,100,Av);return e.ease=t.ease,e.duration=Gi(t.duration),e.type="keyframes",e};function Ak({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,y=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let m=r*t;const b=h+m,x=o===void 0?b:o(b);x!==b&&(m=x-h);const w=E=>-m*Math.exp(-E/n),_=E=>x+w(E),j=E=>{const T=w(E),P=_(E);f.done=Math.abs(T)<=c,f.value=f.done?x:P};let k,N;const C=E=>{p(f.value)&&(k=E,N=Av({keyframes:[f.value,y(f.value)],velocity:S8(_,E,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:E=>{let T=!1;return!N&&k===void 0&&(T=!0,j(E),C(E)),k!==void 0&&E>=k?N.next(E-k):(!T&&j(E),f)}}}function obe(e,t,r){const n=[],s=r||ra.mix||k8,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||As:t;a=Rm(l,a)}n.push(a)}return n}function abe(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(m2(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=obe(t,n,s),l=a.length,c=u=>{if(o&&u<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const f=$p(e[h],e[h+1],u);return a[h](f)};return r?u=>c(ta(e[0],e[i-1],u)):c}function lbe(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=$p(0,t,n);e.push(Wt(r,1,s))}}function cbe(e){const t=[0];return lbe(t,e.length-1),t}function ube(e,t){return e.map(r=>r*t)}function dbe(e,t){return e.map(()=>t||p8).splice(0,e.length-1)}function pp({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=_ve(n)?n.map(HR):HR(n),i={done:!1,value:t[0]},o=ube(r&&r.length===t.length?r:cbe(t),e),a=abe(o,t,{ease:Array.isArray(s)?s:dbe(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const hbe=e=>e!==null;function S2(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(hbe),o=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!o||n===void 0?i[o]:n}const fbe={decay:Ak,inertia:Ak,tween:pp,keyframes:pp,spring:Av};function E8(e){typeof e.type=="string"&&(e.type=fbe[e.type])}class E2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const pbe=e=>e/100;class C2 extends E2{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,n;const{motionValue:s}=this.options;s&&s.updatedAt!==Bn.now()&&this.tick(Bn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(r=this.options).onStop)==null||n.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;E8(t);const{type:r=pp,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=r||pp;l!==pp&&typeof a[0]!="number"&&(this.mixKeyframes=Rm(pbe,k8(a[0],a[1])),a=[0,100]);const c=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=N2(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=c}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:c=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:p,type:y,onUpdate:m,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const x=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,j=n;if(h){const E=Math.min(this.currentTime,s)/a;let T=Math.floor(E),P=E%1;!P&&E>=1&&(P=1),P===1&&T--,T=Math.min(T,h+1),T%2&&(f==="reverse"?(P=1-P,p&&(P-=p/a)):f==="mirror"&&(j=o)),_=ta(0,1,P)*a}const k=w?{done:!1,value:u[0]}:j.next(_);i&&(k.value=i(k.value));let{done:N}=k;!w&&l!==null&&(N=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return C&&y!==Ak&&(k.value=S2(u,this.options,b,this.speed)),m&&m(k.value),C&&this.finish(),k}then(t,r){return this.finished.then(t,r)}get duration(){return Yi(this.calculatedDuration)}get time(){return Yi(this.currentTime)}set time(t){var r;t=Gi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Bn.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Yi(this.currentTime))}play(){var t,r;if(this.isStopped)return;const{driver:n=Jve,startTime:s}=this.options;this.driver||(this.driver=n(o=>this.tick(o))),(r=(t=this.options).onPlay)==null||r.call(t);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=s??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Bn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function mbe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const mc=e=>e*180/Math.PI,Ok=e=>{const t=mc(Math.atan2(e[1],e[0]));return Pk(t)},gbe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ok,rotateZ:Ok,skewX:e=>mc(Math.atan(e[1])),skewY:e=>mc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Pk=e=>(e=e%360,e<0&&(e+=360),e),XR=Ok,QR=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),e4=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),ybe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:QR,scaleY:e4,scale:e=>(QR(e)+e4(e))/2,rotateX:e=>Pk(mc(Math.atan2(e[6],e[5]))),rotateY:e=>Pk(mc(Math.atan2(-e[2],e[0]))),rotateZ:XR,rotate:XR,skewX:e=>mc(Math.atan(e[4])),skewY:e=>mc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Rk(e){return e.includes("scale")?1:0}function Ik(e,t){if(!e||e==="none")return Rk(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=ybe,s=r;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=gbe,s=a}if(!s)return Rk(t);const i=n[t],o=s[1].split(",").map(bbe);return typeof i=="function"?i(o):o[i]}const vbe=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Ik(r,t)};function bbe(e){return parseFloat(e.trim())}const zh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fh=new Set(zh),t4=e=>e===Mh||e===Ue,xbe=new Set(["x","y","z"]),wbe=zh.filter(e=>!xbe.has(e));function _be(e){const t=[];return wbe.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Ac={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ik(t,"x"),y:(e,{transform:t})=>Ik(t,"y")};Ac.translateX=Ac.x;Ac.translateY=Ac.y;const Oc=new Set;let Dk=!1,Lk=!1,Mk=!1;function C8(){if(Lk){const e=Array.from(Oc).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=_be(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var a;(a=n.getValue(i))==null||a.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Lk=!1,Dk=!1,Oc.forEach(e=>e.complete(Mk)),Oc.clear()}function T8(){Oc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Lk=!0)})}function jbe(){Mk=!0,T8(),C8(),Mk=!1}class T2{constructor(t,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Oc.add(this),Dk||(Dk=!0,Mt.read(T8),Mt.resolveKeyframes(C8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const a=n.readValue(r,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}mbe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Oc.delete(this)}cancel(){this.state==="scheduled"&&(Oc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const kbe=e=>e.startsWith("--");function Nbe(e,t,r){kbe(t)?e.style.setProperty(t,r):e.style[t]=r}const Sbe=g2(()=>window.ScrollTimeline!==void 0),Ebe={};function Cbe(e,t){const r=g2(e);return()=>Ebe[t]??r()}const A8=Cbe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Kf=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,r4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kf([0,.65,.55,1]),circOut:Kf([.55,0,1,.45]),backIn:Kf([.31,.01,.66,-.59]),backOut:Kf([.33,1.53,.69,.99])};function O8(e,t){if(e)return typeof e=="function"?A8()?N8(e,t):"ease-out":m8(e)?Kf(e):Array.isArray(e)?e.map(r=>O8(r,t)||r4.easeOut):r4[e]}function Tbe(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[t]:r};l&&(u.offset=l);const h=O8(a,s);Array.isArray(h)&&(u.easing=h);const f={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(u,f)}function P8(e){return typeof e=="function"&&"applyToOptions"in e}function Abe({type:e,...t}){return P8(e)&&A8()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Obe extends E2{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,m2(typeof t.type!="string");const c=Abe(t);this.animation=Tbe(r,n,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=S2(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):Nbe(r,n,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var t,r;const n=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Yi(Number(n))}get time(){return Yi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Gi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Sbe()?(this.animation.timeline=t,As):r(this)}}const R8={anticipate:d8,backInOut:u8,circInOut:f8};function Pbe(e){return e in R8}function Rbe(e){typeof e.ease=="string"&&Pbe(e.ease)&&(e.ease=R8[e.ease])}const n4=10;class Ibe extends Obe{constructor(t){Rbe(t),E8(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const a=new C2({...o,autoplay:!1}),l=Gi(this.finishedTime??this.time);r.setWithVelocity(a.sample(l-n4).value,a.sample(l).value,n4),a.stop()}}const s4=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(vl.test(e)||e==="0")&&!e.startsWith("url("));function Dbe(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function Lbe(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=s4(s,t),a=s4(i,t);return!o||!a?!1:Dbe(e)||(r==="spring"||P8(r))&&n}function zk(e){e.duration=0,e.type}const Mbe=new Set(["opacity","clipPath","filter","transform"]),zbe=g2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Fbe(e){var t;const{motionValue:r,name:n,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!(((t=r==null?void 0:r.owner)==null?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=r.owner.getProps();return zbe()&&n&&Mbe.has(n)&&(n!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}const $be=40;class Ube extends E2{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...h}){var f;super(),this.stop=()=>{var m,b;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Bn.now();const p={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:c,element:u,...h},y=(u==null?void 0:u.KeyframeResolver)||T2;this.keyframeResolver=new y(a,(m,b,x)=>this.onKeyframesResolved(m,b,p,!x),l,c,u),(f=this.keyframeResolver)==null||f.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=n;this.resolvedAt=Bn.now(),Lbe(t,i,o,a)||((ra.instantAnimations||!l)&&(u==null||u(S2(t,n,r))),t[0]=t[t.length-1],zk(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>$be?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},f=!c&&Fbe(h)?new Ibe({...h,element:h.motionValue.owner.current}):new C2(h);f.finished.then(()=>this.notifyFinished()).catch(As),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),jbe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const qbe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Bbe(e){const t=qbe.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function I8(e,t,r=1){const[n,s]=Bbe(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return r8(o)?parseFloat(o):o}return w2(s)?I8(s,t,r+1):s}function A2(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const D8=new Set(["width","height","top","left","right","bottom",...zh]),Vbe={test:e=>e==="auto",parse:e=>e},L8=e=>t=>t.test(e),M8=[Mh,Ue,Ji,$a,Dve,Ive,Vbe],i4=e=>M8.find(L8(e));function Wbe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||s8(e):!0}const Hbe=new Set(["brightness","contrast","saturate","opacity"]);function Kbe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(_2)||[];if(!n)return e;const s=r.replace(n,"");let i=Hbe.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const Zbe=/\b([a-z-]*)\(.*?\)/gu,Fk={...vl,getAnimatableNone:e=>{const t=e.match(Zbe);return t?t.map(Kbe).join(" "):e}},o4={...Mh,transform:Math.round},Gbe={rotate:$a,rotateX:$a,rotateY:$a,rotateZ:$a,scale:ny,scaleX:ny,scaleY:ny,scaleZ:ny,skew:$a,skewX:$a,skewY:$a,distance:Ue,translateX:Ue,translateY:Ue,translateZ:Ue,x:Ue,y:Ue,z:Ue,perspective:Ue,transformPerspective:Ue,opacity:Up,originX:KR,originY:KR,originZ:Ue},O2={borderWidth:Ue,borderTopWidth:Ue,borderRightWidth:Ue,borderBottomWidth:Ue,borderLeftWidth:Ue,borderRadius:Ue,radius:Ue,borderTopLeftRadius:Ue,borderTopRightRadius:Ue,borderBottomRightRadius:Ue,borderBottomLeftRadius:Ue,width:Ue,maxWidth:Ue,height:Ue,maxHeight:Ue,top:Ue,right:Ue,bottom:Ue,left:Ue,padding:Ue,paddingTop:Ue,paddingRight:Ue,paddingBottom:Ue,paddingLeft:Ue,margin:Ue,marginTop:Ue,marginRight:Ue,marginBottom:Ue,marginLeft:Ue,backgroundPositionX:Ue,backgroundPositionY:Ue,...Gbe,zIndex:o4,fillOpacity:Up,strokeOpacity:Up,numOctaves:o4},Ybe={...O2,color:mr,backgroundColor:mr,outlineColor:mr,fill:mr,stroke:mr,borderColor:mr,borderTopColor:mr,borderRightColor:mr,borderBottomColor:mr,borderLeftColor:mr,filter:Fk,WebkitFilter:Fk},z8=e=>Ybe[e];function F8(e,t){let r=z8(e);return r!==Fk&&(r=vl),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Jbe=new Set(["auto","none","0"]);function Xbe(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!Jbe.has(i)&&qp(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=F8(r,s)}class Qbe extends T2{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),w2(c))){const u=I8(c,r.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!D8.has(n)||t.length!==2)return;const[s,i]=t,o=i4(s),a=i4(i);if(o!==a)if(t4(o)&&t4(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Ac[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||Wbe(t[s]))&&n.push(s);n.length&&Xbe(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ac[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Ac[n](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(t=this.removedTransforms)!=null&&t.length&&this.removedTransforms.forEach(([l,c])=>{r.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function exe(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const $8=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function txe(e){return n8(e)&&"offsetHeight"in e}const a4=30,rxe=e=>!isNaN(parseFloat(e));class nxe{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var s;const i=Bn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Bn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=rxe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new y2);const n=this.events[t].add(r);return t==="change"?()=>{n(),Mt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>a4)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,a4);return i8(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function th(e,t){return new nxe(e,t)}const{schedule:P2}=g8(queueMicrotask,!1),ti={x:!1,y:!1};function U8(){return ti.x||ti.y}function sxe(e){return e==="x"||e==="y"?ti[e]?null:(ti[e]=!0,()=>{ti[e]=!1}):ti.x||ti.y?null:(ti.x=ti.y=!0,()=>{ti.x=ti.y=!1})}function q8(e,t){const r=exe(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function l4(e){return!(e.pointerType==="touch"||U8())}function ixe(e,t,r={}){const[n,s,i]=q8(e,r),o=a=>{if(!l4(a))return;const{target:l}=a,c=t(l,a);if(typeof c!="function"||!l)return;const u=h=>{l4(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return n.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const B8=(e,t)=>t?e===t?!0:B8(e,t.parentElement):!1,R2=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,oxe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function axe(e){return oxe.has(e.tagName)||e.tabIndex!==-1}const Fy=new WeakSet;function c4(e){return t=>{t.key==="Enter"&&e(t)}}function l_(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const lxe=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=c4(()=>{if(Fy.has(r))return;l_(r,"down");const s=c4(()=>{l_(r,"up")}),i=()=>l_(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function u4(e){return R2(e)&&!U8()}function cxe(e,t,r={}){const[n,s,i]=q8(e,r),o=a=>{const l=a.currentTarget;if(!u4(a))return;Fy.add(l);const c=t(l,a),u=(p,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Fy.has(l)&&Fy.delete(l),u4(p)&&typeof c=="function"&&c(p,{success:y})},h=p=>{u(p,l===window||l===document||r.useGlobalTarget||B8(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return n.forEach(a=>{(r.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),txe(a)&&(a.addEventListener("focus",l=>lxe(l,s)),!axe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function V8(e){return n8(e)&&"ownerSVGElement"in e}function uxe(e){return V8(e)&&e.tagName==="svg"}const dn=e=>!!(e&&e.getVelocity),dxe=[...M8,mr,vl],hxe=e=>dxe.find(L8(e)),W8=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function fxe(e=!0){const t=v.useContext(h2);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=v.useId();v.useEffect(()=>{if(e)return s(i)},[e]);const o=v.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const H8=v.createContext({strict:!1}),d4={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rh={};for(const e in d4)rh[e]={isEnabled:t=>d4[e].some(r=>!!t[r])};function pxe(e){for(const t in e)rh[t]={...rh[t],...e[t]}}const mxe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ov(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||mxe.has(e)}let K8=e=>!Ov(e);function gxe(e){typeof e=="function"&&(K8=t=>t.startsWith("on")?!Ov(t):e(t))}try{gxe(require("@emotion/is-prop-valid").default)}catch{}function yxe(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(K8(s)||r===!0&&Ov(s)||!t&&!Ov(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const Sx=v.createContext({});function Ex(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Bp(e){return typeof e=="string"||Array.isArray(e)}const I2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],D2=["initial",...I2];function Cx(e){return Ex(e.animate)||D2.some(t=>Bp(e[t]))}function Z8(e){return!!(Cx(e)||e.variants)}function vxe(e,t){if(Cx(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Bp(r)?r:void 0,animate:Bp(n)?n:void 0}}return e.inherit!==!1?t:{}}function bxe(e){const{initial:t,animate:r}=vxe(e,v.useContext(Sx));return v.useMemo(()=>({initial:t,animate:r}),[h4(t),h4(r)])}function h4(e){return Array.isArray(e)?e.join(" "):e}const Vp={};function xxe(e){for(const t in e)Vp[t]=e[t],x2(t)&&(Vp[t].isCSSVariable=!0)}function G8(e,{layout:t,layoutId:r}){return Fh.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Vp[e]||e==="opacity")}const wxe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_xe=zh.length;function jxe(e,t,r){let n="",s=!0;for(let i=0;i<_xe;i++){const o=zh[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||r){const c=$8(a,O2[o]);if(!l){s=!1;const u=wxe[o]||o;n+=`${u}(${c}) `}r&&(t[o]=c)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function L2(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const c=t[l];if(Fh.has(l)){o=!0;continue}else if(x2(l)){s[l]=c;continue}else{const u=$8(c,O2[l]);l.startsWith("origin")?(a=!0,i[l]=u):n[l]=u}}if(t.transform||(o||r?n.transform=jxe(t,e.transform,r):n.transform&&(n.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;n.transformOrigin=`${l} ${c} ${u}`}}const M2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Y8(e,t,r){for(const n in t)!dn(t[n])&&!G8(n,r)&&(e[n]=t[n])}function kxe({transformTemplate:e},t){return v.useMemo(()=>{const r=M2();return L2(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Nxe(e,t){const r=e.style||{},n={};return Y8(n,r,e),Object.assign(n,kxe(e,t)),n}function Sxe(e,t){const r={},n=Nxe(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const Exe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Cxe={offset:"strokeDashoffset",array:"strokeDasharray"};function Txe(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?Exe:Cxe;e[i.offset]=Ue.transform(-n);const o=Ue.transform(t),a=Ue.transform(r);e[i.array]=`${o} ${a}`}function J8(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,c,u){if(L2(e,a,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&Txe(h,s,i,o,!1)}const X8=()=>({...M2(),attrs:{}}),Q8=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Axe(e,t,r,n){const s=v.useMemo(()=>{const i=X8();return J8(i,t,Q8(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Y8(i,e.style,e),s.style={...i,...s.style}}return s}const Oxe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function z2(e){return typeof e!="string"||e.includes("-")?!1:!!(Oxe.indexOf(e)>-1||/[A-Z]/u.test(e))}function Pxe(e,t,r,{latestValues:n},s,i=!1){const o=(z2(e)?Axe:Sxe)(t,n,s,e),a=yxe(t,typeof e=="string",i),l=e!==v.Fragment?{...a,...o,ref:r}:{},{children:c}=t,u=v.useMemo(()=>dn(c)?c.get():c,[c]);return v.createElement(e,{...l,children:u})}function f4(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function F2(e,t,r,n){if(typeof t=="function"){const[s,i]=f4(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=f4(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function $y(e){return dn(e)?e.get():e}function Rxe({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:Ixe(r,n,s,e),renderState:t()}}function Ixe(e,t,r,n){const s={},i=n(e,{});for(const f in i)s[f]=$y(i[f]);let{initial:o,animate:a}=e;const l=Cx(e),c=Z8(e);t&&c&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!Ex(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const y=F2(e,f[p]);if(y){const{transitionEnd:m,transition:b,...x}=y;for(const w in x){let _=x[w];if(Array.isArray(_)){const j=u?_.length-1:0;_=_[j]}_!==null&&(s[w]=_)}for(const w in m)s[w]=m[w]}}}return s}const eU=e=>(t,r)=>{const n=v.useContext(Sx),s=v.useContext(h2),i=()=>Rxe(e,t,n,s);return r?i():pve(i)};function $2(e,t,r){var n;const{style:s}=e,i={};for(const o in s)(dn(s[o])||t.style&&dn(t.style[o])||G8(o,e)||((n=r==null?void 0:r.getValue(o))==null?void 0:n.liveStyle)!==void 0)&&(i[o]=s[o]);return i}const Dxe=eU({scrapeMotionValuesFromProps:$2,createRenderState:M2});function tU(e,t,r){const n=$2(e,t,r);for(const s in e)if(dn(e[s])||dn(t[s])){const i=zh.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const Lxe=eU({scrapeMotionValuesFromProps:tU,createRenderState:X8}),Mxe=Symbol.for("motionComponentSymbol");function ld(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function zxe(e,t,r){return v.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):ld(r)&&(r.current=n))},[t])}const U2=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Fxe="framerAppearId",rU="data-"+U2(Fxe),nU=v.createContext({});function $xe(e,t,r,n,s){var i,o;const{visualElement:a}=v.useContext(Sx),l=v.useContext(H8),c=v.useContext(h2),u=v.useContext(W8).reducedMotion,h=v.useRef(null);n=n||l.renderer,!h.current&&n&&(h.current=n(e,{visualState:t,parent:a,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,p=v.useContext(nU);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&Uxe(h.current,r,s,p);const y=v.useRef(!1);v.useInsertionEffect(()=>{f&&y.current&&f.update(r,c)});const m=r[rU],b=v.useRef(!!m&&!((i=window.MotionHandoffIsComplete)!=null&&i.call(window,m))&&((o=window.MotionHasOptimisedAnimation)==null?void 0:o.call(window,m)));return mve(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),v.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,m)}),b.current=!1),f.enteringChildren=void 0)}),f}function Uxe(e,t,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:sU(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&ld(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:l,layoutRoot:c})}function sU(e){if(e)return e.options.allowProjection!==!1?e.projection:sU(e.parent)}function c_(e,{forwardMotionProps:t=!1}={},r,n){r&&pxe(r);const s=z2(e)?Lxe:Dxe;function i(a,l){let c;const u={...v.useContext(W8),...a,layoutId:qxe(a)},{isStatic:h}=u,f=bxe(a),p=s(a,h);if(!h&&d2){Bxe();const y=Vxe(u);c=y.MeasureLayout,f.visualElement=$xe(e,p,u,n,y.ProjectionNode)}return d.jsxs(Sx.Provider,{value:f,children:[c&&f.visualElement?d.jsx(c,{visualElement:f.visualElement,...u}):null,Pxe(e,a,zxe(p,f.visualElement,l),p,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=v.forwardRef(i);return o[Mxe]=e,o}function qxe({layoutId:e}){const t=v.useContext(t8).id;return t&&e!==void 0?t+"-"+e:e}function Bxe(e,t){v.useContext(H8).strict}function Vxe(e){const{drag:t,layout:r}=rh;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function Wxe(e,t){if(typeof Proxy>"u")return c_;const r=new Map,n=(i,o)=>c_(i,o,e,t),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,c_(o,void 0,e,t)),r.get(o))})}function iU({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Hxe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Kxe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function u_(e){return e===void 0||e===1}function $k({scale:e,scaleX:t,scaleY:r}){return!u_(e)||!u_(t)||!u_(r)}function oc(e){return $k(e)||oU(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function oU(e){return p4(e.x)||p4(e.y)}function p4(e){return e&&e!=="0%"}function Pv(e,t,r){const n=e-r,s=t*n;return r+s}function m4(e,t,r,n,s){return s!==void 0&&(e=Pv(e,s,n)),Pv(e,r,n)+t}function Uk(e,t=0,r=1,n,s){e.min=m4(e.min,t,r,n,s),e.max=m4(e.max,t,r,n,s)}function aU(e,{x:t,y:r}){Uk(e.x,t.translate,t.scale,t.originPoint),Uk(e.y,r.translate,r.scale,r.originPoint)}const g4=.999999999999,y4=1.0000000000001;function Zxe(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ud(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,aU(e,o)),n&&oc(i.latestValues)&&ud(e,i.latestValues))}t.x<y4&&t.x>g4&&(t.x=1),t.y<y4&&t.y>g4&&(t.y=1)}function cd(e,t){e.min=e.min+t,e.max=e.max+t}function v4(e,t,r,n,s=.5){const i=Wt(e.min,e.max,s);Uk(e,t,r,i,n)}function ud(e,t){v4(e.x,t.x,t.scaleX,t.scale,t.originX),v4(e.y,t.y,t.scaleY,t.scale,t.originY)}function lU(e,t){return iU(Kxe(e.getBoundingClientRect(),t))}function Gxe(e,t,r){const n=lU(e,r),{scroll:s}=t;return s&&(cd(n.x,s.offset.x),cd(n.y,s.offset.y)),n}const b4=()=>({translate:0,scale:1,origin:0,originPoint:0}),dd=()=>({x:b4(),y:b4()}),x4=()=>({min:0,max:0}),sr=()=>({x:x4(),y:x4()}),qk={current:null},cU={current:!1};function Yxe(){if(cU.current=!0,!!d2)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>qk.current=e.matches;e.addEventListener("change",t),t()}else qk.current=!1}const Jxe=new WeakMap;function Xxe(e,t,r){for(const n in t){const s=t[n],i=r[n];if(dn(s))e.addValue(n,s);else if(dn(i))e.addValue(n,th(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(n);e.addValue(n,th(o!==void 0?o:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const w4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Qxe{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=T2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Bn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Mt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Cx(r),this.isVariantNode=Z8(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&dn(p)&&p.set(l[f])}}mount(t){var r;this.current=t,Jxe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),cU.current||Yxe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qk.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),yl(this.notifyUpdate),yl(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Fh.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Mt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in rh){const r=rh[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):sr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<w4.length;n++){const s=w4[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Xxe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=th(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(r8(n)||s8(n))?n=parseFloat(n):!hxe(n)&&vl.test(r)&&(n=F8(t,r)),this.setBaseTarget(t,dn(n)?n.get():n)),dn(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=F2(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);o&&(s=o[t])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!dn(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new y2),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){P2.render(this.render)}}class uU extends Qxe{constructor(){super(...arguments),this.KeyframeResolver=Qbe}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;dn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function dU(e,{style:t,vars:r},n,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function ewe(e){return window.getComputedStyle(e)}class twe extends uU{constructor(){super(...arguments),this.type="html",this.renderInstance=dU}readValueFromInstance(t,r){var n;if(Fh.has(r))return(n=this.projection)!=null&&n.isProjecting?Rk(r):vbe(t,r);{const s=ewe(t),i=(x2(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return lU(t,r)}build(t,r,n){L2(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return $2(t,r,n)}}const hU=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rwe(e,t,r,n){dU(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(hU.has(s)?s:U2(s),t.attrs[s])}class nwe extends uU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=sr}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Fh.has(r)){const n=z8(r);return n&&n.default||0}return r=hU.has(r)?r:U2(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return tU(t,r,n)}build(t,r,n){J8(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){rwe(t,r,n,s)}mount(t){this.isSVGTag=Q8(t.tagName),super.mount(t)}}const swe=(e,t)=>z2(e)?new nwe(t):new twe(t,{allowProjection:e!==v.Fragment});function jd(e,t,r){const n=e.getProps();return F2(n,t,r!==void 0?r:n.custom,e)}const Bk=e=>Array.isArray(e);function iwe(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,th(r))}function owe(e){return Bk(e)?e[e.length-1]||0:e}function awe(e,t){const r=jd(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const a=owe(i[o]);iwe(e,o,a)}}function lwe(e){return!!(dn(e)&&e.add)}function Vk(e,t){const r=e.getValue("willChange");if(lwe(r))return r.add(t);if(!r&&ra.WillChange){const n=new ra.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function fU(e){return e.props[rU]}const cwe=e=>e!==null;function uwe(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(cwe),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}const dwe={type:"spring",stiffness:500,damping:25,restSpeed:10},hwe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),fwe={type:"keyframes",duration:.8},pwe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mwe=(e,{keyframes:t})=>t.length>2?fwe:Fh.has(e)?e.startsWith("scale")?hwe(t[1]):dwe:pwe;function gwe({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const q2=(e,t,r,n={},s,i)=>o=>{const a=A2(n,e)||{},l=a.delay||n.delay||0;let{elapsed:c=0}=n;c=c-Gi(l);const u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};gwe(a)||Object.assign(u,mwe(e,u)),u.duration&&(u.duration=Gi(u.duration)),u.repeatDelay&&(u.repeatDelay=Gi(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(zk(u),u.delay===0&&(h=!0)),(ra.instantAnimations||ra.skipAnimations)&&(h=!0,zk(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!i&&t.get()!==void 0){const f=uwe(u.keyframes,a);if(f!==void 0){Mt.update(()=>{u.onUpdate(f),u.onComplete()});return}}return a.isSync?new C2(u):new Ube(u)};function ywe({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function pU(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;n&&(i=n);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const u in a){const h=e.getValue(u,e.latestValues[u]??null),f=a[u];if(f===void 0||c&&ywe(c,u))continue;const p={delay:r,...A2(i||{},u)},y=h.get();if(y!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===y&&!p.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const x=fU(e);if(x){const w=window.MotionHandoffAnimation(x,u,Mt);w!==null&&(p.startTime=w,m=!0)}}Vk(e,u),h.start(q2(u,h,f,e.shouldReduceMotion&&D8.has(u)?{type:!1}:p,e,m));const b=h.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{Mt.update(()=>{o&&awe(e,o)})}),l}function mU(e,t,r,n=0,s=1){const i=Array.from(e).sort((l,c)=>l.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:a-i*n}function Wk(e,t,r={}){var n;const s=jd(e,t,r.type==="exit"?(n=e.presenceContext)==null?void 0:n.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const o=s?()=>Promise.all(pU(e,s,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=i;return vwe(e,t,c,u,h,f,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function vwe(e,t,r=0,n=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Wk(l,t,{...o,delay:r+(typeof n=="function"?0:n)+mU(e.variantChildren,l,n,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function bwe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>Wk(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=Wk(e,t,r);else{const s=typeof t=="function"?jd(e,t,r.custom):t;n=Promise.all(pU(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function gU(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const xwe=D2.length;function yU(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?yU(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<xwe;r++){const n=D2[r],s=e.props[n];(Bp(s)||s===!1)&&(t[n]=s)}return t}const wwe=[...I2].reverse(),_we=I2.length;function jwe(e){return t=>Promise.all(t.map(({animation:r,options:n})=>bwe(e,r,n)))}function kwe(e){let t=jwe(e),r=_4(),n=!0;const s=l=>(c,u)=>{var h;const f=jd(e,u,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:y,...m}=f;c={...c,...m,...y}}return c};function i(l){t=l(e)}function o(l){const{props:c}=e,u=yU(e.parent)||{},h=[],f=new Set;let p={},y=1/0;for(let b=0;b<_we;b++){const x=wwe[b],w=r[x],_=c[x]!==void 0?c[x]:u[x],j=Bp(_),k=x===l?w.isActive:null;k===!1&&(y=b);let N=_===u[x]&&_!==c[x]&&j;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),w.protectedKeys={...p},!w.isActive&&k===null||!_&&!w.prevProp||Ex(_)||typeof _=="boolean")continue;const C=Nwe(w.prevProp,_);let E=C||x===l&&w.isActive&&!N&&j||b>y&&j,T=!1;const P=Array.isArray(_)?_:[_];let O=P.reduce(s(x),{});k===!1&&(O={});const{prevResolvedValues:I={}}=w,R={...I,...O},F=W=>{E=!0,f.has(W)&&(T=!0,f.delete(W)),w.needsAnimating[W]=!0;const q=e.getValue(W);q&&(q.liveStyle=!1)};for(const W in R){const q=O[W],K=I[W];if(p.hasOwnProperty(W))continue;let Z=!1;Bk(q)&&Bk(K)?Z=!gU(q,K):Z=q!==K,Z?q!=null?F(W):f.add(W):q!==void 0&&f.has(W)?F(W):w.protectedKeys[W]=!0}w.prevProp=_,w.prevResolvedValues=O,w.isActive&&(p={...p,...O}),n&&e.blockInitialAnimation&&(E=!1);const $=N&&C;E&&(!$||T)&&h.push(...P.map(W=>{const q={type:x};if(typeof W=="string"&&n&&!$&&e.manuallyAnimateOnMount&&e.parent){const{parent:K}=e,Z=jd(K,W);if(K.enteringChildren&&Z){const{delayChildren:z}=Z.transition||{};q.delay=mU(K.enteringChildren,e,z)}}return{animation:W,options:q}}))}if(f.size){const b={};if(typeof c.initial!="boolean"){const x=jd(e,Array.isArray(c.initial)?c.initial[0]:c.initial);x&&x.transition&&(b.transition=x.transition)}f.forEach(x=>{const w=e.getBaseTarget(x),_=e.getValue(x);_&&(_.liveStyle=!0),b[x]=w??null}),h.push({animation:b})}let m=!!h.length;return n&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),n=!1,m?t(h):Promise.resolve()}function a(l,c){var u;if(r[l].isActive===c)return Promise.resolve();(u=e.variantChildren)==null||u.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),r[l].isActive=c;const h=o(l);for(const f in r)r[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>r,reset:()=>{r=_4(),n=!0}}}function Nwe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gU(t,e):!1}function tc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _4(){return{animate:tc(!0),whileInView:tc(),whileHover:tc(),whileTap:tc(),whileDrag:tc(),whileFocus:tc(),exit:tc()}}class Tl{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Swe extends Tl{constructor(t){super(t),t.animationState||(t.animationState=kwe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ex(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let Ewe=0;class Cwe extends Tl{constructor(){super(...arguments),this.id=Ewe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Twe={animation:{Feature:Swe},exit:{Feature:Cwe}};function Wp(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Lm(e){return{point:{x:e.pageX,y:e.pageY}}}const Awe=e=>t=>R2(t)&&e(t,Lm(t));function mp(e,t,r,n){return Wp(e,t,Awe(r),n)}const vU=1e-4,Owe=1-vU,Pwe=1+vU,bU=.01,Rwe=0-bU,Iwe=0+bU;function Sn(e){return e.max-e.min}function Dwe(e,t,r){return Math.abs(e-t)<=r}function j4(e,t,r,n=.5){e.origin=n,e.originPoint=Wt(t.min,t.max,e.origin),e.scale=Sn(r)/Sn(t),e.translate=Wt(r.min,r.max,e.origin)-e.originPoint,(e.scale>=Owe&&e.scale<=Pwe||isNaN(e.scale))&&(e.scale=1),(e.translate>=Rwe&&e.translate<=Iwe||isNaN(e.translate))&&(e.translate=0)}function gp(e,t,r,n){j4(e.x,t.x,r.x,n?n.originX:void 0),j4(e.y,t.y,r.y,n?n.originY:void 0)}function k4(e,t,r){e.min=r.min+t.min,e.max=e.min+Sn(t)}function Lwe(e,t,r){k4(e.x,t.x,r.x),k4(e.y,t.y,r.y)}function N4(e,t,r){e.min=t.min-r.min,e.max=e.min+Sn(t)}function yp(e,t,r){N4(e.x,t.x,r.x),N4(e.y,t.y,r.y)}function bs(e){return[e("x"),e("y")]}const xU=({current:e})=>e?e.ownerDocument.defaultView:null,S4=(e,t)=>Math.abs(e-t);function Mwe(e,t){const r=S4(e.x,t.x),n=S4(e.y,t.y);return Math.sqrt(r**2+n**2)}class wU{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=h_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=Mwe(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:m}=f,{timestamp:b}=Gr;this.history.push({...m,timestamp:b});const{onStart:x,onMove:w}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=d_(p,this.transformPagePoint),Mt.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:y,onSessionEnd:m,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=h_(f.type==="pointercancel"?this.lastMoveEventInfo:d_(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,x),m&&m(f,x)},!R2(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const a=Lm(t),l=d_(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Gr;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=r;h&&h(t,h_(l,this.history)),this.removeListeners=Rm(mp(this.contextWindow,"pointermove",this.handlePointerMove),mp(this.contextWindow,"pointerup",this.handlePointerUp),mp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),yl(this.updatePoint)}}function d_(e,t){return t?{point:t(e.point)}:e}function E4(e,t){return{x:e.x-t.x,y:e.y-t.y}}function h_({point:e},t){return{point:e,delta:E4(e,_U(t)),offset:E4(e,zwe(t)),velocity:Fwe(t,.1)}}function zwe(e){return e[0]}function _U(e){return e[e.length-1]}function Fwe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=_U(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Gi(t)));)r--;if(!n)return{x:0,y:0};const i=Yi(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function $we(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Wt(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Wt(r,e,n.max):Math.min(e,r)),e}function C4(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Uwe(e,{top:t,left:r,bottom:n,right:s}){return{x:C4(e.x,r,s),y:C4(e.y,t,n)}}function T4(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function qwe(e,t){return{x:T4(e.x,t.x),y:T4(e.y,t.y)}}function Bwe(e,t){let r=.5;const n=Sn(e),s=Sn(t);return s>n?r=$p(t.min,t.max-n,e.min):n>s&&(r=$p(e.min,e.max-s,t.min)),ta(0,1,r)}function Vwe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Hk=.35;function Wwe(e=Hk){return e===!1?e=0:e===!0&&(e=Hk),{x:A4(e,"left","right"),y:A4(e,"top","bottom")}}function A4(e,t,r){return{min:O4(e,t),max:O4(e,r)}}function O4(e,t){return typeof e=="number"?e:e[t]||0}const Hwe=new WeakMap;class Kwe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=sr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Lm(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:y,onDragStart:m}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=sxe(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bs(x=>{let w=this.getAxisMotionValue(x).get()||0;if(Ji.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const j=_.layout.layoutBox[x];j&&(w=Sn(j)*(parseFloat(w)/100))}}this.originPoint[x]=w}),m&&Mt.postRender(()=>m(h,f)),Vk(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:m,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=f;if(y&&this.currentDirection===null){this.currentDirection=Zwe(x),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),b&&b(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>bs(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new wU(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:xU(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Mt.postRender(()=>a(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!sy(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=$we(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)==null?void 0:t.layout,i=this.constraints;r&&ld(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=Uwe(s.layoutBox,r):this.constraints=!1,this.elastic=Wwe(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&bs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Vwe(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ld(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Gxe(n,s.root,this.visualElement.getTransformPagePoint());let o=qwe(s.layout.layoutBox,i);if(r){const a=r(Hxe(o));this.hasMutatedConstraints=!!a,a&&(o=iU(a))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=bs(u=>{if(!sy(u,r,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:n?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Vk(this.visualElement,t),n.start(q2(t,n,0,r,this.visualElement,!1))}stopAnimation(){bs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){bs(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps();return n[r]||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){bs(r=>{const{drag:n}=this.getProps();if(!sy(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[r];i.set(t[r]-Wt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!ld(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};bs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=Bwe({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),bs(o=>{if(!sy(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Wt(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;Hwe.set(this.visualElement,this);const t=this.visualElement.current,r=mp(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();ld(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Mt.read(n);const o=Wp(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(bs(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Hk,dragMomentum:a=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function sy(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Zwe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Gwe extends Tl{constructor(t){super(t),this.removeGroupControls=As,this.removeListeners=As,this.controls=new Kwe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||As}unmount(){this.removeGroupControls(),this.removeListeners()}}const P4=e=>(t,r)=>{e&&Mt.postRender(()=>e(t,r))};class Ywe extends Tl{constructor(){super(...arguments),this.removePointerDownListener=As}onPointerDown(t){this.session=new wU(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xU(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:P4(t),onStart:P4(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Mt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=mp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Uy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function R4(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const _f={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ue.test(e))e=parseFloat(e);else return e;const r=R4(e,t.target.x),n=R4(e,t.target.y);return`${r}% ${n}%`}},Jwe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=vl.parse(e);if(s.length>5)return n;const i=vl.createTransformer(e),o=typeof s[0]!="number"?1:0,a=r.x.scale*t.x,l=r.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const c=Wt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};let f_=!1;class Xwe extends v.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;xxe(Qwe),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),f_&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Uy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,f_=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Mt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),P2.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;f_=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function jU(e){const[t,r]=fxe(),n=v.useContext(t8);return d.jsx(Xwe,{...e,layoutGroup:n,switchLayoutGroup:v.useContext(nU),isPresent:t,safeToRemove:r})}const Qwe={borderRadius:{..._f,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_f,borderTopRightRadius:_f,borderBottomLeftRadius:_f,borderBottomRightRadius:_f,boxShadow:Jwe};function e0e(e,t,r){const n=dn(e)?e:th(e);return n.start(q2("",n,t,r)),n.animation}const t0e=(e,t)=>e.depth-t.depth;class r0e{constructor(){this.children=[],this.isDirty=!1}add(t){f2(this.children,t),this.isDirty=!0}remove(t){p2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(t0e),this.isDirty=!1,this.children.forEach(t)}}function n0e(e,t){const r=Bn.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(yl(n),e(i-t))};return Mt.setup(n,!0),()=>yl(n)}const kU=["TopLeft","TopRight","BottomLeft","BottomRight"],s0e=kU.length,I4=e=>typeof e=="string"?parseFloat(e):e,D4=e=>typeof e=="number"||Ue.test(e);function i0e(e,t,r,n,s,i){s?(e.opacity=Wt(0,r.opacity??1,o0e(n)),e.opacityExit=Wt(t.opacity??1,0,a0e(n))):i&&(e.opacity=Wt(t.opacity??1,r.opacity??1,n));for(let o=0;o<s0e;o++){const a=`border${kU[o]}Radius`;let l=L4(t,a),c=L4(r,a);l===void 0&&c===void 0||(l||(l=0),c||(c=0),l===0||c===0||D4(l)===D4(c)?(e[a]=Math.max(Wt(I4(l),I4(c),n),0),(Ji.test(c)||Ji.test(l))&&(e[a]+="%")):e[a]=c)}(t.rotate||r.rotate)&&(e.rotate=Wt(t.rotate||0,r.rotate||0,n))}function L4(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const o0e=NU(0,.5,h8),a0e=NU(.5,.95,As);function NU(e,t,r){return n=>n<e?0:n>t?1:r($p(e,t,n))}function M4(e,t){e.min=t.min,e.max=t.max}function fs(e,t){M4(e.x,t.x),M4(e.y,t.y)}function z4(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function F4(e,t,r,n,s){return e-=t,e=Pv(e,1/r,n),s!==void 0&&(e=Pv(e,1/s,n)),e}function l0e(e,t=0,r=1,n=.5,s,i=e,o=e){if(Ji.test(t)&&(t=parseFloat(t),t=Wt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Wt(i.min,i.max,n);e===i&&(a-=t),e.min=F4(e.min,t,r,a,s),e.max=F4(e.max,t,r,a,s)}function $4(e,t,[r,n,s],i,o){l0e(e,t[r],t[n],t[s],t.scale,i,o)}const c0e=["x","scaleX","originX"],u0e=["y","scaleY","originY"];function U4(e,t,r,n){$4(e.x,t,c0e,r?r.x:void 0,n?n.x:void 0),$4(e.y,t,u0e,r?r.y:void 0,n?n.y:void 0)}function q4(e){return e.translate===0&&e.scale===1}function SU(e){return q4(e.x)&&q4(e.y)}function B4(e,t){return e.min===t.min&&e.max===t.max}function d0e(e,t){return B4(e.x,t.x)&&B4(e.y,t.y)}function V4(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function EU(e,t){return V4(e.x,t.x)&&V4(e.y,t.y)}function W4(e){return Sn(e.x)/Sn(e.y)}function H4(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class h0e{constructor(){this.members=[]}add(t){f2(this.members,t),t.scheduleRender()}remove(t){if(p2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function f0e(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:p,skewY:y}=r;c&&(n=`perspective(${c}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),y&&(n+=`skewY(${y}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const p_=["","X","Y","Z"],p0e=1e3;let m0e=0;function m_(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function CU(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=fU(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Mt,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&CU(n)}function TU({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t==null?void 0:t()){this.id=m0e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(v0e),this.nodes.forEach(_0e),this.nodes.forEach(j0e),this.nodes.forEach(b0e)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new r0e)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new y2),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const a=this.eventHandlers.get(i);a&&a.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=V8(i)&&!uxe(i),this.instance=i;const{layoutId:o,layout:a,visualElement:l}=this.options;if(l&&!l.current&&l.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(a||o)&&(this.isLayoutDirty=!0),e){let c,u=0;const h=()=>this.root.updateBlockedByResize=!1;Mt.read(()=>{u=window.innerWidth}),e(i,()=>{const f=window.innerWidth;f!==u&&(u=f,this.root.updateBlockedByResize=!0,c&&c(),c=n0e(h,250),Uy.hasAnimatedSinceResize&&(Uy.hasAnimatedSinceResize=!1,this.nodes.forEach(G4)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&l&&(o||a)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||l.getDefaultTransition()||C0e,{onLayoutAnimationStart:y,onLayoutAnimationComplete:m}=l.getProps(),b=!this.targetLayout||!EU(this.targetLayout,f),x=!u&&h;if(this.options.layoutRoot||this.resumeFrom||x||u&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...A2(p,"layout"),onPlay:y,onComplete:m};(l.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(c,x)}else u||G4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(k0e),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&CU(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const u=this.path[c];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:o,layout:a}=this.options;if(o===void 0&&!a)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(K4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Z4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(w0e),this.nodes.forEach(g0e),this.nodes.forEach(y0e)):this.nodes.forEach(Z4),this.clearAllSnapshots();const i=Bn.now();Gr.delta=ta(0,1e3/60,i-Gr.timestamp),Gr.timestamp=i,Gr.isProcessing=!0,n_.update.process(Gr),n_.preRender.process(Gr),n_.render.process(Gr),Gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,P2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(x0e),this.sharedNodes.forEach(N0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Mt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Mt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Sn(this.snapshot.measuredBox.x)&&!Sn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=sr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const a=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:a,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!SU(this.projectionDelta),a=this.getTransformTemplate(),l=a?a(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;i&&this.instance&&(o||oc(this.latestValues)||c)&&(s(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let a=this.removeElementScroll(o);return i&&(a=this.removeTransform(a)),T0e(a),{animationId:this.root.animationId,measuredBox:o,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:o}=this.options;if(!o)return sr();const a=o.measureViewportBox();if(!((i=this.scroll)!=null&&i.wasRoot||this.path.some(A0e))){const{scroll:l}=this.root;l&&(cd(a.x,l.offset.x),cd(a.y,l.offset.y))}return a}removeElementScroll(i){var o;const a=sr();if(fs(a,i),(o=this.scroll)!=null&&o.wasRoot)return a;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;c!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&fs(a,i),cd(a.x,u.offset.x),cd(a.y,u.offset.y))}return a}applyTransform(i,o=!1){const a=sr();fs(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ud(a,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),oc(c.latestValues)&&ud(a,c.latestValues)}return oc(this.latestValues)&&ud(a,this.latestValues),a}removeTransform(i){const o=sr();fs(o,i);for(let a=0;a<this.path.length;a++){const l=this.path[a];if(!l.instance||!oc(l.latestValues))continue;$k(l.latestValues)&&l.updateSnapshot();const c=sr(),u=l.measurePageBox();fs(c,u),U4(o,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return oc(this.latestValues)&&U4(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var o;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(o=this.parent)!=null&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:u}=this.options;if(!(!this.layout||!(c||u))){if(this.resolvedRelativeTargetAt=Gr.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sr(),this.relativeTargetOrigin=sr(),yp(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),fs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=sr(),this.targetWithTransforms=sr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Lwe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fs(this.target,this.layout.layoutBox),aU(this.target,this.targetDelta)):fs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sr(),this.relativeTargetOrigin=sr(),yp(this.relativeTargetOrigin,this.target,h.target),fs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$k(this.parent.latestValues)||oU(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(i=this.parent)!=null&&i.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Gr.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;fs(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Zxe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=sr());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(z4(this.prevProjectionDelta.x,this.projectionDelta.x),z4(this.prevProjectionDelta.y,this.projectionDelta.y)),gp(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!H4(this.projectionDelta.x,this.prevProjectionDelta.x)||!H4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),i){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=dd(),this.projectionDelta=dd(),this.projectionDeltaWithTransform=dd()}setAnimationOrigin(i,o=!1){const a=this.snapshot,l=a?a.latestValues:{},c={...this.latestValues},u=dd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=sr(),f=a?a.source:void 0,p=this.layout?this.layout.source:void 0,y=f!==p,m=this.getStack(),b=!m||m.members.length<=1,x=!!(y&&!b&&this.options.crossfade===!0&&!this.path.some(E0e));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const j=_/1e3;Y4(u.x,i.x,j),Y4(u.y,i.y,j),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yp(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),S0e(this.relativeTarget,this.relativeTargetOrigin,h,j),w&&d0e(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=sr()),fs(w,this.relativeTarget)),y&&(this.animationValues=c,i0e(c,l,this.latestValues,j,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var o,a,l;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(l=(a=this.resumingFrom)==null?void 0:a.currentAnimation)==null||l.stop(),this.pendingAnimation&&(yl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Mt.update(()=>{Uy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=th(0)),this.currentAnimation=e0e(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),i.onUpdate&&i.onUpdate(c)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(p0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:a,layout:l,latestValues:c}=i;if(!(!o||!a||!l)){if(this!==i&&this.layout&&l&&AU(this.options.animationType,this.layout.layoutBox,l.layoutBox)){a=this.target||sr();const u=Sn(this.layout.layoutBox.x);a.x.min=i.target.x.min,a.x.max=a.x.min+u;const h=Sn(this.layout.layoutBox.y);a.y.min=i.target.y.min,a.y.max=a.y.min+h}fs(o,a),ud(o,c),gp(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new h0e),this.sharedNodes.get(i).add(o);const a=o.options.initialPromotionConfig;o.promote({transition:a?a.transition:void 0,preserveFollowOpacity:a&&a.shouldPreserveFollowOpacity?a.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:o}=this.options;return o?((i=this.getStack())==null?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:o}=this.options;return o?(i=this.getStack())==null?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:a}={}){const l=this.getStack();l&&l.promote(this,a),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:a}=i;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(o=!0),!o)return;const l={};a.z&&m_("z",i,l,this.animationValues);for(let c=0;c<p_.length;c++)m_(`rotate${p_[c]}`,i,l,this.animationValues),m_(`skew${p_[c]}`,i,l,this.animationValues);i.render();for(const c in l)i.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const a=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=$y(o==null?void 0:o.pointerEvents)||"",i.transform=a?a(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=$y(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!oc(this.latestValues)&&(i.transform=a?a({},""):"none",this.hasProjected=!1);return}i.visibility="";const c=l.animationValues||l.latestValues;this.applyTransformsToTarget();let u=f0e(this.projectionDeltaWithTransform,this.treeScale,c);a&&(u=a(c,u)),i.transform=u;const{x:h,y:f}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,l.animationValues?i.opacity=l===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:i.opacity=l===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in Vp){if(c[p]===void 0)continue;const{correct:y,applyTo:m,isCSSVariable:b}=Vp[p],x=u==="none"?c[p]:y(c[p],l);if(m){const w=m.length;for(let _=0;_<w;_++)i[m[_]]=x}else b?this.options.visualElement.renderState.vars[p]=x:i[p]=x}this.options.layoutId&&(i.pointerEvents=l===this?$y(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var o;return(o=i.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(K4),this.root.sharedNodes.clear()}}}function g0e(e){e.updateLayout()}function y0e(e){var t;const r=((t=e.resumeFrom)==null?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?bs(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],p=Sn(f);f.min=n[h].min,f.max=f.min+p}):AU(i,r.layoutBox,n)&&bs(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],p=Sn(n[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const a=dd();gp(a,n,r.layoutBox);const l=dd();o?gp(l,e.applyTransform(s,!0),r.measuredBox):gp(l,n,r.layoutBox);const c=!SU(a);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const y=sr();yp(y,r.layoutBox,f.layoutBox);const m=sr();yp(m,n,p.layoutBox),EU(y,m)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function v0e(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function b0e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function x0e(e){e.clearSnapshot()}function K4(e){e.clearMeasurements()}function Z4(e){e.isLayoutDirty=!1}function w0e(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function G4(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function _0e(e){e.resolveTargetDelta()}function j0e(e){e.calcProjection()}function k0e(e){e.resetSkewAndRotation()}function N0e(e){e.removeLeadSnapshot()}function Y4(e,t,r){e.translate=Wt(t.translate,0,r),e.scale=Wt(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function J4(e,t,r,n){e.min=Wt(t.min,r.min,n),e.max=Wt(t.max,r.max,n)}function S0e(e,t,r,n){J4(e.x,t.x,r.x,n),J4(e.y,t.y,r.y,n)}function E0e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const C0e={duration:.45,ease:[.4,0,.1,1]},X4=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Q4=X4("applewebkit/")&&!X4("chrome/")?Math.round:As;function eI(e){e.min=Q4(e.min),e.max=Q4(e.max)}function T0e(e){eI(e.x),eI(e.y)}function AU(e,t,r){return e==="position"||e==="preserve-aspect"&&!Dwe(W4(t),W4(r),.2)}function A0e(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const O0e=TU({attachResizeListener:(e,t)=>Wp(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),g_={current:void 0},OU=TU({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!g_.current){const e=new O0e({});e.mount(window),e.setOptions({layoutScroll:!0}),g_.current=e}return g_.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),P0e={pan:{Feature:Ywe},drag:{Feature:Gwe,ProjectionNode:OU,MeasureLayout:jU}};function tI(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Mt.postRender(()=>i(t,Lm(t)))}class R0e extends Tl{mount(){const{current:t}=this.node;t&&(this.unmount=ixe(t,(r,n)=>(tI(this.node,n,"Start"),s=>tI(this.node,s,"End"))))}unmount(){}}class I0e extends Tl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rm(Wp(this.node.current,"focus",()=>this.onFocus()),Wp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function rI(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Mt.postRender(()=>i(t,Lm(t)))}class D0e extends Tl{mount(){const{current:t}=this.node;t&&(this.unmount=cxe(t,(r,n)=>(rI(this.node,n,"Start"),(s,{success:i})=>rI(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Kk=new WeakMap,y_=new WeakMap,L0e=e=>{const t=Kk.get(e.target);t&&t(e)},M0e=e=>{e.forEach(L0e)};function z0e({root:e,...t}){const r=e||document;y_.has(r)||y_.set(r,{});const n=y_.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(M0e,{root:e,...t})),n[s]}function F0e(e,t,r){const n=z0e(t);return Kk.set(e,r),n.observe(e),()=>{Kk.delete(e),n.unobserve(e)}}const $0e={some:0,all:1};class U0e extends Tl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:$0e[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return F0e(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(q0e(t,r))&&this.startObserver()}unmount(){}}function q0e({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const B0e={inView:{Feature:U0e},tap:{Feature:D0e},focus:{Feature:I0e},hover:{Feature:R0e}},V0e={layout:{ProjectionNode:OU,MeasureLayout:jU}},W0e={...Twe,...B0e,...P0e,...V0e},v_=Wxe(W0e,swe),H0e=()=>{const{isAuthenticated:e}=kh(),[t,r]=v.useState(null),[n,s]=v.useState(!1),i=[{id:"monthly",name:"Monthly Membership",price:9.99,interval:"month",features:["Access to all released content","New chapters as they release","Exclusive behind-the-scenes","Early character reveals","Community discussions","Author notes and insights"],paypalPlanId:"monthly_plan_id",highlight:"Perfect for new readers"},{id:"yearly",name:"Annual Membership",price:99.99,interval:"year",features:["Everything in Monthly plan","2 months free (17% savings)","Priority content access","Exclusive annual content","Direct Q&A with author","Member-only events"],popular:!0,paypalPlanId:"yearly_plan_id",highlight:"Best value - Save $19.89"}],o=c=>{if(!e){window.location.href="/login?returnTo=/subscribe";return}r(i.find(u=>u.id===c)||null),s(!0)},a=()=>s(!1),l=()=>s(!1);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 to-background",children:d.jsx("div",{className:"container mx-auto px-4 py-24 md:py-32",children:d.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[d.jsxs(v_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[d.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-foreground mb-6 leading-tight",children:"Unlock the Full Zoroasterverse Experience"}),d.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground mb-8 max-w-3xl mx-auto",children:"Join our community of readers and get exclusive access to the complete story as it unfolds."})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-10 w-full max-w-6xl mx-auto",children:i.map((c,u)=>d.jsxs(v_.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:u*.1+.3,duration:.5},className:`relative w-full ${c.popular?"z-10 transform md:-translate-y-4":""}`,children:[c.popular&&d.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 z-20",children:d.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-amber-600 text-amber-900 px-4 py-1.5 rounded-full text-xs font-bold flex items-center gap-1.5 shadow-lg shadow-amber-500/20",children:[d.jsx(Ip,{className:"w-3.5 h-3.5"}),d.jsx("span",{children:"MOST POPULAR"})]})}),d.jsxs("div",{className:`bg-card border rounded-xl p-6 transition-all duration-300 ${c.popular?"border-amber-500/30 shadow-xl shadow-amber-500/10":"border-border hover:border-primary/50 hover:shadow-lg"}`,children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:c.name}),c.highlight&&d.jsx("p",{className:"text-sm text-primary font-medium mb-3",children:c.highlight}),d.jsxs("div",{className:"mb-2",children:[d.jsxs("span",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:["$",c.price]}),d.jsxs("span",{className:"text-muted-foreground text-lg",children:["/",c.interval]})]}),c.interval==="year"&&d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Only $",(c.price/12).toFixed(2)," per month"]})]}),d.jsx("ul",{className:"space-y-3 mb-8",children:c.features.map((h,f)=>d.jsxs("li",{className:"flex items-start gap-3",children:[d.jsx(Mo,{className:`flex-shrink-0 mt-0.5 ${c.popular?"text-amber-500":"text-primary"}`,size:18}),d.jsx("span",{className:"text-muted-foreground text-sm",children:h})]},f))}),d.jsxs("button",{onClick:()=>o(c.id),className:`w-full py-3 px-6 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 ${c.popular?"bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white shadow-lg shadow-amber-500/20":"bg-primary/10 hover:bg-primary/20 text-primary border border-primary/20"}`,children:["Get Started",d.jsx(up,{className:"w-4 h-4"})]})]})]},c.id))})]})})}),d.jsx("section",{className:"py-16 md:py-24 bg-card/30",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"What You'll Get"}),d.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[{icon:d.jsx(Rp,{className:"w-8 h-8 text-primary"}),title:"Exclusive Content",description:"Access to all chapters, including early releases and subscriber-only content."},{icon:d.jsx($F,{className:"w-8 h-8 text-primary"}),title:"Regular Updates",description:"New chapters delivered on a consistent schedule. No waiting for complete books!"},{icon:d.jsx(Eae,{className:"w-8 h-8 text-primary"}),title:"Early Access",description:"Be the first to experience new chapters and special releases."},{icon:d.jsx(cae,{className:"w-8 h-8 text-primary"}),title:"Community",description:"Join discussions, share theories, and connect with other readers."},{icon:d.jsx(LE,{className:"w-8 h-8 text-primary"}),title:"Behind the Scenes",description:"Exclusive insights into the creative process and world-building."},{icon:d.jsx(Mo,{className:"w-8 h-8 text-primary"}),title:"Ad-Free Experience",description:"Enjoy your reading without any distractions or interruptions."}].map((c,u)=>d.jsxs(v_.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:u*.1,duration:.5},className:"bg-background/50 backdrop-blur-sm p-6 rounded-xl border border-border hover:border-primary/30 transition-colors",children:[d.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center mb-4",children:c.icon}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:c.title}),d.jsx("p",{className:"text-muted-foreground text-sm",children:c.description})]},u))})]})}),d.jsx("section",{className:"py-16 bg-gradient-to-r from-primary/5 to-primary/10",children:d.jsxs("div",{className:"container mx-auto px-4 text-center",children:[d.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Begin Your Journey?"}),d.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-8",children:"Join thousands of readers who are already exploring the Zoroasterverse."}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[d.jsxs("button",{onClick:()=>o("yearly"),className:"px-8 py-3 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white font-medium rounded-lg shadow-lg shadow-amber-500/20 transition-all flex items-center gap-2",children:["Start Reading Now",d.jsx(up,{className:"w-4 h-4"})]}),d.jsx("button",{className:"px-6 py-3 border border-border hover:border-primary/50 hover:bg-background/50 text-foreground font-medium rounded-lg transition-all",children:"Learn More"})]})]})}),n&&t&&d.jsx(fve,{product:{id:t.id,name:t.name,price:t.price*100,currency:"usd",interval:t.interval,is_subscription:!0,trial_period_days:void 0},onCancel:a,onSuccess:l})]})},K0e=()=>{const[e]=qZ(),[t,r]=v.useState(null),[n,s]=v.useState(!0);return v.useEffect(()=>{const i=e.get("session_id");r(i),s(!1)},[e]),n?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center",children:d.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900",children:[d.jsxs("div",{className:"relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),d.jsx("div",{className:"relative z-10 container mx-auto px-4 py-20 text-center",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("div",{className:"w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-8",children:d.jsx(Mo,{className:"w-12 h-12 text-white"})}),d.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"Welcome to the Zoroasterverse!"}),d.jsx("p",{className:"text-xl md:text-2xl text-gray-300 mb-8 leading-relaxed",children:"Your subscription is now active. You're ready to dive into the world of episodic storytelling and join our community of readers."}),t&&d.jsx("div",{className:"bg-gray-800 bg-opacity-50 rounded-lg p-4 mb-8 inline-block",children:d.jsxs("p",{className:"text-gray-300 text-sm",children:["Session ID: ",d.jsx("span",{className:"font-mono text-green-400",children:t})]})})]})})]}),d.jsx("div",{className:"py-20 bg-gray-800",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-16",children:"What Happens Next?"}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(Rp,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Access Your Library"}),d.jsx("p",{className:"text-gray-300",children:"Visit your library to read all available chapters and exclusive content."})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(LE,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Stay Updated"}),d.jsx("p",{className:"text-gray-300",children:"You'll receive notifications when new chapters are ready to read."})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(pv,{className:"w-10 h-10 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Join the Community"}),d.jsx("p",{className:"text-gray-300",children:"Connect with fellow readers and discuss theories in our community."})]})]})]})}),d.jsx("div",{className:"py-20 bg-gray-900",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-16",children:"Get Started Right Away"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[d.jsx(Rr,{to:"/library",className:"bg-purple-600 hover:bg-purple-700 text-white p-8 rounded-2xl transition-all duration-300 hover:scale-105 group",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Visit Your Library"}),d.jsx("p",{className:"text-purple-100 mb-6",children:"Access all available chapters and start reading immediately."})]}),d.jsx(up,{className:"w-8 h-8 group-hover:translate-x-2 transition-transform"})]})}),d.jsx(Rr,{to:"/account",className:"bg-gray-700 hover:bg-gray-600 text-white p-8 rounded-2xl transition-all duration-300 hover:scale-105 group",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Manage Subscription"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"View your subscription details and manage your account."})]}),d.jsx(up,{className:"w-8 h-8 group-hover:translate-x-2 transition-transform"})]})})]})]})}),d.jsx("div",{className:"py-20 bg-gradient-to-r from-purple-900 to-blue-900",children:d.jsx("div",{className:"container mx-auto px-4 text-center",children:d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsx("div",{className:"w-20 h-20 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(Ip,{className:"w-10 h-10 text-white"})}),d.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Welcome Bonus Unlocked!"}),d.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"As a new subscriber, you now have access to exclusive content including:"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-left mb-8",children:[d.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Behind the Scenes"}),d.jsx("p",{className:"text-gray-300",children:"Author notes, character development insights, and world-building details."})]}),d.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Community Access"}),d.jsx("p",{className:"text-gray-300",children:"Join discussions, share theories, and connect with fellow readers."})]})]}),d.jsxs(Rr,{to:"/library",className:"bg-yellow-500 hover:bg-yellow-600 text-gray-900 px-8 py-4 rounded-xl text-xl font-bold transition-all duration-300 hover:scale-105 shadow-lg inline-flex items-center gap-2",children:["Explore Your Library",d.jsx(up,{className:"w-6 h-6"})]})]})})}),d.jsx("div",{className:"py-16 bg-gray-800",children:d.jsxs("div",{className:"container mx-auto px-4 text-center",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Questions or Need Help?"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"Our support team is here to help you get the most out of your subscription."}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[d.jsx(Rr,{to:"/account",className:"bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg transition-colors",children:"Contact Support"}),d.jsx(Rr,{to:"/",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Return Home"})]})]})})]})},Z0e=e=>e.resultType==="page",G0e=e=>e.resultType==="folder";function b_({page:e,onEdit:t}){var r,n,s;const{folderSlug:i,pageSlug:o}=nu(),[a,l]=v.useState([]),[c,u]=v.useState([]),[h,f]=v.useState(null),[p,y]=v.useState(""),[m,b]=v.useState([]),[x,w]=v.useState(!1),[_,j]=v.useState(!0),[k,N]=v.useState(!1),[C,E]=v.useState(!0),[T,P]=v.useState([]),O=v.useRef(null),I=v.useRef(null);e.excerpt;const R=async q=>{if(!q.trim()){b([]);return}try{w(!0);const{data:K,error:Z}=await ce.from("wiki_pages").select(`
          *,
          content, seo_title, seo_description, seo_keywords, sections,
          category:wiki_categories(*),
          user:profiles(*)
        `).or(`title.ilike.%${q}%,excerpt.ilike.%${q}%`);if(Z)throw Z;const z=(K||[]).map(J=>{let te=null;J.user&&typeof J.user=="object"&&!("error"in J.user)&&(te=J.user);let be=null;return J.category&&typeof J.category=="object"&&!("error"in J.category)&&(be=J.category),{...J,resultType:"page",sections:J.sections||[],content:J.content||"",excerpt:J.excerpt||"",is_published:J.is_published??!0,category_id:J.category_id??null,folder_id:J.folder_id??null,created_at:J.created_at||new Date().toISOString(),updated_at:new Date().toISOString(),created_by:J.created_by||"",view_count:J.view_count||0,slug:J.slug||"",seo_title:J.seo_title||null,seo_description:J.seo_description||null,seo_keywords:J.seo_keywords||[],category:be,user:te}});b(z)}catch(K){console.error("Search error:",K),Ve.error("Failed to perform search")}finally{w(!1)}};v.useEffect(()=>{(async()=>{try{E(!0);const{data:q,error:K}=await ce.from("wiki_pages").select("*, content, seo_title, seo_description, seo_keywords, sections, category:wiki_categories(*), user:profiles(*)").order("title");if(K)throw K;const Z=(q||[]).map(z=>{let J=null;z.user&&typeof z.user=="object"&&!("error"in z.user)&&(J=z.user);let te=null;return z.category&&typeof z.category=="object"&&!("error"in z.category)&&(te=z.category),{...z,sections:z.sections||[],content:z.content||"",seo_title:z.seo_title||"",seo_description:z.seo_description||"",seo_keywords:z.seo_keywords||[],category:te,user:J,resultType:"page"}});l(Z)}catch(q){console.error("Error fetching data:",q),Ve.error("Failed to load wiki pages")}finally{E(!1)}})()},[o]);const F=q=>{const K=new Map,Z=[];return q.forEach(z=>{K.set(z.id,{...z,children:[]})}),K.forEach(z=>{if(z.parent_id&&K.has(z.parent_id)){const J=K.get(z.parent_id);J&&(J.children=[...J.children||[],z])}else Z.push(z)}),Z},$=q=>{var K,Z,z,J,te,be,H,G,fe,pe,ke;if(!q)return null;switch(q.type){case"heading_1":case"heading_2":case"heading_3":const V=`h${parseInt(q.type.split("_")[1])}`;return d.jsx(V,{id:`heading-${q.id}`,className:"mt-6 mb-4 font-semibold",children:(K=q.content)==null?void 0:K.text});case"paragraph":return d.jsx("p",{className:"mb-4 leading-relaxed",children:(Z=q.content)==null?void 0:Z.text});case"bullet_list":return d.jsx("ul",{className:"list-disc pl-6 mb-4 space-y-1",children:(J=(z=q.content)==null?void 0:z.items)==null?void 0:J.map((X,le)=>d.jsx("li",{children:X},le))});case"ordered_list":return d.jsx("ol",{className:"list-decimal pl-6 mb-4 space-y-1",children:(be=(te=q.content)==null?void 0:te.items)==null?void 0:be.map((X,le)=>d.jsx("li",{children:X},le))});case"quote":return d.jsx("blockquote",{className:"border-l-4 border-gray-300 pl-4 py-1 my-4 text-gray-600 italic",children:(H=q.content)==null?void 0:H.text});case"code":return d.jsx("pre",{className:"bg-gray-100 p-4 rounded-md my-4 overflow-x-auto",children:d.jsx("code",{children:(G=q.content)==null?void 0:G.code})});case"image":return d.jsxs("div",{className:"my-6",children:[d.jsx("img",{src:(fe=q.content)==null?void 0:fe.url,alt:((pe=q.content)==null?void 0:pe.alt)||"",className:"max-w-full h-auto rounded-md"}),((ke=q.content)==null?void 0:ke.caption)&&d.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:q.content.caption})]});default:return null}},W=(q,K=0)=>q.map(Z=>d.jsxs("div",{className:"pl-2",children:[d.jsxs("div",{className:"flex items-center py-1 px-2 rounded hover:bg-accent cursor-pointer",children:[d.jsx(RE,{size:16,className:"mr-1 text-muted-foreground"}),d.jsx(fv,{size:14,className:"mr-2 text-blue-500"}),d.jsx("span",{className:"text-sm",children:Z.name})]}),Z.children&&Z.children.length>0&&d.jsx("div",{className:"pl-4 border-l border-border ml-1",children:W(Z.children,K+1)}),d.jsx("div",{className:"pl-6",children:a.filter(z=>z.folder_id===Z.id).map(z=>d.jsxs(Rr,{to:`/wiki/${Z.slug}/${z.slug}`,className:`flex items-center py-1 px-2 rounded text-sm ${o===z.slug?"bg-accent font-medium":"text-muted-foreground hover:bg-accent"}`,children:[d.jsx(hv,{size:12,className:"mr-2 text-gray-500"}),d.jsx("span",{className:"truncate",children:z.title})]},z.id))})]},Z.id));return v.useEffect(()=>{const q=async()=>{if(!p.trim()){b([]);return}w(!0);try{await R(p)}catch(Z){console.error("Search error:",Z),Ve.error("Failed to perform search")}finally{w(!1)}};O.current!==null&&(window.clearTimeout(O.current),O.current=null);const K=window.setTimeout(q,500);return O.current=K,()=>{O.current!==null&&(window.clearTimeout(O.current),O.current=null)}},[p]),v.useEffect(()=>{y(""),b([])},[i,o]),e?d.jsxs("div",{className:"flex h-screen bg-background",children:[_&&d.jsxs("div",{className:"w-64 bg-card border-r border-border flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b border-border",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h2",{className:"font-semibold flex items-center",children:[d.jsx(Rp,{size:16,className:"mr-2"}),"Wiki"]}),d.jsx(ct,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>j(!1),children:d.jsx(pl,{size:16})})]}),d.jsxs("div",{className:"relative",children:[d.jsx(ou,{size:16,className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),d.jsx(pi,{type:"search",placeholder:"Search wiki...",className:"w-full pl-8 h-8 text-sm",value:p,onChange:q=>y(q.target.value)})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:C?d.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):W(F(c))}),p&&d.jsxs("div",{className:"mt-2 border-t border-border pt-2",children:[d.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2 px-2",children:x?"Searching...":`Found ${m.length} results`}),!x&&m.length===0?d.jsxs("div",{className:"text-xs text-muted-foreground px-2 py-1",children:['No results found for "',p,'"']}):d.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:m.map(q=>d.jsx(Rr,{to:q.resultType==="page"?`/wiki/${q.folder_id?`${q.folder_id}/`:""}${q.slug}`:`/wiki/folder/${q.id}`,className:"flex items-center px-2 py-1.5 text-sm rounded hover:bg-accent",onClick:()=>y(""),children:Z0e(q)?d.jsxs("div",{className:"flex items-center",children:[d.jsx(hv,{className:"h-4 w-4 mr-2 text-gray-500"}),d.jsx("span",{children:q.title})]}):G0e(q)?d.jsxs("div",{className:"flex items-center",children:[d.jsx(fv,{className:"h-4 w-4 mr-2 text-yellow-500"}),d.jsx("span",{children:q.name})]}):null},`${q.resultType}-${q.id}`))})]})]}),d.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[d.jsxs("header",{className:"h-14 border-b border-border flex items-center px-4",children:[!_&&d.jsx(ct,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>j(!0),children:d.jsx(AP,{size:18})}),d.jsx("div",{className:"flex-1",children:d.jsx("h1",{className:"font-semibold",children:(h==null?void 0:h.title)||"Welcome to the Wiki"})}),d.jsx(ct,{variant:"ghost",size:"icon",onClick:()=>N(!k),children:d.jsx(AP,{size:18})})]}),d.jsx("main",{ref:I,className:"flex-1 overflow-y-auto p-6 max-w-4xl mx-auto w-full",children:h?d.jsxs("article",{className:"prose max-w-none",children:[(r=h.sections)==null?void 0:r.map(q=>d.jsx("div",{children:$(q)},q.id)),d.jsxs("div",{className:"mt-12 pt-6 border-t border-border text-sm text-muted-foreground",children:["Last updated: ",new Date(h.updated_at).toLocaleDateString()]})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground",children:[d.jsx(Rp,{size:48,className:"mb-4 text-muted-foreground/50"}),d.jsx("h2",{className:"text-xl font-medium mb-2",children:"Welcome to the Wiki"}),d.jsx("p",{className:"max-w-md",children:"Select a page from the sidebar or create a new one to get started."})]})})]}),k&&d.jsxs("div",{className:"w-64 border-l border-border bg-card overflow-y-auto",children:[d.jsx("div",{className:"p-4 border-b border-border",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"font-medium",children:"Table of Contents"}),d.jsx(ct,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>N(!1),children:d.jsx(pl,{size:16})})]})}),d.jsx("div",{className:"p-4",children:T.length>0?d.jsx("nav",{className:"space-y-1",children:T.map((q,K)=>d.jsx("a",{href:`#${q.id}`,className:`block py-1 text-sm ${q.level===1?"font-medium":"text-muted-foreground"} hover:text-foreground`,style:{marginLeft:`${(q.level-1)*8}px`},children:q.text},K))}):d.jsx("p",{className:"text-sm text-muted-foreground",children:"No headings found"})})]}),d.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[d.jsx("h1",{children:e.title}),(n=e.sections)!=null&&n.length?d.jsx("div",{className:"space-y-6",children:(s=e.sections)==null?void 0:s.sort((q,K)=>(q.order_index??0)-(K.order_index??0)).map(q=>d.jsxs("div",{className:"section",children:[q.title&&d.jsx("h2",{className:"text-2xl font-semibold mb-2",children:q.title}),d.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:q.content||""}})]},q.id))}):d.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:e.excerpt||""}})]})]}):d.jsx("div",{children:"Loading..."})}const Y0e=async()=>{const{data:e,error:t}=await ce.from("characters").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},J0e=()=>{const{data:e,isLoading:t,isError:r,error:n}=It({queryKey:["characters"],queryFn:Y0e}),s=v.useRef(null);v.useRef({});const i=v.useRef([]);return v.useEffect(()=>{if(s.current){const o=s.current;for(let a=0;a<20;a++){const l=document.createElement("div");l.className="floating-dot",l.style.left=Math.random()*100+"%",l.style.top=Math.random()*100+"%",l.style.animationDelay=Math.random()*6+"s",l.style.animationDuration=4+Math.random()*4+"s",o.appendChild(l)}}},[]),v.useEffect(()=>{const o=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&l.target.classList.add("visible")})},{threshold:.2,rootMargin:"-50px"});return i.current.forEach(a=>{a&&o.observe(a)}),()=>{i.current.forEach(a=>{a&&o.unobserve(a)})}},[e]),v.useEffect(()=>{const o=()=>{var a;const l=window.pageYOffset,c=(a=s.current)==null?void 0:a.querySelectorAll(".floating-dot");c==null||c.forEach((u,h)=>{const f=.5+h%3*.2;u.style.transform=`translateY(${l*f}px) rotate(${l*.1}deg)`})};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),t?d.jsx("div",{className:"text-center py-8 text-text-light",children:"Loading characters..."}):r?d.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading characters: ",n==null?void 0:n.message]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{ref:s,className:"floating-elements"}),d.jsx("section",{className:"hero-section",children:d.jsxs("div",{children:[d.jsx("h1",{className:"hero-title",children:"Meet the Characters"}),d.jsx("p",{className:"hero-subtitle",children:"Journey into the world of extraordinary souls"}),d.jsx("div",{className:"scroll-indicator",children:d.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]})}),e==null?void 0:e.map((o,a)=>{var l;return d.jsxs("section",{ref:c=>{i.current[a]=c},className:"character-section ",children:[d.jsx("div",{className:"character-silhouette",children:d.jsx("div",{className:"silhouette-container",children:o.image_url?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:o.image_url,alt:o.name,className:"character-image"}),d.jsx("div",{className:"silhouette-overlay",style:{"--mask-image":`url(${o.silhouette_url||o.image_url})`}})]}):d.jsxs("div",{className:"upload-placeholder",children:[d.jsx("div",{className:"upload-icon",children:"📷"}),d.jsx("div",{children:"No Image"})]})})}),d.jsxs("div",{className:"character-info",children:[d.jsx("h2",{className:"character-name",children:o.name}),d.jsx("p",{className:"character-title",children:o.title}),d.jsx("p",{className:"character-description",children:o.description}),d.jsx("div",{className:"character-traits",children:(l=o.traits)==null?void 0:l.map((c,u)=>d.jsx("span",{className:"trait",children:c},u))})]})]},o.id)})]})},X0e=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Locations & Factions"})}),Q0e=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Glossary"})}),e_e=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Reviews"})}),t_e=async()=>{const{data:e,error:t}=await ce.from("posts").select("*").eq("status","published").order("created_at",{ascending:!1});if(t)throw new Error(t.message);return e},r_e=()=>{const{data:e,isLoading:t,isError:r,error:n}=It({queryKey:["blogPosts"],queryFn:t_e});return t?d.jsx("div",{className:"text-center py-8",children:"Loading blog posts..."}):r?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading posts: ",n==null?void 0:n.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Blog & News"}),e&&e.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(s=>d.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:d.jsxs("div",{className:"p-6",children:[d.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:s.title}),d.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Published on ",new Date(s.created_at).toLocaleDateString()]}),d.jsx("div",{className:"text-gray-700 leading-relaxed line-clamp-3",dangerouslySetInnerHTML:{__html:s.content}}),d.jsx(Rr,{to:`/blog/${s.slug}`,className:"mt-4 inline-block text-blue-600 hover:text-blue-800 font-medium",children:"Read More →"})]})},s.id))}):d.jsxs("div",{className:"text-center py-12 text-gray-600",children:[d.jsx("p",{className:"text-xl mb-4",children:"No blog posts published yet."}),d.jsx("p",{children:"Check back soon for new content!"})]})]})},n_e=()=>d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-4xl font-bold",children:"404 - Not Found"}),d.jsx("p",{className:"mt-4",children:"Sorry, the page you are looking for does not exist."}),d.jsx(Rr,{to:"/",className:"mt-6 inline-block bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",children:"Go to Home"})]}),s_e=()=>{const e=()=>{localStorage.removeItem("isAuthenticated"),localStorage.removeItem("betaApplicationStatus"),window.location.href="/login"},t={title:"The Obsidian Gate - Issue 7",chaptersRead:5,totalChapters:10,readingWindowEnd:"August 30, 2025",feedbackWindowEnd:"September 7, 2025",launchDay:"September 15, 2025",downloadLink:"#"},r=[{id:1,description:"Read the Material",completed:!1},{id:2,description:"Submit Structured Feedback",completed:!1},{id:3,description:"Convert to Public Review",completed:!1}],n=[{name:"Beta Alumni",description:"Completed 1+ beta cycles"}],s=[{id:1,title:"New Feedback Form Available!",date:"August 20, 2025",content:"The feedback form for Issue 7 is now live. Please submit your thoughts by the deadline."},{id:2,title:"Reminder: Reading Window Ends Soon",date:"August 25, 2025",content:"Just a friendly reminder that the reading window for Issue 7 closes on August 30th."}];return d.jsxs("div",{className:"p-4",children:[d.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Welcome to the Beta Reader Portal!"}),d.jsx("p",{className:"mb-4",children:"This is your central hub for all active beta reading projects and resources."}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:["Current Beta Cycle: ",t.title]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Reading Window Ends:"})," ",t.readingWindowEnd]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Feedback Window Ends:"})," ",t.feedbackWindowEnd]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Launch Day:"})," ",t.launchDay]}),d.jsxs("p",{className:"mt-2",children:[d.jsx("strong",{children:"Your Progress:"})," Chapters Read ",t.chaptersRead,"/",t.totalChapters]}),d.jsx("a",{href:t.downloadLink,className:"mt-4 inline-block bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded",children:"Download Material"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mandatory Tasks"}),d.jsx("ul",{className:"list-none",children:r.map(i=>d.jsxs("li",{className:"flex items-center mb-1",children:[d.jsx("input",{type:"checkbox",checked:i.completed,readOnly:!0,className:"mr-2"}),i.description]},i.id))}),d.jsx("a",{href:"/beta/feedback",className:"mt-4 inline-block bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded",children:"Submit Feedback"})]})]})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Announcements"}),s.length>0?d.jsx("ul",{children:s.map(i=>d.jsxs("li",{className:"mb-4 pb-4 border-b last:border-b-0",children:[d.jsx("h3",{className:"font-bold text-lg",children:i.title}),d.jsx("p",{className:"text-sm text-muted-foreground",children:i.date}),d.jsx("p",{className:"mt-1",children:i.content})]},i.id))}):d.jsx("p",{className:"text-muted-foreground",children:"No new announcements at this time."})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Rewards & Recognition"}),n.length>0?d.jsx("div",{className:"flex flex-wrap gap-4",children:n.map(i=>d.jsxs("span",{className:"bg-muted text-muted-foreground text-sm font-medium px-3 py-1 rounded-full",children:[i.name," - ",i.description]},i.name))}):d.jsx("p",{className:"text-muted-foreground",children:"Complete your first beta cycle to earn your first badge!"}),d.jsx("p",{className:"mt-4 text-muted-foreground",children:"Upon successful completion of a beta cycle, you will receive a store discount coupon."})]}),d.jsxs("div",{className:"bg-card shadow-md rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Important Links"}),d.jsxs("ul",{className:"list-disc list-inside text-primary",children:[d.jsx("li",{children:d.jsx("a",{href:"/beta/handbook",className:"hover:underline",children:"Beta Reader Handbook"})}),d.jsx("li",{children:d.jsx("a",{href:"/beta/timeline",className:"hover:underline",children:"Operational Timeline"})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:underline",children:"Community Forum (Discord/Private Channel)"})}),d.jsx("li",{children:d.jsx("a",{href:"/beta/nda",className:"hover:underline",children:"View NDA"})})]})]}),d.jsx("button",{onClick:e,className:"mt-8 bg-destructive hover:bg-destructive-dark text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Logout"})]})},i_e=()=>{const e=localStorage.getItem("betaApplicationStatus")||"none";let t="",r="text-gray-800",n=null;switch(e){case"none":t="You have not yet submitted a beta reader application.",r="text-blue-700",n=d.jsx(Rr,{to:"/beta/application",className:"text-blue-500 hover:underline",children:"Apply now"});break;case"pending":t="Your beta reader application is currently under review. We will notify you of our decision soon.",r="text-yellow-700";break;case"accepted":t="Congratulations! Your beta reader application has been accepted. Welcome to the program!",r="text-green-700",n=d.jsx(Rr,{to:"/beta/portal",className:"text-green-500 hover:underline",children:"Go to Beta Portal"});break;case"rejected":t="We regret to inform you that your beta reader application was not successful at this time.",r="text-red-700";break;default:t="Unknown application status.",r="text-gray-800"}return d.jsxs("div",{className:"p-4 text-center",children:[d.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Beta Application Status"}),d.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r} bg-white`,children:[d.jsx("p",{className:"text-lg font-semibold mb-4",children:t}),n&&d.jsx("p",{className:"mt-4",children:n})]})]})},o_e=()=>{const{workId:e}=nu(),[t,r]=v.useState(null),[n,s]=v.useState(!0),[i,o]=v.useState(null),[a,l]=v.useState(null);v.useEffect(()=>{(async()=>{const{data:{user:u}}=await ce.auth.getUser();u?l(u.id):(o("User not authenticated."),s(!1))})()},[]),v.useEffect(()=>{a&&e&&(async()=>{if(!(!a||!e))try{o(null);const u=await fetch(`http://localhost:3001/api/content/${e}`,{headers:{"x-user-id":a}}),h=await u.json();u.ok?r(h):o(h.message||"Failed to fetch content.")}catch(u){console.error("Error fetching work content:",u),o("An error occurred while fetching the work content.")}finally{s(!1)}})()},[a,e]);const c=async()=>{if(!(!a||!e))try{const u=await fetch(`http://localhost:3001/api/library/${a}/library/${e}/progress`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":a},body:JSON.stringify({is_finished:!0})});if(u.ok)alert("Work marked as finished!");else{const h=await u.json();alert(`Failed to mark as finished: ${h.message}`)}}catch(u){console.error("Error marking as finished:",u),alert("An error occurred while marking as finished.")}};return n?d.jsx("div",{className:"text-text-light",children:"Loading content..."}):i?d.jsxs("div",{className:"text-red-400",children:["Error: ",i]}):t?d.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"auto",fontFamily:"Arial, sans-serif"},children:[d.jsx("h2",{style:{fontSize:"2.5em",marginBottom:"10px",color:"#E0BBE4"},children:t.title}),d.jsx("p",{style:{fontSize:"1.1em",color:"#957DAD",marginBottom:"20px"},children:t.description}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{fontSize:"1.5em",marginBottom:"10px",color:"#FFC72C"},children:"Download Options:"}),t.content_urls.epub&&d.jsx("a",{href:t.content_urls.epub,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#4CAF50",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download EPUB"}),t.content_urls.pdf&&d.jsx("a",{href:t.content_urls.pdf,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#F44336",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download PDF"}),t.content_urls.mobi&&d.jsx("a",{href:t.content_urls.mobi,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#2196F3",color:"white",textDecoration:"none",borderRadius:"5px",marginRight:"10px",marginBottom:"10px"},children:"Download MOBI"}),!t.content_urls.epub&&!t.content_urls.pdf&&!t.content_urls.mobi&&d.jsx("p",{style:{color:"#957DAD"},children:"No downloadable content available for this work."})]}),d.jsx("button",{onClick:c,style:{padding:"10px 20px",backgroundColor:"#8860D0",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",marginTop:"20px"},children:"Mark as Finished"})]}):d.jsx("div",{className:"text-text-light",children:"Content not found or not accessible."})},a_e=()=>{const{state:e,clearCart:t}=cJ(),r=uo(),[n,s]=v.useState(!1),i=(l,c)=>new Intl.NumberFormat("en-US",{style:"currency",currency:c.toUpperCase()}).format(l),o=async()=>{s(!0),setTimeout(()=>{s(!1),t(),r("/store?checkout=success")},2e3)},a=()=>{r("/store")};return e.items.length===0?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx(BF,{className:"w-16 h-16 text-text-dark mx-auto mb-4"}),d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-2",children:"Your cart is empty"}),d.jsx("p",{className:"text-text-dark mb-6",children:"Add some products to your cart before checking out."}),d.jsx("button",{onClick:a,className:"px-6 py-3 bg-secondary text-background rounded-xl hover:bg-secondary-dark transition-colors",children:"Continue Shopping"})]})}):d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background",children:d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsxs("button",{onClick:a,className:"flex items-center space-x-2 text-text-light hover:text-secondary transition-colors mb-4",children:[d.jsx(MF,{className:"w-5 h-5"}),d.jsx("span",{children:"Back to Store"})]}),d.jsx("h1",{className:"text-4xl font-heading text-text-light mb-2",children:"Checkout"}),d.jsx("p",{className:"text-text-light/70",children:"Complete your purchase"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30",children:[d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-6",children:"Order Summary"}),d.jsx("div",{className:"space-y-4 mb-6",children:e.items.map(l=>d.jsxs("div",{className:"flex items-center justify-between p-4 bg-background/30 rounded-xl",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-text-light",children:l.title}),d.jsx("p",{className:"text-sm text-text-dark",children:l.format.toUpperCase()})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-secondary font-medium",children:i(l.price,l.currency)}),d.jsxs("p",{className:"text-sm text-text-dark",children:["Qty: ",l.quantity]})]})]},l.id))}),d.jsxs("div",{className:"border-t border-border/30 pt-4",children:[d.jsxs("div",{className:"flex justify-between items-center text-lg font-medium text-text-light mb-2",children:[d.jsx("span",{children:"Subtotal:"}),d.jsx("span",{children:i(e.total,"USD")})]}),d.jsxs("div",{className:"flex justify-between items-center text-sm text-text-dark mb-4",children:[d.jsx("span",{children:"Tax:"}),d.jsx("span",{children:"Calculated at checkout"})]}),d.jsxs("div",{className:"flex justify-between items-center text-xl font-bold text-secondary",children:[d.jsx("span",{children:"Total:"}),d.jsx("span",{children:i(e.total,"USD")})]})]})]}),d.jsxs("div",{className:"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30",children:[d.jsx("h2",{className:"text-2xl font-heading text-text-light mb-6",children:"Payment Information"}),d.jsxs("form",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-text-light mb-4",children:"Customer Information"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"First Name"}),d.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter first name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Last Name"}),d.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter last name"})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-text-light mb-2",children:"Email"}),d.jsx("input",{type:"email",className:"w-full px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",placeholder:"Enter email address"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-text-light mb-4",children:"Payment Method"}),d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-background/30 rounded-xl border border-border/30",children:[d.jsx("input",{type:"radio",name:"payment",id:"card",defaultChecked:!0,className:"text-secondary focus:ring-secondary"}),d.jsxs("label",{htmlFor:"card",className:"flex items-center space-x-2 cursor-pointer",children:[d.jsx(iae,{className:"w-5 h-5 text-secondary"}),d.jsx("span",{className:"text-text-light",children:"Credit/Debit Card"})]})]})})]}),d.jsxs("div",{className:"p-4 bg-accent/10 border border-accent/30 rounded-xl",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-accent mb-2",children:[d.jsx(mae,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:"Secure Checkout"})]}),d.jsx("p",{className:"text-sm text-text-light/70",children:"Your payment information is encrypted and secure. We never store your credit card details."})]}),d.jsx("button",{type:"button",onClick:o,disabled:n,className:"w-full bg-secondary text-background py-4 px-6 rounded-xl font-medium hover:bg-secondary-dark focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:ring-offset-2 focus:ring-offset-background-light transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-lg",children:n?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"w-5 h-5 border-2 border-background border-t-transparent rounded-full animate-spin"}),d.jsx("span",{children:"Processing..."})]}):`Complete Purchase - ${i(e.total,"USD")}`})]})]})]})]})})};var Tx={},PU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(PU);var B2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(B2);var V2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(V2);var Ax={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",a="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const c=r[i];a?c==="\\"&&i+1<s?(i++,o+=r[i]):c===a?a="":o+=c:l?c==='"'||c==="'"?a=c:c==="]"?(l=!1,n.push(o),o=""):o+=c:c==="["?(l=!0,o&&(n.push(o),o="")):c==="."?o&&(n.push(o),o=""):o+=c,i++}return o&&n.push(o),n}e.toPath=t})(Ax);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PU,r=B2,n=V2,s=Ax;function i(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?r.isDeepKey(l)?i(a,s.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let h=0;h<l.length;h++){if(u==null||t.isUnsafeProperty(l[h]))return c;u=u[l[h]]}return u===void 0?c:u}e.get=i})(Tx);var l_e=Tx.get;const bl=ki(l_e);var RU={exports:{}},yt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nI;function c_e(){if(nI)return yt;nI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function y(m){if(typeof m=="object"&&m!==null){var b=m.$$typeof;switch(b){case e:switch(m=m.type,m){case r:case s:case n:case l:case c:case f:return m;default:switch(m=m&&m.$$typeof,m){case o:case a:case h:case u:return m;case i:return m;default:return b}}case t:return b}}}return yt.ContextConsumer=i,yt.ContextProvider=o,yt.Element=e,yt.ForwardRef=a,yt.Fragment=r,yt.Lazy=h,yt.Memo=u,yt.Portal=t,yt.Profiler=s,yt.StrictMode=n,yt.Suspense=l,yt.SuspenseList=c,yt.isContextConsumer=function(m){return y(m)===i},yt.isContextProvider=function(m){return y(m)===o},yt.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===e},yt.isForwardRef=function(m){return y(m)===a},yt.isFragment=function(m){return y(m)===r},yt.isLazy=function(m){return y(m)===h},yt.isMemo=function(m){return y(m)===u},yt.isPortal=function(m){return y(m)===t},yt.isProfiler=function(m){return y(m)===s},yt.isStrictMode=function(m){return y(m)===n},yt.isSuspense=function(m){return y(m)===l},yt.isSuspenseList=function(m){return y(m)===c},yt.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===r||m===s||m===n||m===l||m===c||typeof m=="object"&&m!==null&&(m.$$typeof===h||m.$$typeof===u||m.$$typeof===o||m.$$typeof===i||m.$$typeof===a||m.$$typeof===p||m.getModuleId!==void 0)},yt.typeOf=y,yt}RU.exports=c_e();var u_e=RU.exports,hn=e=>e===0?0:e>0?1:-1,Is=e=>typeof e=="number"&&e!=+e,gc=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ae=e=>(typeof e=="number"||e instanceof Number)&&!Is(e),so=e=>Ae(e)||typeof e=="string",d_e=0,Hp=e=>{var t=++d_e;return"".concat(e||"").concat(t)},Os=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ae(e)&&typeof e!="string")return r;var s;if(gc(e)){if(t==null)return r;var i=e.indexOf("%");s=t*parseFloat(e.slice(0,i))/100}else s=+e;return Is(s)&&(s=r),n&&t!=null&&s>t&&(s=t),s},IU=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},sI=(e,t)=>Ae(e)&&Ae(t)?r=>e+r*(t-e):()=>t;function jf(e,t,r){return Ae(e)&&Ae(t)?e+r*(t-e):t}function DU(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):bl(n,t))===r)}var vr=e=>e===null||typeof e>"u",Mm=e=>vr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),h_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function W2(e){if(typeof e!="string")return!1;var t=h_e;return t.includes(e)}var f_e=["viewBox","children"],iI=["points","pathLength"],oI={svg:f_e,polygon:iI,polyline:iI},H2=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{W2(s)&&(n[s]=i=>r[s](r,i))}),n},p_e=(e,t,r)=>n=>(e(t,r,n),null),K2=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];W2(s)&&typeof i=="function"&&(n||(n={}),n[s]=p_e(i,t,r))}),n},m_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function LU(e){if(typeof e!="string")return!1;var t=m_e;return t.includes(e)}function Al(e){var t=Object.entries(e).filter(r=>{var[n]=r;return LU(n)});return Object.fromEntries(t)}var aI=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",lI=null,x_=null,MU=e=>{if(e===lI&&Array.isArray(x_))return x_;var t=[];return v.Children.forEach(e,r=>{vr(r)||(u_e.isFragment(r)?t=t.concat(MU(r.props.children)):t.push(r))}),x_=t,lI=e,t};function Ox(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>aI(s)):n=[aI(t)],MU(e).forEach(s=>{var i=bl(s,"type.displayName")||bl(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var zU=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,g_e=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var i=(s=n&&(oI==null?void 0:oI[n]))!==null&&s!==void 0?s:[],o=t.startsWith("data-"),a=typeof e!="function"&&(!!n&&i.includes(t)||LU(t)),l=!!r&&W2(t);return o||a||l},Ht=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(v.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;g_e((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},y_e=["children","width","height","viewBox","className","style","title","desc"];function Zk(){return Zk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zk.apply(null,arguments)}function v_e(e,t){if(e==null)return{};var r,n,s=b_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function b_e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Z2=v.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:a,title:l,desc:c}=e,u=v_e(e,y_e),h=i||{width:n,height:s,x:0,y:0},f=at("recharts-surface",o);return v.createElement("svg",Zk({},Ht(u,!0,"svg"),{className:f,width:n,height:s,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),v.createElement("title",null,l),v.createElement("desc",null,c),r)}),x_e=["children","className"];function Gk(){return Gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gk.apply(null,arguments)}function w_e(e,t){if(e==null)return{};var r,n,s=__e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function __e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ds=v.forwardRef((e,t)=>{var{children:r,className:n}=e,s=w_e(e,x_e),i=at("recharts-layer",n);return v.createElement("g",Gk({className:i},Ht(s,!0),{ref:t}),r)}),FU=v.createContext(null),j_e=()=>v.useContext(FU);function Ot(e){return function(){return e}}const $U=Math.cos,Rv=Math.sin,Si=Math.sqrt,Iv=Math.PI,Px=2*Iv,Yk=Math.PI,Jk=2*Yk,ac=1e-6,k_e=Jk-ac;function UU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function N_e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return UU;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class S_e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?UU:N_e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=n-t,c=s-r,u=o-t,h=a-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>ac)if(!(Math.abs(h*l-c*u)>ac)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,y=s-a,m=l*l+c*c,b=p*p+y*y,x=Math.sqrt(m),w=Math.sqrt(f),_=i*Math.tan((Yk-Math.acos((m+f-b)/(2*x*w)))/2),j=_/w,k=_/x;Math.abs(j-1)>ac&&this._append`L${t+j*u},${r+j*h}`,this._append`A${i},${i},0,0,${+(h*p>u*y)},${this._x1=t+k*l},${this._y1=r+k*c}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(s),l=n*Math.sin(s),c=t+a,u=r+l,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>ac||Math.abs(this._y1-u)>ac)&&this._append`L${c},${u}`,n&&(f<0&&(f=f%Jk+Jk),f>k_e?this._append`A${n},${n},0,1,${h},${t-a},${r-l}A${n},${n},0,1,${h},${this._x1=c},${this._y1=u}`:f>ac&&this._append`A${n},${n},0,${+(f>=Yk)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function G2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new S_e(t)}function Y2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qU(e){this._context=e}qU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Rx(e){return new qU(e)}function BU(e){return e[0]}function VU(e){return e[1]}function WU(e,t){var r=Ot(!0),n=null,s=Rx,i=null,o=G2(a);e=typeof e=="function"?e:e===void 0?BU:Ot(e),t=typeof t=="function"?t:t===void 0?VU:Ot(t);function a(l){var c,u=(l=Y2(l)).length,h,f=!1,p;for(n==null&&(i=s(p=o())),c=0;c<=u;++c)!(c<u&&r(h=l[c],c,l))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,c,l),+t(h,c,l));if(p)return i=null,p+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:Ot(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:Ot(+l),a):t},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Ot(!!l),a):r},a.curve=function(l){return arguments.length?(s=l,n!=null&&(i=s(n)),a):s},a.context=function(l){return arguments.length?(l==null?n=i=null:i=s(n=l),a):n},a}function iy(e,t,r){var n=null,s=Ot(!0),i=null,o=Rx,a=null,l=G2(c);e=typeof e=="function"?e:e===void 0?BU:Ot(+e),t=typeof t=="function"?t:Ot(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?VU:Ot(+r);function c(h){var f,p,y,m=(h=Y2(h)).length,b,x=!1,w,_=new Array(m),j=new Array(m);for(i==null&&(a=o(w=l())),f=0;f<=m;++f){if(!(f<m&&s(b=h[f],f,h))===x)if(x=!x)p=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),y=f-1;y>=p;--y)a.point(_[y],j[y]);a.lineEnd(),a.areaEnd()}x&&(_[f]=+e(b,f,h),j[f]=+t(b,f,h),a.point(n?+n(b,f,h):_[f],r?+r(b,f,h):j[f]))}if(w)return a=null,w+""||null}function u(){return WU().defined(s).curve(o).context(i)}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ot(+h),n=null,c):e},c.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Ot(+h),c):e},c.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ot(+h),c):n},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ot(+h),r=null,c):t},c.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Ot(+h),c):t},c.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Ot(+h),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Ot(!!h),c):s},c.curve=function(h){return arguments.length?(o=h,i!=null&&(a=o(i)),c):o},c.context=function(h){return arguments.length?(h==null?i=a=null:a=o(i=h),c):i},c}class HU{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function E_e(e){return new HU(e,!0)}function C_e(e){return new HU(e,!1)}const J2={draw(e,t){const r=Si(t/Iv);e.moveTo(r,0),e.arc(0,0,r,0,Px)}},T_e={draw(e,t){const r=Si(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},KU=Si(1/3),A_e=KU*2,O_e={draw(e,t){const r=Si(t/A_e),n=r*KU;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},P_e={draw(e,t){const r=Si(t),n=-r/2;e.rect(n,n,r,r)}},R_e=.8908130915292852,ZU=Rv(Iv/10)/Rv(7*Iv/10),I_e=Rv(Px/10)*ZU,D_e=-$U(Px/10)*ZU,L_e={draw(e,t){const r=Si(t*R_e),n=I_e*r,s=D_e*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Px*i/5,a=$U(o),l=Rv(o);e.lineTo(l*r,-a*r),e.lineTo(a*n-l*s,l*n+a*s)}e.closePath()}},w_=Si(3),M_e={draw(e,t){const r=-Si(t/(w_*3));e.moveTo(0,r*2),e.lineTo(-w_*r,-r),e.lineTo(w_*r,-r),e.closePath()}},ps=-.5,ms=Si(3)/2,Xk=1/Si(12),z_e=(Xk/2+1)*3,F_e={draw(e,t){const r=Si(t/z_e),n=r/2,s=r*Xk,i=n,o=r*Xk+r,a=-i,l=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(a,l),e.lineTo(ps*n-ms*s,ms*n+ps*s),e.lineTo(ps*i-ms*o,ms*i+ps*o),e.lineTo(ps*a-ms*l,ms*a+ps*l),e.lineTo(ps*n+ms*s,ps*s-ms*n),e.lineTo(ps*i+ms*o,ps*o-ms*i),e.lineTo(ps*a+ms*l,ps*l-ms*a),e.closePath()}};function $_e(e,t){let r=null,n=G2(s);e=typeof e=="function"?e:Ot(e||J2),t=typeof t=="function"?t:Ot(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ot(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ot(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Dv(){}function Lv(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function GU(e){this._context=e}GU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Lv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function U_e(e){return new GU(e)}function YU(e){this._context=e}YU.prototype={areaStart:Dv,areaEnd:Dv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Lv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q_e(e){return new YU(e)}function JU(e){this._context=e}JU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Lv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function B_e(e){return new JU(e)}function XU(e){this._context=e}XU.prototype={areaStart:Dv,areaEnd:Dv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function V_e(e){return new XU(e)}function cI(e){return e<0?-1:1}function uI(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),a=(i*s+o*n)/(n+s);return(cI(i)+cI(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function dI(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function __(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,a=(i-n)/3;e._context.bezierCurveTo(n+a,s+a*t,i-a,o-a*r,i,o)}function Mv(e){this._context=e}Mv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:__(this,this._t0,dI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,__(this,dI(this,r=uI(this,e,t)),r);break;default:__(this,this._t0,r=uI(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function QU(e){this._context=new eq(e)}(QU.prototype=Object.create(Mv.prototype)).point=function(e,t){Mv.prototype.point.call(this,t,e)};function eq(e){this._context=e}eq.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function W_e(e){return new Mv(e)}function H_e(e){return new QU(e)}function tq(e){this._context=e}tq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=hI(e),s=hI(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function hI(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function K_e(e){return new tq(e)}function Ix(e,t){this._context=e,this._t=t}Ix.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Z_e(e){return new Ix(e,.5)}function G_e(e){return new Ix(e,0)}function Y_e(e){return new Ix(e,1)}function nh(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,a=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<a;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Qk(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function J_e(e,t){return e[t]}function X_e(e){const t=[];return t.key=e,t}function Q_e(){var e=Ot([]),t=Qk,r=nh,n=J_e;function s(i){var o=Array.from(e.apply(this,arguments),X_e),a,l=o.length,c=-1,u;for(const h of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+n(h,o[a].key,c,i)]).data=h;for(a=0,u=Y2(t(o));a<l;++a)o[u[a]].index=a;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ot(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ot(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Qk:typeof i=="function"?i:Ot(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??nh,s):r},s}function eje(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}nh(e,t)}}function tje(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,a=0;o<s;++o)a+=e[o][r][1]||0;n[r][1]+=n[r][0]=-a/2}nh(e,t)}}function rje(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var a=0,l=0,c=0;a<o;++a){for(var u=e[t[a]],h=u[n][1]||0,f=u[n-1][1]||0,p=(h-f)/2,y=0;y<a;++y){var m=e[t[y]],b=m[n][1]||0,x=m[n-1][1]||0;p+=b-x}l+=h,c+=p*h}s[n-1][1]+=s[n-1][0]=r,l&&(r-=c/l)}s[n-1][1]+=s[n-1][0]=r,nh(e,t)}}var nje=["type","size","sizeType"];function eN(){return eN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eN.apply(null,arguments)}function fI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fI(Object(r),!0).forEach(function(n){sje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sje(e,t,r){return(t=ije(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ije(e){var t=oje(e,"string");return typeof t=="symbol"?t:t+""}function oje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aje(e,t){if(e==null)return{};var r,n,s=lje(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lje(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rq={symbolCircle:J2,symbolCross:T_e,symbolDiamond:O_e,symbolSquare:P_e,symbolStar:L_e,symbolTriangle:M_e,symbolWye:F_e},cje=Math.PI/180,uje=e=>{var t="symbol".concat(Mm(e));return rq[t]||J2},dje=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*cje;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},hje=(e,t)=>{rq["symbol".concat(Mm(e))]=t},X2=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=aje(e,nje),i=pI(pI({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var h=uje(t),f=$_e().type(h).size(dje(r,n,t));return f()},{className:a,cx:l,cy:c}=i,u=Ht(i,!0);return l===+l&&c===+c&&r===+r?v.createElement("path",eN({},u,{className:at("recharts-symbols",a),transform:"translate(".concat(l,", ").concat(c,")"),d:o()})):null};X2.registerSymbol=hje;function tN(){return tN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tN.apply(null,arguments)}function mI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fje(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mI(Object(r),!0).forEach(function(n){Q2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q2(e,t,r){return(t=pje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pje(e){var t=mje(e,"string");return typeof t=="symbol"?t:t+""}function mje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gs=32;class eC extends v.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,s=gs/2,i=gs/6,o=gs/3,a=t.inactive?n:t.color,l=r??t.type;if(l==="none")return null;if(l==="plainline")return v.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:gs,y2:s,className:"recharts-legend-icon"});if(l==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(gs,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(l==="rect")return v.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(gs/8,"h").concat(gs,"v").concat(gs*3/4,"h").concat(-gs,"z"),className:"recharts-legend-icon"});if(v.isValidElement(t.legendIcon)){var c=fje({},t);return delete c.legendIcon,v.cloneElement(t.legendIcon,c)}return v.createElement(X2,{fill:a,cx:s,cy:s,size:gs,sizeType:"diameter",type:l})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:i,iconType:o}=this.props,a={x:0,y:0,width:gs,height:gs},l={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var f=u.formatter||s,p=at({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var y=u.inactive?i:u.color,m=f?f(u.value,u,h):u.value;return v.createElement("li",tN({className:p,style:l,key:"legend-item-".concat(h)},K2(this.props,u,h)),v.createElement(Z2,{width:r,height:r,viewBox:a,style:c,"aria-label":"".concat(m," legend icon")},this.renderIcon(u,o)),v.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},m))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}Q2(eC,"displayName","Legend");Q2(eC,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var nq={},sq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],a=n(o);s.has(a)||s.set(a,o)}return Array.from(s.values())}e.uniqBy=t})(sq);var tC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(tC);var iq={},Dx={},oq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(oq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oq;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Dx);var aq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(aq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dx,r=aq;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(iq);var lq={},cq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tx;function r(n){return function(s){return t.get(s,n)}}e.property=r})(cq);var uq={},gI={},yI={},rC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(rC);var nC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(nC);var Lx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Lx);var vI;function gje(){return vI||(vI=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sC(),r=rC,n=nC,s=Lx;function i(h,f,p){return typeof p!="function"?t.isMatch(h,f):o(h,f,function y(m,b,x,w,_,j){const k=p(m,b,x,w,_,j);return k!==void 0?!!k:o(m,b,y,j)},new Map)}function o(h,f,p,y){if(f===h)return!0;switch(typeof f){case"object":return a(h,f,p,y);case"function":return Object.keys(f).length>0?o(h,{...f},p,y):s.eq(h,f);default:return r.isObject(h)?typeof f=="string"?f==="":!0:s.eq(h,f)}}function a(h,f,p,y){if(f==null)return!0;if(Array.isArray(f))return c(h,f,p,y);if(f instanceof Map)return l(h,f,p,y);if(f instanceof Set)return u(h,f,p,y);const m=Object.keys(f);if(h==null)return m.length===0;if(m.length===0)return!0;if(y&&y.has(f))return y.get(f)===h;y&&y.set(f,h);try{for(let b=0;b<m.length;b++){const x=m[b];if(!n.isPrimitive(h)&&!(x in h)||f[x]===void 0&&h[x]!==void 0||f[x]===null&&h[x]!==null||!p(h[x],f[x],x,h,f,y))return!1}return!0}finally{y&&y.delete(f)}}function l(h,f,p,y){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[m,b]of f.entries()){const x=h.get(m);if(p(x,b,m,h,f,y)===!1)return!1}return!0}function c(h,f,p,y){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const m=new Set;for(let b=0;b<f.length;b++){const x=f[b];let w=!1;for(let _=0;_<h.length;_++){if(m.has(_))continue;const j=h[_];let k=!1;if(p(j,x,b,h,f,y)&&(k=!0),k){m.add(_),w=!0;break}}if(!w)return!1}return!0}function u(h,f,p,y){return f.size===0?!0:h instanceof Set?c([...h],[...f],p,y):!1}e.isMatchWith=i,e.isSetMatch=u}(yI)),yI}var bI;function sC(){return bI||(bI=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gje();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(gI)),gI}var dq={},iC={},oC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(oC);var Mx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Mx);var zx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",p="[object Object]",y="[object Error]",m="[object DataView]",b="[object Uint8Array]",x="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",j="[object BigUint64Array]",k="[object Int8Array]",N="[object Int16Array]",C="[object Int32Array]",E="[object BigInt64Array]",T="[object Float32Array]",P="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=u,e.bigInt64ArrayTag=E,e.bigUint64ArrayTag=j,e.booleanTag=s,e.dataViewTag=m,e.dateTag=a,e.errorTag=y,e.float32ArrayTag=T,e.float64ArrayTag=P,e.functionTag=h,e.int16ArrayTag=N,e.int32ArrayTag=C,e.int8ArrayTag=k,e.mapTag=l,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=x})(zx);var hq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(hq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oC,r=Mx,n=zx,s=nC,i=hq;function o(u,h){return a(u,void 0,u,new Map,h)}function a(u,h,f,p=new Map,y=void 0){const m=y==null?void 0:y(u,h,f,p);if(m!==void 0)return m;if(s.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const b=new Array(u.length);p.set(u,b);for(let x=0;x<u.length;x++)b[x]=a(u[x],x,f,p,y);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;p.set(u,b);for(const[x,w]of u)b.set(x,a(w,x,f,p,y));return b}if(u instanceof Set){const b=new Set;p.set(u,b);for(const x of u)b.add(a(x,void 0,f,p,y));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,b);for(let x=0;x<u.length;x++)b[x]=a(u[x],x,f,p,y);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,b),l(b,u,f,p,y),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return p.set(u,b),l(b,u,f,p,y),b}if(u instanceof Blob){const b=new Blob([u],{type:u.type});return p.set(u,b),l(b,u,f,p,y),b}if(u instanceof Error){const b=new u.constructor;return p.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,l(b,u,f,p,y),b}if(typeof u=="object"&&c(u)){const b=Object.create(Object.getPrototypeOf(u));return p.set(u,b),l(b,u,f,p,y),b}return u}function l(u,h,f=u,p,y){const m=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<m.length;b++){const x=m[b],w=Object.getOwnPropertyDescriptor(u,x);(w==null||w.writable)&&(u[x]=a(h[x],x,f,p,y))}}function c(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=a,e.copyProperties=l})(iC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iC;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(dq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sC(),r=dq;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(uq);var fq={},pq={},mq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iC,r=zx;function n(s,i){return t.cloneDeepWith(s,(o,a,l,c)=>{const u=i==null?void 0:i(o,a,l,c);if(u!==void 0)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n})(mq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mq;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(pq);var gq={},aC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(aC);var yq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mx;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(yq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B2,r=aC,n=yq,s=Ax;function i(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&t.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=s.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const h=l[u];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}e.has=i})(gq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sC(),r=V2,n=pq,s=Tx,i=gq;function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=r.toKey(a);break}}return l=n.cloneDeep(l),function(c){const u=s.get(c,a);return u===void 0?i.has(c,a):l===void 0?u===void 0:t.isMatch(u,l)}}e.matchesProperty=o})(fq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tC,r=cq,n=uq,s=fq;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(lq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sq,r=tC,n=iq,s=lq;function i(o,a=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(a)):[]}e.uniqBy=i})(nq);var yje=nq.uniqBy;const xI=ki(yje);function vq(e,t,r){return t===!0?xI(e,r):typeof t=="function"?xI(e,t):e}var bq={exports:{}},j_={},wI={exports:{}},k_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _I;function vje(){if(_I)return k_;_I=1;var e=ae;function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function a(h,f){var p=f(),y=n({inst:{value:p,getSnapshot:f}}),m=y[0].inst,b=y[1];return i(function(){m.value=p,m.getSnapshot=f,l(m)&&b({inst:m})},[h,p,f]),s(function(){return l(m)&&b({inst:m}),h(function(){l(m)&&b({inst:m})})},[h]),o(p),p}function l(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!r(h,p)}catch{return!0}}function c(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return k_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,k_}var jI;function bje(){return jI||(jI=1,wI.exports=vje()),wI.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kI;function xje(){if(kI)return j_;kI=1;var e=ae,t=bje();function r(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,l=e.useDebugValue;return j_.useSyncExternalStoreWithSelector=function(c,u,h,f,p){var y=i(null);if(y.current===null){var m={hasValue:!1,value:null};y.current=m}else m=y.current;y=a(function(){function x(N){if(!w){if(w=!0,_=N,N=f(N),p!==void 0&&m.hasValue){var C=m.value;if(p(C,N))return j=C}return j=N}if(C=j,n(_,N))return C;var E=f(N);return p!==void 0&&p(C,E)?(_=N,C):(_=N,j=E)}var w=!1,_,j,k=h===void 0?null:h;return[function(){return x(u())},k===null?void 0:function(){return x(k())}]},[u,h,f,p]);var b=s(c,y[0],y[1]);return o(function(){m.hasValue=!0,m.value=b},[b]),l(b),b},j_}bq.exports=xje();var wje=bq.exports,lC=v.createContext(null),_je=e=>e,Yt=()=>{var e=v.useContext(lC);return e?e.store.dispatch:_je},qy=()=>{},jje=()=>qy,kje=(e,t)=>e===t;function Le(e){var t=v.useContext(lC);return wje.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:jje,t?t.store.getState:qy,t?t.store.getState:qy,t?e:qy,kje)}function Nje(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Sje(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Eje(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var NI=e=>Array.isArray(e)?e:[e];function Cje(e){const t=Array.isArray(e[0])?e[0]:e;return Eje(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Tje(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Aje=class{constructor(e){this.value=e}deref(){return this.value}},Oje=typeof WeakRef<"u"?WeakRef:Aje,Pje=0,SI=1;function oy(){return{s:Pje,v:void 0,o:null,p:null}}function xq(e,t={}){let r=oy();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var a;let l=r;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const y=arguments[f];if(typeof y=="function"||typeof y=="object"&&y!==null){let m=l.o;m===null&&(l.o=m=new WeakMap);const b=m.get(y);b===void 0?(l=oy(),m.set(y,l)):l=b}else{let m=l.p;m===null&&(l.p=m=new Map);const b=m.get(y);b===void 0?(l=oy(),m.set(y,l)):l=b}}const u=l;let h;if(l.s===SI)h=l.v;else if(h=e.apply(null,arguments),i++,n){const f=((a=s==null?void 0:s.deref)==null?void 0:a.call(s))??s;f!=null&&n(f,h)&&(h=f,i!==0&&i--),s=typeof h=="object"&&h!==null||typeof h=="function"?new Oje(h):h}return u.s=SI,u.v=h,h}return o.clearCache=()=>{r=oy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function Rje(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,a,l={},c=s.pop();typeof c=="object"&&(l=c,c=s.pop()),Nje(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...r,...l},{memoize:h,memoizeOptions:f=[],argsMemoize:p=xq,argsMemoizeOptions:y=[]}=u,m=NI(f),b=NI(y),x=Cje(s),w=h(function(){return i++,c.apply(null,arguments)},...m),_=p(function(){o++;const j=Tje(x,arguments);return a=w.apply(null,j),a},...b);return Object.assign(_,{resultFunc:c,memoizedResultFunc:w,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var Y=Rje(xq),Ije=Object.assign((e,t=Y)=>{Sje(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,a)=>(i[r[a]]=o,i),{}))},{withTypes:()=>Ije}),wq={},_q={},jq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),a=t(s);if(o===a&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?a-o:o-a}return 0};e.compareValues=r})(jq);var kq={},cC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(cC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cC,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(kq);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jq,r=kq,n=Ax;function s(i,o,a,l){if(i==null)return[];a=l?void 0:a,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(f=>String(f));const c=(f,p)=>{let y=f;for(let m=0;m<p.length&&y!=null;++m)y=y[p[m]];return y},u=(f,p)=>p==null||f==null?p:typeof f=="object"&&"key"in f?Object.hasOwn(p,f.key)?p[f.key]:c(p,f.path):typeof f=="function"?f(p):Array.isArray(f)?c(p,f):typeof p=="object"?p[f]:p,h=o.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||r.isKey(f)?f:{key:f,path:n.toPath(f)}));return i.map(f=>({original:f,criteria:h.map(p=>u(p,f))})).slice().sort((f,p)=>{for(let y=0;y<h.length;y++){const m=t.compareValues(f.criteria[y],p.criteria[y],a[y]);if(m!==0)return m}return 0}).map(f=>f.original)}e.orderBy=s})(_q);var Nq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<i?o(u,l+1):s.push(u)}};return o(r,0),s}e.flatten=t})(Nq);var uC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aC,r=Dx,n=rC,s=Lx;function i(o,a,l){return n.isObject(l)&&(typeof a=="number"&&r.isArrayLike(l)&&t.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?s.eq(l[a],o):!1}e.isIterateeCall=i})(uC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_q,r=Nq,n=uC;function s(i,...o){const a=o.length;return a>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:a>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})(wq);var Dje=wq.sortBy;const Fx=ki(Dje);var Sq=e=>e.legend.settings,Lje=e=>e.legend.size,Mje=e=>e.legend.payload,zje=Y([Mje,Sq],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Fx(n,r):n});function Fje(){return Le(zje)}var ay=1;function Eq(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>ay||Math.abs(o.left-t.left)>ay||Math.abs(o.top-t.top)>ay||Math.abs(o.width-t.width)>ay)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Zr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $je=typeof Symbol=="function"&&Symbol.observable||"@@observable",EI=$je,N_=()=>Math.random().toString(36).substring(7).split("").join("."),Uje={INIT:`@@redux/INIT${N_()}`,REPLACE:`@@redux/REPLACE${N_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${N_()}`},zv=Uje;function dC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Cq(e,t,r){if(typeof e!="function")throw new Error(Zr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Zr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Zr(1));return r(Cq)(e,t)}let n=e,s=t,i=new Map,o=i,a=0,l=!1;function c(){o===i&&(o=new Map,i.forEach((m,b)=>{o.set(b,m)}))}function u(){if(l)throw new Error(Zr(3));return s}function h(m){if(typeof m!="function")throw new Error(Zr(4));if(l)throw new Error(Zr(5));let b=!0;c();const x=a++;return o.set(x,m),function(){if(b){if(l)throw new Error(Zr(6));b=!1,c(),o.delete(x),i=null}}}function f(m){if(!dC(m))throw new Error(Zr(7));if(typeof m.type>"u")throw new Error(Zr(8));if(typeof m.type!="string")throw new Error(Zr(17));if(l)throw new Error(Zr(9));try{l=!0,s=n(s,m)}finally{l=!1}return(i=o).forEach(b=>{b()}),m}function p(m){if(typeof m!="function")throw new Error(Zr(10));n=m,f({type:zv.REPLACE})}function y(){const m=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(Zr(11));function x(){const w=b;w.next&&w.next(u())}return x(),{unsubscribe:m(x)}},[EI](){return this}}}return f({type:zv.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:p,[EI]:y}}function qje(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:zv.INIT})>"u")throw new Error(Zr(12));if(typeof r(void 0,{type:zv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zr(13))})}function Tq(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{qje(r)}catch(i){s=i}return function(i={},o){if(s)throw s;let a=!1;const l={};for(let c=0;c<n.length;c++){const u=n[c],h=r[u],f=i[u],p=h(f,o);if(typeof p>"u")throw o&&o.type,new Error(Zr(14));l[u]=p,a=a||p!==f}return a=a||n.length!==Object.keys(i).length,a?l:i}}function Fv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Bje(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Zr(15))};const o={getState:s.getState,dispatch:(l,...c)=>i(l,...c)},a=e.map(l=>l(o));return i=Fv(...a)(s.dispatch),{...s,dispatch:i}}}function Aq(e){return dC(e)&&"type"in e&&typeof e.type=="string"}var Oq=Symbol.for("immer-nothing"),CI=Symbol.for("immer-draftable"),as=Symbol.for("immer-state");function mi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var sh=Object.getPrototypeOf;function Hc(e){return!!e&&!!e[as]}function na(e){var t;return e?Pq(e)||Array.isArray(e)||!!e[CI]||!!((t=e.constructor)!=null&&t[CI])||Ux(e)||qx(e):!1}var Vje=Object.prototype.constructor.toString();function Pq(e){if(!e||typeof e!="object")return!1;const t=sh(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Vje}function $v(e,t){$x(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function $x(e){const t=e[as];return t?t.type_:Array.isArray(e)?1:Ux(e)?2:qx(e)?3:0}function rN(e,t){return $x(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Rq(e,t,r){const n=$x(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Wje(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ux(e){return e instanceof Map}function qx(e){return e instanceof Set}function lc(e){return e.copy_||e.base_}function nN(e,t){if(Ux(e))return new Map(e);if(qx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Pq(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[as];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(sh(e),n)}else{const n=sh(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function hC(e,t=!1){return Bx(e)||Hc(e)||!na(e)||($x(e)>1&&(e.set=e.add=e.clear=e.delete=Hje),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>hC(n,!0))),e}function Hje(){mi(2)}function Bx(e){return Object.isFrozen(e)}var Kje={};function Kc(e){const t=Kje[e];return t||mi(0,e),t}var Kp;function Iq(){return Kp}function Zje(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TI(e,t){t&&(Kc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function sN(e){iN(e),e.drafts_.forEach(Gje),e.drafts_=null}function iN(e){e===Kp&&(Kp=e.parent_)}function AI(e){return Kp=Zje(Kp,e)}function Gje(e){const t=e[as];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function OI(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[as].modified_&&(sN(t),mi(4)),na(e)&&(e=Uv(t,e),t.parent_||qv(t,e)),t.patches_&&Kc("Patches").generateReplacementPatches_(r[as].base_,e,t.patches_,t.inversePatches_)):e=Uv(t,r,[]),sN(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Oq?e:void 0}function Uv(e,t,r){if(Bx(t))return t;const n=t[as];if(!n)return $v(t,(s,i)=>PI(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return qv(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),$v(i,(a,l)=>PI(e,n,s,a,l,r,o)),qv(e,s,!1),r&&e.patches_&&Kc("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function PI(e,t,r,n,s,i,o){if(Hc(s)){const a=i&&t&&t.type_!==3&&!rN(t.assigned_,n)?i.concat(n):void 0,l=Uv(e,s,a);if(Rq(r,n,l),Hc(l))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(na(s)&&!Bx(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Uv(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&qv(e,s)}}function qv(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&hC(t,r)}function Yje(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Iq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=fC;r&&(s=[n],i=Zp);const{revoke:o,proxy:a}=Proxy.revocable(s,i);return n.draft_=a,n.revoke_=o,a}var fC={get(e,t){if(t===as)return e;const r=lc(e);if(!rN(r,t))return Jje(e,r,t);const n=r[t];return e.finalized_||!na(n)?n:n===S_(e.base_,t)?(E_(e),e.copy_[t]=aN(n,e)):n},has(e,t){return t in lc(e)},ownKeys(e){return Reflect.ownKeys(lc(e))},set(e,t,r){const n=Dq(lc(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=S_(lc(e),t),i=s==null?void 0:s[as];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Wje(r,s)&&(r!==void 0||rN(e.base_,t)))return!0;E_(e),oN(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return S_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,E_(e),oN(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=lc(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){mi(11)},getPrototypeOf(e){return sh(e.base_)},setPrototypeOf(){mi(12)}},Zp={};$v(fC,(e,t)=>{Zp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Zp.deleteProperty=function(e,t){return Zp.set.call(this,e,t,void 0)};Zp.set=function(e,t,r){return fC.set.call(this,e[0],t,r,e[0])};function S_(e,t){const r=e[as];return(r?lc(r):e)[t]}function Jje(e,t,r){var n;const s=Dq(t,r);return s?"value"in s?s.value:(n=s.get)==null?void 0:n.call(e.draft_):void 0}function Dq(e,t){if(!(t in e))return;let r=sh(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=sh(r)}}function oN(e){e.modified_||(e.modified_=!0,e.parent_&&oN(e.parent_))}function E_(e){e.copy_||(e.copy_=nN(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Xje=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(a=i,...l){return o.produce(a,c=>r.call(this,c,...l))}}typeof r!="function"&&mi(6),n!==void 0&&typeof n!="function"&&mi(7);let s;if(na(t)){const i=AI(this),o=aN(t,void 0);let a=!0;try{s=r(o),a=!1}finally{a?sN(i):iN(i)}return TI(i,n),OI(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===Oq&&(s=void 0),this.autoFreeze_&&hC(s,!0),n){const i=[],o=[];Kc("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else mi(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,a=>t(a,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){na(e)||mi(8),Hc(e)&&(e=Ho(e));const t=AI(this),r=aN(e,void 0);return r[as].isManual_=!0,iN(t),r}finishDraft(e,t){const r=e&&e[as];(!r||!r.isManual_)&&mi(9);const{scope_:n}=r;return TI(n,t),OI(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Kc("Patches").applyPatches_;return Hc(e)?n(e,t):this.produce(e,s=>n(s,t))}};function aN(e,t){const r=Ux(e)?Kc("MapSet").proxyMap_(e,t):qx(e)?Kc("MapSet").proxySet_(e,t):Yje(e,t);return(t?t.scope_:Iq()).drafts_.push(r),r}function Ho(e){return Hc(e)||mi(10,e),Lq(e)}function Lq(e){if(!na(e)||Bx(e))return e;const t=e[as];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=nN(e,t.scope_.immer_.useStrictShallowCopy_)}else r=nN(e,!0);return $v(r,(n,s)=>{Rq(r,n,Lq(s))}),t&&(t.finalized_=!1),r}var ls=new Xje,Mq=ls.produce;ls.produceWithPatches.bind(ls);ls.setAutoFreeze.bind(ls);ls.setUseStrictShallowCopy.bind(ls);ls.applyPatches.bind(ls);ls.createDraft.bind(ls);ls.finishDraft.bind(ls);function zq(e){return({dispatch:t,getState:r})=>n=>s=>typeof s=="function"?s(t,r,e):n(s)}var Qje=zq(),eke=zq,tke=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Fv:Fv.apply(null,arguments)};function Ls(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(os(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Aq(n)&&n.type===e,r}var Fq=class Zf extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Zf.prototype)}static get[Symbol.species](){return Zf}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Zf(...t[0].concat(this)):new Zf(...t.concat(this))}};function RI(e){return na(e)?Mq(e,()=>{}):e}function ly(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function rke(e){return typeof e=="boolean"}var nke=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:s=!0}=e??{};let i=new Fq;return t&&(rke(t)?i.push(Qje):i.push(eke(t.extraArgument))),i},ske="RTK_autoBatch",II=e=>t=>{setTimeout(t,e)},ike=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const a=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:II(10):e.type==="callback"?e.queueNotification:II(e.timeout),c=()=>{o=!1,i&&(i=!1,a.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>s&&u(),f=n.subscribe(h);return a.add(u),()=>{f(),a.delete(u)}},dispatch(u){var h;try{return s=!((h=u==null?void 0:u.meta)!=null&&h[ske]),i=!s,i&&(o||(o=!0,l(c))),n.dispatch(u)}finally{s=!0}}})},oke=e=>function(t){const{autoBatch:r=!0}=t??{};let n=new Fq(e);return r&&n.push(ike(typeof r=="object"?r:void 0)),n};function ake(e){const t=nke(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(dC(r))a=Tq(r);else throw new Error(os(1));let l;typeof n=="function"?l=n(t):l=t();let c=Fv;s&&(c=tke({trace:!1,...typeof s=="object"&&s}));const u=Bje(...l),h=oke(u);let f=typeof o=="function"?o(h):h();const p=c(...f);return Cq(a,i,p)}function $q(e){const t={},r=[];let n;const s={addCase(i,o){const a=typeof i=="string"?i:i.type;if(!a)throw new Error(os(28));if(a in t)throw new Error(os(29));return t[a]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function lke(e){return typeof e=="function"}function cke(e,t){let[r,n,s]=$q(t),i;if(lke(e))i=()=>RI(e());else{const a=RI(e);i=()=>a}function o(a=i(),l){let c=[r[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[s]),c.reduce((u,h)=>{if(h)if(Hc(u)){const f=h(u,l);return f===void 0?u:f}else{if(na(u))return Mq(u,f=>h(f,l));{const f=h(u,l);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},a)}return o.getInitialState=i,o}var uke="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",dke=(e=21)=>{let t="",r=e;for(;r--;)t+=uke[Math.random()*64|0];return t},hke=Symbol.for("rtk-slice-createasyncthunk");function fke(e,t){return`${e}/${t}`}function pke({creators:e}={}){var t;const r=(t=e==null?void 0:e.asyncThunk)==null?void 0:t[hke];return function(n){const{name:s,reducerPath:i=s}=n;if(!s)throw new Error(os(11));const o=(typeof n.reducers=="function"?n.reducers(gke()):n.reducers)||{},a=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,j){const k=typeof _=="string"?_:_.type;if(!k)throw new Error(os(12));if(k in l.sliceCaseReducersByType)throw new Error(os(13));return l.sliceCaseReducersByType[k]=j,c},addMatcher(_,j){return l.sliceMatchers.push({matcher:_,reducer:j}),c},exposeAction(_,j){return l.actionCreators[_]=j,c},exposeCaseReducer(_,j){return l.sliceCaseReducersByName[_]=j,c}};a.forEach(_=>{const j=o[_],k={reducerName:_,type:fke(s,_),createNotation:typeof n.reducers=="function"};vke(j)?xke(k,j,c,r):yke(k,j,c)});function u(){const[_={},j=[],k=void 0]=typeof n.extraReducers=="function"?$q(n.extraReducers):[n.extraReducers],N={..._,...l.sliceCaseReducersByType};return cke(n.initialState,C=>{for(let E in N)C.addCase(E,N[E]);for(let E of l.sliceMatchers)C.addMatcher(E.matcher,E.reducer);for(let E of j)C.addMatcher(E.matcher,E.reducer);k&&C.addDefaultCase(k)})}const h=_=>_,f=new Map,p=new WeakMap;let y;function m(_,j){return y||(y=u()),y(_,j)}function b(){return y||(y=u()),y.getInitialState()}function x(_,j=!1){function k(C){let E=C[_];return typeof E>"u"&&j&&(E=ly(p,k,b)),E}function N(C=h){const E=ly(f,j,()=>new WeakMap);return ly(E,C,()=>{const T={};for(const[P,O]of Object.entries(n.selectors??{}))T[P]=mke(O,C,()=>ly(p,C,b),j);return T})}return{reducerPath:_,getSelectors:N,get selectors(){return N(k)},selectSlice:k}}const w={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:b,...x(i),injectInto(_,{reducerPath:j,...k}={}){const N=j??i;return _.inject({reducerPath:N,reducer:m},k),{...w,...x(N,!0)}}};return w}}function mke(e,t,r,n){function s(i,...o){let a=t(i);return typeof a>"u"&&n&&(a=r()),e(a,...o)}return s.unwrapped=e,s}var cs=pke();function gke(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function yke({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!bke(n))throw new Error(os(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Ls(e,o):Ls(e))}function vke(e){return e._reducerDefinitionType==="asyncThunk"}function bke(e){return e._reducerDefinitionType==="reducerWithPrepare"}function xke({type:e,reducerName:t},r,n,s){if(!s)throw new Error(os(18));const{payloadCreator:i,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=r,h=s(e,i,u);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),a&&n.addCase(h.pending,a),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(t,{fulfilled:o||cy,pending:a||cy,rejected:l||cy,settled:c||cy})}function cy(){}var wke="task",Uq="listener",qq="completed",pC="cancelled",_ke=`task-${pC}`,jke=`task-${qq}`,lN=`${Uq}-${pC}`,kke=`${Uq}-${qq}`,Vx=class{constructor(e){xe(this,"name","TaskAbortError"),xe(this,"message"),this.code=e,this.message=`${wke} ${pC} (reason: ${e})`}},mC=(e,t)=>{if(typeof e!="function")throw new TypeError(os(32))},Bv=()=>{},Bq=(e,t=Bv)=>(e.catch(t),e),Vq=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Pc=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Rc=e=>{if(e.aborted){const{reason:t}=e;throw new Vx(t)}};function Wq(e,t){let r=Bv;return new Promise((n,s)=>{const i=()=>s(new Vx(e.reason));if(e.aborted){i();return}r=Vq(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Bv})}var Nke=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Vx?"cancelled":"rejected",error:r}}finally{t==null||t()}},Vv=e=>t=>Bq(Wq(e,t).then(r=>(Rc(e),r))),Hq=e=>{const t=Vv(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:kd}=Object,DI={},Wx="listenerMiddleware",Ske=(e,t)=>{const r=n=>Vq(e,()=>Pc(n,e.reason));return(n,s)=>{mC(n);const i=new AbortController;r(i);const o=Nke(async()=>{Rc(e),Rc(i.signal);const a=await n({pause:Vv(i.signal),delay:Hq(i.signal),signal:i.signal});return Rc(i.signal),a},()=>Pc(i,jke));return s!=null&&s.autoJoin&&t.push(o.catch(Bv)),{result:Vv(e)(o),cancel(){Pc(i,_ke)}}}},Eke=(e,t)=>{const r=async(n,s)=>{Rc(t);let i=()=>{};const o=[new Promise((a,l)=>{let c=e({predicate:n,effect:(u,h)=>{h.unsubscribe(),a([u,h.getState(),h.getOriginalState()])}});i=()=>{c(),l()}})];s!=null&&o.push(new Promise(a=>setTimeout(a,s,null)));try{const a=await Wq(t,Promise.race(o));return Rc(t),a}finally{i()}};return(n,s)=>Bq(r(n,s))},Kq=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Ls(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(os(21));return mC(i),{predicate:s,type:t,effect:i}},Zq=kd(e=>{const{type:t,predicate:r,effect:n}=Kq(e);return{id:dke(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(os(22))}}},{withTypes:()=>Zq}),LI=(e,t)=>{const{type:r,effect:n,predicate:s}=Kq(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},cN=e=>{e.pending.forEach(t=>{Pc(t,lN)})},Cke=e=>()=>{e.forEach(cN),e.clear()},MI=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Gq=kd(Ls(`${Wx}/add`),{withTypes:()=>Gq}),Tke=Ls(`${Wx}/removeAll`),Yq=kd(Ls(`${Wx}/remove`),{withTypes:()=>Yq}),Ake=(...e)=>{console.error(`${Wx}/error`,...e)},zm=(e={})=>{const t=new Map,{extra:r,onError:n=Ake}=e;mC(n);const s=c=>(c.unsubscribe=()=>t.delete(c.id),t.set(c.id,c),u=>{c.unsubscribe(),u!=null&&u.cancelActive&&cN(c)}),i=c=>{const u=LI(t,c)??Zq(c);return s(u)};kd(i,{withTypes:()=>i});const o=c=>{const u=LI(t,c);return u&&(u.unsubscribe(),c.cancelActive&&cN(u)),!!u};kd(o,{withTypes:()=>o});const a=async(c,u,h,f)=>{const p=new AbortController,y=Eke(i,p.signal),m=[];try{c.pending.add(p),await Promise.resolve(c.effect(u,kd({},h,{getOriginalState:f,condition:(b,x)=>y(b,x).then(Boolean),take:y,delay:Hq(p.signal),pause:Vv(p.signal),extra:r,signal:p.signal,fork:Ske(p.signal,m),unsubscribe:c.unsubscribe,subscribe:()=>{t.set(c.id,c)},cancelActiveListeners:()=>{c.pending.forEach((b,x,w)=>{b!==p&&(Pc(b,lN),w.delete(b))})},cancel:()=>{Pc(p,lN),c.pending.delete(p)},throwIfCancelled:()=>{Rc(p.signal)}})))}catch(b){b instanceof Vx||MI(n,b,{raisedBy:"effect"})}finally{await Promise.all(m),Pc(p,kke),c.pending.delete(p)}},l=Cke(t);return{middleware:c=>u=>h=>{if(!Aq(h))return u(h);if(Gq.match(h))return i(h.payload);if(Tke.match(h)){l();return}if(Yq.match(h))return o(h.payload);let f=c.getState();const p=()=>{if(f===DI)throw new Error(os(23));return f};let y;try{if(y=u(h),t.size>0){const m=c.getState(),b=Array.from(t.values());for(const x of b){let w=!1;try{w=x.predicate(h,m,f)}catch(_){w=!1,MI(n,_,{raisedBy:"predicate"})}w&&a(x,h,c,p)}}}finally{f=DI}return y},startListening:i,stopListening:o,clearListeners:l}};function os(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Oke={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Jq=cs({name:"chartLayout",initialState:Oke,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:Pke,setLayout:Rke,setChartSize:Ike,setScale:Dke}=Jq.actions,Lke=Jq.reducer;function zI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(r),!0).forEach(function(n){Mke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mke(e,t,r){return(t=zke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zke(e){var t=Fke(e,"string");return typeof t=="symbol"?t:t+""}function Fke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wv=Math.PI/180,$ke=e=>e*180/Math.PI,yr=(e,t,r,n)=>({x:e+Math.cos(-Wv*n)*r,y:t+Math.sin(-Wv*n)*r}),Xq=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},Uke=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},qke=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=Uke({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var a=(r-s)/o,l=Math.acos(a);return n>i&&(l=2*Math.PI-l),{radius:o,angle:$ke(l),angleInRadian:l}},Bke=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},Vke=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},Wke=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=qke({x:r,y:n},t),{innerRadius:o,outerRadius:a}=t;if(s<o||s>a||s===0)return null;var{startAngle:l,endAngle:c}=Bke(t),u=i,h;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;h=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=l}return h?FI(FI({},t),{},{radius:s,angle:Vke(u,t)}):null};function Qq(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function $I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$I(Object(r),!0).forEach(function(n){Hke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$I(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hke(e,t,r){return(t=Kke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kke(e){var t=Zke(e,"string");return typeof t=="symbol"?t:t+""}function Zke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lt(e,t,r){return vr(e)||vr(t)?r:so(t)?bl(e,t,r):typeof t=="function"?t(e):r}var Gke=(e,t,r,n,s)=>{var i,o=-1,a=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(a<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<a;l++){var c=l>0?r[l-1].coordinate:r[a-1].coordinate,u=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,f=void 0;if(hn(u-c)!==hn(h-u)){var p=[];if(hn(h-u)===hn(s[1]-s[0])){f=h;var y=u+s[1]-s[0];p[0]=Math.min(y,(y+c)/2),p[1]=Math.max(y,(y+c)/2)}else{f=c;var m=h+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var b=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:o}=r[l]);break}}else{var x=Math.min(c,h),w=Math.max(c,h);if(e>(x+u)/2&&e<=(w+u)/2){({index:o}=r[l]);break}}}else if(t){for(var _=0;_<a;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<a-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===a-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:o}=t[_]);break}}return o},Yke=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:a}=t;if((a==="vertical"||a==="horizontal"&&o==="middle")&&i!=="center"&&Ae(e[i]))return ks(ks({},e),{},{[i]:e[i]+(n||0)});if((a==="horizontal"||a==="vertical"&&i==="center")&&o!=="middle"&&Ae(e[o]))return ks(ks({},e),{},{[o]:e[o]+(s||0)})}return e},Ol=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",eB=(e,t,r,n)=>{if(n)return e.map(a=>a.coordinate);var s,i,o=e.map(a=>(a.coordinate===t&&(s=!0),a.coordinate===r&&(i=!0),a.coordinate));return s||o.push(t),i||o.push(r),o},tB=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:h,niceTicks:f,axisType:p}=e;if(!o)return null;var y=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,m=s==="category"&&o.bandwidth?o.bandwidth()/y:0;if(m=p==="angleAxis"&&i&&i.length>=2?hn(i[0]-i[1])*2*m:m,h||f){var b=(h||f||[]).map((x,w)=>{var _=n?n.indexOf(x):x;return{coordinate:o(_)+m,value:x,offset:m,index:w}});return b.filter(x=>!Is(x.coordinate))}return l&&c?c.map((x,w)=>({coordinate:o(x)+m,value:x,index:w,offset:m})):o.ticks&&u!=null?o.ticks(u).map((x,w)=>({coordinate:o(x)+m,value:x,offset:m,index:w})):o.domain().map((x,w)=>({coordinate:o(x)+m,value:n?n[x]:x,index:w,offset:m}))},UI=1e-4,Jke=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-UI,i=Math.max(n[0],n[1])+UI,o=e(t[0]),a=e(t[r-1]);(o<s||o>i||a<s||a>i)&&e.domain([t[0],t[r-1]])}},Xke=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var a=Is(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=s,e[o][r][1]=s+a,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1])}},Qke=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=Is(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},eNe={sign:Xke,expand:eje,none:nh,silhouette:tje,wiggle:rje,positive:Qke},tNe=(e,t,r)=>{var n=eNe[r],s=Q_e().keys(t).value((i,o)=>+Lt(i,o,0)).order(Qk).offset(n);return s(e)};function qI(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!vr(s[t.dataKey])){var a=DU(r,"value",s[t.dataKey]);if(a)return a.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Lt(s,vr(o)?t.dataKey:o);return vr(l)?null:t.scale(l)}var rNe=e=>{var t=e.flat(2).filter(Ae);return[Math.min(...t),Math.max(...t)]},nNe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],sNe=(e,t,r)=>{if(e!=null)return nNe(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,a=o.reduce((l,c)=>{var u=Qq(c,t,r),h=rNe(u);return[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(a[0],n[0]),Math.max(a[1],n[1])]},[1/0,-1/0]))},BI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uN=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Fx(t,u=>u.coordinate),i=1/0,o=1,a=s.length;o<a;o++){var l=s[o],c=s[o-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function WI(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return ks(ks({},t),{},{dataKey:r,payload:n,value:s,name:i})}function Hx(e,t){if(e)return String(e);if(typeof t=="string")return t}function iNe(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?Wke({x:e,y:t},n):null}var oNe=(e,t,r,n)=>{var s=t.find(c=>c&&c.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return ks(ks(ks({},n),yr(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var a=s.coordinate,{angle:l}=n;return ks(ks(ks({},n),yr(n.cx,n.cy,a,l)),{},{angle:l,radius:a})}return{x:0,y:0}},aNe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,pa=e=>e.layout.width,ma=e=>e.layout.height,lNe=e=>e.layout.scale,rB=e=>e.layout.margin,gC=Y(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),yC=Y(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),nB="data-recharts-item-index",sB="data-recharts-item-data-key",Kx=60;function HI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HI(Object(r),!0).forEach(function(n){cNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cNe(e,t,r){return(t=uNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uNe(e){var t=dNe(e,"string");return typeof t=="symbol"?t:t+""}function dNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hNe=e=>e.brush.height,Wr=Y([pa,ma,rB,hNe,gC,yC,Sq,Lje],(e,t,r,n,s,i,o,a)=>{var l=i.reduce((y,m)=>{var{orientation:b}=m;if(!m.mirror&&!m.hide){var x=typeof m.width=="number"?m.width:Kx;return Pa(Pa({},y),{},{[b]:y[b]+x})}return y},{left:r.left||0,right:r.right||0}),c=s.reduce((y,m)=>{var{orientation:b}=m;return!m.mirror&&!m.hide?Pa(Pa({},y),{},{[b]:bl(y,"".concat(b))+m.height}):y},{top:r.top||0,bottom:r.bottom||0}),u=Pa(Pa({},c),l),h=u.bottom;u.bottom+=n,u=Yke(u,o,a);var f=e-u.left-u.right,p=t-u.top-u.bottom;return Pa(Pa({brushBottom:h},u),{},{width:Math.max(f,0),height:Math.max(p,0)})}),fNe=Y(Wr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),iB=Y(pa,ma,(e,t)=>({x:0,y:0,width:e,height:t})),pNe=v.createContext(null),qs=()=>v.useContext(pNe)!=null,Zx=e=>e.brush,Gx=Y([Zx,Wr,rB],(e,t,r)=>({height:e.height,x:Ae(e.x)?e.x:t.left,y:Ae(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Ae(e.width)?e.width:t.width})),vC=()=>{var e,t=qs(),r=Le(fNe),n=Le(Gx),s=(e=Le(Zx))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},mNe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},oB=()=>{var e;return(e=Le(Wr))!==null&&e!==void 0?e:mNe},bC=()=>Le(pa),xC=()=>Le(ma),gNe={top:0,right:0,bottom:0,left:0},yNe=()=>{var e;return(e=Le(t=>t.layout.margin))!==null&&e!==void 0?e:gNe},vt=e=>e.layout.layoutType,wC=()=>Le(vt),vNe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},aB=cs({name:"legend",initialState:vNe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Ho(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:KI,setLegendSettings:bNe,addLegendPayload:lB,removeLegendPayload:cB}=aB.actions,xNe=aB.reducer,wNe=["contextPayload"];function dN(){return dN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dN.apply(null,arguments)}function ZI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ih(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZI(Object(r),!0).forEach(function(n){_C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _C(e,t,r){return(t=_Ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ne(e){var t=jNe(e,"string");return typeof t=="symbol"?t:t+""}function jNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kNe(e,t){if(e==null)return{};var r,n,s=NNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SNe(e){return e.value}function ENe(e){var{contextPayload:t}=e,r=kNe(e,wNe),n=vq(t,e.payloadUniqBy,SNe),s=ih(ih({},r),{},{payload:n});return v.isValidElement(e.content)?v.cloneElement(e.content,s):typeof e.content=="function"?v.createElement(e.content,s):v.createElement(eC,s)}function CNe(e,t,r,n,s,i){var{layout:o,align:a,verticalAlign:l}=t,c,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(a==="center"&&o==="vertical"?c={left:((n||0)-i.width)/2}:c=a==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(l==="middle"?u={top:((s||0)-i.height)/2}:u=l==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),ih(ih({},c),u)}function TNe(e){var t=Yt();return v.useEffect(()=>{t(bNe(e))},[t,e]),null}function ANe(e){var t=Yt();return v.useEffect(()=>(t(KI(e)),()=>{t(KI({width:0,height:0}))}),[t,e]),null}function ONe(e){var t=Fje(),r=j_e(),n=yNe(),{width:s,height:i,wrapperStyle:o,portal:a}=e,[l,c]=Eq([t]),u=bC(),h=xC(),f=u-(n.left||0)-(n.right||0),p=Gp.getWidthOrHeight(e.layout,i,s,f),y=a?o:ih(ih({position:"absolute",width:(p==null?void 0:p.width)||s||"auto",height:(p==null?void 0:p.height)||i||"auto"},CNe(o,e,n,u,h,l)),o),m=a??r;if(m==null)return null;var b=v.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:c},v.createElement(TNe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),v.createElement(ANe,{width:l.width,height:l.height}),v.createElement(ENe,dN({},e,p,{margin:n,chartWidth:u,chartHeight:h,contextPayload:t})));return ro.createPortal(b,m)}class Gp extends v.PureComponent{static getWidthOrHeight(t,r,n,s){return t==="vertical"&&Ae(r)?{height:r}:t==="horizontal"?{width:n||s}:null}render(){return v.createElement(ONe,this.props)}}_C(Gp,"displayName","Legend");_C(Gp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function hN(){return hN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hN.apply(null,arguments)}function GI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GI(Object(r),!0).forEach(function(n){PNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PNe(e,t,r){return(t=RNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RNe(e){var t=INe(e,"string");return typeof t=="symbol"?t:t+""}function INe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DNe(e){return Array.isArray(e)&&so(e[0])&&so(e[1])?e.join(" ~ "):e}var LNe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,p=()=>{if(i&&i.length){var k={padding:0,margin:0},N=(a?Fx(i,a):i).map((C,E)=>{if(C.type==="none")return null;var T=C.formatter||o||DNe,{value:P,name:O}=C,I=P,R=O;if(T){var F=T(P,O,C,E,i);if(Array.isArray(F))[I,R]=F;else if(F!=null)I=F;else return null}var $=C_({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:$},so(R)?v.createElement("span",{className:"recharts-tooltip-item-name"},R):null,so(R)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},I),v.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:k},N)}return null},y=C_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),m=C_({margin:0},s),b=!vr(u),x=b?u:"",w=at("recharts-default-tooltip",l),_=at("recharts-tooltip-label",c);b&&h&&i!==void 0&&i!==null&&(x=h(u,i));var j=f?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",hN({className:w,style:y},j),v.createElement("p",{className:_,style:m},v.isValidElement(x)?x:"".concat(x)),p())},kf="recharts-tooltip-wrapper",MNe={visibility:"hidden"};function zNe(e){var{coordinate:t,translateX:r,translateY:n}=e;return at(kf,{["".concat(kf,"-right")]:Ae(r)&&t&&Ae(t.x)&&r>=t.x,["".concat(kf,"-left")]:Ae(r)&&t&&Ae(t.x)&&r<t.x,["".concat(kf,"-bottom")]:Ae(n)&&t&&Ae(t.y)&&n>=t.y,["".concat(kf,"-top")]:Ae(n)&&t&&Ae(t.y)&&n<t.y})}function YI(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=e;if(i&&Ae(i[n]))return i[n];var u=r[n]-a-(s>0?s:0),h=r[n]+s;if(t[n])return o[n]?u:h;var f=l[n];if(f==null)return 0;if(o[n]){var p=u,y=f;return p<y?Math.max(h,f):Math.max(u,f)}if(c==null)return 0;var m=h+a,b=f+c;return m>b?Math.max(u,f):Math.max(h,f)}function FNe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function $Ne(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:a,viewBox:l}=e,c,u,h;return o.height>0&&o.width>0&&r?(u=YI({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),h=YI({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=FNe({translateX:u,translateY:h,useTranslate3d:a})):c=MNe,{cssProperties:c,cssClasses:zNe({translateX:u,translateY:h,coordinate:r})}}function JI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JI(Object(r),!0).forEach(function(n){fN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fN(e,t,r){return(t=UNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UNe(e){var t=qNe(e,"string");return typeof t=="symbol"?t:t+""}function qNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class BNe extends v.PureComponent{constructor(){super(...arguments),fN(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),fN(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:h,useTranslate3d:f,viewBox:p,wrapperStyle:y,lastBoundingBox:m,innerRef:b,hasPortalFromProps:x}=this.props,{cssClasses:w,cssProperties:_}=$Ne({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:h,tooltipBox:{height:m.height,width:m.width},useTranslate3d:f,viewBox:p}),j=x?{}:uy(uy({transition:l&&t?"transform ".concat(n,"ms ").concat(s):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&a?"visible":"hidden",position:"absolute",top:0,left:0}),k=uy(uy({},j),{},{visibility:!this.state.dismissed&&t&&a?"visible":"hidden"},y);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},i)}}var VNe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),$h={isSsr:VNe()},uB=()=>Le(e=>e.rootProps.accessibilityLayer);function wi(e){return Number.isFinite(e)}function oh(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function pN(){return pN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pN.apply(null,arguments)}function XI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XI(Object(r),!0).forEach(function(n){WNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WNe(e,t,r){return(t=HNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HNe(e){var t=KNe(e,"string");return typeof t=="symbol"?t:t+""}function KNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eD={curveBasisClosed:q_e,curveBasisOpen:B_e,curveBasis:U_e,curveBumpX:E_e,curveBumpY:C_e,curveLinearClosed:V_e,curveLinear:Rx,curveMonotoneX:W_e,curveMonotoneY:H_e,curveNatural:K_e,curveStep:Z_e,curveStepAfter:Y_e,curveStepBefore:G_e},dy=e=>wi(e.x)&&wi(e.y),Nf=e=>e.x,Sf=e=>e.y,ZNe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Mm(e));return(r==="curveMonotone"||r==="curveBump")&&t?eD["".concat(r).concat(t==="vertical"?"Y":"X")]:eD[r]||Rx},GNe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=ZNe(t,s),a=i?r.filter(dy):r,l;if(Array.isArray(n)){var c=i?n.filter(h=>dy(h)):n,u=a.map((h,f)=>QI(QI({},h),{},{base:c[f]}));return s==="vertical"?l=iy().y(Sf).x1(Nf).x0(h=>h.base.x):l=iy().x(Nf).y1(Sf).y0(h=>h.base.y),l.defined(dy).curve(o),l(u)}return s==="vertical"&&Ae(n)?l=iy().y(Sf).x1(Nf).x0(n):Ae(n)?l=iy().x(Nf).y1(Sf).y0(n):l=WU().x(Nf).y(Sf),l.defined(dy).curve(o),l(a)},jC=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?GNe(e):n;return v.createElement("path",pN({},Al(e),H2(e),{className:at("recharts-curve",t),d:i===null?void 0:i,ref:s}))},YNe=["x","y","top","left","width","height","className"];function mN(){return mN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mN.apply(null,arguments)}function tD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JNe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tD(Object(r),!0).forEach(function(n){XNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XNe(e,t,r){return(t=QNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QNe(e){var t=eSe(e,"string");return typeof t=="symbol"?t:t+""}function eSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tSe(e,t){if(e==null)return{};var r,n,s=rSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nSe=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),sSe=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:a}=e,l=tSe(e,YNe),c=JNe({x:t,y:r,top:n,left:s,width:i,height:o},l);return!Ae(t)||!Ae(r)||!Ae(i)||!Ae(o)||!Ae(n)||!Ae(s)?null:v.createElement("path",mN({},Ht(c,!0),{className:at("recharts-cross",a),d:nSe(t,r,i,o,n,s)}))};function iSe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rD(Object(r),!0).forEach(function(n){aSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aSe(e,t,r){return(t=lSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lSe(e){var t=cSe(e,"string");return typeof t=="symbol"?t:t+""}function cSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bs(e,t){var r=oSe({},e),n=t,s=Object.keys(t),i=s.reduce((o,a)=>(o[a]===void 0&&n[a]!==void 0&&(o[a]=n[a]),o),r);return i}var dB={},hB={},fB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(fB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fB,r=oC,n=Mx,s=zx,i=Lx;function o(c,u,h){return a(c,u,void 0,void 0,void 0,void 0,h)}function a(c,u,h,f,p,y,m){const b=m(c,u,h,f,p,y);if(b!==void 0)return b;if(typeof c==typeof u)switch(typeof c){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return c===u;case"number":return c===u||Object.is(c,u);case"function":return c===u;case"object":return l(c,u,y,m)}return l(c,u,y,m)}function l(c,u,h,f){if(Object.is(c,u))return!0;let p=n.getTag(c),y=n.getTag(u);if(p===s.argumentsTag&&(p=s.objectTag),y===s.argumentsTag&&(y=s.objectTag),p!==y)return!1;switch(p){case s.stringTag:return c.toString()===u.toString();case s.numberTag:{const x=c.valueOf(),w=u.valueOf();return i.eq(x,w)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(c.valueOf(),u.valueOf());case s.regexpTag:return c.source===u.source&&c.flags===u.flags;case s.functionTag:return c===u}h=h??new Map;const m=h.get(c),b=h.get(u);if(m!=null&&b!=null)return m===u;h.set(c,u),h.set(u,c);try{switch(p){case s.mapTag:{if(c.size!==u.size)return!1;for(const[x,w]of c.entries())if(!u.has(x)||!a(w,u.get(x),x,c,u,h,f))return!1;return!0}case s.setTag:{if(c.size!==u.size)return!1;const x=Array.from(c.values()),w=Array.from(u.values());for(let _=0;_<x.length;_++){const j=x[_],k=w.findIndex(N=>a(j,N,void 0,c,u,h,f));if(k===-1)return!1;w.splice(k,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(c)!==Buffer.isBuffer(u)||c.length!==u.length)return!1;for(let x=0;x<c.length;x++)if(!a(c[x],u[x],x,c,u,h,f))return!1;return!0}case s.arrayBufferTag:return c.byteLength!==u.byteLength?!1:l(new Uint8Array(c),new Uint8Array(u),h,f);case s.dataViewTag:return c.byteLength!==u.byteLength||c.byteOffset!==u.byteOffset?!1:l(new Uint8Array(c),new Uint8Array(u),h,f);case s.errorTag:return c.name===u.name&&c.message===u.message;case s.objectTag:{if(!(l(c.constructor,u.constructor,h,f)||t.isPlainObject(c)&&t.isPlainObject(u)))return!1;const x=[...Object.keys(c),...r.getSymbols(c)],w=[...Object.keys(u),...r.getSymbols(u)];if(x.length!==w.length)return!1;for(let _=0;_<x.length;_++){const j=x[_],k=c[j];if(!Object.hasOwn(u,j))return!1;const N=u[j];if(!a(k,N,j,c,u,h,f))return!1}return!0}default:return!1}}finally{h.delete(c),h.delete(u)}}e.isEqualWith=o})(hB);var pB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(pB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hB,r=pB;function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n})(dB);var uSe=dB.isEqual;const dSe=ki(uSe);var Hv=1e-4,mB=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],gB=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),nD=(e,t)=>r=>{var n=mB(e,t);return gB(n,r)},hSe=(e,t)=>r=>{var n=mB(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return gB(s,r)},sD=function(){for(var e,t,r,n,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[e,r,t,n]=[0,0,1,1];break;case"ease":[e,r,t,n]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,n]=[.42,0,1,1];break;case"ease-out":[e,r,t,n]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,n]=[0,0,.58,1];break;default:{var a=i[0].split("(");a[0]==="cubic-bezier"&&a[1].split(")")[0].split(",").length===4&&([e,r,t,n]=a[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else i.length===4&&([e,r,t,n]=i);var l=nD(e,t),c=nD(r,n),u=hSe(e,t),h=p=>p>1?1:p<0?0:p,f=p=>{for(var y=p>1?1:p,m=y,b=0;b<8;++b){var x=l(m)-y,w=u(m);if(Math.abs(x-y)<Hv||w<Hv)return c(m);m=h(m-x/w)}return c(m)};return f.isStepper=!1,f},fSe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,s=(i,o,a)=>{var l=-(i-o)*t,c=a*r,u=a+(l-c)*n/1e3,h=a*n/1e3+i;return Math.abs(h-o)<Hv&&Math.abs(u)<Hv?[o,0]:[h,u]};return s.isStepper=!0,s.dt=n,s},yB=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return sD(e);case"spring":return fSe();default:if(e.split("(")[0]==="cubic-bezier")return sD(e)}return typeof e=="function"?e:null};function iD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iD(Object(r),!0).forEach(function(n){pSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pSe(e,t,r){return(t=mSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mSe(e){var t=gSe(e,"string");return typeof t=="symbol"?t:t+""}function gSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ySe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),vSe=(e,t,r)=>e.map(n=>"".concat(ySe(n)," ").concat(t,"ms ").concat(r)).join(","),bSe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Yp=(e,t)=>Object.keys(t).reduce((r,n)=>oD(oD({},r),{},{[n]:e(n,t[n])}),{});function aD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aD(Object(r),!0).forEach(function(n){xSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xSe(e,t,r){return(t=wSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wSe(e){var t=_Se(e,"string");return typeof t=="symbol"?t:t+""}function _Se(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kv=(e,t,r)=>e+(t-e)*r,gN=e=>{var{from:t,to:r}=e;return t!==r},vB=(e,t,r)=>{var n=Yp((s,i)=>{if(gN(i)){var[o,a]=e(i.from,i.to,i.velocity);return Yr(Yr({},i),{},{from:o,velocity:a})}return i},t);return r<1?Yp((s,i)=>gN(i)?Yr(Yr({},i),{},{velocity:Kv(i.velocity,n[s].velocity,r),from:Kv(i.from,n[s].from,r)}):i,t):vB(e,n,r-1)};function jSe(e,t,r,n,s,i){var o,a=n.reduce((f,p)=>Yr(Yr({},f),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>Yp((f,p)=>p.from,a),c=()=>!Object.values(a).filter(gN).length,u=null,h=f=>{o||(o=f);var p=f-o,y=p/r.dt;a=vB(r,a,y),s(Yr(Yr(Yr({},e),t),l())),o=f,c()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{u()})}function kSe(e,t,r,n,s,i,o){var a=null,l=s.reduce((h,f)=>Yr(Yr({},h),{},{[f]:[e[f],t[f]]}),{}),c,u=h=>{c||(c=h);var f=(h-c)/n,p=Yp((m,b)=>Kv(...b,r(f)),l);if(i(Yr(Yr(Yr({},e),t),p)),f<1)a=o.setTimeout(u);else{var y=Yp((m,b)=>Kv(...b,r(1)),l);i(Yr(Yr(Yr({},e),t),y))}};return()=>(a=o.setTimeout(u),()=>{a()})}const bB=(e,t,r,n,s,i)=>{var o=bSe(e,t);return r.isStepper===!0?jSe(e,t,r,o,s,i):kSe(e,t,r,n,o,s,i)};function NSe(e){var t,r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){s=e.setTimeout(i.bind(null,c),l);return}i(l),s=e.setTimeout(i.bind(null,c));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class SSe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function ESe(){return NSe(new SSe)}var CSe=v.createContext(ESe);function xB(e,t){var r=v.useContext(CSe);return v.useMemo(()=>t??r(e),[e,t,r])}var TSe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function yN(){return yN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yN.apply(null,arguments)}function ASe(e,t){if(e==null)return{};var r,n,s=OSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function OSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lD(Object(r),!0).forEach(function(n){yc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yc(e,t,r){return(t=PSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PSe(e){var t=RSe(e,"string");return typeof t=="symbol"?t:t+""}function RSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class kC extends v.PureComponent{constructor(t,r){super(t,r),yc(this,"mounted",!1),yc(this,"manager",void 0),yc(this,"stopJSAnimation",null),yc(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:a,duration:l,animationManager:c}=this.props;if(this.manager=c,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0){this.state={style:{}},typeof a=="function"&&(this.state={style:o});return}if(i){if(typeof a=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:a}=this.props,{style:l}=this.state;if(n){if(!r){var c={style:s?{[s]:o}:o};this.state&&l&&(s&&l[s]!==o||!s&&l!==o)&&this.setState(c);return}if(!(dSe(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||i?a:t.to;if(this.state&&l){var f={style:s?{[s]:h}:h};(s&&l[s]!==h||!s&&l!==h)&&this.setState(f)}this.runAnimation(Ra(Ra({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:a,onAnimationStart:l}=t,c=bB(r,n,yB(i),s,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=c()};this.manager.start([l,o,u,s,a])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:a,onAnimationEnd:l,children:c}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof c=="function"||o==="spring"){this.runJSAnimation(t);return}var u=s?{[s]:i}:i,h=vSe(Object.keys(u),n,o);this.manager.start([a,r,Ra(Ra({},u),{},{transition:h}),n,l])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:a,from:l,to:c,canBegin:u,onAnimationEnd:h,shouldReAnimate:f,onAnimationReStart:p,animationManager:y}=t,m=ASe(t,TSe),b=v.Children.count(r),x=this.state.style;if(typeof r=="function")return r(x);if(!a||b===0||s<=0)return r;var w=_=>{var{style:j={},className:k}=_.props,N=v.cloneElement(_,Ra(Ra({},m),{},{style:Ra(Ra({},j),x),className:k}));return N};return b===1?w(v.Children.only(r)):v.createElement("div",null,v.Children.map(r,_=>w(_)))}}yc(kC,"displayName","Animate");yc(kC,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Zv(e){var t,r=xB((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return v.createElement(kC,yN({},e,{animationManager:r}))}function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}var cD=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,a=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,c;if(i>0&&s instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=s[h]>i?i:s[h];c="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(e+a*u[0],",").concat(t)),c+="L ".concat(e+r-a*u[1],",").concat(t),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+o*u[1])),c+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(e+r-a*u[2],",").concat(t+n)),c+="L ".concat(e+a*u[3],",").concat(t+n),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-o*u[3])),c+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);c="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+a*p,",").concat(t,`
            L `).concat(e+r-a*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(t+o*p,`
            L `).concat(e+r,",").concat(t+n-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-a*p,",").concat(t+n,`
            L `).concat(e+a*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+n-o*p," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return c},ISe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wB=e=>{var t=Bs(e,ISe),r=v.useRef(null),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&s(x)}catch{}},[]);var{x:i,y:o,width:a,height:l,radius:c,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isAnimationActive:y,isUpdateAnimationActive:m}=t;if(i!==+i||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var b=at("recharts-rectangle",u);return m?v.createElement(Zv,{canBegin:n>0,from:{width:a,height:l,x:i,y:o},to:{width:a,height:l,x:i,y:o},duration:f,animationEasing:h,isActive:m},x=>{var{width:w,height:_,x:j,y:k}=x;return v.createElement(Zv,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,isActive:y,easing:h},v.createElement("path",Gv({},Ht(t,!0),{className:b,d:cD(j,k,w,_,c),ref:r})))}):v.createElement("path",Gv({},Ht(t,!0),{className:b,d:cD(i,o,a,l,c)}))};function _B(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=yr(t,r,n,s),a=yr(t,r,n,i);return{points:[o,a],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function vN(){return vN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vN.apply(null,arguments)}var DSe=(e,t)=>{var r=hn(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},hy=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:a,cornerIsExternal:l}=e,c=a*(o?1:-1)+n,u=Math.asin(a/c)/Wv,h=l?s:s+i*u,f=yr(t,r,c,h),p=yr(t,r,n,h),y=l?s-i*u:s,m=yr(t,r,c*Math.cos(u*Wv),y);return{center:f,circleTangency:p,lineTangency:m,theta:u}},jB=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,a=DSe(i,o),l=i+a,c=yr(t,r,s,i),u=yr(t,r,s,l),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(i>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var f=yr(t,r,n,i),p=yr(t,r,n,l);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(i<=l),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},LSe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=e,u=hn(c-l),{circleTangency:h,lineTangency:f,theta:p}=hy({cx:t,cy:r,radius:s,angle:l,sign:u,cornerRadius:i,cornerIsExternal:a}),{circleTangency:y,lineTangency:m,theta:b}=hy({cx:t,cy:r,radius:s,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:a}),x=a?Math.abs(l-c):Math.abs(l-c)-p-b;if(x<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):jB({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:c});var w="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(x>180),",").concat(+(u<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(m.x,",").concat(m.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:j,theta:k}=hy({cx:t,cy:r,radius:n,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:a}),{circleTangency:N,lineTangency:C,theta:E}=hy({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:a}),T=a?Math.abs(l-c):Math.abs(l-c)-k-E;if(T<0&&i===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(j.x,",").concat(j.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},MSe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},kB=e=>{var t=Bs(e,MSe),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:h}=t;if(i<s||c===u)return null;var f=at("recharts-sector",h),p=i-s,y=Os(o,p,0,!0),m;return y>0&&Math.abs(c-u)<360?m=LSe({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(y,p/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):m=jB({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:c,endAngle:u}),v.createElement("path",vN({},Ht(t,!0),{className:f,d:m}))};function zSe(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:a,cy:l,innerRadius:c,outerRadius:u,angle:h}=t,f=yr(a,l,c,h),p=yr(a,l,u,h);n=f.x,s=f.y,i=p.x,o=p.y}else return _B(t);return[{x:n,y:s},{x:i,y:o}]}var NB={},SB={},EB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cC;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(EB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EB;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(SB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uC,r=SB;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const a=Math.max(Math.ceil((i-s)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=s,s+=o;return l}e.range=n})(NB);var FSe=NB.range;const CB=ki(FSe);function cl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $Se(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function NC(e){let t,r,n;e.length!==2?(t=cl,r=(a,l)=>cl(e(a),l),n=(a,l)=>e(a)-l):(t=e===cl||e===$Se?e:USe,r=e,n=e);function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;r(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;r(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=s(a,l,c,u-1);return h>c&&n(a[h-1],l)>-n(a[h],l)?h-1:h}return{left:s,center:o,right:i}}function USe(){return 0}function TB(e){return e===null?NaN:+e}function*qSe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const BSe=NC(cl),Fm=BSe.right;NC(TB).center;class uD extends Map{constructor(t,r=HSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(dD(this,t))}has(t){return super.has(dD(this,t))}set(t,r){return super.set(VSe(this,t),r)}delete(t){return super.delete(WSe(this,t))}}function dD({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function VSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function WSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function HSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function KSe(e=cl){if(e===cl)return AB;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function AB(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const ZSe=Math.sqrt(50),GSe=Math.sqrt(10),YSe=Math.sqrt(2);function Yv(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=ZSe?10:i>=GSe?5:i>=YSe?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=r&&r<2?Yv(e,t,r*2):[a,l,c]}function bN(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?Yv(t,e,r):Yv(e,t,r);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(n)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function xN(e,t,r){return t=+t,e=+e,r=+r,Yv(e,t,r)[2]}function wN(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?xN(t,e,r):xN(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function hD(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function fD(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function OB(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?AB:KSe(s);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(t-c*h/l+f)),y=Math.min(n,Math.floor(t+(l-c)*h/l+f));OB(e,t,p,y,s)}const i=e[t];let o=r,a=n;for(Ef(e,r,t),s(e[n],i)>0&&Ef(e,r,n);o<a;){for(Ef(e,o,a),++o,--a;s(e[o],i)<0;)++o;for(;s(e[a],i)>0;)--a}s(e[r],i)===0?Ef(e,r,a):(++a,Ef(e,a,n)),a<=t&&(r=a+1),t<=a&&(n=a-1)}return e}function Ef(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function JSe(e,t,r){if(e=Float64Array.from(qSe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return fD(e);if(t>=1)return hD(e);var n,s=(n-1)*t,i=Math.floor(s),o=hD(OB(e,i).subarray(0,i+1)),a=fD(e.subarray(i+1));return o+(a-o)*(s-i)}}function XSe(e,t,r=TB){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),a=+r(e[i+1],i+1,e);return o+(a-o)*(s-i)}}function QSe(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Vs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ga(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _N=Symbol("implicit");function SC(){var e=new uD,t=[],r=[],n=_N;function s(i){let o=e.get(i);if(o===void 0){if(n!==_N)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new uD;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return SC(t,r).unknown(n)},Vs.apply(s,arguments),s}function EC(){var e=SC().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function h(){var f=t().length,p=s<n,y=p?s:n,m=p?n:s;i=(m-y)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),y+=(m-y-i*(f-l))*u,o=i*(1-l),a&&(y=Math.round(y),o=Math.round(o));var b=QSe(f).map(function(x){return y+i*x});return r(p?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,a=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,h()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},e.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return EC(t(),[n,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},Vs.apply(h(),arguments)}function PB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return PB(t())},e}function eEe(){return PB(EC.apply(null,arguments).paddingInner(1))}function CC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function RB(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function $m(){}var Jp=.7,Jv=1/Jp,Nd="\\s*([+-]?\\d+)\\s*",Xp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tEe=/^#([0-9a-f]{3,8})$/,rEe=new RegExp(`^rgb\\(${Nd},${Nd},${Nd}\\)$`),nEe=new RegExp(`^rgb\\(${Xi},${Xi},${Xi}\\)$`),sEe=new RegExp(`^rgba\\(${Nd},${Nd},${Nd},${Xp}\\)$`),iEe=new RegExp(`^rgba\\(${Xi},${Xi},${Xi},${Xp}\\)$`),oEe=new RegExp(`^hsl\\(${Xp},${Xi},${Xi}\\)$`),aEe=new RegExp(`^hsla\\(${Xp},${Xi},${Xi},${Xp}\\)$`),pD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};CC($m,Qp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mD,formatHex:mD,formatHex8:lEe,formatHsl:cEe,formatRgb:gD,toString:gD});function mD(){return this.rgb().formatHex()}function lEe(){return this.rgb().formatHex8()}function cEe(){return IB(this).formatHsl()}function gD(){return this.rgb().formatRgb()}function Qp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=tEe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?yD(t):r===3?new Vn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?fy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?fy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rEe.exec(e))?new Vn(t[1],t[2],t[3],1):(t=nEe.exec(e))?new Vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sEe.exec(e))?fy(t[1],t[2],t[3],t[4]):(t=iEe.exec(e))?fy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oEe.exec(e))?xD(t[1],t[2]/100,t[3]/100,1):(t=aEe.exec(e))?xD(t[1],t[2]/100,t[3]/100,t[4]):pD.hasOwnProperty(e)?yD(pD[e]):e==="transparent"?new Vn(NaN,NaN,NaN,0):null}function yD(e){return new Vn(e>>16&255,e>>8&255,e&255,1)}function fy(e,t,r,n){return n<=0&&(e=t=r=NaN),new Vn(e,t,r,n)}function uEe(e){return e instanceof $m||(e=Qp(e)),e?(e=e.rgb(),new Vn(e.r,e.g,e.b,e.opacity)):new Vn}function jN(e,t,r,n){return arguments.length===1?uEe(e):new Vn(e,t,r,n??1)}function Vn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}CC(Vn,jN,RB($m,{brighter(e){return e=e==null?Jv:Math.pow(Jv,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jp:Math.pow(Jp,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vn(Ic(this.r),Ic(this.g),Ic(this.b),Xv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vD,formatHex:vD,formatHex8:dEe,formatRgb:bD,toString:bD}));function vD(){return`#${vc(this.r)}${vc(this.g)}${vc(this.b)}`}function dEe(){return`#${vc(this.r)}${vc(this.g)}${vc(this.b)}${vc((isNaN(this.opacity)?1:this.opacity)*255)}`}function bD(){const e=Xv(this.opacity);return`${e===1?"rgb(":"rgba("}${Ic(this.r)}, ${Ic(this.g)}, ${Ic(this.b)}${e===1?")":`, ${e})`}`}function Xv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ic(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vc(e){return e=Ic(e),(e<16?"0":"")+e.toString(16)}function xD(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new gi(e,t,r,n)}function IB(e){if(e instanceof gi)return new gi(e.h,e.s,e.l,e.opacity);if(e instanceof $m||(e=Qp(e)),!e)return new gi;if(e instanceof gi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,a=i-s,l=(i+s)/2;return a?(t===i?o=(r-n)/a+(r<n)*6:r===i?o=(n-t)/a+2:o=(t-r)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new gi(o,a,l,e.opacity)}function hEe(e,t,r,n){return arguments.length===1?IB(e):new gi(e,t,r,n??1)}function gi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}CC(gi,hEe,RB($m,{brighter(e){return e=e==null?Jv:Math.pow(Jv,e),new gi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jp:Math.pow(Jp,e),new gi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Vn(T_(e>=240?e-240:e+120,s,n),T_(e,s,n),T_(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new gi(wD(this.h),py(this.s),py(this.l),Xv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Xv(this.opacity);return`${e===1?"hsl(":"hsla("}${wD(this.h)}, ${py(this.s)*100}%, ${py(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wD(e){return e=(e||0)%360,e<0?e+360:e}function py(e){return Math.max(0,Math.min(1,e||0))}function T_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const TC=e=>()=>e;function fEe(e,t){return function(r){return e+r*t}}function pEe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function mEe(e){return(e=+e)==1?DB:function(t,r){return r-t?pEe(t,r,e):TC(isNaN(t)?r:t)}}function DB(e,t){var r=t-e;return r?fEe(e,r):TC(isNaN(e)?t:e)}const _D=function e(t){var r=mEe(t);function n(s,i){var o=r((s=jN(s)).r,(i=jN(i)).r),a=r(s.g,i.g),l=r(s.b,i.b),c=DB(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return n.gamma=e,n}(1);function gEe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function yEe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vEe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Uh(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(a){for(o=0;o<n;++o)i[o]=s[o](a);return i}}function bEe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Qv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function xEe(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Uh(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var kN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,A_=new RegExp(kN.source,"g");function wEe(e){return function(){return e}}function _Ee(e){return function(t){return e(t)+""}}function jEe(e,t){var r=kN.lastIndex=A_.lastIndex=0,n,s,i,o=-1,a=[],l=[];for(e=e+"",t=t+"";(n=kN.exec(e))&&(s=A_.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Qv(n,s)})),r=A_.lastIndex;return r<t.length&&(i=t.slice(r),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?_Ee(l[0].x):wEe(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function Uh(e,t){var r=typeof t,n;return t==null||r==="boolean"?TC(t):(r==="number"?Qv:r==="string"?(n=Qp(t))?(t=n,_D):jEe:t instanceof Qp?_D:t instanceof Date?bEe:yEe(t)?gEe:Array.isArray(t)?vEe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xEe:Qv)(e,t)}function AC(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function kEe(e,t){t===void 0&&(t=e,e=Uh);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[a](o-a)}}function NEe(e){return function(){return e}}function eb(e){return+e}var jD=[0,1];function En(e){return e}function NN(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:NEe(isNaN(t)?NaN:.5)}function SEe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function EEe(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=NN(s,n),i=r(o,i)):(n=NN(n,s),i=r(i,o)),function(a){return i(n(a))}}function CEe(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=NN(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(a){var l=Fm(e,a,1,n)-1;return i[l](s[l](a))}}function Um(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yx(){var e=jD,t=jD,r=Uh,n,s,i,o=En,a,l,c;function u(){var f=Math.min(e.length,t.length);return o!==En&&(o=SEe(e[0],e[f-1])),a=f>2?CEe:EEe,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?i:(l||(l=a(e.map(n),t,r)))(n(o(f)))}return h.invert=function(f){return o(s((c||(c=a(t,e.map(n),Qv)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,eb),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=AC,u()},h.clamp=function(f){return arguments.length?(o=f?!0:En,u()):o!==En},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,p){return n=f,s=p,u()}}function OC(){return Yx()(En,En)}function TEe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tb(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function ah(e){return e=tb(Math.abs(e)),e?e[1]:NaN}function AEe(e,t){return function(r,n){for(var s=r.length,i=[],o=0,a=e[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),i.push(r.substring(s-=a,s+a)),!((l+=a+1)>n));)a=e[o=(o+1)%e.length];return i.reverse().join(t)}}function OEe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var PEe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function em(e){if(!(t=PEe.exec(e)))throw new Error("invalid format: "+e);var t;return new PC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}em.prototype=PC.prototype;function PC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}PC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function REe(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var LB;function IEe(e,t){var r=tb(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(LB=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+tb(e,Math.max(0,t+i-1))[0]}function kD(e,t){var r=tb(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const ND={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:TEe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kD(e*100,t),r:kD,s:IEe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function SD(e){return e}var ED=Array.prototype.map,CD=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function DEe(e){var t=e.grouping===void 0||e.thousands===void 0?SD:AEe(ED.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?SD:OEe(ED.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(h){h=em(h);var f=h.fill,p=h.align,y=h.sign,m=h.symbol,b=h.zero,x=h.width,w=h.comma,_=h.precision,j=h.trim,k=h.type;k==="n"?(w=!0,k="g"):ND[k]||(_===void 0&&(_=12),j=!0,k="g"),(b||f==="0"&&p==="=")&&(b=!0,f="0",p="=");var N=m==="$"?r:m==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",C=m==="$"?n:/[%p]/.test(k)?o:"",E=ND[k],T=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function P(O){var I=N,R=C,F,$,W;if(k==="c")R=E(O)+R,O="";else{O=+O;var q=O<0||1/O<0;if(O=isNaN(O)?l:E(Math.abs(O),_),j&&(O=REe(O)),q&&+O==0&&y!=="+"&&(q=!1),I=(q?y==="("?y:a:y==="-"||y==="("?"":y)+I,R=(k==="s"?CD[8+LB/3]:"")+R+(q&&y==="("?")":""),T){for(F=-1,$=O.length;++F<$;)if(W=O.charCodeAt(F),48>W||W>57){R=(W===46?s+O.slice(F+1):O.slice(F))+R,O=O.slice(0,F);break}}}w&&!b&&(O=t(O,1/0));var K=I.length+O.length+R.length,Z=K<x?new Array(x-K+1).join(f):"";switch(w&&b&&(O=t(Z+O,Z.length?x-R.length:1/0),Z=""),p){case"<":O=I+O+R+Z;break;case"=":O=I+Z+O+R;break;case"^":O=Z.slice(0,K=Z.length>>1)+I+O+R+Z.slice(K);break;default:O=Z+I+O+R;break}return i(O)}return P.toString=function(){return h+""},P}function u(h,f){var p=c((h=em(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(ah(f)/3)))*3,m=Math.pow(10,-y),b=CD[8+y/3];return function(x){return p(m*x)+b}}return{format:c,formatPrefix:u}}var my,RC,MB;LEe({thousands:",",grouping:[3],currency:["$",""]});function LEe(e){return my=DEe(e),RC=my.format,MB=my.formatPrefix,my}function MEe(e){return Math.max(0,-ah(Math.abs(e)))}function zEe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ah(t)/3)))*3-ah(Math.abs(e)))}function FEe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ah(t)-ah(e))+1}function zB(e,t,r,n){var s=wN(e,t,r),i;switch(n=em(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=zEe(s,o))&&(n.precision=i),MB(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=FEe(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=MEe(s))&&(n.precision=i-(n.type==="%")*2);break}}return RC(n)}function Pl(e){var t=e.domain;return e.ticks=function(r){var n=t();return bN(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return zB(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],a=n[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=xN(o,a,r),c===l)return n[s]=o,n[i]=a,t(n);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function FB(){var e=OC();return e.copy=function(){return Um(e,FB())},Vs.apply(e,arguments),Pl(e)}function $B(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,eb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return $B(e).unknown(t)},e=arguments.length?Array.from(e,eb):[0,1],Pl(r)}function UB(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function TD(e){return Math.log(e)}function AD(e){return Math.exp(e)}function $Ee(e){return-Math.log(-e)}function UEe(e){return-Math.exp(-e)}function qEe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function BEe(e){return e===10?qEe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function VEe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function OD(e){return(t,r)=>-e(-t,r)}function IC(e){const t=e(TD,AD),r=t.domain;let n=10,s,i;function o(){return s=VEe(n),i=BEe(n),r()[0]<0?(s=OD(s),i=OD(i),e($Ee,UEe)):e(TD,AD),t}return t.base=function(a){return arguments.length?(n=+a,o()):n},t.domain=function(a){return arguments.length?(r(a),o()):r()},t.ticks=a=>{const l=r();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let f=s(c),p=s(u),y,m;const b=a==null?10:+a;let x=[];if(!(n%1)&&p-f<b){if(f=Math.floor(f),p=Math.ceil(p),c>0){for(;f<=p;++f)for(y=1;y<n;++y)if(m=f<0?y/i(-f):y*i(f),!(m<c)){if(m>u)break;x.push(m)}}else for(;f<=p;++f)for(y=n-1;y>=1;--y)if(m=f>0?y/i(-f):y*i(f),!(m<c)){if(m>u)break;x.push(m)}x.length*2<b&&(x=bN(c,u,b))}else x=bN(f,p,Math.min(p-f,b)).map(i);return h?x.reverse():x},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=em(l)).precision==null&&(l.trim=!0),l=RC(l)),a===1/0)return l;const c=Math.max(1,n*a/t.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*n<n-.5&&(h*=n),h<=c?l(u):""}},t.nice=()=>r(UB(r(),{floor:a=>i(Math.floor(s(a))),ceil:a=>i(Math.ceil(s(a)))})),t}function qB(){const e=IC(Yx()).domain([1,10]);return e.copy=()=>Um(e,qB()).base(e.base()),Vs.apply(e,arguments),e}function PD(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function RD(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function DC(e){var t=1,r=e(PD(t),RD(t));return r.constant=function(n){return arguments.length?e(PD(t=+n),RD(t)):t},Pl(r)}function BB(){var e=DC(Yx());return e.copy=function(){return Um(e,BB()).constant(e.constant())},Vs.apply(e,arguments)}function ID(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function WEe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function HEe(e){return e<0?-e*e:e*e}function LC(e){var t=e(En,En),r=1;function n(){return r===1?e(En,En):r===.5?e(WEe,HEe):e(ID(r),ID(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Pl(t)}function MC(){var e=LC(Yx());return e.copy=function(){return Um(e,MC()).exponent(e.exponent())},Vs.apply(e,arguments),e}function KEe(){return MC.apply(null,arguments).exponent(.5)}function DD(e){return Math.sign(e)*e*e}function ZEe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function VB(){var e=OC(),t=[0,1],r=!1,n;function s(i){var o=ZEe(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(DD(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,eb)).map(DD)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return VB(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Vs.apply(s,arguments),Pl(s)}function WB(){var e=[],t=[],r=[],n;function s(){var o=0,a=Math.max(1,t.length);for(r=new Array(a-1);++o<a;)r[o-1]=XSe(e,o/a);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Fm(r,o)]}return i.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?r[a-1]:e[0],a<r.length?r[a]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(cl),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return WB().domain(e).range(t).unknown(n)},Vs.apply(i,arguments)}function HB(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(l){return l!=null&&l<=l?s[Fm(n,l,0,r)]:i}function a(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(r=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return HB().domain([e,t]).range(s).unknown(i)},Vs.apply(Pl(o),arguments)}function KB(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Fm(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return KB().domain(e).range(t).unknown(r)},Vs.apply(s,arguments)}const O_=new Date,P_=new Date;function Mr(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),a=s.ceil(i);return i-o<a-i?o:a},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,a)=>{const l=[];if(i=s.ceil(i),a=a==null?1:Math.floor(a),!(i<o)||!(a>0))return l;let c;do l.push(c=new Date(+i)),t(i,a),e(i);while(c<i&&i<o);return l},s.filter=i=>Mr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!i(o););else for(;--a>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(O_.setTime(+i),P_.setTime(+o),e(O_),e(P_),Math.floor(r(O_,P_))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const rb=Mr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);rb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Mr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):rb);rb.range;const qo=1e3,Es=qo*60,Bo=Es*60,sa=Bo*24,zC=sa*7,LD=sa*30,R_=sa*365,bc=Mr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*qo)},(e,t)=>(t-e)/qo,e=>e.getUTCSeconds());bc.range;const FC=Mr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qo)},(e,t)=>{e.setTime(+e+t*Es)},(e,t)=>(t-e)/Es,e=>e.getMinutes());FC.range;const $C=Mr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Es)},(e,t)=>(t-e)/Es,e=>e.getUTCMinutes());$C.range;const UC=Mr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qo-e.getMinutes()*Es)},(e,t)=>{e.setTime(+e+t*Bo)},(e,t)=>(t-e)/Bo,e=>e.getHours());UC.range;const qC=Mr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bo)},(e,t)=>(t-e)/Bo,e=>e.getUTCHours());qC.range;const qm=Mr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Es)/sa,e=>e.getDate()-1);qm.range;const Jx=Mr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sa,e=>e.getUTCDate()-1);Jx.range;const ZB=Mr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sa,e=>Math.floor(e/sa));ZB.range;function cu(e){return Mr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Es)/zC)}const Xx=cu(0),nb=cu(1),GEe=cu(2),YEe=cu(3),lh=cu(4),JEe=cu(5),XEe=cu(6);Xx.range;nb.range;GEe.range;YEe.range;lh.range;JEe.range;XEe.range;function uu(e){return Mr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/zC)}const Qx=uu(0),sb=uu(1),QEe=uu(2),e2e=uu(3),ch=uu(4),t2e=uu(5),r2e=uu(6);Qx.range;sb.range;QEe.range;e2e.range;ch.range;t2e.range;r2e.range;const BC=Mr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());BC.range;const VC=Mr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());VC.range;const ia=Mr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ia.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Mr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ia.range;const oa=Mr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());oa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Mr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});oa.range;function GB(e,t,r,n,s,i){const o=[[bc,1,qo],[bc,5,5*qo],[bc,15,15*qo],[bc,30,30*qo],[i,1,Es],[i,5,5*Es],[i,15,15*Es],[i,30,30*Es],[s,1,Bo],[s,3,3*Bo],[s,6,6*Bo],[s,12,12*Bo],[n,1,sa],[n,2,2*sa],[r,1,zC],[t,1,LD],[t,3,3*LD],[e,1,R_]];function a(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const p=h&&typeof h.range=="function"?h:l(c,u,h),y=p?p.range(c,+u+1):[];return f?y.reverse():y}function l(c,u,h){const f=Math.abs(u-c)/h,p=NC(([,,b])=>b).right(o,f);if(p===o.length)return e.every(wN(c/R_,u/R_,h));if(p===0)return rb.every(Math.max(wN(c,u,h),1));const[y,m]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return y.every(m)}return[a,l]}const[n2e,s2e]=GB(oa,VC,Qx,ZB,qC,$C),[i2e,o2e]=GB(ia,BC,Xx,qm,UC,FC);function I_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function D_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Cf(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function a2e(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Tf(s),u=Af(s),h=Tf(i),f=Af(i),p=Tf(o),y=Af(o),m=Tf(a),b=Af(a),x=Tf(l),w=Af(l),_={a:q,A:K,b:Z,B:z,c:null,d:qD,e:qD,f:A2e,g:$2e,G:q2e,H:E2e,I:C2e,j:T2e,L:YB,m:O2e,M:P2e,p:J,q:te,Q:WD,s:HD,S:R2e,u:I2e,U:D2e,V:L2e,w:M2e,W:z2e,x:null,X:null,y:F2e,Y:U2e,Z:B2e,"%":VD},j={a:be,A:H,b:G,B:fe,c:null,d:BD,e:BD,f:K2e,g:nCe,G:iCe,H:V2e,I:W2e,j:H2e,L:XB,m:Z2e,M:G2e,p:pe,q:ke,Q:WD,s:HD,S:Y2e,u:J2e,U:X2e,V:Q2e,w:eCe,W:tCe,x:null,X:null,y:rCe,Y:sCe,Z:oCe,"%":VD},k={a:P,A:O,b:I,B:R,c:F,d:$D,e:$D,f:j2e,g:FD,G:zD,H:UD,I:UD,j:b2e,L:_2e,m:v2e,M:x2e,p:T,q:y2e,Q:N2e,s:S2e,S:w2e,u:h2e,U:f2e,V:p2e,w:d2e,W:m2e,x:$,X:W,y:FD,Y:zD,Z:g2e,"%":k2e};_.x=N(r,_),_.X=N(n,_),_.c=N(t,_),j.x=N(r,j),j.X=N(n,j),j.c=N(t,j);function N(V,X){return function(le){var U=[],Se=-1,Re=0,Qe=V.length,Xe,pt,Jt;for(le instanceof Date||(le=new Date(+le));++Se<Qe;)V.charCodeAt(Se)===37&&(U.push(V.slice(Re,Se)),(pt=MD[Xe=V.charAt(++Se)])!=null?Xe=V.charAt(++Se):pt=Xe==="e"?" ":"0",(Jt=X[Xe])&&(Xe=Jt(le,pt)),U.push(Xe),Re=Se+1);return U.push(V.slice(Re,Se)),U.join("")}}function C(V,X){return function(le){var U=Cf(1900,void 0,1),Se=E(U,V,le+="",0),Re,Qe;if(Se!=le.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(X&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(Re=D_(Cf(U.y,0,1)),Qe=Re.getUTCDay(),Re=Qe>4||Qe===0?sb.ceil(Re):sb(Re),Re=Jx.offset(Re,(U.V-1)*7),U.y=Re.getUTCFullYear(),U.m=Re.getUTCMonth(),U.d=Re.getUTCDate()+(U.w+6)%7):(Re=I_(Cf(U.y,0,1)),Qe=Re.getDay(),Re=Qe>4||Qe===0?nb.ceil(Re):nb(Re),Re=qm.offset(Re,(U.V-1)*7),U.y=Re.getFullYear(),U.m=Re.getMonth(),U.d=Re.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),Qe="Z"in U?D_(Cf(U.y,0,1)).getUTCDay():I_(Cf(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(Qe+5)%7:U.w+U.U*7-(Qe+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,D_(U)):I_(U)}}function E(V,X,le,U){for(var Se=0,Re=X.length,Qe=le.length,Xe,pt;Se<Re;){if(U>=Qe)return-1;if(Xe=X.charCodeAt(Se++),Xe===37){if(Xe=X.charAt(Se++),pt=k[Xe in MD?X.charAt(Se++):Xe],!pt||(U=pt(V,le,U))<0)return-1}else if(Xe!=le.charCodeAt(U++))return-1}return U}function T(V,X,le){var U=c.exec(X.slice(le));return U?(V.p=u.get(U[0].toLowerCase()),le+U[0].length):-1}function P(V,X,le){var U=p.exec(X.slice(le));return U?(V.w=y.get(U[0].toLowerCase()),le+U[0].length):-1}function O(V,X,le){var U=h.exec(X.slice(le));return U?(V.w=f.get(U[0].toLowerCase()),le+U[0].length):-1}function I(V,X,le){var U=x.exec(X.slice(le));return U?(V.m=w.get(U[0].toLowerCase()),le+U[0].length):-1}function R(V,X,le){var U=m.exec(X.slice(le));return U?(V.m=b.get(U[0].toLowerCase()),le+U[0].length):-1}function F(V,X,le){return E(V,t,X,le)}function $(V,X,le){return E(V,r,X,le)}function W(V,X,le){return E(V,n,X,le)}function q(V){return o[V.getDay()]}function K(V){return i[V.getDay()]}function Z(V){return l[V.getMonth()]}function z(V){return a[V.getMonth()]}function J(V){return s[+(V.getHours()>=12)]}function te(V){return 1+~~(V.getMonth()/3)}function be(V){return o[V.getUTCDay()]}function H(V){return i[V.getUTCDay()]}function G(V){return l[V.getUTCMonth()]}function fe(V){return a[V.getUTCMonth()]}function pe(V){return s[+(V.getUTCHours()>=12)]}function ke(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var X=N(V+="",_);return X.toString=function(){return V},X},parse:function(V){var X=C(V+="",!1);return X.toString=function(){return V},X},utcFormat:function(V){var X=N(V+="",j);return X.toString=function(){return V},X},utcParse:function(V){var X=C(V+="",!0);return X.toString=function(){return V},X}}}var MD={"-":"",_:" ",0:"0"},Hr=/^\s*\d+/,l2e=/^%/,c2e=/[\\^$*+?|[\]().{}]/g;function ut(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function u2e(e){return e.replace(c2e,"\\$&")}function Tf(e){return new RegExp("^(?:"+e.map(u2e).join("|")+")","i")}function Af(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function d2e(e,t,r){var n=Hr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function h2e(e,t,r){var n=Hr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function f2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function p2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function m2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function zD(e,t,r){var n=Hr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function FD(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function g2e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function y2e(e,t,r){var n=Hr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function v2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function $D(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function b2e(e,t,r){var n=Hr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function UD(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function x2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function w2e(e,t,r){var n=Hr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function _2e(e,t,r){var n=Hr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function j2e(e,t,r){var n=Hr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function k2e(e,t,r){var n=l2e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function N2e(e,t,r){var n=Hr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function S2e(e,t,r){var n=Hr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function qD(e,t){return ut(e.getDate(),t,2)}function E2e(e,t){return ut(e.getHours(),t,2)}function C2e(e,t){return ut(e.getHours()%12||12,t,2)}function T2e(e,t){return ut(1+qm.count(ia(e),e),t,3)}function YB(e,t){return ut(e.getMilliseconds(),t,3)}function A2e(e,t){return YB(e,t)+"000"}function O2e(e,t){return ut(e.getMonth()+1,t,2)}function P2e(e,t){return ut(e.getMinutes(),t,2)}function R2e(e,t){return ut(e.getSeconds(),t,2)}function I2e(e){var t=e.getDay();return t===0?7:t}function D2e(e,t){return ut(Xx.count(ia(e)-1,e),t,2)}function JB(e){var t=e.getDay();return t>=4||t===0?lh(e):lh.ceil(e)}function L2e(e,t){return e=JB(e),ut(lh.count(ia(e),e)+(ia(e).getDay()===4),t,2)}function M2e(e){return e.getDay()}function z2e(e,t){return ut(nb.count(ia(e)-1,e),t,2)}function F2e(e,t){return ut(e.getFullYear()%100,t,2)}function $2e(e,t){return e=JB(e),ut(e.getFullYear()%100,t,2)}function U2e(e,t){return ut(e.getFullYear()%1e4,t,4)}function q2e(e,t){var r=e.getDay();return e=r>=4||r===0?lh(e):lh.ceil(e),ut(e.getFullYear()%1e4,t,4)}function B2e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ut(t/60|0,"0",2)+ut(t%60,"0",2)}function BD(e,t){return ut(e.getUTCDate(),t,2)}function V2e(e,t){return ut(e.getUTCHours(),t,2)}function W2e(e,t){return ut(e.getUTCHours()%12||12,t,2)}function H2e(e,t){return ut(1+Jx.count(oa(e),e),t,3)}function XB(e,t){return ut(e.getUTCMilliseconds(),t,3)}function K2e(e,t){return XB(e,t)+"000"}function Z2e(e,t){return ut(e.getUTCMonth()+1,t,2)}function G2e(e,t){return ut(e.getUTCMinutes(),t,2)}function Y2e(e,t){return ut(e.getUTCSeconds(),t,2)}function J2e(e){var t=e.getUTCDay();return t===0?7:t}function X2e(e,t){return ut(Qx.count(oa(e)-1,e),t,2)}function QB(e){var t=e.getUTCDay();return t>=4||t===0?ch(e):ch.ceil(e)}function Q2e(e,t){return e=QB(e),ut(ch.count(oa(e),e)+(oa(e).getUTCDay()===4),t,2)}function eCe(e){return e.getUTCDay()}function tCe(e,t){return ut(sb.count(oa(e)-1,e),t,2)}function rCe(e,t){return ut(e.getUTCFullYear()%100,t,2)}function nCe(e,t){return e=QB(e),ut(e.getUTCFullYear()%100,t,2)}function sCe(e,t){return ut(e.getUTCFullYear()%1e4,t,4)}function iCe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ch(e):ch.ceil(e),ut(e.getUTCFullYear()%1e4,t,4)}function oCe(){return"+0000"}function VD(){return"%"}function WD(e){return+e}function HD(e){return Math.floor(+e/1e3)}var $u,e7,t7;aCe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function aCe(e){return $u=a2e(e),e7=$u.format,$u.parse,t7=$u.utcFormat,$u.utcParse,$u}function lCe(e){return new Date(e)}function cCe(e){return e instanceof Date?+e:+new Date(+e)}function WC(e,t,r,n,s,i,o,a,l,c){var u=OC(),h=u.invert,f=u.domain,p=c(".%L"),y=c(":%S"),m=c("%I:%M"),b=c("%I %p"),x=c("%a %d"),w=c("%b %d"),_=c("%B"),j=c("%Y");function k(N){return(l(N)<N?p:a(N)<N?y:o(N)<N?m:i(N)<N?b:n(N)<N?s(N)<N?x:w:r(N)<N?_:j)(N)}return u.invert=function(N){return new Date(h(N))},u.domain=function(N){return arguments.length?f(Array.from(N,cCe)):f().map(lCe)},u.ticks=function(N){var C=f();return e(C[0],C[C.length-1],N??10)},u.tickFormat=function(N,C){return C==null?k:c(C)},u.nice=function(N){var C=f();return(!N||typeof N.range!="function")&&(N=t(C[0],C[C.length-1],N??10)),N?f(UB(C,N)):u},u.copy=function(){return Um(u,WC(e,t,r,n,s,i,o,a,l,c))},u}function uCe(){return Vs.apply(WC(i2e,o2e,ia,BC,Xx,qm,UC,FC,bc,e7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dCe(){return Vs.apply(WC(n2e,s2e,oa,VC,Qx,Jx,qC,$C,bc,t7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ew(){var e=0,t=1,r,n,s,i,o=En,a=!1,l;function c(h){return h==null||isNaN(h=+h)?l:o(s===0?.5:(h=(i(h)-r)*s,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(o=h,c):o};function u(h){return function(f){var p,y;return arguments.length?([p,y]=f,o=h(p,y),c):[o(0),o(1)]}}return c.range=u(Uh),c.rangeRound=u(AC),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return i=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),c}}function Rl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function r7(){var e=Pl(ew()(En));return e.copy=function(){return Rl(e,r7())},ga.apply(e,arguments)}function n7(){var e=IC(ew()).domain([1,10]);return e.copy=function(){return Rl(e,n7()).base(e.base())},ga.apply(e,arguments)}function s7(){var e=DC(ew());return e.copy=function(){return Rl(e,s7()).constant(e.constant())},ga.apply(e,arguments)}function HC(){var e=LC(ew());return e.copy=function(){return Rl(e,HC()).exponent(e.exponent())},ga.apply(e,arguments)}function hCe(){return HC.apply(null,arguments).exponent(.5)}function i7(){var e=[],t=En;function r(n){if(n!=null&&!isNaN(n=+n))return t((Fm(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(cl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>JSe(e,i/n))},r.copy=function(){return i7(t).domain(e)},ga.apply(r,arguments)}function tw(){var e=0,t=.5,r=1,n=1,s,i,o,a,l,c=En,u,h=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-i)*(n*m<n*i?a:l),c(h?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,s=u(e=+e),i=u(t=+t),o=u(r=+r),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),n=i<s?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(h=!!m,p):h},p.interpolator=function(m){return arguments.length?(c=m,p):c};function y(m){return function(b){var x,w,_;return arguments.length?([x,w,_]=b,c=kEe(m,[x,w,_]),p):[c(0),c(.5),c(1)]}}return p.range=y(Uh),p.rangeRound=y(AC),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return u=m,s=m(e),i=m(t),o=m(r),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),n=i<s?-1:1,p}}function o7(){var e=Pl(tw()(En));return e.copy=function(){return Rl(e,o7())},ga.apply(e,arguments)}function a7(){var e=IC(tw()).domain([.1,1,10]);return e.copy=function(){return Rl(e,a7()).base(e.base())},ga.apply(e,arguments)}function l7(){var e=DC(tw());return e.copy=function(){return Rl(e,l7()).constant(e.constant())},ga.apply(e,arguments)}function KC(){var e=LC(tw());return e.copy=function(){return Rl(e,KC()).exponent(e.exponent())},ga.apply(e,arguments)}function fCe(){return KC.apply(null,arguments).exponent(.5)}const Gf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:EC,scaleDiverging:o7,scaleDivergingLog:a7,scaleDivergingPow:KC,scaleDivergingSqrt:fCe,scaleDivergingSymlog:l7,scaleIdentity:$B,scaleImplicit:_N,scaleLinear:FB,scaleLog:qB,scaleOrdinal:SC,scalePoint:eEe,scalePow:MC,scaleQuantile:WB,scaleQuantize:HB,scaleRadial:VB,scaleSequential:r7,scaleSequentialLog:n7,scaleSequentialPow:HC,scaleSequentialQuantile:i7,scaleSequentialSqrt:hCe,scaleSequentialSymlog:s7,scaleSqrt:KEe,scaleSymlog:BB,scaleThreshold:KB,scaleTime:uCe,scaleUtc:dCe,tickFormat:zB},Symbol.toStringTag,{value:"Module"}));var Il=e=>e.chartData,ZC=Y([Il],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),GC=(e,t,r,n)=>n?ZC(e):Il(e);function uh(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(wi(t)&&wi(r))return!0}return!1}function KD(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function pCe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(wi(r))s=r;else if(typeof r=="function")return;if(wi(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(uh(o))return o}}function mCe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(uh(n))return KD(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,a;if(s==="auto")t!=null&&(o=Math.min(...t));else if(Ae(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&BI.test(s)){var l=BI.exec(s);if(l==null||t==null)o=void 0;else{var c=+l[1];o=t[0]-c}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(a=Math.max(...t));else if(Ae(i))a=i;else if(typeof i=="function")try{t!=null&&(a=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&VI.test(i)){var u=VI.exec(i);if(u==null||t==null)a=void 0;else{var h=+u[1];a=t[1]+h}}else a=t==null?void 0:t[1];var f=[o,a];if(uh(f))return t==null?f:KD(f,t,r)}}}var qh=1e9,gCe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},JC,zt=!0,Ms="[DecimalError] ",Dc=Ms+"Invalid argument: ",YC=Ms+"Exponent out of range: ",Bh=Math.floor,cc=Math.pow,yCe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,rs,Ur=1e7,Pt=7,c7=9007199254740991,ib=Bh(c7/Pt),Ee={};Ee.absoluteValue=Ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ee.comparedTo=Ee.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Ee.decimalPlaces=Ee.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Pt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ee.dividedBy=Ee.div=function(e){return Ko(this,new this.constructor(e))};Ee.dividedToIntegerBy=Ee.idiv=function(e){var t=this,r=t.constructor;return xt(Ko(t,new r(e),0,1),r.precision)};Ee.equals=Ee.eq=function(e){return!this.cmp(e)};Ee.exponent=function(){return br(this)};Ee.greaterThan=Ee.gt=function(e){return this.cmp(e)>0};Ee.greaterThanOrEqualTo=Ee.gte=function(e){return this.cmp(e)>=0};Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2};Ee.isNegative=Ee.isneg=function(){return this.s<0};Ee.isPositive=Ee.ispos=function(){return this.s>0};Ee.isZero=function(){return this.s===0};Ee.lessThan=Ee.lt=function(e){return this.cmp(e)<0};Ee.lessThanOrEqualTo=Ee.lte=function(e){return this.cmp(e)<1};Ee.logarithm=Ee.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(rs))throw Error(Ms+"NaN");if(r.s<1)throw Error(Ms+(r.s?"NaN":"-Infinity"));return r.eq(rs)?new n(0):(zt=!1,t=Ko(tm(r,i),tm(e,i),i),zt=!0,xt(t,s))};Ee.minus=Ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?h7(t,e):u7(t,(e.s=-e.s,e))};Ee.modulo=Ee.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Ms+"NaN");return r.s?(zt=!1,t=Ko(r,e,0,1).times(e),zt=!0,r.minus(t)):xt(new n(r),s)};Ee.naturalExponential=Ee.exp=function(){return d7(this)};Ee.naturalLogarithm=Ee.ln=function(){return tm(this)};Ee.negated=Ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ee.plus=Ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?u7(t,e):h7(t,(e.s=-e.s,e))};Ee.precision=Ee.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Dc+e);if(t=br(s)+1,n=s.d.length-1,r=n*Pt+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ee.squareRoot=Ee.sqrt=function(){var e,t,r,n,s,i,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Ms+"NaN")}for(e=br(a),zt=!1,s=Math.sqrt(+a),s==0||s==1/0?(t=Hi(a.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Bh((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(s.toString()),r=l.precision,s=o=r+3;;)if(i=n,n=i.plus(Ko(a,i,o+2)).times(.5),Hi(i.d).slice(0,o)===(t=Hi(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(xt(i,r+1,0),i.times(i).eq(a)){n=i;break}}else if(t!="9999")break;o+=4}return zt=!0,xt(n,r)};Ee.times=Ee.mul=function(e){var t,r,n,s,i,o,a,l,c,u=this,h=u.constructor,f=u.d,p=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,l=f.length,c=p.length,l<c&&(i=f,f=p,p=i,o=l,l=c,c=o),i=[],o=l+c,n=o;n--;)i.push(0);for(n=c;--n>=0;){for(t=0,s=l+n;s>n;)a=i[s]+p[n]*f[s-n-1]+t,i[s--]=a%Ur|0,t=a/Ur|0;i[s]=(i[s]+t)%Ur|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,zt?xt(e,h.precision):e};Ee.toDecimalPlaces=Ee.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(io(e,0,qh),t===void 0?t=n.rounding:io(t,0,8),xt(r,e+br(r)+1,t))};Ee.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Zc(n,!0):(io(e,0,qh),t===void 0?t=s.rounding:io(t,0,8),n=xt(new s(n),e+1,t),r=Zc(n,!0,e+1)),r};Ee.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Zc(s):(io(e,0,qh),t===void 0?t=i.rounding:io(t,0,8),n=xt(new i(s),e+br(s)+1,t),r=Zc(n.abs(),!1,e+br(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ee.toInteger=Ee.toint=function(){var e=this,t=e.constructor;return xt(new t(e),br(e)+1,t.rounding)};Ee.toNumber=function(){return+this};Ee.toPower=Ee.pow=function(e){var t,r,n,s,i,o,a=this,l=a.constructor,c=12,u=+(e=new l(e));if(!e.s)return new l(rs);if(a=new l(a),!a.s){if(e.s<1)throw Error(Ms+"Infinity");return a}if(a.eq(rs))return a;if(n=l.precision,e.eq(rs))return xt(a,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=a.s,o){if((r=u<0?-u:u)<=c7){for(s=new l(rs),t=Math.ceil(n/Pt+4),zt=!1;r%2&&(s=s.times(a),GD(s.d,t)),r=Bh(r/2),r!==0;)a=a.times(a),GD(a.d,t);return zt=!0,e.s<0?new l(rs).div(s):xt(s,n)}}else if(i<0)throw Error(Ms+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,a.s=1,zt=!1,s=e.times(tm(a,n+c)),zt=!0,s=d7(s),s.s=i,s};Ee.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=br(s),n=Zc(s,r<=i.toExpNeg||r>=i.toExpPos)):(io(e,1,qh),t===void 0?t=i.rounding:io(t,0,8),s=xt(new i(s),e,t),r=br(s),n=Zc(s,e<=r||r<=i.toExpNeg,e)),n};Ee.toSignificantDigits=Ee.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(io(e,1,qh),t===void 0?t=n.rounding:io(t,0,8)),xt(new n(r),e,t)};Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=br(e),r=e.constructor;return Zc(e,t<=r.toExpNeg||t>=r.toExpPos)};function u7(e,t){var r,n,s,i,o,a,l,c,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),zt?xt(t,h):t;if(l=e.d,c=t.d,o=e.e,s=t.e,l=l.slice(),i=o-s,i){for(i<0?(n=l,i=-i,a=c.length):(n=c,s=o,a=l.length),o=Math.ceil(h/Pt),a=o>a?o+1:a+1,i>a&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(a=l.length,i=c.length,a-i<0&&(i=a,n=c,c=l,l=n),r=0;i;)r=(l[--i]=l[i]+c[i]+r)/Ur|0,l[i]%=Ur;for(r&&(l.unshift(r),++s),a=l.length;l[--a]==0;)l.pop();return t.d=l,t.e=s,zt?xt(t,h):t}function io(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Dc+e)}function Hi(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Pt-n.length,r&&(i+=qa(r)),i+=n;o=e[t],n=o+"",r=Pt-n.length,r&&(i+=qa(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ko=function(){function e(n,s){var i,o=0,a=n.length;for(n=n.slice();a--;)i=n[a]*s+o,n[a]=i%Ur|0,o=i/Ur|0;return o&&n.unshift(o),n}function t(n,s,i,o){var a,l;if(i!=o)l=i>o?1:-1;else for(a=l=0;a<i;a++)if(n[a]!=s[a]){l=n[a]>s[a]?1:-1;break}return l}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Ur+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var a,l,c,u,h,f,p,y,m,b,x,w,_,j,k,N,C,E,T=n.constructor,P=n.s==s.s?1:-1,O=n.d,I=s.d;if(!n.s)return new T(n);if(!s.s)throw Error(Ms+"Division by zero");for(l=n.e-s.e,C=I.length,k=O.length,p=new T(P),y=p.d=[],c=0;I[c]==(O[c]||0);)++c;if(I[c]>(O[c]||0)&&--l,i==null?w=i=T.precision:o?w=i+(br(n)-br(s))+1:w=i,w<0)return new T(0);if(w=w/Pt+2|0,c=0,C==1)for(u=0,I=I[0],w++;(c<k||u)&&w--;c++)_=u*Ur+(O[c]||0),y[c]=_/I|0,u=_%I|0;else{for(u=Ur/(I[0]+1)|0,u>1&&(I=e(I,u),O=e(O,u),C=I.length,k=O.length),j=C,m=O.slice(0,C),b=m.length;b<C;)m[b++]=0;E=I.slice(),E.unshift(0),N=I[0],I[1]>=Ur/2&&++N;do u=0,a=t(I,m,C,b),a<0?(x=m[0],C!=b&&(x=x*Ur+(m[1]||0)),u=x/N|0,u>1?(u>=Ur&&(u=Ur-1),h=e(I,u),f=h.length,b=m.length,a=t(h,m,f,b),a==1&&(u--,r(h,C<f?E:I,f))):(u==0&&(a=u=1),h=I.slice()),f=h.length,f<b&&h.unshift(0),r(m,h,b),a==-1&&(b=m.length,a=t(I,m,C,b),a<1&&(u++,r(m,C<b?E:I,b))),b=m.length):a===0&&(u++,m=[0]),y[c++]=u,a&&m[0]?m[b++]=O[j]||0:(m=[O[j]],b=1);while((j++<k||m[0]!==void 0)&&w--)}return y[0]||y.shift(),p.e=l,xt(p,o?i+br(p)+1:i)}}();function d7(e,t){var r,n,s,i,o,a,l=0,c=0,u=e.constructor,h=u.precision;if(br(e)>16)throw Error(YC+br(e));if(!e.s)return new u(rs);for(zt=!1,a=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(n=Math.log(cc(2,c))/Math.LN10*2+5|0,a+=n,r=s=i=new u(rs),u.precision=a;;){if(s=xt(s.times(e),a),r=r.times(++l),o=i.plus(Ko(s,r,a)),Hi(o.d).slice(0,a)===Hi(i.d).slice(0,a)){for(;c--;)i=xt(i.times(i),a);return u.precision=h,t==null?(zt=!0,xt(i,h)):i}i=o}}function br(e){for(var t=e.e*Pt,r=e.d[0];r>=10;r/=10)t++;return t}function L_(e,t,r){if(t>e.LN10.sd())throw zt=!0,r&&(e.precision=r),Error(Ms+"LN10 precision limit exceeded");return xt(new e(e.LN10),t)}function qa(e){for(var t="";e--;)t+="0";return t}function tm(e,t){var r,n,s,i,o,a,l,c,u,h=1,f=10,p=e,y=p.d,m=p.constructor,b=m.precision;if(p.s<1)throw Error(Ms+(p.s?"NaN":"-Infinity"));if(p.eq(rs))return new m(0);if(t==null?(zt=!1,c=b):c=t,p.eq(10))return t==null&&(zt=!0),L_(m,c);if(c+=f,m.precision=c,r=Hi(y),n=r.charAt(0),i=br(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Hi(p.d),n=r.charAt(0),h++;i=br(p),n>1?(p=new m("0."+r),i++):p=new m(n+"."+r.slice(1))}else return l=L_(m,c+2,b).times(i+""),p=tm(new m(n+"."+r.slice(1)),c-f).plus(l),m.precision=b,t==null?(zt=!0,xt(p,b)):p;for(a=o=p=Ko(p.minus(rs),p.plus(rs),c),u=xt(p.times(p),c),s=3;;){if(o=xt(o.times(u),c),l=a.plus(Ko(o,new m(s),c)),Hi(l.d).slice(0,c)===Hi(a.d).slice(0,c))return a=a.times(2),i!==0&&(a=a.plus(L_(m,c+2,b).times(i+""))),a=Ko(a,new m(h),c),m.precision=b,t==null?(zt=!0,xt(a,b)):a;a=l,s+=2}}function ZD(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Bh(r/Pt),e.d=[],n=(r+1)%Pt,r<0&&(n+=Pt),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Pt;n<s;)e.d.push(+t.slice(n,n+=Pt));t=t.slice(n),n=Pt-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),zt&&(e.e>ib||e.e<-ib))throw Error(YC+r)}else e.s=0,e.e=0,e.d=[0];return e}function xt(e,t,r){var n,s,i,o,a,l,c,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Pt,s=t,c=h[u=0];else{if(u=Math.ceil((n+1)/Pt),i=h.length,u>=i)return e;for(c=i=h[u],o=1;i>=10;i/=10)o++;n%=Pt,s=n-Pt+o}if(r!==void 0&&(i=cc(10,o-s-1),a=c/i%10|0,l=t<0||h[u+1]!==void 0||c%i,l=r<4?(a||l)&&(r==0||r==(e.s<0?3:2)):a>5||a==5&&(r==4||l||r==6&&(n>0?s>0?c/cc(10,o-s):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return l?(i=br(e),h.length=1,t=t-i-1,h[0]=cc(10,(Pt-t%Pt)%Pt),e.e=Bh(-t/Pt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=u,i=1,u--):(h.length=u+1,i=cc(10,Pt-n),h[u]=s>0?(c/cc(10,o-s)%cc(10,s)|0)*i:0),l)for(;;)if(u==0){(h[0]+=i)==Ur&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=Ur)break;h[u--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(zt&&(e.e>ib||e.e<-ib))throw Error(YC+br(e));return e}function h7(e,t){var r,n,s,i,o,a,l,c,u,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),zt?xt(t,p):t;if(l=e.d,h=t.d,n=t.e,c=e.e,l=l.slice(),o=c-n,o){for(u=o<0,u?(r=l,o=-o,a=h.length):(r=h,n=c,a=l.length),s=Math.max(Math.ceil(p/Pt),a)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=l.length,a=h.length,u=s<a,u&&(a=s),s=0;s<a;s++)if(l[s]!=h[s]){u=l[s]<h[s];break}o=0}for(u&&(r=l,l=h,h=r,t.s=-t.s),a=l.length,s=h.length-a;s>0;--s)l[a++]=0;for(s=h.length;s>o;){if(l[--s]<h[s]){for(i=s;i&&l[--i]===0;)l[i]=Ur-1;--l[i],l[s]+=Ur}l[s]-=h[s]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,zt?xt(t,p):t):new f(0)}function Zc(e,t,r){var n,s=br(e),i=Hi(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+qa(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+qa(-s-1)+i,r&&(n=r-o)>0&&(i+=qa(n))):s>=o?(i+=qa(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+qa(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=qa(n))),e.s<0?"-"+i:i}function GD(e,t){if(e.length>t)return e.length=t,!0}function f7(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Dc+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return ZD(o,i.toString())}else if(typeof i!="string")throw Error(Dc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,yCe.test(i))ZD(o,i);else throw Error(Dc+i)}if(s.prototype=Ee,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=f7,s.config=s.set=vCe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function vCe(e){if(!e||typeof e!="object")throw Error(Ms+"Object expected");var t,r,n,s=["precision",1,qh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Bh(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Dc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Dc+r+": "+n);return this}var JC=f7(gCe);rs=new JC(1);const gt=JC;var bCe=e=>e,p7={},m7=e=>e===p7,YD=e=>function t(){return arguments.length===0||arguments.length===1&&m7(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},g7=(e,t)=>e===1?t:YD(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==p7).length;return i>=e?t(...n):g7(e-i,YD(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=n.map(u=>m7(u)?a.shift():u);return t(...c,...a)}))}),rw=e=>g7(e.length,e),SN=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},xCe=rw((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),wCe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return bCe;var n=t.reverse(),s=n[0],i=n.slice(1);return function(){return i.reduce((o,a)=>a(o),s(...arguments))}},EN=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),y7=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,a)=>{var l;return o===((l=t)===null||l===void 0?void 0:l[a])})||(t=s,r=e(...s)),r}};function v7(e){var t;return e===0?t=1:t=Math.floor(new gt(e).abs().log(10).toNumber())+1,t}function b7(e,t,r){for(var n=new gt(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}rw((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});rw((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});rw((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var x7=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},w7=(e,t,r)=>{if(e.lte(0))return new gt(0);var n=v7(e.toNumber()),s=new gt(10).pow(n),i=e.div(s),o=n!==1?.05:.1,a=new gt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=a.mul(s);return t?new gt(l.toNumber()):new gt(Math.ceil(l.toNumber()))},_Ce=(e,t,r)=>{var n=new gt(1),s=new gt(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new gt(10).pow(v7(e)-1),s=new gt(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new gt(Math.floor(e)))}else e===0?s=new gt(Math.floor((t-1)/2)):r||(s=new gt(Math.floor(e)));var o=Math.floor((t-1)/2),a=wCe(xCe(l=>s.add(new gt(l-o).mul(n)).toNumber()),SN);return a(0,t)},_7=function(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new gt(0),tickMin:new gt(0),tickMax:new gt(0)};var i=w7(new gt(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new gt(0):(o=new gt(e).add(t).div(2),o=o.sub(new gt(o).mod(i)));var a=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new gt(t).sub(o).div(i).toNumber()),c=a+l+1;return c>r?_7(e,t,r,n,s+1):(c<r&&(l=t>0?l+(r-c):l,a=t>0?a:a+(r-c)),{step:i,tickMin:o.sub(new gt(a).mul(i)),tickMax:o.add(new gt(l).mul(i))})};function jCe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,a]=x7([t,r]);if(o===-1/0||a===1/0){var l=a===1/0?[o,...SN(0,n-1).map(()=>1/0)]:[...SN(0,n-1).map(()=>-1/0),a];return t>r?EN(l):l}if(o===a)return _Ce(o,n,s);var{step:c,tickMin:u,tickMax:h}=_7(o,a,i,s,0),f=b7(u,h.add(new gt(.1).mul(c)),c);return t>r?EN(f):f}function kCe(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=x7([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var a=Math.max(t,2),l=w7(new gt(o).sub(i).div(a-1),s,0),c=[...b7(new gt(i),new gt(o),l),o];return s===!1&&(c=c.map(u=>Math.round(u))),r>n?EN(c):c}var NCe=y7(jCe),SCe=y7(kCe),ECe=e=>e.rootProps.barCategoryGap,Bm=e=>e.rootProps.stackOffset,XC=e=>e.options.chartName,QC=e=>e.rootProps.syncId,j7=e=>e.rootProps.syncMethod,eT=e=>e.options.eventEmitter,Fo={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Qn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},nw=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},CCe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Fo.angleAxisId,includeHidden:!1,name:void 0,reversed:Fo.reversed,scale:Fo.scale,tick:Fo.tick,tickCount:void 0,ticks:void 0,type:Fo.type,unit:void 0},TCe={allowDataOverflow:Qn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Qn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Qn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Qn.scale,tick:Qn.tick,tickCount:Qn.tickCount,ticks:void 0,type:Qn.type,unit:void 0},ACe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Fo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fo.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fo.scale,tick:Fo.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},OCe={allowDataOverflow:Qn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Qn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Qn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Qn.scale,tick:Qn.tick,tickCount:Qn.tickCount,ticks:void 0,type:"category",unit:void 0},tT=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?ACe:CCe,rT=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?OCe:TCe,sw=e=>e.polarOptions,nT=Y([pa,ma,Wr],Xq),k7=Y([sw,nT],(e,t)=>{if(e!=null)return Os(e.innerRadius,t,0)}),N7=Y([sw,nT],(e,t)=>{if(e!=null)return Os(e.outerRadius,t,t*.8)}),PCe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},S7=Y([sw],PCe);Y([tT,S7],nw);var E7=Y([nT,k7,N7],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Y([rT,E7],nw);var C7=Y([vt,sw,k7,N7,pa,ma],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=t;return{cx:Os(o,s,s/2),cy:Os(a,i,i/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),qt=(e,t)=>t,Vm=(e,t,r)=>r;function T7(e){return e==null?void 0:e.id}var zr=e=>{var t=vt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Vh=e=>e.tooltip.settings.axisId,Fr=e=>{var t=zr(e),r=Vh(e);return Wm(e,t,r)};function A7(e,t,r){var{chartData:n=[]}=t,s=r==null?void 0:r.dataKey,i=new Map;return e.forEach(o=>{var a,l=(a=o.data)!==null&&a!==void 0?a:n;if(!(l==null||l.length===0)){var c=T7(o);l.forEach((u,h)=>{var f=s==null?h:String(Lt(u,s,null)),p=Lt(u,o.dataKey,0),y;i.has(f)?y=i.get(f):y={},Object.assign(y,{[c]:p}),i.set(f,y)})}}),Array.from(i.values())}function sT(e){return e.stackId!=null&&e.dataKey!=null}function JD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ob(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JD(Object(r),!0).forEach(function(n){RCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RCe(e,t,r){return(t=ICe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ICe(e){var t=DCe(e,"string");return typeof t=="symbol"?t:t+""}function DCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CN=[0,"auto"],Yn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ya=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Yn},Jn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:CN,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Kx},Dl=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Jn},LCe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},iT=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??LCe},dr=(e,t,r)=>{switch(t){case"xAxis":return ya(e,r);case"yAxis":return Dl(e,r);case"zAxis":return iT(e,r);case"angleAxis":return tT(e,r);case"radiusAxis":return rT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},MCe=(e,t,r)=>{switch(t){case"xAxis":return ya(e,r);case"yAxis":return Dl(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Wm=(e,t,r)=>{switch(t){case"xAxis":return ya(e,r);case"yAxis":return Dl(e,r);case"angleAxis":return tT(e,r);case"radiusAxis":return rT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},O7=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function oT(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var P7=e=>e.graphicalItems.cartesianItems,zCe=Y([qt,Vm],oT),aT=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Hm=Y([P7,dr,zCe],aT),R7=Y([Hm],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(sT)),I7=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),D7=Y([Hm],I7),lT=e=>e.map(t=>t.data).filter(Boolean).flat(1),FCe=Y([Hm],lT),cT=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},uT=Y([FCe,GC],cT),dT=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Lt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Lt(s,n)}))):e.map(n=>({value:n})),iw=Y([uT,dr,Hm],dT);function L7(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function du(e){return e.filter(t=>so(t)||t instanceof Date).map(Number).filter(t=>Is(t)===!1)}function $Ce(e,t,r){return!r||typeof t!="number"||Is(t)?[]:r.length?du(r.flatMap(n=>{var s=Lt(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!wi(i)||!wi(o)))return[t-i,t+o]})):[]}var UCe=Y([R7,GC,Fr],A7),M7=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,a]=i,l=a.map(T7);return[o,{stackedData:tNe(e,l,r),graphicalItems:a}]}))},qCe=Y([UCe,R7,Bm],M7),z7=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=sNe(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},BCe=Y([qCe,Il,qt],z7),F7=(e,t,r,n,s)=>r.length>0?e.flatMap(i=>r.flatMap(o=>{var a,l,c=(a=n[o.id])===null||a===void 0?void 0:a.filter(h=>L7(s,h)),u=Lt(i,(l=t.dataKey)!==null&&l!==void 0?l:o.dataKey);return{value:u,errorDomain:$Ce(i,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:Lt(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),ow=e=>e.errorBars,$7=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>L7(r,n));Y([D7,ow,qt],$7);var VCe=Y([uT,dr,D7,ow,qt],F7);function WCe(e){var{value:t}=e;if(so(t)||t instanceof Date)return t}var XD=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=du(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},HCe=(e,t,r)=>{var n=e.map(WCe).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&IU(n))?CB(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},hT=e=>{var t;if(e==null||!("domain"in e))return CN;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=du(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:CN},ab=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(n.length!==0){var s=n.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},U7=e=>e.referenceElements.dots,Wh=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),KCe=Y([U7,qt,Vm],Wh),q7=e=>e.referenceElements.areas,ZCe=Y([q7,qt,Vm],Wh),B7=e=>e.referenceElements.lines,GCe=Y([B7,qt,Vm],Wh),V7=(e,t)=>{var r=du(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},YCe=Y(KCe,qt,V7),W7=(e,t)=>{var r=du(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},JCe=Y([ZCe,qt],W7),H7=(e,t)=>{var r=du(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},XCe=Y(GCe,qt,H7),QCe=Y(YCe,XCe,JCe,(e,t,r)=>ab(e,r,t)),K7=Y([dr],hT),fT=(e,t,r,n,s,i,o)=>{var a=pCe(t,e.allowDataOverflow);if(a!=null)return a;var l=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",c=l?ab(r,s,XD(n)):ab(s,XD(n));return mCe(t,c,e.allowDataOverflow)},eTe=Y([dr,K7,BCe,VCe,QCe,vt,qt],fT),tTe=[0,1],pT=(e,t,r,n,s,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:a,type:l}=e,c=Ol(t,i);return c&&a==null?CB(0,r.length):l==="category"?HCe(n,e,c):s==="expand"?tTe:o}},mT=Y([dr,vt,uT,iw,Bm,qt,eTe],pT),Z7=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var a="scale".concat(Mm(i));return a in Gf?a:"point"}}},Hh=Y([dr,vt,O7,XC,qt],Z7);function rTe(e){if(e!=null){if(e in Gf)return Gf[e]();var t="scale".concat(Mm(e));if(t in Gf)return Gf[t]()}}function gT(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=rTe(t);if(s!=null){var i=s.domain(r).range(n);return Jke(i),i}}}var yT=(e,t,r)=>{var n=hT(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&uh(e))return NCe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&uh(e))return SCe(e,t.tickCount,t.allowDecimals)}},vT=Y([mT,Wm,Hh],yT),bT=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&uh(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],a=r[r.length-1];return[Math.min(s,i),Math.max(o,a)]}return t},nTe=Y([dr,mT,vT,qt],bT),sTe=Y(iw,dr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(du(e.map(a=>a.value))).sort((a,l)=>a-l);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),G7=Y(sTe,vt,ECe,Wr,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!wi(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Os(r,e*i),a=e*i/2;return a-o-(a-o)/i*o}return 0}),iTe=(e,t)=>{var r=ya(e,t);return r==null||typeof r.padding!="string"?0:G7(e,"xAxis",t,r.padding)},oTe=(e,t)=>{var r=Dl(e,t);return r==null||typeof r.padding!="string"?0:G7(e,"yAxis",t,r.padding)},aTe=Y(ya,iTe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),lTe=Y(Dl,oTe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),cTe=Y([Wr,aTe,Gx,Zx,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),uTe=Y([Wr,vt,lTe,Gx,Zx,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Km=(e,t,r,n)=>{var s;switch(t){case"xAxis":return cTe(e,r,n);case"yAxis":return uTe(e,r,n);case"zAxis":return(s=iT(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return S7(e);case"radiusAxis":return E7(e,r);default:return}},Y7=Y([dr,Km],nw),Kh=Y([dr,Hh,nTe,Y7],gT);Y([Hm,ow,qt],$7);function J7(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var aw=(e,t)=>t,lw=(e,t,r)=>r,dTe=Y(gC,aw,lw,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(J7)),hTe=Y(yC,aw,lw,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(J7)),X7=(e,t)=>({width:e.width,height:t.height}),fTe=(e,t)=>{var r=typeof t.width=="number"?t.width:Kx;return{width:r,height:e.height}},pTe=Y(Wr,ya,X7),mTe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},gTe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},yTe=Y(ma,Wr,dTe,aw,lw,(e,t,r,n,s)=>{var i={},o;return r.forEach(a=>{var l=X7(t,a);o==null&&(o=mTe(t,n,e));var c=n==="top"&&!s||n==="bottom"&&s;i[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),i}),vTe=Y(pa,Wr,hTe,aw,lw,(e,t,r,n,s)=>{var i={},o;return r.forEach(a=>{var l=fTe(t,a);o==null&&(o=gTe(t,n,e));var c=n==="left"&&!s||n==="right"&&s;i[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),i}),bTe=(e,t)=>{var r=Wr(e),n=ya(e,t);if(n!=null){var s=yTe(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},xTe=(e,t)=>{var r=Wr(e),n=Dl(e,t);if(n!=null){var s=vTe(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},wTe=Y(Wr,Dl,(e,t)=>{var r=typeof t.width=="number"?t.width:Kx;return{width:r,height:e.height}}),Q7=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,a=Ol(e,n),l=t.map(c=>c.value);if(o&&a&&i==="category"&&s&&IU(l))return l}},xT=Y([vt,iw,dr,qt],Q7),e9=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=Ol(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(a=>a.value)}},wT=Y([vt,iw,Wm,qt],e9),QD=Y([vt,MCe,Hh,Kh,xT,wT,Km,vT,qt],(e,t,r,n,s,i,o,a,l)=>{if(t==null)return null;var c=Ol(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:s,isCategorical:c,niceTicks:a,range:o,realScaleType:r,scale:n}}),_Te=(e,t,r,n,s,i,o,a,l)=>{if(!(t==null||n==null)){var c=Ol(e,l),{type:u,ticks:h,tickCount:f}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,y=u==="category"&&n.bandwidth?n.bandwidth()/p:0;y=l==="angleAxis"&&i!=null&&i.length>=2?hn(i[0]-i[1])*2*y:y;var m=h||s;if(m){var b=m.map((x,w)=>{var _=o?o.indexOf(x):x;return{index:w,coordinate:n(_)+y,value:x,offset:y}});return b.filter(x=>!Is(x.coordinate))}return c&&a?a.map((x,w)=>({coordinate:n(x)+y,value:x,index:w,offset:y})):n.ticks?n.ticks(f).map(x=>({coordinate:n(x)+y,value:x,offset:y})):n.domain().map((x,w)=>({coordinate:n(x)+y,value:o?o[x]:x,index:w,offset:y}))}},t9=Y([vt,Wm,Hh,Kh,vT,Km,xT,wT,qt],_Te),jTe=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var a=Ol(e,o),{tickCount:l}=t,c=0;return c=o==="angleAxis"&&(n==null?void 0:n.length)>=2?hn(n[0]-n[1])*2*c:c,a&&i?i.map((u,h)=>({coordinate:r(u)+c,value:u,index:h,offset:c})):r.ticks?r.ticks(l).map(u=>({coordinate:r(u)+c,value:u,offset:c})):r.domain().map((u,h)=>({coordinate:r(u)+c,value:s?s[u]:u,index:h,offset:c}))}},r9=Y([vt,Wm,Kh,Km,xT,wT,qt],jTe),n9=Y(dr,Kh,(e,t)=>{if(!(e==null||t==null))return ob(ob({},e),{},{scale:t})}),kTe=Y([dr,Hh,mT,Y7],gT);Y((e,t,r)=>iT(e,r),kTe,(e,t)=>{if(!(e==null||t==null))return ob(ob({},e),{},{scale:t})});var NTe=Y([vt,gC,yC],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),s9=e=>e.options.defaultTooltipEventType,i9=e=>e.options.validateTooltipEventTypes;function o9(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function _T(e,t){var r=s9(e),n=i9(e);return o9(t,r,n)}function STe(e){return Le(t=>_T(t,e))}var a9=(e,t)=>{var r,n=Number(t);if(!(Is(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},ETe=e=>e.tooltip.settings,Ha={active:!1,index:null,dataKey:void 0,coordinate:void 0},CTe={itemInteraction:{click:Ha,hover:Ha},axisInteraction:{click:Ha,hover:Ha},keyboardInteraction:Ha,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},l9=cs({name:"tooltip",initialState:CTe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Ho(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:TTe,removeTooltipEntrySettings:ATe,setTooltipSettingsState:OTe,setActiveMouseOverItemIndex:c9,mouseLeaveItem:PTe,mouseLeaveChart:u9,setActiveClickItemIndex:RTe,setMouseOverAxisIndex:d9,setMouseClickAxisIndex:ITe,setSyncInteraction:TN,setKeyboardInteraction:AN}=l9.actions,DTe=l9.reducer;function e3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e3(Object(r),!0).forEach(function(n){LTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LTe(e,t,r){return(t=MTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MTe(e){var t=zTe(e,"string");return typeof t=="symbol"?t:t+""}function zTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FTe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $Te(e){return e.index!=null}var h9=(e,t,r,n)=>{if(t==null)return Ha;var s=FTe(e,t,r);if(s==null)return Ha;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if($Te(s)){if(i)return gy(gy({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return gy(gy({},Ha),{},{coordinate:s.coordinate})},jT=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!wi(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},f9=(e,t,r,n,s,i,o,a)=>{if(!(i==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,i);if(c!=null)return c;var u=s==null?void 0:s[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},p9=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Zm=e=>e.options.tooltipPayloadSearcher,Zh=e=>e.tooltip;function t3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function r3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t3(Object(r),!0).forEach(function(n){UTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UTe(e,t,r){return(t=qTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qTe(e){var t=BTe(e,"string");return typeof t=="symbol"?t:t+""}function BTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VTe(e,t){return e??t}var m9=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=r,h=[];return e.reduce((f,p)=>{var y,{dataDefinedOnItem:m,settings:b}=p,x=VTe(m,a),w=Array.isArray(x)?Qq(x,c,u):x,_=(y=b==null?void 0:b.dataKey)!==null&&y!==void 0?y:n==null?void 0:n.dataKey,j=b==null?void 0:b.nameKey,k;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?k=DU(w,n.dataKey,s):k=i(w,t,l,j),Array.isArray(k))k.forEach(C=>{var E=r3(r3({},b),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});f.push(WI({tooltipEntrySettings:E,dataKey:C.dataKey,payload:C.payload,value:Lt(C.payload,C.dataKey),name:C.name}))});else{var N;f.push(WI({tooltipEntrySettings:b,dataKey:_,payload:k,value:Lt(k,_),name:(N=Lt(k,j))!==null&&N!==void 0?N:b==null?void 0:b.name}))}return f},h)}},kT=Y([Fr,vt,O7,XC,zr],Z7),WTe=Y([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),HTe=Y([zr,Vh],oT),Gm=Y([WTe,Fr,HTe],aT),KTe=Y([Gm],e=>e.filter(sT)),ZTe=Y([Gm],lT),Gh=Y([ZTe,Il],cT),GTe=Y([KTe,Il,Fr],A7),NT=Y([Gh,Fr,Gm],dT),YTe=Y([Fr],hT),JTe=Y([Gm],e=>e.filter(sT)),XTe=Y([GTe,JTe,Bm],M7),QTe=Y([XTe,Il,zr],z7),eAe=Y([Gm],I7),tAe=Y([Gh,Fr,eAe,ow,zr],F7),rAe=Y([U7,zr,Vh],Wh),nAe=Y([rAe,zr],V7),sAe=Y([q7,zr,Vh],Wh),iAe=Y([sAe,zr],W7),oAe=Y([B7,zr,Vh],Wh),aAe=Y([oAe,zr],H7),lAe=Y([nAe,aAe,iAe],ab),cAe=Y([Fr,YTe,QTe,tAe,lAe,vt,zr],fT),g9=Y([Fr,vt,Gh,NT,Bm,zr,cAe],pT),uAe=Y([g9,Fr,kT],yT),dAe=Y([Fr,g9,uAe,zr],bT),y9=e=>{var t=zr(e),r=Vh(e),n=!1;return Km(e,t,r,n)},v9=Y([Fr,y9],nw),b9=Y([Fr,kT,dAe,v9],gT),hAe=Y([vt,NT,Fr,zr],Q7),fAe=Y([vt,NT,Fr,zr],e9),pAe=(e,t,r,n,s,i,o,a)=>{if(t){var{type:l}=t,c=Ol(e,a);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=l==="category"&&n.bandwidth?n.bandwidth()/u:0;return h=a==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?hn(s[0]-s[1])*2*h:h,c&&o?o.map((f,p)=>({coordinate:n(f)+h,value:f,index:p,offset:h})):n.domain().map((f,p)=>({coordinate:n(f)+h,value:i?i[f]:f,index:p,offset:h}))}}},va=Y([vt,Fr,kT,b9,y9,hAe,fAe,zr],pAe),ST=Y([s9,i9,ETe],(e,t,r)=>o9(r.shared,e,t)),x9=e=>e.tooltip.settings.trigger,ET=e=>e.tooltip.settings.defaultIndex,cw=Y([Zh,ST,x9,ET],h9),dh=Y([cw,Gh],jT),w9=Y([va,dh],a9),mAe=Y([cw],e=>{if(e)return e.dataKey}),_9=Y([Zh,ST,x9,ET],p9),gAe=Y([pa,ma,vt,Wr,va,ET,_9,Zm],f9),yAe=Y([cw,gAe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),vAe=Y([cw],e=>e.active),bAe=Y([_9,dh,Il,Fr,w9,Zm,ST],m9),xAe=Y([bAe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function n3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function s3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n3(Object(r),!0).forEach(function(n){wAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wAe(e,t,r){return(t=_Ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ae(e){var t=jAe(e,"string");return typeof t=="symbol"?t:t+""}function jAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kAe=()=>Le(Fr),NAe=()=>{var e=kAe(),t=Le(va),r=Le(b9);return uN(s3(s3({},e),{},{scale:r}),t)},SAe=()=>Le(XC),CT=(e,t)=>t,j9=(e,t,r)=>r,TT=(e,t,r,n)=>n,EAe=Y(va,e=>Fx(e,t=>t.coordinate)),AT=Y([Zh,CT,j9,TT],h9),k9=Y([AT,Gh],jT),CAe=(e,t,r)=>{if(t!=null){var n=Zh(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},N9=Y([Zh,CT,j9,TT],p9),lb=Y([pa,ma,vt,Wr,va,TT,N9,Zm],f9),TAe=Y([AT,lb],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),S9=Y(va,k9,a9),AAe=Y([N9,k9,Il,Fr,S9,Zm,CT],m9),OAe=Y([AT],e=>({isActive:e.active,activeIndex:e.index})),PAe=(e,t,r,n,s,i,o,a)=>{if(!(!e||!t||!n||!s||!i)){var l=iNe(e.chartX,e.chartY,t,r,a);if(l){var c=aNe(l,t),u=Gke(c,o,i,n,s),h=oNe(t,i,u,l);return{activeIndex:String(u),activeCoordinate:h}}}};function ON(){return ON=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ON.apply(null,arguments)}function i3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i3(Object(r),!0).forEach(function(n){RAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RAe(e,t,r){return(t=IAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IAe(e){var t=DAe(e,"string");return typeof t=="symbol"?t:t+""}function DAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LAe(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:a,tooltipEventType:l,chartName:c}=e,u=t,h=r,f=n;if(!a||!u||c!=="ScatterChart"&&l!=="axis")return null;var p,y;if(c==="ScatterChart")p=u,y=sSe;else if(c==="BarChart")p=iSe(o,u,s,i),y=wB;else if(o==="radial"){var{cx:m,cy:b,radius:x,startAngle:w,endAngle:_}=_B(u);p={cx:m,cy:b,startAngle:w,endAngle:_,innerRadius:x,outerRadius:x},y=kB}else p={points:zSe(o,u,s)},y=jC;var j=typeof a=="object"&&"className"in a?a.className:void 0,k=yy(yy(yy(yy({stroke:"#ccc",pointerEvents:"none"},s),p),Ht(a,!1)),{},{payload:h,payloadIndex:f,className:at("recharts-tooltip-cursor",j)});return v.isValidElement(a)?v.cloneElement(a,k):v.createElement(y,k)}function MAe(e){var t=NAe(),r=oB(),n=wC(),s=SAe();return v.createElement(LAe,ON({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var E9=v.createContext(null),zAe=()=>v.useContext(E9),C9={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||l,f),y=r?r+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],p]:l._events[y].push(p):(l._events[y]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)t.call(c,u)&&l.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=r?r+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,f=u.length,p=new Array(f);h<f;h++)p[h]=u[h].fn;return p},a.prototype.listenerCount=function(l){var c=r?r+l:l,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(l,c,u,h,f,p){var y=r?r+l:l;if(!this._events[y])return!1;var m=this._events[y],b=arguments.length,x,w;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,u),!0;case 4:return m.fn.call(m.context,c,u,h),!0;case 5:return m.fn.call(m.context,c,u,h,f),!0;case 6:return m.fn.call(m.context,c,u,h,f,p),!0}for(w=1,x=new Array(b-1);w<b;w++)x[w-1]=arguments[w];m.fn.apply(m.context,x)}else{var _=m.length,j;for(w=0;w<_;w++)switch(m[w].once&&this.removeListener(l,m[w].fn,void 0,!0),b){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,c);break;case 3:m[w].fn.call(m[w].context,c,u);break;case 4:m[w].fn.call(m[w].context,c,u,h);break;default:if(!x)for(j=1,x=new Array(b-1);j<b;j++)x[j-1]=arguments[j];m[w].fn.apply(m[w].context,x)}}return!0},a.prototype.on=function(l,c,u){return i(this,l,c,u,!1)},a.prototype.once=function(l,c,u){return i(this,l,c,u,!0)},a.prototype.removeListener=function(l,c,u,h){var f=r?r+l:l;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!h||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var y=0,m=[],b=p.length;y<b;y++)(p[y].fn!==c||h&&!p[y].once||u&&p[y].context!==u)&&m.push(p[y]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=r?r+l:l,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(C9);var FAe=C9.exports;const T9=ki(FAe);var rm=new T9,PN="recharts.syncEvent.tooltip",o3="recharts.syncEvent.brush";function A9(e,t){if(t){var r=Number.parseInt(t,10);if(!Is(r))return e==null?void 0:e[r]}}var $Ae={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},O9=cs({name:"options",initialState:$Ae,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),UAe=O9.reducer,{createEventEmitter:qAe}=O9.actions;function BAe(e){return e.tooltip.syncInteraction}var VAe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},P9=cs({name:"chartData",initialState:VAe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:a3,setDataStartEndIndexes:WAe,setComputedData:Kqe}=P9.actions,HAe=P9.reducer,R9=()=>{};function KAe(){var e=Le(QC),t=Le(eT),r=Yt(),n=Le(j7),s=Le(va),i=wC(),o=vC(),a=Le(l=>l.rootProps.className);v.useEffect(()=>{if(e==null)return R9;var l=(c,u,h)=>{if(t!==h&&e===c){if(n==="index"){r(u);return}if(s!=null){var f;if(typeof n=="function"){var p={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},y=n(s,p);f=s[y]}else n==="value"&&(f=s.find(N=>String(N.value)===u.payload.label));var{coordinate:m}=u.payload;if(f==null||u.payload.active===!1||m==null||o==null){r(TN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y:x}=m,w=Math.min(b,o.x+o.width),_=Math.min(x,o.y+o.height),j={x:i==="horizontal"?f.coordinate:w,y:i==="horizontal"?_:f.coordinate},k=TN({active:u.payload.active,coordinate:j,dataKey:u.payload.dataKey,index:String(f.index),label:u.payload.label});r(k)}}};return rm.on(PN,l),()=>{rm.off(PN,l)}},[a,r,t,e,n,s,i,o])}function ZAe(){var e=Le(QC),t=Le(eT),r=Yt();v.useEffect(()=>{if(e==null)return R9;var n=(s,i,o)=>{t!==o&&e===s&&r(WAe(i))};return rm.on(o3,n),()=>{rm.off(o3,n)}},[r,t,e])}function GAe(){var e=Yt();v.useEffect(()=>{e(qAe())},[e]),KAe(),ZAe()}function YAe(e,t,r,n,s,i){var o=Le(f=>CAe(f,e,t)),a=Le(eT),l=Le(QC),c=Le(j7),u=Le(BAe),h=u==null?void 0:u.active;v.useEffect(()=>{if(!h&&l!=null&&a!=null){var f=TN({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});rm.emit(PN,l,f,a)}},[h,r,o,s,n,a,l,c,i])}function l3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function c3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l3(Object(r),!0).forEach(function(n){JAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JAe(e,t,r){return(t=XAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XAe(e){var t=QAe(e,"string");return typeof t=="symbol"?t:t+""}function QAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eOe(e){return e.dataKey}function tOe(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(LNe,t)}var u3=[],rOe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!$h.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function d3(e){var t=Bs(e,rOe),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:a,isAnimationActive:l,offset:c,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:p,wrapperStyle:y,cursor:m,shared:b,trigger:x,defaultIndex:w,portal:_,axisId:j}=t,k=Yt(),N=typeof w=="number"?String(w):w;v.useEffect(()=>{k(OTe({shared:b,trigger:x,axisId:j,active:r,defaultIndex:N}))},[k,b,x,j,r,N]);var C=vC(),E=uB(),T=STe(b),{activeIndex:P,isActive:O}=Le(G=>OAe(G,T,x,N)),I=Le(G=>AAe(G,T,x,N)),R=Le(G=>S9(G,T,x,N)),F=Le(G=>TAe(G,T,x,N)),$=I,W=zAe(),q=r??O,[K,Z]=Eq([$,q]),z=T==="axis"?R:void 0;YAe(T,x,F,z,P,q);var J=_??W;if(J==null)return null;var te=$??u3;q||(te=u3),a&&te.length&&(te=vq($.filter(G=>G.value!=null&&(G.hide!==!0||t.includeHidden)),u,eOe));var be=te.length>0,H=v.createElement(BNe,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:l,active:q,coordinate:F,hasPayload:be,offset:c,position:h,reverseDirection:f,useTranslate3d:p,viewBox:C,wrapperStyle:y,lastBoundingBox:K,innerRef:Z,hasPortalFromProps:!!_},tOe(o,c3(c3({},t),{},{payload:te,label:z,active:q,coordinate:F,accessibilityLayer:E})));return v.createElement(v.Fragment,null,ro.createPortal(H,J),q&&v.createElement(MAe,{cursor:m,tooltipEventType:T,coordinate:F,payload:$,index:P}))}var I9={},D9={},L9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,a=null;const l=i!=null&&i.includes("leading"),c=i==null||i.includes("trailing"),u=()=>{a!==null&&(r.apply(o,a),o=void 0,a=null)},h=()=>{c&&u(),m()};let f=null;const p=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},n)},y=()=>{f!==null&&(clearTimeout(f),f=null)},m=()=>{y(),o=void 0,a=null},b=()=>{u()},x=function(...w){if(s!=null&&s.aborted)return;o=this,a=w;const _=f==null;p(),l&&_&&u()};return x.schedule=p,x.cancel=m,x.flush=b,s==null||s.addEventListener("abort",m,{once:!0}),x}e.debounce=t})(L9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L9;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:a=!0,maxWait:l}=i,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,h=null;const f=t.debounce(function(...m){u=n.apply(this,m),h=null},s,{edges:c}),p=function(...m){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(u=n.apply(this,m),h=Date.now(),f.cancel(),f.schedule(),u):(f.apply(this,m),u)},y=()=>(f.flush(),u);return p.cancel=f.cancel,p.flush=y,p}e.debounce=r})(D9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D9;function r(n,s=0,i={}){const{leading:o=!0,trailing:a=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:a})}e.throttle=r})(I9);var nOe=I9.throttle;const sOe=ki(nOe);var vp=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s]};function h3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function M_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h3(Object(r),!0).forEach(function(n){iOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iOe(e,t,r){return(t=oOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oOe(e){var t=aOe(e,"string");return typeof t=="symbol"?t:t+""}function aOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f3=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:h,className:f,onResize:p,style:y={}}=e,m=v.useRef(null),b=v.useRef();b.current=p,v.useImperativeHandle(t,()=>m.current);var[x,w]=v.useState({containerWidth:n.width,containerHeight:n.height}),_=v.useCallback((k,N)=>{w(C=>{var E=Math.round(k),T=Math.round(N);return C.containerWidth===E&&C.containerHeight===T?C:{containerWidth:E,containerHeight:T}})},[]);v.useEffect(()=>{var k=T=>{var P,{width:O,height:I}=T[0].contentRect;_(O,I),(P=b.current)===null||P===void 0||P.call(b,O,I)};u>0&&(k=sOe(k,u,{trailing:!0,leading:!1}));var N=new ResizeObserver(k),{width:C,height:E}=m.current.getBoundingClientRect();return _(C,E),N.observe(m.current),()=>{N.disconnect()}},[_,u]);var j=v.useMemo(()=>{var{containerWidth:k,containerHeight:N}=x;if(k<0||N<0)return null;vp(gc(s)||gc(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),vp(!r||r>0,"The aspect(%s) must be greater than zero.",r);var C=gc(s)?k:s,E=gc(i)?N:i;return r&&r>0&&(C?E=C/r:E&&(C=E*r),l&&E>l&&(E=l)),vp(C>0||E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,E,s,i,o,a,r),v.Children.map(c,T=>v.cloneElement(T,{width:C,height:E,style:M_({width:C,height:E},T.props.style)}))},[r,c,i,l,a,o,x,s]);return v.createElement("div",{id:h?"".concat(h):void 0,className:at("recharts-responsive-container",f),style:M_(M_({},y),{},{width:s,height:i,minWidth:o,minHeight:a,maxHeight:l}),ref:m},v.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),uw=e=>null;uw.displayName="Cell";function lOe(e,t,r){return(t=cOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cOe(e){var t=uOe(e,"string");return typeof t=="symbol"?t:t+""}function uOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class dOe{constructor(t){lOe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function p3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hOe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p3(Object(r),!0).forEach(function(n){fOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fOe(e,t,r){return(t=pOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pOe(e){var t=mOe(e,"string");return typeof t=="symbol"?t:t+""}function mOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gOe={cacheSize:2e3,enableCache:!0},M9=hOe({},gOe),m3=new dOe(M9.cacheSize),yOe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},g3="recharts_measurement_span";function vOe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",a=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(a)}var y3=(e,t)=>{try{var r=document.getElementById(g3);r||(r=document.createElement("span"),r.setAttribute("id",g3),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,yOe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},bp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||$h.isSsr)return{width:0,height:0};if(!M9.enableCache)return y3(e,t);var r=vOe(e,t),n=m3.get(r);if(n)return n;var s=y3(e,t);return m3.set(r,s),s},v3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,b3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bOe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xOe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,z9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wOe=Object.keys(z9),hd="NaN";function _Oe(e,t){return e*z9[t]}class Fn{static parse(t){var r,[,n,s]=(r=xOe.exec(t))!==null&&r!==void 0?r:[];return new Fn(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Is(t)&&(this.unit=""),r!==""&&!bOe.test(r)&&(this.num=NaN,this.unit=""),wOe.includes(r)&&(this.num=_Oe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Fn(NaN,""):new Fn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Is(this.num)}}function F9(e){if(e.includes(hd))return hd;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=v3.exec(t))!==null&&r!==void 0?r:[],o=Fn.parse(n??""),a=Fn.parse(i??""),l=s==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return hd;t=t.replace(v3,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,h,f]=(c=b3.exec(t))!==null&&c!==void 0?c:[],p=Fn.parse(u??""),y=Fn.parse(f??""),m=h==="+"?p.add(y):p.subtract(y);if(m.isNaN())return hd;t=t.replace(b3,m.toString())}return t}var x3=/\(([^()]*)\)/;function jOe(e){for(var t=e,r;(r=x3.exec(t))!=null;){var[,n]=r;t=t.replace(x3,F9(n))}return t}function kOe(e){var t=e.replace(/\s+/g,"");return t=jOe(t),t=F9(t),t}function NOe(e){try{return kOe(e)}catch{return hd}}function z_(e){var t=NOe(e.slice(5,-1));return t===hd?"":t}var SOe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],EOe=["dx","dy","angle","className","breakAll"];function RN(){return RN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RN.apply(null,arguments)}function w3(e,t){if(e==null)return{};var r,n,s=COe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function COe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $9=/[ \f\n\r\t\v\u2028\u2029]+/,U9=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];vr(t)||(r?s=t.toString().split(""):s=t.toString().split($9));var i=s.map(a=>({word:a,width:bp(a,n).width})),o=r?0:bp(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},TOe=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:a,breakAll:l}=e,c=Ae(i),u=o,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((O,I)=>{var{word:R,width:F}=I,$=O[O.length-1];if($&&(n==null||s||$.width+F+r<Number(n)))$.words.push(R),$.width+=F+r;else{var W={words:[R],width:F};O.push(W)}return O},[])},f=h(t),p=P=>P.reduce((O,I)=>O.width>I.width?O:I);if(!c||s)return f;var y=f.length>i||p(f).width>Number(n);if(!y)return f;for(var m="…",b=P=>{var O=u.slice(0,P),I=U9({breakAll:l,style:a,children:O+m}).wordsWithComputedWidth,R=h(I),F=R.length>i||p(R).width>Number(n);return[F,R]},x=0,w=u.length-1,_=0,j;x<=w&&_<=u.length-1;){var k=Math.floor((x+w)/2),N=k-1,[C,E]=b(N),[T]=b(k);if(!C&&!T&&(x=k+1),C&&T&&(w=k-1),!C&&T){j=E;break}_++}return j||f},_3=e=>{var t=vr(e)?[]:e.toString().split($9);return[{words:t}]},AOe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!$h.isSsr){var a,l,c=U9({breakAll:i,children:n,style:s});if(c){var{wordsWithComputedWidth:u,spaceWidth:h}=c;a=u,l=h}else return _3(n);return TOe({breakAll:i,children:n,maxLines:o,style:s},a,l,t,r)}return _3(n)},j3="#808080",dw=v.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:a="start",verticalAnchor:l="end",fill:c=j3}=e,u=w3(e,SOe),h=v.useMemo(()=>AOe({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:f,dy:p,angle:y,className:m,breakAll:b}=u,x=w3(u,EOe);if(!so(r)||!so(n))return null;var w=r+(Ae(f)?f:0),_=n+(Ae(p)?p:0),j;switch(l){case"start":j=z_("calc(".concat(i,")"));break;case"middle":j=z_("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:j=z_("calc(".concat(h.length-1," * -").concat(s,")"));break}var k=[];if(o){var N=h[0].width,{width:C}=u;k.push("scale(".concat(Ae(C)?C/N:1,")"))}return y&&k.push("rotate(".concat(y,", ").concat(w,", ").concat(_,")")),k.length&&(x.transform=k.join(" ")),v.createElement("text",RN({},Ht(x,!0),{ref:t,x:w,y:_,className:at("recharts-text",m),textAnchor:a,fill:c.includes("url")?j3:c}),h.map((E,T)=>{var P=E.words.join(b?"":" ");return v.createElement("tspan",{x:w,dy:T===0?j:s,key:"".concat(P,"-").concat(T)},P)}))});dw.displayName="Text";var OOe=["offset"],POe=["labelRef"];function k3(e,t){if(e==null)return{};var r,n,s=ROe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ROe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function N3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N3(Object(r),!0).forEach(function(n){IOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IOe(e,t,r){return(t=DOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DOe(e){var t=LOe(e,"string");return typeof t=="symbol"?t:t+""}function LOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $o(){return $o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$o.apply(null,arguments)}var MOe=e=>{var{value:t,formatter:r}=e,n=vr(e.children)?t:e.children;return typeof r=="function"?r(n):n},OT=e=>e!=null&&typeof e=="function",zOe=(e,t)=>{var r=hn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},FOe=(e,t,r,n)=>{var{position:s,offset:i,className:o}=e,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:h,endAngle:f,clockWise:p}=n,y=(c+u)/2,m=zOe(h,f),b=m>=0?1:-1,x,w;s==="insideStart"?(x=h+b*i,w=p):s==="insideEnd"?(x=f-b*i,w=!p):s==="end"&&(x=f+b*i,w=p),w=m<=0?w:!w;var _=yr(a,l,y,x),j=yr(a,l,y,x+(w?1:-1)*359),k="M".concat(_.x,",").concat(_.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(w?0:1,`,
    `).concat(j.x,",").concat(j.y),N=vr(e.id)?Hp("recharts-radial-line-"):e.id;return v.createElement("text",$o({},r,{dominantBaseline:"central",className:at("recharts-radial-bar-label",o)}),v.createElement("defs",null,v.createElement("path",{id:N,d:k})),v.createElement("textPath",{xlinkHref:"#".concat(N)},t))},$Oe=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:a,endAngle:l}=e,c=(a+l)/2;if(r==="outside"){var{x:u,y:h}=yr(n,s,o+t,c);return{x:u,y:h,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var f=(i+o)/2,{x:p,y}=yr(n,s,f,c);return{x:p,y,textAnchor:"middle",verticalAnchor:"middle"}},UOe=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:a,height:l}=t,c=l>=0?1:-1,u=c*n,h=c>0?"end":"start",f=c>0?"start":"end",p=a>=0?1:-1,y=p*n,m=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var x={x:i+a/2,y:o-c*n,textAnchor:"middle",verticalAnchor:h};return Qt(Qt({},x),r?{height:Math.max(o-r.y,0),width:a}:{})}if(s==="bottom"){var w={x:i+a/2,y:o+l+u,textAnchor:"middle",verticalAnchor:f};return Qt(Qt({},w),r?{height:Math.max(r.y+r.height-(o+l),0),width:a}:{})}if(s==="left"){var _={x:i-y,y:o+l/2,textAnchor:m,verticalAnchor:"middle"};return Qt(Qt({},_),r?{width:Math.max(_.x-r.x,0),height:l}:{})}if(s==="right"){var j={x:i+a+y,y:o+l/2,textAnchor:b,verticalAnchor:"middle"};return Qt(Qt({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:l}:{})}var k=r?{width:a,height:l}:{};return s==="insideLeft"?Qt({x:i+y,y:o+l/2,textAnchor:b,verticalAnchor:"middle"},k):s==="insideRight"?Qt({x:i+a-y,y:o+l/2,textAnchor:m,verticalAnchor:"middle"},k):s==="insideTop"?Qt({x:i+a/2,y:o+u,textAnchor:"middle",verticalAnchor:f},k):s==="insideBottom"?Qt({x:i+a/2,y:o+l-u,textAnchor:"middle",verticalAnchor:h},k):s==="insideTopLeft"?Qt({x:i+y,y:o+u,textAnchor:b,verticalAnchor:f},k):s==="insideTopRight"?Qt({x:i+a-y,y:o+u,textAnchor:m,verticalAnchor:f},k):s==="insideBottomLeft"?Qt({x:i+y,y:o+l-u,textAnchor:b,verticalAnchor:h},k):s==="insideBottomRight"?Qt({x:i+a-y,y:o+l-u,textAnchor:m,verticalAnchor:h},k):s&&typeof s=="object"&&(Ae(s.x)||gc(s.x))&&(Ae(s.y)||gc(s.y))?Qt({x:i+Os(s.x,a),y:o+Os(s.y,l),textAnchor:"end",verticalAnchor:"end"},k):Qt({x:i+a/2,y:o+l/2,textAnchor:"middle",verticalAnchor:"middle"},k)},qOe=e=>"cx"in e&&Ae(e.cx);function ts(e){var{offset:t=5}=e,r=k3(e,OOe),n=Qt({offset:t},r),{viewBox:s,position:i,value:o,children:a,content:l,className:c="",textBreakAll:u,labelRef:h}=n,f=Le(C7),p=vC(),y=i==="center"?p:f??p,m=s||y;if(!m||vr(o)&&vr(a)&&!v.isValidElement(l)&&typeof l!="function")return null;var b=Qt(Qt({},n),{},{viewBox:m});if(v.isValidElement(l)){var{labelRef:x}=b,w=k3(b,POe);return v.cloneElement(l,w)}var _;if(typeof l=="function"){if(_=v.createElement(l,b),v.isValidElement(_))return _}else _=MOe(n);var j=qOe(m),k=Ht(n,!0);if(j&&(i==="insideStart"||i==="insideEnd"||i==="end"))return FOe(n,_,k,m);var N=j?$Oe(m,n.offset,n.position):UOe(n,m);return v.createElement(dw,$o({ref:h,className:at("recharts-label",c)},k,N,{breakAll:u}),_)}ts.displayName="Label";var q9=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:a,innerRadius:l,outerRadius:c,x:u,y:h,top:f,left:p,width:y,height:m,clockWise:b,labelViewBox:x}=e;if(x)return x;if(Ae(y)&&Ae(m)){if(Ae(u)&&Ae(h))return{x:u,y:h,width:y,height:m};if(Ae(f)&&Ae(p))return{x:f,y:p,width:y,height:m}}if(Ae(u)&&Ae(h))return{x:u,y:h,width:0,height:0};if(Ae(t)&&Ae(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:l||0,outerRadius:c||a||o||0,clockWise:b};if(e.viewBox)return e.viewBox},BOe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(ts,$o({key:"label-implicit"},n)):so(e)?v.createElement(ts,$o({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===ts?v.cloneElement(e,Qt({key:"label-implicit"},n)):v.createElement(ts,$o({key:"label-implicit",content:e},n)):OT(e)?v.createElement(ts,$o({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(ts,$o({},e,{key:"label-implicit"},n)):null},VOe=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n,labelRef:s}=e,i=q9(e),o=Ox(n,ts).map((l,c)=>v.cloneElement(l,{viewBox:t||i,key:"label-".concat(c)}));if(!r)return o;var a=BOe(e.label,t||i,s);return[a,...o]};ts.parseViewBox=q9;ts.renderCallByParent=VOe;var B9={},V9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(V9);var W9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(W9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V9,r=W9,n=Dx;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(B9);var WOe=B9.last;const HOe=ki(WOe);var KOe=["valueAccessor"],ZOe=["data","dataKey","clockWise","id","textBreakAll"];function cb(){return cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cb.apply(null,arguments)}function S3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function E3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S3(Object(r),!0).forEach(function(n){GOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GOe(e,t,r){return(t=YOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YOe(e){var t=JOe(e,"string");return typeof t=="symbol"?t:t+""}function JOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C3(e,t){if(e==null)return{};var r,n,s=XOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function XOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QOe=e=>Array.isArray(e.value)?HOe(e.value):e.value;function Lc(e){var{valueAccessor:t=QOe}=e,r=C3(e,KOe),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:a}=r,l=C3(r,ZOe);return!n||!n.length?null:v.createElement(Ds,{className:"recharts-label-list"},n.map((c,u)=>{var h=vr(s)?t(c,u):Lt(c&&c.payload,s),f=vr(o)?{}:{id:"".concat(o,"-").concat(u)};return v.createElement(ts,cb({},Ht(c,!0),l,f,{parentViewBox:c.parentViewBox,value:h,textBreakAll:a,viewBox:ts.parseViewBox(vr(i)?c:E3(E3({},c),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}Lc.displayName="LabelList";function ePe(e,t){return e?e===!0?v.createElement(Lc,{key:"labelList-implicit",data:t}):v.isValidElement(e)||OT(e)?v.createElement(Lc,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?v.createElement(Lc,cb({data:t},e,{key:"labelList-implicit"})):null:null}function tPe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=Ox(n,Lc).map((o,a)=>v.cloneElement(o,{data:t,key:"labelList-".concat(a)}));if(!r)return s;var i=ePe(e.label,t);return[i,...s]}Lc.renderCallByParent=tPe;function IN(){return IN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IN.apply(null,arguments)}var H9=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=at("recharts-dot",s);return t===+t&&r===+r&&n===+n?v.createElement("circle",IN({},Al(e),H2(e),{className:i,cx:t,cy:r,r:n})):null},K9=e=>e.graphicalItems.polarItems,rPe=Y([qt,Vm],oT),PT=Y([K9,dr,rPe],aT),nPe=Y([PT],lT),RT=Y([nPe,ZC],cT),sPe=Y([RT,dr,PT],dT),iPe=Y([RT,dr,PT],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(s=>{var i,o=Lt(n,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Lt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),T3=()=>{},oPe=Y([dr,K7,T3,iPe,T3,vt,qt],fT),Z9=Y([dr,vt,RT,sPe,Bm,qt,oPe],pT),aPe=Y([Z9,dr,Hh],yT);Y([dr,Z9,aPe,qt],bT);var lPe={radiusAxis:{},angleAxis:{}},G9=cs({name:"polarAxis",initialState:lPe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Zqe,removeRadiusAxis:Gqe,addAngleAxis:Yqe,removeAngleAxis:Jqe}=G9.actions,cPe=G9.reducer;function A3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function O3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A3(Object(r),!0).forEach(function(n){uPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uPe(e,t,r){return(t=dPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dPe(e){var t=hPe(e,"string");return typeof t=="symbol"?t:t+""}function hPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fPe=(e,t)=>t,IT=Y([K9,fPe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),pPe=[],DT=(e,t,r)=>(r==null?void 0:r.length)===0?pPe:r,Y9=Y([ZC,IT,DT],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var s;if((t==null?void 0:t.data)!=null&&t.data.length>0?s=t.data:s=n,(!s||!s.length)&&r!=null&&(s=r.map(i=>O3(O3({},t.presentationProps),i.props))),s!=null)return s}}),mPe=Y([Y9,IT,DT],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,s)=>{var i,o=Lt(n,t.nameKey,t.name),a;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?a=r[s].props.fill:typeof n=="object"&&n!=null&&"fill"in n?a=n.fill:a=t.fill,{value:Hx(o,t.dataKey),color:a,payload:n,type:t.legendType}})}),gPe=Y([Y9,IT,DT,Wr],(e,t,r,n)=>{if(!(t==null||e==null))return fRe({offset:n,pieSettings:t,displayedData:e,cells:r})}),J9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((n=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&n.writable)?!1:r.toString()===`[object ${i}]`}let s=r;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(r)===s}e.isPlainObject=t})(J9);var yPe=J9.isPlainObject;const vPe=ki(yPe);function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ub.apply(null,arguments)}var P3=(e,t,r,n,s)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},bPe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xPe=e=>{var t=Bs(e,bPe),r=v.useRef(),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var{x:i,y:o,upperWidth:a,lowerWidth:l,height:c,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:p,isUpdateAnimationActive:y}=t;if(i!==+i||o!==+o||a!==+a||l!==+l||c!==+c||a===0&&l===0||c===0)return null;var m=at("recharts-trapezoid",u);return y?v.createElement(Zv,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:c,x:i,y:o},to:{upperWidth:a,lowerWidth:l,height:c,x:i,y:o},duration:f,animationEasing:h,isActive:y},b=>{var{upperWidth:x,lowerWidth:w,height:_,x:j,y:k}=b;return v.createElement(Zv,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,easing:h},v.createElement("path",ub({},Ht(t,!0),{className:m,d:P3(j,k,x,w,_),ref:r})))}):v.createElement("g",null,v.createElement("path",ub({},Ht(t,!0),{className:m,d:P3(i,o,a,l,c)})))},wPe=["option","shapeType","propTransformer","activeClassName","isActive"];function _Pe(e,t){if(e==null)return{};var r,n,s=jPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function R3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function db(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R3(Object(r),!0).forEach(function(n){kPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kPe(e,t,r){return(t=NPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NPe(e){var t=SPe(e,"string");return typeof t=="symbol"?t:t+""}function SPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EPe(e,t){return db(db({},t),e)}function CPe(e,t){return e==="symbols"}function I3(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(wB,r);case"trapezoid":return v.createElement(xPe,r);case"sector":return v.createElement(kB,r);case"symbols":if(CPe(t))return v.createElement(X2,r);break;default:return null}}function TPe(e){return v.isValidElement(e)?e.props:e}function APe(e){var{option:t,shapeType:r,propTransformer:n=EPe,activeClassName:s="recharts-active-shape",isActive:i}=e,o=_Pe(e,wPe),a;if(v.isValidElement(t))a=v.cloneElement(t,db(db({},o),TPe(t)));else if(typeof t=="function")a=t(o);else if(vPe(t)&&typeof t!="boolean"){var l=n(t,o);a=v.createElement(I3,{shapeType:r,elementProps:l})}else{var c=o;a=v.createElement(I3,{shapeType:r,elementProps:c})}return i?v.createElement(Ds,{className:s},a):a}var OPe=(e,t)=>{var r=Yt();return(n,s)=>i=>{e==null||e(n,s,i),r(c9({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},PPe=e=>{var t=Yt();return(r,n)=>s=>{e==null||e(r,n,s),t(PTe())}},RPe=(e,t)=>{var r=Yt();return(n,s)=>i=>{e==null||e(n,s,i),r(RTe({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function X9(e){var{fn:t,args:r}=e,n=Yt(),s=qs();return v.useEffect(()=>{if(!s){var i=t(r);return n(TTe(i)),()=>{n(ATe(i))}}},[t,r,n,s]),null}var Q9=()=>{};function IPe(e){var{legendPayload:t}=e,r=Yt(),n=qs();return v.useEffect(()=>n?Q9:(r(lB(t)),()=>{r(cB(t))}),[r,n,t]),null}function DPe(e){var{legendPayload:t}=e,r=Yt(),n=Le(vt);return v.useEffect(()=>n!=="centric"&&n!=="radial"?Q9:(r(lB(t)),()=>{r(cB(t))}),[r,n,t]),null}function eV(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(Hp(t)),n=v.useRef(e);return n.current!==e&&(r.current=Hp(t),n.current=e),r.current}var F_,LPe=()=>{var[e]=v.useState(()=>Hp("uid-"));return e},MPe=(F_=v.useId)!==null&&F_!==void 0?F_:LPe;function zPe(e,t){var r=MPe();return t||(e?"".concat(e,"-").concat(r):r)}var FPe=v.createContext(void 0),tV=e=>{var{id:t,type:r,children:n}=e,s=zPe("recharts-".concat(r),t);return v.createElement(FPe.Provider,{value:s},n(s))},$Pe={cartesianItems:[],polarItems:[]},rV=cs({name:"graphicalItems",initialState:$Pe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=Ho(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=Ho(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Ho(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:UPe,replaceCartesianGraphicalItem:qPe,removeCartesianGraphicalItem:BPe,addPolarGraphicalItem:VPe,removePolarGraphicalItem:WPe}=rV.actions,HPe=rV.reducer;function KPe(e){var t=Yt(),r=v.useRef(null);return v.useEffect(()=>{r.current===null?t(UPe(e)):r.current!==e&&t(qPe({prev:r.current,next:e})),r.current=e},[t,e]),v.useEffect(()=>()=>{r.current&&(t(BPe(r.current)),r.current=null)},[t]),null}function ZPe(e){var t=Yt();return v.useEffect(()=>(t(VPe(e)),()=>{t(WPe(e))}),[t,e]),null}function GPe(){}var YPe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},D3={t:0},$_={t:1};function nV(e){var t=Bs(e,YPe),{isActive:r,canBegin:n,duration:s,easing:i,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=t,u=xB("JavascriptAnimate",t.animationManager),[h,f]=v.useState(r?D3:$_),p=v.useRef(null);return v.useEffect(()=>{r||f($_)},[r]),v.useEffect(()=>{if(!r||!n)return GPe;var y=bB(D3,$_,yB(i),s,f,u.getTimeoutController()),m=()=>{p.current=y()};return u.start([l,o,m,s,a]),()=>{u.stop(),p.current&&p.current(),a()}},[r,n,s,i,o,l,a,u]),c(h.t)}var JPe=["onMouseEnter","onClick","onMouseLeave"],XPe=["id"],QPe=["id"];function LT(e,t){if(e==null)return{};var r,n,s=eRe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function L3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L3(Object(r),!0).forEach(function(n){tRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tRe(e,t,r){return(t=rRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rRe(e){var t=nRe(e,"string");return typeof t=="symbol"?t:t+""}function nRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aa(){return aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aa.apply(null,arguments)}function sRe(e){var t=v.useMemo(()=>Ox(e.children,uw),[e.children]),r=Le(n=>mPe(n,e.id,t));return r==null?null:v.createElement(DPe,{legendPayload:r})}function iRe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:s,strokeWidth:i,fill:o,name:a,hide:l,tooltipType:c}=e;return{dataDefinedOnItem:n==null?void 0:n.map(u=>u.tooltipPayload),positions:n==null?void 0:n.map(u=>u.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:Hx(a,t),hide:l,type:c,color:o,unit:""}}}var oRe=(e,t)=>e>t?"start":e<t?"end":"middle",aRe=(e,t,r)=>typeof t=="function"?t(e):Os(t,r,r*.8),lRe=(e,t,r)=>{var{top:n,left:s,width:i,height:o}=t,a=Xq(i,o),l=s+Os(e.cx,i,i/2),c=n+Os(e.cy,o,o/2),u=Os(e.innerRadius,a,0),h=aRe(r,e.outerRadius,a),f=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:h,maxRadius:f}},cRe=(e,t)=>{var r=hn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},uRe=(e,t)=>{if(v.isValidElement(e))return v.cloneElement(e,t);if(typeof e=="function")return e(t);var r=at("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return v.createElement(jC,aa({},t,{type:"linear",className:r}))},dRe=(e,t,r)=>{if(v.isValidElement(e))return v.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),v.isValidElement(n)))return n;var s=at("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return v.createElement(dw,aa({},t,{alignmentBaseline:"middle",className:s}),n)};function hRe(e){var{sectors:t,props:r,showLabels:n}=e,{label:s,labelLine:i,dataKey:o}=r;if(!n||!s||!t)return null;var a=Al(r),l=Ht(s,!1),c=Ht(i,!1),u=typeof s=="object"&&"offsetRadius"in s&&s.offsetRadius||20,h=t.map((f,p)=>{var y=(f.startAngle+f.endAngle)/2,m=yr(f.cx,f.cy,f.outerRadius+u,y),b=rr(rr(rr(rr({},a),f),{},{stroke:"none"},l),{},{index:p,textAnchor:oRe(m.x,f.cx)},m),x=rr(rr(rr(rr({},a),f),{},{fill:"none",stroke:f.fill},c),{},{index:p,points:[yr(f.cx,f.cy,f.outerRadius,y),m],key:"line"});return v.createElement(Ds,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(p)},i&&uRe(i,x),dRe(s,b,Lt(f,o)))});return v.createElement(Ds,{className:"recharts-pie-labels"},h)}function sV(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:s,showLabels:i}=e,o=Le(dh),{onMouseEnter:a,onClick:l,onMouseLeave:c}=s,u=LT(s,JPe),h=OPe(a,s.dataKey),f=PPe(c),p=RPe(l,s.dataKey);return t==null?null:v.createElement(v.Fragment,null,t.map((y,m)=>{if((y==null?void 0:y.startAngle)===0&&(y==null?void 0:y.endAngle)===0&&t.length!==1)return null;var b=r&&String(m)===o,x=o?n:null,w=b?r:x,_=rr(rr({},y),{},{stroke:y.stroke,tabIndex:-1,[nB]:m,[sB]:s.dataKey});return v.createElement(Ds,aa({tabIndex:-1,className:"recharts-pie-sector"},K2(u,y,m),{onMouseEnter:h(y,m),onMouseLeave:f(y,m),onClick:p(y,m),key:"sector-".concat(y==null?void 0:y.startAngle,"-").concat(y==null?void 0:y.endAngle,"-").concat(y.midAngle,"-").concat(m)}),v.createElement(APe,aa({option:w,isActive:b,shapeType:"sector"},_)))}),v.createElement(hRe,{sectors:t,props:s,showLabels:i}))}function fRe(e){var t,{pieSettings:r,displayedData:n,cells:s,offset:i}=e,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:h}=r,f=Math.abs(r.minAngle),p=cRe(a,l),y=Math.abs(p),m=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(N=>Lt(N,c,0)!==0).length,x=(y>=360?b:b-1)*m,w=y-b*f-x,_=n.reduce((N,C)=>{var E=Lt(C,c,0);return N+(Ae(E)?E:0)},0),j;if(_>0){var k;j=n.map((N,C)=>{var E=Lt(N,c,0),T=Lt(N,u,C),P=lRe(r,i,N),O=(Ae(E)?E:0)/_,I,R=rr(rr({},N),s&&s[C]&&s[C].props);C?I=k.endAngle+hn(p)*m*(E!==0?1:0):I=a;var F=I+hn(p)*((E!==0?f:0)+O*w),$=(I+F)/2,W=(P.innerRadius+P.outerRadius)/2,q=[{name:T,value:E,payload:R,dataKey:c,type:h}],K=yr(P.cx,P.cy,W,$);return k=rr(rr(rr(rr({},r.presentationProps),{},{percent:O,cornerRadius:o,name:T,tooltipPayload:q,midAngle:$,middleRadius:W,tooltipPosition:K},R),P),{},{value:Lt(N,c),startAngle:I,endAngle:F,payload:R,paddingAngle:hn(p)*m}),k})}return j}function pRe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:a,activeShape:l,inactiveShape:c,onAnimationStart:u,onAnimationEnd:h}=t,f=eV(t,"recharts-pie-"),p=r.current,[y,m]=v.useState(!0),b=v.useCallback(()=>{typeof h=="function"&&h(),m(!1)},[h]),x=v.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return v.createElement(nV,{begin:i,duration:o,isActive:s,easing:a,onAnimationStart:x,onAnimationEnd:b,key:f},w=>{var _=[],j=n&&n[0],k=j.startAngle;return n.forEach((N,C)=>{var E=p&&p[C],T=C>0?bl(N,"paddingAngle",0):0;if(E){var P=sI(E.endAngle-E.startAngle,N.endAngle-N.startAngle),O=rr(rr({},N),{},{startAngle:k+T,endAngle:k+P(w)+T});_.push(O),k=O.endAngle}else{var{endAngle:I,startAngle:R}=N,F=sI(0,I-R),$=F(w),W=rr(rr({},N),{},{startAngle:k+T,endAngle:k+$+T});_.push(W),k=W.endAngle}}),r.current=_,v.createElement(Ds,null,v.createElement(sV,{sectors:_,activeShape:l,inactiveShape:c,allOtherPieProps:t,showLabels:!y}))})}function mRe(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:s}=e,i=v.useRef(null),o=i.current;return r&&t&&t.length&&(!o||o!==t)?v.createElement(pRe,{props:e,previousSectorsRef:i}):v.createElement(sV,{sectors:t,activeShape:n,inactiveShape:s,allOtherPieProps:e,showLabels:!0})}function gRe(e){var{hide:t,className:r,rootTabIndex:n}=e,s=at("recharts-pie",r);return t?null:v.createElement(Ds,{tabIndex:n,className:s},v.createElement(mRe,e))}var yRe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!$h.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function vRe(e){var{id:t}=e,r=LT(e,XPe),n=v.useMemo(()=>Ox(e.children,uw),[e.children]),s=Le(i=>gPe(i,t,n));return v.createElement(v.Fragment,null,v.createElement(X9,{fn:iRe,args:rr(rr({},e),{},{sectors:s})}),v.createElement(gRe,aa({},r,{sectors:s})))}function iV(e){var t=Bs(e,yRe),{id:r}=t,n=LT(t,QPe),s=Al(n);return v.createElement(tV,{id:r,type:"pie"},i=>v.createElement(v.Fragment,null,v.createElement(ZPe,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s}),v.createElement(sRe,aa({},n,{id:i})),v.createElement(vRe,aa({},n,{id:i})),n.children))}iV.displayName="Pie";var bRe=Y([Wr],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),xRe=Y([bRe,pa,ma],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),MT=()=>Le(xRe),wRe=()=>Le(xAe);function M3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function z3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(r),!0).forEach(function(n){_Re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Re(e,t,r){return(t=jRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jRe(e){var t=kRe(e,"string");return typeof t=="symbol"?t:t+""}function kRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NRe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=z3(z3({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Ht(s,!1)),H2(s)),a;return v.isValidElement(s)?a=v.cloneElement(s,o):typeof s=="function"?a=s(o):a=v.createElement(H9,o),v.createElement(Ds,{className:"recharts-active-dot"},a)};function SRe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=Le(dh),o=wRe();if(t==null||o==null)return null;var a=t.find(l=>o.includes(l.payload));return vr(a)?null:NRe({point:a,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var ERe={},oV=cs({name:"errorBars",initialState:ERe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Xqe,removeErrorBar:Qqe}=oV.actions,CRe=oV.reducer,TRe=["children"];function ARe(e,t){if(e==null)return{};var r,n,s=ORe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ORe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PRe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},RRe=v.createContext(PRe);function IRe(e){var{children:t}=e,r=ARe(e,TRe);return v.createElement(RRe.Provider,{value:r},t)}function aV(e,t){var r,n,s=Le(c=>ya(c,e)),i=Le(c=>Dl(c,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Yn.allowDataOverflow,a=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Jn.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function DRe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=MT(),{needClipX:i,needClipY:o,needClip:a}=aV(t,r);if(!a)return null;var{x:l,y:c,width:u,height:h}=s;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:i?l:l-u/2,y:o?c:c-h/2,width:i?u:u*2,height:o?h:h*2}))}var lV=e=>{var{chartData:t}=e,r=Yt(),n=qs();return v.useEffect(()=>n?()=>{}:(r(a3(t)),()=>{r(a3(void 0))}),[t,r,n]),null},F3={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},cV=cs({name:"brush",initialState:F3,reducers:{setBrushSettings(e,t){return t.payload==null?F3:t.payload}}}),{setBrushSettings:eBe}=cV.actions,LRe=cV.reducer;function MRe(e,t,r){return(t=zRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zRe(e){var t=FRe(e,"string");return typeof t=="symbol"?t:t+""}function FRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class zT{static create(t){return new zT(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}MRe(zT,"EPS",1e-4);function $Re(e){return(e%180+180)%180}var URe=function(e){var{width:t,height:r}=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=$Re(n),i=s*Math.PI/180,o=Math.atan(r/t),a=i>o&&i<Math.PI-o?r/Math.sin(i):t/Math.cos(i);return Math.abs(a)},qRe={dots:[],areas:[],lines:[]},uV=cs({name:"referenceElements",initialState:qRe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ho(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ho(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ho(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:tBe,removeDot:rBe,addArea:nBe,removeArea:sBe,addLine:iBe,removeLine:oBe}=uV.actions,BRe=uV.reducer,VRe=v.createContext(void 0),WRe=e=>{var{children:t}=e,[r]=v.useState("".concat(Hp("recharts"),"-clip")),n=MT();if(n==null)return null;var{x:s,y:i,width:o,height:a}=n;return v.createElement(VRe.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:s,y:i,height:a,width:o}))),t)};function U_(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function dV(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function HRe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return URe(n,r)}function KRe(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:a}=e;return t===1?{start:n?s:i,end:n?s+o:i+a}:{start:n?s+o:i+a,end:n?s:i}}function hb(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function ZRe(e,t){return dV(e,t+1)}function GRe(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:a}=t,l=0,c=1,u=o,h=function(){var p=n==null?void 0:n[l];if(p===void 0)return{v:dV(n,c)};var y=l,m,b=()=>(m===void 0&&(m=r(p,y)),m),x=p.coordinate,w=l===0||hb(e,x,b,u,a);w||(l=0,u=o,c+=1),w&&(u=x+e*(b()/2+s),l+=c)},f;c<=i.length;)if(f=h(),f)return f.v;return[]}function $3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$3(Object(r),!0).forEach(function(n){YRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YRe(e,t,r){return(t=JRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JRe(e){var t=XRe(e,"string");return typeof t=="symbol"?t:t+""}function XRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QRe(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:a}=t,{end:l}=t,c=function(h){var f=i[h],p,y=()=>(p===void 0&&(p=r(f,h)),p);if(h===o-1){var m=e*(f.coordinate+e*y()/2-l);i[h]=f=on(on({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else i[h]=f=on(on({},f),{},{tickCoord:f.coordinate});var b=hb(e,f.tickCoord,y,a,l);b&&(l=f.tickCoord-e*(y()/2+s),i[h]=on(on({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function e4e(e,t,r,n,s,i){var o=(n||[]).slice(),a=o.length,{start:l,end:c}=t;if(i){var u=n[a-1],h=r(u,a-1),f=e*(u.coordinate+e*h/2-c);o[a-1]=u=on(on({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=hb(e,u.tickCoord,()=>h,l,c);p&&(c=u.tickCoord-e*(h/2+s),o[a-1]=on(on({},u),{},{isShow:!0}))}for(var y=i?a-1:a,m=function(x){var w=o[x],_,j=()=>(_===void 0&&(_=r(w,x)),_);if(x===0){var k=e*(w.coordinate-e*j()/2-l);o[x]=w=on(on({},w),{},{tickCoord:k<0?w.coordinate-k*e:w.coordinate})}else o[x]=w=on(on({},w),{},{tickCoord:w.coordinate});var N=hb(e,w.tickCoord,j,l,c);N&&(l=w.tickCoord+e*(j()/2+s),o[x]=on(on({},w),{},{isShow:!0}))},b=0;b<y;b++)m(b);return o}function FT(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:u,angle:h}=e;if(!s||!s.length||!n)return[];if(Ae(l)||$h.isSsr){var f;return(f=ZRe(s,Ae(l)?l:0))!==null&&f!==void 0?f:[]}var p=[],y=a==="top"||a==="bottom"?"width":"height",m=u&&y==="width"?bp(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(_,j)=>{var k=typeof c=="function"?c(_.value,j):_.value;return y==="width"?HRe(bp(k,{fontSize:t,letterSpacing:r}),m,h):bp(k,{fontSize:t,letterSpacing:r})[y]},x=s.length>=2?hn(s[1].coordinate-s[0].coordinate):1,w=KRe(i,x,y);return l==="equidistantPreserveStart"?GRe(x,w,b,s,o):(l==="preserveStart"||l==="preserveStartEnd"?p=e4e(x,w,b,s,o,l==="preserveStartEnd"):p=QRe(x,w,b,s,o),p.filter(_=>_.isShow))}var t4e=["viewBox"],r4e=["viewBox"];function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fd.apply(null,arguments)}function U3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(r),!0).forEach(function(n){$T(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q3(e,t){if(e==null)return{};var r,n,s=n4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function n4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $T(e,t,r){return(t=s4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s4e(e){var t=i4e(e,"string");return typeof t=="symbol"?t:t+""}function i4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ll extends v.Component{constructor(t){super(t),this.tickRefs=v.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=q3(t,t4e),i=this.props,{viewBox:o}=i,a=q3(i,r4e);return!U_(n,o)||!U_(s,a)||!U_(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:a,mirror:l,tickMargin:c}=this.props,u,h,f,p,y,m,b=l?-1:1,x=t.tickSize||a,w=Ae(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=h=t.coordinate,p=n+ +!l*i,f=p-b*x,m=f-b*c,y=w;break;case"left":f=p=t.coordinate,h=r+ +!l*s,u=h-b*x,y=u-b*c,m=w;break;case"right":f=p=t.coordinate,h=r+ +l*s,u=h+b*x,y=u+b*c,m=w;break;default:u=h=t.coordinate,p=n+ +l*i,f=p+b*x,m=f+b*c,y=w;break}return{line:{x1:u,y1:f,x2:h,y2:p},tick:{x:y,y:m}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:a}=this.props,l=kr(kr(kr({},Ht(this.props,!1)),Ht(a,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var c=+(i==="top"&&!o||i==="bottom"&&o);l=kr(kr({},l),{},{x1:t,y1:r+c*s,x2:t+n,y2:r+c*s})}else{var u=+(i==="left"&&!o||i==="right"&&o);l=kr(kr({},l),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+s})}return v.createElement("line",fd({},l,{className:at("recharts-cartesian-axis-line",bl(a,"className"))}))}static renderTickItem(t,r,n){var s,i=at(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))s=v.cloneElement(t,kr(kr({},r),{},{className:i}));else if(typeof t=="function")s=t(kr(kr({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=at(o,t.className)),s=v.createElement(dw,fd({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:a,unit:l,padding:c}=this.props,u=FT(kr(kr({},this.props),{},{ticks:n}),t,r),h=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),p=Al(this.props),y=Ht(o,!1),m=kr(kr({},p),{},{fill:"none"},Ht(s,!1)),b=u.map((x,w)=>{var{line:_,tick:j}=this.getTickLineCoord(x),k=kr(kr(kr(kr({textAnchor:h,verticalAnchor:f},p),{},{stroke:"none",fill:i},y),j),{},{index:w,payload:x,visibleTicksCount:u.length,tickFormatter:a,padding:c});return v.createElement(Ds,fd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},K2(this.props,x,w)),s&&v.createElement("line",fd({},m,_,{className:at("recharts-cartesian-axis-tick-line",bl(s,"className"))})),o&&Ll.renderTickItem(o,k,"".concat(typeof a=="function"?a(x.value,w):x.value).concat(l||"")))});return b.length>0?v.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:v.createElement(Ds,{className:at("recharts-cartesian-axis",s),ref:a=>{if(a){var l=a.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var c=l[0];if(c){var u=window.getComputedStyle(c).fontSize,h=window.getComputedStyle(c).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),ts.renderCallByParent(this.props))}}$T(Ll,"displayName","CartesianAxis");$T(Ll,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var o4e=["x1","y1","x2","y2","key"],a4e=["offset"],l4e=["xAxisId","yAxisId"],c4e=["xAxisId","yAxisId"];function B3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ln(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B3(Object(r),!0).forEach(function(n){u4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u4e(e,t,r){return(t=d4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d4e(e){var t=h4e(e,"string");return typeof t=="symbol"?t:t+""}function h4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xc(){return xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xc.apply(null,arguments)}function fb(e,t){if(e==null)return{};var r,n,s=f4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function f4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var p4e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:a}=e;return v.createElement("rect",{x:n,y:s,ry:a,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function hV(e,t){var r;if(v.isValidElement(e))r=v.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:a}=t,l=fb(t,o4e),c=Al(l),{offset:u}=c,h=fb(c,a4e);r=v.createElement("line",xc({},h,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:a}))}return r}function m4e(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,a=fb(e,l4e),l=s.map((c,u)=>{var h=ln(ln({},a),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(u),index:u});return hV(n,h)});return v.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function g4e(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,a=fb(e,c4e),l=s.map((c,u)=>{var h=ln(ln({},a),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(u),index:u});return hV(n,h)});return v.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function y4e(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:a,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var c=a.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==c[0]&&c.unshift(0);var u=c.map((h,f)=>{var p=!c[f+1],y=p?s+o-h:c[f+1]-h;if(y<=0)return null;var m=f%t.length;return v.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:y,width:i,stroke:"none",fill:t[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function v4e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:a,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==c[0]&&c.unshift(0);var u=c.map((h,f)=>{var p=!c[f+1],y=p?s+o-h:c[f+1]-h;if(y<=0)return null;var m=f%r.length;return v.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:y,height:a,stroke:"none",fill:r[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var b4e=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return eB(FT(ln(ln(ln({},Ll.defaultProps),r),{},{ticks:tB(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},x4e=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return eB(FT(ln(ln(ln({},Ll.defaultProps),r),{},{ticks:tB(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},w4e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function fV(e){var t=bC(),r=xC(),n=oB(),s=ln(ln({},Bs(e,w4e)),{},{x:Ae(e.x)?e.x:n.left,y:Ae(e.y)?e.y:n.top,width:Ae(e.width)?e.width:n.width,height:Ae(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:a,y:l,width:c,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:p}=s,y=qs(),m=Le(T=>QD(T,"xAxis",i,y)),b=Le(T=>QD(T,"yAxis",o,y));if(!Ae(c)||c<=0||!Ae(u)||u<=0||!Ae(a)||a!==+a||!Ae(l)||l!==+l)return null;var x=s.verticalCoordinatesGenerator||b4e,w=s.horizontalCoordinatesGenerator||x4e,{horizontalPoints:_,verticalPoints:j}=s;if((!_||!_.length)&&typeof w=="function"){var k=f&&f.length,N=w({yAxis:b?ln(ln({},b),{},{ticks:k?f:b.ticks}):void 0,width:t,height:r,offset:n},k?!0:h);vp(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(_=N)}if((!j||!j.length)&&typeof x=="function"){var C=p&&p.length,E=x({xAxis:m?ln(ln({},m),{},{ticks:C?p:m.ticks}):void 0,width:t,height:r,offset:n},C?!0:h);vp(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(j=E)}return v.createElement("g",{className:"recharts-cartesian-grid"},v.createElement(p4e,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),v.createElement(y4e,xc({},s,{horizontalPoints:_})),v.createElement(v4e,xc({},s,{verticalPoints:j})),v.createElement(m4e,xc({},s,{offset:n,horizontalPoints:_,xAxis:m,yAxis:b})),v.createElement(g4e,xc({},s,{offset:n,verticalPoints:j,xAxis:m,yAxis:b})))}fV.displayName="CartesianGrid";var pV=(e,t,r,n)=>n9(e,"xAxis",t,n),mV=(e,t,r,n)=>r9(e,"xAxis",t,n),gV=(e,t,r,n)=>n9(e,"yAxis",r,n),yV=(e,t,r,n)=>r9(e,"yAxis",r,n),_4e=Y([vt,pV,gV,mV,yV],(e,t,r,n,s)=>Ol(e,"xAxis")?uN(t,n,!1):uN(r,s,!1)),j4e=(e,t,r,n,s)=>s;function k4e(e){return e.type==="line"}var N4e=Y([P7,j4e],(e,t)=>e.filter(k4e).find(r=>r.id===t)),S4e=Y([vt,pV,gV,mV,yV,N4e,_4e,GC],(e,t,r,n,s,i,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=a;if(!(i==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:h,data:f}=i,p;if(f!=null&&f.length>0?p=f:p=l==null?void 0:l.slice(c,u+1),p!=null)return K4e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:h,bandSize:o,displayedData:p})}}),E4e=["id"],C4e=["type","layout","connectNulls","needClip"],T4e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function V3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ui(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(r),!0).forEach(function(n){A4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A4e(e,t,r){return(t=O4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O4e(e){var t=P4e(e,"string");return typeof t=="symbol"?t:t+""}function P4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UT(e,t){if(e==null)return{};var r,n,s=R4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function R4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gc.apply(null,arguments)}var I4e=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Hx(r,t),payload:e}]};function D4e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:a,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Hx(o,t),hide:a,type:e.tooltipType,color:e.stroke,unit:l}}}var vV=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function L4e(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var M4e=(e,t,r)=>{var n=r.reduce((h,f)=>h+f);if(!n)return vV(t,e);for(var s=Math.floor(e/n),i=e%n,o=t-e,a=[],l=0,c=0;l<r.length;c+=r[l],++l)if(c+r[l]>i){a=[...r.slice(0,l),i-c];break}var u=a.length%2===0?[0,o]:[o];return[...L4e(r,s),...a,...u].map(h=>"".concat(h,"px")).join(", ")};function z4e(e,t){var r;if(v.isValidElement(e))r=v.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=at("recharts-line-dot",typeof e!="boolean"?e.className:"");r=v.createElement(H9,Gc({},t,{className:n}))}return r}function F4e(e,t){return e==null?!1:t?!0:e.length===1}function $4e(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:i,needClip:o}=n;if(!F4e(r,s))return null;var{id:a}=n,l=UT(n,E4e),c=zU(s),u=Al(l),h=Ht(s,!0),f=r.map((y,m)=>{var b=ui(ui(ui({key:"dot-".concat(m),r:3},u),h),{},{index:m,cx:y.x,cy:y.y,dataKey:i,value:y.value,payload:y.payload,points:r});return z4e(s,b)}),p={clipPath:o?"url(#clipPath-".concat(c?"":"dots-").concat(t,")"):void 0};return v.createElement(Ds,Gc({className:"recharts-line-dots",key:"dots"},p),f)}function DN(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:i,showLabels:o}=e,{type:a,layout:l,connectNulls:c,needClip:u}=i,h=UT(i,C4e),f=ui(ui({},Ht(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:a,layout:l,connectNulls:c,strokeDasharray:s??i.strokeDasharray});return v.createElement(v.Fragment,null,(n==null?void 0:n.length)>1&&v.createElement(jC,Gc({},f,{pathRef:r})),v.createElement($4e,{points:n,clipPathId:t,props:i}),o&&Lc.renderCallByParent(i,n))}function U4e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function q4e(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:h,animateNewValues:f,width:p,height:y,onAnimationEnd:m,onAnimationStart:b}=r,x=s.current,w=eV(r,"recharts-line-"),[_,j]=v.useState(!1),k=v.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),N=v.useCallback(()=>{typeof b=="function"&&b(),j(!0)},[b]),C=U4e(n.current),E=i.current;return v.createElement(nV,{begin:c,duration:u,isActive:l,easing:h,onAnimationEnd:k,onAnimationStart:N,key:w},T=>{var P=jf(E,C+E,T),O=Math.min(P,C),I;if(a){var R="".concat(a).split(/[,\s]+/gim).map(W=>parseFloat(W));I=M4e(O,C,R)}else I=vV(C,O);if(x){var F=x.length/o.length,$=T===1?o:o.map((W,q)=>{var K=Math.floor(q*F);if(x[K]){var Z=x[K];return ui(ui({},W),{},{x:jf(Z.x,W.x,T),y:jf(Z.y,W.y,T)})}return f?ui(ui({},W),{},{x:jf(p*2,W.x,T),y:jf(y/2,W.y,T)}):ui(ui({},W),{},{x:W.x,y:W.y})});return s.current=$,v.createElement(DN,{props:r,points:$,clipPathId:t,pathRef:n,showLabels:!_,strokeDasharray:I})}return T>0&&C>0&&(s.current=o,i.current=O),v.createElement(DN,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!_,strokeDasharray:I})})}function B4e(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:s}=r,i=v.useRef(null),o=v.useRef(0),a=v.useRef(null),l=i.current;return s&&n&&n.length&&l!==n?v.createElement(q4e,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:a}):v.createElement(DN,{props:r,points:n,clipPathId:t,pathRef:a,showLabels:!0})}var V4e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Lt(e.payload,t)});class W4e extends v.Component{render(){var t,{hide:r,dot:n,points:s,className:i,xAxisId:o,yAxisId:a,top:l,left:c,width:u,height:h,id:f,needClip:p}=this.props;if(r)return null;var y=at("recharts-line",i),m=f,{r:b=3,strokeWidth:x=2}=(t=Ht(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=zU(n),_=b*2+x;return v.createElement(v.Fragment,null,v.createElement(Ds,{className:y},p&&v.createElement("defs",null,v.createElement(DRe,{clipPathId:m,xAxisId:o,yAxisId:a}),!w&&v.createElement("clipPath",{id:"clipPath-dots-".concat(m)},v.createElement("rect",{x:c-_/2,y:l-_/2,width:u+_,height:h+_}))),v.createElement(B4e,{props:this.props,clipPathId:m}),v.createElement(IRe,{xAxisId:o,yAxisId:a,data:s,dataPointFormatter:V4e,errorBarOffset:0},this.props.children)),v.createElement(SRe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var bV={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!$h.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function H4e(e){var t=Bs(e,bV),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:u,label:h,legendType:f,xAxisId:p,yAxisId:y,id:m}=t,b=UT(t,T4e),{needClip:x}=aV(p,y),w=MT(),_=wC(),j=qs(),k=Le(P=>S4e(P,p,y,j,m));if(_!=="horizontal"&&_!=="vertical"||k==null||w==null)return null;var{height:N,width:C,x:E,y:T}=w;return v.createElement(W4e,Gc({},b,{id:m,connectNulls:a,dot:l,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:c,label:h,legendType:f,xAxisId:p,yAxisId:y,points:k,layout:_,height:N,width:C,left:E,top:T,needClip:x}))}function K4e(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:a,displayedData:l}=e;return l.map((c,u)=>{var h=Lt(c,o);if(t==="horizontal"){var f=qI({axis:r,ticks:s,bandSize:a,entry:c,index:u}),p=vr(h)?null:n.scale(h);return{x:f,y:p,value:h,payload:c}}var y=vr(h)?null:r.scale(h),m=qI({axis:n,ticks:i,bandSize:a,entry:c,index:u});return y==null||m==null?null:{x:y,y:m,value:h,payload:c}}).filter(Boolean)}function xV(e){var t=Bs(e,bV),r=qs();return v.createElement(tV,{id:t.id,type:"line"},n=>v.createElement(v.Fragment,null,v.createElement(IPe,{legendPayload:I4e(t)}),v.createElement(X9,{fn:D4e,args:t}),v.createElement(KPe,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),v.createElement(H4e,Gc({},t,{id:n}))))}xV.displayName="Line";function W3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function H3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W3(Object(r),!0).forEach(function(n){Z4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z4e(e,t,r){return(t=G4e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G4e(e){var t=Y4e(e,"string");return typeof t=="symbol"?t:t+""}function Y4e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J4e={xAxis:{},yAxis:{},zAxis:{}},wV=cs({name:"cartesianAxis",initialState:J4e,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=H3(H3({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:X4e,removeXAxis:Q4e,addYAxis:eIe,removeYAxis:tIe,addZAxis:aBe,removeZAxis:lBe,updateYAxisWidth:rIe}=wV.actions,nIe=wV.reducer,sIe=["children"],iIe=["dangerouslySetInnerHTML","ticks"];function _V(e,t,r){return(t=oIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oIe(e){var t=aIe(e,"string");return typeof t=="symbol"?t:t+""}function aIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LN(){return LN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LN.apply(null,arguments)}function jV(e,t){if(e==null)return{};var r,n,s=lIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cIe(e){var t=Yt(),r=v.useMemo(()=>{var{children:i}=e,o=jV(e,sIe);return o},[e]),n=Le(i=>ya(i,r.id)),s=r===n;return v.useEffect(()=>(t(X4e(r)),()=>{t(Q4e(r))}),[r,t]),s?e.children:null}var uIe=e=>{var{xAxisId:t,className:r}=e,n=Le(iB),s=qs(),i="xAxis",o=Le(p=>Kh(p,i,t,s)),a=Le(p=>t9(p,i,t,s)),l=Le(p=>pTe(p,t)),c=Le(p=>bTe(p,t));if(l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=e,f=jV(e,iIe);return v.createElement(Ll,LN({},f,{scale:o,x:c.x,y:c.y,width:l.width,height:l.height,className:at("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:a}))},dIe=e=>{var t,r,n,s,i;return v.createElement(cIe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},v.createElement(uIe,e))};class qT extends v.Component{render(){return v.createElement(dIe,this.props)}}_V(qT,"displayName","XAxis");_V(qT,"defaultProps",{allowDataOverflow:Yn.allowDataOverflow,allowDecimals:Yn.allowDecimals,allowDuplicatedCategory:Yn.allowDuplicatedCategory,height:Yn.height,hide:!1,mirror:Yn.mirror,orientation:Yn.orientation,padding:Yn.padding,reversed:Yn.reversed,scale:Yn.scale,tickCount:Yn.tickCount,type:Yn.type,xAxisId:0});var hIe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var a=r?r.getBoundingClientRect().width:0,l=s+i,c=o+l+a+(r?n:0);return Math.round(c)}return 0},fIe=["dangerouslySetInnerHTML","ticks"];function kV(e,t,r){return(t=pIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pIe(e){var t=mIe(e,"string");return typeof t=="symbol"?t:t+""}function mIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MN(){return MN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MN.apply(null,arguments)}function gIe(e,t){if(e==null)return{};var r,n,s=yIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vIe(e){var t=Yt();return v.useEffect(()=>(t(eIe(e)),()=>{t(tIe(e))}),[e,t]),null}var bIe=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=v.useRef(null),a=v.useRef(null),l=Le(iB),c=qs(),u=Yt(),h="yAxis",f=Le(_=>Kh(_,h,r,c)),p=Le(_=>wTe(_,r)),y=Le(_=>xTe(_,r)),m=Le(_=>t9(_,h,r,c));if(v.useLayoutEffect(()=>{var _;if(!(s!=="auto"||!p||OT(i)||v.isValidElement(i))){var j=o.current,k=j==null||(_=j.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:N,tickMargin:C}=j.props,E=hIe({ticks:k,label:a.current,labelGapWithTick:5,tickSize:N,tickMargin:C});Math.round(p.width)!==Math.round(E)&&u(rIe({id:r,width:E}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,u,i,r,s]),p==null||y==null)return null;var{dangerouslySetInnerHTML:b,ticks:x}=e,w=gIe(e,fIe);return v.createElement(Ll,MN({},w,{ref:o,labelRef:a,scale:f,x:y.x,y:y.y,width:p.width,height:p.height,className:at("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:m}))},xIe=e=>{var t,r,n,s,i;return v.createElement(v.Fragment,null,v.createElement(vIe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),v.createElement(bIe,e))},wIe={allowDataOverflow:Jn.allowDataOverflow,allowDecimals:Jn.allowDecimals,allowDuplicatedCategory:Jn.allowDuplicatedCategory,hide:!1,mirror:Jn.mirror,orientation:Jn.orientation,padding:Jn.padding,reversed:Jn.reversed,scale:Jn.scale,tickCount:Jn.tickCount,type:Jn.type,width:Jn.width,yAxisId:0};class BT extends v.Component{render(){return v.createElement(xIe,this.props)}}kV(BT,"displayName","YAxis");kV(BT,"defaultProps",wIe);var q_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K3;function _Ie(){if(K3)return q_;K3=1;var e=ae;function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,a=e.useDebugValue;return q_.useSyncExternalStoreWithSelector=function(l,c,u,h,f){var p=s(null);if(p.current===null){var y={hasValue:!1,value:null};p.current=y}else y=p.current;p=o(function(){function b(k){if(!x){if(x=!0,w=k,k=h(k),f!==void 0&&y.hasValue){var N=y.value;if(f(N,k))return _=N}return _=k}if(N=_,r(w,k))return N;var C=h(k);return f!==void 0&&f(N,C)?(w=k,N):(w=k,_=C)}var x=!1,w,_,j=u===void 0?null:u;return[function(){return b(c())},j===null?void 0:function(){return b(j())}]},[c,u,h,f]);var m=n(l,p[0],p[1]);return i(function(){y.hasValue=!0,y.value=m},[m]),a(m),m},q_}_Ie();function jIe(e){e()}function kIe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){jIe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Z3={notify(){},get:()=>[]};function NIe(e,t){let r,n=Z3,s=0,i=!1;function o(m){u();const b=n.subscribe(m);let x=!1;return()=>{x||(x=!0,b(),h())}}function a(){n.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return i}function u(){s++,r||(r=e.subscribe(l),n=kIe())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=Z3)}function f(){i||(i=!0,u())}function p(){i&&(i=!1,h())}const y={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>n};return y}var SIe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EIe=SIe(),CIe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",TIe=CIe(),AIe=()=>EIe||TIe?v.useLayoutEffect:v.useEffect,OIe=AIe(),G3=Symbol.for("react-redux-context"),Y3=typeof globalThis<"u"?globalThis:{};function PIe(){if(!v.createContext)return{};const e=Y3[G3]??(Y3[G3]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var RIe=PIe();function IIe(e){const{children:t,context:r,serverState:n,store:s}=e,i=v.useMemo(()=>{const l=NIe(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),o=v.useMemo(()=>s.getState(),[s]);OIe(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,o]);const a=r||RIe;return v.createElement(a.Provider,{value:i},t)}var DIe=IIe,LIe=(e,t)=>t,VT=Y([LIe,vt,C7,zr,v9,va,EAe,Wr],PAe),WT=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},NV=Ls("mouseClick"),SV=zm();SV.startListening({actionCreator:NV,effect:(e,t)=>{var r=e.payload,n=VT(t.getState(),WT(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(ITe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var zN=Ls("mouseMove"),EV=zm();EV.startListening({actionCreator:zN,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=_T(n,n.tooltip.settings.shared),i=VT(n,WT(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(d9({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(u9()))}});function MIe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var J3={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},CV=cs({name:"rootProps",initialState:J3,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:J3.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),zIe=CV.reducer,{updateOptions:FIe}=CV.actions,TV=cs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:$Ie}=TV.actions,UIe=TV.reducer,AV=Ls("keyDown"),OV=Ls("focus"),HT=zm();HT.startListening({actionCreator:AV,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(jT(s,Gh(r))),a=va(r);if(i==="Enter"){var l=lb(r,"axis","hover",String(s.index));t.dispatch(AN({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:l}));return}var c=NTe(r),u=c==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,f=o+h*u;if(!(a==null||f>=a.length||f<0)){var p=lb(r,"axis","hover",String(f));t.dispatch(AN({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});HT.startListening({actionCreator:OV,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=lb(r,"axis","hover",String(i));t.dispatch(AN({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var ys=Ls("externalEvent"),PV=zm();PV.startListening({actionCreator:ys,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:yAe(r),activeDataKey:mAe(r),activeIndex:dh(r),activeLabel:w9(r),activeTooltipIndex:dh(r),isTooltipActive:vAe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var qIe=Y([Zh],e=>e.tooltipItemPayloads),BIe=Y([qIe,Zm,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(a=>a.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),RV=Ls("touchMove"),IV=zm();IV.startListening({actionCreator:RV,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=_T(n,n.tooltip.settings.shared);if(s==="axis"){var i=VT(n,WT({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(d9({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,a=r.touches[0],l=document.elementFromPoint(a.clientX,a.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(nB),u=(o=l.getAttribute(sB))!==null&&o!==void 0?o:void 0,h=BIe(t.getState(),c,u);t.dispatch(c9({activeDataKey:u,activeIndex:c,activeCoordinate:h}))}}});var VIe=Tq({brush:LRe,cartesianAxis:nIe,chartData:HAe,errorBars:CRe,graphicalItems:HPe,layout:Lke,legend:xNe,options:UAe,polarAxis:cPe,polarOptions:UIe,referenceElements:BRe,rootProps:zIe,tooltip:DTe}),WIe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return ake({reducer:VIe,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([SV.middleware,EV.middleware,HT.middleware,PV.middleware,IV.middleware]),devTools:{serialize:{replacer:MIe},name:"recharts-".concat(t)}})};function DV(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=qs(),i=v.useRef(null);if(s)return r;i.current==null&&(i.current=WIe(t,n));var o=lC;return v.createElement(DIe,{context:o,store:i.current},r)}function LV(e){var{layout:t,width:r,height:n,margin:s}=e,i=Yt(),o=qs();return v.useEffect(()=>{o||(i(Rke(t)),i(Ike({width:r,height:n})),i(Pke(s)))},[i,o,t,r,n,s]),null}function MV(e){var t=Yt();return v.useEffect(()=>{t(FIe(e))},[t,e]),null}var HIe=["children"];function KIe(e,t){if(e==null)return{};var r,n,s=ZIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ZIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pb.apply(null,arguments)}var GIe={width:"100%",height:"100%"},YIe=v.forwardRef((e,t)=>{var r=bC(),n=xC(),s=uB();if(!oh(r)||!oh(n))return null;var{children:i,otherAttributes:o,title:a,desc:l}=e,c,u;return typeof o.tabIndex=="number"?c=o.tabIndex:c=s?0:void 0,typeof o.role=="string"?u=o.role:u=s?"application":void 0,v.createElement(Z2,pb({},o,{title:a,desc:l,role:u,tabIndex:c,width:r,height:n,style:GIe,ref:t}),i)}),JIe=e=>{var{children:t}=e,r=Le(Gx);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return v.createElement(Z2,{width:n,height:s,x:o,y:i},t)},X3=v.forwardRef((e,t)=>{var{children:r}=e,n=KIe(e,HIe),s=qs();return s?v.createElement(JIe,null,r):v.createElement(YIe,pb({ref:t},n),r)});function XIe(){var e=Yt(),[t,r]=v.useState(null),n=Le(lNe);return v.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;wi(i)&&i!==n&&e(Dke(i))}},[t,e,n]),r}function Q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QIe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q3(Object(r),!0).forEach(function(n){eDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eDe(e,t,r){return(t=tDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tDe(e){var t=rDe(e,"string");return typeof t=="symbol"?t:t+""}function rDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nDe=v.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:p,onTouchMove:y,onTouchStart:m,style:b,width:x}=e,w=Yt(),[_,j]=v.useState(null),[k,N]=v.useState(null);GAe();var C=XIe(),E=v.useCallback(te=>{C(te),typeof t=="function"&&t(te),j(te),N(te)},[C,t,j,N]),T=v.useCallback(te=>{w(NV(te)),w(ys({handler:i,reactEvent:te}))},[w,i]),P=v.useCallback(te=>{w(zN(te)),w(ys({handler:c,reactEvent:te}))},[w,c]),O=v.useCallback(te=>{w(u9()),w(ys({handler:u,reactEvent:te}))},[w,u]),I=v.useCallback(te=>{w(zN(te)),w(ys({handler:h,reactEvent:te}))},[w,h]),R=v.useCallback(()=>{w(OV())},[w]),F=v.useCallback(te=>{w(AV(te.key))},[w]),$=v.useCallback(te=>{w(ys({handler:o,reactEvent:te}))},[w,o]),W=v.useCallback(te=>{w(ys({handler:a,reactEvent:te}))},[w,a]),q=v.useCallback(te=>{w(ys({handler:l,reactEvent:te}))},[w,l]),K=v.useCallback(te=>{w(ys({handler:f,reactEvent:te}))},[w,f]),Z=v.useCallback(te=>{w(ys({handler:m,reactEvent:te}))},[w,m]),z=v.useCallback(te=>{w(RV(te)),w(ys({handler:y,reactEvent:te}))},[w,y]),J=v.useCallback(te=>{w(ys({handler:p,reactEvent:te}))},[w,p]);return v.createElement(E9.Provider,{value:_},v.createElement(FU.Provider,{value:k},v.createElement("div",{className:at("recharts-wrapper",n),style:QIe({position:"relative",cursor:"default",width:x,height:s},b),onClick:T,onContextMenu:$,onDoubleClick:W,onFocus:R,onKeyDown:F,onMouseDown:q,onMouseEnter:P,onMouseLeave:O,onMouseMove:I,onMouseUp:K,onTouchEnd:J,onTouchMove:z,onTouchStart:Z,ref:E},r)))}),sDe=["children","className","width","height","style","compact","title","desc"];function iDe(e,t){if(e==null)return{};var r,n,s=oDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zV=v.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:a,title:l,desc:c}=e,u=iDe(e,sDe),h=Al(u);return a?v.createElement(X3,{otherAttributes:h,title:l,desc:c},r):v.createElement(nDe,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(X3,{otherAttributes:h,title:l,desc:c,ref:t},v.createElement(WRe,null,r)))}),aDe=["width","height"];function FN(){return FN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FN.apply(null,arguments)}function lDe(e,t){if(e==null)return{};var r,n,s=cDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function cDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uDe={top:5,right:5,bottom:5,left:5},dDe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:uDe,reverseStackOrder:!1,syncMethod:"index"},hDe=v.forwardRef(function(e,t){var r,n=Bs(e.categoricalChartProps,dDe),{width:s,height:i}=n,o=lDe(n,aDe);if(!oh(s)||!oh(i))return null;var{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:h}=e,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return v.createElement(DV,{preloadedState:{options:f},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:a},v.createElement(lV,{chartData:h.data}),v.createElement(LV,{width:s,height:i,layout:n.layout,margin:n.margin}),v.createElement(MV,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),v.createElement(zV,FN({},o,{width:s,height:i,ref:t})))}),fDe=["axis"],pDe=v.forwardRef((e,t)=>v.createElement(hDe,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fDe,tooltipPayloadSearcher:A9,categoricalChartProps:e,ref:t}));function mDe(e){var t=Yt();return v.useEffect(()=>{t($Ie(e))},[t,e]),null}var gDe=["width","height","layout"];function $N(){return $N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$N.apply(null,arguments)}function yDe(e,t){if(e==null)return{};var r,n,s=vDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bDe={top:5,right:5,bottom:5,left:5},xDe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:bDe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},wDe=v.forwardRef(function(e,t){var r,n=Bs(e.categoricalChartProps,xDe),{width:s,height:i,layout:o}=n,a=yDe(n,gDe);if(!oh(s)||!oh(i))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return v.createElement(DV,{preloadedState:{options:f},reduxStoreName:(r=n.id)!==null&&r!==void 0?r:l},v.createElement(lV,{chartData:n.data}),v.createElement(LV,{width:s,height:i,layout:o,margin:n.margin}),v.createElement(MV,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),v.createElement(mDe,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),v.createElement(zV,$N({width:s,height:i},a,{ref:t})))}),_De=["item"],jDe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},kDe=v.forwardRef((e,t)=>{var r=Bs(e,jDe);return v.createElement(wDe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:_De,tooltipPayloadSearcher:A9,categoricalChartProps:r,ref:t})});const NDe=async()=>{const{count:e}=await ce.from("profiles").select("id",{count:"exact",head:!0}),{count:t}=await ce.from("subscriptions").select("id",{count:"exact",head:!0}).eq("status","active"),{data:r,error:n}=await ce.from("pages").select("view_count"),{data:s,error:i}=await ce.from("purchases").select("price_id");(n||i)&&console.error("Error fetching key metrics:",{viewsError:n,revenueError:i});const o=(r==null?void 0:r.reduce((l,c)=>l+(c.view_count||0),0))||0,a=((s==null?void 0:s.length)||0)*10;return{totalUsers:e||0,activeSubscribers:t||0,totalRevenue:a,totalViews:o}},SDe=async()=>{const e=new Date;e.setDate(e.getDate()-30);const{data:t,error:r}=await ce.from("profiles").select("created_at").gte("created_at",e.toISOString());if(r)throw new Error(r.message);const n=t.reduce((s,i)=>{const o=new Date(i.created_at).toISOString().split("T")[0];return s[o]=(s[o]||0)+1,s},{});return Object.entries(n).map(([s,i])=>({date:s,count:i})).sort((s,i)=>new Date(s.date).getTime()-new Date(i.date).getTime())},EDe=async()=>{const{data:e,error:t}=await ce.from("subscriptions").select("status");if(t)throw new Error(t.message);const r=e.reduce((n,s)=>{const i=s.status||"unknown";return n[i]=(n[i]||0)+1,n},{});return Object.entries(r).map(([n,s])=>({name:n,value:s}))},CDe=async()=>{const{data:e,error:t}=await ce.from("detailed_audit_log").select("*").order("created_at",{ascending:!1}).limit(5);if(t)throw new Error(t.message);return e},vy=({title:e,value:t,icon:r,color:n})=>d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 flex items-center space-x-4 hover:border-blue-500/50 transition-colors",children:[d.jsx("div",{className:`p-3 rounded-lg bg-${n}-500/20 text-${n}-400`,children:d.jsx(r,{className:"w-6 h-6"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-400",children:e}),d.jsx("p",{className:"text-2xl font-bold text-white",children:t})]})]}),e5=({title:e,children:t,icon:r})=>d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(r,{className:"w-5 h-5 mr-2 text-gray-400"}),d.jsx("h3",{className:"text-lg font-semibold text-white",children:e})]}),d.jsx("div",{className:"h-72",children:t})]}),B_=()=>d.jsx("div",{className:"flex justify-center items-center h-full",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400"})}),V_=({message:e})=>d.jsxs("div",{className:"flex justify-center items-center h-full text-red-400",children:[d.jsx(li,{className:"w-6 h-6 mr-2"}),d.jsxs("p",{children:["Error loading data: ",e]})]}),t5=({message:e,icon:t=uae})=>d.jsxs("div",{className:"flex flex-col justify-center items-center h-full text-gray-500",children:[d.jsx(t,{className:"w-12 h-12 mb-4"}),d.jsx("p",{className:"font-semibold",children:"No Data Available"}),d.jsx("p",{className:"text-sm",children:e})]}),TDe=()=>{const{data:e,isLoading:t}=It({queryKey:["keyMetrics"],queryFn:NDe}),{data:r,isLoading:n,error:s}=It({queryKey:["usersOverTime"],queryFn:SDe}),{data:i,isLoading:o,error:a}=It({queryKey:["subscriptionStatus"],queryFn:EDe}),{data:l,isLoading:c,error:u}=It({queryKey:["recentActivity"],queryFn:CDe}),h=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("header",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Dashboard"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"An overview of your website's performance."})]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:t?d.jsx("p",{className:"text-gray-900 dark:text-white",children:"Loading metrics..."}):d.jsxs(d.Fragment,{children:[d.jsx(vy,{title:"Total Users",value:e==null?void 0:e.totalUsers.toLocaleString(),icon:pv,color:"blue"}),d.jsx(vy,{title:"Active Subscribers",value:e==null?void 0:e.activeSubscribers.toLocaleString(),icon:wae,color:"green"}),d.jsx(vy,{title:"Total Revenue",value:`$${e==null?void 0:e.totalRevenue.toLocaleString()}`,icon:oae,color:"yellow"}),d.jsx(vy,{title:"Total Page Views",value:e==null?void 0:e.totalViews.toLocaleString(),icon:Cm,color:"purple"})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsx(e5,{title:"New Users (Last 30 Days)",icon:fae,children:n?d.jsx(B_,{}):s?d.jsx(V_,{message:s.message}):r&&r.length>0?d.jsx(f3,{width:"100%",height:"100%",children:d.jsxs(pDe,{data:r,children:[d.jsx(fV,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(qT,{dataKey:"date",stroke:"#A0AEC0",tick:{fontSize:12}}),d.jsx(BT,{stroke:"#A0AEC0",tick:{fontSize:12}}),d.jsx(d3,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(Gp,{wrapperStyle:{fontSize:14}}),d.jsx(xV,{type:"monotone",dataKey:"count",name:"New Users",stroke:"#3B82F6",strokeWidth:2,dot:{r:4},activeDot:{r:8}})]})}):d.jsx(t5,{message:"No new user data to display for this period."})}),d.jsx(e5,{title:"Subscription Status",icon:bae,children:o?d.jsx(B_,{}):a?d.jsx(V_,{message:a.message}):i&&i.length>0?d.jsx(f3,{width:"100%",height:"100%",children:d.jsxs(kDe,{children:[d.jsx(iV,{data:i,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",labelLine:!1,label:({name:f,percent:p})=>`${f}: ${(p*100).toFixed(0)}%`,children:i==null?void 0:i.map((f,p)=>d.jsx(uw,{fill:h[p%h.length]},`cell-${p}`))}),d.jsx(d3,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(Gp,{wrapperStyle:{fontSize:14}})]})}):d.jsx(t5,{message:"No subscription data available."})})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(pae,{className:"w-5 h-5 mr-2 text-gray-600 dark:text-gray-300"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"})]}),d.jsx("div",{className:"space-y-4",children:c?d.jsx(B_,{}):u?d.jsx(V_,{message:u.message}):l&&l.length>0?l.map(f=>{var p;return d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[d.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:f.actor_display_name||f.actor_username||"A user"})," ",(p=f.action)==null?void 0:p.toLowerCase(),"."]}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:new Date(f.created_at).toLocaleString()})]},f.id)}):d.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No recent activity found."})})]})]})};let ADe={data:""},ODe=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||ADe,PDe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,RDe=/\/\*[^]*?\*\/|  +/g,r5=/\n+/g,Ka=(e,t)=>{let r="",n="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?Ka(o,i):i+"{"+Ka(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=Ka(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ka.p?Ka.p(i,o):i+":"+o+";")}return r+(t&&s?t+"{"+s+"}":s)+n},ko={},FV=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+FV(e[r]);return t}return e},IDe=(e,t,r,n,s)=>{let i=FV(e),o=ko[i]||(ko[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!ko[o]){let l=i!==e?e:(c=>{let u,h,f=[{}];for(;u=PDe.exec(c.replace(RDe,""));)u[4]?f.shift():u[3]?(h=u[3].replace(r5," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(r5," ").trim();return f[0]})(e);ko[o]=Ka(s?{["@keyframes "+o]:l}:l,r?"":"."+o)}let a=r&&ko.g?ko.g:null;return r&&(ko.g=ko[o]),((l,c,u,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(ko[o],t,n,a),o},DDe=(e,t,r)=>e.reduce((n,s,i)=>{let o=t[i];if(o&&o.call){let a=o(r),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Ka(a,""):a===!1?"":a}return n+s+(o??"")},"");function hw(e){let t=this||{},r=e.call?e(t.p):e;return IDe(r.unshift?r.raw?DDe(r,[].slice.call(arguments,1),t.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):r,ODe(t.target),t.g,t.o,t.k)}let $V,UN,qN;hw.bind({g:1});let la=hw.bind({k:1});function LDe(e,t,r,n){Ka.p=t,$V=e,UN=r,qN=n}function Ml(e,t){let r=this||{};return function(){let n=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;r.p=Object.assign({theme:UN&&UN()},a),r.o=/ *go\d+/.test(l),a.className=hw.apply(r,n)+(l?" "+l:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),qN&&c[0]&&qN(a),$V(c,a)}return s}}var MDe=e=>typeof e=="function",mb=(e,t)=>MDe(e)?e(t):e,zDe=(()=>{let e=0;return()=>(++e).toString()})(),UV=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),FDe=20,KT="default",qV=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return qV(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},By=[],BV={toasts:[],pausedAt:void 0,settings:{toastLimit:FDe}},Ki={},VV=(e,t=KT)=>{Ki[t]=qV(Ki[t]||BV,e),By.forEach(([r,n])=>{r===t&&n(Ki[t])})},WV=e=>Object.keys(Ki).forEach(t=>VV(e,t)),$De=e=>Object.keys(Ki).find(t=>Ki[t].toasts.some(r=>r.id===e)),fw=(e=KT)=>t=>{VV(t,e)},UDe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},qDe=(e={},t=KT)=>{let[r,n]=v.useState(Ki[t]||BV),s=v.useRef(Ki[t]);v.useEffect(()=>(s.current!==Ki[t]&&n(Ki[t]),By.push([t,n]),()=>{let o=By.findIndex(([a])=>a===t);o>-1&&By.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var a,l,c;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||UDe[o.type],style:{...e.style,...(c=e[o.type])==null?void 0:c.style,...o.style}}});return{...r,toasts:i}},BDe=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||zDe()}),Ym=e=>(t,r)=>{let n=BDe(t,e,r);return fw(n.toasterId||$De(n.id))({type:2,toast:n}),n.id},or=(e,t)=>Ym("blank")(e,t);or.error=Ym("error");or.success=Ym("success");or.loading=Ym("loading");or.custom=Ym("custom");or.dismiss=(e,t)=>{let r={type:3,toastId:e};t?fw(t)(r):WV(r)};or.dismissAll=e=>or.dismiss(void 0,e);or.remove=(e,t)=>{let r={type:4,toastId:e};t?fw(t)(r):WV(r)};or.removeAll=e=>or.remove(void 0,e);or.promise=(e,t,r)=>{let n=or.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?mb(t.success,s):void 0;return i?or.success(i,{id:n,...r,...r==null?void 0:r.success}):or.dismiss(n),s}).catch(s=>{let i=t.error?mb(t.error,s):void 0;i?or.error(i,{id:n,...r,...r==null?void 0:r.error}):or.dismiss(n)}),e};var VDe=1e3,WDe=(e,t="default")=>{let{toasts:r,pausedAt:n}=qDe(e,t),s=v.useRef(new Map).current,i=v.useCallback((h,f=VDe)=>{if(s.has(h))return;let p=setTimeout(()=>{s.delete(h),o({type:4,toastId:h})},f);s.set(h,p)},[]);v.useEffect(()=>{if(n)return;let h=Date.now(),f=r.map(p=>{if(p.duration===1/0)return;let y=(p.duration||0)+p.pauseDuration-(h-p.createdAt);if(y<0){p.visible&&or.dismiss(p.id);return}return setTimeout(()=>or.dismiss(p.id,t),y)});return()=>{f.forEach(p=>p&&clearTimeout(p))}},[r,n,t]);let o=v.useCallback(fw(t),[t]),a=v.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=v.useCallback((h,f)=>{o({type:1,toast:{id:h,height:f}})},[o]),c=v.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=v.useCallback((h,f)=>{let{reverseOrder:p=!1,gutter:y=8,defaultPosition:m}=f||{},b=r.filter(_=>(_.position||m)===(h.position||m)&&_.height),x=b.findIndex(_=>_.id===h.id),w=b.filter((_,j)=>j<x&&_.visible).length;return b.filter(_=>_.visible).slice(...p?[w+1]:[0,w]).reduce((_,j)=>_+(j.height||0)+y,0)},[r]);return v.useEffect(()=>{r.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let f=s.get(h.id);f&&(clearTimeout(f),s.delete(h.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},HDe=la`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,KDe=la`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ZDe=la`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,GDe=Ml("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${HDe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${KDe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ZDe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,YDe=la`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,JDe=Ml("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${YDe} 1s linear infinite;
`,XDe=la`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,QDe=la`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,e3e=Ml("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${XDe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${QDe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,t3e=Ml("div")`
  position: absolute;
`,r3e=Ml("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,n3e=la`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,s3e=Ml("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${n3e} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,i3e=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?v.createElement(s3e,null,t):t:r==="blank"?null:v.createElement(r3e,null,v.createElement(JDe,{...n}),r!=="loading"&&v.createElement(t3e,null,r==="error"?v.createElement(GDe,{...n}):v.createElement(e3e,{...n})))},o3e=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,a3e=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,l3e="0%{opacity:0;} 100%{opacity:1;}",c3e="0%{opacity:1;} 100%{opacity:0;}",u3e=Ml("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,d3e=Ml("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,h3e=(e,t)=>{let r=e.includes("top")?1:-1,[n,s]=UV()?[l3e,c3e]:[o3e(r),a3e(r)];return{animation:t?`${la(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${la(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},f3e=v.memo(({toast:e,position:t,style:r,children:n})=>{let s=e.height?h3e(e.position||t||"top-center",e.visible):{opacity:0},i=v.createElement(i3e,{toast:e}),o=v.createElement(d3e,{...e.ariaProps},mb(e.message,e));return v.createElement(u3e,{className:e.className,style:{...s,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):v.createElement(v.Fragment,null,i,o))});LDe(v.createElement);var p3e=({id:e,className:t,style:r,onHeightUpdate:n,children:s})=>{let i=v.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;n(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return v.createElement("div",{ref:i,className:t,style:r},s)},m3e=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:UV()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...s}},g3e=hw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,by=16,y3e=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=WDe(r,i);return v.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:by,left:by,right:by,bottom:by,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let h=u.position||t,f=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),p=m3e(h,f);return v.createElement(p3e,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?g3e:"",style:p},u.type==="custom"?mb(u.message,u):s?s(u):v.createElement(f3e,{toast:u,position:h}))}))},$i=or;function v3e(){return{toast:({title:e,description:t,variant:r})=>{r==="destructive"?or.error(e,{id:e,duration:5e3,style:{background:"#fee2e2",color:"#ef4444",border:"1px solid #fca5a5"},iconTheme:{primary:"#ef4444",secondary:"#fee2e2"}}):or.success(e,{id:e,duration:3e3,style:{background:"#dcfce7",color:"#22c55e",border:"1px solid #86efac"},iconTheme:{primary:"#22c55e",secondary:"#dcfce7"}})}}}const nn=v3e(),b3e=async()=>{const{data:e,error:t}=await ce.from("homepage_content").select("*");if(t)throw new Error(t.message);return e},x3e=async e=>{const{id:t,...r}=e,{data:n,error:s}=await ce.from("homepage_content").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},w3e=async e=>{const{data:t,error:r}=await ce.from("homepage_content").insert(e).select();if(r)throw new Error(r.message);return t[0]},_3e=async()=>{const{data:e,error:t}=await ce.from("news_items").select("*").order("date",{ascending:!1});if(t)throw new Error(t.message);return e},j3e=async e=>{const{data:t,error:r}=await ce.from("news_items").insert(e).select();if(r)throw new Error(r.message);return t[0]},k3e=async e=>{const{data:t,error:r}=await ce.from("news_items").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},N3e=async e=>{const{error:t}=await ce.from("news_items").delete().eq("id",e);if(t)throw new Error(t.message)},S3e=async()=>{const{data:e,error:t}=await ce.from("release_items").select("*").order("release_date",{ascending:!1});if(t)throw new Error(t.message);return e},E3e=async e=>{const{data:t,error:r}=await ce.from("release_items").insert(e).select();if(r)throw new Error(r.message);return t[0]},C3e=async e=>{const{data:t,error:r}=await ce.from("release_items").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},T3e=async e=>{const{error:t}=await ce.from("release_items").delete().eq("id",e);if(t)throw new Error(t.message)},A3e=()=>{var e,t,r,n,s,i,o,a;const l=fa(),{data:c,isLoading:u,isError:h,error:f}=It({queryKey:["homepageContent"],queryFn:b3e}),{data:p,isLoading:y,isError:m,error:b}=It({queryKey:["newsItems"],queryFn:_3e}),{data:x,isLoading:w,isError:_,error:j}=It({queryKey:["releaseItems"],queryFn:S3e}),k=tr({mutationFn:x3e,onSuccess:()=>{l.invalidateQueries({queryKey:["homepageContent"]}),nn.toast({title:"Content updated successfully!",variant:"default"})},onError:U=>{nn.toast({title:`Error updating content: ${U.message}`,variant:"destructive"})}}),N=tr({mutationFn:w3e,onSuccess:()=>{l.invalidateQueries({queryKey:["homepageContent"]}),nn.toast({title:"Content created successfully!",variant:"default"})},onError:U=>{nn.toast({title:`Error creating content: ${U.message}`,variant:"destructive"})}}),C=tr({mutationFn:j3e,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),nn.toast({title:"News item added successfully!",variant:"default"}),G()},onError:U=>{nn.toast({title:`Error adding news item: ${U.message}`,variant:"destructive"})}}),E=tr({mutationFn:k3e,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),nn.toast({title:"News item updated successfully!",variant:"default"}),G()},onError:U=>{nn.toast({title:`Error updating news item: ${U.message}`,variant:"destructive"})}}),T=tr({mutationFn:N3e,onSuccess:()=>{l.invalidateQueries({queryKey:["newsItems"]}),nn.toast({title:"News item deleted successfully!",variant:"default"})},onError:U=>{nn.toast({title:`Error deleting news item: ${U.message}`,variant:"destructive"})}}),P=tr({mutationFn:E3e,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),nn.toast({title:"Release item added successfully!",variant:"default"}),V()},onError:U=>{nn.toast({title:`Error adding release item: ${U.message}`,variant:"destructive"})}}),O=tr({mutationFn:C3e,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),nn.toast({title:"Release item updated successfully!",variant:"default"}),V()},onError:U=>{nn.toast({title:`Error updating release item: ${U.message}`,variant:"destructive"})}}),I=tr({mutationFn:T3e,onSuccess:()=>{l.invalidateQueries({queryKey:["releaseItems"]}),nn.toast({title:"Release item deleted successfully!",variant:"default"})},onError:U=>{nn.toast({title:`Error deleting release item: ${U.message}`,variant:"destructive"})}}),[R,F]=v.useState(!1),[$,W]=v.useState(null),[q,K]=v.useState(!1),[Z,z]=v.useState(null),J=U=>c==null?void 0:c.find(Se=>Se.section===U),te=async U=>{U.preventDefault();const Se=U.target,Re=Se.heroTitle.value,Qe=Se.heroDescription.value,Xe=Se.heroButtonText.value,pt=Se.heroButtonLink.value,Jt=[{section:"hero_title",content:Re},{section:"hero_description",content:Qe},{section:"hero_button_text",content:Xe},{section:"hero_button_link",content:pt}];for(const D of Jt){const B=J(D.section);B?k.mutate({...B,content:D.content}):N.mutate(D)}},be=async U=>{U.preventDefault();const Se=U.target,Re=Se.wordsWritten.value,Qe=Se.betaReaders.value,Xe=Se.averageRating.value,pt=Se.booksPublished.value,Jt=[{section:"stat_words_written",content:Re},{section:"stat_beta_readers",content:Qe},{section:"stat_average_rating",content:Xe},{section:"stat_books_published",content:pt}];for(const D of Jt){const B=J(D.section);B?k.mutate({...B,content:D.content}):N.mutate(D)}},H=(U=null)=>{W(U),F(!0)},G=()=>{W(null),F(!1)},fe=U=>{U.preventDefault();const Se=U.target,Re=Se.newsTitle.value,Qe=Se.newsContent.value,Xe=Se.newsStatus.value,pt=Se.newsDate.value,Jt={title:Re,content:Qe,status:Xe,date:pt};$?E.mutate({...$,...Jt}):C.mutate(Jt)},pe=U=>{window.confirm("Are you sure you want to delete this news item?")&&T.mutate(U)},ke=(U=null)=>{z(U),K(!0)},V=()=>{z(null),K(!1)},X=U=>{U.preventDefault();const Se=U.target,Re=Se.releaseTitle.value,Qe=Se.releaseType.value,Xe=Se.releaseStatus.value,pt=Se.releaseDescription.value,Jt=Se.releaseDate.value,D=Se.purchaseLink.value,B={title:Re,type:Qe,status:Xe,description:pt,release_date:Jt,purchase_link:D};Z?O.mutate({...Z,...B}):P.mutate(B)},le=U=>{window.confirm("Are you sure you want to delete this release item?")&&I.mutate(U)};return u||y||w?d.jsx("div",{className:"text-center py-8",children:"Loading homepage content manager..."}):h?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error: ",f==null?void 0:f.message]}):m?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading news: ",b==null?void 0:b.message]}):_?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading releases: ",j==null?void 0:j.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-4",role:"alert",children:[d.jsx("strong",{children:"Note:"})," Changes made here will be reflected on your homepage immediately after saving."]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Hero Section"}),d.jsx("div",{className:"p-6",children:d.jsxs("form",{onSubmit:te,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Main Title"}),d.jsx("input",{type:"text",id:"heroTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((e=J("hero_title"))==null?void 0:e.content)||""})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroDescription",className:"block text-gray-700 text-sm font-bold mb-2",children:"Subtitle/Description"}),d.jsx("textarea",{id:"heroDescription",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-32 resize-y",defaultValue:((t=J("hero_description"))==null?void 0:t.content)||""})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"heroButtonText",className:"block text-gray-700 text-sm font-bold mb-2",children:"Button Text"}),d.jsx("input",{type:"text",id:"heroButtonText",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((r=J("hero_button_text"))==null?void 0:r.content)||""})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{htmlFor:"heroButtonLink",className:"block text-gray-700 text-sm font-bold mb-2",children:"Button Link"}),d.jsx("input",{type:"url",id:"heroButtonLink",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((n=J("hero_button_link"))==null?void 0:n.content)||""})]}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Hero Section"})]})})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Statistics"}),d.jsx("div",{className:"p-6",children:d.jsxs("form",{onSubmit:be,children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"wordsWritten",className:"block text-gray-700 text-sm font-bold mb-2",children:"Words Written"}),d.jsx("input",{type:"text",id:"wordsWritten",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((s=J("stat_words_written"))==null?void 0:s.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"betaReaders",className:"block text-gray-700 text-sm font-bold mb-2",children:"Beta Readers"}),d.jsx("input",{type:"text",id:"betaReaders",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((i=J("stat_beta_readers"))==null?void 0:i.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"averageRating",className:"block text-gray-700 text-sm font-bold mb-2",children:"Average Rating"}),d.jsx("input",{type:"text",id:"averageRating",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((o=J("stat_average_rating"))==null?void 0:o.content)||""})]}),d.jsxs("div",{className:"stat-item p-4 border border-gray-200 rounded-md",children:[d.jsx("label",{htmlFor:"booksPublished",className:"block text-gray-700 text-sm font-bold mb-2",children:"Books Published"}),d.jsx("input",{type:"text",id:"booksPublished",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:((a=J("stat_books_published"))==null?void 0:a.content)||""})]})]}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Statistics"})]})})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Latest News & Updates"}),d.jsxs("div",{className:"p-6",children:[d.jsx("button",{onClick:()=>H(),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-4",children:"+ Add New Update"}),p==null?void 0:p.map(U=>d.jsxs("div",{className:"bg-gray-100 p-4 rounded-md mb-2 relative",children:[d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsx("button",{onClick:()=>H(U),className:"bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"Edit"}),d.jsx("button",{onClick:()=>pe(U.id),className:"bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Delete"})]}),d.jsx("h3",{className:"font-bold text-lg mb-1",children:U.title}),d.jsx("p",{className:"text-gray-700 text-sm",children:U.content}),d.jsxs("small",{className:"text-gray-500",children:["Status: ",U.status," | Date: ",U.date]})]},U.id))]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-8 overflow-hidden",children:[d.jsx("div",{className:"bg-blue-600 text-white p-4 font-semibold",children:"Latest Releases"}),d.jsxs("div",{className:"p-6",children:[d.jsx("button",{onClick:()=>ke(),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-4",children:"+ Add New Release"}),x==null?void 0:x.map(U=>d.jsxs("div",{className:"bg-gray-100 p-4 rounded-md mb-2 relative",children:[d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsx("button",{onClick:()=>ke(U),className:"bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"Edit"}),d.jsx("button",{onClick:()=>le(U.id),className:"bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Delete"})]}),d.jsx("h3",{className:"font-bold text-lg mb-1",children:U.title}),d.jsxs("p",{className:"text-gray-700 text-sm",children:[d.jsx("strong",{children:"Type:"})," ",U.type," | ",d.jsx("strong",{children:"Status:"})," ",U.status]}),d.jsxs("small",{className:"text-gray-500",children:["Released: ",U.release_date]})]},U.id))]})]}),R&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:$?"Edit Update":"Add New Update"}),d.jsx("button",{onClick:G,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),d.jsxs("form",{onSubmit:fe,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newsTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),d.jsx("input",{type:"text",id:"newsTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:($==null?void 0:$.title)||"",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newsContent",className:"block text-gray-700 text-sm font-bold mb-2",children:"Content"}),d.jsx("textarea",{id:"newsContent",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 resize-y",defaultValue:($==null?void 0:$.content)||"",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newsStatus",className:"block text-gray-700 text-sm font-bold mb-2",children:"Status"}),d.jsxs("select",{id:"newsStatus",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:($==null?void 0:$.status)||"draft",children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newsDate",className:"block text-gray-700 text-sm font-bold mb-2",children:"Date"}),d.jsx("input",{type:"date",id:"newsDate",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:($==null?void 0:$.date)||new Date().toISOString().split("T")[0],required:!0})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:G,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Update"})]})]})]})}),q&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:Z?"Edit Release":"Add New Release"}),d.jsx("button",{onClick:V,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),d.jsxs("form",{onSubmit:X,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"releaseTitle",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),d.jsx("input",{type:"text",id:"releaseTitle",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(Z==null?void 0:Z.title)||"",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseType",className:"block text-gray-700 text-sm font-bold mb-2",children:"Type"}),d.jsxs("select",{id:"releaseType",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(Z==null?void 0:Z.type)||"issue",children:[d.jsx("option",{value:"issue",children:"Issue"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"volume",children:"Volume"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseStatus",className:"block text-gray-700 text-sm font-bold mb-2",children:"Status"}),d.jsxs("select",{id:"releaseStatus",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(Z==null?void 0:Z.status)||"available",children:[d.jsx("option",{value:"available",children:"Available"}),d.jsx("option",{value:"coming-soon",children:"Coming Soon"}),d.jsx("option",{value:"pre-order",children:"Pre-order"})]})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"releaseDescription",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),d.jsx("textarea",{id:"releaseDescription",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 resize-y",defaultValue:(Z==null?void 0:Z.description)||""})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"releaseDate",className:"block text-gray-700 text-sm font-bold mb-2",children:"Release Date"}),d.jsx("input",{type:"date",id:"releaseDate",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(Z==null?void 0:Z.release_date)||new Date().toISOString().split("T")[0],required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"purchaseLink",className:"block text-gray-700 text-sm font-bold mb-2",children:"Purchase Link"}),d.jsx("input",{type:"url",id:"purchaseLink",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",defaultValue:(Z==null?void 0:Z.purchase_link)||""})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:V,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Release"})]})]})]})})]})};var HV=typeof global=="object"&&global&&global.Object===Object&&global,O3e=typeof self=="object"&&self&&self.Object===Object&&self,po=HV||O3e||Function("return this")(),xl=po.Symbol,KV=Object.prototype,P3e=KV.hasOwnProperty,R3e=KV.toString,Of=xl?xl.toStringTag:void 0;function I3e(e){var t=P3e.call(e,Of),r=e[Of];try{e[Of]=void 0;var n=!0}catch{}var s=R3e.call(e);return n&&(t?e[Of]=r:delete e[Of]),s}var D3e=Object.prototype,L3e=D3e.toString;function M3e(e){return L3e.call(e)}var z3e="[object Null]",F3e="[object Undefined]",n5=xl?xl.toStringTag:void 0;function Yh(e){return e==null?e===void 0?F3e:z3e:n5&&n5 in Object(e)?I3e(e):M3e(e)}function ca(e){return e!=null&&typeof e=="object"}var Yc=Array.isArray;function zl(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ZV(e){return e}var $3e="[object AsyncFunction]",U3e="[object Function]",q3e="[object GeneratorFunction]",B3e="[object Proxy]";function ZT(e){if(!zl(e))return!1;var t=Yh(e);return t==U3e||t==q3e||t==$3e||t==B3e}var W_=po["__core-js_shared__"],s5=function(){var e=/[^.]+$/.exec(W_&&W_.keys&&W_.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function V3e(e){return!!s5&&s5 in e}var W3e=Function.prototype,H3e=W3e.toString;function hu(e){if(e!=null){try{return H3e.call(e)}catch{}try{return e+""}catch{}}return""}var K3e=/[\\^$.*+?()[\]{}|]/g,Z3e=/^\[object .+?Constructor\]$/,G3e=Function.prototype,Y3e=Object.prototype,J3e=G3e.toString,X3e=Y3e.hasOwnProperty,Q3e=RegExp("^"+J3e.call(X3e).replace(K3e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function e5e(e){if(!zl(e)||V3e(e))return!1;var t=ZT(e)?Q3e:Z3e;return t.test(hu(e))}function t5e(e,t){return e==null?void 0:e[t]}function fu(e,t){var r=t5e(e,t);return e5e(r)?r:void 0}var BN=fu(po,"WeakMap"),i5=Object.create,r5e=function(){function e(){}return function(t){if(!zl(t))return{};if(i5)return i5(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function n5e(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function s5e(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var i5e=800,o5e=16,a5e=Date.now;function l5e(e){var t=0,r=0;return function(){var n=a5e(),s=o5e-(n-r);if(r=n,s>0){if(++t>=i5e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function c5e(e){return function(){return e}}var gb=function(){try{var e=fu(Object,"defineProperty");return e({},"",{}),e}catch{}}(),u5e=gb?function(e,t){return gb(e,"toString",{configurable:!0,enumerable:!1,value:c5e(t),writable:!0})}:ZV,d5e=l5e(u5e);function h5e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var f5e=9007199254740991,p5e=/^(?:0|[1-9]\d*)$/;function GV(e,t){var r=typeof e;return t=t??f5e,!!t&&(r=="number"||r!="symbol"&&p5e.test(e))&&e>-1&&e%1==0&&e<t}function GT(e,t,r){t=="__proto__"&&gb?gb(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Jm(e,t){return e===t||e!==e&&t!==t}var m5e=Object.prototype,g5e=m5e.hasOwnProperty;function YV(e,t,r){var n=e[t];(!(g5e.call(e,t)&&Jm(n,r))||r===void 0&&!(t in e))&&GT(e,t,r)}function y5e(e,t,r,n){var s=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],l=void 0;l===void 0&&(l=e[a]),s?GT(r,a,l):YV(r,a,l)}return r}var o5=Math.max;function v5e(e,t,r){return t=o5(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=o5(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=r(o),n5e(e,this,a)}}function b5e(e,t){return d5e(v5e(e,t,ZV),e+"")}var x5e=9007199254740991;function JV(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=x5e}function pw(e){return e!=null&&JV(e.length)&&!ZT(e)}function w5e(e,t,r){if(!zl(r))return!1;var n=typeof t;return(n=="number"?pw(r)&&GV(t,r.length):n=="string"&&t in r)?Jm(r[t],e):!1}function _5e(e){return b5e(function(t,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(s--,i):void 0,o&&w5e(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var a=r[n];a&&e(t,a,n,i)}return t})}var j5e=Object.prototype;function YT(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||j5e;return e===r}function k5e(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var N5e="[object Arguments]";function a5(e){return ca(e)&&Yh(e)==N5e}var XV=Object.prototype,S5e=XV.hasOwnProperty,E5e=XV.propertyIsEnumerable,VN=a5(function(){return arguments}())?a5:function(e){return ca(e)&&S5e.call(e,"callee")&&!E5e.call(e,"callee")};function C5e(){return!1}var QV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,l5=QV&&typeof module=="object"&&module&&!module.nodeType&&module,T5e=l5&&l5.exports===QV,c5=T5e?po.Buffer:void 0,A5e=c5?c5.isBuffer:void 0,nm=A5e||C5e,O5e="[object Arguments]",P5e="[object Array]",R5e="[object Boolean]",I5e="[object Date]",D5e="[object Error]",L5e="[object Function]",M5e="[object Map]",z5e="[object Number]",F5e="[object Object]",$5e="[object RegExp]",U5e="[object Set]",q5e="[object String]",B5e="[object WeakMap]",V5e="[object ArrayBuffer]",W5e="[object DataView]",H5e="[object Float32Array]",K5e="[object Float64Array]",Z5e="[object Int8Array]",G5e="[object Int16Array]",Y5e="[object Int32Array]",J5e="[object Uint8Array]",X5e="[object Uint8ClampedArray]",Q5e="[object Uint16Array]",eLe="[object Uint32Array]",At={};At[H5e]=At[K5e]=At[Z5e]=At[G5e]=At[Y5e]=At[J5e]=At[X5e]=At[Q5e]=At[eLe]=!0;At[O5e]=At[P5e]=At[V5e]=At[R5e]=At[W5e]=At[I5e]=At[D5e]=At[L5e]=At[M5e]=At[z5e]=At[F5e]=At[$5e]=At[U5e]=At[q5e]=At[B5e]=!1;function tLe(e){return ca(e)&&JV(e.length)&&!!At[Yh(e)]}function JT(e){return function(t){return e(t)}}var eW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xp=eW&&typeof module=="object"&&module&&!module.nodeType&&module,rLe=xp&&xp.exports===eW,H_=rLe&&HV.process,hh=function(){try{var e=xp&&xp.require&&xp.require("util").types;return e||H_&&H_.binding&&H_.binding("util")}catch{}}(),u5=hh&&hh.isTypedArray,XT=u5?JT(u5):tLe,nLe=Object.prototype,sLe=nLe.hasOwnProperty;function tW(e,t){var r=Yc(e),n=!r&&VN(e),s=!r&&!n&&nm(e),i=!r&&!n&&!s&&XT(e),o=r||n||s||i,a=o?k5e(e.length,String):[],l=a.length;for(var c in e)(t||sLe.call(e,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||GV(c,l)))&&a.push(c);return a}function rW(e,t){return function(r){return e(t(r))}}var iLe=rW(Object.keys,Object),oLe=Object.prototype,aLe=oLe.hasOwnProperty;function lLe(e){if(!YT(e))return iLe(e);var t=[];for(var r in Object(e))aLe.call(e,r)&&r!="constructor"&&t.push(r);return t}function cLe(e){return pw(e)?tW(e):lLe(e)}function uLe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var dLe=Object.prototype,hLe=dLe.hasOwnProperty;function fLe(e){if(!zl(e))return uLe(e);var t=YT(e),r=[];for(var n in e)n=="constructor"&&(t||!hLe.call(e,n))||r.push(n);return r}function nW(e){return pw(e)?tW(e,!0):fLe(e)}var sm=fu(Object,"create");function pLe(){this.__data__=sm?sm(null):{},this.size=0}function mLe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gLe="__lodash_hash_undefined__",yLe=Object.prototype,vLe=yLe.hasOwnProperty;function bLe(e){var t=this.__data__;if(sm){var r=t[e];return r===gLe?void 0:r}return vLe.call(t,e)?t[e]:void 0}var xLe=Object.prototype,wLe=xLe.hasOwnProperty;function _Le(e){var t=this.__data__;return sm?t[e]!==void 0:wLe.call(t,e)}var jLe="__lodash_hash_undefined__";function kLe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=sm&&t===void 0?jLe:t,this}function Jc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jc.prototype.clear=pLe;Jc.prototype.delete=mLe;Jc.prototype.get=bLe;Jc.prototype.has=_Le;Jc.prototype.set=kLe;function NLe(){this.__data__=[],this.size=0}function mw(e,t){for(var r=e.length;r--;)if(Jm(e[r][0],t))return r;return-1}var SLe=Array.prototype,ELe=SLe.splice;function CLe(e){var t=this.__data__,r=mw(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():ELe.call(t,r,1),--this.size,!0}function TLe(e){var t=this.__data__,r=mw(t,e);return r<0?void 0:t[r][1]}function ALe(e){return mw(this.__data__,e)>-1}function OLe(e,t){var r=this.__data__,n=mw(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ba(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ba.prototype.clear=NLe;ba.prototype.delete=CLe;ba.prototype.get=TLe;ba.prototype.has=ALe;ba.prototype.set=OLe;var im=fu(po,"Map");function PLe(){this.size=0,this.__data__={hash:new Jc,map:new(im||ba),string:new Jc}}function RLe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function gw(e,t){var r=e.__data__;return RLe(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ILe(e){var t=gw(this,e).delete(e);return this.size-=t?1:0,t}function DLe(e){return gw(this,e).get(e)}function LLe(e){return gw(this,e).has(e)}function MLe(e,t){var r=gw(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function pu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pu.prototype.clear=PLe;pu.prototype.delete=ILe;pu.prototype.get=DLe;pu.prototype.has=LLe;pu.prototype.set=MLe;function zLe(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var sW=rW(Object.getPrototypeOf,Object),FLe="[object Object]",$Le=Function.prototype,ULe=Object.prototype,iW=$Le.toString,qLe=ULe.hasOwnProperty,BLe=iW.call(Object);function VLe(e){if(!ca(e)||Yh(e)!=FLe)return!1;var t=sW(e);if(t===null)return!0;var r=qLe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&iW.call(r)==BLe}function WLe(){this.__data__=new ba,this.size=0}function HLe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function KLe(e){return this.__data__.get(e)}function ZLe(e){return this.__data__.has(e)}var GLe=200;function YLe(e,t){var r=this.__data__;if(r instanceof ba){var n=r.__data__;if(!im||n.length<GLe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new pu(n)}return r.set(e,t),this.size=r.size,this}function Qi(e){var t=this.__data__=new ba(e);this.size=t.size}Qi.prototype.clear=WLe;Qi.prototype.delete=HLe;Qi.prototype.get=KLe;Qi.prototype.has=ZLe;Qi.prototype.set=YLe;var oW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,d5=oW&&typeof module=="object"&&module&&!module.nodeType&&module,JLe=d5&&d5.exports===oW,h5=JLe?po.Buffer:void 0,f5=h5?h5.allocUnsafe:void 0;function aW(e,t){if(t)return e.slice();var r=e.length,n=f5?f5(r):new e.constructor(r);return e.copy(n),n}function XLe(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}function QLe(){return[]}var eMe=Object.prototype,tMe=eMe.propertyIsEnumerable,p5=Object.getOwnPropertySymbols,rMe=p5?function(e){return e==null?[]:(e=Object(e),XLe(p5(e),function(t){return tMe.call(e,t)}))}:QLe;function nMe(e,t,r){var n=t(e);return Yc(e)?n:zLe(n,r(e))}function WN(e){return nMe(e,cLe,rMe)}var HN=fu(po,"DataView"),KN=fu(po,"Promise"),ZN=fu(po,"Set"),m5="[object Map]",sMe="[object Object]",g5="[object Promise]",y5="[object Set]",v5="[object WeakMap]",b5="[object DataView]",iMe=hu(HN),oMe=hu(im),aMe=hu(KN),lMe=hu(ZN),cMe=hu(BN),di=Yh;(HN&&di(new HN(new ArrayBuffer(1)))!=b5||im&&di(new im)!=m5||KN&&di(KN.resolve())!=g5||ZN&&di(new ZN)!=y5||BN&&di(new BN)!=v5)&&(di=function(e){var t=Yh(e),r=t==sMe?e.constructor:void 0,n=r?hu(r):"";if(n)switch(n){case iMe:return b5;case oMe:return m5;case aMe:return g5;case lMe:return y5;case cMe:return v5}return t});var uMe=Object.prototype,dMe=uMe.hasOwnProperty;function hMe(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&dMe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var yb=po.Uint8Array;function QT(e){var t=new e.constructor(e.byteLength);return new yb(t).set(new yb(e)),t}function fMe(e,t){var r=QT(e.buffer);return new e.constructor(r,e.byteOffset,e.byteLength)}var pMe=/\w*$/;function mMe(e){var t=new e.constructor(e.source,pMe.exec(e));return t.lastIndex=e.lastIndex,t}var x5=xl?xl.prototype:void 0,w5=x5?x5.valueOf:void 0;function gMe(e){return w5?Object(w5.call(e)):{}}function lW(e,t){var r=t?QT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var yMe="[object Boolean]",vMe="[object Date]",bMe="[object Map]",xMe="[object Number]",wMe="[object RegExp]",_Me="[object Set]",jMe="[object String]",kMe="[object Symbol]",NMe="[object ArrayBuffer]",SMe="[object DataView]",EMe="[object Float32Array]",CMe="[object Float64Array]",TMe="[object Int8Array]",AMe="[object Int16Array]",OMe="[object Int32Array]",PMe="[object Uint8Array]",RMe="[object Uint8ClampedArray]",IMe="[object Uint16Array]",DMe="[object Uint32Array]";function LMe(e,t,r){var n=e.constructor;switch(t){case NMe:return QT(e);case yMe:case vMe:return new n(+e);case SMe:return fMe(e);case EMe:case CMe:case TMe:case AMe:case OMe:case PMe:case RMe:case IMe:case DMe:return lW(e,r);case bMe:return new n;case xMe:case jMe:return new n(e);case wMe:return mMe(e);case _Me:return new n;case kMe:return gMe(e)}}function cW(e){return typeof e.constructor=="function"&&!YT(e)?r5e(sW(e)):{}}var MMe="[object Map]";function zMe(e){return ca(e)&&di(e)==MMe}var _5=hh&&hh.isMap,FMe=_5?JT(_5):zMe,$Me="[object Set]";function UMe(e){return ca(e)&&di(e)==$Me}var j5=hh&&hh.isSet,qMe=j5?JT(j5):UMe,BMe=1,uW="[object Arguments]",VMe="[object Array]",WMe="[object Boolean]",HMe="[object Date]",KMe="[object Error]",dW="[object Function]",ZMe="[object GeneratorFunction]",GMe="[object Map]",YMe="[object Number]",hW="[object Object]",JMe="[object RegExp]",XMe="[object Set]",QMe="[object String]",e6e="[object Symbol]",t6e="[object WeakMap]",r6e="[object ArrayBuffer]",n6e="[object DataView]",s6e="[object Float32Array]",i6e="[object Float64Array]",o6e="[object Int8Array]",a6e="[object Int16Array]",l6e="[object Int32Array]",c6e="[object Uint8Array]",u6e="[object Uint8ClampedArray]",d6e="[object Uint16Array]",h6e="[object Uint32Array]",kt={};kt[uW]=kt[VMe]=kt[r6e]=kt[n6e]=kt[WMe]=kt[HMe]=kt[s6e]=kt[i6e]=kt[o6e]=kt[a6e]=kt[l6e]=kt[GMe]=kt[YMe]=kt[hW]=kt[JMe]=kt[XMe]=kt[QMe]=kt[e6e]=kt[c6e]=kt[u6e]=kt[d6e]=kt[h6e]=!0;kt[KMe]=kt[dW]=kt[t6e]=!1;function Vy(e,t,r,n,s,i){var o,a=t&BMe;if(o!==void 0)return o;if(!zl(e))return e;var l=Yc(e);if(l)o=hMe(e);else{var c=di(e),u=c==dW||c==ZMe;if(nm(e))return aW(e,a);if(c==hW||c==uW||u&&!s)o=u?{}:cW(e);else{if(!kt[c])return s?e:{};o=LMe(e,c,a)}}i||(i=new Qi);var h=i.get(e);if(h)return h;i.set(e,o),qMe(e)?e.forEach(function(y){o.add(Vy(y,t,r,y,e,i))}):FMe(e)&&e.forEach(function(y,m){o.set(m,Vy(y,t,r,m,e,i))});var f=WN,p=l?void 0:f(e);return h5e(p||e,function(y,m){p&&(m=y,y=e[m]),YV(o,m,Vy(y,t,r,m,e,i))}),o}var f6e=1,p6e=4;function Sd(e){return Vy(e,f6e|p6e)}var m6e="__lodash_hash_undefined__";function g6e(e){return this.__data__.set(e,m6e),this}function y6e(e){return this.__data__.has(e)}function vb(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new pu;++t<r;)this.add(e[t])}vb.prototype.add=vb.prototype.push=g6e;vb.prototype.has=y6e;function v6e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function b6e(e,t){return e.has(t)}var x6e=1,w6e=2;function fW(e,t,r,n,s,i){var o=r&x6e,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var h=-1,f=!0,p=r&w6e?new vb:void 0;for(i.set(e,t),i.set(t,e);++h<a;){var y=e[h],m=t[h];if(n)var b=o?n(m,y,h,t,e,i):n(y,m,h,e,t,i);if(b!==void 0){if(b)continue;f=!1;break}if(p){if(!v6e(t,function(x,w){if(!b6e(p,w)&&(y===x||s(y,x,r,n,i)))return p.push(w)})){f=!1;break}}else if(!(y===m||s(y,m,r,n,i))){f=!1;break}}return i.delete(e),i.delete(t),f}function _6e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}function j6e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var k6e=1,N6e=2,S6e="[object Boolean]",E6e="[object Date]",C6e="[object Error]",T6e="[object Map]",A6e="[object Number]",O6e="[object RegExp]",P6e="[object Set]",R6e="[object String]",I6e="[object Symbol]",D6e="[object ArrayBuffer]",L6e="[object DataView]",k5=xl?xl.prototype:void 0,K_=k5?k5.valueOf:void 0;function M6e(e,t,r,n,s,i,o){switch(r){case L6e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D6e:return!(e.byteLength!=t.byteLength||!i(new yb(e),new yb(t)));case S6e:case E6e:case A6e:return Jm(+e,+t);case C6e:return e.name==t.name&&e.message==t.message;case O6e:case R6e:return e==t+"";case T6e:var a=_6e;case P6e:var l=n&k6e;if(a||(a=j6e),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=N6e,o.set(e,t);var u=fW(a(e),a(t),n,s,i,o);return o.delete(e),u;case I6e:if(K_)return K_.call(e)==K_.call(t)}return!1}var z6e=1,F6e=Object.prototype,$6e=F6e.hasOwnProperty;function U6e(e,t,r,n,s,i){var o=r&z6e,a=WN(e),l=a.length,c=WN(t),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in t:$6e.call(t,f)))return!1}var p=i.get(e),y=i.get(t);if(p&&y)return p==t&&y==e;var m=!0;i.set(e,t),i.set(t,e);for(var b=o;++h<l;){f=a[h];var x=e[f],w=t[f];if(n)var _=o?n(w,x,f,t,e,i):n(x,w,f,e,t,i);if(!(_===void 0?x===w||s(x,w,r,n,i):_)){m=!1;break}b||(b=f=="constructor")}if(m&&!b){var j=e.constructor,k=t.constructor;j!=k&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof k=="function"&&k instanceof k)&&(m=!1)}return i.delete(e),i.delete(t),m}var q6e=1,N5="[object Arguments]",S5="[object Array]",xy="[object Object]",B6e=Object.prototype,E5=B6e.hasOwnProperty;function V6e(e,t,r,n,s,i){var o=Yc(e),a=Yc(t),l=o?S5:di(e),c=a?S5:di(t);l=l==N5?xy:l,c=c==N5?xy:c;var u=l==xy,h=c==xy,f=l==c;if(f&&nm(e)){if(!nm(t))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new Qi),o||XT(e)?fW(e,t,r,n,s,i):M6e(e,t,l,r,n,s,i);if(!(r&q6e)){var p=u&&E5.call(e,"__wrapped__"),y=h&&E5.call(t,"__wrapped__");if(p||y){var m=p?e.value():e,b=y?t.value():t;return i||(i=new Qi),s(m,b,r,n,i)}}return f?(i||(i=new Qi),U6e(e,t,r,n,s,i)):!1}function pW(e,t,r,n,s){return e===t?!0:e==null||t==null||!ca(e)&&!ca(t)?e!==e&&t!==t:V6e(e,t,r,n,pW,s)}function W6e(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),a=o.length;a--;){var l=o[++s];if(r(i[l],l,i)===!1)break}return t}}var H6e=W6e();function GN(e,t,r){(r!==void 0&&!Jm(e[t],r)||r===void 0&&!(t in e))&&GT(e,t,r)}function K6e(e){return ca(e)&&pw(e)}function YN(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Z6e(e){return y5e(e,nW(e))}function G6e(e,t,r,n,s,i,o){var a=YN(e,r),l=YN(t,r),c=o.get(l);if(c){GN(e,r,c);return}var u=i?i(a,l,r+"",e,t,o):void 0,h=u===void 0;if(h){var f=Yc(l),p=!f&&nm(l),y=!f&&!p&&XT(l);u=l,f||p||y?Yc(a)?u=a:K6e(a)?u=s5e(a):p?(h=!1,u=aW(l,!0)):y?(h=!1,u=lW(l,!0)):u=[]:VLe(l)||VN(l)?(u=a,VN(a)?u=Z6e(a):(!zl(a)||ZT(a))&&(u=cW(l))):h=!1}h&&(o.set(l,u),s(u,l,n,i,o),o.delete(l)),GN(e,r,u)}function mW(e,t,r,n,s){e!==t&&H6e(t,function(i,o){if(s||(s=new Qi),zl(i))G6e(e,t,o,r,mW,n,s);else{var a=n?n(YN(e,o),i,o+"",e,t,s):void 0;a===void 0&&(a=i),GN(e,o,a)}},nW)}function Za(e,t){return pW(e,t)}var ul=_5e(function(e,t,r){mW(e,t,r)}),Pe=(e=>(e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY",e))(Pe||{});class oo{constructor(t,r,n={}){this.attrName=t,this.keyName=r;const s=Pe.TYPE&Pe.ATTRIBUTE;this.scope=n.scope!=null?n.scope&Pe.LEVEL|s:Pe.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map(r=>r.name)}add(t,r){return this.canAdd(t,r)?(t.setAttribute(this.keyName,r),!0):!1}canAdd(t,r){return this.whitelist==null?!0:typeof r=="string"?this.whitelist.indexOf(r.replace(/["']/g,""))>-1:this.whitelist.indexOf(r)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const r=t.getAttribute(this.keyName);return this.canAdd(t,r)&&r?r:""}}class Ed extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const gW=class JN{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,r=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(r){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,r)}return null}create(t,r,n){const s=this.query(r);if(s==null)throw new Ed(`Unable to create ${r} blot`);const i=s,o=r instanceof Node||r.nodeType===Node.TEXT_NODE?r:i.create(n),a=new i(t,o,n);return JN.blots.set(a.domNode,a),a}find(t,r=!1){return JN.find(t,r)}query(t,r=Pe.ANY){let n;return typeof t=="string"?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:typeof t=="number"?t&Pe.LEVEL&Pe.BLOCK?n=this.types.block:t&Pe.LEVEL&Pe.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(s=>(n=this.classes[s],!!n)),n=n||this.tags[t.tagName]),n==null?null:"scope"in n&&r&Pe.LEVEL&n.scope&&r&Pe.TYPE&n.scope?n:null}register(...t){return t.map(r=>{const n="blotName"in r,s="attrName"in r;if(!n&&!s)throw new Ed("Invalid definition");if(n&&r.blotName==="abstract")throw new Ed("Cannot register abstract class");const i=n?r.blotName:s?r.attrName:void 0;return this.types[i]=r,s?typeof r.keyName=="string"&&(this.attributes[r.keyName]=r):n&&(r.className&&(this.classes[r.className]=r),r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map(o=>o.toUpperCase()):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach(o=>{(this.tags[o]==null||r.className==null)&&(this.tags[o]=r)}))),r})}};gW.blots=new WeakMap;let fh=gW;function C5(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(r=>r.indexOf(`${t}-`)===0)}class Y6e extends oo{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(r=>r.split("-").slice(0,-1).join("-"))}add(t,r){return this.canAdd(t,r)?(this.remove(t),t.classList.add(`${this.keyName}-${r}`),!0):!1}remove(t){C5(t,this.keyName).forEach(r=>{t.classList.remove(r)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const r=(C5(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,r)?r:""}}const Ei=Y6e;function Z_(e){const t=e.split("-"),r=t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return t[0]+r}class J6e extends oo{static keys(t){return(t.getAttribute("style")||"").split(";").map(r=>r.split(":")[0].trim())}add(t,r){return this.canAdd(t,r)?(t.style[Z_(this.keyName)]=r,!0):!1}remove(t){t.style[Z_(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const r=t.style[Z_(this.keyName)];return this.canAdd(t,r)?r:""}}const Fl=J6e;class X6e{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,r){r?t.add(this.domNode,r)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=fh.find(this.domNode);if(t==null)return;const r=oo.keys(this.domNode),n=Ei.keys(this.domNode),s=Fl.keys(this.domNode);r.concat(n).concat(s).forEach(i=>{const o=t.scroll.query(i,Pe.ATTRIBUTE);o instanceof oo&&(this.attributes[o.attrName]=o)})}copy(t){Object.keys(this.attributes).forEach(r=>{const n=this.attributes[r].value(this.domNode);t.format(r,n)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(r=>{this.attributes[r].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,r)=>(t[r]=this.attributes[r].value(this.domNode),t),{})}}const yw=X6e,yW=class{constructor(e,t){this.scroll=e,this.domNode=t,fh.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Ed("Blot definition missing tagName");let t,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?t=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?t=document.createElement(r):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),fh.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,n){const s=this.isolate(e,t);if(this.scroll.query(r,Pe.BLOT)!=null&&n)s.wrap(r,n);else if(this.scroll.query(r,Pe.ATTRIBUTE)!=null){const i=this.scroll.create(this.statics.scope);s.wrap(i),i.format(r,n)}}insertAt(e,t,r){const n=r==null?this.scroll.create("text",t):this.scroll.create(t,r),s=this.split(e);this.parent.insertBefore(n,s||void 0)}isolate(e,t){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const r=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Ed(`Cannot wrap ${e}`);return r.appendChild(this),r}};yW.blotName="abstract";let vW=yW;const bW=class extends vW{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};bW.scope=Pe.INLINE_BLOT;let Q6e=bW;const un=Q6e;class eze{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const r=t.slice(1);this.append(...r)}}at(t){const r=this.iterator();let n=r();for(;n&&t>0;)t-=1,n=r();return n}contains(t){const r=this.iterator();let n=r();for(;n;){if(n===t)return!0;n=r()}return!1}indexOf(t){const r=this.iterator();let n=r(),s=0;for(;n;){if(n===t)return s;s+=1,n=r()}return-1}insertBefore(t,r){t!=null&&(this.remove(t),t.next=r,r!=null?(t.prev=r.prev,r.prev!=null&&(r.prev.next=t),r.prev=t,r===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let r=0,n=this.head;for(;n!=null;){if(n===t)return r;r+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const r=t;return t!=null&&(t=t.next),r}}find(t,r=!1){const n=this.iterator();let s=n();for(;s;){const i=s.length();if(t<i||r&&t===i&&(s.next==null||s.next.length()!==0))return[s,t];t-=i,s=n()}return[null,0]}forEach(t){const r=this.iterator();let n=r();for(;n;)t(n),n=r()}forEachAt(t,r,n){if(r<=0)return;const[s,i]=this.find(t);let o=t-i;const a=this.iterator(s);let l=a();for(;l&&o<t+r;){const c=l.length();t>o?n(l,t-o,Math.min(r,o+c-t)):n(l,0,Math.min(c,t+r-o)),o+=c,l=a()}}map(t){return this.reduce((r,n)=>(r.push(t(n)),r),[])}reduce(t,r){const n=this.iterator();let s=n();for(;s;)r=t(r,s),s=n();return r}}function T5(e,t){const r=t.find(e);if(r)return r;try{return t.create(e)}catch{const n=t.create(Pe.INLINE);return Array.from(e.childNodes).forEach(s=>{n.domNode.appendChild(s)}),e.parentNode&&e.parentNode.replaceChild(n.domNode,e),n.attach(),n}}const xW=class Ua extends vW{constructor(t,r){super(t,r),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,Ua.uiClass&&this.uiNode.classList.add(Ua.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new eze,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const r=T5(t,this.scroll);this.insertBefore(r,this.children.head||void 0)}catch(r){if(r instanceof Ed)return;throw r}})}deleteAt(t,r){if(t===0&&r===this.length())return this.remove();this.children.forEachAt(t,r,(n,s,i)=>{n.deleteAt(s,i)})}descendant(t,r=0){const[n,s]=this.children.find(r);return t.blotName==null&&t(n)||t.blotName!=null&&n instanceof t?[n,s]:n instanceof Ua?n.descendant(t,s):[null,-1]}descendants(t,r=0,n=Number.MAX_VALUE){let s=[],i=n;return this.children.forEachAt(r,n,(o,a,l)=>{(t.blotName==null&&t(o)||t.blotName!=null&&o instanceof t)&&s.push(o),o instanceof Ua&&(s=s.concat(o.descendants(t,a,i))),i-=l}),s}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(r=>{t||this.statics.allowedChildren.some(n=>r instanceof n)||(r.statics.scope===Pe.BLOCK_BLOT?(r.next!=null&&this.splitAfter(r),r.prev!=null&&this.splitAfter(r.prev),r.parent.unwrap(),t=!0):r instanceof Ua?r.unwrap():r.remove())})}formatAt(t,r,n,s){this.children.forEachAt(t,r,(i,o,a)=>{i.formatAt(o,a,n,s)})}insertAt(t,r,n){const[s,i]=this.children.find(t);if(s)s.insertAt(i,r,n);else{const o=n==null?this.scroll.create("text",r):this.scroll.create(r,n);this.appendChild(o)}}insertBefore(t,r){t.parent!=null&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,r||null),t.parent=this,r!=null&&(n=r.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce((t,r)=>t+r.length(),0)}moveChildren(t,r){this.children.forEach(n=>{t.insertBefore(n,r)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const r=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(r)}else this.remove()}path(t,r=!1){const[n,s]=this.children.find(t,r),i=[[this,t]];return n instanceof Ua?i.concat(n.path(s,r)):(n!=null&&i.push([n,s]),i)}removeChild(t){this.children.remove(t)}replaceWith(t,r){const n=typeof t=="string"?this.scroll.create(t,r):t;return n instanceof Ua&&this.moveChildren(n),super.replaceWith(n)}split(t,r=!1){if(!r){if(t===0)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(s,i,o)=>{const a=s.split(i,r);a!=null&&n.appendChild(a)}),n}splitAfter(t){const r=this.clone();for(;t.next!=null;)r.appendChild(t.next);return this.parent&&this.parent.insertBefore(r,this.next||void 0),r}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,r){const n=[],s=[];t.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(n.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(i);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),n.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,o)=>i===o?0:i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let o=null;i.nextSibling!=null&&(o=this.scroll.find(i.nextSibling));const a=T5(i,this.scroll);(a.next!==o||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};xW.uiClass="";let tze=xW;const yi=tze;function rze(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}const Ku=class Zu extends yi{static create(t){return super.create(t)}static formats(t,r){const n=r.query(Zu.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,r){super(t,r),this.attributes=new yw(this.domNode)}format(t,r){if(t===this.statics.blotName&&!r)this.children.forEach(n=>{n instanceof Zu||(n=n.wrap(Zu.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{const n=this.scroll.query(t,Pe.INLINE);if(n==null)return;n instanceof oo?this.attributes.attribute(n,r):r&&(t!==this.statics.blotName||this.formats()[t]!==r)&&this.replaceWith(t,r)}}formats(){const t=this.attributes.values(),r=this.statics.formats(this.domNode,this.scroll);return r!=null&&(t[this.statics.blotName]=r),t}formatAt(t,r,n,s){this.formats()[n]!=null||this.scroll.query(n,Pe.ATTRIBUTE)?this.isolate(t,r).format(n,s):super.formatAt(t,r,n,s)}optimize(t){super.optimize(t);const r=this.formats();if(Object.keys(r).length===0)return this.unwrap();const n=this.next;n instanceof Zu&&n.prev===this&&rze(r,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,r){const n=super.replaceWith(t,r);return this.attributes.copy(n),n}update(t,r){super.update(t,r),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(t,r){const n=super.wrap(t,r);return n instanceof Zu&&this.attributes.move(n),n}};Ku.allowedChildren=[Ku,un],Ku.blotName="inline",Ku.scope=Pe.INLINE_BLOT,Ku.tagName="SPAN";let nze=Ku;const eA=nze,Gu=class XN extends yi{static create(t){return super.create(t)}static formats(t,r){const n=r.query(XN.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,r){super(t,r),this.attributes=new yw(this.domNode)}format(t,r){const n=this.scroll.query(t,Pe.BLOCK);n!=null&&(n instanceof oo?this.attributes.attribute(n,r):t===this.statics.blotName&&!r?this.replaceWith(XN.blotName):r&&(t!==this.statics.blotName||this.formats()[t]!==r)&&this.replaceWith(t,r))}formats(){const t=this.attributes.values(),r=this.statics.formats(this.domNode,this.scroll);return r!=null&&(t[this.statics.blotName]=r),t}formatAt(t,r,n,s){this.scroll.query(n,Pe.BLOCK)!=null?this.format(n,s):super.formatAt(t,r,n,s)}insertAt(t,r,n){if(n==null||this.scroll.query(r,Pe.INLINE)!=null)super.insertAt(t,r,n);else{const s=this.split(t);if(s!=null){const i=this.scroll.create(r,n);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,r){const n=super.replaceWith(t,r);return this.attributes.copy(n),n}update(t,r){super.update(t,r),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};Gu.blotName="block",Gu.scope=Pe.BLOCK_BLOT,Gu.tagName="P",Gu.allowedChildren=[eA,Gu,un];let sze=Gu;const om=sze,QN=class extends yi{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,n){super.formatAt(e,t,r,n),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};QN.blotName="container",QN.scope=Pe.BLOCK_BLOT;let ize=QN;const vw=ize;class oze extends un{static formats(t,r){}format(t,r){super.formatAt(0,this.length(),t,r)}formatAt(t,r,n,s){t===0&&r===this.length()?this.format(n,s):super.formatAt(t,r,n,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const us=oze,aze={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},lze=100,Yu=class extends yi{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,aze),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=Pe.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,n){this.update(),super.formatAt(e,t,r,n)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);const r=t.mutationsMap||new WeakMap;let n=Array.from(this.observer.takeRecords());for(;n.length>0;)e.push(n.pop());const s=(a,l=!0)=>{a==null||a===this||a.domNode.parentNode!=null&&(r.has(a.domNode)||r.set(a.domNode,[]),l&&s(a.parent))},i=a=>{r.has(a.domNode)&&(a instanceof yi&&a.children.forEach(i),r.delete(a.domNode),a.optimize(t))};let o=e;for(let a=0;o.length>0;a+=1){if(a>=lze)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(l=>{const c=this.find(l.target,!0);c!=null&&(c.domNode===l.target&&(l.type==="childList"?(s(this.find(l.previousSibling,!1)),Array.from(l.addedNodes).forEach(u=>{const h=this.find(u,!1);s(h,!1),h instanceof yi&&h.children.forEach(f=>{s(f,!1)})})):l.type==="attributes"&&s(c.prev)),s(c))}),this.children.forEach(i),o=Array.from(this.observer.takeRecords()),n=o.slice();n.length>0;)e.push(n.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(n=>{const s=this.find(n.target,!0);return s==null?null:r.has(s.domNode)?(r.get(s.domNode).push(n),null):(r.set(s.domNode,[n]),s)}).forEach(n=>{n!=null&&n!==this&&r.has(n.domNode)&&n.update(r.get(n.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};Yu.blotName="scroll",Yu.defaultChild=om,Yu.allowedChildren=[om,vw],Yu.scope=Pe.BLOCK_BLOT,Yu.tagName="DIV";let cze=Yu;const tA=cze,eS=class wW extends un{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,r){super(t,r),this.text=this.statics.value(this.domNode)}deleteAt(t,r){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+r)}index(t,r){return this.domNode===t?r:-1}insertAt(t,r,n){n==null?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,r,n)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof wW&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,r=!1){return[this.domNode,t]}split(t,r=!1){if(!r){if(t===0)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,r){t.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};eS.blotName="text",eS.scope=Pe.INLINE_BLOT;let uze=eS;const bb=uze,dze=Object.freeze(Object.defineProperty({__proto__:null,Attributor:oo,AttributorStore:yw,BlockBlot:om,ClassAttributor:Ei,ContainerBlot:vw,EmbedBlot:us,InlineBlot:eA,LeafBlot:un,ParentBlot:yi,Registry:fh,Scope:Pe,ScrollBlot:tA,StyleAttributor:Fl,TextBlot:bb},Symbol.toStringTag,{value:"Module"}));var tS={exports:{}},ss=-1,Cn=1,Or=0;function am(e,t,r,n,s){if(e===t)return e?[[Or,e]]:[];if(r!=null){var i=xze(e,t,r);if(i)return i}var o=rA(e,t),a=e.substring(0,o);e=e.substring(o),t=t.substring(o),o=bw(e,t);var l=e.substring(e.length-o);e=e.substring(0,e.length-o),t=t.substring(0,t.length-o);var c=hze(e,t);return a&&c.unshift([Or,a]),l&&c.push([Or,l]),nA(c,s),n&&mze(c),c}function hze(e,t){var r;if(!e)return[[Cn,t]];if(!t)return[[ss,e]];var n=e.length>t.length?e:t,s=e.length>t.length?t:e,i=n.indexOf(s);if(i!==-1)return r=[[Cn,n.substring(0,i)],[Or,s],[Cn,n.substring(i+s.length)]],e.length>t.length&&(r[0][0]=r[2][0]=ss),r;if(s.length===1)return[[ss,e],[Cn,t]];var o=pze(e,t);if(o){var a=o[0],l=o[1],c=o[2],u=o[3],h=o[4],f=am(a,c),p=am(l,u);return f.concat([[Or,h]],p)}return fze(e,t)}function fze(e,t){for(var r=e.length,n=t.length,s=Math.ceil((r+n)/2),i=s,o=2*s,a=new Array(o),l=new Array(o),c=0;c<o;c++)a[c]=-1,l[c]=-1;a[i+1]=0,l[i+1]=0;for(var u=r-n,h=u%2!==0,f=0,p=0,y=0,m=0,b=0;b<s;b++){for(var x=-b+f;x<=b-p;x+=2){var w=i+x,_;x===-b||x!==b&&a[w-1]<a[w+1]?_=a[w+1]:_=a[w-1]+1;for(var j=_-x;_<r&&j<n&&e.charAt(_)===t.charAt(j);)_++,j++;if(a[w]=_,_>r)p+=2;else if(j>n)f+=2;else if(h){var k=i+u-x;if(k>=0&&k<o&&l[k]!==-1){var N=r-l[k];if(_>=N)return A5(e,t,_,j)}}}for(var C=-b+y;C<=b-m;C+=2){var k=i+C,N;C===-b||C!==b&&l[k-1]<l[k+1]?N=l[k+1]:N=l[k-1]+1;for(var E=N-C;N<r&&E<n&&e.charAt(r-N-1)===t.charAt(n-E-1);)N++,E++;if(l[k]=N,N>r)m+=2;else if(E>n)y+=2;else if(!h){var w=i+u-C;if(w>=0&&w<o&&a[w]!==-1){var _=a[w],j=i+_-w;if(N=r-N,_>=N)return A5(e,t,_,j)}}}}return[[ss,e],[Cn,t]]}function A5(e,t,r,n){var s=e.substring(0,r),i=t.substring(0,n),o=e.substring(r),a=t.substring(n),l=am(s,i),c=am(o,a);return l.concat(c)}function rA(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,i=0;r<s;)e.substring(i,s)==t.substring(i,s)?(r=s,i=r):n=s,s=Math.floor((n-r)/2+r);return _W(e.charCodeAt(s-1))&&s--,s}function O5(e,t){var r=e.length,n=t.length;if(r==0||n==0)return 0;r>n?e=e.substring(r-n):r<n&&(t=t.substring(0,r));var s=Math.min(r,n);if(e==t)return s;for(var i=0,o=1;;){var a=e.substring(s-o),l=t.indexOf(a);if(l==-1)return i;o+=l,(l==0||e.substring(s-o)==t.substring(0,o))&&(i=o,o++)}}function bw(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,i=0;r<s;)e.substring(e.length-s,e.length-i)==t.substring(t.length-s,t.length-i)?(r=s,i=r):n=s,s=Math.floor((n-r)/2+r);return jW(e.charCodeAt(e.length-s))&&s--,s}function pze(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||n.length*2<r.length)return null;function s(p,y,m){for(var b=p.substring(m,m+Math.floor(p.length/4)),x=-1,w="",_,j,k,N;(x=y.indexOf(b,x+1))!==-1;){var C=rA(p.substring(m),y.substring(x)),E=bw(p.substring(0,m),y.substring(0,x));w.length<E+C&&(w=y.substring(x-E,x)+y.substring(x,x+C),_=p.substring(0,m-E),j=p.substring(m+C),k=y.substring(0,x-E),N=y.substring(x+C))}return w.length*2>=p.length?[_,j,k,N,w]:null}var i=s(r,n,Math.ceil(r.length/4)),o=s(r,n,Math.ceil(r.length/2)),a;if(!i&&!o)return null;o?i?a=i[4].length>o[4].length?i:o:a=o:a=i;var l,c,u,h;e.length>t.length?(l=a[0],c=a[1],u=a[2],h=a[3]):(u=a[0],h=a[1],l=a[2],c=a[3]);var f=a[4];return[l,c,u,h,f]}function mze(e){for(var t=!1,r=[],n=0,s=null,i=0,o=0,a=0,l=0,c=0;i<e.length;)e[i][0]==Or?(r[n++]=i,o=l,a=c,l=0,c=0,s=e[i][1]):(e[i][0]==Cn?l+=e[i][1].length:c+=e[i][1].length,s&&s.length<=Math.max(o,a)&&s.length<=Math.max(l,c)&&(e.splice(r[n-1],0,[ss,s]),e[r[n-1]+1][0]=Cn,n--,n--,i=n>0?r[n-1]:-1,o=0,a=0,l=0,c=0,s=null,t=!0)),i++;for(t&&nA(e),vze(e),i=1;i<e.length;){if(e[i-1][0]==ss&&e[i][0]==Cn){var u=e[i-1][1],h=e[i][1],f=O5(u,h),p=O5(h,u);f>=p?(f>=u.length/2||f>=h.length/2)&&(e.splice(i,0,[Or,h.substring(0,f)]),e[i-1][1]=u.substring(0,u.length-f),e[i+1][1]=h.substring(f),i++):(p>=u.length/2||p>=h.length/2)&&(e.splice(i,0,[Or,u.substring(0,p)]),e[i-1][0]=Cn,e[i-1][1]=h.substring(0,h.length-p),e[i+1][0]=ss,e[i+1][1]=u.substring(p),i++),i++}i++}}var P5=/[^a-zA-Z0-9]/,R5=/\s/,I5=/[\r\n]/,gze=/\n\r?\n$/,yze=/^\r?\n\r?\n/;function vze(e){function t(p,y){if(!p||!y)return 6;var m=p.charAt(p.length-1),b=y.charAt(0),x=m.match(P5),w=b.match(P5),_=x&&m.match(R5),j=w&&b.match(R5),k=_&&m.match(I5),N=j&&b.match(I5),C=k&&p.match(gze),E=N&&y.match(yze);return C||E?5:k||N?4:x&&!_&&j?3:_||j?2:x||w?1:0}for(var r=1;r<e.length-1;){if(e[r-1][0]==Or&&e[r+1][0]==Or){var n=e[r-1][1],s=e[r][1],i=e[r+1][1],o=bw(n,s);if(o){var a=s.substring(s.length-o);n=n.substring(0,n.length-o),s=a+s.substring(0,s.length-o),i=a+i}for(var l=n,c=s,u=i,h=t(n,s)+t(s,i);s.charAt(0)===i.charAt(0);){n+=s.charAt(0),s=s.substring(1)+i.charAt(0),i=i.substring(1);var f=t(n,s)+t(s,i);f>=h&&(h=f,l=n,c=s,u=i)}e[r-1][1]!=l&&(l?e[r-1][1]=l:(e.splice(r-1,1),r--),e[r][1]=c,u?e[r+1][1]=u:(e.splice(r+1,1),r--))}r++}}function nA(e,t){e.push([Or,""]);for(var r=0,n=0,s=0,i="",o="",a;r<e.length;){if(r<e.length-1&&!e[r][1]){e.splice(r,1);continue}switch(e[r][0]){case Cn:s++,o+=e[r][1],r++;break;case ss:n++,i+=e[r][1],r++;break;case Or:var l=r-s-n-1;if(t){if(l>=0&&NW(e[l][1])){var c=e[l][1].slice(-1);if(e[l][1]=e[l][1].slice(0,-1),i=c+i,o=c+o,!e[l][1]){e.splice(l,1),r--;var u=l-1;e[u]&&e[u][0]===Cn&&(s++,o=e[u][1]+o,u--),e[u]&&e[u][0]===ss&&(n++,i=e[u][1]+i,u--),l=u}}if(kW(e[r][1])){var c=e[r][1].charAt(0);e[r][1]=e[r][1].slice(1),i+=c,o+=c}}if(r<e.length-1&&!e[r][1]){e.splice(r,1);break}if(i.length>0||o.length>0){i.length>0&&o.length>0&&(a=rA(o,i),a!==0&&(l>=0?e[l][1]+=o.substring(0,a):(e.splice(0,0,[Or,o.substring(0,a)]),r++),o=o.substring(a),i=i.substring(a)),a=bw(o,i),a!==0&&(e[r][1]=o.substring(o.length-a)+e[r][1],o=o.substring(0,o.length-a),i=i.substring(0,i.length-a)));var h=s+n;i.length===0&&o.length===0?(e.splice(r-h,h),r=r-h):i.length===0?(e.splice(r-h,h,[Cn,o]),r=r-h+1):o.length===0?(e.splice(r-h,h,[ss,i]),r=r-h+1):(e.splice(r-h,h,[ss,i],[Cn,o]),r=r-h+2)}r!==0&&e[r-1][0]===Or?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,s=0,n=0,i="",o="";break}}e[e.length-1][1]===""&&e.pop();var f=!1;for(r=1;r<e.length-1;)e[r-1][0]===Or&&e[r+1][0]===Or&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)===e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),f=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),f=!0)),r++;f&&nA(e,t)}function _W(e){return e>=55296&&e<=56319}function jW(e){return e>=56320&&e<=57343}function kW(e){return jW(e.charCodeAt(0))}function NW(e){return _W(e.charCodeAt(e.length-1))}function bze(e){for(var t=[],r=0;r<e.length;r++)e[r][1].length>0&&t.push(e[r]);return t}function G_(e,t,r,n){return NW(e)||kW(n)?null:bze([[Or,e],[ss,t],[Cn,r],[Or,n]])}function xze(e,t,r){var n=typeof r=="number"?{index:r,length:0}:r.oldRange,s=typeof r=="number"?null:r.newRange,i=e.length,o=t.length;if(n.length===0&&(s===null||s.length===0)){var a=n.index,l=e.slice(0,a),c=e.slice(a),u=s?s.index:null;e:{var h=a+o-i;if(u!==null&&u!==h||h<0||h>o)break e;var f=t.slice(0,h),p=t.slice(h);if(p!==c)break e;var y=Math.min(a,h),m=l.slice(0,y),b=f.slice(0,y);if(m!==b)break e;var x=l.slice(y),w=f.slice(y);return G_(m,x,w,c)}e:{if(u!==null&&u!==a)break e;var _=a,f=t.slice(0,_),p=t.slice(_);if(f!==l)break e;var j=Math.min(i-_,o-_),k=c.slice(c.length-j),N=p.slice(p.length-j);if(k!==N)break e;var x=c.slice(0,c.length-j),w=p.slice(0,p.length-j);return G_(l,x,w,k)}}if(n.length>0&&s&&s.length===0)e:{var m=e.slice(0,n.index),k=e.slice(n.index+n.length),y=m.length,j=k.length;if(o<y+j)break e;var b=t.slice(0,y),N=t.slice(o-j);if(m!==b||k!==N)break e;var x=e.slice(y,i-j),w=t.slice(y,o-j);return G_(m,x,w,k)}return null}function xw(e,t,r,n){return am(e,t,r,n,!0)}xw.INSERT=Cn;xw.DELETE=ss;xw.EQUAL=Or;var wze=xw,xb={exports:{}};xb.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",h="[object GeneratorFunction]",f="[object Map]",p="[object Number]",y="[object Object]",m="[object Promise]",b="[object RegExp]",x="[object Set]",w="[object String]",_="[object Symbol]",j="[object WeakMap]",k="[object ArrayBuffer]",N="[object DataView]",C="[object Float32Array]",E="[object Float64Array]",T="[object Int8Array]",P="[object Int16Array]",O="[object Int32Array]",I="[object Uint8Array]",R="[object Uint8ClampedArray]",F="[object Uint16Array]",$="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,q=/\w*$/,K=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,z={};z[i]=z[o]=z[k]=z[N]=z[a]=z[l]=z[C]=z[E]=z[T]=z[P]=z[O]=z[f]=z[p]=z[y]=z[b]=z[x]=z[w]=z[_]=z[I]=z[R]=z[F]=z[$]=!0,z[c]=z[u]=z[j]=!1;var J=typeof gr=="object"&&gr&&gr.Object===Object&&gr,te=typeof self=="object"&&self&&self.Object===Object&&self,be=J||te||Function("return this")(),H=t&&!t.nodeType&&t,G=H&&!0&&e&&!e.nodeType&&e,fe=G&&G.exports===H;function pe(S,A){return S.set(A[0],A[1]),S}function ke(S,A){return S.add(A),S}function V(S,A){for(var L=-1,ee=S?S.length:0;++L<ee&&A(S[L],L,S)!==!1;);return S}function X(S,A){for(var L=-1,ee=A.length,We=S.length;++L<ee;)S[We+L]=A[L];return S}function le(S,A,L,ee){for(var We=-1,ze=S?S.length:0;++We<ze;)L=A(L,S[We],We,S);return L}function U(S,A){for(var L=-1,ee=Array(S);++L<S;)ee[L]=A(L);return ee}function Se(S,A){return S==null?void 0:S[A]}function Re(S){var A=!1;if(S!=null&&typeof S.toString!="function")try{A=!!(S+"")}catch{}return A}function Qe(S){var A=-1,L=Array(S.size);return S.forEach(function(ee,We){L[++A]=[We,ee]}),L}function Xe(S,A){return function(L){return S(A(L))}}function pt(S){var A=-1,L=Array(S.size);return S.forEach(function(ee){L[++A]=ee}),L}var Jt=Array.prototype,D=Function.prototype,B=Object.prototype,Q=be["__core-js_shared__"],ge=function(){var S=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),he=D.toString,ue=B.hasOwnProperty,_e=B.toString,rt=RegExp("^"+he.call(ue).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=fe?be.Buffer:void 0,bt=be.Symbol,Qr=be.Uint8Array,Bt=Xe(Object.getPrototypeOf,Object),Ws=Object.create,Oi=B.propertyIsEnumerable,mo=Jt.splice,Pi=Object.getOwnPropertySymbols,Ri=Be?Be.isBuffer:void 0,go=Xe(Object.keys,Object),en=Ys(be,"DataView"),ds=Ys(be,"Map"),gn=Ys(be,"Promise"),Hs=Ys(be,"Set"),Bl=Ys(be,"WeakMap"),Ks=Ys(Object,"create"),Vl=yn(en),Zs=yn(ds),Wl=yn(gn),yo=yn(Hs),Hl=yn(Bl),hs=bt?bt.prototype:void 0,vu=hs?hs.valueOf:void 0;function Gs(S){var A=-1,L=S?S.length:0;for(this.clear();++A<L;){var ee=S[A];this.set(ee[0],ee[1])}}function rf(){this.__data__=Ks?Ks(null):{}}function nf(S){return this.has(S)&&delete this.__data__[S]}function _a(S){var A=this.__data__;if(Ks){var L=A[S];return L===n?void 0:L}return ue.call(A,S)?A[S]:void 0}function ja(S){var A=this.__data__;return Ks?A[S]!==void 0:ue.call(A,S)}function Kl(S,A){var L=this.__data__;return L[S]=Ks&&A===void 0?n:A,this}Gs.prototype.clear=rf,Gs.prototype.delete=nf,Gs.prototype.get=_a,Gs.prototype.has=ja,Gs.prototype.set=Kl;function ne(S){var A=-1,L=S?S.length:0;for(this.clear();++A<L;){var ee=S[A];this.set(ee[0],ee[1])}}function De(){this.__data__=[]}function nt(S){var A=this.__data__,L=xu(A,S);if(L<0)return!1;var ee=A.length-1;return L==ee?A.pop():mo.call(A,L,1),!0}function hr(S){var A=this.__data__,L=xu(A,S);return L<0?void 0:A[L][1]}function Pn(S){return xu(this.__data__,S)>-1}function Rn(S,A){var L=this.__data__,ee=xu(L,S);return ee<0?L.push([S,A]):L[ee][1]=A,this}ne.prototype.clear=De,ne.prototype.delete=nt,ne.prototype.get=hr,ne.prototype.has=Pn,ne.prototype.set=Rn;function Dt(S){var A=-1,L=S?S.length:0;for(this.clear();++A<L;){var ee=S[A];this.set(ee[0],ee[1])}}function Uw(){this.__data__={hash:new Gs,map:new(ds||ne),string:new Gs}}function qw(S){return Gl(this,S).delete(S)}function Bw(S){return Gl(this,S).get(S)}function Vw(S){return Gl(this,S).has(S)}function Ww(S,A){return Gl(this,S).set(S,A),this}Dt.prototype.clear=Uw,Dt.prototype.delete=qw,Dt.prototype.get=Bw,Dt.prototype.has=Vw,Dt.prototype.set=Ww;function In(S){this.__data__=new ne(S)}function Hw(){this.__data__=new ne}function Kw(S){return this.__data__.delete(S)}function Zw(S){return this.__data__.get(S)}function Gw(S){return this.__data__.has(S)}function Yw(S,A){var L=this.__data__;if(L instanceof ne){var ee=L.__data__;if(!ds||ee.length<r-1)return ee.push([S,A]),this;L=this.__data__=new Dt(ee)}return L.set(S,A),this}In.prototype.clear=Hw,In.prototype.delete=Kw,In.prototype.get=Zw,In.prototype.has=Gw,In.prototype.set=Yw;function bu(S,A){var L=lf(S)||_u(S)?U(S.length,String):[],ee=L.length,We=!!ee;for(var ze in S)ue.call(S,ze)&&!(We&&(ze=="length"||u0(ze,ee)))&&L.push(ze);return L}function dg(S,A,L){var ee=S[A];(!(ue.call(S,A)&&gg(ee,L))||L===void 0&&!(A in S))&&(S[A]=L)}function xu(S,A){for(var L=S.length;L--;)if(gg(S[L][0],A))return L;return-1}function Ii(S,A){return S&&af(A,uf(A),S)}function sf(S,A,L,ee,We,ze,lt){var it;if(ee&&(it=ze?ee(S,We,ze,lt):ee(S)),it!==void 0)return it;if(!Li(S))return S;var fr=lf(S);if(fr){if(it=l0(S),!A)return i0(S,it)}else{var ht=bo(S),tn=ht==u||ht==h;if(yg(S))return wu(S,A);if(ht==y||ht==i||tn&&!ze){if(Re(S))return ze?S:{};if(it=Di(tn?{}:S),!A)return o0(S,Ii(it,S))}else{if(!z[ht])return ze?S:{};it=c0(S,ht,sf,A)}}lt||(lt=new In);var Dn=lt.get(S);if(Dn)return Dn;if(lt.set(S,it),!fr)var jr=L?a0(S):uf(S);return V(jr||S,function(rn,Kr){jr&&(Kr=rn,rn=S[Kr]),dg(it,Kr,sf(rn,A,L,ee,Kr,S,lt))}),it}function Jw(S){return Li(S)?Ws(S):{}}function Xw(S,A,L){var ee=A(S);return lf(S)?ee:X(ee,L(S))}function Qw(S){return _e.call(S)}function e0(S){if(!Li(S)||h0(S))return!1;var A=cf(S)||Re(S)?rt:K;return A.test(yn(S))}function t0(S){if(!pg(S))return go(S);var A=[];for(var L in Object(S))ue.call(S,L)&&L!="constructor"&&A.push(L);return A}function wu(S,A){if(A)return S.slice();var L=new S.constructor(S.length);return S.copy(L),L}function of(S){var A=new S.constructor(S.byteLength);return new Qr(A).set(new Qr(S)),A}function Zl(S,A){var L=A?of(S.buffer):S.buffer;return new S.constructor(L,S.byteOffset,S.byteLength)}function hg(S,A,L){var ee=A?L(Qe(S),!0):Qe(S);return le(ee,pe,new S.constructor)}function fg(S){var A=new S.constructor(S.source,q.exec(S));return A.lastIndex=S.lastIndex,A}function r0(S,A,L){var ee=A?L(pt(S),!0):pt(S);return le(ee,ke,new S.constructor)}function n0(S){return vu?Object(vu.call(S)):{}}function s0(S,A){var L=A?of(S.buffer):S.buffer;return new S.constructor(L,S.byteOffset,S.length)}function i0(S,A){var L=-1,ee=S.length;for(A||(A=Array(ee));++L<ee;)A[L]=S[L];return A}function af(S,A,L,ee){L||(L={});for(var We=-1,ze=A.length;++We<ze;){var lt=A[We],it=void 0;dg(L,lt,it===void 0?S[lt]:it)}return L}function o0(S,A){return af(S,vo(S),A)}function a0(S){return Xw(S,uf,vo)}function Gl(S,A){var L=S.__data__;return d0(A)?L[typeof A=="string"?"string":"hash"]:L.map}function Ys(S,A){var L=Se(S,A);return e0(L)?L:void 0}var vo=Pi?Xe(Pi,Object):p0,bo=Qw;(en&&bo(new en(new ArrayBuffer(1)))!=N||ds&&bo(new ds)!=f||gn&&bo(gn.resolve())!=m||Hs&&bo(new Hs)!=x||Bl&&bo(new Bl)!=j)&&(bo=function(S){var A=_e.call(S),L=A==y?S.constructor:void 0,ee=L?yn(L):void 0;if(ee)switch(ee){case Vl:return N;case Zs:return f;case Wl:return m;case yo:return x;case Hl:return j}return A});function l0(S){var A=S.length,L=S.constructor(A);return A&&typeof S[0]=="string"&&ue.call(S,"index")&&(L.index=S.index,L.input=S.input),L}function Di(S){return typeof S.constructor=="function"&&!pg(S)?Jw(Bt(S)):{}}function c0(S,A,L,ee){var We=S.constructor;switch(A){case k:return of(S);case a:case l:return new We(+S);case N:return Zl(S,ee);case C:case E:case T:case P:case O:case I:case R:case F:case $:return s0(S,ee);case f:return hg(S,ee,L);case p:case w:return new We(S);case b:return fg(S);case x:return r0(S,ee,L);case _:return n0(S)}}function u0(S,A){return A=A??s,!!A&&(typeof S=="number"||Z.test(S))&&S>-1&&S%1==0&&S<A}function d0(S){var A=typeof S;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?S!=="__proto__":S===null}function h0(S){return!!ge&&ge in S}function pg(S){var A=S&&S.constructor,L=typeof A=="function"&&A.prototype||B;return S===L}function yn(S){if(S!=null){try{return he.call(S)}catch{}try{return S+""}catch{}}return""}function mg(S){return sf(S,!0,!0)}function gg(S,A){return S===A||S!==S&&A!==A}function _u(S){return f0(S)&&ue.call(S,"callee")&&(!Oi.call(S,"callee")||_e.call(S)==i)}var lf=Array.isArray;function ju(S){return S!=null&&vg(S.length)&&!cf(S)}function f0(S){return bg(S)&&ju(S)}var yg=Ri||m0;function cf(S){var A=Li(S)?_e.call(S):"";return A==u||A==h}function vg(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=s}function Li(S){var A=typeof S;return!!S&&(A=="object"||A=="function")}function bg(S){return!!S&&typeof S=="object"}function uf(S){return ju(S)?bu(S):t0(S)}function p0(){return[]}function m0(){return!1}e.exports=mg})(xb,xb.exports);var SW=xb.exports,wb={exports:{}};wb.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",s=1,i=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",f="[object Error]",p="[object Function]",y="[object GeneratorFunction]",m="[object Map]",b="[object Number]",x="[object Null]",w="[object Object]",_="[object Promise]",j="[object Proxy]",k="[object RegExp]",N="[object Set]",C="[object String]",E="[object Symbol]",T="[object Undefined]",P="[object WeakMap]",O="[object ArrayBuffer]",I="[object DataView]",R="[object Float32Array]",F="[object Float64Array]",$="[object Int8Array]",W="[object Int16Array]",q="[object Int32Array]",K="[object Uint8Array]",Z="[object Uint8ClampedArray]",z="[object Uint16Array]",J="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,be=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,G={};G[R]=G[F]=G[$]=G[W]=G[q]=G[K]=G[Z]=G[z]=G[J]=!0,G[a]=G[l]=G[O]=G[u]=G[I]=G[h]=G[f]=G[p]=G[m]=G[b]=G[w]=G[k]=G[N]=G[C]=G[P]=!1;var fe=typeof gr=="object"&&gr&&gr.Object===Object&&gr,pe=typeof self=="object"&&self&&self.Object===Object&&self,ke=fe||pe||Function("return this")(),V=t&&!t.nodeType&&t,X=V&&!0&&e&&!e.nodeType&&e,le=X&&X.exports===V,U=le&&fe.process,Se=function(){try{return U&&U.binding&&U.binding("util")}catch{}}(),Re=Se&&Se.isTypedArray;function Qe(S,A){for(var L=-1,ee=S==null?0:S.length,We=0,ze=[];++L<ee;){var lt=S[L];A(lt,L,S)&&(ze[We++]=lt)}return ze}function Xe(S,A){for(var L=-1,ee=A.length,We=S.length;++L<ee;)S[We+L]=A[L];return S}function pt(S,A){for(var L=-1,ee=S==null?0:S.length;++L<ee;)if(A(S[L],L,S))return!0;return!1}function Jt(S,A){for(var L=-1,ee=Array(S);++L<S;)ee[L]=A(L);return ee}function D(S){return function(A){return S(A)}}function B(S,A){return S.has(A)}function Q(S,A){return S==null?void 0:S[A]}function ge(S){var A=-1,L=Array(S.size);return S.forEach(function(ee,We){L[++A]=[We,ee]}),L}function he(S,A){return function(L){return S(A(L))}}function ue(S){var A=-1,L=Array(S.size);return S.forEach(function(ee){L[++A]=ee}),L}var _e=Array.prototype,rt=Function.prototype,Be=Object.prototype,bt=ke["__core-js_shared__"],Qr=rt.toString,Bt=Be.hasOwnProperty,Ws=function(){var S=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),Oi=Be.toString,mo=RegExp("^"+Qr.call(Bt).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pi=le?ke.Buffer:void 0,Ri=ke.Symbol,go=ke.Uint8Array,en=Be.propertyIsEnumerable,ds=_e.splice,gn=Ri?Ri.toStringTag:void 0,Hs=Object.getOwnPropertySymbols,Bl=Pi?Pi.isBuffer:void 0,Ks=he(Object.keys,Object),Vl=vo(ke,"DataView"),Zs=vo(ke,"Map"),Wl=vo(ke,"Promise"),yo=vo(ke,"Set"),Hl=vo(ke,"WeakMap"),hs=vo(Object,"create"),vu=yn(Vl),Gs=yn(Zs),rf=yn(Wl),nf=yn(yo),_a=yn(Hl),ja=Ri?Ri.prototype:void 0,Kl=ja?ja.valueOf:void 0;function ne(S){var A=-1,L=S==null?0:S.length;for(this.clear();++A<L;){var ee=S[A];this.set(ee[0],ee[1])}}function De(){this.__data__=hs?hs(null):{},this.size=0}function nt(S){var A=this.has(S)&&delete this.__data__[S];return this.size-=A?1:0,A}function hr(S){var A=this.__data__;if(hs){var L=A[S];return L===n?void 0:L}return Bt.call(A,S)?A[S]:void 0}function Pn(S){var A=this.__data__;return hs?A[S]!==void 0:Bt.call(A,S)}function Rn(S,A){var L=this.__data__;return this.size+=this.has(S)?0:1,L[S]=hs&&A===void 0?n:A,this}ne.prototype.clear=De,ne.prototype.delete=nt,ne.prototype.get=hr,ne.prototype.has=Pn,ne.prototype.set=Rn;function Dt(S){var A=-1,L=S==null?0:S.length;for(this.clear();++A<L;){var ee=S[A];this.set(ee[0],ee[1])}}function Uw(){this.__data__=[],this.size=0}function qw(S){var A=this.__data__,L=wu(A,S);if(L<0)return!1;var ee=A.length-1;return L==ee?A.pop():ds.call(A,L,1),--this.size,!0}function Bw(S){var A=this.__data__,L=wu(A,S);return L<0?void 0:A[L][1]}function Vw(S){return wu(this.__data__,S)>-1}function Ww(S,A){var L=this.__data__,ee=wu(L,S);return ee<0?(++this.size,L.push([S,A])):L[ee][1]=A,this}Dt.prototype.clear=Uw,Dt.prototype.delete=qw,Dt.prototype.get=Bw,Dt.prototype.has=Vw,Dt.prototype.set=Ww;function In(S){var A=-1,L=S==null?0:S.length;for(this.clear();++A<L;){var ee=S[A];this.set(ee[0],ee[1])}}function Hw(){this.size=0,this.__data__={hash:new ne,map:new(Zs||Dt),string:new ne}}function Kw(S){var A=Ys(this,S).delete(S);return this.size-=A?1:0,A}function Zw(S){return Ys(this,S).get(S)}function Gw(S){return Ys(this,S).has(S)}function Yw(S,A){var L=Ys(this,S),ee=L.size;return L.set(S,A),this.size+=L.size==ee?0:1,this}In.prototype.clear=Hw,In.prototype.delete=Kw,In.prototype.get=Zw,In.prototype.has=Gw,In.prototype.set=Yw;function bu(S){var A=-1,L=S==null?0:S.length;for(this.__data__=new In;++A<L;)this.add(S[A])}function dg(S){return this.__data__.set(S,n),this}function xu(S){return this.__data__.has(S)}bu.prototype.add=bu.prototype.push=dg,bu.prototype.has=xu;function Ii(S){var A=this.__data__=new Dt(S);this.size=A.size}function sf(){this.__data__=new Dt,this.size=0}function Jw(S){var A=this.__data__,L=A.delete(S);return this.size=A.size,L}function Xw(S){return this.__data__.get(S)}function Qw(S){return this.__data__.has(S)}function e0(S,A){var L=this.__data__;if(L instanceof Dt){var ee=L.__data__;if(!Zs||ee.length<r-1)return ee.push([S,A]),this.size=++L.size,this;L=this.__data__=new In(ee)}return L.set(S,A),this.size=L.size,this}Ii.prototype.clear=sf,Ii.prototype.delete=Jw,Ii.prototype.get=Xw,Ii.prototype.has=Qw,Ii.prototype.set=e0;function t0(S,A){var L=_u(S),ee=!L&&gg(S),We=!L&&!ee&&ju(S),ze=!L&&!ee&&!We&&bg(S),lt=L||ee||We||ze,it=lt?Jt(S.length,String):[],fr=it.length;for(var ht in S)Bt.call(S,ht)&&!(lt&&(ht=="length"||We&&(ht=="offset"||ht=="parent")||ze&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||c0(ht,fr)))&&it.push(ht);return it}function wu(S,A){for(var L=S.length;L--;)if(mg(S[L][0],A))return L;return-1}function of(S,A,L){var ee=A(S);return _u(S)?ee:Xe(ee,L(S))}function Zl(S){return S==null?S===void 0?T:x:gn&&gn in Object(S)?bo(S):pg(S)}function hg(S){return Li(S)&&Zl(S)==a}function fg(S,A,L,ee,We){return S===A?!0:S==null||A==null||!Li(S)&&!Li(A)?S!==S&&A!==A:r0(S,A,L,ee,fg,We)}function r0(S,A,L,ee,We,ze){var lt=_u(S),it=_u(A),fr=lt?l:Di(S),ht=it?l:Di(A);fr=fr==a?w:fr,ht=ht==a?w:ht;var tn=fr==w,Dn=ht==w,jr=fr==ht;if(jr&&ju(S)){if(!ju(A))return!1;lt=!0,tn=!1}if(jr&&!tn)return ze||(ze=new Ii),lt||bg(S)?af(S,A,L,ee,We,ze):o0(S,A,fr,L,ee,We,ze);if(!(L&s)){var rn=tn&&Bt.call(S,"__wrapped__"),Kr=Dn&&Bt.call(A,"__wrapped__");if(rn||Kr){var ka=rn?S.value():S,xo=Kr?A.value():A;return ze||(ze=new Ii),We(ka,xo,L,ee,ze)}}return jr?(ze||(ze=new Ii),a0(S,A,L,ee,We,ze)):!1}function n0(S){if(!vg(S)||d0(S))return!1;var A=yg(S)?mo:be;return A.test(yn(S))}function s0(S){return Li(S)&&cf(S.length)&&!!G[Zl(S)]}function i0(S){if(!h0(S))return Ks(S);var A=[];for(var L in Object(S))Bt.call(S,L)&&L!="constructor"&&A.push(L);return A}function af(S,A,L,ee,We,ze){var lt=L&s,it=S.length,fr=A.length;if(it!=fr&&!(lt&&fr>it))return!1;var ht=ze.get(S);if(ht&&ze.get(A))return ht==A;var tn=-1,Dn=!0,jr=L&i?new bu:void 0;for(ze.set(S,A),ze.set(A,S);++tn<it;){var rn=S[tn],Kr=A[tn];if(ee)var ka=lt?ee(Kr,rn,tn,A,S,ze):ee(rn,Kr,tn,S,A,ze);if(ka!==void 0){if(ka)continue;Dn=!1;break}if(jr){if(!pt(A,function(xo,Yl){if(!B(jr,Yl)&&(rn===xo||We(rn,xo,L,ee,ze)))return jr.push(Yl)})){Dn=!1;break}}else if(!(rn===Kr||We(rn,Kr,L,ee,ze))){Dn=!1;break}}return ze.delete(S),ze.delete(A),Dn}function o0(S,A,L,ee,We,ze,lt){switch(L){case I:if(S.byteLength!=A.byteLength||S.byteOffset!=A.byteOffset)return!1;S=S.buffer,A=A.buffer;case O:return!(S.byteLength!=A.byteLength||!ze(new go(S),new go(A)));case u:case h:case b:return mg(+S,+A);case f:return S.name==A.name&&S.message==A.message;case k:case C:return S==A+"";case m:var it=ge;case N:var fr=ee&s;if(it||(it=ue),S.size!=A.size&&!fr)return!1;var ht=lt.get(S);if(ht)return ht==A;ee|=i,lt.set(S,A);var tn=af(it(S),it(A),ee,We,ze,lt);return lt.delete(S),tn;case E:if(Kl)return Kl.call(S)==Kl.call(A)}return!1}function a0(S,A,L,ee,We,ze){var lt=L&s,it=Gl(S),fr=it.length,ht=Gl(A),tn=ht.length;if(fr!=tn&&!lt)return!1;for(var Dn=fr;Dn--;){var jr=it[Dn];if(!(lt?jr in A:Bt.call(A,jr)))return!1}var rn=ze.get(S);if(rn&&ze.get(A))return rn==A;var Kr=!0;ze.set(S,A),ze.set(A,S);for(var ka=lt;++Dn<fr;){jr=it[Dn];var xo=S[jr],Yl=A[jr];if(ee)var WA=lt?ee(Yl,xo,jr,A,S,ze):ee(xo,Yl,jr,S,A,ze);if(!(WA===void 0?xo===Yl||We(xo,Yl,L,ee,ze):WA)){Kr=!1;break}ka||(ka=jr=="constructor")}if(Kr&&!ka){var xg=S.constructor,wg=A.constructor;xg!=wg&&"constructor"in S&&"constructor"in A&&!(typeof xg=="function"&&xg instanceof xg&&typeof wg=="function"&&wg instanceof wg)&&(Kr=!1)}return ze.delete(S),ze.delete(A),Kr}function Gl(S){return of(S,uf,l0)}function Ys(S,A){var L=S.__data__;return u0(A)?L[typeof A=="string"?"string":"hash"]:L.map}function vo(S,A){var L=Q(S,A);return n0(L)?L:void 0}function bo(S){var A=Bt.call(S,gn),L=S[gn];try{S[gn]=void 0;var ee=!0}catch{}var We=Oi.call(S);return ee&&(A?S[gn]=L:delete S[gn]),We}var l0=Hs?function(S){return S==null?[]:(S=Object(S),Qe(Hs(S),function(A){return en.call(S,A)}))}:p0,Di=Zl;(Vl&&Di(new Vl(new ArrayBuffer(1)))!=I||Zs&&Di(new Zs)!=m||Wl&&Di(Wl.resolve())!=_||yo&&Di(new yo)!=N||Hl&&Di(new Hl)!=P)&&(Di=function(S){var A=Zl(S),L=A==w?S.constructor:void 0,ee=L?yn(L):"";if(ee)switch(ee){case vu:return I;case Gs:return m;case rf:return _;case nf:return N;case _a:return P}return A});function c0(S,A){return A=A??o,!!A&&(typeof S=="number"||H.test(S))&&S>-1&&S%1==0&&S<A}function u0(S){var A=typeof S;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?S!=="__proto__":S===null}function d0(S){return!!Ws&&Ws in S}function h0(S){var A=S&&S.constructor,L=typeof A=="function"&&A.prototype||Be;return S===L}function pg(S){return Oi.call(S)}function yn(S){if(S!=null){try{return Qr.call(S)}catch{}try{return S+""}catch{}}return""}function mg(S,A){return S===A||S!==S&&A!==A}var gg=hg(function(){return arguments}())?hg:function(S){return Li(S)&&Bt.call(S,"callee")&&!en.call(S,"callee")},_u=Array.isArray;function lf(S){return S!=null&&cf(S.length)&&!yg(S)}var ju=Bl||m0;function f0(S,A){return fg(S,A)}function yg(S){if(!vg(S))return!1;var A=Zl(S);return A==p||A==y||A==c||A==j}function cf(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=o}function vg(S){var A=typeof S;return S!=null&&(A=="object"||A=="function")}function Li(S){return S!=null&&typeof S=="object"}var bg=Re?D(Re):s0;function uf(S){return lf(S)?t0(S):i0(S)}function p0(){return[]}function m0(){return!1}e.exports=f0})(wb,wb.exports);var EW=wb.exports,sA={};Object.defineProperty(sA,"__esModule",{value:!0});const _ze=SW,jze=EW;var rS;(function(e){function t(i={},o={},a=!1){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});let l=_ze(o);a||(l=Object.keys(l).reduce((c,u)=>(l[u]!=null&&(c[u]=l[u]),c),{}));for(const c in i)i[c]!==void 0&&o[c]===void 0&&(l[c]=i[c]);return Object.keys(l).length>0?l:void 0}e.compose=t;function r(i={},o={}){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});const a=Object.keys(i).concat(Object.keys(o)).reduce((l,c)=>(jze(i[c],o[c])||(l[c]=o[c]===void 0?null:o[c]),l),{});return Object.keys(a).length>0?a:void 0}e.diff=r;function n(i={},o={}){i=i||{};const a=Object.keys(o).reduce((l,c)=>(o[c]!==i[c]&&i[c]!==void 0&&(l[c]=o[c]),l),{});return Object.keys(i).reduce((l,c)=>(i[c]!==o[c]&&o[c]===void 0&&(l[c]=null),l),a)}e.invert=n;function s(i,o,a=!1){if(typeof i!="object")return o;if(typeof o!="object")return;if(!a)return o;const l=Object.keys(o).reduce((c,u)=>(i[u]===void 0&&(c[u]=o[u]),c),{});return Object.keys(l).length>0?l:void 0}e.transform=s})(rS||(rS={}));sA.default=rS;var ww={};Object.defineProperty(ww,"__esModule",{value:!0});var nS;(function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t})(nS||(nS={}));ww.default=nS;var iA={};Object.defineProperty(iA,"__esModule",{value:!0});const D5=ww;class kze{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const r=this.ops[this.index];if(r){const n=this.offset,s=D5.default.length(r);if(t>=s-n?(t=s-n,this.index+=1,this.offset=0):this.offset+=t,typeof r.delete=="number")return{delete:t};{const i={};return r.attributes&&(i.attributes=r.attributes),typeof r.retain=="number"?i.retain=t:typeof r.retain=="object"&&r.retain!==null?i.retain=r.retain:typeof r.insert=="string"?i.insert=r.insert.substr(n,t):i.insert=r.insert,i}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?D5.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const t=this.offset,r=this.index,n=this.next(),s=this.ops.slice(this.index);return this.offset=t,this.index=r,[n].concat(s)}}else return[]}}iA.default=kze;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const r=wze,n=SW,s=EW,i=sA;t.AttributeMap=i.default;const o=ww;t.Op=o.default;const a=iA;t.OpIterator=a.default;const l="\0",c=(h,f)=>{if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);const p=Object.keys(h)[0];if(!p||p!==Object.keys(f)[0])throw new Error(`embed types not matched: ${p} != ${Object.keys(f)[0]}`);return[p,h[p],f[p]]};class u{constructor(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]}static registerEmbed(f,p){this.handlers[f]=p}static unregisterEmbed(f){delete this.handlers[f]}static getHandler(f){const p=this.handlers[f];if(!p)throw new Error(`no handlers for embed type "${f}"`);return p}insert(f,p){const y={};return typeof f=="string"&&f.length===0?this:(y.insert=f,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(y.attributes=p),this.push(y))}delete(f){return f<=0?this:this.push({delete:f})}retain(f,p){if(typeof f=="number"&&f<=0)return this;const y={retain:f};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(y.attributes=p),this.push(y)}push(f){let p=this.ops.length,y=this.ops[p-1];if(f=n(f),typeof y=="object"){if(typeof f.delete=="number"&&typeof y.delete=="number")return this.ops[p-1]={delete:y.delete+f.delete},this;if(typeof y.delete=="number"&&f.insert!=null&&(p-=1,y=this.ops[p-1],typeof y!="object"))return this.ops.unshift(f),this;if(s(f.attributes,y.attributes)){if(typeof f.insert=="string"&&typeof y.insert=="string")return this.ops[p-1]={insert:y.insert+f.insert},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof y.retain=="number")return this.ops[p-1]={retain:y.retain+f.retain},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this}}return p===this.ops.length?this.ops.push(f):this.ops.splice(p,0,f),this}chop(){const f=this.ops[this.ops.length-1];return f&&typeof f.retain=="number"&&!f.attributes&&this.ops.pop(),this}filter(f){return this.ops.filter(f)}forEach(f){this.ops.forEach(f)}map(f){return this.ops.map(f)}partition(f){const p=[],y=[];return this.forEach(m=>{(f(m)?p:y).push(m)}),[p,y]}reduce(f,p){return this.ops.reduce(f,p)}changeLength(){return this.reduce((f,p)=>p.insert?f+o.default.length(p):p.delete?f-p.delete:f,0)}length(){return this.reduce((f,p)=>f+o.default.length(p),0)}slice(f=0,p=1/0){const y=[],m=new a.default(this.ops);let b=0;for(;b<p&&m.hasNext();){let x;b<f?x=m.next(f-b):(x=m.next(p-b),y.push(x)),b+=o.default.length(x)}return new u(y)}compose(f){const p=new a.default(this.ops),y=new a.default(f.ops),m=[],b=y.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){let w=b.retain;for(;p.peekType()==="insert"&&p.peekLength()<=w;)w-=p.peekLength(),m.push(p.next());b.retain-w>0&&y.next(b.retain-w)}const x=new u(m);for(;p.hasNext()||y.hasNext();)if(y.peekType()==="insert")x.push(y.next());else if(p.peekType()==="delete")x.push(p.next());else{const w=Math.min(p.peekLength(),y.peekLength()),_=p.next(w),j=y.next(w);if(j.retain){const k={};if(typeof _.retain=="number")k.retain=typeof j.retain=="number"?w:j.retain;else if(typeof j.retain=="number")_.retain==null?k.insert=_.insert:k.retain=_.retain;else{const C=_.retain==null?"insert":"retain",[E,T,P]=c(_[C],j.retain),O=u.getHandler(E);k[C]={[E]:O.compose(T,P,C==="retain")}}const N=i.default.compose(_.attributes,j.attributes,typeof _.retain=="number");if(N&&(k.attributes=N),x.push(k),!y.hasNext()&&s(x.ops[x.ops.length-1],k)){const C=new u(p.rest());return x.concat(C).chop()}}else typeof j.delete=="number"&&(typeof _.retain=="number"||typeof _.retain=="object"&&_.retain!==null)&&x.push(j)}return x.chop()}concat(f){const p=new u(this.ops.slice());return f.ops.length>0&&(p.push(f.ops[0]),p.ops=p.ops.concat(f.ops.slice(1))),p}diff(f,p){if(this.ops===f.ops)return new u;const y=[this,f].map(_=>_.map(j=>{if(j.insert!=null)return typeof j.insert=="string"?j.insert:l;const k=_===f?"on":"with";throw new Error("diff() called "+k+" non-document")}).join("")),m=new u,b=r(y[0],y[1],p,!0),x=new a.default(this.ops),w=new a.default(f.ops);return b.forEach(_=>{let j=_[1].length;for(;j>0;){let k=0;switch(_[0]){case r.INSERT:k=Math.min(w.peekLength(),j),m.push(w.next(k));break;case r.DELETE:k=Math.min(j,x.peekLength()),x.next(k),m.delete(k);break;case r.EQUAL:k=Math.min(x.peekLength(),w.peekLength(),j);const N=x.next(k),C=w.next(k);s(N.insert,C.insert)?m.retain(k,i.default.diff(N.attributes,C.attributes)):m.push(C).delete(k);break}j-=k}}),m.chop()}eachLine(f,p=`
`){const y=new a.default(this.ops);let m=new u,b=0;for(;y.hasNext();){if(y.peekType()!=="insert")return;const x=y.peek(),w=o.default.length(x)-y.peekLength(),_=typeof x.insert=="string"?x.insert.indexOf(p,w)-w:-1;if(_<0)m.push(y.next());else if(_>0)m.push(y.next(_));else{if(f(m,y.next(1).attributes||{},b)===!1)return;b+=1,m=new u}}m.length()>0&&f(m,{},b)}invert(f){const p=new u;return this.reduce((y,m)=>{if(m.insert)p.delete(o.default.length(m));else{if(typeof m.retain=="number"&&m.attributes==null)return p.retain(m.retain),y+m.retain;if(m.delete||typeof m.retain=="number"){const b=m.delete||m.retain;return f.slice(y,y+b).forEach(x=>{m.delete?p.push(x):m.retain&&m.attributes&&p.retain(o.default.length(x),i.default.invert(m.attributes,x.attributes))}),y+b}else if(typeof m.retain=="object"&&m.retain!==null){const b=f.slice(y,y+1),x=new a.default(b.ops).next(),[w,_,j]=c(m.retain,x.insert),k=u.getHandler(w);return p.retain({[w]:k.invert(_,j)},i.default.invert(m.attributes,x.attributes)),y+1}}return y},0),p.chop()}transform(f,p=!1){if(p=!!p,typeof f=="number")return this.transformPosition(f,p);const y=f,m=new a.default(this.ops),b=new a.default(y.ops),x=new u;for(;m.hasNext()||b.hasNext();)if(m.peekType()==="insert"&&(p||b.peekType()!=="insert"))x.retain(o.default.length(m.next()));else if(b.peekType()==="insert")x.push(b.next());else{const w=Math.min(m.peekLength(),b.peekLength()),_=m.next(w),j=b.next(w);if(_.delete)continue;if(j.delete)x.push(j);else{const k=_.retain,N=j.retain;let C=typeof N=="object"&&N!==null?N:w;if(typeof k=="object"&&k!==null&&typeof N=="object"&&N!==null){const E=Object.keys(k)[0];if(E===Object.keys(N)[0]){const T=u.getHandler(E);T&&(C={[E]:T.transform(k[E],N[E],p)})}}x.retain(C,i.default.transform(_.attributes,j.attributes,p))}}return x.chop()}transformPosition(f,p=!1){p=!!p;const y=new a.default(this.ops);let m=0;for(;y.hasNext()&&m<=f;){const b=y.peekLength(),x=y.peekType();if(y.next(),x==="delete"){f-=Math.min(b,f-m);continue}else x==="insert"&&(m<f||!p)&&(f+=b);m+=b}return f}}u.Op=o.default,u.OpIterator=a.default,u.AttributeMap=i.default,u.handlers={},t.default=u,e.exports=u,e.exports.default=u})(tS,tS.exports);var Cs=tS.exports;const Oe=ki(Cs);class Ci extends us{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Ci.blotName="break";Ci.tagName="BR";let _i=class extends bb{};const Nze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _w(e){return e.replace(/[&<>"']/g,t=>Nze[t])}const Wy=class Ju extends eA{static compare(t,r){const n=Ju.order.indexOf(t),s=Ju.order.indexOf(r);return n>=0||s>=0?n-s:t===r?0:t<r?-1:1}formatAt(t,r,n,s){if(Ju.compare(this.statics.blotName,n)<0&&this.scroll.query(n,Pe.BLOT)){const i=this.isolate(t,r);s&&i.wrap(n,s)}else super.formatAt(t,r,n,s)}optimize(t){if(super.optimize(t),this.parent instanceof Ju&&Ju.compare(this.statics.blotName,this.parent.statics.blotName)>0){const r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}};xe(Wy,"allowedChildren",[Wy,Ci,us,_i]),xe(Wy,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let $l=Wy;const L5=1;class Xr extends om{constructor(){super(...arguments),xe(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=CW(this)),this.cache.delta}deleteAt(t,r){super.deleteAt(t,r),this.cache={}}formatAt(t,r,n,s){r<=0||(this.scroll.query(n,Pe.BLOCK)?t+r===this.length()&&this.format(n,s):super.formatAt(t,Math.min(r,this.length()-t-1),n,s),this.cache={})}insertAt(t,r,n){if(n!=null){super.insertAt(t,r,n),this.cache={};return}if(r.length===0)return;const s=r.split(`
`),i=s.shift();i.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});let o=this;s.reduce((a,l)=>(o=o.split(a,!0),o.insertAt(0,l),l.length),t+i.length)}insertBefore(t,r){const{head:n}=this.children;super.insertBefore(t,r),n instanceof Ci&&n.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+L5),this.cache.length}moveChildren(t,r){super.moveChildren(t,r),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(t===0||t>=this.length()-L5)){const s=this.clone();return t===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const n=super.split(t,r);return this.cache={},n}}Xr.blotName="block";Xr.tagName="P";Xr.defaultChild=Ci;Xr.allowedChildren=[Ci,$l,us,_i];class Ts extends us{attach(){super.attach(),this.attributes=new yw(this.domNode)}delta(){return new Oe().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,r){const n=this.scroll.query(t,Pe.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,r)}formatAt(t,r,n,s){this.format(n,s)}insertAt(t,r,n){if(n!=null){super.insertAt(t,r,n);return}const s=r.split(`
`),i=s.pop(),o=s.map(l=>{const c=this.scroll.create(Xr.blotName);return c.insertAt(0,l),c}),a=this.split(t);o.forEach(l=>{this.parent.insertBefore(l,a)}),i&&this.parent.insertBefore(this.scroll.create("text",i),a)}}Ts.scope=Pe.BLOCK_BLOT;function CW(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.descendants(un).reduce((r,n)=>n.length()===0?r:r.insert(n.value(),Ns(n,{},t)),new Oe).insert(`
`,Ns(e))}function Ns(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e==null||("formats"in e&&typeof e.formats=="function"&&(t={...t,...e.formats()},r&&delete t["code-token"]),e.parent==null||e.parent.statics.blotName==="scroll"||e.parent.statics.scope!==e.statics.scope)?t:Ns(e.parent,t,r)}const Yf=class uc extends us{static value(){}constructor(t,r,n){super(t,r),this.selection=n,this.textNode=document.createTextNode(uc.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,r){if(this.savedLength!==0){super.format(t,r);return}let n=this,s=0;for(;n!=null&&n.statics.scope!==Pe.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=uc.CONTENTS.length,n.optimize(),n.formatAt(s,uc.CONTENTS.length,t,r),this.savedLength=0)}index(t,r){return t===this.textNode?0:super.index(t,r)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const r=this.prev instanceof _i?this.prev:null,n=r?r.length():0,s=this.next instanceof _i?this.next:null,i=s?s.text:"",{textNode:o}=this,a=o.data.split(uc.CONTENTS).join("");o.data=uc.CONTENTS;let l;if(r)l=r,(a||s)&&(r.insertAt(r.length(),a+i),s&&s.remove());else if(s)l=s,s.insertAt(0,a);else{const c=document.createTextNode(a);l=this.scroll.create(c),this.parent.insertBefore(l,this)}if(this.remove(),t){const c=(f,p)=>r&&f===r.domNode?p:f===o?n+p-1:s&&f===s.domNode?n+a.length+p:null,u=c(t.start.node,t.start.offset),h=c(t.end.node,t.end.offset);if(u!==null&&h!==null)return{startNode:l.domNode,startOffset:u,endNode:l.domNode,endOffset:h}}return null}update(t,r){if(t.some(n=>n.type==="characterData"&&n.target===this.textNode)){const n=this.restore();n&&(r.range=n)}}optimize(t){super.optimize(t);let{parent:r}=this;for(;r;){if(r.domNode.tagName==="A"){this.savedLength=uc.CONTENTS.length,r.isolate(this.offset(r),this.length()).unwrap(),this.savedLength=0;break}r=r.parent}}value(){return""}};xe(Yf,"blotName","cursor"),xe(Yf,"className","ql-cursor"),xe(Yf,"tagName","span"),xe(Yf,"CONTENTS","\uFEFF");let jw=Yf;const sS=new WeakMap,iS=["error","warn","log","info"];let oS="warn";function TW(e){if(oS&&iS.indexOf(e)<=iS.indexOf(oS)){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console[e](...r)}}function xa(e){return iS.reduce((t,r)=>(t[r]=TW.bind(console,r,e),t),{})}xa.level=e=>{oS=e};TW.level=xa.level;const Y_=xa("quill:events"),Sze=["selectionchange","mousedown","mouseup","click"];Sze.forEach(e=>{document.addEventListener(e,function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=sS.get(s);i&&i.emitter&&i.emitter.handleDOM(...r)})})});class Ce extends T9{constructor(){super(),this.domListeners={},this.on("error",Y_.error)}emit(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Y_.log.call(Y_,...r),super.emit(...r)}handleDOM(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach(i=>{let{node:o,handler:a}=i;(t.target===o||o.contains(t.target))&&a(t,...n)})}listenDOM(t,r,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:r,handler:n})}}xe(Ce,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),xe(Ce,"sources",{API:"api",SILENT:"silent",USER:"user"});const J_=xa("quill:selection");let Xc=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}};class Eze{constructor(t,r){this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Xc(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ce.sources.USER),1)}),this.emitter.on(Ce.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once(Ce.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const o=i.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(o?Ce.sources.SILENT:s)}catch{}})}),this.emitter.on(Ce.events.SCROLL_OPTIMIZE,(n,s)=>{if(s.range){const{startNode:i,startOffset:o,endNode:a,endOffset:l}=s.range;this.setNativeRange(i,o,a,l),this.update(Ce.sources.SILENT)}}),this.update(Ce.sources.SILENT)}handleComposition(){this.emitter.on(Ce.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ce.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ce.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,r){this.scroll.update();const n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(t,Pe.BLOCK))){if(n.start.node!==this.cursor.textNode){const s=this.scroll.find(n.start.node,!1);if(s==null)return;if(s instanceof un){const i=s.split(n.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,r),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=this.scroll.length();t=Math.min(t,n-1),r=Math.min(t+r,n-1)-t;let s,[i,o]=this.scroll.leaf(t);if(i==null)return null;if(r>0&&o===i.length()){const[u]=this.scroll.leaf(t+1);if(u){const[h]=this.scroll.line(t),[f]=this.scroll.line(t+1);h===f&&(i=u,o=0)}}[s,o]=i.position(o,!0);const a=document.createRange();if(r>0)return a.setStart(s,o),[i,o]=this.scroll.leaf(t+r),i==null?null:([s,o]=i.position(o,!0),a.setEnd(s,o),a.getBoundingClientRect());let l="left",c;if(s instanceof Text){if(!s.data.length)return null;o<s.data.length?(a.setStart(s,o),a.setEnd(s,o+1)):(a.setStart(s,o-1),a.setEnd(s,o),l="right"),c=a.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;c=i.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const r=t.getRangeAt(0);if(r==null)return null;const n=this.normalizeNative(r);return J_.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const r=this.getNativeRange();return r==null?[null,null]:[this.normalizedToRange(r),r]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&X_(this.root,document.activeElement)}normalizedToRange(t){const r=[[t.start.node,t.start.offset]];t.native.collapsed||r.push([t.end.node,t.end.offset]);const n=r.map(o=>{const[a,l]=o,c=this.scroll.find(a,!0),u=c.offset(this.scroll);return l===0?u:c instanceof un?u+c.index(a,l):u+c.length()}),s=Math.min(Math.max(...n),this.scroll.length()-1),i=Math.min(s,...n);return new Xc(i,s-i)}normalizeNative(t){if(!X_(this.root,t.startContainer)||!t.collapsed&&!X_(this.root,t.endContainer))return null;const r={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[r.start,r.end].forEach(n=>{let{node:s,offset:i}=n;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;n.node=s,n.offset=i}),r}rangeToNative(t){const r=this.scroll.length(),n=(s,i)=>{s=Math.min(r-1,s);const[o,a]=this.scroll.leaf(s);return o?o.position(a,i):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(J_.info("setNativeRange",t,r,n,s),t!=null&&(this.root.parentNode==null||t.parentNode==null||n.parentNode==null))return;const o=document.getSelection();if(o!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(a==null||i||t!==a.startContainer||r!==a.startOffset||n!==a.endContainer||s!==a.endOffset){t instanceof Element&&t.tagName==="BR"&&(r=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&n.tagName==="BR"&&(s=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const l=document.createRange();l.setStart(t,r),l.setEnd(n,s),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;if(typeof r=="string"&&(n=r,r=!1),J_.info("setRange",t),t!=null){const s=this.rangeToNative(t);this.setNativeRange(...s,r)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const r=this.lastRange,[n,s]=this.getRange();if(this.lastRange=n,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!Za(r,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const i=[Ce.events.SELECTION_CHANGE,Sd(this.lastRange),Sd(r),t];this.emitter.emit(Ce.events.EDITOR_CHANGE,...i),t!==Ce.sources.SILENT&&this.emitter.emit(...i)}}}function X_(e,t){try{t.parentNode}catch{return!1}return e.contains(t)}const Cze=/^[ -~]*$/;class Tze{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let r=this.scroll.length();this.scroll.batchStart();const n=M5(t),s=new Oe;return Oze(n.ops.slice()).reduce((i,o)=>{const a=Cs.Op.length(o);let l=o.attributes||{},c=!1,u=!1;if(o.insert!=null){if(s.retain(a),typeof o.insert=="string"){const p=o.insert;u=!p.endsWith(`
`)&&(r<=i||!!this.scroll.descendant(Ts,i)[0]),this.scroll.insertAt(i,p);const[y,m]=this.scroll.line(i);let b=ul({},Ns(y));if(y instanceof Xr){const[x]=y.descendant(un,m);x&&(b=ul(b,Ns(x)))}l=Cs.AttributeMap.diff(b,l)||{}}else if(typeof o.insert=="object"){const p=Object.keys(o.insert)[0];if(p==null)return i;const y=this.scroll.query(p,Pe.INLINE)!=null;if(y)(r<=i||this.scroll.descendant(Ts,i)[0])&&(u=!0);else if(i>0){const[m,b]=this.scroll.descendant(un,i-1);m instanceof _i?m.value()[b]!==`
`&&(c=!0):m instanceof us&&m.statics.scope===Pe.INLINE_BLOT&&(c=!0)}if(this.scroll.insertAt(i,p,o.insert[p]),y){const[m]=this.scroll.descendant(un,i);if(m){const b=ul({},Ns(m));l=Cs.AttributeMap.diff(b,l)||{}}}}r+=a}else if(s.push(o),o.retain!==null&&typeof o.retain=="object"){const p=Object.keys(o.retain)[0];if(p==null)return i;this.scroll.updateEmbedAt(i,p,o.retain[p])}Object.keys(l).forEach(p=>{this.scroll.formatAt(i,a,p,l[p])});const h=c?1:0,f=u?1:0;return r+=h+f,s.retain(h),s.delete(f),i+a+h+f},0),s.reduce((i,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(i,o.delete),i):i+Cs.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,r){return this.scroll.deleteAt(t,r),this.update(new Oe().retain(t).delete(r))}formatLine(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(i=>{this.scroll.lines(t,Math.max(r,1)).forEach(o=>{o.format(i,n[i])})}),this.scroll.optimize();const s=new Oe().retain(t).retain(r,Sd(n));return this.update(s)}formatText(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(i=>{this.scroll.formatAt(t,r,i,n[i])});const s=new Oe().retain(t).retain(r,Sd(n));return this.update(s)}getContents(t,r){return this.delta.slice(t,t+r)}getDelta(){return this.scroll.lines().reduce((t,r)=>t.concat(r.delta()),new Oe)}getFormat(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],s=[];r===0?this.scroll.path(t).forEach(a=>{const[l]=a;l instanceof Xr?n.push(l):l instanceof un&&s.push(l)}):(n=this.scroll.lines(t,r),s=this.scroll.descendants(un,t,r));const[i,o]=[n,s].map(a=>{const l=a.shift();if(l==null)return{};let c=Ns(l);for(;Object.keys(c).length>0;){const u=a.shift();if(u==null)return c;c=Aze(Ns(u),c)}return c});return{...i,...o}}getHTML(t,r){const[n,s]=this.scroll.line(t);if(n){const i=n.length();return n.length()>=s+r&&!(s===0&&r===i)?lm(n,s,r,!0):lm(this.scroll,t,r,!0)}return""}getText(t,r){return this.getContents(t,r).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(t,r){const n=M5(r),s=new Oe().retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(s)}insertEmbed(t,r,n){return this.scroll.insertAt(t,r,n),this.update(new Oe().retain(t).insert({[r]:n}))}insertText(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r=r.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,r),Object.keys(n).forEach(s=>{this.scroll.formatAt(t,r.length,s,n[s])}),this.update(new Oe().retain(t).insert(r,Sd(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==Xr.blotName)return!1;const r=t;return r.children.length>1?!1:r.children.head instanceof Ci}removeFormat(t,r){const n=this.getText(t,r),[s,i]=this.scroll.line(t+r);let o=0,a=new Oe;s!=null&&(o=s.length()-i,a=s.delta().slice(i,i+o-1).insert(`
`));const l=this.getContents(t,r+o).diff(new Oe().insert(n).concat(a)),c=new Oe().retain(t).concat(l);return this.applyDelta(c)}update(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(r.length===1&&r[0].type==="characterData"&&r[0].target.data.match(Cze)&&this.scroll.find(r[0].target)){const i=this.scroll.find(r[0].target),o=Ns(i),a=i.offset(this.scroll),l=r[0].oldValue.replace(jw.CONTENTS,""),c=new Oe().insert(l),u=new Oe().insert(i.value()),h=n&&{oldRange:z5(n.oldRange,-a),newRange:z5(n.newRange,-a)};t=new Oe().retain(a).concat(c.diff(u,h)).reduce((f,p)=>p.insert?f.insert(p.insert,o):f.push(p),new Oe),this.delta=s.compose(t)}else this.delta=this.getDelta(),(!t||!Za(s.compose(t),this.delta))&&(t=s.diff(this.delta,n));return t}}function Xu(e,t,r){if(e.length===0){const[p]=Q_(r.pop());return t<=0?`</li></${p}>`:`</li></${p}>${Xu([],t-1,r)}`}const[{child:n,offset:s,length:i,indent:o,type:a},...l]=e,[c,u]=Q_(a);if(o>t)return r.push(a),o===t+1?`<${c}><li${u}>${lm(n,s,i)}${Xu(l,o,r)}`:`<${c}><li>${Xu(e,t+1,r)}`;const h=r[r.length-1];if(o===t&&a===h)return`</li><li${u}>${lm(n,s,i)}${Xu(l,o,r)}`;const[f]=Q_(r.pop());return`</li></${f}>${Xu(e,t-1,r)}`}function lm(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in e&&typeof e.html=="function")return e.html(t,r);if(e instanceof _i)return _w(e.value().slice(t,t+r)).replaceAll(" ","&nbsp;");if(e instanceof yi){if(e.statics.blotName==="list-container"){const c=[];return e.children.forEachAt(t,r,(u,h,f)=>{const p="formats"in u&&typeof u.formats=="function"?u.formats():{};c.push({child:u,offset:h,length:f,indent:p.indent||0,type:p.list})}),Xu(c,-1,[])}const s=[];if(e.children.forEachAt(t,r,(c,u,h)=>{s.push(lm(c,u,h))}),n||e.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:o}=e.domNode,[a,l]=i.split(`>${o}<`);return a==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${l}`:`${a}>${s.join("")}<${l}`}return e.domNode instanceof Element?e.domNode.outerHTML:""}function Aze(e,t){return Object.keys(t).reduce((r,n)=>{if(e[n]==null)return r;const s=t[n];return s===e[n]?r[n]=s:Array.isArray(s)?s.indexOf(e[n])<0?r[n]=s.concat([e[n]]):r[n]=s:r[n]=[s,e[n]],r},{})}function Q_(e){const t=e==="ordered"?"ol":"ul";switch(e){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function M5(e){return e.reduce((t,r)=>{if(typeof r.insert=="string"){const n=r.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(n,r.attributes)}return t.push(r)},new Oe)}function z5(e,t){let{index:r,length:n}=e;return new Xc(r+t,n)}function Oze(e){const t=[];return e.forEach(r=>{typeof r.insert=="string"?r.insert.split(`
`).forEach((n,s)=>{s&&t.push({insert:`
`,attributes:r.attributes}),n&&t.push({insert:n,attributes:r.attributes})}):t.push(r)}),t}class Ti{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=r}}xe(Ti,"DEFAULTS",{});const wy="\uFEFF";class oA extends us{constructor(t,r){super(t,r),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(wy),this.rightGuard=document.createTextNode(wy),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,r){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,r)}restore(t){let r=null,n;const s=t.data.split(wy).join("");if(t===this.leftGuard)if(this.prev instanceof _i){const i=this.prev.length();this.prev.insertAt(i,s),r={startNode:this.prev.domNode,startOffset:i+s.length}}else n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this),r={startNode:n,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof _i?(this.next.insertAt(0,s),r={startNode:this.next.domNode,startOffset:s.length}):(n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this.next),r={startNode:n,startOffset:s.length}));return t.data=wy,r}update(t,r){t.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){const s=this.restore(n.target);s&&(r.range=s)}})}}class Pze{constructor(t,r){xe(this,"isComposing",!1),this.scroll=t,this.emitter=r,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const r=t.target instanceof Node?this.scroll.find(t.target,!0):null;r&&!(r instanceof oA)&&(this.emitter.emit(Ce.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Ce.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Ce.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Ce.events.COMPOSITION_END,t),this.isComposing=!1}}const Hy=class{constructor(t,r){xe(this,"modules",{}),this.quill=t,this.options=r}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const r=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new r(this.quill,this.options.modules[t]||{}),this.modules[t]}};xe(Hy,"DEFAULTS",{modules:{}}),xe(Hy,"themes",{default:Hy});let kw=Hy;const Rze=e=>e.parentElement||e.getRootNode().host||null,Ize=e=>{const t=e.getBoundingClientRect(),r="offsetWidth"in e&&Math.abs(t.width)/e.offsetWidth||1,n="offsetHeight"in e&&Math.abs(t.height)/e.offsetHeight||1;return{top:t.top,right:t.left+e.clientWidth*r,bottom:t.top+e.clientHeight*n,left:t.left}},_y=e=>{const t=parseInt(e,10);return Number.isNaN(t)?0:t},F5=(e,t,r,n,s,i)=>e<r&&t>n?0:e<r?-(r-e+s):t>n?t-e>n-r?e+s-r:t-n+i:0,Dze=(e,t)=>{var r,n,s;const i=e.ownerDocument;let o=t,a=e;for(;a;){const l=a===i.body,c=l?{top:0,right:((r=window.visualViewport)==null?void 0:r.width)??i.documentElement.clientWidth,bottom:((n=window.visualViewport)==null?void 0:n.height)??i.documentElement.clientHeight,left:0}:Ize(a),u=getComputedStyle(a),h=F5(o.left,o.right,c.left,c.right,_y(u.scrollPaddingLeft),_y(u.scrollPaddingRight)),f=F5(o.top,o.bottom,c.top,c.bottom,_y(u.scrollPaddingTop),_y(u.scrollPaddingBottom));if(h||f)if(l)(s=i.defaultView)==null||s.scrollBy(h,f);else{const{scrollLeft:p,scrollTop:y}=a;f&&(a.scrollTop+=f),h&&(a.scrollLeft+=h);const m=a.scrollLeft-p,b=a.scrollTop-y;o={left:o.left-m,top:o.top-b,right:o.right-m,bottom:o.bottom-b}}a=l||u.position==="fixed"?null:Rze(a)}},Lze=100,Mze=["block","break","cursor","inline","scroll","text"],zze=(e,t,r)=>{const n=new fh;return Mze.forEach(s=>{const i=t.query(s);i&&n.register(i)}),e.forEach(s=>{let i=t.query(s);i||r.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;i;)if(n.register(i),i="blotName"in i?i.requiredContainer??null:null,o+=1,o>Lze){r.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),n},Cd=xa("quill"),Ky=new fh;yi.uiClass="ql-ui";const Qu=class Jf{static debug(t){t===!0&&(t="log"),xa.level(t)}static find(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return sS.get(t)||Ky.find(t,r)}static import(t){return this.imports[t]==null&&Cd.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],r=!!(!(arguments.length<=1)&&arguments[1]),n="attrName"in t?t.attrName:t.blotName;typeof n=="string"?this.register(`formats/${n}`,t,r):Object.keys(t).forEach(s=>{this.register(s,t[s],r)})}else{const t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!n&&Cd.warn(`Overwriting ${t} with`,r),this.imports[t]=r,(t.startsWith("blots/")||t.startsWith("formats/"))&&r&&typeof r!="boolean"&&r.blotName!=="abstract"&&Ky.register(r),typeof r.register=="function"&&r.register(Ky)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Fze(t,r),this.container=this.options.container,this.container==null){Cd.error("Invalid Quill container",t);return}this.options.debug&&Jf.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",sS.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ce;const s=tA.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Tze(this.scroll),this.selection=new Eze(this.scroll,this.emitter),this.composition=new Pze(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ce.events.EDITOR_CHANGE,o=>{o===Ce.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ce.events.SCROLL_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Js.call(this,()=>this.editor.update(null,a,u),o)}),this.emitter.on(Ce.events.SCROLL_EMBED_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Js.call(this,()=>{const h=new Oe().retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(h,[],u)},Jf.sources.USER)}),n){const o=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const n=t;t=document.createElement("div"),t.classList.add(n)}return this.container.insertBefore(t,r),t}blur(){this.selection.setRange(null)}deleteText(t,r,n){return[t,r,,n]=No(t,r,n),Js.call(this,()=>this.editor.deleteText(t,r),n,t,-1*r)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const r=t();return this.allowReadOnlyEdits=!1,r}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.sources.API;return Js.call(this,()=>{const s=this.getSelection(!0);let i=new Oe;if(s==null)return i;if(this.scroll.query(t,Pe.BLOCK))i=this.editor.formatLine(s.index,s.length,{[t]:r});else{if(s.length===0)return this.selection.format(t,r),i;i=this.editor.formatText(s.index,s.length,{[t]:r})}return this.setSelection(s,Ce.sources.SILENT),i},n)}formatLine(t,r,n,s,i){let o;return[t,r,o,i]=No(t,r,n,s,i),Js.call(this,()=>this.editor.formatLine(t,r,o),i,t,0)}formatText(t,r,n,s,i){let o;return[t,r,o,i]=No(t,r,n,s,i),Js.call(this,()=>this.editor.formatText(t,r,o),i,t,0)}getBounds(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof t=="number"?n=this.selection.getBounds(t,r):n=this.selection.getBounds(t.index,t.length),!n)return null;const s=this.container.getBoundingClientRect();return{bottom:n.bottom-s.top,height:n.height,left:n.left-s.left,right:n.right-s.left,top:n.top-s.top,width:n.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,r]=No(t,r),this.editor.getContents(t,r)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,r):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,r)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(r=r??this.getLength()-t),[t,r]=No(t,r),this.editor.getHTML(t,r)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(r=r??this.getLength()-t),[t,r]=No(t,r),this.editor.getText(t,r)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Jf.sources.API;return Js.call(this,()=>this.editor.insertEmbed(t,r,n),s,t)}insertText(t,r,n,s,i){let o;return[t,,o,i]=No(t,0,n,s,i),Js.call(this,()=>this.editor.insertText(t,r,o),i,t,r.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,r,n){return[t,r,,n]=No(t,r,n),Js.call(this,()=>this.editor.removeFormat(t,r),n,t)}scrollRectIntoView(t){Dze(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,r=t&&this.selection.getBounds(t.index,t.length);r&&this.scrollRectIntoView(r)}setContents(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Js.call(this,()=>{t=new Oe(t);const n=this.getLength(),s=this.editor.deleteText(0,n),i=this.editor.insertContents(0,t),o=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(o)},r)}setSelection(t,r,n){t==null?this.selection.setRange(null,r||Jf.sources.API):([t,r,,n]=No(t,r,n),this.selection.setRange(new Xc(Math.max(0,t),r),n),n!==Ce.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;const n=new Oe().insert(t);return this.setContents(n,r)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.sources.USER;const r=this.scroll.update(t);return this.selection.update(t),r}updateContents(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce.sources.API;return Js.call(this,()=>(t=new Oe(t),this.editor.applyDelta(t)),r,!0)}};xe(Qu,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Ky,theme:"default"}),xe(Qu,"events",Ce.events),xe(Qu,"sources",Ce.sources),xe(Qu,"version","2.0.3"),xe(Qu,"imports",{delta:Oe,parchment:dze,"core/module":Ti,"core/theme":kw});let se=Qu;function $5(e){return typeof e=="string"?document.querySelector(e):e}function ej(e){return Object.entries(e??{}).reduce((t,r)=>{let[n,s]=r;return{...t,[n]:s===!0?{}:s}},{})}function U5(e){return Object.fromEntries(Object.entries(e).filter(t=>t[1]!==void 0))}function Fze(e,t){const r=$5(e);if(!r)throw new Error("Invalid Quill container");const n=!t.theme||t.theme===se.DEFAULTS.theme?kw:se.import(`themes/${t.theme}`);if(!n)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:s,...i}=se.DEFAULTS,{modules:o,...a}=n.DEFAULTS;let l=ej(t.modules);l!=null&&l.toolbar&&l.toolbar.constructor!==Object&&(l={...l,toolbar:{container:l.toolbar}});const c=ul({},ej(s),ej(o),l),u={...i,...U5(a),...U5(t)};let h=t.registry;return h?t.formats&&Cd.warn('Ignoring "formats" option because "registry" is specified'):h=t.formats?zze(t.formats,u.registry,Cd):u.registry,{...u,registry:h,container:r,theme:n,modules:Object.entries(c).reduce((f,p)=>{let[y,m]=p;if(!m)return f;const b=se.import(`modules/${y}`);return b==null?(Cd.error(`Cannot load ${y} module. Are you sure you registered it?`),f):{...f,[y]:ul({},b.DEFAULTS||{},m)}},{}),bounds:$5(u.bounds)}}function Js(e,t,r,n){if(!this.isEnabled()&&t===Ce.sources.USER&&!this.allowReadOnlyEdits)return new Oe;let s=r==null?null:this.getSelection();const i=this.editor.delta,o=e();if(s!=null&&(r===!0&&(r=s.index),n==null?s=q5(s,o,t):n!==0&&(s=q5(s,r,n,t)),this.setSelection(s,Ce.sources.SILENT)),o.length()>0){const a=[Ce.events.TEXT_CHANGE,o,i,t];this.emitter.emit(Ce.events.EDITOR_CHANGE,...a),t!==Ce.sources.SILENT&&this.emitter.emit(...a)}return o}function No(e,t,r,n,s){let i={};return typeof e.index=="number"&&typeof e.length=="number"?typeof t!="number"?(s=n,n=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):typeof t!="number"&&(s=n,n=r,r=t,t=0),typeof r=="object"?(i=r,s=n):typeof r=="string"&&(n!=null?i[r]=n:s=r),s=s||Ce.sources.API,[e,t,i,s]}function q5(e,t,r,n){const s=typeof r=="number"?r:0;if(e==null)return null;let i,o;return t&&typeof t.transformPosition=="function"?[i,o]=[e.index,e.index+e.length].map(a=>t.transformPosition(a,n!==Ce.sources.USER)):[i,o]=[e.index,e.index+e.length].map(a=>a<t||a===t&&n===Ce.sources.USER?a:s>=0?a+s:Math.max(t,a+s)),new Xc(i,o-i)}class mu extends vw{}function B5(e){return e instanceof Xr||e instanceof Ts}function V5(e){return typeof e.updateContent=="function"}class ed extends tA{constructor(t,r,n){let{emitter:s}=n;super(t,r),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Ce.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Ce.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,r){this.emitter.emit(Ce.events.SCROLL_EMBED_UPDATE,t,r)}deleteAt(t,r){const[n,s]=this.line(t),[i]=this.line(t+r);if(super.deleteAt(t,r),i!=null&&n!==i&&s>0){if(n instanceof Ts||i instanceof Ts){this.optimize();return}const o=i.children.head instanceof Ci?null:i.children.head;n.moveChildren(i,o),n.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,r,n,s){super.formatAt(t,r,n,s),this.optimize()}insertAt(t,r,n){if(t>=this.length())if(n==null||this.scroll.query(r,Pe.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),n==null&&r.endsWith(`
`)?s.insertAt(0,r.slice(0,-1),n):s.insertAt(0,r,n)}else{const s=this.scroll.create(r,n);this.appendChild(s)}else super.insertAt(t,r,n);this.optimize()}insertBefore(t,r){if(t.statics.scope===Pe.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,r)}else super.insertBefore(t,r)}insertContents(t,r){const n=this.deltaToRenderBlocks(r.concat(new Oe().insert(`
`))),s=n.pop();if(s==null)return;this.batchStart();const i=n.shift();if(i){const l=i.type==="block"&&(i.delta.length()===0||!this.descendant(Ts,t)[0]&&t<this.length()),c=i.type==="block"?i.delta:new Oe().insert({[i.key]:i.value});tj(this,t,c);const u=i.type==="block"?1:0,h=t+c.length()+u;l&&this.insertAt(h-1,`
`);const f=Ns(this.line(t)[0]),p=Cs.AttributeMap.diff(f,i.attributes)||{};Object.keys(p).forEach(y=>{this.formatAt(h-1,1,y,p[y])}),t=h}let[o,a]=this.children.find(t);if(n.length&&(o&&(o=o.split(a),a=0),n.forEach(l=>{if(l.type==="block"){const c=this.createBlock(l.attributes,o||void 0);tj(c,0,l.delta)}else{const c=this.create(l.key,l.value);this.insertBefore(c,o||void 0),Object.keys(l.attributes).forEach(u=>{c.format(u,l.attributes[u])})}})),s.type==="block"&&s.delta.length()){const l=o?o.offset(o.scroll)+a:this.length();tj(this,l,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const r=this.path(t).pop();if(!r)return[null,-1];const[n,s]=r;return n instanceof un?[n,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(B5,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const n=(s,i,o)=>{let a=[],l=o;return s.children.forEachAt(i,o,(c,u,h)=>{B5(c)?a.push(c):c instanceof vw&&(a=a.concat(n(c,u,l))),l-=h}),a};return n(this,t,r)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,r),t.length>0&&this.emitter.emit(Ce.events.SCROLL_OPTIMIZE,t,r))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let r=Ce.sources.USER;typeof t=="string"&&(r=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(n=>{let{target:s}=n;const i=this.find(s,!0);return i&&!V5(i)}),t.length>0&&this.emitter.emit(Ce.events.SCROLL_BEFORE_UPDATE,r,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Ce.events.SCROLL_UPDATE,r,t)}updateEmbedAt(t,r,n){const[s]=this.descendant(i=>i instanceof Ts,t);s&&s.statics.blotName===r&&V5(s)&&s.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const r=[];let n=new Oe;return t.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const o=i.split(`
`);o.slice(0,-1).forEach(l=>{n.insert(l,s.attributes),r.push({type:"block",delta:n,attributes:s.attributes??{}}),n=new Oe});const a=o[o.length-1];a&&n.insert(a,s.attributes)}else{const o=Object.keys(i)[0];if(!o)return;this.query(o,Pe.INLINE)?n.push(s):(n.length()&&r.push({type:"block",delta:n,attributes:{}}),n=new Oe,r.push({type:"blockEmbed",key:o,value:i[o],attributes:s.attributes??{}}))}}),n.length()&&r.push({type:"block",delta:n,attributes:{}}),r}createBlock(t,r){let n;const s={};Object.entries(t).forEach(a=>{let[l,c]=a;this.query(l,Pe.BLOCK&Pe.BLOT)!=null?n=l:s[l]=c});const i=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(i,r||void 0);const o=i.length();return Object.entries(s).forEach(a=>{let[l,c]=a;i.formatAt(0,o,l,c)}),i}}xe(ed,"blotName","scroll"),xe(ed,"className","ql-editor"),xe(ed,"tagName","DIV"),xe(ed,"defaultChild",Xr),xe(ed,"allowedChildren",[Xr,Ts,mu]);function tj(e,t,r){r.reduce((n,s)=>{const i=Cs.Op.length(s);let o=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const a=s.insert;e.insertAt(n,a);const[l]=e.descendant(un,n),c=Ns(l);o=Cs.AttributeMap.diff(c,o)||{}}else if(typeof s.insert=="object"){const a=Object.keys(s.insert)[0];if(a==null)return n;if(e.insertAt(n,a,s.insert[a]),e.scroll.query(a,Pe.INLINE)!=null){const[l]=e.descendant(un,n),c=Ns(l);o=Cs.AttributeMap.diff(c,o)||{}}}}return Object.keys(o).forEach(a=>{e.formatAt(n,i,a,o[a])}),n+i},t)}const aA={scope:Pe.BLOCK,whitelist:["right","center","justify"]},$ze=new oo("align","align",aA),AW=new Ei("align","ql-align",aA),OW=new Fl("align","text-align",aA);class PW extends Fl{value(t){let r=super.value(t);return r.startsWith("rgb(")?(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${r.split(",").map(n=>`00${parseInt(n,10).toString(16)}`.slice(-2)).join("")}`):r}}const Uze=new Ei("color","ql-color",{scope:Pe.INLINE}),lA=new PW("color","color",{scope:Pe.INLINE}),qze=new Ei("background","ql-bg",{scope:Pe.INLINE}),cA=new PW("background","background-color",{scope:Pe.INLINE});class gu extends mu{static create(t){const r=super.create(t);return r.setAttribute("spellcheck","false"),r}code(t,r){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(t,t+r)}html(t,r){return`<pre>
${_w(this.code(t,r))}
</pre>`}}class pn extends Xr{static register(){se.register(gu)}}xe(pn,"TAB","  ");class uA extends $l{}uA.blotName="code";uA.tagName="CODE";pn.blotName="code-block";pn.className="ql-code-block";pn.tagName="DIV";gu.blotName="code-block-container";gu.className="ql-code-block-container";gu.tagName="DIV";gu.allowedChildren=[pn];pn.allowedChildren=[_i,Ci,jw];pn.requiredContainer=gu;const dA={scope:Pe.BLOCK,whitelist:["rtl"]},RW=new oo("direction","dir",dA),IW=new Ei("direction","ql-direction",dA),DW=new Fl("direction","direction",dA),LW={scope:Pe.INLINE,whitelist:["serif","monospace"]},MW=new Ei("font","ql-font",LW);class Bze extends Fl{value(t){return super.value(t).replace(/["']/g,"")}}const zW=new Bze("font","font-family",LW),FW=new Ei("size","ql-size",{scope:Pe.INLINE,whitelist:["small","large","huge"]}),$W=new Fl("size","font-size",{scope:Pe.INLINE,whitelist:["10px","18px","32px"]}),Vze=xa("quill:keyboard"),Wze=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Nw extends Ti{static match(t,r){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!r[n]!==t[n]&&r[n]!==null)?!1:r.key===t.key||r.key===t.which}constructor(t,r){super(t,r),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=Kze(t);if(s==null){Vze.warn("Attempted to add invalid keyboard binding",s);return}typeof r=="function"&&(r={handler:r}),typeof n=="function"&&(n={handler:n}),(Array.isArray(s.key)?s.key:[s.key]).forEach(i=>{const o={...s,key:i,...r,...n};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const r=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(y=>Nw.match(t,y));if(r.length===0)return;const n=se.find(t.target,!0);if(n&&n.scroll!==this.quill.scroll)return;const s=this.quill.getSelection();if(s==null||!this.quill.hasFocus())return;const[i,o]=this.quill.getLine(s.index),[a,l]=this.quill.getLeaf(s.index),[c,u]=s.length===0?[a,l]:this.quill.getLeaf(s.index+s.length),h=a instanceof bb?a.value().slice(0,l):"",f=c instanceof bb?c.value().slice(u):"",p={collapsed:s.length===0,empty:s.length===0&&i.length()<=1,format:this.quill.getFormat(s),line:i,offset:o,prefix:h,suffix:f,event:t};r.some(y=>{if(y.collapsed!=null&&y.collapsed!==p.collapsed||y.empty!=null&&y.empty!==p.empty||y.offset!=null&&y.offset!==p.offset)return!1;if(Array.isArray(y.format)){if(y.format.every(m=>p.format[m]==null))return!1}else if(typeof y.format=="object"&&!Object.keys(y.format).every(m=>y.format[m]===!0?p.format[m]!=null:y.format[m]===!1?p.format[m]==null:Za(y.format[m],p.format[m])))return!1;return y.prefix!=null&&!y.prefix.test(p.prefix)||y.suffix!=null&&!y.suffix.test(p.suffix)?!1:y.handler.call(this,s,p,y)!==!0})&&t.preventDefault()})}handleBackspace(t,r){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(r.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(t.index);let o=new Oe().retain(t.index-n).delete(n);if(r.offset===0){const[a]=this.quill.getLine(t.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){const l=i.formats(),c=this.quill.getFormat(t.index-1,1);if(s=Cs.AttributeMap.diff(l,c)||{},Object.keys(s).length>0){const u=new Oe().retain(t.index+i.length()-2).retain(1,s);o=o.compose(u)}}}this.quill.updateContents(o,se.sources.USER),this.quill.focus()}handleDelete(t,r){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(r.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let s={};const[i]=this.quill.getLine(t.index);let o=new Oe().retain(t.index).delete(n);if(r.offset>=i.length()-1){const[a]=this.quill.getLine(t.index+1);if(a){const l=i.formats(),c=this.quill.getFormat(t.index,1);s=Cs.AttributeMap.diff(l,c)||{},Object.keys(s).length>0&&(o=o.retain(a.length()-1).retain(1,s))}}this.quill.updateContents(o,se.sources.USER),this.quill.focus()}handleDeleteRange(t){hA({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,r){const n=Object.keys(r.format).reduce((i,o)=>(this.quill.scroll.query(o,Pe.BLOCK)&&!Array.isArray(r.format[o])&&(i[o]=r.format[o]),i),{}),s=new Oe().retain(t.index).delete(t.length).insert(`
`,n);this.quill.updateContents(s,se.sources.USER),this.quill.setSelection(t.index+1,se.sources.SILENT),this.quill.focus()}}const Hze={bindings:{bold:rj("bold"),italic:rj("italic"),underline:rj("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",se.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",se.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(e,t){t.format.indent!=null?this.quill.format("indent","-1",se.sources.USER):t.format.list!=null&&this.quill.format("list",!1,se.sources.USER)}},"indent code-block":W5(!0),"outdent code-block":W5(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(e){this.quill.deleteText(e.index-1,1,se.sources.USER)}},tab:{key:"Tab",handler(e,t){if(t.format.table)return!0;this.quill.history.cutoff();const r=new Oe().retain(e.index).delete(e.length).insert("	");return this.quill.updateContents(r,se.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,se.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,se.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(e,t){const r={list:!1};t.format.indent&&(r.indent=!1),this.quill.formatLine(e.index,e.length,r,se.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(e){const[t,r]=this.quill.getLine(e.index),n={...t.formats(),list:"checked"},s=new Oe().retain(e.index).insert(`
`,n).retain(t.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,se.sources.USER),this.quill.setSelection(e.index+1,se.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(e,t){const[r,n]=this.quill.getLine(e.index),s=new Oe().retain(e.index).insert(`
`,t.format).retain(r.length()-n-1).retain(1,{header:null});this.quill.updateContents(s,se.sources.USER),this.quill.setSelection(e.index+1,se.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(e){const t=this.quill.getModule("table");if(t){const[r,n,s,i]=t.getTable(e),o=Zze(r,n,s,i);if(o==null)return;let a=r.offset();if(o<0){const l=new Oe().retain(a).insert(`
`);this.quill.updateContents(l,se.sources.USER),this.quill.setSelection(e.index+1,e.length,se.sources.SILENT)}else if(o>0){a+=r.length();const l=new Oe().retain(a).insert(`
`);this.quill.updateContents(l,se.sources.USER),this.quill.setSelection(a,se.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(e,t){const{event:r,line:n}=t,s=n.offset(this.quill.scroll);r.shiftKey?this.quill.setSelection(s-1,se.sources.USER):this.quill.setSelection(s+n.length(),se.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query("list")==null)return!0;const{length:r}=t.prefix,[n,s]=this.quill.getLine(e.index);if(s>r)return!0;let i;switch(t.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(e.index," ",se.sources.USER),this.quill.history.cutoff();const o=new Oe().retain(e.index-s).delete(r+1).retain(n.length()-2-s).retain(1,{list:i});return this.quill.updateContents(o,se.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,se.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(e){const[t,r]=this.quill.getLine(e.index);let n=2,s=t;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,n-=1,n<=0){const i=new Oe().retain(e.index+t.length()-r-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,se.sources.USER),this.quill.setSelection(e.index-1,se.sources.SILENT),!1}return!0}},"embed left":jy("ArrowLeft",!1),"embed left shift":jy("ArrowLeft",!0),"embed right":jy("ArrowRight",!1),"embed right shift":jy("ArrowRight",!0),"table down":H5(!1),"table up":H5(!0)}};Nw.DEFAULTS=Hze;function W5(e){return{key:"Tab",shiftKey:!e,format:{"code-block":!0},handler(t,r){let{event:n}=r;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(t.length===0&&!n.shiftKey){this.quill.insertText(t.index,i,se.sources.USER),this.quill.setSelection(t.index+i.length,se.sources.SILENT);return}const o=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:a,length:l}=t;o.forEach((c,u)=>{e?(c.insertAt(0,i),u===0?a+=i.length:l+=i.length):c.domNode.textContent.startsWith(i)&&(c.deleteAt(0,i.length),u===0?a-=i.length:l-=i.length)}),this.quill.update(se.sources.USER),this.quill.setSelection(a,l,se.sources.SILENT)}}}function jy(e,t){return{key:e,shiftKey:t,altKey:null,[e==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:n}=r;e==="ArrowRight"&&(n+=r.length+1);const[s]=this.quill.getLeaf(n);return s instanceof us?(e==="ArrowLeft"?t?this.quill.setSelection(r.index-1,r.length+1,se.sources.USER):this.quill.setSelection(r.index-1,se.sources.USER):t?this.quill.setSelection(r.index,r.length+1,se.sources.USER):this.quill.setSelection(r.index+r.length+1,se.sources.USER),!1):!0}}}function rj(e){return{key:e[0],shortKey:!0,handler(t,r){this.quill.format(e,!r.format[e],se.sources.USER)}}}function H5(e){return{key:e?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,r){const n=e?"prev":"next",s=r.line,i=s.parent[n];if(i!=null){if(i.statics.blotName==="table-row"){let o=i.children.head,a=s;for(;a.prev!=null;)a=a.prev,o=o.next;const l=o.offset(this.quill.scroll)+Math.min(r.offset,o.length()-1);this.quill.setSelection(l,0,se.sources.USER)}}else{const o=s.table()[n];o!=null&&(e?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,se.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,se.sources.USER))}return!1}}}function Kze(e){if(typeof e=="string"||typeof e=="number")e={key:e};else if(typeof e=="object")e=Sd(e);else return null;return e.shortKey&&(e[Wze]=e.shortKey,delete e.shortKey),e}function hA(e){let{quill:t,range:r}=e;const n=t.getLines(r);let s={};if(n.length>1){const i=n[0].formats(),o=n[n.length-1].formats();s=Cs.AttributeMap.diff(o,i)||{}}t.deleteText(r,se.sources.USER),Object.keys(s).length>0&&t.formatLine(r.index,1,s,se.sources.USER),t.setSelection(r.index,se.sources.SILENT)}function Zze(e,t,r,n){return t.prev==null&&t.next==null?r.prev==null&&r.next==null?n===0?-1:1:r.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const Gze=/font-weight:\s*normal/,Yze=["P","OL","UL"],K5=e=>e&&Yze.includes(e.tagName),Jze=e=>{Array.from(e.querySelectorAll("br")).filter(t=>K5(t.previousElementSibling)&&K5(t.nextElementSibling)).forEach(t=>{var r;(r=t.parentNode)==null||r.removeChild(t)})},Xze=e=>{Array.from(e.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var r;return(r=t.getAttribute("style"))==null?void 0:r.match(Gze)}).forEach(t=>{var r;const n=e.createDocumentFragment();n.append(...t.childNodes),(r=t.parentNode)==null||r.replaceChild(n,t)})};function Qze(e){e.querySelector('[id^="docs-internal-guid-"]')&&(Xze(e),Jze(e))}const eFe=/\bmso-list:[^;]*ignore/i,tFe=/\bmso-list:[^;]*\bl(\d+)/i,rFe=/\bmso-list:[^;]*\blevel(\d+)/i,nFe=(e,t)=>{const r=e.getAttribute("style"),n=r==null?void 0:r.match(tFe);if(!n)return null;const s=Number(n[1]),i=r==null?void 0:r.match(rFe),o=i?Number(i[1]):1,a=new RegExp(`@list l${s}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=t.match(a),c=l&&l[1]==="bullet"?"bullet":"ordered";return{id:s,indent:o,type:c,element:e}},sFe=e=>{var t,r;const n=Array.from(e.querySelectorAll("[style*=mso-list]")),s=[],i=[];n.forEach(l=>{(l.getAttribute("style")||"").match(eFe)?s.push(l):i.push(l)}),s.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)});const o=e.documentElement.innerHTML,a=i.map(l=>nFe(l,o)).filter(l=>l);for(;a.length;){const l=[];let c=a.shift();for(;c;)l.push(c),c=a.length&&((t=a[0])==null?void 0:t.element)===c.element.nextElementSibling&&a[0].id===c.id?a.shift():null;const u=document.createElement("ul");l.forEach(p=>{const y=document.createElement("li");y.setAttribute("data-list",p.type),p.indent>1&&y.setAttribute("class",`ql-indent-${p.indent-1}`),y.innerHTML=p.element.innerHTML,u.appendChild(y)});const h=(r=l[0])==null?void 0:r.element,{parentNode:f}=h??{};h&&(f==null||f.replaceChild(u,h)),l.slice(1).forEach(p=>{let{element:y}=p;f==null||f.removeChild(y)})}};function iFe(e){e.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&sFe(e)}const oFe=[iFe,Qze],aFe=e=>{e.documentElement&&oFe.forEach(t=>{t(e)})},lFe=xa("quill:clipboard"),cFe=[[Node.TEXT_NODE,wFe],[Node.TEXT_NODE,G5],["br",pFe],[Node.ELEMENT_NODE,G5],[Node.ELEMENT_NODE,fFe],[Node.ELEMENT_NODE,hFe],[Node.ELEMENT_NODE,bFe],["li",yFe],["ol, ul",vFe],["pre",mFe],["tr",xFe],["b",nj("bold")],["i",nj("italic")],["strike",nj("strike")],["style",gFe]],uFe=[$ze,RW].reduce((e,t)=>(e[t.keyName]=t,e),{}),Z5=[OW,cA,lA,DW,zW,$W].reduce((e,t)=>(e[t.keyName]=t,e),{});class UW extends Ti{constructor(t,r){super(t,r),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],cFe.concat(this.options.matchers??[]).forEach(n=>{let[s,i]=n;this.addMatcher(s,i)})}addMatcher(t,r){this.matchers.push([t,r])}convert(t){let{html:r,text:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[pn.blotName])return new Oe().insert(n||"",{[pn.blotName]:s[pn.blotName]});if(!r)return new Oe().insert(n||"",s);const i=this.convertHTML(r);return Xm(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new Oe().retain(i.length()-1).delete(1)):i}normalizeHTML(t){aFe(t)}convertHTML(t){const r=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(r);const n=r.body,s=new WeakMap,[i,o]=this.prepareMatching(n,s);return fA(this.quill.scroll,n,i,o,s)}dangerouslyPasteHTML(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:se.sources.API;if(typeof t=="string"){const s=this.convert({html:t,text:""});this.quill.setContents(s,r),this.quill.setSelection(0,se.sources.SILENT)}else{const s=this.convert({html:r,text:""});this.quill.updateContents(new Oe().retain(t).concat(s),n),this.quill.setSelection(t+s.length(),se.sources.SILENT)}}onCaptureCopy(t){var r,n;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[i]=this.quill.selection.getRange();if(i==null)return;const{html:o,text:a}=this.onCopy(i,s);(r=t.clipboardData)==null||r.setData("text/plain",a),(n=t.clipboardData)==null||n.setData("text/html",o),s&&hA({range:i,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(r=>r[0]!=="#").join(`
`)}onCapturePaste(t){var r,n,s,i,o;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const a=this.quill.getSelection(!0);if(a==null)return;const l=(r=t.clipboardData)==null?void 0:r.getData("text/html");let c=(n=t.clipboardData)==null?void 0:n.getData("text/plain");if(!l&&!c){const h=(s=t.clipboardData)==null?void 0:s.getData("text/uri-list");h&&(c=this.normalizeURIList(h))}const u=Array.from(((i=t.clipboardData)==null?void 0:i.files)||[]);if(!l&&u.length>0){this.quill.uploader.upload(a,u);return}if(l&&u.length>0){const h=new DOMParser().parseFromString(l,"text/html");if(h.body.childElementCount===1&&((o=h.body.firstElementChild)==null?void 0:o.tagName)==="IMG"){this.quill.uploader.upload(a,u);return}}this.onPaste(a,{html:l,text:c})}onCopy(t){const r=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:r}}onPaste(t,r){let{text:n,html:s}=r;const i=this.quill.getFormat(t.index),o=this.convert({text:n,html:s},i);lFe.log("onPaste",o,{text:n,html:s});const a=new Oe().retain(t.index).delete(t.length).concat(o);this.quill.updateContents(a,se.sources.USER),this.quill.setSelection(a.length()-t.length,se.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,r){const n=[],s=[];return this.matchers.forEach(i=>{const[o,a]=i;switch(o){case Node.TEXT_NODE:s.push(a);break;case Node.ELEMENT_NODE:n.push(a);break;default:Array.from(t.querySelectorAll(o)).forEach(l=>{if(r.has(l)){const c=r.get(l);c==null||c.push(a)}else r.set(l,[a])});break}}),[n,s]}}xe(UW,"DEFAULTS",{matchers:[]});function yu(e,t,r,n){return n.query(t)?e.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[t])return s.push(i);const o=r?{[t]:r}:{};return s.insert(i.insert,{...o,...i.attributes})},new Oe):e}function Xm(e,t){let r="";for(let n=e.ops.length-1;n>=0&&r.length<t.length;--n){const s=e.ops[n];if(typeof s.insert!="string")break;r=s.insert+r}return r.slice(-1*t.length)===t}function sl(e,t){if(!(e instanceof Element))return!1;const r=t.query(e);return r&&r.prototype instanceof us?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(e.tagName.toLowerCase())}function dFe(e,t){return e.previousElementSibling&&e.nextElementSibling&&!sl(e.previousElementSibling,t)&&!sl(e.nextElementSibling,t)}const ky=new WeakMap;function qW(e){return e==null?!1:(ky.has(e)||(e.tagName==="PRE"?ky.set(e,!0):ky.set(e,qW(e.parentNode))),ky.get(e))}function fA(e,t,r,n,s){return t.nodeType===t.TEXT_NODE?n.reduce((i,o)=>o(t,i,e),new Oe):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((i,o)=>{let a=fA(e,o,r,n,s);return o.nodeType===t.ELEMENT_NODE&&(a=r.reduce((l,c)=>c(o,l,e),a),a=(s.get(o)||[]).reduce((l,c)=>c(o,l,e),a)),i.concat(a)},new Oe):new Oe}function nj(e){return(t,r,n)=>yu(r,e,!0,n)}function hFe(e,t,r){const n=oo.keys(e),s=Ei.keys(e),i=Fl.keys(e),o={};return n.concat(s).concat(i).forEach(a=>{let l=r.query(a,Pe.ATTRIBUTE);l!=null&&(o[l.attrName]=l.value(e),o[l.attrName])||(l=uFe[a],l!=null&&(l.attrName===a||l.keyName===a)&&(o[l.attrName]=l.value(e)||void 0),l=Z5[a],l!=null&&(l.attrName===a||l.keyName===a)&&(l=Z5[a],o[l.attrName]=l.value(e)||void 0))}),Object.entries(o).reduce((a,l)=>{let[c,u]=l;return yu(a,c,u,r)},t)}function fFe(e,t,r){const n=r.query(e);if(n==null)return t;if(n.prototype instanceof us){const s={},i=n.value(e);if(i!=null)return s[n.blotName]=i,new Oe().insert(s,n.formats(e,r))}else if(n.prototype instanceof om&&!Xm(t,`
`)&&t.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return yu(t,n.blotName,n.formats(e,r),r);return t}function pFe(e,t){return Xm(t,`
`)||t.insert(`
`),t}function mFe(e,t,r){const n=r.query("code-block"),s=n&&"formats"in n&&typeof n.formats=="function"?n.formats(e,r):!0;return yu(t,"code-block",s,r)}function gFe(){return new Oe}function yFe(e,t,r){const n=r.query(e);if(n==null||n.blotName!=="list"||!Xm(t,`
`))return t;let s=-1,i=e.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?t:t.reduce((o,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?o.push(a):o.insert(a.insert,{indent:s,...a.attributes||{}}):o,new Oe)}function vFe(e,t,r){const n=e;let s=n.tagName==="OL"?"ordered":"bullet";const i=n.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),yu(t,"list",s,r)}function G5(e,t,r){if(!Xm(t,`
`)){if(sl(e,r)&&(e.childNodes.length>0||e instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&e.nextSibling){let n=e.nextSibling;for(;n!=null;){if(sl(n,r))return t.insert(`
`);const s=r.query(n);if(s&&s.prototype instanceof Ts)return t.insert(`
`);n=n.firstChild}}}return t}function bFe(e,t,r){var n;const s={},i=e.style||{};return i.fontStyle==="italic"&&(s.italic=!0),i.textDecoration==="underline"&&(s.underline=!0),i.textDecoration==="line-through"&&(s.strike=!0),((n=i.fontWeight)!=null&&n.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(s.bold=!0),t=Object.entries(s).reduce((o,a)=>{let[l,c]=a;return yu(o,l,c,r)},t),parseFloat(i.textIndent||0)>0?new Oe().insert("	").concat(t):t}function xFe(e,t,r){var n,s;const i=((n=e.parentElement)==null?void 0:n.tagName)==="TABLE"?e.parentElement:(s=e.parentElement)==null?void 0:s.parentElement;if(i!=null){const o=Array.from(i.querySelectorAll("tr")).indexOf(e)+1;return yu(t,"table",o,r)}return t}function wFe(e,t,r){var n;let s=e.data;if(((n=e.parentElement)==null?void 0:n.tagName)==="O:P")return t.insert(s.trim());if(!qW(e)){if(s.trim().length===0&&s.includes(`
`)&&!dFe(e,r))return t;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(e.previousSibling==null&&e.parentElement!=null&&sl(e.parentElement,r)||e.previousSibling instanceof Element&&sl(e.previousSibling,r))&&(s=s.replace(/^ /,"")),(e.nextSibling==null&&e.parentElement!=null&&sl(e.parentElement,r)||e.nextSibling instanceof Element&&sl(e.nextSibling,r))&&(s=s.replace(/ $/,"")),s=s.replaceAll(" "," ")}return t.insert(s)}class BW extends Ti{constructor(t,r){super(t,r),xe(this,"lastRecorded",0),xe(this,"ignoreChange",!1),xe(this,"stack",{undo:[],redo:[]}),xe(this,"currentRange",null),this.quill.on(se.events.EDITOR_CHANGE,(n,s,i,o)=>{n===se.events.SELECTION_CHANGE?s&&o!==se.sources.SILENT&&(this.currentRange=s):n===se.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===se.sources.USER?this.record(s,i):this.transform(s)),this.currentRange=aS(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",n=>{n.inputType==="historyUndo"?(this.undo(),n.preventDefault()):n.inputType==="historyRedo"&&(this.redo(),n.preventDefault())})}change(t,r){if(this.stack[t].length===0)return;const n=this.stack[t].pop();if(!n)return;const s=this.quill.getContents(),i=n.delta.invert(s);this.stack[r].push({delta:i,range:aS(n.range,i)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,se.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,r){if(t.ops.length===0)return;this.stack.redo=[];let n=t.invert(r),s=this.currentRange;const i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(n=n.compose(o.delta),s=o.range)}else this.lastRecorded=i;n.length()!==0&&(this.stack.undo.push({delta:n,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){Y5(this.stack.undo,t),Y5(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,se.sources.USER);else{const r=jFe(this.quill.scroll,t.delta);this.quill.setSelection(r,se.sources.USER)}}}xe(BW,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Y5(e,t){let r=t;for(let n=e.length-1;n>=0;n-=1){const s=e[n];e[n]={delta:r.transform(s.delta,!0),range:s.range&&aS(s.range,r)},r=s.delta.transform(r),e[n].delta.length()===0&&e.splice(n,1)}}function _Fe(e,t){const r=t.ops[t.ops.length-1];return r==null?!1:r.insert!=null?typeof r.insert=="string"&&r.insert.endsWith(`
`):r.attributes!=null?Object.keys(r.attributes).some(n=>e.query(n,Pe.BLOCK)!=null):!1}function jFe(e,t){const r=t.reduce((s,i)=>s+(i.delete||0),0);let n=t.length()-r;return _Fe(e,t)&&(n-=1),n}function aS(e,t){if(!e)return e;const r=t.transformPosition(e.index),n=t.transformPosition(e.index+e.length);return{index:r,length:n-r}}class VW extends Ti{constructor(t,r){super(t,r),t.root.addEventListener("drop",n=>{var s;n.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){const a=document.caretPositionFromPoint(n.clientX,n.clientY);i=document.createRange(),i.setStart(a.offsetNode,a.offset),i.setEnd(a.offsetNode,a.offset)}const o=i&&t.selection.normalizeNative(i);if(o){const a=t.selection.normalizedToRange(o);(s=n.dataTransfer)!=null&&s.files&&this.upload(a,n.dataTransfer.files)}})}upload(t,r){const n=[];Array.from(r).forEach(s=>{var i;s&&(i=this.options.mimetypes)!=null&&i.includes(s.type)&&n.push(s)}),n.length>0&&this.options.handler.call(this,t,n)}}VW.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(e,t){if(!this.quill.scroll.query("image"))return;const r=t.map(n=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(n)}));Promise.all(r).then(n=>{const s=n.reduce((i,o)=>i.insert({image:o}),new Oe().retain(e.index).delete(e.length));this.quill.updateContents(s,Ce.sources.USER),this.quill.setSelection(e.index+n.length,Ce.sources.SILENT)})}};const kFe=["insertText","insertReplacementText"];class NFe extends Ti{constructor(t,r){super(t,r),t.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||t.on(se.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){hA({range:t,quill:this.quill})}replaceText(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(r){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new Oe().retain(t.index).insert(r,n),se.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+r.length,0,se.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!kFe.includes(t.inputType))return;const r=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!r||r.collapsed===!0)return;const n=SFe(t);if(n==null)return;const s=this.quill.selection.normalizeNative(r),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function SFe(e){var t;return typeof e.data=="string"?e.data:(t=e.dataTransfer)!=null&&t.types.includes("text/plain")?e.dataTransfer.getData("text/plain"):null}const EFe=/Mac/i.test(navigator.platform),CFe=100,TFe=e=>!!(e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="Home"||EFe&&e.key==="a"&&e.ctrlKey===!0);class AFe extends Ti{constructor(t,r){super(t,r),xe(this,"isListening",!1),xe(this,"selectionChangeDeadline",0),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,r){let{line:n,event:s}=r;if(!(n instanceof yi)||!n.uiNode)return!0;const i=getComputedStyle(n.domNode).direction==="rtl";return i&&s.key!=="ArrowRight"||!i&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(s.shiftKey?1:0),se.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&TFe(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+CFe,this.isListening)return;this.isListening=!0;const t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const r=t.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const n=this.quill.scroll.find(r.startContainer);if(!(n instanceof yi)||!n.uiNode)return;const s=document.createRange();s.setStartAfter(n.uiNode),s.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(s)}}se.register({"blots/block":Xr,"blots/block/embed":Ts,"blots/break":Ci,"blots/container":mu,"blots/cursor":jw,"blots/embed":oA,"blots/inline":$l,"blots/scroll":ed,"blots/text":_i,"modules/clipboard":UW,"modules/history":BW,"modules/keyboard":Nw,"modules/uploader":VW,"modules/input":NFe,"modules/uiNode":AFe});class OFe extends Ei{add(t,r){let n=0;if(r==="+1"||r==="-1"){const s=this.value(t)||0;n=r==="+1"?s+1:s-1}else typeof r=="number"&&(n=r);return n===0?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,r){return super.canAdd(t,r)||super.canAdd(t,parseInt(r,10))}value(t){return parseInt(super.value(t),10)||void 0}}const PFe=new OFe("indent","ql-indent",{scope:Pe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class lS extends Xr{}xe(lS,"blotName","blockquote"),xe(lS,"tagName","blockquote");class cS extends Xr{static formats(t){return this.tagName.indexOf(t.tagName)+1}}xe(cS,"blotName","header"),xe(cS,"tagName",["H1","H2","H3","H4","H5","H6"]);class Qm extends mu{}Qm.blotName="list-container";Qm.tagName="OL";class eg extends Xr{static create(t){const r=super.create();return r.setAttribute("data-list",t),r}static formats(t){return t.getAttribute("data-list")||void 0}static register(){se.register(Qm)}constructor(t,r){super(t,r);const n=r.ownerDocument.createElement("span"),s=i=>{if(!t.isEnabled())return;const o=this.statics.formats(r,t);o==="checked"?(this.format("list","unchecked"),i.preventDefault()):o==="unchecked"&&(this.format("list","checked"),i.preventDefault())};n.addEventListener("mousedown",s),n.addEventListener("touchstart",s),this.attachUI(n)}format(t,r){t===this.statics.blotName&&r?this.domNode.setAttribute("data-list",r):super.format(t,r)}}eg.blotName="list";eg.tagName="LI";Qm.allowedChildren=[eg];eg.requiredContainer=Qm;class cm extends $l{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}xe(cm,"blotName","bold"),xe(cm,"tagName",["STRONG","B"]);class uS extends cm{}xe(uS,"blotName","italic"),xe(uS,"tagName",["EM","I"]);class il extends $l{static create(t){const r=super.create(t);return r.setAttribute("href",this.sanitize(t)),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}static formats(t){return t.getAttribute("href")}static sanitize(t){return WW(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,r){t!==this.statics.blotName||!r?super.format(t,r):this.domNode.setAttribute("href",this.constructor.sanitize(r))}}xe(il,"blotName","link"),xe(il,"tagName","A"),xe(il,"SANITIZED_URL","about:blank"),xe(il,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function WW(e,t){const r=document.createElement("a");r.href=e;const n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}class dS extends $l{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}xe(dS,"blotName","script"),xe(dS,"tagName",["SUB","SUP"]);class hS extends cm{}xe(hS,"blotName","strike"),xe(hS,"tagName",["S","STRIKE"]);class fS extends $l{}xe(fS,"blotName","underline"),xe(fS,"tagName","U");class Zy extends oA{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const r=super.create(t);return typeof t=="string"&&(window.katex.render(t,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",t)),r}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}xe(Zy,"blotName","formula"),xe(Zy,"className","ql-formula"),xe(Zy,"tagName","SPAN");const J5=["alt","height","width"];class pS extends us{static create(t){const r=super.create(t);return typeof t=="string"&&r.setAttribute("src",this.sanitize(t)),r}static formats(t){return J5.reduce((r,n)=>(t.hasAttribute(n)&&(r[n]=t.getAttribute(n)),r),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return WW(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,r){J5.indexOf(t)>-1?r?this.domNode.setAttribute(t,r):this.domNode.removeAttribute(t):super.format(t,r)}}xe(pS,"blotName","image"),xe(pS,"tagName","IMG");const X5=["height","width"];class Gy extends Ts{static create(t){const r=super.create(t);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen","true"),r.setAttribute("src",this.sanitize(t)),r}static formats(t){return X5.reduce((r,n)=>(t.hasAttribute(n)&&(r[n]=t.getAttribute(n)),r),{})}static sanitize(t){return il.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,r){X5.indexOf(t)>-1?r?this.domNode.setAttribute(t,r):this.domNode.removeAttribute(t):super.format(t,r)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}xe(Gy,"blotName","video"),xe(Gy,"className","ql-video"),xe(Gy,"tagName","IFRAME");const Xf=new Ei("code-token","hljs",{scope:Pe.INLINE});class ua extends $l{static formats(t,r){for(;t!=null&&t!==r.domNode;){if(t.classList&&t.classList.contains(pn.className))return super.formats(t,r);t=t.parentNode}}constructor(t,r,n){super(t,r,n),Xf.add(this.domNode,n)}format(t,r){t!==ua.blotName?super.format(t,r):r?Xf.add(this.domNode,r):(Xf.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Xf.value(this.domNode)||this.unwrap()}}ua.blotName="code-token";ua.className="ql-token";class Ss extends pn{static create(t){const r=super.create(t);return typeof t=="string"&&r.setAttribute("data-language",t),r}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,r){t===this.statics.blotName&&r?this.domNode.setAttribute("data-language",r):super.format(t,r)}replaceWith(t,r){return this.formatAt(0,this.length(),ua.blotName,!1),super.replaceWith(t,r)}}class wp extends gu{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,r){t===Ss.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(t,r)}))}formatAt(t,r,n,s){n===Ss.blotName&&(this.forceNext=!0),super.formatAt(t,r,n,s)}highlight(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const n=`${Array.from(this.domNode.childNodes).filter(i=>i!==this.uiNode).map(i=>i.textContent).join(`
`)}
`,s=Ss.formats(this.children.head.domNode);if(r||this.forceNext||this.cachedText!==n){if(n.trim().length>0||this.cachedText==null){const i=this.children.reduce((a,l)=>a.concat(CW(l,!1)),new Oe),o=t(n,s);i.diff(o).reduce((a,l)=>{let{retain:c,attributes:u}=l;return c?(u&&Object.keys(u).forEach(h=>{[Ss.blotName,ua.blotName].includes(h)&&this.formatAt(a,c,h,u[h])}),a+c):a},0)}this.cachedText=n,this.forceNext=!1}}html(t,r){const[n]=this.children.find(t);return`<pre data-language="${n?Ss.formats(n.domNode):"plain"}">
${_w(this.code(t,r))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const r=Ss.formats(this.children.head.domNode);r!==this.uiNode.value&&(this.uiNode.value=r)}}}wp.allowedChildren=[Ss];Ss.requiredContainer=wp;Ss.allowedChildren=[ua,jw,_i,Ci];const RFe=(e,t,r)=>{if(typeof e.versionString=="string"){const n=e.versionString.split(".")[0];if(parseInt(n,10)>=11)return e.highlight(r,{language:t}).value}return e.highlight(t,r).value};class HW extends Ti{static register(){se.register(ua,!0),se.register(Ss,!0),se.register(wp,!0)}constructor(t,r){if(super(t,r),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,s)=>{let{key:i}=s;return n[i]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(se.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof wp))return;const r=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:s,label:i}=n;const o=r.ownerDocument.createElement("option");o.textContent=i,o.setAttribute("value",s),r.appendChild(o)}),r.addEventListener("change",()=>{t.format(Ss.blotName,r.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(r),t.children.head&&(r.value=Ss.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(se.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(se.sources.USER);const n=this.quill.getSelection();(t==null?this.quill.scroll.descendants(wp):[t]).forEach(s=>{s.highlight(this.highlightBlot,r)}),this.quill.update(se.sources.SILENT),n!=null&&this.quill.setSelection(n,se.sources.SILENT)}highlightBlot(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(r=this.languages[r]?r:"plain",r==="plain")return _w(t).split(`
`).reduce((s,i,o)=>(o!==0&&s.insert(`
`,{[pn.blotName]:r}),s.insert(i)),new Oe);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(pn.className),n.innerHTML=RFe(this.options.hljs,r,t),fA(this.quill.scroll,n,[(s,i)=>{const o=Xf.value(s);return o?i.compose(new Oe().retain(i.length(),{[ua.blotName]:o})):i}],[(s,i)=>s.data.split(`
`).reduce((o,a,l)=>(l!==0&&o.insert(`
`,{[pn.blotName]:r}),o.insert(a)),i)],new WeakMap)}}HW.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const mS=class KW extends Xr{static create(t){const r=super.create();return t?r.setAttribute("data-row",t):r.setAttribute("data-row",pA()),r}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,r){t===KW.blotName&&r?this.domNode.setAttribute("data-row",r):super.format(t,r)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};xe(mS,"blotName","table"),xe(mS,"tagName","TD");let Uo=mS;class da extends mu{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),r=this.children.tail.formats(),n=this.next.children.head.formats(),s=this.next.children.tail.formats();return t.table===r.table&&t.table===n.table&&t.table===s.table}return!1}optimize(t){super.optimize(t),this.children.forEach(r=>{if(r.next==null)return;const n=r.formats(),s=r.next.formats();if(n.table!==s.table){const i=this.splitAfter(r);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}xe(da,"blotName","table-row"),xe(da,"tagName","TR");class eo extends mu{}xe(eo,"blotName","table-body"),xe(eo,"tagName","TBODY");class ph extends mu{balanceCells(){const t=this.descendants(da),r=t.reduce((n,s)=>Math.max(s.children.length,n),0);t.forEach(n=>{new Array(r-n.children.length).fill(0).forEach(()=>{let s;n.children.head!=null&&(s=Uo.formats(n.children.head.domNode));const i=this.scroll.create(Uo.blotName,s);n.appendChild(i),i.optimize()})})}cells(t){return this.rows().map(r=>r.children.at(t))}deleteColumn(t){const[r]=this.descendant(eo);r==null||r.children.head==null||r.children.forEach(n=>{const s=n.children.at(t);s!=null&&s.remove()})}insertColumn(t){const[r]=this.descendant(eo);r==null||r.children.head==null||r.children.forEach(n=>{const s=n.children.at(t),i=Uo.formats(n.children.head.domNode),o=this.scroll.create(Uo.blotName,i);n.insertBefore(o,s)})}insertRow(t){const[r]=this.descendant(eo);if(r==null||r.children.head==null)return;const n=pA(),s=this.scroll.create(da.blotName);r.children.head.children.forEach(()=>{const o=this.scroll.create(Uo.blotName,n);s.appendChild(o)});const i=r.children.at(t);r.insertBefore(s,i)}rows(){const t=this.children.head;return t==null?[]:t.children.map(r=>r)}}xe(ph,"blotName","table-container"),xe(ph,"tagName","TABLE");ph.allowedChildren=[eo];eo.requiredContainer=ph;eo.allowedChildren=[da];da.requiredContainer=eo;da.allowedChildren=[Uo];Uo.requiredContainer=da;function pA(){return`row-${Math.random().toString(36).slice(2,6)}`}class IFe extends Ti{static register(){se.register(Uo),se.register(da),se.register(eo),se.register(ph)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(ph).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,r]=this.getTable();r!=null&&(t.deleteColumn(r.cellOffset()),this.quill.update(se.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(se.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const r=t.offset();t.remove(),this.quill.update(se.sources.USER),this.quill.setSelection(r,se.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[r,n]=this.quill.getLine(t.index);if(r==null||r.statics.blotName!==Uo.blotName)return[null,null,null,-1];const s=r.parent;return[s.parent.parent,s,r,n]}insertColumn(t){const r=this.quill.getSelection();if(!r)return;const[n,s,i]=this.getTable(r);if(i==null)return;const o=i.cellOffset();n.insertColumn(o+t),this.quill.update(se.sources.USER);let a=s.rowOffset();t===0&&(a+=1),this.quill.setSelection(r.index+a,r.length,se.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const r=this.quill.getSelection();if(!r)return;const[n,s,i]=this.getTable(r);if(i==null)return;const o=s.rowOffset();n.insertRow(o+t),this.quill.update(se.sources.USER),t>0?this.quill.setSelection(r,se.sources.SILENT):this.quill.setSelection(r.index+s.children.length,r.length,se.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,r){const n=this.quill.getSelection();if(n==null)return;const s=new Array(t).fill(0).reduce(i=>{const o=new Array(r).fill(`
`).join("");return i.insert(o,{table:pA()})},new Oe().retain(n.index));this.quill.updateContents(s,se.sources.USER),this.quill.setSelection(n.index,se.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(se.events.SCROLL_OPTIMIZE,t=>{t.some(r=>["TD","TR","TBODY","TABLE"].includes(r.target.tagName)?(this.quill.once(se.events.TEXT_CHANGE,(n,s,i)=>{i===se.sources.USER&&this.balanceTables()}),!0):!1)})}}const Q5=xa("quill:toolbar");class mA extends Ti{constructor(t,r){var n,s;if(super(t,r),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),DFe(i,this.options.container),(s=(n=t.container)==null?void 0:n.parentNode)==null||s.insertBefore(i,t.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Q5.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var o;const a=(o=this.options.handlers)==null?void 0:o[i];a&&this.addHandler(i,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(se.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(t,r){this.handlers[t]=r}attach(t){let r=Array.from(t.classList).find(s=>s.indexOf("ql-")===0);if(!r)return;if(r=r.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[r]==null&&this.quill.scroll.query(r)==null){Q5.warn("ignoring attaching to nonexistent format",r,t);return}const n=t.tagName==="SELECT"?"change":"click";t.addEventListener(n,s=>{let i;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const a=t.options[t.selectedIndex];a.hasAttribute("selected")?i=!1:i=a.value||!1}else t.classList.contains("ql-active")?i=!1:i=t.value||!t.hasAttribute("value"),s.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[r]!=null)this.handlers[r].call(this,i);else if(this.quill.scroll.query(r).prototype instanceof us){if(i=prompt(`Enter ${r}`),!i)return;this.quill.updateContents(new Oe().retain(o.index).delete(o.length).insert({[r]:i}),se.sources.USER)}else this.quill.format(r,i,se.sources.USER);this.update(o)}),this.controls.push([r,t])}update(t){const r=t==null?{}:this.quill.getFormat(t);this.controls.forEach(n=>{const[s,i]=n;if(i.tagName==="SELECT"){let o=null;if(t==null)o=null;else if(r[s]==null)o=i.querySelector("option[selected]");else if(!Array.isArray(r[s])){let a=r[s];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),o=i.querySelector(`option[value="${a}"]`)}o==null?(i.value="",i.selectedIndex=-1):o.selected=!0}else if(t==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const o=r[s],a=o===i.getAttribute("value")||o!=null&&o.toString()===i.getAttribute("value")||o==null&&!i.getAttribute("value");i.classList.toggle("ql-active",a),i.setAttribute("aria-pressed",a.toString())}else{const o=r[s]!=null;i.classList.toggle("ql-active",o),i.setAttribute("aria-pressed",o.toString())}})}}mA.DEFAULTS={};function eL(e,t,r){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${t}`),n.setAttribute("aria-pressed","false"),r!=null?(n.value=r,n.setAttribute("aria-label",`${t}: ${r}`)):n.setAttribute("aria-label",t),e.appendChild(n)}function DFe(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(r=>{const n=document.createElement("span");n.classList.add("ql-formats"),r.forEach(s=>{if(typeof s=="string")eL(n,s);else{const i=Object.keys(s)[0],o=s[i];Array.isArray(o)?LFe(n,i,o):eL(n,i,o)}}),e.appendChild(n)})}function LFe(e,t,r){const n=document.createElement("select");n.classList.add(`ql-${t}`),r.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),n.appendChild(i)}),e.appendChild(n)}mA.DEFAULTS={container:null,handlers:{clean(){const e=this.quill.getSelection();if(e!=null)if(e.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(r=>{this.quill.scroll.query(r,Pe.INLINE)!=null&&this.quill.format(r,!1,se.sources.USER)})}else this.quill.removeFormat(e.index,e.length,se.sources.USER)},direction(e){const{align:t}=this.quill.getFormat();e==="rtl"&&t==null?this.quill.format("align","right",se.sources.USER):!e&&t==="right"&&this.quill.format("align",!1,se.sources.USER),this.quill.format("direction",e,se.sources.USER)},indent(e){const t=this.quill.getSelection(),r=this.quill.getFormat(t),n=parseInt(r.indent||0,10);if(e==="+1"||e==="-1"){let s=e==="+1"?1:-1;r.direction==="rtl"&&(s*=-1),this.quill.format("indent",n+s,se.sources.USER)}},link(e){e===!0&&(e=prompt("Enter link URL:")),this.quill.format("link",e,se.sources.USER)},list(e){const t=this.quill.getSelection(),r=this.quill.getFormat(t);e==="check"?r.list==="checked"||r.list==="unchecked"?this.quill.format("list",!1,se.sources.USER):this.quill.format("list","unchecked",se.sources.USER):this.quill.format("list",e,se.sources.USER)}}};const MFe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',zFe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',FFe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',$Fe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',UFe='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',qFe='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',BFe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',VFe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',tL='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',WFe='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',HFe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',KFe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',ZFe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',GFe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',YFe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',JFe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',XFe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',QFe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',e1e='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',t1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',r1e='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',n1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',s1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',i1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',o1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',a1e='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',l1e='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',c1e='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',u1e='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',d1e='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',h1e='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',f1e='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',p1e='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',um={align:{"":MFe,center:zFe,right:FFe,justify:$Fe},background:UFe,blockquote:qFe,bold:BFe,clean:VFe,code:tL,"code-block":tL,color:WFe,direction:{"":HFe,rtl:KFe},formula:ZFe,header:{1:GFe,2:YFe,3:JFe,4:XFe,5:QFe,6:e1e},italic:t1e,image:r1e,indent:{"+1":n1e,"-1":s1e},link:i1e,list:{bullet:o1e,check:a1e,ordered:l1e},script:{sub:c1e,super:u1e},strike:d1e,table:h1e,underline:f1e,video:p1e},m1e='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let rL=0;function nL(e,t){e.setAttribute(t,`${e.getAttribute(t)!=="true"}`)}class Sw{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",r=>{switch(r.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),r.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),nL(this.label,"aria-expanded"),nL(this.options,"aria-hidden")}buildItem(t){const r=document.createElement("span");r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&r.setAttribute("data-value",n),t.textContent&&r.setAttribute("data-label",t.textContent),r.addEventListener("click",()=>{this.selectItem(r,!0)}),r.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(r,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),r}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=m1e,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${rL}`,rL+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(r=>{const n=this.buildItem(r);t.appendChild(n),r.selected===!0&&this.selectItem(n)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.container.querySelector(".ql-selected");t!==n&&(n!=null&&n.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),r&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const r=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}class ZW extends Sw{constructor(t,r){super(t),this.label.innerHTML=r,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(t){const r=super.buildItem(t);return r.style.backgroundColor=t.getAttribute("value")||"",r}selectItem(t,r){super.selectItem(t,r);const n=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=s:n.style.fill=s)}}class GW extends Sw{constructor(t,r){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=r[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,r){super.selectItem(t,r);const n=t||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}}const g1e=e=>{const{overflowY:t}=getComputedStyle(e,null);return t!=="visible"&&t!=="clip"};class YW{constructor(t,r){this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,g1e(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const r=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${r}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let o=0;if(i.right>s.right&&(o=s.right-i.right,this.root.style.left=`${r+o}px`),i.left<s.left&&(o=s.left-i.left,this.root.style.left=`${r+o}px`),i.bottom>s.bottom){const a=i.bottom-i.top,l=t.bottom-t.top+a;this.root.style.top=`${n-l}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const y1e=[!1,"center","right","justify"],v1e=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],b1e=[!1,"serif","monospace"],x1e=["1","2","3",!1],w1e=["small",!1,"large","huge"];class tg extends kw{constructor(t,r){super(t,r);const n=s=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};t.emitter.listenDOM("click",document.body,n)}addModule(t){const r=super.addModule(t);return t==="toolbar"&&this.extendToolbar(r),r}buildButtons(t,r){Array.from(t).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),r[s]!=null))if(s==="direction")n.innerHTML=r[s][""]+r[s].rtl;else if(typeof r[s]=="string")n.innerHTML=r[s];else{const i=n.value||"";i!=null&&r[s][i]&&(n.innerHTML=r[s][i])}})})}buildPickers(t,r){this.pickers=Array.from(t).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&Pf(s,y1e),typeof r.align=="object"))return new GW(s,r.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&Pf(s,v1e,i==="background"?"#ffffff":"#000000"),new ZW(s,r[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?Pf(s,b1e):s.classList.contains("ql-header")?Pf(s,x1e):s.classList.contains("ql-size")&&Pf(s,w1e)),new Sw(s)});const n=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(Ce.events.EDITOR_CHANGE,n)}}tg.DEFAULTS=ul({},kw.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let e=this.container.querySelector("input.ql-image[type=file]");e==null&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),e.classList.add("ql-image"),e.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,e.files),e.value=""}),this.container.appendChild(e)),e.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class JW extends YW{constructor(t,r){super(t,r),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;r!=null?this.textbox.value=r:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:r}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Ce.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Ce.sources.USER)),this.quill.root.scrollTop=r;break}case"video":t=_1e(t);case"formula":{if(!t)break;const r=this.quill.getSelection(!0);if(r!=null){const n=r.index+r.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,Ce.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",Ce.sources.USER),this.quill.setSelection(n+2,Ce.sources.USER)}break}}this.textbox.value="",this.hide()}}function _1e(e){let t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:e}function Pf(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(n=>{const s=document.createElement("option");n===r?s.setAttribute("selected","selected"):s.setAttribute("value",String(n)),e.appendChild(s)})}const j1e=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class XW extends JW{constructor(t,r){super(t,r),this.quill.on(Ce.events.EDITOR_CHANGE,(n,s,i,o)=>{if(n===Ce.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&o===Ce.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const a=this.quill.getLines(s.index,s.length);if(a.length===1){const l=this.quill.getBounds(s);l!=null&&this.position(l)}else{const l=a[a.length-1],c=this.quill.getIndex(l),u=Math.min(l.length()-1,s.index+s.length-c),h=this.quill.getBounds(new Xc(c,u));h!=null&&this.position(h)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ce.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const r=this.quill.getBounds(t);r!=null&&this.position(r)}},1)})}cancel(){this.show()}position(t){const r=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",r!==0&&(n.style.marginLeft=`${-1*r-n.offsetWidth/2}px`),r}}xe(XW,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class QW extends tg{constructor(t,r){r.modules.toolbar!=null&&r.modules.toolbar.container==null&&(r.modules.toolbar.container=j1e),super(t,r),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new XW(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),um),this.buildPickers(t.container.querySelectorAll("select"),um))}}QW.DEFAULTS=ul({},tg.DEFAULTS,{modules:{toolbar:{handlers:{link(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1,se.sources.USER)}}}}});const k1e=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class eH extends JW{constructor(){super(...arguments),xe(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,Ce.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(Ce.events.SELECTION_CHANGE,(t,r,n)=>{if(t!=null){if(t.length===0&&n===Ce.sources.USER){const[s,i]=this.quill.scroll.descendant(il,t.index);if(s!=null){this.linkRange=new Xc(t.index-i,s.length());const o=il.formats(s.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}xe(eH,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class tH extends tg{constructor(t,r){r.modules.toolbar!=null&&r.modules.toolbar.container==null&&(r.modules.toolbar.container=k1e),super(t,r),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),um),this.buildPickers(t.container.querySelectorAll("select"),um),this.tooltip=new eH(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(r,n)=>{t.handlers.link.call(t,!n.format.link)}))}}tH.DEFAULTS=ul({},tg.DEFAULTS,{modules:{toolbar:{handlers:{link(e){if(e){const t=this.quill.getSelection();if(t==null||t.length===0)return;let r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&r.indexOf("mailto:")!==0&&(r=`mailto:${r}`);const{tooltip:n}=this.quill.theme;n.edit("link",r)}else this.quill.format("link",!1,se.sources.USER)}}}}});se.register({"attributors/attribute/direction":RW,"attributors/class/align":AW,"attributors/class/background":qze,"attributors/class/color":Uze,"attributors/class/direction":IW,"attributors/class/font":MW,"attributors/class/size":FW,"attributors/style/align":OW,"attributors/style/background":cA,"attributors/style/color":lA,"attributors/style/direction":DW,"attributors/style/font":zW,"attributors/style/size":$W},!0);se.register({"formats/align":AW,"formats/direction":IW,"formats/indent":PFe,"formats/background":cA,"formats/color":lA,"formats/font":MW,"formats/size":FW,"formats/blockquote":lS,"formats/code-block":pn,"formats/header":cS,"formats/list":eg,"formats/bold":cm,"formats/code":uA,"formats/italic":uS,"formats/link":il,"formats/script":dS,"formats/strike":hS,"formats/underline":fS,"formats/formula":Zy,"formats/image":pS,"formats/video":Gy,"modules/syntax":HW,"modules/table":IFe,"modules/toolbar":mA,"themes/bubble":QW,"themes/snow":tH,"ui/icons":um,"ui/picker":Sw,"ui/icon-picker":GW,"ui/color-picker":ZW,"ui/tooltip":YW},!0);class rg extends ae.Component{constructor(t){super(t),this.editingAreaRef=v.createRef(),this.containerRef=v.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(n,s,i,o)=>{var a,l;n==="text-change"?(a=this.onEditorChangeText)==null||a.call(this,this.editor.root.innerHTML,s,o,this.unprivilegedEditor):n==="selection-change"&&((l=this.onEditorChangeSelection)==null||l.call(this,s,o,this.unprivilegedEditor))};const r=this.isControlled()?t.value:t.defaultValue;this.value=r??""}validateProps(t){if(ae.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ae.Children.count(t.children)){const r=ae.Children.only(t.children);if((r==null?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(t,r){if(this.validateProps(t),!this.editor||this.state.generation!==r.generation)return!0;if("value"in t){const n=this.getEditorContents(),s=t.value??"";this.isEqualValue(s,n)||this.setEditorContents(this.editor,s)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),[...this.cleanProps,...this.dirtyProps].some(n=>!Za(t[n],this.props[n]))}shouldComponentRegenerate(t){return this.dirtyProps.some(r=>!Za(t[r],this.props[r]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(t,r){if(this.editor&&this.shouldComponentRegenerate(t)){const n=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){const{delta:n,selection:s}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const i=this.editor;i.setContents(n),sL(()=>this.setEditorSelection(i,s))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){var t,r;if(!this.editor)return;this.unhookEditor(this.editor);const n=(t=this.props.modules)==null?void 0:t.toolbar;if(!(typeof n=="object"&&n&&"container"in n&&typeof n.container=="string"||typeof n=="string")){const s=(r=this.containerRef.current)==null?void 0:r.querySelector(".ql-toolbar");s&&s.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(t,r){const n=new se(t,r);return r.tabIndex!=null&&this.setEditorTabIndex(n,r.tabIndex),this.hookEditor(n),n}hookEditor(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)}unhookEditor(t){t.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(t){return t&&t.ops}isEqualValue(t,r){return this.isDelta(t)&&this.isDelta(r)?Za(t.ops,r.ops):Za(t,r)}setEditorContents(t,r){this.value=r;const n=this.getEditorSelection();typeof r=="string"?t.setContents(t.clipboard.convert({html:r})):t.setContents(r),sL(()=>this.setEditorSelection(t,n))}setEditorSelection(t,r){if(this.selection=r,r){const n=t.getLength();r.index=Math.max(0,Math.min(r.index,n-1)),r.length=Math.max(0,Math.min(r.length,n-1-r.index)),t.setSelection(r)}}setEditorTabIndex(t,r){var n;(n=t==null?void 0:t.scroll)!=null&&n.domNode&&(t.scroll.domNode.tabIndex=r)}setEditorReadOnly(t,r){r?t.disable():t.enable()}makeUnprivilegedEditor(t){const r=t;return{getHTML:()=>r.root.innerHTML,getSemanticHTML:r.getSemanticHTML.bind(r),getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}}getEditingArea(){const t=this.editingAreaRef.current;if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t}renderEditingArea(){const{children:t,preserveWhitespace:r}=this.props,{generation:n}=this.state,s={key:n,ref:this.editingAreaRef};return ae.Children.count(t)?ae.cloneElement(ae.Children.only(t),s):r?ae.createElement("pre",{...s}):ae.createElement("div",{...s})}render(){return ae.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(t,r,n,s){var i,o;if(!this.editor)return;const a=this.isDelta(this.value)?s.getContents():s.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=a,(o=(i=this.props).onChange)==null||o.call(i,t,r,n,s))}onEditorChangeSelection(t,r,n){var s,i,o,a,l,c;if(!this.editor)return;const u=this.getEditorSelection(),h=!u&&t,f=u&&!t;Za(t,u)||(this.selection=t,(i=(s=this.props).onChangeSelection)==null||i.call(s,t,r,n),h?(a=(o=this.props).onFocus)==null||a.call(o,t,r,n):f&&((c=(l=this.props).onBlur)==null||c.call(l,u,r,n)))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}rg.displayName="React Quill";rg.Quill=se;rg.defaultProps={theme:"snow",modules:{},readOnly:!1};function sL(e){Promise.resolve().then(e)}const N1e=async()=>{const{data:e,error:t}=await ce.from("posts").select("*");if(t)throw new Error(t.message);return e},S1e=async e=>{const{data:{user:t},error:r}=await ce.auth.getUser();if(r)throw new Error(r.message);if(!t)throw new Error("User not authenticated.");console.log("Attempting to create post with data:",{...e,author_id:t.id});const{data:n,error:s}=await ce.from("posts").insert({...e,author_id:t.id}).select();if(s)throw new Error(s.message);if(!n||n.length===0)throw new Error("Failed to create post: No data returned.");return n[0]},E1e=async e=>{const{data:t,error:r}=await ce.from("posts").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},C1e=async e=>{const{error:t}=await ce.from("posts").delete().eq("id",e);if(t)throw new Error(t.message)},T1e=({post:e,onSave:t,onCancel:r})=>{const[n,s]=v.useState({title:(e==null?void 0:e.title)||"",content:(e==null?void 0:e.content)||"",status:(e==null?void 0:e.status)||"draft",slug:(e==null?void 0:e.slug)||""}),i=()=>{if(!n.title.trim()){$i.error("Title cannot be empty.");return}if(!n.slug.trim()){$i.error("Slug cannot be empty.");return}const o=e?{...e,...n}:n;t(o)};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Post":"Create New Post"}),d.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-gray-700",children:d.jsx(pl,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:n.title,onChange:o=>s({...n,title:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter post title...",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug"}),d.jsx("input",{type:"text",value:n.slug,onChange:o=>s({...n,slug:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"post-url-slug"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),d.jsx(rg,{theme:"snow",value:n.content,onChange:o=>s({...n,content:o}),className:"h-64 mb-12"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:n.status,onChange:o=>s({...n,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"archived",children:"Archived"})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsxs("button",{type:"button",onClick:i,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(DE,{className:"w-4 h-4"}),"Save Post"]}),d.jsx("button",{type:"button",onClick:r,className:"flex items-center gap-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},A1e=()=>{const e=fa(),[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,o]=v.useState(""),[a,l]=v.useState("all"),{data:c,isLoading:u,isError:h,error:f}=It({queryKey:["posts"],queryFn:N1e}),p=tr({mutationFn:S1e,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]}),r(!1),s(null)}}),y=tr({mutationFn:E1e,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]}),r(!1),s(null)}}),m=tr({mutationFn:C1e,onSuccess:()=>{e.invalidateQueries({queryKey:["posts"]})}}),b=_=>{if(n)y.mutate(_);else{const{...j}=_;p.mutate(j)}},x=_=>{window.confirm("Are you sure you want to delete this post?")&&m.mutate(_)},w=(c==null?void 0:c.filter(_=>{const j=_.title.toLowerCase().includes(i.toLowerCase()),k=a==="all"||_.status===a;return j&&k}))||[];return u?d.jsx("div",{children:"Loading posts..."}):h?d.jsxs("div",{children:["Error loading posts: ",f==null?void 0:f.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(T1e,{post:n,onSave:b,onCancel:()=>{r(!1),s(null)}}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Posts"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Yo,{className:"w-4 h-4"}),"New Post"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(ou,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:_=>o(_.target.value),placeholder:"Search posts...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsxs("select",{value:a,onChange:_=>l(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"archived",children:"Archived"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Status"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Author"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Date"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Views"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:w.map(_=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:_.title})}),d.jsx("td",{className:"py-4 px-6",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.status==="published"?"bg-green-100 text-green-800":_.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:_.status})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:_.author_id}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:new Date(_.created_at).toLocaleDateString()}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:_.views}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(_),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ox,{className:"w-4 h-4"})}),d.jsx("button",{className:"p-1 text-gray-500 hover:text-green-600",children:d.jsx(Cm,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>x(_.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(au,{className:"w-4 h-4"})})]})})]},_.id))})]})})]})})};function O1e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P1e=O1e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const rH=v.createContext(null);function R1e(e,t){return{getTheme:function(){return t??null}}}function Jh(){const e=v.useContext(rH);return e==null&&P1e(8),e}function I1e(e){return{}}const gA={},D1e={},nH={},Mc={},Td={},_b={},Ad={},yA={},gS={},dm={},hm={},ol={},vA={},bA={},L1e={},sH={},M1e={},iH={},z1e={},oH={},aH={},jb={},F1e={},lH={},cH={},uH={},$1e={},U1e={},q1e={},iL={},dH={},B1e={},hH={},fH={},V1e={},Ew={},xA={},yS={},W1e={},H1e={},Ny={},Sy={},K1e={},Z1e={},G1e={},Ai=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Y1e=Ai&&"documentMode"in document?document.documentMode:null,ei=Ai&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),dl=Ai&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),kb=!(!Ai||!("InputEvent"in window)||Y1e)&&"getTargetRanges"in new window.InputEvent("input"),wA=Ai&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Cw=Ai&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,J1e=Ai&&/Android/.test(navigator.userAgent),pH=Ai&&/^(?=.*Chrome).*/i.test(navigator.userAgent),X1e=Ai&&J1e&&pH,_A=Ai&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!pH,ng=1,Ul=3,Qc=0,mH=1,mh=2,Q1e=0,e$e=1,t$e=2,Nb=4,Sb=8,jA=128,r$e=112|(3|Nb|Sb)|jA,kA=1,NA=2,SA=3,EA=4,CA=5,TA=6,Tw=wA||Cw||_A?" ":"​",ha=`

`,n$e=dl?" ":Tw,gH="֑-߿יִ-﷽ﹰ-ﻼ",yH="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",s$e=new RegExp("^[^"+yH+"]*["+gH+"]"),i$e=new RegExp("^[^"+gH+"]*["+yH+"]"),eu={bold:1,code:16,highlight:jA,italic:2,strikethrough:Nb,subscript:32,superscript:64,underline:Sb},o$e={directionless:1,unmergeable:2},oL={center:NA,end:TA,justify:EA,left:kA,right:SA,start:CA},a$e={[NA]:"center",[TA]:"end",[EA]:"justify",[kA]:"left",[SA]:"right",[CA]:"start"},l$e={normal:0,segmented:2,token:1},c$e={[Q1e]:"normal",[t$e]:"segmented",[e$e]:"token"};function u$e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var we=u$e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function Eb(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const d$e=100;let vS=!1,AA=0;function h$e(e){AA=e.timeStamp}function sj(e,t,r){return t.__lexicalLineBreak===e||e[`__lexicalKey_${r._key}`]!==void 0}function f$e(e,t,r){const n=lo(r._window);let s=null,i=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,i=n.focusOffset);const o=e.nodeValue;o!==null&&IA(t,o,s,i,!1)}function p$e(e,t,r){if(me(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return t.nodeType===Ul&&r.isAttached()}function vH(e,t,r){vS=!0;const n=performance.now()-AA>d$e;try{ns(e,()=>{const s=Me()||function(f){return f.getEditorState().read(()=>{const p=Me();return p!==null?p.clone():null})}(e),i=new Map,o=e.getRootElement(),a=e._editorState,l=e._blockCursorElement;let c=!1,u="";for(let f=0;f<t.length;f++){const p=t[f],y=p.type,m=p.target;let b=tu(m,a);if(!(b===null&&m!==o||Rt(b))){if(y==="characterData")n&&ve(b)&&p$e(s,m,b)&&f$e(m,b,e);else if(y==="childList"){c=!0;const x=p.addedNodes;for(let j=0;j<x.length;j++){const k=x[j],N=jH(k),C=k.parentNode;if(C!=null&&k!==l&&N===null&&(k.nodeName!=="BR"||!sj(k,C,e))){if(dl){const E=k.innerText||k.nodeValue;E&&(u+=E)}C.removeChild(k)}}const w=p.removedNodes,_=w.length;if(_>0){let j=0;for(let k=0;k<_;k++){const N=w[k];(N.nodeName==="BR"&&sj(N,m,e)||l===N)&&(m.appendChild(N),j++)}_!==j&&(m===o&&(b=NH(a)),i.set(m,b))}}}}if(i.size>0)for(const[f,p]of i)if(ie(p)){const y=p.getChildrenKeys();let m=f.firstChild;for(let b=0;b<y.length;b++){const x=y[b],w=e.getElementByKey(x);w!==null&&(m==null?(f.appendChild(w),m=w):m!==w&&f.replaceChild(w,m),m=m.nextSibling)}}else ve(p)&&p.markDirty();const h=r.takeRecords();if(h.length>0){for(let f=0;f<h.length;f++){const p=h[f],y=p.addedNodes,m=p.target;for(let b=0;b<y.length;b++){const x=y[b],w=x.parentNode;w==null||x.nodeName!=="BR"||sj(x,m,e)||w.removeChild(x)}}r.takeRecords()}s!==null&&(c&&(s.dirty=!0,ao(s)),dl&&TH(e)&&s.insertRawText(u))})}finally{vS=!1}}function bH(e){const t=e._observer;t!==null&&vH(e,t.takeRecords(),t)}function xH(e){(function(t){AA===0&&Pw(t).addEventListener("textInput",h$e,!0)})(e),e._observer=new MutationObserver((t,r)=>{vH(e,t,r)})}function aL(e,t){const r=e.__mode,n=e.__format,s=e.__style,i=t.__mode,o=t.__format,a=t.__style;return!(r!==null&&r!==i||n!==null&&n!==o||s!==null&&s!==a)}function lL(e,t){const r=e.mergeWithSibling(t),n=lr()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function cL(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&ve(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(aL(t,n)){n=lL(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&ve(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(aL(n,r)){n=lL(n,r);break}break}r.remove()}}else n.remove()}function wH(e){return uL(e.anchor),uL(e.focus),e}function uL(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),ve(n)){e.set(n.__key,s?n.getTextContentSize():0,"text");break}if(!ie(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element")}}let m$e=1;const g$e=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function OA(e){const t=document.activeElement;if(t===null)return!1;const r=t.nodeName;return Rt(tu(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&t.__lexicalEditor==null)}function sg(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!OA(t)&&_H(t)===e}catch{return!1}}function _H(e){let t=e;for(;t!=null;){const r=t.__lexicalEditor;if(r!=null)return r;t=Ow(t)}return null}function td(e){return e.isToken()||e.isSegmented()}function y$e(e){return e.nodeType===Ul}function Cb(e){let t=e;for(;t!=null;){if(y$e(t))return t;t=t.firstChild}return null}function bS(e,t,r){const n=eu[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"&&(s&=-33),s}function v$e(e,t){if(t!=null)return void(e.__key=t);qn(),GH();const r=lr(),n=wa(),s=""+m$e++;n._nodeMap.set(s,e),ie(e)?r._dirtyElements.set(s,!0):r._dirtyLeaves.add(s),r._cloneNotNeeded.add(s),r._dirtyType=mH,e.__key=s}function zc(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),i=e.getNextSibling();if(s===null)if(i!==null){const o=i.getWritable();n.__first=i.__key,o.__prev=null}else n.__first=null;else{const o=s.getWritable();if(i!==null){const a=i.getWritable();a.__prev=o.__key,o.__next=a.__key}else o.__next=null;r.__prev=null}if(i===null)if(s!==null){const o=s.getWritable();n.__last=s.__key,o.__next=null}else n.__last=null;else{const o=i.getWritable();if(s!==null){const a=s.getWritable();a.__next=o.__key,o.__prev=a.__key}else o.__prev=null;r.__next=null}n.__size--,r.__parent=null}}function Tb(e){GH();const t=e.getLatest(),r=t.__parent,n=wa(),s=lr(),i=n._nodeMap,o=s._dirtyElements;r!==null&&function(l,c,u){let h=l;for(;h!==null;){if(u.has(h))return;const f=c.get(h);if(f===void 0)break;u.set(h,!1),h=f.__parent}}(r,i,o);const a=t.__key;s._dirtyType=mH,ie(e)?o.set(a,!0):s._dirtyLeaves.add(a)}function Jr(e){qn();const t=lr(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=Nn(r);n!==null&&n.getWritable()}if(e!==null){const n=Nn(e);n!==null&&n.getWritable()}}}function al(){return cg()?null:lr()._compositionKey}function Nn(e,t){const r=(t||wa())._nodeMap.get(e);return r===void 0?null:r}function jH(e,t){const r=e[`__lexicalKey_${lr()._key}`];return r!==void 0?Nn(r,t):null}function tu(e,t){let r=e;for(;r!=null;){const n=jH(r,t);if(n!==null)return n;r=Ow(r)}return null}function kH(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function dL(e){return e.read(()=>xr().getTextContent())}function xr(){return NH(wa())}function NH(e){return e._nodeMap.get("root")}function ao(e){qn();const t=wa();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function pd(e){const t=lr(),r=function(n,s){let i=n;for(;i!=null;){const o=i[`__lexicalKey_${s._key}`];if(o!==void 0)return o;i=Ow(i)}return null}(e,t);return r===null?e===t.getRootElement()?Nn("root"):null:Nn(r)}function hL(e,t){return t?e.getTextContentSize():0}function SH(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function PA(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function EH(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function CH(e){return e.nodeType===Ul?e.nodeValue:null}function RA(e,t,r){const n=lo(t._window);if(n===null)return;const s=n.anchorNode;let{anchorOffset:i,focusOffset:o}=n;if(s!==null){let a=CH(s);const l=tu(s);if(a!==null&&ve(l)){if(a===Tw&&r){const c=r.length;a=r,i=c,o=c}a!==null&&IA(l,a,i,o,e)}}}function IA(e,t,r,n,s){let i=e;if(i.isAttached()&&(s||!i.isDirty())){const o=i.isComposing();let a=t;(o||s)&&t[t.length-1]===Tw&&(a=t.slice(0,-1));const l=i.getTextContent();if(s||a!==l){if(a===""){if(Jr(null),wA||Cw||_A)i.remove();else{const m=lr();setTimeout(()=>{m.update(()=>{i.isAttached()&&i.remove()})},20)}return}const c=i.getParent(),u=lg(),h=i.getTextContentSize(),f=al(),p=i.getKey();if(i.isToken()||f!==null&&p===f&&!o||me(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===e.__key&&u.anchor.offset===0&&!i.canInsertTextBefore()&&!o||u.focus.key===e.__key&&u.focus.offset===h&&!i.canInsertTextAfter()&&!o))return void i.markDirty();const y=Me();if(!me(y)||r===null||n===null)return void i.setTextContent(a);if(y.setTextNodeRange(i,r,i,n),i.isSegmented()){const m=an(i.getTextContent());i.replace(m),i=m}i.setTextContent(a)}}}function b$e(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;const r=e.anchor.offset,n=t.getParentOrThrow(),s=t.isToken();return r===0?!t.canInsertTextBefore()||!n.canInsertTextBefore()&&!t.isComposing()||s||function(i){const o=i.getPreviousSibling();return(ve(o)||ie(o)&&o.isInline())&&!o.canInsertTextAfter()}(t):r===t.getTextContentSize()&&(!t.canInsertTextAfter()||!n.canInsertTextAfter()&&!t.isComposing()||s)}function fL(e){return e==="ArrowLeft"}function pL(e){return e==="ArrowRight"}function Qf(e,t){return ei?e:t}function mL(e){return e==="Enter"}function Rf(e){return e==="Backspace"}function If(e){return e==="Delete"}function gL(e,t,r){return e.toLowerCase()==="a"&&Qf(t,r)}function x$e(){const e=xr();ao(wH(e.select(0,e.getChildrenSize())))}function _p(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const i=Eb(s);return r[t]=i,i}return s}function DA(e,t,r,n,s){if(r.size===0)return;const i=n.__type,o=n.__key,a=t.get(i);a===void 0&&we(33,i);const l=a.klass;let c=e.get(l);c===void 0&&(c=new Map,e.set(l,c));const u=c.get(o),h=u==="destroyed"&&s==="created";(u===void 0||h)&&c.set(o,h?"updated":s)}function yL(e,t,r){const n=e.getParent();let s=r,i=e;return n!==null&&(t&&r===0?(s=i.getIndexWithinParent(),i=n):t||r!==i.getChildrenSize()||(s=i.getIndexWithinParent()+1,i=n)),i.getChildAtIndex(t?s-1:s)}function fm(e,t){const r=e.offset;if(e.type==="element")return yL(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?yL(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function TH(e){const t=Pw(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function Ne(e,t,r){return YH(e,t,r)}function Aw(e){return!fn(e)&&!e.isLastChild()&&!e.isInline()}function Ab(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&we(75,t),r}function Ow(e){const t=e.assignedSlot||e.parentElement;return t!==null&&t.nodeType===11?t.host:t}function xS(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function Pw(e){const t=e._window;return t===null&&we(78),t}function w$e(e){let t=e.getParentOrThrow();for(;t!==null;){if(Xh(t))return t;t=t.getParentOrThrow()}return t}function Xh(e){return fn(e)||ie(e)&&e.isShadowRoot()}function Rw(e){const t=lr(),r=e.constructor.getType(),n=t._nodes.get(r);n===void 0&&we(97);const s=n.replace;if(s!==null){const i=s(e);return i instanceof e.constructor||we(98),i}return e}function ij(e,t){!fn(e.getParent())||ie(t)||Rt(t)||we(99)}function oj(e){return(Rt(e)||ie(e)&&!e.canBeEmpty())&&!e.isInline()}function LA(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function _$e(e,t,r){let n=e._blockCursorElement;if(me(r)&&r.isCollapsed()&&r.anchor.type==="element"&&t.contains(document.activeElement)){const s=r.anchor,i=s.getNode(),o=s.offset;let a=!1,l=null;if(o===i.getChildrenSize())oj(i.getChildAtIndex(o-1))&&(a=!0);else{const c=i.getChildAtIndex(o);if(oj(c)){const u=c.getPreviousSibling();(u===null||oj(u))&&(a=!0,l=e.getElementByKey(c.__key))}}if(a){const c=e.getElementByKey(i.__key);return n===null&&(e._blockCursorElement=n=function(u){const h=u.theme,f=document.createElement("div");f.contentEditable="false",f.setAttribute("data-lexical-cursor","true");let p=h.blockCursor;if(p!==void 0){if(typeof p=="string"){const y=Eb(p);p=h.blockCursor=y}p!==void 0&&f.classList.add(...p)}return f}(e._config)),t.style.caretColor="transparent",void(l===null?c.appendChild(n):c.insertBefore(n,l))}}n!==null&&LA(n,e,t)}function lo(e){return Ai?(e||window).getSelection():null}function MA(e){return e.nodeType===1}function j$e(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function k$e(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function rd(e){if(fn(e)||Rt(e)&&!e.isInline())return!0;if(!ie(e)||Xh(e))return!1;const t=e.getFirstChild(),r=t===null||Np(t)||ve(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function aj(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function AH(e,t,r,n,s,i){let o=e.getFirstChild();for(;o!==null;){const a=o.__key;o.__parent===t&&(ie(o)&&AH(o,a,r,n,s,i),r.has(a)||i.delete(a),s.push(a)),o=o.getNextSibling()}}let wl,An,pm,Iw,wS,_S,ru,vi,jS,mm,Pr="",Tn="",ri=null,Ro="",OH=!1,Dw=!1,Yy=null;function Ob(e,t){const r=ru.get(e);if(t!==null){const n=SS(e);n.parentNode===t&&t.removeChild(n)}if(vi.has(e)||An._keyToDOMMap.delete(e),ie(r)){const n=Rb(r,ru);kS(n,0,n.length-1,null)}r!==void 0&&DA(mm,pm,Iw,r,"destroyed")}function kS(e,t,r,n){let s=t;for(;s<=r;++s){const i=e[s];i!==void 0&&Ob(i,n)}}function rc(e,t){e.setProperty("text-align",t)}const N$e="40px";function PH(e,t){const r=wl.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||N$e;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function RH(e,t){const r=e.style;t===0?rc(r,""):t===kA?rc(r,"left"):t===NA?rc(r,"center"):t===SA?rc(r,"right"):t===EA?rc(r,"justify"):t===CA?rc(r,"start"):t===TA&&rc(r,"end")}function Pb(e,t,r){const n=vi.get(e);n===void 0&&we(60);const s=n.createDOM(wl,An);if(function(i,o,a){const l=a._keyToDOMMap;o["__lexicalKey_"+a._key]=i,l.set(i,o)}(e,s,An),ve(n)?s.setAttribute("data-lexical-text","true"):Rt(n)&&s.setAttribute("data-lexical-decorator","true"),ie(n)){const i=n.__indent,o=n.__size;if(i!==0&&PH(s,i),o!==0){const l=o-1;(function(c,u,h,f){const p=Tn;Tn="",NS(c,h,0,u,f,null),DH(h,f),Tn=p})(Rb(n,vi),l,n,s)}const a=n.__format;a!==0&&RH(s,a),n.isInline()||IH(null,n,s),Aw(n)&&(Pr+=ha,Ro+=ha)}else{const i=n.getTextContent();if(Rt(n)){const o=n.decorate(An,wl);o!==null&&LH(e,o),s.contentEditable="false"}else ve(n)&&(n.isDirectionless()||(Tn+=i));Pr+=i,Ro+=i}if(t!==null)if(r!=null)t.insertBefore(s,r);else{const i=t.__lexicalLineBreak;i!=null?t.insertBefore(s,i):t.appendChild(s)}return DA(mm,pm,Iw,n,"created"),s}function NS(e,t,r,n,s,i){const o=Pr;Pr="";let a=r;for(;a<=n;++a){Pb(e[a],s,i);const l=vi.get(e[a]);l!==null&&ri===null&&ve(l)&&(ri=l.getFormat())}Aw(t)&&(Pr+=ha),s.__lexicalTextContent=Pr,Pr=o+Pr}function vL(e,t){const r=t.get(e);return Np(r)||Rt(r)&&r.isInline()}function IH(e,t,r){const n=e!==null&&(e.__size===0||vL(e.__last,ru)),s=t.__size===0||vL(t.__last,vi);if(n){if(!s){const i=r.__lexicalLineBreak;i!=null&&r.removeChild(i),r.__lexicalLineBreak=null}}else if(s){const i=document.createElement("br");r.__lexicalLineBreak=i,r.appendChild(i)}}function DH(e,t){const r=t.__lexicalDirTextContent,n=t.__lexicalDir;if(r!==Tn||n!==Yy){const i=Tn==="",o=i?Yy:(s=Tn,s$e.test(s)?"rtl":i$e.test(s)?"ltr":null);if(o!==n){const a=t.classList,l=wl.theme;let c=n!==null?l[n]:void 0,u=o!==null?l[o]:void 0;if(c!==void 0){if(typeof c=="string"){const h=Eb(c);c=l[n]=h}a.remove(...c)}if(o===null||i&&o==="ltr")t.removeAttribute("dir");else{if(u!==void 0){if(typeof u=="string"){const h=Eb(u);u=l[o]=h}u!==void 0&&a.add(...u)}t.dir=o}Dw||(e.getWritable().__dir=o)}Yy=o,t.__lexicalDirTextContent=Tn,t.__lexicalDir=o}var s}function S$e(e,t,r){const n=Tn;var s;Tn="",ri=null,function(i,o,a){const l=Pr,c=i.__size,u=o.__size;if(Pr="",c===1&&u===1){const h=i.__first,f=o.__first;if(h===f)ep(h,a);else{const y=SS(h),m=Pb(f,null,null);a.replaceChild(m,y),Ob(h,null)}const p=vi.get(f);ri===null&&ve(p)&&(ri=p.getFormat())}else{const h=Rb(i,ru),f=Rb(o,vi);if(c===0)u!==0&&NS(f,o,0,u-1,a,null);else if(u===0){if(c!==0){const p=a.__lexicalLineBreak==null;kS(h,0,c-1,p?null:a),p&&(a.textContent="")}}else(function(p,y,m,b,x,w){const _=b-1,j=x-1;let k,N,C=(P=w,P.firstChild),E=0,T=0;for(var P;E<=_&&T<=j;){const R=y[E],F=m[T];if(R===F)C=lj(ep(F,w)),E++,T++;else{k===void 0&&(k=new Set(y)),N===void 0&&(N=new Set(m));const W=N.has(R),q=k.has(F);if(W)if(q){const K=Ab(An,F);K===C?C=lj(ep(F,w)):(C!=null?w.insertBefore(K,C):w.appendChild(K),ep(F,w)),E++,T++}else Pb(F,w,C),T++;else C=lj(SS(R)),Ob(R,w),E++}const $=vi.get(F);$!==null&&ri===null&&ve($)&&(ri=$.getFormat())}const O=E>_,I=T>j;if(O&&!I){const R=m[j+1];NS(m,p,T,j,w,R===void 0?null:An.getElementByKey(R))}else I&&!O&&kS(y,E,_,w)})(o,h,f,c,u,a)}Aw(o)&&(Pr+=ha),a.__lexicalTextContent=Pr,Pr=l+Pr}(e,t,r),DH(t,r),yh(s=t)&&ri!=null&&ri!==s.__textFormat&&!Dw&&s.setTextFormat(ri),Tn=n,ri=null}function Rb(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&we(101),r.push(n),n=s.__next}return r}function ep(e,t){const r=ru.get(e);let n=vi.get(e);r!==void 0&&n!==void 0||we(61);const s=OH||_S.has(e)||wS.has(e),i=Ab(An,e);if(r===n&&!s){if(ie(r)){const o=i.__lexicalTextContent;o!==void 0&&(Pr+=o,Ro+=o);const a=i.__lexicalDirTextContent;a!==void 0&&(Tn+=a)}else{const o=r.getTextContent();ve(r)&&!r.isDirectionless()&&(Tn+=o),Ro+=o,Pr+=o}return i}if(r!==n&&s&&DA(mm,pm,Iw,n,"updated"),n.updateDOM(r,i,wl)){const o=Pb(e,null,null);return t===null&&we(62),t.replaceChild(o,i),Ob(e,null),o}if(ie(r)&&ie(n)){const o=n.__indent;o!==r.__indent&&PH(i,o);const a=n.__format;a!==r.__format&&RH(i,a),s&&(S$e(r,n,i),fn(n)||n.isInline()||IH(r,n,i)),Aw(n)&&(Pr+=ha,Ro+=ha)}else{const o=n.getTextContent();if(Rt(n)){const a=n.decorate(An,wl);a!==null&&LH(e,a)}else ve(n)&&!n.isDirectionless()&&(Tn+=o);Pr+=o,Ro+=o}if(!Dw&&fn(n)&&n.__cachedText!==Ro){const o=n.getWritable();o.__cachedText=Ro,n=o}return i}function LH(e,t){let r=An._pendingDecorators;const n=An._decorators;if(r===null){if(n[e]===t)return;r=kH(An)}r[e]=t}function lj(e){let t=e.nextSibling;return t!==null&&t===An._blockCursorElement&&(t=t.nextSibling),t}function E$e(e,t,r,n,s,i){Pr="",Ro="",Tn="",OH=n===mh,Yy=null,An=r,wl=r._config,pm=r._nodes,Iw=An._listeners.mutation,wS=s,_S=i,ru=e._nodeMap,vi=t._nodeMap,Dw=t._readOnly,jS=new Map(r._keyToDOMMap);const o=new Map;return mm=o,ep("root",null),An=void 0,pm=void 0,wS=void 0,_S=void 0,ru=void 0,vi=void 0,wl=void 0,jS=void 0,mm=void 0,o}function SS(e){const t=jS.get(e);return t===void 0&&we(75,e),t}const So=Object.freeze({}),ES=30,CS=[["keydown",function(e,t){if(jp=e.timeStamp,MH=e.key,t.isComposing())return;const{key:r,shiftKey:n,ctrlKey:s,metaKey:i,altKey:o}=e;Ne(t,L1e,e)||r!=null&&(function(a,l,c,u){return pL(a)&&!l&&!u&&!c}(r,s,o,i)?Ne(t,sH,e):function(a,l,c,u,h){return pL(a)&&!u&&!c&&(l||h)}(r,s,n,o,i)?Ne(t,M1e,e):function(a,l,c,u){return fL(a)&&!l&&!u&&!c}(r,s,o,i)?Ne(t,iH,e):function(a,l,c,u,h){return fL(a)&&!u&&!c&&(l||h)}(r,s,n,o,i)?Ne(t,z1e,e):function(a,l,c){return function(u){return u==="ArrowUp"}(a)&&!l&&!c}(r,s,i)?Ne(t,oH,e):function(a,l,c){return function(u){return u==="ArrowDown"}(a)&&!l&&!c}(r,s,i)?Ne(t,aH,e):function(a,l){return mL(a)&&l}(r,n)?(kp=!0,Ne(t,jb,e)):function(a){return a===" "}(r)?Ne(t,F1e,e):function(a,l){return ei&&l&&a.toLowerCase()==="o"}(r,s)?(e.preventDefault(),kp=!0,Ne(t,Td,!0)):function(a,l){return mL(a)&&!l}(r,n)?(kp=!1,Ne(t,jb,e)):function(a,l,c,u){return ei?!l&&!c&&(Rf(a)||a.toLowerCase()==="h"&&u):!(u||l||c)&&Rf(a)}(r,o,i,s)?Rf(r)?Ne(t,lH,e):(e.preventDefault(),Ne(t,Mc,!0)):function(a){return a==="Escape"}(r)?Ne(t,cH,e):function(a,l,c,u,h){return ei?!(c||u||h)&&(If(a)||a.toLowerCase()==="d"&&l):!(l||u||h)&&If(a)}(r,s,n,o,i)?If(r)?Ne(t,uH,e):(e.preventDefault(),Ne(t,Mc,!1)):function(a,l,c){return Rf(a)&&(ei?l:c)}(r,o,s)?(e.preventDefault(),Ne(t,dm,!0)):function(a,l,c){return If(a)&&(ei?l:c)}(r,o,s)?(e.preventDefault(),Ne(t,dm,!1)):function(a,l){return ei&&l&&Rf(a)}(r,i)?(e.preventDefault(),Ne(t,hm,!0)):function(a,l){return ei&&l&&If(a)}(r,i)?(e.preventDefault(),Ne(t,hm,!1)):function(a,l,c,u){return a.toLowerCase()==="b"&&!l&&Qf(c,u)}(r,o,i,s)?(e.preventDefault(),Ne(t,ol,"bold")):function(a,l,c,u){return a.toLowerCase()==="u"&&!l&&Qf(c,u)}(r,o,i,s)?(e.preventDefault(),Ne(t,ol,"underline")):function(a,l,c,u){return a.toLowerCase()==="i"&&!l&&Qf(c,u)}(r,o,i,s)?(e.preventDefault(),Ne(t,ol,"italic")):function(a,l,c,u){return a==="Tab"&&!l&&!c&&!u}(r,o,s,i)?Ne(t,$1e,e):function(a,l,c,u){return a.toLowerCase()==="z"&&!l&&Qf(c,u)}(r,n,i,s)?(e.preventDefault(),Ne(t,vA,void 0)):function(a,l,c,u){return ei?a.toLowerCase()==="z"&&c&&l:a.toLowerCase()==="y"&&u||a.toLowerCase()==="z"&&u&&l}(r,n,i,s)?(e.preventDefault(),Ne(t,bA,void 0)):ci(t._editorState._selection)?function(a,l,c,u){return!l&&a.toLowerCase()==="c"&&(ei?c:u)}(r,n,i,s)?(e.preventDefault(),Ne(t,Ew,e)):function(a,l,c,u){return!l&&a.toLowerCase()==="x"&&(ei?c:u)}(r,n,i,s)?(e.preventDefault(),Ne(t,xA,e)):gL(r,i,s)&&(e.preventDefault(),Ne(t,yS,e)):!dl&&gL(r,i,s)&&(e.preventDefault(),Ne(t,yS,e)),function(a,l,c,u){return a||l||c||u}(s,n,o,i)&&Ne(t,G1e,e))}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;r instanceof Node&&n!=="touch"&&ns(t,()=>{Rt(tu(r))||(AS=!0)})}],["compositionstart",function(e,t){ns(t,()=>{const r=Me();if(me(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();Jr(n.key),(e.timeStamp<jp+ES||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||ve(s)&&s.getStyle()!==r.style)&&Ne(t,Ad,n$e)}})}],["compositionend",function(e,t){dl?Df=!0:ns(t,()=>{cj(t,e.data)})}],["input",function(e,t){e.stopPropagation(),ns(t,()=>{const r=Me(),n=e.data,s=UH(e);if(n!=null&&me(r)&&$H(r,s,n,e.timeStamp,!1)){Df&&(cj(t,n),Df=!1);const i=r.anchor.getNode(),o=lo(t._window);if(o===null)return;const a=r.isBackward(),l=a?r.anchor.offset:r.focus.offset,c=a?r.focus.offset:r.anchor.offset;kb&&!r.isCollapsed()&&ve(i)&&o.anchorNode!==null&&i.getTextContent().slice(0,l)+n+i.getTextContent().slice(l+c)===CH(o.anchorNode)||Ne(t,Ad,n);const u=n.length;dl&&u>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=u),wA||Cw||_A||!t.isComposing()||(jp=0,Jr(null))}else RA(!1,t,n!==null?n:void 0),Df&&(cj(t,n||void 0),Df=!1);qn(),bH(lr())}),nd=null}],["click",function(e,t){ns(t,()=>{const r=Me(),n=lo(t._window),s=lg();if(n){if(me(r)){const i=r.anchor,o=i.getNode();i.type==="element"&&i.offset===0&&r.isCollapsed()&&!fn(o)&&xr().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s)?(n.removeAllRanges(),r.dirty=!0):e.detail===3&&!r.isCollapsed()&&o!==r.focus.getNode()&&(ie(o)?o.select(0):o.getParentOrThrow().select(0))}else if(e.pointerType==="touch"){const i=n.anchorNode;if(i!==null){const o=i.nodeType;(o===ng||o===Ul)&&ao(FA(s,n,t,e))}}}Ne(t,nH,e)})}],["cut",So],["copy",So],["dragstart",So],["dragover",So],["dragend",So],["paste",So],["focus",So],["blur",So],["drop",So]];kb&&CS.push(["beforeinput",(e,t)=>function(r,n){const s=r.inputType,i=UH(r);s==="deleteCompositionText"||dl&&TH(n)||s!=="insertCompositionText"&&ns(n,()=>{const o=Me();if(s==="deleteContentBackward"){if(o===null){const p=lg();if(!me(p))return;ao(p.clone())}if(me(o)){const p=o.anchor.key===o.focus.key;if(a=r.timeStamp,MH==="MediaLast"&&a<jp+ES&&n.isComposing()&&p){if(Jr(null),jp=0,setTimeout(()=>{ns(n,()=>{Jr(null)})},ES),me(o)){const y=o.anchor.getNode();y.markDirty(),o.format=y.getFormat(),ve(y)||we(142),o.style=y.getStyle()}}else{Jr(null),r.preventDefault();const y=o.anchor.getNode().getTextContent(),m=o.anchor.offset===0&&o.focus.offset===y.length;X1e&&p&&!m||Ne(n,Mc,!0)}return}}var a;if(!me(o))return;const l=r.data;nd!==null&&RA(!1,n,nd),o.dirty&&nd===null||!o.isCollapsed()||fn(o.anchor.getNode())||i===null||o.applyDOMRange(i),nd=null;const c=o.anchor,u=o.focus,h=c.getNode(),f=u.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Ne(n,Ad,r);break;case"insertFromComposition":Jr(null),Ne(n,Ad,r);break;case"insertLineBreak":Jr(null),Ne(n,Td,!1);break;case"insertParagraph":Jr(null),kp&&!Cw?(kp=!1,Ne(n,Td,!1)):Ne(n,_b,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Ne(n,yA,r);break;case"deleteByComposition":(function(p,y){return p!==y||ie(p)||ie(y)||!p.isToken()||!y.isToken()})(h,f)&&Ne(n,gS,r);break;case"deleteByDrag":case"deleteByCut":Ne(n,gS,r);break;case"deleteContent":Ne(n,Mc,!1);break;case"deleteWordBackward":Ne(n,dm,!0);break;case"deleteWordForward":Ne(n,dm,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Ne(n,hm,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Ne(n,hm,!1);break;case"formatStrikeThrough":Ne(n,ol,"strikethrough");break;case"formatBold":Ne(n,ol,"bold");break;case"formatItalic":Ne(n,ol,"italic");break;case"formatUnderline":Ne(n,ol,"underline");break;case"historyUndo":Ne(n,vA,void 0);break;case"historyRedo":Ne(n,bA,void 0)}else{if(l===`
`)r.preventDefault(),Ne(n,Td,!1);else if(l===ha)r.preventDefault(),Ne(n,_b,void 0);else if(l==null&&r.dataTransfer){const p=r.dataTransfer.getData("text/plain");r.preventDefault(),o.insertRawText(p)}else l!=null&&$H(o,i,l,r.timeStamp,!0)?(r.preventDefault(),Ne(n,Ad,l)):nd=l;zH=r.timeStamp}})}(e,t)]);let jp=0,MH=null,zH=0,nd=null;const Ib=new WeakMap;let TS=!1,AS=!1,kp=!1,Df=!1,FH=[0,"",0,"root",0];function $H(e,t,r,n,s){const i=e.anchor,o=e.focus,a=i.getNode(),l=lr(),c=lo(l._window),u=c!==null?c.anchorNode:null,h=i.key,f=l.getElementByKey(h),p=r.length;return h!==o.key||!ve(a)||(!s&&(!kb||zH<n+50)||a.isDirty()&&p<2||SH(r))&&i.offset!==o.offset&&!a.isComposing()||td(a)||a.isDirty()&&p>1||(s||!kb)&&f!==null&&!a.isComposing()&&u!==Cb(f)||c!==null&&t!==null&&(!t.collapsed||t.startContainer!==c.anchorNode||t.startOffset!==c.anchorOffset)||a.getFormat()!==e.format||a.getStyle()!==e.style||b$e(e,a)}function bL(e,t){return e!==null&&e.nodeValue!==null&&e.nodeType===Ul&&t!==0&&t!==e.nodeValue.length}function xL(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:o}=e;TS&&(TS=!1,bL(n,s)&&bL(i,o))||ns(t,()=>{if(!r)return void ao(null);if(!sg(t,n,i))return;const a=Me();if(me(a)){const l=a.anchor,c=l.getNode();if(a.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(a.dirty=!0);const u=Pw(t).event,h=u?u.timeStamp:performance.now(),[f,p,y,m,b]=FH,x=xr(),w=t.isComposing()===!1&&x.getTextContent()==="";if(h<b+200&&l.offset===y&&l.key===m)a.format=f,a.style=p;else if(l.type==="text")ve(c)||we(141),a.format=c.getFormat(),a.style=c.getStyle();else if(l.type==="element"&&!w){const _=l.getNode();_ instanceof ef&&_.getChildrenSize()===0?a.format=_.getTextFormat():a.format=0,a.style=""}}else{const u=l.key,h=a.focus.key,f=a.getNodes(),p=f.length,y=a.isBackward(),m=y?o:s,b=y?s:o,x=y?h:u,w=y?u:h;let _=r$e,j=!1;for(let k=0;k<p;k++){const N=f[k],C=N.getTextContentSize();if(ve(N)&&C!==0&&!(k===0&&N.__key===x&&m===C||k===p-1&&N.__key===w&&b===0)&&(j=!0,_&=N.getFormat(),_===0))break}a.format=j?_:0}}Ne(t,gA,void 0)})}function UH(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function cj(e,t){const r=e._compositionKey;if(Jr(null),r!==null&&t!=null){if(t===""){const n=Nn(r),s=Cb(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&ve(n)&&IA(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=Me();if(me(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void Ne(e,jb,null)}}}RA(!0,e,t)}function qH(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Od=new Map;function BH(e){const t=e.target,r=lo(t==null?null:t.nodeType===9?t.defaultView:t.ownerDocument.defaultView);if(r===null)return;const n=_H(r.anchorNode);if(n===null)return;AS&&(AS=!1,ns(n,()=>{const c=lg(),u=r.anchorNode;if(u===null)return;const h=u.nodeType;h!==ng&&h!==Ul||ao(FA(c,r,n,e))}));const s=PA(n),i=s[s.length-1],o=i._key,a=Od.get(o),l=a||i;l!==n&&xL(r,l,!1),xL(r,n,!0),n!==i?Od.set(o,n):a&&Od.delete(o)}function wL(e){e._lexicalHandled=!0}function _L(e){return e._lexicalHandled===!0}function C$e(e){const t=e.ownerDocument,r=Ib.get(t);r===void 0&&we(162);const n=r-1;n>=0||we(164),Ib.set(t,n),n===0&&t.removeEventListener("selectionchange",BH);const s=e.__lexicalEditor;s!=null&&(function(o){if(o._parentEditor!==null){const a=PA(o),l=a[a.length-1]._key;Od.get(l)===o&&Od.delete(l)}else Od.delete(o._key)}(s),e.__lexicalEditor=null);const i=qH(e);for(let o=0;o<i.length;o++)i[o]();e.__lexicalEventHandles=[]}function OS(e,t,r){qn();const n=e.__key,s=e.getParent();if(s===null)return;const i=function(a){const l=Me();if(!me(l)||!ie(a))return l;const{anchor:c,focus:u}=l,h=c.getNode(),f=u.getNode();return xS(h,a)&&c.set(a.__key,0,"element"),xS(f,a)&&u.set(a.__key,0,"element"),l}(e);let o=!1;if(me(i)&&t){const a=i.anchor,l=i.focus;a.key===n&&(Lb(a,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0),l.key===n&&(Lb(l,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0)}else ci(i)&&t&&e.isSelected()&&e.selectPrevious();if(me(i)&&t&&!o){const a=e.getIndexWithinParent();zc(e),Db(i,s,a,-1)}else zc(e);r||Xh(s)||s.canBeEmpty()||!s.isEmpty()||OS(s,t),t&&fn(s)&&s.isEmpty()&&s.selectEnd()}class Lw{static getType(){we(64,this.name)}static clone(t){we(65,this.name)}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,v$e(this,t)}getType(){return this.__type}isInline(){we(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=Nn(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||Me();if(r==null)return!1;const n=r.getNodes().some(s=>s.__key===this.__key);return(ve(this)||!me(r)||r.anchor.type!=="element"||r.focus.type!=="element"||r.anchor.key!==r.focus.key||r.anchor.offset!==r.focus.offset)&&n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:Nn(t)}getParentOrThrow(){const t=this.getParent();return t===null&&we(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if(Xh(r))return ie(t)||we(138),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&we(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:Nn(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:Nn(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=this.getParents(),n=t.getParents();ie(this)&&r.unshift(this),ie(t)&&n.unshift(t);const s=r.length,i=n.length;if(s===0||i===0||r[s-1]!==n[i-1])return null;const o=new Set(n);for(let a=0;a<s;a++){const l=r[a];if(o.has(l))return l}return null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){if(this===t)return!1;if(t.isParentOf(this))return!0;if(this.isParentOf(t))return!1;const r=this.getCommonAncestor(t);let n=0,s=0,i=this;for(;;){const o=i.getParentOrThrow();if(o===r){n=i.getIndexWithinParent();break}i=o}for(i=t;;){const o=i.getParentOrThrow();if(o===r){s=i.getIndexWithinParent();break}i=o}return n<s}isParentOf(t){const r=this.__key;if(r===t.__key)return!1;let n=t;for(;n!==null;){if(n.__key===r)return!0;n=n.getParent()}return!1}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let i=this;for(;i!==null;){const o=i.__key;if(s.has(o)||(s.add(o),n.push(i)),i===t)break;const a=ie(i)?r?i.getFirstChild():i.getLastChild():null;if(a!==null){i=a;continue}const l=r?i.getNextSibling():i.getPreviousSibling();if(l!==null){i=l;continue}const c=i.getParentOrThrow();if(s.has(c.__key)||n.push(c),c===t)break;let u=null,h=c;do{if(h===null&&we(68),u=r?h.getNextSibling():h.getPreviousSibling(),h=h.getParent(),h===null)break;u!==null||s.has(h.__key)||n.push(h)}while(u===null);i=u}return r||n.reverse(),n}isDirty(){const t=lr()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=Nn(this.__key);return t===null&&we(113),t}getWritable(){qn();const t=wa(),r=lr(),n=t._nodeMap,s=this.__key,i=this.getLatest(),o=i.__parent,a=r._cloneNotNeeded,l=Me();if(l!==null&&l.setCachedNodes(null),a.has(s))return Tb(i),i;const c=i.constructor.clone(i);return c.__parent=o,c.__next=i.__next,c.__prev=i.__prev,ie(i)&&ie(c)?(yh(i)&&yh(c)&&(c.__textFormat=i.__textFormat),c.__first=i.__first,c.__last=i.__last,c.__size=i.__size,c.__indent=i.__indent,c.__format=i.__format,c.__dir=i.__dir):ve(i)&&ve(c)&&(c.__format=i.__format,c.__style=i.__style,c.__mode=i.__mode,c.__detail=i.__detail),a.add(s),c.__key=s,Tb(c),n.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){we(70)}updateDOM(t,r,n){we(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){we(72)}static importJSON(t){we(18,this.name)}static transform(){return null}remove(t){OS(this,!0,t)}replace(t,r){qn();let n=Me();n!==null&&(n=n.clone()),ij(this,t);const s=this.getLatest(),i=this.__key,o=t.__key,a=t.getWritable(),l=this.getParentOrThrow().getWritable(),c=l.__size;zc(a);const u=s.getPreviousSibling(),h=s.getNextSibling(),f=s.__prev,p=s.__next,y=s.__parent;if(OS(s,!1,!0),u===null?l.__first=o:u.getWritable().__next=o,a.__prev=f,h===null?l.__last=o:h.getWritable().__prev=o,a.__next=p,a.__parent=y,l.__size=c,r&&(ie(this)&&ie(a)||we(139),this.getChildren().forEach(m=>{a.append(m)})),me(n)){ao(n);const m=n.anchor,b=n.focus;m.key===i&&EL(m,a),b.key===i&&EL(b,a)}return al()===i&&Jr(o),a}insertAfter(t,r=!0){qn(),ij(this,t);const n=this.getWritable(),s=t.getWritable(),i=s.getParent(),o=Me();let a=!1,l=!1;if(i!==null){const p=t.getIndexWithinParent();if(zc(s),me(o)){const y=i.__key,m=o.anchor,b=o.focus;a=m.type==="element"&&m.key===y&&m.offset===p+1,l=b.type==="element"&&b.key===y&&b.offset===p+1}}const c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),h=s.__key,f=n.__next;if(c===null?u.__last=h:c.getWritable().__prev=h,u.__size++,n.__next=h,s.__next=f,s.__prev=n.__key,s.__parent=n.__parent,r&&me(o)){const p=this.getIndexWithinParent();Db(o,u,p+1);const y=u.__key;a&&o.anchor.set(y,p+2,"element"),l&&o.focus.set(y,p+2,"element")}return t}insertBefore(t,r=!0){qn(),ij(this,t);const n=this.getWritable(),s=t.getWritable(),i=s.__key;zc(s);const o=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),l=n.__prev,c=this.getIndexWithinParent();o===null?a.__first=i:o.getWritable().__next=i,a.__size++,n.__prev=i,s.__prev=l,s.__next=n.__key,s.__parent=n.__parent;const u=Me();return r&&me(u)&&Db(u,this.getParentOrThrow(),c),t}isParentRequired(){return!1}createParentElementNode(){return to()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){qn();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(ie(n))return n.select();if(!ve(n)){const i=n.getIndexWithinParent()+1;return s.select(i,i)}return n.select(t,r)}selectNext(t,r){qn();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(ie(n))return n.select(0,0);if(!ve(n)){const i=n.getIndexWithinParent();return s.select(i,i)}return n.select(t,r)}markDirty(){this.getWritable()}}class ig extends Lw{static getType(){return"linebreak"}static clone(t){return new ig(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:t=>function(r){const n=r.parentElement;if(n!==null){const s=n.firstChild;if(s===r||s.nextSibling===r&&jL(s)){const i=n.lastChild;if(i===r||i.previousSibling===r&&jL(i))return!0}}return!1}(t)?null:{conversion:T$e,priority:0}}}static importJSON(t){return gh()}exportJSON(){return{type:"linebreak",version:1}}}function T$e(e){return{node:gh()}}function gh(){return Rw(new ig)}function Np(e){return e instanceof ig}function jL(e){return e.nodeType===Ul&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function uj(e,t){return 16&t?"code":t&jA?"mark":32&t?"sub":64&t?"sup":null}function dj(e,t){return 1&t?"strong":2&t?"em":"span"}function VH(e,t,r,n,s){const i=n.classList;let o=_p(s,"base");o!==void 0&&i.add(...o),o=_p(s,"underlineStrikethrough");let a=!1;const l=t&Sb&&t&Nb;o!==void 0&&(r&Sb&&r&Nb?(a=!0,l||i.add(...o)):l&&i.remove(...o));for(const c in eu){const u=eu[c];if(o=_p(s,c),o!==void 0)if(r&u){if(a&&(c==="underline"||c==="strikethrough")){t&u&&i.remove(...o);continue}t&u&&(!l||c!=="underline")&&c!=="strikethrough"||i.add(...o)}else t&u&&i.remove(...o)}}function WH(e,t,r){const n=t.firstChild,s=r.isComposing(),i=e+(s?Tw:"");if(n==null)t.textContent=i;else{const o=n.nodeValue;if(o!==i)if(s||dl){const[a,l,c]=function(u,h){const f=u.length,p=h.length;let y=0,m=0;for(;y<f&&y<p&&u[y]===h[y];)y++;for(;m+y<f&&m+y<p&&u[f-m-1]===h[p-m-1];)m++;return[y,f-y-m,h.slice(y,p-m)]}(o,i);l!==0&&n.deleteData(a,l),n.insertData(a,c)}else n.nodeValue=i}}function kL(e,t,r,n,s,i){WH(s,e,t);const o=i.theme.text;o!==void 0&&VH(0,0,n,e,o)}function Ey(e,t){const r=document.createElement(t);return r.appendChild(e),r}class Qh extends Lw{static getType(){return"text"}static clone(t){return new Qh(t.__text,t.__key)}constructor(t,r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return c$e[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===al()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=eu[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return bS(this.getLatest().__format,t,r)}canHaveFormat(){return!0}createDOM(t,r){const n=this.__format,s=uj(0,n),i=dj(0,n),o=s===null?i:s,a=document.createElement(o);let l=a;this.hasFormat("code")&&a.setAttribute("spellcheck","false"),s!==null&&(l=document.createElement(i),a.appendChild(l)),kL(l,this,0,n,this.__text,t);const c=this.__style;return c!==""&&(a.style.cssText=c),a}updateDOM(t,r,n){const s=this.__text,i=t.__format,o=this.__format,a=uj(0,i),l=uj(0,o),c=dj(0,i),u=dj(0,o);if((a===null?c:a)!==(l===null?u:l))return!0;if(a===l&&c!==u){const m=r.firstChild;m==null&&we(48);const b=document.createElement(u);return kL(b,this,0,o,s,n),r.replaceChild(b,m),!1}let h=r;l!==null&&a!==null&&(h=r.firstChild,h==null&&we(49)),WH(s,h,this);const f=n.theme.text;f!==void 0&&i!==o&&VH(0,i,o,h,f);const p=t.__style,y=this.__style;return p!==y&&(r.style.cssText=y),!1}static importDOM(){return{"#text":()=>({conversion:R$e,priority:0}),b:()=>({conversion:O$e,priority:0}),code:()=>({conversion:Ia,priority:0}),em:()=>({conversion:Ia,priority:0}),i:()=>({conversion:Ia,priority:0}),s:()=>({conversion:Ia,priority:0}),span:()=>({conversion:A$e,priority:0}),strong:()=>({conversion:Ia,priority:0}),sub:()=>({conversion:Ia,priority:0}),sup:()=>({conversion:Ia,priority:0}),u:()=>({conversion:Ia,priority:0})}}static importJSON(t){const r=an(t.text);return r.setFormat(t.format),r.setDetail(t.detail),r.setMode(t.mode),r.setStyle(t.style),r}exportDOM(t){let{element:r}=super.exportDOM(t);return r!==null&&MA(r)||we(132),r.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(r=Ey(r,"b")),this.hasFormat("italic")&&(r=Ey(r,"i")),this.hasFormat("strikethrough")&&(r=Ey(r,"s")),this.hasFormat("underline")&&(r=Ey(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?eu[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?o$e[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=bS(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=l$e[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){qn();let n=t,s=r;const i=Me(),o=this.getTextContent(),a=this.__key;if(typeof o=="string"){const l=o.length;n===void 0&&(n=l),s===void 0&&(s=l)}else n=0,s=0;if(!me(i))return ZH(a,n,a,s,"text","text");{const l=al();l!==i.anchor.key&&l!==i.focus.key||Jr(a),i.setTextNodeRange(this,n,this,s)}return i}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const i=this.getWritable(),o=i.__text,a=n.length;let l=t;l<0&&(l=a+l,l<0&&(l=0));const c=Me();if(s&&me(c)){const h=t+a;c.setTextNodeRange(i,h,i,h)}const u=o.slice(0,l)+n+o.slice(l+r);return i.__text=u,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){qn();const r=this.getLatest(),n=r.getTextContent(),s=r.__key,i=al(),o=new Set(t),a=[],l=n.length;let c="";for(let C=0;C<l;C++)c!==""&&o.has(C)&&(a.push(c),c=""),c+=n[C];c!==""&&a.push(c);const u=a.length;if(u===0)return[];if(a[0]===n)return[r];const h=a[0],f=r.getParentOrThrow();let p;const y=r.getFormat(),m=r.getStyle(),b=r.__detail;let x=!1;r.isSegmented()?(p=an(h),p.__format=y,p.__style=m,p.__detail=b,x=!0):(p=r.getWritable(),p.__text=h);const w=Me(),_=[p];let j=h.length;for(let C=1;C<u;C++){const E=a[C],T=E.length,P=an(E).getWritable();P.__format=y,P.__style=m,P.__detail=b;const O=P.__key,I=j+T;if(me(w)){const R=w.anchor,F=w.focus;R.key===s&&R.type==="text"&&R.offset>j&&R.offset<=I&&(R.key=O,R.offset-=j,w.dirty=!0),F.key===s&&F.type==="text"&&F.offset>j&&F.offset<=I&&(F.key=O,F.offset-=j,w.dirty=!0)}i===s&&Jr(O),j=I,_.push(P)}(function(C){const E=C.getPreviousSibling(),T=C.getNextSibling();E!==null&&Tb(E),T!==null&&Tb(T)})(this);const k=f.getWritable(),N=this.getIndexWithinParent();return x?(k.splice(N,0,_),this.remove()):k.splice(N,1,_),me(w)&&Db(w,f,N,u-1),_}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||we(50);const n=this.__key,s=t.__key,i=this.__text,o=i.length;al()===s&&Jr(n);const a=Me();if(me(a)){const h=a.anchor,f=a.focus;h!==null&&h.key===s&&(IL(h,r,n,t,o),a.dirty=!0),f!==null&&f.key===s&&(IL(f,r,n,t,o),a.dirty=!0)}const l=t.__text,c=r?l+i:i+l;this.setTextContent(c);const u=this.getWritable();return t.remove(),u}isTextEntity(){return!1}}function A$e(e){return{forChild:zA(e.style),node:null}}function O$e(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:zA(t.style,r?void 0:"bold"),node:null}}const NL=new WeakMap;function P$e(e){return e.nodeName==="PRE"||e.nodeType===ng&&e.style!==void 0&&e.style.whiteSpace!==void 0&&e.style.whiteSpace.startsWith("pre")}function R$e(e){const t=e;e.parentElement===null&&we(129);let r=t.textContent||"";if(function(n){let s,i=n.parentNode;const o=[n];for(;i!==null&&(s=NL.get(i))===void 0&&!P$e(i);)o.push(i),i=i.parentNode;const a=s===void 0?i:s;for(let l=0;l<o.length;l++)NL.set(o[l],a);return a}(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],i=n.length;for(let o=0;o<i;o++){const a=n[o];a===`
`||a===`\r
`?s.push(gh()):a==="	"?s.push(ag()):a!==""&&s.push(an(a))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=SL(n,!1))!==null;){const i=n.textContent||"";if(i.length>0){/[ \t\n]$/.test(i)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=SL(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:an(r)}}function SL(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const i=r.parentElement;if(i===null)return null;r=i}if(r=n,r.nodeType===ng){const i=r.style.display;if(i===""&&!j$e(r)||i!==""&&!i.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(r.nodeType===Ul)return r;if(r.nodeName==="BR")return null}}const I$e={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Ia(e){const t=I$e[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:zA(e.style,t),node:null}}function an(e=""){return Rw(new Qh(e))}function ve(e){return e instanceof Qh}function zA(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",i=n.includes("line-through"),o=e.fontStyle==="italic",a=n.includes("underline"),l=e.verticalAlign;return c=>(ve(c)&&(s&&!c.hasFormat("bold")&&c.toggleFormat("bold"),i&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),o&&!c.hasFormat("italic")&&c.toggleFormat("italic"),a&&!c.hasFormat("underline")&&c.toggleFormat("underline"),l!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),l!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),t&&!c.hasFormat(t)&&c.toggleFormat(t)),c)}class og extends Qh{static getType(){return"tab"}static clone(t){const r=new og(t.__key);return r.__text=t.__text,r.__format=t.__format,r.__style=t.__style,r}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}static importJSON(t){const r=ag();return r.setFormat(t.format),r.setStyle(t.style),r}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(t){we(126)}setDetail(t){we(127)}setMode(t){we(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function ag(){return Rw(new og)}function D$e(e){return e instanceof og}class L$e{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){let r=this.getNode(),n=t.getNode();const s=this.offset,i=t.offset;return ie(r)&&(r=r.getDescendantByIndex(s)??r),ie(n)&&(n=n.getDescendantByIndex(i)??n),r===n?s<i:r.isBefore(n)}getNode(){const t=Nn(this.key);return t===null&&we(20),t}set(t,r,n){const s=this._selection,i=this.key;this.key=t,this.offset=r,this.type=n,cg()||(al()===i&&Jr(t),s!==null&&(s.setCachedNodes(null),s.dirty=!0))}}function co(e,t,r){return new L$e(e,t,r)}function hj(e,t){let r=t.__key,n=e.offset,s="element";if(ve(t)){s="text";const i=t.getTextContentSize();n>i&&(n=i)}else if(!ie(t)){const i=t.getNextSibling();if(ve(i))r=i.__key,n=0,s="text";else{const o=t.getParent();o&&(r=o.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function EL(e,t){if(ie(t)){const r=t.getLastDescendant();ie(r)||ve(r)?hj(e,r):hj(e,t)}else hj(e,t)}function Ba(e,t,r,n){e.key=t,e.offset=r,e.type=n}class Mw{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!ci(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every(s=>n.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new Mw(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let i;if(ve(s))i=s.select();else{const o=s.getIndexWithinParent()+1;i=s.getParentOrThrow().select(o,o)}i.insertNodes(t);for(let o=0;o<n;o++)r[o].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const i=Nn(s);i!==null&&n.push(i)}return cg()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}}function me(e){return e instanceof ql}class ql{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!me(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this.anchor,n=this.focus,s=r.isBefore(n),i=s?r:n,o=s?n:r;let a=i.getNode(),l=o.getNode();const c=i.offset,u=o.offset;if(ie(a)&&(a=a.getDescendantByIndex(c)??a),ie(l)){let f=l.getDescendantByIndex(u);f!==null&&f!==a&&l.getChildAtIndex(u)===f&&(f=f.getPreviousSibling()),l=f??l}let h;return h=a.is(l)?ie(a)&&a.getChildrenSize()>0?[]:[a]:a.getNodesBetween(l),cg()||(this._cachedNodes=h),h}setTextNodeRange(t,r,n,s){Ba(this.anchor,t.__key,r,"text"),Ba(this.focus,n.__key,s,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,i=this.focus,o=s.isBefore(i),[a,l]=PS(this);let c="",u=!0;for(let h=0;h<t.length;h++){const f=t[h];if(ie(f)&&!f.isInline())u||(c+=`
`),u=!f.isEmpty();else if(u=!1,ve(f)){let p=f.getTextContent();f===r?f===n?s.type==="element"&&i.type==="element"&&i.offset!==s.offset||(p=a<l?p.slice(a,l):p.slice(l,a)):p=o?p.slice(a):p.slice(l):f===n&&(p=o?p.slice(0,l):p.slice(0,a)),c+=p}else!Rt(f)&&!Np(f)||f===n&&this.isCollapsed()||(c+=f.getTextContent())}return c}applyDOMRange(t){const r=lr(),n=r.getEditorState()._selection,s=KH(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[i,o]=s;Ba(this.anchor,i.key,i.offset,i.type),Ba(this.focus,o.key,o.offset,o.type),this._cachedNodes=null}clone(){const t=this.anchor,r=this.focus;return new ql(co(t.key,t.offset,t.type),co(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=bS(this.format,t,null),this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=eu[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let i=0;i<s;i++){const o=r[i];o===`
`||o===`\r
`?n.push(gh()):o==="	"?n.push(ag()):n.push(an(o))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,i=this.style;let o=r,a=n;!this.isCollapsed()&&n.isBefore(r)&&(o=n,a=r),o.type==="element"&&function(b,x,w,_){const j=b.getNode(),k=j.getChildAtIndex(b.offset),N=an(),C=fn(j)?to().append(N):N;N.setFormat(w),N.setStyle(_),k===null?j.append(C):k.insertBefore(C),b.is(x)&&x.set(N.__key,0,"text"),b.set(N.__key,0,"text")}(o,a,s,i);const l=o.offset;let c=a.offset;const u=this.getNodes(),h=u.length;let f=u[0];ve(f)||we(26);const p=f.getTextContent().length,y=f.getParentOrThrow();let m=u[h-1];if(h===1&&a.type==="element"&&(c=p,a.set(o.key,c,"text")),this.isCollapsed()&&l===p&&(f.isSegmented()||f.isToken()||!f.canInsertTextAfter()||!y.canInsertTextAfter()&&f.getNextSibling()===null)){let b=f.getNextSibling();if(ve(b)&&b.canInsertTextBefore()&&!td(b)||(b=an(),b.setFormat(s),b.setStyle(i),y.canInsertTextAfter()?f.insertAfter(b):y.insertAfter(b)),b.select(0,0),f=b,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(f.isSegmented()||f.isToken()||!f.canInsertTextBefore()||!y.canInsertTextBefore()&&f.getPreviousSibling()===null)){let b=f.getPreviousSibling();if(ve(b)&&!td(b)||(b=an(),b.setFormat(s),y.canInsertTextBefore()?f.insertBefore(b):y.insertBefore(b)),b.select(),f=b,t!=="")return void this.insertText(t)}else if(f.isSegmented()&&l!==p){const b=an(f.getTextContent());b.setFormat(s),f.replace(b),f=b}else if(!this.isCollapsed()&&t!==""){const b=m.getParent();if(!y.canInsertTextBefore()||!y.canInsertTextAfter()||ie(b)&&(!b.canInsertTextBefore()||!b.canInsertTextAfter()))return this.insertText(""),HH(this.anchor,this.focus,null),void this.insertText(t)}if(h===1){if(f.isToken()){const _=an(t);return _.select(),void f.replace(_)}const b=f.getFormat(),x=f.getStyle();if(l!==c||b===s&&x===i){if(D$e(f)){const _=an(t);return _.setFormat(s),_.setStyle(i),_.select(),void f.replace(_)}}else{if(f.getTextContent()!==""){const _=an(t);if(_.setFormat(s),_.setStyle(i),_.select(),l===0)f.insertBefore(_,!1);else{const[j]=f.splitText(l);j.insertAfter(_,!1)}return void(_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}f.setFormat(s),f.setStyle(i)}const w=c-l;f=f.spliceText(l,w,t,!0),f.getTextContent()===""?f.remove():this.anchor.type==="text"&&(f.isComposing()?this.anchor.offset-=t.length:(this.format=b,this.style=x))}else{const b=new Set([...f.getParentKeys(),...m.getParentKeys()]),x=ie(f)?f:f.getParentOrThrow();let w=ie(m)?m:m.getParentOrThrow(),_=m;if(!x.is(w)&&w.isInline())do _=w,w=w.getParentOrThrow();while(w.isInline());if(a.type==="text"&&(c!==0||m.getTextContent()==="")||a.type==="element"&&m.getIndexWithinParent()<c)if(ve(m)&&!m.isToken()&&c!==m.getTextContentSize()){if(m.isSegmented()){const E=an(m.getTextContent());m.replace(E),m=E}fn(a.getNode())||a.type!=="text"||(m=m.spliceText(0,c,"")),b.add(m.__key)}else{const E=m.getParentOrThrow();E.canBeEmpty()||E.getChildrenSize()!==1?m.remove():E.remove()}else b.add(m.__key);const j=w.getChildren(),k=new Set(u),N=x.is(w),C=x.isInline()&&f.getNextSibling()===null?x:f;for(let E=j.length-1;E>=0;E--){const T=j[E];if(T.is(f)||ie(T)&&T.isParentOf(f))break;T.isAttached()&&(!k.has(T)||T.is(_)?N||C.insertAfter(T,!1):T.remove())}if(!N){let E=w,T=null;for(;E!==null;){const P=E.getChildren(),O=P.length;(O===0||P[O-1].is(T))&&(b.delete(E.__key),T=E),E=E.getParent()}}if(f.isToken())if(l===p)f.select();else{const E=an(t);E.select(),f.replace(E)}else f=f.spliceText(l,p-l,t,!0),f.getTextContent()===""?f.remove():f.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let E=1;E<h;E++){const T=u[E],P=T.__key;b.has(P)||T.remove()}}}removeText(){this.insertText("")}formatText(t){if(this.isCollapsed())return this.toggleFormat(t),void Jr(null);const r=this.getNodes(),n=[];for(const w of r)ve(w)&&n.push(w);const s=n.length;if(s===0)return this.toggleFormat(t),void Jr(null);const i=this.anchor,o=this.focus,a=this.isBackward(),l=a?o:i,c=a?i:o;let u=0,h=n[0],f=l.type==="element"?0:l.offset;if(l.type==="text"&&f===h.getTextContentSize()&&(u=1,h=n[1],f=0),h==null)return;const p=h.getFormatFlags(t,null),y=s-1;let m=n[y];const b=c.type==="text"?c.offset:m.getTextContentSize();if(h.is(m)){if(f===b)return;if(td(h)||f===0&&b===h.getTextContentSize())h.setFormat(p);else{const w=h.splitText(f,b),_=f===0?w[0]:w[1];_.setFormat(p),l.type==="text"&&l.set(_.__key,0,"text"),c.type==="text"&&c.set(_.__key,b-f,"text")}return void(this.format=p)}f===0||td(h)||([,h]=h.splitText(f),f=0),h.setFormat(p);const x=m.getFormatFlags(t,p);b>0&&(b===m.getTextContentSize()||td(m)||([m]=m.splitText(b)),m.setFormat(x));for(let w=u+1;w<y;w++){const _=n[w],j=_.getFormatFlags(t,x);_.setFormat(j)}l.type==="text"&&l.set(h.__key,f,"text"),c.type==="text"&&c.set(m.__key,b,"text"),this.format=p|x}insertNodes(t){if(t.length===0)return;if(this.anchor.key==="root"){this.insertParagraph();const y=Me();return me(y)||we(134),y.insertNodes(t)}const r=aj((this.isBackward()?this.focus:this.anchor).getNode(),rd),n=t[t.length-1];if("__language"in r&&ie(r)){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const y=fj(this);r.splice(y,0,t),n.selectEnd()}return}if(!t.some(y=>(ie(y)||Rt(y))&&!y.isInline())){ie(r)||we(135);const y=fj(this);return r.splice(y,0,t),void n.selectEnd()}const s=function(y){const m=to();let b=null;for(let x=0;x<y.length;x++){const w=y[x],_=Np(w);if(_||Rt(w)&&w.isInline()||ie(w)&&w.isInline()||ve(w)||w.isParentRequired()){if(b===null&&(b=w.createParentElementNode(),m.append(b),_))continue;b!==null&&b.append(w)}else m.append(w),b=null}return m}(t),i=s.getLastDescendant(),o=s.getChildren(),a=y=>"__value"in y&&"__checked"in y,l=!ie(r)||!r.isEmpty()?this.insertParagraph():null,c=o[o.length-1];let u=o[0];var h;ie(h=u)&&rd(h)&&!h.isEmpty()&&ie(r)&&(!r.isEmpty()||a(r))&&(ie(r)||we(135),r.append(...u.getChildren()),u=o[1]),u&&function(y,m,b){const x=m.getParentOrThrow().getLastChild();let w=m;const _=[m];for(;w!==x;)w.getNextSibling()||we(140),w=w.getNextSibling(),_.push(w);let j=y;for(const k of _)j=j.insertAfter(k)}(r,u);const f=aj(i,rd);l&&ie(f)&&(a(l)||rd(c))&&(f.append(...l.getChildren()),l.remove()),ie(r)&&r.isEmpty()&&r.remove(),i.selectEnd();const p=ie(r)?r.getLastChild():null;Np(p)&&f!==r&&p.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=to();return xr().splice(this.anchor.offset,0,[o]),o.select(),o}const t=fj(this),r=aj(this.anchor.getNode(),rd);ie(r)||we(136);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],i=r.insertNewAfter(this,!1);return i?(i.append(...s),i.selectStart(),i):null}insertLineBreak(t){const r=gh();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,i=this.focus;let o=t[0],a=t[n];const[l,c]=PS(this);if(r===0)return[];if(r===1){if(ve(o)&&!this.isCollapsed()){const h=l>c?c:l,f=l>c?l:c,p=o.splitText(h,f),y=h===0?p[0]:p[1];return y!=null?[y]:[]}return[o]}const u=s.isBefore(i);if(ve(o)){const h=u?l:c;h===o.getTextContentSize()?t.shift():h!==0&&([,o]=o.splitText(h),t[0]=o)}if(ve(a)){const h=a.getTextContent().length,f=u?c:l;f===0?t.pop():f!==h&&([a]=a.splitText(f),t[n]=a)}return t}modify(t,r,n){const s=this.focus,i=this.anchor,o=t==="move",a=fm(s,r);if(Rt(a)&&!a.isIsolated()){if(o&&a.isKeyboardSelectable()){const p=PL();return p.add(a.__key),void ao(p)}const f=r?a.getPreviousSibling():a.getNextSibling();if(ve(f)){const p=f.__key,y=r?f.getTextContent().length:0;return s.set(p,y,"text"),void(o&&i.set(p,y,"text"))}{const p=a.getParentOrThrow();let y,m;return ie(f)?(m=f.__key,y=r?f.getChildrenSize():0):(y=a.getIndexWithinParent(),m=p.__key,r||y++),s.set(m,y,"element"),void(o&&i.set(m,y,"element"))}}const l=lr(),c=lo(l._window);if(!c)return;const u=l._blockCursorElement,h=l._rootElement;if(h===null||u===null||!ie(a)||a.isInline()||a.canBeEmpty()||LA(u,l,h),function(f,p,y,m){f.modify(p,y,m)}(c,t,r?"backward":"forward",n),c.rangeCount>0){const f=c.getRangeAt(0),p=this.anchor.getNode(),y=fn(p)?p:w$e(p);if(this.applyDOMRange(f),this.dirty=!0,!o){const m=this.getNodes(),b=[];let x=!1;for(let w=0;w<m.length;w++){const _=m[w];xS(_,y)?b.push(_):x=!0}if(x&&b.length>0)if(r){const w=b[0];ie(w)?w.selectStart():w.getParentOrThrow().selectStart()}else{const w=b[b.length-1];ie(w)?w.selectEnd():w.getParentOrThrow().selectEnd()}c.anchorNode===f.startContainer&&c.anchorOffset===f.startOffset||function(w){const _=w.focus,j=w.anchor,k=j.key,N=j.offset,C=j.type;Ba(j,_.key,_.offset,_.type),Ba(_,k,N,C),w._cachedNodes=null}(this)}}}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&ie(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),i=r.getNextSibling()||(s===null?null:s.getNextSibling());if(ie(i)&&i.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const i=this.focus,o=fm(i,t);if(Rt(o)&&!o.isIsolated()){if(o.isKeyboardSelectable()&&ie(s)&&s.getChildrenSize()===0){s.remove();const a=PL();a.add(o.__key),ao(a)}else o.remove(),lr().dispatchCommand(gA,void 0);return}if(!t&&ie(o)&&ie(s)&&s.isEmpty())return s.remove(),void o.selectStart();if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&(n.type==="element"?n.getNode():n.getNode().getParentOrThrow()).collapseAtStart(this))return}else{const a=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,a!==null&&a.isSegmented()){const l=i.offset,c=a.getTextContentSize();if(a.is(s)||t&&l!==c||!t&&l!==0)return void TL(a,t,l)}else if(s!==null&&s.isSegmented()){const l=n.offset,c=s.getTextContentSize();if(s.is(a)||t&&l!==0||!t&&l!==c)return void TL(s,t,l)}(function(l,c){const u=l.anchor,h=l.focus,f=u.getNode(),p=h.getNode();if(f===p&&u.type==="text"&&h.type==="text"){const y=u.offset,m=h.offset,b=y<m,x=b?y:m,w=b?m:y,_=w-1;x!==_&&(SH(f.getTextContent().slice(x,w))||(c?h.offset=_:u.offset=_))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&fn(n.getParent())&&n.getIndexWithinParent()===0&&n.collapseAtStart(this)}}deleteLine(t){if(this.isCollapsed()){const r=this.anchor.type==="element";if(r&&this.insertText(" "),this.modify("extend",t,"lineboundary"),(t?this.focus:this.anchor).offset===0&&this.modify("extend",t,"character"),r){const n=t?this.anchor:this.focus;n.set(n.key,n.offset+1,n.type)}}this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function ci(e){return e instanceof Mw}function CL(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function PS(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[CL(r),CL(n)]}function TL(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),i=s.length;let o=0,a=0;for(let c=0;c<i;c++){const u=c===i-1;if(a=o,o+=s[c].length,t&&o===r||o>r||u){s.splice(c,1),u&&(a=void 0);break}}const l=s.join("").trim();l===""?n.remove():(n.setTextContent(l),n.select(a,a))}function AL(e,t,r,n){let s,i=t;if(e.nodeType===ng){let o=!1;const a=e.childNodes,l=a.length,c=n._blockCursorElement;i===l&&(o=!0,i=l-1);let u=a[i],h=!1;if(u===c)u=a[i+1],h=!0;else if(c!==null){const f=c.parentNode;e===f&&t>Array.prototype.indexOf.call(f.children,c)&&i--}if(s=pd(u),ve(s))i=hL(s,o);else{let f=pd(e);if(f===null)return null;if(ie(f)){i=Math.min(f.getChildrenSize(),i);let p=f.getChildAtIndex(i);if(ie(p)&&function(y,m,b){const x=y.getParent();return b===null||x===null||!x.canBeEmpty()||x!==b.getNode()}(p,0,r)){const y=o?p.getLastDescendant():p.getFirstDescendant();y===null?f=p:(p=y,f=ie(p)?p:p.getParentOrThrow()),i=0}ve(p)?(s=p,f=null,i=hL(p,o)):p!==f&&o&&!h&&i++}else{const p=f.getIndexWithinParent();i=t===0&&Rt(f)&&pd(e)===f?p:p+1,f=f.getParentOrThrow()}if(ie(f))return co(f.__key,i,"element")}}else s=pd(e);return ve(s)?co(s.__key,i,"text"):null}function OL(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const i=s.getPreviousSibling(),o=s.getParent();if(t){if((r||!t)&&i===null&&ie(o)&&o.isInline()){const a=o.getPreviousSibling();ve(a)&&(e.key=a.__key,e.offset=a.getTextContent().length)}}else ie(i)&&!r&&i.isInline()?(e.key=i.__key,e.offset=i.getChildrenSize(),e.type="element"):ve(i)&&(e.key=i.__key,e.offset=i.getTextContent().length)}else if(n===s.getTextContent().length){const i=s.getNextSibling(),o=s.getParent();if(t&&ie(i)&&i.isInline())e.key=i.__key,e.offset=0,e.type="element";else if((r||t)&&i===null&&ie(o)&&o.isInline()&&!o.canInsertTextAfter()){const a=o.getNextSibling();ve(a)&&(e.key=a.__key,e.offset=0)}}}function HH(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);OL(e,n,s),OL(t,!n,s),s&&(t.key=e.key,t.offset=e.offset,t.type=e.type);const i=lr();if(i.isComposing()&&i._compositionKey!==e.key&&me(r)){const o=r.anchor,a=r.focus;Ba(e,o.key,o.offset,o.type),Ba(t,a.key,a.offset,a.type)}}}function KH(e,t,r,n,s,i){if(e===null||r===null||!sg(s,e,r))return null;const o=AL(e,t,me(i)?i.anchor:null,s);if(o===null)return null;const a=AL(r,n,me(i)?i.focus:null,s);if(a===null)return null;if(o.type==="element"&&a.type==="element"){const l=pd(e),c=pd(r);if(Rt(l)&&Rt(c))return null}return HH(o,a,i),[o,a]}function RS(e){return ie(e)&&!e.isInline()}function ZH(e,t,r,n,s,i){const o=wa(),a=new ql(co(e,t,s),co(r,n,i),0,"");return a.dirty=!0,o._selection=a,a}function M$e(){const e=co("root",0,"element"),t=co("root",0,"element");return new ql(e,t,0,"")}function PL(){return new Mw(new Set)}function FA(e,t,r,n){const s=r._window;if(s===null)return null;const i=n||s.event,o=i?i.type:void 0,a=o==="selectionchange",l=!vS&&(a||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&i&&i.detail===3||o==="drop"||o===void 0);let c,u,h,f;if(me(e)&&!l)return e.clone();if(t===null)return null;if(c=t.anchorNode,u=t.focusNode,h=t.anchorOffset,f=t.focusOffset,a&&me(e)&&!sg(r,c,u))return e.clone();const p=KH(c,h,u,f,r,e);if(p===null)return null;const[y,m]=p;return new ql(y,m,me(e)?e.format:0,me(e)?e.style:"")}function Me(){return wa()._selection}function lg(){return lr()._editorState._selection}function Db(e,t,r,n=1){const s=e.anchor,i=e.focus,o=s.getNode(),a=i.getNode();if(!t.is(o)&&!t.is(a))return;const l=t.__key;if(e.isCollapsed()){const c=s.offset;if(r<=c&&n>0||r<c&&n<0){const u=Math.max(0,c+n);s.set(l,u,"element"),i.set(l,u,"element"),RL(e)}}else{const c=e.isBackward(),u=c?i:s,h=u.getNode(),f=c?s:i,p=f.getNode();if(t.is(h)){const y=u.offset;(r<=y&&n>0||r<y&&n<0)&&u.set(l,Math.max(0,y+n),"element")}if(t.is(p)){const y=f.offset;(r<=y&&n>0||r<y&&n<0)&&f.set(l,Math.max(0,y+n),"element")}}RL(e)}function RL(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,i=t.getNode(),o=n.getNode();if(e.isCollapsed()){if(!ie(i))return;const a=i.getChildrenSize(),l=r>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(r);if(ve(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,"text"),n.set(c.__key,u,"text")}}else{if(ie(i)){const a=i.getChildrenSize(),l=r>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(r);if(ve(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,"text")}}if(ie(o)){const a=o.getChildrenSize(),l=s>=a,c=l?o.getChildAtIndex(a-1):o.getChildAtIndex(s);if(ve(c)){let u=0;l&&(u=c.getTextContentSize()),n.set(c.__key,u,"text")}}}}function Lb(e,t,r,n,s){let i=null,o=0,a=null;n!==null?(i=n.__key,ve(n)?(o=n.getTextContentSize(),a="text"):ie(n)&&(o=n.getChildrenSize(),a="element")):s!==null&&(i=s.__key,ve(s)?a="text":ie(s)&&(a="element")),i!==null&&a!==null?e.set(i,o,a):(o=t.getIndexWithinParent(),o===-1&&(o=r.getChildrenSize()),e.set(r.__key,o,"element"))}function IL(e,t,r,n,s){e.type==="text"?(e.key=r,t||(e.offset+=s)):e.offset>n.getIndexWithinParent()&&(e.offset-=1)}function z$e(e,t,r,n,s,i,o){const a=n.anchorNode,l=n.focusNode,c=n.anchorOffset,u=n.focusOffset,h=document.activeElement;if(s.has("collaboration")&&h!==i||h!==null&&OA(h))return;if(!me(t))return void(e!==null&&sg(r,a,l)&&n.removeAllRanges());const f=t.anchor,p=t.focus,y=f.key,m=p.key,b=Ab(r,y),x=Ab(r,m),w=f.offset,_=p.offset,j=t.format,k=t.style,N=t.isCollapsed();let C=b,E=x,T=!1;if(f.type==="text"){C=Cb(b);const $=f.getNode();T=$.getFormat()!==j||$.getStyle()!==k}else me(e)&&e.anchor.type==="text"&&(T=!0);var P,O,I,R,F;if(p.type==="text"&&(E=Cb(x)),C!==null&&E!==null&&(N&&(e===null||T||me(e)&&(e.format!==j||e.style!==k))&&(P=j,O=k,I=w,R=y,F=performance.now(),FH=[P,O,I,R,F]),c!==w||u!==_||a!==C||l!==E||n.type==="Range"&&N||(h!==null&&i.contains(h)||i.focus({preventScroll:!0}),f.type==="element"))){try{n.setBaseAndExtent(C,w,E,_)}catch{}if(!s.has("skip-scroll-into-view")&&t.isCollapsed()&&i!==null&&i===document.activeElement){const $=t instanceof ql&&t.anchor.type==="element"?C.childNodes[w]||null:n.rangeCount>0?n.getRangeAt(0):null;if($!==null){let W;if($ instanceof Text){const q=document.createRange();q.selectNode($),W=q.getBoundingClientRect()}else W=$.getBoundingClientRect();(function(q,K,Z){const z=Z.ownerDocument,J=z.defaultView;if(J===null)return;let{top:te,bottom:be}=K,H=0,G=0,fe=Z;for(;fe!==null;){const pe=fe===z.body;if(pe)H=0,G=Pw(q).innerHeight;else{const V=fe.getBoundingClientRect();H=V.top,G=V.bottom}let ke=0;if(te<H?ke=-(H-te):be>G&&(ke=be-G),ke!==0)if(pe)J.scrollBy(0,ke);else{const V=fe.scrollTop;fe.scrollTop+=ke;const X=fe.scrollTop-V;te-=X,be-=X}if(pe)break;fe=Ow(fe)}})(r,W,i)}}TS=!0}}function F$e(e){let t=Me()||lg();t===null&&(t=xr().selectEnd()),t.insertNodes(e)}function fj(e){let t=e;e.isCollapsed()||t.removeText();const r=Me();me(r)&&(t=r),me(t)||we(161);const n=t.anchor;let s=n.getNode(),i=n.offset;for(;!rd(s);)[s,i]=$$e(s,i);return i}function $$e(e,t){const r=e.getParent();if(!r){const s=to();return xr().append(s),s.select(),[xr(),0]}if(ve(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const i=t===0?0:1;return[r,s[0].getIndexWithinParent()+i]}if(!ie(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new ql(co(e.__key,t,"element"),co(e.__key,t,"element"),0,""),i=e.insertNewAfter(s);i&&i.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}let qr=null,Br=null,Wn=!1,pj=!1,Jy=0;const DL={characterData:!0,childList:!0,subtree:!0};function cg(){return Wn||qr!==null&&qr._readOnly}function qn(){Wn&&we(13)}function GH(){Jy>99&&we(14)}function wa(){return qr===null&&we(15),qr}function lr(){return Br===null&&we(16),Br}function U$e(){return Br}function LL(e,t,r){const n=t.__type,s=function(a,l){const c=a._nodes.get(l);return c===void 0&&we(30,l),c}(e,n);let i=r.get(n);i===void 0&&(i=Array.from(s.transforms),r.set(n,i));const o=i.length;for(let a=0;a<o&&(i[a](t),t.isAttached());a++);}function ML(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function q$e(e){return $A(e,lr()._nodes)}function $A(e,t){const r=e.type,n=t.get(r);n===void 0&&we(17,r);const s=n.klass;e.type!==s.getType()&&we(18,s.name);const i=s.importJSON(e),o=e.children;if(ie(i)&&Array.isArray(o))for(let a=0;a<o.length;a++){const l=$A(o[a],t);i.append(l)}return i}function zL(e,t){const r=qr,n=Wn,s=Br;qr=e,Wn=!0,Br=null;try{return t()}finally{qr=r,Wn=n,Br=s}}function Fc(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const i=e._editorState,o=i._selection,a=r._selection,l=e._dirtyType!==Qc,c=qr,u=Wn,h=Br,f=e._updating,p=e._observer;let y=null;if(e._pendingEditorState=null,e._editorState=r,!s&&l&&p!==null){Br=e,qr=r,Wn=!1,e._updating=!0;try{const N=e._dirtyType,C=e._dirtyElements,E=e._dirtyLeaves;p.disconnect(),y=E$e(i,r,e,N,C,E)}catch(N){if(N instanceof Error&&e._onError(N),pj)throw N;return QH(e,null,n,r),xH(e),e._dirtyType=mh,pj=!0,Fc(e,i),void(pj=!1)}finally{p.observe(n,DL),e._updating=f,qr=c,Wn=u,Br=h}}r._readOnly||(r._readOnly=!0);const m=e._dirtyLeaves,b=e._dirtyElements,x=e._normalizedNodes,w=e._updateTags,_=e._deferred;l&&(e._dirtyType=Qc,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(N,C){const E=N._decorators;let T=N._pendingDecorators||E;const P=C._nodeMap;let O;for(O in T)P.has(O)||(T===E&&(T=kH(N)),delete T[O])}(e,r);const j=s?null:lo(e._window);if(e._editable&&j!==null&&(l||a===null||a.dirty)){Br=e,qr=r;try{if(p!==null&&p.disconnect(),l||a===null||a.dirty){const N=e._blockCursorElement;N!==null&&LA(N,e,n),z$e(o,a,e,j,w,n)}_$e(e,n,a),p!==null&&p.observe(n,DL)}finally{Br=h,qr=c}}y!==null&&function(N,C,E,T,P){const O=Array.from(N._listeners.mutation),I=O.length;for(let R=0;R<I;R++){const[F,$]=O[R],W=C.get($);W!==void 0&&F(W,{dirtyLeaves:T,prevEditorState:P,updateTags:E})}}(e,y,w,m,i),me(a)||a===null||o!==null&&o.is(a)||e.dispatchCommand(gA,void 0);const k=e._pendingDecorators;k!==null&&(e._decorators=k,e._pendingDecorators=null,Sp("decorator",e,!0,k)),function(N,C,E){const T=dL(C),P=dL(E);T!==P&&Sp("textcontent",N,!0,P)}(e,t||i,r),Sp("update",e,!0,{dirtyElements:b,dirtyLeaves:m,editorState:r,normalizedNodes:x,prevEditorState:t||i,tags:w}),function(N,C){if(N._deferred=[],C.length!==0){const E=N._updating;N._updating=!0;try{for(let T=0;T<C.length;T++)C[T]()}finally{N._updating=E}}}(e,_),function(N){const C=N._updates;if(C.length!==0){const E=C.shift();if(E){const[T,P]=E;JH(N,T,P)}}}(e)}function Sp(e,t,r,...n){const s=t._updating;t._updating=r;try{const i=Array.from(t._listeners[e]);for(let o=0;o<i.length;o++)i[o].apply(null,n)}finally{t._updating=s}}function YH(e,t,r){if(e._updating===!1||Br!==e){let s=!1;return e.update(()=>{s=YH(e,t,r)}),s}const n=PA(e);for(let s=4;s>=0;s--)for(let i=0;i<n.length;i++){const o=n[i]._commands.get(t);if(o!==void 0){const a=o[s];if(a!==void 0){const l=Array.from(a),c=l.length;for(let u=0;u<c;u++)if(l[u](r,e)===!0)return!0}}}return!1}function FL(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[i,o]=s;let a,l;o!==void 0&&(a=o.onUpdate,l=o.tag,o.skipTransforms&&(n=!0),a&&e._deferred.push(a),l&&e._updateTags.add(l)),i()}}return n}function JH(e,t,r){const n=e._updateTags;let s,i,o=!1,a=!1;r!==void 0&&(s=r.onUpdate,i=r.tag,i!=null&&n.add(i),o=r.skipTransforms||!1,a=r.discrete||!1),s&&e._deferred.push(s);const l=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=new Fw(new Map((c||l)._nodeMap)),u=!0),c._flushSync=a;const h=qr,f=Wn,p=Br,y=e._updating;qr=c,Wn=!1,e._updating=!0,Br=e;try{u&&(e._headless?l._selection!==null&&(c._selection=l._selection.clone()):c._selection=function(x){const w=x.getEditorState()._selection,_=lo(x._window);return me(w)||w==null?FA(w,_,x,null):w.clone()}(e));const m=e._compositionKey;t(),o=FL(e,o),function(x,w){const _=w.getEditorState()._selection,j=x._selection;if(me(j)){const k=j.anchor,N=j.focus;let C;if(k.type==="text"&&(C=k.getNode(),C.selectionTransform(_,j)),N.type==="text"){const E=N.getNode();C!==E&&E.selectionTransform(_,j)}}}(c,e),e._dirtyType!==Qc&&(o?function(x,w){const _=w._dirtyLeaves,j=x._nodeMap;for(const k of _){const N=j.get(k);ve(N)&&N.isAttached()&&N.isSimpleText()&&!N.isUnmergeable()&&cL(N)}}(c,e):function(x,w){const _=w._dirtyLeaves,j=w._dirtyElements,k=x._nodeMap,N=al(),C=new Map;let E=_,T=E.size,P=j,O=P.size;for(;T>0||O>0;){if(T>0){w._dirtyLeaves=new Set;for(const I of E){const R=k.get(I);ve(R)&&R.isAttached()&&R.isSimpleText()&&!R.isUnmergeable()&&cL(R),R!==void 0&&ML(R,N)&&LL(w,R,C),_.add(I)}if(E=w._dirtyLeaves,T=E.size,T>0){Jy++;continue}}w._dirtyLeaves=new Set,w._dirtyElements=new Map;for(const I of P){const R=I[0],F=I[1];if(R!=="root"&&!F)continue;const $=k.get(R);$!==void 0&&ML($,N)&&LL(w,$,C),j.set(R,F)}E=w._dirtyLeaves,T=E.size,P=w._dirtyElements,O=P.size,Jy++}w._dirtyLeaves=_,w._dirtyElements=j}(c,e),FL(e),function(x,w,_,j){const k=x._nodeMap,N=w._nodeMap,C=[];for(const[E]of j){const T=N.get(E);T!==void 0&&(T.isAttached()||(ie(T)&&AH(T,E,k,N,C,j),k.has(E)||j.delete(E),C.push(E)))}for(const E of C)N.delete(E);for(const E of _){const T=N.get(E);T===void 0||T.isAttached()||(k.has(E)||_.delete(E),N.delete(E))}}(l,c,e._dirtyLeaves,e._dirtyElements)),m!==e._compositionKey&&(c._flushSync=!0);const b=c._selection;if(me(b)){const x=c._nodeMap,w=b.anchor.key,_=b.focus.key;x.get(w)!==void 0&&x.get(_)!==void 0||we(19)}else ci(b)&&b._nodes.size===0&&(c._selection=null)}catch(m){return m instanceof Error&&e._onError(m),e._pendingEditorState=l,e._dirtyType=mh,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Fc(e)}finally{qr=h,Wn=f,Br=p,e._updating=y,Jy=0}e._dirtyType!==Qc||function(m,b){const x=b.getEditorState()._selection,w=m._selection;if(w!==null){if(w.dirty||!w.is(x))return!0}else if(x!==null)return!0;return!1}(c,e)?c._flushSync?(c._flushSync=!1,Fc(e)):u&&g$e(()=>{Fc(e)}):(c._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function ns(e,t,r){e._updating?e._updates.push([t,r]):JH(e,t,r)}class zw extends Lw{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__indent=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return a$e[t]||""}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=lr()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(ve(r)&&t.push(r),ie(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;ie(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;ie(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const i=r[n-1];return ie(i)&&i.getLastDescendant()||i||null}const s=r[t];return ie(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:Nn(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&we(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:Nn(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&we(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const i=r[s];t+=i.getTextContent(),ie(i)&&s!==n-1&&!i.isInline()&&(t+=ha)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const i=r[s];t+=i.getTextContentSize(),ie(i)&&s!==n-1&&!i.isInline()&&(t+=ha.length)}return t}getDirection(){return this.getLatest().__dir}hasFormat(t){if(t!==""){const r=oL[t];return!!(this.getFormat()&r)}return!1}select(t,r){qn();const n=Me();let s=t,i=r;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const l=this.getFirstChild();if(ve(l)||ie(l))return l.select(0,0)}else if(!(t!==void 0&&t!==o||r!==void 0&&r!==o)){const l=this.getLastChild();if(ve(l)||ie(l))return l.select()}}s===void 0&&(s=o),i===void 0&&(i=o);const a=this.__key;return me(n)?(n.anchor.set(a,s,"element"),n.focus.set(a,i,"element"),n.dirty=!0,n):ZH(a,s,a,i,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(r=>r.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?oL[t]:0,this}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,i=this.getChildrenSize(),o=this.getWritable(),a=o.__key,l=[],c=[],u=this.getChildAtIndex(t+r);let h=null,f=i-r+s;if(t!==0)if(t===i)h=this.getLastChild();else{const y=this.getChildAtIndex(t);y!==null&&(h=y.getPreviousSibling())}if(r>0){let y=h===null?this.getFirstChild():h.getNextSibling();for(let m=0;m<r;m++){y===null&&we(100);const b=y.getNextSibling(),x=y.__key;zc(y.getWritable()),c.push(x),y=b}}let p=h;for(let y=0;y<s;y++){const m=n[y];p!==null&&m.is(p)&&(h=p=p.getPreviousSibling());const b=m.getWritable();b.__parent===a&&f--,zc(b);const x=m.__key;if(p===null)o.__first=x,b.__prev=null;else{const w=p.getWritable();w.__next=x,b.__prev=w.__key}m.__key===a&&we(76),b.__parent=a,l.push(x),p=m}if(t+r===i)p!==null&&(p.getWritable().__next=null,o.__last=p.__key);else if(u!==null){const y=u.getWritable();if(p!==null){const m=p.getWritable();y.__prev=p.__key,m.__next=u.__key}else y.__prev=null}if(o.__size=f,c.length){const y=Me();if(me(y)){const m=new Set(c),b=new Set(l),{anchor:x,focus:w}=y;$L(x,m,b)&&Lb(x,x.getNode(),this,h,u),$L(w,m,b)&&Lb(w,w.getNode(),this,h,u),f!==0||this.canBeEmpty()||Xh(this)||this.remove()}}return o}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}}function ie(e){return e instanceof zw}function $L(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}class B$e extends Lw{constructor(t){super(t)}decorate(t,r){we(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Rt(e){return e instanceof B$e}class ug extends zw{static getType(){return"root"}static clone(){return new ug}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){we(51)}getTextContent(){const t=this.__cachedText;return!cg()&&lr()._dirtyType!==Qc||t===null?super.getTextContent():t}remove(){we(52)}replace(t){we(53)}insertBefore(t){we(54)}insertAfter(t){we(55)}updateDOM(t,r){return!1}append(...t){for(let r=0;r<t.length;r++){const n=t[r];ie(n)||Rt(n)||we(56)}return super.append(...t)}static importJSON(t){const r=xr();return r.setFormat(t.format),r.setIndent(t.indent),r.setDirection(t.direction),r}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function fn(e){return e instanceof ug}function UA(){return new Fw(new Map([["root",new ug]]))}function XH(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&we(130,r.name),ie(e)){const n=t.children;Array.isArray(n)||we(59,r.name);const s=e.getChildren();for(let i=0;i<s.length;i++){const o=XH(s[i]);n.push(o)}}return t}class Fw{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t){return zL(this,t)}clone(t){const r=new Fw(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return zL(this,()=>({root:XH(xr())}))}}class qA extends zw{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class ef extends zw{constructor(t){super(t),this.__textFormat=0}static getType(){return"paragraph"}getTextFormat(){return this.getLatest().__textFormat}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}hasTextFormat(t){const r=eu[t];return!!(this.getTextFormat()&r)}static clone(t){return new ef(t.__key)}createDOM(t){const r=document.createElement("p"),n=_p(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:V$e,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(r&&MA(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();r.style.textAlign=n;const s=this.getDirection();s&&(r.dir=s);const i=this.getIndent();i>0&&(r.style.textIndent=20*i+"px")}return{element:r}}static importJSON(t){const r=to();return r.setFormat(t.format),r.setIndent(t.indent),r.setDirection(t.direction),r.setTextFormat(t.textFormat),r}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),type:"paragraph",version:1}}insertNewAfter(t,r){const n=to();n.setTextFormat(t.format);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||ve(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function V$e(e){const t=to();if(e.style){t.setFormat(e.style.textAlign);const r=parseInt(e.style.textIndent,10)/20;r>0&&t.setIndent(r)}return{node:t}}function to(){return Rw(new ef)}function yh(e){return e instanceof ef}const dt=0,W$e=4;function QH(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=UA(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=Qc,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const i=e._observer;i!==null&&(i.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function H$e(e){const t=e||{},r=U$e(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,i=t.disableEvents||!1,o=UA(),a=t.namespace||(s!==null?s._config.namespace:EH()),l=t.editorState,c=[ug,Qh,ig,og,ef,qA,...t.nodes||[]],{onError:u,html:h}=t,f=t.editable===void 0||t.editable;let p;if(e===void 0&&r!==null)p=r._nodes;else{p=new Map;for(let m=0;m<c.length;m++){let b=c[m],x=null,w=null;if(typeof b!="function"){const N=b;b=N.replace,x=N.with,w=N.withKlass||null}const _=b.getType(),j=b.transform(),k=new Set;j!==null&&k.add(j),p.set(_,{exportDOM:h&&h.export?h.export.get(b):void 0,klass:b,replace:x,replaceWithKlass:w,transforms:k})}}const y=new K$e(o,s,p,{disableEvents:i,namespace:a,theme:n},u||console.error,function(m,b){const x=new Map,w=new Set,_=j=>{Object.keys(j).forEach(k=>{let N=x.get(k);N===void 0&&(N=[],x.set(k,N)),N.push(j[k])})};return m.forEach(j=>{const k=j.klass.importDOM;if(k==null||w.has(k))return;w.add(k);const N=k.call(j.klass);N!==null&&_(N)}),b&&_(b),x}(p,h?h.import:void 0),f);return l!==void 0&&(y._pendingEditorState=l,y._dirtyType=mh),y}class K$e{constructor(t,r,n,s,i,o,a){this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=Qc,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=EH(),this._onError=i,this._htmlConversions=o,this._editable=a,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&we(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const i=s.get(t);i===void 0&&we(36,String(t));const o=i[n];return o.add(r),()=>{o.delete(r),i.every(a=>a.size===0)&&s.delete(t)}}registerMutationListener(t,r){let n=this._nodes.get(t.getType());n===void 0&&we(37,t.name);let s=t,i=null;for(;i=n.replaceWithKlass;)s=i,n=this._nodes.get(i.getType()),n===void 0&&we(37,i.name);const o=this._listeners.mutation;return o.set(r,s),()=>{o.delete(r)}}registerNodeTransformToKlass(t,r){const n=t.getType(),s=this._nodes.get(n);return s===void 0&&we(37,t.name),s.transforms.add(r),s}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],i=n.replaceWithKlass;if(i!=null){const l=this.registerNodeTransformToKlass(i,r);s.push(l)}var o,a;return o=this,a=t.getType(),ns(o,()=>{const l=wa();if(l.isEmpty())return;if(a==="root")return void xr().markDirty();const c=l._nodeMap;for(const[,u]of c)u.markDirty()},o._pendingEditorState===null?{tag:"history-merge"}:void 0),()=>{s.forEach(l=>l.transforms.delete(r))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return Ne(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=_p(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,QH(this,r,t,s),r!==null&&(this._config.disableEvents||C$e(r),n!=null&&r.classList.remove(...n)),t!==null){const i=function(a){const l=a.ownerDocument;return l&&l.defaultView||null}(t),o=t.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=i,this._dirtyType=mh,xH(this),this._updateTags.add("history-merge"),Fc(this),this._config.disableEvents||function(a,l){const c=a.ownerDocument,u=Ib.get(c);(u===void 0||u<1)&&c.addEventListener("selectionchange",BH),Ib.set(c,(u||0)+1),a.__lexicalEditor=l;const h=qH(a);for(let f=0;f<CS.length;f++){const[p,y]=CS[f],m=typeof y=="function"?b=>{_L(b)||(wL(b),(l.isEditable()||p==="click")&&y(b,l))}:b=>{if(_L(b))return;wL(b);const x=l.isEditable();switch(p){case"cut":return x&&Ne(l,xA,b);case"copy":return Ne(l,Ew,b);case"paste":return x&&Ne(l,yA,b);case"dragstart":return x&&Ne(l,hH,b);case"dragover":return x&&Ne(l,fH,b);case"dragend":return x&&Ne(l,V1e,b);case"focus":return x&&Ne(l,K1e,b);case"blur":return x&&Ne(l,Z1e,b);case"drop":return x&&Ne(l,dH,b)}};a.addEventListener(p,m),h.push(()=>{a.removeEventListener(p,m)})}}(t,this),n!=null&&t.classList.add(...n)}else this._editorState=s,this._pendingEditorState=null,this._window=null;Sp("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&we(38),bH(this);const n=this._pendingEditorState,s=this._updateTags,i=r!==void 0?r.tag:null;n===null||n.isEmpty()||(i!=null&&s.add(i),Fc(this)),this._pendingEditorState=t,this._dirtyType=mh,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&s.add(i),Fc(this)}parseEditorState(t,r){return function(n,s,i){const o=UA(),a=qr,l=Wn,c=Br,u=s._dirtyElements,h=s._dirtyLeaves,f=s._cloneNotNeeded,p=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,qr=o,Wn=!1,Br=s;try{const y=s._nodes;$A(n.root,y),i&&i(),o._readOnly=!0}catch(y){y instanceof Error&&s._onError(y)}finally{s._dirtyElements=u,s._dirtyLeaves=h,s._cloneNotNeeded=f,s._dirtyType=p,qr=a,Wn=l,Br=c}return o}(typeof t=="string"?JSON.parse(t):t,this,r)}update(t,r){ns(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),ns(this,()=>{const s=Me(),i=xr();s!==null?s.dirty=!0:i.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?i.selectStart():i.selectEnd())},{onUpdate:()=>{n.removeAttribute("autocapitalize"),t&&t()},tag:"focus"}),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=lo(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Sp("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}const eK=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Z$e=eK?v.useLayoutEffect:v.useEffect,Cy={tag:"history-merge"};function G$e({initialConfig:e,children:t}){const r=v.useMemo(()=>{const{theme:n,namespace:s,editor__DEPRECATED:i,nodes:o,onError:a,editorState:l,html:c}=e,u=R1e(null,n);let h=i||null;if(h===null){const f=H$e({editable:e.editable,html:c,namespace:s,nodes:o,onError:p=>a(p,f),theme:n});(function(p,y){if(y!==null){if(y===void 0)p.update(()=>{const m=xr();if(m.isEmpty()){const b=to();m.append(b);const x=eK?document.activeElement:null;(Me()!==null||x!==null&&x===p.getRootElement())&&b.select()}},Cy);else if(y!==null)switch(typeof y){case"string":{const m=p.parseEditorState(y);p.setEditorState(m,Cy);break}case"object":p.setEditorState(y,Cy);break;case"function":p.update(()=>{xr().isEmpty()&&y(p)},Cy)}}})(f,l),h=f}return[h,u]},[]);return Z$e(()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)},[]),d.jsx(rH.Provider,{value:r,children:t})}const Y$e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?v.useLayoutEffect:v.useEffect;function J$e(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function X$e(){return function(e){const[t]=Jh(),r=v.useMemo(()=>e(t),[t,e]),n=v.useRef(r.initialValueFn()),[s,i]=v.useState(n.current);return Y$e(()=>{const{initialValueFn:o,subscribe:a}=r,l=o();return n.current!==l&&(n.current=l,i(l)),a(c=>{n.current=c,i(c)})},[r,e]),s}(J$e)}function Q$e(){return xr().getTextContent()}function e8e(e,t=!0){if(e)return!1;let r=Q$e();return t&&(r=r.trim()),r===""}function t8e(e){if(!e8e(e,!1))return!1;const t=xr().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(Rt(s))return!1;if(ie(s)){if(!yh(s)||s.__indent!==0)return!1;const i=s.getChildren(),o=i.length;for(let a=0;a<o;a++){const l=i[n];if(!ve(l))return!1}}}return!0}function r8e(e){return()=>t8e(e)}function n8e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}n8e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function s8e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}s8e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const i8e=new Map;function o8e(e){const t={},r=e.split(";");for(const n of r)if(n!==""){const[s,i]=n.split(/:([^]+)/);s&&i&&(t[s.trim()]=i.trim())}return t}function tK(e){const t=e.constructor.clone(e);return t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,ie(e)&&ie(t)?(n=e,(r=t).__first=n.__first,r.__last=n.__last,r.__size=n.__size,r.__format=n.__format,r.__indent=n.__indent,r.__dir=n.__dir,r):ve(e)&&ve(t)?function(s,i){return s.__format=i.__format,s.__style=i.__style,s.__mode=i.__mode,s.__detail=i.__detail,s}(t,e):yh(e)&&yh(t)?function(s,i){return s.__textFormat=i.__textFormat,s}(t,e):t;var r,n}function rK(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&r!==null){const[n,s]=r,i=e.isBackward(),o=n.getNode(),a=s.getNode(),l=t.is(o),c=t.is(a);if(l||c){const[u,h]=PS(e),f=o.is(a),p=t.is(i?a:o),y=t.is(i?o:a);let m,b=0;return f?(b=u>h?h:u,m=u>h?u:h):p?(b=i?h:u,m=void 0):y&&(b=0,m=i?u:h),t.__text=t.__text.slice(b,m),t}}return t}function a8e(e){const t=e.getStyle(),r=o8e(t);i8e.set(t,r)}function UL(e,t){const r=fm(e.focus,t);return Rt(r)&&!r.isIsolated()||ie(r)&&!r.isInline()&&!r.canBeEmpty()}function l8e(e,t,r,n){e.modify(t?"extend":"move",r,n)}function c8e(e){const t=e.anchor.getNode();return(fn(t)?t:t.getParentOrThrow()).getDirection()==="rtl"}function qL(e,t,r){const n=c8e(e);l8e(e,t,r?!n:n,"character")}function u8e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var d8e=u8e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const nK=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,h8e=nK&&"documentMode"in document?document.documentMode:null;!(!nK||!("InputEvent"in window)||h8e)&&"getTargetRanges"in new window.InputEvent("input");function $w(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function f8e(e){const t=BA(e,r=>ie(r)&&!r.isInline());return ie(t)||d8e(4,e.__key),t}const BA=(e,t)=>{let r=e;for(;r!==xr()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function wc(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function p8e(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const i=n.data;if(typeof i=="string"){let o;try{o=JSON.parse(i)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const a=o.payload;if(a&&a.functionId==="makeChanges"){const l=a.args;if(l){const[c,u,h,f,p,y]=l;e.update(()=>{const m=Me();if(me(m)){const b=m.anchor;let x=b.getNode(),w=0,_=0;if(ve(x)&&c>=0&&u>=0&&(w=c,_=c+u,m.setTextNodeRange(x,w,x,_)),w===_&&h===""||(m.insertRawText(h),x=b.getNode()),ve(x)){w=f,_=f+p;const j=x.getTextContentSize();w=w>j?j:w,_=_>j?j:_,m.setTextNodeRange(x,w,x,_)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function m8e(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let i=0;i<r.length;i++){const o=r[i];if(!iK.has(o.nodeName)){const a=oK(o,e,s,!1);a!==null&&(n=n.concat(a))}}return function(i){for(const o of i)o.getNextSibling()instanceof qA&&o.insertAfter(gh());for(const o of i){const a=o.getChildren();for(const l of a)o.insertBefore(l);o.remove()}}(s),n}function g8e(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=xr().getChildren();for(let s=0;s<n.length;s++)sK(e,n[s],r,t);return r.innerHTML}function sK(e,t,r,n=null){let s=n===null||t.isSelected(n);const i=ie(t)&&t.excludeFromCopy("html");let o=t;if(n!==null){let p=tK(t);p=ve(p)&&n!==null?rK(n,p):p,o=p}const a=ie(o)?o.getChildren():[],l=e._nodes.get(o.getType());let c;c=l&&l.exportDOM!==void 0?l.exportDOM(e,o):o.exportDOM(e);const{element:u,after:h}=c;if(!u)return!1;const f=document.createDocumentFragment();for(let p=0;p<a.length;p++){const y=a[p],m=sK(e,y,f,n);!s&&ie(t)&&m&&t.extractWithChild(y,n,"html")&&(s=!0)}if(s&&!i){if(MA(u)&&u.append(f),r.append(u),h){const p=h.call(o,u);p&&u.replaceWith(p)}}else r.append(f);return s}const iK=new Set(["STYLE","SCRIPT"]);function oK(e,t,r,n,s=new Map,i){let o=[];if(iK.has(e.nodeName))return o;let a=null;const l=function(y,m){const{nodeName:b}=y,x=m._htmlConversions.get(b.toLowerCase());let w=null;if(x!==void 0)for(const _ of x){const j=_(y);j!==null&&(w===null||(w.priority||0)<(j.priority||0))&&(w=j)}return w!==null?w.conversion:null}(e,t),c=l?l(e):null;let u=null;if(c!==null){u=c.after;const y=c.node;if(a=Array.isArray(y)?y[y.length-1]:y,a!==null){for(const[,m]of s)if(a=m(a,i),!a)break;a&&o.push(...Array.isArray(y)?y:[a])}c.forChild!=null&&s.set(e.nodeName,c.forChild)}const h=e.childNodes;let f=[];const p=(a==null||!Xh(a))&&(a!=null&&RS(a)||n);for(let y=0;y<h.length;y++)f.push(...oK(h[y],t,r,p,new Map(s),a));return u!=null&&(f=u(f)),k$e(e)&&(f=y8e(e,f,p?()=>{const y=new qA;return r.push(y),y}:to)),a==null?o=o.concat(f):ie(a)&&a.append(...f),o}function y8e(e,t,r){const n=e.style.textAlign,s=[];let i=[];for(let o=0;o<t.length;o++){const a=t[o];if(RS(a))n&&!a.getFormat()&&a.setFormat(n),s.push(a);else if(i.push(a),o===t.length-1||o<t.length-1&&RS(t[o+1])){const l=r();l.setFormat(n),l.append(...i),s.push(l),i=[]}}return s}function v8e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mb=v8e(function(e){const t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const b8e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,aK=e=>b8e?(e||window).getSelection():null;function x8e(e){const t=Me();return t==null&&Mb(166),me(t)&&t.isCollapsed()||t.getNodes().length===0?"":g8e(e,t)}function w8e(e){const t=Me();return t==null&&Mb(166),me(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(_8e(e,t))}function BL(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return VL(r,j8e(o.nodes),t)}catch{}const s=e.getData("text/html");if(s)try{const o=new DOMParser().parseFromString(s,"text/html");return VL(r,m8e(r,o),t)}catch{}const i=e.getData("text/plain")||e.getData("text/uri-list");if(i!=null)if(me(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let a=0;a<o.length;a++){const l=Me();if(me(l)){const c=o[a];c===`
`||c===`\r
`?l.insertParagraph():c==="	"?l.insertNodes([ag()]):l.insertText(c)}}}else t.insertRawText(i)}function VL(e,t,r){e.dispatchCommand(D1e,{nodes:t,selection:r})||r.insertNodes(t)}function lK(e,t,r,n=[]){let s=t===null||r.isSelected(t);const i=ie(r)&&r.excludeFromCopy("html");let o=r;if(t!==null){let c=tK(r);c=ve(c)&&t!==null?rK(t,c):c,o=c}const a=ie(o)?o.getChildren():[],l=function(c){const u=c.exportJSON(),h=c.constructor;if(u.type!==h.getType()&&Mb(58,h.name),ie(c)){const f=u.children;Array.isArray(f)||Mb(59,h.name)}return u}(o);if(ve(o)){const c=o.__text;c.length>0?l.text=c:s=!1}for(let c=0;c<a.length;c++){const u=a[c],h=lK(e,t,u,l.children);!s&&ie(r)&&h&&r.extractWithChild(u,t,"clone")&&(s=!0)}if(s&&!i)n.push(l);else if(Array.isArray(l.children))for(let c=0;c<l.children.length;c++){const u=l.children[c];n.push(u)}return s}function _8e(e,t){const r=[],n=xr().getChildren();for(let s=0;s<n.length;s++)lK(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function j8e(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=q$e(n);ve(s)&&a8e(s),t.push(s)}return t}let Uu=null;async function WL(e,t){if(Uu!==null)return!1;if(t!==null)return new Promise((a,l)=>{e.update(()=>{a(HL(e,t))})});const r=e.getRootElement(),n=e._window==null?window.document:e._window.document,s=aK(e._window);if(r===null||s===null)return!1;const i=n.createElement("span");i.style.cssText="position: fixed; top: -1000px;",i.append(n.createTextNode("#")),r.append(i);const o=new Range;return o.setStart(i,0),o.setEnd(i,1),s.removeAllRanges(),s.addRange(o),new Promise((a,l)=>{const c=e.registerCommand(Ew,u=>(wc(u,ClipboardEvent)&&(c(),Uu!==null&&(window.clearTimeout(Uu),Uu=null),a(HL(e,u))),!0),W$e);Uu=window.setTimeout(()=>{c(),Uu=null,a(!1)},50),n.execCommand("copy"),i.remove()})}function HL(e,t){const r=aK(e._window);if(!r)return!1;const n=r.anchorNode,s=r.focusNode;if(n!==null&&s!==null&&!sg(e,n,s))return!1;t.preventDefault();const i=t.clipboardData,o=Me();if(i===null||o===null)return!1;const a=x8e(e),l=w8e(e);let c="";return o!==null&&(c=o.getTextContent()),a!==null&&i.setData("text/html",a),l!==null&&i.setData("application/x-lexical-editor",l),i.setData("text/plain",c),!0}function KL(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const tf=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,k8e=tf&&"documentMode"in document?document.documentMode:null,N8e=!(!tf||!("InputEvent"in window)||k8e)&&"getTargetRanges"in new window.InputEvent("input"),S8e=tf&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),E8e=tf&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,C8e=tf&&/^(?=.*Chrome).*/i.test(navigator.userAgent),T8e=tf&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!C8e,ZL=I1e();function Ty(e){let t=null;if(wc(e,DragEvent)?t=e.dataTransfer:wc(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function GL(e){const t=Me();if(!me(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const i=n[s],o=i.getKey();if(r.has(o))continue;const a=BA(i,c=>ie(c)&&!c.isInline());if(a===null)continue;const l=a.getKey();a.canIndent()&&!r.has(l)&&(r.add(l),e(a))}return r.size>0}function Ay(e){const t=tu(e);return Rt(t)}function A8e(e){return $w(e.registerCommand(nH,t=>{const r=Me();return!!ci(r)&&(r.clear(),!0)},0),e.registerCommand(Mc,t=>{const r=Me();return!!me(r)&&(r.deleteCharacter(t),!0)},dt),e.registerCommand(dm,t=>{const r=Me();return!!me(r)&&(r.deleteWord(t),!0)},dt),e.registerCommand(hm,t=>{const r=Me();return!!me(r)&&(r.deleteLine(t),!0)},dt),e.registerCommand(Ad,t=>{const r=Me();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)BL(n,r,e);else if(me(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0},dt),e.registerCommand(gS,()=>{const t=Me();return!!me(t)&&(t.removeText(),!0)},dt),e.registerCommand(ol,t=>{const r=Me();return!!me(r)&&(r.formatText(t),!0)},dt),e.registerCommand(B1e,t=>{const r=Me();if(!me(r)&&!ci(r))return!1;const n=r.getNodes();for(const s of n){const i=BA(s,o=>ie(o)&&!o.isInline());i!==null&&i.setFormat(t)}return!0},dt),e.registerCommand(Td,t=>{const r=Me();return!!me(r)&&(r.insertLineBreak(t),!0)},dt),e.registerCommand(_b,()=>{const t=Me();return!!me(t)&&(t.insertParagraph(),!0)},dt),e.registerCommand(U1e,()=>(F$e([ag()]),!0),dt),e.registerCommand(q1e,()=>GL(t=>{const r=t.getIndent();t.setIndent(r+1)}),dt),e.registerCommand(iL,()=>GL(t=>{const r=t.getIndent();r>0&&t.setIndent(r-1)}),dt),e.registerCommand(oH,t=>{const r=Me();if(ci(r)&&!Ay(t.target)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(me(r)){const n=fm(r.focus,!0);if(!t.shiftKey&&Rt(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1},dt),e.registerCommand(aH,t=>{const r=Me();if(ci(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(me(r)){if(function(s){const i=s.focus;return i.key==="root"&&i.offset===xr().getChildrenSize()}(r))return t.preventDefault(),!0;const n=fm(r.focus,!1);if(!t.shiftKey&&Rt(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1},dt),e.registerCommand(iH,t=>{const r=Me();if(ci(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectPrevious(),!0}if(!me(r))return!1;if(UL(r,!0)){const n=t.shiftKey;return t.preventDefault(),qL(r,n,!0),!0}return!1},dt),e.registerCommand(sH,t=>{const r=Me();if(ci(r)&&!Ay(t.target)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),s[0].selectNext(0,0),!0}if(!me(r))return!1;const n=t.shiftKey;return!!UL(r,!1)&&(t.preventDefault(),qL(r,n,!1),!0)},dt),e.registerCommand(lH,t=>{if(Ay(t.target))return!1;const r=Me();if(!me(r))return!1;t.preventDefault();const{anchor:n}=r,s=n.getNode();return r.isCollapsed()&&n.offset===0&&!fn(s)&&f8e(s).getIndent()>0?e.dispatchCommand(iL,void 0):e.dispatchCommand(Mc,!0)},dt),e.registerCommand(uH,t=>{if(Ay(t.target))return!1;const r=Me();return!!me(r)&&(t.preventDefault(),e.dispatchCommand(Mc,!1))},dt),e.registerCommand(jb,t=>{const r=Me();if(!me(r))return!1;if(t!==null){if((E8e||S8e||T8e)&&N8e)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(Td,!1)}return e.dispatchCommand(_b,void 0)},dt),e.registerCommand(cH,()=>{const t=Me();return!!me(t)&&(e.blur(),!0)},dt),e.registerCommand(dH,t=>{const[,r]=Ty(t);if(r.length>0){const s=KL(t.clientX,t.clientY);if(s!==null){const{offset:i,node:o}=s,a=tu(o);if(a!==null){const l=M$e();if(ve(a))l.anchor.set(a.getKey(),i,"text"),l.focus.set(a.getKey(),i,"text");else{const u=a.getParentOrThrow().getKey(),h=a.getIndexWithinParent()+1;l.anchor.set(u,h,"element"),l.focus.set(u,h,"element")}const c=wH(l);ao(c)}e.dispatchCommand(ZL,r)}return t.preventDefault(),!0}const n=Me();return!!me(n)},dt),e.registerCommand(hH,t=>{const[r]=Ty(t),n=Me();return!(r&&!me(n))},dt),e.registerCommand(fH,t=>{const[r]=Ty(t),n=Me();if(r&&!me(n))return!1;const s=KL(t.clientX,t.clientY);if(s!==null){const i=tu(s.node);Rt(i)&&t.preventDefault()}return!0},dt),e.registerCommand(yS,()=>(x$e(),!0),dt),e.registerCommand(Ew,t=>(WL(e,wc(t,ClipboardEvent)?t:null),!0),dt),e.registerCommand(xA,t=>(async function(r,n){await WL(n,wc(r,ClipboardEvent)?r:null),n.update(()=>{const s=Me();me(s)?s.removeText():ci(s)&&s.getNodes().forEach(i=>i.remove())})}(t,e),!0),dt),e.registerCommand(yA,t=>{const[,r,n]=Ty(t);return r.length>0&&!n?(e.dispatchCommand(ZL,r),!0):OA(t.target)?!1:Me()!==null&&(function(s,i){s.preventDefault(),i.update(()=>{const o=Me(),a=wc(s,InputEvent)||wc(s,KeyboardEvent)?null:s.clipboardData;a!=null&&o!==null&&BL(a,o,i)},{tag:"paste"})}(t,e),!0)},dt))}const IS=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?v.useLayoutEffect:v.useEffect;function YL(e){return e.getEditorState().read(r8e(e.isComposing()))}function O8e({contentEditable:e,placeholder:t,ErrorBoundary:r}){const[n]=Jh(),s=function(i,o){const[a,l]=v.useState(()=>i.getDecorators());return IS(()=>i.registerDecoratorListener(c=>{ro.flushSync(()=>{l(c)})}),[i]),v.useEffect(()=>{l(i.getDecorators())},[i]),v.useMemo(()=>{const c=[],u=Object.keys(a);for(let h=0;h<u.length;h++){const f=u[h],p=d.jsx(o,{onError:m=>i._onError(m),children:d.jsx(v.Suspense,{fallback:null,children:a[f]})}),y=i.getElementByKey(f);y!==null&&c.push(ro.createPortal(p,y,f))}return c},[o,a,i])}(n,r);return function(i){IS(()=>$w(A8e(i),p8e(i)),[i])}(n),d.jsxs(d.Fragment,{children:[e,d.jsx(P8e,{content:t}),s]})}function P8e({content:e}){const[t]=Jh(),r=function(s){const[i,o]=v.useState(()=>YL(s));return IS(()=>{function a(){const l=YL(s);o(l)}return a(),$w(s.registerUpdateListener(()=>{a()}),s.registerEditableListener(()=>{a()}))},[s]),i}(t),n=X$e();return r?typeof e=="function"?e(n):e:null}const R8e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?v.useLayoutEffect:v.useEffect;function I8e({ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:r,ariaDescribedBy:n,ariaExpanded:s,ariaLabel:i,ariaLabelledBy:o,ariaMultiline:a,ariaOwns:l,ariaRequired:c,autoCapitalize:u,className:h,id:f,role:p="textbox",spellCheck:y=!0,style:m,tabIndex:b,"data-testid":x,...w}){const[_]=Jh(),[j,k]=v.useState(!1),N=v.useCallback(C=>{C&&C.ownerDocument&&C.ownerDocument.defaultView&&_.setRootElement(C)},[_]);return R8e(()=>(k(_.isEditable()),_.registerEditableListener(C=>{k(C)})),[_]),d.jsx("div",{...w,"aria-activedescendant":j?e:void 0,"aria-autocomplete":j?t:"none","aria-controls":j?r:void 0,"aria-describedby":n,"aria-expanded":j&&p==="combobox"?!!s:void 0,"aria-label":i,"aria-labelledby":o,"aria-multiline":a,"aria-owns":j?l:void 0,"aria-readonly":!j||void 0,"aria-required":c,autoCapitalize:u,className:h,contentEditable:j,"data-testid":x,id:f,ref:N,role:p,spellCheck:y,style:m,tabIndex:b})}const mj=0,DS=1,LS=2,ni=0,D8e=1,JL=2,L8e=3,M8e=4;function z8e(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return ni;const i=t._selection,o=e._selection;if(s)return D8e;if(!(me(i)&&me(o)&&o.isCollapsed()&&i.isCollapsed()))return ni;const a=function(x,w,_){const j=x._nodeMap,k=[];for(const N of w){const C=j.get(N);C!==void 0&&k.push(C)}for(const[N,C]of _){if(!C)continue;const E=j.get(N);E===void 0||fn(E)||k.push(E)}return k}(t,r,n);if(a.length===0)return ni;if(a.length>1){const x=t._nodeMap,w=x.get(i.anchor.key),_=x.get(o.anchor.key);return w&&_&&!e._nodeMap.has(w.__key)&&ve(w)&&w.__text.length===1&&i.anchor.offset===1?JL:ni}const l=a[0],c=e._nodeMap.get(l.__key);if(!ve(c)||!ve(l)||c.__mode!==l.__mode)return ni;const u=c.__text,h=l.__text;if(u===h)return ni;const f=i.anchor,p=o.anchor;if(f.key!==p.key||f.type!=="text")return ni;const y=f.offset,m=p.offset,b=h.length-u.length;return b===1&&m===y-1?JL:b===-1&&m===y+1?L8e:b===-1&&m===y?M8e:ni}function F8e(e,t){let r=Date.now(),n=ni;return(s,i,o,a,l,c)=>{const u=Date.now();if(c.has("historic"))return n=ni,r=u,LS;const h=z8e(s,i,a,l,e.isComposing()),f=(()=>{const p=o===null||o.editor===e,y=c.has("history-push");if(!y&&p&&c.has("history-merge"))return mj;if(s===null)return DS;const m=i._selection;return a.size>0||l.size>0?y===!1&&h!==ni&&h===n&&u<r+t&&p||a.size===1&&function(b,x,w){const _=x._nodeMap.get(b),j=w._nodeMap.get(b),k=x._selection,N=w._selection;let C=!1;return me(k)&&me(N)&&(C=k.anchor.type==="element"&&k.focus.type==="element"&&N.anchor.type==="text"&&N.focus.type==="text"),!(C||!ve(_)||!ve(j))&&_.__type===j.__type&&_.__text===j.__text&&_.__mode===j.__mode&&_.__detail===j.__detail&&_.__style===j.__style&&_.__format===j.__format&&_.__parent===j.__parent}(Array.from(a)[0],s,i)?mj:DS:m!==null?mj:LS})();return r=u,n=h,f}}function XL(e){e.undoStack=[],e.redoStack=[],e.current=null}function $8e(e,t,r){const n=F8e(e,r);return $w(e.registerCommand(vA,()=>(function(s,i){const o=i.redoStack,a=i.undoStack;if(a.length!==0){const l=i.current,c=a.pop();l!==null&&(o.push(l),s.dispatchCommand(Ny,!0)),a.length===0&&s.dispatchCommand(Sy,!1),i.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:"historic"})}}(e,t),!0),dt),e.registerCommand(bA,()=>(function(s,i){const o=i.redoStack,a=i.undoStack;if(o.length!==0){const l=i.current;l!==null&&(a.push(l),s.dispatchCommand(Sy,!0));const c=o.pop();o.length===0&&s.dispatchCommand(Ny,!1),i.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:"historic"})}}(e,t),!0),dt),e.registerCommand(W1e,()=>(XL(t),!1),dt),e.registerCommand(H1e,()=>(XL(t),e.dispatchCommand(Ny,!1),e.dispatchCommand(Sy,!1),!0),dt),e.registerUpdateListener(({editorState:s,prevEditorState:i,dirtyLeaves:o,dirtyElements:a,tags:l})=>{const c=t.current,u=t.redoStack,h=t.undoStack,f=c===null?null:c.editorState;if(c!==null&&s===f)return;const p=n(i,s,c,o,a,l);if(p===DS)u.length!==0&&(t.redoStack=[],e.dispatchCommand(Ny,!1)),c!==null&&(h.push({...c}),e.dispatchCommand(Sy,!0));else if(p===LS)return;t.current={editor:e,editorState:s}}))}function U8e(){return{current:null,redoStack:[],undoStack:[]}}function q8e({externalHistoryState:e}){const[t]=Jh();return function(r,n,s=1e3){const i=v.useMemo(()=>n||U8e(),[n]);v.useEffect(()=>$8e(r,i,s),[s,r,i])}(t,e),null}function B8e({defaultSelection:e}){const[t]=Jh();return v.useEffect(()=>{t.focus(()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})},{defaultSelection:e})},[e,t]),null}function MS(e,t){return MS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},MS(e,t)}var QL={error:null},V8e=function(e){var t,r;function n(){for(var i,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(i=e.call.apply(e,[this].concat(a))||this).state=QL,i.resetErrorBoundary=function(){for(var c,u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];i.props.onReset==null||(c=i.props).onReset.apply(c,h),i.reset()},i}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,MS(t,r),n.getDerivedStateFromError=function(i){return{error:i}};var s=n.prototype;return s.reset=function(){this.setState(QL)},s.componentDidCatch=function(i,o){var a,l;(a=(l=this.props).onError)==null||a.call(l,i,o)},s.componentDidUpdate=function(i,o){var a,l,c,u,h=this.state.error,f=this.props.resetKeys;h!==null&&o.error!==null&&((c=i.resetKeys)===void 0&&(c=[]),(u=f)===void 0&&(u=[]),c.length!==u.length||c.some(function(p,y){return!Object.is(p,u[y])}))&&((a=(l=this.props).onResetKeysChange)==null||a.call(l,i.resetKeys,f),this.reset())},s.render=function(){var i=this.state.error,o=this.props,a=o.fallbackRender,l=o.FallbackComponent,c=o.fallback;if(i!==null){var u={error:i,resetErrorBoundary:this.resetErrorBoundary};if(v.isValidElement(c))return c;if(typeof a=="function")return a(u);if(l)return v.createElement(l,u);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n}(v.Component);function W8e({children:e,onError:t}){return d.jsx(V8e,{fallback:d.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}function H8e({item:e,contentType:t,onSave:r,onCancel:n}){const[s,i]=v.useState(l()),[o,a]=v.useState({});function l(){if(e){const{id:m,created_at:b,updated_at:x,created_by:w,..._}=e;return _}return(()=>{switch(t){case"posts":case"pages":return{status:"draft",title:"",content:"",slug:"",author_id:void 0,excerpt:void 0,featured_image:void 0,tags:[],category_id:void 0};case"storeItems":return{status:"active",name:"",description:"",price:0,category:"digital",image_url:void 0,stock_quantity:0,sku:void 0};case"libraryItems":return{status:"draft",title:"",description:"",file_url:"",file_type:void 0,file_size:0,category:"tutorial",thumbnail_url:void 0};case"characters":return{status:"draft",name:"",description:"",role:"",backstory:"",image_url:"",birth_date:void 0,death_date:void 0,species:void 0,occupation:void 0,relationships:void 0};case"timelineEvents":return{status:"draft",title:"",date:"",era:"ancient",description:"",is_published:!1,details:null,background_image:null,nested_events:[]};case"betaUsers":return{status:"pending",name:"",email:"",message:""};default:throw new Error(`Unsupported content type: ${t}`)}})()}const c=v.useCallback(()=>{const m=e?{...e,...s}:s;r(m)},[s,e,r]),u={namespace:"MyEditor",theme:{},onError(m){console.error(m)}},h=v.useCallback(m=>b=>{const x=b.target.value;i(w=>({...w,[m]:x}))},[]),f=v.useCallback(m=>b=>{const x=parseFloat(b.target.value);i(w=>({...w,[m]:x}))},[]),p=v.useCallback(m=>b=>{const x=b.target.value;i(w=>({...w,[m]:x}))},[]),y=()=>{switch(t){case"posts":case"pages":const m=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:m.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter title...",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug"}),d.jsx("input",{type:"text",value:m.slug,onChange:k=>i(N=>({...N,slug:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"my-awesome-post"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"URL-friendly version of the title. e.g., 'my-awesome-post'"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),d.jsx("div",{className:"editor-container",children:d.jsxs(G$e,{initialConfig:u,children:[d.jsx(O8e,{contentEditable:d.jsx(I8e,{className:"editor-input"}),placeholder:d.jsx("div",{className:"editor-placeholder",children:"Enter your content..."}),ErrorBoundary:W8e}),d.jsx(q8e,{}),d.jsx(B8e,{})]})})]})]});case"storeItems":const b=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name"}),d.jsx("input",{type:"text",value:b.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price"}),d.jsx("input",{type:"number",step:"0.01",value:b.price,onChange:f("price"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),d.jsxs("select",{value:b.category,onChange:p("category"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"digital",children:"Digital"}),d.jsx("option",{value:"physical",children:"Physical"}),d.jsx("option",{value:"subscription",children:"Subscription"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:b.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product description..."})]})]});case"libraryItems":const x=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:x.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resource title..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),d.jsxs("select",{value:x.category,onChange:p("category"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"tutorial",children:"Tutorial"}),d.jsx("option",{value:"resources",children:"Resources"}),d.jsx("option",{value:"template",children:"Template"}),d.jsx("option",{value:"guide",children:"Guide"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File URL"}),d.jsx("input",{type:"url",value:x.file_url,onChange:h("file_url"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:x.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resource description..."})]})]});case"characters":const w=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Character Name"}),d.jsx("input",{type:"text",value:w.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),d.jsxs("select",{value:w.role,onChange:p("role"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"protagonist",children:"Protagonist"}),d.jsx("option",{value:"antagonist",children:"Antagonist"}),d.jsx("option",{value:"mentor",children:"Mentor"}),d.jsx("option",{value:"ally",children:"Ally"}),d.jsx("option",{value:"neutral",children:"Neutral"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:w.description,onChange:h("description"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character description..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backstory"}),d.jsx("textarea",{value:w.backstory,onChange:h("backstory"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Character backstory..."})]})]});case"timelineEvents":const _=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title"}),d.jsx("input",{type:"text",value:_.title,onChange:h("title"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event title..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),d.jsx("input",{type:"date",value:_.date,onChange:h("date"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Era"}),d.jsxs("select",{value:_.era,onChange:p("era"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"ancient",children:"Ancient"}),d.jsx("option",{value:"medieval",children:"Medieval"}),d.jsx("option",{value:"modern",children:"Modern"}),d.jsx("option",{value:"future",children:"Future"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:_.description,onChange:h("description"),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event description..."})]})]});case"betaUsers":const j=s;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),d.jsx("input",{type:"text",value:j.name,onChange:h("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"User name..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),d.jsx("input",{type:"email",value:j.email,onChange:h("email"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"user@example.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),d.jsx("textarea",{value:j.message,onChange:h("message"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"User message/notes..."})]})]});default:return null}};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?`Edit ${t}`:`Create New ${t}`}),d.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700",children:d.jsx(pl,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[y(),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:s.status,onChange:m=>i({...s,status:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t==="posts"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"archived",children:"Archived"})]}),t==="pages"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="storeItems"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]}),t==="libraryItems"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="characters"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="timelineEvents"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"published",children:"Published"})]}),t==="betaUsers"&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsxs("button",{type:"button",onClick:c,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(DE,{className:"w-4 h-4"}),"Save"]}),d.jsx("button",{type:"button",onClick:n,className:"flex items-center gap-2 bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}const K8e=({contentType:e,items:t,title:r,columns:n,createActionLabel:s,onEdit:i,onDelete:o,onCreateNew:a})=>{const[l,c]=v.useState(""),[u,h]=v.useState("all"),f=t.filter(p=>{const y=Object.values(p).some(b=>b&&b.toString().toLowerCase().includes(l.toLowerCase())),m=u==="all"||p.status===u;return y&&m});return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r}),d.jsxs("button",{onClick:a,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Yo,{className:"w-4 h-4"}),s]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(ou,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),placeholder:`Search ${r.toLowerCase()}...`,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsxs("select",{value:u,onChange:p=>h(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"draft",children:"Draft"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"}),d.jsx("option",{value:"pending",children:"Pending"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[n.map(p=>d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:p.label},p.key)),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:f.map(p=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[n.map(y=>d.jsx("td",{className:"py-4 px-6",children:y.render?y.render(p):d.jsx("div",{className:y.key===n[0].key?"font-medium text-gray-900":"text-sm text-gray-500",children:p[y.key]})},y.key)),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>i(p),className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ox,{className:"w-4 h-4"})}),d.jsx("button",{className:"p-1 text-gray-500 hover:text-green-600",children:d.jsx(Cm,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>o(p.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(au,{className:"w-4 h-4"})})]})})]},p.id))})]})})]})},Z8e=async()=>{const{data:e,error:t}=await ce.from("pages").select("*");if(t)throw new Error(t.message);return e},G8e=async e=>{const{data:t,error:r}=await ce.from("pages").insert(e).select();if(r)throw new Error(r.message);return t[0]},Y8e=async e=>{const{data:t,error:r}=await ce.from("pages").update(e).eq("id",e.id).select();if(r)throw new Error(r.message);return t[0]},J8e=async e=>{const{error:t}=await ce.from("pages").delete().eq("id",e);if(t)throw new Error(t.message)},X8e=()=>{const e=fa(),[t,r]=v.useState(!1),[n,s]=v.useState(null),{data:i,isLoading:o,isError:a,error:l}=It({queryKey:["pages"],queryFn:Z8e}),c=tr({mutationFn:G8e,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]}),r(!1),s(null)}}),u=tr({mutationFn:Y8e,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]}),r(!1),s(null)}}),h=tr({mutationFn:J8e,onSuccess:()=>{e.invalidateQueries({queryKey:["pages"]})}}),f=m=>{n?u.mutate(m):c.mutate(m)},p=m=>{window.confirm("Are you sure you want to delete this page?")&&h.mutate(m)},y=[{key:"title",label:"Page Title"},{key:"slug",label:"URL Slug"},{key:"status",label:"Status",render:m=>d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m.status==="published"?"bg-green-100 text-green-800":m.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:m.status})},{key:"created_at",label:"Created At",render:m=>new Date(m.created_at).toLocaleDateString()},{key:"updated_at",label:"Last Updated",render:m=>new Date(m.updated_at).toLocaleDateString()}];return o?d.jsx("div",{children:"Loading pages..."}):a?d.jsxs("div",{children:["Error loading pages: ",l==null?void 0:l.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(H8e,{item:n,contentType:"pages",onSave:f,onCancel:()=>{r(!1),s(null)}}):d.jsx(K8e,{contentType:"pages",items:i||[],title:"Website Pages",columns:y,createActionLabel:"New Page",onEdit:m=>{s(m),r(!0)},onDelete:p,onCreateNew:()=>{s(null),r(!0)}})})},Q8e=async()=>{const{data:e,error:t}=await ce.from("characters").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},eUe=async e=>{const{data:t,error:r}=await ce.from("characters").insert(e).select();if(r)throw new Error(r.message);return t[0]},tUe=async e=>{const{id:t,...r}=e,{data:n,error:s}=await ce.from("characters").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},rUe=async e=>{const{error:t}=await ce.from("characters").delete().eq("id",e);if(t)throw new Error(t.message)},nUe=({character:e,onSave:t,onCancel:r})=>{const[n,s]=v.useState({name:(e==null?void 0:e.name)||"",title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",traits:(e==null?void 0:e.traits.join(", "))||"",image_url:(e==null?void 0:e.image_url)||"",silhouette_url:(e==null?void 0:e.silhouette_url)||""}),i=()=>{const o={...n,traits:n.traits.split(",").map(a=>a.trim()).filter(a=>a!=="")};t({...e,...o,id:e==null?void 0:e.id})};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e?"Edit Character":"Create New Character"}),d.jsxs("form",{onSubmit:o=>{o.preventDefault(),i()},children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),d.jsx("input",{type:"text",value:n.name,onChange:o=>s({...n,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:n.title,onChange:o=>s({...n,title:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:n.description,onChange:o=>s({...n,description:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Traits (comma-separated)"}),d.jsx("input",{type:"text",value:n.traits,onChange:o=>s({...n,traits:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),d.jsx("input",{type:"url",value:n.image_url,onChange:o=>s({...n,image_url:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Silhouette URL (Optional)"}),d.jsx("input",{type:"url",value:n.silhouette_url,onChange:o=>s({...n,silhouette_url:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Save Character"}),d.jsx("button",{type:"button",onClick:r,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},sUe=()=>{const e=fa(),[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,o]=v.useState(""),{data:a,isLoading:l,isError:c,error:u}=It({queryKey:["characters"],queryFn:Q8e}),h=tr({mutationFn:eUe,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]}),r(!1),s(null)}}),f=tr({mutationFn:tUe,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]}),r(!1),s(null)}}),p=tr({mutationFn:rUe,onSuccess:()=>{e.invalidateQueries({queryKey:["characters"]})}}),y=x=>{n?f.mutate(x):h.mutate(x)},m=x=>{window.confirm("Are you sure you want to delete this character?")&&p.mutate(x)},b=(a==null?void 0:a.filter(x=>x.name.toLowerCase().includes(i.toLowerCase())))||[];return l?d.jsx("div",{children:"Loading characters..."}):c?d.jsxs("div",{children:["Error loading characters: ",u==null?void 0:u.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(nUe,{character:n,onSave:y,onCancel:()=>{r(!1),s(null)}}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Characters"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Yo,{className:"w-4 h-4"}),"New Character"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:d.jsxs("div",{className:"relative",children:[d.jsx(ou,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),placeholder:"Search characters...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Name"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Traits"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:b.map(x=>d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:x.name})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:x.title}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:x.traits.join(", ")}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(x),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ox,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>m(x.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(au,{className:"w-4 h-4"})})]})})]},x.id))})]})})]})})},iUe=async()=>{const{data:e,error:t}=await ce.from("works").select("*").order("created_at",{ascending:!0});if(t)throw new Error(t.message);return e},oUe=async e=>{const{data:t,error:r}=await ce.from("works").insert(e).select();if(r)throw new Error(r.message);return t[0]},aUe=async e=>{const{id:t,...r}=e,{data:n,error:s}=await ce.from("works").update(r).eq("id",t).select();if(s)throw new Error(s.message);return n[0]},lUe=async e=>{const{error:t}=await ce.from("works").delete().eq("id",e);if(t)throw new Error(t.message)},cUe=({work:e,onSave:t,onCancel:r,allWorks:n})=>{const[s,i]=v.useState({title:(e==null?void 0:e.title)||"",type:(e==null?void 0:e.type)||"book",parent_id:(e==null?void 0:e.parent_id)||"",order_in_parent:(e==null?void 0:e.order_in_parent)||"",description:(e==null?void 0:e.description)||"",status:(e==null?void 0:e.status)||"planning",progress_percentage:(e==null?void 0:e.progress_percentage)||0,release_date:(e==null?void 0:e.release_date)||"",estimated_release:(e==null?void 0:e.estimated_release)||"",cover_image_url:(e==null?void 0:e.cover_image_url)||"",sample_content:(e==null?void 0:e.sample_content)||"",is_purchasable:(e==null?void 0:e.is_purchasable)??!0,is_featured:(e==null?void 0:e.is_featured)??!1,word_count:(e==null?void 0:e.word_count)||"",target_word_count:(e==null?void 0:e.target_word_count)||""}),o=()=>{t({...e,...s,parent_id:s.parent_id===""?null:s.parent_id,order_in_parent:s.order_in_parent?Number(s.order_in_parent):void 0,progress_percentage:s.progress_percentage?Number(s.progress_percentage):void 0,word_count:s.word_count?Number(s.word_count):void 0,target_word_count:s.target_word_count?Number(s.target_word_count):void 0,id:e==null?void 0:e.id})},a=n.filter(l=>l.id!==(e==null?void 0:e.id));return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e?"Edit Work":"Create New Work"}),d.jsxs("form",{onSubmit:l=>{l.preventDefault(),o()},children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:s.title,onChange:l=>i({...s,title:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),d.jsxs("select",{value:s.type,onChange:l=>i({...s,type:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"issue",children:"Issue"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent Work (for nesting)"}),d.jsxs("select",{value:s.parent_id,onChange:l=>i({...s,parent_id:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"None"}),a.map(l=>d.jsxs("option",{value:l.id,children:[l.title," (",l.type,")"]},l.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order in Parent"}),d.jsx("input",{type:"number",value:s.order_in_parent,onChange:l=>i({...s,order_in_parent:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:s.description,onChange:l=>i({...s,description:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{value:s.status,onChange:l=>i({...s,status:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"planning",children:"Planning"}),d.jsx("option",{value:"writing",children:"Writing"}),d.jsx("option",{value:"editing",children:"Editing"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"on_hold",children:"On Hold"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress Percentage (0-100)"}),d.jsx("input",{type:"number",value:s.progress_percentage,onChange:l=>i({...s,progress_percentage:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"100"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Date"}),d.jsx("input",{type:"date",value:s.release_date,onChange:l=>i({...s,release_date:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Release (e.g., Q2 2024)"}),d.jsx("input",{type:"text",value:s.estimated_release,onChange:l=>i({...s,estimated_release:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Image URL"}),d.jsx("input",{type:"url",value:s.cover_image_url,onChange:l=>i({...s,cover_image_url:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sample Content"}),d.jsx("textarea",{value:s.sample_content,onChange:l=>i({...s,sample_content:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-48"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Word Count"}),d.jsx("input",{type:"number",value:s.word_count,onChange:l=>i({...s,word_count:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Word Count"}),d.jsx("input",{type:"number",value:s.target_word_count,onChange:l=>i({...s,target_word_count:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isPurchasable",checked:s.is_purchasable,onChange:l=>i({...s,is_purchasable:l.target.checked}),className:"mr-2"}),d.jsx("label",{htmlFor:"isPurchasable",className:"text-sm font-medium text-gray-700",children:"Is Purchasable"})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isFeatured",checked:s.is_featured,onChange:l=>i({...s,is_featured:l.target.checked}),className:"mr-2"}),d.jsx("label",{htmlFor:"isFeatured",className:"text-sm font-medium text-gray-700",children:"Is Featured"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Save Work"}),d.jsx("button",{type:"button",onClick:r,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})},uUe=()=>{const e=fa(),[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,o]=v.useState(""),[a,l]=v.useState("all"),[c,u]=v.useState("all"),{data:h,isLoading:f,isError:p,error:y}=It({queryKey:["works"],queryFn:iUe}),m=tr({mutationFn:oUe,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]}),r(!1),s(null)},onError:k=>{alert(`Error creating work: ${k.message}`)}}),b=tr({mutationFn:aUe,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]}),r(!1),s(null)},onError:k=>{alert(`Error updating work: ${k.message}`)}}),x=tr({mutationFn:lUe,onSuccess:()=>{e.invalidateQueries({queryKey:["works"]})}}),w=k=>{n?b.mutate(k):m.mutate(k)},_=k=>{window.confirm("Are you sure you want to delete this work?")&&x.mutate(k)},j=(h==null?void 0:h.filter(k=>{const N=k.title.toLowerCase().includes(i.toLowerCase()),C=a==="all"||k.type===a,E=c==="all"||k.status===c;return N&&C&&E}))||[];return f?d.jsx("div",{children:"Loading works..."}):p?d.jsxs("div",{children:["Error loading works: ",y==null?void 0:y.message]}):d.jsx("div",{className:"space-y-6",children:t?d.jsx(cUe,{work:n,onSave:w,onCancel:()=>{r(!1),s(null)},allWorks:h||[]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Works Management"}),d.jsxs("button",{onClick:()=>{s(null),r(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[d.jsx(Yo,{className:"w-4 h-4"}),"New Work"]})]}),d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(ou,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",value:i,onChange:k=>o(k.target.value),placeholder:"Search works...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("select",{value:a,onChange:k=>l(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"}),d.jsx("option",{value:"issue",children:"Issue"})]}),d.jsxs("select",{value:c,onChange:k=>u(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"planning",children:"Planning"}),d.jsx("option",{value:"writing",children:"Writing"}),d.jsx("option",{value:"editing",children:"Editing"}),d.jsx("option",{value:"published",children:"Published"}),d.jsx("option",{value:"on_hold",children:"On Hold"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Title"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Type"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Status"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Parent"}),d.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Release Date"}),d.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-900",children:"Actions"})]})}),d.jsx("tbody",{children:j.map(k=>{var N;return d.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[d.jsx("td",{className:"py-4 px-6",children:d.jsx("div",{className:"font-medium text-gray-900",children:k.title})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:k.type}),d.jsx("td",{className:"py-4 px-6",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.status==="published"?"bg-green-100 text-green-800":k.status==="planning"?"bg-blue-100 text-blue-800":k.status==="writing"?"bg-yellow-100 text-yellow-800":k.status==="editing"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:k.status})}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:((N=h==null?void 0:h.find(C=>C.id===k.parent_id))==null?void 0:N.title)||"N/A"}),d.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:k.release_date||k.estimated_release||"N/A"}),d.jsx("td",{className:"py-4 px-6",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>{s(k),r(!0)},className:"p-1 text-gray-500 hover:text-blue-600",children:d.jsx(ox,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>_(k.id),className:"p-1 text-gray-500 hover:text-red-600",children:d.jsx(au,{className:"w-4 h-4"})})]})})]},k.id)})})]})})]})})},eM=typeof window<"u",zS="https://opukvvmumyegtkukqint.supabase.co",cK="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",zS);console.log("DEBUG: supabaseAnonKey (raw):",cK);console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set");let FS;var tM;try{FS=DF(zS,cK,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:eM?window.localStorage:void 0}}),typeof process<"u"&&((tM=qre)==null?void 0:tM.NODE_ENV)==="development"&&eM&&console.log("Supabase client initialized with URL:",zS)}catch(e){throw console.error("Error initializing Supabase client:",e),e}const dUe=()=>{const[e,t]=v.useState(""),[r,n]=v.useState("chapter"),[s,i]=v.useState(""),[o,a]=v.useState(""),[l,c]=v.useState(""),[u,h]=v.useState(null),[f,p]=v.useState(null),[y,m]=v.useState(null),[b,x]=v.useState(""),[w,_]=v.useState(""),[j,k]=v.useState(!1),[N,C]=v.useState([]),[E,T]=v.useState(!0),[P,O]=v.useState(null),[I,R]=v.useState(!1),[F,$]=v.useState(null),[W,q]=v.useState(""),[K,Z]=v.useState(!1),[z,J]=v.useState(""),[te,be]=v.useState(""),H=async()=>{T(!0),O(null);try{const{data:{session:V}}=await FS.auth.getSession();if(!V){O("User not authenticated."),T(!1);return}const X=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${V.access_token}`}});if(!X.ok){const U=await X.json();throw new Error(U.error||"Failed to fetch users.")}const le=await X.json();C(le.users)}catch(V){console.error("Error fetching users:",V instanceof Error?V.message:V),O("Failed to load users: "+(V instanceof Error?V.message:"Unknown error"))}finally{T(!1)}};v.useEffect(()=>{H()},[]);const G=async V=>{V.preventDefault(),x(""),_(""),k(!0);const X=new FormData;X.append("title",e),X.append("type",r),X.append("description",s),X.append("release_date",o),X.append("cover_image_url",l),u&&X.append("epub_file",u),f&&X.append("pdf_file",f),y&&X.append("mobi_file",y);try{const le="YOUR_ADMIN_USER_ID";if(le==="YOUR_ADMIN_USER_ID"){_("Please replace 'YOUR_ADMIN_USER_ID' with an actual admin user's ID in AdminUploadPage.jsx"),k(!1);return}const U=await fetch("http://localhost:3001/api/admin/works",{method:"POST",headers:{"x-user-id":le},body:X}),Se=await U.json();U.ok?(x("Work uploaded successfully!"),t(""),n("chapter"),i(""),a(""),c(""),h(null),p(null),m(null),document.getElementById("epubFileInput").value="",document.getElementById("pdfFileInput").value="",document.getElementById("mobiFileInput").value=""):_(Se.message||"Failed to upload work.")}catch(le){console.error("Error uploading work:",le),_("An error occurred while uploading the work. Check console for details.")}finally{k(!1)}},fe=V=>{$(V);const X=V.subscriptions.find(le=>le.status==="active"||le.status==="trialing");X?(q(X.subscription_type),Z(X.status==="active"||X.status==="trialing"),J(X.start_date?X.start_date.split("T")[0]:""),be(X.current_period_end?X.current_period_end.split("T")[0]:"")):(q(""),Z(!1),J(new Date().toISOString().split("T")[0]),be("")),R(!0)},pe=()=>{R(!1),$(null)},ke=async V=>{if(V.preventDefault(),!!F)try{const{data:{session:X}}=await FS.auth.getSession();if(!X){alert("You must be logged in to manage subscriptions.");return}const le=await fetch(`/api/admin/users/${F.id}/subscription`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X.access_token}`},body:JSON.stringify({subscription_type:W,status:K?"active":"canceled",start_date:z,current_period_end:te||null})});if(!le.ok){const U=await le.json();throw new Error(U.error||"Failed to update subscription.")}alert("Subscription updated successfully!"),pe(),H()}catch(X){console.error("Error updating subscription:",X instanceof Error?X.message:X),alert("Error updating subscription: "+(X instanceof Error?X.message:"Unknown error"))}};return d.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"auto",fontFamily:"Arial, sans-serif"},children:[d.jsx("h1",{style:{textAlign:"center",marginBottom:"30px"},children:"Admin Dashboard"}),d.jsxs("div",{style:{marginBottom:"50px",border:"1px solid #ccc",padding:"20px",borderRadius:"8px"},children:[d.jsx("h2",{children:"Upload New Work (Chapter/Issue)"}),b&&d.jsx("p",{style:{color:"green",fontWeight:"bold"},children:b}),w&&d.jsx("p",{style:{color:"red",fontWeight:"bold"},children:w}),d.jsxs("form",{onSubmit:G,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Title:"}),d.jsx("input",{type:"text",value:e,onChange:V=>t(V.target.value),required:!0,style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Type:"}),d.jsxs("select",{value:r,onChange:V=>n(V.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box"},children:[d.jsx("option",{value:"chapter",children:"Chapter"}),d.jsx("option",{value:"issue",children:"Issue"}),d.jsx("option",{value:"book",children:"Book"}),d.jsx("option",{value:"volume",children:"Volume"}),d.jsx("option",{value:"saga",children:"Saga"}),d.jsx("option",{value:"arc",children:"Arc"})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Description:"}),d.jsx("textarea",{value:s,onChange:V=>i(V.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box",minHeight:"80px"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Release Date:"}),d.jsx("input",{type:"date",value:o,onChange:V=>a(V.target.value),style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Cover Image URL:"}),d.jsx("input",{type:"text",value:l,onChange:V=>c(V.target.value),placeholder:"e.g., https://example.com/cover.jpg",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"EPUB File:"}),d.jsx("input",{type:"file",id:"epubFileInput",onChange:V=>h(V.target.files[0]),accept:".epub",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"PDF File:"}),d.jsx("input",{type:"file",id:"pdfFileInput",onChange:V=>p(V.target.files[0]),accept:".pdf",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"MOBI File:"}),d.jsx("input",{type:"file",id:"mobiFileInput",onChange:V=>m(V.target.files[0]),accept:".mobi",style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),d.jsx("button",{type:"submit",disabled:j,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:j?"not-allowed":"pointer",fontSize:"16px"},children:j?"Uploading...":"Upload Work"})]})]}),d.jsxs("div",{style:{border:"1px solid #ccc",padding:"20px",borderRadius:"8px"},children:[d.jsx("h2",{children:"User Management"}),E&&d.jsx("p",{children:"Loading users..."}),P&&d.jsx("p",{style:{color:"red"},children:P}),!E&&!P&&d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{backgroundColor:"#f2f2f2"},children:[d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Email"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Display Name"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Role"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Subscription Status"}),d.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Actions"})]})}),d.jsx("tbody",{children:N.map(V=>{var X,le;return d.jsxs("tr",{children:[d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:V.email}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:((X=V.profile)==null?void 0:X.display_name)||"N/A"}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:((le=V.profile)==null?void 0:le.role)||"user"}),d.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:V.subscriptions.length>0&&V.subscriptions.some(U=>U.status==="active"||U.status==="trialing")?"Active":"Inactive"}),d.jsxs("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[d.jsx("button",{style:{marginRight:"5px",padding:"5px 10px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},onClick:()=>fe(V),children:"Manage Subscription"}),d.jsx("button",{style:{padding:"5px 10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Manage Entitlements"})]})]},V.id)})})]})]}),I&&F&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center"},children:d.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",width:"500px",color:"black"},children:[d.jsxs("h3",{style:{marginBottom:"15px"},children:["Manage Subscription for ",F.email]}),d.jsxs("form",{onSubmit:ke,style:{display:"flex",flexDirection:"column",gap:"10px"},children:[d.jsxs("div",{children:[d.jsx("label",{children:"Subscription Type:"}),d.jsx("input",{type:"text",value:W,onChange:V=>q(V.target.value),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"Is Active:"}),d.jsx("input",{type:"checkbox",checked:K,onChange:V=>Z(V.target.checked),style:{marginLeft:"10px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"Start Date:"}),d.jsx("input",{type:"date",value:z,onChange:V=>J(V.target.value),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{children:[d.jsx("label",{children:"End Date:"}),d.jsx("input",{type:"date",value:te,onChange:V=>be(V.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[d.jsx("button",{type:"button",onClick:pe,style:{padding:"8px 15px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),d.jsx("button",{type:"submit",style:{padding:"8px 15px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save"})]})]})]})})]})},hUe=()=>{var e;const[t,r]=v.useState([]),[n,s]=v.useState(!0),[i,o]=v.useState(null),[a,l]=v.useState(!1),[c,u]=v.useState(!1),[h,f]=v.useState(!1),[p,y]=v.useState(!1),[m,b]=v.useState(null),[x,w]=v.useState(null),[_,j]=v.useState(null),[k,N]=v.useState(""),[C,E]=v.useState("active"),[T,P]=v.useState(""),[O,I]=v.useState(""),[R,F]=v.useState(""),[$,W]=v.useState(""),[q,K]=v.useState(!1),[Z,z]=v.useState(!1),[J,te]=v.useState(""),[be,H]=v.useState(""),[G,fe]=v.useState(""),[pe,ke]=v.useState(""),[V,X]=v.useState("user"),[le,U]=v.useState(!1),[Se,Re]=v.useState(""),[Qe,Xe]=v.useState(""),[pt,Jt]=v.useState(""),[D,B]=v.useState(""),[Q,ge]=v.useState(""),[he,ue]=v.useState("created_at"),[_e,rt]=v.useState("desc"),[Be,bt]=v.useState(1),[Qr,Bt]=v.useState(10);function Ws(ne){return!ne.subscriptions||ne.subscriptions.length===0?"No Subscription":ne.subscriptions.some(De=>De.status==="active"||De.status==="trialing")?"Active":"Inactive"}function Oi(ne){switch(ne){case"Active":return d.jsx(Mo,{className:"w-4 h-4 text-green-500"});case"Inactive":return d.jsx(IE,{className:"w-4 h-4 text-red-500"});default:return d.jsx(li,{className:"w-4 h-4 text-gray-400"})}}function mo(ne){switch(ne){case"admin":return"bg-purple-100 text-purple-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}function Pi(ne){if(!ne)return"—";const De=new Date(ne);return Number.isNaN(De.getTime())?"—":De.toLocaleString()}const[Ri,go]=v.useState(!1),en=v.useCallback(async()=>{s(!0),o(null);try{const{data:{session:ne}}=await ce.auth.getSession();if(!ne){o("User not authenticated."),s(!1);return}const De=await fetch("/api/admin/users",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne.access_token}`}});if(!De.ok){const hr=await De.json();throw new Error(hr.error||"Failed to fetch users.")}const nt=await De.json();r(nt),nt.length>0&&(nt[0].role==="admin"||nt[0].role==="super_admin")?go(!0):go(!1)}catch(ne){console.error("Error fetching users or checking admin status:",ne),o((ne instanceof Error?ne.message:String(ne))||"An unexpected error occurred.")}finally{s(!1)}},[]);v.useEffect(()=>{en()},[en]);const ds=v.useMemo(()=>{const ne=t.filter(De=>{var nt;const hr=De.email.toLowerCase().includes(pt.toLowerCase())||(((nt=De.profile)==null?void 0:nt.display_name)||"").toLowerCase().includes(pt.toLowerCase()),Pn=!D||De.role===D,Rn=Ws(De);return hr&&Pn&&(!Q||Rn===Q)});return ne.sort((De,nt)=>{var hr,Pn;let Rn=De[he],Dt=nt[he];return he==="display_name"&&(Rn=((hr=De.profile)==null?void 0:hr.display_name)||"",Dt=((Pn=nt.profile)==null?void 0:Pn.display_name)||""),(he==="created_at"||he==="last_sign_in")&&(Rn=new Date(Rn),Dt=new Date(Dt)),Rn<Dt?_e==="asc"?-1:1:Rn>Dt?_e==="asc"?1:-1:0}),ne},[t,pt,D,Q,he,_e]),gn=v.useMemo(()=>{const ne=(Be-1)*Qr;return ds.slice(ne,ne+Qr)},[ds,Be,Qr]),Hs=Math.ceil(ds.length/Qr)||1,Bl=()=>{fe(""),ke(""),X("user"),Re(""),Xe(""),f(!0)},Ks=()=>{f(!1)},Vl=ne=>{var De;b(ne);const nt=(De=ne.subscriptions)==null?void 0:De.find(hr=>hr.is_active);nt?(N(nt.plan_id||""),E(nt.status),P(nt.current_period_start?new Date(nt.current_period_start).toISOString().split("T")[0]:""),I(nt.current_period_end?new Date(nt.current_period_end).toISOString().split("T")[0]:"")):(N(""),E("active"),P(new Date().toISOString().split("T")[0]),I("")),F(""),W(""),l(!0)},Zs=()=>{l(!1),b(null),K(!1)},Wl=ne=>{w(ne),te(""),H(""),u(!0)},yo=()=>{u(!1),w(null),z(!1)},Hl=ne=>{j(ne),y(!0)},hs=()=>{y(!1),j(null)},vu=async ne=>{ne.preventDefault(),U(!0),Re(""),Xe("");try{if(!G||!/\S+@\S+\.\S+/.test(G))throw new Error("Please enter a valid email address.");if(t.some(Pn=>Pn.email.toLowerCase()===G.toLowerCase()))throw new Error("A user with this email already exists in the list.");const De={action:"addProfile",data:{username:pe||G.split("@")[0],email:G,role:V}},nt=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await ce.auth.getSession()).data.session.access_token}`},body:JSON.stringify(De)}),hr=await nt.json();if(!nt.ok)throw new Error(hr.error||"Failed to add user profile via Edge Function");Re("User profile added successfully! Full user creation (auth.users) might require backend."),en(),setTimeout(()=>{Ks()},600)}catch(De){console.error("Error adding user:",De),Xe((De instanceof Error?De.message:String(De))||"An unexpected error occurred while adding user.")}finally{U(!1)}},Gs=async ne=>{if(ne.preventDefault(),!!m){K(!0),F(""),W("");try{if(T&&O&&new Date(T)>=new Date(O))throw new Error("End date must be after start date.");const De={action:"updateSubscription",userId:m.id,data:{plan_id:k,status:C,current_period_start:T?new Date(T).toISOString():null,current_period_end:O?new Date(O).toISOString():null}},nt=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await ce.auth.getSession()).data.session.access_token}`},body:JSON.stringify(De)}),hr=await nt.json();if(!nt.ok)throw new Error(hr.error||"Failed to update subscription via Edge Function");F("Subscription updated successfully!"),en(),setTimeout(()=>{Zs()},600)}catch(De){console.error("Error managing subscription:",De),W((De instanceof Error?De.message:String(De))||"An unexpected error occurred while managing subscription.")}finally{K(!1)}}},rf=async ne=>{if(ne.preventDefault(),!!x){z(!0),te(""),H("");try{const De=new FormData(ne.target),nt=De.get("displayName"),hr=De.get("role"),Pn={action:"changeRole",targetUserId:x.id,newRole:hr,data:{display_name:nt}},Rn=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await ce.auth.getSession()).data.session.access_token}`},body:JSON.stringify(Pn)}),Dt=await Rn.json();if(!Rn.ok)throw new Error(Dt.error||"Failed to update user details via Edge Function");te("User details updated successfully!"),en(),setTimeout(()=>{yo()},600)}catch(De){console.error("Error updating user details:",De),H((De instanceof Error?De.message:String(De))||"An unexpected error occurred while updating user details.")}finally{z(!1)}}},nf=async()=>{if(_)try{const ne={action:"deleteUser",targetUserId:_.id},De=await fetch("/functions/v1/manage-user-subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await ce.auth.getSession()).data.session.access_token}`},body:JSON.stringify(ne)}),nt=await De.json();if(!De.ok)throw new Error(nt.error||"Failed to delete user via Edge Function");r(hr=>hr.filter(Pn=>Pn.id!==_.id)),hs(),gn.length===1&&Be>1&&bt(Be-1),alert(`User ${_.email} deleted successfully.`)}catch(ne){console.error("Error deleting user:",ne),alert(`Failed to delete user: ${ne instanceof Error?ne.message:String(ne)}`)}},_a=ne=>{he===ne?rt(_e==="asc"?"desc":"asc"):(ue(ne),rt("asc")),bt(1)},ja=ne=>{ne<1||ne>Hs||bt(ne)},Kl=ne=>{Bt(ne),bt(1)};return n?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),d.jsx("span",{className:"text-gray-600",children:"Loading users and plans..."})]})}):i?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:d.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-red-600 mb-2",children:[d.jsx(li,{className:"w-5 h-5"}),d.jsx("span",{className:"font-semibold",children:"Error"})]}),d.jsx("p",{className:"text-red-700",children:i}),d.jsx("button",{onClick:en,className:"mt-4 px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),d.jsx("p",{className:"text-gray-600",children:"Manage users, subscriptions, and account details"})]}),d.jsx("div",{className:"mt-4 sm:mt-0",children:d.jsxs("button",{onClick:Bl,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[d.jsx(Sae,{className:"w-4 h-4 mr-2"}),"Add User"]})})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(B0,{className:"w-8 h-8 text-blue-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Mo,{className:"w-8 h-8 text-green-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Subscriptions"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(ne=>Ws(ne)==="Active").length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Ip,{className:"w-8 h-8 text-purple-500"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Admin Users"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(ne=>ne.role==="admin").length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(li,{className:"w-8 h-8 text-gray-400"}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:"No Subscription"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(ne=>Ws(ne)==="No Subscription").length})]})]})})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(ou,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),d.jsx("input",{type:"text",placeholder:"Search users...",value:pt,onChange:ne=>{Jt(ne.target.value),bt(1)},className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("select",{value:D,onChange:ne=>{B(ne.target.value),bt(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"All Roles"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"user",children:"User"})]}),d.jsxs("select",{value:Q,onChange:ne=>{ge(ne.target.value),bt(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"All Statuses"}),d.jsx("option",{value:"Active",children:"Active"}),d.jsx("option",{value:"Inactive",children:"Inactive"}),d.jsx("option",{value:"No Subscription",children:"No Subscription"})]}),d.jsxs("select",{value:Qr,onChange:ne=>Kl(Number(ne.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:5,children:"5 per page"}),d.jsx("option",{value:10,children:"10 per page"}),d.jsx("option",{value:25,children:"25 per page"}),d.jsx("option",{value:50,children:"50 per page"})]}),d.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[d.jsx(lae,{className:"w-4 h-4 mr-2"}),ds.length," of ",t.length," users"]})]})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>_a("email"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(qF,{className:"w-4 h-4"}),d.jsx("span",{children:"Email"}),he==="email"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>_a("display_name"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(B0,{className:"w-4 h-4"}),d.jsx("span",{children:"Display Name"}),he==="display_name"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(Ip,{className:"w-4 h-4"}),d.jsx("span",{children:"Role"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>_a("created_at"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(zF,{className:"w-4 h-4"}),d.jsx("span",{children:"Created At"}),he==="created_at"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>_a("last_sign_in"),children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx($F,{className:"w-4 h-4"}),d.jsx("span",{children:"Last Sign In"}),he==="last_sign_in"&&d.jsx("span",{className:"text-blue-500",children:_e==="asc"?"↑":"↓"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[gn.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-sm text-gray-500",children:"No users found."})}),gn.map(ne=>{var De;const nt=Ws(ne);return d.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:d.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:d.jsx(B0,{className:"w-4 h-4 text-gray-500"})})}),d.jsx("div",{className:"ml-3",children:d.jsx("div",{className:"text-sm font-medium text-gray-900",children:ne.email})})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((De=ne.profile)==null?void 0:De.display_name)||"—"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${mo(ne.role)}`,children:ne.role})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[Oi(nt),d.jsx("span",{className:"text-gray-900",children:nt})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Pi(ne.created_at)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.last_sign_in?Pi(ne.last_sign_in):"Never"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:()=>Wl(ne),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50",title:"Edit Details",children:[d.jsx(yae,{className:"w-4 h-4 mr-1"}),"Edit"]}),d.jsxs("button",{onClick:()=>Vl(ne),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50",title:"Manage Subscription",children:[d.jsx(Cm,{className:"w-4 h-4 mr-1"}),"Subscription"]}),d.jsxs("button",{onClick:()=>Hl(ne),className:"inline-flex items-center px-2.5 py-1.5 border border-red-300 text-red-700 rounded-md hover:bg-red-50",title:"Delete User",children:[d.jsx(au,{className:"w-4 h-4 mr-1"}),"Delete"]})]})})]},ne.id)})]})]})}),d.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",Be," of ",Hs]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>ja(Be-1),disabled:Be===1,className:"px-3 py-1.5 text-sm border rounded-md disabled:opacity-50",children:"Previous"}),Array.from({length:Hs}).map((ne,De)=>d.jsx("button",{onClick:()=>ja(De+1),className:`px-3 py-1.5 text-sm border rounded-md ${Be===De+1?"bg-blue-600 text-white border-blue-600":"hover:bg-gray-50"}`,children:De+1},De)),d.jsx("button",{onClick:()=>ja(Be+1),disabled:Be===Hs,className:"px-3 py-1.5 text-sm border rounded-md disabled:opacity-50",children:"Next"})]})]})]})]}),h&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:Ks}),d.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New User"}),d.jsxs("form",{onSubmit:vu,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",value:G,onChange:ne=>fe(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"user@example.com",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name (optional)"}),d.jsx("input",{type:"text",value:pe,onChange:ne=>ke(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jane Doe"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:V,onChange:ne=>X(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"user",children:"User"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),Qe&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx(li,{className:"w-4 h-4"}),Qe]}),Se&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(Mo,{className:"w-4 h-4"}),Se]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:Ks,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:le,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:le?"Adding…":"Add User"})]})]})]})]}),a&&m&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:Zs}),d.jsxs("div",{className:"relative bg-white w-full max-w-xl rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Manage Subscription"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:m.email}),d.jsxs("form",{onSubmit:Gs,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan"}),d.jsxs("select",{value:k,onChange:ne=>N(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"— Select a plan —"}),d.jsx("option",{value:"Monthly",children:"Monthly"}),d.jsx("option",{value:"Yearly",children:"Yearly"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),d.jsxs("select",{value:C,onChange:ne=>E(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"active",children:"active"}),d.jsx("option",{value:"trialing",children:"trialing"}),d.jsx("option",{value:"canceled",children:"canceled"}),d.jsx("option",{value:"paused",children:"paused"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),d.jsx("input",{type:"date",value:T,onChange:ne=>P(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),d.jsx("input",{type:"date",value:O,onChange:ne=>I(ne.target.value),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),$&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx(li,{className:"w-4 h-4"}),$]}),R&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(Mo,{className:"w-4 h-4"}),R]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:Zs,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:q,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:q?"Saving…":"Save Changes"})]})]})]})]}),c&&x&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:yo}),d.jsxs("div",{className:"relative bg-white w-full max-w-lg rounded-lg shadow-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Edit User Details"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:x.email}),d.jsxs("form",{onSubmit:rf,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),d.jsx("input",{name:"displayName",type:"text",defaultValue:((e=x.profile)==null?void 0:e.display_name)||"",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jane Doe"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{name:"role",defaultValue:x.role,className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"user",children:"User"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),be&&d.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[d.jsx(li,{className:"w-4 h-4"}),be]}),J&&d.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[d.jsx(Mo,{className:"w-4 h-4"}),J]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:yo,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:Z,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:Z?"Saving…":"Save Changes"})]})]})]})]}),p&&_&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:hs}),d.jsxs("div",{className:"relative bg-white w-full max-w-md rounded-lg shadow-lg p-6",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"shrink-0 mt-1",children:d.jsx(li,{className:"w-6 h-6 text-red-600"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Delete user?"}),d.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["This will permanently remove ",d.jsx("span",{className:"font-mono",children:_.email})," and their subscriptions from the local list."]})]})]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 mt-6",children:[d.jsx("button",{onClick:hs,className:"px-4 py-2 rounded-md border",children:"Cancel"}),d.jsx("button",{onClick:nf,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})]})]})},fUe=()=>{const e=v.useRef(null);return v.useEffect(()=>{const t=e.current;if(!t)return;const r=50,n=()=>{const i=document.createElement("div");i.className="star absolute bg-ink rounded-full",i.style.left=Math.random()*100+"%",i.style.top=Math.random()*100+"%";const o=Math.random()*3+1;i.style.width=i.style.height=o+"px",i.style.animationDelay=Math.random()*3+"s",i.style.animationDuration=Math.random()*2+2+"s",t.appendChild(i)};t.innerHTML="";for(let i=0;i<r;i++)n();const s=()=>{const i=window.pageYOffset*-.1;t&&(t.style.transform=`translateY(${i}px)`)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[]),d.jsx("div",{ref:e,className:"stars fixed top-0 left-0 w-full h-full pointer-events-none -z-10",children:" "})},pUe=async()=>{const{data:e,error:t}=await ce.from("works").select("id, title");if(t)throw new Error(t.message);return e},mUe=async e=>{const{data:t,error:r}=await ce.from("works").insert({title:e,type:"book"}).select();if(r)throw new Error(r.message);return t[0]},gUe=()=>{const e=fa(),[t,r]=v.useState(null),[n,s]=v.useState(""),[i,o]=v.useState(1),[a,l]=v.useState(""),[c,u]=v.useState(""),[h,f]=v.useState(!1),[p,y]=v.useState(!1),{data:m,isLoading:b,isError:x,error:w}=It({queryKey:["books"],queryFn:pUe}),_=tr({mutationFn:mUe,onSuccess:N=>{e.invalidateQueries({queryKey:["books"]}),l(N.id),u(""),$i.success(`Book "${N.title}" created successfully!`)},onError:N=>{$i.error(`Error creating book: ${N.message}`)}}),j=N=>{N.target.files&&N.target.files[0]&&r(N.target.files[0])},k=async N=>{if(N.preventDefault(),!t||!n||!i){$i.error("Please fill in all required chapter fields and select a file.");return}let C=a;if(c){if(_.isPending){$i.error("Book creation is already in progress. Please wait.");return}try{C=(await _.mutateAsync(c)).id}catch{return}}if(!C){$i.error("Please select an existing book or create a new one.");return}y(!0);const E=new FormData;E.append("file",t),E.append("title",n),E.append("chapter_number",i.toString()),E.append("book_id",C),E.append("is_published",h.toString());try{const{data:{session:T},error:P}=await ce.auth.getSession();if(P||!T){$i.error("User session not found. Please log in."),y(!1);return}const O=await fetch("/api/chapters/upload",{method:"POST",body:E,headers:{Authorization:`Bearer ${T.access_token}`}});if(!O.ok){const I=await O.json();throw new Error(I.message||I.error||"Failed to upload chapter.")}await O.json(),$i.success("Chapter uploaded successfully!"),r(null),s(""),o(1),l(""),u(""),f(!1),N.target instanceof HTMLFormElement&&N.target.reset()}catch(T){console.error("Upload error:",T),$i.error(T.message||"An error occurred during upload.")}finally{y(!1)}};return b?d.jsx("div",{className:"text-center py-8",children:"Loading books..."}):x?d.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading books: ",w==null?void 0:w.message]}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx(y3e,{}),d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Upload New Chapter"}),d.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:d.jsxs("form",{onSubmit:k,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"file",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter File (PDF, DOCX, TXT, HTML)"}),d.jsx("input",{type:"file",id:"file",onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",accept:".pdf,.docx,.txt,.html",required:!0}),t&&d.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Selected file: ",t.name]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"chapterTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter Title"}),d.jsx("input",{type:"text",id:"chapterTitle",value:n,onChange:N=>s(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"chapterNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter Number"}),d.jsx("input",{type:"number",id:"chapterNumber",value:i,onChange:N=>o(parseInt(N.target.value)||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,min:"1"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"bookId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Existing Book"}),d.jsxs("select",{id:"bookId",value:a,onChange:N=>l(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"-- Select a Book --"}),m==null?void 0:m.map(N=>d.jsx("option",{value:N.id,children:N.title},N.id))]})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("span",{className:"text-gray-500 mr-2",children:"OR"}),d.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"newBookTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Create New Book"}),d.jsx("input",{type:"text",id:"newBookTitle",value:c,onChange:N=>u(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new book title"})]}),d.jsxs("div",{className:"mb-4 flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isPublished",checked:h,onChange:N=>f(N.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),d.jsx("label",{htmlFor:"isPublished",className:"text-sm font-medium text-gray-700",children:"Publish Immediately"})]}),d.jsx("button",{type:"submit",className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:p||_.isPending,children:p?d.jsxs(d.Fragment,{children:[d.jsx(sae,{className:"w-4 h-4 animate-pulse"}),"Uploading Chapter..."]}):_.isPending?d.jsxs(d.Fragment,{children:[d.jsx(tae,{className:"w-4 h-4 animate-pulse"}),"Creating Book..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Yo,{className:"w-4 h-4"}),"Upload Chapter"]})})]})})]})},Xy=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Dr("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Xy.displayName="Card";const Qy=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Dr("flex flex-col space-y-1.5 p-6",e),...t}));Qy.displayName="CardHeader";const $S=v.forwardRef(({className:e,...t},r)=>d.jsx("h3",{ref:r,className:Dr("text-2xl font-semibold leading-none tracking-tight",e),...t}));$S.displayName="CardTitle";const yUe=v.forwardRef(({className:e,...t},r)=>d.jsx("p",{ref:r,className:Dr("text-sm text-muted-foreground",e),...t}));yUe.displayName="CardDescription";const ev=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Dr("p-6 pt-0",e),...t}));ev.displayName="CardContent";const vUe=v.forwardRef(({className:e,...t},r)=>d.jsx("div",{ref:r,className:Dr("flex items-center p-6 pt-0",e),...t}));vUe.displayName="CardFooter";const bUe=Jb("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary/10 text-primary hover:bg-primary/20",secondary:"border-transparent bg-secondary/10 text-secondary-foreground hover:bg-secondary/20",destructive:"border-transparent bg-destructive/10 text-destructive hover:bg-destructive/20",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function rM({className:e,variant:t,...r}){return d.jsx("div",{className:Dr(bUe({variant:t}),e),...r})}const US=v.forwardRef(({value:e,onChange:t,theme:r="snow",modules:n={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},formats:s=["header","bold","italic","underline","strike","list","bullet","link","image"],...i},o)=>{const a=l=>{try{t&&t(l)}catch(c){console.error("Error in handleChange:",c)}};return d.jsx("div",{className:"mt-4",children:d.jsx(rg,{ref:o,theme:r,value:e,onChange:a,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","link","image"],...i})})});US.displayName="QuillEditor";function qS({id:e,onUpdatePage:t,initialData:r}){const{id:n}=nu(),s=uo(),[i,o]=v.useState(!!e),[a,l]=v.useState(!1),[c,u]=v.useState([]),[h,f]=v.useState(""),[p,y]=v.useState(!1),[m,b]=v.useState(null),[x,w]=v.useState(""),[_,j]=v.useState(!1),[k,N]=v.useState(()=>r?{...r,category:r.category||null,user:r.user||null}:{id:"",title:"",slug:"",excerpt:null,content:"",seo_title:null,seo_description:null,seo_keywords:[],sections:[],category_id:null,is_published:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:null,folder_id:null,view_count:null,category:null,user:null}),[C,E]=v.useState("");v.useEffect(()=>{const H=e||n;T(),H?P(H):o(!1)},[e,n]);const T=async()=>{try{console.log("Fetching categories...");const H=await hJ();u(H||[]),(!H||H.length===0)&&(console.warn("No categories found in the database"),Ve.warning("No categories found. Please create categories first."))}catch(H){console.error("Error in fetchCategories:",H),Ve.error("Failed to load categories. Check console for details.")}},P=async H=>{try{const G=await g6(H);if(G){const fe={...G,sections:G.sections||[]};N(fe),G.category&&b(G.category)}else throw new Error("Wiki page not found.")}catch(G){console.error("Error fetching wiki page:",G),Ve.error("Failed to load wiki page")}finally{o(!1)}},O=H=>{const{name:G,value:fe}=H.target;N(pe=>({...pe,[G]:fe}))},I=H=>{const G={id:`section-${Date.now()}`,title:"New Section",content:"",type:H||"paragraph"};N(fe=>({...fe,sections:[...fe.sections,G]}))},R=(H,G)=>{N(fe=>({...fe,sections:fe.sections.map(pe=>pe.id===H?{...pe,...G}:pe)}))},F=H=>{if(k.sections.length<=1){Ve.error("You must have at least one section");return}N(G=>({...G,sections:G.sections.filter(fe=>fe.id!==H)}))},$=H=>{b(H),N(G=>({...G,category_id:H.id})),y(!1)},W=()=>{b(null),N(H=>({...H,category_id:null}))},q=H=>H.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").trim(),K=H=>{const G=H.target.value;N(fe=>({...fe,title:G,slug:q(G),seo_title:fe.seo_title||G}))},Z=async()=>{var H,G;l(!0);try{if(!((H=k==null?void 0:k.title)!=null&&H.trim())){Ve.error("Title is required"),l(!1);return}if(!((G=k.slug)!=null&&G.trim())){Ve.error("Slug is required"),l(!1);return}const{data:{user:fe},error:pe}=await ce.auth.getUser();if(pe||!fe){Ve.error("You must be signed in to save changes."),l(!1);return}const ke={title:k.title.trim(),slug:k.slug.trim(),category_id:k.category_id||null,is_published:k.is_published,updated_at:new Date().toISOString()};let V=null;if(e){const{data:X,error:le}=await ce.from("wiki_pages").update(ke).eq("id",e).select().single();if(le)throw le;if(X)V=X;else throw new Error("Page data not found after update.");Ve.success("Wiki page updated successfully");const{error:U}=await ce.from("wiki_content_blocks").delete().eq("page_id",V.id);if(U)throw console.error("Error deleting old content blocks:",U),new Error("Failed to update content blocks")}else{const{data:X,error:le}=await ce.from("wiki_pages").insert([{...ke,created_by:fe.id,created_at:new Date().toISOString(),view_count:0}]).select("*, user:profiles(*), category:wiki_categories(*)").single();if(le)throw le;if(X)V=X;else throw new Error("Page data not found after creation.");Ve.success("Wiki page created successfully")}if(V&&k.sections&&k.sections.length>0){const X=k.sections.map((U,Se)=>({page_id:V.id,type:U.type,content:U.content,position:Se,created_by:fe.id})),{error:le}=await ce.from("wiki_content_blocks").insert(X);if(le)throw console.error("Error saving content blocks:",le),new Error("Failed to save content blocks")}if(V){let X=null;V.user&&typeof V.user=="object"&&!("error"in V.user)&&(X=V.user);const le={...V,title:k.title,slug:k.slug,excerpt:k.excerpt||null,is_published:k.is_published,category_id:k.category_id||null,category:m||null,sections:k.sections||[],created_at:V.created_at||new Date().toISOString(),updated_at:new Date().toISOString(),user:X};t&&t(le),e||s(`/account/admin/wiki/page/${V.id}`)}}catch(fe){throw console.error("Error saving wiki page:",fe),fe.code==="23505"?Ve.error("A page with this slug already exists"):fe.code==="42501"?Ve.error("You do not have permission to perform this action"):Ve.error(`Failed to save wiki page: ${(fe instanceof Error?fe.message:String(fe))||"Unknown error"}`),fe}finally{l(!1)}},z=async()=>{const H=!k.is_published;if(N(G=>({...G,is_published:H})),e)try{const{error:G}=await ce.from("wiki_pages").update({is_published:H,published_at:H?new Date().toISOString():null}).eq("id",e);if(G)throw G;Ve.success(`Page ${H?"published":"unpublished"} successfully`)}catch(G){console.error("Error updating publish status:",G),Ve.error(`Failed to update page status: ${G instanceof Error?G.message:String(G)}`),N(fe=>({...fe,is_published:!H}))}},J=async()=>{if(!x.trim()){Ve.error("Category name cannot be empty");return}try{const{data:{user:H}}=await ce.auth.getUser();if(!H){Ve.error("You must be logged in to create categories");return}const{data:G,error:fe}=await ce.from("wiki_categories").insert([{name:x.trim(),slug:x.trim().toLowerCase().replace(/\s+/g,"-"),created_by:H.id,is_active:!0}]).select().single();if(fe)throw console.error("Error creating category:",fe),new Error("Failed to create category");if(G===null){console.error("No data returned after creating category, but no error was thrown."),Ve.error("Failed to create category: No data received.");return}const pe=G;u(ke=>[...ke,pe]),$(pe),w(""),j(!1),Ve.success("Category created successfully")}catch(H){console.error("Error creating category:",H),Ve.error("Failed to create category")}},te=()=>d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{children:"Category"}),m?d.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(rM,{className:"h-4 w-4 mr-2 text-muted-foreground"}),d.jsx("span",{children:m.name})]}),d.jsx(ct,{type:"button",variant:"ghost",size:"sm",onClick:W,children:d.jsx(pl,{className:"h-4 w-4"})})]}):_?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(pi,{placeholder:"Enter category name",value:x,onChange:H=>w(H.target.value),autoFocus:!0}),d.jsx(ct,{type:"button",onClick:J,disabled:!x.trim(),children:"Add"})]}),d.jsx(ct,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(!1),children:"Cancel"})]}):d.jsxs("div",{className:"space-y-2",children:[d.jsxs(ct,{type:"button",variant:"outline",className:"w-full justify-start",onClick:()=>y(!0),children:[d.jsx(rM,{className:"h-4 w-4 mr-2"}),"Select a category"]}),d.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["or"," ",d.jsx("button",{type:"button",className:"text-primary hover:underline",onClick:()=>j(!0),children:"create a new category"})]})]})]}),be=H=>{const G=fe=>{R(H.id,{content:fe})};switch(H.type){case"heading_1":case"heading_2":case"heading_3":case"paragraph":case"bullet_list":case"ordered_list":return d.jsx("div",{className:"mt-4",children:d.jsx(US,{value:H.content||"",onChange:G,placeholder:"Start writing..."})});case"quote":return d.jsx("div",{className:"mt-4 border-l-4 border-gray-300 pl-4 italic",children:d.jsx(US,{value:H.content||"",onChange:G,placeholder:"Start writing..."})});case"code":return d.jsx("div",{className:"mt-4 bg-gray-100 p-4 rounded-md font-mono text-sm",children:d.jsx(XE,{value:H.content||"",onChange:fe=>R(H.id,{content:fe.target.value}),placeholder:"Enter code...",rows:6,className:"font-mono"})});case"divider":return d.jsx("div",{className:"my-6 border-t border-gray-200"});case"image":return d.jsxs("div",{className:"mt-4",children:[d.jsx(pi,{type:"text",value:H.content||"",onChange:fe=>R(H.id,{content:fe.target.value}),placeholder:"Enter image URL..."}),H.content&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:H.content,alt:"Section content",className:"max-w-full h-auto rounded-md"})})]});default:return d.jsxs("div",{className:"mt-4 text-gray-500 italic",children:["Unsupported section type: ",H.type]})}};return i?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx(Jd,{className:"h-8 w-8 animate-spin"})}):(h&&c.filter(H=>H.name.toLowerCase().includes(h.toLowerCase())),d.jsx("div",{className:"container mx-auto p-6",children:d.jsxs("form",{onSubmit:H=>H.preventDefault(),children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs(ct,{type:"button",variant:"outline",size:"sm",onClick:()=>s("/account/admin/wiki"),children:[d.jsx(MF,{className:"mr-2 h-4 w-4"})," Back to Wiki"]}),d.jsx("h1",{className:"text-2xl font-bold",children:e?"Edit Wiki Page":"Create New Wiki Page"})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(js,{htmlFor:"is_published",children:"Publish"}),d.jsx(Sv,{id:"is_published",checked:k.is_published,onCheckedChange:z})]}),d.jsx(ct,{type:"button",disabled:a,onClick:Z,children:a?d.jsxs(d.Fragment,{children:[d.jsx(Jd,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):d.jsxs(d.Fragment,{children:[d.jsx(DE,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2 space-y-6",children:d.jsxs(Xy,{children:[d.jsx(Qy,{children:d.jsx($S,{children:"Page Content"})}),d.jsxs(ev,{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{htmlFor:"title",children:"Title *"}),d.jsx(pi,{id:"title",name:"title",value:k.title,onChange:K,placeholder:"Enter page title",required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(js,{htmlFor:"slug",children:"URL Slug *"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:`${window.location.origin}/wiki/${k.slug||"your-page-slug"}`})]}),d.jsx(pi,{id:"slug",name:"slug",value:k.slug,onChange:O,placeholder:"page-slug",required:!0})]}),te(),d.jsxs("div",{className:"space-y-2",children:[d.jsx(js,{children:"Sections"}),k.sections.map((H,G)=>d.jsxs(Xy,{className:"mb-4",children:[d.jsx(Qy,{children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(pi,{value:H.title,onChange:fe=>R(H.id,{title:fe.target.value}),placeholder:"Section Title",className:"text-xl font-bold"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("select",{value:H.type,onChange:fe=>R(H.id,{type:fe.target.value}),className:"text-sm p-1 border rounded",children:[d.jsx("option",{value:"paragraph",children:"Paragraph"}),d.jsx("option",{value:"heading_1",children:"Heading 1"}),d.jsx("option",{value:"heading_2",children:"Heading 2"}),d.jsx("option",{value:"heading_3",children:"Heading 3"}),d.jsx("option",{value:"bullet_list",children:"Bullet List"}),d.jsx("option",{value:"ordered_list",children:"Ordered List"}),d.jsx("option",{value:"image",children:"Image"}),d.jsx("option",{value:"table",children:"Table"}),d.jsx("option",{value:"quote",children:"Quote"}),d.jsx("option",{value:"code",children:"Code"}),d.jsx("option",{value:"divider",children:"Divider"})]}),d.jsx(ct,{variant:"ghost",size:"icon",type:"button",onClick:()=>F(H.id),disabled:k.sections.length<=1,children:d.jsx(pl,{className:"h-4 w-4"})})]})]})}),d.jsx(ev,{children:be(H)})]},H.id))]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.jsx(ct,{type:"button",variant:"outline",onClick:()=>I("paragraph"),children:"Add Paragraph"}),d.jsx(ct,{type:"button",variant:"outline",onClick:()=>I("heading_1"),children:"Add Heading 1"}),d.jsx(ct,{type:"button",variant:"outline",onClick:()=>I("quote"),children:"Add Quote"})]})]})]})}),d.jsx("div",{className:"space-y-6",children:d.jsxs(Xy,{children:[d.jsx(Qy,{children:d.jsx($S,{children:"Publishing"})}),d.jsxs(ev,{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Status"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:k.is_published?"Published":"Draft"})]}),d.jsx(Sv,{checked:k.is_published,onCheckedChange:z})]}),e&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-medium",children:"URL"}),d.jsx("div",{className:"flex items-center",children:d.jsxs("a",{href:`/wiki/${k.slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center",children:["View page ",d.jsx(Cm,{className:"ml-1 h-3 w-3"})]})})]})]})]})})]})]})}))}function xUe({folders:e,pages:t,selectedFolder:r,selectedPage:n,onSelect:s,onPageSelect:i,onDeleteFolder:o,onEditFolder:a,onDeletePage:l,onEditPage:c}){const u=v.useMemo(()=>{const f=new Map,p=[];e.forEach(m=>{const b={...m,children:[],pages:[],type:"folder"};f.set(m.id,b)}),e.forEach(m=>{const b=f.get(m.id);if(b&&m.parent_id&&f.has(m.parent_id)){const x=f.get(m.parent_id);x&&x.children.push(b)}else b&&p.push(b)});const y=[];return t.forEach(m=>{const b={id:m.id,title:m.title,slug:m.slug,folder_id:m.folder_id,category_id:m.category_id,created_at:m.created_at,updated_at:m.updated_at,created_by:m.created_by,is_published:m.is_published||!1,excerpt:m.excerpt||null,view_count:m.view_count||0,type:"page",content:m.content};if(m.folder_id&&f.has(m.folder_id)){const x=f.get(m.folder_id);x&&x.pages.push(b)}else m.folder_id||y.push(b)}),[...p,...y]},[e,t]),h=(f,p=0)=>f?f.type==="page"?d.jsxs("div",{className:Dr("flex items-center px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-800",n===f.id&&"bg-blue-50 dark:bg-blue-900/30"),onClick:()=>i(f.id),children:[d.jsx(hv,{className:"h-4 w-4 mr-2 text-gray-500"}),d.jsx("span",{className:"truncate",children:f.title})]},f.id):d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:Dr("flex items-center justify-between p-2 rounded-md cursor-pointer",r===f.id?"bg-blue-50 dark:bg-blue-900/30":"hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:()=>s(f.id),children:[d.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[d.jsx(fv,{className:"h-4 w-4 text-blue-500"}),d.jsx("span",{className:"truncate",children:f.name})]}),d.jsxs("div",{className:"flex space-x-1",children:[d.jsx(ct,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:y=>{y.stopPropagation(),a(f)},children:d.jsx(_ae,{className:"h-3.5 w-3.5"})}),d.jsx(ct,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500 hover:text-red-600",onClick:y=>{y.stopPropagation(),o(f.id)},children:d.jsx(au,{className:"h-3.5 w-3.5"})})]})]}),f.children.length>0&&d.jsx("div",{className:"pl-4 border-l border-gray-200 dark:border-gray-700",children:f.children.map(y=>h(y,p+1))}),f.pages.length>0&&d.jsx("div",{className:"pl-4",children:f.pages.map(y=>h(y,p+1))})]},f.id):null;return d.jsx("div",{className:"space-y-1",children:u.map(f=>d.jsx("div",{children:h(f,0)},f.id))})}function nM(){const{folderId:e}=nu(),t=uo(),[r,n]=v.useState([]),[s,i]=v.useState([]),[o,a]=v.useState(""),[l,c]=v.useState(""),[u,h]=v.useState(!1),[f,p]=v.useState(!1),[y,m]=v.useState(null),[b,x]=v.useState(null),[w,_]=v.useState(null),[j,k]=v.useState(""),[N,C]=v.useState(!0);v.useEffect(()=>{(async()=>{try{C(!0);const{data:z,error:J}=await ce.from("wiki_folders").select("*").order("name");if(J)throw J;const{data:te,error:be}=await ce.from("wiki_pages").select(`
            *,
            sections:wiki_sections(*)
          `);if(be)throw be;const H=(te||[]).map(G=>({...G,sections:(G.sections||[]).map(fe=>({...fe,content:fe.content||""}))}));n(z||[]),i(H)}catch(z){console.error("Error fetching wiki data:",z),Ve.error("Failed to load wiki content")}finally{C(!1)}})()},[]);const E=async()=>{if(o.trim())try{const z=(await ce.auth.getUser()).data.user;if(!z){Ve.error("You must be logged in to create a folder");return}const{data:J,error:te}=await ce.from("wiki_folders").insert([{name:o.trim(),slug:o.trim().toLowerCase().replace(/\s+/g,"-"),parent_id:e||null,created_by:z.id}]).select().single();if(te)throw te;n(be=>[...be,J]),a(""),h(!1),t(`/account/admin/wiki/folder/${J.id}`),Ve.success("Folder created successfully")}catch(z){console.error("Error creating folder:",z),Ve.error(z instanceof Error?z.message:"Failed to create folder")}},T=async z=>{try{const J=(await ce.auth.getUser()).data.user;if(!J){Ve.error("You must be logged in to create a page");return}const{data:te,error:be}=await ce.from("wiki_pages").insert([{title:"New Page",content:"",folder_id:z||null,is_published:!1,created_by:J.id,excerpt:"",slug:"new-page-"+Date.now(),seo_title:"New Page",seo_description:"",seo_keywords:[],view_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),category_id:null}]).select("*").single();if(be)throw be;i(H=>[...H,{...te,sections:[]}]),te&&(m(te.id),x(te.id)),c(""),p(!1),Ve.success("Page created successfully")}catch(J){console.error("Error creating page:",J),Ve.error(J instanceof Error?J.message:"Failed to create page")}},P=z=>{x(z.id),m(z.id)},O=async z=>{if(confirm("Are you sure you want to delete this page? This action cannot be undone."))try{C(!0);const{error:J}=await ce.from("wiki_content_blocks").delete().eq("page_id",z);if(J)throw J;const{error:te}=await ce.from("wiki_pages").delete().eq("id",z);if(te)throw te;i(be=>be.filter(H=>H.id!==z)),y===z&&(m(null),x(null)),Ve.success("Page deleted successfully")}catch(J){console.error("Error deleting page:",J),Ve.error("Failed to delete page")}finally{C(!1)}},I=async z=>{var J;try{const{data:te,error:be}=await ce.from("wiki_pages").upsert({...z,updated_at:new Date().toISOString(),updated_by:(J=(await ce.auth.getUser()).data.user)==null?void 0:J.id}).select().single();if(be)throw be;return i(H=>H.map(G=>G.id===te.id?{...G,...te}:G)),Ve.success("Page saved successfully"),te}catch(te){throw console.error("Error saving page:",te),Ve.error("Failed to save page"),te}},R=z=>{_(z),k(z.name)},F=async()=>{if(!(!w||!j.trim()))try{const{data:z,error:J}=await ce.from("wiki_folders").update({name:j.trim(),slug:j.trim().toLowerCase().replace(/\s+/g,"-")}).eq("id",w.id).select().single();if(J)throw J;n(te=>te.map(be=>be.id===z.id?z:be)),_(null),k(""),Ve.success("Folder updated successfully")}catch(z){console.error("Error updating folder:",z),Ve.error("Failed to update folder")}},$=async z=>{var J;if(confirm("Are you sure you want to delete this folder and all its contents? This action cannot be undone."))try{C(!0);const{error:te}=await ce.from("wiki_folders").delete().eq("id",z);if(te)throw te;const be=(H,G)=>H.reduce((fe,pe)=>pe.id===G||pe.parent_id===G?fe:[...fe,pe],[]);if(n(H=>be(H,z)),z===z||r.some(H=>H.parent_id===z&&H.id===z)){const H=(J=r.find(G=>G.id===z))==null?void 0:J.parent_id;t(H?`/account/admin/wiki/folder/${H}`:"/account/admin/wiki")}Ve.success("Folder and its contents deleted successfully")}catch(te){console.error("Error deleting folder:",te),Ve.error("Failed to delete folder. Please try again.")}finally{C(!1)}},W=async(z,J)=>{try{if(r.some(te=>te.id===z)){const{error:te}=await ce.from("wiki_folders").update({parent_id:J}).eq("id",z);if(te)throw te;n(be=>be.map(H=>H.id===z?{...H,parent_id:J}:H))}else{const{error:te}=await ce.from("wiki_pages").update({folder_id:J}).eq("id",z);if(te)throw te;i(be=>be.map(H=>H.id===z?{...H,folder_id:J}:H))}Ve.success("Item moved successfully")}catch(te){console.error("Error moving item:",te),Ve.error("Failed to move item")}},q=z=>{m(null),x(null),t(`/account/admin/wiki/folder/${z}`)};v.useMemo(()=>{const z=new Map,J=[];r.forEach(H=>{z.set(H.id,{...H,children:[]})}),r.forEach(H=>{const G=z.get(H.id);if(G)if(H.parent_id&&z.has(H.parent_id)){const fe=z.get(H.parent_id);fe&&fe.children.push(G)}else J.push(G)});const te=H=>[...H].sort((G,fe)=>{var pe,ke;return(((pe=G.data)==null?void 0:pe.order_index)??0)-(((ke=fe.data)==null?void 0:ke.order_index)??0)}),be=H=>te(H).map(G=>({...G,children:G.children?be(G.children):[]}));return be(J)},[r,e]);const K=r.find(z=>z.id===e),Z=s.find(z=>z.id===y);return d.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[d.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Wiki Manager"}),d.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-2 overflow-x-auto",children:[d.jsx("button",{onClick:()=>t("/account/admin/wiki"),className:"hover:text-blue-600 dark:hover:text-blue-400",children:"Home"}),K&&d.jsxs(d.Fragment,{children:[d.jsx(RE,{className:"h-4 w-4 mx-1"}),d.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:K.name})]})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[d.jsxs("div",{className:"space-y-2 mb-4",children:[d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs(ct,{variant:"outline",size:"sm",className:"flex-1 justify-center bg-white dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>T(e),children:[d.jsx(Yo,{size:14,className:"mr-2"}),"New Page"]}),d.jsxs(ct,{variant:"outline",size:"sm",className:"flex-1 justify-center bg-white dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>h(!u),children:[d.jsx(fv,{size:14,className:"mr-2"}),"New Folder"]})]}),u&&d.jsxs("div",{className:"flex space-x-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700",children:[d.jsx(pi,{autoFocus:!0,value:o,onChange:z=>a(z.target.value),onKeyDown:z=>z.key==="Enter"&&E(),placeholder:"Folder name",className:"h-8 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.jsx(ct,{size:"sm",onClick:E,disabled:!o.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add"})]}),f&&d.jsxs("div",{className:"flex space-x-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700",children:[d.jsx(pi,{autoFocus:!0,value:l,onChange:z=>c(z.target.value),onKeyDown:z=>{z.key==="Enter"&&T(e)},placeholder:"Page title",className:"h-8 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.jsx(ct,{size:"sm",onClick:()=>T(e),disabled:!l.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add"})]})]}),d.jsx("div",{className:"mt-2",children:N?d.jsx("div",{className:"flex justify-center py-4",children:d.jsx(Jd,{className:"h-4 w-4 animate-spin text-gray-700 dark:text-gray-300"})}):d.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:d.jsx(xUe,{folders:r,pages:s,selectedFolder:e,selectedPage:y,onSelect:q,onPageSelect:z=>{m(z),x(z)},onDeleteFolder:$,onEditFolder:R,onDeletePage:O,onEditPage:P,onMoveItem:W})})})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Z?d.jsx(qS,{id:Z.id,onUpdatePage:I}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[d.jsx(hv,{className:"h-16 w-16 text-gray-400 mb-4"}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:K?`No pages in ${K.name}`:"No page selected"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:K?"Create a new page in this folder using the sidebar.":"Select a page from the sidebar or create a new one."}),d.jsxs(ct,{onClick:()=>T(e),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[d.jsx(Yo,{className:"h-4 w-4 mr-2"}),"New Page"]})]})}),w&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-96",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Folder"}),d.jsx(pi,{autoFocus:!0,value:j,onChange:z=>k(z.target.value),onKeyDown:z=>z.key==="Enter"&&F(),placeholder:"Folder name",className:"mb-4"}),d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx(ct,{variant:"outline",onClick:()=>{_(null),k("")},children:"Cancel"}),d.jsx(ct,{onClick:F,disabled:!j.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Save Changes"})]})]})})]})}const sM=()=>d.jsx("div",{children:d.jsx("h1",{className:"text-3xl font-bold",children:"Timelines"})}),wUe={"Stage 1":{title:"Basic Information & Pre-Screening",description:"Initial qualification and basic details",auto_disqualify:!0,min_score_required:15,max_possible_score:30,questions:[{id:"reading_frequency",type:"multiple_choice",question:"How many books do you typically read per year?",options:[{text:"0-5 books",score:1},{text:"6-11 books",score:3},{text:"12-24 books",score:5},{text:"25-49 books",score:7},{text:"50+ books",score:10}],weight:.33,required:!0},{id:"genre_familiarity",type:"multiple_choice",question:"How familiar are you with [YOUR GENRE] fiction?",options:[{text:"Never read it",score:1},{text:"Read a few books",score:3},{text:"Read occasionally",score:5},{text:"Read regularly",score:7},{text:"Expert knowledge",score:10}],weight:.33,required:!0},{id:"time_commitment",type:"multiple_choice",question:"How many hours per week can you dedicate to beta reading?",options:[{text:"1-2 hours",score:2},{text:"3-5 hours",score:5},{text:"6-9 hours",score:7},{text:"10-14 hours",score:9},{text:"15+ hours",score:10}],weight:.34,required:!0}]},"Stage 2":{title:"Experience & Skills Assessment",description:"Detailed evaluation of reading and feedback experience",conditional_display:!0,min_score_required:25,max_possible_score:40,questions:[{id:"beta_experience",type:"multiple_choice",question:"How many beta reading projects have you completed?",options:[{text:"None",score:2},{text:"1 project",score:4},{text:"2-4 projects",score:6},{text:"5-9 projects",score:8},{text:"10+ projects",score:10}],weight:.25,required:!0},{id:"feedback_strengths",type:"checkbox_multiple",question:"What are your strongest areas for providing feedback? (Select all that apply)",options:[{text:"Plot structure and pacing",score:3},{text:"Character development",score:3},{text:"Dialogue authenticity",score:2},{text:"World-building consistency",score:2},{text:"Grammar and style",score:2},{text:"Emotional impact",score:2}],weight:.3,max_selections:4,required:!0},{id:"writing_background",type:"multiple_choice",question:"What best describes your writing/editing background?",options:[{text:"No writing experience",score:2},{text:"Casual writer",score:4},{text:"Serious writer (unpublished)",score:6},{text:"Published author",score:8},{text:"Professional editor/reviewer",score:10}],weight:.25,required:!0},{id:"reading_speed",type:"slider",question:"Approximately how many pages can you read per hour?",min:10,max:100,step:5,scoring_formula:"Math.min(10, Math.floor(value / 10))",weight:.2,required:!0}]},"Stage 3":{title:"Sample Feedback Analysis",description:"Evaluate analytical skills through sample text review",min_score_required:30,max_possible_score:50,questions:[{id:"excerpt_analysis",type:"textarea",question:"Read this excerpt and identify what works well (100-300 words):",sample_text:"The obsidian gates groaned, not with the weight of stone, but with the sorrow of ages. Kaelen watched from the shadows, his breath a ghost in the frigid air, as the sigil on the archway pulsed with a faint, sickly green light. It was a warning. It was an invitation.",scoring_criteria:[{aspect:"Identifies specific literary techniques",max_score:3},{aspect:"Provides concrete examples from text",max_score:3},{aspect:"Shows genre awareness",max_score:2},{aspect:"Demonstrates emotional engagement",max_score:2}],min_words:100,max_words:300,weight:.3,required:!0},{id:"problem_identification",type:"textarea",question:"What, if anything, was confusing or unclear? How could it be improved? (100-300 words)",scoring_criteria:[{aspect:"Identifies genuine readability issues",max_score:3},{aspect:"Distinguishes objective vs subjective concerns",max_score:3},{aspect:"Explains reasoning clearly",max_score:2},{aspect:"Provides constructive context",max_score:2}],min_words:100,max_words:300,weight:.3,required:!0},{id:"actionable_suggestion",type:"textarea",question:"Provide one specific, actionable suggestion to enhance this scene (60-200 words)",scoring_criteria:[{aspect:"Offers specific, implementable solution",max_score:4},{aspect:"Shows understanding of author's intent",max_score:3},{aspect:"Suggests enhancement rather than just fixes",max_score:3}],min_words:60,max_words:200,weight:.4,required:!0}]},"Stage 4":{title:"Final Assessment & Preferences",description:"Communication style and final compatibility check",min_score_required:20,max_possible_score:30,questions:[{id:"communication_style",type:"multiple_choice",question:"How would you describe your feedback style?",options:[{text:"Direct and detailed",score:8},{text:"Gentle but thorough",score:10},{text:"Focused on major issues",score:6},{text:"Encouraging with suggestions",score:9},{text:"Technical and analytical",score:7}],weight:.4,required:!0},{id:"availability_window",type:"date_range",question:"What is your availability window for this project?",scoring_criteria:[{aspect:"Matches project timeline",max_score:5},{aspect:"Provides realistic timeframe",max_score:3},{aspect:"Shows flexibility",max_score:2}],weight:.3,required:!0},{id:"motivation",type:"textarea",question:"Why do you want to be a beta reader for this project? (50-150 words)",scoring_criteria:[{aspect:"Shows genuine interest in the work",max_score:4},{aspect:"Demonstrates understanding of role",max_score:3},{aspect:"Articulates value they can provide",max_score:3}],min_words:50,max_words:150,weight:.3,required:!0}]}},_Ue={overall_thresholds:{auto_accept:90,strong_candidate:75,interview_required:60}},jUe={application_stages:wUe,scoring_system:_Ue},iM=jUe,gj=()=>{const[e,t]=v.useState(0),[r,n]=v.useState({}),[s,i]=v.useState({}),[o,a]=v.useState({}),[l,c]=v.useState(!0),[u,h]=v.useState(!1),[f,p]=v.useState(""),[y,m]=v.useState(0),b=Object.values(iM.application_stages),x=b[e],w=b.length;v.useEffect(()=>{const R={};b.forEach(F=>{F.questions.forEach($=>{$.type==="checkbox_multiple"||$.type==="date_range"?R[$.id]=[]:($.type==="multiple_choice"||$.type==="slider"||$.type==="textarea")&&(R[$.id]="")})}),n(R)},[]);const _=R=>{const{name:F,value:$,type:W,checked:q}=R.target;n(K=>({...K,[F]:W==="checkbox"?q:$})),i(K=>({...K,[F]:void 0}))},j=R=>R.trim().split(/\s+/).filter(F=>F.length>0).length,k=()=>{let R={},F=!0;return x.questions.forEach($=>{if($.required){const W=r[$.id];if(!W||Array.isArray(W)&&W.length===0)R[$.id]="This field is required.",F=!1;else if($.type==="textarea"){const q=j(W);$.min_words&&q<$.min_words&&(R[$.id]=`Minimum ${$.min_words} words required.`,F=!1),$.max_words&&q>$.max_words&&(R[$.id]=`Maximum ${$.max_words} words allowed.`,F=!1)}}$.type==="checkbox_multiple"&&$.max_selections&&r[$.id]&&r[$.id].length>$.max_selections&&(R[$.id]=`You can select a maximum of ${$.max_selections} options.`,F=!1)}),i(R),F},N=(R,F)=>{let $=0;if(R.type==="multiple_choice"&&R.options){const W=R.options.find(q=>q.text===F);$=W?W.score:0}else R.type==="checkbox_multiple"&&R.options&&Array.isArray(F)?$=F.reduce((W,q)=>{var K;const Z=(K=R.options)==null?void 0:K.find(z=>z.text===q);return W+(Z?Z.score:0)},0):R.type==="slider"&&F?$=Math.min(10,Math.floor(parseInt(F)/10)):R.type==="textarea"&&($=F&&j(F)>0?5:0);return $*R.weight},C=R=>{let F=0;return R.questions.forEach($=>{F+=N($,r[$.id])}),Math.round(F*(R.max_possible_score/10))},E=()=>{if(k()){const R=C(x);if(a(F=>({...F,[e]:R})),x.min_score_required&&R<x.min_score_required){c(!1),h(!0);return}e<w-1?t(F=>F+1):O()}},T=()=>{e>0&&t(R=>R-1)},P=R=>{const F=iM.scoring_system.overall_thresholds;return R>=F.auto_accept?"auto_accept":R>=F.strong_candidate?"strong_candidate":R>=F.interview_required?"interview_required":"auto_reject"},O=()=>{let R=Object.values(o).reduce((F,$)=>F+$,0);m(R),p(P(R)),h(!0)},I=R=>{var F,$;const W=r[R.id],q=s[R.id];switch(R.type){case"multiple_choice":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{className:"block text-lg font-semibold text-textLight mb-2",children:[R.question," ",R.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),(F=R.options)==null?void 0:F.map(K=>d.jsxs("label",{className:"radio-option",children:[d.jsx("input",{type:"radio",name:R.id,value:K.text,checked:W===K.text,onChange:_}),d.jsx("span",{className:"radio-custom"}),d.jsx("span",{className:"option-text",children:K.text})]},K.text)),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},R.id);case"checkbox_multiple":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{className:"block text-lg font-semibold text-textLight mb-2",children:[R.question," ",R.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),($=R.options)==null?void 0:$.map(K=>d.jsxs("label",{className:"checkbox-option",children:[d.jsx("input",{type:"checkbox",name:R.id,value:K.text,checked:Array.isArray(W)&&W.includes(K.text),onChange:_}),d.jsx("span",{className:"checkbox-custom"}),d.jsx("span",{className:"option-text",children:K.text})]},K.text)),R.max_selections&&d.jsxs("p",{className:"text-sm text-grayDark mt-1",children:["Select up to ",R.max_selections]}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},R.id);case"textarea":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{htmlFor:R.id,className:"block text-lg font-semibold text-textLight mb-2",children:[R.question," ",R.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),R.sample_text&&d.jsx("p",{className:"text-grayDark text-base mb-2 italic",children:R.sample_text}),d.jsx("textarea",{id:R.id,name:R.id,value:W||"",onChange:_,rows:6,className:"mt-1 block w-full border border-borderColorLight rounded-md shadow-sm p-2 focus:border-primary focus:ring-primary"}),R.min_words&&R.max_words&&d.jsxs("p",{className:"text-xs text-grayDark mt-1",children:["Words: ",j(W||"")," / ",R.max_words," (min: ",R.min_words,")"]}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},R.id);case"slider":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{htmlFor:R.id,className:"block text-lg font-semibold text-textLight mb-2",children:[R.question," ",R.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),d.jsx("input",{type:"range",id:R.id,name:R.id,min:R.min,max:R.max,step:R.step,value:W||R.min||0,onChange:_,className:"w-full h-2 bg-grayMedium rounded-lg appearance-none cursor-pointer accent-primary"}),d.jsxs("div",{className:"flex justify-between text-sm text-grayDark mt-1",children:[d.jsx("span",{children:R.min}),d.jsx("span",{children:W||R.min||0}),d.jsx("span",{children:R.max})]}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},R.id);case"date_range":return d.jsxs("div",{className:"question-container mb-4 p-4 bg-background-light rounded-lg shadow-sm border-l-4 border-primary",children:[d.jsxs("label",{htmlFor:R.id,className:"block text-lg font-semibold text-textLight mb-2",children:[R.question," ",R.required&&d.jsx("span",{className:"text-errorRed",children:"*"})]}),d.jsx("p",{className:"text-base text-grayDark",children:"Date range selection not fully implemented in this example."}),q&&d.jsx("p",{className:"text-errorRed text-sm mt-1",children:q})]},R.id);default:return d.jsxs("p",{className:"text-errorRed",children:["Unknown question type: ",R.type]},R.id)}};if(u)if(l){const R={auto_accept:"Congratulations! You have been automatically accepted into our beta reader program.",strong_candidate:"Excellent! You are a strong candidate. We will contact you within 48 hours.",interview_required:"Thank you for applying. We would like to schedule a brief interview with you.",auto_reject:"Thank you for your interest. Unfortunately, you do not meet our current requirements."};return d.jsxs("div",{className:"container mx-auto p-4 text-center text-textLight rounded-lg shadow-lg my-8 card-glow",children:[d.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Application Complete"}),d.jsxs("div",{className:"p-6 rounded-lg shadow-md mb-6 card-glow",children:[d.jsxs("h2",{className:"text-3xl font-semibold mb-2",children:["Your Score: ",y]}),d.jsx("p",{className:"text-lg",children:R[f]})]}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out",children:"Apply Again"})]})}else return d.jsxs("div",{className:"container mx-auto p-4 text-center text-textLight rounded-lg shadow-lg my-8 card-glow",children:[d.jsx("h1",{className:"text-4xl font-bold mb-4 text-errorRed",children:"Application Not Qualified"}),d.jsx("p",{className:"text-lg mb-4 text-grayDark",children:"Thank you for your interest in our beta reader program."}),d.jsx("p",{className:"text-md mb-6 text-grayDark",children:"Unfortunately, you do not meet the minimum requirements for this stage. We encourage you to gain more reading experience and apply again in the future."}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out",children:"Start Over"})]});return d.jsxs("div",{className:"container mx-auto p-4 bg-background-light text-textLight rounded-lg shadow-lg my-8",children:[d.jsx("h1",{className:"text-4xl font-bold mb-6 text-primary text-center hero-title-glow",children:"Beta Program Application"}),d.jsx("div",{className:"w-full bg-grayMedium rounded-full h-2.5 mb-4",children:d.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500 ease-in-out",style:{width:`${(e+1)/w*100}%`}})}),d.jsxs("p",{className:"text-center text-base text-grayDark mb-6",children:["Stage ",e+1," of ",w,": ",x.title]}),d.jsxs("form",{onSubmit:R=>{R.preventDefault(),E()},className:"space-y-6",children:[d.jsxs("section",{className:"p-6 bg-background-light rounded-lg shadow-md border border-borderColorLight",children:[d.jsx("h2",{className:"text-3xl font-semibold mb-4 text-textLight",children:x.title}),d.jsx("p",{className:"text-lg text-grayDark mb-4",children:x.description}),x.questions.map(I)]}),d.jsxs("div",{className:"flex justify-between mt-6",children:[e>0&&d.jsx("button",{type:"button",onClick:T,className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out",children:"Previous"}),d.jsx("button",{type:"submit",className:"btn-glow text-white p-3 rounded-md font-semibold active:scale-95 active:shadow-inner cursor-pointer transition duration-300 ease-in-out ml-auto",children:e===w-1?"Submit Application":"Next"})]})]})]})},kUe={default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent",outline:"text-foreground border border-input hover:bg-accent hover:text-accent-foreground",success:"bg-green-500 text-white hover:bg-green-600 border-transparent"},NUe=v.forwardRef(({className:e,variant:t="default",...r},n)=>d.jsx("div",{ref:n,className:Je("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",kUe[t],e),...r}));NUe.displayName="Badge";const oM=({children:e})=>{const{user:t,isLoading:r}=kh();return r?g.jsx("div",{children:"Loading..."}):t?g.jsx(g.Fragment,{children:e}):g.jsx(IM,{to:"/login",replace:!0})},SUe=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,i]=v.useState(null),[o,a]=v.useState(null),[l,c]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0);const{data:m,error:b}=await supabase.from("beta_applications").select("*");b?(console.error("Error fetching beta applications:",b),i(b.message)):t(m||[]),n(!1)})()},[]);const u=async(y,m,b)=>{const{error:x}=await supabase.from("beta_applications").update({status:m,admin_notes:b}).eq("id",y);if(x){console.error("Error updating application status:",x),alert("Failed to update application status.");return}const{data:w,error:_}=await supabase.from("beta_applications").select("user_id").eq("id",y).single();if(_||!w){console.error("Error fetching application user_id:",_),alert("Failed to fetch application user for profile update.");return}const j=m==="approved"?"approved":"rejected",{error:k}=await supabase.from("profiles").update({beta_reader_status:j}).eq("id",w.user_id);if(k){console.error("Error updating user profile beta_reader_status:",k),alert("Failed to update user's beta reader status in profile.");return}t(N=>N.map(C=>C.id===y?{...C,status:m,admin_notes:b}:C)),alert(`Application ${m} and user profile updated successfully!`)},h=y=>{a(y),c(!0)},f=()=>{a(null),c(!1)},p=async(y,m)=>{const{error:b}=await supabase.from("beta_applications").update({admin_notes:m}).eq("id",y);b?(console.error("Error updating admin notes:",b),alert("Failed to update admin notes.")):(t(x=>x.map(w=>w.id===y?{...w,admin_notes:m}:w)),o&&o.id===y&&a(x=>x?{...x,admin_notes:m}:null),alert("Admin notes updated successfully!"))};return r?g.jsx("div",{className:"text-gray-100",children:"Loading applications..."}):s?g.jsxs("div",{className:"text-red-400",children:["Error: ",s]}):g.jsxs("div",{className:"admin-beta-applications-manager",children:[g.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"Manage Beta Applications"}),e.length===0?g.jsx("p",{className:"text-gray-400",children:"No beta applications submitted yet."}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(y=>g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:y.full_name}),g.jsx("p",{className:"text-gray-400 text-sm",children:y.email}),g.jsxs("p",{className:"text-gray-400 text-sm",children:["Status: ",g.jsx("span",{className:`font-medium ${y.status==="pending"?"text-yellow-400":y.status==="approved"?"text-green-400":"text-red-400"}`,children:y.status.toUpperCase()})]}),g.jsxs("p",{className:"text-gray-400 text-sm",children:["Composite Score: ",y.composite_score,"/100"]}),g.jsxs("div",{className:"mt-4 space-y-2",children:[g.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 1 Score: ",y.stage1_raw_score,"/100"]}),g.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 2 Score: ",y.stage2_raw_score,"/60"]}),g.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 3 Score: ",y.stage3_raw_score,"/40"]}),g.jsxs("p",{className:"text-gray-300 text-sm",children:["Stage 4 Score: ",y.stage4_raw_score,"/60"]})]}),y.admin_notes&&g.jsxs("div",{className:"mt-4 p-3 bg-gray-700/50 rounded-lg text-gray-300 text-sm",children:[g.jsx("strong",{children:"Admin Notes:"})," ",y.admin_notes]}),g.jsxs("div",{className:"mt-6 flex space-x-3",children:[y.status==="pending"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>u(y.id,"approved",prompt("Add admin notes for approval:")||""),className:"px-4 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Approve"}),g.jsx("button",{onClick:()=>u(y.id,"denied",prompt("Add admin notes for denial:")||""),className:"px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-sm font-medium",children:"Deny"})]}),g.jsx("button",{onClick:()=>h(y),className:"px-4 py-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors text-sm font-medium",children:"View Details"})]})]},y.id))}),l&&o&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-gray-800/90 rounded-lg p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-gray-700 relative",children:[g.jsx("button",{onClick:f,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:"×"}),g.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["Application Details: ",o.full_name]}),g.jsxs("div",{className:"space-y-4 text-gray-300",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Applicant Information"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Email:"})," ",o.email]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Time Zone:"})," ",o.time_zone]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Country:"})," ",o.country||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Goodreads:"})," ",o.goodreads||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Applied On:"})," ",new Date(o.created_at).toLocaleString()]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Current Status:"})," ",o.status.toUpperCase()]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Composite Score:"})," ",o.composite_score,"/100"]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Admin Notes"}),g.jsx("textarea",{className:"w-full p-2 rounded bg-gray-700 border border-gray-600 text-white",rows:4,value:o.admin_notes||"",onChange:y=>a(m=>m?{...m,admin_notes:y.target.value}:null)}),g.jsx("button",{onClick:()=>p(o.id,o.admin_notes||""),className:"mt-2 px-4 py-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors text-sm font-medium",children:"Save Notes"})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 1: Application Form (Score: ",o.stage1_raw_score,"/100)"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Beta Commitment:"})," ",o.beta_commitment]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Hours Per Week:"})," ",o.hours_per_week]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Portal Use:"})," ",o.portal_use]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Recent Reads:"})," ",o.recent_reads||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Interest Statement:"})," ",o.interest_statement]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Prior Beta Experience:"})," ",o.prior_beta||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Feedback Philosophy:"})," ",o.feedback_philosophy]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Track Record:"})," ",o.track_record||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Communication:"})," ",o.communication]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Devices:"})," ",o.devices.join(", ")||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Access Needs:"})," ",o.access_needs||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Demographics:"})," ",o.demographics||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passed Stage 1:"})," ",o.stage1_passed?"Yes":"No"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Auto Fail:"})," ",o.stage1_auto_fail?"Yes":"No"]})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 2: Comprehension Test (Score: ",o.stage2_raw_score,"/60)"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Q1 Answer:"})," ",o.q1||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Q2 Answer:"})," ",o.q2||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Clarity Feedback:"})," ",o.clarity_feedback||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Pacing Analysis:"})," ",o.pacing_analysis||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Taste Alignment:"})," ",o.taste_alignment||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passed Stage 2:"})," ",o.stage2_passed?"Yes":"No"]})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 3: Calibration Test (Score: ",o.stage3_raw_score,"/40)"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Worse Passage:"})," ",o.worse_passage||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passage A Analysis:"})," ",o.passage_a_analysis||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passage B Analysis:"})," ",o.passage_b_analysis||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Priority Fix:"})," ",o.priority_fix||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passed Stage 3:"})," ",o.stage3_passed?"Yes":"No"]})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-xl font-semibold text-white mb-2",children:["Stage 4: Timed Trial (Score: ",o.stage4_raw_score,"/60)"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Overall Assessment:"})," ",o.overall_assessment||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Chapter Summary:"})," ",o.chapter_summary||"N/A"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Passed Stage 4:"})," ",o.stage4_passed?"Yes":"No"]})]}),g.jsxs("div",{className:"mt-6",children:[g.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Change Application Status"}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{onClick:()=>u(o.id,"approved",prompt("Add admin notes for approval:")||o.admin_notes||""),className:"px-4 py-2 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Approve"}),g.jsx("button",{onClick:()=>u(o.id,"denied",prompt("Add admin notes for denial:")||o.admin_notes||""),className:"px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-sm font-medium",children:"Deny"})]})]})]})]})})]})},EUe="_timeline_1x8m9_1",CUe="_milestone_1x8m9_20",TUe="_dot_1x8m9_57",AUe="_content_1x8m9_76",OUe="_date_1x8m9_88",PUe="_expandedContent_1x8m9_108",RUe="_detailsText_1x8m9_114",IUe="_miniTimeline_1x8m9_120",DUe="_miniMilestone_1x8m9_126",LUe="_miniDot_1x8m9_131",MUe="_miniContent_1x8m9_141",zUe="_miniDate_1x8m9_145",vs={timeline:EUe,milestone:CUe,dot:TUe,content:AUe,date:OUe,expandedContent:PUe,detailsText:RUe,miniTimeline:IUe,miniMilestone:DUe,miniDot:LUe,miniContent:MUe,miniDate:zUe},aM=typeof window<"u",uK="https://opukvvmumyegtkukqint.supabase.co",dK="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s";console.log("DEBUG: supabaseUrl (raw):",uK);console.log("DEBUG: supabaseAnonKey (raw):",dK);console.log("Supabase URL:","✅ Set"),console.log("Supabase Anon Key:","✅ Set");let hK;try{hK=u6(uK,dK,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:aM?window.localStorage:void 0}});const e=typeof process<"u"&&!1}catch(e){throw console.error("Error initializing Supabase client:",e),e}const FUe=async()=>{const{data:e,error:t}=await supabase.from("timeline_events").select(`
      *,
      timeline_nested_events (
        id,
        date,
        title,
        description,
        "order"
      )
    `).eq("is_published",!0).order("order",{ascending:!0});return t?(console.error("Error fetching timeline events:",t),[]):e},$Ue=({date:e,title:t,description:r,details:n,nested_events:s=[],background_image:i})=>{const[o,a]=v.useState(!1),l=()=>{a(!o)},c=i?{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${i})`,backgroundSize:"cover",backgroundPosition:"center",color:"white",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}:{};return g.jsxs("div",{className:vs.milestone,style:c,children:[g.jsx("div",{className:vs.dot}),g.jsxs("div",{className:vs.content,onClick:l,children:[g.jsx("span",{className:vs.date,children:e}),g.jsx("h3",{children:t}),g.jsx("p",{children:r}),o&&g.jsxs("div",{className:vs.expandedContent,children:[n&&g.jsx("p",{className:vs.detailsText,children:n}),s&&s.length>0&&g.jsx("div",{className:vs.miniTimeline,children:s.map((u,h)=>g.jsxs("div",{className:vs.miniMilestone,children:[g.jsx("div",{className:vs.miniDot}),g.jsxs("div",{className:vs.miniContent,children:[g.jsx("span",{className:vs.miniDate,children:u.date}),g.jsx("h4",{children:u.title}),g.jsx("p",{children:u.description})]})]},h))})]})]})]})},UUe=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[s,i]=v.useState(null);return v.useEffect(()=>{(async()=>{try{n(!0);const a=await FUe();t(a)}catch(a){console.error("Failed to load timeline events:",a),i("Failed to load timeline. Please try again later.")}finally{n(!1)}})()},[]),r?g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s?g.jsx("div",{className:"container mx-auto p-4",children:g.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[g.jsx("strong",{className:"font-bold",children:"Error: "}),g.jsx("span",{className:"block sm:inline",children:s})]})}):e.length===0?g.jsx("div",{className:"container mx-auto p-4",children:g.jsxs("div",{className:"text-center py-12",children:[g.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Timeline Events Found"}),g.jsx("p",{className:"text-gray-600",children:"Check back later for updates to the timeline."})]})}):g.jsx("section",{className:`${vs.timeline} py-12`,children:g.jsxs("div",{className:"container mx-auto px-4",children:[g.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"Zoroastrian Timeline"}),e.map(o=>g.jsx($Ue,{date:o.date,title:o.title,description:o.description,details:o.details,nested_events:o.nested_events,background_image:o.background_image},o.id))]})})},qUe=()=>{var j,k,N,C;const[e,t]=v.useState(1),[r,n]=v.useState({}),[s,i]=v.useState(1),[o,a]=v.useState(48*60*60),l=[{label:"Application"},{label:"Comprehension"},{label:"Calibration"},{label:"Trial Task"}],c=({state:E})=>{const T=E==="done"?"#10B981":E==="current"?"#60A5FA":"#6B7280",P=E==="upcoming"?"#9CA3AF":"#E5E7EB";return g.jsxs("svg",{viewBox:"0 0 64 40",width:"36",height:"24",className:`mountain-icon ${E}`,"aria-hidden":!0,children:[g.jsx("path",{d:"M2 38 L20 12 L28 22 L40 4 L62 38 Z",fill:T,stroke:T,strokeWidth:"1.5"}),g.jsx("path",{d:"M20 12 L24 18 L16 18 Z",fill:P}),g.jsx("path",{d:"M40 4 L44 12 L36 12 Z",fill:P})]})},u=({done:E})=>g.jsx("div",{className:`connector ${E?"done":""}`}),h=()=>g.jsxs("div",{className:"mountain-stepper",children:[g.jsx(u,{done:e>0}),l.map((E,T)=>{const P=T+1,O=P<e?"done":P===e?"current":"upcoming";return g.jsxs(ae.Fragment,{children:[g.jsxs("div",{className:"mountain-step-container",onClick:()=>f(),children:[g.jsx(c,{state:O}),g.jsx("span",{className:`mountain-label ${O}`,children:E.label})]}),g.jsx(u,{done:P<e})]},E.label)})]}),f=E=>{t(6)},p=(E,T,P,O)=>{const I=document.getElementById(E),R=document.getElementById(T);if(I&&R){const F=I.value.trim().split(/\s+/).filter($=>$.length>0).length;R.textContent=`${F}/${O} words`,R.className="word-count",F<P?R.classList.add("error"):F>O*.9&&R.classList.add("warning")}};v.useEffect(()=>{p("interestStatement","interestWordCount",150,250),p("taste_response","tasteWordCount",0,100),p("overall_assessment","assessmentWordCount",200,300)},[e]),v.useEffect(()=>{let E;return e===4&&(E=setInterval(()=>{a(T=>T<=0?(clearInterval(E),alert("Time expired! Your submission may be marked as late."),0):T-1)},1e3)),()=>clearInterval(E)},[e]);const y=E=>{const T=Math.floor(E/3600),P=Math.floor(E%3600/60),O=E%60;return`${T.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`},m=E=>{E.preventDefault();const T=new FormData(E.target),P=Object.fromEntries(T.entries()),O=Array.from(document.querySelectorAll('input[name="devices"]:checked')).map(H=>H.value);P.devices=O;let I=0,R=!1;I+={weekly_deadlines:10,commit_with_extensions:6,prefer_flexible:3,no_commitment:0}[P.betaCommitment]||0,P.betaCommitment==="no_commitment"&&(R=!0),I+={"5_plus":5,"3_4":3,under_3:0}[P.hoursPerWeek]||0,I+={yes_comfortable:5,yes_unsure:2,no:0}[P.portalUse]||0,P.portalUse==="no"&&(R=!0),I=Math.min(I,20);let q=0;P.recentReads.length>0&&P.interestStatement.length>0&&(q=10),I+=q;let K=0;P.priorBeta.length>0&&P.feedbackPhilosophy.length>0&&(K=10),I+=K;let Z=0;P.trackRecord.length>0&&P.communication.length>0&&(Z=10),I+=Z;let z=0;const J=O.length;J===3?z+=6:J===2?z+=4:J===1&&(z+=2),z=Math.min(z,20),I+=z;let be=I>=50&&!R;n(H=>({...H,stage1:{...P,rawScore:I,passed:be,autoFail:R}})),f()},b=E=>{E.preventDefault();const T=new FormData(E.target),P=Object.fromEntries(T.entries());let O=0;const I=38;P.q1==="b"&&(O+=20),P.clarity_feedback.length>0&&P.pacing_feedback.length>0&&(O+=15),P.taste_response.length>0&&(O+=5);let R=O>=I;n(F=>({...F,stage2:{...P,rawScore:O,passed:R}})),f()},x=E=>{E.preventDefault();const T=new FormData(E.target),P=Object.fromEntries(T.entries());let O=0;const I=26;P.worse_passage==="a"&&(O+=15),P.passage_a_analysis.length>0&&P.passage_b_analysis.length>0&&P.priority_fix.length>0&&(O+=5);let R=O>=I;n(F=>({...F,stage3:{...P,rawScore:O,passed:R}})),f()},w=async E=>{var Z;E.preventDefault();const T=new FormData(E.target),P=Object.fromEntries(T.entries());let O=0;const I=40;o>0?O+=10:O+=0;const R=document.querySelectorAll(".inline-comment");P.overall_assessment.length>0&&P.chapter_summary.length>0&&R.length>=8?O+=10:P.overall_assessment.length>0&&P.chapter_summary.length>0&&R.length>=4&&(O+=5),R.length>0&&(O+=10),P.chapter_summary.length>0&&(O+=10);let F=O>=I;n(z=>({...z,stage4:{...P,rawScore:O,passed:F}}));const $={stage1:.2,stage2:.25,stage3:.2,stage4:.35},W=r.stage1.rawScore/100*($.stage1*100)+r.stage2.rawScore/60*($.stage2*100)+r.stage3.rawScore/40*($.stage3*100)+r.stage4.rawScore/60*($.stage4*100);n(z=>({...z,compositeScore:Math.round(W*10)/10})),t(6);const q={user_id:(Z=(await supabase.auth.getUser()).data.user)==null?void 0:Z.id,full_name:r.stage1.fullName,email:r.stage1.email,time_zone:r.stage1.timeZone,country:r.stage1.country,goodreads:r.stage1.goodreads,beta_commitment:r.stage1.betaCommitment,hours_per_week:r.stage1.hoursPerWeek,portal_use:r.stage1.portalUse,recent_reads:r.stage1.recentReads,interest_statement:r.stage1.interestStatement,prior_beta:r.stage1.priorBeta,feedback_philosophy:r.stage1.feedbackPhilosophy,track_record:r.stage1.trackRecord,communication:r.stage1.communication,devices:r.stage1.devices,access_needs:r.stage1.accessNeeds,demographics:r.stage1.demographics,stage1_raw_score:r.stage1.rawScore,stage1_passed:r.stage1.passed,stage1_auto_fail:r.stage1.autoFail,q1:r.stage2.q1,q2:r.stage2.q2,clarity_feedback:r.stage2.clarity_feedback,pacing_analysis:r.stage2.pacing_feedback,taste_alignment:r.stage2.taste_response,stage2_raw_score:r.stage2.rawScore,stage2_passed:r.stage2.passed,worse_passage:r.stage3.worse_passage,passage_a_analysis:r.stage3.passage_a_analysis,passage_b_analysis:r.stage3.passage_b_analysis,priority_fix:r.stage3.priority_fix,stage3_raw_score:r.stage3.rawScore,stage3_passed:r.stage3.passed,overall_assessment:r.stage4.overall_assessment,chapter_summary:r.stage4.chapter_summary,stage4_raw_score:r.stage4.rawScore,stage4_passed:r.stage4.passed,composite_score:r.compositeScore},{error:K}=await supabase.from("beta_applications").insert([q]);K?(console.error("Error saving beta application:",K),alert("There was an error saving your application. Please try again.")):console.log("Beta application saved successfully!")},_=()=>{i(E=>E+1)};return g.jsxs("div",{className:"beta-app-container",children:[g.jsxs("div",{className:"beta-app-header",children:[g.jsx("h1",{children:"Zangar/Spandam Beta Reader Program"}),g.jsx("p",{children:"Join our exclusive beta reading community for epic sci-fi/fantasy"})]}),h(),e===1&&g.jsx("div",{id:"stage1",className:"stage-content",children:g.jsxs("form",{onSubmit:m,children:[g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Contact Information"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"fullName",children:"Full Name *"}),g.jsx("input",{type:"text",id:"fullName",name:"fullName",className:"form-control",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"email",children:"Email Address *"}),g.jsx("input",{type:"email",id:"email",name:"email",className:"form-control",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"timeZone",children:"Time Zone *"}),g.jsxs("select",{id:"timeZone",name:"timeZone",className:"form-control",required:!0,children:[g.jsx("option",{value:"",children:"Select your time zone"}),g.jsx("option",{value:"America/New_York",children:"Eastern Time (UTC-5/-4)"}),g.jsx("option",{value:"America/Chicago",children:"Central Time (UTC-6/-5)"}),g.jsx("option",{value:"America/Denver",children:"Mountain Time (UTC-7/-6)"}),g.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (UTC-8/-7)"}),g.jsx("option",{value:"Europe/London",children:"GMT/BST (UTC+0/+1)"}),g.jsx("option",{value:"Europe/Paris",children:"CET/CEST (UTC+1/+2)"}),g.jsx("option",{value:"Asia/Tokyo",children:"JST (UTC+9)"}),g.jsx("option",{value:"Australia/Sydney",children:"AEST/AEDT (UTC+10/+11)"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"country",children:"Country"}),g.jsx("input",{type:"text",id:"country",name:"country",className:"form-control"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"goodreads",children:"Goodreads Profile (optional)"}),g.jsx("input",{type:"text",id:"goodreads",name:"goodreads",className:"form-control",placeholder:"https://goodreads.com/user/..."})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Commitment & Availability (Max 20 pts)"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"betaCommitment",children:"Beta Window Commitment (6-8 weeks) *"}),g.jsxs("select",{id:"betaCommitment",name:"betaCommitment",className:"form-control",required:!0,children:[g.jsx("option",{value:"",children:"Select your commitment level"}),g.jsx("option",{value:"weekly_deadlines",children:"I can commit to weekly deadlines (10 pts)"}),g.jsx("option",{value:"commit_with_extensions",children:"I can commit but may need 1+ extensions (6 pts)"}),g.jsx("option",{value:"prefer_flexible",children:"I prefer flexible deadlines (3 pts)"}),g.jsx("option",{value:"no_commitment",children:"I cannot commit to deadlines (0 pts)"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"hoursPerWeek",children:"Time Budget per Week *"}),g.jsxs("select",{id:"hoursPerWeek",name:"hoursPerWeek",className:"form-control",required:!0,children:[g.jsx("option",{value:"",children:"Select your time availability"}),g.jsx("option",{value:"5_plus",children:"5+ hours per week (5 pts)"}),g.jsx("option",{value:"3_4",children:"3-4 hours per week (3 pts)"}),g.jsx("option",{value:"under_3",children:"Less than 3 hours (0 pts)"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"portalUse",children:"Website Portal Usage *"}),g.jsxs("select",{id:"portalUse",name:"portalUse",className:"form-control",required:!0,children:[g.jsx("option",{value:"",children:"Select your comfort level"}),g.jsx("option",{value:"yes_comfortable",children:"Yes, I'm comfortable using web tools (5 pts)"}),g.jsx("option",{value:"yes_unsure",children:"Yes, but I'm unsure about tech (2 pts)"}),g.jsx("option",{value:"no",children:"No, I prefer other methods (0 pts)"})]})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Genre/Series Alignment (Max 20 pts)"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"recentReads",children:"Recent Relevant Reads"}),g.jsx("textarea",{id:"recentReads",name:"recentReads",className:"form-control",placeholder:"List 3-5 books you've read in the last 12 months that relate to epic sci-fi/fantasy, Persian/Zoroastrian themes, or big-idea worldbuilding..."})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"interestStatement",children:"Why This Series? (150-250 words) *"}),g.jsx("textarea",{id:"interestStatement",name:"interestStatement",className:"form-control",placeholder:"What specifically interests you about the Zangar/Spandam series? Mention themes like empire vs. kinship, oath/fate dynamics, cliffside megastructures, etc.",required:!0}),g.jsx("div",{className:"word-count",id:"interestWordCount",children:"0/250 words"})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Feedback Experience & Philosophy (Max 20 pts)"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"priorBeta",children:"Prior Beta/Critique Experience"}),g.jsx("textarea",{id:"priorBeta",name:"priorBeta",className:"form-control",placeholder:"Describe your experience with beta reading, manuscript critiques, or writing groups. Include specific examples and outcomes..."})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"feedbackPhilosophy",children:"Feedback Philosophy *"}),g.jsx("textarea",{id:"feedbackPhilosophy",name:"feedbackPhilosophy",className:"form-control",placeholder:"How do you approach giving feedback? How do you balance honesty with kindness? Describe your method for providing actionable, specific suggestions...",required:!0})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Reliability Signals (Max 20 pts)"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"trackRecord",children:"Deadline Track Record"}),g.jsx("textarea",{id:"trackRecord",name:"trackRecord",className:"form-control",placeholder:"Provide examples of meeting deadlines in work, volunteer, or creative contexts. Include any verifiable references or public profiles..."})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"communication",children:"Communication Style *"}),g.jsx("textarea",{id:"communication",name:"communication",className:"form-control",placeholder:"How do you handle check-ins and communication? What would you do if you encountered a blocker or needed to request an extension?",required:!0})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Diversity & Coverage (Max 20 pts)"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Reading Devices/Platforms *"}),g.jsxs("div",{className:"checkbox-group",children:[g.jsxs("div",{className:"checkbox-item",children:[g.jsx("input",{type:"checkbox",id:"desktop",name:"devices",value:"desktop"}),g.jsx("label",{htmlFor:"desktop",children:"Desktop/Laptop"})]}),g.jsxs("div",{className:"checkbox-item",children:[g.jsx("input",{type:"checkbox",id:"mobile",name:"devices",value:"mobile"}),g.jsx("label",{htmlFor:"mobile",children:"Mobile/Tablet"})]}),g.jsxs("div",{className:"checkbox-item",children:[g.jsx("input",{type:"checkbox",id:"ereader",name:"devices",value:"ereader"}),g.jsx("label",{htmlFor:"ereader",children:"E-reader (Kindle, etc.)"})]})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"accessNeeds",children:"Access Needs & Unique Perspectives"}),g.jsx("textarea",{id:"accessNeeds",name:"accessNeeds",className:"form-control",placeholder:"Do you have any access needs, cultural backgrounds (especially Persian/Middle Eastern), military experience, or other perspectives that would add value to our beta program?"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"demographics",children:"Additional Diversity Information"}),g.jsx("textarea",{id:"demographics",name:"demographics",className:"form-control",placeholder:"Any other demographic or experience diversity you'd like to share that would improve our beta reader representation?"})]})]}),g.jsxs("div",{className:"navigation",children:[g.jsx("div",{}),g.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Application"})]})]})}),e===6&&g.jsx("div",{id:"stage2",className:"stage-content",children:g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Stage 2: Reading Comprehension & Taste Fit"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Instructions:"})," Read the excerpt below and answer the questions. This tests your ability to parse complex worldbuilding and provide specific feedback."]}),g.jsxs("div",{className:"excerpt-container",children:[g.jsx("h4",{children:"Sample Excerpt (800 words)"}),g.jsx("p",{className:"excerpt-text",children:"The Vənāsō winds carried more than salt and storm-promise tonight. Hooran felt the weight of unspoken oaths pressing against her temples as she stood upon the Cliffside Sanctum, watching the fires of Spandam flicker like dying stars across the chasm. Each flame represented a choice—empire or kinship, the Saoshyant's path or the old ways of her mothers."}),g.jsx("p",{className:"excerpt-text",children:'"The Zangar expect answers by dawn," Cyrus said, his voice cutting through the wind-song. His ceremonial armor caught moonlight like captured ice, each plate inscribed with binding-runes that pulsed faintly blue. "The Great Assembly grows restless."'}),g.jsx("p",{className:"excerpt-text",children:"Hooran's fingers traced the oath-scar on her palm—the mark that bound her to choices not yet made. Below, the megastructure of Spandam stretched into darkness, its bio-luminescent veins carrying information like blood through stone arteries. Somewhere in those depths, her brother Darius worked the Deep Forges, unaware that his sister's decision would reshape not just their family's fate, but the balance between the Seven Domains."}),g.jsx("p",{className:"excerpt-text",children:`"The winds know," she whispered, tasting copper and ozone. "They've always known."`})]}),g.jsxs("form",{onSubmit:b,children:[g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Question 1:"})," What is the primary source of tension in this scene?"]}),g.jsxs("select",{className:"form-control",name:"q1",required:!0,children:[g.jsx("option",{value:"",children:"Choose the best answer"}),g.jsx("option",{value:"a",children:"Weather conditions threatening the characters"}),g.jsx("option",{value:"b",children:"Hooran must choose between competing loyalties by dawn"}),g.jsx("option",{value:"c",children:"Cyrus is pressuring Hooran to attack Spandam"}),g.jsx("option",{value:"d",children:"The bio-luminescent technology is failing"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Question 2:"}),' What role do the "Vənāsō winds" serve in this passage?']}),g.jsx("textarea",{className:"form-control",name:"q2",placeholder:"Explain in 2-3 sentences...",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Feedback Task:"})," Identify one clarity issue and suggest a specific improvement"]}),g.jsx("textarea",{className:"form-control",name:"clarity_feedback",placeholder:"Point to specific lines and explain what's unclear, then suggest how to fix it...",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Pacing Analysis:"})," How does the pacing work in this excerpt?"]}),g.jsx("textarea",{className:"form-control",name:"pacing_feedback",placeholder:"Analyze the rhythm and flow, citing specific examples...",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Taste Alignment (100 words):"})," What about this excerpt most engages or loses you?"]}),g.jsx("textarea",{id:"taste_response",className:"form-control",name:"taste_response",placeholder:"Be specific about what works or doesn't work for you as a reader...",required:!0}),g.jsx("div",{className:"word-count",id:"tasteWordCount",children:"0/100 words"})]}),g.jsxs("div",{className:"navigation",children:[g.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Application"}),g.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Stage 2"})]})]})]})}),e===3&&g.jsx("div",{id:"stage3",className:"stage-content",children:g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Stage 3: Calibration Test"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Instructions:"})," Compare these two passages and rank which needs more revision. Explain your reasoning."]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"25px",margin:"25px 0"},children:[g.jsxs("div",{className:"excerpt-container",style:{background:"linear-gradient(145deg, #f0f8f0 0%, #e8f4e8 100%)",borderColor:"#90ee90"},children:[g.jsx("h4",{style:{color:"#228b22"},children:"Passage A"}),g.jsx("p",{className:"excerpt-text",children:"The battle raged across the crystalline plains. Warriors fought with determination. Magic crackled through the air as spells were cast by the mages. It was a significant moment in the war. Many would die. The outcome would affect everyone. The protagonist felt conflicted about their role in the violence."})]}),g.jsxs("div",{className:"excerpt-container",style:{background:"linear-gradient(145deg, #fff8dc 0%, #f5f5dc 100%)",borderColor:"#daa520"},children:[g.jsx("h4",{style:{color:"#b8860b"},children:"Passage B"}),g.jsx("p",{className:"excerpt-text",children:"Kara's blade sang against Varek's shield, the impact reverberating through her bones. Around them, the Shattered Fields erupted in cascades of amber light—each spell-strike from the War-Mages above sending hairline fractures racing through the crystalline ground. She could taste copper and ozone, hear the wet snap of breaking bone somewhere to her left. This was the moment Sehran had warned her about: when ideology met steel, and someone had to choose what they were willing to break."})]})]}),g.jsxs("form",{onSubmit:x,children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:g.jsx("strong",{children:"Which passage needs more revision?"})}),g.jsxs("select",{className:"form-control",name:"worse_passage",required:!0,children:[g.jsx("option",{value:"",children:"Choose one"}),g.jsx("option",{value:"a",children:"Passage A"}),g.jsx("option",{value:"b",children:"Passage B"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Analysis of Passage A:"})," Identify strengths and weaknesses"]}),g.jsx("textarea",{className:"form-control",name:"passage_a_analysis",placeholder:"What works and what doesn't? Be specific...",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Analysis of Passage B:"})," Identify strengths and weaknesses"]}),g.jsx("textarea",{className:"form-control",name:"passage_b_analysis",placeholder:"What works and what doesn't? Be specific...",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{children:[g.jsx("strong",{children:"Top Priority Fix:"})," What's the most important issue to address?"]}),g.jsx("textarea",{className:"form-control",name:"priority_fix",placeholder:"Choose the highest-impact problem and suggest a concrete solution...",required:!0})]}),g.jsxs("div",{className:"navigation",children:[g.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Stage 2"}),g.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Stage 3"})]})]})]})}),e===4&&g.jsx("div",{id:"stage4",className:"stage-content",children:g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"section-title",children:"Stage 4: Timed Trial Task"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Deadline:"})," You have 48 hours from now to complete this task."]}),g.jsxs("div",{id:"timer",style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a52)",color:"white",padding:"20px",borderRadius:"15px",textAlign:"center",margin:"20px 0",fontSize:"1.5em",fontWeight:"bold"},children:["Time Remaining: ",g.jsx("span",{id:"countdown",children:y(o)})]}),g.jsxs("div",{className:"excerpt-container",children:[g.jsx("h4",{children:"Chapter Excerpt (2,500 words - Sample)"}),g.jsx("p",{children:g.jsx("em",{children:"Read the full chapter and provide detailed feedback using the form below..."})}),g.jsx("div",{style:{height:"350px",overflowY:"auto",background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",padding:"20px",border:"1px solid #d4c5a9",fontStyle:"italic",lineHeight:"1.8",color:"#3c2415"},children:"[Full chapter content would be provided here - this is a placeholder showing the format. The actual implementation would include the complete text with line numbers for reference. Each paragraph would be numbered for easy reference in feedback.]"})]}),g.jsxs("form",{onSubmit:w,children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:g.jsx("strong",{children:"Overall Assessment (200-300 words):"})}),g.jsx("textarea",{id:"overall_assessment",className:"form-control",name:"overall_assessment",placeholder:"Provide a comprehensive overview focusing on the top 3 issues that need attention...",required:!0,style:{minHeight:"150px"}}),g.jsx("div",{className:"word-count",id:"assessmentWordCount",children:"0/300 words"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:g.jsx("strong",{children:"Inline Comments (minimum 8):"})}),g.jsx("div",{id:"inline-comments",children:Array.from({length:s}).map((E,T)=>g.jsxs("div",{className:"inline-comment",style:{background:"white",padding:"15px",borderRadius:"8px",marginBottom:"15px",borderLeft:"3px solid #667eea"},children:[g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"15px"},children:[g.jsxs("div",{children:[g.jsx("label",{children:"Line/Section Reference:"}),g.jsx("input",{type:"text",className:"form-control",name:`comment_ref_${T+1}`,placeholder:"e.g., Line 45, Paragraph 3"})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Issue Type:"}),g.jsxs("select",{className:"form-control",name:`comment_type_${T+1}`,children:[g.jsx("option",{value:"",children:"Select type"}),g.jsx("option",{value:"clarity",children:"Clarity"}),g.jsx("option",{value:"pacing",children:"Pacing"}),g.jsx("option",{value:"continuity",children:"Continuity"}),g.jsx("option",{value:"voice",children:"Voice"}),g.jsx("option",{value:"logic",children:"Logic"}),g.jsx("option",{value:"worldbuilding",children:"Worldbuilding"}),g.jsx("option",{value:"stakes",children:"Stakes/Tension"})]})]})]}),g.jsxs("div",{style:{marginTop:"10px"},children:[g.jsx("label",{children:"Comment & Suggestion:"}),g.jsx("textarea",{className:"form-control",name:`comment_text_${T+1}`,placeholder:"Describe the issue and provide a specific suggestion for improvement..."})]}),T>0&&g.jsx("button",{type:"button",onClick:()=>i(P=>P-1),className:"btn btn-secondary",style:{marginTop:"10px",fontSize:"0.8em",padding:"8px 15px"},children:"Remove Comment"})]},T))}),g.jsx("button",{type:"button",onClick:_,className:"btn btn-secondary",style:{marginTop:"15px"},children:"Add Another Comment"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:g.jsx("strong",{children:"Chapter Summary & Recommendations:"})}),g.jsx("textarea",{className:"form-control",name:"chapter_summary",placeholder:"Summarize your overall thoughts and provide 3 key recommendations for improvement...",required:!0,style:{minHeight:"120px"}})]}),g.jsxs("div",{className:"navigation",children:[g.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(),children:"Back to Stage 3"}),g.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Final Stage"})]})]})]})}),e===5&&g.jsx("div",{id:"admin",className:"stage-content",children:g.jsxs("div",{className:"admin-panel",children:[g.jsx("h3",{className:"section-title",children:"Admin Panel - Beta Reader Applications"}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[g.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[g.jsx("h4",{children:"Total Applications"}),g.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#8b4513"},children:"127"})]}),g.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[g.jsx("h4",{children:"Passed Stage 1"}),g.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#228b22"},children:"89"})]}),g.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[g.jsx("h4",{children:"Final Selections"}),g.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#8b4513"},children:"37"})]}),g.jsxs("div",{className:"score-item",style:{background:"linear-gradient(145deg, #ffffff 0%, #fefdfb 100%)",border:"1px solid #d4c5a9",color:"#3c2415"},children:[g.jsx("h4",{children:"Waitlist"}),g.jsx("p",{style:{fontSize:"2em",fontWeight:"bold",color:"#b8860b"},children:"15"})]})]}),g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Report generated!"),children:"Generate Final Report"}),g.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Data exported!"),children:"Export Data"}),g.jsx("button",{className:"btn btn-secondary",onClick:()=>{window.confirm("Send selection emails to all applicants? This cannot be undone.")&&alert("Emails sent!")},children:"Send Selection Emails"})]}),g.jsxs("div",{className:"applicant-list",id:"applicantList",children:[g.jsxs("div",{className:"applicant-card",children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Sarah Chen"}),g.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"sarah.chen @email.com | GMT+8"})]}),g.jsx("span",{className:"status-badge status-passed",children:"Selected"})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 1:"})," 87/100"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 2:"})," 52/60"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 3:"})," 34/40"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 4:"})," 55/60"]})]}),g.jsxs("div",{style:{background:"rgba(139, 69, 19, 0.1)",padding:"10px",borderLeft:"3px solid #8b4513"},children:[g.jsx("strong",{children:"Composite Score: 92.1"})," | Strengths: Genre expertise, reliable communication, mobile testing"]})]}),g.jsxs("div",{className:"applicant-card",children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Marcus Rodriguez"}),g.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"m.rodriguez @email.com | EST"})]}),g.jsx("span",{className:"status-badge status-pending",children:"Waitlist"})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 1:"})," 79/100"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 2:"})," 48/60"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 3:"})," 31/40"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 4:"})," 48/60"]})]}),g.jsxs("div",{style:{background:"rgba(218, 165, 32, 0.1)",padding:"10px",borderLeft:"3px solid #daa520"},children:[g.jsx("strong",{children:"Composite Score: 83.7"})," | Strengths: Military background, Persian cultural knowledge"]})]}),g.jsxs("div",{className:"applicant-card",children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("h4",{style:{color:"#8b4513",marginBottom:"5px"},children:"Jennifer Walsh"}),g.jsx("p",{style:{color:"#6b5b73",fontSize:"0.9em"},children:"jen.walsh @email.com | GMT"})]}),g.jsx("span",{className:"status-badge status-failed",children:"Not Selected"})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px",marginBottom:"15px"},children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 1:"})," 71/100"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 2:"})," 33/60"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 3:"})," —"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Stage 4:"})," —"]})]}),g.jsxs("div",{style:{background:"rgba(220, 20, 60, 0.1)",padding:"10px",borderLeft:"3px solid #dc143c"},children:[g.jsx("strong",{children:"Composite Score: 45.2"})," | Issues: Failed Stage 2 comprehension, generic feedback"]})]})]})]})}),"            ",e===6&&g.jsxs("div",{className:"score-display",children:["                    ",g.jsx("h2",{style:{marginBottom:"20px"},children:"Application Complete!"}),"                    ",g.jsxs("div",{className:"score-breakdown",children:["                        ",g.jsxs("div",{className:"score-item",children:["                            ",g.jsx("h4",{children:"Stage 1"}),"                            ",g.jsxs("p",{children:[((j=r.stage1)==null?void 0:j.rawScore)||0,"/100"]}),"                        "]}),"                        ",g.jsxs("div",{className:"score-item",children:["                            ",g.jsx("h4",{children:"Stage 2"}),"                            ",g.jsxs("p",{children:[((k=r.stage2)==null?void 0:k.rawScore)||0,"/60"]}),"                        "]}),"                        ",g.jsxs("div",{className:"score-item",children:["                            ",g.jsx("h4",{children:"Stage 3"}),"                            ",g.jsxs("p",{children:[((N=r.stage3)==null?void 0:N.rawScore)||0,"/40"]}),"                        "]}),"                        ",g.jsxs("div",{className:"score-item",children:["                            ",g.jsx("h4",{children:"Stage 4"}),"                            ",g.jsxs("p",{children:[((C=r.stage4)==null?void 0:C.rawScore)||0,"/60"]}),"                        "]}),"                    "]}),"                    ",g.jsxs("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.3)"},children:["                        ",g.jsxs("h3",{children:["Final Composite Score: ",r.compositeScore||0,"/100"]}),"                        ",g.jsx("p",{style:{marginTop:"15px"},children:"Thank you for your application! We\\'ll be in touch within 1-2 weeks with our decision."}),"                    "]}),"                    ","                    ",g.jsxs("div",{className:"submitted-data",style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.3)"},children:["                        ",g.jsx("h3",{children:"Submitted Application Data for Review"}),"                        ","                        ",r.stage1&&g.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",g.jsx("h4",{children:"Stage 1: Application Form"}),"                                ",Object.entries(r.stage1).map(([E,T])=>g.jsxs("p",{children:[g.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                        ","                        ",r.stage2&&g.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",g.jsx("h4",{children:"Stage 2: Comprehension Test"}),"                                ",Object.entries(r.stage2).map(([E,T])=>g.jsxs("p",{children:[g.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                        ","                        ",r.stage3&&g.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",g.jsx("h4",{children:"Stage 3: Calibration Test"}),"                                ",Object.entries(r.stage3).map(([E,T])=>g.jsxs("p",{children:[g.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                        ","                        ",r.stage4&&g.jsxs("div",{style:{marginBottom:"20px"},children:["                                ",g.jsx("h4",{children:"Stage 4: Timed Trial Task"}),"                                ",Object.entries(r.stage4).map(([E,T])=>g.jsxs("p",{children:[g.jsxs("strong",{children:[E,":"]})," ",JSON.stringify(T)]},E)),"                            "]}),"                    "]}),"                "]})]})};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BUe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fK=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VUe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WUe=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>v.createElement("svg",{ref:l,...VUe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:fK("lucide",s),...a},[...o.map(([c,u])=>v.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(WUe,{ref:i,iconNode:t,className:fK(`lucide-${BUe(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=_r("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=_r("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=_r("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HUe=_r("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KUe=_r("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZUe=_r("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=_r("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=_r("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=_r("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GUe=_r("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YUe=_r("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JUe=_r("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XUe=_r("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QUe=_r("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eqe=_r("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=_r("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tqe=_r("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gK=_r("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rqe=_r("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=_r("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),nqe=()=>{const[e,t]=v.useState([]),[r,n]=v.useState([]),[s,i]=v.useState(""),[o,a]=v.useState("all"),[l,c]=v.useState("all"),[u,h]=v.useState([0,50]),[f,p]=v.useState("grid"),[y,m]=v.useState("newest"),[b,x]=v.useState(!1);v.useEffect(()=>{(async()=>{try{const N=await fetch("/api/products");if(!N.ok)throw new Error(`HTTP error! status: ${N.status}`);const C=await N.json();t(C.products)}catch(N){console.error("Error fetching products:",N)}})()},[]),v.useEffect(()=>{let k=e.filter(N=>{const C=N.name.toLowerCase().includes(s.toLowerCase())||N.description&&N.description.toLowerCase().includes(s.toLowerCase()),E=o==="all"||o==="bundles"&&N.product_type==="bundle"||o==="subscriptions"&&(N.product_type==="chapter_pass"||N.product_type==="arc_pass")||o==="single"&&N.product_type==="single_issue",T=l==="all",P=N.prices&&N.prices.length>0?N.prices[0].unit_amount/100:0,O=P>=u[0]&&P<=u[1];return C&&E&&T&&O});k.sort((N,C)=>{switch(y){case"newest":return new Date(C.created_at).getTime()-new Date(N.created_at).getTime();case"oldest":return new Date(N.created_at).getTime()-new Date(C.created_at).getTime();case"price-low":const E=N.prices&&N.prices.length>0?N.prices[0].unit_amount:0,T=C.prices&&C.prices.length>0?C.prices[0].unit_amount:0;return E-T;case"price-high":const P=N.prices&&N.prices.length>0?N.prices[0].unit_amount:0;return(C.prices&&C.prices.length>0?C.prices[0].unit_amount:0)-P;case"title":return N.name.localeCompare(C.name);default:return 0}}),n(k)},[e,s,o,l,u,y]);const w=k=>{console.log("Product purchased:",k)},_=[{id:"all",name:"All Products",count:e.length},{id:"single",name:"Single Issues",count:e.filter(k=>k.product_type==="single_issue").length},{id:"bundles",name:"Bundles",count:e.filter(k=>k.product_type==="bundle").length},{id:"subscriptions",name:"Subscriptions",count:e.filter(k=>k.product_type==="chapter_pass"||k.product_type==="arc_pass").length}],j=[{id:"all",name:"All Formats",count:e.length}];return g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background-light to-background",children:[g.jsxs("div",{className:"relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-secondary/20"}),g.jsxs("div",{className:"relative z-10 container mx-auto px-4 py-16 text-center",children:[g.jsxs("h1",{className:"text-5xl md:text-6xl font-heading text-text-light mb-6",children:[g.jsx("span",{className:"text-secondary",children:"Zoroasterverse"})," Store"]}),g.jsx("p",{className:"text-xl text-text-light/80 max-w-3xl mx-auto leading-relaxed",children:"Discover epic tales of magic, technology, and cosmic adventure. From single volumes to complete collections, your journey awaits."}),g.jsx("div",{className:"mt-8 flex justify-center",children:g.jsxs("div",{className:"flex items-center space-x-4 text-text-light/60",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(mK,{className:"w-5 h-5 text-secondary"}),g.jsx("span",{children:"Premium Content"})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(GUe,{className:"w-5 h-5 text-accent"}),g.jsx("span",{children:"Multiple Formats"})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(rqe,{className:"w-5 h-5 text-secondary"}),g.jsx("span",{children:"Exclusive Bundles"})]})]})})]})]}),g.jsxs("div",{className:"container mx-auto px-4 pb-16",children:[g.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-border/30",children:[g.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center",children:[g.jsxs("div",{className:"flex-1 relative",children:[g.jsx(cM,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-dark w-5 h-5"}),g.jsx("input",{type:"text",placeholder:"Search for books, series, or authors...",value:s,onChange:k=>i(k.target.value),className:"w-full pl-10 pr-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light placeholder-text-dark/50 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all"})]}),g.jsxs("div",{className:"flex items-center space-x-2 bg-background/50 rounded-xl p-1 border border-border/30",children:[g.jsx("button",{onClick:()=>p("grid"),className:`p-2 rounded-lg transition-all ${f==="grid"?"bg-secondary text-background":"text-text-light hover:text-secondary"}`,children:g.jsx(JUe,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded-lg transition-all ${f==="list"?"bg-secondary text-background":"text-text-light hover:text-secondary"}`,children:g.jsx(QUe,{className:"w-5 h-5"})})]}),g.jsxs("select",{value:y,onChange:k=>m(k.target.value),className:"px-4 py-3 bg-background/50 border border-border/30 rounded-xl text-text-light focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",children:[g.jsx("option",{value:"newest",children:"Newest First"}),g.jsx("option",{value:"oldest",children:"Oldest First"}),g.jsx("option",{value:"price-low",children:"Price: Low to High"}),g.jsx("option",{value:"price-high",children:"Price: High to Low"}),g.jsx("option",{value:"title",children:"Alphabetical"})]}),g.jsxs("button",{onClick:()=>x(!b),className:"px-4 py-3 bg-primary/20 hover:bg-primary/30 border border-primary/30 rounded-xl text-text-light transition-all flex items-center space-x-2",children:[g.jsx(YUe,{className:"w-5 h-5"}),g.jsx("span",{children:"Filters"}),b?g.jsx(ZUe,{className:"w-4 h-4"}):g.jsx(HUe,{className:"w-4 h-4"})]})]}),b&&g.jsx("div",{className:"mt-6 pt-6 border-t border-border/30",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-light mb-3",children:"Categories"}),g.jsx("div",{className:"space-y-2",children:_.map(k=>g.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"category",value:k.id,checked:o===k.id,onChange:N=>a(N.target.value),className:"text-secondary focus:ring-secondary"}),g.jsx("span",{className:"text-text-light",children:k.name}),g.jsxs("span",{className:"text-text-dark text-sm",children:["(",k.count,")"]})]},k.id))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-text-light mb-3",children:"Formats"}),g.jsx("div",{className:"space-y-2",children:j.map(k=>g.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"format",value:k.id,checked:l===k.id,onChange:N=>c(N.target.value),className:"text-secondary focus:ring-secondary"}),g.jsx("span",{className:"text-text-light",children:k.name}),g.jsxs("span",{className:"text-text-dark text-sm",children:["(",k.count,")"]})]},k.id))})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-text-light mb-3",children:["Price Range: $",u[0]," - $",u[1]]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("input",{type:"range",min:"0",max:"50",value:u[1],onChange:k=>h([u[0],parseInt(k.target.value)]),className:"w-full h-2 bg-background/50 rounded-lg appearance-none cursor-pointer slider"}),g.jsxs("div",{className:"flex justify-between text-sm text-text-dark",children:[g.jsx("span",{children:"$0"}),g.jsxs("span",{children:["$",u[1]]})]})]})]})]})})]}),g.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[g.jsxs("p",{className:"text-text-light",children:["Showing ",g.jsx("span",{className:"text-secondary font-medium",children:r.length})," of"," ",g.jsx("span",{className:"text-text-light",children:e.length})," products"]}),s&&g.jsx("button",{onClick:()=>i(""),className:"text-text-dark hover:text-text-light transition-colors",children:"Clear search"})]}),r.length>0?g.jsx("div",{className:f==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:r.map(k=>g.jsx("div",{className:f==="list"?"bg-background-light/30 backdrop-blur-sm rounded-2xl p-6 border border-border/30":"",children:g.jsx(ProductCard,{product:k,onPurchase:w,showCheckout:!0})},k.id))}):g.jsxs("div",{className:"text-center py-16",children:[g.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-background-light/30 rounded-full flex items-center justify-center",children:g.jsx(cM,{className:"w-12 h-12 text-text-dark"})}),g.jsx("h3",{className:"text-2xl font-heading text-text-light mb-2",children:"No products found"}),g.jsx("p",{className:"text-text-dark mb-6",children:"Try adjusting your search terms or filters to find what you're looking for."}),g.jsx("button",{onClick:()=>{i(""),a("all"),c("all"),h([0,50])},className:"px-6 py-3 bg-secondary text-background rounded-xl hover:bg-secondary-dark transition-colors",children:"Clear all filters"})]})]})]})},sqe=async e=>{const{data:t,error:r}=await ce.from("posts").select("*").eq("slug",e).eq("status","published").single();if(r&&r.code!=="PGRST116")throw new Error(r.message);return t},iqe=()=>{const{slug:e}=nu(),{data:t,isLoading:r,isError:n,error:s}=It({queryKey:["blogPost",e],queryFn:()=>e?sqe(e):Promise.resolve(null),enabled:!!e});if(r)return g.jsx("div",{className:"text-center py-8 text-gray-300",children:"Loading post..."});if(n)return g.jsxs("div",{className:"text-center py-8 text-red-400",children:["Error loading post: ",s==null?void 0:s.message]});if(!t)return g.jsx("div",{className:"text-center py-8 text-gray-400",children:"Post not found or not published."});const i=t.content.length>150?t.content.substring(0,150)+"...":t.content;return g.jsx("div",{className:"container mx-auto px-4 py-8 max-w-3xl relative z-20",children:g.jsxs("article",{className:"blog-post relative overflow-hidden transition-transform duration-300 ease-in-out hover:translate-y-[-5px] hover:shadow-lg-custom",children:[g.jsx("div",{className:"absolute top-0 left-0 right-0 h-[3px] bg-gradient-to-r from-[#d4af37] via-[#b8860b] to-[#d4af37]"}),g.jsxs("div",{className:"post-meta flex justify-between items-center mb-8 pb-4 border-b border-gold-300-opacity flex-wrap gap-4",children:[g.jsx("span",{className:"post-date text-[#d4af37] font-semibold text-sm tracking-wider",children:new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),g.jsx("span",{className:"post-category bg-gradient-to-br from-[#d4af37] to-[#b8860b] text-[#1a1a2e] px-4 py-2 rounded-full text-xs font-semibold uppercase tracking-wider",children:"World Building"})]}),g.jsx("h1",{className:"post-title font-cinzel text-4xl text-[#f0f0f0] mb-6 leading-tight text-shadow-md",children:t.title}),g.jsx("div",{className:"post-excerpt text-lg text-[#c0c0c0] mb-8 italic border-l-4 border-[#d4af37] pl-6",dangerouslySetInnerHTML:{__html:i}}),g.jsx("div",{className:"post-content text-lg leading-relaxed text-[#e8e8e8] prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:t.content}}),g.jsxs("div",{className:"post-footer mt-12 pt-8 border-t border-gold-300-opacity flex justify-between items-center flex-wrap gap-4",children:[g.jsxs("div",{className:"post-tags flex gap-2 flex-wrap",children:[g.jsx("span",{className:"tag bg-gold-300-opacity-20 text-[#d4af37] px-3 py-1 rounded-full text-sm border border-gold-300-opacity-30 transition-all duration-300 hover:bg-gold-300-opacity-30 hover:scale-105",children:"#Magic"}),g.jsx("span",{className:"tag bg-gold-300-opacity-20 text-[#d4af37] px-3 py-1 rounded-full text-sm border border-gold-300-opacity-30 transition-all duration-300 hover:bg-gold-300-opacity-30 hover:scale-105",children:"#WorldBuilding"})]}),g.jsxs("div",{className:"social-share flex gap-4",children:[g.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"📱"}),g.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"📘"}),g.jsx("button",{className:"share-btn bg-white-opacity-10 border border-white-opacity-20 text-[#e8e8e8] p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 hover:bg-gold-300-opacity-20 hover:border-[#d4af37] hover:translate-y-[-2px]",children:"🔗"})]})]})]})})},oqe=async e=>{const{data:t,error:r}=await supabase.from("pages").select("*").eq("slug",e).eq("status","published").single();if(r&&r.code!=="PGRST116")throw new Error(r.message);return t},aqe=()=>{const{slug:e}=nu(),{data:t,isLoading:r,isError:n,error:s}=It({queryKey:["genericPage",e],queryFn:()=>e?oqe(e):Promise.resolve(null),enabled:!!e});return r?g.jsx("div",{className:"text-center py-8",children:"Loading page..."}):n?g.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading page: ",s==null?void 0:s.message]}):t?g.jsx("div",{className:"container mx-auto px-4 py-8",children:g.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[g.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:t.title}),g.jsx("div",{className:"prose lg:prose-lg max-w-none text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:t.content}})]})}):g.jsx("div",{className:"text-center py-8 text-gray-600",children:"Page not found or not published."})},lqe=({userId:e,isSubscribed:t,subscriptionTier:r="free",betaReaderStatus:n,subscriptionEndDate:s,booksRead:i,readingHours:o,currentlyReading:a,achievements:l,username:c,onSignOut:u})=>{const{data:h,isLoading:f,isError:p}=It({queryKey:["userActivities",e],queryFn:async()=>{const{data:j,error:k}=await ce.from("user_activities").select("*").eq("user_id",e).order("timestamp",{ascending:!1}).limit(5);if(k)throw k;return j},enabled:!!e});if(f)return g.jsx("div",{className:"text-gray-100",children:"Loading activities..."});if(p)return g.jsx("div",{className:"text-red-400",children:"Error loading activities."});const y=[{label:"Books Read",value:i,icon:g.jsx(Pd,{size:20,className:"text-indigo-400"})},{label:"Reading Hours",value:`${o}h`,icon:g.jsx(BS,{size:20,className:"text-green-400"})},{label:"Currently Reading",value:a||"None",icon:g.jsx(pK,{size:20,className:"text-blue-400"})},{label:"Achievements",value:l,icon:g.jsx(VA,{size:20,className:"text-yellow-400"})}],m=s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,x=(j=>{switch(j){case"premium":return{name:"Premium",color:"bg-blue-500"};case"patron":return{name:"Patron",color:"bg-purple-500"};default:return{name:"Free",color:"bg-gray-500"}}})(r),_=(j=>{switch(j){case"approved":return{text:"Beta Reader",color:"bg-green-500",icon:g.jsx(lM,{size:16})};case"pending":return{text:"Application Pending",color:"bg-yellow-500",icon:g.jsx(BS,{size:16})};case"rejected":return{text:"Application Rejected",color:"bg-red-500",icon:g.jsx(gK,{size:16})};default:return{text:"Not Applied",color:"bg-gray-500",icon:g.jsx(zb,{size:16})}}})(n);return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Account Dashboard"}),g.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",c||"User"]})]}),g.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:[g.jsx(eqe,{size:16}),"Sign Out"]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Subscription Status"}),g.jsxs("div",{className:"flex items-center mt-2",children:[g.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${x.color}`}),g.jsxs("span",{className:"text-white",children:[x.name," Tier"]})]}),t&&s&&g.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Renews on ",m]})]}),g.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:g.jsx(mK,{size:24,className:"text-yellow-400"})})]}),!t&&g.jsx("button",{className:"mt-4 w-full py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium",children:"Upgrade Plan"})]}),g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Beta Reader Program"}),g.jsxs("div",{className:"flex items-center mt-2",children:[g.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${_.color}`}),g.jsx("span",{className:"text-white",children:_.text})]}),n==="not_applied"&&g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Apply to get early access to new content"}),n==="pending"&&g.jsx("p",{className:"text-sm text-yellow-400 mt-1",children:"We'll review your application soon"})]}),g.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:_.icon})]}),n==="approved"?g.jsxs(Rr,{to:"/beta/portal",className:"mt-4 w-full py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[g.jsx(Pd,{size:16}),"Go to Beta Portal"]}):g.jsx(Rr,{to:n==="not_applied"?"/beta/application":"/beta/status",className:"mt-4 w-full block text-center py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors text-sm font-medium",children:n==="not_applied"?"Apply Now":"View Application Status"})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:y.map((j,k)=>g.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-2xl font-bold text-white",children:j.value}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:j.label})]}),g.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:j.icon})]})},k))}),g.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl border border-gray-800 overflow-hidden",children:g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Recent Activity"}),g.jsx("div",{className:"space-y-4",children:h&&h.length>0?h.map(j=>g.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-800/50 rounded-lg transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[j.cover_image_url?g.jsx("img",{src:j.cover_image_url,alt:j.item_title,className:"w-12 h-12 object-cover rounded-lg"}):g.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${j.status==="completed"?"bg-green-600/20":"bg-indigo-600/20"}`,children:j.status==="completed"?g.jsx(lM,{className:"w-6 h-6 text-green-400"}):g.jsx(Pd,{className:"w-6 h-6 text-indigo-400"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-white",children:j.item_title}),g.jsx("p",{className:"text-sm text-gray-400",children:j.status==="completed"?"Completed":"In Progress"})]})]}),j.status!=="completed"&&g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:g.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:`${j.progress/(j.total_progress||100)*100}%`}})}),g.jsx("button",{className:"text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:"Resume"})]})]},j.id)):g.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent activity"})})]})})]})},cqe=()=>{const[e,t]=v.useState({fullName:"",bio:"",location:"",website:""}),r=s=>{const{name:i,value:o}=s.target;t(a=>({...a,[i]:o}))},n=s=>{s.preventDefault(),console.log("Profile updated:",e)};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Profile Settings"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your personal information and account settings."})]}),g.jsxs("form",{onSubmit:n,className:"space-y-6",children:[g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center space-x-6",children:[g.jsxs("div",{className:"relative group",children:[g.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:g.jsx(zb,{className:"w-12 h-12 text-gray-400"})}),g.jsx("button",{type:"button",className:"absolute bottom-0 right-0 bg-primary rounded-full p-2 shadow-lg transform translate-y-1/3 group-hover:translate-y-0 transition-transform duration-200",children:g.jsxs("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:"Profile Photo"}),g.jsx("p",{className:"text-sm text-gray-400",children:"JPG, GIF or PNG. Max size of 2MB"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Full Name"}),g.jsx("input",{type:"text",id:"fullName",name:"fullName",value:e.fullName,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Enter your full name"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-300 mb-1",children:"Location"}),g.jsx("input",{type:"text",id:"location",name:"location",value:e.location,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Your location"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-300 mb-1",children:"Website"}),g.jsx("input",{type:"url",id:"website",name:"website",value:e.website,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"https://yourwebsite.com"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-300 mb-1",children:"Bio"}),g.jsx("textarea",{id:"bio",name:"bio",rows:4,value:e.bio,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Tell us about yourself..."})]})]})]}),g.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[g.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-600 rounded-lg text-white hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors duration-200 font-medium",children:"Save Changes"})]})]})]})},uqe=[{id:1,title:"The Gathas of Zarathushtra",author:"Zarathushtra",cover:"/covers/gathas.jpg",progress:75,lastRead:"2 days ago",totalPages:320,currentPage:240,category:"Religious Text"},{id:2,title:"The Denkard",author:"Various Authors",cover:"/covers/denkard.jpg",progress:30,lastRead:"1 week ago",totalPages:450,currentPage:135,category:"Religious Text"},{id:3,title:"Zoroastrianism: An Introduction",author:"Jenny Rose",cover:"/covers/zoroastrianism-intro.jpg",progress:100,lastRead:"3 weeks ago",totalPages:280,currentPage:280,category:"Non-Fiction"}],dqe=()=>{const[e,t]=v.useState("all"),r=uqe.filter(n=>e==="all"?!0:e==="reading"?n.progress<100:n.progress===100);return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reading History"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Track your reading progress and history."})]}),g.jsx("div",{className:"flex space-x-2 mb-6 p-1 bg-gray-800/50 rounded-lg",children:[{id:"all",label:"All Books"},{id:"reading",label:"Currently Reading"},{id:"completed",label:"Completed"}].map(n=>g.jsx("button",{onClick:()=>t(n.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===n.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:n.label},n.id))}),g.jsx("div",{className:"space-y-6",children:r.length>0?r.map(n=>g.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:g.jsx("div",{className:"p-6",children:g.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[g.jsx("div",{className:"w-full md:w-32 flex-shrink-0",children:g.jsx("div",{className:"aspect-[2/3] bg-gray-700 rounded-lg overflow-hidden",children:g.jsx("img",{src:n.cover,alt:n.title,className:"w-full h-full object-cover",onError:s=>{const i=s.target;i.src="https://via.placeholder.com/150x225?text=No+Cover"}})})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-semibold text-white",children:n.title}),g.jsx("p",{className:"text-gray-400",children:n.author})]}),g.jsx("span",{className:"px-3 py-1 text-xs bg-gray-700 text-gray-300 rounded-full",children:n.category})]}),g.jsxs("div",{className:"mt-4",children:[g.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[g.jsxs("span",{children:["Progress: ",n.progress,"%"]}),g.jsxs("span",{children:["Page ",n.currentPage," of ",n.totalPages]})]}),g.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:g.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${n.progress}%`}})})]})]}),g.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex items-center justify-between",children:[g.jsxs("span",{className:"text-sm text-gray-400",children:["Last read ",n.lastRead]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-primary/10 hover:bg-primary/20 rounded-lg transition-colors",children:n.progress<100?"Continue Reading":"Read Again"}),g.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})})})]})]})]})})]})})},n.id)):g.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[g.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:g.jsx(Pd,{className:"w-8 h-8 text-gray-500"})}),g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"No books found"}),g.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:e==="all"?"You haven't added any books to your library yet.":e==="reading"?"You don't have any books in progress.":"You haven't completed any books yet."}),g.jsx("button",{className:"mt-4 px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-lg transition-colors",children:"Browse Library"})]})})]})},yj=[{id:1,title:"First Steps",description:"Complete your first reading session",icon:"🏆",progress:100,unlocked:!0,date:"2023-10-15",rarity:"common"},{id:2,title:"Book Worm",description:"Read for 10 hours",icon:"📚",progress:75,unlocked:!1,date:null,rarity:"uncommon"},{id:3,title:"Zoroastrian Scholar",description:"Read all core Zoroastrian texts",icon:"📜",progress:30,unlocked:!1,date:null,rarity:"rare"},{id:4,title:"Daily Devotee",description:"Read for 7 days in a row",icon:"🔥",progress:42,unlocked:!1,date:null,rarity:"uncommon"},{id:5,title:"Knowledge Seeker",description:"Complete 50 reading sessions",icon:"🔍",progress:100,unlocked:!0,date:"2023-11-02",rarity:"rare"},{id:6,title:"Wisdom Keeper",description:"Achieve 100% completion on any text",icon:"🧠",progress:0,unlocked:!1,date:null,rarity:"epic"}],hqe=e=>{switch(e){case"common":return"bg-gray-500/20 border-gray-500";case"uncommon":return"bg-emerald-500/20 border-emerald-500";case"rare":return"bg-blue-500/20 border-blue-500";case"epic":return"bg-purple-500/20 border-purple-500";case"legendary":return"bg-amber-500/20 border-amber-500";default:return"bg-gray-500/20 border-gray-500"}},fqe=()=>{const[e,t]=v.useState("all"),r=yj.filter(o=>e==="all"?!0:e==="unlocked"?o.unlocked:!o.unlocked),n=yj.filter(o=>o.unlocked).length,s=yj.length,i=Math.round(n/s*100);return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Achievements"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Track your progress and unlock new milestones."})]}),g.jsx("div",{className:"bg-gray-800/50 rounded-xl p-6",children:g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:"Achievement Progress"}),g.jsxs("p",{className:"text-gray-400",children:[n," of ",s," achievements unlocked"]})]}),g.jsxs("div",{className:"w-full md:w-64",children:[g.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/70 rounded-full transition-all duration-1000",style:{width:`${i}%`}})}),g.jsxs("p",{className:"text-sm text-right text-gray-400 mt-1",children:[i,"% Complete"]})]})]})}),g.jsx("div",{className:"flex space-x-2 p-1 bg-gray-800/50 rounded-lg",children:[{id:"all",label:"All Achievements"},{id:"unlocked",label:"Unlocked"},{id:"locked",label:"Locked"}].map(o=>g.jsx("button",{onClick:()=>t(o.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===o.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:o.label},o.id))}),r.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(o=>g.jsxs("div",{className:`relative p-5 rounded-xl border-2 transition-all duration-200 ${o.unlocked?hqe(o.rarity):"bg-gray-800/30 border-gray-700 opacity-60"}`,children:[g.jsxs("div",{className:"flex items-start space-x-4",children:[g.jsx("div",{className:"flex-shrink-0 w-14 h-14 rounded-full bg-gray-700 flex items-center justify-center text-2xl",children:o.icon}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h3",{className:`text-lg font-semibold ${o.unlocked?"text-white":"text-gray-400"}`,children:o.title}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:o.description}),!o.unlocked&&g.jsxs("div",{className:"mt-2",children:[g.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:g.jsx("div",{className:"bg-primary h-1.5 rounded-full",style:{width:`${o.progress}%`}})}),g.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[o.progress,"% complete"]})]})]})]}),o.unlocked&&o.date&&g.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700",children:g.jsxs("p",{className:"text-xs text-gray-400",children:["Unlocked on ",new Date(o.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})}),o.unlocked&&g.jsx("div",{className:"absolute top-3 right-3",children:g.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]},o.id))}):g.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[g.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:g.jsx(VA,{className:"w-8 h-8 text-gray-500"})}),g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:e==="unlocked"?"You haven't unlocked any achievements yet":"No locked achievements found"}),g.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:e==="unlocked"?"Start reading and completing texts to unlock achievements!":"You've unlocked all available achievements! More coming soon."})]})]})},pqe=()=>{const[e,t]=v.useState({theme:"dark",fontSize:"medium",notifications:!0,emailNotifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,readingMode:"paginated",autoSave:!0,showProgress:!0,showWordCount:!0}),r=a=>{const{name:l,value:c,type:u}=a.target,h=a.target.checked;t(f=>({...f,[l]:u==="checkbox"?h:c}))},n=a=>{a.preventDefault(),console.log("Saving settings:",e)},s=()=>{window.confirm("Are you sure you want to reset all preferences to default?")&&t({theme:"dark",fontSize:"medium",notifications:!0,emailNotifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,readingMode:"paginated",autoSave:!0,showProgress:!0,showWordCount:!0})},i=({title:a,children:l})=>g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:a}),g.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-gray-700",children:l})]}),o=({label:a,description:l,children:c})=>g.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 py-3 border-b border-gray-700/50 last:border-0",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-sm font-medium text-white",children:a}),l&&g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:l})]}),g.jsx("div",{className:"sm:w-48",children:c})]});return g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Preferences"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Customize your experience on our platform."})]}),g.jsxs("form",{onSubmit:n,className:"space-y-8",children:[g.jsxs(i,{title:"Appearance",children:[g.jsx(o,{label:"Theme",description:"Choose between light and dark themes",children:g.jsxs("select",{name:"theme",value:e.theme,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[g.jsx("option",{value:"light",children:"Light"}),g.jsx("option",{value:"dark",children:"Dark"}),g.jsx("option",{value:"system",children:"System Default"})]})}),g.jsx(o,{label:"Font Size",description:"Adjust the text size across the application",children:g.jsxs("select",{name:"fontSize",value:e.fontSize,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[g.jsx("option",{value:"small",children:"Small"}),g.jsx("option",{value:"medium",children:"Medium"}),g.jsx("option",{value:"large",children:"Large"})]})})]}),g.jsxs(i,{title:"Notifications",children:[g.jsx(o,{label:"Enable Notifications",description:"Receive browser notifications",children:g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[g.jsx("input",{type:"checkbox",name:"notifications",id:"notifications",checked:e.notifications,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),g.jsx("label",{htmlFor:"notifications",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.notifications?"bg-primary":"bg-gray-600"}`})]})}),g.jsx(o,{label:"Email Notifications",description:"Receive notifications via email",children:g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[g.jsx("input",{type:"checkbox",name:"emailNotifications",id:"emailNotifications",checked:e.emailNotifications,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),g.jsx("label",{htmlFor:"emailNotifications",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.emailNotifications?"bg-primary":"bg-gray-600"}`})]})})]}),g.jsxs(i,{title:"Reading",children:[g.jsx(o,{label:"Reading Mode",description:"Choose how content is displayed",children:g.jsxs("select",{name:"readingMode",value:e.readingMode,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[g.jsx("option",{value:"paginated",children:"Paginated"}),g.jsx("option",{value:"scrolling",children:"Scrolling"})]})}),g.jsx(o,{label:"Auto-save Progress",description:"Automatically save your reading progress",children:g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[g.jsx("input",{type:"checkbox",name:"autoSave",id:"autoSave",checked:e.autoSave,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),g.jsx("label",{htmlFor:"autoSave",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.autoSave?"bg-primary":"bg-gray-600"}`})]})}),g.jsx(o,{label:"Show Reading Progress",description:"Display progress indicators while reading",children:g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[g.jsx("input",{type:"checkbox",name:"showProgress",id:"showProgress",checked:e.showProgress,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),g.jsx("label",{htmlFor:"showProgress",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.showProgress?"bg-primary":"bg-gray-600"}`})]})}),g.jsx(o,{label:"Show Word Count",description:"Display word count for texts",children:g.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[g.jsx("input",{type:"checkbox",name:"showWordCount",id:"showWordCount",checked:e.showWordCount,onChange:r,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),g.jsx("label",{htmlFor:"showWordCount",className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${e.showWordCount?"bg-primary":"bg-gray-600"}`})]})})]}),g.jsxs(i,{title:"Language & Region",children:[g.jsx(o,{label:"Language",description:"Select your preferred language",children:g.jsxs("select",{name:"language",value:e.language,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[g.jsx("option",{value:"en",children:"English"}),g.jsx("option",{value:"es",children:"Español"}),g.jsx("option",{value:"fr",children:"Français"}),g.jsx("option",{value:"de",children:"Deutsch"}),g.jsx("option",{value:"fa",children:"فارسی"}),g.jsx("option",{value:"gu",children:"ગુજરાતી"})]})}),g.jsx(o,{label:"Time Zone",description:"Set your local time zone",children:g.jsxs("select",{name:"timezone",value:e.timezone,onChange:r,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary focus:border-transparent",children:[g.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),g.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),g.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),g.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),g.jsx("option",{value:"Europe/London",children:"London (GMT)"}),g.jsx("option",{value:"Europe/Paris",children:"Paris (CET)"}),g.jsx("option",{value:"Asia/Tehran",children:"Tehran (IRST)"}),g.jsx("option",{value:"Asia/Kolkata",children:"Mumbai (IST)"})]})})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 pt-6 border-t border-gray-700",children:[g.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:"Reset to Defaults"}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium border border-gray-600 text-gray-300 hover:bg-gray-700/50 rounded-lg transition-colors",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 rounded-lg transition-colors",children:"Save Changes"})]})]})]}),g.jsx("style",{children:`
        .toggle-checkbox:checked {
          right: 0;
          border-color: #68D391;
        }
        .toggle-checkbox:checked + .toggle-label {
          background-color: #68D391;
        }
      `})]})},mqe=()=>{const[e,t]=v.useState("overview"),[r,n]=v.useState(""),[s,i]=v.useState(""),[o,a]=v.useState(""),[l,c]=v.useState(!1),[u,h]=v.useState([]),[f,p]=v.useState(!1),[y,m]=v.useState(!1),[b,x]=v.useState(""),[w,_]=v.useState(""),j=[{id:"1",device:"Windows 10, Chrome",location:"New York, US",ip:"192.168.1.1",lastActive:"2 hours ago",current:!0},{id:"2",device:"iPhone 13, Safari",location:"San Francisco, US",ip:"203.0.113.1",lastActive:"1 week ago",current:!1},{id:"3",device:"MacBook Pro, Safari",location:"London, UK",ip:"198.51.100.1",lastActive:"2 weeks ago",current:!1}],k=[{id:"1",type:"login",description:"Successful login from New York, US",device:"Windows 10, Chrome",ip:"192.168.1.1",timestamp:"2023-11-15T14:30:00Z",status:"success"},{id:"2",type:"password_change",description:"Password changed",device:"iPhone 13, Safari",ip:"203.0.113.1",timestamp:"2023-11-10T09:15:00Z",status:"info"},{id:"3",type:"failed_login",description:"Failed login attempt",device:"Unknown",ip:"198.51.100.1",timestamp:"2023-11-05T18:45:00Z",status:"warning"}],N=async O=>{if(O.preventDefault(),x(""),_(""),s!==o){x("New passwords do not match");return}if(s.length<8){x("Password must be at least 8 characters long");return}m(!0);try{await new Promise(I=>setTimeout(I,1e3)),_("Password changed successfully"),n(""),i(""),a("")}catch{x("Failed to change password. Please try again.")}finally{m(!1)}},C=async()=>{m(!0);try{await new Promise(I=>setTimeout(I,1e3)),c(!0);const O=Array.from({length:10},()=>Math.random().toString(36).substring(2,8).toUpperCase());h(O),p(!0),_("Two-factor authentication has been enabled")}catch{x("Failed to enable two-factor authentication")}finally{m(!1)}},E=async()=>{if(window.confirm("Are you sure you want to disable two-factor authentication? This will make your account less secure.")){m(!0);try{await new Promise(O=>setTimeout(O,1e3)),c(!1),h([]),_("Two-factor authentication has been disabled")}catch{x("Failed to disable two-factor authentication")}finally{m(!1)}}},T=async()=>{if(window.confirm("Are you sure you want to revoke this session?")){m(!0);try{await new Promise(O=>setTimeout(O,800)),_("Session has been revoked")}catch{x("Failed to revoke session")}finally{m(!1)}}},P=O=>new Date(O).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"pb-4 border-b border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-white",children:"Security Settings"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your account security and privacy settings."})]}),g.jsx("div",{className:"flex space-x-2 p-1 bg-gray-800/50 rounded-lg",children:[{id:"overview",label:"Overview"},{id:"sessions",label:"Active Sessions"},{id:"activity",label:"Security Activity"}].map(O=>g.jsx("button",{onClick:()=>t(O.id),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===O.id?"bg-primary text-white":"text-gray-300 hover:bg-gray-700/50"}`,children:O.label},O.id))}),b&&g.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 text-red-300 rounded-lg",children:b}),w&&g.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/30 text-green-300 rounded-lg",children:w}),f&&g.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Save Your Backup Codes"}),g.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),g.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Save these backup codes in a safe place. You can use them to access your account if you lose access to your authenticator app."}),g.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:u.map((O,I)=>g.jsx("div",{className:"bg-gray-700/50 p-2 rounded text-center font-mono",children:O},I))}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"I've saved my codes"})})]})}),e==="overview"&&g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Change Password"}),g.jsxs("form",{onSubmit:N,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),g.jsx("input",{type:"password",id:"currentPassword",value:r,onChange:O=>n(O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),g.jsx("input",{type:"password",id:"newPassword",value:s,onChange:O=>i(O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),g.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:O=>a(O.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),g.jsx("div",{className:"pt-2",children:g.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:y?"Updating...":"Update Password"})})]})]}),g.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Two-Factor Authentication"}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l?"Two-factor authentication is currently enabled.":"Add an extra layer of security to your account."})]}),l?g.jsx("button",{onClick:E,disabled:y,className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors disabled:opacity-50",children:y?"Disabling...":"Disable 2FA"}):g.jsx("button",{onClick:C,disabled:y,className:"px-4 py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors disabled:opacity-50",children:y?"Enabling...":"Enable 2FA"})]}),l&&u.length>0&&g.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:g.jsx("button",{onClick:()=>p(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"View Backup Codes"})})]}),g.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-3",children:"Security Tips"}),g.jsxs("ul",{className:"space-y-3 text-sm text-blue-200",children:[g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"mr-2",children:"🔒"}),g.jsx("span",{children:"Use a strong, unique password that you don't use elsewhere."})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"mr-2",children:"🔑"}),g.jsx("span",{children:"Enable two-factor authentication for added security."})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"mr-2",children:"👀"}),g.jsx("span",{children:"Regularly review your active sessions and revoke any that look suspicious."})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"mr-2",children:"📧"}),g.jsx("span",{children:"Make sure your email account is secure, as it can be used to reset your password."})]})]})]})]}),e==="sessions"&&g.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Active Sessions"}),g.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"This is a list of devices that have logged into your account. Revoke any sessions that you don't recognize."}),g.jsx("div",{className:"space-y-4",children:j.map(O=>g.jsx("div",{className:`p-4 rounded-lg ${O.current?"bg-primary/10 border border-primary/30":"bg-gray-700/50"}`,children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"font-medium text-white",children:O.device}),O.current&&g.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-primary/20 text-primary rounded-full",children:"Current Session"})]}),g.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[O.location," • ",O.ip]}),g.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last active: ",O.lastActive]})]}),!O.current&&g.jsx("button",{onClick:T,disabled:y,className:"px-3 py-1 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors disabled:opacity-50",children:"Revoke"})]})},O.id))})]})}),e==="activity"&&g.jsx("div",{className:"bg-gray-800/50 rounded-xl overflow-hidden",children:g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Security Activity"}),g.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Review recent security events related to your account."}),g.jsx("div",{className:"space-y-4",children:k.map(O=>g.jsx("div",{className:"p-4 bg-gray-700/30 rounded-lg",children:g.jsxs("div",{className:"flex items-start",children:[g.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${O.status==="success"?"bg-green-500":O.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),g.jsxs("div",{className:"ml-4 flex-1",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("h4",{className:"font-medium text-white",children:O.description}),g.jsx("span",{className:"text-xs text-gray-500",children:P(O.timestamp)})]}),g.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[O.device," • ",O.ip]})]})]})},O.id))}),g.jsx("div",{className:"mt-6 text-center",children:g.jsx("button",{className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"View All Activity"})})]})})]})},gqe=()=>g.jsxs("div",{className:"text-gray-100",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Admin Dashboard"}),g.jsx("p",{children:"Admin specific content and tools."})]}),yqe=()=>{var w;const e=uo(),t=Fs(),[r,n]=v.useState("overview"),{user:s,userProfile:i,isAdmin:o,isLoading:a,isAuthenticated:l}=kh(),[c,u]=v.useState({isSubscribed:!1,subscriptionTier:"free",betaReaderStatus:"not_applied",subscriptionEndDate:void 0,booksRead:0,readingHours:0,currentlyReading:"",achievements:0,username:"User"});v.useEffect(()=>{!a&&!l&&e("/login")},[a,l,e]),v.useEffect(()=>{const _=t.pathname.split("/").pop()||"overview";n(_==="account"?"overview":_)},[t]);const h=[{id:"overview",name:"Overview",icon:g.jsx(XUe,{size:18}),path:"/account"},{id:"profile",name:"Profile",icon:g.jsx(zb,{size:18}),path:"/account/profile"},{id:"reading",name:"Reading",icon:g.jsx(Pd,{size:18}),path:"/account/reading"},{id:"achievements",name:"Achievements",icon:g.jsx(VA,{size:18}),path:"/account/achievements"},{id:"preferences",name:"Preferences",icon:g.jsx(tqe,{size:18}),path:"/account/preferences"},{id:"security",name:"Security",icon:g.jsx(gK,{size:18}),path:"/account/security"}],f=v.useMemo(()=>[...h],[]),{data:p,isLoading:y}=It({queryKey:["userStats",s==null?void 0:s.id],queryFn:()=>pJ(s.id),enabled:!!(s!=null&&s.id)}),{data:m,isLoading:b}=It({queryKey:["subscription",s==null?void 0:s.id],queryFn:()=>dJ(s.id),enabled:!!(s!=null&&s.id)});v.useEffect(()=>{i&&u(_=>{var j;return{..._,username:i.username||((j=s==null?void 0:s.email)==null?void 0:j.split("@")[0])||"User",betaReaderStatus:i.beta_reader_status||"not_applied"}}),p&&u(_=>({..._,booksRead:p.books_read||0,readingHours:p.reading_hours||0,currentlyReading:p.currently_reading||"",achievements:p.achievements||0})),m&&u(_=>({..._,isSubscribed:!0,subscriptionTier:m.plan_id,subscriptionEndDate:m.current_period_end}))},[s,i,p,m]);const x=async()=>{await ce.auth.signOut(),e("/login")};return a||l&&(!i||y||b)?g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-background-darker flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),g.jsx("p",{className:"mt-4 text-gray-400",children:"Loading your profile..."})]})}):!l||!s?null:g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background-dark to-background-darker text-text-light",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[g.jsxs("aside",{className:"w-full lg:w-64 flex-shrink-0",children:[g.jsxs("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl overflow-hidden border border-gray-800",children:[g.jsxs("div",{className:"p-6 text-center border-b border-gray-800",children:[g.jsxs("div",{className:"relative inline-block",children:[g.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-4xl font-bold text-white",children:(w=s==null?void 0:s.email)==null?void 0:w.charAt(0).toUpperCase()}),g.jsx("button",{className:"absolute -bottom-1 -right-1 bg-primary w-8 h-8 rounded-full flex items-center justify-center text-white hover:bg-primary/90 transition-colors",children:g.jsx(zb,{size:16})})]}),g.jsx("h2",{className:"mt-4 text-xl font-semibold text-white",children:(i==null?void 0:i.display_name)||(i==null?void 0:i.username)}),g.jsx("p",{className:"text-sm text-gray-400",children:o?"Admin":"Member"})]}),g.jsx("nav",{className:"p-2",children:g.jsx("ul",{className:"space-y-1",children:f.map(_=>g.jsx("li",{children:g.jsxs(md,{to:_.path,end:_.path==="/account",className:({isActive:j})=>`flex items-center justify-between px-4 py-3 rounded-lg transition-colors duration-200 ${j?"bg-primary/10 text-primary":"text-gray-300 hover:bg-gray-800/50 hover:text-white"}`,children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"mr-3",children:_.icon}),_.name]}),g.jsx(KUe,{size:16,className:"text-gray-500"})]})},_.id))})})]}),r==="overview"&&g.jsxs("div",{className:"mt-6 bg-background-light/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-4",children:"YOUR STATS"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-indigo-500/10 flex items-center justify-center text-indigo-400",children:g.jsx(Pd,{size:16})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Books Read"}),g.jsx("p",{className:"text-lg font-semibold text-white",children:c.booksRead})]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center text-green-400",children:g.jsx(BS,{size:16})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Reading Hours"}),g.jsxs("p",{className:"text-lg font-semibold text-white",children:[c.readingHours,"h"]})]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-400",children:g.jsx(pK,{size:16})}),g.jsxs("div",{className:"ml-3",children:[g.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Currently Reading"}),g.jsx("p",{className:"text-lg font-semibold text-white",children:c.currentlyReading||"None"})]})]})]})]})]}),g.jsx("main",{className:"flex-1",children:g.jsx("div",{className:"bg-background-light/50 backdrop-blur-sm rounded-xl border border-gray-800 overflow-hidden",children:g.jsxs("div",{className:"p-6",children:[g.jsxs(DM,{children:[g.jsx(Te,{path:"/",element:g.jsx(lqe,{userId:s.id,isSubscribed:c.isSubscribed,subscriptionTier:c.subscriptionTier,betaReaderStatus:c.betaReaderStatus,subscriptionEndDate:c.subscriptionEndDate,booksRead:c.booksRead,readingHours:c.readingHours,currentlyReading:c.currentlyReading,achievements:c.achievements,username:c.username,onSignOut:x})}),g.jsx(Te,{path:"profile",element:g.jsx(cqe,{})}),g.jsx(Te,{path:"reading",element:g.jsx(dqe,{})}),g.jsx(Te,{path:"achievements",element:g.jsx(fqe,{})}),g.jsx(Te,{path:"preferences",element:g.jsx(pqe,{})}),g.jsx(Te,{path:"security",element:g.jsx(mqe,{})}),o&&g.jsx(Te,{path:"admin/*",element:g.jsx(gqe,{})})]}),g.jsx(GS,{})]})})})]})})})},vqe=()=>{const e=v.useRef(null),t=v.useRef({}),r=v.useRef({}),[n,s]=v.useState({fullName:"",preferredName:"",email:"",timezone:"",country:"",portfolioLinks:"",specialties:[],tools:[],availability:"",startDate:"",commitment:"",bestPieces:"",makingOfNotes:"",visualInfluences:"",worldVisualization:"",feedbackProcess:"",colorGrading:"",references:"",turnaround:"",revisionPolicy:"",revenueShareWilling:"",preferredTrack:"",taxConstraints:"",projectPortal:!1,ndaAcceptance:!1,originalityConfirm:!1,rightsConfirm:!1,signature:"",signatureDate:new Date().toISOString().split("T")[0]}),i=f=>{const{name:p,value:y,type:m,checked:b}=f.target;s(m==="checkbox"?x=>{const w=x[p]||[];return b?{...x,[p]:[...w,y]}:{...x,[p]:w.filter(_=>_!==y)}}:m==="radio"?x=>({...x,[p]:y}):x=>({...x,[p]:y}))},o=(f,p)=>{const y=f.target.files;s(m=>({...m,[p]:y})),a(f.target)},a=(f,p)=>{const y=f.closest(".file-upload");if(!y)return;const m=f.files?f.files.length:0,b=y.querySelector("p");b&&(m>0?(b.innerHTML=`${m} file(s) selected<br><small>Ready to upload</small>`,y.style.backgroundColor="#e8f5e8"):(b.innerHTML="Drop files here or click to browse<br><small>JPG/PNG, max 5MB per file</small>",y.style.backgroundColor="white"))},l=f=>{f.preventDefault(),f.currentTarget.style.backgroundColor="#f0f8ff"},c=f=>{f.preventDefault(),f.currentTarget.style.backgroundColor="white"},u=(f,p)=>{f.preventDefault(),f.currentTarget.style.backgroundColor="#e8f5e8";const y=f.dataTransfer.files;t.current[p]&&(t.current[p].files=y,s(m=>({...m,[p]:y})),a(t.current[p]))},h=f=>{f.preventDefault(),console.log("Application data:",n),alert("Thank you for your application! We'll review your submission and get back to you within 1-2 weeks.")};return v.useEffect(()=>{var p,y,m;const f=(p=document.getElementById("preferredTrack"))==null?void 0:p.closest(".form-group");f&&(n.revenueShareWilling==="yes"?(f.style.display="block",(y=document.getElementById("preferredTrack"))==null||y.setAttribute("required","required")):(f.style.display="none",(m=document.getElementById("preferredTrack"))==null||m.removeAttribute("required"),s(b=>({...b,preferredTrack:""}))))},[n.revenueShareWilling]),v.useEffect(()=>{Object.entries(r.current).forEach(([f,p])=>{var y;if(p){const m=parseInt(p.getAttribute("data-maxlength")||"1000");let b=p.nextElementSibling;(!b||!b.classList.contains("char-counter"))&&(b=document.createElement("small"),b.classList.add("char-counter"),b.style.display="block",b.style.textAlign="right",b.style.color="var(--muted-foreground)",b.style.marginTop="0.25rem",(y=p.parentNode)==null||y.insertBefore(b,p.nextSibling));const x=()=>{const w=p.value.length;b.textContent=`${w}/${m} characters`,w>m*.9?b.style.color="var(--destructive)":w>m*.7?b.style.color="var(--accent)":b.style.color="var(--muted-foreground)"};return p.addEventListener("input",x),x(),()=>{p.removeEventListener("input",x)}}})},[n]),v.useEffect(()=>{var b;const f=document.createElement("div");f.style.cssText=`
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--border); /* Using CSS variable */
            z-index: 1000;
            transition: all 0.3s ease;
        `;const p=document.createElement("div");p.style.cssText=`
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%); /* Using CSS variables */
            width: 0%;
            transition: width 0.3s ease;
        `,f.appendChild(p),document.body.prepend(f);const y=()=>{if(!e.current)return;const x=Array.from(e.current.querySelectorAll("[required]")),w=x.filter(k=>k.type==="checkbox"||k.type==="radio"?k.checked:k.value.trim()!=="").length,_=x.length,j=_>0?w/_*100:0;p.style.width=`${j}%`},m=(b=e.current)==null?void 0:b.querySelectorAll("input, select, textarea");return m==null||m.forEach(x=>{x.addEventListener("input",y),x.addEventListener("change",y)}),y(),()=>{f.remove(),m==null||m.forEach(x=>{x.removeEventListener("input",y),x.removeEventListener("change",y)})}},[]),g.jsxs("div",{className:"max-w-7xl mx-auto bg-card shadow-lg rounded-xl overflow-hidden my-8",children:[" ",g.jsxs("div",{className:"relative p-12 text-center text-white bg-gradient-to-br from-gray-800 to-gray-900 overflow-hidden",children:[" ",g.jsx("div",{className:"absolute inset-0",style:{background:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.08)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>') repeat`,opacity:.3}}),g.jsx("h1",{className:"text-4xl font-bold mb-2 relative z-10",children:"Artist Collaboration Program"})," ",g.jsx("p",{className:"text-lg opacity-90 relative z-10",children:"Shape the visual identity of the Zangar/Spandam Series"})," "]}),g.jsxs("div",{className:"p-12",children:[" ",g.jsxs("div",{className:"bg-background p-8 rounded-lg mb-12 border-l-4 border-primary",children:[" ",g.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Join Our Creative Vision"})," ",g.jsxs("p",{className:"text-lg mb-4",children:["We're seeking ",g.jsx("strong",{children:"1-2 talented artists"}),' to collaborate on bringing to life a world of cliffside megacities, sky-splitting space elevators, and civilizations locked in "soft war." This is a unique revenue-share collaboration opportunity where your creative vision helps shape an entire series.']})," ",g.jsx("p",{className:"text-lg mb-4",children:"No upfront payment required - you'll earn meaningful percentages of book revenue with transparent reporting and fair compensation structures designed to reward your contribution over time."})," "]}),g.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent text-white p-6 rounded-lg my-8",children:[" ",g.jsx("h3",{className:"text-2xl font-bold mb-4",children:"What We're Looking For"})," ",g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 my-8",children:[" ",g.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[" ",g.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Cover Art"})," ",g.jsx("p",{children:"Stunning key art that captures the epic scope and Persian/Zoroastrian-influenced aesthetic of our megastructures"})]}),g.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[g.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Interior Illustrations"}),g.jsx("p",{children:"6-12 atmospheric pieces that enhance key scenes and world-building moments"})]}),g.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[g.jsx("h4",{className:"text-xl font-semibold mb-2",children:"World Design"}),g.jsx("p",{children:"Clan sigils, glyphs, UI ornaments, and visual motifs that define our world's identity"})]}),g.jsxs("div",{className:"bg-card p-6 rounded-lg border-l-4 border-primary text-foreground",children:[g.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Marketing Assets"}),g.jsx("p",{children:"Website heroes, social banners, and promotional materials that drive engagement"})]})]})]}),g.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Fair Compensation Structure"}),g.jsx("p",{className:"text-lg mb-4",children:"Choose the track that works best for your situation:"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 my-8",children:[" ",g.jsxs("div",{className:"bg-card border-2 border-border rounded-lg p-6 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-xl hover:border-primary",children:[" ",g.jsx("h4",{className:"text-xl font-semibold text-primary mb-4",children:"Track A: Higher Percentage, Shorter Term"})," ",g.jsxs("ul",{className:"list-disc list-inside text-foreground",children:[g.jsxs("li",{children:[g.jsx("strong",{children:"Primary Cover:"})," 5% net revenue for 12 months (cap: $7,500)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Secondary/Marketing Art:"})," 2.5% for 12 months (cap: $3,500)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Interior Pack (6-12 images):"})," 1.5% for 12 months (cap: $2,000)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Motifs/UI Package:"})," 1.0% for 12 months (cap: $1,200)"]})]})]}),g.jsxs("div",{className:"bg-card border-2 border-border rounded-lg p-6 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-xl hover:border-primary",children:[g.jsx("h4",{className:"text-xl font-semibold text-primary mb-4",children:"Track B: Lower Percentage, Longer Term"}),g.jsxs("ul",{className:"list-disc list-inside text-foreground",children:[g.jsxs("li",{children:[g.jsx("strong",{children:"Primary Cover:"})," 3% net revenue for 24 months (cap: $7,500)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Secondary/Marketing Art:"})," 1.5% for 24 months (cap: $3,500)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Interior Pack:"})," 1.0% for 24 months (cap: $2,000)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Motifs/UI:"})," 0.75% for 24 months (cap: $1,200)"]})]})]})]}),g.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent text-white p-6 rounded-lg my-8",children:[" ",g.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Transparency & Trust"}),g.jsxs("p",{className:"mb-2",children:[g.jsx("strong",{children:"Quarterly financial statements"})," with itemized revenue calculations"]}),g.jsxs("p",{className:"mb-2",children:[g.jsx("strong",{children:"Payment within 30 days"})," of each quarter end"]}),g.jsxs("p",{className:"mb-2",children:[g.jsx("strong",{children:"Right to audit"})," statements once per year"]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Milestone bonuses"})," if the book crosses $50,000 in net revenue"]})]}),g.jsxs("div",{className:"bg-background p-8 rounded-lg mt-12",children:[" ",g.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Application Form"}),g.jsxs("form",{ref:e,onSubmit:h,children:[g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[" ",g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Identity & Contact"]})," ",g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[" ",g.jsxs("div",{className:"mb-4",children:[" ",g.jsxs("label",{htmlFor:"fullName",className:"block mb-2 font-semibold text-muted-foreground",children:["Full Name",g.jsx("span",{className:"text-destructive",children:" *"})]})," ",g.jsx("input",{type:"text",id:"fullName",name:"fullName",required:!0,value:n.fullName,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})," "]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"preferredName",className:"block mb-2 font-semibold text-muted-foreground",children:"Preferred Name/Alias"}),g.jsx("input",{type:"text",id:"preferredName",name:"preferredName",value:n.preferredName,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"email",className:"block mb-2 font-semibold text-muted-foreground",children:["Email",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:n.email,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"timezone",className:"block mb-2 font-semibold text-muted-foreground",children:["Time Zone",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsxs("select",{id:"timezone",name:"timezone",required:!0,value:n.timezone,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[g.jsx("option",{value:"",children:"Select your timezone"}),g.jsx("option",{value:"UTC-12",children:"UTC-12 (Baker Island)"}),g.jsx("option",{value:"UTC-11",children:"UTC-11 (Hawaii)"}),g.jsx("option",{value:"UTC-10",children:"UTC-10 (Alaska)"}),g.jsx("option",{value:"UTC-9",children:"UTC-9 (Pacific)"}),g.jsx("option",{value:"UTC-8",children:"UTC-8 (Mountain)"}),g.jsx("option",{value:"UTC-7",children:"UTC-7 (Central)"}),g.jsx("option",{value:"UTC-6",children:"UTC-6 (Eastern)"}),g.jsx("option",{value:"UTC-5",children:"UTC-5 (Atlantic)"}),g.jsx("option",{value:"UTC+0",children:"UTC+0 (London)"}),g.jsx("option",{value:"UTC+1",children:"UTC+1 (Central Europe)"}),g.jsx("option",{value:"UTC+2",children:"UTC+2 (Eastern Europe)"}),g.jsx("option",{value:"UTC+8",children:"UTC+8 (China/Singapore)"}),g.jsx("option",{value:"UTC+9",children:"UTC+9 (Japan)"})]})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"country",className:"block mb-2 font-semibold text-muted-foreground",children:["Country",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"text",id:"country",name:"country",required:!0,value:n.country,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"portfolioLinks",className:"block mb-2 font-semibold text-muted-foreground",children:["Portfolio Links",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("textarea",{id:"portfolioLinks",name:"portfolioLinks",placeholder:"Please provide links to your portfolio (ArtStation, Behance, personal website, Instagram, etc.)",required:!0,value:n.portfolioLinks,onChange:i,ref:f=>{r.current.portfolioLinks=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Art Focus & Availability"]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block mb-2 font-semibold text-muted-foreground",children:"Primary Specialties (check all that apply)"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2",children:[" ",g.jsxs("div",{className:"flex items-center",children:[" ",g.jsx("input",{type:"checkbox",id:"coverIll",name:"specialties",value:"cover-illustration",onChange:i,checked:n.specialties.includes("cover-illustration"),className:"w-auto mr-2"})," ",g.jsx("label",{htmlFor:"coverIll",children:"Cover Illustration"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"charDesign",name:"specialties",value:"character-design",onChange:i,checked:n.specialties.includes("character-design"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"charDesign",children:"Character Design"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"environment",name:"specialties",value:"environment",onChange:i,checked:n.specialties.includes("environment"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"environment",children:"Environment Art"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"uiMotifs",name:"specialties",value:"ui-motifs",onChange:i,checked:n.specialties.includes("ui-motifs"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"uiMotifs",children:"UI/Sigil Design"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"typography",name:"specialties",value:"typography",onChange:i,checked:n.specialties.includes("typography"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"typography",children:"Typography"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"marketing",name:"specialties",value:"marketing",onChange:i,checked:n.specialties.includes("marketing"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"marketing",children:"Marketing Visuals"})]})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block mb-2 font-semibold text-muted-foreground",children:"Tools/Software (check all that apply)"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"photoshop",name:"tools",value:"photoshop",onChange:i,checked:n.tools.includes("photoshop"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"photoshop",children:"Photoshop"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"procreate",name:"tools",value:"procreate",onChange:i,checked:n.tools.includes("procreate"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"procreate",children:"Procreate"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"clipstudio",name:"tools",value:"clip-studio",onChange:i,checked:n.tools.includes("clip-studio"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"clipstudio",children:"Clip Studio"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"blender",name:"tools",value:"blender",onChange:i,checked:n.tools.includes("blender"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"blender",children:"Blender"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"illustrator",name:"tools",value:"illustrator",onChange:i,checked:n.tools.includes("illustrator"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"illustrator",children:"Illustrator"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"other",name:"tools",value:"other",onChange:i,checked:n.tools.includes("other"),className:"w-auto mr-2"}),g.jsx("label",{htmlFor:"other",children:"Other"})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"availability",className:"block mb-2 font-semibold text-muted-foreground",children:["Weekly Availability",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsxs("select",{id:"availability",name:"availability",required:!0,value:n.availability,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[g.jsx("option",{value:"",children:"Select availability"}),g.jsx("option",{value:"10-15",children:"10-15 hours/week"}),g.jsx("option",{value:"15-25",children:"15-25 hours/week"}),g.jsx("option",{value:"25+",children:"25+ hours/week"}),g.jsx("option",{value:"project-sprints",children:"Project-only sprints"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"startDate",className:"block mb-2 font-semibold text-muted-foreground",children:["Earliest Start Date",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"date",id:"startDate",name:"startDate",required:!0,value:n.startDate,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"commitment",className:"block mb-2 font-semibold text-muted-foreground",children:"Time Commitment Window"}),g.jsx("input",{type:"text",id:"commitment",name:"commitment",placeholder:"e.g., 'I can commit for 3 months' or 'Available through Q2 2025'",value:n.commitment,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Portfolio & Samples"]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"portfolioUpload",className:"block mb-2 font-semibold text-muted-foreground",children:"Portfolio Upload (3-6 images, optional)"}),g.jsxs("div",{className:"file-upload border-2 border-dashed border-primary rounded-lg p-8 text-center bg-card transition-colors duration-300 ease-in-out hover:bg-blue-50",onDragOver:l,onDragLeave:c,onDrop:f=>u(f,"portfolioUpload"),children:[" ",g.jsx("input",{type:"file",id:"portfolioUpload",name:"portfolioUpload",multiple:!0,accept:"image/*",onChange:f=>o(f,"portfolioUpload"),ref:f=>{t.current.portfolioUpload=f},className:"hidden"})," ",g.jsxs("p",{className:"text-muted-foreground",children:["Drop files here or ",g.jsx("span",{className:"text-primary cursor-pointer",onClick:()=>{var f;return(f=t.current.portfolioUpload)==null?void 0:f.click()},children:"click to browse"}),g.jsx("br",{}),g.jsx("small",{children:"JPG/PNG, max 5MB per file"})]})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"bestPieces",className:"block mb-2 font-semibold text-muted-foreground",children:["Direct Links to 3-5 Best Pieces",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("textarea",{id:"bestPieces",name:"bestPieces",placeholder:"Please provide direct links to your best work that showcases your style and skill",required:!0,value:n.bestPieces,onChange:i,ref:f=>{r.current.bestPieces=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"customSample",className:"block mb-2 font-semibold text-muted-foreground",children:"Custom Sample for This Project (optional)"}),g.jsxs("div",{className:"file-upload border-2 border-dashed border-primary rounded-lg p-8 text-center bg-card transition-colors duration-300 ease-in-out hover:bg-blue-50",children:[g.jsx("input",{type:"file",id:"customSample",name:"customSample",accept:"image/*",onChange:f=>o(f,"customSample"),ref:f=>{t.current.customSample=f},className:"hidden"}),g.jsxs("p",{className:"text-muted-foreground",children:["Upload a custom piece based on our world concept",g.jsx("br",{}),g.jsx("small",{children:"Not required but highly encouraged"})]})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"makingOfNotes",className:"block mb-2 font-semibold text-muted-foreground",children:"Brief Making-of Notes (optional)"}),g.jsx("textarea",{id:"makingOfNotes",name:"makingOfNotes",placeholder:"Describe your approach, tools, or references used (50-150 words)",value:n.makingOfNotes,onChange:i,ref:f=>{r.current.makingOfNotes=f},"data-maxlength":"150",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Style & Fit Questions"]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"visualInfluences",className:"block mb-2 font-semibold text-muted-foreground",children:["Visual Influences for This Project",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("textarea",{id:"visualInfluences",name:"visualInfluences",placeholder:"What visual influences, artists, or styles do you think overlap with this Persian/Zoroastrian-influenced sci-fi world? (100-200 words)",required:!0,value:n.visualInfluences,onChange:i,ref:f=>{r.current.visualInfluences=f},"data-maxlength":"200",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"worldVisualization",className:"block mb-2 font-semibold text-muted-foreground",children:["World Visualization",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("textarea",{id:"worldVisualization",name:"worldVisualization",placeholder:"Describe how you'd visualize: cliffside megacity Vənāsō, space elevator, 'soft war' sky, oath-bound warrior (Hooran) (150-250 words)",required:!0,value:n.worldVisualization,onChange:i,ref:f=>{r.current.worldVisualization=f},"data-maxlength":"250",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"feedbackProcess",className:"block mb-2 font-semibold text-muted-foreground",children:["Feedback & Revision Process",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("textarea",{id:"feedbackProcess",name:"feedbackProcess",placeholder:"How do you handle feedback and revisions? What's your typical process? (100-200 words)",required:!0,value:n.feedbackProcess,onChange:i,ref:f=>{r.current.feedbackProcess=f},"data-maxlength":"200",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"colorGrading",className:"block mb-2 font-semibold text-muted-foreground",children:"Preferred Color Grading"}),g.jsx("input",{type:"text",id:"colorGrading",name:"colorGrading",placeholder:"e.g., 'Cool teals/slates with warm amber accents' or 'Muted earth tones with electric blues'",value:n.colorGrading,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Process & Reliability"]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"references",className:"block mb-2 font-semibold text-muted-foreground",children:"Past Client References or Shipped Work"}),g.jsx("textarea",{id:"references",name:"references",placeholder:"Links to published work, client testimonials, or references (optional)",value:n.references,onChange:i,ref:f=>{r.current.references=f},"data-maxlength":"500",className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 resize-y min-h-[100px]"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"turnaround",className:"block mb-2 font-semibold text-muted-foreground",children:["Typical Turnaround for Single Finished Piece",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsxs("select",{id:"turnaround",name:"turnaround",required:!0,value:n.turnaround,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[g.jsx("option",{value:"",children:"Select timeframe"}),g.jsx("option",{value:"3-5-days",children:"3-5 days"}),g.jsx("option",{value:"1-2-weeks",children:"1-2 weeks"}),g.jsx("option",{value:"2-4-weeks",children:"2-4 weeks"}),g.jsx("option",{value:">4-weeks",children:"More than 4 weeks"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"revisionPolicy",className:"block mb-2 font-semibold text-muted-foreground",children:["Revision Policy",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"text",id:"revisionPolicy",name:"revisionPolicy",placeholder:"e.g., '2 rounds of revisions included, additional rounds at hourly rate'",required:!0,value:n.revisionPolicy,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Compensation Preferences"]}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"radio",name:"revenueShareWilling",value:"yes",required:!0,onChange:i,checked:n.revenueShareWilling==="yes",className:"w-auto mr-2"}),"Yes, I'm willing to work for revenue share until sales begin"]})}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"radio",name:"revenueShareWilling",value:"no",required:!0,onChange:i,checked:n.revenueShareWilling==="no",className:"w-auto mr-2"}),"No, I prefer upfront payment"]})}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"preferredTrack",className:"block mb-2 font-semibold text-muted-foreground",children:"If yes to revenue share, preferred track:"}),g.jsxs("select",{id:"preferredTrack",name:"preferredTrack",value:n.preferredTrack,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50",children:[g.jsx("option",{value:"",children:"Select preferred track"}),g.jsx("option",{value:"track-a",children:"Track A: Higher percentage, 12 months"}),g.jsx("option",{value:"track-b",children:"Track B: Lower percentage, 24 months"}),g.jsx("option",{value:"flexible",children:"Flexible/Open to discussion"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{htmlFor:"taxConstraints",className:"block mb-2 font-semibold text-muted-foreground",children:"Tax or Invoicing Constraints"}),g.jsx("input",{type:"text",id:"taxConstraints",name:"taxConstraints",placeholder:"Any specific requirements for your country/region? (optional)",value:n.taxConstraints,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]}),g.jsxs("div",{className:"mb-8 pb-8 border-b border-border last:border-b-0",children:[g.jsxs("h3",{className:"text-xl font-bold text-foreground mb-4 flex items-center",children:[g.jsx("span",{className:"w-1 h-5 bg-primary mr-2.5 rounded-sm"}),"Legal & Agreements"]}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"checkbox",name:"projectPortal",required:!0,onChange:i,checked:n.projectPortal,className:"w-auto mr-2"}),"I consent to using the project portal/workflow system"]})}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"checkbox",name:"ndaAcceptance",required:!0,onChange:i,checked:n.ndaAcceptance,className:"w-auto mr-2"}),"I accept NDA/Confidentiality requirements"]})}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"checkbox",name:"originalityConfirm",required:!0,onChange:i,checked:n.originalityConfirm,className:"w-auto mr-2"}),"I confirm originality of my work and ability to grant licensing rights"]})}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block mb-2 font-semibold text-muted-foreground",children:[g.jsx("input",{type:"checkbox",name:"rightsConfirm",required:!0,onChange:i,checked:n.rightsConfirm,className:"w-auto mr-2"}),"I confirm my ability to grant project-specific rights as outlined"]})}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"signature",className:"block mb-2 font-semibold text-muted-foreground",children:["Digital Signature",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"text",id:"signature",name:"signature",placeholder:"Type your full name",required:!0,value:n.signature,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{htmlFor:"signatureDate",className:"block mb-2 font-semibold text-muted-foreground",children:["Date",g.jsx("span",{className:"text-destructive",children:" *"})]}),g.jsx("input",{type:"date",id:"signatureDate",name:"signatureDate",required:!0,value:n.signatureDate,onChange:i,className:"w-full p-3 border-2 border-input rounded-md text-base transition-colors duration-300 ease-in-out focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50"})]})]})]}),g.jsx("button",{type:"submit",className:"w-full py-4 px-8 bg-gradient-to-br from-primary to-accent text-white font-semibold text-lg rounded-lg border-none cursor-pointer transition-all duration-300 ease-in-out mt-8 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-primary/50",children:"Apply to Collaborate"})," "]})]})]})]})},bqe=({buttonId:e="YOUR_PAYPAL_BUTTON_ID",text:t="☕ Buy me a coffee",className:r="",qrCodeImage:n="/images/paypal-qr.png"})=>{const[s,i]=v.useState(!1),[o,a]=v.useState(!1),l=()=>{i(!s)},c=u=>{u.stopPropagation()};return g.jsxs("div",{className:`paypal-container ${r}`,children:[g.jsxs("button",{onClick:l,className:`paypal-float ${s?"expanded":""}`,"aria-label":"Support this project via PayPal","aria-expanded":s,children:[t,g.jsx("span",{className:`arrow ${s?"rotated":""}`,children:"▼"})]}),g.jsxs("div",{className:`qr-card ${s?"visible":"hidden"}`,children:[g.jsxs("div",{className:"qr-header",children:[g.jsx("h3",{children:"Support via PayPal"}),g.jsx("button",{onClick:l,className:"close-btn","aria-label":"Close QR code",children:"×"})]}),g.jsxs("div",{className:"qr-content",children:[g.jsx("img",{src:n,alt:"PayPal QR Code",className:"qr-image",onClick:c}),g.jsx("p",{className:"qr-description",children:"Scan with your phone camera or PayPal app"})]})]}),s&&g.jsx("div",{className:"backdrop",onClick:l,"aria-hidden":"true"})]})},uM={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:3001/api",VITE_APP_DESCRIPTION:"Epic fantasy eBooks and subscriptions",VITE_APP_NAME:"Zoroasterverse",VITE_APP_VERSION:"1.0.0",VITE_BACKEND_URL:"http://localhost:3001",VITE_DEBUG:"true",VITE_ENABLE_ANALYTICS:"true",VITE_ENABLE_FILE_PREVIEWS:"true",VITE_ENABLE_STRIPE:"true",VITE_ENABLE_SUBSCRIPTIONS:"true",VITE_GOOGLE_ANALYTICS_ID:"your_ga_id_here",VITE_LOG_LEVEL:"debug",VITE_SENTRY_DSN:"your_sentry_dsn_here",VITE_STRIPE_PUBLISHABLE_KEY:"pk_live_51RxGqHQv3TvmaocsigmbkzARDylf5d34zCKW0INXPNSvz9XPZKWcgSavRvi5TarLZSBNyZR7ROgsMQxSDd0AOdl200sNB27qOy",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wdWt2dm11bXllZ3RrdWtxaW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDM3ODQsImV4cCI6MjA3MDg3OTc4NH0.rqMHc03LOI4z5j1V0b0LHeW6J1fCQOiBm-I10tF82_s",VITE_SUPABASE_URL:"https://opukvvmumyegtkukqint.supabase.co"},xqe=()=>{const e="pk_live_51RxGqHQv3TvmaocsigmbkzARDylf5d34zCKW0INXPNSvz9XPZKWcgSavRvi5TarLZSBNyZR7ROgsMQxSDd0AOdl200sNB27qOy";console.log("🔑 Stripe key loaded:",e),console.log("🔑 Environment variables:",uM);const t=`Found: ${e.substring(0,20)}...`,r=e!=null&&e.startsWith("pk_test_")?"Test Key":e!=null&&e.startsWith("pk_live_")?"Live Key":"Unknown";return g.jsx("div",{style:{minHeight:"100vh",padding:"20px",fontFamily:"Arial, sans-serif"},children:g.jsxs("div",{style:{maxWidth:"500px",margin:"0 auto",border:"1px solid #ccc",borderRadius:"8px",padding:"20px"},children:[g.jsx("h1",{style:{fontSize:"24px",marginBottom:"20px"},children:"Stripe Configuration Test"}),g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("strong",{children:"Stripe Key Status:"}),g.jsx("div",{style:{padding:"10px",margin:"5px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#d4edda",color:"#155724"},children:t})]}),g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("strong",{children:"Key Type:"}),g.jsx("div",{style:{padding:"10px",margin:"5px 0",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#d1ecf1"},children:r})]}),g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("strong",{children:"Environment Variables:"}),g.jsx("div",{style:{padding:"10px",margin:"5px 0",border:"1px solid #ddd",borderRadius:"4px",fontSize:"12px"},children:JSON.stringify(uM,null,2)})]}),g.jsx("button",{onClick:()=>window.location.href="/subscriptions",style:{width:"100%",padding:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Go to Subscriptions Page"})]})})},wqe=()=>{const[e,t]=ae.useState(null),r=nu();return ae.useEffect(()=>{r.pageSlug&&g6(r.pageSlug).then(t)},[r.pageSlug]),g.jsxs(uJ,{children:[g.jsx(fUe,{}),g.jsx(bqe,{}),g.jsxs(DM,{children:[g.jsx(Te,{path:"/login",element:g.jsx(Joe,{})}),g.jsxs(Te,{element:g.jsx(ele,{}),children:[g.jsx(Te,{path:"/",element:g.jsx(Cle,{})}),g.jsx(Te,{path:"/store",element:g.jsx(nqe,{})}),g.jsx(Te,{path:"/checkout",element:g.jsx(a_e,{})}),g.jsx(Te,{path:"/library",element:g.jsx(Tye,{})}),g.jsx(Te,{path:"/subscriptions",element:g.jsx(H0e,{})}),g.jsx(Te,{path:"/subscription-success",element:g.jsx(K0e,{})}),g.jsx(Te,{path:"/stripe-test",element:g.jsx(xqe,{})}),g.jsxs(Te,{path:"/wiki",children:[g.jsx(Te,{index:!0,element:e?g.jsx(b_,{page:e}):g.jsx("div",{children:"Loading..."})}),g.jsx(Te,{path:":folderSlug",element:e?g.jsx(b_,{page:e}):g.jsx("div",{children:"Loading..."})}),g.jsx(Te,{path:":folderSlug/:pageSlug",element:e?g.jsx(b_,{page:e}):g.jsx("div",{children:"Loading..."})})]}),g.jsx(Te,{path:"/timelines",element:g.jsx(UUe,{})}),g.jsx(Te,{path:"/characters",element:g.jsx(J0e,{})}),g.jsx(Te,{path:"/locations",element:g.jsx(X0e,{})}),g.jsx(Te,{path:"/glossary",element:g.jsx(Q0e,{})}),g.jsx(Te,{path:"/reviews",element:g.jsx(e_e,{})}),g.jsx(Te,{path:"/account/*",element:g.jsx(yqe,{})}),g.jsx(Te,{path:"/blog",element:g.jsx(r_e,{})}),g.jsx(Te,{path:"/blog/:slug",element:g.jsx(iqe,{})}),g.jsx(Te,{path:"/beta/application",element:g.jsx(oM,{children:g.jsx(qUe,{})})}),g.jsx(Te,{path:"/artist-collaboration",element:g.jsx(vqe,{})}),g.jsx(Te,{path:"/read/:workId",element:g.jsx(o_e,{})}),g.jsx(Te,{path:"/beta/status",element:g.jsx(i_e,{})}),g.jsx(Te,{path:"/beta/handbook",element:g.jsx(gj,{})}),g.jsx(Te,{path:"/beta/timeline",element:g.jsx(sM,{})}),g.jsx(Te,{path:"/beta/nda",element:g.jsx(gj,{})}),g.jsx(Te,{path:"/beta/feedback",element:g.jsx(gj,{})}),g.jsx(Te,{path:"/beta/portal",element:g.jsx(oM,{children:g.jsx(s_e,{})})}),g.jsx(Te,{path:"/:slug",element:g.jsx(aqe,{})}),g.jsx(Te,{path:"*",element:g.jsx(n_e,{})})]}),g.jsxs(Te,{path:"/account/admin",element:g.jsx(Aae,{children:g.jsx(Tae,{})}),children:[g.jsx(Te,{index:!0,element:g.jsx(TDe,{})}),g.jsx(Te,{path:"homepage-content",element:g.jsx(A3e,{})}),g.jsx(Te,{path:"posts",element:g.jsx(A1e,{})}),g.jsx(Te,{path:"pages",element:g.jsx(X8e,{})}),g.jsx(Te,{path:"characters",element:g.jsx(sUe,{})}),g.jsx(Te,{path:"works",element:g.jsx(uUe,{})}),g.jsx(Te,{path:"upload-work",element:g.jsx(dUe,{})}),g.jsx(Te,{path:"upload-chapter",element:g.jsx(gUe,{})}),g.jsx(Te,{path:"users",element:g.jsx(hUe,{})}),g.jsx(Te,{path:"beta-applications",element:g.jsx(SUe,{})}),g.jsx(Te,{path:"wiki",element:g.jsx(nM,{})}),g.jsx(Te,{path:"wiki/folder/:folderId",element:g.jsx(nM,{})}),g.jsx(Te,{path:"wiki/new",element:g.jsx(qS,{})}),g.jsx(Te,{path:"wiki/edit/:id",element:g.jsx(qS,{})}),g.jsx(Te,{path:"timeline/events",element:g.jsx(sM,{})}),g.jsx(Te,{path:"store",element:g.jsx(jye,{})}),g.jsx(Te,{path:"library",element:g.jsx("div",{children:"Library Management Coming Soon!"})}),g.jsx(Te,{path:"characters",element:g.jsx("div",{children:"Characters Management Coming Soon!"})}),g.jsx(Te,{path:"beta-program",element:g.jsx("div",{children:"Beta Program Management Coming Soon!"})}),g.jsx(Te,{path:"media",element:g.jsx("div",{children:"Media Management Coming Soon!"})}),g.jsx(Te,{path:"settings",element:g.jsx("div",{children:"Settings Coming Soon!"})})]})]})]})},_qe=new Nre;vj.createRoot(document.getElementById("root")).render(g.jsxs(ae.StrictMode,{children:[g.jsxs(zZ,{children:[" ",g.jsx(Are,{client:_qe,children:g.jsx(aJ,{supabaseClient:hK,children:g.jsx(wqe,{})})})]})," "]}));export{Vf as B,Bf as F,oye as H,L$ as K,Hf as U,z$ as Y,pi as Z,ct as a,M$ as b,ic as e,Ly as f,js as m,d as u,Hu as w,Wf as z};
